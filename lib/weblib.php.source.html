<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/weblib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='weblib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/</a> -> <a href="weblib.php.html">weblib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="weblib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="weblib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Library of functions for web output</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * Library of all general-purpose Moodle PHP functions and constants</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * that produce HTML output</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * Other main libraries:</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * - datalib.php - functions that access the database.</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * - moodlelib.php - general-purpose Moodle functions.</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> *</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * @package    core</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * @subpackage lib</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas {@link http://moodle.com}</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> */</span>
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">// Constants.</span>
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">// Define text formatting types ... eventually we can add Wiki, BBcode etc.</span>
<a name="l38"><span class="linenum">  38</span></a>  
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">/**</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * Does all sorts of transformations and filtering.</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> */</span>
<a name="l42"><span class="linenum">  42</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>',   '0');
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">/**</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * Plain HTML (with some tags stripped).</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> */</span>
<a name="l47"><span class="linenum">  47</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>',     '1');
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">/**</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> * Plain text (even tags are printed in full).</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> */</span>
<a name="l52"><span class="linenum">  52</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>',    '2');
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">/**</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> * Wiki-formatted text.</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> * Deprecated: left here just to note that '3' is not used (at the moment)</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> * and to catch any latent wiki-like text (which generates an error)</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * @deprecated since 2005!</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> */</span>
<a name="l60"><span class="linenum">  60</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FORMAT_WIKI')" href="../_constants/FORMAT_WIKI.html" onMouseOver="constPopup(event,'FORMAT_WIKI')">FORMAT_WIKI</a>',     '3');
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">/**</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment"> * Markdown-formatted text http://daringfireball.net/projects/markdown/</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment"> */</span>
<a name="l65"><span class="linenum">  65</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FORMAT_MARKDOWN')" href="../_constants/FORMAT_MARKDOWN.html" onMouseOver="constPopup(event,'FORMAT_MARKDOWN')">FORMAT_MARKDOWN</a>', '4');
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">/**</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * A moodle_url comparison using this flag will return true if the base URLs match, params are ignored.</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> */</span>
<a name="l70"><span class="linenum">  70</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('URL_MATCH_BASE')" href="../_constants/URL_MATCH_BASE.html" onMouseOver="constPopup(event,'URL_MATCH_BASE')">URL_MATCH_BASE</a>', 0);
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">/**</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> * A moodle_url comparison using this flag will return true if the base URLs match and the params of url1 are part of url2.</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> */</span>
<a name="l75"><span class="linenum">  75</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('URL_MATCH_PARAMS')" href="../_constants/URL_MATCH_PARAMS.html" onMouseOver="constPopup(event,'URL_MATCH_PARAMS')">URL_MATCH_PARAMS</a>', 1);
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">/**</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment"> * A moodle_url comparison using this flag will return true if the two URLs are identical, except for the order of the params.</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment"> */</span>
<a name="l80"><span class="linenum">  80</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('URL_MATCH_EXACT')" href="../_constants/URL_MATCH_EXACT.html" onMouseOver="constPopup(event,'URL_MATCH_EXACT')">URL_MATCH_EXACT</a>', 2);
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">// Functions.</span>
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">/**</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment"> * Add quotes to HTML characters.</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment"> *</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment"> * Returns $var with HTML characters (like &quot;&lt;&quot;, &quot;&gt;&quot;, etc.) properly quoted.</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment"> * Related function {@link p()} simply prints the output of this function.</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment"> *</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment"> * @param string $var the string potentially containing HTML characters</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment"> * @return string</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment"> */</span>
<a name="l93"><span class="linenum">  93</span></a>  function <a class="function" onClick="logFunction('s')" href="../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>) {
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>      if (<a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a> === false) {
<a name="l96"><span class="linenum">  96</span></a>          return '0';
<a name="l97"><span class="linenum">  97</span></a>      }
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment">    // When we move to PHP 5.4 as a minimum version, change ENT_QUOTES on the</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">    // next line to ENT_QUOTES | ENT_HTML5 | ENT_SUBSTITUTE, and remove the</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">    // 'UTF-8' argument. Both bring a speed-increase.</span>
<a name="l102"><span class="linenum"> 102</span></a>      return <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/&amp;amp;<span class="comment">#(\d+|x[0-9a-f]+);/i', '&amp;#$1;', htmlspecialchars($var, ENT_QUOTES, 'UTF-8'));</span>
<a name="l103"><span class="linenum"> 103</span></a>  }
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">/**</span>
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment"> * Add quotes to HTML characters.</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment"> *</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment"> * Prints $var with HTML characters (like &quot;&lt;&quot;, &quot;&gt;&quot;, etc.) properly quoted.</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment"> * This function simply calls &amp; displays {@link s()}.</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment"> * @see s()</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment"> *</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment"> * @param string $var the string potentially containing HTML characters</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment"> * @return string</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment"> */</span>
<a name="l115"><span class="linenum"> 115</span></a>  function <a class="function" onClick="logFunction('p')" href="../_functions/p.html" onMouseOver="funcPopup(event,'p')">p</a>(<a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>) {
<a name="l116"><span class="linenum"> 116</span></a>      echo <a class="function" onClick="logFunction('s')" href="../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>);
<a name="l117"><span class="linenum"> 117</span></a>  }
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">/**</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment"> * Does proper javascript quoting.</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment"> *</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment"> * Do not use addslashes anymore, because it does not work when magic_quotes_sybase is enabled.</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment"> *</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment"> * @param mixed $var String, Array, or Object to add slashes to</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment"> * @return mixed quoted result</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment"> */</span>
<a name="l127"><span class="linenum"> 127</span></a>  function <a class="function" onClick="logFunction('addslashes_js')" href="../_functions/addslashes_js.html" onMouseOver="funcPopup(event,'addslashes_js')">addslashes_js</a>(<a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>) {
<a name="l128"><span class="linenum"> 128</span></a>      if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>)) {
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('\\', '\\\\', <a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>);
<a name="l130"><span class="linenum"> 130</span></a>          <a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array('\'', '&quot;', &quot;\n&quot;, &quot;\r&quot;, &quot;\0&quot;), array('\\\'', '\\&quot;', '\\n', '\\r', '\\0'), <a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>);
<a name="l131"><span class="linenum"> 131</span></a>          <a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&lt;/', '&lt;\/', <a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>);   <span class="comment">// XHTML compliance.</span>
<a name="l132"><span class="linenum"> 132</span></a>      } else if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>)) {
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a> = <a class="phpfunction" onClick="logFunction('array_map')" href="../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>('addslashes_js', <a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>);
<a name="l134"><span class="linenum"> 134</span></a>      } else if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>)) {
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = <a class="phpfunction" onClick="logFunction('get_object_vars')" href="../_functions/get_object_vars.html" onMouseOver="phpfuncPopup(event,'get_object_vars')">get_object_vars</a>(<a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>);
<a name="l136"><span class="linenum"> 136</span></a>          foreach (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l137"><span class="linenum"> 137</span></a>              <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="function" onClick="logFunction('addslashes_js')" href="../_functions/addslashes_js.html" onMouseOver="funcPopup(event,'addslashes_js')">addslashes_js</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>);
<a name="l138"><span class="linenum"> 138</span></a>          }
<a name="l139"><span class="linenum"> 139</span></a>          <a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a> = (object)<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>;
<a name="l140"><span class="linenum"> 140</span></a>      }
<a name="l141"><span class="linenum"> 141</span></a>      return <a class="var it235" onMouseOver="hilite(235)" onMouseOut="lolite()" onClick="logVariable('var')" href="../_variables/var.html">$var</a>;
<a name="l142"><span class="linenum"> 142</span></a>  }
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">/**</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment"> * Remove query string from url.</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment"> *</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment"> * Takes in a URL and returns it without the querystring portion.</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment"> *</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment"> * @param string $url the url which may have a query string attached.</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment"> * @return string The remaining URL.</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment"> */</span>
<a name="l152"><span class="linenum"> 152</span></a>  function <a class="function" onClick="logFunction('strip_querystring')" href="../_functions/strip_querystring.html" onMouseOver="funcPopup(event,'strip_querystring')">strip_querystring</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) {
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>      if (<a class="var it18338" onMouseOver="hilite(18338)" onMouseOut="lolite()" onClick="logVariable('commapos')" href="../_variables/commapos.html">$commapos</a> = <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, '?')) {
<a name="l155"><span class="linenum"> 155</span></a>          return <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, 0, <a class="var it18338" onMouseOver="hilite(18338)" onMouseOut="lolite()" onClick="logVariable('commapos')" href="../_variables/commapos.html">$commapos</a>);
<a name="l156"><span class="linenum"> 156</span></a>      } else {
<a name="l157"><span class="linenum"> 157</span></a>          return <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>;
<a name="l158"><span class="linenum"> 158</span></a>      }
<a name="l159"><span class="linenum"> 159</span></a>  }
<a name="l160"><span class="linenum"> 160</span></a>  
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment">/**</span>
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment"> * Returns the name of the current script, WITH the querystring portion.</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment"> *</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment"> * This function is necessary because PHP_SELF and REQUEST_URI and SCRIPT_NAME</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment"> * return different things depending on a lot of things like your OS, Web</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment"> * server, and the way PHP is compiled (ie. as a CGI, module, ISAPI, etc.)</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment"> * &lt;b&gt;NOTE:&lt;/b&gt; This function returns false if the global variables needed are not set.</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment"> *</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment"> * @return mixed String or false if the global variables needed are not set.</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment"> */</span>
<a name="l171"><span class="linenum"> 171</span></a>  function <a class="function" onClick="logFunction('me')" href="../_functions/me.html" onMouseOver="funcPopup(event,'me')">me</a>() {
<a name="l172"><span class="linenum"> 172</span></a>      global <a class="var it18339" onMouseOver="hilite(18339)" onMouseOut="lolite()" onClick="logVariable('ME')" href="../_variables/ME.html">$ME</a>;
<a name="l173"><span class="linenum"> 173</span></a>      return <a class="var it18339" onMouseOver="hilite(18339)" onMouseOut="lolite()" onClick="logVariable('ME')" href="../_variables/ME.html">$ME</a>;
<a name="l174"><span class="linenum"> 174</span></a>  }
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">/**</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment"> * Guesses the full URL of the current script.</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment"> *</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment"> * This function is using $PAGE-&gt;url, but may fall back to $FULLME which</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment"> * is constructed from  PHP_SELF and REQUEST_URI or SCRIPT_NAME</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment"> *</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment"> * @return mixed full page URL string or false if unknown</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment"> */</span>
<a name="l184"><span class="linenum"> 184</span></a>  function <a class="function" onClick="logFunction('qualified_me')" href="../_functions/qualified_me.html" onMouseOver="funcPopup(event,'qualified_me')">qualified_me</a>() {
<a name="l185"><span class="linenum"> 185</span></a>      global <a class="var it7880" onMouseOver="hilite(7880)" onMouseOut="lolite()" onClick="logVariable('FULLME')" href="../_variables/FULLME.html">$FULLME</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l186"><span class="linenum"> 186</span></a>  
<a name="l187"><span class="linenum"> 187</span></a>      if (isset(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>) and <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('has_set_url')" href="../_functions/has_set_url.html" onMouseOver="funcPopup(event,'has_set_url')">has_set_url</a>()) {
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">        // This is the only recommended way to find out current page.</span>
<a name="l189"><span class="linenum"> 189</span></a>          return <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/url.html">url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l190"><span class="linenum"> 190</span></a>  
<a name="l191"><span class="linenum"> 191</span></a>      } else {
<a name="l192"><span class="linenum"> 192</span></a>          if (<a class="var it7880" onMouseOver="hilite(7880)" onMouseOut="lolite()" onClick="logVariable('FULLME')" href="../_variables/FULLME.html">$FULLME</a> === null) {
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">            // CLI script most probably.</span>
<a name="l194"><span class="linenum"> 194</span></a>              return false;
<a name="l195"><span class="linenum"> 195</span></a>          }
<a name="l196"><span class="linenum"> 196</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('sslproxy')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/sslproxy.html">sslproxy</a>)) {
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">            // Return only https links when using SSL proxy.</span>
<a name="l198"><span class="linenum"> 198</span></a>              return <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/^http:/', 'https:', <a class="var it7880" onMouseOver="hilite(7880)" onMouseOut="lolite()" onClick="logVariable('FULLME')" href="../_variables/FULLME.html">$FULLME</a>, 1);
<a name="l199"><span class="linenum"> 199</span></a>          } else {
<a name="l200"><span class="linenum"> 200</span></a>              return <a class="var it7880" onMouseOver="hilite(7880)" onMouseOut="lolite()" onClick="logVariable('FULLME')" href="../_variables/FULLME.html">$FULLME</a>;
<a name="l201"><span class="linenum"> 201</span></a>          }
<a name="l202"><span class="linenum"> 202</span></a>      }
<a name="l203"><span class="linenum"> 203</span></a>  }
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">/**</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment"> * Determines whether or not the Moodle site is being served over HTTPS.</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment"> *</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment"> * This is done simply by checking the value of $CFG-&gt;httpswwwroot, which seems</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment"> * to be the only reliable method.</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment"> *</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment"> * @return boolean True if site is served over HTTPS, false otherwise.</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment"> */</span>
<a name="l213"><span class="linenum"> 213</span></a>  function <a class="function" onClick="logFunction('is_https')" href="../_functions/is_https.html" onMouseOver="funcPopup(event,'is_https')">is_https</a>() {
<a name="l214"><span class="linenum"> 214</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l215"><span class="linenum"> 215</span></a>  
<a name="l216"><span class="linenum"> 216</span></a>      return (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a>, 'https://') === 0);
<a name="l217"><span class="linenum"> 217</span></a>  }
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">/**</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment"> * Returns the cleaned local URL of the HTTP_REFERER less the URL query string parameters if required.</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment"> *</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment"> * @param bool $stripquery if true, also removes the query part of the url.</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment"> * @return string The resulting referer or empty string.</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment"> */</span>
<a name="l225"><span class="linenum"> 225</span></a>  function <a class="function" onClick="logFunction('get_local_referer')" href="../_functions/get_local_referer.html" onMouseOver="funcPopup(event,'get_local_referer')">get_local_referer</a>(<a class="var it2638" onMouseOver="hilite(2638)" onMouseOut="lolite()" onClick="logVariable('stripquery')" href="../_variables/stripquery.html">$stripquery</a> = true) {
<a name="l226"><span class="linenum"> 226</span></a>      if (isset(<a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['HTTP_REFERER'])) {
<a name="l227"><span class="linenum"> 227</span></a>          <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('referer')" href="../_variables/referer.html">$referer</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['HTTP_REFERER'], <a class="constant" onClick="logConstant('PARAM_LOCALURL')" href="../_constants/PARAM_LOCALURL.html" onMouseOver="constPopup(event,'PARAM_LOCALURL')">PARAM_LOCALURL</a>);
<a name="l228"><span class="linenum"> 228</span></a>          if (<a class="var it2638" onMouseOver="hilite(2638)" onMouseOut="lolite()" onClick="logVariable('stripquery')" href="../_variables/stripquery.html">$stripquery</a>) {
<a name="l229"><span class="linenum"> 229</span></a>              return <a class="function" onClick="logFunction('strip_querystring')" href="../_functions/strip_querystring.html" onMouseOver="funcPopup(event,'strip_querystring')">strip_querystring</a>(<a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('referer')" href="../_variables/referer.html">$referer</a>);
<a name="l230"><span class="linenum"> 230</span></a>          } else {
<a name="l231"><span class="linenum"> 231</span></a>              return <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('referer')" href="../_variables/referer.html">$referer</a>;
<a name="l232"><span class="linenum"> 232</span></a>          }
<a name="l233"><span class="linenum"> 233</span></a>      } else {
<a name="l234"><span class="linenum"> 234</span></a>          return '';
<a name="l235"><span class="linenum"> 235</span></a>      }
<a name="l236"><span class="linenum"> 236</span></a>  }
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">/**</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment"> * Class for creating and manipulating urls.</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment"> *</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment"> * It can be used in moodle pages where config.php has been included without any further includes.</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment"> *</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment"> * It is useful for manipulating urls with long lists of params.</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment"> * One situation where it will be useful is a page which links to itself to perform various actions</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment"> * and / or to process form data. A moodle_url object :</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment"> * can be created for a page to refer to itself with all the proper get params being passed from page call to</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment"> * page call and methods can be used to output a url including all the params, optionally adding and overriding</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment"> * params and can also be used to</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment"> *     - output the url without any get params</span>
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment"> *     - and output the params as hidden fields to be output within a form</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment"> *</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment"> * @copyright 2007 jamiesensei</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment"> * @link http://docs.moodle.org/dev/lib/weblib.php_moodle_url See short write up here</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment"> * @package core</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment"> */</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a> {
<a name="l258"><span class="linenum"> 258</span></a>  
<a name="l259"><span class="linenum"> 259</span></a>      <span class="comment">/**</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">     * Scheme, ex.: http, https</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">     * @var string</span>
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">     */</span>
<a name="l263"><span class="linenum"> 263</span></a>      protected <a class="var it3385" onMouseOver="hilite(3385)" onMouseOut="lolite()" onClick="logVariable('scheme')" href="../_variables/scheme.html">$scheme</a> = '';
<a name="l264"><span class="linenum"> 264</span></a>  
<a name="l265"><span class="linenum"> 265</span></a>      <span class="comment">/**</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">     * Hostname.</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     * @var string</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     */</span>
<a name="l269"><span class="linenum"> 269</span></a>      protected <a class="var it213" onMouseOver="hilite(213)" onMouseOut="lolite()" onClick="logVariable('host')" href="../_variables/host.html">$host</a> = '';
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>      <span class="comment">/**</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     * Port number, empty means default 80 or 443 in case of http.</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">     * @var int</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">     */</span>
<a name="l275"><span class="linenum"> 275</span></a>      protected <a class="var it1408" onMouseOver="hilite(1408)" onMouseOut="lolite()" onClick="logVariable('port')" href="../_variables/port.html">$port</a> = '';
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>      <span class="comment">/**</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">     * Username for http auth.</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">     * @var string</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">     */</span>
<a name="l281"><span class="linenum"> 281</span></a>      protected <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = '';
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>      <span class="comment">/**</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">     * Password for http auth.</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">     * @var string</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">     */</span>
<a name="l287"><span class="linenum"> 287</span></a>      protected <a class="var it7263" onMouseOver="hilite(7263)" onMouseOut="lolite()" onClick="logVariable('pass')" href="../_variables/pass.html">$pass</a> = '';
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>      <span class="comment">/**</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">     * Script path.</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">     * @var string</span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">     */</span>
<a name="l293"><span class="linenum"> 293</span></a>      protected <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = '';
<a name="l294"><span class="linenum"> 294</span></a>  
<a name="l295"><span class="linenum"> 295</span></a>      <span class="comment">/**</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">     * Optional slash argument value.</span>
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">     * @var string</span>
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">     */</span>
<a name="l299"><span class="linenum"> 299</span></a>      protected <a class="var it3360" onMouseOver="hilite(3360)" onMouseOut="lolite()" onClick="logVariable('slashargument')" href="../_variables/slashargument.html">$slashargument</a> = '';
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>      <span class="comment">/**</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">     * Anchor, may be also empty, null means none.</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">     * @var string</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">     */</span>
<a name="l305"><span class="linenum"> 305</span></a>      protected <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a> = null;
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>      <span class="comment">/**</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">     * Url parameters as associative array.</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">     * @var array</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">     */</span>
<a name="l311"><span class="linenum"> 311</span></a>      protected <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l312"><span class="linenum"> 312</span></a>  
<a name="l313"><span class="linenum"> 313</span></a>      <span class="comment">/**</span>
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">     * Create new instance of moodle_url.</span>
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">     *</span>
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment">     * @param moodle_url|string $url - moodle_url means make a copy of another</span>
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">     *      moodle_url and change parameters, string means full url or shortened</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">     *      form (ex.: '/course/view.php'). It is strongly encouraged to not include</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">     *      query string because it may result in double encoded values. Use the</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">     *      $params instead. For admin URLs, just use /admin/script.php, this</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">     *      class takes care of the $CFG-&gt;admin issue.</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment">     * @param array $params these params override current params or add new</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment">     * @param string $anchor The anchor to use as part of the URL if there is one.</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">     */</span>
<a name="l326"><span class="linenum"> 326</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, array <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = null, <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a> = null) {
<a name="l327"><span class="linenum"> 327</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l328"><span class="linenum"> 328</span></a>  
<a name="l329"><span class="linenum"> 329</span></a>          if (<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> instanceof moodle_url) {
<a name="l330"><span class="linenum"> 330</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scheme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/scheme.html">scheme</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('scheme')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../_variables/scheme.html">scheme</a>;
<a name="l331"><span class="linenum"> 331</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('host')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/host.html">host</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('host')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../_variables/host.html">host</a>;
<a name="l332"><span class="linenum"> 332</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('port')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/port.html">port</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('port')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../_variables/port.html">port</a>;
<a name="l333"><span class="linenum"> 333</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('user')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/user.html">user</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('user')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../_variables/user.html">user</a>;
<a name="l334"><span class="linenum"> 334</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pass.html">pass</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('pass')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../_variables/pass.html">pass</a>;
<a name="l335"><span class="linenum"> 335</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('path')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/path.html">path</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('path')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../_variables/path.html">path</a>;
<a name="l336"><span class="linenum"> 336</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('slashargument')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/slashargument.html">slashargument</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('slashargument')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../_variables/slashargument.html">slashargument</a>;
<a name="l337"><span class="linenum"> 337</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('params')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../_variables/params.html">params</a>;
<a name="l338"><span class="linenum"> 338</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('anchor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('anchor')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a>;
<a name="l339"><span class="linenum"> 339</span></a>  
<a name="l340"><span class="linenum"> 340</span></a>          } else {
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">            // Detect if anchor used.</span>
<a name="l342"><span class="linenum"> 342</span></a>              <a class="var it18340" onMouseOver="hilite(18340)" onMouseOut="lolite()" onClick="logVariable('apos')" href="../_variables/apos.html">$apos</a> = <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, '#');
<a name="l343"><span class="linenum"> 343</span></a>              if (<a class="var it18340" onMouseOver="hilite(18340)" onMouseOut="lolite()" onClick="logVariable('apos')" href="../_variables/apos.html">$apos</a> !== false) {
<a name="l344"><span class="linenum"> 344</span></a>                  <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it18340" onMouseOver="hilite(18340)" onMouseOut="lolite()" onClick="logVariable('apos')" href="../_variables/apos.html">$apos</a>);
<a name="l345"><span class="linenum"> 345</span></a>                  <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a> = <a class="phpfunction" onClick="logFunction('ltrim')" href="../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a>, '#');
<a name="l346"><span class="linenum"> 346</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_anchor')" href="../_functions/set_anchor.html" onMouseOver="funcPopup(event,'set_anchor')">set_anchor</a>(<a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a>);
<a name="l347"><span class="linenum"> 347</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, 0, <a class="var it18340" onMouseOver="hilite(18340)" onMouseOut="lolite()" onClick="logVariable('apos')" href="../_variables/apos.html">$apos</a>);
<a name="l348"><span class="linenum"> 348</span></a>              }
<a name="l349"><span class="linenum"> 349</span></a>  
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">            // Normalise shortened form of our url ex.: '/course/view.php'.</span>
<a name="l351"><span class="linenum"> 351</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, '/') === 0) {
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">                // We must not use httpswwwroot here, because it might be url of other page,</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">                // devs have to use httpswwwroot explicitly when creating new moodle_url.</span>
<a name="l354"><span class="linenum"> 354</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>.<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>;
<a name="l355"><span class="linenum"> 355</span></a>              }
<a name="l356"><span class="linenum"> 356</span></a>  
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">            // Now fix the admin links if needed, no need to mess with httpswwwroot.</span>
<a name="l358"><span class="linenum"> 358</span></a>              if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a> !== 'admin') {
<a name="l359"><span class="linenum"> 359</span></a>                  if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/admin/&quot;) === 0) {
<a name="l360"><span class="linenum"> 360</span></a>                      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/admin/&quot;, &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>/&quot;, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l361"><span class="linenum"> 361</span></a>                  }
<a name="l362"><span class="linenum"> 362</span></a>              }
<a name="l363"><span class="linenum"> 363</span></a>  
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">            // Parse the $url.</span>
<a name="l365"><span class="linenum"> 365</span></a>              <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a> = <a class="phpfunction" onClick="logFunction('parse_url')" href="../_functions/parse_url.html" onMouseOver="phpfuncPopup(event,'parse_url')">parse_url</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l366"><span class="linenum"> 366</span></a>              if (<a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a> === false) {
<a name="l367"><span class="linenum"> 367</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('invalidurl');
<a name="l368"><span class="linenum"> 368</span></a>              }
<a name="l369"><span class="linenum"> 369</span></a>              if (isset(<a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>['query'])) {
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment">                // Note: the values may not be correctly decoded, url parameters should be always passed as array.</span>
<a name="l371"><span class="linenum"> 371</span></a>                  <a class="phpfunction" onClick="logFunction('parse_str')" href="../_functions/parse_str.html" onMouseOver="phpfuncPopup(event,'parse_str')">parse_str</a>(<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&amp;amp;', '&amp;', <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>['query']), <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>);
<a name="l372"><span class="linenum"> 372</span></a>              }
<a name="l373"><span class="linenum"> 373</span></a>              unset(<a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>['query']);
<a name="l374"><span class="linenum"> 374</span></a>              foreach (<a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l375"><span class="linenum"> 375</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l376"><span class="linenum"> 376</span></a>              }
<a name="l377"><span class="linenum"> 377</span></a>  
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">            // Detect slashargument value from path - we do not support directory names ending with .php.</span>
<a name="l379"><span class="linenum"> 379</span></a>              <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a> = <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('path')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/path.html">path</a>, '.php/');
<a name="l380"><span class="linenum"> 380</span></a>              if (<a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a> !== false) {
<a name="l381"><span class="linenum"> 381</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('slashargument')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/slashargument.html">slashargument</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('path')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/path.html">path</a>, <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a> + 4);
<a name="l382"><span class="linenum"> 382</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('path')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/path.html">path</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('path')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/path.html">path</a>, 0, <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a> + 4);
<a name="l383"><span class="linenum"> 383</span></a>              }
<a name="l384"><span class="linenum"> 384</span></a>          }
<a name="l385"><span class="linenum"> 385</span></a>  
<a name="l386"><span class="linenum"> 386</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('params')" href="../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l387"><span class="linenum"> 387</span></a>          if (<a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a> !== null) {
<a name="l388"><span class="linenum"> 388</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('anchor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a> = (string)<a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a>;
<a name="l389"><span class="linenum"> 389</span></a>          }
<a name="l390"><span class="linenum"> 390</span></a>      }
<a name="l391"><span class="linenum"> 391</span></a>  
<a name="l392"><span class="linenum"> 392</span></a>      <span class="comment">/**</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">     * Add an array of params to the params for this url.</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">     *</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">     * The added params override existing ones if they have the same name.</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">     *</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">     * @param array $params Defaults to null. If null then returns all params.</span>
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment">     * @return array Array of Params for url.</span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">     */</span>
<a name="l401"><span class="linenum"> 401</span></a>      public function <a class="function" onClick="logFunction('params')" href="../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>(array <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = null) {
<a name="l402"><span class="linenum"> 402</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = (array)<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>;
<a name="l403"><span class="linenum"> 403</span></a>  
<a name="l404"><span class="linenum"> 404</span></a>          foreach (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l405"><span class="linenum"> 405</span></a>              if (is_int(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>)) {
<a name="l406"><span class="linenum"> 406</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Url parameters can not have numeric keys!');
<a name="l407"><span class="linenum"> 407</span></a>              }
<a name="l408"><span class="linenum"> 408</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>)) {
<a name="l409"><span class="linenum"> 409</span></a>                  if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>)) {
<a name="l410"><span class="linenum"> 410</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Url parameters values can not be arrays!');
<a name="l411"><span class="linenum"> 411</span></a>                  }
<a name="l412"><span class="linenum"> 412</span></a>                  if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) and !<a class="phpfunction" onClick="logFunction('method_exists')" href="../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, '__toString')) {
<a name="l413"><span class="linenum"> 413</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Url parameters values can not be objects, unless <a class="function" onClick="logFunction('__toString')" href="../_functions/__tostring.html" onMouseOver="funcPopup(event,'__tostring')">__toString</a>() is defined!');
<a name="l414"><span class="linenum"> 414</span></a>                  }
<a name="l415"><span class="linenum"> 415</span></a>              }
<a name="l416"><span class="linenum"> 416</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = (string)<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l417"><span class="linenum"> 417</span></a>          }
<a name="l418"><span class="linenum"> 418</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>;
<a name="l419"><span class="linenum"> 419</span></a>      }
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>      <span class="comment">/**</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">     * Remove all params if no arguments passed.</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">     * Remove selected params if arguments are passed.</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">     *</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">     * Can be called as either remove_params('param1', 'param2')</span>
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment">     * or remove_params(array('param1', 'param2')).</span>
<a name="l427"><span class="linenum"> 427</span></a>  <span class="comment">     *</span>
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">     * @param string[]|string $params,... either an array of param names, or 1..n string params to remove as args.</span>
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">     * @return array url parameters</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">     */</span>
<a name="l431"><span class="linenum"> 431</span></a>      public function <a class="function" onClick="logFunction('remove_params')" href="../_functions/remove_params.html" onMouseOver="funcPopup(event,'remove_params')">remove_params</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = null) {
<a name="l432"><span class="linenum"> 432</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>)) {
<a name="l433"><span class="linenum"> 433</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('func_get_args')" href="../_functions/func_get_args.html" onMouseOver="phpfuncPopup(event,'func_get_args')">func_get_args</a>();
<a name="l434"><span class="linenum"> 434</span></a>          }
<a name="l435"><span class="linenum"> 435</span></a>          foreach (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> as <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>) {
<a name="l436"><span class="linenum"> 436</span></a>              unset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>[<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>]);
<a name="l437"><span class="linenum"> 437</span></a>          }
<a name="l438"><span class="linenum"> 438</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>;
<a name="l439"><span class="linenum"> 439</span></a>      }
<a name="l440"><span class="linenum"> 440</span></a>  
<a name="l441"><span class="linenum"> 441</span></a>      <span class="comment">/**</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">     * Remove all url parameters.</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">     *</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">     * @todo remove the unused param.</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">     * @param array $params Unused param</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">     * @return void</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">     */</span>
<a name="l448"><span class="linenum"> 448</span></a>      public function <a class="function" onClick="logFunction('remove_all_params')" href="../_functions/remove_all_params.html" onMouseOver="funcPopup(event,'remove_all_params')">remove_all_params</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = null) {
<a name="l449"><span class="linenum"> 449</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a> = array();
<a name="l450"><span class="linenum"> 450</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('slashargument')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/slashargument.html">slashargument</a> = '';
<a name="l451"><span class="linenum"> 451</span></a>      }
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>      <span class="comment">/**</span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">     * Add a param to the params for this url.</span>
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment">     *</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">     * The added param overrides existing one if they have the same name.</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">     *</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">     * @param string $paramname name</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">     * @param string $newvalue Param value. If new value specified current value is overriden or parameter is added</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">     * @return mixed string parameter value, null if parameter does not exist</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">     */</span>
<a name="l462"><span class="linenum"> 462</span></a>      public function <a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>(<a class="var it15919" onMouseOver="hilite(15919)" onMouseOut="lolite()" onClick="logVariable('paramname')" href="../_variables/paramname.html">$paramname</a>, <a class="var it3475" onMouseOver="hilite(3475)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../_variables/newvalue.html">$newvalue</a> = '') {
<a name="l463"><span class="linenum"> 463</span></a>          if (<a class="phpfunction" onClick="logFunction('func_num_args')" href="../_functions/func_num_args.html" onMouseOver="phpfuncPopup(event,'func_num_args')">func_num_args</a>() &gt; 1) {
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">            // Set new value.</span>
<a name="l465"><span class="linenum"> 465</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('params')" href="../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>(array(<a class="var it15919" onMouseOver="hilite(15919)" onMouseOut="lolite()" onClick="logVariable('paramname')" href="../_variables/paramname.html">$paramname</a> =&gt; <a class="var it3475" onMouseOver="hilite(3475)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../_variables/newvalue.html">$newvalue</a>));
<a name="l466"><span class="linenum"> 466</span></a>          }
<a name="l467"><span class="linenum"> 467</span></a>          if (isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>[<a class="var it15919" onMouseOver="hilite(15919)" onMouseOut="lolite()" onClick="logVariable('paramname')" href="../_variables/paramname.html">$paramname</a>])) {
<a name="l468"><span class="linenum"> 468</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>[<a class="var it15919" onMouseOver="hilite(15919)" onMouseOut="lolite()" onClick="logVariable('paramname')" href="../_variables/paramname.html">$paramname</a>];
<a name="l469"><span class="linenum"> 469</span></a>          } else {
<a name="l470"><span class="linenum"> 470</span></a>              return null;
<a name="l471"><span class="linenum"> 471</span></a>          }
<a name="l472"><span class="linenum"> 472</span></a>      }
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>      <span class="comment">/**</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">     * Merges parameters and validates them</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     *</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     * @param array $overrideparams</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     * @return array merged parameters</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">     */</span>
<a name="l481"><span class="linenum"> 481</span></a>      protected function <a class="function" onClick="logFunction('merge_overrideparams')" href="../_functions/merge_overrideparams.html" onMouseOver="funcPopup(event,'merge_overrideparams')">merge_overrideparams</a>(array <a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a> = null) {
<a name="l482"><span class="linenum"> 482</span></a>          <a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a> = (array)<a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a>;
<a name="l483"><span class="linenum"> 483</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>;
<a name="l484"><span class="linenum"> 484</span></a>          foreach (<a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l485"><span class="linenum"> 485</span></a>              if (is_int(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>)) {
<a name="l486"><span class="linenum"> 486</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Overridden parameters can not have numeric keys!');
<a name="l487"><span class="linenum"> 487</span></a>              }
<a name="l488"><span class="linenum"> 488</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>)) {
<a name="l489"><span class="linenum"> 489</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Overridden parameters values can not be arrays!');
<a name="l490"><span class="linenum"> 490</span></a>              }
<a name="l491"><span class="linenum"> 491</span></a>              if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) and !<a class="phpfunction" onClick="logFunction('method_exists')" href="../_functions/method_exists.html" onMouseOver="phpfuncPopup(event,'method_exists')">method_exists</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, '__toString')) {
<a name="l492"><span class="linenum"> 492</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Overridden parameters values can not be objects, unless <a class="function" onClick="logFunction('__toString')" href="../_functions/__tostring.html" onMouseOver="funcPopup(event,'__tostring')">__toString</a>() is defined!');
<a name="l493"><span class="linenum"> 493</span></a>              }
<a name="l494"><span class="linenum"> 494</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = (string)<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l495"><span class="linenum"> 495</span></a>          }
<a name="l496"><span class="linenum"> 496</span></a>          return <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>;
<a name="l497"><span class="linenum"> 497</span></a>      }
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>      <span class="comment">/**</span>
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment">     * Get the params as as a query string.</span>
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment">     *</span>
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment">     * This method should not be used outside of this method.</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">     *</span>
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment">     * @param bool $escaped Use &amp;amp; as params separator instead of plain &amp;</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment">     * @param array $overrideparams params to add to the output params, these</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">     *      override existing ones with the same name.</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">     * @return string query string that can be added to a url.</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">     */</span>
<a name="l509"><span class="linenum"> 509</span></a>      public function <a class="function" onClick="logFunction('get_query_string')" href="../_functions/get_query_string.html" onMouseOver="funcPopup(event,'get_query_string')">get_query_string</a>(<a class="var it18342" onMouseOver="hilite(18342)" onMouseOut="lolite()" onClick="logVariable('escaped')" href="../_variables/escaped.html">$escaped</a> = true, array <a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a> = null) {
<a name="l510"><span class="linenum"> 510</span></a>          <a class="var it58" onMouseOver="hilite(58)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../_variables/arr.html">$arr</a> = array();
<a name="l511"><span class="linenum"> 511</span></a>          if (<a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a> !== null) {
<a name="l512"><span class="linenum"> 512</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('merge_overrideparams')" href="../_functions/merge_overrideparams.html" onMouseOver="funcPopup(event,'merge_overrideparams')">merge_overrideparams</a>(<a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a>);
<a name="l513"><span class="linenum"> 513</span></a>          } else {
<a name="l514"><span class="linenum"> 514</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>;
<a name="l515"><span class="linenum"> 515</span></a>          }
<a name="l516"><span class="linenum"> 516</span></a>          foreach (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../_variables/val.html">$val</a>) {
<a name="l517"><span class="linenum"> 517</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../_variables/val.html">$val</a>)) {
<a name="l518"><span class="linenum"> 518</span></a>                  foreach (<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../_variables/val.html">$val</a> as <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../_variables/index.html">$index</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l519"><span class="linenum"> 519</span></a>                      <a class="var it58" onMouseOver="hilite(58)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../_variables/arr.html">$arr</a>[] = <a class="phpfunction" onClick="logFunction('rawurlencode')" href="../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>.'['.<a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../_variables/index.html">$index</a>.']').&quot;=&quot;.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>);
<a name="l520"><span class="linenum"> 520</span></a>                  }
<a name="l521"><span class="linenum"> 521</span></a>              } else {
<a name="l522"><span class="linenum"> 522</span></a>                  if (isset(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../_variables/val.html">$val</a>) &amp;&amp; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../_variables/val.html">$val</a> !== '') {
<a name="l523"><span class="linenum"> 523</span></a>                      <a class="var it58" onMouseOver="hilite(58)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../_variables/arr.html">$arr</a>[] = <a class="phpfunction" onClick="logFunction('rawurlencode')" href="../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>).&quot;=&quot;.<a class="phpfunction" onClick="logFunction('rawurlencode')" href="../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../_variables/val.html">$val</a>);
<a name="l524"><span class="linenum"> 524</span></a>                  } else {
<a name="l525"><span class="linenum"> 525</span></a>                      <a class="var it58" onMouseOver="hilite(58)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../_variables/arr.html">$arr</a>[] = <a class="phpfunction" onClick="logFunction('rawurlencode')" href="../_functions/rawurlencode.html" onMouseOver="phpfuncPopup(event,'rawurlencode')">rawurlencode</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>);
<a name="l526"><span class="linenum"> 526</span></a>                  }
<a name="l527"><span class="linenum"> 527</span></a>              }
<a name="l528"><span class="linenum"> 528</span></a>          }
<a name="l529"><span class="linenum"> 529</span></a>          if (<a class="var it18342" onMouseOver="hilite(18342)" onMouseOut="lolite()" onClick="logVariable('escaped')" href="../_variables/escaped.html">$escaped</a>) {
<a name="l530"><span class="linenum"> 530</span></a>              return <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('&amp;amp;', <a class="var it58" onMouseOver="hilite(58)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../_variables/arr.html">$arr</a>);
<a name="l531"><span class="linenum"> 531</span></a>          } else {
<a name="l532"><span class="linenum"> 532</span></a>              return <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('&amp;', <a class="var it58" onMouseOver="hilite(58)" onMouseOut="lolite()" onClick="logVariable('arr')" href="../_variables/arr.html">$arr</a>);
<a name="l533"><span class="linenum"> 533</span></a>          }
<a name="l534"><span class="linenum"> 534</span></a>      }
<a name="l535"><span class="linenum"> 535</span></a>  
<a name="l536"><span class="linenum"> 536</span></a>      <span class="comment">/**</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">     * Shortcut for printing of encoded URL.</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">     *</span>
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">     * @return string</span>
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">     */</span>
<a name="l541"><span class="linenum"> 541</span></a>      public function <a class="function" onClick="logFunction('__toString')" href="../_functions/__tostring.html" onMouseOver="funcPopup(event,'__tostring')">__toString</a>() {
<a name="l542"><span class="linenum"> 542</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(true);
<a name="l543"><span class="linenum"> 543</span></a>      }
<a name="l544"><span class="linenum"> 544</span></a>  
<a name="l545"><span class="linenum"> 545</span></a>      <span class="comment">/**</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">     * Output url.</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment">     *</span>
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">     * If you use the returned URL in HTML code, you want the escaped ampersands. If you use</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment">     * the returned URL in HTTP headers, you want $escaped=false.</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">     *</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">     * @param bool $escaped Use &amp;amp; as params separator instead of plain &amp;</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">     * @param array $overrideparams params to add to the output url, these override existing ones with the same name.</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">     * @return string Resulting URL</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">     */</span>
<a name="l555"><span class="linenum"> 555</span></a>      public function <a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(<a class="var it18342" onMouseOver="hilite(18342)" onMouseOut="lolite()" onClick="logVariable('escaped')" href="../_variables/escaped.html">$escaped</a> = true, array <a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a> = null) {
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l558"><span class="linenum"> 558</span></a>  
<a name="l559"><span class="linenum"> 559</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_bool')" href="../_functions/is_bool.html" onMouseOver="phpfuncPopup(event,'is_bool')">is_bool</a>(<a class="var it18342" onMouseOver="hilite(18342)" onMouseOut="lolite()" onClick="logVariable('escaped')" href="../_variables/escaped.html">$escaped</a>)) {
<a name="l560"><span class="linenum"> 560</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Escape parameter must be of type boolean, '.<a class="phpfunction" onClick="logFunction('gettype')" href="../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">gettype</a>(<a class="var it18342" onMouseOver="hilite(18342)" onMouseOut="lolite()" onClick="logVariable('escaped')" href="../_variables/escaped.html">$escaped</a>).' given instead.');
<a name="l561"><span class="linenum"> 561</span></a>          }
<a name="l562"><span class="linenum"> 562</span></a>  
<a name="l563"><span class="linenum"> 563</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>;
<a name="l564"><span class="linenum"> 564</span></a>  
<a name="l565"><span class="linenum"> 565</span></a>  <span class="comment">        // Allow url's to be rewritten by a plugin.</span>
<a name="l566"><span class="linenum"> 566</span></a>          if (isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('urlrewriteclass')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/urlrewriteclass.html">urlrewriteclass</a>) &amp;&amp; !isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('upgraderunning')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/upgraderunning.html">upgraderunning</a>)) {
<a name="l567"><span class="linenum"> 567</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('urlrewriteclass')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/urlrewriteclass.html">urlrewriteclass</a>;
<a name="l568"><span class="linenum"> 568</span></a>              <a class="var it18345" onMouseOver="hilite(18345)" onMouseOut="lolite()" onClick="logVariable('pluginurl')" href="../_variables/pluginurl.html">$pluginurl</a> = <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>::<a class="function" onClick="logFunction('url_rewrite')" href="../_functions/url_rewrite.html" onMouseOver="funcPopup(event,'url_rewrite')">url_rewrite</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l569"><span class="linenum"> 569</span></a>              if (<a class="var it18345" onMouseOver="hilite(18345)" onMouseOut="lolite()" onClick="logVariable('pluginurl')" href="../_variables/pluginurl.html">$pluginurl</a> instanceof moodle_url) {
<a name="l570"><span class="linenum"> 570</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it18345" onMouseOver="hilite(18345)" onMouseOut="lolite()" onClick="logVariable('pluginurl')" href="../_variables/pluginurl.html">$pluginurl</a>;
<a name="l571"><span class="linenum"> 571</span></a>              }
<a name="l572"><span class="linenum"> 572</span></a>          }
<a name="l573"><span class="linenum"> 573</span></a>  
<a name="l574"><span class="linenum"> 574</span></a>          return <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('raw_out')" href="../_functions/raw_out.html" onMouseOver="funcPopup(event,'raw_out')">raw_out</a>(<a class="var it18342" onMouseOver="hilite(18342)" onMouseOut="lolite()" onClick="logVariable('escaped')" href="../_variables/escaped.html">$escaped</a>, <a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a>);
<a name="l575"><span class="linenum"> 575</span></a>  
<a name="l576"><span class="linenum"> 576</span></a>      }
<a name="l577"><span class="linenum"> 577</span></a>  
<a name="l578"><span class="linenum"> 578</span></a>      <span class="comment">/**</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">     * Output url without any rewrites</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     *</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     * This is identical in signature and use to out() but doesn't call the rewrite handler.</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     *</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     * @param bool $escaped Use &amp;amp; as params separator instead of plain &amp;</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">     * @param array $overrideparams params to add to the output url, these override existing ones with the same name.</span>
<a name="l585"><span class="linenum"> 585</span></a>  <span class="comment">     * @return string Resulting URL</span>
<a name="l586"><span class="linenum"> 586</span></a>  <span class="comment">     */</span>
<a name="l587"><span class="linenum"> 587</span></a>      public function <a class="function" onClick="logFunction('raw_out')" href="../_functions/raw_out.html" onMouseOver="funcPopup(event,'raw_out')">raw_out</a>(<a class="var it18342" onMouseOver="hilite(18342)" onMouseOut="lolite()" onClick="logVariable('escaped')" href="../_variables/escaped.html">$escaped</a> = true, array <a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a> = null) {
<a name="l588"><span class="linenum"> 588</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_bool')" href="../_functions/is_bool.html" onMouseOver="phpfuncPopup(event,'is_bool')">is_bool</a>(<a class="var it18342" onMouseOver="hilite(18342)" onMouseOut="lolite()" onClick="logVariable('escaped')" href="../_variables/escaped.html">$escaped</a>)) {
<a name="l589"><span class="linenum"> 589</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Escape parameter must be of type boolean, '.<a class="phpfunction" onClick="logFunction('gettype')" href="../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">gettype</a>(<a class="var it18342" onMouseOver="hilite(18342)" onMouseOut="lolite()" onClick="logVariable('escaped')" href="../_variables/escaped.html">$escaped</a>).' given instead.');
<a name="l590"><span class="linenum"> 590</span></a>          }
<a name="l591"><span class="linenum"> 591</span></a>  
<a name="l592"><span class="linenum"> 592</span></a>          <a class="var it1400" onMouseOver="hilite(1400)" onMouseOut="lolite()" onClick="logVariable('uri')" href="../_variables/uri.html">$uri</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('out_omit_querystring')" href="../_functions/out_omit_querystring.html" onMouseOver="funcPopup(event,'out_omit_querystring')">out_omit_querystring</a>().<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('slashargument')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/slashargument.html">slashargument</a>;
<a name="l593"><span class="linenum"> 593</span></a>  
<a name="l594"><span class="linenum"> 594</span></a>          <a class="var it18346" onMouseOver="hilite(18346)" onMouseOut="lolite()" onClick="logVariable('querystring')" href="../_variables/querystring.html">$querystring</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_query_string')" href="../_functions/get_query_string.html" onMouseOver="funcPopup(event,'get_query_string')">get_query_string</a>(<a class="var it18342" onMouseOver="hilite(18342)" onMouseOut="lolite()" onClick="logVariable('escaped')" href="../_variables/escaped.html">$escaped</a>, <a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a>);
<a name="l595"><span class="linenum"> 595</span></a>          if (<a class="var it18346" onMouseOver="hilite(18346)" onMouseOut="lolite()" onClick="logVariable('querystring')" href="../_variables/querystring.html">$querystring</a> !== '') {
<a name="l596"><span class="linenum"> 596</span></a>              <a class="var it1400" onMouseOver="hilite(1400)" onMouseOut="lolite()" onClick="logVariable('uri')" href="../_variables/uri.html">$uri</a> .= '?' . <a class="var it18346" onMouseOver="hilite(18346)" onMouseOut="lolite()" onClick="logVariable('querystring')" href="../_variables/querystring.html">$querystring</a>;
<a name="l597"><span class="linenum"> 597</span></a>          }
<a name="l598"><span class="linenum"> 598</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('anchor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a>)) {
<a name="l599"><span class="linenum"> 599</span></a>              <a class="var it1400" onMouseOver="hilite(1400)" onMouseOut="lolite()" onClick="logVariable('uri')" href="../_variables/uri.html">$uri</a> .= '#'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('anchor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a>;
<a name="l600"><span class="linenum"> 600</span></a>          }
<a name="l601"><span class="linenum"> 601</span></a>  
<a name="l602"><span class="linenum"> 602</span></a>          return <a class="var it1400" onMouseOver="hilite(1400)" onMouseOut="lolite()" onClick="logVariable('uri')" href="../_variables/uri.html">$uri</a>;
<a name="l603"><span class="linenum"> 603</span></a>      }
<a name="l604"><span class="linenum"> 604</span></a>  
<a name="l605"><span class="linenum"> 605</span></a>      <span class="comment">/**</span>
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment">     * Returns url without parameters, everything before '?'.</span>
<a name="l607"><span class="linenum"> 607</span></a>  <span class="comment">     *</span>
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment">     * @param bool $includeanchor if {@link self::anchor} is defined, should it be returned?</span>
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment">     * @return string</span>
<a name="l610"><span class="linenum"> 610</span></a>  <span class="comment">     */</span>
<a name="l611"><span class="linenum"> 611</span></a>      public function <a class="function" onClick="logFunction('out_omit_querystring')" href="../_functions/out_omit_querystring.html" onMouseOver="funcPopup(event,'out_omit_querystring')">out_omit_querystring</a>(<a class="var it18347" onMouseOver="hilite(18347)" onMouseOut="lolite()" onClick="logVariable('includeanchor')" href="../_variables/includeanchor.html">$includeanchor</a> = false) {
<a name="l612"><span class="linenum"> 612</span></a>  
<a name="l613"><span class="linenum"> 613</span></a>          <a class="var it1400" onMouseOver="hilite(1400)" onMouseOut="lolite()" onClick="logVariable('uri')" href="../_variables/uri.html">$uri</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scheme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/scheme.html">scheme</a> ? <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scheme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/scheme.html">scheme</a>.':'.((<a class="phpfunction" onClick="logFunction('strtolower')" href="../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scheme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/scheme.html">scheme</a>) == 'mailto') ? '':'//'): '';
<a name="l614"><span class="linenum"> 614</span></a>          <a class="var it1400" onMouseOver="hilite(1400)" onMouseOut="lolite()" onClick="logVariable('uri')" href="../_variables/uri.html">$uri</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('user')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/user.html">user</a> ? <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('user')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/user.html">user</a>.(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pass.html">pass</a>? ':'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('pass')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/pass.html">pass</a>:'').'@':'';
<a name="l615"><span class="linenum"> 615</span></a>          <a class="var it1400" onMouseOver="hilite(1400)" onMouseOut="lolite()" onClick="logVariable('uri')" href="../_variables/uri.html">$uri</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('host')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/host.html">host</a> ? <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('host')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/host.html">host</a> : '';
<a name="l616"><span class="linenum"> 616</span></a>          <a class="var it1400" onMouseOver="hilite(1400)" onMouseOut="lolite()" onClick="logVariable('uri')" href="../_variables/uri.html">$uri</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('port')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/port.html">port</a> ? ':'.<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('port')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/port.html">port</a> : '';
<a name="l617"><span class="linenum"> 617</span></a>          <a class="var it1400" onMouseOver="hilite(1400)" onMouseOut="lolite()" onClick="logVariable('uri')" href="../_variables/uri.html">$uri</a> .= <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('path')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/path.html">path</a> ? <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('path')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/path.html">path</a> : '';
<a name="l618"><span class="linenum"> 618</span></a>          if (<a class="var it18347" onMouseOver="hilite(18347)" onMouseOut="lolite()" onClick="logVariable('includeanchor')" href="../_variables/includeanchor.html">$includeanchor</a> and !<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('anchor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a>)) {
<a name="l619"><span class="linenum"> 619</span></a>              <a class="var it1400" onMouseOver="hilite(1400)" onMouseOut="lolite()" onClick="logVariable('uri')" href="../_variables/uri.html">$uri</a> .= '#' . <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('anchor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a>;
<a name="l620"><span class="linenum"> 620</span></a>          }
<a name="l621"><span class="linenum"> 621</span></a>  
<a name="l622"><span class="linenum"> 622</span></a>          return <a class="var it1400" onMouseOver="hilite(1400)" onMouseOut="lolite()" onClick="logVariable('uri')" href="../_variables/uri.html">$uri</a>;
<a name="l623"><span class="linenum"> 623</span></a>      }
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>      <span class="comment">/**</span>
<a name="l626"><span class="linenum"> 626</span></a>  <span class="comment">     * Compares this moodle_url with another.</span>
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment">     *</span>
<a name="l628"><span class="linenum"> 628</span></a>  <span class="comment">     * See documentation of constants for an explanation of the comparison flags.</span>
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">     *</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">     * @param moodle_url $url The moodle_url object to compare</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">     * @param int $matchtype The type of comparison (URL_MATCH_BASE, URL_MATCH_PARAMS, URL_MATCH_EXACT)</span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment">     * @return bool</span>
<a name="l633"><span class="linenum"> 633</span></a>  <span class="comment">     */</span>
<a name="l634"><span class="linenum"> 634</span></a>      public function <a class="function" onClick="logFunction('compare')" href="../_functions/compare.html" onMouseOver="funcPopup(event,'compare')">compare</a>(moodle_url <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it18348" onMouseOver="hilite(18348)" onMouseOut="lolite()" onClick="logVariable('matchtype')" href="../_variables/matchtype.html">$matchtype</a> = <a class="constant" onClick="logConstant('URL_MATCH_EXACT')" href="../_constants/URL_MATCH_EXACT.html" onMouseOver="constPopup(event,'URL_MATCH_EXACT')">URL_MATCH_EXACT</a>) {
<a name="l635"><span class="linenum"> 635</span></a>  
<a name="l636"><span class="linenum"> 636</span></a>          <a class="var it18349" onMouseOver="hilite(18349)" onMouseOut="lolite()" onClick="logVariable('baseself')" href="../_variables/baseself.html">$baseself</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('out_omit_querystring')" href="../_functions/out_omit_querystring.html" onMouseOver="funcPopup(event,'out_omit_querystring')">out_omit_querystring</a>();
<a name="l637"><span class="linenum"> 637</span></a>          <a class="var it18350" onMouseOver="hilite(18350)" onMouseOut="lolite()" onClick="logVariable('baseother')" href="../_variables/baseother.html">$baseother</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('out_omit_querystring')" href="../_functions/out_omit_querystring.html" onMouseOver="funcPopup(event,'out_omit_querystring')">out_omit_querystring</a>();
<a name="l638"><span class="linenum"> 638</span></a>  
<a name="l639"><span class="linenum"> 639</span></a>  <span class="comment">        // Append index.php if there is no specific file.</span>
<a name="l640"><span class="linenum"> 640</span></a>          if (<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it18349" onMouseOver="hilite(18349)" onMouseOut="lolite()" onClick="logVariable('baseself')" href="../_variables/baseself.html">$baseself</a>, -1) == '/') {
<a name="l641"><span class="linenum"> 641</span></a>              <a class="var it18349" onMouseOver="hilite(18349)" onMouseOut="lolite()" onClick="logVariable('baseself')" href="../_variables/baseself.html">$baseself</a> .= '<a class="filename" href="../index.php.html">index.php</a>';
<a name="l642"><span class="linenum"> 642</span></a>          }
<a name="l643"><span class="linenum"> 643</span></a>          if (<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it18350" onMouseOver="hilite(18350)" onMouseOut="lolite()" onClick="logVariable('baseother')" href="../_variables/baseother.html">$baseother</a>, -1) == '/') {
<a name="l644"><span class="linenum"> 644</span></a>              <a class="var it18350" onMouseOver="hilite(18350)" onMouseOut="lolite()" onClick="logVariable('baseother')" href="../_variables/baseother.html">$baseother</a> .= '<a class="filename" href="../index.php.html">index.php</a>';
<a name="l645"><span class="linenum"> 645</span></a>          }
<a name="l646"><span class="linenum"> 646</span></a>  
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment">        // Compare the two base URLs.</span>
<a name="l648"><span class="linenum"> 648</span></a>          if (<a class="var it18349" onMouseOver="hilite(18349)" onMouseOut="lolite()" onClick="logVariable('baseself')" href="../_variables/baseself.html">$baseself</a> != <a class="var it18350" onMouseOver="hilite(18350)" onMouseOut="lolite()" onClick="logVariable('baseother')" href="../_variables/baseother.html">$baseother</a>) {
<a name="l649"><span class="linenum"> 649</span></a>              return false;
<a name="l650"><span class="linenum"> 650</span></a>          }
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>          if (<a class="var it18348" onMouseOver="hilite(18348)" onMouseOut="lolite()" onClick="logVariable('matchtype')" href="../_variables/matchtype.html">$matchtype</a> == <a class="constant" onClick="logConstant('URL_MATCH_BASE')" href="../_constants/URL_MATCH_BASE.html" onMouseOver="constPopup(event,'URL_MATCH_BASE')">URL_MATCH_BASE</a>) {
<a name="l653"><span class="linenum"> 653</span></a>              return true;
<a name="l654"><span class="linenum"> 654</span></a>          }
<a name="l655"><span class="linenum"> 655</span></a>  
<a name="l656"><span class="linenum"> 656</span></a>          <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../_variables/urlparams.html">$urlparams</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('params')" href="../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>();
<a name="l657"><span class="linenum"> 657</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('params')" href="../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>() as <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l658"><span class="linenum"> 658</span></a>              if (<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a> == 'sesskey') {
<a name="l659"><span class="linenum"> 659</span></a>                  continue;
<a name="l660"><span class="linenum"> 660</span></a>              }
<a name="l661"><span class="linenum"> 661</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>, <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../_variables/urlparams.html">$urlparams</a>) || <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../_variables/urlparams.html">$urlparams</a>[<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>] != <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l662"><span class="linenum"> 662</span></a>                  return false;
<a name="l663"><span class="linenum"> 663</span></a>              }
<a name="l664"><span class="linenum"> 664</span></a>          }
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>          if (<a class="var it18348" onMouseOver="hilite(18348)" onMouseOut="lolite()" onClick="logVariable('matchtype')" href="../_variables/matchtype.html">$matchtype</a> == <a class="constant" onClick="logConstant('URL_MATCH_PARAMS')" href="../_constants/URL_MATCH_PARAMS.html" onMouseOver="constPopup(event,'URL_MATCH_PARAMS')">URL_MATCH_PARAMS</a>) {
<a name="l667"><span class="linenum"> 667</span></a>              return true;
<a name="l668"><span class="linenum"> 668</span></a>          }
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>          foreach (<a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../_variables/urlparams.html">$urlparams</a> as <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l671"><span class="linenum"> 671</span></a>              if (<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a> == 'sesskey') {
<a name="l672"><span class="linenum"> 672</span></a>                  continue;
<a name="l673"><span class="linenum"> 673</span></a>              }
<a name="l674"><span class="linenum"> 674</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('params')" href="../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>()) || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>(<a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>) != <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l675"><span class="linenum"> 675</span></a>                  return false;
<a name="l676"><span class="linenum"> 676</span></a>              }
<a name="l677"><span class="linenum"> 677</span></a>          }
<a name="l678"><span class="linenum"> 678</span></a>  
<a name="l679"><span class="linenum"> 679</span></a>          if (<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a onClick="logVariable('anchor')" class="var it43091" onMouseOver="hilite(43091)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a> !== <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('anchor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a>) {
<a name="l680"><span class="linenum"> 680</span></a>              return false;
<a name="l681"><span class="linenum"> 681</span></a>          }
<a name="l682"><span class="linenum"> 682</span></a>  
<a name="l683"><span class="linenum"> 683</span></a>          return true;
<a name="l684"><span class="linenum"> 684</span></a>      }
<a name="l685"><span class="linenum"> 685</span></a>  
<a name="l686"><span class="linenum"> 686</span></a>      <span class="comment">/**</span>
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">     * Sets the anchor for the URI (the bit after the hash)</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment">     *</span>
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment">     * @param string $anchor null means remove previous</span>
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment">     */</span>
<a name="l691"><span class="linenum"> 691</span></a>      public function <a class="function" onClick="logFunction('set_anchor')" href="../_functions/set_anchor.html" onMouseOver="funcPopup(event,'set_anchor')">set_anchor</a>(<a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a>) {
<a name="l692"><span class="linenum"> 692</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a>)) {
<a name="l693"><span class="linenum"> 693</span></a>  <span class="comment">            // Remove.</span>
<a name="l694"><span class="linenum"> 694</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('anchor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a> = null;
<a name="l695"><span class="linenum"> 695</span></a>          } else if (<a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a> === '') {
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">            // Special case, used as empty link.</span>
<a name="l697"><span class="linenum"> 697</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('anchor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a> = '';
<a name="l698"><span class="linenum"> 698</span></a>          } else if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('|[a-zA-Z\_\:][a-zA-Z0-9\_\-\.\:]*|', <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a>)) {
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">            // Match the anchor against the NMTOKEN spec.</span>
<a name="l700"><span class="linenum"> 700</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('anchor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a> = <a class="var it352" onMouseOver="hilite(352)" onMouseOut="lolite()" onClick="logVariable('anchor')" href="../_variables/anchor.html">$anchor</a>;
<a name="l701"><span class="linenum"> 701</span></a>          } else {
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">            // Bad luck, no valid anchor found.</span>
<a name="l703"><span class="linenum"> 703</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('anchor')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/anchor.html">anchor</a> = null;
<a name="l704"><span class="linenum"> 704</span></a>          }
<a name="l705"><span class="linenum"> 705</span></a>      }
<a name="l706"><span class="linenum"> 706</span></a>  
<a name="l707"><span class="linenum"> 707</span></a>      <span class="comment">/**</span>
<a name="l708"><span class="linenum"> 708</span></a>  <span class="comment">     * Sets the scheme for the URI (the bit before ://)</span>
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment">     *</span>
<a name="l710"><span class="linenum"> 710</span></a>  <span class="comment">     * @param string $scheme</span>
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment">     */</span>
<a name="l712"><span class="linenum"> 712</span></a>      public function <a class="function" onClick="logFunction('set_scheme')" href="../_functions/set_scheme.html" onMouseOver="funcPopup(event,'set_scheme')">set_scheme</a>(<a class="var it3385" onMouseOver="hilite(3385)" onMouseOut="lolite()" onClick="logVariable('scheme')" href="../_variables/scheme.html">$scheme</a>) {
<a name="l713"><span class="linenum"> 713</span></a>  <span class="comment">        // See http://www.ietf.org/rfc/rfc3986.txt part 3.1.</span>
<a name="l714"><span class="linenum"> 714</span></a>          if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/^[a-zA-Z][a-zA-Z0-9+.-]*$/', <a class="var it3385" onMouseOver="hilite(3385)" onMouseOut="lolite()" onClick="logVariable('scheme')" href="../_variables/scheme.html">$scheme</a>)) {
<a name="l715"><span class="linenum"> 715</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scheme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/scheme.html">scheme</a> = <a class="var it3385" onMouseOver="hilite(3385)" onMouseOut="lolite()" onClick="logVariable('scheme')" href="../_variables/scheme.html">$scheme</a>;
<a name="l716"><span class="linenum"> 716</span></a>          } else {
<a name="l717"><span class="linenum"> 717</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Bad URL scheme.');
<a name="l718"><span class="linenum"> 718</span></a>          }
<a name="l719"><span class="linenum"> 719</span></a>      }
<a name="l720"><span class="linenum"> 720</span></a>  
<a name="l721"><span class="linenum"> 721</span></a>      <span class="comment">/**</span>
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment">     * Sets the url slashargument value.</span>
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment">     *</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment">     * @param string $path usually file path</span>
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment">     * @param string $parameter name of page parameter if slasharguments not supported</span>
<a name="l726"><span class="linenum"> 726</span></a>  <span class="comment">     * @param bool $supported usually null, then it depends on $CFG-&gt;slasharguments, use true or false for other servers</span>
<a name="l727"><span class="linenum"> 727</span></a>  <span class="comment">     * @return void</span>
<a name="l728"><span class="linenum"> 728</span></a>  <span class="comment">     */</span>
<a name="l729"><span class="linenum"> 729</span></a>      public function <a class="function" onClick="logFunction('set_slashargument')" href="../_functions/set_slashargument.html" onMouseOver="funcPopup(event,'set_slashargument')">set_slashargument</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>, <a class="var it4851" onMouseOver="hilite(4851)" onMouseOut="lolite()" onClick="logVariable('parameter')" href="../_variables/parameter.html">$parameter</a> = 'file', <a class="var it18351" onMouseOver="hilite(18351)" onMouseOut="lolite()" onClick="logVariable('supported')" href="../_variables/supported.html">$supported</a> = null) {
<a name="l730"><span class="linenum"> 730</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l731"><span class="linenum"> 731</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it18351" onMouseOver="hilite(18351)" onMouseOut="lolite()" onClick="logVariable('supported')" href="../_variables/supported.html">$supported</a>)) {
<a name="l732"><span class="linenum"> 732</span></a>              <a class="var it18351" onMouseOver="hilite(18351)" onMouseOut="lolite()" onClick="logVariable('supported')" href="../_variables/supported.html">$supported</a> = !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('slasharguments')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/slasharguments.html">slasharguments</a>);
<a name="l733"><span class="linenum"> 733</span></a>          }
<a name="l734"><span class="linenum"> 734</span></a>  
<a name="l735"><span class="linenum"> 735</span></a>          if (<a class="var it18351" onMouseOver="hilite(18351)" onMouseOut="lolite()" onClick="logVariable('supported')" href="../_variables/supported.html">$supported</a>) {
<a name="l736"><span class="linenum"> 736</span></a>              <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('/', <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>);
<a name="l737"><span class="linenum"> 737</span></a>              <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a> = <a class="phpfunction" onClick="logFunction('array_map')" href="../_functions/array_map.html" onMouseOver="phpfuncPopup(event,'array_map')">array_map</a>('rawurlencode', <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>);
<a name="l738"><span class="linenum"> 738</span></a>              <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>  = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>);
<a name="l739"><span class="linenum"> 739</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('slashargument')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/slashargument.html">slashargument</a> = <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>;
<a name="l740"><span class="linenum"> 740</span></a>              unset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>[<a class="var it4851" onMouseOver="hilite(4851)" onMouseOut="lolite()" onClick="logVariable('parameter')" href="../_variables/parameter.html">$parameter</a>]);
<a name="l741"><span class="linenum"> 741</span></a>  
<a name="l742"><span class="linenum"> 742</span></a>          } else {
<a name="l743"><span class="linenum"> 743</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('slashargument')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/slashargument.html">slashargument</a> = '';
<a name="l744"><span class="linenum"> 744</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>[<a class="var it4851" onMouseOver="hilite(4851)" onMouseOut="lolite()" onClick="logVariable('parameter')" href="../_variables/parameter.html">$parameter</a>] = <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>;
<a name="l745"><span class="linenum"> 745</span></a>          }
<a name="l746"><span class="linenum"> 746</span></a>      }
<a name="l747"><span class="linenum"> 747</span></a>  
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment">    // Static factory methods.</span>
<a name="l749"><span class="linenum"> 749</span></a>  
<a name="l750"><span class="linenum"> 750</span></a>      <span class="comment">/**</span>
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">     * General moodle file url.</span>
<a name="l752"><span class="linenum"> 752</span></a>  <span class="comment">     *</span>
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment">     * @param string $urlbase the script serving the file</span>
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment">     * @param string $path</span>
<a name="l755"><span class="linenum"> 755</span></a>  <span class="comment">     * @param bool $forcedownload</span>
<a name="l756"><span class="linenum"> 756</span></a>  <span class="comment">     * @return moodle_url</span>
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">     */</span>
<a name="l758"><span class="linenum"> 758</span></a>      public static function <a class="function" onClick="logFunction('make_file_url')" href="../_functions/make_file_url.html" onMouseOver="funcPopup(event,'make_file_url')">make_file_url</a>(<a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a> = false) {
<a name="l759"><span class="linenum"> 759</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l760"><span class="linenum"> 760</span></a>          if (<a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>) {
<a name="l761"><span class="linenum"> 761</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['forcedownload'] = 1;
<a name="l762"><span class="linenum"> 762</span></a>          }
<a name="l763"><span class="linenum"> 763</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l764"><span class="linenum"> 764</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('set_slashargument')" href="../_functions/set_slashargument.html" onMouseOver="funcPopup(event,'set_slashargument')">set_slashargument</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>);
<a name="l765"><span class="linenum"> 765</span></a>          return <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>;
<a name="l766"><span class="linenum"> 766</span></a>      }
<a name="l767"><span class="linenum"> 767</span></a>  
<a name="l768"><span class="linenum"> 768</span></a>      <span class="comment">/**</span>
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment">     * Factory method for creation of url pointing to plugin file.</span>
<a name="l770"><span class="linenum"> 770</span></a>  <span class="comment">     *</span>
<a name="l771"><span class="linenum"> 771</span></a>  <span class="comment">     * Please note this method can be used only from the plugins to</span>
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment">     * create urls of own files, it must not be used outside of plugins!</span>
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment">     *</span>
<a name="l774"><span class="linenum"> 774</span></a>  <span class="comment">     * @param int $contextid</span>
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">     * @param string $component</span>
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment">     * @param string $area</span>
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">     * @param int $itemid</span>
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment">     * @param string $pathname</span>
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">     * @param string $filename</span>
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment">     * @param bool $forcedownload</span>
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment">     * @return moodle_url</span>
<a name="l782"><span class="linenum"> 782</span></a>  <span class="comment">     */</span>
<a name="l783"><span class="linenum"> 783</span></a>      public static function <a class="function" onClick="logFunction('make_pluginfile_url')" href="../_functions/make_pluginfile_url.html" onMouseOver="funcPopup(event,'make_pluginfile_url')">make_pluginfile_url</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../_variables/area.html">$area</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it801" onMouseOver="hilite(801)" onMouseOut="lolite()" onClick="logVariable('pathname')" href="../_variables/pathname.html">$pathname</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>,
<a name="l784"><span class="linenum"> 784</span></a>                                                 <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a> = false) {
<a name="l785"><span class="linenum"> 785</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l786"><span class="linenum"> 786</span></a>          <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a> = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a>/pluginfile.php&quot;;
<a name="l787"><span class="linenum"> 787</span></a>          if (<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a> === null) {
<a name="l788"><span class="linenum"> 788</span></a>              return self::<a class="function" onClick="logFunction('make_file_url')" href="../_functions/make_file_url.html" onMouseOver="funcPopup(event,'make_file_url')">make_file_url</a>(<a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, &quot;/<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>/<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>/<a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../_variables/area.html">$area</a>&quot;.<a class="var it801" onMouseOver="hilite(801)" onMouseOut="lolite()" onClick="logVariable('pathname')" href="../_variables/pathname.html">$pathname</a>.<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>);
<a name="l789"><span class="linenum"> 789</span></a>          } else {
<a name="l790"><span class="linenum"> 790</span></a>              return self::<a class="function" onClick="logFunction('make_file_url')" href="../_functions/make_file_url.html" onMouseOver="funcPopup(event,'make_file_url')">make_file_url</a>(<a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, &quot;/<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>/<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>/<a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../_variables/area.html">$area</a>/<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>&quot;.<a class="var it801" onMouseOver="hilite(801)" onMouseOut="lolite()" onClick="logVariable('pathname')" href="../_variables/pathname.html">$pathname</a>.<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>);
<a name="l791"><span class="linenum"> 791</span></a>          }
<a name="l792"><span class="linenum"> 792</span></a>      }
<a name="l793"><span class="linenum"> 793</span></a>  
<a name="l794"><span class="linenum"> 794</span></a>      <span class="comment">/**</span>
<a name="l795"><span class="linenum"> 795</span></a>  <span class="comment">     * Factory method for creation of url pointing to plugin file.</span>
<a name="l796"><span class="linenum"> 796</span></a>  <span class="comment">     * This method is the same that make_pluginfile_url but pointing to the webservice pluginfile.php script.</span>
<a name="l797"><span class="linenum"> 797</span></a>  <span class="comment">     * It should be used only in external functions.</span>
<a name="l798"><span class="linenum"> 798</span></a>  <span class="comment">     *</span>
<a name="l799"><span class="linenum"> 799</span></a>  <span class="comment">     * @since  2.8</span>
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment">     * @param int $contextid</span>
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment">     * @param string $component</span>
<a name="l802"><span class="linenum"> 802</span></a>  <span class="comment">     * @param string $area</span>
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment">     * @param int $itemid</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment">     * @param string $pathname</span>
<a name="l805"><span class="linenum"> 805</span></a>  <span class="comment">     * @param string $filename</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment">     * @param bool $forcedownload</span>
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment">     * @return moodle_url</span>
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment">     */</span>
<a name="l809"><span class="linenum"> 809</span></a>      public static function <a class="function" onClick="logFunction('make_webservice_pluginfile_url')" href="../_functions/make_webservice_pluginfile_url.html" onMouseOver="funcPopup(event,'make_webservice_pluginfile_url')">make_webservice_pluginfile_url</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../_variables/area.html">$area</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>, <a class="var it801" onMouseOver="hilite(801)" onMouseOut="lolite()" onClick="logVariable('pathname')" href="../_variables/pathname.html">$pathname</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>,
<a name="l810"><span class="linenum"> 810</span></a>                                                 <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a> = false) {
<a name="l811"><span class="linenum"> 811</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l812"><span class="linenum"> 812</span></a>          <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a> = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a>/webservice/pluginfile.php&quot;;
<a name="l813"><span class="linenum"> 813</span></a>          if (<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a> === null) {
<a name="l814"><span class="linenum"> 814</span></a>              return self::<a class="function" onClick="logFunction('make_file_url')" href="../_functions/make_file_url.html" onMouseOver="funcPopup(event,'make_file_url')">make_file_url</a>(<a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, &quot;/<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>/<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>/<a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../_variables/area.html">$area</a>&quot;.<a class="var it801" onMouseOver="hilite(801)" onMouseOut="lolite()" onClick="logVariable('pathname')" href="../_variables/pathname.html">$pathname</a>.<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>);
<a name="l815"><span class="linenum"> 815</span></a>          } else {
<a name="l816"><span class="linenum"> 816</span></a>              return self::<a class="function" onClick="logFunction('make_file_url')" href="../_functions/make_file_url.html" onMouseOver="funcPopup(event,'make_file_url')">make_file_url</a>(<a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, &quot;/<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>/<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>/<a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('area')" href="../_variables/area.html">$area</a>/<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../_variables/itemid.html">$itemid</a>&quot;.<a class="var it801" onMouseOver="hilite(801)" onMouseOut="lolite()" onClick="logVariable('pathname')" href="../_variables/pathname.html">$pathname</a>.<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>);
<a name="l817"><span class="linenum"> 817</span></a>          }
<a name="l818"><span class="linenum"> 818</span></a>      }
<a name="l819"><span class="linenum"> 819</span></a>  
<a name="l820"><span class="linenum"> 820</span></a>      <span class="comment">/**</span>
<a name="l821"><span class="linenum"> 821</span></a>  <span class="comment">     * Factory method for creation of url pointing to draft file of current user.</span>
<a name="l822"><span class="linenum"> 822</span></a>  <span class="comment">     *</span>
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment">     * @param int $draftid draft item id</span>
<a name="l824"><span class="linenum"> 824</span></a>  <span class="comment">     * @param string $pathname</span>
<a name="l825"><span class="linenum"> 825</span></a>  <span class="comment">     * @param string $filename</span>
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment">     * @param bool $forcedownload</span>
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment">     * @return moodle_url</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment">     */</span>
<a name="l829"><span class="linenum"> 829</span></a>      public static function <a class="function" onClick="logFunction('make_draftfile_url')" href="../_functions/make_draftfile_url.html" onMouseOver="funcPopup(event,'make_draftfile_url')">make_draftfile_url</a>(<a class="var it2102" onMouseOver="hilite(2102)" onMouseOut="lolite()" onClick="logVariable('draftid')" href="../_variables/draftid.html">$draftid</a>, <a class="var it801" onMouseOver="hilite(801)" onMouseOut="lolite()" onClick="logVariable('pathname')" href="../_variables/pathname.html">$pathname</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a> = false) {
<a name="l830"><span class="linenum"> 830</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l831"><span class="linenum"> 831</span></a>          <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a> = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a>/draftfile.php&quot;;
<a name="l832"><span class="linenum"> 832</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l833"><span class="linenum"> 833</span></a>  
<a name="l834"><span class="linenum"> 834</span></a>          return self::<a class="function" onClick="logFunction('make_file_url')" href="../_functions/make_file_url.html" onMouseOver="funcPopup(event,'make_file_url')">make_file_url</a>(<a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, &quot;/<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>/user/draft/<a class="var it2102" onMouseOver="hilite(2102)" onMouseOut="lolite()" onClick="logVariable('draftid')" href="../_variables/draftid.html">$draftid</a>&quot;.<a class="var it801" onMouseOver="hilite(801)" onMouseOut="lolite()" onClick="logVariable('pathname')" href="../_variables/pathname.html">$pathname</a>.<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../_variables/filename.html">$filename</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>);
<a name="l835"><span class="linenum"> 835</span></a>      }
<a name="l836"><span class="linenum"> 836</span></a>  
<a name="l837"><span class="linenum"> 837</span></a>      <span class="comment">/**</span>
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment">     * Factory method for creating of links to legacy course files.</span>
<a name="l839"><span class="linenum"> 839</span></a>  <span class="comment">     *</span>
<a name="l840"><span class="linenum"> 840</span></a>  <span class="comment">     * @param int $courseid</span>
<a name="l841"><span class="linenum"> 841</span></a>  <span class="comment">     * @param string $filepath</span>
<a name="l842"><span class="linenum"> 842</span></a>  <span class="comment">     * @param bool $forcedownload</span>
<a name="l843"><span class="linenum"> 843</span></a>  <span class="comment">     * @return moodle_url</span>
<a name="l844"><span class="linenum"> 844</span></a>  <span class="comment">     */</span>
<a name="l845"><span class="linenum"> 845</span></a>      public static function <a class="function" onClick="logFunction('make_legacyfile_url')" href="../_functions/make_legacyfile_url.html" onMouseOver="funcPopup(event,'make_legacyfile_url')">make_legacyfile_url</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a> = false) {
<a name="l846"><span class="linenum"> 846</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l847"><span class="linenum"> 847</span></a>  
<a name="l848"><span class="linenum"> 848</span></a>          <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a> = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/file.php&quot;;
<a name="l849"><span class="linenum"> 849</span></a>          return self::<a class="function" onClick="logFunction('make_file_url')" href="../_functions/make_file_url.html" onMouseOver="funcPopup(event,'make_file_url')">make_file_url</a>(<a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../_variables/urlbase.html">$urlbase</a>, '/'.<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>.'/'.<a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../_variables/filepath.html">$filepath</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../_variables/forcedownload.html">$forcedownload</a>);
<a name="l850"><span class="linenum"> 850</span></a>      }
<a name="l851"><span class="linenum"> 851</span></a>  
<a name="l852"><span class="linenum"> 852</span></a>      <span class="comment">/**</span>
<a name="l853"><span class="linenum"> 853</span></a>  <span class="comment">     * Returns URL a relative path from $CFG-&gt;wwwroot</span>
<a name="l854"><span class="linenum"> 854</span></a>  <span class="comment">     *</span>
<a name="l855"><span class="linenum"> 855</span></a>  <span class="comment">     * Can be used for passing around urls with the wwwroot stripped</span>
<a name="l856"><span class="linenum"> 856</span></a>  <span class="comment">     *</span>
<a name="l857"><span class="linenum"> 857</span></a>  <span class="comment">     * @param boolean $escaped Use &amp;amp; as params separator instead of plain &amp;</span>
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">     * @param array $overrideparams params to add to the output url, these override existing ones with the same name.</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">     * @return string Resulting URL</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">     * @throws coding_exception if called on a non-local url</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">     */</span>
<a name="l862"><span class="linenum"> 862</span></a>      public function <a class="function" onClick="logFunction('out_as_local_url')" href="../_functions/out_as_local_url.html" onMouseOver="funcPopup(event,'out_as_local_url')">out_as_local_url</a>(<a class="var it18342" onMouseOver="hilite(18342)" onMouseOut="lolite()" onClick="logVariable('escaped')" href="../_variables/escaped.html">$escaped</a> = true, array <a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a> = null) {
<a name="l863"><span class="linenum"> 863</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l864"><span class="linenum"> 864</span></a>  
<a name="l865"><span class="linenum"> 865</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(<a class="var it18342" onMouseOver="hilite(18342)" onMouseOut="lolite()" onClick="logVariable('escaped')" href="../_variables/escaped.html">$escaped</a>, <a class="var it18341" onMouseOver="hilite(18341)" onMouseOut="lolite()" onClick="logVariable('overrideparams')" href="../_variables/overrideparams.html">$overrideparams</a>);
<a name="l866"><span class="linenum"> 866</span></a>          <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('httpswwwroot')" href="../_variables/httpswwwroot.html">$httpswwwroot</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;http://&quot;, &quot;https://&quot;, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>);
<a name="l867"><span class="linenum"> 867</span></a>  
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment">        // Url should be equal to wwwroot or httpswwwroot. If not then throw exception.</span>
<a name="l869"><span class="linenum"> 869</span></a>          if ((<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> === <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>) || (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>.'/') === 0)) {
<a name="l870"><span class="linenum"> 870</span></a>              <a class="var it18352" onMouseOver="hilite(18352)" onMouseOut="lolite()" onClick="logVariable('localurl')" href="../_variables/localurl.html">$localurl</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>));
<a name="l871"><span class="linenum"> 871</span></a>              return !empty(<a class="var it18352" onMouseOver="hilite(18352)" onMouseOut="lolite()" onClick="logVariable('localurl')" href="../_variables/localurl.html">$localurl</a>) ? <a class="var it18352" onMouseOver="hilite(18352)" onMouseOut="lolite()" onClick="logVariable('localurl')" href="../_variables/localurl.html">$localurl</a> : '';
<a name="l872"><span class="linenum"> 872</span></a>          } else if ((<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> === <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('httpswwwroot')" href="../_variables/httpswwwroot.html">$httpswwwroot</a>) || (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('httpswwwroot')" href="../_variables/httpswwwroot.html">$httpswwwroot</a>.'/') === 0)) {
<a name="l873"><span class="linenum"> 873</span></a>              <a class="var it18352" onMouseOver="hilite(18352)" onMouseOut="lolite()" onClick="logVariable('localurl')" href="../_variables/localurl.html">$localurl</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('httpswwwroot')" href="../_variables/httpswwwroot.html">$httpswwwroot</a>));
<a name="l874"><span class="linenum"> 874</span></a>              return !empty(<a class="var it18352" onMouseOver="hilite(18352)" onMouseOut="lolite()" onClick="logVariable('localurl')" href="../_variables/localurl.html">$localurl</a>) ? <a class="var it18352" onMouseOver="hilite(18352)" onMouseOut="lolite()" onClick="logVariable('localurl')" href="../_variables/localurl.html">$localurl</a> : '';
<a name="l875"><span class="linenum"> 875</span></a>          } else {
<a name="l876"><span class="linenum"> 876</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('out_as_local_url called on a non-local URL');
<a name="l877"><span class="linenum"> 877</span></a>          }
<a name="l878"><span class="linenum"> 878</span></a>      }
<a name="l879"><span class="linenum"> 879</span></a>  
<a name="l880"><span class="linenum"> 880</span></a>      <span class="comment">/**</span>
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment">     * Returns the 'path' portion of a URL. For example, if the URL is</span>
<a name="l882"><span class="linenum"> 882</span></a>  <span class="comment">     * http://www.example.org:447/my/file/is/here.txt?really=1 then this will</span>
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">     * return '/my/file/is/here.txt'.</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment">     *</span>
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">     * By default the path includes slash-arguments (for example,</span>
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">     * '/myfile.php/extra/arguments') so it is what you would expect from a</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment">     * URL path. If you don't want this behaviour, you can opt to exclude the</span>
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment">     * slash arguments. (Be careful: if the $CFG variable slasharguments is</span>
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment">     * disabled, these URLs will have a different format and you may need to</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment">     * look at the 'file' parameter too.)</span>
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment">     *</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment">     * @param bool $includeslashargument If true, includes slash arguments</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment">     * @return string Path of URL</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment">     */</span>
<a name="l895"><span class="linenum"> 895</span></a>      public function <a class="function" onClick="logFunction('get_path')" href="../_functions/get_path.html" onMouseOver="funcPopup(event,'get_path')">get_path</a>(<a class="var it18353" onMouseOver="hilite(18353)" onMouseOut="lolite()" onClick="logVariable('includeslashargument')" href="../_variables/includeslashargument.html">$includeslashargument</a> = true) {
<a name="l896"><span class="linenum"> 896</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('path')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/path.html">path</a> . (<a class="var it18353" onMouseOver="hilite(18353)" onMouseOut="lolite()" onClick="logVariable('includeslashargument')" href="../_variables/includeslashargument.html">$includeslashargument</a> ? <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('slashargument')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/slashargument.html">slashargument</a> : '');
<a name="l897"><span class="linenum"> 897</span></a>      }
<a name="l898"><span class="linenum"> 898</span></a>  
<a name="l899"><span class="linenum"> 899</span></a>      <span class="comment">/**</span>
<a name="l900"><span class="linenum"> 900</span></a>  <span class="comment">     * Returns a given parameter value from the URL.</span>
<a name="l901"><span class="linenum"> 901</span></a>  <span class="comment">     *</span>
<a name="l902"><span class="linenum"> 902</span></a>  <span class="comment">     * @param string $name Name of parameter</span>
<a name="l903"><span class="linenum"> 903</span></a>  <span class="comment">     * @return string Value of parameter or null if not set</span>
<a name="l904"><span class="linenum"> 904</span></a>  <span class="comment">     */</span>
<a name="l905"><span class="linenum"> 905</span></a>      public function <a class="function" onClick="logFunction('get_param')" href="../_functions/get_param.html" onMouseOver="funcPopup(event,'get_param')">get_param</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>) {
<a name="l906"><span class="linenum"> 906</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>)) {
<a name="l907"><span class="linenum"> 907</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('params')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/params.html">params</a>[<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>];
<a name="l908"><span class="linenum"> 908</span></a>          } else {
<a name="l909"><span class="linenum"> 909</span></a>              return null;
<a name="l910"><span class="linenum"> 910</span></a>          }
<a name="l911"><span class="linenum"> 911</span></a>      }
<a name="l912"><span class="linenum"> 912</span></a>  
<a name="l913"><span class="linenum"> 913</span></a>      <span class="comment">/**</span>
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment">     * Returns the 'scheme' portion of a URL. For example, if the URL is</span>
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">     * http://www.example.org:447/my/file/is/here.txt?really=1 then this will</span>
<a name="l916"><span class="linenum"> 916</span></a>  <span class="comment">     * return 'http' (without the colon).</span>
<a name="l917"><span class="linenum"> 917</span></a>  <span class="comment">     *</span>
<a name="l918"><span class="linenum"> 918</span></a>  <span class="comment">     * @return string Scheme of the URL.</span>
<a name="l919"><span class="linenum"> 919</span></a>  <span class="comment">     */</span>
<a name="l920"><span class="linenum"> 920</span></a>      public function <a class="function" onClick="logFunction('get_scheme')" href="../_functions/get_scheme.html" onMouseOver="funcPopup(event,'get_scheme')">get_scheme</a>() {
<a name="l921"><span class="linenum"> 921</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scheme')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/scheme.html">scheme</a>;
<a name="l922"><span class="linenum"> 922</span></a>      }
<a name="l923"><span class="linenum"> 923</span></a>  
<a name="l924"><span class="linenum"> 924</span></a>      <span class="comment">/**</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment">     * Returns the 'host' portion of a URL. For example, if the URL is</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment">     * http://www.example.org:447/my/file/is/here.txt?really=1 then this will</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment">     * return 'www.example.org'.</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment">     *</span>
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment">     * @return string Host of the URL.</span>
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment">     */</span>
<a name="l931"><span class="linenum"> 931</span></a>      public function <a class="function" onClick="logFunction('get_host')" href="../_functions/get_host.html" onMouseOver="funcPopup(event,'get_host')">get_host</a>() {
<a name="l932"><span class="linenum"> 932</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('host')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/host.html">host</a>;
<a name="l933"><span class="linenum"> 933</span></a>      }
<a name="l934"><span class="linenum"> 934</span></a>  
<a name="l935"><span class="linenum"> 935</span></a>      <span class="comment">/**</span>
<a name="l936"><span class="linenum"> 936</span></a>  <span class="comment">     * Returns the 'port' portion of a URL. For example, if the URL is</span>
<a name="l937"><span class="linenum"> 937</span></a>  <span class="comment">     * http://www.example.org:447/my/file/is/here.txt?really=1 then this will</span>
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment">     * return '447'.</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment">     *</span>
<a name="l940"><span class="linenum"> 940</span></a>  <span class="comment">     * @return string Port of the URL.</span>
<a name="l941"><span class="linenum"> 941</span></a>  <span class="comment">     */</span>
<a name="l942"><span class="linenum"> 942</span></a>      public function <a class="function" onClick="logFunction('get_port')" href="../_functions/get_port.html" onMouseOver="funcPopup(event,'get_port')">get_port</a>() {
<a name="l943"><span class="linenum"> 943</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('port')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/port.html">port</a>;
<a name="l944"><span class="linenum"> 944</span></a>      }
<a name="l945"><span class="linenum"> 945</span></a>  }
<a name="l946"><span class="linenum"> 946</span></a>  
<a name="l947"><span class="linenum"> 947</span></a>  <span class="comment">/**</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment"> * Determine if there is data waiting to be processed from a form</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment"> *</span>
<a name="l950"><span class="linenum"> 950</span></a>  <span class="comment"> * Used on most forms in Moodle to check for data</span>
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment"> * Returns the data as an object, if it's found.</span>
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment"> * This object can be used in foreach loops without</span>
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment"> * casting because it's cast to (array) automatically</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment"> *</span>
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment"> * Checks that submitted POST data exists and returns it as object.</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment"> *</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment"> * @return mixed false or object</span>
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment"> */</span>
<a name="l959"><span class="linenum"> 959</span></a>  function <a class="function" onClick="logFunction('data_submitted')" href="../_functions/data_submitted.html" onMouseOver="funcPopup(event,'data_submitted')">data_submitted</a>() {
<a name="l960"><span class="linenum"> 960</span></a>  
<a name="l961"><span class="linenum"> 961</span></a>      if (empty(<a class="var it2242" onMouseOver="hilite(2242)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../_variables/_POST.html">$_POST</a>)) {
<a name="l962"><span class="linenum"> 962</span></a>          return false;
<a name="l963"><span class="linenum"> 963</span></a>      } else {
<a name="l964"><span class="linenum"> 964</span></a>          return (object)<a class="function" onClick="logFunction('fix_utf8')" href="../_functions/fix_utf8.html" onMouseOver="funcPopup(event,'fix_utf8')">fix_utf8</a>(<a class="var it2242" onMouseOver="hilite(2242)" onMouseOut="lolite()" onClick="logVariable('_POST')" href="../_variables/_POST.html">$_POST</a>);
<a name="l965"><span class="linenum"> 965</span></a>      }
<a name="l966"><span class="linenum"> 966</span></a>  }
<a name="l967"><span class="linenum"> 967</span></a>  
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment">/**</span>
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment"> * Given some normal text this function will break up any</span>
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment"> * long words to a given size by inserting the given character</span>
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment"> *</span>
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment"> * It's multibyte savvy and doesn't change anything inside html tags.</span>
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment"> *</span>
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment"> * @param string $string the string to be modified</span>
<a name="l975"><span class="linenum"> 975</span></a>  <span class="comment"> * @param int $maxsize maximum length of the string to be returned</span>
<a name="l976"><span class="linenum"> 976</span></a>  <span class="comment"> * @param string $cutchar the string used to represent word breaks</span>
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment"> * @return string</span>
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment"> */</span>
<a name="l979"><span class="linenum"> 979</span></a>  function <a class="function" onClick="logFunction('break_up_long_words')" href="../_functions/break_up_long_words.html" onMouseOver="funcPopup(event,'break_up_long_words')">break_up_long_words</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>, <a class="var it404" onMouseOver="hilite(404)" onMouseOut="lolite()" onClick="logVariable('maxsize')" href="../_variables/maxsize.html">$maxsize</a>=20, <a class="var it18354" onMouseOver="hilite(18354)" onMouseOut="lolite()" onClick="logVariable('cutchar')" href="../_variables/cutchar.html">$cutchar</a>=' ') {
<a name="l980"><span class="linenum"> 980</span></a>  
<a name="l981"><span class="linenum"> 981</span></a>  <span class="comment">    // First of all, save all the tags inside the text to skip them.</span>
<a name="l982"><span class="linenum"> 982</span></a>      <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a> = array();
<a name="l983"><span class="linenum"> 983</span></a>      <a class="function" onClick="logFunction('filter_save_tags')" href="../_functions/filter_save_tags.html" onMouseOver="funcPopup(event,'filter_save_tags')">filter_save_tags</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>, <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>);
<a name="l984"><span class="linenum"> 984</span></a>  
<a name="l985"><span class="linenum"> 985</span></a>  <span class="comment">    // Process the string adding the cut when necessary.</span>
<a name="l986"><span class="linenum"> 986</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = '';
<a name="l987"><span class="linenum"> 987</span></a>      <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../_variables/length.html">$length</a> = <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>);
<a name="l988"><span class="linenum"> 988</span></a>      <a class="var it18355" onMouseOver="hilite(18355)" onMouseOut="lolite()" onClick="logVariable('wordlength')" href="../_variables/wordlength.html">$wordlength</a> = 0;
<a name="l989"><span class="linenum"> 989</span></a>  
<a name="l990"><span class="linenum"> 990</span></a>      for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>=0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>&lt;<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../_variables/length.html">$length</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++) {
<a name="l991"><span class="linenum"> 991</span></a>          <a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('char')" href="../_variables/char.html">$char</a> = <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>, <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>, 1);
<a name="l992"><span class="linenum"> 992</span></a>          if (<a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('char')" href="../_variables/char.html">$char</a> == ' ' or <a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('char')" href="../_variables/char.html">$char</a> == &quot;\t&quot; or <a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('char')" href="../_variables/char.html">$char</a> == &quot;\n&quot; or <a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('char')" href="../_variables/char.html">$char</a> == &quot;\r&quot; or <a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('char')" href="../_variables/char.html">$char</a> == &quot;&lt;&quot; or <a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('char')" href="../_variables/char.html">$char</a> == &quot;&gt;&quot;) {
<a name="l993"><span class="linenum"> 993</span></a>              <a class="var it18355" onMouseOver="hilite(18355)" onMouseOut="lolite()" onClick="logVariable('wordlength')" href="../_variables/wordlength.html">$wordlength</a> = 0;
<a name="l994"><span class="linenum"> 994</span></a>          } else {
<a name="l995"><span class="linenum"> 995</span></a>              <a class="var it18355" onMouseOver="hilite(18355)" onMouseOut="lolite()" onClick="logVariable('wordlength')" href="../_variables/wordlength.html">$wordlength</a>++;
<a name="l996"><span class="linenum"> 996</span></a>              if (<a class="var it18355" onMouseOver="hilite(18355)" onMouseOut="lolite()" onClick="logVariable('wordlength')" href="../_variables/wordlength.html">$wordlength</a> &gt; <a class="var it404" onMouseOver="hilite(404)" onMouseOut="lolite()" onClick="logVariable('maxsize')" href="../_variables/maxsize.html">$maxsize</a>) {
<a name="l997"><span class="linenum"> 997</span></a>                  <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="var it18354" onMouseOver="hilite(18354)" onMouseOut="lolite()" onClick="logVariable('cutchar')" href="../_variables/cutchar.html">$cutchar</a>;
<a name="l998"><span class="linenum"> 998</span></a>                  <a class="var it18355" onMouseOver="hilite(18355)" onMouseOut="lolite()" onClick="logVariable('wordlength')" href="../_variables/wordlength.html">$wordlength</a> = 0;
<a name="l999"><span class="linenum"> 999</span></a>              }
<a name="l1000"><span class="linenum">1000</span></a>          }
<a name="l1001"><span class="linenum">1001</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('char')" href="../_variables/char.html">$char</a>;
<a name="l1002"><span class="linenum">1002</span></a>      }
<a name="l1003"><span class="linenum">1003</span></a>  
<a name="l1004"><span class="linenum">1004</span></a>  <span class="comment">    // Finally load the tags back again.</span>
<a name="l1005"><span class="linenum">1005</span></a>      if (!empty(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>)) {
<a name="l1006"><span class="linenum">1006</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>), <a class="var it2145" onMouseOver="hilite(2145)" onMouseOut="lolite()" onClick="logVariable('tags')" href="../_variables/tags.html">$tags</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l1007"><span class="linenum">1007</span></a>      }
<a name="l1008"><span class="linenum">1008</span></a>  
<a name="l1009"><span class="linenum">1009</span></a>      return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l1010"><span class="linenum">1010</span></a>  }
<a name="l1011"><span class="linenum">1011</span></a>  
<a name="l1012"><span class="linenum">1012</span></a>  <span class="comment">/**</span>
<a name="l1013"><span class="linenum">1013</span></a>  <span class="comment"> * Try and close the current window using JavaScript, either immediately, or after a delay.</span>
<a name="l1014"><span class="linenum">1014</span></a>  <span class="comment"> *</span>
<a name="l1015"><span class="linenum">1015</span></a>  <span class="comment"> * Echo's out the resulting XHTML &amp; javascript</span>
<a name="l1016"><span class="linenum">1016</span></a>  <span class="comment"> *</span>
<a name="l1017"><span class="linenum">1017</span></a>  <span class="comment"> * @param integer $delay a delay in seconds before closing the window. Default 0.</span>
<a name="l1018"><span class="linenum">1018</span></a>  <span class="comment"> * @param boolean $reloadopener if true, we will see if this window was a pop-up, and try</span>
<a name="l1019"><span class="linenum">1019</span></a>  <span class="comment"> *      to reload the parent window before this one closes.</span>
<a name="l1020"><span class="linenum">1020</span></a>  <span class="comment"> */</span>
<a name="l1021"><span class="linenum">1021</span></a>  function <a class="function" onClick="logFunction('close_window')" href="../_functions/close_window.html" onMouseOver="funcPopup(event,'close_window')">close_window</a>(<a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a> = 0, <a class="var it18356" onMouseOver="hilite(18356)" onMouseOut="lolite()" onClick="logVariable('reloadopener')" href="../_variables/reloadopener.html">$reloadopener</a> = false) {
<a name="l1022"><span class="linenum">1022</span></a>      global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1023"><span class="linenum">1023</span></a>  
<a name="l1024"><span class="linenum">1024</span></a>      if (!<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('headerprinted')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/headerprinted.html">headerprinted</a>) {
<a name="l1025"><span class="linenum">1025</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('closewindow'));
<a name="l1026"><span class="linenum">1026</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l1027"><span class="linenum">1027</span></a>      } else {
<a name="l1028"><span class="linenum">1028</span></a>          <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('container_end_all')" href="../_functions/container_end_all.html" onMouseOver="funcPopup(event,'container_end_all')">container_end_all</a>(false);
<a name="l1029"><span class="linenum">1029</span></a>      }
<a name="l1030"><span class="linenum">1030</span></a>  
<a name="l1031"><span class="linenum">1031</span></a>      if (<a class="var it18356" onMouseOver="hilite(18356)" onMouseOut="lolite()" onClick="logVariable('reloadopener')" href="../_variables/reloadopener.html">$reloadopener</a>) {
<a name="l1032"><span class="linenum">1032</span></a>  <span class="comment">        // Trigger the reload immediately, even if the reload is after a delay.</span>
<a name="l1033"><span class="linenum">1033</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js_function_call')" href="../_functions/js_function_call.html" onMouseOver="funcPopup(event,'js_function_call')">js_function_call</a>('window.opener.location.reload', array(true));
<a name="l1034"><span class="linenum">1034</span></a>      }
<a name="l1035"><span class="linenum">1035</span></a>      <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('notification')" href="../_functions/notification.html" onMouseOver="funcPopup(event,'notification')">notification</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('windowclosing'), 'notifysuccess');
<a name="l1036"><span class="linenum">1036</span></a>  
<a name="l1037"><span class="linenum">1037</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js_function_call')" href="../_functions/js_function_call.html" onMouseOver="funcPopup(event,'js_function_call')">js_function_call</a>('close_window', array(new stdClass()), false, <a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a>);
<a name="l1038"><span class="linenum">1038</span></a>  
<a name="l1039"><span class="linenum">1039</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l1040"><span class="linenum">1040</span></a>      exit;
<a name="l1041"><span class="linenum">1041</span></a>  }
<a name="l1042"><span class="linenum">1042</span></a>  
<a name="l1043"><span class="linenum">1043</span></a>  <span class="comment">/**</span>
<a name="l1044"><span class="linenum">1044</span></a>  <span class="comment"> * Returns a string containing a link to the user documentation for the current page.</span>
<a name="l1045"><span class="linenum">1045</span></a>  <span class="comment"> *</span>
<a name="l1046"><span class="linenum">1046</span></a>  <span class="comment"> * Also contains an icon by default. Shown to teachers and admin only.</span>
<a name="l1047"><span class="linenum">1047</span></a>  <span class="comment"> *</span>
<a name="l1048"><span class="linenum">1048</span></a>  <span class="comment"> * @param string $text The text to be displayed for the link</span>
<a name="l1049"><span class="linenum">1049</span></a>  <span class="comment"> * @return string The link to user documentation for this current page</span>
<a name="l1050"><span class="linenum">1050</span></a>  <span class="comment"> */</span>
<a name="l1051"><span class="linenum">1051</span></a>  function <a class="function" onClick="logFunction('page_doc_link')" href="../_functions/page_doc_link.html" onMouseOver="funcPopup(event,'page_doc_link')">page_doc_link</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>='') {
<a name="l1052"><span class="linenum">1052</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l1053"><span class="linenum">1053</span></a>      <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="function" onClick="logFunction('page_get_doc_link_path')" href="../_functions/page_get_doc_link_path.html" onMouseOver="funcPopup(event,'page_get_doc_link_path')">page_get_doc_link_path</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>);
<a name="l1054"><span class="linenum">1054</span></a>      if (!<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>) {
<a name="l1055"><span class="linenum">1055</span></a>          return '';
<a name="l1056"><span class="linenum">1056</span></a>      }
<a name="l1057"><span class="linenum">1057</span></a>      return <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('doc_link')" href="../_functions/doc_link.html" onMouseOver="funcPopup(event,'doc_link')">doc_link</a>(<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1058"><span class="linenum">1058</span></a>  }
<a name="l1059"><span class="linenum">1059</span></a>  
<a name="l1060"><span class="linenum">1060</span></a>  <span class="comment">/**</span>
<a name="l1061"><span class="linenum">1061</span></a>  <span class="comment"> * Returns the path to use when constructing a link to the docs.</span>
<a name="l1062"><span class="linenum">1062</span></a>  <span class="comment"> *</span>
<a name="l1063"><span class="linenum">1063</span></a>  <span class="comment"> * @since Moodle 2.5.1 2.6</span>
<a name="l1064"><span class="linenum">1064</span></a>  <span class="comment"> * @param moodle_page $page</span>
<a name="l1065"><span class="linenum">1065</span></a>  <span class="comment"> * @return string</span>
<a name="l1066"><span class="linenum">1066</span></a>  <span class="comment"> */</span>
<a name="l1067"><span class="linenum">1067</span></a>  function <a class="function" onClick="logFunction('page_get_doc_link_path')" href="../_functions/page_get_doc_link_path.html" onMouseOver="funcPopup(event,'page_get_doc_link_path')">page_get_doc_link_path</a>(moodle_page <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>) {
<a name="l1068"><span class="linenum">1068</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1069"><span class="linenum">1069</span></a>  
<a name="l1070"><span class="linenum">1070</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('docroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/docroot.html">docroot</a>) || <a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l1071"><span class="linenum">1071</span></a>          return '';
<a name="l1072"><span class="linenum">1072</span></a>      }
<a name="l1073"><span class="linenum">1073</span></a>      if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:doclinks', <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('context')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/context.html">context</a>)) {
<a name="l1074"><span class="linenum">1074</span></a>          return '';
<a name="l1075"><span class="linenum">1075</span></a>      }
<a name="l1076"><span class="linenum">1076</span></a>  
<a name="l1077"><span class="linenum">1077</span></a>      <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('docspath')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/docspath.html">docspath</a>;
<a name="l1078"><span class="linenum">1078</span></a>      if (!<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>) {
<a name="l1079"><span class="linenum">1079</span></a>          return '';
<a name="l1080"><span class="linenum">1080</span></a>      }
<a name="l1081"><span class="linenum">1081</span></a>      return <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>;
<a name="l1082"><span class="linenum">1082</span></a>  }
<a name="l1083"><span class="linenum">1083</span></a>  
<a name="l1084"><span class="linenum">1084</span></a>  
<a name="l1085"><span class="linenum">1085</span></a>  <span class="comment">/**</span>
<a name="l1086"><span class="linenum">1086</span></a>  <span class="comment"> * Validates an email to make sure it makes sense.</span>
<a name="l1087"><span class="linenum">1087</span></a>  <span class="comment"> *</span>
<a name="l1088"><span class="linenum">1088</span></a>  <span class="comment"> * @param string $address The email address to validate.</span>
<a name="l1089"><span class="linenum">1089</span></a>  <span class="comment"> * @return boolean</span>
<a name="l1090"><span class="linenum">1090</span></a>  <span class="comment"> */</span>
<a name="l1091"><span class="linenum">1091</span></a>  function <a class="function" onClick="logFunction('validate_email')" href="../_functions/validate_email.html" onMouseOver="funcPopup(event,'validate_email')">validate_email</a>(<a class="var it5665" onMouseOver="hilite(5665)" onMouseOut="lolite()" onClick="logVariable('address')" href="../_variables/address.html">$address</a>) {
<a name="l1092"><span class="linenum">1092</span></a>  
<a name="l1093"><span class="linenum">1093</span></a>      return (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('#^[-!\#$%&amp;\'*+\\/0-9=?A-Z^_`a-z{|}~]+'.
<a name="l1094"><span class="linenum">1094</span></a>                   '(\.[-!\#$%&amp;\'*+\\/0-9=?A-Z^_`a-z{|}~]+)*'.
<a name="l1095"><span class="linenum">1095</span></a>                    '@'.
<a name="l1096"><span class="linenum">1096</span></a>                    '[-!\#$%&amp;\'*+\\/0-9=?A-Z^_`a-z{|}~]+\.'.
<a name="l1097"><span class="linenum">1097</span></a>                    '[-!\#$%&amp;\'*+\\./0-9=?A-Z^_`a-z{|}~]+$#',
<a name="l1098"><span class="linenum">1098</span></a>                    <a class="var it5665" onMouseOver="hilite(5665)" onMouseOut="lolite()" onClick="logVariable('address')" href="../_variables/address.html">$address</a>));
<a name="l1099"><span class="linenum">1099</span></a>  }
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>  <span class="comment">/**</span>
<a name="l1102"><span class="linenum">1102</span></a>  <span class="comment"> * Extracts file argument either from file parameter or PATH_INFO</span>
<a name="l1103"><span class="linenum">1103</span></a>  <span class="comment"> *</span>
<a name="l1104"><span class="linenum">1104</span></a>  <span class="comment"> * Note: $scriptname parameter is not needed anymore</span>
<a name="l1105"><span class="linenum">1105</span></a>  <span class="comment"> *</span>
<a name="l1106"><span class="linenum">1106</span></a>  <span class="comment"> * @return string file path (only safe characters)</span>
<a name="l1107"><span class="linenum">1107</span></a>  <span class="comment"> */</span>
<a name="l1108"><span class="linenum">1108</span></a>  function <a class="function" onClick="logFunction('get_file_argument')" href="../_functions/get_file_argument.html" onMouseOver="funcPopup(event,'get_file_argument')">get_file_argument</a>() {
<a name="l1109"><span class="linenum">1109</span></a>      global <a class="var it12939" onMouseOver="hilite(12939)" onMouseOut="lolite()" onClick="logVariable('SCRIPT')" href="../_variables/SCRIPT.html">$SCRIPT</a>;
<a name="l1110"><span class="linenum">1110</span></a>  
<a name="l1111"><span class="linenum">1111</span></a>      <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('file', false, <a class="constant" onClick="logConstant('PARAM_PATH')" href="../_constants/PARAM_PATH.html" onMouseOver="constPopup(event,'PARAM_PATH')">PARAM_PATH</a>);
<a name="l1112"><span class="linenum">1112</span></a>  
<a name="l1113"><span class="linenum">1113</span></a>      if (<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a> !== false and <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a> !== '') {
<a name="l1114"><span class="linenum">1114</span></a>          return <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a>;
<a name="l1115"><span class="linenum">1115</span></a>      }
<a name="l1116"><span class="linenum">1116</span></a>      <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a> = false;
<a name="l1117"><span class="linenum">1117</span></a>  
<a name="l1118"><span class="linenum">1118</span></a>  <span class="comment">    // Then try extract file from the slasharguments.</span>
<a name="l1119"><span class="linenum">1119</span></a>      if (<a class="phpfunction" onClick="logFunction('stripos')" href="../_functions/stripos.html" onMouseOver="phpfuncPopup(event,'stripos')">stripos</a>(<a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_SOFTWARE'], 'iis') !== false) {
<a name="l1120"><span class="linenum">1120</span></a>  <span class="comment">        // NOTE: IIS tends to convert all file paths to single byte DOS encoding,</span>
<a name="l1121"><span class="linenum">1121</span></a>  <span class="comment">        //       we can not use other methods because they break unicode chars,</span>
<a name="l1122"><span class="linenum">1122</span></a>  <span class="comment">        //       the only ways are to use URL rewriting</span>
<a name="l1123"><span class="linenum">1123</span></a>  <span class="comment">        //       OR</span>
<a name="l1124"><span class="linenum">1124</span></a>  <span class="comment">        //       to properly set the 'FastCGIUtf8ServerVariables' registry key.</span>
<a name="l1125"><span class="linenum">1125</span></a>          if (isset(<a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO']) and <a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO'] !== '') {
<a name="l1126"><span class="linenum">1126</span></a>  <span class="comment">            // Check that PATH_INFO works == must not contain the script name.</span>
<a name="l1127"><span class="linenum">1127</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO'], <a class="var it12939" onMouseOver="hilite(12939)" onMouseOut="lolite()" onClick="logVariable('SCRIPT')" href="../_variables/SCRIPT.html">$SCRIPT</a>) === false) {
<a name="l1128"><span class="linenum">1128</span></a>                  <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="phpfunction" onClick="logFunction('urldecode')" href="../_functions/urldecode.html" onMouseOver="phpfuncPopup(event,'urldecode')">urldecode</a>(<a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO']), <a class="constant" onClick="logConstant('PARAM_PATH')" href="../_constants/PARAM_PATH.html" onMouseOver="constPopup(event,'PARAM_PATH')">PARAM_PATH</a>);
<a name="l1129"><span class="linenum">1129</span></a>              }
<a name="l1130"><span class="linenum">1130</span></a>          }
<a name="l1131"><span class="linenum">1131</span></a>      } else {
<a name="l1132"><span class="linenum">1132</span></a>  <span class="comment">        // All other apache-like servers depend on PATH_INFO.</span>
<a name="l1133"><span class="linenum">1133</span></a>          if (isset(<a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO'])) {
<a name="l1134"><span class="linenum">1134</span></a>              if (isset(<a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SCRIPT_NAME']) and <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO'], <a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SCRIPT_NAME']) === 0) {
<a name="l1135"><span class="linenum">1135</span></a>                  <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO'], <a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SCRIPT_NAME']));
<a name="l1136"><span class="linenum">1136</span></a>              } else {
<a name="l1137"><span class="linenum">1137</span></a>                  <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a> = <a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['PATH_INFO'];
<a name="l1138"><span class="linenum">1138</span></a>              }
<a name="l1139"><span class="linenum">1139</span></a>              <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a> = <a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a>, <a class="constant" onClick="logConstant('PARAM_PATH')" href="../_constants/PARAM_PATH.html" onMouseOver="constPopup(event,'PARAM_PATH')">PARAM_PATH</a>);
<a name="l1140"><span class="linenum">1140</span></a>          }
<a name="l1141"><span class="linenum">1141</span></a>      }
<a name="l1142"><span class="linenum">1142</span></a>  
<a name="l1143"><span class="linenum">1143</span></a>      return <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../_variables/relativepath.html">$relativepath</a>;
<a name="l1144"><span class="linenum">1144</span></a>  }
<a name="l1145"><span class="linenum">1145</span></a>  
<a name="l1146"><span class="linenum">1146</span></a>  <span class="comment">/**</span>
<a name="l1147"><span class="linenum">1147</span></a>  <span class="comment"> * Just returns an array of text formats suitable for a popup menu</span>
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment"> *</span>
<a name="l1149"><span class="linenum">1149</span></a>  <span class="comment"> * @return array</span>
<a name="l1150"><span class="linenum">1150</span></a>  <span class="comment"> */</span>
<a name="l1151"><span class="linenum">1151</span></a>  function <a class="function" onClick="logFunction('format_text_menu')" href="../_functions/format_text_menu.html" onMouseOver="funcPopup(event,'format_text_menu')">format_text_menu</a>() {
<a name="l1152"><span class="linenum">1152</span></a>      return array (<a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a> =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('formattext'),
<a name="l1153"><span class="linenum">1153</span></a>                    <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a> =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('formathtml'),
<a name="l1154"><span class="linenum">1154</span></a>                    <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a> =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('formatplain'),
<a name="l1155"><span class="linenum">1155</span></a>                    <a class="constant" onClick="logConstant('FORMAT_MARKDOWN')" href="../_constants/FORMAT_MARKDOWN.html" onMouseOver="constPopup(event,'FORMAT_MARKDOWN')">FORMAT_MARKDOWN</a> =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('formatmarkdown'));
<a name="l1156"><span class="linenum">1156</span></a>  }
<a name="l1157"><span class="linenum">1157</span></a>  
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment">/**</span>
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment"> * Given text in a variety of format codings, this function returns the text as safe HTML.</span>
<a name="l1160"><span class="linenum">1160</span></a>  <span class="comment"> *</span>
<a name="l1161"><span class="linenum">1161</span></a>  <span class="comment"> * This function should mainly be used for long strings like posts,</span>
<a name="l1162"><span class="linenum">1162</span></a>  <span class="comment"> * answers, glossary items etc. For short strings {@link format_string()}.</span>
<a name="l1163"><span class="linenum">1163</span></a>  <span class="comment"> *</span>
<a name="l1164"><span class="linenum">1164</span></a>  <span class="comment"> * &lt;pre&gt;</span>
<a name="l1165"><span class="linenum">1165</span></a>  <span class="comment"> * Options:</span>
<a name="l1166"><span class="linenum">1166</span></a>  <span class="comment"> *      trusted     :   If true the string won't be cleaned. Default false required noclean=true.</span>
<a name="l1167"><span class="linenum">1167</span></a>  <span class="comment"> *      noclean     :   If true the string won't be cleaned. Default false required trusted=true.</span>
<a name="l1168"><span class="linenum">1168</span></a>  <span class="comment"> *      nocache     :   If true the strign will not be cached and will be formatted every call. Default false.</span>
<a name="l1169"><span class="linenum">1169</span></a>  <span class="comment"> *      filter      :   If true the string will be run through applicable filters as well. Default true.</span>
<a name="l1170"><span class="linenum">1170</span></a>  <span class="comment"> *      para        :   If true then the returned string will be wrapped in div tags. Default true.</span>
<a name="l1171"><span class="linenum">1171</span></a>  <span class="comment"> *      newlines    :   If true then lines newline breaks will be converted to HTML newline breaks. Default true.</span>
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment"> *      context     :   The context that will be used for filtering.</span>
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment"> *      overflowdiv :   If set to true the formatted text will be encased in a div</span>
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment"> *                      with the class no-overflow before being returned. Default false.</span>
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment"> *      allowid     :   If true then id attributes will not be removed, even when</span>
<a name="l1176"><span class="linenum">1176</span></a>  <span class="comment"> *                      using htmlpurifier. Default false.</span>
<a name="l1177"><span class="linenum">1177</span></a>  <span class="comment"> *      blanktarget :   If true all &lt;a&gt; tags will have target=&quot;_blank&quot; added unless target is explicitly specified.</span>
<a name="l1178"><span class="linenum">1178</span></a>  <span class="comment"> * &lt;/pre&gt;</span>
<a name="l1179"><span class="linenum">1179</span></a>  <span class="comment"> *</span>
<a name="l1180"><span class="linenum">1180</span></a>  <span class="comment"> * @staticvar array $croncache</span>
<a name="l1181"><span class="linenum">1181</span></a>  <span class="comment"> * @param string $text The text to be formatted. This is raw text originally from user input.</span>
<a name="l1182"><span class="linenum">1182</span></a>  <span class="comment"> * @param int $format Identifier of the text format to be used</span>
<a name="l1183"><span class="linenum">1183</span></a>  <span class="comment"> *            [FORMAT_MOODLE, FORMAT_HTML, FORMAT_PLAIN, FORMAT_MARKDOWN]</span>
<a name="l1184"><span class="linenum">1184</span></a>  <span class="comment"> * @param object/array $options text formatting options</span>
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment"> * @param int $courseiddonotuse deprecated course id, use context option instead</span>
<a name="l1186"><span class="linenum">1186</span></a>  <span class="comment"> * @return string</span>
<a name="l1187"><span class="linenum">1187</span></a>  <span class="comment"> */</span>
<a name="l1188"><span class="linenum">1188</span></a>  function <a class="function" onClick="logFunction('format_text')" href="../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = null, <a class="var it18358" onMouseOver="hilite(18358)" onMouseOut="lolite()" onClick="logVariable('courseiddonotuse')" href="../_variables/courseiddonotuse.html">$courseiddonotuse</a> = null) {
<a name="l1189"><span class="linenum">1189</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l1190"><span class="linenum">1190</span></a>  
<a name="l1191"><span class="linenum">1191</span></a>      if (<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> === '' || <a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>)) {
<a name="l1192"><span class="linenum">1192</span></a>  <span class="comment">        // No need to do any filters and cleaning.</span>
<a name="l1193"><span class="linenum">1193</span></a>          return '';
<a name="l1194"><span class="linenum">1194</span></a>      }
<a name="l1195"><span class="linenum">1195</span></a>  
<a name="l1196"><span class="linenum">1196</span></a>  <span class="comment">    // Detach object, we can not modify it.</span>
<a name="l1197"><span class="linenum">1197</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = (array)<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>;
<a name="l1198"><span class="linenum">1198</span></a>  
<a name="l1199"><span class="linenum">1199</span></a>      if (!isset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['trusted'])) {
<a name="l1200"><span class="linenum">1200</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['trusted'] = false;
<a name="l1201"><span class="linenum">1201</span></a>      }
<a name="l1202"><span class="linenum">1202</span></a>      if (!isset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['noclean'])) {
<a name="l1203"><span class="linenum">1203</span></a>          if (<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['trusted'] and <a class="function" onClick="logFunction('trusttext_active')" href="../_functions/trusttext_active.html" onMouseOver="funcPopup(event,'trusttext_active')">trusttext_active</a>()) {
<a name="l1204"><span class="linenum">1204</span></a>  <span class="comment">            // No cleaning if text trusted and noclean not specified.</span>
<a name="l1205"><span class="linenum">1205</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['noclean'] = true;
<a name="l1206"><span class="linenum">1206</span></a>          } else {
<a name="l1207"><span class="linenum">1207</span></a>              <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['noclean'] = false;
<a name="l1208"><span class="linenum">1208</span></a>          }
<a name="l1209"><span class="linenum">1209</span></a>      }
<a name="l1210"><span class="linenum">1210</span></a>      if (!isset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['nocache'])) {
<a name="l1211"><span class="linenum">1211</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['nocache'] = false;
<a name="l1212"><span class="linenum">1212</span></a>      }
<a name="l1213"><span class="linenum">1213</span></a>      if (!isset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['filter'])) {
<a name="l1214"><span class="linenum">1214</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['filter'] = true;
<a name="l1215"><span class="linenum">1215</span></a>      }
<a name="l1216"><span class="linenum">1216</span></a>      if (!isset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['para'])) {
<a name="l1217"><span class="linenum">1217</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['para'] = true;
<a name="l1218"><span class="linenum">1218</span></a>      }
<a name="l1219"><span class="linenum">1219</span></a>      if (!isset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['newlines'])) {
<a name="l1220"><span class="linenum">1220</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['newlines'] = true;
<a name="l1221"><span class="linenum">1221</span></a>      }
<a name="l1222"><span class="linenum">1222</span></a>      if (!isset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['overflowdiv'])) {
<a name="l1223"><span class="linenum">1223</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['overflowdiv'] = false;
<a name="l1224"><span class="linenum">1224</span></a>      }
<a name="l1225"><span class="linenum">1225</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['blanktarget'] = !empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['blanktarget']);
<a name="l1226"><span class="linenum">1226</span></a>  
<a name="l1227"><span class="linenum">1227</span></a>  <span class="comment">    // Calculate best context.</span>
<a name="l1228"><span class="linenum">1228</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) or <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a> &lt; 2013051400 or <a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l1229"><span class="linenum">1229</span></a>  <span class="comment">        // Do not filter anything during installation or before upgrade completes.</span>
<a name="l1230"><span class="linenum">1230</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = null;
<a name="l1231"><span class="linenum">1231</span></a>  
<a name="l1232"><span class="linenum">1232</span></a>      } else if (isset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context'])) { // First by explicit passed context option.
<a name="l1233"><span class="linenum">1233</span></a>          if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context'])) {
<a name="l1234"><span class="linenum">1234</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context'];
<a name="l1235"><span class="linenum">1235</span></a>          } else {
<a name="l1236"><span class="linenum">1236</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context']);
<a name="l1237"><span class="linenum">1237</span></a>          }
<a name="l1238"><span class="linenum">1238</span></a>      } else if (<a class="var it18358" onMouseOver="hilite(18358)" onMouseOut="lolite()" onClick="logVariable('courseiddonotuse')" href="../_variables/courseiddonotuse.html">$courseiddonotuse</a>) {
<a name="l1239"><span class="linenum">1239</span></a>  <span class="comment">        // Legacy courseid.</span>
<a name="l1240"><span class="linenum">1240</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it18358" onMouseOver="hilite(18358)" onMouseOut="lolite()" onClick="logVariable('courseiddonotuse')" href="../_variables/courseiddonotuse.html">$courseiddonotuse</a>);
<a name="l1241"><span class="linenum">1241</span></a>      } else {
<a name="l1242"><span class="linenum">1242</span></a>  <span class="comment">        // Fallback to $PAGE-&gt;context this may be problematic in CLI and other non-standard pages :-(.</span>
<a name="l1243"><span class="linenum">1243</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('context')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/context.html">context</a>;
<a name="l1244"><span class="linenum">1244</span></a>      }
<a name="l1245"><span class="linenum">1245</span></a>  
<a name="l1246"><span class="linenum">1246</span></a>      if (!<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1247"><span class="linenum">1247</span></a>  <span class="comment">        // Either install/upgrade or something has gone really wrong because context does not exist (yet?).</span>
<a name="l1248"><span class="linenum">1248</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['nocache'] = true;
<a name="l1249"><span class="linenum">1249</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['filter']  = false;
<a name="l1250"><span class="linenum">1250</span></a>      }
<a name="l1251"><span class="linenum">1251</span></a>  
<a name="l1252"><span class="linenum">1252</span></a>      if (<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['filter']) {
<a name="l1253"><span class="linenum">1253</span></a>          <a class="var it12431" onMouseOver="hilite(12431)" onMouseOut="lolite()" onClick="logVariable('filtermanager')" href="../_variables/filtermanager.html">$filtermanager</a> = <a class="class" onClick="logClass('filter_manager')" href="../_classes/filter_manager.html" onMouseOver="classPopup(event,'filter_manager')">filter_manager</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1254"><span class="linenum">1254</span></a>          <a class="var it12431" onMouseOver="hilite(12431)" onMouseOut="lolite()" onClick="logVariable('filtermanager')" href="../_variables/filtermanager.html">$filtermanager</a>-&gt;<a class="function" onClick="logFunction('setup_page_for_filters')" href="../_functions/setup_page_for_filters.html" onMouseOver="funcPopup(event,'setup_page_for_filters')">setup_page_for_filters</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>); <span class="comment">// Setup global stuff filters may have.</span>
<a name="l1255"><span class="linenum">1255</span></a>          <a class="var it18359" onMouseOver="hilite(18359)" onMouseOut="lolite()" onClick="logVariable('filteroptions')" href="../_variables/filteroptions.html">$filteroptions</a> = array(
<a name="l1256"><span class="linenum">1256</span></a>              'originalformat' =&gt; <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>,
<a name="l1257"><span class="linenum">1257</span></a>              'noclean' =&gt; <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['noclean'],
<a name="l1258"><span class="linenum">1258</span></a>          );
<a name="l1259"><span class="linenum">1259</span></a>      } else {
<a name="l1260"><span class="linenum">1260</span></a>          <a class="var it12431" onMouseOver="hilite(12431)" onMouseOut="lolite()" onClick="logVariable('filtermanager')" href="../_variables/filtermanager.html">$filtermanager</a> = <span class="keyword">new </span><a class="class" onClick="logClass('null_filter_manager')" href="../_classes/null_filter_manager.html" onMouseOver="classPopup(event,'null_filter_manager')">null_filter_manager</a>();
<a name="l1261"><span class="linenum">1261</span></a>          <a class="var it18359" onMouseOver="hilite(18359)" onMouseOut="lolite()" onClick="logVariable('filteroptions')" href="../_variables/filteroptions.html">$filteroptions</a> = array();
<a name="l1262"><span class="linenum">1262</span></a>      }
<a name="l1263"><span class="linenum">1263</span></a>  
<a name="l1264"><span class="linenum">1264</span></a>      switch (<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>) {
<a name="l1265"><span class="linenum">1265</span></a>          case <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>:
<a name="l1266"><span class="linenum">1266</span></a>              if (!<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['noclean']) {
<a name="l1267"><span class="linenum">1267</span></a>                  <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('clean_text')" href="../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1268"><span class="linenum">1268</span></a>              }
<a name="l1269"><span class="linenum">1269</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="var it12431" onMouseOver="hilite(12431)" onMouseOut="lolite()" onClick="logVariable('filtermanager')" href="../_variables/filtermanager.html">$filtermanager</a>-&gt;<a class="function" onClick="logFunction('filter_text')" href="../_functions/filter_text.html" onMouseOver="funcPopup(event,'filter_text')">filter_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it18359" onMouseOver="hilite(18359)" onMouseOut="lolite()" onClick="logVariable('filteroptions')" href="../_variables/filteroptions.html">$filteroptions</a>);
<a name="l1270"><span class="linenum">1270</span></a>              break;
<a name="l1271"><span class="linenum">1271</span></a>  
<a name="l1272"><span class="linenum">1272</span></a>          case <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>:
<a name="l1273"><span class="linenum">1273</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('s')" href="../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>); <span class="comment">// Cleans dangerous JS.</span>
<a name="l1274"><span class="linenum">1274</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('rebuildnolinktag')" href="../_functions/rebuildnolinktag.html" onMouseOver="funcPopup(event,'rebuildnolinktag')">rebuildnolinktag</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1275"><span class="linenum">1275</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('  ', '&amp;nbsp; ', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1276"><span class="linenum">1276</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('nl2br')" href="../_functions/nl2br.html" onMouseOver="phpfuncPopup(event,'nl2br')">nl2br</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1277"><span class="linenum">1277</span></a>              break;
<a name="l1278"><span class="linenum">1278</span></a>  
<a name="l1279"><span class="linenum">1279</span></a>          case <a class="constant" onClick="logConstant('FORMAT_WIKI')" href="../_constants/FORMAT_WIKI.html" onMouseOver="constPopup(event,'FORMAT_WIKI')">FORMAT_WIKI</a>:
<a name="l1280"><span class="linenum">1280</span></a>  <span class="comment">            // This format is deprecated.</span>
<a name="l1281"><span class="linenum">1281</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = '&lt;p&gt;NOTICE: Wiki-like formatting has been removed from Moodle.  You should not be seeing
<a name="l1282"><span class="linenum">1282</span></a>                       this message as all texts should have been converted to Markdown format instead.
<a name="l1283"><span class="linenum">1283</span></a>                       Please post a bug report to http://moodle.org/bugs with information about where you
<a name="l1284"><span class="linenum">1284</span></a>                       saw this message.&lt;/p&gt;'.<a class="function" onClick="logFunction('s')" href="../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1285"><span class="linenum">1285</span></a>              break;
<a name="l1286"><span class="linenum">1286</span></a>  
<a name="l1287"><span class="linenum">1287</span></a>          case <a class="constant" onClick="logConstant('FORMAT_MARKDOWN')" href="../_constants/FORMAT_MARKDOWN.html" onMouseOver="constPopup(event,'FORMAT_MARKDOWN')">FORMAT_MARKDOWN</a>:
<a name="l1288"><span class="linenum">1288</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('markdown_to_html')" href="../_functions/markdown_to_html.html" onMouseOver="funcPopup(event,'markdown_to_html')">markdown_to_html</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1289"><span class="linenum">1289</span></a>              if (!<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['noclean']) {
<a name="l1290"><span class="linenum">1290</span></a>                  <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('clean_text')" href="../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1291"><span class="linenum">1291</span></a>              }
<a name="l1292"><span class="linenum">1292</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="var it12431" onMouseOver="hilite(12431)" onMouseOut="lolite()" onClick="logVariable('filtermanager')" href="../_variables/filtermanager.html">$filtermanager</a>-&gt;<a class="function" onClick="logFunction('filter_text')" href="../_functions/filter_text.html" onMouseOver="funcPopup(event,'filter_text')">filter_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it18359" onMouseOver="hilite(18359)" onMouseOut="lolite()" onClick="logVariable('filteroptions')" href="../_variables/filteroptions.html">$filteroptions</a>);
<a name="l1293"><span class="linenum">1293</span></a>              break;
<a name="l1294"><span class="linenum">1294</span></a>  
<a name="l1295"><span class="linenum">1295</span></a>          default:  // <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a> or anything else.
<a name="l1296"><span class="linenum">1296</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('text_to_html')" href="../_functions/text_to_html.html" onMouseOver="funcPopup(event,'text_to_html')">text_to_html</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, null, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['para'], <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['newlines']);
<a name="l1297"><span class="linenum">1297</span></a>              if (!<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['noclean']) {
<a name="l1298"><span class="linenum">1298</span></a>                  <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('clean_text')" href="../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1299"><span class="linenum">1299</span></a>              }
<a name="l1300"><span class="linenum">1300</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="var it12431" onMouseOver="hilite(12431)" onMouseOut="lolite()" onClick="logVariable('filtermanager')" href="../_variables/filtermanager.html">$filtermanager</a>-&gt;<a class="function" onClick="logFunction('filter_text')" href="../_functions/filter_text.html" onMouseOver="funcPopup(event,'filter_text')">filter_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it18359" onMouseOver="hilite(18359)" onMouseOut="lolite()" onClick="logVariable('filteroptions')" href="../_variables/filteroptions.html">$filteroptions</a>);
<a name="l1301"><span class="linenum">1301</span></a>              break;
<a name="l1302"><span class="linenum">1302</span></a>      }
<a name="l1303"><span class="linenum">1303</span></a>      if (<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['filter']) {
<a name="l1304"><span class="linenum">1304</span></a>  <span class="comment">        // At this point there should not be any draftfile links any more,</span>
<a name="l1305"><span class="linenum">1305</span></a>  <span class="comment">        // this happens when developers forget to post process the text.</span>
<a name="l1306"><span class="linenum">1306</span></a>  <span class="comment">        // The only potential problem is that somebody might try to format</span>
<a name="l1307"><span class="linenum">1307</span></a>  <span class="comment">        // the text before storing into database which would be itself big bug..</span>
<a name="l1308"><span class="linenum">1308</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;\&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a>/draftfile.php&quot;, &quot;\&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('httpswwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/httpswwwroot.html">httpswwwroot</a>/brokenfile.php#&quot;, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1309"><span class="linenum">1309</span></a>  
<a name="l1310"><span class="linenum">1310</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debugdeveloper')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debugdeveloper.html">debugdeveloper</a>) {
<a name="l1311"><span class="linenum">1311</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, '@@PLUGINFILE@@/') !== false) {
<a name="l1312"><span class="linenum">1312</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Before calling <a class="function" onClick="logFunction('format_text')" href="../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(), the content must be processed with <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>()',
<a name="l1313"><span class="linenum">1313</span></a>                      <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1314"><span class="linenum">1314</span></a>              }
<a name="l1315"><span class="linenum">1315</span></a>          }
<a name="l1316"><span class="linenum">1316</span></a>      }
<a name="l1317"><span class="linenum">1317</span></a>  
<a name="l1318"><span class="linenum">1318</span></a>      if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['overflowdiv'])) {
<a name="l1319"><span class="linenum">1319</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('div', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, array('class' =&gt; 'no-overflow'));
<a name="l1320"><span class="linenum">1320</span></a>      }
<a name="l1321"><span class="linenum">1321</span></a>  
<a name="l1322"><span class="linenum">1322</span></a>      if (<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['blanktarget']) {
<a name="l1323"><span class="linenum">1323</span></a>          <a class="var it18360" onMouseOver="hilite(18360)" onMouseOut="lolite()" onClick="logVariable('domdoc')" href="../_variables/domdoc.html">$domdoc</a> = new DOMDocument();
<a name="l1324"><span class="linenum">1324</span></a>          <a class="var it18360" onMouseOver="hilite(18360)" onMouseOut="lolite()" onClick="logVariable('domdoc')" href="../_variables/domdoc.html">$domdoc</a>-&gt;<a class="function" onClick="logFunction('loadHTML')" href="../_functions/loadhtml.html" onMouseOver="funcPopup(event,'loadhtml')">loadHTML</a>('&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;' . <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1325"><span class="linenum">1325</span></a>          foreach (<a class="var it18360" onMouseOver="hilite(18360)" onMouseOut="lolite()" onClick="logVariable('domdoc')" href="../_variables/domdoc.html">$domdoc</a>-&gt;getElementsByTagName('a') as <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>) {
<a name="l1326"><span class="linenum">1326</span></a>              if (<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>-&gt;<a class="function" onClick="logFunction('hasAttribute')" href="../_functions/hasattribute.html" onMouseOver="funcPopup(event,'hasattribute')">hasAttribute</a>('target') &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>-&gt;<a class="function" onClick="logFunction('getAttribute')" href="../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('target'), '_blank') === false) {
<a name="l1327"><span class="linenum">1327</span></a>                  continue;
<a name="l1328"><span class="linenum">1328</span></a>              }
<a name="l1329"><span class="linenum">1329</span></a>              <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>-&gt;<a class="function" onClick="logFunction('setAttribute')" href="../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('target', '_blank');
<a name="l1330"><span class="linenum">1330</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>-&gt;<a class="function" onClick="logFunction('getAttribute')" href="../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('rel'), 'noreferrer') === false) {
<a name="l1331"><span class="linenum">1331</span></a>                  <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>-&gt;<a class="function" onClick="logFunction('setAttribute')" href="../_functions/setattribute.html" onMouseOver="funcPopup(event,'setattribute')">setAttribute</a>('rel', <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>-&gt;<a class="function" onClick="logFunction('getAttribute')" href="../_functions/getattribute.html" onMouseOver="funcPopup(event,'getattribute')">getAttribute</a>('rel') . ' noreferrer'));
<a name="l1332"><span class="linenum">1332</span></a>              }
<a name="l1333"><span class="linenum">1333</span></a>          }
<a name="l1334"><span class="linenum">1334</span></a>  
<a name="l1335"><span class="linenum">1335</span></a>  <span class="comment">        // This regex is nasty and I don't like it. The correct way to solve this is by loading the HTML like so:</span>
<a name="l1336"><span class="linenum">1336</span></a>  <span class="comment">        // $domdoc-&gt;loadHTML($text, LIBXML_HTML_NOIMPLIED | LIBXML_HTML_NODEFDTD); however it seems like the libxml</span>
<a name="l1337"><span class="linenum">1337</span></a>  <span class="comment">        // version that travis uses doesn't work properly and ends up leaving &lt;html&gt;&lt;body&gt;, so I'm forced to use</span>
<a name="l1338"><span class="linenum">1338</span></a>  <span class="comment">        // this regex to remove those tags.</span>
<a name="l1339"><span class="linenum">1339</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('~&lt;(?:!DOCTYPE|/?(?:html|body))[^&gt;]*&gt;\s*~i', '', <a class="var it18360" onMouseOver="hilite(18360)" onMouseOut="lolite()" onClick="logVariable('domdoc')" href="../_variables/domdoc.html">$domdoc</a>-&gt;saveHTML(<a class="var it18360" onMouseOver="hilite(18360)" onMouseOut="lolite()" onClick="logVariable('domdoc')" href="../_variables/domdoc.html">$domdoc</a>-&gt;<a onClick="logVariable('documentElement')" class="var it44367" onMouseOver="hilite(44367)" onMouseOut="lolite()" href="../_variables/documentElement.html">documentElement</a>)));
<a name="l1340"><span class="linenum">1340</span></a>      }
<a name="l1341"><span class="linenum">1341</span></a>  
<a name="l1342"><span class="linenum">1342</span></a>      return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1343"><span class="linenum">1343</span></a>  }
<a name="l1344"><span class="linenum">1344</span></a>  
<a name="l1345"><span class="linenum">1345</span></a>  <span class="comment">/**</span>
<a name="l1346"><span class="linenum">1346</span></a>  <span class="comment"> * Resets some data related to filters, called during upgrade or when general filter settings change.</span>
<a name="l1347"><span class="linenum">1347</span></a>  <span class="comment"> *</span>
<a name="l1348"><span class="linenum">1348</span></a>  <span class="comment"> * @param bool $phpunitreset true means called from our PHPUnit integration test reset</span>
<a name="l1349"><span class="linenum">1349</span></a>  <span class="comment"> * @return void</span>
<a name="l1350"><span class="linenum">1350</span></a>  <span class="comment"> */</span>
<a name="l1351"><span class="linenum">1351</span></a>  function <a class="function" onClick="logFunction('reset_text_filters_cache')" href="../_functions/reset_text_filters_cache.html" onMouseOver="funcPopup(event,'reset_text_filters_cache')">reset_text_filters_cache</a>(<a class="var it5927" onMouseOver="hilite(5927)" onMouseOut="lolite()" onClick="logVariable('phpunitreset')" href="../_variables/phpunitreset.html">$phpunitreset</a> = false) {
<a name="l1352"><span class="linenum">1352</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1353"><span class="linenum">1353</span></a>  
<a name="l1354"><span class="linenum">1354</span></a>      if (<a class="var it5927" onMouseOver="hilite(5927)" onMouseOut="lolite()" onClick="logVariable('phpunitreset')" href="../_variables/phpunitreset.html">$phpunitreset</a>) {
<a name="l1355"><span class="linenum">1355</span></a>  <span class="comment">        // HTMLPurifier does not change, DB is already reset to defaults,</span>
<a name="l1356"><span class="linenum">1356</span></a>  <span class="comment">        // nothing to do here, the dataroot was cleared too.</span>
<a name="l1357"><span class="linenum">1357</span></a>          return;
<a name="l1358"><span class="linenum">1358</span></a>      }
<a name="l1359"><span class="linenum">1359</span></a>  
<a name="l1360"><span class="linenum">1360</span></a>  <span class="comment">    // The purge_all_caches() deals with cachedir and localcachedir purging,</span>
<a name="l1361"><span class="linenum">1361</span></a>  <span class="comment">    // the individual filter caches are invalidated as necessary elsewhere.</span>
<a name="l1362"><span class="linenum">1362</span></a>  
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment">    // Update $CFG-&gt;filterall cache flag.</span>
<a name="l1364"><span class="linenum">1364</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('stringfilters')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/stringfilters.html">stringfilters</a>)) {
<a name="l1365"><span class="linenum">1365</span></a>          <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('filterall', 0);
<a name="l1366"><span class="linenum">1366</span></a>          return;
<a name="l1367"><span class="linenum">1367</span></a>      }
<a name="l1368"><span class="linenum">1368</span></a>      <a class="var it18362" onMouseOver="hilite(18362)" onMouseOut="lolite()" onClick="logVariable('installedfilters')" href="../_variables/installedfilters.html">$installedfilters</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('filter');
<a name="l1369"><span class="linenum">1369</span></a>      <a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('stringfilters')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/stringfilters.html">stringfilters</a>);
<a name="l1370"><span class="linenum">1370</span></a>      foreach (<a class="var it655" onMouseOver="hilite(655)" onMouseOut="lolite()" onClick="logVariable('filters')" href="../_variables/filters.html">$filters</a> as <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>) {
<a name="l1371"><span class="linenum">1371</span></a>          if (isset(<a class="var it18362" onMouseOver="hilite(18362)" onMouseOut="lolite()" onClick="logVariable('installedfilters')" href="../_variables/installedfilters.html">$installedfilters</a>[<a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>])) {
<a name="l1372"><span class="linenum">1372</span></a>              <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('filterall', 1);
<a name="l1373"><span class="linenum">1373</span></a>              return;
<a name="l1374"><span class="linenum">1374</span></a>          }
<a name="l1375"><span class="linenum">1375</span></a>      }
<a name="l1376"><span class="linenum">1376</span></a>      <a class="function" onClick="logFunction('set_config')" href="../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('filterall', 0);
<a name="l1377"><span class="linenum">1377</span></a>  }
<a name="l1378"><span class="linenum">1378</span></a>  
<a name="l1379"><span class="linenum">1379</span></a>  <span class="comment">/**</span>
<a name="l1380"><span class="linenum">1380</span></a>  <span class="comment"> * Given a simple string, this function returns the string</span>
<a name="l1381"><span class="linenum">1381</span></a>  <span class="comment"> * processed by enabled string filters if $CFG-&gt;filterall is enabled</span>
<a name="l1382"><span class="linenum">1382</span></a>  <span class="comment"> *</span>
<a name="l1383"><span class="linenum">1383</span></a>  <span class="comment"> * This function should be used to print short strings (non html) that</span>
<a name="l1384"><span class="linenum">1384</span></a>  <span class="comment"> * need filter processing e.g. activity titles, post subjects,</span>
<a name="l1385"><span class="linenum">1385</span></a>  <span class="comment"> * glossary concepts.</span>
<a name="l1386"><span class="linenum">1386</span></a>  <span class="comment"> *</span>
<a name="l1387"><span class="linenum">1387</span></a>  <span class="comment"> * @staticvar bool $strcache</span>
<a name="l1388"><span class="linenum">1388</span></a>  <span class="comment"> * @param string $string The string to be filtered. Should be plain text, expect</span>
<a name="l1389"><span class="linenum">1389</span></a>  <span class="comment"> * possibly for multilang tags.</span>
<a name="l1390"><span class="linenum">1390</span></a>  <span class="comment"> * @param boolean $striplinks To strip any link in the result text. Moodle 1.8 default changed from false to true! MDL-8713</span>
<a name="l1391"><span class="linenum">1391</span></a>  <span class="comment"> * @param array $options options array/object or courseid</span>
<a name="l1392"><span class="linenum">1392</span></a>  <span class="comment"> * @return string</span>
<a name="l1393"><span class="linenum">1393</span></a>  <span class="comment"> */</span>
<a name="l1394"><span class="linenum">1394</span></a>  function <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>, <a class="var it18363" onMouseOver="hilite(18363)" onMouseOut="lolite()" onClick="logVariable('striplinks')" href="../_variables/striplinks.html">$striplinks</a> = true, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = null) {
<a name="l1395"><span class="linenum">1395</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l1396"><span class="linenum">1396</span></a>  
<a name="l1397"><span class="linenum">1397</span></a>  <span class="comment">    // We'll use a in-memory cache here to speed up repeated strings.</span>
<a name="l1398"><span class="linenum">1398</span></a>      static <a class="var it18364" onMouseOver="hilite(18364)" onMouseOut="lolite()" onClick="logVariable('strcache')" href="../_variables/strcache.html">$strcache</a> = false;
<a name="l1399"><span class="linenum">1399</span></a>  
<a name="l1400"><span class="linenum">1400</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) or <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a> &lt; 2013051400 or <a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l1401"><span class="linenum">1401</span></a>  <span class="comment">        // Do not filter anything during installation or before upgrade completes.</span>
<a name="l1402"><span class="linenum">1402</span></a>          return <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>);
<a name="l1403"><span class="linenum">1403</span></a>      }
<a name="l1404"><span class="linenum">1404</span></a>  
<a name="l1405"><span class="linenum">1405</span></a>      if (<a class="var it18364" onMouseOver="hilite(18364)" onMouseOut="lolite()" onClick="logVariable('strcache')" href="../_variables/strcache.html">$strcache</a> === false or <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it18364" onMouseOver="hilite(18364)" onMouseOut="lolite()" onClick="logVariable('strcache')" href="../_variables/strcache.html">$strcache</a>) &gt; 2000) {
<a name="l1406"><span class="linenum">1406</span></a>  <span class="comment">        // This number might need some tuning to limit memory usage in cron.</span>
<a name="l1407"><span class="linenum">1407</span></a>          <a class="var it18364" onMouseOver="hilite(18364)" onMouseOut="lolite()" onClick="logVariable('strcache')" href="../_variables/strcache.html">$strcache</a> = array();
<a name="l1408"><span class="linenum">1408</span></a>      }
<a name="l1409"><span class="linenum">1409</span></a>  
<a name="l1410"><span class="linenum">1410</span></a>      if (<a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>)) {
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment">        // Legacy courseid usage.</span>
<a name="l1412"><span class="linenum">1412</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>  = array('context' =&gt; <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>));
<a name="l1413"><span class="linenum">1413</span></a>      } else {
<a name="l1414"><span class="linenum">1414</span></a>  <span class="comment">        // Detach object, we can not modify it.</span>
<a name="l1415"><span class="linenum">1415</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = (array)<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>;
<a name="l1416"><span class="linenum">1416</span></a>      }
<a name="l1417"><span class="linenum">1417</span></a>  
<a name="l1418"><span class="linenum">1418</span></a>      if (empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context'])) {
<a name="l1419"><span class="linenum">1419</span></a>  <span class="comment">        // Fallback to $PAGE-&gt;context this may be problematic in CLI and other non-standard pages :-(.</span>
<a name="l1420"><span class="linenum">1420</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context'] = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('context')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/context.html">context</a>;
<a name="l1421"><span class="linenum">1421</span></a>      } else if (<a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context'])) {
<a name="l1422"><span class="linenum">1422</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context'] = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context']);
<a name="l1423"><span class="linenum">1423</span></a>      }
<a name="l1424"><span class="linenum">1424</span></a>      if (!isset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['filter'])) {
<a name="l1425"><span class="linenum">1425</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['filter'] = true;
<a name="l1426"><span class="linenum">1426</span></a>      }
<a name="l1427"><span class="linenum">1427</span></a>  
<a name="l1428"><span class="linenum">1428</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['escape'] = !isset(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['escape']) || <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['escape'];
<a name="l1429"><span class="linenum">1429</span></a>  
<a name="l1430"><span class="linenum">1430</span></a>      if (!<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context']) {
<a name="l1431"><span class="linenum">1431</span></a>  <span class="comment">        // We did not find any context? weird.</span>
<a name="l1432"><span class="linenum">1432</span></a>          return <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>);
<a name="l1433"><span class="linenum">1433</span></a>      }
<a name="l1434"><span class="linenum">1434</span></a>  
<a name="l1435"><span class="linenum">1435</span></a>  <span class="comment">    // Calculate md5.</span>
<a name="l1436"><span class="linenum">1436</span></a>      <a class="var it3167" onMouseOver="hilite(3167)" onMouseOut="lolite()" onClick="logVariable('md5')" href="../_variables/md5.html">$md5</a> = md5(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>.'&lt;+&gt;'.<a class="var it18363" onMouseOver="hilite(18363)" onMouseOut="lolite()" onClick="logVariable('striplinks')" href="../_variables/striplinks.html">$striplinks</a>.'&lt;+&gt;'.<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context']-&gt;id.'&lt;+&gt;'.<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['escape'].'&lt;+&gt;'.<a class="function" onClick="logFunction('current_language')" href="../_functions/current_language.html" onMouseOver="funcPopup(event,'current_language')">current_language</a>());
<a name="l1437"><span class="linenum">1437</span></a>  
<a name="l1438"><span class="linenum">1438</span></a>  <span class="comment">    // Fetch from cache if possible.</span>
<a name="l1439"><span class="linenum">1439</span></a>      if (isset(<a class="var it18364" onMouseOver="hilite(18364)" onMouseOut="lolite()" onClick="logVariable('strcache')" href="../_variables/strcache.html">$strcache</a>[<a class="var it3167" onMouseOver="hilite(3167)" onMouseOut="lolite()" onClick="logVariable('md5')" href="../_variables/md5.html">$md5</a>])) {
<a name="l1440"><span class="linenum">1440</span></a>          return <a class="var it18364" onMouseOver="hilite(18364)" onMouseOut="lolite()" onClick="logVariable('strcache')" href="../_variables/strcache.html">$strcache</a>[<a class="var it3167" onMouseOver="hilite(3167)" onMouseOut="lolite()" onClick="logVariable('md5')" href="../_variables/md5.html">$md5</a>];
<a name="l1441"><span class="linenum">1441</span></a>      }
<a name="l1442"><span class="linenum">1442</span></a>  
<a name="l1443"><span class="linenum">1443</span></a>  <span class="comment">    // First replace all ampersands not followed by html entity code</span>
<a name="l1444"><span class="linenum">1444</span></a>  <span class="comment">    // Regular expression moved to its own method for easier unit testing.</span>
<a name="l1445"><span class="linenum">1445</span></a>      <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a> = <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['escape'] ? <a class="function" onClick="logFunction('replace_ampersands_not_followed_by_entity')" href="../_functions/replace_ampersands_not_followed_by_entity.html" onMouseOver="funcPopup(event,'replace_ampersands_not_followed_by_entity')">replace_ampersands_not_followed_by_entity</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>) : <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>;
<a name="l1446"><span class="linenum">1446</span></a>  
<a name="l1447"><span class="linenum">1447</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('filterall')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/filterall.html">filterall</a>) &amp;&amp; <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['filter']) {
<a name="l1448"><span class="linenum">1448</span></a>          <a class="var it12431" onMouseOver="hilite(12431)" onMouseOut="lolite()" onClick="logVariable('filtermanager')" href="../_variables/filtermanager.html">$filtermanager</a> = <a class="class" onClick="logClass('filter_manager')" href="../_classes/filter_manager.html" onMouseOver="classPopup(event,'filter_manager')">filter_manager</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1449"><span class="linenum">1449</span></a>          <a class="var it12431" onMouseOver="hilite(12431)" onMouseOut="lolite()" onClick="logVariable('filtermanager')" href="../_variables/filtermanager.html">$filtermanager</a>-&gt;<a class="function" onClick="logFunction('setup_page_for_filters')" href="../_functions/setup_page_for_filters.html" onMouseOver="funcPopup(event,'setup_page_for_filters')">setup_page_for_filters</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context']); <span class="comment">// Setup global stuff filters may have.</span>
<a name="l1450"><span class="linenum">1450</span></a>          <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a> = <a class="var it12431" onMouseOver="hilite(12431)" onMouseOut="lolite()" onClick="logVariable('filtermanager')" href="../_variables/filtermanager.html">$filtermanager</a>-&gt;<a class="function" onClick="logFunction('filter_string')" href="../_functions/filter_string.html" onMouseOver="funcPopup(event,'filter_string')">filter_string</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['context']);
<a name="l1451"><span class="linenum">1451</span></a>      }
<a name="l1452"><span class="linenum">1452</span></a>  
<a name="l1453"><span class="linenum">1453</span></a>  <span class="comment">    // If the site requires it, strip ALL tags from this string.</span>
<a name="l1454"><span class="linenum">1454</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('formatstringstriptags')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/formatstringstriptags.html">formatstringstriptags</a>)) {
<a name="l1455"><span class="linenum">1455</span></a>          if (<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['escape']) {
<a name="l1456"><span class="linenum">1456</span></a>              <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(array('&lt;', '&gt;'), array('&amp;lt;', '&amp;gt;'), <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>));
<a name="l1457"><span class="linenum">1457</span></a>          } else {
<a name="l1458"><span class="linenum">1458</span></a>              <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>);
<a name="l1459"><span class="linenum">1459</span></a>          }
<a name="l1460"><span class="linenum">1460</span></a>      } else {
<a name="l1461"><span class="linenum">1461</span></a>  <span class="comment">        // Otherwise strip just links if that is required (default).</span>
<a name="l1462"><span class="linenum">1462</span></a>          if (<a class="var it18363" onMouseOver="hilite(18363)" onMouseOut="lolite()" onClick="logVariable('striplinks')" href="../_variables/striplinks.html">$striplinks</a>) {
<a name="l1463"><span class="linenum">1463</span></a>  <span class="comment">            // Strip links in string.</span>
<a name="l1464"><span class="linenum">1464</span></a>              <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a> = <a class="function" onClick="logFunction('strip_links')" href="../_functions/strip_links.html" onMouseOver="funcPopup(event,'strip_links')">strip_links</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>);
<a name="l1465"><span class="linenum">1465</span></a>          }
<a name="l1466"><span class="linenum">1466</span></a>          <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a> = <a class="function" onClick="logFunction('clean_text')" href="../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>);
<a name="l1467"><span class="linenum">1467</span></a>      }
<a name="l1468"><span class="linenum">1468</span></a>  
<a name="l1469"><span class="linenum">1469</span></a>  <span class="comment">    // Store to cache.</span>
<a name="l1470"><span class="linenum">1470</span></a>      <a class="var it18364" onMouseOver="hilite(18364)" onMouseOut="lolite()" onClick="logVariable('strcache')" href="../_variables/strcache.html">$strcache</a>[<a class="var it3167" onMouseOver="hilite(3167)" onMouseOut="lolite()" onClick="logVariable('md5')" href="../_variables/md5.html">$md5</a>] = <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>;
<a name="l1471"><span class="linenum">1471</span></a>  
<a name="l1472"><span class="linenum">1472</span></a>      return <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>;
<a name="l1473"><span class="linenum">1473</span></a>  }
<a name="l1474"><span class="linenum">1474</span></a>  
<a name="l1475"><span class="linenum">1475</span></a>  <span class="comment">/**</span>
<a name="l1476"><span class="linenum">1476</span></a>  <span class="comment"> * Given a string, performs a negative lookahead looking for any ampersand character</span>
<a name="l1477"><span class="linenum">1477</span></a>  <span class="comment"> * that is not followed by a proper HTML entity. If any is found, it is replaced</span>
<a name="l1478"><span class="linenum">1478</span></a>  <span class="comment"> * by &amp;amp;. The string is then returned.</span>
<a name="l1479"><span class="linenum">1479</span></a>  <span class="comment"> *</span>
<a name="l1480"><span class="linenum">1480</span></a>  <span class="comment"> * @param string $string</span>
<a name="l1481"><span class="linenum">1481</span></a>  <span class="comment"> * @return string</span>
<a name="l1482"><span class="linenum">1482</span></a>  <span class="comment"> */</span>
<a name="l1483"><span class="linenum">1483</span></a>  function <a class="function" onClick="logFunction('replace_ampersands_not_followed_by_entity')" href="../_functions/replace_ampersands_not_followed_by_entity.html" onMouseOver="funcPopup(event,'replace_ampersands_not_followed_by_entity')">replace_ampersands_not_followed_by_entity</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>) {
<a name="l1484"><span class="linenum">1484</span></a>      return <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/\&amp;(?![a-zA-Z0-9#]{1,8};)/&quot;, &quot;&amp;amp;&quot;, <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>);
<a name="l1485"><span class="linenum">1485</span></a>  }
<a name="l1486"><span class="linenum">1486</span></a>  
<a name="l1487"><span class="linenum">1487</span></a>  <span class="comment">/**</span>
<a name="l1488"><span class="linenum">1488</span></a>  <span class="comment"> * Given a string, replaces all &lt;a&gt;.*&lt;/a&gt; by .* and returns the string.</span>
<a name="l1489"><span class="linenum">1489</span></a>  <span class="comment"> *</span>
<a name="l1490"><span class="linenum">1490</span></a>  <span class="comment"> * @param string $string</span>
<a name="l1491"><span class="linenum">1491</span></a>  <span class="comment"> * @return string</span>
<a name="l1492"><span class="linenum">1492</span></a>  <span class="comment"> */</span>
<a name="l1493"><span class="linenum">1493</span></a>  function <a class="function" onClick="logFunction('strip_links')" href="../_functions/strip_links.html" onMouseOver="funcPopup(event,'strip_links')">strip_links</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>) {
<a name="l1494"><span class="linenum">1494</span></a>      return <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/(&lt;a\s[^&gt;]+?&gt;)(.+?)(&lt;\/a&gt;)/is', '<a class="var it2020" onMouseOver="hilite(2020)" onMouseOut="lolite()" onClick="logVariable('2')" href="../_variables/2.html">$2</a>', <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>);
<a name="l1495"><span class="linenum">1495</span></a>  }
<a name="l1496"><span class="linenum">1496</span></a>  
<a name="l1497"><span class="linenum">1497</span></a>  <span class="comment">/**</span>
<a name="l1498"><span class="linenum">1498</span></a>  <span class="comment"> * This expression turns links into something nice in a text format. (Russell Jungwirth)</span>
<a name="l1499"><span class="linenum">1499</span></a>  <span class="comment"> *</span>
<a name="l1500"><span class="linenum">1500</span></a>  <span class="comment"> * @param string $string</span>
<a name="l1501"><span class="linenum">1501</span></a>  <span class="comment"> * @return string</span>
<a name="l1502"><span class="linenum">1502</span></a>  <span class="comment"> */</span>
<a name="l1503"><span class="linenum">1503</span></a>  function <a class="function" onClick="logFunction('wikify_links')" href="../_functions/wikify_links.html" onMouseOver="funcPopup(event,'wikify_links')">wikify_links</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>) {
<a name="l1504"><span class="linenum">1504</span></a>      return <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('~(&lt;a [^&lt;]*href=[&quot;|\']?([^ &quot;\']*)[&quot;|\']?[^&gt;]*&gt;([^&lt;]*)&lt;/a&gt;)~i', '<a class="var it465" onMouseOver="hilite(465)" onMouseOut="lolite()" onClick="logVariable('3')" href="../_variables/3.html">$3</a> [ <a class="var it2020" onMouseOver="hilite(2020)" onMouseOut="lolite()" onClick="logVariable('2')" href="../_variables/2.html">$2</a> ]', <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../_variables/string.html">$string</a>);
<a name="l1505"><span class="linenum">1505</span></a>  }
<a name="l1506"><span class="linenum">1506</span></a>  
<a name="l1507"><span class="linenum">1507</span></a>  <span class="comment">/**</span>
<a name="l1508"><span class="linenum">1508</span></a>  <span class="comment"> * Given text in a variety of format codings, this function returns the text as plain text suitable for plain email.</span>
<a name="l1509"><span class="linenum">1509</span></a>  <span class="comment"> *</span>
<a name="l1510"><span class="linenum">1510</span></a>  <span class="comment"> * @param string $text The text to be formatted. This is raw text originally from user input.</span>
<a name="l1511"><span class="linenum">1511</span></a>  <span class="comment"> * @param int $format Identifier of the text format to be used</span>
<a name="l1512"><span class="linenum">1512</span></a>  <span class="comment"> *            [FORMAT_MOODLE, FORMAT_HTML, FORMAT_PLAIN, FORMAT_WIKI, FORMAT_MARKDOWN]</span>
<a name="l1513"><span class="linenum">1513</span></a>  <span class="comment"> * @return string</span>
<a name="l1514"><span class="linenum">1514</span></a>  <span class="comment"> */</span>
<a name="l1515"><span class="linenum">1515</span></a>  function <a class="function" onClick="logFunction('format_text_email')" href="../_functions/format_text_email.html" onMouseOver="funcPopup(event,'format_text_email')">format_text_email</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>) {
<a name="l1516"><span class="linenum">1516</span></a>  
<a name="l1517"><span class="linenum">1517</span></a>      switch (<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>) {
<a name="l1518"><span class="linenum">1518</span></a>  
<a name="l1519"><span class="linenum">1519</span></a>          case <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>:
<a name="l1520"><span class="linenum">1520</span></a>              return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1521"><span class="linenum">1521</span></a>              break;
<a name="l1522"><span class="linenum">1522</span></a>  
<a name="l1523"><span class="linenum">1523</span></a>          case <a class="constant" onClick="logConstant('FORMAT_WIKI')" href="../_constants/FORMAT_WIKI.html" onMouseOver="constPopup(event,'FORMAT_WIKI')">FORMAT_WIKI</a>:
<a name="l1524"><span class="linenum">1524</span></a>  <span class="comment">            // There should not be any of these any more!</span>
<a name="l1525"><span class="linenum">1525</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('wikify_links')" href="../_functions/wikify_links.html" onMouseOver="funcPopup(event,'wikify_links')">wikify_links</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1526"><span class="linenum">1526</span></a>              return <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('entities_to_utf8')" href="../_functions/entities_to_utf8.html" onMouseOver="funcPopup(event,'entities_to_utf8')">entities_to_utf8</a>(<a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>), true);
<a name="l1527"><span class="linenum">1527</span></a>              break;
<a name="l1528"><span class="linenum">1528</span></a>  
<a name="l1529"><span class="linenum">1529</span></a>          case <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>:
<a name="l1530"><span class="linenum">1530</span></a>              return <a class="function" onClick="logFunction('html_to_text')" href="../_functions/html_to_text.html" onMouseOver="funcPopup(event,'html_to_text')">html_to_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1531"><span class="linenum">1531</span></a>              break;
<a name="l1532"><span class="linenum">1532</span></a>  
<a name="l1533"><span class="linenum">1533</span></a>          case <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>:
<a name="l1534"><span class="linenum">1534</span></a>          case <a class="constant" onClick="logConstant('FORMAT_MARKDOWN')" href="../_constants/FORMAT_MARKDOWN.html" onMouseOver="constPopup(event,'FORMAT_MARKDOWN')">FORMAT_MARKDOWN</a>:
<a name="l1535"><span class="linenum">1535</span></a>          default:
<a name="l1536"><span class="linenum">1536</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('wikify_links')" href="../_functions/wikify_links.html" onMouseOver="funcPopup(event,'wikify_links')">wikify_links</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1537"><span class="linenum">1537</span></a>              return <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('entities_to_utf8')" href="../_functions/entities_to_utf8.html" onMouseOver="funcPopup(event,'entities_to_utf8')">entities_to_utf8</a>(<a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>), true);
<a name="l1538"><span class="linenum">1538</span></a>              break;
<a name="l1539"><span class="linenum">1539</span></a>      }
<a name="l1540"><span class="linenum">1540</span></a>  }
<a name="l1541"><span class="linenum">1541</span></a>  
<a name="l1542"><span class="linenum">1542</span></a>  <span class="comment">/**</span>
<a name="l1543"><span class="linenum">1543</span></a>  <span class="comment"> * Formats activity intro text</span>
<a name="l1544"><span class="linenum">1544</span></a>  <span class="comment"> *</span>
<a name="l1545"><span class="linenum">1545</span></a>  <span class="comment"> * @param string $module name of module</span>
<a name="l1546"><span class="linenum">1546</span></a>  <span class="comment"> * @param object $activity instance of activity</span>
<a name="l1547"><span class="linenum">1547</span></a>  <span class="comment"> * @param int $cmid course module id</span>
<a name="l1548"><span class="linenum">1548</span></a>  <span class="comment"> * @param bool $filter filter resulting html text</span>
<a name="l1549"><span class="linenum">1549</span></a>  <span class="comment"> * @return string</span>
<a name="l1550"><span class="linenum">1550</span></a>  <span class="comment"> */</span>
<a name="l1551"><span class="linenum">1551</span></a>  function <a class="function" onClick="logFunction('format_module_intro')" href="../_functions/format_module_intro.html" onMouseOver="funcPopup(event,'format_module_intro')">format_module_intro</a>(<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>, <a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>, <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>, <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>=true) {
<a name="l1552"><span class="linenum">1552</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1553"><span class="linenum">1553</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>/filelib.php&quot;);
<a name="l1554"><span class="linenum">1554</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>);
<a name="l1555"><span class="linenum">1555</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array('noclean' =&gt; true, 'para' =&gt; false, 'filter' =&gt; <a class="var it1336" onMouseOver="hilite(1336)" onMouseOut="lolite()" onClick="logVariable('filter')" href="../_variables/filter.html">$filter</a>, 'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, 'overflowdiv' =&gt; true);
<a name="l1556"><span class="linenum">1556</span></a>      <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('intro')" href="../_variables/intro.html">$intro</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('intro')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../_variables/intro.html">intro</a>, '<a class="filename" href="../pluginfile.php.html">pluginfile.php</a>', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'mod_'.<a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>, 'intro', null);
<a name="l1557"><span class="linenum">1557</span></a>      return <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="function" onClick="logFunction('format_text')" href="../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('intro')" href="../_variables/intro.html">$intro</a>, <a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('introformat')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../_variables/introformat.html">introformat</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>, null));
<a name="l1558"><span class="linenum">1558</span></a>  }
<a name="l1559"><span class="linenum">1559</span></a>  
<a name="l1560"><span class="linenum">1560</span></a>  <span class="comment">/**</span>
<a name="l1561"><span class="linenum">1561</span></a>  <span class="comment"> * Removes the usage of Moodle files from a text.</span>
<a name="l1562"><span class="linenum">1562</span></a>  <span class="comment"> *</span>
<a name="l1563"><span class="linenum">1563</span></a>  <span class="comment"> * In some rare cases we need to re-use a text that already has embedded links</span>
<a name="l1564"><span class="linenum">1564</span></a>  <span class="comment"> * to some files hosted within Moodle. But the new area in which we will push</span>
<a name="l1565"><span class="linenum">1565</span></a>  <span class="comment"> * this content does not support files... therefore we need to remove those files.</span>
<a name="l1566"><span class="linenum">1566</span></a>  <span class="comment"> *</span>
<a name="l1567"><span class="linenum">1567</span></a>  <span class="comment"> * @param string $source The text</span>
<a name="l1568"><span class="linenum">1568</span></a>  <span class="comment"> * @return string The stripped text</span>
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment"> */</span>
<a name="l1570"><span class="linenum">1570</span></a>  function <a class="function" onClick="logFunction('strip_pluginfile_content')" href="../_functions/strip_pluginfile_content.html" onMouseOver="funcPopup(event,'strip_pluginfile_content')">strip_pluginfile_content</a>(<a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>) {
<a name="l1571"><span class="linenum">1571</span></a>      <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> = '@@PLUGINFILE@@';
<a name="l1572"><span class="linenum">1572</span></a>  <span class="comment">    // Looking for something like &lt; .* &quot;@@pluginfile@@.*&quot; .* &gt;</span>
<a name="l1573"><span class="linenum">1573</span></a>      <a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a> = '$&lt;[^&lt;&gt;]+[&quot;\']' . <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> . '[^&quot;\']*[&quot;\'][^&lt;&gt;]*&gt;$';
<a name="l1574"><span class="linenum">1574</span></a>      <a class="var it18365" onMouseOver="hilite(18365)" onMouseOut="lolite()" onClick="logVariable('stripped')" href="../_variables/stripped.html">$stripped</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(<a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>, '', <a class="var it1771" onMouseOver="hilite(1771)" onMouseOut="lolite()" onClick="logVariable('source')" href="../_variables/source.html">$source</a>);
<a name="l1575"><span class="linenum">1575</span></a>  <span class="comment">    // Use purify html to rebalence potentially mismatched tags and generally cleanup.</span>
<a name="l1576"><span class="linenum">1576</span></a>      return <a class="function" onClick="logFunction('purify_html')" href="../_functions/purify_html.html" onMouseOver="funcPopup(event,'purify_html')">purify_html</a>(<a class="var it18365" onMouseOver="hilite(18365)" onMouseOut="lolite()" onClick="logVariable('stripped')" href="../_variables/stripped.html">$stripped</a>);
<a name="l1577"><span class="linenum">1577</span></a>  }
<a name="l1578"><span class="linenum">1578</span></a>  
<a name="l1579"><span class="linenum">1579</span></a>  <span class="comment">/**</span>
<a name="l1580"><span class="linenum">1580</span></a>  <span class="comment"> * Legacy function, used for cleaning of old forum and glossary text only.</span>
<a name="l1581"><span class="linenum">1581</span></a>  <span class="comment"> *</span>
<a name="l1582"><span class="linenum">1582</span></a>  <span class="comment"> * @param string $text text that may contain legacy TRUSTTEXT marker</span>
<a name="l1583"><span class="linenum">1583</span></a>  <span class="comment"> * @return string text without legacy TRUSTTEXT marker</span>
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment"> */</span>
<a name="l1585"><span class="linenum">1585</span></a>  function <a class="function" onClick="logFunction('trusttext_strip')" href="../_functions/trusttext_strip.html" onMouseOver="funcPopup(event,'trusttext_strip')">trusttext_strip</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l1586"><span class="linenum">1586</span></a>      while (true) { // Removing nested TRUSTTEXT.
<a name="l1587"><span class="linenum">1587</span></a>          <a class="var it18366" onMouseOver="hilite(18366)" onMouseOut="lolite()" onClick="logVariable('orig')" href="../_variables/orig.html">$orig</a> = <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1588"><span class="linenum">1588</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('#####TRUSTTEXT#####', '', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1589"><span class="linenum">1589</span></a>          if (<a class="phpfunction" onClick="logFunction('strcmp')" href="../_functions/strcmp.html" onMouseOver="phpfuncPopup(event,'strcmp')">strcmp</a>(<a class="var it18366" onMouseOver="hilite(18366)" onMouseOut="lolite()" onClick="logVariable('orig')" href="../_variables/orig.html">$orig</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) === 0) {
<a name="l1590"><span class="linenum">1590</span></a>              return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1591"><span class="linenum">1591</span></a>          }
<a name="l1592"><span class="linenum">1592</span></a>      }
<a name="l1593"><span class="linenum">1593</span></a>  }
<a name="l1594"><span class="linenum">1594</span></a>  
<a name="l1595"><span class="linenum">1595</span></a>  <span class="comment">/**</span>
<a name="l1596"><span class="linenum">1596</span></a>  <span class="comment"> * Must be called before editing of all texts with trust flag. Removes all XSS nasties from texts stored in database if needed.</span>
<a name="l1597"><span class="linenum">1597</span></a>  <span class="comment"> *</span>
<a name="l1598"><span class="linenum">1598</span></a>  <span class="comment"> * @param stdClass $object data object with xxx, xxxformat and xxxtrust fields</span>
<a name="l1599"><span class="linenum">1599</span></a>  <span class="comment"> * @param string $field name of text field</span>
<a name="l1600"><span class="linenum">1600</span></a>  <span class="comment"> * @param context $context active context</span>
<a name="l1601"><span class="linenum">1601</span></a>  <span class="comment"> * @return stdClass updated $object</span>
<a name="l1602"><span class="linenum">1602</span></a>  <span class="comment"> */</span>
<a name="l1603"><span class="linenum">1603</span></a>  function <a class="function" onClick="logFunction('trusttext_pre_edit')" href="../_functions/trusttext_pre_edit.html" onMouseOver="funcPopup(event,'trusttext_pre_edit')">trusttext_pre_edit</a>(<a class="var it2205" onMouseOver="hilite(2205)" onMouseOut="lolite()" onClick="logVariable('object')" href="../_variables/object.html">$object</a>, <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1604"><span class="linenum">1604</span></a>      <a class="var it18367" onMouseOver="hilite(18367)" onMouseOut="lolite()" onClick="logVariable('trustfield')" href="../_variables/trustfield.html">$trustfield</a>  = <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>.'trust';
<a name="l1605"><span class="linenum">1605</span></a>      <a class="var it8783" onMouseOver="hilite(8783)" onMouseOut="lolite()" onClick="logVariable('formatfield')" href="../_variables/formatfield.html">$formatfield</a> = <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>.'format';
<a name="l1606"><span class="linenum">1606</span></a>  
<a name="l1607"><span class="linenum">1607</span></a>      if (!<a class="var it2205" onMouseOver="hilite(2205)" onMouseOut="lolite()" onClick="logVariable('object')" href="../_variables/object.html">$object</a>-&gt;<a class="var it18367" onMouseOver="hilite(18367)" onMouseOut="lolite()" onClick="logVariable('trustfield')" href="../_variables/trustfield.html">$trustfield</a> or !<a class="function" onClick="logFunction('trusttext_trusted')" href="../_functions/trusttext_trusted.html" onMouseOver="funcPopup(event,'trusttext_trusted')">trusttext_trusted</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l1608"><span class="linenum">1608</span></a>          <a class="var it2205" onMouseOver="hilite(2205)" onMouseOut="lolite()" onClick="logVariable('object')" href="../_variables/object.html">$object</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> = <a class="function" onClick="logFunction('clean_text')" href="../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>(<a class="var it2205" onMouseOver="hilite(2205)" onMouseOut="lolite()" onClick="logVariable('object')" href="../_variables/object.html">$object</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a>, <a class="var it2205" onMouseOver="hilite(2205)" onMouseOut="lolite()" onClick="logVariable('object')" href="../_variables/object.html">$object</a>-&gt;<a class="var it8783" onMouseOver="hilite(8783)" onMouseOut="lolite()" onClick="logVariable('formatfield')" href="../_variables/formatfield.html">$formatfield</a>);
<a name="l1609"><span class="linenum">1609</span></a>      }
<a name="l1610"><span class="linenum">1610</span></a>  
<a name="l1611"><span class="linenum">1611</span></a>      return <a class="var it2205" onMouseOver="hilite(2205)" onMouseOut="lolite()" onClick="logVariable('object')" href="../_variables/object.html">$object</a>;
<a name="l1612"><span class="linenum">1612</span></a>  }
<a name="l1613"><span class="linenum">1613</span></a>  
<a name="l1614"><span class="linenum">1614</span></a>  <span class="comment">/**</span>
<a name="l1615"><span class="linenum">1615</span></a>  <span class="comment"> * Is current user trusted to enter no dangerous XSS in this context?</span>
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment"> *</span>
<a name="l1617"><span class="linenum">1617</span></a>  <span class="comment"> * Please note the user must be in fact trusted everywhere on this server!!</span>
<a name="l1618"><span class="linenum">1618</span></a>  <span class="comment"> *</span>
<a name="l1619"><span class="linenum">1619</span></a>  <span class="comment"> * @param context $context</span>
<a name="l1620"><span class="linenum">1620</span></a>  <span class="comment"> * @return bool true if user trusted</span>
<a name="l1621"><span class="linenum">1621</span></a>  <span class="comment"> */</span>
<a name="l1622"><span class="linenum">1622</span></a>  function <a class="function" onClick="logFunction('trusttext_trusted')" href="../_functions/trusttext_trusted.html" onMouseOver="funcPopup(event,'trusttext_trusted')">trusttext_trusted</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>) {
<a name="l1623"><span class="linenum">1623</span></a>      return (<a class="function" onClick="logFunction('trusttext_active')" href="../_functions/trusttext_active.html" onMouseOver="funcPopup(event,'trusttext_active')">trusttext_active</a>() and <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:trustcontent', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>));
<a name="l1624"><span class="linenum">1624</span></a>  }
<a name="l1625"><span class="linenum">1625</span></a>  
<a name="l1626"><span class="linenum">1626</span></a>  <span class="comment">/**</span>
<a name="l1627"><span class="linenum">1627</span></a>  <span class="comment"> * Is trusttext feature active?</span>
<a name="l1628"><span class="linenum">1628</span></a>  <span class="comment"> *</span>
<a name="l1629"><span class="linenum">1629</span></a>  <span class="comment"> * @return bool</span>
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment"> */</span>
<a name="l1631"><span class="linenum">1631</span></a>  function <a class="function" onClick="logFunction('trusttext_active')" href="../_functions/trusttext_active.html" onMouseOver="funcPopup(event,'trusttext_active')">trusttext_active</a>() {
<a name="l1632"><span class="linenum">1632</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1633"><span class="linenum">1633</span></a>  
<a name="l1634"><span class="linenum">1634</span></a>      return !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enabletrusttext')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enabletrusttext.html">enabletrusttext</a>);
<a name="l1635"><span class="linenum">1635</span></a>  }
<a name="l1636"><span class="linenum">1636</span></a>  
<a name="l1637"><span class="linenum">1637</span></a>  <span class="comment">/**</span>
<a name="l1638"><span class="linenum">1638</span></a>  <span class="comment"> * Cleans raw text removing nasties.</span>
<a name="l1639"><span class="linenum">1639</span></a>  <span class="comment"> *</span>
<a name="l1640"><span class="linenum">1640</span></a>  <span class="comment"> * Given raw text (eg typed in by a user) this function cleans it up and removes any nasty tags that could mess up</span>
<a name="l1641"><span class="linenum">1641</span></a>  <span class="comment"> * Moodle pages through XSS attacks.</span>
<a name="l1642"><span class="linenum">1642</span></a>  <span class="comment"> *</span>
<a name="l1643"><span class="linenum">1643</span></a>  <span class="comment"> * The result must be used as a HTML text fragment, this function can not cleanup random</span>
<a name="l1644"><span class="linenum">1644</span></a>  <span class="comment"> * parts of html tags such as url or src attributes.</span>
<a name="l1645"><span class="linenum">1645</span></a>  <span class="comment"> *</span>
<a name="l1646"><span class="linenum">1646</span></a>  <span class="comment"> * NOTE: the format parameter was deprecated because we can safely clean only HTML.</span>
<a name="l1647"><span class="linenum">1647</span></a>  <span class="comment"> *</span>
<a name="l1648"><span class="linenum">1648</span></a>  <span class="comment"> * @param string $text The text to be cleaned</span>
<a name="l1649"><span class="linenum">1649</span></a>  <span class="comment"> * @param int|string $format deprecated parameter, should always contain FORMAT_HTML or FORMAT_MOODLE</span>
<a name="l1650"><span class="linenum">1650</span></a>  <span class="comment"> * @param array $options Array of options; currently only option supported is 'allowid' (if true,</span>
<a name="l1651"><span class="linenum">1651</span></a>  <span class="comment"> *   does not remove id attributes when cleaning)</span>
<a name="l1652"><span class="linenum">1652</span></a>  <span class="comment"> * @return string The cleaned up text</span>
<a name="l1653"><span class="linenum">1653</span></a>  <span class="comment"> */</span>
<a name="l1654"><span class="linenum">1654</span></a>  function <a class="function" onClick="logFunction('clean_text')" href="../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array()) {
<a name="l1655"><span class="linenum">1655</span></a>      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = (string)<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1656"><span class="linenum">1656</span></a>  
<a name="l1657"><span class="linenum">1657</span></a>      if (<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> != <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a> and <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> != <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>) {
<a name="l1658"><span class="linenum">1658</span></a>  <span class="comment">        // TODO: we need to standardise cleanup of text when loading it into editor first.</span>
<a name="l1659"><span class="linenum">1659</span></a>  <span class="comment">        // debugging('clean_text() is designed to work only with html');.</span>
<a name="l1660"><span class="linenum">1660</span></a>      }
<a name="l1661"><span class="linenum">1661</span></a>  
<a name="l1662"><span class="linenum">1662</span></a>      if (<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> == <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>) {
<a name="l1663"><span class="linenum">1663</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1664"><span class="linenum">1664</span></a>      }
<a name="l1665"><span class="linenum">1665</span></a>  
<a name="l1666"><span class="linenum">1666</span></a>      if (<a class="function" onClick="logFunction('is_purify_html_necessary')" href="../_functions/is_purify_html_necessary.html" onMouseOver="funcPopup(event,'is_purify_html_necessary')">is_purify_html_necessary</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>)) {
<a name="l1667"><span class="linenum">1667</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('purify_html')" href="../_functions/purify_html.html" onMouseOver="funcPopup(event,'purify_html')">purify_html</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1668"><span class="linenum">1668</span></a>      }
<a name="l1669"><span class="linenum">1669</span></a>  
<a name="l1670"><span class="linenum">1670</span></a>  <span class="comment">    // Originally we tried to neutralise some script events here, it was a wrong approach because</span>
<a name="l1671"><span class="linenum">1671</span></a>  <span class="comment">    // it was trivial to work around that (for example using style based XSS exploits).</span>
<a name="l1672"><span class="linenum">1672</span></a>  <span class="comment">    // We must not give false sense of security here - all developers MUST understand how to use</span>
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment">    // rawurlencode(), htmlentities(), htmlspecialchars(), p(), s(), moodle_url, html_writer and friends!!!</span>
<a name="l1674"><span class="linenum">1674</span></a>  
<a name="l1675"><span class="linenum">1675</span></a>      return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1676"><span class="linenum">1676</span></a>  }
<a name="l1677"><span class="linenum">1677</span></a>  
<a name="l1678"><span class="linenum">1678</span></a>  <span class="comment">/**</span>
<a name="l1679"><span class="linenum">1679</span></a>  <span class="comment"> * Is it necessary to use HTMLPurifier?</span>
<a name="l1680"><span class="linenum">1680</span></a>  <span class="comment"> *</span>
<a name="l1681"><span class="linenum">1681</span></a>  <span class="comment"> * @private</span>
<a name="l1682"><span class="linenum">1682</span></a>  <span class="comment"> * @param string $text</span>
<a name="l1683"><span class="linenum">1683</span></a>  <span class="comment"> * @return bool false means html is safe and valid, true means use HTMLPurifier</span>
<a name="l1684"><span class="linenum">1684</span></a>  <span class="comment"> */</span>
<a name="l1685"><span class="linenum">1685</span></a>  function <a class="function" onClick="logFunction('is_purify_html_necessary')" href="../_functions/is_purify_html_necessary.html" onMouseOver="funcPopup(event,'is_purify_html_necessary')">is_purify_html_necessary</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l1686"><span class="linenum">1686</span></a>      if (<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> === '') {
<a name="l1687"><span class="linenum">1687</span></a>          return false;
<a name="l1688"><span class="linenum">1688</span></a>      }
<a name="l1689"><span class="linenum">1689</span></a>  
<a name="l1690"><span class="linenum">1690</span></a>      if (<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> === (string)((int)<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>)) {
<a name="l1691"><span class="linenum">1691</span></a>          return false;
<a name="l1692"><span class="linenum">1692</span></a>      }
<a name="l1693"><span class="linenum">1693</span></a>  
<a name="l1694"><span class="linenum">1694</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, '&amp;') !== false or <a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('|&lt;[^pesb/]|', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>)) {
<a name="l1695"><span class="linenum">1695</span></a>  <span class="comment">        // We need to normalise entities or other tags except p, em, strong and br present.</span>
<a name="l1696"><span class="linenum">1696</span></a>          return true;
<a name="l1697"><span class="linenum">1697</span></a>      }
<a name="l1698"><span class="linenum">1698</span></a>  
<a name="l1699"><span class="linenum">1699</span></a>      <a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a> = <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, ENT_NOQUOTES, 'UTF-8', true);
<a name="l1700"><span class="linenum">1700</span></a>      if (<a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a> === <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l1701"><span class="linenum">1701</span></a>  <span class="comment">        // No &lt; &gt; or other special chars means this must be safe.</span>
<a name="l1702"><span class="linenum">1702</span></a>          return false;
<a name="l1703"><span class="linenum">1703</span></a>      }
<a name="l1704"><span class="linenum">1704</span></a>  
<a name="l1705"><span class="linenum">1705</span></a>  <span class="comment">    // Let's try to convert back some safe html tags.</span>
<a name="l1706"><span class="linenum">1706</span></a>      <a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('|&amp;lt;p&amp;gt;(.*?)&amp;lt;/p&amp;gt;|m', '&lt;p&gt;<a class="var it1197" onMouseOver="hilite(1197)" onMouseOut="lolite()" onClick="logVariable('1')" href="../_variables/1.html">$1</a>&lt;/p&gt;', <a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a>);
<a name="l1707"><span class="linenum">1707</span></a>      if (<a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a> === <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l1708"><span class="linenum">1708</span></a>          return false;
<a name="l1709"><span class="linenum">1709</span></a>      }
<a name="l1710"><span class="linenum">1710</span></a>      <a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('|&amp;lt;em&amp;gt;([^&lt;&gt;]+?)&amp;lt;/em&amp;gt;|m', '&lt;em&gt;<a class="var it1197" onMouseOver="hilite(1197)" onMouseOut="lolite()" onClick="logVariable('1')" href="../_variables/1.html">$1</a>&lt;/em&gt;', <a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a>);
<a name="l1711"><span class="linenum">1711</span></a>      if (<a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a> === <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l1712"><span class="linenum">1712</span></a>          return false;
<a name="l1713"><span class="linenum">1713</span></a>      }
<a name="l1714"><span class="linenum">1714</span></a>      <a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('|&amp;lt;strong&amp;gt;([^&lt;&gt;]+?)&amp;lt;/strong&amp;gt;|m', '&lt;strong&gt;<a class="var it1197" onMouseOver="hilite(1197)" onMouseOut="lolite()" onClick="logVariable('1')" href="../_variables/1.html">$1</a>&lt;/strong&gt;', <a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a>);
<a name="l1715"><span class="linenum">1715</span></a>      if (<a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a> === <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l1716"><span class="linenum">1716</span></a>          return false;
<a name="l1717"><span class="linenum">1717</span></a>      }
<a name="l1718"><span class="linenum">1718</span></a>      <a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&amp;lt;br /&amp;gt;', '&lt;br /&gt;', <a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a>);
<a name="l1719"><span class="linenum">1719</span></a>      if (<a class="var it4075" onMouseOver="hilite(4075)" onMouseOut="lolite()" onClick="logVariable('altered')" href="../_variables/altered.html">$altered</a> === <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l1720"><span class="linenum">1720</span></a>          return false;
<a name="l1721"><span class="linenum">1721</span></a>      }
<a name="l1722"><span class="linenum">1722</span></a>  
<a name="l1723"><span class="linenum">1723</span></a>      return true;
<a name="l1724"><span class="linenum">1724</span></a>  }
<a name="l1725"><span class="linenum">1725</span></a>  
<a name="l1726"><span class="linenum">1726</span></a>  <span class="comment">/**</span>
<a name="l1727"><span class="linenum">1727</span></a>  <span class="comment"> * KSES replacement cleaning function - uses HTML Purifier.</span>
<a name="l1728"><span class="linenum">1728</span></a>  <span class="comment"> *</span>
<a name="l1729"><span class="linenum">1729</span></a>  <span class="comment"> * @param string $text The (X)HTML string to purify</span>
<a name="l1730"><span class="linenum">1730</span></a>  <span class="comment"> * @param array $options Array of options; currently only option supported is 'allowid' (if set,</span>
<a name="l1731"><span class="linenum">1731</span></a>  <span class="comment"> *   does not remove id attributes when cleaning)</span>
<a name="l1732"><span class="linenum">1732</span></a>  <span class="comment"> * @return string</span>
<a name="l1733"><span class="linenum">1733</span></a>  <span class="comment"> */</span>
<a name="l1734"><span class="linenum">1734</span></a>  function <a class="function" onClick="logFunction('purify_html')" href="../_functions/purify_html.html" onMouseOver="funcPopup(event,'purify_html')">purify_html</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array()) {
<a name="l1735"><span class="linenum">1735</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1736"><span class="linenum">1736</span></a>  
<a name="l1737"><span class="linenum">1737</span></a>      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = (string)<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1738"><span class="linenum">1738</span></a>  
<a name="l1739"><span class="linenum">1739</span></a>      static <a class="var it18369" onMouseOver="hilite(18369)" onMouseOut="lolite()" onClick="logVariable('purifiers')" href="../_variables/purifiers.html">$purifiers</a> = array();
<a name="l1740"><span class="linenum">1740</span></a>      static <a class="var it18370" onMouseOver="hilite(18370)" onMouseOut="lolite()" onClick="logVariable('caches')" href="../_variables/caches.html">$caches</a> = array();
<a name="l1741"><span class="linenum">1741</span></a>  
<a name="l1742"><span class="linenum">1742</span></a>  <span class="comment">    // Purifier code can change only during major version upgrade.</span>
<a name="l1743"><span class="linenum">1743</span></a>      <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a> = empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>) ? 0 : <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a>;
<a name="l1744"><span class="linenum">1744</span></a>      <a class="var it2150" onMouseOver="hilite(2150)" onMouseOut="lolite()" onClick="logVariable('cachedir')" href="../_variables/cachedir.html">$cachedir</a> = &quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('localcachedir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/localcachedir.html">localcachedir</a>/htmlpurifier/<a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>&quot;;
<a name="l1745"><span class="linenum">1745</span></a>      if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it2150" onMouseOver="hilite(2150)" onMouseOut="lolite()" onClick="logVariable('cachedir')" href="../_variables/cachedir.html">$cachedir</a>)) {
<a name="l1746"><span class="linenum">1746</span></a>  <span class="comment">        // Purging of caches may remove the cache dir at any time,</span>
<a name="l1747"><span class="linenum">1747</span></a>  <span class="comment">        // luckily file_exists() results should be cached for all existing directories.</span>
<a name="l1748"><span class="linenum">1748</span></a>          <a class="var it18369" onMouseOver="hilite(18369)" onMouseOut="lolite()" onClick="logVariable('purifiers')" href="../_variables/purifiers.html">$purifiers</a> = array();
<a name="l1749"><span class="linenum">1749</span></a>          <a class="var it18370" onMouseOver="hilite(18370)" onMouseOut="lolite()" onClick="logVariable('caches')" href="../_variables/caches.html">$caches</a> = array();
<a name="l1750"><span class="linenum">1750</span></a>          gc_collect_cycles();
<a name="l1751"><span class="linenum">1751</span></a>  
<a name="l1752"><span class="linenum">1752</span></a>          <a class="function" onClick="logFunction('make_localcache_directory')" href="../_functions/make_localcache_directory.html" onMouseOver="funcPopup(event,'make_localcache_directory')">make_localcache_directory</a>('htmlpurifier', false);
<a name="l1753"><span class="linenum">1753</span></a>          <a class="function" onClick="logFunction('check_dir_exists')" href="../_functions/check_dir_exists.html" onMouseOver="funcPopup(event,'check_dir_exists')">check_dir_exists</a>(<a class="var it2150" onMouseOver="hilite(2150)" onMouseOut="lolite()" onClick="logVariable('cachedir')" href="../_variables/cachedir.html">$cachedir</a>);
<a name="l1754"><span class="linenum">1754</span></a>      }
<a name="l1755"><span class="linenum">1755</span></a>  
<a name="l1756"><span class="linenum">1756</span></a>      <a class="var it12430" onMouseOver="hilite(12430)" onMouseOut="lolite()" onClick="logVariable('allowid')" href="../_variables/allowid.html">$allowid</a> = empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['allowid']) ? 0 : 1;
<a name="l1757"><span class="linenum">1757</span></a>      <a class="var it18371" onMouseOver="hilite(18371)" onMouseOut="lolite()" onClick="logVariable('allowobjectembed')" href="../_variables/allowobjectembed.html">$allowobjectembed</a> = empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowobjectembed')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/allowobjectembed.html">allowobjectembed</a>) ? 0 : 1;
<a name="l1758"><span class="linenum">1758</span></a>  
<a name="l1759"><span class="linenum">1759</span></a>      <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = 'type_'.<a class="var it12430" onMouseOver="hilite(12430)" onMouseOut="lolite()" onClick="logVariable('allowid')" href="../_variables/allowid.html">$allowid</a>.'_'.<a class="var it18371" onMouseOver="hilite(18371)" onMouseOut="lolite()" onClick="logVariable('allowobjectembed')" href="../_variables/allowobjectembed.html">$allowobjectembed</a>;
<a name="l1760"><span class="linenum">1760</span></a>  
<a name="l1761"><span class="linenum">1761</span></a>      if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it18370" onMouseOver="hilite(18370)" onMouseOut="lolite()" onClick="logVariable('caches')" href="../_variables/caches.html">$caches</a>)) {
<a name="l1762"><span class="linenum">1762</span></a>          <a class="var it18370" onMouseOver="hilite(18370)" onMouseOut="lolite()" onClick="logVariable('caches')" href="../_variables/caches.html">$caches</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>] = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'htmlpurifier', array('type' =&gt; <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>));
<a name="l1763"><span class="linenum">1763</span></a>      }
<a name="l1764"><span class="linenum">1764</span></a>      <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="var it18370" onMouseOver="hilite(18370)" onMouseOut="lolite()" onClick="logVariable('caches')" href="../_variables/caches.html">$caches</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>];
<a name="l1765"><span class="linenum">1765</span></a>  
<a name="l1766"><span class="linenum">1766</span></a>  <span class="comment">    // Add revision number and all options to the text key so that it is compatible with local cluster node caches.</span>
<a name="l1767"><span class="linenum">1767</span></a>      <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = &quot;|<a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('version')" href="../_variables/version.html">$version</a>|<a class="var it18371" onMouseOver="hilite(18371)" onMouseOut="lolite()" onClick="logVariable('allowobjectembed')" href="../_variables/allowobjectembed.html">$allowobjectembed</a>|<a class="var it12430" onMouseOver="hilite(12430)" onMouseOut="lolite()" onClick="logVariable('allowid')" href="../_variables/allowid.html">$allowid</a>|<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>&quot;;
<a name="l1768"><span class="linenum">1768</span></a>      <a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a> = <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>);
<a name="l1769"><span class="linenum">1769</span></a>  
<a name="l1770"><span class="linenum">1770</span></a>      if (<a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a> === true) {
<a name="l1771"><span class="linenum">1771</span></a>  <span class="comment">        // The filtering did not change the text last time, no need to filter anything again.</span>
<a name="l1772"><span class="linenum">1772</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1773"><span class="linenum">1773</span></a>      } else if (<a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a> !== false) {
<a name="l1774"><span class="linenum">1774</span></a>          return <a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a>;
<a name="l1775"><span class="linenum">1775</span></a>      }
<a name="l1776"><span class="linenum">1776</span></a>  
<a name="l1777"><span class="linenum">1777</span></a>      if (empty(<a class="var it18369" onMouseOver="hilite(18369)" onMouseOut="lolite()" onClick="logVariable('purifiers')" href="../_variables/purifiers.html">$purifiers</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>])) {
<a name="l1778"><span class="linenum">1778</span></a>          require_once <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/htmlpurifier/HTMLPurifier.safe-includes.php';
<a name="l1779"><span class="linenum">1779</span></a>          require_once <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/htmlpurifier/locallib.php';
<a name="l1780"><span class="linenum">1780</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a> = <a class="class" onClick="logClass('HTMLPurifier_Config')" href="../_classes/htmlpurifier_config.html" onMouseOver="classPopup(event,'htmlpurifier_config')">HTMLPurifier_Config</a>::<a class="function" onClick="logFunction('createDefault')" href="../_functions/createdefault.html" onMouseOver="funcPopup(event,'createdefault')">createDefault</a>();
<a name="l1781"><span class="linenum">1781</span></a>  
<a name="l1782"><span class="linenum">1782</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('HTML.DefinitionID', 'moodlehtml');
<a name="l1783"><span class="linenum">1783</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('HTML.DefinitionRev', 5);
<a name="l1784"><span class="linenum">1784</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('Cache.SerializerPath', <a class="var it2150" onMouseOver="hilite(2150)" onMouseOut="lolite()" onClick="logVariable('cachedir')" href="../_variables/cachedir.html">$cachedir</a>);
<a name="l1785"><span class="linenum">1785</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('Cache.SerializerPermissions', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('directorypermissions')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/directorypermissions.html">directorypermissions</a>);
<a name="l1786"><span class="linenum">1786</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('Core.NormalizeNewlines', false);
<a name="l1787"><span class="linenum">1787</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('Core.ConvertDocumentToFragment', true);
<a name="l1788"><span class="linenum">1788</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('Core.Encoding', 'UTF-8');
<a name="l1789"><span class="linenum">1789</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('HTML.Doctype', 'XHTML 1.0 Transitional');
<a name="l1790"><span class="linenum">1790</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('URI.AllowedSchemes', array(
<a name="l1791"><span class="linenum">1791</span></a>              'http' =&gt; true,
<a name="l1792"><span class="linenum">1792</span></a>              'https' =&gt; true,
<a name="l1793"><span class="linenum">1793</span></a>              'ftp' =&gt; true,
<a name="l1794"><span class="linenum">1794</span></a>              'irc' =&gt; true,
<a name="l1795"><span class="linenum">1795</span></a>              'nntp' =&gt; true,
<a name="l1796"><span class="linenum">1796</span></a>              'news' =&gt; true,
<a name="l1797"><span class="linenum">1797</span></a>              'rtsp' =&gt; true,
<a name="l1798"><span class="linenum">1798</span></a>              'rtmp' =&gt; true,
<a name="l1799"><span class="linenum">1799</span></a>              'teamspeak' =&gt; true,
<a name="l1800"><span class="linenum">1800</span></a>              'gopher' =&gt; true,
<a name="l1801"><span class="linenum">1801</span></a>              'mms' =&gt; true,
<a name="l1802"><span class="linenum">1802</span></a>              'mailto' =&gt; true
<a name="l1803"><span class="linenum">1803</span></a>          ));
<a name="l1804"><span class="linenum">1804</span></a>          <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('Attr.AllowedFrameTargets', array('_blank'));
<a name="l1805"><span class="linenum">1805</span></a>  
<a name="l1806"><span class="linenum">1806</span></a>          if (<a class="var it18371" onMouseOver="hilite(18371)" onMouseOut="lolite()" onClick="logVariable('allowobjectembed')" href="../_variables/allowobjectembed.html">$allowobjectembed</a>) {
<a name="l1807"><span class="linenum">1807</span></a>              <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('HTML.SafeObject', true);
<a name="l1808"><span class="linenum">1808</span></a>              <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('Output.FlashCompat', true);
<a name="l1809"><span class="linenum">1809</span></a>              <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('HTML.SafeEmbed', true);
<a name="l1810"><span class="linenum">1810</span></a>          }
<a name="l1811"><span class="linenum">1811</span></a>  
<a name="l1812"><span class="linenum">1812</span></a>          if (<a class="var it12430" onMouseOver="hilite(12430)" onMouseOut="lolite()" onClick="logVariable('allowid')" href="../_variables/allowid.html">$allowid</a>) {
<a name="l1813"><span class="linenum">1813</span></a>              <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('Attr.EnableID', true);
<a name="l1814"><span class="linenum">1814</span></a>          }
<a name="l1815"><span class="linenum">1815</span></a>  
<a name="l1816"><span class="linenum">1816</span></a>          if (<a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('def')" href="../_variables/def.html">$def</a> = <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="function" onClick="logFunction('maybeGetRawHTMLDefinition')" href="../_functions/maybegetrawhtmldefinition.html" onMouseOver="funcPopup(event,'maybegetrawhtmldefinition')">maybeGetRawHTMLDefinition</a>()) {
<a name="l1817"><span class="linenum">1817</span></a>              <a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('def')" href="../_variables/def.html">$def</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('nolink', 'Block', 'Flow', array());                       <span class="comment">// Skip our filters inside.</span>
<a name="l1818"><span class="linenum">1818</span></a>              <a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('def')" href="../_variables/def.html">$def</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('tex', 'Inline', 'Inline', array());                       <span class="comment">// Tex syntax, equivalent to $$xx$$.</span>
<a name="l1819"><span class="linenum">1819</span></a>              <a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('def')" href="../_variables/def.html">$def</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('algebra', 'Inline', 'Inline', array());                   <span class="comment">// Algebra syntax, equivalent to @@xx@@.</span>
<a name="l1820"><span class="linenum">1820</span></a>              <a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('def')" href="../_variables/def.html">$def</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('lang', 'Block', 'Flow', array(), array('lang'=&gt;'CDATA')); <span class="comment">// Original multilang style - only our hacked lang attribute.</span>
<a name="l1821"><span class="linenum">1821</span></a>              <a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('def')" href="../_variables/def.html">$def</a>-&gt;<a class="function" onClick="logFunction('addAttribute')" href="../_functions/addattribute.html" onMouseOver="funcPopup(event,'addattribute')">addAttribute</a>('span', 'xxxlang', 'CDATA');                             <span class="comment">// Current very problematic multilang.</span>
<a name="l1822"><span class="linenum">1822</span></a>  
<a name="l1823"><span class="linenum">1823</span></a>  <span class="comment">            // Media elements.</span>
<a name="l1824"><span class="linenum">1824</span></a>  <span class="comment">            // https://html.spec.whatwg.org/#the-video-element</span>
<a name="l1825"><span class="linenum">1825</span></a>              <a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('def')" href="../_variables/def.html">$def</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('video', 'Block', 'Optional: (source, Flow) | (Flow, source) | Flow', 'Common', [
<a name="l1826"><span class="linenum">1826</span></a>                  'src' =&gt; 'URI',
<a name="l1827"><span class="linenum">1827</span></a>                  'crossorigin' =&gt; 'Enum#anonymous,use-credentials',
<a name="l1828"><span class="linenum">1828</span></a>                  'poster' =&gt; 'URI',
<a name="l1829"><span class="linenum">1829</span></a>                  'preload' =&gt; 'Enum#auto,metadata,none',
<a name="l1830"><span class="linenum">1830</span></a>                  'autoplay' =&gt; 'Bool',
<a name="l1831"><span class="linenum">1831</span></a>                  'playsinline' =&gt; 'Bool',
<a name="l1832"><span class="linenum">1832</span></a>                  'loop' =&gt; 'Bool',
<a name="l1833"><span class="linenum">1833</span></a>                  'muted' =&gt; 'Bool',
<a name="l1834"><span class="linenum">1834</span></a>                  'controls' =&gt; 'Bool',
<a name="l1835"><span class="linenum">1835</span></a>                  'width' =&gt; 'Length',
<a name="l1836"><span class="linenum">1836</span></a>                  'height' =&gt; 'Length',
<a name="l1837"><span class="linenum">1837</span></a>              ]);
<a name="l1838"><span class="linenum">1838</span></a>  <span class="comment">            // https://html.spec.whatwg.org/#the-audio-element</span>
<a name="l1839"><span class="linenum">1839</span></a>              <a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('def')" href="../_variables/def.html">$def</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('audio', 'Block', 'Optional: (source, Flow) | (Flow, source) | Flow', 'Common', [
<a name="l1840"><span class="linenum">1840</span></a>                  'src' =&gt; 'URI',
<a name="l1841"><span class="linenum">1841</span></a>                  'crossorigin' =&gt; 'Enum#anonymous,use-credentials',
<a name="l1842"><span class="linenum">1842</span></a>                  'preload' =&gt; 'Enum#auto,metadata,none',
<a name="l1843"><span class="linenum">1843</span></a>                  'autoplay' =&gt; 'Bool',
<a name="l1844"><span class="linenum">1844</span></a>                  'loop' =&gt; 'Bool',
<a name="l1845"><span class="linenum">1845</span></a>                  'muted' =&gt; 'Bool',
<a name="l1846"><span class="linenum">1846</span></a>                  'controls' =&gt; 'Bool'
<a name="l1847"><span class="linenum">1847</span></a>              ]);
<a name="l1848"><span class="linenum">1848</span></a>  <span class="comment">            // https://html.spec.whatwg.org/#the-source-element</span>
<a name="l1849"><span class="linenum">1849</span></a>              <a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('def')" href="../_variables/def.html">$def</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('source', 'Block', 'Flow', 'Common', [
<a name="l1850"><span class="linenum">1850</span></a>                  'src' =&gt; 'URI',
<a name="l1851"><span class="linenum">1851</span></a>                  'type' =&gt; 'Text'
<a name="l1852"><span class="linenum">1852</span></a>              ]);
<a name="l1853"><span class="linenum">1853</span></a>  
<a name="l1854"><span class="linenum">1854</span></a>  <span class="comment">            // Use the built-in Ruby module to add annotation support.</span>
<a name="l1855"><span class="linenum">1855</span></a>              <a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('def')" href="../_variables/def.html">$def</a>-&gt;<a onClick="logVariable('manager')" class="var it43059" onMouseOver="hilite(43059)" onMouseOut="lolite()" href="../_variables/manager.html">manager</a>-&gt;<a class="function" onClick="logFunction('addModule')" href="../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>(<span class="keyword">new </span><a class="class" onClick="logClass('HTMLPurifier_HTMLModule_Ruby')" href="../_classes/htmlpurifier_htmlmodule_ruby.html" onMouseOver="classPopup(event,'htmlpurifier_htmlmodule_ruby')">HTMLPurifier_HTMLModule_Ruby</a>());
<a name="l1856"><span class="linenum">1856</span></a>  
<a name="l1857"><span class="linenum">1857</span></a>  <span class="comment">            // Use the custom Noreferrer module.</span>
<a name="l1858"><span class="linenum">1858</span></a>              <a class="var it500" onMouseOver="hilite(500)" onMouseOut="lolite()" onClick="logVariable('def')" href="../_variables/def.html">$def</a>-&gt;<a onClick="logVariable('manager')" class="var it43059" onMouseOver="hilite(43059)" onMouseOut="lolite()" href="../_variables/manager.html">manager</a>-&gt;<a class="function" onClick="logFunction('addModule')" href="../_functions/addmodule.html" onMouseOver="funcPopup(event,'addmodule')">addModule</a>(<span class="keyword">new </span><a class="class" onClick="logClass('HTMLPurifier_HTMLModule_Noreferrer')" href="../_classes/htmlpurifier_htmlmodule_noreferrer.html" onMouseOver="classPopup(event,'htmlpurifier_htmlmodule_noreferrer')">HTMLPurifier_HTMLModule_Noreferrer</a>());
<a name="l1859"><span class="linenum">1859</span></a>          }
<a name="l1860"><span class="linenum">1860</span></a>  
<a name="l1861"><span class="linenum">1861</span></a>          <a class="var it18373" onMouseOver="hilite(18373)" onMouseOut="lolite()" onClick="logVariable('purifier')" href="../_variables/purifier.html">$purifier</a> = <span class="keyword">new </span><a class="class" onClick="logClass('HTMLPurifier')" href="../_classes/htmlpurifier.html" onMouseOver="classPopup(event,'htmlpurifier')">HTMLPurifier</a>(<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>);
<a name="l1862"><span class="linenum">1862</span></a>          <a class="var it18369" onMouseOver="hilite(18369)" onMouseOut="lolite()" onClick="logVariable('purifiers')" href="../_variables/purifiers.html">$purifiers</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>] = <a class="var it18373" onMouseOver="hilite(18373)" onMouseOut="lolite()" onClick="logVariable('purifier')" href="../_variables/purifier.html">$purifier</a>;
<a name="l1863"><span class="linenum">1863</span></a>      } else {
<a name="l1864"><span class="linenum">1864</span></a>          <a class="var it18373" onMouseOver="hilite(18373)" onMouseOut="lolite()" onClick="logVariable('purifier')" href="../_variables/purifier.html">$purifier</a> = <a class="var it18369" onMouseOver="hilite(18369)" onMouseOut="lolite()" onClick="logVariable('purifiers')" href="../_variables/purifiers.html">$purifiers</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>];
<a name="l1865"><span class="linenum">1865</span></a>      }
<a name="l1866"><span class="linenum">1866</span></a>  
<a name="l1867"><span class="linenum">1867</span></a>      <a class="var it18374" onMouseOver="hilite(18374)" onMouseOut="lolite()" onClick="logVariable('multilang')" href="../_variables/multilang.html">$multilang</a> = (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, 'class=&quot;multilang&quot;') !== false);
<a name="l1868"><span class="linenum">1868</span></a>  
<a name="l1869"><span class="linenum">1869</span></a>      <a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a> = <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1870"><span class="linenum">1870</span></a>      if (<a class="var it18374" onMouseOver="hilite(18374)" onMouseOut="lolite()" onClick="logVariable('multilang')" href="../_variables/multilang.html">$multilang</a>) {
<a name="l1871"><span class="linenum">1871</span></a>          <a class="var it18375" onMouseOver="hilite(18375)" onMouseOut="lolite()" onClick="logVariable('filteredtextregex')" href="../_variables/filteredtextregex.html">$filteredtextregex</a> = '/&lt;<a class="function" onClick="logFunction('span')" href="../_functions/span.html" onMouseOver="funcPopup(event,'span')">span</a>(\s+lang=&quot;([a-zA-Z0-9_-]+)&quot;|\s+class=&quot;multilang&quot;){2}\s*&gt;/';
<a name="l1872"><span class="linenum">1872</span></a>          <a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(<a class="var it18375" onMouseOver="hilite(18375)" onMouseOut="lolite()" onClick="logVariable('filteredtextregex')" href="../_variables/filteredtextregex.html">$filteredtextregex</a>, '&lt;span xxxlang=&quot;<a class="var it2020" onMouseOver="hilite(2020)" onMouseOut="lolite()" onClick="logVariable('2')" href="../_variables/2.html">$2</a>}&quot;&gt;', <a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a>);
<a name="l1873"><span class="linenum">1873</span></a>      }
<a name="l1874"><span class="linenum">1874</span></a>      <a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a> = (string)<a class="var it18373" onMouseOver="hilite(18373)" onMouseOut="lolite()" onClick="logVariable('purifier')" href="../_variables/purifier.html">$purifier</a>-&gt;<a class="function" onClick="logFunction('purify')" href="../_functions/purify.html" onMouseOver="funcPopup(event,'purify')">purify</a>(<a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a>);
<a name="l1875"><span class="linenum">1875</span></a>      if (<a class="var it18374" onMouseOver="hilite(18374)" onMouseOut="lolite()" onClick="logVariable('multilang')" href="../_variables/multilang.html">$multilang</a>) {
<a name="l1876"><span class="linenum">1876</span></a>          <a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/&lt;span xxxlang=&quot;([a-zA-Z0-9_-]+)&quot;&gt;/', '&lt;span lang=&quot;<a class="var it1197" onMouseOver="hilite(1197)" onMouseOut="lolite()" onClick="logVariable('1')" href="../_variables/1.html">$1</a>}&quot; class=&quot;multilang&quot;&gt;', <a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a>);
<a name="l1877"><span class="linenum">1877</span></a>      }
<a name="l1878"><span class="linenum">1878</span></a>  
<a name="l1879"><span class="linenum">1879</span></a>      if (<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> === <a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a>) {
<a name="l1880"><span class="linenum">1880</span></a>  <span class="comment">        // No need to store the filtered text, next time we will just return unfiltered text</span>
<a name="l1881"><span class="linenum">1881</span></a>  <span class="comment">        // because it was not changed by purifying.</span>
<a name="l1882"><span class="linenum">1882</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, true);
<a name="l1883"><span class="linenum">1883</span></a>      } else {
<a name="l1884"><span class="linenum">1884</span></a>          <a class="var it415" onMouseOver="hilite(415)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a>);
<a name="l1885"><span class="linenum">1885</span></a>      }
<a name="l1886"><span class="linenum">1886</span></a>  
<a name="l1887"><span class="linenum">1887</span></a>      return <a class="var it18372" onMouseOver="hilite(18372)" onMouseOut="lolite()" onClick="logVariable('filteredtext')" href="../_variables/filteredtext.html">$filteredtext</a>;
<a name="l1888"><span class="linenum">1888</span></a>  }
<a name="l1889"><span class="linenum">1889</span></a>  
<a name="l1890"><span class="linenum">1890</span></a>  <span class="comment">/**</span>
<a name="l1891"><span class="linenum">1891</span></a>  <span class="comment"> * Given plain text, makes it into HTML as nicely as possible.</span>
<a name="l1892"><span class="linenum">1892</span></a>  <span class="comment"> *</span>
<a name="l1893"><span class="linenum">1893</span></a>  <span class="comment"> * May contain HTML tags already.</span>
<a name="l1894"><span class="linenum">1894</span></a>  <span class="comment"> *</span>
<a name="l1895"><span class="linenum">1895</span></a>  <span class="comment"> * Do not abuse this function. It is intended as lower level formatting feature used</span>
<a name="l1896"><span class="linenum">1896</span></a>  <span class="comment"> * by {@link format_text()} to convert FORMAT_MOODLE to HTML. You are supposed</span>
<a name="l1897"><span class="linenum">1897</span></a>  <span class="comment"> * to call format_text() in most of cases.</span>
<a name="l1898"><span class="linenum">1898</span></a>  <span class="comment"> *</span>
<a name="l1899"><span class="linenum">1899</span></a>  <span class="comment"> * @param string $text The string to convert.</span>
<a name="l1900"><span class="linenum">1900</span></a>  <span class="comment"> * @param boolean $smileyignored Was used to determine if smiley characters should convert to smiley images, ignored now</span>
<a name="l1901"><span class="linenum">1901</span></a>  <span class="comment"> * @param boolean $para If true then the returned string will be wrapped in div tags</span>
<a name="l1902"><span class="linenum">1902</span></a>  <span class="comment"> * @param boolean $newlines If true then lines newline breaks will be converted to HTML newline breaks.</span>
<a name="l1903"><span class="linenum">1903</span></a>  <span class="comment"> * @return string</span>
<a name="l1904"><span class="linenum">1904</span></a>  <span class="comment"> */</span>
<a name="l1905"><span class="linenum">1905</span></a>  function <a class="function" onClick="logFunction('text_to_html')" href="../_functions/text_to_html.html" onMouseOver="funcPopup(event,'text_to_html')">text_to_html</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it18376" onMouseOver="hilite(18376)" onMouseOut="lolite()" onClick="logVariable('smileyignored')" href="../_variables/smileyignored.html">$smileyignored</a> = null, <a class="var it2671" onMouseOver="hilite(2671)" onMouseOut="lolite()" onClick="logVariable('para')" href="../_variables/para.html">$para</a> = true, <a class="var it5684" onMouseOver="hilite(5684)" onMouseOut="lolite()" onClick="logVariable('newlines')" href="../_variables/newlines.html">$newlines</a> = true) {
<a name="l1906"><span class="linenum">1906</span></a>  <span class="comment">    // Remove any whitespace that may be between HTML tags.</span>
<a name="l1907"><span class="linenum">1907</span></a>      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;~&gt;([[:space:]]+)&lt;~i&quot;, &quot;&gt;&lt;&quot;, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1908"><span class="linenum">1908</span></a>  
<a name="l1909"><span class="linenum">1909</span></a>  <span class="comment">    // Remove any returns that precede or follow HTML tags.</span>
<a name="l1910"><span class="linenum">1910</span></a>      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;~([\n\r])&lt;~i&quot;, &quot; &lt;&quot;, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1911"><span class="linenum">1911</span></a>      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;~&gt;([\n\r])~i&quot;, &quot;&gt; &quot;, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1912"><span class="linenum">1912</span></a>  
<a name="l1913"><span class="linenum">1913</span></a>  <span class="comment">    // Make returns into HTML newlines.</span>
<a name="l1914"><span class="linenum">1914</span></a>      if (<a class="var it5684" onMouseOver="hilite(5684)" onMouseOut="lolite()" onClick="logVariable('newlines')" href="../_variables/newlines.html">$newlines</a>) {
<a name="l1915"><span class="linenum">1915</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('nl2br')" href="../_functions/nl2br.html" onMouseOver="phpfuncPopup(event,'nl2br')">nl2br</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1916"><span class="linenum">1916</span></a>      }
<a name="l1917"><span class="linenum">1917</span></a>  
<a name="l1918"><span class="linenum">1918</span></a>  <span class="comment">    // Wrap the whole thing in a div if required.</span>
<a name="l1919"><span class="linenum">1919</span></a>      if (<a class="var it2671" onMouseOver="hilite(2671)" onMouseOut="lolite()" onClick="logVariable('para')" href="../_variables/para.html">$para</a>) {
<a name="l1920"><span class="linenum">1920</span></a>  <span class="comment">        // In 1.9 this was changed from a p =&gt; div.</span>
<a name="l1921"><span class="linenum">1921</span></a>          return '&lt;div class=&quot;text_to_html&quot;&gt;'.<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>.'&lt;/div&gt;';
<a name="l1922"><span class="linenum">1922</span></a>      } else {
<a name="l1923"><span class="linenum">1923</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1924"><span class="linenum">1924</span></a>      }
<a name="l1925"><span class="linenum">1925</span></a>  }
<a name="l1926"><span class="linenum">1926</span></a>  
<a name="l1927"><span class="linenum">1927</span></a>  <span class="comment">/**</span>
<a name="l1928"><span class="linenum">1928</span></a>  <span class="comment"> * Given Markdown formatted text, make it into XHTML using external function</span>
<a name="l1929"><span class="linenum">1929</span></a>  <span class="comment"> *</span>
<a name="l1930"><span class="linenum">1930</span></a>  <span class="comment"> * @param string $text The markdown formatted text to be converted.</span>
<a name="l1931"><span class="linenum">1931</span></a>  <span class="comment"> * @return string Converted text</span>
<a name="l1932"><span class="linenum">1932</span></a>  <span class="comment"> */</span>
<a name="l1933"><span class="linenum">1933</span></a>  function <a class="function" onClick="logFunction('markdown_to_html')" href="../_functions/markdown_to_html.html" onMouseOver="funcPopup(event,'markdown_to_html')">markdown_to_html</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l1934"><span class="linenum">1934</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1935"><span class="linenum">1935</span></a>  
<a name="l1936"><span class="linenum">1936</span></a>      if (<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> === '' or <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> === null) {
<a name="l1937"><span class="linenum">1937</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>;
<a name="l1938"><span class="linenum">1938</span></a>      }
<a name="l1939"><span class="linenum">1939</span></a>  
<a name="l1940"><span class="linenum">1940</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> .'/markdown/MarkdownInterface.php');
<a name="l1941"><span class="linenum">1941</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> .'/markdown/Markdown.php');
<a name="l1942"><span class="linenum">1942</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> .'/markdown/MarkdownExtra.php');
<a name="l1943"><span class="linenum">1943</span></a>  
<a name="l1944"><span class="linenum">1944</span></a>      return \Michelf\<a class="class" onClick="logClass('MarkdownExtra')" href="../_classes/markdownextra.html" onMouseOver="classPopup(event,'markdownextra')">MarkdownExtra</a>::<a class="function" onClick="logFunction('defaultTransform')" href="../_functions/defaulttransform.html" onMouseOver="funcPopup(event,'defaulttransform')">defaultTransform</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>);
<a name="l1945"><span class="linenum">1945</span></a>  }
<a name="l1946"><span class="linenum">1946</span></a>  
<a name="l1947"><span class="linenum">1947</span></a>  <span class="comment">/**</span>
<a name="l1948"><span class="linenum">1948</span></a>  <span class="comment"> * Given HTML text, make it into plain text using external function</span>
<a name="l1949"><span class="linenum">1949</span></a>  <span class="comment"> *</span>
<a name="l1950"><span class="linenum">1950</span></a>  <span class="comment"> * @param string $html The text to be converted.</span>
<a name="l1951"><span class="linenum">1951</span></a>  <span class="comment"> * @param integer $width Width to wrap the text at. (optional, default 75 which</span>
<a name="l1952"><span class="linenum">1952</span></a>  <span class="comment"> *      is a good value for email. 0 means do not limit line length.)</span>
<a name="l1953"><span class="linenum">1953</span></a>  <span class="comment"> * @param boolean $dolinks By default, any links in the HTML are collected, and</span>
<a name="l1954"><span class="linenum">1954</span></a>  <span class="comment"> *      printed as a list at the end of the HTML. If you don't want that, set this</span>
<a name="l1955"><span class="linenum">1955</span></a>  <span class="comment"> *      argument to false.</span>
<a name="l1956"><span class="linenum">1956</span></a>  <span class="comment"> * @return string plain text equivalent of the HTML.</span>
<a name="l1957"><span class="linenum">1957</span></a>  <span class="comment"> */</span>
<a name="l1958"><span class="linenum">1958</span></a>  function <a class="function" onClick="logFunction('html_to_text')" href="../_functions/html_to_text.html" onMouseOver="funcPopup(event,'html_to_text')">html_to_text</a>(<a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../_variables/html.html">$html</a>, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../_variables/width.html">$width</a> = 75, <a class="var it18377" onMouseOver="hilite(18377)" onMouseOut="lolite()" onClick="logVariable('dolinks')" href="../_variables/dolinks.html">$dolinks</a> = true) {
<a name="l1959"><span class="linenum">1959</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1960"><span class="linenum">1960</span></a>  
<a name="l1961"><span class="linenum">1961</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> .'/html2text/lib.php');
<a name="l1962"><span class="linenum">1962</span></a>  
<a name="l1963"><span class="linenum">1963</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = array(
<a name="l1964"><span class="linenum">1964</span></a>          'width'     =&gt; <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../_variables/width.html">$width</a>,
<a name="l1965"><span class="linenum">1965</span></a>          'do_links'  =&gt; 'table',
<a name="l1966"><span class="linenum">1966</span></a>      );
<a name="l1967"><span class="linenum">1967</span></a>  
<a name="l1968"><span class="linenum">1968</span></a>      if (empty(<a class="var it18377" onMouseOver="hilite(18377)" onMouseOut="lolite()" onClick="logVariable('dolinks')" href="../_variables/dolinks.html">$dolinks</a>)) {
<a name="l1969"><span class="linenum">1969</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>['do_links'] = 'none';
<a name="l1970"><span class="linenum">1970</span></a>      }
<a name="l1971"><span class="linenum">1971</span></a>      <a class="var it18378" onMouseOver="hilite(18378)" onMouseOut="lolite()" onClick="logVariable('h2t')" href="../_variables/h2t.html">$h2t</a> = <span class="keyword">new </span><a class="class" onClick="logClass('core_html2text')" href="../_classes/core_html2text.html" onMouseOver="classPopup(event,'core_html2text')">core_html2text</a>(<a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../_variables/html.html">$html</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l1972"><span class="linenum">1972</span></a>      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it18378" onMouseOver="hilite(18378)" onMouseOut="lolite()" onClick="logVariable('h2t')" href="../_variables/h2t.html">$h2t</a>-&gt;<a class="phpfunction" onClick="logFunction('getText')" href="../_functions/gettext.html" onMouseOver="phpfuncPopup(event,'gettext')">getText</a>();
<a name="l1973"><span class="linenum">1973</span></a>  
<a name="l1974"><span class="linenum">1974</span></a>      return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l1975"><span class="linenum">1975</span></a>  }
<a name="l1976"><span class="linenum">1976</span></a>  
<a name="l1977"><span class="linenum">1977</span></a>  <span class="comment">/**</span>
<a name="l1978"><span class="linenum">1978</span></a>  <span class="comment"> * Converts texts or strings to plain text.</span>
<a name="l1979"><span class="linenum">1979</span></a>  <span class="comment"> *</span>
<a name="l1980"><span class="linenum">1980</span></a>  <span class="comment"> * - When used to convert user input introduced in an editor the text format needs to be passed in $contentformat like we usually</span>
<a name="l1981"><span class="linenum">1981</span></a>  <span class="comment"> *   do in format_text.</span>
<a name="l1982"><span class="linenum">1982</span></a>  <span class="comment"> * - When this function is used for strings that are usually passed through format_string before displaying them</span>
<a name="l1983"><span class="linenum">1983</span></a>  <span class="comment"> *   we need to set $contentformat to false. This will execute html_to_text as these strings can contain multilang tags if</span>
<a name="l1984"><span class="linenum">1984</span></a>  <span class="comment"> *   multilang filter is applied to headings.</span>
<a name="l1985"><span class="linenum">1985</span></a>  <span class="comment"> *</span>
<a name="l1986"><span class="linenum">1986</span></a>  <span class="comment"> * @param string $content The text as entered by the user</span>
<a name="l1987"><span class="linenum">1987</span></a>  <span class="comment"> * @param int|false $contentformat False for strings or the text format: FORMAT_MOODLE/FORMAT_HTML/FORMAT_PLAIN/FORMAT_MARKDOWN</span>
<a name="l1988"><span class="linenum">1988</span></a>  <span class="comment"> * @return string Plain text.</span>
<a name="l1989"><span class="linenum">1989</span></a>  <span class="comment"> */</span>
<a name="l1990"><span class="linenum">1990</span></a>  function <a class="function" onClick="logFunction('content_to_text')" href="../_functions/content_to_text.html" onMouseOver="funcPopup(event,'content_to_text')">content_to_text</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>, <a class="var it990" onMouseOver="hilite(990)" onMouseOut="lolite()" onClick="logVariable('contentformat')" href="../_variables/contentformat.html">$contentformat</a>) {
<a name="l1991"><span class="linenum">1991</span></a>  
<a name="l1992"><span class="linenum">1992</span></a>      switch (<a class="var it990" onMouseOver="hilite(990)" onMouseOut="lolite()" onClick="logVariable('contentformat')" href="../_variables/contentformat.html">$contentformat</a>) {
<a name="l1993"><span class="linenum">1993</span></a>          case <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>:
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment">            // Nothing here.</span>
<a name="l1995"><span class="linenum">1995</span></a>              break;
<a name="l1996"><span class="linenum">1996</span></a>          case <a class="constant" onClick="logConstant('FORMAT_MARKDOWN')" href="../_constants/FORMAT_MARKDOWN.html" onMouseOver="constPopup(event,'FORMAT_MARKDOWN')">FORMAT_MARKDOWN</a>:
<a name="l1997"><span class="linenum">1997</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('markdown_to_html')" href="../_functions/markdown_to_html.html" onMouseOver="funcPopup(event,'markdown_to_html')">markdown_to_html</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>);
<a name="l1998"><span class="linenum">1998</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('html_to_text')" href="../_functions/html_to_text.html" onMouseOver="funcPopup(event,'html_to_text')">html_to_text</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>, 75, false);
<a name="l1999"><span class="linenum">1999</span></a>              break;
<a name="l2000"><span class="linenum">2000</span></a>          default:
<a name="l2001"><span class="linenum">2001</span></a>  <span class="comment">            // FORMAT_HTML, FORMAT_MOODLE and $contentformat = false, the later one are strings usually formatted through</span>
<a name="l2002"><span class="linenum">2002</span></a>  <span class="comment">            // format_string, we need to convert them from html because they can contain HTML (multilang filter).</span>
<a name="l2003"><span class="linenum">2003</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('html_to_text')" href="../_functions/html_to_text.html" onMouseOver="funcPopup(event,'html_to_text')">html_to_text</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>, 75, false);
<a name="l2004"><span class="linenum">2004</span></a>      }
<a name="l2005"><span class="linenum">2005</span></a>  
<a name="l2006"><span class="linenum">2006</span></a>      return <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>, &quot;\r\n &quot;);
<a name="l2007"><span class="linenum">2007</span></a>  }
<a name="l2008"><span class="linenum">2008</span></a>  
<a name="l2009"><span class="linenum">2009</span></a>  <span class="comment">/**</span>
<a name="l2010"><span class="linenum">2010</span></a>  <span class="comment"> * This function will highlight search words in a given string</span>
<a name="l2011"><span class="linenum">2011</span></a>  <span class="comment"> *</span>
<a name="l2012"><span class="linenum">2012</span></a>  <span class="comment"> * It cares about HTML and will not ruin links.  It's best to use</span>
<a name="l2013"><span class="linenum">2013</span></a>  <span class="comment"> * this function after performing any conversions to HTML.</span>
<a name="l2014"><span class="linenum">2014</span></a>  <span class="comment"> *</span>
<a name="l2015"><span class="linenum">2015</span></a>  <span class="comment"> * @param string $needle The search string. Syntax like &quot;word1 +word2 -word3&quot; is dealt with correctly.</span>
<a name="l2016"><span class="linenum">2016</span></a>  <span class="comment"> * @param string $haystack The string (HTML) within which to highlight the search terms.</span>
<a name="l2017"><span class="linenum">2017</span></a>  <span class="comment"> * @param boolean $matchcase whether to do case-sensitive. Default case-insensitive.</span>
<a name="l2018"><span class="linenum">2018</span></a>  <span class="comment"> * @param string $prefix the string to put before each search term found.</span>
<a name="l2019"><span class="linenum">2019</span></a>  <span class="comment"> * @param string $suffix the string to put after each search term found.</span>
<a name="l2020"><span class="linenum">2020</span></a>  <span class="comment"> * @return string The highlighted HTML.</span>
<a name="l2021"><span class="linenum">2021</span></a>  <span class="comment"> */</span>
<a name="l2022"><span class="linenum">2022</span></a>  function <a class="function" onClick="logFunction('highlight')" href="../_functions/highlight.html" onMouseOver="funcPopup(event,'highlight')">highlight</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../_variables/needle.html">$needle</a>, <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../_variables/haystack.html">$haystack</a>, <a class="var it18379" onMouseOver="hilite(18379)" onMouseOut="lolite()" onClick="logVariable('matchcase')" href="../_variables/matchcase.html">$matchcase</a> = false,
<a name="l2023"><span class="linenum">2023</span></a>          <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../_variables/prefix.html">$prefix</a> = '&lt;span class=&quot;highlight&quot;&gt;', <a class="var it4927" onMouseOver="hilite(4927)" onMouseOut="lolite()" onClick="logVariable('suffix')" href="../_variables/suffix.html">$suffix</a> = '&lt;/span&gt;') {
<a name="l2024"><span class="linenum">2024</span></a>  
<a name="l2025"><span class="linenum">2025</span></a>  <span class="comment">    // Quick bail-out in trivial cases.</span>
<a name="l2026"><span class="linenum">2026</span></a>      if (empty(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../_variables/needle.html">$needle</a>) or empty(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../_variables/haystack.html">$haystack</a>)) {
<a name="l2027"><span class="linenum">2027</span></a>          return <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../_variables/haystack.html">$haystack</a>;
<a name="l2028"><span class="linenum">2028</span></a>      }
<a name="l2029"><span class="linenum">2029</span></a>  
<a name="l2030"><span class="linenum">2030</span></a>  <span class="comment">    // Break up the search term into words, discard any -words and build a regexp.</span>
<a name="l2031"><span class="linenum">2031</span></a>      <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../_variables/words.html">$words</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('/ +/', <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../_variables/needle.html">$needle</a>));
<a name="l2032"><span class="linenum">2032</span></a>      foreach (<a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../_variables/words.html">$words</a> as <a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../_variables/index.html">$index</a> =&gt; <a class="var it6546" onMouseOver="hilite(6546)" onMouseOut="lolite()" onClick="logVariable('word')" href="../_variables/word.html">$word</a>) {
<a name="l2033"><span class="linenum">2033</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it6546" onMouseOver="hilite(6546)" onMouseOut="lolite()" onClick="logVariable('word')" href="../_variables/word.html">$word</a>, '-') === 0) {
<a name="l2034"><span class="linenum">2034</span></a>              unset(<a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../_variables/words.html">$words</a>[<a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../_variables/index.html">$index</a>]);
<a name="l2035"><span class="linenum">2035</span></a>          } else if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it6546" onMouseOver="hilite(6546)" onMouseOut="lolite()" onClick="logVariable('word')" href="../_variables/word.html">$word</a>, '+') === 0) {
<a name="l2036"><span class="linenum">2036</span></a>              <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../_variables/words.html">$words</a>[<a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../_variables/index.html">$index</a>] = '\b' . <a class="phpfunction" onClick="logFunction('preg_quote')" href="../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="phpfunction" onClick="logFunction('ltrim')" href="../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="var it6546" onMouseOver="hilite(6546)" onMouseOut="lolite()" onClick="logVariable('word')" href="../_variables/word.html">$word</a>, '+'), '/') . '\b'; <span class="comment">// Match only as a complete word.</span>
<a name="l2037"><span class="linenum">2037</span></a>          } else {
<a name="l2038"><span class="linenum">2038</span></a>              <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../_variables/words.html">$words</a>[<a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../_variables/index.html">$index</a>] = <a class="phpfunction" onClick="logFunction('preg_quote')" href="../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it6546" onMouseOver="hilite(6546)" onMouseOut="lolite()" onClick="logVariable('word')" href="../_variables/word.html">$word</a>, '/');
<a name="l2039"><span class="linenum">2039</span></a>          }
<a name="l2040"><span class="linenum">2040</span></a>      }
<a name="l2041"><span class="linenum">2041</span></a>      <a class="var it6629" onMouseOver="hilite(6629)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../_variables/regexp.html">$regexp</a> = '/(' . <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('|', <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../_variables/words.html">$words</a>) . ')/u'; <span class="comment">// Char u is to do UTF-8 matching.</span>
<a name="l2042"><span class="linenum">2042</span></a>      if (!<a class="var it18379" onMouseOver="hilite(18379)" onMouseOut="lolite()" onClick="logVariable('matchcase')" href="../_variables/matchcase.html">$matchcase</a>) {
<a name="l2043"><span class="linenum">2043</span></a>          <a class="var it6629" onMouseOver="hilite(6629)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../_variables/regexp.html">$regexp</a> .= 'i';
<a name="l2044"><span class="linenum">2044</span></a>      }
<a name="l2045"><span class="linenum">2045</span></a>  
<a name="l2046"><span class="linenum">2046</span></a>  <span class="comment">    // Another chance to bail-out if $search was only -words.</span>
<a name="l2047"><span class="linenum">2047</span></a>      if (empty(<a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../_variables/words.html">$words</a>)) {
<a name="l2048"><span class="linenum">2048</span></a>          return <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../_variables/haystack.html">$haystack</a>;
<a name="l2049"><span class="linenum">2049</span></a>      }
<a name="l2050"><span class="linenum">2050</span></a>  
<a name="l2051"><span class="linenum">2051</span></a>  <span class="comment">    // Split the string into HTML tags and real content.</span>
<a name="l2052"><span class="linenum">2052</span></a>      <a class="var it1931" onMouseOver="hilite(1931)" onMouseOut="lolite()" onClick="logVariable('chunks')" href="../_variables/chunks.html">$chunks</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('/((?:&lt;[^&gt;]*&gt;)+)/', <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../_variables/haystack.html">$haystack</a>, -1, PREG_SPLIT_DELIM_CAPTURE);
<a name="l2053"><span class="linenum">2053</span></a>  
<a name="l2054"><span class="linenum">2054</span></a>  <span class="comment">    // We have an array of alternating blocks of text, then HTML tags, then text, ...</span>
<a name="l2055"><span class="linenum">2055</span></a>  <span class="comment">    // Loop through replacing search terms in the text, and leaving the HTML unchanged.</span>
<a name="l2056"><span class="linenum">2056</span></a>      <a class="var it18380" onMouseOver="hilite(18380)" onMouseOut="lolite()" onClick="logVariable('ishtmlchunk')" href="../_variables/ishtmlchunk.html">$ishtmlchunk</a> = false;
<a name="l2057"><span class="linenum">2057</span></a>      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = '';
<a name="l2058"><span class="linenum">2058</span></a>      foreach (<a class="var it1931" onMouseOver="hilite(1931)" onMouseOut="lolite()" onClick="logVariable('chunks')" href="../_variables/chunks.html">$chunks</a> as <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../_variables/chunk.html">$chunk</a>) {
<a name="l2059"><span class="linenum">2059</span></a>          if (<a class="var it18380" onMouseOver="hilite(18380)" onMouseOut="lolite()" onClick="logVariable('ishtmlchunk')" href="../_variables/ishtmlchunk.html">$ishtmlchunk</a>) {
<a name="l2060"><span class="linenum">2060</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> .= <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../_variables/chunk.html">$chunk</a>;
<a name="l2061"><span class="linenum">2061</span></a>          } else {
<a name="l2062"><span class="linenum">2062</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> .= <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(<a class="var it6629" onMouseOver="hilite(6629)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../_variables/regexp.html">$regexp</a>, <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../_variables/prefix.html">$prefix</a> . '<a class="var it1197" onMouseOver="hilite(1197)" onMouseOut="lolite()" onClick="logVariable('1')" href="../_variables/1.html">$1</a>' . <a class="var it4927" onMouseOver="hilite(4927)" onMouseOut="lolite()" onClick="logVariable('suffix')" href="../_variables/suffix.html">$suffix</a>, <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../_variables/chunk.html">$chunk</a>);
<a name="l2063"><span class="linenum">2063</span></a>          }
<a name="l2064"><span class="linenum">2064</span></a>          <a class="var it18380" onMouseOver="hilite(18380)" onMouseOut="lolite()" onClick="logVariable('ishtmlchunk')" href="../_variables/ishtmlchunk.html">$ishtmlchunk</a> = !<a class="var it18380" onMouseOver="hilite(18380)" onMouseOut="lolite()" onClick="logVariable('ishtmlchunk')" href="../_variables/ishtmlchunk.html">$ishtmlchunk</a>;
<a name="l2065"><span class="linenum">2065</span></a>      }
<a name="l2066"><span class="linenum">2066</span></a>  
<a name="l2067"><span class="linenum">2067</span></a>      return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l2068"><span class="linenum">2068</span></a>  }
<a name="l2069"><span class="linenum">2069</span></a>  
<a name="l2070"><span class="linenum">2070</span></a>  <span class="comment">/**</span>
<a name="l2071"><span class="linenum">2071</span></a>  <span class="comment"> * This function will highlight instances of $needle in $haystack</span>
<a name="l2072"><span class="linenum">2072</span></a>  <span class="comment"> *</span>
<a name="l2073"><span class="linenum">2073</span></a>  <span class="comment"> * It's faster that the above function {@link highlight()} and doesn't care about</span>
<a name="l2074"><span class="linenum">2074</span></a>  <span class="comment"> * HTML or anything.</span>
<a name="l2075"><span class="linenum">2075</span></a>  <span class="comment"> *</span>
<a name="l2076"><span class="linenum">2076</span></a>  <span class="comment"> * @param string $needle The string to search for</span>
<a name="l2077"><span class="linenum">2077</span></a>  <span class="comment"> * @param string $haystack The string to search for $needle in</span>
<a name="l2078"><span class="linenum">2078</span></a>  <span class="comment"> * @return string The highlighted HTML</span>
<a name="l2079"><span class="linenum">2079</span></a>  <span class="comment"> */</span>
<a name="l2080"><span class="linenum">2080</span></a>  function <a class="function" onClick="logFunction('highlightfast')" href="../_functions/highlightfast.html" onMouseOver="funcPopup(event,'highlightfast')">highlightfast</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../_variables/needle.html">$needle</a>, <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../_variables/haystack.html">$haystack</a>) {
<a name="l2081"><span class="linenum">2081</span></a>  
<a name="l2082"><span class="linenum">2082</span></a>      if (empty(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../_variables/needle.html">$needle</a>) or empty(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../_variables/haystack.html">$haystack</a>)) {
<a name="l2083"><span class="linenum">2083</span></a>          return <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../_variables/haystack.html">$haystack</a>;
<a name="l2084"><span class="linenum">2084</span></a>      }
<a name="l2085"><span class="linenum">2085</span></a>  
<a name="l2086"><span class="linenum">2086</span></a>      <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../_variables/needle.html">$needle</a>), <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../_variables/haystack.html">$haystack</a>));
<a name="l2087"><span class="linenum">2087</span></a>  
<a name="l2088"><span class="linenum">2088</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>) === 1) {
<a name="l2089"><span class="linenum">2089</span></a>          return <a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../_variables/haystack.html">$haystack</a>;
<a name="l2090"><span class="linenum">2090</span></a>      }
<a name="l2091"><span class="linenum">2091</span></a>  
<a name="l2092"><span class="linenum">2092</span></a>      <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a> = 0;
<a name="l2093"><span class="linenum">2093</span></a>  
<a name="l2094"><span class="linenum">2094</span></a>      foreach (<a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../_variables/part.html">$part</a>) {
<a name="l2095"><span class="linenum">2095</span></a>          <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../_variables/haystack.html">$haystack</a>, <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a>, <a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../_variables/part.html">$part</a>));
<a name="l2096"><span class="linenum">2096</span></a>          <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a> += <a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../_variables/part.html">$part</a>);
<a name="l2097"><span class="linenum">2097</span></a>  
<a name="l2098"><span class="linenum">2098</span></a>          <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] .= '&lt;span class=&quot;highlight&quot;&gt;'.<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../_variables/haystack.html">$haystack</a>, <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a>, <a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../_variables/needle.html">$needle</a>)).'&lt;/span&gt;';
<a name="l2099"><span class="linenum">2099</span></a>          <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../_variables/pos.html">$pos</a> += <a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../_variables/needle.html">$needle</a>);
<a name="l2100"><span class="linenum">2100</span></a>      }
<a name="l2101"><span class="linenum">2101</span></a>  
<a name="l2102"><span class="linenum">2102</span></a>      return <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&lt;span class=&quot;highlight&quot;&gt;&lt;/span&gt;', '', <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>('', <a class="var it1412" onMouseOver="hilite(1412)" onMouseOut="lolite()" onClick="logVariable('parts')" href="../_variables/parts.html">$parts</a>));
<a name="l2103"><span class="linenum">2103</span></a>  }
<a name="l2104"><span class="linenum">2104</span></a>  
<a name="l2105"><span class="linenum">2105</span></a>  <span class="comment">/**</span>
<a name="l2106"><span class="linenum">2106</span></a>  <span class="comment"> * Return a string containing 'lang', xml:lang and optionally 'dir' HTML attributes.</span>
<a name="l2107"><span class="linenum">2107</span></a>  <span class="comment"> *</span>
<a name="l2108"><span class="linenum">2108</span></a>  <span class="comment"> * Internationalisation, for print_header and backup/restorelib.</span>
<a name="l2109"><span class="linenum">2109</span></a>  <span class="comment"> *</span>
<a name="l2110"><span class="linenum">2110</span></a>  <span class="comment"> * @param bool $dir Default false</span>
<a name="l2111"><span class="linenum">2111</span></a>  <span class="comment"> * @return string Attributes</span>
<a name="l2112"><span class="linenum">2112</span></a>  <span class="comment"> */</span>
<a name="l2113"><span class="linenum">2113</span></a>  function <a class="function" onClick="logFunction('get_html_lang')" href="../_functions/get_html_lang.html" onMouseOver="funcPopup(event,'get_html_lang')">get_html_lang</a>(<a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a> = false) {
<a name="l2114"><span class="linenum">2114</span></a>      <a class="var it2573" onMouseOver="hilite(2573)" onMouseOut="lolite()" onClick="logVariable('direction')" href="../_variables/direction.html">$direction</a> = '';
<a name="l2115"><span class="linenum">2115</span></a>      if (<a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a>) {
<a name="l2116"><span class="linenum">2116</span></a>          if (<a class="function" onClick="logFunction('right_to_left')" href="../_functions/right_to_left.html" onMouseOver="funcPopup(event,'right_to_left')">right_to_left</a>()) {
<a name="l2117"><span class="linenum">2117</span></a>              <a class="var it2573" onMouseOver="hilite(2573)" onMouseOut="lolite()" onClick="logVariable('direction')" href="../_variables/direction.html">$direction</a> = ' dir=&quot;rtl&quot;';
<a name="l2118"><span class="linenum">2118</span></a>          } else {
<a name="l2119"><span class="linenum">2119</span></a>              <a class="var it2573" onMouseOver="hilite(2573)" onMouseOut="lolite()" onClick="logVariable('direction')" href="../_variables/direction.html">$direction</a> = ' dir=&quot;ltr&quot;';
<a name="l2120"><span class="linenum">2120</span></a>          }
<a name="l2121"><span class="linenum">2121</span></a>      }
<a name="l2122"><span class="linenum">2122</span></a>  <span class="comment">    // Accessibility: added the 'lang' attribute to $direction, used in theme &lt;html&gt; tag.</span>
<a name="l2123"><span class="linenum">2123</span></a>      <a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('language')" href="../_variables/language.html">$language</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('_', '-', <a class="function" onClick="logFunction('current_language')" href="../_functions/current_language.html" onMouseOver="funcPopup(event,'current_language')">current_language</a>());
<a name="l2124"><span class="linenum">2124</span></a>      @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Content-Language: '.<a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('language')" href="../_variables/language.html">$language</a>);
<a name="l2125"><span class="linenum">2125</span></a>      return (<a class="var it2573" onMouseOver="hilite(2573)" onMouseOut="lolite()" onClick="logVariable('direction')" href="../_variables/direction.html">$direction</a>.' lang=&quot;'.<a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('language')" href="../_variables/language.html">$language</a>.'&quot; xml:lang=&quot;'.<a class="var it129" onMouseOver="hilite(129)" onMouseOut="lolite()" onClick="logVariable('language')" href="../_variables/language.html">$language</a>.'&quot;');
<a name="l2126"><span class="linenum">2126</span></a>  }
<a name="l2127"><span class="linenum">2127</span></a>  
<a name="l2128"><span class="linenum">2128</span></a>  
<a name="l2129"><span class="linenum">2129</span></a>  <span class="comment">// STANDARD WEB PAGE PARTS.</span>
<a name="l2130"><span class="linenum">2130</span></a>  
<a name="l2131"><span class="linenum">2131</span></a>  <span class="comment">/**</span>
<a name="l2132"><span class="linenum">2132</span></a>  <span class="comment"> * Send the HTTP headers that Moodle requires.</span>
<a name="l2133"><span class="linenum">2133</span></a>  <span class="comment"> *</span>
<a name="l2134"><span class="linenum">2134</span></a>  <span class="comment"> * There is a backwards compatibility hack for legacy code</span>
<a name="l2135"><span class="linenum">2135</span></a>  <span class="comment"> * that needs to add custom IE compatibility directive.</span>
<a name="l2136"><span class="linenum">2136</span></a>  <span class="comment"> *</span>
<a name="l2137"><span class="linenum">2137</span></a>  <span class="comment"> * Example:</span>
<a name="l2138"><span class="linenum">2138</span></a>  <span class="comment"> * &lt;code&gt;</span>
<a name="l2139"><span class="linenum">2139</span></a>  <span class="comment"> * if (!isset($CFG-&gt;additionalhtmlhead)) {</span>
<a name="l2140"><span class="linenum">2140</span></a>  <span class="comment"> *     $CFG-&gt;additionalhtmlhead = '';</span>
<a name="l2141"><span class="linenum">2141</span></a>  <span class="comment"> * }</span>
<a name="l2142"><span class="linenum">2142</span></a>  <span class="comment"> * $CFG-&gt;additionalhtmlhead .= '&lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=8&quot; /&gt;';</span>
<a name="l2143"><span class="linenum">2143</span></a>  <span class="comment"> * header('X-UA-Compatible: IE=8');</span>
<a name="l2144"><span class="linenum">2144</span></a>  <span class="comment"> * echo $OUTPUT-&gt;header();</span>
<a name="l2145"><span class="linenum">2145</span></a>  <span class="comment"> * &lt;/code&gt;</span>
<a name="l2146"><span class="linenum">2146</span></a>  <span class="comment"> *</span>
<a name="l2147"><span class="linenum">2147</span></a>  <span class="comment"> * Please note the $CFG-&gt;additionalhtmlhead alone might not work,</span>
<a name="l2148"><span class="linenum">2148</span></a>  <span class="comment"> * you should send the IE compatibility header() too.</span>
<a name="l2149"><span class="linenum">2149</span></a>  <span class="comment"> *</span>
<a name="l2150"><span class="linenum">2150</span></a>  <span class="comment"> * @param string $contenttype</span>
<a name="l2151"><span class="linenum">2151</span></a>  <span class="comment"> * @param bool $cacheable Can this page be cached on back?</span>
<a name="l2152"><span class="linenum">2152</span></a>  <span class="comment"> * @return void, sends HTTP headers</span>
<a name="l2153"><span class="linenum">2153</span></a>  <span class="comment"> */</span>
<a name="l2154"><span class="linenum">2154</span></a>  function <a class="function" onClick="logFunction('send_headers')" href="../_functions/send_headers.html" onMouseOver="funcPopup(event,'send_headers')">send_headers</a>(<a class="var it18381" onMouseOver="hilite(18381)" onMouseOut="lolite()" onClick="logVariable('contenttype')" href="../_variables/contenttype.html">$contenttype</a>, <a class="var it3652" onMouseOver="hilite(3652)" onMouseOut="lolite()" onClick="logVariable('cacheable')" href="../_variables/cacheable.html">$cacheable</a> = true) {
<a name="l2155"><span class="linenum">2155</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2156"><span class="linenum">2156</span></a>  
<a name="l2157"><span class="linenum">2157</span></a>      @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Content-Type: ' . <a class="var it18381" onMouseOver="hilite(18381)" onMouseOut="lolite()" onClick="logVariable('contenttype')" href="../_variables/contenttype.html">$contenttype</a>);
<a name="l2158"><span class="linenum">2158</span></a>      @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Content-Script-Type: text/javascript');
<a name="l2159"><span class="linenum">2159</span></a>      @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Content-Style-Type: text/css');
<a name="l2160"><span class="linenum">2160</span></a>  
<a name="l2161"><span class="linenum">2161</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('additionalhtmlhead')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/additionalhtmlhead.html">additionalhtmlhead</a>) or <a class="phpfunction" onClick="logFunction('stripos')" href="../_functions/stripos.html" onMouseOver="phpfuncPopup(event,'stripos')">stripos</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('additionalhtmlhead')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/additionalhtmlhead.html">additionalhtmlhead</a>, 'X-UA-Compatible') === false) {
<a name="l2162"><span class="linenum">2162</span></a>          @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('X-UA-Compatible: IE=edge');
<a name="l2163"><span class="linenum">2163</span></a>      }
<a name="l2164"><span class="linenum">2164</span></a>  
<a name="l2165"><span class="linenum">2165</span></a>      if (<a class="var it3652" onMouseOver="hilite(3652)" onMouseOut="lolite()" onClick="logVariable('cacheable')" href="../_variables/cacheable.html">$cacheable</a>) {
<a name="l2166"><span class="linenum">2166</span></a>  <span class="comment">        // Allow caching on &quot;back&quot; (but not on normal clicks).</span>
<a name="l2167"><span class="linenum">2167</span></a>          @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Cache-Control: private, pre-check=0, post-check=0, max-age=0, no-transform');
<a name="l2168"><span class="linenum">2168</span></a>          @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Pragma: no-cache');
<a name="l2169"><span class="linenum">2169</span></a>          @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Expires: ');
<a name="l2170"><span class="linenum">2170</span></a>      } else {
<a name="l2171"><span class="linenum">2171</span></a>  <span class="comment">        // Do everything we can to always prevent clients and proxies caching.</span>
<a name="l2172"><span class="linenum">2172</span></a>          @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Cache-Control: no-store, no-cache, must-revalidate');
<a name="l2173"><span class="linenum">2173</span></a>          @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Cache-Control: post-check=0, pre-check=0, no-transform', false);
<a name="l2174"><span class="linenum">2174</span></a>          @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Pragma: no-cache');
<a name="l2175"><span class="linenum">2175</span></a>          @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Expires: Mon, 20 Aug 1969 09:23:00 GMT');
<a name="l2176"><span class="linenum">2176</span></a>          @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Last-Modified: ' . <a class="phpfunction" onClick="logFunction('gmdate')" href="../_functions/gmdate.html" onMouseOver="phpfuncPopup(event,'gmdate')">gmdate</a>('D, d M Y H:i:s') . ' GMT');
<a name="l2177"><span class="linenum">2177</span></a>      }
<a name="l2178"><span class="linenum">2178</span></a>      @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Accept-Ranges: none');
<a name="l2179"><span class="linenum">2179</span></a>  
<a name="l2180"><span class="linenum">2180</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowframembedding')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/allowframembedding.html">allowframembedding</a>)) {
<a name="l2181"><span class="linenum">2181</span></a>          @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('X-Frame-Options: sameorigin');
<a name="l2182"><span class="linenum">2182</span></a>      }
<a name="l2183"><span class="linenum">2183</span></a>  }
<a name="l2184"><span class="linenum">2184</span></a>  
<a name="l2185"><span class="linenum">2185</span></a>  <span class="comment">/**</span>
<a name="l2186"><span class="linenum">2186</span></a>  <span class="comment"> * Return the right arrow with text ('next'), and optionally embedded in a link.</span>
<a name="l2187"><span class="linenum">2187</span></a>  <span class="comment"> *</span>
<a name="l2188"><span class="linenum">2188</span></a>  <span class="comment"> * @param string $text HTML/plain text label (set to blank only for breadcrumb separator cases).</span>
<a name="l2189"><span class="linenum">2189</span></a>  <span class="comment"> * @param string $url An optional link to use in a surrounding HTML anchor.</span>
<a name="l2190"><span class="linenum">2190</span></a>  <span class="comment"> * @param bool $accesshide True if text should be hidden (for screen readers only).</span>
<a name="l2191"><span class="linenum">2191</span></a>  <span class="comment"> * @param string $addclass Additional class names for the link, or the arrow character.</span>
<a name="l2192"><span class="linenum">2192</span></a>  <span class="comment"> * @return string HTML string.</span>
<a name="l2193"><span class="linenum">2193</span></a>  <span class="comment"> */</span>
<a name="l2194"><span class="linenum">2194</span></a>  function <a class="function" onClick="logFunction('link_arrow_right')" href="../_functions/link_arrow_right.html" onMouseOver="funcPopup(event,'link_arrow_right')">link_arrow_right</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>='', <a class="var it18382" onMouseOver="hilite(18382)" onMouseOut="lolite()" onClick="logVariable('accesshide')" href="../_variables/accesshide.html">$accesshide</a>=false, <a class="var it18383" onMouseOver="hilite(18383)" onMouseOut="lolite()" onClick="logVariable('addclass')" href="../_variables/addclass.html">$addclass</a>='') {
<a name="l2195"><span class="linenum">2195</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>; <span class="comment">// TODO: move to output renderer.</span>
<a name="l2196"><span class="linenum">2196</span></a>      <a class="var it18384" onMouseOver="hilite(18384)" onMouseOut="lolite()" onClick="logVariable('arrowclass')" href="../_variables/arrowclass.html">$arrowclass</a> = 'arrow ';
<a name="l2197"><span class="linenum">2197</span></a>      if (!<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) {
<a name="l2198"><span class="linenum">2198</span></a>          <a class="var it18384" onMouseOver="hilite(18384)" onMouseOut="lolite()" onClick="logVariable('arrowclass')" href="../_variables/arrowclass.html">$arrowclass</a> .= <a class="var it18383" onMouseOver="hilite(18383)" onMouseOut="lolite()" onClick="logVariable('addclass')" href="../_variables/addclass.html">$addclass</a>;
<a name="l2199"><span class="linenum">2199</span></a>      }
<a name="l2200"><span class="linenum">2200</span></a>      <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('arrow')" href="../_variables/arrow.html">$arrow</a> = '&lt;span class=&quot;'.<a class="var it18384" onMouseOver="hilite(18384)" onMouseOut="lolite()" onClick="logVariable('arrowclass')" href="../_variables/arrowclass.html">$arrowclass</a>.'&quot;&gt;'.<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('rarrow')" href="../_functions/rarrow.html" onMouseOver="funcPopup(event,'rarrow')">rarrow</a>().'&lt;/span&gt;';
<a name="l2201"><span class="linenum">2201</span></a>      <a class="var it18385" onMouseOver="hilite(18385)" onMouseOut="lolite()" onClick="logVariable('htmltext')" href="../_variables/htmltext.html">$htmltext</a> = '';
<a name="l2202"><span class="linenum">2202</span></a>      if (<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l2203"><span class="linenum">2203</span></a>          <a class="var it18385" onMouseOver="hilite(18385)" onMouseOut="lolite()" onClick="logVariable('htmltext')" href="../_variables/htmltext.html">$htmltext</a> = '&lt;span class=&quot;arrow_text&quot;&gt;'.<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>.'&lt;/span&gt;&amp;nbsp;';
<a name="l2204"><span class="linenum">2204</span></a>          if (<a class="var it18382" onMouseOver="hilite(18382)" onMouseOut="lolite()" onClick="logVariable('accesshide')" href="../_variables/accesshide.html">$accesshide</a>) {
<a name="l2205"><span class="linenum">2205</span></a>              <a class="var it18385" onMouseOver="hilite(18385)" onMouseOut="lolite()" onClick="logVariable('htmltext')" href="../_variables/htmltext.html">$htmltext</a> = <a class="function" onClick="logFunction('get_accesshide')" href="../_functions/get_accesshide.html" onMouseOver="funcPopup(event,'get_accesshide')">get_accesshide</a>(<a class="var it18385" onMouseOver="hilite(18385)" onMouseOut="lolite()" onClick="logVariable('htmltext')" href="../_variables/htmltext.html">$htmltext</a>);
<a name="l2206"><span class="linenum">2206</span></a>          }
<a name="l2207"><span class="linenum">2207</span></a>      }
<a name="l2208"><span class="linenum">2208</span></a>      if (<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) {
<a name="l2209"><span class="linenum">2209</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = 'arrow_link';
<a name="l2210"><span class="linenum">2210</span></a>          if (<a class="var it18383" onMouseOver="hilite(18383)" onMouseOut="lolite()" onClick="logVariable('addclass')" href="../_variables/addclass.html">$addclass</a>) {
<a name="l2211"><span class="linenum">2211</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= ' '.<a class="var it18383" onMouseOver="hilite(18383)" onMouseOut="lolite()" onClick="logVariable('addclass')" href="../_variables/addclass.html">$addclass</a>;
<a name="l2212"><span class="linenum">2212</span></a>          }
<a name="l2213"><span class="linenum">2213</span></a>          return '&lt;a class=&quot;'.<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>.'&quot; href=&quot;'.<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>.'&quot; title=&quot;'.<a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/&lt;.*?&gt;/', '', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>).'&quot;&gt;'.<a class="var it18385" onMouseOver="hilite(18385)" onMouseOut="lolite()" onClick="logVariable('htmltext')" href="../_variables/htmltext.html">$htmltext</a>.<a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('arrow')" href="../_variables/arrow.html">$arrow</a>.'&lt;/a&gt;';
<a name="l2214"><span class="linenum">2214</span></a>      }
<a name="l2215"><span class="linenum">2215</span></a>      return <a class="var it18385" onMouseOver="hilite(18385)" onMouseOut="lolite()" onClick="logVariable('htmltext')" href="../_variables/htmltext.html">$htmltext</a>.<a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('arrow')" href="../_variables/arrow.html">$arrow</a>;
<a name="l2216"><span class="linenum">2216</span></a>  }
<a name="l2217"><span class="linenum">2217</span></a>  
<a name="l2218"><span class="linenum">2218</span></a>  <span class="comment">/**</span>
<a name="l2219"><span class="linenum">2219</span></a>  <span class="comment"> * Return the left arrow with text ('previous'), and optionally embedded in a link.</span>
<a name="l2220"><span class="linenum">2220</span></a>  <span class="comment"> *</span>
<a name="l2221"><span class="linenum">2221</span></a>  <span class="comment"> * @param string $text HTML/plain text label (set to blank only for breadcrumb separator cases).</span>
<a name="l2222"><span class="linenum">2222</span></a>  <span class="comment"> * @param string $url An optional link to use in a surrounding HTML anchor.</span>
<a name="l2223"><span class="linenum">2223</span></a>  <span class="comment"> * @param bool $accesshide True if text should be hidden (for screen readers only).</span>
<a name="l2224"><span class="linenum">2224</span></a>  <span class="comment"> * @param string $addclass Additional class names for the link, or the arrow character.</span>
<a name="l2225"><span class="linenum">2225</span></a>  <span class="comment"> * @return string HTML string.</span>
<a name="l2226"><span class="linenum">2226</span></a>  <span class="comment"> */</span>
<a name="l2227"><span class="linenum">2227</span></a>  function <a class="function" onClick="logFunction('link_arrow_left')" href="../_functions/link_arrow_left.html" onMouseOver="funcPopup(event,'link_arrow_left')">link_arrow_left</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>='', <a class="var it18382" onMouseOver="hilite(18382)" onMouseOut="lolite()" onClick="logVariable('accesshide')" href="../_variables/accesshide.html">$accesshide</a>=false, <a class="var it18383" onMouseOver="hilite(18383)" onMouseOut="lolite()" onClick="logVariable('addclass')" href="../_variables/addclass.html">$addclass</a>='') {
<a name="l2228"><span class="linenum">2228</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>; <span class="comment">// TODO: move to utput renderer.</span>
<a name="l2229"><span class="linenum">2229</span></a>      <a class="var it18384" onMouseOver="hilite(18384)" onMouseOut="lolite()" onClick="logVariable('arrowclass')" href="../_variables/arrowclass.html">$arrowclass</a> = 'arrow ';
<a name="l2230"><span class="linenum">2230</span></a>      if (! <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) {
<a name="l2231"><span class="linenum">2231</span></a>          <a class="var it18384" onMouseOver="hilite(18384)" onMouseOut="lolite()" onClick="logVariable('arrowclass')" href="../_variables/arrowclass.html">$arrowclass</a> .= <a class="var it18383" onMouseOver="hilite(18383)" onMouseOut="lolite()" onClick="logVariable('addclass')" href="../_variables/addclass.html">$addclass</a>;
<a name="l2232"><span class="linenum">2232</span></a>      }
<a name="l2233"><span class="linenum">2233</span></a>      <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('arrow')" href="../_variables/arrow.html">$arrow</a> = '&lt;span class=&quot;'.<a class="var it18384" onMouseOver="hilite(18384)" onMouseOut="lolite()" onClick="logVariable('arrowclass')" href="../_variables/arrowclass.html">$arrowclass</a>.'&quot;&gt;'.<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('larrow')" href="../_functions/larrow.html" onMouseOver="funcPopup(event,'larrow')">larrow</a>().'&lt;/span&gt;';
<a name="l2234"><span class="linenum">2234</span></a>      <a class="var it18385" onMouseOver="hilite(18385)" onMouseOut="lolite()" onClick="logVariable('htmltext')" href="../_variables/htmltext.html">$htmltext</a> = '';
<a name="l2235"><span class="linenum">2235</span></a>      if (<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l2236"><span class="linenum">2236</span></a>          <a class="var it18385" onMouseOver="hilite(18385)" onMouseOut="lolite()" onClick="logVariable('htmltext')" href="../_variables/htmltext.html">$htmltext</a> = '&amp;nbsp;&lt;span class=&quot;arrow_text&quot;&gt;'.<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>.'&lt;/span&gt;';
<a name="l2237"><span class="linenum">2237</span></a>          if (<a class="var it18382" onMouseOver="hilite(18382)" onMouseOut="lolite()" onClick="logVariable('accesshide')" href="../_variables/accesshide.html">$accesshide</a>) {
<a name="l2238"><span class="linenum">2238</span></a>              <a class="var it18385" onMouseOver="hilite(18385)" onMouseOut="lolite()" onClick="logVariable('htmltext')" href="../_variables/htmltext.html">$htmltext</a> = <a class="function" onClick="logFunction('get_accesshide')" href="../_functions/get_accesshide.html" onMouseOver="funcPopup(event,'get_accesshide')">get_accesshide</a>(<a class="var it18385" onMouseOver="hilite(18385)" onMouseOut="lolite()" onClick="logVariable('htmltext')" href="../_variables/htmltext.html">$htmltext</a>);
<a name="l2239"><span class="linenum">2239</span></a>          }
<a name="l2240"><span class="linenum">2240</span></a>      }
<a name="l2241"><span class="linenum">2241</span></a>      if (<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) {
<a name="l2242"><span class="linenum">2242</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = 'arrow_link';
<a name="l2243"><span class="linenum">2243</span></a>          if (<a class="var it18383" onMouseOver="hilite(18383)" onMouseOut="lolite()" onClick="logVariable('addclass')" href="../_variables/addclass.html">$addclass</a>) {
<a name="l2244"><span class="linenum">2244</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= ' '.<a class="var it18383" onMouseOver="hilite(18383)" onMouseOut="lolite()" onClick="logVariable('addclass')" href="../_variables/addclass.html">$addclass</a>;
<a name="l2245"><span class="linenum">2245</span></a>          }
<a name="l2246"><span class="linenum">2246</span></a>          return '&lt;a class=&quot;'.<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>.'&quot; href=&quot;'.<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>.'&quot; title=&quot;'.<a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/&lt;.*?&gt;/', '', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>).'&quot;&gt;'.<a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('arrow')" href="../_variables/arrow.html">$arrow</a>.<a class="var it18385" onMouseOver="hilite(18385)" onMouseOut="lolite()" onClick="logVariable('htmltext')" href="../_variables/htmltext.html">$htmltext</a>.'&lt;/a&gt;';
<a name="l2247"><span class="linenum">2247</span></a>      }
<a name="l2248"><span class="linenum">2248</span></a>      return <a class="var it551" onMouseOver="hilite(551)" onMouseOut="lolite()" onClick="logVariable('arrow')" href="../_variables/arrow.html">$arrow</a>.<a class="var it18385" onMouseOver="hilite(18385)" onMouseOut="lolite()" onClick="logVariable('htmltext')" href="../_variables/htmltext.html">$htmltext</a>;
<a name="l2249"><span class="linenum">2249</span></a>  }
<a name="l2250"><span class="linenum">2250</span></a>  
<a name="l2251"><span class="linenum">2251</span></a>  <span class="comment">/**</span>
<a name="l2252"><span class="linenum">2252</span></a>  <span class="comment"> * Return a HTML element with the class &quot;accesshide&quot;, for accessibility.</span>
<a name="l2253"><span class="linenum">2253</span></a>  <span class="comment"> *</span>
<a name="l2254"><span class="linenum">2254</span></a>  <span class="comment"> * Please use cautiously - where possible, text should be visible!</span>
<a name="l2255"><span class="linenum">2255</span></a>  <span class="comment"> *</span>
<a name="l2256"><span class="linenum">2256</span></a>  <span class="comment"> * @param string $text Plain text.</span>
<a name="l2257"><span class="linenum">2257</span></a>  <span class="comment"> * @param string $elem Lowercase element name, default &quot;span&quot;.</span>
<a name="l2258"><span class="linenum">2258</span></a>  <span class="comment"> * @param string $class Additional classes for the element.</span>
<a name="l2259"><span class="linenum">2259</span></a>  <span class="comment"> * @param string $attrs Additional attributes string in the form, &quot;name='value' name2='value2'&quot;</span>
<a name="l2260"><span class="linenum">2260</span></a>  <span class="comment"> * @return string HTML string.</span>
<a name="l2261"><span class="linenum">2261</span></a>  <span class="comment"> */</span>
<a name="l2262"><span class="linenum">2262</span></a>  function <a class="function" onClick="logFunction('get_accesshide')" href="../_functions/get_accesshide.html" onMouseOver="funcPopup(event,'get_accesshide')">get_accesshide</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it6425" onMouseOver="hilite(6425)" onMouseOut="lolite()" onClick="logVariable('elem')" href="../_variables/elem.html">$elem</a>='span', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>='', <a class="var it314" onMouseOver="hilite(314)" onMouseOut="lolite()" onClick="logVariable('attrs')" href="../_variables/attrs.html">$attrs</a>='') {
<a name="l2263"><span class="linenum">2263</span></a>      return &quot;&lt;<a class="var it6425" onMouseOver="hilite(6425)" onMouseOut="lolite()" onClick="logVariable('elem')" href="../_variables/elem.html">$elem</a> class=\&quot;accesshide <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>\&quot; <a class="var it314" onMouseOver="hilite(314)" onMouseOut="lolite()" onClick="logVariable('attrs')" href="../_variables/attrs.html">$attrs</a>&gt;<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>&lt;/<a class="var it6425" onMouseOver="hilite(6425)" onMouseOut="lolite()" onClick="logVariable('elem')" href="../_variables/elem.html">$elem</a>&gt;&quot;;
<a name="l2264"><span class="linenum">2264</span></a>  }
<a name="l2265"><span class="linenum">2265</span></a>  
<a name="l2266"><span class="linenum">2266</span></a>  <span class="comment">/**</span>
<a name="l2267"><span class="linenum">2267</span></a>  <span class="comment"> * Return the breadcrumb trail navigation separator.</span>
<a name="l2268"><span class="linenum">2268</span></a>  <span class="comment"> *</span>
<a name="l2269"><span class="linenum">2269</span></a>  <span class="comment"> * @return string HTML string.</span>
<a name="l2270"><span class="linenum">2270</span></a>  <span class="comment"> */</span>
<a name="l2271"><span class="linenum">2271</span></a>  function <a class="function" onClick="logFunction('get_separator')" href="../_functions/get_separator.html" onMouseOver="funcPopup(event,'get_separator')">get_separator</a>() {
<a name="l2272"><span class="linenum">2272</span></a>  <span class="comment">    // Accessibility: the 'hidden' slash is preferred for screen readers.</span>
<a name="l2273"><span class="linenum">2273</span></a>      return ' '.<a class="function" onClick="logFunction('link_arrow_right')" href="../_functions/link_arrow_right.html" onMouseOver="funcPopup(event,'link_arrow_right')">link_arrow_right</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>='/', <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>='', <a class="var it18382" onMouseOver="hilite(18382)" onMouseOut="lolite()" onClick="logVariable('accesshide')" href="../_variables/accesshide.html">$accesshide</a>=true, 'sep').' ';
<a name="l2274"><span class="linenum">2274</span></a>  }
<a name="l2275"><span class="linenum">2275</span></a>  
<a name="l2276"><span class="linenum">2276</span></a>  <span class="comment">/**</span>
<a name="l2277"><span class="linenum">2277</span></a>  <span class="comment"> * Print (or return) a collapsible region, that has a caption that can be clicked to expand or collapse the region.</span>
<a name="l2278"><span class="linenum">2278</span></a>  <span class="comment"> *</span>
<a name="l2279"><span class="linenum">2279</span></a>  <span class="comment"> * If JavaScript is off, then the region will always be expanded.</span>
<a name="l2280"><span class="linenum">2280</span></a>  <span class="comment"> *</span>
<a name="l2281"><span class="linenum">2281</span></a>  <span class="comment"> * @param string $contents the contents of the box.</span>
<a name="l2282"><span class="linenum">2282</span></a>  <span class="comment"> * @param string $classes class names added to the div that is output.</span>
<a name="l2283"><span class="linenum">2283</span></a>  <span class="comment"> * @param string $id id added to the div that is output. Must not be blank.</span>
<a name="l2284"><span class="linenum">2284</span></a>  <span class="comment"> * @param string $caption text displayed at the top. Clicking on this will cause the region to expand or contract.</span>
<a name="l2285"><span class="linenum">2285</span></a>  <span class="comment"> * @param string $userpref the name of the user preference that stores the user's preferred default state.</span>
<a name="l2286"><span class="linenum">2286</span></a>  <span class="comment"> *      (May be blank if you do not wish the state to be persisted.</span>
<a name="l2287"><span class="linenum">2287</span></a>  <span class="comment"> * @param boolean $default Initial collapsed state to use if the user_preference it not set.</span>
<a name="l2288"><span class="linenum">2288</span></a>  <span class="comment"> * @param boolean $return if true, return the HTML as a string, rather than printing it.</span>
<a name="l2289"><span class="linenum">2289</span></a>  <span class="comment"> * @return string|void If $return is false, returns nothing, otherwise returns a string of HTML.</span>
<a name="l2290"><span class="linenum">2290</span></a>  <span class="comment"> */</span>
<a name="l2291"><span class="linenum">2291</span></a>  function <a class="function" onClick="logFunction('print_collapsible_region')" href="../_functions/print_collapsible_region.html" onMouseOver="funcPopup(event,'print_collapsible_region')">print_collapsible_region</a>(<a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a>, <a class="var it1465" onMouseOver="hilite(1465)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../_variables/classes.html">$classes</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it7270" onMouseOver="hilite(7270)" onMouseOut="lolite()" onClick="logVariable('caption')" href="../_variables/caption.html">$caption</a>, <a class="var it15791" onMouseOver="hilite(15791)" onMouseOut="lolite()" onClick="logVariable('userpref')" href="../_variables/userpref.html">$userpref</a> = '', <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a> = false, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = false) {
<a name="l2292"><span class="linenum">2292</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>  = <a class="function" onClick="logFunction('print_collapsible_region_start')" href="../_functions/print_collapsible_region_start.html" onMouseOver="funcPopup(event,'print_collapsible_region_start')">print_collapsible_region_start</a>(<a class="var it1465" onMouseOver="hilite(1465)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../_variables/classes.html">$classes</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it7270" onMouseOver="hilite(7270)" onMouseOut="lolite()" onClick="logVariable('caption')" href="../_variables/caption.html">$caption</a>, <a class="var it15791" onMouseOver="hilite(15791)" onMouseOut="lolite()" onClick="logVariable('userpref')" href="../_variables/userpref.html">$userpref</a>, <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a>, true);
<a name="l2293"><span class="linenum">2293</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a>;
<a name="l2294"><span class="linenum">2294</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="function" onClick="logFunction('print_collapsible_region_end')" href="../_functions/print_collapsible_region_end.html" onMouseOver="funcPopup(event,'print_collapsible_region_end')">print_collapsible_region_end</a>(true);
<a name="l2295"><span class="linenum">2295</span></a>  
<a name="l2296"><span class="linenum">2296</span></a>      if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>) {
<a name="l2297"><span class="linenum">2297</span></a>          return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2298"><span class="linenum">2298</span></a>      } else {
<a name="l2299"><span class="linenum">2299</span></a>          echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2300"><span class="linenum">2300</span></a>      }
<a name="l2301"><span class="linenum">2301</span></a>  }
<a name="l2302"><span class="linenum">2302</span></a>  
<a name="l2303"><span class="linenum">2303</span></a>  <span class="comment">/**</span>
<a name="l2304"><span class="linenum">2304</span></a>  <span class="comment"> * Print (or return) the start of a collapsible region</span>
<a name="l2305"><span class="linenum">2305</span></a>  <span class="comment"> *</span>
<a name="l2306"><span class="linenum">2306</span></a>  <span class="comment"> * The collapsibleregion has a caption that can be clicked to expand or collapse the region. If JavaScript is off, then the region</span>
<a name="l2307"><span class="linenum">2307</span></a>  <span class="comment"> * will always be expanded.</span>
<a name="l2308"><span class="linenum">2308</span></a>  <span class="comment"> *</span>
<a name="l2309"><span class="linenum">2309</span></a>  <span class="comment"> * @param string $classes class names added to the div that is output.</span>
<a name="l2310"><span class="linenum">2310</span></a>  <span class="comment"> * @param string $id id added to the div that is output. Must not be blank.</span>
<a name="l2311"><span class="linenum">2311</span></a>  <span class="comment"> * @param string $caption text displayed at the top. Clicking on this will cause the region to expand or contract.</span>
<a name="l2312"><span class="linenum">2312</span></a>  <span class="comment"> * @param string $userpref the name of the user preference that stores the user's preferred default state.</span>
<a name="l2313"><span class="linenum">2313</span></a>  <span class="comment"> *      (May be blank if you do not wish the state to be persisted.</span>
<a name="l2314"><span class="linenum">2314</span></a>  <span class="comment"> * @param boolean $default Initial collapsed state to use if the user_preference it not set.</span>
<a name="l2315"><span class="linenum">2315</span></a>  <span class="comment"> * @param boolean $return if true, return the HTML as a string, rather than printing it.</span>
<a name="l2316"><span class="linenum">2316</span></a>  <span class="comment"> * @return string|void if $return is false, returns nothing, otherwise returns a string of HTML.</span>
<a name="l2317"><span class="linenum">2317</span></a>  <span class="comment"> */</span>
<a name="l2318"><span class="linenum">2318</span></a>  function <a class="function" onClick="logFunction('print_collapsible_region_start')" href="../_functions/print_collapsible_region_start.html" onMouseOver="funcPopup(event,'print_collapsible_region_start')">print_collapsible_region_start</a>(<a class="var it1465" onMouseOver="hilite(1465)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../_variables/classes.html">$classes</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it7270" onMouseOver="hilite(7270)" onMouseOut="lolite()" onClick="logVariable('caption')" href="../_variables/caption.html">$caption</a>, <a class="var it15791" onMouseOver="hilite(15791)" onMouseOut="lolite()" onClick="logVariable('userpref')" href="../_variables/userpref.html">$userpref</a> = '', <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a> = false, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = false) {
<a name="l2319"><span class="linenum">2319</span></a>      global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l2320"><span class="linenum">2320</span></a>  
<a name="l2321"><span class="linenum">2321</span></a>  <span class="comment">    // Work out the initial state.</span>
<a name="l2322"><span class="linenum">2322</span></a>      if (!empty(<a class="var it15791" onMouseOver="hilite(15791)" onMouseOut="lolite()" onClick="logVariable('userpref')" href="../_variables/userpref.html">$userpref</a>) and <a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it15791" onMouseOver="hilite(15791)" onMouseOut="lolite()" onClick="logVariable('userpref')" href="../_variables/userpref.html">$userpref</a>)) {
<a name="l2323"><span class="linenum">2323</span></a>          <a class="function" onClick="logFunction('user_preference_allow_ajax_update')" href="../_functions/user_preference_allow_ajax_update.html" onMouseOver="funcPopup(event,'user_preference_allow_ajax_update')">user_preference_allow_ajax_update</a>(<a class="var it15791" onMouseOver="hilite(15791)" onMouseOut="lolite()" onClick="logVariable('userpref')" href="../_variables/userpref.html">$userpref</a>, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l2324"><span class="linenum">2324</span></a>          <a class="var it1306" onMouseOver="hilite(1306)" onMouseOut="lolite()" onClick="logVariable('collapsed')" href="../_variables/collapsed.html">$collapsed</a> = <a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>(<a class="var it15791" onMouseOver="hilite(15791)" onMouseOut="lolite()" onClick="logVariable('userpref')" href="../_variables/userpref.html">$userpref</a>, <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a>);
<a name="l2325"><span class="linenum">2325</span></a>      } else {
<a name="l2326"><span class="linenum">2326</span></a>          <a class="var it1306" onMouseOver="hilite(1306)" onMouseOut="lolite()" onClick="logVariable('collapsed')" href="../_variables/collapsed.html">$collapsed</a> = <a class="var it777" onMouseOver="hilite(777)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a>;
<a name="l2327"><span class="linenum">2327</span></a>          <a class="var it15791" onMouseOver="hilite(15791)" onMouseOut="lolite()" onClick="logVariable('userpref')" href="../_variables/userpref.html">$userpref</a> = false;
<a name="l2328"><span class="linenum">2328</span></a>      }
<a name="l2329"><span class="linenum">2329</span></a>  
<a name="l2330"><span class="linenum">2330</span></a>      if (<a class="var it1306" onMouseOver="hilite(1306)" onMouseOut="lolite()" onClick="logVariable('collapsed')" href="../_variables/collapsed.html">$collapsed</a>) {
<a name="l2331"><span class="linenum">2331</span></a>          <a class="var it1465" onMouseOver="hilite(1465)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../_variables/classes.html">$classes</a> .= ' collapsed';
<a name="l2332"><span class="linenum">2332</span></a>      }
<a name="l2333"><span class="linenum">2333</span></a>  
<a name="l2334"><span class="linenum">2334</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = '';
<a name="l2335"><span class="linenum">2335</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= '&lt;div id=&quot;' . <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> . '&quot; class=&quot;collapsibleregion ' . <a class="var it1465" onMouseOver="hilite(1465)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../_variables/classes.html">$classes</a> . '&quot;&gt;';
<a name="l2336"><span class="linenum">2336</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= '&lt;div id=&quot;' . <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> . '_sizer&quot;&gt;';
<a name="l2337"><span class="linenum">2337</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= '&lt;div id=&quot;' . <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> . '_caption&quot; class=&quot;collapsibleregioncaption&quot;&gt;';
<a name="l2338"><span class="linenum">2338</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="var it7270" onMouseOver="hilite(7270)" onMouseOut="lolite()" onClick="logVariable('caption')" href="../_variables/caption.html">$caption</a> . ' ';
<a name="l2339"><span class="linenum">2339</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= '&lt;/div&gt;&lt;div id=&quot;' . <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> . '_inner&quot; class=&quot;collapsibleregioninner&quot;&gt;';
<a name="l2340"><span class="linenum">2340</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('js_init_call')" href="../_functions/js_init_call.html" onMouseOver="funcPopup(event,'js_init_call')">js_init_call</a>('M.util.init_collapsible_region', array(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>, <a class="var it15791" onMouseOver="hilite(15791)" onMouseOut="lolite()" onClick="logVariable('userpref')" href="../_variables/userpref.html">$userpref</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('clicktohideshow')));
<a name="l2341"><span class="linenum">2341</span></a>  
<a name="l2342"><span class="linenum">2342</span></a>      if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>) {
<a name="l2343"><span class="linenum">2343</span></a>          return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2344"><span class="linenum">2344</span></a>      } else {
<a name="l2345"><span class="linenum">2345</span></a>          echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2346"><span class="linenum">2346</span></a>      }
<a name="l2347"><span class="linenum">2347</span></a>  }
<a name="l2348"><span class="linenum">2348</span></a>  
<a name="l2349"><span class="linenum">2349</span></a>  <span class="comment">/**</span>
<a name="l2350"><span class="linenum">2350</span></a>  <span class="comment"> * Close a region started with print_collapsible_region_start.</span>
<a name="l2351"><span class="linenum">2351</span></a>  <span class="comment"> *</span>
<a name="l2352"><span class="linenum">2352</span></a>  <span class="comment"> * @param boolean $return if true, return the HTML as a string, rather than printing it.</span>
<a name="l2353"><span class="linenum">2353</span></a>  <span class="comment"> * @return string|void if $return is false, returns nothing, otherwise returns a string of HTML.</span>
<a name="l2354"><span class="linenum">2354</span></a>  <span class="comment"> */</span>
<a name="l2355"><span class="linenum">2355</span></a>  function <a class="function" onClick="logFunction('print_collapsible_region_end')" href="../_functions/print_collapsible_region_end.html" onMouseOver="funcPopup(event,'print_collapsible_region_end')">print_collapsible_region_end</a>(<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = false) {
<a name="l2356"><span class="linenum">2356</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = '&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;';
<a name="l2357"><span class="linenum">2357</span></a>  
<a name="l2358"><span class="linenum">2358</span></a>      if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>) {
<a name="l2359"><span class="linenum">2359</span></a>          return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2360"><span class="linenum">2360</span></a>      } else {
<a name="l2361"><span class="linenum">2361</span></a>          echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2362"><span class="linenum">2362</span></a>      }
<a name="l2363"><span class="linenum">2363</span></a>  }
<a name="l2364"><span class="linenum">2364</span></a>  
<a name="l2365"><span class="linenum">2365</span></a>  <span class="comment">/**</span>
<a name="l2366"><span class="linenum">2366</span></a>  <span class="comment"> * Print a specified group's avatar.</span>
<a name="l2367"><span class="linenum">2367</span></a>  <span class="comment"> *</span>
<a name="l2368"><span class="linenum">2368</span></a>  <span class="comment"> * @param array|stdClass $group A single {@link group} object OR array of groups.</span>
<a name="l2369"><span class="linenum">2369</span></a>  <span class="comment"> * @param int $courseid The course ID.</span>
<a name="l2370"><span class="linenum">2370</span></a>  <span class="comment"> * @param boolean $large Default small picture, or large.</span>
<a name="l2371"><span class="linenum">2371</span></a>  <span class="comment"> * @param boolean $return If false print picture, otherwise return the output as string</span>
<a name="l2372"><span class="linenum">2372</span></a>  <span class="comment"> * @param boolean $link Enclose image in a link to view specified course?</span>
<a name="l2373"><span class="linenum">2373</span></a>  <span class="comment"> * @return string|void Depending on the setting of $return</span>
<a name="l2374"><span class="linenum">2374</span></a>  <span class="comment"> */</span>
<a name="l2375"><span class="linenum">2375</span></a>  function <a class="function" onClick="logFunction('print_group_picture')" href="../_functions/print_group_picture.html" onMouseOver="funcPopup(event,'print_group_picture')">print_group_picture</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it14610" onMouseOver="hilite(14610)" onMouseOut="lolite()" onClick="logVariable('large')" href="../_variables/large.html">$large</a>=false, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>=false, <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>=true) {
<a name="l2376"><span class="linenum">2376</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2377"><span class="linenum">2377</span></a>  
<a name="l2378"><span class="linenum">2378</span></a>      if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>)) {
<a name="l2379"><span class="linenum">2379</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = '';
<a name="l2380"><span class="linenum">2380</span></a>          foreach (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a> as <a class="var it2829" onMouseOver="hilite(2829)" onMouseOut="lolite()" onClick="logVariable('g')" href="../_variables/g.html">$g</a>) {
<a name="l2381"><span class="linenum">2381</span></a>              <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="function" onClick="logFunction('print_group_picture')" href="../_functions/print_group_picture.html" onMouseOver="funcPopup(event,'print_group_picture')">print_group_picture</a>(<a class="var it2829" onMouseOver="hilite(2829)" onMouseOut="lolite()" onClick="logVariable('g')" href="../_variables/g.html">$g</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it14610" onMouseOver="hilite(14610)" onMouseOut="lolite()" onClick="logVariable('large')" href="../_variables/large.html">$large</a>, true, <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>);
<a name="l2382"><span class="linenum">2382</span></a>          }
<a name="l2383"><span class="linenum">2383</span></a>          if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>) {
<a name="l2384"><span class="linenum">2384</span></a>              return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2385"><span class="linenum">2385</span></a>          } else {
<a name="l2386"><span class="linenum">2386</span></a>              echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2387"><span class="linenum">2387</span></a>              return;
<a name="l2388"><span class="linenum">2388</span></a>          }
<a name="l2389"><span class="linenum">2389</span></a>      }
<a name="l2390"><span class="linenum">2390</span></a>  
<a name="l2391"><span class="linenum">2391</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l2392"><span class="linenum">2392</span></a>  
<a name="l2393"><span class="linenum">2393</span></a>  <span class="comment">    // If there is no picture, do nothing.</span>
<a name="l2394"><span class="linenum">2394</span></a>      if (!<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('picture')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/picture.html">picture</a>) {
<a name="l2395"><span class="linenum">2395</span></a>          return '';
<a name="l2396"><span class="linenum">2396</span></a>      }
<a name="l2397"><span class="linenum">2397</span></a>  
<a name="l2398"><span class="linenum">2398</span></a>  <span class="comment">    // If picture is hidden, only show to those with course:managegroups.</span>
<a name="l2399"><span class="linenum">2399</span></a>      if (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('hidepicture')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/hidepicture.html">hidepicture</a> and !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:managegroups', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l2400"><span class="linenum">2400</span></a>          return '';
<a name="l2401"><span class="linenum">2401</span></a>      }
<a name="l2402"><span class="linenum">2402</span></a>  
<a name="l2403"><span class="linenum">2403</span></a>      if (<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a> or <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l2404"><span class="linenum">2404</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = '&lt;a href=&quot;'. <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> .'/user/index.php?id='. <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> .'&amp;amp;group='. <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/id.html">id</a> .'&quot;&gt;';
<a name="l2405"><span class="linenum">2405</span></a>      } else {
<a name="l2406"><span class="linenum">2406</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = '';
<a name="l2407"><span class="linenum">2407</span></a>      }
<a name="l2408"><span class="linenum">2408</span></a>      if (<a class="var it14610" onMouseOver="hilite(14610)" onMouseOut="lolite()" onClick="logVariable('large')" href="../_variables/large.html">$large</a>) {
<a name="l2409"><span class="linenum">2409</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> = 'f1';
<a name="l2410"><span class="linenum">2410</span></a>      } else {
<a name="l2411"><span class="linenum">2411</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> = 'f2';
<a name="l2412"><span class="linenum">2412</span></a>      }
<a name="l2413"><span class="linenum">2413</span></a>  
<a name="l2414"><span class="linenum">2414</span></a>      <a class="var it18386" onMouseOver="hilite(18386)" onMouseOut="lolite()" onClick="logVariable('grouppictureurl')" href="../_variables/grouppictureurl.html">$grouppictureurl</a> = <a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>::<a class="function" onClick="logFunction('make_pluginfile_url')" href="../_functions/make_pluginfile_url.html" onMouseOver="funcPopup(event,'make_pluginfile_url')">make_pluginfile_url</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'group', 'icon', <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('id')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, '/', <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>);
<a name="l2415"><span class="linenum">2415</span></a>      <a class="var it18386" onMouseOver="hilite(18386)" onMouseOut="lolite()" onClick="logVariable('grouppictureurl')" href="../_variables/grouppictureurl.html">$grouppictureurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('rev', <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('picture')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/picture.html">picture</a>);
<a name="l2416"><span class="linenum">2416</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= '&lt;img class=&quot;grouppicture&quot; src=&quot;'.<a class="var it18386" onMouseOver="hilite(18386)" onMouseOut="lolite()" onClick="logVariable('grouppictureurl')" href="../_variables/grouppictureurl.html">$grouppictureurl</a>.'&quot;'.
<a name="l2417"><span class="linenum">2417</span></a>          ' alt=&quot;'.<a class="function" onClick="logFunction('s')" href="../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('group').' '.<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('name')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/name.html">name</a>).'&quot; title=&quot;'.<a class="function" onClick="logFunction('s')" href="../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('group')" href="../_variables/group.html">$group</a>-&gt;<a onClick="logVariable('name')" class="var it42906" onMouseOver="hilite(42906)" onMouseOut="lolite()" href="../_variables/name.html">name</a>).'&quot;/&gt;';
<a name="l2418"><span class="linenum">2418</span></a>  
<a name="l2419"><span class="linenum">2419</span></a>      if (<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a> or <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l2420"><span class="linenum">2420</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= '&lt;/a&gt;';
<a name="l2421"><span class="linenum">2421</span></a>      }
<a name="l2422"><span class="linenum">2422</span></a>  
<a name="l2423"><span class="linenum">2423</span></a>      if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>) {
<a name="l2424"><span class="linenum">2424</span></a>          return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2425"><span class="linenum">2425</span></a>      } else {
<a name="l2426"><span class="linenum">2426</span></a>          echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2427"><span class="linenum">2427</span></a>      }
<a name="l2428"><span class="linenum">2428</span></a>  }
<a name="l2429"><span class="linenum">2429</span></a>  
<a name="l2430"><span class="linenum">2430</span></a>  
<a name="l2431"><span class="linenum">2431</span></a>  <span class="comment">/**</span>
<a name="l2432"><span class="linenum">2432</span></a>  <span class="comment"> * Display a recent activity note</span>
<a name="l2433"><span class="linenum">2433</span></a>  <span class="comment"> *</span>
<a name="l2434"><span class="linenum">2434</span></a>  <span class="comment"> * @staticvar string $strftimerecent</span>
<a name="l2435"><span class="linenum">2435</span></a>  <span class="comment"> * @param int $time A timestamp int.</span>
<a name="l2436"><span class="linenum">2436</span></a>  <span class="comment"> * @param stdClass $user A user object from the database.</span>
<a name="l2437"><span class="linenum">2437</span></a>  <span class="comment"> * @param string $text Text for display for the note</span>
<a name="l2438"><span class="linenum">2438</span></a>  <span class="comment"> * @param string $link The link to wrap around the text</span>
<a name="l2439"><span class="linenum">2439</span></a>  <span class="comment"> * @param bool $return If set to true the HTML is returned rather than echo'd</span>
<a name="l2440"><span class="linenum">2440</span></a>  <span class="comment"> * @param string $viewfullnames</span>
<a name="l2441"><span class="linenum">2441</span></a>  <span class="comment"> * @return string If $retrun was true returns HTML for a recent activity notice.</span>
<a name="l2442"><span class="linenum">2442</span></a>  <span class="comment"> */</span>
<a name="l2443"><span class="linenum">2443</span></a>  function <a class="function" onClick="logFunction('print_recent_activity_note')" href="../_functions/print_recent_activity_note.html" onMouseOver="funcPopup(event,'print_recent_activity_note')">print_recent_activity_note</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>=false, <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../_variables/viewfullnames.html">$viewfullnames</a>=null) {
<a name="l2444"><span class="linenum">2444</span></a>      static <a class="var it12571" onMouseOver="hilite(12571)" onMouseOut="lolite()" onClick="logVariable('strftimerecent')" href="../_variables/strftimerecent.html">$strftimerecent</a> = null;
<a name="l2445"><span class="linenum">2445</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = '';
<a name="l2446"><span class="linenum">2446</span></a>  
<a name="l2447"><span class="linenum">2447</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../_variables/viewfullnames.html">$viewfullnames</a>)) {
<a name="l2448"><span class="linenum">2448</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l2449"><span class="linenum">2449</span></a>          <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../_variables/viewfullnames.html">$viewfullnames</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l2450"><span class="linenum">2450</span></a>      }
<a name="l2451"><span class="linenum">2451</span></a>  
<a name="l2452"><span class="linenum">2452</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it12571" onMouseOver="hilite(12571)" onMouseOut="lolite()" onClick="logVariable('strftimerecent')" href="../_variables/strftimerecent.html">$strftimerecent</a>)) {
<a name="l2453"><span class="linenum">2453</span></a>          <a class="var it12571" onMouseOver="hilite(12571)" onMouseOut="lolite()" onClick="logVariable('strftimerecent')" href="../_variables/strftimerecent.html">$strftimerecent</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimerecent');
<a name="l2454"><span class="linenum">2454</span></a>      }
<a name="l2455"><span class="linenum">2455</span></a>  
<a name="l2456"><span class="linenum">2456</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= '&lt;div class=&quot;head&quot;&gt;';
<a name="l2457"><span class="linenum">2457</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= '&lt;div class=&quot;date&quot;&gt;'.<a class="function" onClick="logFunction('userdate')" href="../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('time')" href="../_variables/time.html">$time</a>, <a class="var it12571" onMouseOver="hilite(12571)" onMouseOut="lolite()" onClick="logVariable('strftimerecent')" href="../_variables/strftimerecent.html">$strftimerecent</a>).'&lt;/div&gt;';
<a name="l2458"><span class="linenum">2458</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= '&lt;div class=&quot;name&quot;&gt;'.<a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../_variables/viewfullnames.html">$viewfullnames</a>).'&lt;/div&gt;';
<a name="l2459"><span class="linenum">2459</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= '&lt;/div&gt;';
<a name="l2460"><span class="linenum">2460</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= '&lt;div class=&quot;info&quot;&gt;&lt;a href=&quot;'.<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, true).'&lt;/a&gt;&lt;/div&gt;';
<a name="l2461"><span class="linenum">2461</span></a>  
<a name="l2462"><span class="linenum">2462</span></a>      if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>) {
<a name="l2463"><span class="linenum">2463</span></a>          return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2464"><span class="linenum">2464</span></a>      } else {
<a name="l2465"><span class="linenum">2465</span></a>          echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2466"><span class="linenum">2466</span></a>      }
<a name="l2467"><span class="linenum">2467</span></a>  }
<a name="l2468"><span class="linenum">2468</span></a>  
<a name="l2469"><span class="linenum">2469</span></a>  <span class="comment">/**</span>
<a name="l2470"><span class="linenum">2470</span></a>  <span class="comment"> * Returns a popup menu with course activity modules</span>
<a name="l2471"><span class="linenum">2471</span></a>  <span class="comment"> *</span>
<a name="l2472"><span class="linenum">2472</span></a>  <span class="comment"> * Given a course this function returns a small popup menu with all the course activity modules in it, as a navigation menu</span>
<a name="l2473"><span class="linenum">2473</span></a>  <span class="comment"> * outputs a simple list structure in XHTML.</span>
<a name="l2474"><span class="linenum">2474</span></a>  <span class="comment"> * The data is taken from the serialised array stored in the course record.</span>
<a name="l2475"><span class="linenum">2475</span></a>  <span class="comment"> *</span>
<a name="l2476"><span class="linenum">2476</span></a>  <span class="comment"> * @param course $course A {@link $COURSE} object.</span>
<a name="l2477"><span class="linenum">2477</span></a>  <span class="comment"> * @param array $sections</span>
<a name="l2478"><span class="linenum">2478</span></a>  <span class="comment"> * @param course_modinfo $modinfo</span>
<a name="l2479"><span class="linenum">2479</span></a>  <span class="comment"> * @param string $strsection</span>
<a name="l2480"><span class="linenum">2480</span></a>  <span class="comment"> * @param string $strjumpto</span>
<a name="l2481"><span class="linenum">2481</span></a>  <span class="comment"> * @param int $width</span>
<a name="l2482"><span class="linenum">2482</span></a>  <span class="comment"> * @param string $cmid</span>
<a name="l2483"><span class="linenum">2483</span></a>  <span class="comment"> * @return string The HTML block</span>
<a name="l2484"><span class="linenum">2484</span></a>  <span class="comment"> */</span>
<a name="l2485"><span class="linenum">2485</span></a>  function <a class="function" onClick="logFunction('navmenulist')" href="../_functions/navmenulist.html" onMouseOver="funcPopup(event,'navmenulist')">navmenulist</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>, <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>, <a class="var it18387" onMouseOver="hilite(18387)" onMouseOut="lolite()" onClick="logVariable('strsection')" href="../_variables/strsection.html">$strsection</a>, <a class="var it18388" onMouseOver="hilite(18388)" onMouseOut="lolite()" onClick="logVariable('strjumpto')" href="../_variables/strjumpto.html">$strjumpto</a>, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../_variables/width.html">$width</a>=50, <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>=0) {
<a name="l2486"><span class="linenum">2486</span></a>  
<a name="l2487"><span class="linenum">2487</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l2488"><span class="linenum">2488</span></a>  
<a name="l2489"><span class="linenum">2489</span></a>      <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> = -1;
<a name="l2490"><span class="linenum">2490</span></a>      <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a> = array();
<a name="l2491"><span class="linenum">2491</span></a>      <a class="var it18389" onMouseOver="hilite(18389)" onMouseOut="lolite()" onClick="logVariable('doneheading')" href="../_variables/doneheading.html">$doneheading</a> = false;
<a name="l2492"><span class="linenum">2492</span></a>  
<a name="l2493"><span class="linenum">2493</span></a>      <a class="var it5694" onMouseOver="hilite(5694)" onMouseOut="lolite()" onClick="logVariable('courseformatoptions')" href="../_variables/courseformatoptions.html">$courseformatoptions</a> = <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)-&gt;<a class="function" onClick="logFunction('get_format_options')" href="../_functions/get_format_options.html" onMouseOver="funcPopup(event,'get_format_options')">get_format_options</a>();
<a name="l2494"><span class="linenum">2494</span></a>      <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2495"><span class="linenum">2495</span></a>  
<a name="l2496"><span class="linenum">2496</span></a>      <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>[] = '&lt;ul class=&quot;navmenulist&quot;&gt;&lt;li class=&quot;jumpto section&quot;&gt;&lt;span&gt;'.<a class="var it18388" onMouseOver="hilite(18388)" onMouseOut="lolite()" onClick="logVariable('strjumpto')" href="../_variables/strjumpto.html">$strjumpto</a>.'&lt;/span&gt;&lt;ul&gt;';
<a name="l2497"><span class="linenum">2497</span></a>      foreach (<a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('cms')" class="var it43006" onMouseOver="hilite(43006)" onMouseOut="lolite()" href="../_variables/cms.html">cms</a> as <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>) {
<a name="l2498"><span class="linenum">2498</span></a>          if (!<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a class="function" onClick="logFunction('has_view')" href="../_functions/has_view.html" onMouseOver="funcPopup(event,'has_view')">has_view</a>()) {
<a name="l2499"><span class="linenum">2499</span></a>  <span class="comment">            // Don't show modules which you can't link to!</span>
<a name="l2500"><span class="linenum">2500</span></a>              continue;
<a name="l2501"><span class="linenum">2501</span></a>          }
<a name="l2502"><span class="linenum">2502</span></a>  
<a name="l2503"><span class="linenum">2503</span></a>  <span class="comment">        // For course formats using 'numsections' do not show extra sections.</span>
<a name="l2504"><span class="linenum">2504</span></a>          if (isset(<a class="var it5694" onMouseOver="hilite(5694)" onMouseOut="lolite()" onClick="logVariable('courseformatoptions')" href="../_variables/courseformatoptions.html">$courseformatoptions</a>['numsections']) &amp;&amp; <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/sectionnum.html">sectionnum</a> &gt; <a class="var it5694" onMouseOver="hilite(5694)" onMouseOut="lolite()" onClick="logVariable('courseformatoptions')" href="../_variables/courseformatoptions.html">$courseformatoptions</a>['numsections']) {
<a name="l2505"><span class="linenum">2505</span></a>              break;
<a name="l2506"><span class="linenum">2506</span></a>          }
<a name="l2507"><span class="linenum">2507</span></a>  
<a name="l2508"><span class="linenum">2508</span></a>          if (!<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('uservisible')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/uservisible.html">uservisible</a>) { // Do not icnlude empty sections at all.
<a name="l2509"><span class="linenum">2509</span></a>              continue;
<a name="l2510"><span class="linenum">2510</span></a>          }
<a name="l2511"><span class="linenum">2511</span></a>  
<a name="l2512"><span class="linenum">2512</span></a>          if (<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/sectionnum.html">sectionnum</a> &gt;= 0 and <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> != <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/sectionnum.html">sectionnum</a>) {
<a name="l2513"><span class="linenum">2513</span></a>              <a class="var it3586" onMouseOver="hilite(3586)" onMouseOut="lolite()" onClick="logVariable('thissection')" href="../_variables/thissection.html">$thissection</a> = <a class="var it5385" onMouseOver="hilite(5385)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/sectionnum.html">sectionnum</a>];
<a name="l2514"><span class="linenum">2514</span></a>  
<a name="l2515"><span class="linenum">2515</span></a>              if (<a class="var it3586" onMouseOver="hilite(3586)" onMouseOut="lolite()" onClick="logVariable('thissection')" href="../_variables/thissection.html">$thissection</a>-&gt;<a onClick="logVariable('visible')" class="var it44368" onMouseOver="hilite(44368)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> or
<a name="l2516"><span class="linenum">2516</span></a>                      (isset(<a class="var it5694" onMouseOver="hilite(5694)" onMouseOut="lolite()" onClick="logVariable('courseformatoptions')" href="../_variables/courseformatoptions.html">$courseformatoptions</a>['hiddensections']) and !<a class="var it5694" onMouseOver="hilite(5694)" onMouseOut="lolite()" onClick="logVariable('courseformatoptions')" href="../_variables/courseformatoptions.html">$courseformatoptions</a>['hiddensections']) or
<a name="l2517"><span class="linenum">2517</span></a>                      <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewhiddensections', <a class="var it683" onMouseOver="hilite(683)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l2518"><span class="linenum">2518</span></a>                  <a class="var it3586" onMouseOver="hilite(3586)" onMouseOut="lolite()" onClick="logVariable('thissection')" href="../_variables/thissection.html">$thissection</a>-&gt;<a onClick="logVariable('summary')" class="var it44368" onMouseOver="hilite(44368)" onMouseOut="lolite()" href="../_variables/summary.html">summary</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it3586" onMouseOver="hilite(3586)" onMouseOut="lolite()" onClick="logVariable('thissection')" href="../_variables/thissection.html">$thissection</a>-&gt;<a onClick="logVariable('summary')" class="var it44368" onMouseOver="hilite(44368)" onMouseOut="lolite()" href="../_variables/summary.html">summary</a>, true));
<a name="l2519"><span class="linenum">2519</span></a>                  if (!<a class="var it18389" onMouseOver="hilite(18389)" onMouseOut="lolite()" onClick="logVariable('doneheading')" href="../_variables/doneheading.html">$doneheading</a>) {
<a name="l2520"><span class="linenum">2520</span></a>                      <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>[] = '&lt;/ul&gt;&lt;/li&gt;';
<a name="l2521"><span class="linenum">2521</span></a>                  }
<a name="l2522"><span class="linenum">2522</span></a>                  if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/format.html">format</a> == 'weeks' or empty(<a class="var it3586" onMouseOver="hilite(3586)" onMouseOut="lolite()" onClick="logVariable('thissection')" href="../_variables/thissection.html">$thissection</a>-&gt;<a onClick="logVariable('summary')" class="var it44368" onMouseOver="hilite(44368)" onMouseOut="lolite()" href="../_variables/summary.html">summary</a>)) {
<a name="l2523"><span class="linenum">2523</span></a>                      <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a> = <a class="var it18387" onMouseOver="hilite(18387)" onMouseOut="lolite()" onClick="logVariable('strsection')" href="../_variables/strsection.html">$strsection</a> .&quot; &quot;. <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/sectionnum.html">sectionnum</a>;
<a name="l2524"><span class="linenum">2524</span></a>                  } else {
<a name="l2525"><span class="linenum">2525</span></a>                      if (<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it3586" onMouseOver="hilite(3586)" onMouseOut="lolite()" onClick="logVariable('thissection')" href="../_variables/thissection.html">$thissection</a>-&gt;<a onClick="logVariable('summary')" class="var it44368" onMouseOver="hilite(44368)" onMouseOut="lolite()" href="../_variables/summary.html">summary</a>) &lt; (<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../_variables/width.html">$width</a>-3)) {
<a name="l2526"><span class="linenum">2526</span></a>                          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a> = <a class="var it3586" onMouseOver="hilite(3586)" onMouseOut="lolite()" onClick="logVariable('thissection')" href="../_variables/thissection.html">$thissection</a>-&gt;<a onClick="logVariable('summary')" class="var it44368" onMouseOver="hilite(44368)" onMouseOut="lolite()" href="../_variables/summary.html">summary</a>;
<a name="l2527"><span class="linenum">2527</span></a>                      } else {
<a name="l2528"><span class="linenum">2528</span></a>                          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a> = <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it3586" onMouseOver="hilite(3586)" onMouseOut="lolite()" onClick="logVariable('thissection')" href="../_variables/thissection.html">$thissection</a>-&gt;<a onClick="logVariable('summary')" class="var it44368" onMouseOver="hilite(44368)" onMouseOut="lolite()" href="../_variables/summary.html">summary</a>, 0, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../_variables/width.html">$width</a>).'...';
<a name="l2529"><span class="linenum">2529</span></a>                      }
<a name="l2530"><span class="linenum">2530</span></a>                  }
<a name="l2531"><span class="linenum">2531</span></a>                  <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>[] = '&lt;li class=&quot;section&quot;&gt;&lt;span&gt;'.<a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../_variables/item.html">$item</a>.'&lt;/span&gt;';
<a name="l2532"><span class="linenum">2532</span></a>                  <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>[] = '&lt;ul&gt;';
<a name="l2533"><span class="linenum">2533</span></a>                  <a class="var it18389" onMouseOver="hilite(18389)" onMouseOut="lolite()" onClick="logVariable('doneheading')" href="../_variables/doneheading.html">$doneheading</a> = true;
<a name="l2534"><span class="linenum">2534</span></a>  
<a name="l2535"><span class="linenum">2535</span></a>                  <a class="var it989" onMouseOver="hilite(989)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> = <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/sectionnum.html">sectionnum</a>;
<a name="l2536"><span class="linenum">2536</span></a>              } else {
<a name="l2537"><span class="linenum">2537</span></a>  <span class="comment">                // No activities from this hidden section shown.</span>
<a name="l2538"><span class="linenum">2538</span></a>                  continue;
<a name="l2539"><span class="linenum">2539</span></a>              }
<a name="l2540"><span class="linenum">2540</span></a>          }
<a name="l2541"><span class="linenum">2541</span></a>  
<a name="l2542"><span class="linenum">2542</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('modname')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a> .'/view.php?id='. <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2543"><span class="linenum">2543</span></a>          <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a> ,true));
<a name="l2544"><span class="linenum">2544</span></a>          if (<a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a>) &gt; (<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../_variables/width.html">$width</a>+5)) {
<a name="l2545"><span class="linenum">2545</span></a>              <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, 0, <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../_variables/width.html">$width</a>).'...';
<a name="l2546"><span class="linenum">2546</span></a>          }
<a name="l2547"><span class="linenum">2547</span></a>          if (!<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('visible')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l2548"><span class="linenum">2548</span></a>              <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = '('.<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a>.')';
<a name="l2549"><span class="linenum">2549</span></a>          }
<a name="l2550"><span class="linenum">2550</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> = 'activity '.<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('modname')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>;
<a name="l2551"><span class="linenum">2551</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a> .= (<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a> == <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('id')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) ? ' selected' : '';
<a name="l2552"><span class="linenum">2552</span></a>          <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>[] = '&lt;li class=&quot;'.<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>.'&quot;&gt;'.
<a name="l2553"><span class="linenum">2553</span></a>                    '&lt;img src=&quot;'.<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('icon', <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('modname')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>) . '&quot; alt=&quot;&quot; /&gt;'.
<a name="l2554"><span class="linenum">2554</span></a>                    '&lt;a href=&quot;'.<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>.'/mod/'.<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>.'&quot;&gt;'.<a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../_variables/mod.html">$mod</a>-&gt;<a onClick="logVariable('name')" class="var it43599" onMouseOver="hilite(43599)" onMouseOut="lolite()" href="../_variables/name.html">name</a>.'&lt;/a&gt;&lt;/li&gt;';
<a name="l2555"><span class="linenum">2555</span></a>      }
<a name="l2556"><span class="linenum">2556</span></a>  
<a name="l2557"><span class="linenum">2557</span></a>      if (<a class="var it18389" onMouseOver="hilite(18389)" onMouseOut="lolite()" onClick="logVariable('doneheading')" href="../_variables/doneheading.html">$doneheading</a>) {
<a name="l2558"><span class="linenum">2558</span></a>          <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>[] = '&lt;/ul&gt;&lt;/li&gt;';
<a name="l2559"><span class="linenum">2559</span></a>      }
<a name="l2560"><span class="linenum">2560</span></a>      <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>[] = '&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;';
<a name="l2561"><span class="linenum">2561</span></a>  
<a name="l2562"><span class="linenum">2562</span></a>      return <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot;\n&quot;, <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>);
<a name="l2563"><span class="linenum">2563</span></a>  }
<a name="l2564"><span class="linenum">2564</span></a>  
<a name="l2565"><span class="linenum">2565</span></a>  <span class="comment">/**</span>
<a name="l2566"><span class="linenum">2566</span></a>  <span class="comment"> * Prints a grade menu (as part of an existing form) with help showing all possible numerical grades and scales.</span>
<a name="l2567"><span class="linenum">2567</span></a>  <span class="comment"> *</span>
<a name="l2568"><span class="linenum">2568</span></a>  <span class="comment"> * @todo Finish documenting this function</span>
<a name="l2569"><span class="linenum">2569</span></a>  <span class="comment"> * @todo Deprecate: this is only used in a few contrib modules</span>
<a name="l2570"><span class="linenum">2570</span></a>  <span class="comment"> *</span>
<a name="l2571"><span class="linenum">2571</span></a>  <span class="comment"> * @param int $courseid The course ID</span>
<a name="l2572"><span class="linenum">2572</span></a>  <span class="comment"> * @param string $name</span>
<a name="l2573"><span class="linenum">2573</span></a>  <span class="comment"> * @param string $current</span>
<a name="l2574"><span class="linenum">2574</span></a>  <span class="comment"> * @param boolean $includenograde Include those with no grades</span>
<a name="l2575"><span class="linenum">2575</span></a>  <span class="comment"> * @param boolean $return If set to true returns rather than echo's</span>
<a name="l2576"><span class="linenum">2576</span></a>  <span class="comment"> * @return string|bool Depending on value of $return</span>
<a name="l2577"><span class="linenum">2577</span></a>  <span class="comment"> */</span>
<a name="l2578"><span class="linenum">2578</span></a>  function <a class="function" onClick="logFunction('print_grade_menu')" href="../_functions/print_grade_menu.html" onMouseOver="funcPopup(event,'print_grade_menu')">print_grade_menu</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>, <a class="var it18390" onMouseOver="hilite(18390)" onMouseOut="lolite()" onClick="logVariable('includenograde')" href="../_variables/includenograde.html">$includenograde</a>=true, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>=false) {
<a name="l2579"><span class="linenum">2579</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l2580"><span class="linenum">2580</span></a>  
<a name="l2581"><span class="linenum">2581</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = '';
<a name="l2582"><span class="linenum">2582</span></a>      <a class="var it18391" onMouseOver="hilite(18391)" onMouseOut="lolite()" onClick="logVariable('strscale')" href="../_variables/strscale.html">$strscale</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('scale');
<a name="l2583"><span class="linenum">2583</span></a>      <a class="var it18392" onMouseOver="hilite(18392)" onMouseOut="lolite()" onClick="logVariable('strscales')" href="../_variables/strscales.html">$strscales</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('scales');
<a name="l2584"><span class="linenum">2584</span></a>  
<a name="l2585"><span class="linenum">2585</span></a>      <a class="var it2459" onMouseOver="hilite(2459)" onMouseOut="lolite()" onClick="logVariable('scales')" href="../_variables/scales.html">$scales</a> = <a class="function" onClick="logFunction('get_scales_menu')" href="../_functions/get_scales_menu.html" onMouseOver="funcPopup(event,'get_scales_menu')">get_scales_menu</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l2586"><span class="linenum">2586</span></a>      foreach (<a class="var it2459" onMouseOver="hilite(2459)" onMouseOut="lolite()" onClick="logVariable('scales')" href="../_variables/scales.html">$scales</a> as <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> =&gt; <a class="var it18393" onMouseOver="hilite(18393)" onMouseOut="lolite()" onClick="logVariable('scalename')" href="../_variables/scalename.html">$scalename</a>) {
<a name="l2587"><span class="linenum">2587</span></a>          <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>[-<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>] = <a class="var it18391" onMouseOver="hilite(18391)" onMouseOut="lolite()" onClick="logVariable('strscale')" href="../_variables/strscale.html">$strscale</a> .': '. <a class="var it18393" onMouseOver="hilite(18393)" onMouseOut="lolite()" onClick="logVariable('scalename')" href="../_variables/scalename.html">$scalename</a>;
<a name="l2588"><span class="linenum">2588</span></a>      }
<a name="l2589"><span class="linenum">2589</span></a>      if (<a class="var it18390" onMouseOver="hilite(18390)" onMouseOut="lolite()" onClick="logVariable('includenograde')" href="../_variables/includenograde.html">$includenograde</a>) {
<a name="l2590"><span class="linenum">2590</span></a>          <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>[0] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('nograde');
<a name="l2591"><span class="linenum">2591</span></a>      }
<a name="l2592"><span class="linenum">2592</span></a>      for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>=100; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>&gt;=1; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>--) {
<a name="l2593"><span class="linenum">2593</span></a>          <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>] = <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>;
<a name="l2594"><span class="linenum">2594</span></a>      }
<a name="l2595"><span class="linenum">2595</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('select')" href="../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>(<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../_variables/grades.html">$grades</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>, false);
<a name="l2596"><span class="linenum">2596</span></a>  
<a name="l2597"><span class="linenum">2597</span></a>      <a class="var it18394" onMouseOver="hilite(18394)" onMouseOut="lolite()" onClick="logVariable('helppix')" href="../_variables/helppix.html">$helppix</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('help');
<a name="l2598"><span class="linenum">2598</span></a>      <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a> = '&lt;span class=&quot;helplink&quot;&gt;&lt;img class=&quot;iconhelp&quot; alt=&quot;'.<a class="var it18392" onMouseOver="hilite(18392)" onMouseOut="lolite()" onClick="logVariable('strscales')" href="../_variables/strscales.html">$strscales</a>.'&quot; src=&quot;'.<a class="var it18394" onMouseOver="hilite(18394)" onMouseOut="lolite()" onClick="logVariable('helppix')" href="../_variables/helppix.html">$helppix</a>.'&quot; /&gt;&lt;/span&gt;';
<a name="l2599"><span class="linenum">2599</span></a>      <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/scales.php.html">/course/scales.php</a>', array('id' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, 'list' =&gt; 1));
<a name="l2600"><span class="linenum">2600</span></a>      <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a> = <span class="keyword">new </span><a class="class" onClick="logClass('popup_action')" href="../_classes/popup_action.html" onMouseOver="classPopup(event,'popup_action')">popup_action</a>('click', <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>, 'ratingscales', array('height' =&gt; 400, 'width' =&gt; 500));
<a name="l2601"><span class="linenum">2601</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> .= <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('action_link')" href="../_functions/action_link.html" onMouseOver="funcPopup(event,'action_link')">action_link</a>(<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>, <a class="var it18395" onMouseOver="hilite(18395)" onMouseOut="lolite()" onClick="logVariable('linkobject')" href="../_variables/linkobject.html">$linkobject</a>, <a class="var it280" onMouseOver="hilite(280)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>, array('title' =&gt; <a class="var it18392" onMouseOver="hilite(18392)" onMouseOut="lolite()" onClick="logVariable('strscales')" href="../_variables/strscales.html">$strscales</a>));
<a name="l2602"><span class="linenum">2602</span></a>  
<a name="l2603"><span class="linenum">2603</span></a>      if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>) {
<a name="l2604"><span class="linenum">2604</span></a>          return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2605"><span class="linenum">2605</span></a>      } else {
<a name="l2606"><span class="linenum">2606</span></a>          echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2607"><span class="linenum">2607</span></a>      }
<a name="l2608"><span class="linenum">2608</span></a>  }
<a name="l2609"><span class="linenum">2609</span></a>  
<a name="l2610"><span class="linenum">2610</span></a>  <span class="comment">/**</span>
<a name="l2611"><span class="linenum">2611</span></a>  <span class="comment"> * Print an error to STDOUT and exit with a non-zero code. For commandline scripts.</span>
<a name="l2612"><span class="linenum">2612</span></a>  <span class="comment"> *</span>
<a name="l2613"><span class="linenum">2613</span></a>  <span class="comment"> * Default errorcode is 1.</span>
<a name="l2614"><span class="linenum">2614</span></a>  <span class="comment"> *</span>
<a name="l2615"><span class="linenum">2615</span></a>  <span class="comment"> * Very useful for perl-like error-handling:</span>
<a name="l2616"><span class="linenum">2616</span></a>  <span class="comment"> * do_somethting() or mdie(&quot;Something went wrong&quot;);</span>
<a name="l2617"><span class="linenum">2617</span></a>  <span class="comment"> *</span>
<a name="l2618"><span class="linenum">2618</span></a>  <span class="comment"> * @param string  $msg       Error message</span>
<a name="l2619"><span class="linenum">2619</span></a>  <span class="comment"> * @param integer $errorcode Error code to emit</span>
<a name="l2620"><span class="linenum">2620</span></a>  <span class="comment"> */</span>
<a name="l2621"><span class="linenum">2621</span></a>  function <a class="function" onClick="logFunction('mdie')" href="../_functions/mdie.html" onMouseOver="funcPopup(event,'mdie')">mdie</a>(<a class="var it2085" onMouseOver="hilite(2085)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../_variables/msg.html">$msg</a>='', <a class="var it262" onMouseOver="hilite(262)" onMouseOut="lolite()" onClick="logVariable('errorcode')" href="../_variables/errorcode.html">$errorcode</a>=1) {
<a name="l2622"><span class="linenum">2622</span></a>      <a class="phpfunction" onClick="logFunction('trigger_error')" href="../_functions/trigger_error.html" onMouseOver="phpfuncPopup(event,'trigger_error')">trigger_error</a>(<a class="var it2085" onMouseOver="hilite(2085)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../_variables/msg.html">$msg</a>);
<a name="l2623"><span class="linenum">2623</span></a>      exit(<a class="var it262" onMouseOver="hilite(262)" onMouseOut="lolite()" onClick="logVariable('errorcode')" href="../_variables/errorcode.html">$errorcode</a>);
<a name="l2624"><span class="linenum">2624</span></a>  }
<a name="l2625"><span class="linenum">2625</span></a>  
<a name="l2626"><span class="linenum">2626</span></a>  <span class="comment">/**</span>
<a name="l2627"><span class="linenum">2627</span></a>  <span class="comment"> * Print a message and exit.</span>
<a name="l2628"><span class="linenum">2628</span></a>  <span class="comment"> *</span>
<a name="l2629"><span class="linenum">2629</span></a>  <span class="comment"> * @param string $message The message to print in the notice</span>
<a name="l2630"><span class="linenum">2630</span></a>  <span class="comment"> * @param string $link The link to use for the continue button</span>
<a name="l2631"><span class="linenum">2631</span></a>  <span class="comment"> * @param object $course A course object. Unused.</span>
<a name="l2632"><span class="linenum">2632</span></a>  <span class="comment"> * @return void This function simply exits</span>
<a name="l2633"><span class="linenum">2633</span></a>  <span class="comment"> */</span>
<a name="l2634"><span class="linenum">2634</span></a>  function <a class="function" onClick="logFunction('notice')" href="../_functions/notice.html" onMouseOver="funcPopup(event,'notice')">notice</a> (<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>='', <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>=null) {
<a name="l2635"><span class="linenum">2635</span></a>      global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l2636"><span class="linenum">2636</span></a>  
<a name="l2637"><span class="linenum">2637</span></a>      <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('clean_text')" href="../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>);   <span class="comment">// In case nasties are in here.</span>
<a name="l2638"><span class="linenum">2638</span></a>  
<a name="l2639"><span class="linenum">2639</span></a>      if (<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a>) {
<a name="l2640"><span class="linenum">2640</span></a>          echo(&quot;!!<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>!!\n&quot;);
<a name="l2641"><span class="linenum">2641</span></a>          exit(1); <span class="comment">// No success.</span>
<a name="l2642"><span class="linenum">2642</span></a>      }
<a name="l2643"><span class="linenum">2643</span></a>  
<a name="l2644"><span class="linenum">2644</span></a>      if (!<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('headerprinted')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/headerprinted.html">headerprinted</a>) {
<a name="l2645"><span class="linenum">2645</span></a>  <span class="comment">        // Header not yet printed.</span>
<a name="l2646"><span class="linenum">2646</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notice'));
<a name="l2647"><span class="linenum">2647</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l2648"><span class="linenum">2648</span></a>      } else {
<a name="l2649"><span class="linenum">2649</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('container_end_all')" href="../_functions/container_end_all.html" onMouseOver="funcPopup(event,'container_end_all')">container_end_all</a>(false);
<a name="l2650"><span class="linenum">2650</span></a>      }
<a name="l2651"><span class="linenum">2651</span></a>  
<a name="l2652"><span class="linenum">2652</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box')" href="../_functions/box.html" onMouseOver="funcPopup(event,'box')">box</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, 'generalbox', 'notice');
<a name="l2653"><span class="linenum">2653</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('continue_button')" href="../_functions/continue_button.html" onMouseOver="funcPopup(event,'continue_button')">continue_button</a>(<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>);
<a name="l2654"><span class="linenum">2654</span></a>  
<a name="l2655"><span class="linenum">2655</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l2656"><span class="linenum">2656</span></a>      exit(1); <span class="comment">// General error code.</span>
<a name="l2657"><span class="linenum">2657</span></a>  }
<a name="l2658"><span class="linenum">2658</span></a>  
<a name="l2659"><span class="linenum">2659</span></a>  <span class="comment">/**</span>
<a name="l2660"><span class="linenum">2660</span></a>  <span class="comment"> * Redirects the user to another page, after printing a notice.</span>
<a name="l2661"><span class="linenum">2661</span></a>  <span class="comment"> *</span>
<a name="l2662"><span class="linenum">2662</span></a>  <span class="comment"> * This function calls the OUTPUT redirect method, echo's the output and then dies to ensure nothing else happens.</span>
<a name="l2663"><span class="linenum">2663</span></a>  <span class="comment"> *</span>
<a name="l2664"><span class="linenum">2664</span></a>  <span class="comment"> * &lt;strong&gt;Good practice:&lt;/strong&gt; You should call this method before starting page</span>
<a name="l2665"><span class="linenum">2665</span></a>  <span class="comment"> * output by using any of the OUTPUT methods.</span>
<a name="l2666"><span class="linenum">2666</span></a>  <span class="comment"> *</span>
<a name="l2667"><span class="linenum">2667</span></a>  <span class="comment"> * @param moodle_url|string $url A moodle_url to redirect to. Strings are not to be trusted!</span>
<a name="l2668"><span class="linenum">2668</span></a>  <span class="comment"> * @param string $message The message to display to the user</span>
<a name="l2669"><span class="linenum">2669</span></a>  <span class="comment"> * @param int $delay The delay before redirecting</span>
<a name="l2670"><span class="linenum">2670</span></a>  <span class="comment"> * @param string $messagetype The type of notification to show the message in. See constants on \core\output\notification.</span>
<a name="l2671"><span class="linenum">2671</span></a>  <span class="comment"> * @throws moodle_exception</span>
<a name="l2672"><span class="linenum">2672</span></a>  <span class="comment"> */</span>
<a name="l2673"><span class="linenum">2673</span></a>  function <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>='', <a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a>=null, <a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../_variables/messagetype.html">$messagetype</a> = \core\output\<a class="class" onClick="logClass('notification')" href="../_classes/notification.html" onMouseOver="classPopup(event,'notification')">notification</a>::NOTIFY_INFO) {
<a name="l2674"><span class="linenum">2674</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2675"><span class="linenum">2675</span></a>  
<a name="l2676"><span class="linenum">2676</span></a>      if (<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a> or <a class="constant" onClick="logConstant('AJAX_SCRIPT')" href="../_constants/AJAX_SCRIPT.html" onMouseOver="constPopup(event,'AJAX_SCRIPT')">AJAX_SCRIPT</a>) {
<a name="l2677"><span class="linenum">2677</span></a>  <span class="comment">        // This is wrong - developers should not use redirect in these scripts but it should not be very likely.</span>
<a name="l2678"><span class="linenum">2678</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('redirecterrordetected', 'error');
<a name="l2679"><span class="linenum">2679</span></a>      }
<a name="l2680"><span class="linenum">2680</span></a>  
<a name="l2681"><span class="linenum">2681</span></a>      if (<a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a> === null) {
<a name="l2682"><span class="linenum">2682</span></a>          <a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a> = -1;
<a name="l2683"><span class="linenum">2683</span></a>      }
<a name="l2684"><span class="linenum">2684</span></a>  
<a name="l2685"><span class="linenum">2685</span></a>  <span class="comment">    // Prevent debug errors - make sure context is properly initialised.</span>
<a name="l2686"><span class="linenum">2686</span></a>      if (<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>) {
<a name="l2687"><span class="linenum">2687</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(null);
<a name="l2688"><span class="linenum">2688</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('redirect');  <span class="comment">// No header and footer needed.</span>
<a name="l2689"><span class="linenum">2689</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pageshouldredirect', 'moodle'));
<a name="l2690"><span class="linenum">2690</span></a>      }
<a name="l2691"><span class="linenum">2691</span></a>  
<a name="l2692"><span class="linenum">2692</span></a>      if (<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> instanceof moodle_url) {
<a name="l2693"><span class="linenum">2693</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l2694"><span class="linenum">2694</span></a>      }
<a name="l2695"><span class="linenum">2695</span></a>  
<a name="l2696"><span class="linenum">2696</span></a>      <a class="var it18397" onMouseOver="hilite(18397)" onMouseOut="lolite()" onClick="logVariable('debugdisableredirect')" href="../_variables/debugdisableredirect.html">$debugdisableredirect</a> = false;
<a name="l2697"><span class="linenum">2697</span></a>      do {
<a name="l2698"><span class="linenum">2698</span></a>          if (<a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('DEBUGGING_PRINTED')" href="../_constants/DEBUGGING_PRINTED.html" onMouseOver="constPopup(event,'DEBUGGING_PRINTED')">DEBUGGING_PRINTED</a>')) {
<a name="l2699"><span class="linenum">2699</span></a>  <span class="comment">            // Some debugging already printed, no need to look more.</span>
<a name="l2700"><span class="linenum">2700</span></a>              <a class="var it18397" onMouseOver="hilite(18397)" onMouseOut="lolite()" onClick="logVariable('debugdisableredirect')" href="../_variables/debugdisableredirect.html">$debugdisableredirect</a> = true;
<a name="l2701"><span class="linenum">2701</span></a>              break;
<a name="l2702"><span class="linenum">2702</span></a>          }
<a name="l2703"><span class="linenum">2703</span></a>  
<a name="l2704"><span class="linenum">2704</span></a>          if (<a class="class" onClick="logClass('core_useragent')" href="../_classes/core_useragent.html" onMouseOver="classPopup(event,'core_useragent')">core_useragent</a>::<a class="function" onClick="logFunction('is_msword')" href="../_functions/is_msword.html" onMouseOver="funcPopup(event,'is_msword')">is_msword</a>()) {
<a name="l2705"><span class="linenum">2705</span></a>  <span class="comment">            // Clicking a URL from MS Word sends a request to the server without cookies. If that</span>
<a name="l2706"><span class="linenum">2706</span></a>  <span class="comment">            // causes a redirect Word will open a browser pointing the new URL. If not, the URL that</span>
<a name="l2707"><span class="linenum">2707</span></a>  <span class="comment">            // was clicked is opened. Because the request from Word is without cookies, it almost</span>
<a name="l2708"><span class="linenum">2708</span></a>  <span class="comment">            // always results in a redirect to the login page, even if the user is logged in in their</span>
<a name="l2709"><span class="linenum">2709</span></a>  <span class="comment">            // browser. This is not what we want, so prevent the redirect for requests from Word.</span>
<a name="l2710"><span class="linenum">2710</span></a>              <a class="var it18397" onMouseOver="hilite(18397)" onMouseOut="lolite()" onClick="logVariable('debugdisableredirect')" href="../_variables/debugdisableredirect.html">$debugdisableredirect</a> = true;
<a name="l2711"><span class="linenum">2711</span></a>              break;
<a name="l2712"><span class="linenum">2712</span></a>          }
<a name="l2713"><span class="linenum">2713</span></a>  
<a name="l2714"><span class="linenum">2714</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debugdisplay')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debugdisplay.html">debugdisplay</a>) or empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debug')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debug.html">debug</a>)) {
<a name="l2715"><span class="linenum">2715</span></a>  <span class="comment">            // No errors should be displayed.</span>
<a name="l2716"><span class="linenum">2716</span></a>              break;
<a name="l2717"><span class="linenum">2717</span></a>          }
<a name="l2718"><span class="linenum">2718</span></a>  
<a name="l2719"><span class="linenum">2719</span></a>          if (!<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('error_get_last') or !<a class="var it5651" onMouseOver="hilite(5651)" onMouseOut="lolite()" onClick="logVariable('lasterror')" href="../_variables/lasterror.html">$lasterror</a> = error_get_last()) {
<a name="l2720"><span class="linenum">2720</span></a>              break;
<a name="l2721"><span class="linenum">2721</span></a>          }
<a name="l2722"><span class="linenum">2722</span></a>  
<a name="l2723"><span class="linenum">2723</span></a>          if (!(<a class="var it5651" onMouseOver="hilite(5651)" onMouseOut="lolite()" onClick="logVariable('lasterror')" href="../_variables/lasterror.html">$lasterror</a>['type'] &amp; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debug')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debug.html">debug</a>)) {
<a name="l2724"><span class="linenum">2724</span></a>  <span class="comment">            // Last error not interesting.</span>
<a name="l2725"><span class="linenum">2725</span></a>              break;
<a name="l2726"><span class="linenum">2726</span></a>          }
<a name="l2727"><span class="linenum">2727</span></a>  
<a name="l2728"><span class="linenum">2728</span></a>  <span class="comment">        // Watch out here, @hidden() errors are returned from error_get_last() too.</span>
<a name="l2729"><span class="linenum">2729</span></a>          if (<a class="phpfunction" onClick="logFunction('headers_sent')" href="../_functions/headers_sent.html" onMouseOver="phpfuncPopup(event,'headers_sent')">headers_sent</a>()) {
<a name="l2730"><span class="linenum">2730</span></a>  <span class="comment">            // We already started printing something - that means errors likely printed.</span>
<a name="l2731"><span class="linenum">2731</span></a>              <a class="var it18397" onMouseOver="hilite(18397)" onMouseOut="lolite()" onClick="logVariable('debugdisableredirect')" href="../_variables/debugdisableredirect.html">$debugdisableredirect</a> = true;
<a name="l2732"><span class="linenum">2732</span></a>              break;
<a name="l2733"><span class="linenum">2733</span></a>          }
<a name="l2734"><span class="linenum">2734</span></a>  
<a name="l2735"><span class="linenum">2735</span></a>          if (<a class="phpfunction" onClick="logFunction('ob_get_level')" href="../_functions/ob_get_level.html" onMouseOver="phpfuncPopup(event,'ob_get_level')">ob_get_level</a>() and <a class="phpfunction" onClick="logFunction('ob_get_contents')" href="../_functions/ob_get_contents.html" onMouseOver="phpfuncPopup(event,'ob_get_contents')">ob_get_contents</a>()) {
<a name="l2736"><span class="linenum">2736</span></a>  <span class="comment">            // There is something waiting to be printed, hopefully it is the errors,</span>
<a name="l2737"><span class="linenum">2737</span></a>  <span class="comment">            // but it might be some error hidden by @ too - such as the timezone mess from setup.php.</span>
<a name="l2738"><span class="linenum">2738</span></a>              <a class="var it18397" onMouseOver="hilite(18397)" onMouseOut="lolite()" onClick="logVariable('debugdisableredirect')" href="../_variables/debugdisableredirect.html">$debugdisableredirect</a> = true;
<a name="l2739"><span class="linenum">2739</span></a>              break;
<a name="l2740"><span class="linenum">2740</span></a>          }
<a name="l2741"><span class="linenum">2741</span></a>      } while (false);
<a name="l2742"><span class="linenum">2742</span></a>  
<a name="l2743"><span class="linenum">2743</span></a>  <span class="comment">    // Technically, HTTP/1.1 requires Location: header to contain the absolute path.</span>
<a name="l2744"><span class="linenum">2744</span></a>  <span class="comment">    // (In practice browsers accept relative paths - but still, might as well do it properly.)</span>
<a name="l2745"><span class="linenum">2745</span></a>  <span class="comment">    // This code turns relative into absolute.</span>
<a name="l2746"><span class="linenum">2746</span></a>      if (!<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('|^[a-z]+:|i', <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>)) {
<a name="l2747"><span class="linenum">2747</span></a>  <span class="comment">        // Get host name http://www.wherever.com.</span>
<a name="l2748"><span class="linenum">2748</span></a>          <a class="var it18398" onMouseOver="hilite(18398)" onMouseOut="lolite()" onClick="logVariable('hostpart')" href="../_variables/hostpart.html">$hostpart</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('|^(.*?[^:/])/.*$|', '<a class="var it1197" onMouseOver="hilite(1197)" onMouseOut="lolite()" onClick="logVariable('1')" href="../_variables/1.html">$1</a>', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>);
<a name="l2749"><span class="linenum">2749</span></a>          if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('|^/|', <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>)) {
<a name="l2750"><span class="linenum">2750</span></a>  <span class="comment">            // URLs beginning with / are relative to web server root so we just add them in.</span>
<a name="l2751"><span class="linenum">2751</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it18398" onMouseOver="hilite(18398)" onMouseOut="lolite()" onClick="logVariable('hostpart')" href="../_variables/hostpart.html">$hostpart</a>.<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>;
<a name="l2752"><span class="linenum">2752</span></a>          } else {
<a name="l2753"><span class="linenum">2753</span></a>  <span class="comment">            // URLs not beginning with / are relative to path of current script, so add that on.</span>
<a name="l2754"><span class="linenum">2754</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it18398" onMouseOver="hilite(18398)" onMouseOut="lolite()" onClick="logVariable('hostpart')" href="../_variables/hostpart.html">$hostpart</a>.<a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('|\?.*$|', '', <a class="function" onClick="logFunction('me')" href="../_functions/me.html" onMouseOver="funcPopup(event,'me')">me</a>()).'/../'.<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>;
<a name="l2755"><span class="linenum">2755</span></a>          }
<a name="l2756"><span class="linenum">2756</span></a>  <span class="comment">        // Replace all ..s.</span>
<a name="l2757"><span class="linenum">2757</span></a>          while (true) {
<a name="l2758"><span class="linenum">2758</span></a>              <a class="var it18399" onMouseOver="hilite(18399)" onMouseOut="lolite()" onClick="logVariable('newurl')" href="../_variables/newurl.html">$newurl</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('|/(?!\.\.)[^/]*/\.\./|', '/', <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l2759"><span class="linenum">2759</span></a>              if (<a class="var it18399" onMouseOver="hilite(18399)" onMouseOut="lolite()" onClick="logVariable('newurl')" href="../_variables/newurl.html">$newurl</a> == <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) {
<a name="l2760"><span class="linenum">2760</span></a>                  break;
<a name="l2761"><span class="linenum">2761</span></a>              }
<a name="l2762"><span class="linenum">2762</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it18399" onMouseOver="hilite(18399)" onMouseOut="lolite()" onClick="logVariable('newurl')" href="../_variables/newurl.html">$newurl</a>;
<a name="l2763"><span class="linenum">2763</span></a>          }
<a name="l2764"><span class="linenum">2764</span></a>      }
<a name="l2765"><span class="linenum">2765</span></a>  
<a name="l2766"><span class="linenum">2766</span></a>  <span class="comment">    // Sanitise url - we can not rely on moodle_url or our URL cleaning</span>
<a name="l2767"><span class="linenum">2767</span></a>  <span class="comment">    // because they do not support all valid external URLs.</span>
<a name="l2768"><span class="linenum">2768</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/[\x00-\x1F\x7F]/', '', <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l2769"><span class="linenum">2769</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&quot;', '%22', <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l2770"><span class="linenum">2770</span></a>      <a class="var it18400" onMouseOver="hilite(18400)" onMouseOut="lolite()" onClick="logVariable('encodedurl')" href="../_variables/encodedurl.html">$encodedurl</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/\&amp;(?![a-zA-Z0-9#]{1,8};)/&quot;, &quot;&amp;amp;&quot;, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l2771"><span class="linenum">2771</span></a>      <a class="var it18400" onMouseOver="hilite(18400)" onMouseOut="lolite()" onClick="logVariable('encodedurl')" href="../_variables/encodedurl.html">$encodedurl</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/^.*href=&quot;([^&quot;]*)&quot;.*$/', &quot;\\1&quot;, <a class="function" onClick="logFunction('clean_text')" href="../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>('&lt;a href=&quot;'.<a class="var it18400" onMouseOver="hilite(18400)" onMouseOut="lolite()" onClick="logVariable('encodedurl')" href="../_variables/encodedurl.html">$encodedurl</a>.'&quot; /&gt;', <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>));
<a name="l2772"><span class="linenum">2772</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&amp;amp;', '&amp;', <a class="var it18400" onMouseOver="hilite(18400)" onMouseOut="lolite()" onClick="logVariable('encodedurl')" href="../_variables/encodedurl.html">$encodedurl</a>);
<a name="l2773"><span class="linenum">2773</span></a>  
<a name="l2774"><span class="linenum">2774</span></a>      if (!empty(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>)) {
<a name="l2775"><span class="linenum">2775</span></a>          if (!<a class="var it18397" onMouseOver="hilite(18397)" onMouseOut="lolite()" onClick="logVariable('debugdisableredirect')" href="../_variables/debugdisableredirect.html">$debugdisableredirect</a> &amp;&amp; !<a class="phpfunction" onClick="logFunction('headers_sent')" href="../_functions/headers_sent.html" onMouseOver="phpfuncPopup(event,'headers_sent')">headers_sent</a>()) {
<a name="l2776"><span class="linenum">2776</span></a>  <span class="comment">            // A message has been provided, and the headers have not yet been sent.</span>
<a name="l2777"><span class="linenum">2777</span></a>  <span class="comment">            // Display the message as a notification on the subsequent page.</span>
<a name="l2778"><span class="linenum">2778</span></a>              \core\<a class="class" onClick="logClass('notification')" href="../_classes/notification.html" onMouseOver="classPopup(event,'notification')">notification</a>::<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../_variables/messagetype.html">$messagetype</a>);
<a name="l2779"><span class="linenum">2779</span></a>              <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = null;
<a name="l2780"><span class="linenum">2780</span></a>              <a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a> = 0;
<a name="l2781"><span class="linenum">2781</span></a>          } else {
<a name="l2782"><span class="linenum">2782</span></a>              if (<a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a> === -1 || !<a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a>)) {
<a name="l2783"><span class="linenum">2783</span></a>                  <a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a> = 3;
<a name="l2784"><span class="linenum">2784</span></a>              }
<a name="l2785"><span class="linenum">2785</span></a>              <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('clean_text')" href="../_functions/clean_text.html" onMouseOver="funcPopup(event,'clean_text')">clean_text</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>);
<a name="l2786"><span class="linenum">2786</span></a>          }
<a name="l2787"><span class="linenum">2787</span></a>      } else {
<a name="l2788"><span class="linenum">2788</span></a>          <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pageshouldredirect');
<a name="l2789"><span class="linenum">2789</span></a>          <a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a> = 0;
<a name="l2790"><span class="linenum">2790</span></a>      }
<a name="l2791"><span class="linenum">2791</span></a>  
<a name="l2792"><span class="linenum">2792</span></a>  <span class="comment">    // Make sure the session is closed properly, this prevents problems in IIS</span>
<a name="l2793"><span class="linenum">2793</span></a>  <span class="comment">    // and also some potential PHP shutdown issues.</span>
<a name="l2794"><span class="linenum">2794</span></a>      \core\session\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('write_close')" href="../_functions/write_close.html" onMouseOver="funcPopup(event,'write_close')">write_close</a>();
<a name="l2795"><span class="linenum">2795</span></a>  
<a name="l2796"><span class="linenum">2796</span></a>      if (<a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a> == 0 &amp;&amp; !<a class="var it18397" onMouseOver="hilite(18397)" onMouseOut="lolite()" onClick="logVariable('debugdisableredirect')" href="../_variables/debugdisableredirect.html">$debugdisableredirect</a> &amp;&amp; !<a class="phpfunction" onClick="logFunction('headers_sent')" href="../_functions/headers_sent.html" onMouseOver="phpfuncPopup(event,'headers_sent')">headers_sent</a>()) {
<a name="l2797"><span class="linenum">2797</span></a>  <span class="comment">        // 302 might not work for POST requests, 303 is ignored by obsolete clients.</span>
<a name="l2798"><span class="linenum">2798</span></a>          @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>(<a class="var it836" onMouseOver="hilite(836)" onMouseOut="lolite()" onClick="logVariable('_SERVER')" href="../_variables/_SERVER.html">$_SERVER</a>['SERVER_PROTOCOL'] . ' 303 See Other');
<a name="l2799"><span class="linenum">2799</span></a>          @<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>('Location: '.<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l2800"><span class="linenum">2800</span></a>          echo <a class="class" onClick="logClass('bootstrap_renderer')" href="../_classes/bootstrap_renderer.html" onMouseOver="classPopup(event,'bootstrap_renderer')">bootstrap_renderer</a>::<a class="function" onClick="logFunction('plain_redirect_message')" href="../_functions/plain_redirect_message.html" onMouseOver="funcPopup(event,'plain_redirect_message')">plain_redirect_message</a>(<a class="var it18400" onMouseOver="hilite(18400)" onMouseOut="lolite()" onClick="logVariable('encodedurl')" href="../_variables/encodedurl.html">$encodedurl</a>);
<a name="l2801"><span class="linenum">2801</span></a>          exit;
<a name="l2802"><span class="linenum">2802</span></a>      }
<a name="l2803"><span class="linenum">2803</span></a>  
<a name="l2804"><span class="linenum">2804</span></a>  <span class="comment">    // Include a redirect message, even with a HTTP redirect, because that is recommended practice.</span>
<a name="l2805"><span class="linenum">2805</span></a>      if (<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>) {
<a name="l2806"><span class="linenum">2806</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('docroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/docroot.html">docroot</a> = false; <span class="comment">// To prevent the link to moodle docs from being displayed on redirect page.</span>
<a name="l2807"><span class="linenum">2807</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('redirect_message')" href="../_functions/redirect_message.html" onMouseOver="funcPopup(event,'redirect_message')">redirect_message</a>(<a class="var it18400" onMouseOver="hilite(18400)" onMouseOut="lolite()" onClick="logVariable('encodedurl')" href="../_variables/encodedurl.html">$encodedurl</a>, <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a>, <a class="var it18397" onMouseOver="hilite(18397)" onMouseOut="lolite()" onClick="logVariable('debugdisableredirect')" href="../_variables/debugdisableredirect.html">$debugdisableredirect</a>, <a class="var it18396" onMouseOver="hilite(18396)" onMouseOut="lolite()" onClick="logVariable('messagetype')" href="../_variables/messagetype.html">$messagetype</a>);
<a name="l2808"><span class="linenum">2808</span></a>          exit;
<a name="l2809"><span class="linenum">2809</span></a>      } else {
<a name="l2810"><span class="linenum">2810</span></a>          echo <a class="class" onClick="logClass('bootstrap_renderer')" href="../_classes/bootstrap_renderer.html" onMouseOver="classPopup(event,'bootstrap_renderer')">bootstrap_renderer</a>::<a class="function" onClick="logFunction('early_redirect_message')" href="../_functions/early_redirect_message.html" onMouseOver="funcPopup(event,'early_redirect_message')">early_redirect_message</a>(<a class="var it18400" onMouseOver="hilite(18400)" onMouseOut="lolite()" onClick="logVariable('encodedurl')" href="../_variables/encodedurl.html">$encodedurl</a>, <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it5040" onMouseOver="hilite(5040)" onMouseOut="lolite()" onClick="logVariable('delay')" href="../_variables/delay.html">$delay</a>);
<a name="l2811"><span class="linenum">2811</span></a>          exit;
<a name="l2812"><span class="linenum">2812</span></a>      }
<a name="l2813"><span class="linenum">2813</span></a>  }
<a name="l2814"><span class="linenum">2814</span></a>  
<a name="l2815"><span class="linenum">2815</span></a>  <span class="comment">/**</span>
<a name="l2816"><span class="linenum">2816</span></a>  <span class="comment"> * Given an email address, this function will return an obfuscated version of it.</span>
<a name="l2817"><span class="linenum">2817</span></a>  <span class="comment"> *</span>
<a name="l2818"><span class="linenum">2818</span></a>  <span class="comment"> * @param string $email The email address to obfuscate</span>
<a name="l2819"><span class="linenum">2819</span></a>  <span class="comment"> * @return string The obfuscated email address</span>
<a name="l2820"><span class="linenum">2820</span></a>  <span class="comment"> */</span>
<a name="l2821"><span class="linenum">2821</span></a>  function <a class="function" onClick="logFunction('obfuscate_email')" href="../_functions/obfuscate_email.html" onMouseOver="funcPopup(event,'obfuscate_email')">obfuscate_email</a>(<a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('email')" href="../_variables/email.html">$email</a>) {
<a name="l2822"><span class="linenum">2822</span></a>      <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 0;
<a name="l2823"><span class="linenum">2823</span></a>      <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../_variables/length.html">$length</a> = <a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('email')" href="../_variables/email.html">$email</a>);
<a name="l2824"><span class="linenum">2824</span></a>      <a class="var it18401" onMouseOver="hilite(18401)" onMouseOut="lolite()" onClick="logVariable('obfuscated')" href="../_variables/obfuscated.html">$obfuscated</a> = '';
<a name="l2825"><span class="linenum">2825</span></a>      while (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt; <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../_variables/length.html">$length</a>) {
<a name="l2826"><span class="linenum">2826</span></a>          if (<a class="phpfunction" onClick="logFunction('rand')" href="../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, 2) &amp;&amp; <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('email')" href="../_variables/email.html">$email</a>{<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>}!='@') { // MDL-20619 some browsers have problems unobfuscating @.
<a name="l2827"><span class="linenum">2827</span></a>              <a class="var it18401" onMouseOver="hilite(18401)" onMouseOut="lolite()" onClick="logVariable('obfuscated')" href="../_variables/obfuscated.html">$obfuscated</a>.='%'.<a class="phpfunction" onClick="logFunction('dechex')" href="../_functions/dechex.html" onMouseOver="phpfuncPopup(event,'dechex')">dechex</a>(<a class="phpfunction" onClick="logFunction('ord')" href="../_functions/ord.html" onMouseOver="phpfuncPopup(event,'ord')">ord</a>(<a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('email')" href="../_variables/email.html">$email</a>{<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>}));
<a name="l2828"><span class="linenum">2828</span></a>          } else {
<a name="l2829"><span class="linenum">2829</span></a>              <a class="var it18401" onMouseOver="hilite(18401)" onMouseOut="lolite()" onClick="logVariable('obfuscated')" href="../_variables/obfuscated.html">$obfuscated</a>.=<a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('email')" href="../_variables/email.html">$email</a>{<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>};
<a name="l2830"><span class="linenum">2830</span></a>          }
<a name="l2831"><span class="linenum">2831</span></a>          <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++;
<a name="l2832"><span class="linenum">2832</span></a>      }
<a name="l2833"><span class="linenum">2833</span></a>      return <a class="var it18401" onMouseOver="hilite(18401)" onMouseOut="lolite()" onClick="logVariable('obfuscated')" href="../_variables/obfuscated.html">$obfuscated</a>;
<a name="l2834"><span class="linenum">2834</span></a>  }
<a name="l2835"><span class="linenum">2835</span></a>  
<a name="l2836"><span class="linenum">2836</span></a>  <span class="comment">/**</span>
<a name="l2837"><span class="linenum">2837</span></a>  <span class="comment"> * This function takes some text and replaces about half of the characters</span>
<a name="l2838"><span class="linenum">2838</span></a>  <span class="comment"> * with HTML entity equivalents.   Return string is obviously longer.</span>
<a name="l2839"><span class="linenum">2839</span></a>  <span class="comment"> *</span>
<a name="l2840"><span class="linenum">2840</span></a>  <span class="comment"> * @param string $plaintext The text to be obfuscated</span>
<a name="l2841"><span class="linenum">2841</span></a>  <span class="comment"> * @return string The obfuscated text</span>
<a name="l2842"><span class="linenum">2842</span></a>  <span class="comment"> */</span>
<a name="l2843"><span class="linenum">2843</span></a>  function <a class="function" onClick="logFunction('obfuscate_text')" href="../_functions/obfuscate_text.html" onMouseOver="funcPopup(event,'obfuscate_text')">obfuscate_text</a>(<a class="var it18402" onMouseOver="hilite(18402)" onMouseOut="lolite()" onClick="logVariable('plaintext')" href="../_variables/plaintext.html">$plaintext</a>) {
<a name="l2844"><span class="linenum">2844</span></a>      <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>=0;
<a name="l2845"><span class="linenum">2845</span></a>      <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../_variables/length.html">$length</a> = <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it18402" onMouseOver="hilite(18402)" onMouseOut="lolite()" onClick="logVariable('plaintext')" href="../_variables/plaintext.html">$plaintext</a>);
<a name="l2846"><span class="linenum">2846</span></a>      <a class="var it18401" onMouseOver="hilite(18401)" onMouseOut="lolite()" onClick="logVariable('obfuscated')" href="../_variables/obfuscated.html">$obfuscated</a>='';
<a name="l2847"><span class="linenum">2847</span></a>      <a class="var it18403" onMouseOver="hilite(18403)" onMouseOut="lolite()" onClick="logVariable('prevobfuscated')" href="../_variables/prevobfuscated.html">$prevobfuscated</a> = false;
<a name="l2848"><span class="linenum">2848</span></a>      while (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt; <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../_variables/length.html">$length</a>) {
<a name="l2849"><span class="linenum">2849</span></a>          <a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('char')" href="../_variables/char.html">$char</a> = <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it18402" onMouseOver="hilite(18402)" onMouseOut="lolite()" onClick="logVariable('plaintext')" href="../_variables/plaintext.html">$plaintext</a>, <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>, 1);
<a name="l2850"><span class="linenum">2850</span></a>          <a class="var it2013" onMouseOver="hilite(2013)" onMouseOut="lolite()" onClick="logVariable('ord')" href="../_variables/ord.html">$ord</a> = <a class="class" onClick="logClass('core_text')" href="../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('utf8ord')" href="../_functions/utf8ord.html" onMouseOver="funcPopup(event,'utf8ord')">utf8ord</a>(<a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('char')" href="../_variables/char.html">$char</a>);
<a name="l2851"><span class="linenum">2851</span></a>          <a class="var it944" onMouseOver="hilite(944)" onMouseOut="lolite()" onClick="logVariable('numerical')" href="../_variables/numerical.html">$numerical</a> = (<a class="var it2013" onMouseOver="hilite(2013)" onMouseOut="lolite()" onClick="logVariable('ord')" href="../_variables/ord.html">$ord</a> &gt;= <a class="phpfunction" onClick="logFunction('ord')" href="../_functions/ord.html" onMouseOver="phpfuncPopup(event,'ord')">ord</a>('0')) &amp;&amp; (<a class="var it2013" onMouseOver="hilite(2013)" onMouseOut="lolite()" onClick="logVariable('ord')" href="../_variables/ord.html">$ord</a> &lt;= <a class="phpfunction" onClick="logFunction('ord')" href="../_functions/ord.html" onMouseOver="phpfuncPopup(event,'ord')">ord</a>('9'));
<a name="l2852"><span class="linenum">2852</span></a>          if (<a class="var it18403" onMouseOver="hilite(18403)" onMouseOut="lolite()" onClick="logVariable('prevobfuscated')" href="../_variables/prevobfuscated.html">$prevobfuscated</a> and <a class="var it944" onMouseOver="hilite(944)" onMouseOut="lolite()" onClick="logVariable('numerical')" href="../_variables/numerical.html">$numerical</a> ) {
<a name="l2853"><span class="linenum">2853</span></a>              <a class="var it18401" onMouseOver="hilite(18401)" onMouseOut="lolite()" onClick="logVariable('obfuscated')" href="../_variables/obfuscated.html">$obfuscated</a>.='&amp;#'.<a class="var it2013" onMouseOver="hilite(2013)" onMouseOut="lolite()" onClick="logVariable('ord')" href="../_variables/ord.html">$ord</a>.';';
<a name="l2854"><span class="linenum">2854</span></a>          } else if (<a class="phpfunction" onClick="logFunction('rand')" href="../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, 2)) {
<a name="l2855"><span class="linenum">2855</span></a>              <a class="var it18401" onMouseOver="hilite(18401)" onMouseOut="lolite()" onClick="logVariable('obfuscated')" href="../_variables/obfuscated.html">$obfuscated</a>.='&amp;#'.<a class="var it2013" onMouseOver="hilite(2013)" onMouseOut="lolite()" onClick="logVariable('ord')" href="../_variables/ord.html">$ord</a>.';';
<a name="l2856"><span class="linenum">2856</span></a>              <a class="var it18403" onMouseOver="hilite(18403)" onMouseOut="lolite()" onClick="logVariable('prevobfuscated')" href="../_variables/prevobfuscated.html">$prevobfuscated</a> = true;
<a name="l2857"><span class="linenum">2857</span></a>          } else {
<a name="l2858"><span class="linenum">2858</span></a>              <a class="var it18401" onMouseOver="hilite(18401)" onMouseOut="lolite()" onClick="logVariable('obfuscated')" href="../_variables/obfuscated.html">$obfuscated</a>.=<a class="var it476" onMouseOver="hilite(476)" onMouseOut="lolite()" onClick="logVariable('char')" href="../_variables/char.html">$char</a>;
<a name="l2859"><span class="linenum">2859</span></a>              <a class="var it18403" onMouseOver="hilite(18403)" onMouseOut="lolite()" onClick="logVariable('prevobfuscated')" href="../_variables/prevobfuscated.html">$prevobfuscated</a> = false;
<a name="l2860"><span class="linenum">2860</span></a>          }
<a name="l2861"><span class="linenum">2861</span></a>          <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++;
<a name="l2862"><span class="linenum">2862</span></a>      }
<a name="l2863"><span class="linenum">2863</span></a>      return <a class="var it18401" onMouseOver="hilite(18401)" onMouseOut="lolite()" onClick="logVariable('obfuscated')" href="../_variables/obfuscated.html">$obfuscated</a>;
<a name="l2864"><span class="linenum">2864</span></a>  }
<a name="l2865"><span class="linenum">2865</span></a>  
<a name="l2866"><span class="linenum">2866</span></a>  <span class="comment">/**</span>
<a name="l2867"><span class="linenum">2867</span></a>  <span class="comment"> * This function uses the {@link obfuscate_email()} and {@link obfuscate_text()}</span>
<a name="l2868"><span class="linenum">2868</span></a>  <span class="comment"> * to generate a fully obfuscated email link, ready to use.</span>
<a name="l2869"><span class="linenum">2869</span></a>  <span class="comment"> *</span>
<a name="l2870"><span class="linenum">2870</span></a>  <span class="comment"> * @param string $email The email address to display</span>
<a name="l2871"><span class="linenum">2871</span></a>  <span class="comment"> * @param string $label The text to displayed as hyperlink to $email</span>
<a name="l2872"><span class="linenum">2872</span></a>  <span class="comment"> * @param boolean $dimmed If true then use css class 'dimmed' for hyperlink</span>
<a name="l2873"><span class="linenum">2873</span></a>  <span class="comment"> * @param string $subject The subject of the email in the mailto link</span>
<a name="l2874"><span class="linenum">2874</span></a>  <span class="comment"> * @param string $body The content of the email in the mailto link</span>
<a name="l2875"><span class="linenum">2875</span></a>  <span class="comment"> * @return string The obfuscated mailto link</span>
<a name="l2876"><span class="linenum">2876</span></a>  <span class="comment"> */</span>
<a name="l2877"><span class="linenum">2877</span></a>  function <a class="function" onClick="logFunction('obfuscate_mailto')" href="../_functions/obfuscate_mailto.html" onMouseOver="funcPopup(event,'obfuscate_mailto')">obfuscate_mailto</a>(<a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('email')" href="../_variables/email.html">$email</a>, <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../_variables/label.html">$label</a>='', <a class="var it6462" onMouseOver="hilite(6462)" onMouseOut="lolite()" onClick="logVariable('dimmed')" href="../_variables/dimmed.html">$dimmed</a>=false, <a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../_variables/subject.html">$subject</a> = '', <a class="var it1791" onMouseOver="hilite(1791)" onMouseOut="lolite()" onClick="logVariable('body')" href="../_variables/body.html">$body</a> = '') {
<a name="l2878"><span class="linenum">2878</span></a>  
<a name="l2879"><span class="linenum">2879</span></a>      if (empty(<a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../_variables/label.html">$label</a>)) {
<a name="l2880"><span class="linenum">2880</span></a>          <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../_variables/label.html">$label</a> = <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('email')" href="../_variables/email.html">$email</a>;
<a name="l2881"><span class="linenum">2881</span></a>      }
<a name="l2882"><span class="linenum">2882</span></a>  
<a name="l2883"><span class="linenum">2883</span></a>      <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../_variables/label.html">$label</a> = <a class="function" onClick="logFunction('obfuscate_text')" href="../_functions/obfuscate_text.html" onMouseOver="funcPopup(event,'obfuscate_text')">obfuscate_text</a>(<a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../_variables/label.html">$label</a>);
<a name="l2884"><span class="linenum">2884</span></a>      <a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('email')" href="../_variables/email.html">$email</a> = <a class="function" onClick="logFunction('obfuscate_email')" href="../_functions/obfuscate_email.html" onMouseOver="funcPopup(event,'obfuscate_email')">obfuscate_email</a>(<a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('email')" href="../_variables/email.html">$email</a>);
<a name="l2885"><span class="linenum">2885</span></a>      <a class="var it18404" onMouseOver="hilite(18404)" onMouseOut="lolite()" onClick="logVariable('mailto')" href="../_variables/mailto.html">$mailto</a> = <a class="function" onClick="logFunction('obfuscate_text')" href="../_functions/obfuscate_text.html" onMouseOver="funcPopup(event,'obfuscate_text')">obfuscate_text</a>('mailto');
<a name="l2886"><span class="linenum">2886</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(&quot;mailto:<a class="var it374" onMouseOver="hilite(374)" onMouseOut="lolite()" onClick="logVariable('email')" href="../_variables/email.html">$email</a>&quot;);
<a name="l2887"><span class="linenum">2887</span></a>      <a class="var it314" onMouseOver="hilite(314)" onMouseOut="lolite()" onClick="logVariable('attrs')" href="../_variables/attrs.html">$attrs</a> = array();
<a name="l2888"><span class="linenum">2888</span></a>  
<a name="l2889"><span class="linenum">2889</span></a>      if (!empty(<a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../_variables/subject.html">$subject</a>)) {
<a name="l2890"><span class="linenum">2890</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('subject', <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it1792" onMouseOver="hilite(1792)" onMouseOut="lolite()" onClick="logVariable('subject')" href="../_variables/subject.html">$subject</a>));
<a name="l2891"><span class="linenum">2891</span></a>      }
<a name="l2892"><span class="linenum">2892</span></a>      if (!empty(<a class="var it1791" onMouseOver="hilite(1791)" onMouseOut="lolite()" onClick="logVariable('body')" href="../_variables/body.html">$body</a>)) {
<a name="l2893"><span class="linenum">2893</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('body', <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it1791" onMouseOver="hilite(1791)" onMouseOut="lolite()" onClick="logVariable('body')" href="../_variables/body.html">$body</a>));
<a name="l2894"><span class="linenum">2894</span></a>      }
<a name="l2895"><span class="linenum">2895</span></a>  
<a name="l2896"><span class="linenum">2896</span></a>  <span class="comment">    // Use the obfuscated mailto.</span>
<a name="l2897"><span class="linenum">2897</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/^mailto/', <a class="var it18404" onMouseOver="hilite(18404)" onMouseOut="lolite()" onClick="logVariable('mailto')" href="../_variables/mailto.html">$mailto</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>());
<a name="l2898"><span class="linenum">2898</span></a>  
<a name="l2899"><span class="linenum">2899</span></a>      if (<a class="var it6462" onMouseOver="hilite(6462)" onMouseOut="lolite()" onClick="logVariable('dimmed')" href="../_variables/dimmed.html">$dimmed</a>) {
<a name="l2900"><span class="linenum">2900</span></a>          <a class="var it314" onMouseOver="hilite(314)" onMouseOut="lolite()" onClick="logVariable('attrs')" href="../_variables/attrs.html">$attrs</a>['title'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('emaildisable');
<a name="l2901"><span class="linenum">2901</span></a>          <a class="var it314" onMouseOver="hilite(314)" onMouseOut="lolite()" onClick="logVariable('attrs')" href="../_variables/attrs.html">$attrs</a>['class'] = 'dimmed';
<a name="l2902"><span class="linenum">2902</span></a>      }
<a name="l2903"><span class="linenum">2903</span></a>  
<a name="l2904"><span class="linenum">2904</span></a>      return <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it560" onMouseOver="hilite(560)" onMouseOut="lolite()" onClick="logVariable('label')" href="../_variables/label.html">$label</a>, <a class="var it314" onMouseOver="hilite(314)" onMouseOut="lolite()" onClick="logVariable('attrs')" href="../_variables/attrs.html">$attrs</a>);
<a name="l2905"><span class="linenum">2905</span></a>  }
<a name="l2906"><span class="linenum">2906</span></a>  
<a name="l2907"><span class="linenum">2907</span></a>  <span class="comment">/**</span>
<a name="l2908"><span class="linenum">2908</span></a>  <span class="comment"> * This function is used to rebuild the &lt;nolink&gt; tag because some formats (PLAIN and WIKI)</span>
<a name="l2909"><span class="linenum">2909</span></a>  <span class="comment"> * will transform it to html entities</span>
<a name="l2910"><span class="linenum">2910</span></a>  <span class="comment"> *</span>
<a name="l2911"><span class="linenum">2911</span></a>  <span class="comment"> * @param string $text Text to search for nolink tag in</span>
<a name="l2912"><span class="linenum">2912</span></a>  <span class="comment"> * @return string</span>
<a name="l2913"><span class="linenum">2913</span></a>  <span class="comment"> */</span>
<a name="l2914"><span class="linenum">2914</span></a>  function <a class="function" onClick="logFunction('rebuildnolinktag')" href="../_functions/rebuildnolinktag.html" onMouseOver="funcPopup(event,'rebuildnolinktag')">rebuildnolinktag</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>) {
<a name="l2915"><span class="linenum">2915</span></a>  
<a name="l2916"><span class="linenum">2916</span></a>      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/&amp;lt;(\<span class="comment">/*nolink)&amp;gt;/i', '&lt;$1&gt;', $text);</span>
<a name="l2917"><span class="linenum">2917</span></a>  <span class="comment"></span>
<a name="l2918"><span class="linenum">2918</span></a>  <span class="comment">    return $text;</span>
<a name="l2919"><span class="linenum">2919</span></a>  <span class="comment">}</span>
<a name="l2920"><span class="linenum">2920</span></a>  <span class="comment"></span>
<a name="l2921"><span class="linenum">2921</span></a>  <span class="comment">/**</span>
<a name="l2922"><span class="linenum">2922</span></a>  <span class="comment"> * Prints a maintenance message from $CFG-&gt;maintenance_message or default if empty.</span>
<a name="l2923"><span class="linenum">2923</span></a>  <span class="comment"> */</span>
<a name="l2924"><span class="linenum">2924</span></a>  function <a class="function" onClick="logFunction('print_maintenance_message')" href="../_functions/print_maintenance_message.html" onMouseOver="funcPopup(event,'print_maintenance_message')">print_maintenance_message</a>() {
<a name="l2925"><span class="linenum">2925</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l2926"><span class="linenum">2926</span></a>  
<a name="l2927"><span class="linenum">2927</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagetype')" href="../_functions/set_pagetype.html" onMouseOver="funcPopup(event,'set_pagetype')">set_pagetype</a>('maintenance-message');
<a name="l2928"><span class="linenum">2928</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('maintenance');
<a name="l2929"><span class="linenum">2929</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="phpfunction" onClick="logFunction('strip_tags')" href="../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('fullname')" class="var it43008" onMouseOver="hilite(43008)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>));
<a name="l2930"><span class="linenum">2930</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('fullname')" class="var it43008" onMouseOver="hilite(43008)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>);
<a name="l2931"><span class="linenum">2931</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l2932"><span class="linenum">2932</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('sitemaintenance', 'admin'));
<a name="l2933"><span class="linenum">2933</span></a>      if (isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('maintenance_message')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/maintenance_message.html">maintenance_message</a>) and !<a class="function" onClick="logFunction('html_is_blank')" href="../_functions/html_is_blank.html" onMouseOver="funcPopup(event,'html_is_blank')">html_is_blank</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('maintenance_message')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/maintenance_message.html">maintenance_message</a>)) {
<a name="l2934"><span class="linenum">2934</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_start')" href="../_functions/box_start.html" onMouseOver="funcPopup(event,'box_start')">box_start</a>('maintenance_message generalbox boxwidthwide boxaligncenter');
<a name="l2935"><span class="linenum">2935</span></a>          echo <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('maintenance_message')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/maintenance_message.html">maintenance_message</a>;
<a name="l2936"><span class="linenum">2936</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('box_end')" href="../_functions/box_end.html" onMouseOver="funcPopup(event,'box_end')">box_end</a>();
<a name="l2937"><span class="linenum">2937</span></a>      }
<a name="l2938"><span class="linenum">2938</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l2939"><span class="linenum">2939</span></a>      die;
<a name="l2940"><span class="linenum">2940</span></a>  }
<a name="l2941"><span class="linenum">2941</span></a>  
<a name="l2942"><span class="linenum">2942</span></a>  <span class="comment">/**</span>
<a name="l2943"><span class="linenum">2943</span></a>  <span class="comment"> * Returns a string containing a nested list, suitable for formatting into tabs with CSS.</span>
<a name="l2944"><span class="linenum">2944</span></a>  <span class="comment"> *</span>
<a name="l2945"><span class="linenum">2945</span></a>  <span class="comment"> * It is not recommended to use this function in Moodle 2.5 but it is left for backward</span>
<a name="l2946"><span class="linenum">2946</span></a>  <span class="comment"> * compartibility.</span>
<a name="l2947"><span class="linenum">2947</span></a>  <span class="comment"> *</span>
<a name="l2948"><span class="linenum">2948</span></a>  <span class="comment"> * Example how to print a single line tabs:</span>
<a name="l2949"><span class="linenum">2949</span></a>  <span class="comment"> * $rows = array(</span>
<a name="l2950"><span class="linenum">2950</span></a>  <span class="comment"> *    new tabobject(...),</span>
<a name="l2951"><span class="linenum">2951</span></a>  <span class="comment"> *    new tabobject(...)</span>
<a name="l2952"><span class="linenum">2952</span></a>  <span class="comment"> * );</span>
<a name="l2953"><span class="linenum">2953</span></a>  <span class="comment"> * echo $OUTPUT-&gt;tabtree($rows, $selectedid);</span>
<a name="l2954"><span class="linenum">2954</span></a>  <span class="comment"> *</span>
<a name="l2955"><span class="linenum">2955</span></a>  <span class="comment"> * Multiple row tabs may not look good on some devices but if you want to use them</span>
<a name="l2956"><span class="linenum">2956</span></a>  <span class="comment"> * you can specify -&gt;subtree for the active tabobject.</span>
<a name="l2957"><span class="linenum">2957</span></a>  <span class="comment"> *</span>
<a name="l2958"><span class="linenum">2958</span></a>  <span class="comment"> * @param array $tabrows An array of rows where each row is an array of tab objects</span>
<a name="l2959"><span class="linenum">2959</span></a>  <span class="comment"> * @param string $selected  The id of the selected tab (whatever row it's on)</span>
<a name="l2960"><span class="linenum">2960</span></a>  <span class="comment"> * @param array  $inactive  An array of ids of inactive tabs that are not selectable.</span>
<a name="l2961"><span class="linenum">2961</span></a>  <span class="comment"> * @param array  $activated An array of ids of other tabs that are currently activated</span>
<a name="l2962"><span class="linenum">2962</span></a>  <span class="comment"> * @param bool $return If true output is returned rather then echo'd</span>
<a name="l2963"><span class="linenum">2963</span></a>  <span class="comment"> * @return string HTML output if $return was set to true.</span>
<a name="l2964"><span class="linenum">2964</span></a>  <span class="comment"> */</span>
<a name="l2965"><span class="linenum">2965</span></a>  function <a class="function" onClick="logFunction('print_tabs')" href="../_functions/print_tabs.html" onMouseOver="funcPopup(event,'print_tabs')">print_tabs</a>(<a class="var it2613" onMouseOver="hilite(2613)" onMouseOut="lolite()" onClick="logVariable('tabrows')" href="../_variables/tabrows.html">$tabrows</a>, <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../_variables/selected.html">$selected</a> = null, <a class="var it2443" onMouseOver="hilite(2443)" onMouseOut="lolite()" onClick="logVariable('inactive')" href="../_variables/inactive.html">$inactive</a> = null, <a class="var it2444" onMouseOver="hilite(2444)" onMouseOut="lolite()" onClick="logVariable('activated')" href="../_variables/activated.html">$activated</a> = null, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = false) {
<a name="l2966"><span class="linenum">2966</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l2967"><span class="linenum">2967</span></a>  
<a name="l2968"><span class="linenum">2968</span></a>      <a class="var it2613" onMouseOver="hilite(2613)" onMouseOut="lolite()" onClick="logVariable('tabrows')" href="../_variables/tabrows.html">$tabrows</a> = <a class="phpfunction" onClick="logFunction('array_reverse')" href="../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it2613" onMouseOver="hilite(2613)" onMouseOut="lolite()" onClick="logVariable('tabrows')" href="../_variables/tabrows.html">$tabrows</a>);
<a name="l2969"><span class="linenum">2969</span></a>      <a class="var it18406" onMouseOver="hilite(18406)" onMouseOut="lolite()" onClick="logVariable('subtree')" href="../_variables/subtree.html">$subtree</a> = array();
<a name="l2970"><span class="linenum">2970</span></a>      foreach (<a class="var it2613" onMouseOver="hilite(2613)" onMouseOut="lolite()" onClick="logVariable('tabrows')" href="../_variables/tabrows.html">$tabrows</a> as <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a>) {
<a name="l2971"><span class="linenum">2971</span></a>          <a class="var it2105" onMouseOver="hilite(2105)" onMouseOut="lolite()" onClick="logVariable('tree')" href="../_variables/tree.html">$tree</a> = array();
<a name="l2972"><span class="linenum">2972</span></a>  
<a name="l2973"><span class="linenum">2973</span></a>          foreach (<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../_variables/row.html">$row</a> as <a class="var it5511" onMouseOver="hilite(5511)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../_variables/tab.html">$tab</a>) {
<a name="l2974"><span class="linenum">2974</span></a>              <a class="var it5511" onMouseOver="hilite(5511)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../_variables/tab.html">$tab</a>-&gt;<a onClick="logVariable('inactive')" class="var it44327" onMouseOver="hilite(44327)" onMouseOut="lolite()" href="../_variables/inactive.html">inactive</a> = <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it2443" onMouseOver="hilite(2443)" onMouseOut="lolite()" onClick="logVariable('inactive')" href="../_variables/inactive.html">$inactive</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>((string)<a class="var it5511" onMouseOver="hilite(5511)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../_variables/tab.html">$tab</a>-&gt;<a onClick="logVariable('id')" class="var it44327" onMouseOver="hilite(44327)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it2443" onMouseOver="hilite(2443)" onMouseOut="lolite()" onClick="logVariable('inactive')" href="../_variables/inactive.html">$inactive</a>);
<a name="l2975"><span class="linenum">2975</span></a>              <a class="var it5511" onMouseOver="hilite(5511)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../_variables/tab.html">$tab</a>-&gt;<a onClick="logVariable('activated')" class="var it44327" onMouseOver="hilite(44327)" onMouseOut="lolite()" href="../_variables/activated.html">activated</a> = <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it2444" onMouseOver="hilite(2444)" onMouseOut="lolite()" onClick="logVariable('activated')" href="../_variables/activated.html">$activated</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>((string)<a class="var it5511" onMouseOver="hilite(5511)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../_variables/tab.html">$tab</a>-&gt;<a onClick="logVariable('id')" class="var it44327" onMouseOver="hilite(44327)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it2444" onMouseOver="hilite(2444)" onMouseOut="lolite()" onClick="logVariable('activated')" href="../_variables/activated.html">$activated</a>);
<a name="l2976"><span class="linenum">2976</span></a>              <a class="var it5511" onMouseOver="hilite(5511)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../_variables/tab.html">$tab</a>-&gt;<a onClick="logVariable('selected')" class="var it44327" onMouseOver="hilite(44327)" onMouseOut="lolite()" href="../_variables/selected.html">selected</a> = (string)<a class="var it5511" onMouseOver="hilite(5511)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../_variables/tab.html">$tab</a>-&gt;<a onClick="logVariable('id')" class="var it44327" onMouseOver="hilite(44327)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../_variables/selected.html">$selected</a>;
<a name="l2977"><span class="linenum">2977</span></a>  
<a name="l2978"><span class="linenum">2978</span></a>              if (<a class="var it5511" onMouseOver="hilite(5511)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../_variables/tab.html">$tab</a>-&gt;<a onClick="logVariable('activated')" class="var it44327" onMouseOver="hilite(44327)" onMouseOut="lolite()" href="../_variables/activated.html">activated</a> || <a class="var it5511" onMouseOver="hilite(5511)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../_variables/tab.html">$tab</a>-&gt;<a onClick="logVariable('selected')" class="var it44327" onMouseOver="hilite(44327)" onMouseOut="lolite()" href="../_variables/selected.html">selected</a>) {
<a name="l2979"><span class="linenum">2979</span></a>                  <a class="var it5511" onMouseOver="hilite(5511)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../_variables/tab.html">$tab</a>-&gt;<a onClick="logVariable('subtree')" class="var it44327" onMouseOver="hilite(44327)" onMouseOut="lolite()" href="../_variables/subtree.html">subtree</a> = <a class="var it18406" onMouseOver="hilite(18406)" onMouseOut="lolite()" onClick="logVariable('subtree')" href="../_variables/subtree.html">$subtree</a>;
<a name="l2980"><span class="linenum">2980</span></a>              }
<a name="l2981"><span class="linenum">2981</span></a>              <a class="var it2105" onMouseOver="hilite(2105)" onMouseOut="lolite()" onClick="logVariable('tree')" href="../_variables/tree.html">$tree</a>[] = <a class="var it5511" onMouseOver="hilite(5511)" onMouseOut="lolite()" onClick="logVariable('tab')" href="../_variables/tab.html">$tab</a>;
<a name="l2982"><span class="linenum">2982</span></a>          }
<a name="l2983"><span class="linenum">2983</span></a>          <a class="var it18406" onMouseOver="hilite(18406)" onMouseOut="lolite()" onClick="logVariable('subtree')" href="../_variables/subtree.html">$subtree</a> = <a class="var it2105" onMouseOver="hilite(2105)" onMouseOut="lolite()" onClick="logVariable('tree')" href="../_variables/tree.html">$tree</a>;
<a name="l2984"><span class="linenum">2984</span></a>      }
<a name="l2985"><span class="linenum">2985</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('tabtree')" href="../_functions/tabtree.html" onMouseOver="funcPopup(event,'tabtree')">tabtree</a>(<a class="var it18406" onMouseOver="hilite(18406)" onMouseOut="lolite()" onClick="logVariable('subtree')" href="../_variables/subtree.html">$subtree</a>);
<a name="l2986"><span class="linenum">2986</span></a>      if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>) {
<a name="l2987"><span class="linenum">2987</span></a>          return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2988"><span class="linenum">2988</span></a>      } else {
<a name="l2989"><span class="linenum">2989</span></a>          print <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l2990"><span class="linenum">2990</span></a>          return !empty(<a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l2991"><span class="linenum">2991</span></a>      }
<a name="l2992"><span class="linenum">2992</span></a>  }
<a name="l2993"><span class="linenum">2993</span></a>  
<a name="l2994"><span class="linenum">2994</span></a>  <span class="comment">/**</span>
<a name="l2995"><span class="linenum">2995</span></a>  <span class="comment"> * Alter debugging level for the current request,</span>
<a name="l2996"><span class="linenum">2996</span></a>  <span class="comment"> * the change is not saved in database.</span>
<a name="l2997"><span class="linenum">2997</span></a>  <span class="comment"> *</span>
<a name="l2998"><span class="linenum">2998</span></a>  <span class="comment"> * @param int $level one of the DEBUG_* constants</span>
<a name="l2999"><span class="linenum">2999</span></a>  <span class="comment"> * @param bool $debugdisplay</span>
<a name="l3000"><span class="linenum">3000</span></a>  <span class="comment"> */</span>
<a name="l3001"><span class="linenum">3001</span></a>  function <a class="function" onClick="logFunction('set_debugging')" href="../_functions/set_debugging.html" onMouseOver="funcPopup(event,'set_debugging')">set_debugging</a>(<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a>, <a class="var it6210" onMouseOver="hilite(6210)" onMouseOut="lolite()" onClick="logVariable('debugdisplay')" href="../_variables/debugdisplay.html">$debugdisplay</a> = null) {
<a name="l3002"><span class="linenum">3002</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3003"><span class="linenum">3003</span></a>  
<a name="l3004"><span class="linenum">3004</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debug')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debug.html">debug</a> = (int)<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a>;
<a name="l3005"><span class="linenum">3005</span></a>      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debugdeveloper')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debugdeveloper.html">debugdeveloper</a> = ((<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debug')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debug.html">debug</a> &amp; <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>) === <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l3006"><span class="linenum">3006</span></a>  
<a name="l3007"><span class="linenum">3007</span></a>      if (<a class="var it6210" onMouseOver="hilite(6210)" onMouseOut="lolite()" onClick="logVariable('debugdisplay')" href="../_variables/debugdisplay.html">$debugdisplay</a> !== null) {
<a name="l3008"><span class="linenum">3008</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debugdisplay')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debugdisplay.html">debugdisplay</a> = (bool)<a class="var it6210" onMouseOver="hilite(6210)" onMouseOut="lolite()" onClick="logVariable('debugdisplay')" href="../_variables/debugdisplay.html">$debugdisplay</a>;
<a name="l3009"><span class="linenum">3009</span></a>      }
<a name="l3010"><span class="linenum">3010</span></a>  }
<a name="l3011"><span class="linenum">3011</span></a>  
<a name="l3012"><span class="linenum">3012</span></a>  <span class="comment">/**</span>
<a name="l3013"><span class="linenum">3013</span></a>  <span class="comment"> * Standard Debugging Function</span>
<a name="l3014"><span class="linenum">3014</span></a>  <span class="comment"> *</span>
<a name="l3015"><span class="linenum">3015</span></a>  <span class="comment"> * Returns true if the current site debugging settings are equal or above specified level.</span>
<a name="l3016"><span class="linenum">3016</span></a>  <span class="comment"> * If passed a parameter it will emit a debugging notice similar to trigger_error(). The</span>
<a name="l3017"><span class="linenum">3017</span></a>  <span class="comment"> * routing of notices is controlled by $CFG-&gt;debugdisplay</span>
<a name="l3018"><span class="linenum">3018</span></a>  <span class="comment"> * eg use like this:</span>
<a name="l3019"><span class="linenum">3019</span></a>  <span class="comment"> *</span>
<a name="l3020"><span class="linenum">3020</span></a>  <span class="comment"> * 1)  debugging('a normal debug notice');</span>
<a name="l3021"><span class="linenum">3021</span></a>  <span class="comment"> * 2)  debugging('something really picky', DEBUG_ALL);</span>
<a name="l3022"><span class="linenum">3022</span></a>  <span class="comment"> * 3)  debugging('annoying debug message only for developers', DEBUG_DEVELOPER);</span>
<a name="l3023"><span class="linenum">3023</span></a>  <span class="comment"> * 4)  if (debugging()) { perform extra debugging operations (do not use print or echo) }</span>
<a name="l3024"><span class="linenum">3024</span></a>  <span class="comment"> *</span>
<a name="l3025"><span class="linenum">3025</span></a>  <span class="comment"> * In code blocks controlled by debugging() (such as example 4)</span>
<a name="l3026"><span class="linenum">3026</span></a>  <span class="comment"> * any output should be routed via debugging() itself, or the lower-level</span>
<a name="l3027"><span class="linenum">3027</span></a>  <span class="comment"> * trigger_error() or error_log(). Using echo or print will break XHTML</span>
<a name="l3028"><span class="linenum">3028</span></a>  <span class="comment"> * JS and HTTP headers.</span>
<a name="l3029"><span class="linenum">3029</span></a>  <span class="comment"> *</span>
<a name="l3030"><span class="linenum">3030</span></a>  <span class="comment"> * It is also possible to define NO_DEBUG_DISPLAY which redirects the message to error_log.</span>
<a name="l3031"><span class="linenum">3031</span></a>  <span class="comment"> *</span>
<a name="l3032"><span class="linenum">3032</span></a>  <span class="comment"> * @param string $message a message to print</span>
<a name="l3033"><span class="linenum">3033</span></a>  <span class="comment"> * @param int $level the level at which this debugging statement should show</span>
<a name="l3034"><span class="linenum">3034</span></a>  <span class="comment"> * @param array $backtrace use different backtrace</span>
<a name="l3035"><span class="linenum">3035</span></a>  <span class="comment"> * @return bool</span>
<a name="l3036"><span class="linenum">3036</span></a>  <span class="comment"> */</span>
<a name="l3037"><span class="linenum">3037</span></a>  function <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = '', <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a> = <a class="constant" onClick="logConstant('DEBUG_NORMAL')" href="../_constants/DEBUG_NORMAL.html" onMouseOver="constPopup(event,'DEBUG_NORMAL')">DEBUG_NORMAL</a>, <a class="var it16306" onMouseOver="hilite(16306)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../_variables/backtrace.html">$backtrace</a> = null) {
<a name="l3038"><span class="linenum">3038</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l3039"><span class="linenum">3039</span></a>  
<a name="l3040"><span class="linenum">3040</span></a>      <a class="var it18407" onMouseOver="hilite(18407)" onMouseOut="lolite()" onClick="logVariable('forcedebug')" href="../_variables/forcedebug.html">$forcedebug</a> = false;
<a name="l3041"><span class="linenum">3041</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debugusers')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debugusers.html">debugusers</a>) &amp;&amp; <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>) {
<a name="l3042"><span class="linenum">3042</span></a>          <a class="var it18408" onMouseOver="hilite(18408)" onMouseOut="lolite()" onClick="logVariable('debugusers')" href="../_variables/debugusers.html">$debugusers</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debugusers')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debugusers.html">debugusers</a>);
<a name="l3043"><span class="linenum">3043</span></a>          <a class="var it18407" onMouseOver="hilite(18407)" onMouseOut="lolite()" onClick="logVariable('forcedebug')" href="../_variables/forcedebug.html">$forcedebug</a> = <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it18408" onMouseOver="hilite(18408)" onMouseOut="lolite()" onClick="logVariable('debugusers')" href="../_variables/debugusers.html">$debugusers</a>);
<a name="l3044"><span class="linenum">3044</span></a>      }
<a name="l3045"><span class="linenum">3045</span></a>  
<a name="l3046"><span class="linenum">3046</span></a>      if (!<a class="var it18407" onMouseOver="hilite(18407)" onMouseOut="lolite()" onClick="logVariable('forcedebug')" href="../_variables/forcedebug.html">$forcedebug</a> and (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debug')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debug.html">debug</a>) || (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debug')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debug.html">debug</a> != -1 and <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debug')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debug.html">debug</a> &lt; <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a>))) {
<a name="l3047"><span class="linenum">3047</span></a>          return false;
<a name="l3048"><span class="linenum">3048</span></a>      }
<a name="l3049"><span class="linenum">3049</span></a>  
<a name="l3050"><span class="linenum">3050</span></a>      if (!isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debugdisplay')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debugdisplay.html">debugdisplay</a>)) {
<a name="l3051"><span class="linenum">3051</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debugdisplay')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debugdisplay.html">debugdisplay</a> = <a class="function" onClick="logFunction('ini_get_bool')" href="../_functions/ini_get_bool.html" onMouseOver="funcPopup(event,'ini_get_bool')">ini_get_bool</a>('display_errors');
<a name="l3052"><span class="linenum">3052</span></a>      }
<a name="l3053"><span class="linenum">3053</span></a>  
<a name="l3054"><span class="linenum">3054</span></a>      if (<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>) {
<a name="l3055"><span class="linenum">3055</span></a>          if (!<a class="var it16306" onMouseOver="hilite(16306)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../_variables/backtrace.html">$backtrace</a>) {
<a name="l3056"><span class="linenum">3056</span></a>              <a class="var it16306" onMouseOver="hilite(16306)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../_variables/backtrace.html">$backtrace</a> = <a class="phpfunction" onClick="logFunction('debug_backtrace')" href="../_functions/debug_backtrace.html" onMouseOver="phpfuncPopup(event,'debug_backtrace')">debug_backtrace</a>();
<a name="l3057"><span class="linenum">3057</span></a>          }
<a name="l3058"><span class="linenum">3058</span></a>          <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../_variables/from.html">$from</a> = <a class="function" onClick="logFunction('format_backtrace')" href="../_functions/format_backtrace.html" onMouseOver="funcPopup(event,'format_backtrace')">format_backtrace</a>(<a class="var it16306" onMouseOver="hilite(16306)" onMouseOut="lolite()" onClick="logVariable('backtrace')" href="../_variables/backtrace.html">$backtrace</a>, <a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a> || <a class="constant" onClick="logConstant('NO_DEBUG_DISPLAY')" href="../_constants/NO_DEBUG_DISPLAY.html" onMouseOver="constPopup(event,'NO_DEBUG_DISPLAY')">NO_DEBUG_DISPLAY</a>);
<a name="l3059"><span class="linenum">3059</span></a>          if (<a class="constant" onClick="logConstant('PHPUNIT_TEST')" href="../_constants/PHPUNIT_TEST.html" onMouseOver="constPopup(event,'PHPUNIT_TEST')">PHPUNIT_TEST</a>) {
<a name="l3060"><span class="linenum">3060</span></a>              if (<a class="class" onClick="logClass('phpunit_util')" href="../_classes/phpunit_util.html" onMouseOver="classPopup(event,'phpunit_util')">phpunit_util</a>::<a class="function" onClick="logFunction('debugging_triggered')" href="../_functions/debugging_triggered.html" onMouseOver="funcPopup(event,'debugging_triggered')">debugging_triggered</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../_variables/level.html">$level</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../_variables/from.html">$from</a>)) {
<a name="l3061"><span class="linenum">3061</span></a>  <span class="comment">                // We are inside test, the debug message was logged.</span>
<a name="l3062"><span class="linenum">3062</span></a>                  return true;
<a name="l3063"><span class="linenum">3063</span></a>              }
<a name="l3064"><span class="linenum">3064</span></a>          }
<a name="l3065"><span class="linenum">3065</span></a>  
<a name="l3066"><span class="linenum">3066</span></a>          if (<a class="constant" onClick="logConstant('NO_DEBUG_DISPLAY')" href="../_constants/NO_DEBUG_DISPLAY.html" onMouseOver="constPopup(event,'NO_DEBUG_DISPLAY')">NO_DEBUG_DISPLAY</a>) {
<a name="l3067"><span class="linenum">3067</span></a>  <span class="comment">            // Script does not want any errors or debugging in output,</span>
<a name="l3068"><span class="linenum">3068</span></a>  <span class="comment">            // we send the info to error log instead.</span>
<a name="l3069"><span class="linenum">3069</span></a>              <a class="phpfunction" onClick="logFunction('error_log')" href="../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>('Debugging: ' . <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> . ' in '. <a class="constant" onClick="logConstant('PHP_EOL')" href="../_constants/PHP_EOL.html" onMouseOver="constPopup(event,'PHP_EOL')">PHP_EOL</a> . <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../_variables/from.html">$from</a>);
<a name="l3070"><span class="linenum">3070</span></a>  
<a name="l3071"><span class="linenum">3071</span></a>          } else if (<a class="var it18407" onMouseOver="hilite(18407)" onMouseOut="lolite()" onClick="logVariable('forcedebug')" href="../_variables/forcedebug.html">$forcedebug</a> or <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debugdisplay')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/debugdisplay.html">debugdisplay</a>) {
<a name="l3072"><span class="linenum">3072</span></a>              if (!<a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('DEBUGGING_PRINTED')" href="../_constants/DEBUGGING_PRINTED.html" onMouseOver="constPopup(event,'DEBUGGING_PRINTED')">DEBUGGING_PRINTED</a>')) {
<a name="l3073"><span class="linenum">3073</span></a>                  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('DEBUGGING_PRINTED')" href="../_constants/DEBUGGING_PRINTED.html" onMouseOver="constPopup(event,'DEBUGGING_PRINTED')">DEBUGGING_PRINTED</a>', 1); <span class="comment">// Indicates we have printed something.</span>
<a name="l3074"><span class="linenum">3074</span></a>              }
<a name="l3075"><span class="linenum">3075</span></a>              if (<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a>) {
<a name="l3076"><span class="linenum">3076</span></a>                  echo &quot;++ <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> ++\n<a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../_variables/from.html">$from</a>&quot;;
<a name="l3077"><span class="linenum">3077</span></a>              } else {
<a name="l3078"><span class="linenum">3078</span></a>                  echo '&lt;div class=&quot;notifytiny debuggingmessage&quot; data-rel=&quot;debugging&quot;&gt;' , <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> , <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../_variables/from.html">$from</a> , '&lt;/div&gt;';
<a name="l3079"><span class="linenum">3079</span></a>              }
<a name="l3080"><span class="linenum">3080</span></a>  
<a name="l3081"><span class="linenum">3081</span></a>          } else {
<a name="l3082"><span class="linenum">3082</span></a>              <a class="phpfunction" onClick="logFunction('trigger_error')" href="../_functions/trigger_error.html" onMouseOver="phpfuncPopup(event,'trigger_error')">trigger_error</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> . <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../_variables/from.html">$from</a>, E_USER_NOTICE);
<a name="l3083"><span class="linenum">3083</span></a>          }
<a name="l3084"><span class="linenum">3084</span></a>      }
<a name="l3085"><span class="linenum">3085</span></a>      return true;
<a name="l3086"><span class="linenum">3086</span></a>  }
<a name="l3087"><span class="linenum">3087</span></a>  
<a name="l3088"><span class="linenum">3088</span></a>  <span class="comment">/**</span>
<a name="l3089"><span class="linenum">3089</span></a>  <span class="comment"> * Outputs a HTML comment to the browser.</span>
<a name="l3090"><span class="linenum">3090</span></a>  <span class="comment"> *</span>
<a name="l3091"><span class="linenum">3091</span></a>  <span class="comment"> * This is used for those hard-to-debug pages that use bits from many different files in very confusing ways (e.g. blocks).</span>
<a name="l3092"><span class="linenum">3092</span></a>  <span class="comment"> *</span>
<a name="l3093"><span class="linenum">3093</span></a>  <span class="comment"> * &lt;code&gt;print_location_comment(__FILE__, __LINE__);&lt;/code&gt;</span>
<a name="l3094"><span class="linenum">3094</span></a>  <span class="comment"> *</span>
<a name="l3095"><span class="linenum">3095</span></a>  <span class="comment"> * @param string $file</span>
<a name="l3096"><span class="linenum">3096</span></a>  <span class="comment"> * @param integer $line</span>
<a name="l3097"><span class="linenum">3097</span></a>  <span class="comment"> * @param boolean $return Whether to return or print the comment</span>
<a name="l3098"><span class="linenum">3098</span></a>  <span class="comment"> * @return string|void Void unless true given as third parameter</span>
<a name="l3099"><span class="linenum">3099</span></a>  <span class="comment"> */</span>
<a name="l3100"><span class="linenum">3100</span></a>  function <a class="function" onClick="logFunction('print_location_comment')" href="../_functions/print_location_comment.html" onMouseOver="funcPopup(event,'print_location_comment')">print_location_comment</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>, <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a>, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = false) {
<a name="l3101"><span class="linenum">3101</span></a>      if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>) {
<a name="l3102"><span class="linenum">3102</span></a>          return &quot;&lt;!-- <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> at line <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a> --&gt;\n&quot;;
<a name="l3103"><span class="linenum">3103</span></a>      } else {
<a name="l3104"><span class="linenum">3104</span></a>          echo &quot;&lt;!-- <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> at line <a class="var it148" onMouseOver="hilite(148)" onMouseOut="lolite()" onClick="logVariable('line')" href="../_variables/line.html">$line</a> --&gt;\n&quot;;
<a name="l3105"><span class="linenum">3105</span></a>      }
<a name="l3106"><span class="linenum">3106</span></a>  }
<a name="l3107"><span class="linenum">3107</span></a>  
<a name="l3108"><span class="linenum">3108</span></a>  
<a name="l3109"><span class="linenum">3109</span></a>  <span class="comment">/**</span>
<a name="l3110"><span class="linenum">3110</span></a>  <span class="comment"> * Returns true if the user is using a right-to-left language.</span>
<a name="l3111"><span class="linenum">3111</span></a>  <span class="comment"> *</span>
<a name="l3112"><span class="linenum">3112</span></a>  <span class="comment"> * @return boolean true if the current language is right-to-left (Hebrew, Arabic etc)</span>
<a name="l3113"><span class="linenum">3113</span></a>  <span class="comment"> */</span>
<a name="l3114"><span class="linenum">3114</span></a>  function <a class="function" onClick="logFunction('right_to_left')" href="../_functions/right_to_left.html" onMouseOver="funcPopup(event,'right_to_left')">right_to_left</a>() {
<a name="l3115"><span class="linenum">3115</span></a>      return (<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('thisdirection', 'langconfig') === 'rtl');
<a name="l3116"><span class="linenum">3116</span></a>  }
<a name="l3117"><span class="linenum">3117</span></a>  
<a name="l3118"><span class="linenum">3118</span></a>  
<a name="l3119"><span class="linenum">3119</span></a>  <span class="comment">/**</span>
<a name="l3120"><span class="linenum">3120</span></a>  <span class="comment"> * Returns swapped left&lt;=&gt; right if in RTL environment.</span>
<a name="l3121"><span class="linenum">3121</span></a>  <span class="comment"> *</span>
<a name="l3122"><span class="linenum">3122</span></a>  <span class="comment"> * Part of RTL Moodles support.</span>
<a name="l3123"><span class="linenum">3123</span></a>  <span class="comment"> *</span>
<a name="l3124"><span class="linenum">3124</span></a>  <span class="comment"> * @param string $align align to check</span>
<a name="l3125"><span class="linenum">3125</span></a>  <span class="comment"> * @return string</span>
<a name="l3126"><span class="linenum">3126</span></a>  <span class="comment"> */</span>
<a name="l3127"><span class="linenum">3127</span></a>  function <a class="function" onClick="logFunction('fix_align_rtl')" href="../_functions/fix_align_rtl.html" onMouseOver="funcPopup(event,'fix_align_rtl')">fix_align_rtl</a>(<a class="var it1850" onMouseOver="hilite(1850)" onMouseOut="lolite()" onClick="logVariable('align')" href="../_variables/align.html">$align</a>) {
<a name="l3128"><span class="linenum">3128</span></a>      if (!<a class="function" onClick="logFunction('right_to_left')" href="../_functions/right_to_left.html" onMouseOver="funcPopup(event,'right_to_left')">right_to_left</a>()) {
<a name="l3129"><span class="linenum">3129</span></a>          return <a class="var it1850" onMouseOver="hilite(1850)" onMouseOut="lolite()" onClick="logVariable('align')" href="../_variables/align.html">$align</a>;
<a name="l3130"><span class="linenum">3130</span></a>      }
<a name="l3131"><span class="linenum">3131</span></a>      if (<a class="var it1850" onMouseOver="hilite(1850)" onMouseOut="lolite()" onClick="logVariable('align')" href="../_variables/align.html">$align</a> == 'left') {
<a name="l3132"><span class="linenum">3132</span></a>          return 'right';
<a name="l3133"><span class="linenum">3133</span></a>      }
<a name="l3134"><span class="linenum">3134</span></a>      if (<a class="var it1850" onMouseOver="hilite(1850)" onMouseOut="lolite()" onClick="logVariable('align')" href="../_variables/align.html">$align</a> == 'right') {
<a name="l3135"><span class="linenum">3135</span></a>          return 'left';
<a name="l3136"><span class="linenum">3136</span></a>      }
<a name="l3137"><span class="linenum">3137</span></a>      return <a class="var it1850" onMouseOver="hilite(1850)" onMouseOut="lolite()" onClick="logVariable('align')" href="../_variables/align.html">$align</a>;
<a name="l3138"><span class="linenum">3138</span></a>  }
<a name="l3139"><span class="linenum">3139</span></a>  
<a name="l3140"><span class="linenum">3140</span></a>  
<a name="l3141"><span class="linenum">3141</span></a>  <span class="comment">/**</span>
<a name="l3142"><span class="linenum">3142</span></a>  <span class="comment"> * Returns true if the page is displayed in a popup window.</span>
<a name="l3143"><span class="linenum">3143</span></a>  <span class="comment"> *</span>
<a name="l3144"><span class="linenum">3144</span></a>  <span class="comment"> * Gets the information from the URL parameter inpopup.</span>
<a name="l3145"><span class="linenum">3145</span></a>  <span class="comment"> *</span>
<a name="l3146"><span class="linenum">3146</span></a>  <span class="comment"> * @todo Use a central function to create the popup calls all over Moodle and</span>
<a name="l3147"><span class="linenum">3147</span></a>  <span class="comment"> * In the moment only works with resources and probably questions.</span>
<a name="l3148"><span class="linenum">3148</span></a>  <span class="comment"> *</span>
<a name="l3149"><span class="linenum">3149</span></a>  <span class="comment"> * @return boolean</span>
<a name="l3150"><span class="linenum">3150</span></a>  <span class="comment"> */</span>
<a name="l3151"><span class="linenum">3151</span></a>  function <a class="function" onClick="logFunction('is_in_popup')" href="../_functions/is_in_popup.html" onMouseOver="funcPopup(event,'is_in_popup')">is_in_popup</a>() {
<a name="l3152"><span class="linenum">3152</span></a>      <a class="var it9731" onMouseOver="hilite(9731)" onMouseOut="lolite()" onClick="logVariable('inpopup')" href="../_variables/inpopup.html">$inpopup</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('inpopup', '', <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l3153"><span class="linenum">3153</span></a>  
<a name="l3154"><span class="linenum">3154</span></a>      return (<a class="var it9731" onMouseOver="hilite(9731)" onMouseOut="lolite()" onClick="logVariable('inpopup')" href="../_variables/inpopup.html">$inpopup</a>);
<a name="l3155"><span class="linenum">3155</span></a>  }
<a name="l3156"><span class="linenum">3156</span></a>  
<a name="l3157"><span class="linenum">3157</span></a>  <span class="comment">/**</span>
<a name="l3158"><span class="linenum">3158</span></a>  <span class="comment"> * Progress bar class.</span>
<a name="l3159"><span class="linenum">3159</span></a>  <span class="comment"> *</span>
<a name="l3160"><span class="linenum">3160</span></a>  <span class="comment"> * Manages the display of a progress bar.</span>
<a name="l3161"><span class="linenum">3161</span></a>  <span class="comment"> *</span>
<a name="l3162"><span class="linenum">3162</span></a>  <span class="comment"> * To use this class.</span>
<a name="l3163"><span class="linenum">3163</span></a>  <span class="comment"> * - construct</span>
<a name="l3164"><span class="linenum">3164</span></a>  <span class="comment"> * - call create (or use the 3rd param to the constructor)</span>
<a name="l3165"><span class="linenum">3165</span></a>  <span class="comment"> * - call update or update_full() or update() repeatedly</span>
<a name="l3166"><span class="linenum">3166</span></a>  <span class="comment"> *</span>
<a name="l3167"><span class="linenum">3167</span></a>  <span class="comment"> * @copyright 2008 jamiesensei</span>
<a name="l3168"><span class="linenum">3168</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3169"><span class="linenum">3169</span></a>  <span class="comment"> * @package core</span>
<a name="l3170"><span class="linenum">3170</span></a>  <span class="comment"> */</span>
<a name="l3171"><span class="linenum">3171</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('progress_bar')" href="../_classes/progress_bar.html" onMouseOver="classPopup(event,'progress_bar')">progress_bar</a> {
<a name="l3172"><span class="linenum">3172</span></a>  <span class="comment">    /** @var string html id */</span>
<a name="l3173"><span class="linenum">3173</span></a>      private <a class="var it18409" onMouseOver="hilite(18409)" onMouseOut="lolite()" onClick="logVariable('html_id')" href="../_variables/html_id.html">$html_id</a>;
<a name="l3174"><span class="linenum">3174</span></a>  <span class="comment">    /** @var int total width */</span>
<a name="l3175"><span class="linenum">3175</span></a>      private <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../_variables/width.html">$width</a>;
<a name="l3176"><span class="linenum">3176</span></a>  <span class="comment">    /** @var int last percentage printed */</span>
<a name="l3177"><span class="linenum">3177</span></a>      private <a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('percent')" href="../_variables/percent.html">$percent</a> = 0;
<a name="l3178"><span class="linenum">3178</span></a>  <span class="comment">    /** @var int time when last printed */</span>
<a name="l3179"><span class="linenum">3179</span></a>      private <a class="var it18410" onMouseOver="hilite(18410)" onMouseOut="lolite()" onClick="logVariable('lastupdate')" href="../_variables/lastupdate.html">$lastupdate</a> = 0;
<a name="l3180"><span class="linenum">3180</span></a>  <span class="comment">    /** @var int when did we start printing this */</span>
<a name="l3181"><span class="linenum">3181</span></a>      private <a class="var it18411" onMouseOver="hilite(18411)" onMouseOut="lolite()" onClick="logVariable('time_start')" href="../_variables/time_start.html">$time_start</a> = 0;
<a name="l3182"><span class="linenum">3182</span></a>  
<a name="l3183"><span class="linenum">3183</span></a>      <span class="comment">/**</span>
<a name="l3184"><span class="linenum">3184</span></a>  <span class="comment">     * Constructor</span>
<a name="l3185"><span class="linenum">3185</span></a>  <span class="comment">     *</span>
<a name="l3186"><span class="linenum">3186</span></a>  <span class="comment">     * Prints JS code if $autostart true.</span>
<a name="l3187"><span class="linenum">3187</span></a>  <span class="comment">     *</span>
<a name="l3188"><span class="linenum">3188</span></a>  <span class="comment">     * @param string $html_id</span>
<a name="l3189"><span class="linenum">3189</span></a>  <span class="comment">     * @param int $width</span>
<a name="l3190"><span class="linenum">3190</span></a>  <span class="comment">     * @param bool $autostart Default to false</span>
<a name="l3191"><span class="linenum">3191</span></a>  <span class="comment">     */</span>
<a name="l3192"><span class="linenum">3192</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it18412" onMouseOver="hilite(18412)" onMouseOut="lolite()" onClick="logVariable('htmlid')" href="../_variables/htmlid.html">$htmlid</a> = '', <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../_variables/width.html">$width</a> = 500, <a class="var it2505" onMouseOver="hilite(2505)" onMouseOut="lolite()" onClick="logVariable('autostart')" href="../_variables/autostart.html">$autostart</a> = false) {
<a name="l3193"><span class="linenum">3193</span></a>          if (!empty(<a class="var it18412" onMouseOver="hilite(18412)" onMouseOut="lolite()" onClick="logVariable('htmlid')" href="../_variables/htmlid.html">$htmlid</a>)) {
<a name="l3194"><span class="linenum">3194</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('html_id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/html_id.html">html_id</a>  = <a class="var it18412" onMouseOver="hilite(18412)" onMouseOut="lolite()" onClick="logVariable('htmlid')" href="../_variables/htmlid.html">$htmlid</a>;
<a name="l3195"><span class="linenum">3195</span></a>          } else {
<a name="l3196"><span class="linenum">3196</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('html_id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/html_id.html">html_id</a>  = 'pbar_'.<a class="phpfunction" onClick="logFunction('uniqid')" href="../_functions/uniqid.html" onMouseOver="phpfuncPopup(event,'uniqid')">uniqid</a>();
<a name="l3197"><span class="linenum">3197</span></a>          }
<a name="l3198"><span class="linenum">3198</span></a>  
<a name="l3199"><span class="linenum">3199</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('width')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/width.html">width</a> = <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('width')" href="../_variables/width.html">$width</a>;
<a name="l3200"><span class="linenum">3200</span></a>  
<a name="l3201"><span class="linenum">3201</span></a>          if (<a class="var it2505" onMouseOver="hilite(2505)" onMouseOut="lolite()" onClick="logVariable('autostart')" href="../_variables/autostart.html">$autostart</a>) {
<a name="l3202"><span class="linenum">3202</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>();
<a name="l3203"><span class="linenum">3203</span></a>          }
<a name="l3204"><span class="linenum">3204</span></a>      }
<a name="l3205"><span class="linenum">3205</span></a>  
<a name="l3206"><span class="linenum">3206</span></a>      <span class="comment">/**</span>
<a name="l3207"><span class="linenum">3207</span></a>  <span class="comment">     * Create a new progress bar, this function will output html.</span>
<a name="l3208"><span class="linenum">3208</span></a>  <span class="comment">     *</span>
<a name="l3209"><span class="linenum">3209</span></a>  <span class="comment">     * @return void Echo's output</span>
<a name="l3210"><span class="linenum">3210</span></a>  <span class="comment">     */</span>
<a name="l3211"><span class="linenum">3211</span></a>      public function <a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>() {
<a name="l3212"><span class="linenum">3212</span></a>          global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l3213"><span class="linenum">3213</span></a>  
<a name="l3214"><span class="linenum">3214</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('time_start')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/time_start.html">time_start</a> = <a class="phpfunction" onClick="logFunction('microtime')" href="../_functions/microtime.html" onMouseOver="phpfuncPopup(event,'microtime')">microtime</a>(true);
<a name="l3215"><span class="linenum">3215</span></a>          if (<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a>) {
<a name="l3216"><span class="linenum">3216</span></a>              return; <span class="comment">// Temporary solution for cli scripts.</span>
<a name="l3217"><span class="linenum">3217</span></a>          }
<a name="l3218"><span class="linenum">3218</span></a>  
<a name="l3219"><span class="linenum">3219</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('string_for_js')" href="../_functions/string_for_js.html" onMouseOver="funcPopup(event,'string_for_js')">string_for_js</a>('secondsleft', 'moodle');
<a name="l3220"><span class="linenum">3220</span></a>  
<a name="l3221"><span class="linenum">3221</span></a>          <a class="var it18413" onMouseOver="hilite(18413)" onMouseOut="lolite()" onClick="logVariable('htmlcode')" href="../_variables/htmlcode.html">$htmlcode</a> = &lt;&lt;&lt;EOT
<a name="l3222"><span class="linenum">3222</span></a>          &lt;div class=&quot;progressbar_container&quot; style=&quot;width: {<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('width')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/width.html">width</a>}px;&quot; id=&quot;{<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('html_id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/html_id.html">html_id</a>}&quot;&gt;
<a name="l3223"><span class="linenum">3223</span></a>              &lt;h2&gt;&lt;/h2&gt;
<a name="l3224"><span class="linenum">3224</span></a>              &lt;div class=&quot;progress progress-striped active&quot;&gt;
<a name="l3225"><span class="linenum">3225</span></a>                  &lt;div class=&quot;bar&quot; role=&quot;progressbar&quot; aria-valuemin=&quot;0&quot; aria-valuemax=&quot;100&quot; aria-valuenow=&quot;0&quot;&gt;&amp;nbsp;&lt;/div&gt;
<a name="l3226"><span class="linenum">3226</span></a>              &lt;/div&gt;
<a name="l3227"><span class="linenum">3227</span></a>              &lt;p&gt;&lt;/p&gt;
<a name="l3228"><span class="linenum">3228</span></a>          &lt;/div&gt;
<a name="l3229"><span class="linenum">3229</span></a>  EOT;
<a name="l3230"><span class="linenum">3230</span></a>          <a class="phpfunction" onClick="logFunction('flush')" href="../_functions/flush.html" onMouseOver="phpfuncPopup(event,'flush')">flush</a>();
<a name="l3231"><span class="linenum">3231</span></a>          echo <a class="var it18413" onMouseOver="hilite(18413)" onMouseOut="lolite()" onClick="logVariable('htmlcode')" href="../_variables/htmlcode.html">$htmlcode</a>;
<a name="l3232"><span class="linenum">3232</span></a>          <a class="phpfunction" onClick="logFunction('flush')" href="../_functions/flush.html" onMouseOver="phpfuncPopup(event,'flush')">flush</a>();
<a name="l3233"><span class="linenum">3233</span></a>      }
<a name="l3234"><span class="linenum">3234</span></a>  
<a name="l3235"><span class="linenum">3235</span></a>      <span class="comment">/**</span>
<a name="l3236"><span class="linenum">3236</span></a>  <span class="comment">     * Update the progress bar</span>
<a name="l3237"><span class="linenum">3237</span></a>  <span class="comment">     *</span>
<a name="l3238"><span class="linenum">3238</span></a>  <span class="comment">     * @param int $percent from 1-100</span>
<a name="l3239"><span class="linenum">3239</span></a>  <span class="comment">     * @param string $msg</span>
<a name="l3240"><span class="linenum">3240</span></a>  <span class="comment">     * @return void Echo's output</span>
<a name="l3241"><span class="linenum">3241</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l3242"><span class="linenum">3242</span></a>  <span class="comment">     */</span>
<a name="l3243"><span class="linenum">3243</span></a>      private function <a class="function" onClick="logFunction('_update')" href="../_functions/_update.html" onMouseOver="funcPopup(event,'_update')">_update</a>(<a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('percent')" href="../_variables/percent.html">$percent</a>, <a class="var it2085" onMouseOver="hilite(2085)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../_variables/msg.html">$msg</a>) {
<a name="l3244"><span class="linenum">3244</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('time_start')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/time_start.html">time_start</a>)) {
<a name="l3245"><span class="linenum">3245</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('You must call <a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>() (or use the <a class="var it2505" onMouseOver="hilite(2505)" onMouseOut="lolite()" onClick="logVariable('autostart')" href="../_variables/autostart.html">$autostart</a> ' .
<a name="l3246"><span class="linenum">3246</span></a>                      'argument to the constructor) before you try updating the progress bar.');
<a name="l3247"><span class="linenum">3247</span></a>          }
<a name="l3248"><span class="linenum">3248</span></a>  
<a name="l3249"><span class="linenum">3249</span></a>          if (<a class="constant" onClick="logConstant('CLI_SCRIPT')" href="../_constants/CLI_SCRIPT.html" onMouseOver="constPopup(event,'CLI_SCRIPT')">CLI_SCRIPT</a>) {
<a name="l3250"><span class="linenum">3250</span></a>              return; <span class="comment">// Temporary solution for cli scripts.</span>
<a name="l3251"><span class="linenum">3251</span></a>          }
<a name="l3252"><span class="linenum">3252</span></a>  
<a name="l3253"><span class="linenum">3253</span></a>          <a class="var it18414" onMouseOver="hilite(18414)" onMouseOut="lolite()" onClick="logVariable('estimate')" href="../_variables/estimate.html">$estimate</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('estimate')" href="../_functions/estimate.html" onMouseOver="funcPopup(event,'estimate')">estimate</a>(<a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('percent')" href="../_variables/percent.html">$percent</a>);
<a name="l3254"><span class="linenum">3254</span></a>  
<a name="l3255"><span class="linenum">3255</span></a>          if (<a class="var it18414" onMouseOver="hilite(18414)" onMouseOut="lolite()" onClick="logVariable('estimate')" href="../_variables/estimate.html">$estimate</a> === null) {
<a name="l3256"><span class="linenum">3256</span></a>  <span class="comment">            // Always do the first and last updates.</span>
<a name="l3257"><span class="linenum">3257</span></a>          } else if (<a class="var it18414" onMouseOver="hilite(18414)" onMouseOut="lolite()" onClick="logVariable('estimate')" href="../_variables/estimate.html">$estimate</a> == 0) {
<a name="l3258"><span class="linenum">3258</span></a>  <span class="comment">            // Always do the last updates.</span>
<a name="l3259"><span class="linenum">3259</span></a>          } else if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastupdate')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/lastupdate.html">lastupdate</a> + 20 &lt; <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>()) {
<a name="l3260"><span class="linenum">3260</span></a>  <span class="comment">            // We must update otherwise browser would time out.</span>
<a name="l3261"><span class="linenum">3261</span></a>          } else if (<a class="phpfunction" onClick="logFunction('round')" href="../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('percent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/percent.html">percent</a>, 2) === <a class="phpfunction" onClick="logFunction('round')" href="../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('percent')" href="../_variables/percent.html">$percent</a>, 2)) {
<a name="l3262"><span class="linenum">3262</span></a>  <span class="comment">            // No significant change, no need to update anything.</span>
<a name="l3263"><span class="linenum">3263</span></a>              return;
<a name="l3264"><span class="linenum">3264</span></a>          }
<a name="l3265"><span class="linenum">3265</span></a>          if (<a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it18414" onMouseOver="hilite(18414)" onMouseOut="lolite()" onClick="logVariable('estimate')" href="../_variables/estimate.html">$estimate</a>)) {
<a name="l3266"><span class="linenum">3266</span></a>              <a class="var it18414" onMouseOver="hilite(18414)" onMouseOut="lolite()" onClick="logVariable('estimate')" href="../_variables/estimate.html">$estimate</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('secondsleft', 'moodle', <a class="phpfunction" onClick="logFunction('round')" href="../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="var it18414" onMouseOver="hilite(18414)" onMouseOut="lolite()" onClick="logVariable('estimate')" href="../_variables/estimate.html">$estimate</a>, 2));
<a name="l3267"><span class="linenum">3267</span></a>          }
<a name="l3268"><span class="linenum">3268</span></a>  
<a name="l3269"><span class="linenum">3269</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('percent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/percent.html">percent</a> = <a class="phpfunction" onClick="logFunction('round')" href="../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('percent')" href="../_variables/percent.html">$percent</a>, 2);
<a name="l3270"><span class="linenum">3270</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastupdate')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/lastupdate.html">lastupdate</a> = <a class="phpfunction" onClick="logFunction('microtime')" href="../_functions/microtime.html" onMouseOver="phpfuncPopup(event,'microtime')">microtime</a>(true);
<a name="l3271"><span class="linenum">3271</span></a>  
<a name="l3272"><span class="linenum">3272</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('script')" href="../_functions/script.html" onMouseOver="funcPopup(event,'script')">script</a>(<a class="class" onClick="logClass('js_writer')" href="../_classes/js_writer.html" onMouseOver="classPopup(event,'js_writer')">js_writer</a>::<a class="function" onClick="logFunction('function_call')" href="../_functions/function_call.html" onMouseOver="funcPopup(event,'function_call')">function_call</a>('updateProgressBar',
<a name="l3273"><span class="linenum">3273</span></a>              array(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('html_id')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/html_id.html">html_id</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('percent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/percent.html">percent</a>, <a class="var it2085" onMouseOver="hilite(2085)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../_variables/msg.html">$msg</a>, <a class="var it18414" onMouseOver="hilite(18414)" onMouseOut="lolite()" onClick="logVariable('estimate')" href="../_variables/estimate.html">$estimate</a>)));
<a name="l3274"><span class="linenum">3274</span></a>          <a class="phpfunction" onClick="logFunction('flush')" href="../_functions/flush.html" onMouseOver="phpfuncPopup(event,'flush')">flush</a>();
<a name="l3275"><span class="linenum">3275</span></a>      }
<a name="l3276"><span class="linenum">3276</span></a>  
<a name="l3277"><span class="linenum">3277</span></a>      <span class="comment">/**</span>
<a name="l3278"><span class="linenum">3278</span></a>  <span class="comment">     * Estimate how much time it is going to take.</span>
<a name="l3279"><span class="linenum">3279</span></a>  <span class="comment">     *</span>
<a name="l3280"><span class="linenum">3280</span></a>  <span class="comment">     * @param int $pt from 1-100</span>
<a name="l3281"><span class="linenum">3281</span></a>  <span class="comment">     * @return mixed Null (unknown), or int</span>
<a name="l3282"><span class="linenum">3282</span></a>  <span class="comment">     */</span>
<a name="l3283"><span class="linenum">3283</span></a>      private function <a class="function" onClick="logFunction('estimate')" href="../_functions/estimate.html" onMouseOver="funcPopup(event,'estimate')">estimate</a>(<a class="var it15665" onMouseOver="hilite(15665)" onMouseOut="lolite()" onClick="logVariable('pt')" href="../_variables/pt.html">$pt</a>) {
<a name="l3284"><span class="linenum">3284</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastupdate')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/lastupdate.html">lastupdate</a> == 0) {
<a name="l3285"><span class="linenum">3285</span></a>              return null;
<a name="l3286"><span class="linenum">3286</span></a>          }
<a name="l3287"><span class="linenum">3287</span></a>          if (<a class="var it15665" onMouseOver="hilite(15665)" onMouseOut="lolite()" onClick="logVariable('pt')" href="../_variables/pt.html">$pt</a> &lt; 0.00001) {
<a name="l3288"><span class="linenum">3288</span></a>              return null; <span class="comment">// We do not know yet how long it will take.</span>
<a name="l3289"><span class="linenum">3289</span></a>          }
<a name="l3290"><span class="linenum">3290</span></a>          if (<a class="var it15665" onMouseOver="hilite(15665)" onMouseOut="lolite()" onClick="logVariable('pt')" href="../_variables/pt.html">$pt</a> &gt; 99.99999) {
<a name="l3291"><span class="linenum">3291</span></a>              return 0; <span class="comment">// Nearly done, right?</span>
<a name="l3292"><span class="linenum">3292</span></a>          }
<a name="l3293"><span class="linenum">3293</span></a>          <a class="var it16069" onMouseOver="hilite(16069)" onMouseOut="lolite()" onClick="logVariable('consumed')" href="../_variables/consumed.html">$consumed</a> = <a class="phpfunction" onClick="logFunction('microtime')" href="../_functions/microtime.html" onMouseOver="phpfuncPopup(event,'microtime')">microtime</a>(true) - <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('time_start')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/time_start.html">time_start</a>;
<a name="l3294"><span class="linenum">3294</span></a>          if (<a class="var it16069" onMouseOver="hilite(16069)" onMouseOut="lolite()" onClick="logVariable('consumed')" href="../_variables/consumed.html">$consumed</a> &lt; 0.001) {
<a name="l3295"><span class="linenum">3295</span></a>              return null;
<a name="l3296"><span class="linenum">3296</span></a>          }
<a name="l3297"><span class="linenum">3297</span></a>  
<a name="l3298"><span class="linenum">3298</span></a>          return (100 - <a class="var it15665" onMouseOver="hilite(15665)" onMouseOut="lolite()" onClick="logVariable('pt')" href="../_variables/pt.html">$pt</a>) * (<a class="var it16069" onMouseOver="hilite(16069)" onMouseOut="lolite()" onClick="logVariable('consumed')" href="../_variables/consumed.html">$consumed</a> / <a class="var it15665" onMouseOver="hilite(15665)" onMouseOut="lolite()" onClick="logVariable('pt')" href="../_variables/pt.html">$pt</a>);
<a name="l3299"><span class="linenum">3299</span></a>      }
<a name="l3300"><span class="linenum">3300</span></a>  
<a name="l3301"><span class="linenum">3301</span></a>      <span class="comment">/**</span>
<a name="l3302"><span class="linenum">3302</span></a>  <span class="comment">     * Update progress bar according percent</span>
<a name="l3303"><span class="linenum">3303</span></a>  <span class="comment">     *</span>
<a name="l3304"><span class="linenum">3304</span></a>  <span class="comment">     * @param int $percent from 1-100</span>
<a name="l3305"><span class="linenum">3305</span></a>  <span class="comment">     * @param string $msg the message needed to be shown</span>
<a name="l3306"><span class="linenum">3306</span></a>  <span class="comment">     */</span>
<a name="l3307"><span class="linenum">3307</span></a>      public function <a class="function" onClick="logFunction('update_full')" href="../_functions/update_full.html" onMouseOver="funcPopup(event,'update_full')">update_full</a>(<a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('percent')" href="../_variables/percent.html">$percent</a>, <a class="var it2085" onMouseOver="hilite(2085)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../_variables/msg.html">$msg</a>) {
<a name="l3308"><span class="linenum">3308</span></a>          <a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('percent')" href="../_variables/percent.html">$percent</a> = <a class="phpfunction" onClick="logFunction('max')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="phpfunction" onClick="logFunction('min')" href="../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(<a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('percent')" href="../_variables/percent.html">$percent</a>, 100), 0);
<a name="l3309"><span class="linenum">3309</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('_update')" href="../_functions/_update.html" onMouseOver="funcPopup(event,'_update')">_update</a>(<a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('percent')" href="../_variables/percent.html">$percent</a>, <a class="var it2085" onMouseOver="hilite(2085)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../_variables/msg.html">$msg</a>);
<a name="l3310"><span class="linenum">3310</span></a>      }
<a name="l3311"><span class="linenum">3311</span></a>  
<a name="l3312"><span class="linenum">3312</span></a>      <span class="comment">/**</span>
<a name="l3313"><span class="linenum">3313</span></a>  <span class="comment">     * Update progress bar according the number of tasks</span>
<a name="l3314"><span class="linenum">3314</span></a>  <span class="comment">     *</span>
<a name="l3315"><span class="linenum">3315</span></a>  <span class="comment">     * @param int $cur current task number</span>
<a name="l3316"><span class="linenum">3316</span></a>  <span class="comment">     * @param int $total total task number</span>
<a name="l3317"><span class="linenum">3317</span></a>  <span class="comment">     * @param string $msg message</span>
<a name="l3318"><span class="linenum">3318</span></a>  <span class="comment">     */</span>
<a name="l3319"><span class="linenum">3319</span></a>      public function <a class="function" onClick="logFunction('update')" href="../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>(<a class="var it537" onMouseOver="hilite(537)" onMouseOut="lolite()" onClick="logVariable('cur')" href="../_variables/cur.html">$cur</a>, <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('total')" href="../_variables/total.html">$total</a>, <a class="var it2085" onMouseOver="hilite(2085)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../_variables/msg.html">$msg</a>) {
<a name="l3320"><span class="linenum">3320</span></a>          <a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('percent')" href="../_variables/percent.html">$percent</a> = (<a class="var it537" onMouseOver="hilite(537)" onMouseOut="lolite()" onClick="logVariable('cur')" href="../_variables/cur.html">$cur</a> / <a class="var it519" onMouseOver="hilite(519)" onMouseOut="lolite()" onClick="logVariable('total')" href="../_variables/total.html">$total</a>) * 100;
<a name="l3321"><span class="linenum">3321</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('update_full')" href="../_functions/update_full.html" onMouseOver="funcPopup(event,'update_full')">update_full</a>(<a class="var it543" onMouseOver="hilite(543)" onMouseOut="lolite()" onClick="logVariable('percent')" href="../_variables/percent.html">$percent</a>, <a class="var it2085" onMouseOver="hilite(2085)" onMouseOut="lolite()" onClick="logVariable('msg')" href="../_variables/msg.html">$msg</a>);
<a name="l3322"><span class="linenum">3322</span></a>      }
<a name="l3323"><span class="linenum">3323</span></a>  
<a name="l3324"><span class="linenum">3324</span></a>      <span class="comment">/**</span>
<a name="l3325"><span class="linenum">3325</span></a>  <span class="comment">     * Restart the progress bar.</span>
<a name="l3326"><span class="linenum">3326</span></a>  <span class="comment">     */</span>
<a name="l3327"><span class="linenum">3327</span></a>      public function <a class="function" onClick="logFunction('restart')" href="../_functions/restart.html" onMouseOver="funcPopup(event,'restart')">restart</a>() {
<a name="l3328"><span class="linenum">3328</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('percent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/percent.html">percent</a>    = 0;
<a name="l3329"><span class="linenum">3329</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastupdate')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/lastupdate.html">lastupdate</a> = 0;
<a name="l3330"><span class="linenum">3330</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('time_start')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/time_start.html">time_start</a> = 0;
<a name="l3331"><span class="linenum">3331</span></a>      }
<a name="l3332"><span class="linenum">3332</span></a>  }
<a name="l3333"><span class="linenum">3333</span></a>  
<a name="l3334"><span class="linenum">3334</span></a>  <span class="comment">/**</span>
<a name="l3335"><span class="linenum">3335</span></a>  <span class="comment"> * Progress trace class.</span>
<a name="l3336"><span class="linenum">3336</span></a>  <span class="comment"> *</span>
<a name="l3337"><span class="linenum">3337</span></a>  <span class="comment"> * Use this class from long operations where you want to output occasional information about</span>
<a name="l3338"><span class="linenum">3338</span></a>  <span class="comment"> * what is going on, but don't know if, or in what format, the output should be.</span>
<a name="l3339"><span class="linenum">3339</span></a>  <span class="comment"> *</span>
<a name="l3340"><span class="linenum">3340</span></a>  <span class="comment"> * @copyright 2009 Tim Hunt</span>
<a name="l3341"><span class="linenum">3341</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3342"><span class="linenum">3342</span></a>  <span class="comment"> * @package core</span>
<a name="l3343"><span class="linenum">3343</span></a>  <span class="comment"> */</span>
<a name="l3344"><span class="linenum">3344</span></a>  abstract class progress_trace {
<a name="l3345"><span class="linenum">3345</span></a>      <span class="comment">/**</span>
<a name="l3346"><span class="linenum">3346</span></a>  <span class="comment">     * Output an progress message in whatever format.</span>
<a name="l3347"><span class="linenum">3347</span></a>  <span class="comment">     *</span>
<a name="l3348"><span class="linenum">3348</span></a>  <span class="comment">     * @param string $message the message to output.</span>
<a name="l3349"><span class="linenum">3349</span></a>  <span class="comment">     * @param integer $depth indent depth for this message.</span>
<a name="l3350"><span class="linenum">3350</span></a>  <span class="comment">     */</span>
<a name="l3351"><span class="linenum">3351</span></a>      abstract public function <a class="function" onClick="logFunction('output')" href="../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = 0);
<a name="l3352"><span class="linenum">3352</span></a>  
<a name="l3353"><span class="linenum">3353</span></a>      <span class="comment">/**</span>
<a name="l3354"><span class="linenum">3354</span></a>  <span class="comment">     * Called when the processing is finished.</span>
<a name="l3355"><span class="linenum">3355</span></a>  <span class="comment">     */</span>
<a name="l3356"><span class="linenum">3356</span></a>      public function <a class="function" onClick="logFunction('finished')" href="../_functions/finished.html" onMouseOver="funcPopup(event,'finished')">finished</a>() {
<a name="l3357"><span class="linenum">3357</span></a>      }
<a name="l3358"><span class="linenum">3358</span></a>  }
<a name="l3359"><span class="linenum">3359</span></a>  
<a name="l3360"><span class="linenum">3360</span></a>  <span class="comment">/**</span>
<a name="l3361"><span class="linenum">3361</span></a>  <span class="comment"> * This subclass of progress_trace does not ouput anything.</span>
<a name="l3362"><span class="linenum">3362</span></a>  <span class="comment"> *</span>
<a name="l3363"><span class="linenum">3363</span></a>  <span class="comment"> * @copyright 2009 Tim Hunt</span>
<a name="l3364"><span class="linenum">3364</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3365"><span class="linenum">3365</span></a>  <span class="comment"> * @package core</span>
<a name="l3366"><span class="linenum">3366</span></a>  <span class="comment"> */</span>
<a name="l3367"><span class="linenum">3367</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('null_progress_trace')" href="../_classes/null_progress_trace.html" onMouseOver="classPopup(event,'null_progress_trace')">null_progress_trace</a> extends progress_trace {
<a name="l3368"><span class="linenum">3368</span></a>      <span class="comment">/**</span>
<a name="l3369"><span class="linenum">3369</span></a>  <span class="comment">     * Does Nothing</span>
<a name="l3370"><span class="linenum">3370</span></a>  <span class="comment">     *</span>
<a name="l3371"><span class="linenum">3371</span></a>  <span class="comment">     * @param string $message</span>
<a name="l3372"><span class="linenum">3372</span></a>  <span class="comment">     * @param int $depth</span>
<a name="l3373"><span class="linenum">3373</span></a>  <span class="comment">     * @return void Does Nothing</span>
<a name="l3374"><span class="linenum">3374</span></a>  <span class="comment">     */</span>
<a name="l3375"><span class="linenum">3375</span></a>      public function <a class="function" onClick="logFunction('output')" href="../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = 0) {
<a name="l3376"><span class="linenum">3376</span></a>      }
<a name="l3377"><span class="linenum">3377</span></a>  }
<a name="l3378"><span class="linenum">3378</span></a>  
<a name="l3379"><span class="linenum">3379</span></a>  <span class="comment">/**</span>
<a name="l3380"><span class="linenum">3380</span></a>  <span class="comment"> * This subclass of progress_trace outputs to plain text.</span>
<a name="l3381"><span class="linenum">3381</span></a>  <span class="comment"> *</span>
<a name="l3382"><span class="linenum">3382</span></a>  <span class="comment"> * @copyright 2009 Tim Hunt</span>
<a name="l3383"><span class="linenum">3383</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3384"><span class="linenum">3384</span></a>  <span class="comment"> * @package core</span>
<a name="l3385"><span class="linenum">3385</span></a>  <span class="comment"> */</span>
<a name="l3386"><span class="linenum">3386</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('text_progress_trace')" href="../_classes/text_progress_trace.html" onMouseOver="classPopup(event,'text_progress_trace')">text_progress_trace</a> extends progress_trace {
<a name="l3387"><span class="linenum">3387</span></a>      <span class="comment">/**</span>
<a name="l3388"><span class="linenum">3388</span></a>  <span class="comment">     * Output the trace message.</span>
<a name="l3389"><span class="linenum">3389</span></a>  <span class="comment">     *</span>
<a name="l3390"><span class="linenum">3390</span></a>  <span class="comment">     * @param string $message</span>
<a name="l3391"><span class="linenum">3391</span></a>  <span class="comment">     * @param int $depth</span>
<a name="l3392"><span class="linenum">3392</span></a>  <span class="comment">     * @return void Output is echo'd</span>
<a name="l3393"><span class="linenum">3393</span></a>  <span class="comment">     */</span>
<a name="l3394"><span class="linenum">3394</span></a>      public function <a class="function" onClick="logFunction('output')" href="../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = 0) {
<a name="l3395"><span class="linenum">3395</span></a>          echo <a class="phpfunction" onClick="logFunction('str_repeat')" href="../_functions/str_repeat.html" onMouseOver="phpfuncPopup(event,'str_repeat')">str_repeat</a>('  ', <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>), <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, &quot;\n&quot;;
<a name="l3396"><span class="linenum">3396</span></a>          <a class="phpfunction" onClick="logFunction('flush')" href="../_functions/flush.html" onMouseOver="phpfuncPopup(event,'flush')">flush</a>();
<a name="l3397"><span class="linenum">3397</span></a>      }
<a name="l3398"><span class="linenum">3398</span></a>  }
<a name="l3399"><span class="linenum">3399</span></a>  
<a name="l3400"><span class="linenum">3400</span></a>  <span class="comment">/**</span>
<a name="l3401"><span class="linenum">3401</span></a>  <span class="comment"> * This subclass of progress_trace outputs as HTML.</span>
<a name="l3402"><span class="linenum">3402</span></a>  <span class="comment"> *</span>
<a name="l3403"><span class="linenum">3403</span></a>  <span class="comment"> * @copyright 2009 Tim Hunt</span>
<a name="l3404"><span class="linenum">3404</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3405"><span class="linenum">3405</span></a>  <span class="comment"> * @package core</span>
<a name="l3406"><span class="linenum">3406</span></a>  <span class="comment"> */</span>
<a name="l3407"><span class="linenum">3407</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('html_progress_trace')" href="../_classes/html_progress_trace.html" onMouseOver="classPopup(event,'html_progress_trace')">html_progress_trace</a> extends progress_trace {
<a name="l3408"><span class="linenum">3408</span></a>      <span class="comment">/**</span>
<a name="l3409"><span class="linenum">3409</span></a>  <span class="comment">     * Output the trace message.</span>
<a name="l3410"><span class="linenum">3410</span></a>  <span class="comment">     *</span>
<a name="l3411"><span class="linenum">3411</span></a>  <span class="comment">     * @param string $message</span>
<a name="l3412"><span class="linenum">3412</span></a>  <span class="comment">     * @param int $depth</span>
<a name="l3413"><span class="linenum">3413</span></a>  <span class="comment">     * @return void Output is echo'd</span>
<a name="l3414"><span class="linenum">3414</span></a>  <span class="comment">     */</span>
<a name="l3415"><span class="linenum">3415</span></a>      public function <a class="function" onClick="logFunction('output')" href="../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = 0) {
<a name="l3416"><span class="linenum">3416</span></a>          echo '&lt;p&gt;', <a class="phpfunction" onClick="logFunction('str_repeat')" href="../_functions/str_repeat.html" onMouseOver="phpfuncPopup(event,'str_repeat')">str_repeat</a>('&amp;#160;&amp;#160;', <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>), <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>), &quot;&lt;/p&gt;\n&quot;;
<a name="l3417"><span class="linenum">3417</span></a>          <a class="phpfunction" onClick="logFunction('flush')" href="../_functions/flush.html" onMouseOver="phpfuncPopup(event,'flush')">flush</a>();
<a name="l3418"><span class="linenum">3418</span></a>      }
<a name="l3419"><span class="linenum">3419</span></a>  }
<a name="l3420"><span class="linenum">3420</span></a>  
<a name="l3421"><span class="linenum">3421</span></a>  <span class="comment">/**</span>
<a name="l3422"><span class="linenum">3422</span></a>  <span class="comment"> * HTML List Progress Tree</span>
<a name="l3423"><span class="linenum">3423</span></a>  <span class="comment"> *</span>
<a name="l3424"><span class="linenum">3424</span></a>  <span class="comment"> * @copyright 2009 Tim Hunt</span>
<a name="l3425"><span class="linenum">3425</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3426"><span class="linenum">3426</span></a>  <span class="comment"> * @package core</span>
<a name="l3427"><span class="linenum">3427</span></a>  <span class="comment"> */</span>
<a name="l3428"><span class="linenum">3428</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('html_list_progress_trace')" href="../_classes/html_list_progress_trace.html" onMouseOver="classPopup(event,'html_list_progress_trace')">html_list_progress_trace</a> extends progress_trace {
<a name="l3429"><span class="linenum">3429</span></a>  <span class="comment">    /** @var int */</span>
<a name="l3430"><span class="linenum">3430</span></a>      protected <a class="var it18415" onMouseOver="hilite(18415)" onMouseOut="lolite()" onClick="logVariable('currentdepth')" href="../_variables/currentdepth.html">$currentdepth</a> = -1;
<a name="l3431"><span class="linenum">3431</span></a>  
<a name="l3432"><span class="linenum">3432</span></a>      <span class="comment">/**</span>
<a name="l3433"><span class="linenum">3433</span></a>  <span class="comment">     * Echo out the list</span>
<a name="l3434"><span class="linenum">3434</span></a>  <span class="comment">     *</span>
<a name="l3435"><span class="linenum">3435</span></a>  <span class="comment">     * @param string $message The message to display</span>
<a name="l3436"><span class="linenum">3436</span></a>  <span class="comment">     * @param int $depth</span>
<a name="l3437"><span class="linenum">3437</span></a>  <span class="comment">     * @return void Output is echoed</span>
<a name="l3438"><span class="linenum">3438</span></a>  <span class="comment">     */</span>
<a name="l3439"><span class="linenum">3439</span></a>      public function <a class="function" onClick="logFunction('output')" href="../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = 0) {
<a name="l3440"><span class="linenum">3440</span></a>          <a class="var it18416" onMouseOver="hilite(18416)" onMouseOut="lolite()" onClick="logVariable('samedepth')" href="../_variables/samedepth.html">$samedepth</a> = true;
<a name="l3441"><span class="linenum">3441</span></a>          while (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentdepth')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/currentdepth.html">currentdepth</a> &gt; <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>) {
<a name="l3442"><span class="linenum">3442</span></a>              echo &quot;&lt;/li&gt;\n&lt;/ul&gt;\n&quot;;
<a name="l3443"><span class="linenum">3443</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentdepth')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/currentdepth.html">currentdepth</a> -= 1;
<a name="l3444"><span class="linenum">3444</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentdepth')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/currentdepth.html">currentdepth</a> == <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>) {
<a name="l3445"><span class="linenum">3445</span></a>                  echo '&lt;li&gt;';
<a name="l3446"><span class="linenum">3446</span></a>              }
<a name="l3447"><span class="linenum">3447</span></a>              <a class="var it18416" onMouseOver="hilite(18416)" onMouseOut="lolite()" onClick="logVariable('samedepth')" href="../_variables/samedepth.html">$samedepth</a> = false;
<a name="l3448"><span class="linenum">3448</span></a>          }
<a name="l3449"><span class="linenum">3449</span></a>          while (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentdepth')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/currentdepth.html">currentdepth</a> &lt; <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>) {
<a name="l3450"><span class="linenum">3450</span></a>              echo &quot;&lt;ul&gt;\n&lt;li&gt;&quot;;
<a name="l3451"><span class="linenum">3451</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentdepth')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/currentdepth.html">currentdepth</a> += 1;
<a name="l3452"><span class="linenum">3452</span></a>              <a class="var it18416" onMouseOver="hilite(18416)" onMouseOut="lolite()" onClick="logVariable('samedepth')" href="../_variables/samedepth.html">$samedepth</a> = false;
<a name="l3453"><span class="linenum">3453</span></a>          }
<a name="l3454"><span class="linenum">3454</span></a>          if (<a class="var it18416" onMouseOver="hilite(18416)" onMouseOut="lolite()" onClick="logVariable('samedepth')" href="../_variables/samedepth.html">$samedepth</a>) {
<a name="l3455"><span class="linenum">3455</span></a>              echo &quot;&lt;/li&gt;\n&lt;li&gt;&quot;;
<a name="l3456"><span class="linenum">3456</span></a>          }
<a name="l3457"><span class="linenum">3457</span></a>          echo <a class="phpfunction" onClick="logFunction('htmlspecialchars')" href="../_functions/htmlspecialchars.html" onMouseOver="phpfuncPopup(event,'htmlspecialchars')">htmlspecialchars</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>);
<a name="l3458"><span class="linenum">3458</span></a>          <a class="phpfunction" onClick="logFunction('flush')" href="../_functions/flush.html" onMouseOver="phpfuncPopup(event,'flush')">flush</a>();
<a name="l3459"><span class="linenum">3459</span></a>      }
<a name="l3460"><span class="linenum">3460</span></a>  
<a name="l3461"><span class="linenum">3461</span></a>      <span class="comment">/**</span>
<a name="l3462"><span class="linenum">3462</span></a>  <span class="comment">     * Called when the processing is finished.</span>
<a name="l3463"><span class="linenum">3463</span></a>  <span class="comment">     */</span>
<a name="l3464"><span class="linenum">3464</span></a>      public function <a class="function" onClick="logFunction('finished')" href="../_functions/finished.html" onMouseOver="funcPopup(event,'finished')">finished</a>() {
<a name="l3465"><span class="linenum">3465</span></a>          while (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentdepth')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/currentdepth.html">currentdepth</a> &gt;= 0) {
<a name="l3466"><span class="linenum">3466</span></a>              echo &quot;&lt;/li&gt;\n&lt;/ul&gt;\n&quot;;
<a name="l3467"><span class="linenum">3467</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('currentdepth')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/currentdepth.html">currentdepth</a> -= 1;
<a name="l3468"><span class="linenum">3468</span></a>          }
<a name="l3469"><span class="linenum">3469</span></a>      }
<a name="l3470"><span class="linenum">3470</span></a>  }
<a name="l3471"><span class="linenum">3471</span></a>  
<a name="l3472"><span class="linenum">3472</span></a>  <span class="comment">/**</span>
<a name="l3473"><span class="linenum">3473</span></a>  <span class="comment"> * This subclass of progress_trace outputs to error log.</span>
<a name="l3474"><span class="linenum">3474</span></a>  <span class="comment"> *</span>
<a name="l3475"><span class="linenum">3475</span></a>  <span class="comment"> * @copyright Petr Skoda {@link http://skodak.org}</span>
<a name="l3476"><span class="linenum">3476</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3477"><span class="linenum">3477</span></a>  <span class="comment"> * @package core</span>
<a name="l3478"><span class="linenum">3478</span></a>  <span class="comment"> */</span>
<a name="l3479"><span class="linenum">3479</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('error_log_progress_trace')" href="../_classes/error_log_progress_trace.html" onMouseOver="classPopup(event,'error_log_progress_trace')">error_log_progress_trace</a> extends progress_trace {
<a name="l3480"><span class="linenum">3480</span></a>  <span class="comment">    /** @var string log prefix */</span>
<a name="l3481"><span class="linenum">3481</span></a>      protected <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../_variables/prefix.html">$prefix</a>;
<a name="l3482"><span class="linenum">3482</span></a>  
<a name="l3483"><span class="linenum">3483</span></a>      <span class="comment">/**</span>
<a name="l3484"><span class="linenum">3484</span></a>  <span class="comment">     * Constructor.</span>
<a name="l3485"><span class="linenum">3485</span></a>  <span class="comment">     * @param string $prefix optional log prefix</span>
<a name="l3486"><span class="linenum">3486</span></a>  <span class="comment">     */</span>
<a name="l3487"><span class="linenum">3487</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../_variables/prefix.html">$prefix</a> = '') {
<a name="l3488"><span class="linenum">3488</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/prefix.html">prefix</a> = <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../_variables/prefix.html">$prefix</a>;
<a name="l3489"><span class="linenum">3489</span></a>      }
<a name="l3490"><span class="linenum">3490</span></a>  
<a name="l3491"><span class="linenum">3491</span></a>      <span class="comment">/**</span>
<a name="l3492"><span class="linenum">3492</span></a>  <span class="comment">     * Output the trace message.</span>
<a name="l3493"><span class="linenum">3493</span></a>  <span class="comment">     *</span>
<a name="l3494"><span class="linenum">3494</span></a>  <span class="comment">     * @param string $message</span>
<a name="l3495"><span class="linenum">3495</span></a>  <span class="comment">     * @param int $depth</span>
<a name="l3496"><span class="linenum">3496</span></a>  <span class="comment">     * @return void Output is sent to error log.</span>
<a name="l3497"><span class="linenum">3497</span></a>  <span class="comment">     */</span>
<a name="l3498"><span class="linenum">3498</span></a>      public function <a class="function" onClick="logFunction('output')" href="../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = 0) {
<a name="l3499"><span class="linenum">3499</span></a>          <a class="phpfunction" onClick="logFunction('error_log')" href="../_functions/error_log.html" onMouseOver="phpfuncPopup(event,'error_log')">error_log</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/prefix.html">prefix</a> . <a class="phpfunction" onClick="logFunction('str_repeat')" href="../_functions/str_repeat.html" onMouseOver="phpfuncPopup(event,'str_repeat')">str_repeat</a>('  ', <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>) . <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>);
<a name="l3500"><span class="linenum">3500</span></a>      }
<a name="l3501"><span class="linenum">3501</span></a>  }
<a name="l3502"><span class="linenum">3502</span></a>  
<a name="l3503"><span class="linenum">3503</span></a>  <span class="comment">/**</span>
<a name="l3504"><span class="linenum">3504</span></a>  <span class="comment"> * Special type of trace that can be used for catching of output of other traces.</span>
<a name="l3505"><span class="linenum">3505</span></a>  <span class="comment"> *</span>
<a name="l3506"><span class="linenum">3506</span></a>  <span class="comment"> * @copyright Petr Skoda {@link http://skodak.org}</span>
<a name="l3507"><span class="linenum">3507</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3508"><span class="linenum">3508</span></a>  <span class="comment"> * @package core</span>
<a name="l3509"><span class="linenum">3509</span></a>  <span class="comment"> */</span>
<a name="l3510"><span class="linenum">3510</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('progress_trace_buffer')" href="../_classes/progress_trace_buffer.html" onMouseOver="classPopup(event,'progress_trace_buffer')">progress_trace_buffer</a> extends progress_trace {
<a name="l3511"><span class="linenum">3511</span></a>  <span class="comment">    /** @var progres_trace */</span>
<a name="l3512"><span class="linenum">3512</span></a>      protected <a class="var it748" onMouseOver="hilite(748)" onMouseOut="lolite()" onClick="logVariable('trace')" href="../_variables/trace.html">$trace</a>;
<a name="l3513"><span class="linenum">3513</span></a>  <span class="comment">    /** @var bool do we pass output out */</span>
<a name="l3514"><span class="linenum">3514</span></a>      protected <a class="var it18417" onMouseOver="hilite(18417)" onMouseOut="lolite()" onClick="logVariable('passthrough')" href="../_variables/passthrough.html">$passthrough</a>;
<a name="l3515"><span class="linenum">3515</span></a>  <span class="comment">    /** @var string output buffer */</span>
<a name="l3516"><span class="linenum">3516</span></a>      protected <a class="var it2320" onMouseOver="hilite(2320)" onMouseOut="lolite()" onClick="logVariable('buffer')" href="../_variables/buffer.html">$buffer</a>;
<a name="l3517"><span class="linenum">3517</span></a>  
<a name="l3518"><span class="linenum">3518</span></a>      <span class="comment">/**</span>
<a name="l3519"><span class="linenum">3519</span></a>  <span class="comment">     * Constructor.</span>
<a name="l3520"><span class="linenum">3520</span></a>  <span class="comment">     *</span>
<a name="l3521"><span class="linenum">3521</span></a>  <span class="comment">     * @param progress_trace $trace</span>
<a name="l3522"><span class="linenum">3522</span></a>  <span class="comment">     * @param bool $passthrough true means output and buffer, false means just buffer and no output</span>
<a name="l3523"><span class="linenum">3523</span></a>  <span class="comment">     */</span>
<a name="l3524"><span class="linenum">3524</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(progress_trace <a class="var it748" onMouseOver="hilite(748)" onMouseOut="lolite()" onClick="logVariable('trace')" href="../_variables/trace.html">$trace</a>, <a class="var it18417" onMouseOver="hilite(18417)" onMouseOut="lolite()" onClick="logVariable('passthrough')" href="../_variables/passthrough.html">$passthrough</a> = true) {
<a name="l3525"><span class="linenum">3525</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('trace')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/trace.html">trace</a>       = <a class="var it748" onMouseOver="hilite(748)" onMouseOut="lolite()" onClick="logVariable('trace')" href="../_variables/trace.html">$trace</a>;
<a name="l3526"><span class="linenum">3526</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('passthrough')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/passthrough.html">passthrough</a> = <a class="var it18417" onMouseOver="hilite(18417)" onMouseOut="lolite()" onClick="logVariable('passthrough')" href="../_variables/passthrough.html">$passthrough</a>;
<a name="l3527"><span class="linenum">3527</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('buffer')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/buffer.html">buffer</a>      = '';
<a name="l3528"><span class="linenum">3528</span></a>      }
<a name="l3529"><span class="linenum">3529</span></a>  
<a name="l3530"><span class="linenum">3530</span></a>      <span class="comment">/**</span>
<a name="l3531"><span class="linenum">3531</span></a>  <span class="comment">     * Output the trace message.</span>
<a name="l3532"><span class="linenum">3532</span></a>  <span class="comment">     *</span>
<a name="l3533"><span class="linenum">3533</span></a>  <span class="comment">     * @param string $message the message to output.</span>
<a name="l3534"><span class="linenum">3534</span></a>  <span class="comment">     * @param int $depth indent depth for this message.</span>
<a name="l3535"><span class="linenum">3535</span></a>  <span class="comment">     * @return void output stored in buffer</span>
<a name="l3536"><span class="linenum">3536</span></a>  <span class="comment">     */</span>
<a name="l3537"><span class="linenum">3537</span></a>      public function <a class="function" onClick="logFunction('output')" href="../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = 0) {
<a name="l3538"><span class="linenum">3538</span></a>          <a class="phpfunction" onClick="logFunction('ob_start')" href="../_functions/ob_start.html" onMouseOver="phpfuncPopup(event,'ob_start')">ob_start</a>();
<a name="l3539"><span class="linenum">3539</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('trace')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/trace.html">trace</a>-&gt;<a class="function" onClick="logFunction('output')" href="../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>);
<a name="l3540"><span class="linenum">3540</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('buffer')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/buffer.html">buffer</a> .= <a class="phpfunction" onClick="logFunction('ob_get_contents')" href="../_functions/ob_get_contents.html" onMouseOver="phpfuncPopup(event,'ob_get_contents')">ob_get_contents</a>();
<a name="l3541"><span class="linenum">3541</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('passthrough')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/passthrough.html">passthrough</a>) {
<a name="l3542"><span class="linenum">3542</span></a>              <a class="phpfunction" onClick="logFunction('ob_end_flush')" href="../_functions/ob_end_flush.html" onMouseOver="phpfuncPopup(event,'ob_end_flush')">ob_end_flush</a>();
<a name="l3543"><span class="linenum">3543</span></a>          } else {
<a name="l3544"><span class="linenum">3544</span></a>              <a class="phpfunction" onClick="logFunction('ob_end_clean')" href="../_functions/ob_end_clean.html" onMouseOver="phpfuncPopup(event,'ob_end_clean')">ob_end_clean</a>();
<a name="l3545"><span class="linenum">3545</span></a>          }
<a name="l3546"><span class="linenum">3546</span></a>      }
<a name="l3547"><span class="linenum">3547</span></a>  
<a name="l3548"><span class="linenum">3548</span></a>      <span class="comment">/**</span>
<a name="l3549"><span class="linenum">3549</span></a>  <span class="comment">     * Called when the processing is finished.</span>
<a name="l3550"><span class="linenum">3550</span></a>  <span class="comment">     */</span>
<a name="l3551"><span class="linenum">3551</span></a>      public function <a class="function" onClick="logFunction('finished')" href="../_functions/finished.html" onMouseOver="funcPopup(event,'finished')">finished</a>() {
<a name="l3552"><span class="linenum">3552</span></a>          <a class="phpfunction" onClick="logFunction('ob_start')" href="../_functions/ob_start.html" onMouseOver="phpfuncPopup(event,'ob_start')">ob_start</a>();
<a name="l3553"><span class="linenum">3553</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('trace')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/trace.html">trace</a>-&gt;<a class="function" onClick="logFunction('finished')" href="../_functions/finished.html" onMouseOver="funcPopup(event,'finished')">finished</a>();
<a name="l3554"><span class="linenum">3554</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('buffer')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/buffer.html">buffer</a> .= <a class="phpfunction" onClick="logFunction('ob_get_contents')" href="../_functions/ob_get_contents.html" onMouseOver="phpfuncPopup(event,'ob_get_contents')">ob_get_contents</a>();
<a name="l3555"><span class="linenum">3555</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('passthrough')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/passthrough.html">passthrough</a>) {
<a name="l3556"><span class="linenum">3556</span></a>              <a class="phpfunction" onClick="logFunction('ob_end_flush')" href="../_functions/ob_end_flush.html" onMouseOver="phpfuncPopup(event,'ob_end_flush')">ob_end_flush</a>();
<a name="l3557"><span class="linenum">3557</span></a>          } else {
<a name="l3558"><span class="linenum">3558</span></a>              <a class="phpfunction" onClick="logFunction('ob_end_clean')" href="../_functions/ob_end_clean.html" onMouseOver="phpfuncPopup(event,'ob_end_clean')">ob_end_clean</a>();
<a name="l3559"><span class="linenum">3559</span></a>          }
<a name="l3560"><span class="linenum">3560</span></a>      }
<a name="l3561"><span class="linenum">3561</span></a>  
<a name="l3562"><span class="linenum">3562</span></a>      <span class="comment">/**</span>
<a name="l3563"><span class="linenum">3563</span></a>  <span class="comment">     * Reset internal text buffer.</span>
<a name="l3564"><span class="linenum">3564</span></a>  <span class="comment">     */</span>
<a name="l3565"><span class="linenum">3565</span></a>      public function <a class="function" onClick="logFunction('reset_buffer')" href="../_functions/reset_buffer.html" onMouseOver="funcPopup(event,'reset_buffer')">reset_buffer</a>() {
<a name="l3566"><span class="linenum">3566</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('buffer')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/buffer.html">buffer</a> = '';
<a name="l3567"><span class="linenum">3567</span></a>      }
<a name="l3568"><span class="linenum">3568</span></a>  
<a name="l3569"><span class="linenum">3569</span></a>      <span class="comment">/**</span>
<a name="l3570"><span class="linenum">3570</span></a>  <span class="comment">     * Return internal text buffer.</span>
<a name="l3571"><span class="linenum">3571</span></a>  <span class="comment">     * @return string buffered plain text</span>
<a name="l3572"><span class="linenum">3572</span></a>  <span class="comment">     */</span>
<a name="l3573"><span class="linenum">3573</span></a>      public function <a class="function" onClick="logFunction('get_buffer')" href="../_functions/get_buffer.html" onMouseOver="funcPopup(event,'get_buffer')">get_buffer</a>() {
<a name="l3574"><span class="linenum">3574</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('buffer')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/buffer.html">buffer</a>;
<a name="l3575"><span class="linenum">3575</span></a>      }
<a name="l3576"><span class="linenum">3576</span></a>  }
<a name="l3577"><span class="linenum">3577</span></a>  
<a name="l3578"><span class="linenum">3578</span></a>  <span class="comment">/**</span>
<a name="l3579"><span class="linenum">3579</span></a>  <span class="comment"> * Special type of trace that can be used for redirecting to multiple other traces.</span>
<a name="l3580"><span class="linenum">3580</span></a>  <span class="comment"> *</span>
<a name="l3581"><span class="linenum">3581</span></a>  <span class="comment"> * @copyright Petr Skoda {@link http://skodak.org}</span>
<a name="l3582"><span class="linenum">3582</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3583"><span class="linenum">3583</span></a>  <span class="comment"> * @package core</span>
<a name="l3584"><span class="linenum">3584</span></a>  <span class="comment"> */</span>
<a name="l3585"><span class="linenum">3585</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('combined_progress_trace')" href="../_classes/combined_progress_trace.html" onMouseOver="classPopup(event,'combined_progress_trace')">combined_progress_trace</a> extends progress_trace {
<a name="l3586"><span class="linenum">3586</span></a>  
<a name="l3587"><span class="linenum">3587</span></a>      <span class="comment">/**</span>
<a name="l3588"><span class="linenum">3588</span></a>  <span class="comment">     * An array of traces.</span>
<a name="l3589"><span class="linenum">3589</span></a>  <span class="comment">     * @var array</span>
<a name="l3590"><span class="linenum">3590</span></a>  <span class="comment">     */</span>
<a name="l3591"><span class="linenum">3591</span></a>      protected <a class="var it18418" onMouseOver="hilite(18418)" onMouseOut="lolite()" onClick="logVariable('traces')" href="../_variables/traces.html">$traces</a>;
<a name="l3592"><span class="linenum">3592</span></a>  
<a name="l3593"><span class="linenum">3593</span></a>      <span class="comment">/**</span>
<a name="l3594"><span class="linenum">3594</span></a>  <span class="comment">     * Constructs a new instance.</span>
<a name="l3595"><span class="linenum">3595</span></a>  <span class="comment">     *</span>
<a name="l3596"><span class="linenum">3596</span></a>  <span class="comment">     * @param array $traces multiple traces</span>
<a name="l3597"><span class="linenum">3597</span></a>  <span class="comment">     */</span>
<a name="l3598"><span class="linenum">3598</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(array <a class="var it18418" onMouseOver="hilite(18418)" onMouseOut="lolite()" onClick="logVariable('traces')" href="../_variables/traces.html">$traces</a>) {
<a name="l3599"><span class="linenum">3599</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('traces')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/traces.html">traces</a> = <a class="var it18418" onMouseOver="hilite(18418)" onMouseOut="lolite()" onClick="logVariable('traces')" href="../_variables/traces.html">$traces</a>;
<a name="l3600"><span class="linenum">3600</span></a>      }
<a name="l3601"><span class="linenum">3601</span></a>  
<a name="l3602"><span class="linenum">3602</span></a>      <span class="comment">/**</span>
<a name="l3603"><span class="linenum">3603</span></a>  <span class="comment">     * Output an progress message in whatever format.</span>
<a name="l3604"><span class="linenum">3604</span></a>  <span class="comment">     *</span>
<a name="l3605"><span class="linenum">3605</span></a>  <span class="comment">     * @param string $message the message to output.</span>
<a name="l3606"><span class="linenum">3606</span></a>  <span class="comment">     * @param integer $depth indent depth for this message.</span>
<a name="l3607"><span class="linenum">3607</span></a>  <span class="comment">     */</span>
<a name="l3608"><span class="linenum">3608</span></a>      public function <a class="function" onClick="logFunction('output')" href="../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = 0) {
<a name="l3609"><span class="linenum">3609</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('traces')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/traces.html">traces</a> as <a class="var it748" onMouseOver="hilite(748)" onMouseOut="lolite()" onClick="logVariable('trace')" href="../_variables/trace.html">$trace</a>) {
<a name="l3610"><span class="linenum">3610</span></a>              <a class="var it748" onMouseOver="hilite(748)" onMouseOut="lolite()" onClick="logVariable('trace')" href="../_variables/trace.html">$trace</a>-&gt;<a class="function" onClick="logFunction('output')" href="../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>);
<a name="l3611"><span class="linenum">3611</span></a>          }
<a name="l3612"><span class="linenum">3612</span></a>      }
<a name="l3613"><span class="linenum">3613</span></a>  
<a name="l3614"><span class="linenum">3614</span></a>      <span class="comment">/**</span>
<a name="l3615"><span class="linenum">3615</span></a>  <span class="comment">     * Called when the processing is finished.</span>
<a name="l3616"><span class="linenum">3616</span></a>  <span class="comment">     */</span>
<a name="l3617"><span class="linenum">3617</span></a>      public function <a class="function" onClick="logFunction('finished')" href="../_functions/finished.html" onMouseOver="funcPopup(event,'finished')">finished</a>() {
<a name="l3618"><span class="linenum">3618</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('traces')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/traces.html">traces</a> as <a class="var it748" onMouseOver="hilite(748)" onMouseOut="lolite()" onClick="logVariable('trace')" href="../_variables/trace.html">$trace</a>) {
<a name="l3619"><span class="linenum">3619</span></a>              <a class="var it748" onMouseOver="hilite(748)" onMouseOut="lolite()" onClick="logVariable('trace')" href="../_variables/trace.html">$trace</a>-&gt;<a class="function" onClick="logFunction('finished')" href="../_functions/finished.html" onMouseOver="funcPopup(event,'finished')">finished</a>();
<a name="l3620"><span class="linenum">3620</span></a>          }
<a name="l3621"><span class="linenum">3621</span></a>      }
<a name="l3622"><span class="linenum">3622</span></a>  }
<a name="l3623"><span class="linenum">3623</span></a>  
<a name="l3624"><span class="linenum">3624</span></a>  <span class="comment">/**</span>
<a name="l3625"><span class="linenum">3625</span></a>  <span class="comment"> * Returns a localized sentence in the current language summarizing the current password policy</span>
<a name="l3626"><span class="linenum">3626</span></a>  <span class="comment"> *</span>
<a name="l3627"><span class="linenum">3627</span></a>  <span class="comment"> * @todo this should be handled by a function/method in the language pack library once we have a support for it</span>
<a name="l3628"><span class="linenum">3628</span></a>  <span class="comment"> * @uses $CFG</span>
<a name="l3629"><span class="linenum">3629</span></a>  <span class="comment"> * @return string</span>
<a name="l3630"><span class="linenum">3630</span></a>  <span class="comment"> */</span>
<a name="l3631"><span class="linenum">3631</span></a>  function <a class="function" onClick="logFunction('print_password_policy')" href="../_functions/print_password_policy.html" onMouseOver="funcPopup(event,'print_password_policy')">print_password_policy</a>() {
<a name="l3632"><span class="linenum">3632</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3633"><span class="linenum">3633</span></a>  
<a name="l3634"><span class="linenum">3634</span></a>      <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = '';
<a name="l3635"><span class="linenum">3635</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('passwordpolicy')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/passwordpolicy.html">passwordpolicy</a>)) {
<a name="l3636"><span class="linenum">3636</span></a>          <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a> = array();
<a name="l3637"><span class="linenum">3637</span></a>          <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>[] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('informminpasswordlength', 'auth', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('minpasswordlength')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/minpasswordlength.html">minpasswordlength</a>);
<a name="l3638"><span class="linenum">3638</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('minpassworddigits')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/minpassworddigits.html">minpassworddigits</a>)) {
<a name="l3639"><span class="linenum">3639</span></a>              <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>[] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('informminpassworddigits', 'auth', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('minpassworddigits')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/minpassworddigits.html">minpassworddigits</a>);
<a name="l3640"><span class="linenum">3640</span></a>          }
<a name="l3641"><span class="linenum">3641</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('minpasswordlower')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/minpasswordlower.html">minpasswordlower</a>)) {
<a name="l3642"><span class="linenum">3642</span></a>              <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>[] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('informminpasswordlower', 'auth', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('minpasswordlower')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/minpasswordlower.html">minpasswordlower</a>);
<a name="l3643"><span class="linenum">3643</span></a>          }
<a name="l3644"><span class="linenum">3644</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('minpasswordupper')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/minpasswordupper.html">minpasswordupper</a>)) {
<a name="l3645"><span class="linenum">3645</span></a>              <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>[] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('informminpasswordupper', 'auth', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('minpasswordupper')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/minpasswordupper.html">minpasswordupper</a>);
<a name="l3646"><span class="linenum">3646</span></a>          }
<a name="l3647"><span class="linenum">3647</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('minpasswordnonalphanum')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/minpasswordnonalphanum.html">minpasswordnonalphanum</a>)) {
<a name="l3648"><span class="linenum">3648</span></a>              <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>[] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('informminpasswordnonalphanum', 'auth', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('minpasswordnonalphanum')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/minpasswordnonalphanum.html">minpasswordnonalphanum</a>);
<a name="l3649"><span class="linenum">3649</span></a>          }
<a name="l3650"><span class="linenum">3650</span></a>  
<a name="l3651"><span class="linenum">3651</span></a>          <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a> = <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(', ', <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>); <span class="comment">// This is ugly but we do not have anything better yet...</span>
<a name="l3652"><span class="linenum">3652</span></a>          <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('informpasswordpolicy', 'auth', <a class="var it925" onMouseOver="hilite(925)" onMouseOut="lolite()" onClick="logVariable('messages')" href="../_variables/messages.html">$messages</a>);
<a name="l3653"><span class="linenum">3653</span></a>      }
<a name="l3654"><span class="linenum">3654</span></a>      return <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>;
<a name="l3655"><span class="linenum">3655</span></a>  }
<a name="l3656"><span class="linenum">3656</span></a>  
<a name="l3657"><span class="linenum">3657</span></a>  <span class="comment">/**</span>
<a name="l3658"><span class="linenum">3658</span></a>  <span class="comment"> * Get the value of a help string fully prepared for display in the current language.</span>
<a name="l3659"><span class="linenum">3659</span></a>  <span class="comment"> *</span>
<a name="l3660"><span class="linenum">3660</span></a>  <span class="comment"> * @param string $identifier The identifier of the string to search for.</span>
<a name="l3661"><span class="linenum">3661</span></a>  <span class="comment"> * @param string $component The module the string is associated with.</span>
<a name="l3662"><span class="linenum">3662</span></a>  <span class="comment"> * @param boolean $ajax Whether this help is called from an AJAX script.</span>
<a name="l3663"><span class="linenum">3663</span></a>  <span class="comment"> *                This is used to influence text formatting and determines</span>
<a name="l3664"><span class="linenum">3664</span></a>  <span class="comment"> *                which format to output the doclink in.</span>
<a name="l3665"><span class="linenum">3665</span></a>  <span class="comment"> * @param string|object|array $a An object, string or number that can be used</span>
<a name="l3666"><span class="linenum">3666</span></a>  <span class="comment"> *      within translation strings</span>
<a name="l3667"><span class="linenum">3667</span></a>  <span class="comment"> * @return Object An object containing:</span>
<a name="l3668"><span class="linenum">3668</span></a>  <span class="comment"> * - heading: Any heading that there may be for this help string.</span>
<a name="l3669"><span class="linenum">3669</span></a>  <span class="comment"> * - text: The wiki-formatted help string.</span>
<a name="l3670"><span class="linenum">3670</span></a>  <span class="comment"> * - doclink: An object containing a link, the linktext, and any additional</span>
<a name="l3671"><span class="linenum">3671</span></a>  <span class="comment"> *            CSS classes to apply to that link. Only present if $ajax = false.</span>
<a name="l3672"><span class="linenum">3672</span></a>  <span class="comment"> * - completedoclink: A text representation of the doclink. Only present if $ajax = true.</span>
<a name="l3673"><span class="linenum">3673</span></a>  <span class="comment"> */</span>
<a name="l3674"><span class="linenum">3674</span></a>  function <a class="function" onClick="logFunction('get_formatted_help_string')" href="../_functions/get_formatted_help_string.html" onMouseOver="funcPopup(event,'get_formatted_help_string')">get_formatted_help_string</a>(<a class="var it724" onMouseOver="hilite(724)" onMouseOut="lolite()" onClick="logVariable('identifier')" href="../_variables/identifier.html">$identifier</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it6190" onMouseOver="hilite(6190)" onMouseOut="lolite()" onClick="logVariable('ajax')" href="../_variables/ajax.html">$ajax</a> = false, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = null) {
<a name="l3675"><span class="linenum">3675</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l3676"><span class="linenum">3676</span></a>      <a class="var it13767" onMouseOver="hilite(13767)" onMouseOut="lolite()" onClick="logVariable('sm')" href="../_variables/sm.html">$sm</a> = <a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>();
<a name="l3677"><span class="linenum">3677</span></a>  
<a name="l3678"><span class="linenum">3678</span></a>  <span class="comment">    // Do not rebuild caches here!</span>
<a name="l3679"><span class="linenum">3679</span></a>  <span class="comment">    // Devs need to learn to purge all caches after any change or disable $CFG-&gt;langstringcache.</span>
<a name="l3680"><span class="linenum">3680</span></a>  
<a name="l3681"><span class="linenum">3681</span></a>      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = new stdClass();
<a name="l3682"><span class="linenum">3682</span></a>  
<a name="l3683"><span class="linenum">3683</span></a>      if (<a class="var it13767" onMouseOver="hilite(13767)" onMouseOut="lolite()" onClick="logVariable('sm')" href="../_variables/sm.html">$sm</a>-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>(<a class="var it724" onMouseOver="hilite(724)" onMouseOut="lolite()" onClick="logVariable('identifier')" href="../_variables/identifier.html">$identifier</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)) {
<a name="l3684"><span class="linenum">3684</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('heading')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/heading.html">heading</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it724" onMouseOver="hilite(724)" onMouseOut="lolite()" onClick="logVariable('identifier')" href="../_variables/identifier.html">$identifier</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>));
<a name="l3685"><span class="linenum">3685</span></a>      } else {
<a name="l3686"><span class="linenum">3686</span></a>  <span class="comment">        // Gracefully fall back to an empty string.</span>
<a name="l3687"><span class="linenum">3687</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('heading')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/heading.html">heading</a> = '';
<a name="l3688"><span class="linenum">3688</span></a>      }
<a name="l3689"><span class="linenum">3689</span></a>  
<a name="l3690"><span class="linenum">3690</span></a>      if (<a class="var it13767" onMouseOver="hilite(13767)" onMouseOut="lolite()" onClick="logVariable('sm')" href="../_variables/sm.html">$sm</a>-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>(<a class="var it724" onMouseOver="hilite(724)" onMouseOut="lolite()" onClick="logVariable('identifier')" href="../_variables/identifier.html">$identifier</a> . '_help', <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)) {
<a name="l3691"><span class="linenum">3691</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = new stdClass();
<a name="l3692"><span class="linenum">3692</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('trusted')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../_variables/trusted.html">trusted</a> = false;
<a name="l3693"><span class="linenum">3693</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('noclean')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../_variables/noclean.html">noclean</a> = false;
<a name="l3694"><span class="linenum">3694</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('smiley')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../_variables/smiley.html">smiley</a> = false;
<a name="l3695"><span class="linenum">3695</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('filter')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../_variables/filter.html">filter</a> = false;
<a name="l3696"><span class="linenum">3696</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('para')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../_variables/para.html">para</a> = true;
<a name="l3697"><span class="linenum">3697</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('newlines')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../_variables/newlines.html">newlines</a> = false;
<a name="l3698"><span class="linenum">3698</span></a>          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('overflowdiv')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../_variables/overflowdiv.html">overflowdiv</a> = !<a class="var it6190" onMouseOver="hilite(6190)" onMouseOut="lolite()" onClick="logVariable('ajax')" href="../_variables/ajax.html">$ajax</a>;
<a name="l3699"><span class="linenum">3699</span></a>  
<a name="l3700"><span class="linenum">3700</span></a>  <span class="comment">        // Should be simple wiki only MDL-21695.</span>
<a name="l3701"><span class="linenum">3701</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('text')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/text.html">text</a> = <a class="function" onClick="logFunction('format_text')" href="../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it724" onMouseOver="hilite(724)" onMouseOut="lolite()" onClick="logVariable('identifier')" href="../_variables/identifier.html">$identifier</a>.'_help', <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>), <a class="constant" onClick="logConstant('FORMAT_MARKDOWN')" href="../_constants/FORMAT_MARKDOWN.html" onMouseOver="constPopup(event,'FORMAT_MARKDOWN')">FORMAT_MARKDOWN</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l3702"><span class="linenum">3702</span></a>  
<a name="l3703"><span class="linenum">3703</span></a>          <a class="var it18419" onMouseOver="hilite(18419)" onMouseOut="lolite()" onClick="logVariable('helplink')" href="../_variables/helplink.html">$helplink</a> = <a class="var it724" onMouseOver="hilite(724)" onMouseOut="lolite()" onClick="logVariable('identifier')" href="../_variables/identifier.html">$identifier</a> . '_link';
<a name="l3704"><span class="linenum">3704</span></a>          if (<a class="var it13767" onMouseOver="hilite(13767)" onMouseOut="lolite()" onClick="logVariable('sm')" href="../_variables/sm.html">$sm</a>-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>(<a class="var it18419" onMouseOver="hilite(18419)" onMouseOut="lolite()" onClick="logVariable('helplink')" href="../_variables/helplink.html">$helplink</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>)) {  // Link to further info in Moodle docs.
<a name="l3705"><span class="linenum">3705</span></a>              <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it18419" onMouseOver="hilite(18419)" onMouseOut="lolite()" onClick="logVariable('helplink')" href="../_variables/helplink.html">$helplink</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>);
<a name="l3706"><span class="linenum">3706</span></a>              <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../_variables/linktext.html">$linktext</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('morehelp');
<a name="l3707"><span class="linenum">3707</span></a>  
<a name="l3708"><span class="linenum">3708</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('doclink')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/doclink.html">doclink</a> = new stdClass();
<a name="l3709"><span class="linenum">3709</span></a>              <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="function" onClick="logFunction('get_docs_url')" href="../_functions/get_docs_url.html" onMouseOver="funcPopup(event,'get_docs_url')">get_docs_url</a>(<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>));
<a name="l3710"><span class="linenum">3710</span></a>              if (<a class="var it6190" onMouseOver="hilite(6190)" onMouseOut="lolite()" onClick="logVariable('ajax')" href="../_variables/ajax.html">$ajax</a>) {
<a name="l3711"><span class="linenum">3711</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('doclink')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/doclink.html">doclink</a>-&gt;link = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l3712"><span class="linenum">3712</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('doclink')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/doclink.html">doclink</a>-&gt;linktext = <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../_variables/linktext.html">$linktext</a>;
<a name="l3713"><span class="linenum">3713</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('doclink')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/doclink.html">doclink</a>-&gt;class = (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('doctonewwindow')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/doctonewwindow.html">doctonewwindow</a>) ? 'helplinkpopup' : '';
<a name="l3714"><span class="linenum">3714</span></a>              } else {
<a name="l3715"><span class="linenum">3715</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('completedoclink')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/completedoclink.html">completedoclink</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('div', <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('doc_link')" href="../_functions/doc_link.html" onMouseOver="funcPopup(event,'doc_link')">doc_link</a>(<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../_variables/link.html">$link</a>, <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('linktext')" href="../_variables/linktext.html">$linktext</a>),
<a name="l3716"><span class="linenum">3716</span></a>                      array('class' =&gt; 'helpdoclink'));
<a name="l3717"><span class="linenum">3717</span></a>              }
<a name="l3718"><span class="linenum">3718</span></a>          }
<a name="l3719"><span class="linenum">3719</span></a>      } else {
<a name="l3720"><span class="linenum">3720</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('text')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/text.html">text</a> = <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('p',
<a name="l3721"><span class="linenum">3721</span></a>              <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('strong', 'TODO') . &quot;: missing help string [{<a class="var it724" onMouseOver="hilite(724)" onMouseOut="lolite()" onClick="logVariable('identifier')" href="../_variables/identifier.html">$identifier</a>}_help, {<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../_variables/component.html">$component</a>}]&quot;);
<a name="l3722"><span class="linenum">3722</span></a>      }
<a name="l3723"><span class="linenum">3723</span></a>      return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>;
<a name="l3724"><span class="linenum">3724</span></a>  }
<a name="l3725"><span class="linenum">3725</span></a>  
<a name="l3726"><span class="linenum">3726</span></a>  <span class="comment">/**</span>
<a name="l3727"><span class="linenum">3727</span></a>  <span class="comment"> * Renders a hidden password field so that browsers won't incorrectly autofill password fields with the user's password.</span>
<a name="l3728"><span class="linenum">3728</span></a>  <span class="comment"> *</span>
<a name="l3729"><span class="linenum">3729</span></a>  <span class="comment"> * @since 3.0</span>
<a name="l3730"><span class="linenum">3730</span></a>  <span class="comment"> * @return string HTML to prevent password autofill</span>
<a name="l3731"><span class="linenum">3731</span></a>  <span class="comment"> */</span>
<a name="l3732"><span class="linenum">3732</span></a>  function <a class="function" onClick="logFunction('prevent_form_autofill_password')" href="../_functions/prevent_form_autofill_password.html" onMouseOver="funcPopup(event,'prevent_form_autofill_password')">prevent_form_autofill_password</a>() {
<a name="l3733"><span class="linenum">3733</span></a>      return '&lt;div class=&quot;hide&quot;&gt;&lt;input type=&quot;text&quot; class=&quot;ignoredirty&quot; /&gt;&lt;input type=&quot;password&quot; class=&quot;ignoredirty&quot; /&gt;&lt;/div&gt;';
<a name="l3734"><span class="linenum">3734</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'fix_align_rtl': ['fix_align_rtl', 'Returns swapped left<=> right if in RTL environment. ', [['lib','weblib.php',3119]], 1],
'make_webservice_pluginfile_url': ['make_webservice_pluginfile_url', 'Factory method for creation of url pointing to plugin file. This method is the same that make_pluginfile_url but pointing to the webservice pluginfile.php script. It should be used only in external functions. ', [['lib','weblib.php',794]], 12],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1086]], 293],
'params': ['params', 'Add an array of params to the params for this url. ', [['lib','weblib.php',392],['question/classes/bank/search','condition.php',43],['question/classes/bank/search','category_condition.php',100]], 93],
'set_scheme': ['set_scheme', 'Sets the scheme for the URI (the bit before ://) ', [['lib','weblib.php',707],['lib/simplepie/library/SimplePie','IRI.php',850]], 3],
'remove_params': ['remove_params', 'Remove all params if no arguments passed. Remove selected params if arguments are passed. ', [['lib','weblib.php',421]], 34],
'get_separator': ['get_separator', 'Returns the string to use as a separator ', [['lib','csslib.php',1314],['lib','weblib.php',2266],['question/type/numerical','questiontype.php',540],['mod/assign/feedback/offline','importgradeslib.php',160]], 8],
'restart': ['restart', 'Restart the progress bar. ', [['lib','weblib.php',3324],['lib/google/src/Google/Service','SQLAdmin.php',1203]], 2],
'is_https': ['is_https', 'Determines whether or not the Moodle site is being served over HTTPS. ', [['lib','weblib.php',205]], 20],
'function_call': ['function_call', 'Returns javascript code calling the function ', [['lib','outputcomponents.php',1890]], 9],
'fix_utf8': ['fix_utf8', 'Makes sure the data is using valid utf8, invalid characters are discarded. ', [['lib','moodlelib.php',1227]], 33],
'addmodule': ['addmodule', 'Adds a module to the current doctype by first registering it, and then tacking it on to the active doctype ', [['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',205]], 153],
'print_collapsible_region_start': ['print_collapsible_region_start', 'Print (or return) the start of a collapsible region ', [['lib','weblib.php',2303]], 34],
'make': ['make', 'Runs the entire \'make\' process. ', [['admin/tool/generator/classes','course_backend.php',202],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',38],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',33],['mod/quiz/accessrule/numattempts','rule.php',40],['cache/classes','loaders.php',163],['mod/quiz/accessrule','accessrulebase.php',63],['backup/util/ui','backup_ui_setting.class.php',234],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',60],['mod/quiz/accessrule/timelimit','rule.php',41],['mod/quiz/accessrule/openclosedate','rule.php',40],['lib/yuilib/2in3/2.9.0/build/yui2-logger','yui2-logger.js',655],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',52],['mod/quiz/accessrule/password','rule.php',40],['admin/tool/assignmentupgrade','locallib.php',110],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',64],['mod/quiz/accessrule/delaybetweenattempts','rule.php',40],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',96],['lib/htmlpurifier/HTMLPurifier','AttrDef.php',67],['mod/quiz/accessrule/ipaddress','rule.php',40],['mod/quiz/accessrule/securewindow','rule.php',55],['mod/quiz/accessrule/safebrowser','rule.php',40],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',42],['lib/yuilib/2in3/2.9.0/build/yui2-logger','yui2-logger-debug.js',655],['lib/htmlpurifier/HTMLPurifier','Length.php',52],['admin/tool/generator/classes','site_backend.php',89]], 198],
'compare': ['compare', '', [['lib/lessphp/Tree','Dimension.php',122],['lib','weblib.php',625],['lib','navigationlib.php',5157],['lib/lessphp/Tree','Color.php',186],['lib/lessphp/Tree','Anonymous.php',32],['lib/lessphp/Tree','Keyword.php',37],['lib/lessphp/Tree','Unit.php',56],['lib/lessphp/Tree','Quoted.php',66],['lib/horde/framework/Horde/Array/Sort','Helper.php',26]], 46],
'string_exists': ['string_exists', 'Does the string actually exist? ', [['lib/classes','string_manager_install.php',64],['lib/classes','string_manager_standard.php',263],['lib/classes','string_manager.php',50]], 85],
'mdie': ['mdie', 'Print an error to STDOUT and exit with a non-zero code. For commandline scripts. Default errorcode is 1. ', [['admin','mailout-debugger.php',60],['lib','weblib.php',2610]], 3],
'text_to_html': ['text_to_html', 'Given plain text, makes it into HTML as nicely as possible. ', [['lib','weblib.php',1890]], 35],
'p': ['p', 'Add quotes to HTML characters. ', [['lib','weblib.php',105],['lib/html2text','Html2Text.php',302]], 355],
'make_legacyfile_url': ['make_legacyfile_url', 'Factory method for creating of links to legacy course files. ', [['lib','weblib.php',837]], 2],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'get_user_preferences': ['get_user_preferences', 'Used to fetch user preference(s) ', [['lib','moodlelib.php',1974],['user','externallib.php',1381]], 188],
'set_title': ['set_title', 'Sets the title for the node ', [['lib','outputcomponents.php',2820],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_basiclti.php',57],['lib','pagelib.php',1157],['blocks/rss_client/classes/output','channel_image.php',110],['blocks/rss_client/classes/output','item.php',182],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['backup/cc/cc_lib','cc_page.php',38],['lib/classes','chart_base.php',222],['blocks/rss_client/classes/output','feed.php',113],['backup/cc/cc_lib','cc_metadata.php',225],['mod/wiki','pagelib.php',215],['backup/cc/cc_lib','cc_forum.php',39]], 460],
'box': ['box', 'Outputs a box. ', [['lib','outputrenderers.php',3089]], 288],
'get': ['get', 'Retrieves a variable reference from the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',36],['cache/stores/static','lib.php',220],['cache','disabledlib.php',55],['search/classes','document.php',299],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','DataTransfer.php',162],['lib/google/src/Google/Service','DataTransfer.php',208],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','AdSense.php',1076],['lib/google/src/Google/Service','AdSense.php',1155],['lib/google/src/Google/Service','AdSense.php',1303],['lib/google/src/Google/Service','AdSense.php',1519],['lib/google/src/Google/Service','AdSense.php',1631],['lib/google/src/Google/Service','AdSense.php',1773],['lib/google/src/Google/Service','AdSense.php',2047],['lib/google/src/Google/Service','Replicapool.php',420],['lib/google/src/Google/Service','Replicapool.php',575],['lib/google/src/Google/Service','Tasks.php',323],['lib/google/src/Google/Service','Tasks.php',442],['lib/google/src/Google/Service','Partners.php',362],['lib/google/src/Google/Service','AndroidPublisher.php',1247],['lib/google/src/Google/Service','AndroidPublisher.php',1349],['lib/google/src/Google/Service','AndroidPublisher.php',1510],['lib/google/src/Google/Service','AndroidPublisher.php',1573],['lib/google/src/Google/Service','AndroidPublisher.php',1796],['lib/google/src/Google/Service','AndroidPublisher.php',1884],['lib/google/src/Google/Service','AndroidPublisher.php',1948],['lib/google/src/Google/Service','AndroidPublisher.php',2098],['lib/google/src/Google/Service','AndroidPublisher.php',2223],['lib/google/src/Google/Service','AndroidPublisher.php',2293],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',146],['lib/google/src/Google/Service','YouTubeReporting.php',273],['lib/google/src/Google/Service','YouTubeReporting.php',326],['lib/google/src/Google/Service','Reseller.php',295],['lib/google/src/Google/Service','Reseller.php',458],['lib/google/src/Google/Cache','Memcache.php',74],['lib','filelib.php',3382],['lib','filelib.php',3630],['lib/google/src/Google/Service','Computeaccounts.php',432],['lib/google/src/Google/Service','Computeaccounts.php',512],['lib/google/src/Google/Service','Computeaccounts.php',683],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','MapsEngine.php',1530],['lib/google/src/Google/Service','MapsEngine.php',1709],['lib/google/src/Google/Service','MapsEngine.php',2006],['lib/google/src/Google/Service','MapsEngine.php',2268],['lib/google/src/Google/Service','MapsEngine.php',2360],['lib/google/src/Google/Service','MapsEngine.php',2666],['lib/google/src/Google/Service','MapsEngine.php',2927],['lib/google/src/Google/Service','MapsEngine.php',3118],['lib/google/src/Google/Cache','File.php',47],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Dns.php',307],['lib/google/src/Google/Service','Dns.php',393],['lib/google/src/Google/Service','Dns.php',444],['cache/classes','loaders.php',278],['cache/classes','loaders.php',1422],['cache/classes','loaders.php',1731],['lib/google/src/Google/Service','Appengine.php',320],['lib/google/src/Google/Service','Appengine.php',368],['lib/google/src/Google/Service','Appengine.php',472],['lib/google/src/Google/Service','Appengine.php',525],['lib/google/src/Google/Service','Urlshortener.php',109],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['lib/google/src/Google/Service','AdExchangeBuyer.php',759],['lib/google/src/Google/Service','AdExchangeBuyer.php',829],['lib/google/src/Google/Service','AdExchangeBuyer.php',870],['lib/google/src/Google/Service','AdExchangeBuyer.php',952],['lib/google/src/Google/Service','AdExchangeBuyer.php',1041],['lib/google/src/Google/Service','AdExchangeBuyer.php',1111],['lib/google/src/Google/Service','AdExchangeBuyer.php',1251],['lib/google/src/Google/Service','AdExchangeBuyer.php',1293],['lib/google/src/Google/Service','AdExchangeBuyer.php',1417],['lib/google/src/Google/Service','AdExchangeBuyer.php',1471],['lib/google/src/Google/Service','AdExchangeBuyer.php',1576],['lib/google/src/Google/Service','Books.php',1456],['lib/google/src/Google/Service','Books.php',1625],['lib/google/src/Google/Service','Books.php',1677],['lib/google/src/Google/Service','Books.php',1752],['lib/google/src/Google/Service','Books.php',2086],['lib/google/src/Google/Service','Books.php',2205],['lib/google/src/Google/Service','Books.php',2262],['lib/google/src/Google/Service','Books.php',2345],['lib/google/src/Google/Service','Books.php',2418],['lib/google/src/Google/Service','Books.php',2450],['lib/google/src/Google/Service','Oauth2.php',165],['lib/google/src/Google/Service','Oauth2.php',202],['lib/google/src/Google/Service','Analytics.php',1988],['lib/google/src/Google/Service','Analytics.php',2037],['lib/google/src/Google/Service','Analytics.php',2084],['lib/google/src/Google/Service','Analytics.php',2308],['lib/google/src/Google/Service','Analytics.php',2422],['lib/google/src/Google/Service','Analytics.php',2550],['lib/google/src/Google/Service','Analytics.php',2670],['lib/google/src/Google/Service','Analytics.php',2763],['lib/google/src/Google/Service','Analytics.php',2889],['lib/google/src/Google/Service','Analytics.php',3108],['lib/google/src/Google/Service','Analytics.php',3245],['lib/google/src/Google/Service','Analytics.php',3336],['lib/google/src/Google/Service','Analytics.php',3422],['lib/google/src/Google/Service','Analytics.php',3533],['lib/google/src/Google/Service','Coordinate.php',509],['lib/google/src/Google/Service','Coordinate.php',689],['lib','oauthlib.php',302],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/google/src/Google/Service','DeploymentManager.php',468],['lib/google/src/Google/Service','DeploymentManager.php',632],['lib/google/src/Google/Service','DeploymentManager.php',693],['lib/google/src/Google/Service','DeploymentManager.php',752],['lib/google/src/Google/Service','Blogger.php',945],['lib/google/src/Google/Service','Blogger.php',976],['lib/google/src/Google/Service','Blogger.php',1080],['lib/google/src/Google/Service','Blogger.php',1199],['lib/google/src/Google/Service','Blogger.php',1241],['lib/google/src/Google/Service','Blogger.php',1382],['lib/google/src/Google/Service','Blogger.php',1465],['lib/google/src/Google/Service','Blogger.php',1686],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['question/engine','states.php',116],['lib/google/src/Google/Service','Dataflow.php',292],['lib/horde/framework/Horde','Variables.php',135],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['competency/classes','persistent.php',86],['lib/google/src/Google/Service','CloudUserAccounts.php',542],['lib/google/src/Google/Service','CloudUserAccounts.php',643],['lib/google/src/Google/Service','CloudUserAccounts.php',908],['lib/google/src/Google/Service','Cloudresourcemanager.php',248],['lib/google/src/Google/Service','Cloudresourcemanager.php',427],['lib/editor/tinymce/classes','plugin.php',447],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','TagManager.php',950],['lib/google/src/Google/Service','TagManager.php',1036],['lib/google/src/Google/Service','TagManager.php',1128],['lib/google/src/Google/Service','TagManager.php',1280],['lib/google/src/Google/Service','TagManager.php',1373],['lib/google/src/Google/Service','TagManager.php',1467],['lib/google/src/Google/Service','TagManager.php',1561],['lib/google/src/Google/Service','TagManager.php',1711],['mod/lesson','locallib.php',3248],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapoolupdater.php',338],['lib/google/src/Google/Service','Replicapoolupdater.php',489],['lib/google/src/Google/Service','Bigquery.php',552],['lib/google/src/Google/Service','Bigquery.php',668],['lib/google/src/Google/Service','Bigquery.php',879],['lib/google/src/Google/Service','ShoppingContent.php',1066],['lib/google/src/Google/Service','ShoppingContent.php',1183],['lib/google/src/Google/Service','ShoppingContent.php',1283],['lib/google/src/Google/Service','ShoppingContent.php',1346],['lib/google/src/Google/Service','ShoppingContent.php',1464],['lib/google/src/Google/Service','ShoppingContent.php',1578],['lib/google/src/Google/Service','ShoppingContent.php',1773],['lib/google/src/Google/Service','ShoppingContent.php',1986],['lib/google/src/Google/Service','ShoppingContent.php',2063],['lib/google/src/Google/Service','Webmasters.php',371],['lib/google/src/Google/Service','Webmasters.php',464],['lib/google/src/Google/Service','Webmasters.php',540],['lib','navigationlib.php',384],['lib','navigationlib.php',836],['lib','navigationlib.php',2704],['lib','navigationlib.php',3139],['lib/google/src/Google/Service','Clouddebugger.php',399],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['lib/portfolio','exporter.php',134],['lib/google/src/Google/Service','Container.php',329],['lib/google/src/Google/Service','Container.php',396],['backup/cc/cc_lib/gral_lib','cssparser.php',147],['lib/horde/framework/Horde/Support','Array.php',30],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Storage.php',1059],['lib/google/src/Google/Service','Storage.php',1175],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1476],['lib/google/src/Google/Service','Storage.php',1709],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Genomics.php',660],['lib/google/src/Google/Service','Genomics.php',749],['lib/google/src/Google/Service','Genomics.php',918],['lib/google/src/Google/Service','Genomics.php',1007],['lib/google/src/Google/Service','Genomics.php',1185],['lib/google/src/Google/Service','Genomics.php',1268],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1475],['lib/google/src/Google/Service','Games.php',1220],['lib/google/src/Google/Service','Games.php',1339],['lib/google/src/Google/Service','Games.php',1441],['lib/google/src/Google/Service','Games.php',1699],['lib/google/src/Google/Service','Games.php',1806],['lib/google/src/Google/Service','Games.php',1948],['lib/google/src/Google/Service','Games.php',2082],['lib/google/src/Google/Service','Licensing.php',239],['lib/google/src/Google/Service','Fitness.php',417],['lib/google/src/Google/Service','Fitness.php',543],['lib/google/src/Google/Service','Reports.php',375],['lib/google/src/Google/Service','Reports.php',409],['lib/google/src/Google/Service','Gmail.php',779],['lib/google/src/Google/Service','Gmail.php',937],['lib/google/src/Google/Service','Gmail.php',1030],['lib/google/src/Google/Service','Gmail.php',1206],['lib/google/src/Google/Service','Gmail.php',1250],['lib/google/src/Google/Service','Taskqueue.php',264],['lib/google/src/Google/Service','Taskqueue.php',308],['lib/mustache/src/Mustache','HelperCollection.php',81],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Doubleclicksearch.php',257],['lib/google/src/Google/Service','Doubleclicksearch.php',381],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/google/src/Google/Service','Autoscaler.php',331],['lib/google/src/Google/Service','Autoscaler.php',445],['lib/google/src/Google/Service','AdExchangeSeller.php',444],['lib/google/src/Google/Service','AdExchangeSeller.php',552],['lib/google/src/Google/Service','AdExchangeSeller.php',666],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Prediction.php',276],['lib/behat/classes','behat_context_helper.php',63],['lib/google/src/Google/Service','SiteVerification.php',152],['lib/google/src/Google/Service','Drive.php',1333],['lib/google/src/Google/Service','Drive.php',1369],['lib/google/src/Google/Service','Drive.php',1422],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1617],['lib/google/src/Google/Service','Drive.php',1792],['lib/google/src/Google/Service','Drive.php',2054],['lib/google/src/Google/Service','Drive.php',2124],['lib/google/src/Google/Service','Drive.php',2256],['lib/google/src/Google/Service','Drive.php',2350],['lib/google/src/Google/Service','Drive.php',2418],['lib/google/src/Google/Service','Drive.php',2537],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Proximitybeacon.php',348],['lib/google/src/Google/Service','Groupssettings.php',108],['lib/google/src/Google/Service','Directory.php',1698],['lib/google/src/Google/Service','Directory.php',1766],['lib/google/src/Google/Service','Directory.php',1860],['lib/google/src/Google/Service','Directory.php',1930],['lib/google/src/Google/Service','Directory.php',2003],['lib/google/src/Google/Service','Directory.php',2072],['lib/google/src/Google/Service','Directory.php',2238],['lib/google/src/Google/Service','Directory.php',2365],['lib/google/src/Google/Service','Directory.php',2435],['lib/google/src/Google/Service','Directory.php',2531],['lib/google/src/Google/Service','Directory.php',2666],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',2850],['lib/google/src/Google/Service','Directory.php',2954],['lib/google/src/Google/Service','Directory.php',3012],['lib/google/src/Google/Service','Directory.php',3287],['lib/google/src/Google/Service','Fusiontables.php',659],['lib/google/src/Google/Service','Fusiontables.php',826],['lib/google/src/Google/Service','Fusiontables.php',950],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/google/src/Google/Service','AdSenseHost.php',645],['lib/google/src/Google/Service','AdSenseHost.php',686],['lib/google/src/Google/Service','AdSenseHost.php',751],['lib/google/src/Google/Service','AdSenseHost.php',918],['lib/google/src/Google/Service','AdSenseHost.php',1026],['lib/google/src/Google/Service','Plus.php',343],['lib/google/src/Google/Service','Plus.php',418],['lib/google/src/Google/Service','Plus.php',525],['lib/google/src/Google/Service','Mirror.php',438],['lib/google/src/Google/Service','Mirror.php',523],['lib/google/src/Google/Service','Mirror.php',563],['lib/google/src/Google/Service','Mirror.php',674],['lib/google/src/Google/Service','Mirror.php',786],['lib/google/src/Google/Service','AndroidEnterprise.php',1002],['lib/google/src/Google/Service','AndroidEnterprise.php',1109],['lib/google/src/Google/Service','AndroidEnterprise.php',1196],['lib/google/src/Google/Service','AndroidEnterprise.php',1312],['lib/google/src/Google/Service','AndroidEnterprise.php',1432],['lib/google/src/Google/Service','AndroidEnterprise.php',1524],['lib/google/src/Google/Service','AndroidEnterprise.php',1616],['lib/google/src/Google/Service','AndroidEnterprise.php',1705],['lib/google/src/Google/Service','AndroidEnterprise.php',1777],['lib/google/src/Google/Service','AndroidEnterprise.php',1879],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/testing/classes','nasty_strings.php',73],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/google/src/Google/Service','Playmoviespartner.php',411],['lib/google/src/Google/Service','Playmoviespartner.php',475],['lib/google/src/Google/Service','Playmoviespartner.php',580],['lib','coursecatlib.php',212],['lib/google/src/Google/Service','Cloudtrace.php',217],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['tag/classes','tag.php',190],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['competency/classes','url.php',55],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','Calendar.php',919],['lib/google/src/Google/Service','Calendar.php',1086],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1387],['lib/google/src/Google/Service','Calendar.php',1431],['lib/google/src/Google/Service','Calendar.php',1873],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['cache/stores/session','lib.php',225],['lib/google/src/Google/Service','Cloudbilling.php',162],['lib/google/src/Google/Service','PlusDomains.php',468],['lib/google/src/Google/Service','PlusDomains.php',593],['lib/google/src/Google/Service','PlusDomains.php',719],['lib/google/src/Google/Service','PlusDomains.php',813],['lib/google/src/Google/Service','Storagetransfer.php',248],['lib/google/src/Google/Service','Storagetransfer.php',295],['lib/google/src/Google/Service','Storagetransfer.php',396],['cache/stores/mongodb','lib.php',252],['lib/google/src/Google/Cache','Null.php',36],['lib/google/src/Google/Service','GamesConfiguration.php',265],['lib/google/src/Google/Service','GamesConfiguration.php',404],['cache/stores/file','lib.php',330],['cache/stores/memcached','lib.php',319],['lib/google/src/Google/Service','AppState.php',171],['lib/google/src/Google/Service','Resourceviews.php',354],['lib/google/src/Google/Service','Resourceviews.php',439],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','Classroom.php',484],['lib/google/src/Google/Service','Classroom.php',724],['lib/google/src/Google/Service','Classroom.php',830],['lib/google/src/Google/Service','Classroom.php',951],['lib/google/src/Google/Service','Classroom.php',1010],['lib/google/src/Google/Service','SQLAdmin.php',804],['lib/google/src/Google/Service','SQLAdmin.php',874],['lib/google/src/Google/Service','SQLAdmin.php',1076],['lib/google/src/Google/Service','SQLAdmin.php',1298],['lib/google/src/Google/Service','SQLAdmin.php',1387],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/google/src/Google/Service','Compute.php',4037],['lib/google/src/Google/Service','Compute.php',4166],['lib/google/src/Google/Service','Compute.php',4299],['lib/google/src/Google/Service','Compute.php',4460],['lib/google/src/Google/Service','Compute.php',4590],['lib/google/src/Google/Service','Compute.php',4686],['lib/google/src/Google/Service','Compute.php',4845],['lib/google/src/Google/Service','Compute.php',4957],['lib/google/src/Google/Service','Compute.php',5048],['lib/google/src/Google/Service','Compute.php',5188],['lib/google/src/Google/Service','Compute.php',5264],['lib/google/src/Google/Service','Compute.php',5394],['lib/google/src/Google/Service','Compute.php',5542],['lib/google/src/Google/Service','Compute.php',5726],['lib/google/src/Google/Service','Compute.php',6001],['lib/google/src/Google/Service','Compute.php',6171],['lib/google/src/Google/Service','Compute.php',6369],['lib/google/src/Google/Service','Compute.php',6595],['lib/google/src/Google/Service','Compute.php',6655],['lib/google/src/Google/Service','Compute.php',6732],['lib/google/src/Google/Service','Compute.php',6808],['lib/google/src/Google/Service','Compute.php',6914],['lib/google/src/Google/Service','Compute.php',6977],['lib/google/src/Google/Service','Compute.php',7052],['lib/google/src/Google/Service','Compute.php',7148],['lib/google/src/Google/Service','Compute.php',7223],['lib/google/src/Google/Service','Compute.php',7315],['lib/google/src/Google/Service','Compute.php',7425],['lib/google/src/Google/Service','Compute.php',7586],['lib/google/src/Google/Service','Compute.php',7750],['lib/google/src/Google/Service','Compute.php',7955],['lib/google/src/Google/Service','Compute.php',8050],['lib/google/src/Google/Service','Compute.php',8226],['lib/google/src/Google/Service','Compute.php',8321],['lib/google/src/Google/Service','Compute.php',8384],['lib/google/src/Google/Service','Pubsub.php',255],['lib/google/src/Google/Service','Pubsub.php',394],['lib/google/src/Google/Cache','Apc.php',52],['lib/google/src/Google/Service','Dfareporting.php',4559],['lib/google/src/Google/Service','Dfareporting.php',4587],['lib/google/src/Google/Service','Dfareporting.php',4629],['lib/google/src/Google/Service','Dfareporting.php',4671],['lib/google/src/Google/Service','Dfareporting.php',4779],['lib/google/src/Google/Service','Dfareporting.php',4867],['lib/google/src/Google/Service','Dfareporting.php',5014],['lib/google/src/Google/Service','Dfareporting.php',5117],['lib/google/src/Google/Service','Dfareporting.php',5308],['lib/google/src/Google/Service','Dfareporting.php',5427],['lib/google/src/Google/Service','Dfareporting.php',5525],['lib/google/src/Google/Service','Dfareporting.php',5580],['lib/google/src/Google/Service','Dfareporting.php',5683],['lib/google/src/Google/Service','Dfareporting.php',5769],['lib/google/src/Google/Service','Dfareporting.php',5891],['lib/google/src/Google/Service','Dfareporting.php',5997],['lib/google/src/Google/Service','Dfareporting.php',6105],['lib/google/src/Google/Service','Dfareporting.php',6255],['lib/google/src/Google/Service','Dfareporting.php',6314],['lib/google/src/Google/Service','Dfareporting.php',6411],['lib/google/src/Google/Service','Dfareporting.php',6529],['lib/google/src/Google/Service','Dfareporting.php',6609],['lib/google/src/Google/Service','Dfareporting.php',6746],['lib/google/src/Google/Service','Dfareporting.php',6862],['lib/google/src/Google/Service','Dfareporting.php',6940],['lib/google/src/Google/Service','Dfareporting.php',7011],['lib/google/src/Google/Service','Dfareporting.php',7131],['lib/google/src/Google/Service','Dfareporting.php',7172],['lib/google/src/Google/Service','Dfareporting.php',7214],['lib/google/src/Google/Service','Dfareporting.php',7256],['lib/google/src/Google/Service','Dfareporting.php',7320],['lib/google/src/Google/Service','Dfareporting.php',7378],['lib/google/src/Google/Service','Dfareporting.php',7517],['lib/google/src/Google/Service','Dfareporting.php',7640],['lib/google/src/Google/Service','Dfareporting.php',7771],['lib/google/src/Google/Service','Dfareporting.php',7812],['lib/google/src/Google/Service','Dfareporting.php',7853],['lib/google/src/Google/Service','Dfareporting.php',7935],['lib/google/src/Google/Service','Dfareporting.php',7995],['lib/google/src/Google/Service','Dfareporting.php',8116],['lib/google/src/Google/Service','Dfareporting.php',8258],['lib/google/src/Google/Service','Dfareporting.php',8307],['lib/google/src/Google/Service','Dfareporting.php',8421],['lib/google/src/Google/Service','Dfareporting.php',8482],['lib/google/src/Google/Service','Dfareporting.php',8584],['lib/google/src/Google/Service','Dfareporting.php',8643],['lib/google/src/Google/Service','Dfareporting.php',8682],['lib/google/src/Google/Service','Dfareporting.php',8724],['lib/google/src/Google/Service','Dfareporting.php',8782],['lib/google/src/Google/Service','Manager.php',259],['lib/google/src/Google/Service','Manager.php',338],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['lib','webdavlib.php',264]], 21532],
'reset_buffer': ['reset_buffer', 'Reset internal text buffer. ', [['lib','weblib.php',3562]], 2],
'validate_email': ['validate_email', 'Validates an email to make sure it makes sense. ', [['lib','weblib.php',1085]], 16],
'select': ['select', '', [['lib/jquery/ui-1.11.4/external/jquery','jquery.js',2845],['lib','outputcomponents.php',1265]], 591],
'get_port': ['get_port', 'Returns the \'port\' portion of a URL. For example, if the URL is http://www.example.org:447/my/file/is/here.txt?really=1 then this will return \'447\'. ', [['lib','weblib.php',935]], 2],
'format_module_intro': ['format_module_intro', 'Formats activity intro text ', [['lib','weblib.php',1542]], 65],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'make_pluginfile_url': ['make_pluginfile_url', 'Factory method for creation of url pointing to plugin file. ', [['lib','weblib.php',768]], 26],
'utf8ord': ['utf8ord', 'Returns the code of the given UTF-8 character ', [['lib/classes','text.php',670]], 7],
'continue_button': ['continue_button', 'Displays a continue button ', [['backup/util/ui','renderer.php',501],['lib','outputrenderers.php',2990]], 96],
'get_accesshide': ['get_accesshide', 'Return a HTML element with the class "accesshide", for accessibility. ', [['lib','weblib.php',2251]], 18],
'box_end': ['box_end', 'Outputs the closing section of a box. ', [['lib','outputrenderers.php',3117]], 257],
'make_draftfile_url': ['make_draftfile_url', 'Factory method for creation of url pointing to draft file of current user. ', [['lib','weblib.php',820]], 23],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'print_group_picture': ['print_group_picture', 'Print a specified group\'s avatar. ', [['lib','weblib.php',2365]], 9],
'wikify_links': ['wikify_links', 'This expression turns links into something nice in a text format. (Russell Jungwirth) ', [['lib','weblib.php',1497]], 3],
'filter_string': ['filter_string', 'Filter a piece of string ', [['lib','filterlib.php',224],['lib','filterlib.php',291],['lib','filterlib.php',338]], 2],
'rarrow': ['rarrow', 'Accessibility: Right arrow-like character is used in the breadcrumb trail, course navigation menu (previous/next activity), calendar, and search forum block. If the theme does not set characters, appropriate defaults are set automatically. Please DO NOT use &lt; &gt; &raquo; - these are confusing for blind users. ', [['lib','outputrenderers.php',3578]], 13],
'get_buffer': ['get_buffer', 'Return internal text buffer. ', [['lib','weblib.php',3569]], 9],
'update': ['update', 'In addition to update() as defined in grade_object, handle the grade_outcome and grade_scale objects. Force regrading if necessary, rounds the float numbers using php function, the reason is we need to compare the db value with computed number to skip regrading if possible. ', [['lib/grade','grade_item.php',274],['lib/google/src/Google/Service','Tasks.php',386],['lib/google/src/Google/Service','Tasks.php',556],['lib/google/src/Google/Service','AndroidPublisher.php',1413],['lib/google/src/Google/Service','AndroidPublisher.php',1545],['lib/google/src/Google/Service','AndroidPublisher.php',1615],['lib/google/src/Google/Service','AndroidPublisher.php',1853],['lib/google/src/Google/Service','AndroidPublisher.php',1919],['lib/google/src/Google/Service','AndroidPublisher.php',2003],['lib/google/src/Google/Service','AndroidPublisher.php',2177],['lib/google/src/Google/Service','Reseller.php',344],['lib/grade','grade_category.php',226],['lib/grade','grade_scale.php',125],['lib/adodb','adodb-active-record.inc.php',1004],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','YouTubeAnalytics.php',534],['completion','data_object.php',252],['mod/lesson/pagetypes','matching.php',308],['tag/classes','collection.php',215],['lib/google/src/Google/Service','AdExchangeBuyer.php',802],['lib/google/src/Google/Service','AdExchangeBuyer.php',906],['lib/google/src/Google/Service','AdExchangeBuyer.php',1013],['lib/google/src/Google/Service','AdExchangeBuyer.php',1181],['lib/google/src/Google/Service','AdExchangeBuyer.php',1357],['lib/google/src/Google/Service','AdExchangeBuyer.php',1640],['lib/google/src/Google/Service','Books.php',2025],['lib/grade','grade_grade.php',1009],['lib/grade','grade_outcome.php',144],['lib/google/src/Google/Service','Analytics.php',2215],['lib/google/src/Google/Service','Analytics.php',2388],['lib/google/src/Google/Service','Analytics.php',2501],['lib/google/src/Google/Service','Analytics.php',2626],['lib/google/src/Google/Service','Analytics.php',2736],['lib/google/src/Google/Service','Analytics.php',2843],['lib/google/src/Google/Service','Analytics.php',2971],['lib/google/src/Google/Service','Analytics.php',3062],['lib/google/src/Google/Service','Analytics.php',3185],['lib/google/src/Google/Service','Analytics.php',3502],['lib/google/src/Google/Service','Analytics.php',3604],['lib/google/src/Google/Service','Analytics.php',3686],['lib/google/src/Google/Service','Coordinate.php',611],['lib/google/src/Google/Service','Coordinate.php',727],['lib/google/src/Google/Service','DeploymentManager.php',589],['tag/classes/output','tagareacollection.php',68],['lib','weblib.php',3312],['lib/google/src/Google/Service','Blogger.php',1349],['lib/google/src/Google/Service','Blogger.php',1647],['lib/google/src/Google/Service','Dataflow.php',350],['tag/classes/output','tagcollname.php',58],['competency/classes','persistent.php',452],['lib/google/src/Google/Service','Cloudresourcemanager.php',344],['lib/google/src/Google/Service','Cloudresourcemanager.php',555],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1066],['lib/google/src/Google/Service','TagManager.php',1159],['lib/google/src/Google/Service','TagManager.php',1219],['lib/google/src/Google/Service','TagManager.php',1311],['lib/google/src/Google/Service','TagManager.php',1405],['lib/google/src/Google/Service','TagManager.php',1499],['lib/google/src/Google/Service','TagManager.php',1650],['lib/google/src/Google/Service','TagManager.php',1743],['mod/lesson','locallib.php',2691],['lib/google/src/Google/Service','Bigquery.php',621],['lib/google/src/Google/Service','Bigquery.php',953],['lib/google/src/Google/Service','ShoppingContent.php',1136],['lib/google/src/Google/Service','ShoppingContent.php',1238],['lib/google/src/Google/Service','ShoppingContent.php',1401],['lib/google/src/Google/Service','ShoppingContent.php',1534],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Clouddebugger.php',307],['lib/filestorage','stored_file.php',103],['lib/google/src/Google/Service','Container.php',366],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Storage.php',1127],['lib/google/src/Google/Service','Storage.php',1268],['lib/google/src/Google/Service','Storage.php',1423],['lib/google/src/Google/Service','Storage.php',1564],['lib/google/src/Google/Service','Storage.php',1904],['tag/classes/output','tagname.php',56],['tag/classes/output','tagcollsearchable.php',72],['lib/google/src/Google/Service','Games.php',1508],['lib/google/src/Google/Service','Licensing.php',335],['lib/google/src/Google/Service','Fitness.php',478],['lib/google/src/Google/Service','Fitness.php',691],['lib/google/src/Google/Service','Gmail.php',833],['lib/google/src/Google/Service','Gmail.php',986],['lib/google/src/Google/Service','Taskqueue.php',398],['lib/adodb','adodb-active-recordx.inc.php',1136],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Doubleclicksearch.php',326],['lib/google/src/Google/Service','Autoscaler.php',400],['tag/classes/output','tagisstandard.php',70],['lib/google/src/Google/Service','Prediction.php',339],['lib/google/src/Google/Service','SiteVerification.php',227],['lib/google/src/Google/Service','Drive.php',1691],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2208],['lib/google/src/Google/Service','Drive.php',2320],['lib/google/src/Google/Service','Drive.php',2370],['lib/google/src/Google/Service','Drive.php',2494],['lib/google/src/Google/Service','Drive.php',2582],['tag/classes/output','tagflag.php',71],['lib/google/src/Google/Service','Proximitybeacon.php',440],['lib/google/src/Google/Service','Groupssettings.php',138],['lib/google/src/Google/Service','Directory.php',1829],['lib/google/src/Google/Service','Directory.php',1889],['lib/google/src/Google/Service','Directory.php',2141],['lib/google/src/Google/Service','Directory.php',2306],['lib/google/src/Google/Service','Directory.php',2489],['lib/google/src/Google/Service','Directory.php',2597],['lib/google/src/Google/Service','Directory.php',2808],['lib/google/src/Google/Service','Directory.php',2910],['lib/google/src/Google/Service','Directory.php',3131],['lib/google/src/Google/Service','Directory.php',3317],['lib/google/src/Google/Service','Fusiontables.php',727],['lib/google/src/Google/Service','Fusiontables.php',892],['lib/google/src/Google/Service','Fusiontables.php',1094],['lib/google/src/Google/Service','Fusiontables.php',1269],['lib/google/src/Google/Service','AdSenseHost.php',846],['lib/google/src/Google/Service','AdSenseHost.php',1097],['course/classes/output','course_module_name.php',81],['lib/google/src/Google/Service','Mirror.php',496],['lib/google/src/Google/Service','Mirror.php',634],['lib/google/src/Google/Service','Mirror.php',745],['tag/classes','area.php',226],['lib/google/src/Google/Service','AndroidEnterprise.php',1064],['lib/google/src/Google/Service','AndroidEnterprise.php',1165],['lib/google/src/Google/Service','AndroidEnterprise.php',1489],['lib/google/src/Google/Service','AndroidEnterprise.php',1672],['grade/grading/form/rubric','lib.php',828],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['mod/lesson/pagetypes','essay.php',158],['lib','coursecatlib.php',438],['tag/classes','tag.php',893],['lib/google/src/Google/Service','Calendar.php',1006],['lib/google/src/Google/Service','Calendar.php',1181],['lib/google/src/Google/Service','Calendar.php',1333],['lib/google/src/Google/Service','Calendar.php',1714],['lib/google/src/Google/Service','PlusDomains.php',692],['lib/google/src/Google/Service','GamesConfiguration.php',334],['lib/google/src/Google/Service','GamesConfiguration.php',473],['mod/lesson/pagetypes','branchtable.php',262],['tag/classes/output','tagareashowstandard.php',64],['lib/google/src/Google/Service','AppState.php',202],['calendar','lib.php',2206],['tag/classes/output','tagareaenabled.php',69],['cohort/classes/output','cohortidnumber.php',53],['lib/google/src/Google/Service','Classroom.php',564],['cohort/classes/output','cohortname.php',53],['lib/google/src/Google/Service','SQLAdmin.php',947],['lib/google/src/Google/Service','SQLAdmin.php',1267],['lib/google/src/Google/Service','SQLAdmin.php',1534],['grade/grading/form/guide','lib.php',836],['lib/google/src/Google/Service','Compute.php',4253],['lib/google/src/Google/Service','Compute.php',4398],['lib/google/src/Google/Service','Compute.php',4767],['lib/google/src/Google/Service','Compute.php',5348],['lib/google/src/Google/Service','Compute.php',5478],['lib/google/src/Google/Service','Compute.php',8131],['lib/google/src/Google/Service','YouTube.php',1959],['lib/google/src/Google/Service','YouTube.php',2194],['lib/google/src/Google/Service','YouTube.php',2303],['lib/google/src/Google/Service','YouTube.php',2429],['lib/google/src/Google/Service','YouTube.php',2570],['lib/google/src/Google/Service','YouTube.php',3111],['lib/google/src/Google/Service','YouTube.php',3348],['lib/google/src/Google/Service','YouTube.php',3518],['lib/google/src/Google/Service','YouTube.php',3708],['lib/google/src/Google/Service','YouTube.php',4400],['lib/google/src/Google/Service','Dfareporting.php',4752],['lib/google/src/Google/Service','Dfareporting.php',4840],['lib/google/src/Google/Service','Dfareporting.php',4973],['lib/google/src/Google/Service','Dfareporting.php',5090],['lib/google/src/Google/Service','Dfareporting.php',5204],['lib/google/src/Google/Service','Dfareporting.php',5400],['lib/google/src/Google/Service','Dfareporting.php',5656],['lib/google/src/Google/Service','Dfareporting.php',5848],['lib/google/src/Google/Service','Dfareporting.php',5970],['lib/google/src/Google/Service','Dfareporting.php',6078],['lib/google/src/Google/Service','Dfareporting.php',6196],['lib/google/src/Google/Service','Dfareporting.php',6502],['lib/google/src/Google/Service','Dfareporting.php',6704],['lib/google/src/Google/Service','Dfareporting.php',6834],['lib/google/src/Google/Service','Dfareporting.php',6912],['lib/google/src/Google/Service','Dfareporting.php',7077],['lib/google/src/Google/Service','Dfareporting.php',7476],['lib/google/src/Google/Service','Dfareporting.php',7594],['lib/google/src/Google/Service','Dfareporting.php',7744],['lib/google/src/Google/Service','Dfareporting.php',7968],['lib/google/src/Google/Service','Dfareporting.php',8075],['lib/google/src/Google/Service','Dfareporting.php',8202],['lib/google/src/Google/Service','Dfareporting.php',8394],['lib/google/src/Google/Service','Dfareporting.php',8557],['lib/google/src/Google/Service','Dfareporting.php',8861],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72]], 498],
'get_string_manager': ['get_string_manager', 'Returns current string_manager instance. ', [['lib','moodlelib.php',6678]], 163],
'reset_text_filters_cache': ['reset_text_filters_cache', 'Resets some data related to filters, called during upgrade or when general filter settings change. ', [['lib','weblib.php',1345]], 4],
'file_rewrite_pluginfile_urls': ['file_rewrite_pluginfile_urls', 'Convert encoded URLs in $text from the @@PLUGINFILE@@/... form to an actual URL. Passing a new option reverse = true in the $options var will make the function to convert actual URLs in $text to encoded URLs in the @@PLUGINFILE@@ form. ', [['lib','filelib.php',446]], 96],
'trusttext_pre_edit': ['trusttext_pre_edit', 'Must be called before editing of all texts with trust flag. Removes all XSS nasties from texts stored in database if needed. ', [['lib','weblib.php',1595]], 2],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'set_anchor': ['set_anchor', 'Sets the anchor for the URI (the bit after the hash) ', [['lib','weblib.php',686]], 39],
'addattribute': ['addattribute', 'Adds a custom attribute to a pre-existing element ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',104]], 51],
'highlightfast': ['highlightfast', 'This function will highlight instances of $needle in $haystack ', [['lib','weblib.php',2070]], 3],
'url_rewrite': ['url_rewrite', 'Rewrite moodle_urls into another form. ', [['lib/classes/output','url_rewriter.php',40]], 1],
'get_formatted_help_string': ['get_formatted_help_string', 'Get the value of a help string fully prepared for display in the current language. ', [['lib','weblib.php',3657]], 2],
'defaulttransform': ['defaulttransform', '', [['lib/markdown','MarkdownInterface.php',26],['lib/markdown','Markdown.php',28]], 4],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'strip_links': ['strip_links', 'Given a string, replaces all <a>.*</a> by .* and returns the string. ', [['lib','weblib.php',1487]], 2],
'user_preference_allow_ajax_update': ['user_preference_allow_ajax_update', 'You need to call this function if you wish to use the set_user_preference method in javascript_static.php, to white-list the preference you want to update from JavaScript, and to specify the type of cleaning you expect to be done on values. ', [['lib/ajax','ajaxlib.php',26]], 10],
'string_for_js': ['string_for_js', 'Make a language string available to JavaScript. ', [['lib','outputrequirementslib.php',1120]], 64],
'pix_url': ['pix_url', 'Return the moodle_url for an image. ', [['lib','outputrenderers.php',237],['lib','outputlib.php',1394]], 367],
'get_param': ['get_param', 'Returns a given parameter value from the URL. ', [['lib','weblib.php',899]], 11],
'createdefault': ['createdefault', 'Convenience constructor that creates a default configuration object. ', [['lib/htmlpurifier/HTMLPurifier','Config.php',150]], 5],
'trusttext_active': ['trusttext_active', 'Is trusttext feature active? ', [['lib','weblib.php',1626]], 2],
'estimate': ['estimate', 'Estimate how much time it is going to take. ', [['lib','weblib.php',3277]], 1],
'print_collapsible_region': ['print_collapsible_region', 'Print (or return) a collapsible region, that has a caption that can be clicked to expand or collapse the region. ', [['lib','weblib.php',2276]], 1],
'format_text': ['format_text', 'Formats a text string coming from the search engine. ', [['search/classes','document.php',606],['lib/classes','grading_external.php',182],['search/engine/solr/classes','document.php',129],['lib','weblib.php',1158],['lib','tablelib.php',860],['lib','tablelib.php',1667],['question/type','questionbase.php',345]], 322],
'print_tabs': ['print_tabs', 'Returns a string containing a nested list, suitable for formatting into tabs with CSS. ', [['lib','weblib.php',2942]], 12],
'set_context': ['set_context', 'Sets the context the manager operates on ', [['grade/grading','lib.php',116],['lib','pagelib.php',970],['mod/assign','locallib.php',274],['lib/portfolio','caller.php',568]], 278],
'obfuscate_mailto': ['obfuscate_mailto', 'This function uses the {@link obfuscate_email()} and {@link obfuscate_text()} to generate a fully obfuscated email link, ready to use. ', [['lib','weblib.php',2866]], 5],
'output': ['output', 'Specific output method for the memory XML sink. ', [['lib/dtl','string_xml_database_exporter.php',34],['lib/tcpdf','tcpdf.php',7537],['lib','weblib.php',3368],['lib','weblib.php',3387],['lib','weblib.php',3408],['lib','weblib.php',3432],['lib','weblib.php',3491],['lib','weblib.php',3530],['lib','weblib.php',3602],['backup/util/output','output_controller.class.php',67],['lib','pdflib.php',178],['lib/amd/src','chart_output_chartjs.js',46],['comment','lib.php',420],['lib/amd/src','chart_output_htmltable.js',29],['lib/minify/lib/HTTP','Encoder.php',285],['lib/dtl','file_xml_database_exporter.php',51],['lib','graphlib.php',1485],['grade/report/singleview','lib.php',104],['admin/tool/uploadcourse/classes','tracker.php',135]], 218],
'format_text_menu': ['format_text_menu', 'Just returns an array of text formats suitable for a popup menu ', [['lib','weblib.php',1146]], 7],
'page_doc_link': ['page_doc_link', 'Returns a string containing a link to the user documentation for the current page. ', [['lib','weblib.php',1043],['lib','outputrenderers.php',4032]], 13],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'print_collapsible_region_end': ['print_collapsible_region_end', 'Close a region started with print_collapsible_region_start. ', [['lib','weblib.php',2349]], 33],
'tag': ['tag', 'Outputs a tag with attributes and contents ', [['lib','outputcomponents.php',1073]], 1292],
'addslashes_js': ['addslashes_js', 'Does proper javascript quoting. ', [['lib','weblib.php',119]], 12],
'update_full': ['update_full', 'Update progress bar according percent ', [['lib','weblib.php',3301]], 5],
'me': ['me', 'Returns the name of the current script, WITH the querystring portion. ', [['lib','weblib.php',161]], 4],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'set_slashargument': ['set_slashargument', 'Sets the url slashargument value. ', [['lib','weblib.php',721]], 11],
'instance_by_id': ['instance_by_id', 'Get a context instance as an object, from a given context id. ', [['lib','accesslib.php',5434]], 235],
'notice': ['notice', 'Print a message and exit. ', [['lib','weblib.php',2626],['lib/mustache/src/Mustache/Logger','AbstractLogger.php',87],['lib/google/src/Google/Logger','Abstract.php',226],['lib/mustache/src/Mustache','Logger.php',92]], 70],
'write_close': ['write_close', 'No more changes in session expected. Unblocks the sessions, other scripts may start executing in parallel. ', [['lib/classes/session','manager.php',522]], 52],
'setup_page_for_filters': ['setup_page_for_filters', 'Setup page with filters requirements and other prepare stuff. ', [['lib','filterlib.php',253]], 3],
'link_arrow_left': ['link_arrow_left', 'Return the left arrow with text (\'previous\'), and optionally embedded in a link. ', [['lib','weblib.php',2218]], 2],
'heading': ['heading', 'Outputs a heading ', [['lib','outputrenderers.php',3072],['lib','outputrenderers.php',4364],['lib','outputrenderers.php',4552],['grade/report/singleview/classes/local/screen','screen.php',197],['grade/report/singleview/classes/local/screen','user.php',264],['grade/report/singleview/classes/local/screen','grade.php',283]], 796],
'current_language': ['current_language', 'Returns the code for the current language ', [['lib','moodlelib.php',6589]], 44],
'page_get_doc_link_path': ['page_get_doc_link_path', 'Returns the path to use when constructing a link to the docs. ', [['lib','weblib.php',1060]], 2],
'remove_all_params': ['remove_all_params', 'Remove all url parameters. ', [['lib','weblib.php',441]], 1],
'content_to_text': ['content_to_text', 'Converts texts or strings to plain text. ', [['lib','weblib.php',1977]], 21],
'purify_html': ['purify_html', 'KSES replacement cleaning function - uses HTML Purifier. ', [['lib','weblib.php',1726]], 48],
'break_up_long_words': ['break_up_long_words', 'Given some normal text this function will break up any long words to a given size by inserting the given character ', [['lib','weblib.php',968]], 3],
'has_set_url': ['has_set_url', 'Returns true if the page URL has beem set. ', [['lib','pagelib.php',1935]], 3],
'span': ['span', 'Creates a <span> tag. (Shortcut function.) ', [['lib','outputcomponents.php',1846]], 161],
'rebuildnolinktag': ['rebuildnolinktag', 'This function is used to rebuild the <nolink> tag because some formats (PLAIN and WIKI) will transform it to html entities ', [['lib','weblib.php',2907]], 1],
'hasattribute': ['hasattribute', 'Answer true if an attribute exists for the authenticated user. ', [['auth/cas/CAS','CAS.php',1206],['auth/cas/CAS/CAS','Client.php',1168]], 94],
'maybegetrawhtmldefinition': ['maybegetrawhtmldefinition', '', [['lib/htmlpurifier/HTMLPurifier','Config.php',652]], 1],
'redirect': ['redirect', '', [['enrol/lti/ims-blti','blti.php',230],['lib','weblib.php',2659]], 999],
'ini_get_bool': ['ini_get_bool', 'This function makes the return value of ini_get consistent if you are setting server directives through the .htaccess file in apache. ', [['lib','setuplib.php',770]], 11],
'raw_out': ['raw_out', 'Output url without any rewrites ', [['lib','weblib.php',578]], 1],
'close_window': ['close_window', 'Try and close the current window using JavaScript, either immediately, or after a delay. ', [['lib','weblib.php',1012],['lib','javascript-static.js',1239]], 3],
'strip_pluginfile_content': ['strip_pluginfile_content', 'Removes the usage of Moodle files from a text. ', [['lib','weblib.php',1560]], 3],
'during_initial_install': ['during_initial_install', 'Indicates whether we are in the middle of the initial Moodle install. ', [['lib','setuplib.php',1191]], 51],
'filter_text': ['filter_text', '', [['lib','deprecatedlib.php',499],['lib','filterlib.php',207],['lib','filterlib.php',286],['lib','filterlib.php',332],['lib/tests','filter_manager_test.php',37]], 12],
'set_config': ['set_config', 'Set a key in global configuration ', [['lib','moodlelib.php',1336],['lib','enrollib.php',1153],['lib/editor/tinymce/classes','plugin.php',84],['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515]], 1119],
'out_as_local_url': ['out_as_local_url', 'Returns URL a relative path from $CFG->wwwroot ', [['lib','weblib.php',852]], 44],
'get_scales_menu': ['get_scales_menu', 'Returns a menu of all available scales from the site as well as the given course ', [['lib','datalib.php',1165]], 5],
'set': ['set', 'Sets an item in the cache given its key and data value. ', [['cache/stores/static','lib.php',265],['cache','disabledlib.php',81],['search/classes','document.php',241],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',331],['lib/google/src/Google/Cache','Memcache.php',113],['lib','filelib.php',3656],['lib/adodb','adodb-active-record.inc.php',646],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',85],['lib/google/src/Google/Cache','File.php',93],['cache/classes','dummystore.php',170],['cache/classes','loaders.php',496],['cache/classes','loaders.php',1350],['cache/classes','loaders.php',1797],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',47],['lib/horde/framework/Horde','Variables.php',189],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',39],['competency/classes','persistent.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',203],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',51],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',41],['lib/google/src/Google/Service','ShoppingContent.php',1643],['lib','navigationlib.php',5131],['lib/google/src/Google/Service','Clouddebugger.php',445],['lib/htmlpurifier/HTMLPurifier','Config.php',289],['lib/portfolio','exporter.php',154],['grade/report/singleview/classes/local/ui','finalgrade.php',129],['cache/stores/memcache','lib.php',358],['lib/adodb','adodb-active-recordx.inc.php',676],['cache/classes','interfaces.php',68],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',167],['lib/horde/framework/Horde/Imap/Client','Cache.php',127],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',60],['grade/report/singleview/classes/local/ui','exclude.php',90],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',24],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',114],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',41],['lib/portfolio','caller.php',187],['cache/stores/session','lib.php',290],['cache/stores/mongodb','lib.php',305],['lib/google/src/Google/Cache','Null.php',44],['grade/report/singleview/classes/local/ui','override.php',95],['cache/stores/file','lib.php',426],['lib/phpmailer','class.phpmailer.php',3554],['grade/report/singleview/classes/local/ui','feedback.php',102],['cache/stores/memcached','lib.php',354],['lib/portfolio','plugin.php',647],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',31],['lib/google/src/Google/Service','YouTube.php',4048],['lib/google/src/Google/Service','YouTube.php',4458],['lib/google/src/Google/Cache','Apc.php',82],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',162],['lib/pear/Net/GeoIP','Location.php',125]], 4904],
'get_path': ['get_path', '', [['backup/util/structure','restore_path_element.class.php',102],['lib','weblib.php',880],['competency/tests','persistent_test.php',530],['mod/lti/service/profile/classes/local/resource','profile.php',59],['backup/converter/moodle1','lib.php',1040],['mod/lti/classes/local/ltiservice','resource_base.php',103]], 56],
's': ['s', 'Count of attempts selected by $this->whichattempts ', [['mod/quiz/report/statistics/classes','calculated.php',91],['lib','weblib.php',84]], 1072],
'is_msword': ['is_msword', 'Checks if the user agent is MS Word. Not perfect, as older versions of Word use standard IE6/7 user agents without any identifying traits. ', [['lib/classes','useragent.php',871]], 3],
'data_submitted': ['data_submitted', 'Determine if there is data waiting to be processed from a form ', [['lib','weblib.php',947]], 69],
'js_init_call': ['js_init_call', 'Ensure that the specified JavaScript function is called from an inline script from page footer. ', [['lib','outputrequirementslib.php',1066]], 95],
'get_plugin_list': ['get_plugin_list', 'Use when listing real plugins of one type. ', [['lib','deprecatedlib.php',150],['lib/classes','component.php',796],['admin/tool/monitor/classes','eventlist.php',176]], 191],
'print_recent_activity_note': ['print_recent_activity_note', 'Display a recent activity note ', [['lib','weblib.php',2431]], 5],
'clean_text': ['clean_text', 'Cleans raw text removing nasties. ', [['lib','weblib.php',1637]], 44],
'early_redirect_message': ['early_redirect_message', 'Early redirection page, used before full init of $PAGE global ', [['lib','setuplib.php',1965]], 1],
'replace_ampersands_not_followed_by_entity': ['replace_ampersands_not_followed_by_entity', 'Given a string, performs a negative lookahead looking for any ampersand character that is not followed by a proper HTML entity. If any is found, it is replaced by &amp;. The string is then returned. ', [['lib','weblib.php',1475]], 6],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',592]], 3302],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3249],['mod/assign','locallib.php',3915]], 546],
'__tostring': ['__tostring', 'String-ified version ', [['lib/simplepie/library/SimplePie','Author.php',95],['lib/horde/framework/Horde/Imap/Client','Url.php',132],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',139],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',101],['lib/simplepie/library/SimplePie','Copyright.php',85],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',39],['lib/horde/framework/Horde/Imap/Client/Search','Query.php',60],['lib/simplepie/library/SimplePie','Rating.php',85],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',107],['lib/phpexcel/PHPExcel','RichText.php',122],['lib/simplepie/library','SimplePie.php',655],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',68],['question/engine','datalib.php',1687],['question/engine','datalib.php',1755],['lib/simplepie/library/SimplePie','Source.php',72],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',838],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',44],['lib/lessphp/Tree','Dimension.php',74],['lib','moodlelib.php',9747],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',44],['lib/classes/output','mustache_uniqid_helper.php',41],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',81],['lib/simplepie/library/SimplePie','Restriction.php',94],['lib','weblib.php',536],['lib/simplepie/library/SimplePie','IRI.php',133],['question/engine','states.php',108],['lib/phpexcel/PHPExcel','Cell.php',1023],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',44],['lib/simplepie/library/SimplePie','Enclosure.php',264],['mod/lti','OAuth.php',79],['mod/lti','OAuth.php',109],['mod/lti','OAuth.php',460],['lib/simplepie/library/SimplePie','Credit.php',94],['lib/horde/framework/Horde/Support','Backtrace.php',121],['lib/simplepie/library/SimplePie','Item.php',110],['lib/horde/framework/Horde/Imap/Client','Ids.php',150],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',116],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',43],['lib/pear/PEAR','Exception.php',315],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',84],['lib/adodb','adodb.inc.php',3261],['lib/horde/framework/Horde/Support','Randomid.php',65],['lib/horde/framework/Horde','Stream.php',103],['lib/horde/framework/Horde/Mail/Rfc822','Object.php',25],['availability/classes','tree.php',91],['availability/classes','condition.php',93],['lib/horde/framework/Horde/Imap/Client/Data/Format','Number.php',27],['lib/lessphp/Tree','Unit.php',48],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',173],['lib/simplepie/library/SimplePie','Category.php',95],['lib/pear','PEAR.php',1024],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',122],['enrol/lti/ims-blti','OAuth.php',22],['enrol/lti/ims-blti','OAuth.php',52],['enrol/lti/ims-blti','OAuth.php',406],['lib/horde/framework/Horde/Imap/Client','DateTime.php',59],['lib/phpexcel/PHPExcel','Comment.php',329],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',59],['lib/horde/framework/Horde/Support','Uuid.php',75],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',34],['lib/dml/tests','dml_test.php',5567],['lib/simplepie/library/SimplePie','Caption.php',113],['backup/cc','validator.php',97],['grade/report/singleview/classes/local/ui','attribute_format.php',44],['lib/horde/framework/Horde/Imap/Client/Data/Format','DateTime.php',27],['lib/horde/framework/Horde/Stream','TempString.php',109],['lib/horde/framework/Horde/Support','Stub.php',21],['lib/horde/framework/Horde/Support','Guid.php',63],['lib/pear/Net/GeoIP','Location.php',176]], 11],
'format_text_email': ['format_text_email', 'Given text in a variety of format codings, this function returns the text as plain text suitable for plain email. ', [['lib','weblib.php',1507]], 11],
'setattribute': ['setattribute', '', [['lib/google/src/Google/Service','AdExchangeBuyer.php',2531],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',254]], 1664],
'action_link': ['action_link', 'Renders a special html link with attached action ', [['lib','outputrenderers.php',1623],['report/loglive/classes','table_log.php',285],['report/log/classes','table_log.php',332]], 75],
'box_start': ['box_start', 'Outputs the opening section of a box. ', [['lib','outputrenderers.php',3102]], 259],
'is_purify_html_necessary': ['is_purify_html_necessary', 'Is it necessary to use HTMLPurifier? ', [['lib','weblib.php',1678]], 16],
'loadhtml': ['loadhtml', '', [['backup/cc/cc_lib','xmlbase.php',112]], 20],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'make_localcache_directory': ['make_localcache_directory', 'Create a directory under localcachedir and make sure it is writable. The files in this directory MUST NOT change, use revisions or content hashes to work around this limitation - this means you can only add new files here. ', [['lib','setuplib.php',1689]], 17],
'obfuscate_text': ['obfuscate_text', 'This function takes some text and replaces about half of the characters with HTML entity equivalents.   Return string is obviously longer. ', [['lib','weblib.php',2836]], 4],
'obfuscate_email': ['obfuscate_email', 'Given an email address, this function will return an obfuscated version of it. ', [['lib','weblib.php',2815]], 2],
'js_function_call': ['js_function_call', '!!!DEPRECATED!!! please use js_init_call() if possible Ensure that the specified JavaScript function is called from an inline script somewhere on this page. ', [['lib','outputrequirementslib.php',945]], 18],
'print_maintenance_message': ['print_maintenance_message', 'Prints a maintenance message from $CFG->maintenance_message or default if empty. ', [['lib','weblib.php',2921]], 2],
'print_location_comment': ['print_location_comment', 'Outputs a HTML comment to the browser. ', [['lib','weblib.php',3088]], 0],
'trusttext_strip': ['trusttext_strip', 'Legacy function, used for cleaning of old forum and glossary text only. ', [['lib','weblib.php',1579]], 1],
'navmenulist': ['navmenulist', 'Returns a popup menu with course activity modules ', [['lib','weblib.php',2469]], 0],
'doc_link': ['doc_link', 'Returns document link for performance issue ', [['report/performance','locallib.php',94],['lib','outputrenderers.php',2137]], 18],
'finished': ['finished', 'Called when the processing is finished. ', [['lib','weblib.php',3353],['lib','weblib.php',3461],['lib','weblib.php',3548],['lib','weblib.php',3614]], 56],
'send_headers': ['send_headers', 'Internal implementation - sending of page headers. ', [['webservice/rest','locallib.php',173],['lib','weblib.php',2131],['webservice/soap','locallib.php',255],['webservice/xmlrpc','locallib.php',146]], 7],
'set_pagetype': ['set_pagetype', 'Sets the pagetype to use for this page. ', [['lib','pagelib.php',1071]], 34],
'plain_redirect_message': ['plain_redirect_message', 'Page should redirect message. ', [['lib','setuplib.php',1953]], 3],
'has_view': ['has_view', '', [['lib','modinfolib.php',1223]], 11],
'get_format_options': ['get_format_options', 'Returns the format options stored for this course or course section ', [['course/format','lib.php',571]], 18],
'get_host': ['get_host', 'Returns the \'host\' portion of a URL. For example, if the URL is http://www.example.org:447/my/file/is/here.txt?really=1 then this will return \'www.example.org\'. ', [['lib','weblib.php',924]], 2],
'redirect_message': ['redirect_message', 'Redirects the user by any means possible given the current state ', [['lib','outputrenderers.php',860],['lib','outputrenderers.php',4505]], 1],
'markdown_to_html': ['markdown_to_html', 'Given Markdown formatted text, make it into XHTML using external function ', [['lib','weblib.php',1927]], 21],
'get_local_referer': ['get_local_referer', 'Returns the cleaned local URL of the HTTP_REFERER less the URL query string parameters if required. ', [['lib','weblib.php',219]], 31],
'format_backtrace': ['format_backtrace', 'Formats a backtrace ready for output. ', [['lib','setuplib.php',729]], 20],
'entities_to_utf8': ['entities_to_utf8', 'Converts numeric entities (UNICODE, eg. decimal (&#1234;) or hexadecimal (&#x1b;)) to UTF-8 multibyte chars ', [['lib/typo3','class.t3lib_cs.php',810],['lib/classes','text.php',548]], 11],
'trusttext_trusted': ['trusttext_trusted', 'Is current user trusted to enter no dangerous XSS in this context? ', [['lib','weblib.php',1614]], 8],
'print_grade_menu': ['print_grade_menu', 'Prints a grade menu (as part of an existing form) with help showing all possible numerical grades and scales. ', [['lib','weblib.php',2565]], 0],
'get_html_lang': ['get_html_lang', 'Return a string containing \'lang\', xml:lang and optionally \'dir\' HTML attributes. ', [['lib','weblib.php',2105]], 3],
'make_file_url': ['make_file_url', 'General moodle file url. ', [['lib','weblib.php',750]], 10],
'container_end_all': ['container_end_all', 'Close all but the last open container. This is useful in places like error handling, where you want to close all the open containers (apart from <body>) before outputting the error message. ', [['lib','outputrenderers.php',1079]], 3],
'course_get_format': ['course_get_format', 'Returns an instance of format class (extending format_base) for given course ', [['course/format','lib.php',27]], 99],
'_update': ['_update', 'Update the progress bar ', [['lib','weblib.php',3235]], 19],
'notification': ['notification', 'Output a notification (that is, a status message about something that has just happened). ', [['lib','outputrenderers.php',2849],['lib','outputrenderers.php',4412],['lib','outputrenderers.php',4496]], 540],
'set_debugging': ['set_debugging', 'Alter debugging level for the current request, the change is not saved in database. ', [['lib','weblib.php',2994]], 36],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'footer': ['footer', 'This method is used to render the page footer. It is automatically called by AddPage() and could be overwritten in your own inherited class. ', [['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1034],['lib','outputrenderers.php',4427],['lib','outputrenderers.php',4546],['mod/lesson','renderer.php',78]], 810],
'highlight': ['highlight', '', [['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',5692],['lib/yuilib/3.17.2/datatable-highlight','datatable-highlight-debug.js',25],['lib','weblib.php',2009],['lib/yuilib/3.17.2/datatable-highlight','datatable-highlight.js',25],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',5692],['lib/editor/atto/yui/src/rangy/js','rangy-highlighter.js',206]], 84],
'get_docs_url': ['get_docs_url', 'Returns the Moodle Docs URL in the users language for a given \'More help\' link. ', [['lib','setuplib.php',662]], 23],
'debugging_triggered': ['debugging_triggered', 'To be called from debugging() only. ', [['lib/phpunit/classes','util.php',586]], 1],
'out_omit_querystring': ['out_omit_querystring', 'Returns url without parameters, everything before \'?\'. ', [['lib','weblib.php',605]], 27],
'html_to_text': ['html_to_text', 'Given HTML text, make it into plain text using external function ', [['lib','weblib.php',1947],['question/type','questionbase.php',367]], 65],
'larrow': ['larrow', 'Accessibility: Left arrow-like character is used in the breadcrumb trail, course navigation menu (previous/next activity), calendar, and search forum block. If the theme does not set characters, appropriate defaults are set automatically. Please DO NOT use &lt; &gt; &raquo; - these are confusing for blind users. ', [['lib','outputrenderers.php',3592]], 14],
'script': ['script', '', [['lib/minify/lib','JSMinPlus.php',745],['lib','outputcomponents.php',1476]], 85],
'get_scheme': ['get_scheme', 'Get the organizational scheme for the rating ', [['lib/simplepie/library/SimplePie','Rating.php',96],['lib','weblib.php',913],['lib/simplepie/library/SimplePie','Credit.php',122],['lib/simplepie/library/SimplePie','Category.php',123]], 3],
'strip_querystring': ['strip_querystring', 'Remove query string from url. ', [['lib','weblib.php',144]], 5],
'userdate': ['userdate', 'Returns a formatted string that represents a date in user time. ', [['lib','moodlelib.php',2155],['lib/adodb','adodb.inc.php',2842],['lib/adodb','adodb.inc.php',3569]], 525],
'is_in_popup': ['is_in_popup', 'Returns true if the page is displayed in a popup window. ', [['lib','weblib.php',3141]], 0],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',609]], 2210],
'prevent_form_autofill_password': ['prevent_form_autofill_password', 'Renders a hidden password field so that browsers won\'t incorrectly autofill password fields with the user\'s password. ', [['lib','weblib.php',3726]], 8],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'print_password_policy': ['print_password_policy', 'Returns a localized sentence in the current language summarizing the current password policy ', [['lib','weblib.php',3624]], 4],
'get_query_string': ['get_query_string', 'Get the params as as a query string. ', [['lib','weblib.php',499]], 1],
'getattribute': ['getattribute', '', [['lib/google/src/Google/Service','AdExchangeBuyer.php',2535],['auth/cas/CAS','CAS.php',1226],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',279],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',47],['lib/phpexcel/PHPExcel/Reader/Excel2007','Chart.php',37],['auth/cas/CAS/CAS','Client.php',1196],['lib/pear/HTML','Common.php',271]], 1140],
'get_file_argument': ['get_file_argument', 'Extracts file argument either from file parameter or PATH_INFO ', [['lib','weblib.php',1101]], 11],
'param': ['param', '', [['lib/adodb/drivers','adodb-postgres64.inc.php',609],['lib','weblib.php',453],['lib/adodb/drivers','adodb-oci8po.inc.php',39],['lib/adodb','adodb.inc.php',934],['lib/adodb/drivers','adodb-oci8.inc.php',1179],['lib/adodb/drivers','adodb-db2oci.inc.php',163]], 640],
'tabtree': ['tabtree', 'Renders tabs ', [['lib','outputrenderers.php',3794]], 9],
'merge_overrideparams': ['merge_overrideparams', 'Merges parameters and validates them ', [['lib','weblib.php',474]], 1],
'filter_save_tags': ['filter_save_tags', 'Extract tags (any text enclosed by < and > to avoid being processed by filters. It returns the text converted with some <%xTEXTFILTER_EXCL_SEPARATORx%> codes replacing the extracted text. Such extracted texts are returned in the tags array (as values), with codes as keys. ', [['lib','filterlib.php',1440]], 3],
'link_arrow_right': ['link_arrow_right', 'Return the right arrow with text (\'next\'), and optionally embedded in a link. ', [['lib','weblib.php',2185]], 3],
'html_is_blank': ['html_is_blank', 'Tests whether anything was returned by text editor ', [['lib','moodlelib.php',1321]], 13],
'qualified_me': ['qualified_me', 'Guesses the full URL of the current script. ', [['lib','weblib.php',176]], 26],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1170]], 426],
'right_to_left': ['right_to_left', 'Returns true if the user is using a right-to-left language. ', [['lib','weblib.php',3109],['lib','javascript-static.js',1156]], 63],
'purify': ['purify', 'Filters an HTML snippet/document to be XSS-free and standards-compliant. ', [['lib/htmlpurifier','HTMLPurifier.php',135]], 4],
'check_dir_exists': ['check_dir_exists', 'Function to check if a directory exists and by default create it if not exists. ', [['lib','setuplib.php',1430]], 46],
'defined': ['defined', '', [], 4731],
'debug_backtrace': ['debug_backtrace', '', [], 30],
'microtime': ['microtime', '', [], 109],
'ord': ['ord', '', [], 439],
'func_get_args': ['func_get_args', '', [], 147],
'strcmp': ['strcmp', '', [], 82],
'ob_get_level': ['ob_get_level', '', [], 9],
'rawurlencode': ['rawurlencode', '', [], 76],
'is_bool': ['is_bool', '', [], 153],
'htmlspecialchars': ['htmlspecialchars', '', [], 215],
'round': ['round', '', [], 1002],
'strip_tags': ['strip_tags', '', [], 150],
'array_reverse': ['array_reverse', '', [], 130],
'func_num_args': ['func_num_args', '', [], 37],
'headers_sent': ['headers_sent', '', [], 13],
'gettext': ['gettext', '', [], 60],
'function_exists': ['function_exists', '', [], 419],
'gettype': ['gettype', '', [], 266],
'ltrim': ['ltrim', '', [], 92],
'ob_start': ['ob_start', '', [], 101],
'ob_get_contents': ['ob_get_contents', '', [], 62],
'str_replace': ['str_replace', '', [], 1648],
'array_keys': ['array_keys', '', [], 1256],
'header': ['header', '', [], 1355],
'ob_end_clean': ['ob_end_clean', '', [], 76],
'get_object_vars': ['get_object_vars', '', [], 48],
'parse_str': ['parse_str', '', [], 11],
'preg_match': ['preg_match', '', [], 1286],
'preg_replace': ['preg_replace', '', [], 917],
'gmdate': ['gmdate', '', [], 116],
'ob_end_flush': ['ob_end_flush', '', [], 18],
'array_key_exists': ['array_key_exists', '', [], 1445],
'method_exists': ['method_exists', '', [], 265],
'strpos': ['strpos', '', [], 1604],
'preg_split': ['preg_split', '', [], 146],
'is_array': ['is_array', '', [], 1608],
'implode': ['implode', '', [], 1281],
'stripos': ['stripos', '', [], 88],
'preg_quote': ['preg_quote', '', [], 205],
'trim': ['trim', '', [], 1948],
'is_numeric': ['is_numeric', '', [], 672],
'file_exists': ['file_exists', '', [], 867],
'count': ['count', '', [], 4095],
'uniqid': ['uniqid', '', [], 86],
'define': ['define', '', [], 2373],
'time': ['time', '', [], 1959],
'is_null': ['is_null', '', [], 2003],
'trigger_error': ['trigger_error', '', [], 124],
'min': ['min', '', [], 898],
'error_log': ['error_log', '', [], 90],
'array_map': ['array_map', '', [], 169],
'dechex': ['dechex', '', [], 48],
'link': ['link', '', [], 695],
'substr': ['substr', '', [], 2823],
'nl2br': ['nl2br', '', [], 17],
'in_array': ['in_array', '', [], 1234],
'parse_url': ['parse_url', '', [], 55],
'is_object': ['is_object', '', [], 544],
'strtolower': ['strtolower', '', [], 817],
'max': ['max', '', [], 1266],
'str_repeat': ['str_repeat', '', [], 156],
'rand': ['rand', '', [], 99],
'flush': ['flush', '', [], 67],
'is_string': ['is_string', '', [], 536],
'explode': ['explode', '', [], 1572],
'urldecode': ['urldecode', '', [], 53]};
CLASS_DATA={
'filter_manager': ['filter_manager', 'Class to manage the filtering of strings. It is intended that this class is only used by weblib.php. Client code should probably be using the format_text and format_string functions. ', [['lib','filterlib.php',44]], 19],
'popup_action': ['popup_action', 'Component action for a popup window. ', [['lib','outputactions.php',114]], 31],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'markdownextra': ['markdownextra', '', [['lib/markdown','MarkdownExtra.php',20]], 3],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'null_progress_trace': ['null_progress_trace', 'This subclass of progress_trace does not ouput anything. ', [['lib','weblib.php',3360]], 49],
'cache': ['cache', 'The main cache class. ', [['cache/classes','loaders.php',31]], 284],
'progress_trace_buffer': ['progress_trace_buffer', 'Special type of trace that can be used for catching of output of other traces. ', [['lib','weblib.php',3503]], 9],
'null_filter_manager': ['null_filter_manager', 'Filter manager subclass that does nothing. Having this simplifies the logic of format_text, etc. ', [['lib','filterlib.php',278]], 1],
'manager': ['manager', 'Search subsystem manager. ', [['search/classes','manager.php',31],['user/classes/output/myprofile','manager.php',28],['lib/classes/antivirus','manager.php',29],['lib/classes/event','manager.php',30],['lib/classes/task','manager.php',28],['admin/tool/messageinbound/classes','manager.php',29],['lib/classes/message/inbound','manager.php',29],['admin/tool/log/classes/log','manager.php',29],['lib/classes/log','manager.php',29],['lib/classes/session','manager.php',29],['lib/classes/message','manager.php',31]], 585],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566],
'htmlpurifier_htmlmodule_ruby': ['htmlpurifier_htmlmodule_ruby', 'XHTML 1.1 Ruby Annotation Module, defines elements that indicate short runs of text alongside base text for annotation or pronounciation. ', [['lib/htmlpurifier/HTMLPurifier/HTMLModule','Ruby.php',3]], 1],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'html_list_progress_trace': ['html_list_progress_trace', 'HTML List Progress Tree ', [['lib','weblib.php',3421]], 4],
'htmlpurifier_config': ['htmlpurifier_config', 'Configuration object that triggers customizable behavior. ', [['lib/htmlpurifier/HTMLPurifier','Config.php',3]], 15],
'core_html2text': ['core_html2text', 'Wrapper for Html2Text ', [['lib/html2text','lib.php',32]], 1],
'progress_bar': ['progress_bar', 'Progress bar class. ', [['lib','weblib.php',3157]], 9],
'combined_progress_trace': ['combined_progress_trace', 'Special type of trace that can be used for redirecting to multiple other traces. ', [['lib','weblib.php',3578]], 2],
'core_useragent': ['core_useragent', 'The user agent class. ', [['lib/classes','useragent.php',25]], 159],
'bootstrap_renderer': ['bootstrap_renderer', 'This class solves the problem of how to initialise $OUTPUT. ', [['lib','setuplib.php',1741]], 14],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'notification': ['notification', 'Data structure representing a notification. ', [['lib/classes/output','notification.php',27],['lib/classes','notification.php',29]], 106],
'error_log_progress_trace': ['error_log_progress_trace', 'This subclass of progress_trace outputs to error log. ', [['lib','weblib.php',3472]], 2],
'js_writer': ['js_writer', 'Simple javascript output class ', [['lib','outputcomponents.php',1879]], 19],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'context_user': ['context_user', 'User context class ', [['lib','accesslib.php',6398]], 414],
'text_progress_trace': ['text_progress_trace', 'This subclass of progress_trace outputs to plain text. ', [['lib','weblib.php',3379]], 21],
'html_progress_trace': ['html_progress_trace', 'This subclass of progress_trace outputs as HTML. ', [['lib','weblib.php',3400]], 4],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 511],
'htmlpurifier': ['htmlpurifier', 'Facade that coordinates HTML Purifier\'s subsystems in order to purify HTML. ', [['lib/htmlpurifier','HTMLPurifier.php',40]], 6],
'htmlpurifier_htmlmodule_noreferrer': ['htmlpurifier_htmlmodule_noreferrer', 'A custom HTMLPurifier module to add rel="noreferrer" attributes a tags. ', [['lib/htmlpurifier','locallib.php',167]], 1],
'phpunit_util': ['phpunit_util', 'Collection of utility methods. ', [['lib/phpunit/classes','util.php',28]], 54]};
CONST_DATA={
'PHPUNIT_TEST': ['PHPUNIT_TEST', '', [['admin/cli','install.php',145],['','install.php',49],['lib/phpunit','bootstrap.php',63],['lib','setup.php',247]], 59],
'NO_DEBUG_DISPLAY': ['NO_DEBUG_DISPLAY', '', [['theme','yui_combo.php',28],['rss','file.php',31],['comment','comment_ajax.php',25],['user','pixgroup.php',26],['theme','font.php',29],['','pluginfile.php',28],['webservice/soap','simpleserver.php',29],['webservice/xmlrpc','simpleserver.php',29],['lib/flowplayer','flowplayer-3.2.18.swf.php',25],['theme','image.php',28],['mod/lti','services.php',26],['theme','yui_image.php',28],['user','grouppix.php',29],['theme','javascript.php',28],['','file.php',34],['lib','requirejs.php',27],['filter/tex','pix.php',7],['mod/lti','service.php',26],['theme','jquery.php',30],['filter/algebra','pix.php',7],['theme','styles_debug.php',27],['lib/flowplayer','flowplayer.audio-3.2.11.swf.php',25],['mnet/xmlrpc','server.php',14],['lib','javascript.php',27],['mod/scorm/report/graphs','graph.php',25],['webservice/rest','simpleserver.php',29],['webservice/soap','server.php',29],['user','pix.php',26],['theme','styles.php',27],['webservice/xmlrpc','server.php',29],['enrol/paypal','ipn.php',33],['webservice/rest','server.php',29],['lib','setup.php',234],['lib','setup.php',236],['','draftfile.php',28],['lib/flowplayer','flowplayer.controls-3.2.16.swf.php',25]], 41],
'CLI_SCRIPT': ['CLI_SCRIPT', '', [['enrol/ldap/cli','sync.php',43],['lib/filestorage/tests/fixtures','zip_create_test_file.php',25],['admin/cli','fix_course_sequence.php',26],['admin/tool/behat/cli','run.php',30],['admin/cli','upgrade.php',38],['admin/cli','install.php',32],['admin/tool/uploadcourse/cli','uploadcourse.php',25],['admin/cli','fix_orphaned_question_categories.php',29],['admin/tool/generator/cli','maketestsite.php',25],['admin/cli','purge_caches.php',24],['admin/cli','install_database.php',31],['admin/tool/behat/cli','util.php',34],['admin/tool/task/cli','schedule_task.php',25],['admin/tool/replace/cli','replace.php',25],['auth/db/cli','sync_users.php',45],['admin/cli','automated_backups.php',29],['enrol/manual/cli','sync.php',30],['lib/editor/tinymce/cli','update_lang_files.php',25],['auth/ldap/cli','sync_users.php',47],['admin/cli','fix_deleted_users.php',26],['admin/cli','maintenance.php',26],['lib/tests/behat','behat_hooks.php',133],['admin/cli','reset_password.php',27],['admin/tool/dbtransfer/cli','migrate.php',30],['enrol/category/cli','sync.php',33],['admin/cli','mysql_compressed_rows.php',26],['enrol/paypal/cli','sync.php',30],['admin/cli','cron.php',31],['enrol/database/cli','sync.php',34],['admin/cli','mysql_collation.php',25],['auth/cas/cli','sync_users.php',43],['enrol/cohort/cli','sync.php',31],['admin/tool/generator/cli','maketestcourse.php',25],['admin/cli','backup.php',26],['search/cli','indexer.php',25],['admin/cli','check_database_schema.php',26],['admin/tool/behat/cli','util_single_run.php',90],['enrol/self/cli','sync.php',31],['','install.php',46],['theme/base/cli','svgtool.php',26],['admin','cron.php',47],['admin/tool/behat/cli','init.php',36],['enrol/meta/cli','sync.php',31],['admin/cli','alternative_component_cache.php',30],['admin/tool/generator/cli','maketestplan.php',25],['lib/phpunit','bootstrap.php',73],['lib','setup.php',289],['mod/chat','chatd.php',25],['lib/filestorage/tests/fixtures','zip_info.php',25],['enrol/flatfile/cli','sync.php',45],['admin/cli','mysql_engine.php',27]], 114],
'FORMAT_WIKI': ['FORMAT_WIKI', '', [['lib','weblib.php',60]], 5],
'DEBUG_NORMAL': ['DEBUG_NORMAL', '', [['lib','setuplib.php',36]], 22],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 802],
'URL_MATCH_BASE': ['URL_MATCH_BASE', '', [['lib','weblib.php',70]], 20],
'AJAX_SCRIPT': ['AJAX_SCRIPT', '', [['mod/assign/feedback/editpdf','ajax.php',29],['admin/roles','ajax.php',26],['repository','draftfiles_ajax.php',27],['enrol','ajax.php',28],['lib/ajax','blocks.php',25],['comment','comment_ajax.php',24],['lib/ajax','service.php',30],['login','token.php',24],['badges','backpackconnect.php',27],['webservice','upload.php',37],['mod/chat','chat_ajax.php',17],['user/selector','search.php',25],['lib/editor/atto/plugins/equation','ajax.php',26],['lib','sessionkeepalive_ajax.php',25],['mod/forum','subscribe_ajax.php',25],['repository','repository_ajax.php',27],['admin/tool/installaddon','permcheck.php',27],['question','toggleflag.php',27],['mod/quiz','edit_rest.php',26],['mod/assign/feedback/editpdf','ajax_progress.php',26],['','help_ajax.php',27],['grade/report/history','users_ajax.php',26],['lib/ajax','getnavbranch.php',28],['badges','assertion.php',27],['mod/quiz','questionbank.ajax.php',26],['badges','ajax.php',27],['course/ajax','management.php',27],['mod/lti','ajax.php',29],['rating','rate_ajax.php',28],['enrol/manual','ajax.php',28],['availability/condition/date','ajax.php',25],['lib/ajax','getsiteadminbranch.php',28],['','install.php',47],['course','category.ajax.php',28],['course','dndupload.php',26],['message','ajax.php',25],['mod/feedback','ajax.php',26],['webservice','pluginfile.php',29],['course','rest.php',27],['lib','setup.php',351],['mod/glossary','showentry_ajax.php',2],['lib/editor/atto','autosave-ajax.php',25],['mod/quiz','autosave.ajax.php',25],['report/loglive','loglive_ajax.php',25],['message/output/airnotifier','rest.php',26],['blocks/course_overview','save.php',24]], 74],
'PARAM_LOCALURL': ['PARAM_LOCALURL', '', [['lib','moodlelib.php',167]], 64],
'PARAM_PATH': ['PARAM_PATH', '', [['lib','moodlelib.php',178]], 175],
'PHP_EOL': ['PHP_EOL', '', [['lib/htmlpurifier/HTMLPurifier','Bootstrap.php',13],['lib/htmlpurifier/HTMLPurifier','Bootstrap.php',16],['lib/htmlpurifier/HTMLPurifier','Bootstrap.php',19]], 246],
'DEBUGGING_PRINTED': ['DEBUGGING_PRINTED', '', [['lib','weblib.php',3073],['mod/scorm/datamodels','scormlib.php',532]], 5],
'FORMAT_PLAIN': ['FORMAT_PLAIN', '', [['lib','weblib.php',52]], 152],
'FORMAT_MARKDOWN': ['FORMAT_MARKDOWN', '', [['lib','weblib.php',65]], 78],
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 506],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'URL_MATCH_EXACT': ['URL_MATCH_EXACT', '', [['lib','weblib.php',80]], 9],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'URL_MATCH_PARAMS': ['URL_MATCH_PARAMS', '', [['lib','weblib.php',75]], 9],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
