<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/tests/filetypes_test.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/tests';
filename='filetypes_test.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/tests/</a> -> <a href="filetypes_test.php.html">filetypes_test.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="filetypes_test.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="filetypes_test.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Unit tests for /lib/classes/filetypes.php.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package core</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright 2014 The Open University</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l28"><span class="linenum">  28</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/filelib.php');
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">/**</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * Unit tests for /lib/classes/filetypes.php.</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> *</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @package core</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @copyright 2014 The Open University</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> */</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('core_filetypes_testcase')" href="../../_classes/core_filetypes_testcase.html" onMouseOver="classPopup(event,'core_filetypes_testcase')">core_filetypes_testcase</a> extends advanced_testcase {
<a name="l38"><span class="linenum">  38</span></a>  
<a name="l39"><span class="linenum">  39</span></a>      public function <a class="function" onClick="logFunction('test_add_type')" href="../../_functions/test_add_type.html" onMouseOver="funcPopup(event,'test_add_type')">test_add_type</a>() {
<a name="l40"><span class="linenum">  40</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>();
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">        // Check the filetypes to be added do not exist yet (basically this</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">        // ensures we're testing the cache clear).</span>
<a name="l44"><span class="linenum">  44</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l45"><span class="linenum">  45</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayNotHasKey('frog', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>);
<a name="l46"><span class="linenum">  46</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayNotHasKey('zombie', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>);
<a name="l47"><span class="linenum">  47</span></a>  
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">        // Add two filetypes (minimal, then all options).</span>
<a name="l49"><span class="linenum">  49</span></a>          core_filetypes::<a class="function" onClick="logFunction('add_type')" href="../../_functions/add_type.html" onMouseOver="funcPopup(event,'add_type')">add_type</a>('frog', 'application/x-frog', 'document');
<a name="l50"><span class="linenum">  50</span></a>          core_filetypes::<a class="function" onClick="logFunction('add_type')" href="../../_functions/add_type.html" onMouseOver="funcPopup(event,'add_type')">add_type</a>('zombie', 'application/x-zombie', 'document',
<a name="l51"><span class="linenum">  51</span></a>              array('document', 'image'), 'image', 'A zombie', true);
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">        // Check they now exist, and check data.</span>
<a name="l54"><span class="linenum">  54</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l55"><span class="linenum">  55</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('application/x-frog', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>['frog']['type']);
<a name="l56"><span class="linenum">  56</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('document', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>['frog']['icon']);
<a name="l57"><span class="linenum">  57</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(array('document', 'image'), <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>['zombie']['groups']);
<a name="l58"><span class="linenum">  58</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('image', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>['zombie']['string']);
<a name="l59"><span class="linenum">  59</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(true, <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>['zombie']['defaulticon']);
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('A zombie', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>['zombie']['customdescription']);
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">        // Test adding again causes exception.</span>
<a name="l63"><span class="linenum">  63</span></a>          try {
<a name="l64"><span class="linenum">  64</span></a>              core_filetypes::<a class="function" onClick="logFunction('add_type')" href="../../_functions/add_type.html" onMouseOver="funcPopup(event,'add_type')">add_type</a>('frog', 'application/x-frog', 'document');
<a name="l65"><span class="linenum">  65</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fail')" href="../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>();
<a name="l66"><span class="linenum">  66</span></a>          } catch (coding_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l67"><span class="linenum">  67</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('already exists', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l68"><span class="linenum">  68</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('frog', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l69"><span class="linenum">  69</span></a>          }
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment">        // Test bogus extension causes exception.</span>
<a name="l72"><span class="linenum">  72</span></a>          try {
<a name="l73"><span class="linenum">  73</span></a>              core_filetypes::<a class="function" onClick="logFunction('add_type')" href="../../_functions/add_type.html" onMouseOver="funcPopup(event,'add_type')">add_type</a>('.frog', 'application/x-frog', 'document');
<a name="l74"><span class="linenum">  74</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fail')" href="../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>();
<a name="l75"><span class="linenum">  75</span></a>          } catch (coding_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l76"><span class="linenum">  76</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('Invalid extension', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l77"><span class="linenum">  77</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('..frog', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l78"><span class="linenum">  78</span></a>          }
<a name="l79"><span class="linenum">  79</span></a>          try {
<a name="l80"><span class="linenum">  80</span></a>              core_filetypes::<a class="function" onClick="logFunction('add_type')" href="../../_functions/add_type.html" onMouseOver="funcPopup(event,'add_type')">add_type</a>('', 'application/x-frog', 'document');
<a name="l81"><span class="linenum">  81</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fail')" href="../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>();
<a name="l82"><span class="linenum">  82</span></a>          } catch (coding_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l83"><span class="linenum">  83</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('Invalid extension', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l84"><span class="linenum">  84</span></a>          }
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">        // Test there is an exception if you add something with defaulticon when</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">        // there is already a type that has it.</span>
<a name="l88"><span class="linenum">  88</span></a>          try {
<a name="l89"><span class="linenum">  89</span></a>              core_filetypes::<a class="function" onClick="logFunction('add_type')" href="../../_functions/add_type.html" onMouseOver="funcPopup(event,'add_type')">add_type</a>('gecko', 'text/plain', 'document',
<a name="l90"><span class="linenum">  90</span></a>                      array(), '', '', true);
<a name="l91"><span class="linenum">  91</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fail')" href="../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>();
<a name="l92"><span class="linenum">  92</span></a>          } catch (coding_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l93"><span class="linenum">  93</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('default icon set', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l94"><span class="linenum">  94</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('text/plain', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l95"><span class="linenum">  95</span></a>          }
<a name="l96"><span class="linenum">  96</span></a>      }
<a name="l97"><span class="linenum">  97</span></a>  
<a name="l98"><span class="linenum">  98</span></a>      public function <a class="function" onClick="logFunction('test_update_type')" href="../../_functions/test_update_type.html" onMouseOver="funcPopup(event,'test_update_type')">test_update_type</a>() {
<a name="l99"><span class="linenum">  99</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>();
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">        // Check previous value for the MIME type of Word documents.</span>
<a name="l102"><span class="linenum"> 102</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l103"><span class="linenum"> 103</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('application/msword', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>['doc']['type']);
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">        // Change it.</span>
<a name="l106"><span class="linenum"> 106</span></a>          core_filetypes::<a class="function" onClick="logFunction('update_type')" href="../../_functions/update_type.html" onMouseOver="funcPopup(event,'update_type')">update_type</a>('doc', 'doc', 'application/x-frog', 'document');
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">        // Check the MIME type is now set and also the other (not specified)</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">        // options, like groups, were removed.</span>
<a name="l110"><span class="linenum"> 110</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l111"><span class="linenum"> 111</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('application/x-frog', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>['doc']['type']);
<a name="l112"><span class="linenum"> 112</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayNotHasKey('groups', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>['doc']);
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">        // This time change the extension.</span>
<a name="l115"><span class="linenum"> 115</span></a>          core_filetypes::<a class="function" onClick="logFunction('update_type')" href="../../_functions/update_type.html" onMouseOver="funcPopup(event,'update_type')">update_type</a>('doc', 'docccc', 'application/x-frog', 'document');
<a name="l116"><span class="linenum"> 116</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l117"><span class="linenum"> 117</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('application/x-frog', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>['docccc']['type']);
<a name="l118"><span class="linenum"> 118</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayNotHasKey('doc', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>);
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">        // Test unknown extension.</span>
<a name="l121"><span class="linenum"> 121</span></a>          try {
<a name="l122"><span class="linenum"> 122</span></a>              core_filetypes::<a class="function" onClick="logFunction('update_type')" href="../../_functions/update_type.html" onMouseOver="funcPopup(event,'update_type')">update_type</a>('doc', 'doc', 'application/x-frog', 'document');
<a name="l123"><span class="linenum"> 123</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fail')" href="../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>();
<a name="l124"><span class="linenum"> 124</span></a>          } catch (coding_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l125"><span class="linenum"> 125</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('not found', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l126"><span class="linenum"> 126</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('doc', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l127"><span class="linenum"> 127</span></a>          }
<a name="l128"><span class="linenum"> 128</span></a>  
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">        // Test bogus extension causes exception.</span>
<a name="l130"><span class="linenum"> 130</span></a>          try {
<a name="l131"><span class="linenum"> 131</span></a>              core_filetypes::<a class="function" onClick="logFunction('update_type')" href="../../_functions/update_type.html" onMouseOver="funcPopup(event,'update_type')">update_type</a>('docccc', '.frog', 'application/x-frog', 'document');
<a name="l132"><span class="linenum"> 132</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fail')" href="../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>();
<a name="l133"><span class="linenum"> 133</span></a>          } catch (coding_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l134"><span class="linenum"> 134</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('Invalid extension', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l135"><span class="linenum"> 135</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('.frog', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l136"><span class="linenum"> 136</span></a>          }
<a name="l137"><span class="linenum"> 137</span></a>          try {
<a name="l138"><span class="linenum"> 138</span></a>              core_filetypes::<a class="function" onClick="logFunction('update_type')" href="../../_functions/update_type.html" onMouseOver="funcPopup(event,'update_type')">update_type</a>('docccc', '', 'application/x-frog', 'document');
<a name="l139"><span class="linenum"> 139</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fail')" href="../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>();
<a name="l140"><span class="linenum"> 140</span></a>          } catch (coding_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l141"><span class="linenum"> 141</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('Invalid extension', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l142"><span class="linenum"> 142</span></a>          }
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">        // Test defaulticon changes.</span>
<a name="l145"><span class="linenum"> 145</span></a>          try {
<a name="l146"><span class="linenum"> 146</span></a>              core_filetypes::<a class="function" onClick="logFunction('update_type')" href="../../_functions/update_type.html" onMouseOver="funcPopup(event,'update_type')">update_type</a>('docccc', 'docccc', 'text/plain', 'document',
<a name="l147"><span class="linenum"> 147</span></a>                      array(), '', '', true);
<a name="l148"><span class="linenum"> 148</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fail')" href="../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>();
<a name="l149"><span class="linenum"> 149</span></a>          } catch (coding_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l150"><span class="linenum"> 150</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('default icon set', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l151"><span class="linenum"> 151</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('text/plain', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l152"><span class="linenum"> 152</span></a>          }
<a name="l153"><span class="linenum"> 153</span></a>      }
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>      public function <a class="function" onClick="logFunction('test_delete_type')" href="../../_functions/test_delete_type.html" onMouseOver="funcPopup(event,'test_delete_type')">test_delete_type</a>() {
<a name="l156"><span class="linenum"> 156</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>();
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">        // Filetype exists.</span>
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l160"><span class="linenum"> 160</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayHasKey('doc', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>);
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">        // Remove it.</span>
<a name="l163"><span class="linenum"> 163</span></a>          core_filetypes::<a class="function" onClick="logFunction('delete_type')" href="../../_functions/delete_type.html" onMouseOver="funcPopup(event,'delete_type')">delete_type</a>('doc');
<a name="l164"><span class="linenum"> 164</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l165"><span class="linenum"> 165</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayNotHasKey('doc', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>);
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">        // Test removing one that doesn't exist causes exception.</span>
<a name="l168"><span class="linenum"> 168</span></a>          try {
<a name="l169"><span class="linenum"> 169</span></a>              core_filetypes::<a class="function" onClick="logFunction('delete_type')" href="../../_functions/delete_type.html" onMouseOver="funcPopup(event,'delete_type')">delete_type</a>('doc');
<a name="l170"><span class="linenum"> 170</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fail')" href="../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>();
<a name="l171"><span class="linenum"> 171</span></a>          } catch (coding_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l172"><span class="linenum"> 172</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('not found', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l173"><span class="linenum"> 173</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('doc', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l174"><span class="linenum"> 174</span></a>          }
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">        // Try a custom type (slightly different).</span>
<a name="l177"><span class="linenum"> 177</span></a>          core_filetypes::<a class="function" onClick="logFunction('add_type')" href="../../_functions/add_type.html" onMouseOver="funcPopup(event,'add_type')">add_type</a>('frog', 'application/x-frog', 'document');
<a name="l178"><span class="linenum"> 178</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l179"><span class="linenum"> 179</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayHasKey('frog', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>);
<a name="l180"><span class="linenum"> 180</span></a>          core_filetypes::<a class="function" onClick="logFunction('delete_type')" href="../../_functions/delete_type.html" onMouseOver="funcPopup(event,'delete_type')">delete_type</a>('frog');
<a name="l181"><span class="linenum"> 181</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l182"><span class="linenum"> 182</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayNotHasKey('frog', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>);
<a name="l183"><span class="linenum"> 183</span></a>      }
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>      public function <a class="function" onClick="logFunction('test_revert_type_to_default')" href="../../_functions/test_revert_type_to_default.html" onMouseOver="funcPopup(event,'test_revert_type_to_default')">test_revert_type_to_default</a>() {
<a name="l186"><span class="linenum"> 186</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>();
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">        // Delete and then revert.</span>
<a name="l189"><span class="linenum"> 189</span></a>          core_filetypes::<a class="function" onClick="logFunction('delete_type')" href="../../_functions/delete_type.html" onMouseOver="funcPopup(event,'delete_type')">delete_type</a>('doc');
<a name="l190"><span class="linenum"> 190</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayNotHasKey('doc', <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>());
<a name="l191"><span class="linenum"> 191</span></a>          core_filetypes::<a class="function" onClick="logFunction('revert_type_to_default')" href="../../_functions/revert_type_to_default.html" onMouseOver="funcPopup(event,'revert_type_to_default')">revert_type_to_default</a>('doc');
<a name="l192"><span class="linenum"> 192</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayHasKey('doc', <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>());
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">        // Update and then revert.</span>
<a name="l195"><span class="linenum"> 195</span></a>          core_filetypes::<a class="function" onClick="logFunction('update_type')" href="../../_functions/update_type.html" onMouseOver="funcPopup(event,'update_type')">update_type</a>('asm', 'asm', 'text/plain', 'sourcecode', array(), '', 'An asm file');
<a name="l196"><span class="linenum"> 196</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l197"><span class="linenum"> 197</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('An asm file', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>['asm']['customdescription']);
<a name="l198"><span class="linenum"> 198</span></a>          core_filetypes::<a class="function" onClick="logFunction('revert_type_to_default')" href="../../_functions/revert_type_to_default.html" onMouseOver="funcPopup(event,'revert_type_to_default')">revert_type_to_default</a>('asm');
<a name="l199"><span class="linenum"> 199</span></a>          <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l200"><span class="linenum"> 200</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertArrayNotHasKey('customdescription', <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>['asm']);
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">        // Test reverting a non-default type causes exception.</span>
<a name="l203"><span class="linenum"> 203</span></a>          try {
<a name="l204"><span class="linenum"> 204</span></a>              core_filetypes::<a class="function" onClick="logFunction('revert_type_to_default')" href="../../_functions/revert_type_to_default.html" onMouseOver="funcPopup(event,'revert_type_to_default')">revert_type_to_default</a>('frog');
<a name="l205"><span class="linenum"> 205</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('fail')" href="../../_functions/fail.html" onMouseOver="funcPopup(event,'fail')">fail</a>();
<a name="l206"><span class="linenum"> 206</span></a>          } catch (coding_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l207"><span class="linenum"> 207</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('not a default type', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l208"><span class="linenum"> 208</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('frog', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>());
<a name="l209"><span class="linenum"> 209</span></a>          }
<a name="l210"><span class="linenum"> 210</span></a>      }
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>      <span class="comment">/**</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     * Check that the logic cleans up the variable by deleting parts that are</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     * no longer needed.</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     */</span>
<a name="l216"><span class="linenum"> 216</span></a>      public function <a class="function" onClick="logFunction('test_cleanup')" href="../../_functions/test_cleanup.html" onMouseOver="funcPopup(event,'test_cleanup')">test_cleanup</a>() {
<a name="l217"><span class="linenum"> 217</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l218"><span class="linenum"> 218</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>();
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">        // The custom filetypes setting is empty to start with.</span>
<a name="l221"><span class="linenum"> 221</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertObjectNotHasAttribute('customfiletypes', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>);
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">        // Add a custom filetype, then delete it.</span>
<a name="l224"><span class="linenum"> 224</span></a>          core_filetypes::<a class="function" onClick="logFunction('add_type')" href="../../_functions/add_type.html" onMouseOver="funcPopup(event,'add_type')">add_type</a>('frog', 'application/x-frog', 'document');
<a name="l225"><span class="linenum"> 225</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertObjectHasAttribute('customfiletypes', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>);
<a name="l226"><span class="linenum"> 226</span></a>          core_filetypes::<a class="function" onClick="logFunction('delete_type')" href="../../_functions/delete_type.html" onMouseOver="funcPopup(event,'delete_type')">delete_type</a>('frog');
<a name="l227"><span class="linenum"> 227</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertObjectNotHasAttribute('customfiletypes', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>);
<a name="l228"><span class="linenum"> 228</span></a>  
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">        // Change a standard filetype, then change it back.</span>
<a name="l230"><span class="linenum"> 230</span></a>          core_filetypes::<a class="function" onClick="logFunction('update_type')" href="../../_functions/update_type.html" onMouseOver="funcPopup(event,'update_type')">update_type</a>('asm', 'asm', 'text/plain', 'document');
<a name="l231"><span class="linenum"> 231</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertObjectHasAttribute('customfiletypes', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>);
<a name="l232"><span class="linenum"> 232</span></a>          core_filetypes::<a class="function" onClick="logFunction('update_type')" href="../../_functions/update_type.html" onMouseOver="funcPopup(event,'update_type')">update_type</a>('asm', 'asm', 'text/plain', 'sourcecode');
<a name="l233"><span class="linenum"> 233</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertObjectNotHasAttribute('customfiletypes', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>);
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">        // Delete a standard filetype, then add it back (the same).</span>
<a name="l236"><span class="linenum"> 236</span></a>          core_filetypes::<a class="function" onClick="logFunction('delete_type')" href="../../_functions/delete_type.html" onMouseOver="funcPopup(event,'delete_type')">delete_type</a>('asm');
<a name="l237"><span class="linenum"> 237</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertObjectHasAttribute('customfiletypes', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>);
<a name="l238"><span class="linenum"> 238</span></a>          core_filetypes::<a class="function" onClick="logFunction('add_type')" href="../../_functions/add_type.html" onMouseOver="funcPopup(event,'add_type')">add_type</a>('asm', 'text/plain', 'sourcecode');
<a name="l239"><span class="linenum"> 239</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertObjectNotHasAttribute('customfiletypes', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>);
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">        // Revert a changed type.</span>
<a name="l242"><span class="linenum"> 242</span></a>          core_filetypes::<a class="function" onClick="logFunction('update_type')" href="../../_functions/update_type.html" onMouseOver="funcPopup(event,'update_type')">update_type</a>('asm', 'asm', 'text/plain', 'document');
<a name="l243"><span class="linenum"> 243</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertObjectHasAttribute('customfiletypes', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>);
<a name="l244"><span class="linenum"> 244</span></a>          core_filetypes::<a class="function" onClick="logFunction('revert_type_to_default')" href="../../_functions/revert_type_to_default.html" onMouseOver="funcPopup(event,'revert_type_to_default')">revert_type_to_default</a>('asm');
<a name="l245"><span class="linenum"> 245</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertObjectNotHasAttribute('customfiletypes', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>);
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">        // Revert a deleted type.</span>
<a name="l248"><span class="linenum"> 248</span></a>          core_filetypes::<a class="function" onClick="logFunction('delete_type')" href="../../_functions/delete_type.html" onMouseOver="funcPopup(event,'delete_type')">delete_type</a>('asm');
<a name="l249"><span class="linenum"> 249</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertObjectHasAttribute('customfiletypes', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>);
<a name="l250"><span class="linenum"> 250</span></a>          core_filetypes::<a class="function" onClick="logFunction('revert_type_to_default')" href="../../_functions/revert_type_to_default.html" onMouseOver="funcPopup(event,'revert_type_to_default')">revert_type_to_default</a>('asm');
<a name="l251"><span class="linenum"> 251</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertObjectNotHasAttribute('customfiletypes', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>);
<a name="l252"><span class="linenum"> 252</span></a>      }
<a name="l253"><span class="linenum"> 253</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'revert_type_to_default': ['revert_type_to_default', 'Reverts a file type to the default. May only be called on types that have default values. This will undelete the type if necessary or set its values. If the type is already at default values, does nothing. ', [['lib/classes','filetypes.php',608]], 6],
'add_type': ['add_type', 'Adds a new entry to the list of custom filetypes. ', [['lib/classes','filetypes.php',445]], 12],
'update_type': ['update_type', 'Updates an entry in the list of filetypes in config. ', [['lib/classes','filetypes.php',520]], 13],
'test_add_type': ['test_add_type', '', [['lib/tests','filetypes_test.php',39]], 0],
'test_revert_type_to_default': ['test_revert_type_to_default', '', [['lib/tests','filetypes_test.php',185]], 0],
'delete_type': ['delete_type', 'Deletes a file type from the config list (or, for a standard one, marks it as deleted). ', [['lib/classes','filetypes.php',574]], 9],
'getmessage': ['getmessage', '', [['lib/google/src/Google/Service','Freebase.php',441],['lib/google/src/Google/Service','AdSense.php',2970],['lib/google/src/Google/Service','Replicapool.php',1165],['lib/google/src/Google/Service','Replicapool.php',1257],['lib/google/src/Google/Service','Computeaccounts.php',1368],['lib/google/src/Google/Service','Computeaccounts.php',1460],['lib/google/src/Google/Service','Appengine.php',1604],['lib/google/src/Google/Service','Books.php',3579],['lib/google/src/Google/Service','Books.php',4429],['lib/google/src/Google/Service','Script.php',360],['lib/google/src/Google/Service','DeploymentManager.php',1116],['lib/google/src/Google/Service','DeploymentManager.php',1604],['lib/google/src/Google/Service','DeploymentManager.php',1641],['lib/google/src/Google/Service','DeploymentManager.php',1823],['lib/google/src/Google/Service','DeploymentManager.php',1860],['lib/google/src/Google/Service','Dataflow.php',2656],['lib/google/src/Google/Service','CloudUserAccounts.php',1807],['lib/google/src/Google/Service','CloudUserAccounts.php',1899],['lib/google/src/Google/Service','Replicapoolupdater.php',617],['lib/google/src/Google/Service','Replicapoolupdater.php',926],['lib/google/src/Google/Service','Replicapoolupdater.php',1018],['lib/google/src/Google/Service','Replicapoolupdater.php',1252],['lib/google/src/Google/Service','Bigquery.php',1367],['lib/google/src/Google/Service','ShoppingContent.php',4125],['lib/google/src/Google/Service','ShoppingContent.php',4527],['lib/google/src/Google/Service','ShoppingContent.php',4572],['lib/google/src/Google/Service','Genomics.php',3622],['lib/google/src/Google/Service','Reports.php',1106],['lib/google/src/Google/Service','Gmail.php',1371],['lib/google/src/Google/Service','Gmail.php',1467],['lib/google/src/Google/Service','Gmail.php',1495],['lib/google/src/Google/Service','Gmail.php',1513],['lib/google/src/Google/Service','Gmail.php',1531],['lib/google/src/Google/Service','Autoscaler.php',1079],['lib/google/src/Google/Service','Autoscaler.php',1171],['lib/google/src/Google/Service','AdExchangeSeller.php',1043],['lib/google/src/Google/Service','IdentityToolkit.php',1266],['lib/pear','PEAR.php',941],['lib/google/src/Google/Service','Storagetransfer.php',948],['lib/htmlpurifier/HTMLPurifier','Language.php',86],['lib/google/src/Google/Service','Resourceviews.php',894],['lib/google/src/Google/Service','Resourceviews.php',986],['lib/google/src/Google/Service','SQLAdmin.php',3029],['lib/google/src/Google/Service','Compute.php',8752],['lib/google/src/Google/Service','Compute.php',9200],['lib/google/src/Google/Service','Compute.php',10292],['lib/google/src/Google/Service','Compute.php',10384],['lib/google/src/Google/Service','Compute.php',10890],['lib/google/src/Google/Service','Compute.php',12525],['lib/google/src/Google/Service','Compute.php',12771],['lib/google/src/Google/Service','Compute.php',13249],['lib/google/src/Google/Service','Compute.php',13652],['lib/google/src/Google/Service','Compute.php',13804],['lib/google/src/Google/Service','Compute.php',14396],['lib/google/src/Google/Service','Compute.php',14488],['lib/google/src/Google/Service','Compute.php',14580],['lib/google/src/Google/Service','Compute.php',15235],['lib/google/src/Google/Service','Compute.php',16249],['lib/google/src/Google/Service','Compute.php',16675],['lib/google/src/Google/Service','Compute.php',17005],['lib/google/src/Google/Service','Compute.php',17723],['lib/google/src/Google/Service','Pubsub.php',711],['lib/google/src/Google/Service','Pubsub.php',748],['lib/google/src/Google/Service','Dfareporting.php',19533]], 489],
'test_cleanup': ['test_cleanup', 'Check that the logic cleans up the variable by deleting parts that are no longer needed. ', [['lib/tests','filetypes_test.php',212],['tag/tests','taglib_test.php',475]], 0],
'assertequals': ['assertequals', 'Asserts that two variables are equal. ', [['lib/tests','completionlib_test.php',68]], 12471],
'get_mimetypes_array': ['get_mimetypes_array', 'Returns a list of information about file types based on extensions. ', [['lib','filelib.php',1360]], 27],
'test_update_type': ['test_update_type', '', [['lib/tests','filetypes_test.php',98]], 0],
'fail': ['fail', '', [['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',133],['lib/lessphp/Exception','Chunk.php',181],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',133],['lib/editor/atto/yui/src/rangy/js','rangy-core.js',133]], 1158],
'test_delete_type': ['test_delete_type', '', [['lib/tests','filetypes_test.php',155]], 0],
'resetaftertest': ['resetaftertest', 'Reset everything after current test. ', [['lib/phpunit/classes','advanced_testcase.php',246]], 1528],
'defined': ['defined', '', [], 4731]};
CLASS_DATA={
'core_filetypes_testcase': ['core_filetypes_testcase', 'Unit tests for /lib/classes/filetypes.php. ', [['lib/tests','filetypes_test.php',30]], 0]};
CONST_DATA={
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
