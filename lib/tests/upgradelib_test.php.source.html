<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/tests/upgradelib_test.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/tests';
filename='upgradelib_test.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/tests/</a> -> <a href="upgradelib_test.php.html">upgradelib_test.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="upgradelib_test.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="upgradelib_test.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Unit tests for the lib/upgradelib.php library.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package   core</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @category  phpunit</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright 2013 onwards Eloy Lafuente (stronk7) {@link http://stronk7.com}</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l29"><span class="linenum">  29</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/upgradelib.php');
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/**</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * Tests various classes and functions in upgradelib.php library.</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> */</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('core_upgradelib_testcase')" href="../../_classes/core_upgradelib_testcase.html" onMouseOver="classPopup(event,'core_upgradelib_testcase')">core_upgradelib_testcase</a> extends advanced_testcase {
<a name="l35"><span class="linenum">  35</span></a>  
<a name="l36"><span class="linenum">  36</span></a>      <span class="comment">/**</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     * Test the {@link upgrade_stale_php_files_present() function</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">     */</span>
<a name="l39"><span class="linenum">  39</span></a>      public function <a class="function" onClick="logFunction('test_upgrade_stale_php_files_present')" href="../../_functions/test_upgrade_stale_php_files_present.html" onMouseOver="funcPopup(event,'test_upgrade_stale_php_files_present')">test_upgrade_stale_php_files_present</a>() {
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">        // Just call the function, must return bool false always</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">        // if there aren't any old files in the codebase.</span>
<a name="l42"><span class="linenum">  42</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="function" onClick="logFunction('upgrade_stale_php_files_present')" href="../../_functions/upgrade_stale_php_files_present.html" onMouseOver="funcPopup(event,'upgrade_stale_php_files_present')">upgrade_stale_php_files_present</a>());
<a name="l43"><span class="linenum">  43</span></a>      }
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>      <span class="comment">/**</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     * Populate some fake grade items into the database with specified</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">     * sortorder and course id.</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     *</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     * NOTE: This function doesn't make much attempt to respect the</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * gradebook internals, its simply used to fake some data for</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     * testing the upgradelib function. Please don't use it for other</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     * purposes.</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     *</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     * @param int $courseid id of course</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     * @param int $sortorder numeric sorting order of item</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     * @return stdClass grade item object from the database.</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">     */</span>
<a name="l58"><span class="linenum">  58</span></a>      private function <a class="function" onClick="logFunction('insert_fake_grade_item_sortorder')" href="../../_functions/insert_fake_grade_item_sortorder.html" onMouseOver="funcPopup(event,'insert_fake_grade_item_sortorder')">insert_fake_grade_item_sortorder</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a>) {
<a name="l59"><span class="linenum">  59</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l60"><span class="linenum">  60</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = new stdClass();
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('courseid')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a> = <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>;
<a name="l64"><span class="linenum">  64</span></a>          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('sortorder')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/sortorder.html">sortorder</a> = <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a>;
<a name="l65"><span class="linenum">  65</span></a>          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('gradetype')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/gradetype.html">gradetype</a> = <a class="constant" onClick="logConstant('GRADE_TYPE_VALUE')" href="../../_constants/GRADE_TYPE_VALUE.html" onMouseOver="constPopup(event,'GRADE_TYPE_VALUE')">GRADE_TYPE_VALUE</a>;
<a name="l66"><span class="linenum">  66</span></a>          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('grademin')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/grademin.html">grademin</a> = 30;
<a name="l67"><span class="linenum">  67</span></a>          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('grademax')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/grademax.html">grademax</a> = 110;
<a name="l68"><span class="linenum">  68</span></a>          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('itemnumber')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/itemnumber.html">itemnumber</a> = 1;
<a name="l69"><span class="linenum">  69</span></a>          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('iteminfo')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/iteminfo.html">iteminfo</a> = '';
<a name="l70"><span class="linenum">  70</span></a>          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l72"><span class="linenum">  72</span></a>  
<a name="l73"><span class="linenum">  73</span></a>          <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('grade_items', <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l74"><span class="linenum">  74</span></a>  
<a name="l75"><span class="linenum">  75</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('grade_items', array('id' =&gt; <a class="var it749" onMouseOver="hilite(749)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it42962" onMouseOver="hilite(42962)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l76"><span class="linenum">  76</span></a>      }
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>      public function <a class="function" onClick="logFunction('test_upgrade_fix_missing_root_folders_draft')" href="../../_functions/test_upgrade_fix_missing_root_folders_draft.html" onMouseOver="funcPopup(event,'test_upgrade_fix_missing_root_folders_draft')">test_upgrade_fix_missing_root_folders_draft</a>() {
<a name="l79"><span class="linenum">  79</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../../_variables/SITE.html">$SITE</a>;
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_user')" href="../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>();
<a name="l84"><span class="linenum">  84</span></a>          <a class="var it639" onMouseOver="hilite(639)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../../_variables/usercontext.html">$usercontext</a> = <a class="class" onClick="logClass('context_user')" href="../../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l85"><span class="linenum">  85</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setUser')" href="../../_functions/setuser.html" onMouseOver="funcPopup(event,'setuser')">setUser</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l86"><span class="linenum">  86</span></a>          <a class="var it16277" onMouseOver="hilite(16277)" onMouseOut="lolite()" onClick="logVariable('resource1')" href="../../_variables/resource1.html">$resource1</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('get_plugin_generator')" href="../../_functions/get_plugin_generator.html" onMouseOver="funcPopup(event,'get_plugin_generator')">get_plugin_generator</a>('mod_resource')
<a name="l87"><span class="linenum">  87</span></a>              -&gt;<a class="function" onClick="logFunction('create_instance')" href="../../_functions/create_instance.html" onMouseOver="funcPopup(event,'create_instance')">create_instance</a>(array('course' =&gt; <a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it43008" onMouseOver="hilite(43008)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l88"><span class="linenum">  88</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it16277" onMouseOver="hilite(16277)" onMouseOut="lolite()" onClick="logVariable('resource1')" href="../../_variables/resource1.html">$resource1</a>-&gt;<a onClick="logVariable('cmid')" class="var it44518" onMouseOver="hilite(44518)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>);
<a name="l89"><span class="linenum">  89</span></a>          <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a> = 0;
<a name="l90"><span class="linenum">  90</span></a>          <a class="function" onClick="logFunction('file_prepare_draft_area')" href="../../_functions/file_prepare_draft_area.html" onMouseOver="funcPopup(event,'file_prepare_draft_area')">file_prepare_draft_area</a>(<a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_resource', 'content', 0);
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>          <a class="var it16278" onMouseOver="hilite(16278)" onMouseOut="lolite()" onClick="logVariable('queryparams')" href="../../_variables/queryparams.html">$queryparams</a> = array(
<a name="l93"><span class="linenum">  93</span></a>              'component' =&gt; 'user',
<a name="l94"><span class="linenum">  94</span></a>              'contextid' =&gt; <a class="var it639" onMouseOver="hilite(639)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it43024" onMouseOver="hilite(43024)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l95"><span class="linenum">  95</span></a>              'filearea' =&gt; 'draft',
<a name="l96"><span class="linenum">  96</span></a>              'itemid' =&gt; <a class="var it637" onMouseOver="hilite(637)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>,
<a name="l97"><span class="linenum">  97</span></a>          );
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment">        // Make sure there are two records in files for the draft file area and one of them has filename '.'.</span>
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_menu')" href="../../_functions/get_records_menu.html" onMouseOver="funcPopup(event,'get_records_menu')">get_records_menu</a>('files', <a class="var it16278" onMouseOver="hilite(16278)" onMouseOut="lolite()" onClick="logVariable('queryparams')" href="../../_variables/queryparams.html">$queryparams</a>, '', 'id, filename');
<a name="l101"><span class="linenum"> 101</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(2, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>));
<a name="l102"><span class="linenum"> 102</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('.', <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>));
<a name="l103"><span class="linenum"> 103</span></a>          <a class="var it16279" onMouseOver="hilite(16279)" onMouseOut="lolite()" onClick="logVariable('originalhash')" href="../../_variables/originalhash.html">$originalhash</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('files', 'pathnamehash', <a class="var it16278" onMouseOver="hilite(16278)" onMouseOut="lolite()" onClick="logVariable('queryparams')" href="../../_variables/queryparams.html">$queryparams</a> + array('filename' =&gt; '.'));
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">        // Delete record with filename '.' and make sure it does not exist any more.</span>
<a name="l106"><span class="linenum"> 106</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('files', <a class="var it16278" onMouseOver="hilite(16278)" onMouseOut="lolite()" onClick="logVariable('queryparams')" href="../../_variables/queryparams.html">$queryparams</a> + array('filename' =&gt; '.'));
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_menu')" href="../../_functions/get_records_menu.html" onMouseOver="funcPopup(event,'get_records_menu')">get_records_menu</a>('files', <a class="var it16278" onMouseOver="hilite(16278)" onMouseOut="lolite()" onClick="logVariable('queryparams')" href="../../_variables/queryparams.html">$queryparams</a>, '', 'id, filename');
<a name="l109"><span class="linenum"> 109</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(1, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>));
<a name="l110"><span class="linenum"> 110</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('.', <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>));
<a name="l111"><span class="linenum"> 111</span></a>  
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">        // Run upgrade script and make sure the record is restored.</span>
<a name="l113"><span class="linenum"> 113</span></a>          <a class="function" onClick="logFunction('upgrade_fix_missing_root_folders_draft')" href="../../_functions/upgrade_fix_missing_root_folders_draft.html" onMouseOver="funcPopup(event,'upgrade_fix_missing_root_folders_draft')">upgrade_fix_missing_root_folders_draft</a>();
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_menu')" href="../../_functions/get_records_menu.html" onMouseOver="funcPopup(event,'get_records_menu')">get_records_menu</a>('files', <a class="var it16278" onMouseOver="hilite(16278)" onMouseOut="lolite()" onClick="logVariable('queryparams')" href="../../_variables/queryparams.html">$queryparams</a>, '', 'id, filename');
<a name="l116"><span class="linenum"> 116</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(2, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>));
<a name="l117"><span class="linenum"> 117</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('.', <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>));
<a name="l118"><span class="linenum"> 118</span></a>          <a class="var it9433" onMouseOver="hilite(9433)" onMouseOut="lolite()" onClick="logVariable('newhash')" href="../../_variables/newhash.html">$newhash</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('files', 'pathnamehash', <a class="var it16278" onMouseOver="hilite(16278)" onMouseOut="lolite()" onClick="logVariable('queryparams')" href="../../_variables/queryparams.html">$queryparams</a> + array('filename' =&gt; '.'));
<a name="l119"><span class="linenum"> 119</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it16279" onMouseOver="hilite(16279)" onMouseOut="lolite()" onClick="logVariable('originalhash')" href="../../_variables/originalhash.html">$originalhash</a>, <a class="var it9433" onMouseOver="hilite(9433)" onMouseOut="lolite()" onClick="logVariable('newhash')" href="../../_variables/newhash.html">$newhash</a>);
<a name="l120"><span class="linenum"> 120</span></a>      }
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>      <span class="comment">/**</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * Test upgrade minmaxgrade step.</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     */</span>
<a name="l125"><span class="linenum"> 125</span></a>      public function <a class="function" onClick="logFunction('test_upgrade_minmaxgrade')" href="../../_functions/test_upgrade_minmaxgrade.html" onMouseOver="funcPopup(event,'test_upgrade_minmaxgrade')">test_upgrade_minmaxgrade</a>() {
<a name="l126"><span class="linenum"> 126</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l127"><span class="linenum"> 127</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it16280" onMouseOver="hilite(16280)" onMouseOut="lolite()" onClick="logVariable('initialminmax')" href="../../_variables/initialminmax.html">$initialminmax</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('grade_minmaxtouse')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/grade_minmaxtouse.html">grade_minmaxtouse</a>;
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>();
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>          <a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l132"><span class="linenum"> 132</span></a>          <a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('c2')" href="../../_variables/c2.html">$c2</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l134"><span class="linenum"> 134</span></a>          <a class="var it3104" onMouseOver="hilite(3104)" onMouseOut="lolite()" onClick="logVariable('u1')" href="../../_variables/u1.html">$u1</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_user')" href="../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>();
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('a1')" href="../../_variables/a1.html">$a1</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_module')" href="../../_functions/create_module.html" onMouseOver="funcPopup(event,'create_module')">create_module</a>('assign', array('course' =&gt; <a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>, 'grade' =&gt; 100));
<a name="l136"><span class="linenum"> 136</span></a>          <a class="var it5703" onMouseOver="hilite(5703)" onMouseOut="lolite()" onClick="logVariable('a2')" href="../../_variables/a2.html">$a2</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_module')" href="../../_functions/create_module.html" onMouseOver="funcPopup(event,'create_module')">create_module</a>('assign', array('course' =&gt; <a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('c2')" href="../../_variables/c2.html">$c2</a>, 'grade' =&gt; 100));
<a name="l137"><span class="linenum"> 137</span></a>          <a class="var it16281" onMouseOver="hilite(16281)" onMouseOut="lolite()" onClick="logVariable('a3')" href="../../_variables/a3.html">$a3</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_module')" href="../../_functions/create_module.html" onMouseOver="funcPopup(event,'create_module')">create_module</a>('assign', array('course' =&gt; <a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>, 'grade' =&gt; 100));
<a name="l138"><span class="linenum"> 138</span></a>  
<a name="l139"><span class="linenum"> 139</span></a>          <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('cm1')" href="../../_variables/cm1.html">$cm1</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('assign', <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('a1')" href="../../_variables/a1.html">$a1</a>-&gt;<a onClick="logVariable('id')" class="var it44519" onMouseOver="hilite(44519)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l140"><span class="linenum"> 140</span></a>          <a class="var it16282" onMouseOver="hilite(16282)" onMouseOut="lolite()" onClick="logVariable('ctx1')" href="../../_variables/ctx1.html">$ctx1</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('cm1')" href="../../_variables/cm1.html">$cm1</a>-&gt;<a onClick="logVariable('id')" class="var it42947" onMouseOver="hilite(42947)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l141"><span class="linenum"> 141</span></a>          <a class="var it691" onMouseOver="hilite(691)" onMouseOut="lolite()" onClick="logVariable('assign1')" href="../../_variables/assign1.html">$assign1</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign')" href="../../_classes/assign.html" onMouseOver="classPopup(event,'assign')">assign</a>(<a class="var it16282" onMouseOver="hilite(16282)" onMouseOut="lolite()" onClick="logVariable('ctx1')" href="../../_variables/ctx1.html">$ctx1</a>, <a class="var it694" onMouseOver="hilite(694)" onMouseOut="lolite()" onClick="logVariable('cm1')" href="../../_variables/cm1.html">$cm1</a>, <a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>);
<a name="l142"><span class="linenum"> 142</span></a>  
<a name="l143"><span class="linenum"> 143</span></a>          <a class="var it695" onMouseOver="hilite(695)" onMouseOut="lolite()" onClick="logVariable('cm2')" href="../../_variables/cm2.html">$cm2</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('assign', <a class="var it5703" onMouseOver="hilite(5703)" onMouseOut="lolite()" onClick="logVariable('a2')" href="../../_variables/a2.html">$a2</a>-&gt;<a onClick="logVariable('id')" class="var it44520" onMouseOver="hilite(44520)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l144"><span class="linenum"> 144</span></a>          <a class="var it16283" onMouseOver="hilite(16283)" onMouseOut="lolite()" onClick="logVariable('ctx2')" href="../../_variables/ctx2.html">$ctx2</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it695" onMouseOver="hilite(695)" onMouseOut="lolite()" onClick="logVariable('cm2')" href="../../_variables/cm2.html">$cm2</a>-&gt;<a onClick="logVariable('id')" class="var it42945" onMouseOver="hilite(42945)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l145"><span class="linenum"> 145</span></a>          <a class="var it692" onMouseOver="hilite(692)" onMouseOut="lolite()" onClick="logVariable('assign2')" href="../../_variables/assign2.html">$assign2</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign')" href="../../_classes/assign.html" onMouseOver="classPopup(event,'assign')">assign</a>(<a class="var it16283" onMouseOver="hilite(16283)" onMouseOut="lolite()" onClick="logVariable('ctx2')" href="../../_variables/ctx2.html">$ctx2</a>, <a class="var it695" onMouseOver="hilite(695)" onMouseOut="lolite()" onClick="logVariable('cm2')" href="../../_variables/cm2.html">$cm2</a>, <a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('c2')" href="../../_variables/c2.html">$c2</a>);
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>          <a class="var it696" onMouseOver="hilite(696)" onMouseOut="lolite()" onClick="logVariable('cm3')" href="../../_variables/cm3.html">$cm3</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('assign', <a class="var it16281" onMouseOver="hilite(16281)" onMouseOut="lolite()" onClick="logVariable('a3')" href="../../_variables/a3.html">$a3</a>-&gt;<a onClick="logVariable('id')" class="var it44521" onMouseOver="hilite(44521)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l148"><span class="linenum"> 148</span></a>          <a class="var it16284" onMouseOver="hilite(16284)" onMouseOut="lolite()" onClick="logVariable('ctx3')" href="../../_variables/ctx3.html">$ctx3</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it696" onMouseOver="hilite(696)" onMouseOut="lolite()" onClick="logVariable('cm3')" href="../../_variables/cm3.html">$cm3</a>-&gt;<a onClick="logVariable('id')" class="var it42946" onMouseOver="hilite(42946)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l149"><span class="linenum"> 149</span></a>          <a class="var it693" onMouseOver="hilite(693)" onMouseOut="lolite()" onClick="logVariable('assign3')" href="../../_variables/assign3.html">$assign3</a> = <span class="keyword">new </span><a class="class" onClick="logClass('assign')" href="../../_classes/assign.html" onMouseOver="classPopup(event,'assign')">assign</a>(<a class="var it16284" onMouseOver="hilite(16284)" onMouseOut="lolite()" onClick="logVariable('ctx3')" href="../../_variables/ctx3.html">$ctx3</a>, <a class="var it696" onMouseOver="hilite(696)" onMouseOut="lolite()" onClick="logVariable('cm3')" href="../../_variables/cm3.html">$cm3</a>, <a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>);
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">        // Give a grade to the student.</span>
<a name="l152"><span class="linenum"> 152</span></a>          <a class="var it16285" onMouseOver="hilite(16285)" onMouseOut="lolite()" onClick="logVariable('ug')" href="../../_variables/ug.html">$ug</a> = <a class="var it691" onMouseOver="hilite(691)" onMouseOut="lolite()" onClick="logVariable('assign1')" href="../../_variables/assign1.html">$assign1</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it3104" onMouseOver="hilite(3104)" onMouseOut="lolite()" onClick="logVariable('u1')" href="../../_variables/u1.html">$u1</a>-&gt;<a onClick="logVariable('id')" class="var it43110" onMouseOver="hilite(43110)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, true);
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it16285" onMouseOver="hilite(16285)" onMouseOut="lolite()" onClick="logVariable('ug')" href="../../_variables/ug.html">$ug</a>-&gt;<a onClick="logVariable('grade')" class="var it44522" onMouseOver="hilite(44522)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = 10;
<a name="l154"><span class="linenum"> 154</span></a>          <a class="var it691" onMouseOver="hilite(691)" onMouseOut="lolite()" onClick="logVariable('assign1')" href="../../_variables/assign1.html">$assign1</a>-&gt;<a class="function" onClick="logFunction('update_grade')" href="../../_functions/update_grade.html" onMouseOver="funcPopup(event,'update_grade')">update_grade</a>(<a class="var it16285" onMouseOver="hilite(16285)" onMouseOut="lolite()" onClick="logVariable('ug')" href="../../_variables/ug.html">$ug</a>);
<a name="l155"><span class="linenum"> 155</span></a>  
<a name="l156"><span class="linenum"> 156</span></a>          <a class="var it16285" onMouseOver="hilite(16285)" onMouseOut="lolite()" onClick="logVariable('ug')" href="../../_variables/ug.html">$ug</a> = <a class="var it692" onMouseOver="hilite(692)" onMouseOut="lolite()" onClick="logVariable('assign2')" href="../../_variables/assign2.html">$assign2</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it3104" onMouseOver="hilite(3104)" onMouseOut="lolite()" onClick="logVariable('u1')" href="../../_variables/u1.html">$u1</a>-&gt;<a onClick="logVariable('id')" class="var it43110" onMouseOver="hilite(43110)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, true);
<a name="l157"><span class="linenum"> 157</span></a>          <a class="var it16285" onMouseOver="hilite(16285)" onMouseOut="lolite()" onClick="logVariable('ug')" href="../../_variables/ug.html">$ug</a>-&gt;<a onClick="logVariable('grade')" class="var it44522" onMouseOver="hilite(44522)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = 20;
<a name="l158"><span class="linenum"> 158</span></a>          <a class="var it692" onMouseOver="hilite(692)" onMouseOut="lolite()" onClick="logVariable('assign2')" href="../../_variables/assign2.html">$assign2</a>-&gt;<a class="function" onClick="logFunction('update_grade')" href="../../_functions/update_grade.html" onMouseOver="funcPopup(event,'update_grade')">update_grade</a>(<a class="var it16285" onMouseOver="hilite(16285)" onMouseOut="lolite()" onClick="logVariable('ug')" href="../../_variables/ug.html">$ug</a>);
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>          <a class="var it16285" onMouseOver="hilite(16285)" onMouseOut="lolite()" onClick="logVariable('ug')" href="../../_variables/ug.html">$ug</a> = <a class="var it693" onMouseOver="hilite(693)" onMouseOut="lolite()" onClick="logVariable('assign3')" href="../../_variables/assign3.html">$assign3</a>-&gt;<a class="function" onClick="logFunction('get_user_grade')" href="../../_functions/get_user_grade.html" onMouseOver="funcPopup(event,'get_user_grade')">get_user_grade</a>(<a class="var it3104" onMouseOver="hilite(3104)" onMouseOut="lolite()" onClick="logVariable('u1')" href="../../_variables/u1.html">$u1</a>-&gt;<a onClick="logVariable('id')" class="var it43110" onMouseOver="hilite(43110)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, true);
<a name="l161"><span class="linenum"> 161</span></a>          <a class="var it16285" onMouseOver="hilite(16285)" onMouseOut="lolite()" onClick="logVariable('ug')" href="../../_variables/ug.html">$ug</a>-&gt;<a onClick="logVariable('grade')" class="var it44522" onMouseOver="hilite(44522)" onMouseOut="lolite()" href="../../_variables/grade.html">grade</a> = 30;
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it693" onMouseOver="hilite(693)" onMouseOut="lolite()" onClick="logVariable('assign3')" href="../../_variables/assign3.html">$assign3</a>-&gt;<a class="function" onClick="logFunction('update_grade')" href="../../_functions/update_grade.html" onMouseOver="funcPopup(event,'update_grade')">update_grade</a>(<a class="var it16285" onMouseOver="hilite(16285)" onMouseOut="lolite()" onClick="logVariable('ug')" href="../../_variables/ug.html">$ug</a>);
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">        // Run the upgrade.</span>
<a name="l166"><span class="linenum"> 166</span></a>          <a class="function" onClick="logFunction('upgrade_minmaxgrade')" href="../../_functions/upgrade_minmaxgrade.html" onMouseOver="funcPopup(event,'upgrade_minmaxgrade')">upgrade_minmaxgrade</a>();
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">        // Nothing has happened.</span>
<a name="l169"><span class="linenum"> 169</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('config', array('name' =&gt; 'show_min_max_grades_changed_' . <a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>-&gt;<a onClick="logVariable('id')" class="var it43113" onMouseOver="hilite(43113)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l170"><span class="linenum"> 170</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertSame(false, <a class="function" onClick="logFunction('grade_get_setting')" href="../../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>-&gt;<a onClick="logVariable('id')" class="var it43113" onMouseOver="hilite(43113)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', false, true));
<a name="l171"><span class="linenum"> 171</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('grade_items', array('needsupdate' =&gt; 1, 'courseid' =&gt; <a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>-&gt;<a onClick="logVariable('id')" class="var it43113" onMouseOver="hilite(43113)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l172"><span class="linenum"> 172</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('config', array('name' =&gt; 'show_min_max_grades_changed_' . <a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('c2')" href="../../_variables/c2.html">$c2</a>-&gt;<a onClick="logVariable('id')" class="var it43114" onMouseOver="hilite(43114)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l173"><span class="linenum"> 173</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertSame(false, <a class="function" onClick="logFunction('grade_get_setting')" href="../../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('c2')" href="../../_variables/c2.html">$c2</a>-&gt;<a onClick="logVariable('id')" class="var it43114" onMouseOver="hilite(43114)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', false, true));
<a name="l174"><span class="linenum"> 174</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('grade_items', array('needsupdate' =&gt; 1, 'courseid' =&gt; <a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('c2')" href="../../_variables/c2.html">$c2</a>-&gt;<a onClick="logVariable('id')" class="var it43114" onMouseOver="hilite(43114)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l175"><span class="linenum"> 175</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('config', array('name' =&gt; 'show_min_max_grades_changed_' . <a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>-&gt;<a onClick="logVariable('id')" class="var it43135" onMouseOver="hilite(43135)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l176"><span class="linenum"> 176</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertSame(false, <a class="function" onClick="logFunction('grade_get_setting')" href="../../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>-&gt;<a onClick="logVariable('id')" class="var it43135" onMouseOver="hilite(43135)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', false, true));
<a name="l177"><span class="linenum"> 177</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('grade_items', array('needsupdate' =&gt; 1, 'courseid' =&gt; <a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>-&gt;<a onClick="logVariable('id')" class="var it43135" onMouseOver="hilite(43135)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">        // Create inconsistency in c1 and c2.</span>
<a name="l180"><span class="linenum"> 180</span></a>          <a class="var it15854" onMouseOver="hilite(15854)" onMouseOut="lolite()" onClick="logVariable('giparams')" href="../../_variables/giparams.html">$giparams</a> = array('itemtype' =&gt; 'mod', 'itemmodule' =&gt; 'assign', 'iteminstance' =&gt; <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('a1')" href="../../_variables/a1.html">$a1</a>-&gt;<a onClick="logVariable('id')" class="var it44519" onMouseOver="hilite(44519)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l181"><span class="linenum"> 181</span></a>                  'courseid' =&gt; <a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>-&gt;<a onClick="logVariable('id')" class="var it43113" onMouseOver="hilite(43113)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'itemnumber' =&gt; 0);
<a name="l182"><span class="linenum"> 182</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a> = <a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch')" href="../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it15854" onMouseOver="hilite(15854)" onMouseOut="lolite()" onClick="logVariable('giparams')" href="../../_variables/giparams.html">$giparams</a>);
<a name="l183"><span class="linenum"> 183</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>-&gt;<a onClick="logVariable('grademin')" class="var it43457" onMouseOver="hilite(43457)" onMouseOut="lolite()" href="../../_variables/grademin.html">grademin</a> = 5;
<a name="l184"><span class="linenum"> 184</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>          <a class="var it15854" onMouseOver="hilite(15854)" onMouseOut="lolite()" onClick="logVariable('giparams')" href="../../_variables/giparams.html">$giparams</a> = array('itemtype' =&gt; 'mod', 'itemmodule' =&gt; 'assign', 'iteminstance' =&gt; <a class="var it5703" onMouseOver="hilite(5703)" onMouseOut="lolite()" onClick="logVariable('a2')" href="../../_variables/a2.html">$a2</a>-&gt;<a onClick="logVariable('id')" class="var it44520" onMouseOver="hilite(44520)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l187"><span class="linenum"> 187</span></a>                  'courseid' =&gt; <a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('c2')" href="../../_variables/c2.html">$c2</a>-&gt;<a onClick="logVariable('id')" class="var it43114" onMouseOver="hilite(43114)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'itemnumber' =&gt; 0);
<a name="l188"><span class="linenum"> 188</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a> = <a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch')" href="../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it15854" onMouseOver="hilite(15854)" onMouseOut="lolite()" onClick="logVariable('giparams')" href="../../_variables/giparams.html">$giparams</a>);
<a name="l189"><span class="linenum"> 189</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>-&gt;<a onClick="logVariable('grademax')" class="var it43457" onMouseOver="hilite(43457)" onMouseOut="lolite()" href="../../_variables/grademax.html">grademax</a> = 50;
<a name="l190"><span class="linenum"> 190</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l191"><span class="linenum"> 191</span></a>  
<a name="l192"><span class="linenum"> 192</span></a>  
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">        // C1 and C2 should be updated, but the course setting should not be set.</span>
<a name="l194"><span class="linenum"> 194</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('grade_minmaxtouse')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/grade_minmaxtouse.html">grade_minmaxtouse</a> = <a class="constant" onClick="logConstant('GRADE_MIN_MAX_FROM_GRADE_GRADE')" href="../../_constants/GRADE_MIN_MAX_FROM_GRADE_GRADE.html" onMouseOver="constPopup(event,'GRADE_MIN_MAX_FROM_GRADE_GRADE')">GRADE_MIN_MAX_FROM_GRADE_GRADE</a>;
<a name="l195"><span class="linenum"> 195</span></a>  
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">        // Run the upgrade.</span>
<a name="l197"><span class="linenum"> 197</span></a>          <a class="function" onClick="logFunction('upgrade_minmaxgrade')" href="../../_functions/upgrade_minmaxgrade.html" onMouseOver="funcPopup(event,'upgrade_minmaxgrade')">upgrade_minmaxgrade</a>();
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">        // C1 and C2 were partially updated.</span>
<a name="l200"><span class="linenum"> 200</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('config', array('name' =&gt; 'show_min_max_grades_changed_' . <a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>-&gt;<a onClick="logVariable('id')" class="var it43113" onMouseOver="hilite(43113)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l201"><span class="linenum"> 201</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertSame(false, <a class="function" onClick="logFunction('grade_get_setting')" href="../../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>-&gt;<a onClick="logVariable('id')" class="var it43113" onMouseOver="hilite(43113)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', false, true));
<a name="l202"><span class="linenum"> 202</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('grade_items', array('needsupdate' =&gt; 1, 'courseid' =&gt; <a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>-&gt;<a onClick="logVariable('id')" class="var it43113" onMouseOver="hilite(43113)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('config', array('name' =&gt; 'show_min_max_grades_changed_' . <a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('c2')" href="../../_variables/c2.html">$c2</a>-&gt;<a onClick="logVariable('id')" class="var it43114" onMouseOver="hilite(43114)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l204"><span class="linenum"> 204</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertSame(false, <a class="function" onClick="logFunction('grade_get_setting')" href="../../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('c2')" href="../../_variables/c2.html">$c2</a>-&gt;<a onClick="logVariable('id')" class="var it43114" onMouseOver="hilite(43114)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', false, true));
<a name="l205"><span class="linenum"> 205</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('grade_items', array('needsupdate' =&gt; 1, 'courseid' =&gt; <a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('c2')" href="../../_variables/c2.html">$c2</a>-&gt;<a onClick="logVariable('id')" class="var it43114" onMouseOver="hilite(43114)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l206"><span class="linenum"> 206</span></a>  
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment">        // Nothing has happened for C3.</span>
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('config', array('name' =&gt; 'show_min_max_grades_changed_' . <a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>-&gt;<a onClick="logVariable('id')" class="var it43135" onMouseOver="hilite(43135)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l209"><span class="linenum"> 209</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertSame(false, <a class="function" onClick="logFunction('grade_get_setting')" href="../../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>-&gt;<a onClick="logVariable('id')" class="var it43135" onMouseOver="hilite(43135)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', false, true));
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('grade_items', array('needsupdate' =&gt; 1, 'courseid' =&gt; <a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>-&gt;<a onClick="logVariable('id')" class="var it43135" onMouseOver="hilite(43135)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l211"><span class="linenum"> 211</span></a>  
<a name="l212"><span class="linenum"> 212</span></a>  
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">        // Course setting should not be set on a course that has the setting already.</span>
<a name="l214"><span class="linenum"> 214</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('grade_minmaxtouse')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/grade_minmaxtouse.html">grade_minmaxtouse</a> = <a class="constant" onClick="logConstant('GRADE_MIN_MAX_FROM_GRADE_ITEM')" href="../../_constants/GRADE_MIN_MAX_FROM_GRADE_ITEM.html" onMouseOver="constPopup(event,'GRADE_MIN_MAX_FROM_GRADE_ITEM')">GRADE_MIN_MAX_FROM_GRADE_ITEM</a>;
<a name="l215"><span class="linenum"> 215</span></a>          <a class="function" onClick="logFunction('grade_set_setting')" href="../../_functions/grade_set_setting.html" onMouseOver="funcPopup(event,'grade_set_setting')">grade_set_setting</a>(<a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>-&gt;<a onClick="logVariable('id')" class="var it43113" onMouseOver="hilite(43113)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', -1); <span class="comment">// Sets different value than constant to check that it remained the same.</span>
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">        // Run the upgrade.</span>
<a name="l218"><span class="linenum"> 218</span></a>          <a class="function" onClick="logFunction('upgrade_minmaxgrade')" href="../../_functions/upgrade_minmaxgrade.html" onMouseOver="funcPopup(event,'upgrade_minmaxgrade')">upgrade_minmaxgrade</a>();
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">        // C2 was updated.</span>
<a name="l221"><span class="linenum"> 221</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertSame((string) <a class="constant" onClick="logConstant('GRADE_MIN_MAX_FROM_GRADE_GRADE')" href="../../_constants/GRADE_MIN_MAX_FROM_GRADE_GRADE.html" onMouseOver="constPopup(event,'GRADE_MIN_MAX_FROM_GRADE_GRADE')">GRADE_MIN_MAX_FROM_GRADE_GRADE</a>, <a class="function" onClick="logFunction('grade_get_setting')" href="../../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it861" onMouseOver="hilite(861)" onMouseOut="lolite()" onClick="logVariable('c2')" href="../../_variables/c2.html">$c2</a>-&gt;<a onClick="logVariable('id')" class="var it43114" onMouseOver="hilite(43114)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', false, true));
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">        // Nothing has happened for C1.</span>
<a name="l224"><span class="linenum"> 224</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertSame('-1', <a class="function" onClick="logFunction('grade_get_setting')" href="../../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>-&gt;<a onClick="logVariable('id')" class="var it43113" onMouseOver="hilite(43113)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', false, true));
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">        // Nothing has happened for C3.</span>
<a name="l227"><span class="linenum"> 227</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('config', array('name' =&gt; 'show_min_max_grades_changed_' . <a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>-&gt;<a onClick="logVariable('id')" class="var it43135" onMouseOver="hilite(43135)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l228"><span class="linenum"> 228</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertSame(false, <a class="function" onClick="logFunction('grade_get_setting')" href="../../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>-&gt;<a onClick="logVariable('id')" class="var it43135" onMouseOver="hilite(43135)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', false, true));
<a name="l229"><span class="linenum"> 229</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('grade_items', array('needsupdate' =&gt; 1, 'courseid' =&gt; <a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>-&gt;<a onClick="logVariable('id')" class="var it43135" onMouseOver="hilite(43135)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l230"><span class="linenum"> 230</span></a>  
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment">        // Final check, this time we'll unset the default config.</span>
<a name="l233"><span class="linenum"> 233</span></a>          unset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('grade_minmaxtouse')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/grade_minmaxtouse.html">grade_minmaxtouse</a>);
<a name="l234"><span class="linenum"> 234</span></a>          <a class="function" onClick="logFunction('grade_set_setting')" href="../../_functions/grade_set_setting.html" onMouseOver="funcPopup(event,'grade_set_setting')">grade_set_setting</a>(<a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>-&gt;<a onClick="logVariable('id')" class="var it43113" onMouseOver="hilite(43113)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', null);
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">        // Run the upgrade.</span>
<a name="l237"><span class="linenum"> 237</span></a>          <a class="function" onClick="logFunction('upgrade_minmaxgrade')" href="../../_functions/upgrade_minmaxgrade.html" onMouseOver="funcPopup(event,'upgrade_minmaxgrade')">upgrade_minmaxgrade</a>();
<a name="l238"><span class="linenum"> 238</span></a>  
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">        // C1 was updated.</span>
<a name="l240"><span class="linenum"> 240</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertSame((string) <a class="constant" onClick="logConstant('GRADE_MIN_MAX_FROM_GRADE_GRADE')" href="../../_constants/GRADE_MIN_MAX_FROM_GRADE_GRADE.html" onMouseOver="constPopup(event,'GRADE_MIN_MAX_FROM_GRADE_GRADE')">GRADE_MIN_MAX_FROM_GRADE_GRADE</a>, <a class="function" onClick="logFunction('grade_get_setting')" href="../../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it860" onMouseOver="hilite(860)" onMouseOut="lolite()" onClick="logVariable('c1')" href="../../_variables/c1.html">$c1</a>-&gt;<a onClick="logVariable('id')" class="var it43113" onMouseOver="hilite(43113)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', false, true));
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">        // Nothing has happened for C3.</span>
<a name="l243"><span class="linenum"> 243</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('config', array('name' =&gt; 'show_min_max_grades_changed_' . <a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>-&gt;<a onClick="logVariable('id')" class="var it43135" onMouseOver="hilite(43135)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l244"><span class="linenum"> 244</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertSame(false, <a class="function" onClick="logFunction('grade_get_setting')" href="../../_functions/grade_get_setting.html" onMouseOver="funcPopup(event,'grade_get_setting')">grade_get_setting</a>(<a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>-&gt;<a onClick="logVariable('id')" class="var it43135" onMouseOver="hilite(43135)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'minmaxtouse', false, true));
<a name="l245"><span class="linenum"> 245</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('grade_items', array('needsupdate' =&gt; 1, 'courseid' =&gt; <a class="var it862" onMouseOver="hilite(862)" onMouseOut="lolite()" onClick="logVariable('c3')" href="../../_variables/c3.html">$c3</a>-&gt;<a onClick="logVariable('id')" class="var it43135" onMouseOver="hilite(43135)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)));
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">        // Restore value.</span>
<a name="l248"><span class="linenum"> 248</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('grade_minmaxtouse')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/grade_minmaxtouse.html">grade_minmaxtouse</a> = <a class="var it16280" onMouseOver="hilite(16280)" onMouseOut="lolite()" onClick="logVariable('initialminmax')" href="../../_variables/initialminmax.html">$initialminmax</a>;
<a name="l249"><span class="linenum"> 249</span></a>      }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>      public function <a class="function" onClick="logFunction('test_upgrade_extra_credit_weightoverride')" href="../../_functions/test_upgrade_extra_credit_weightoverride.html" onMouseOver="funcPopup(event,'test_upgrade_extra_credit_weightoverride')">test_upgrade_extra_credit_weightoverride</a>() {
<a name="l252"><span class="linenum"> 252</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l255"><span class="linenum"> 255</span></a>  
<a name="l256"><span class="linenum"> 256</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/db/upgradelib.php');
<a name="l257"><span class="linenum"> 257</span></a>  
<a name="l258"><span class="linenum"> 258</span></a>          <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a> = array();
<a name="l259"><span class="linenum"> 259</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a> = array();
<a name="l260"><span class="linenum"> 260</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a> = array();
<a name="l261"><span class="linenum"> 261</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>=0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&lt;5; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l262"><span class="linenum"> 262</span></a>              <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l263"><span class="linenum"> 263</span></a>              <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = array();
<a name="l264"><span class="linenum"> 264</span></a>              <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = array();
<a name="l265"><span class="linenum"> 265</span></a>              for (<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../_variables/j.html">$j</a>=0;<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../_variables/j.html">$j</a>&lt;3;<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../_variables/j.html">$j</a>++) {
<a name="l266"><span class="linenum"> 266</span></a>                  <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>][<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../_variables/j.html">$j</a>] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_module')" href="../../_functions/create_module.html" onMouseOver="funcPopup(event,'create_module')">create_module</a>('assign', array('course' =&gt; <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>], 'grade' =&gt; 100));
<a name="l267"><span class="linenum"> 267</span></a>                  <a class="var it15854" onMouseOver="hilite(15854)" onMouseOut="lolite()" onClick="logVariable('giparams')" href="../../_variables/giparams.html">$giparams</a> = array('itemtype' =&gt; 'mod', 'itemmodule' =&gt; 'assign', 'iteminstance' =&gt; <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>][<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../_variables/j.html">$j</a>]-&gt;id,
<a name="l268"><span class="linenum"> 268</span></a>                      'courseid' =&gt; <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id, 'itemnumber' =&gt; 0);
<a name="l269"><span class="linenum"> 269</span></a>                  <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>][<a class="var it162" onMouseOver="hilite(162)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../_variables/j.html">$j</a>] = <a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch')" href="../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(<a class="var it15854" onMouseOver="hilite(15854)" onMouseOut="lolite()" onClick="logVariable('giparams')" href="../../_variables/giparams.html">$giparams</a>);
<a name="l270"><span class="linenum"> 270</span></a>              }
<a name="l271"><span class="linenum"> 271</span></a>          }
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">        // Case 1: Course $c[0] has aggregation method different from natural.</span>
<a name="l274"><span class="linenum"> 274</span></a>          <a class="var it15349" onMouseOver="hilite(15349)" onMouseOut="lolite()" onClick="logVariable('coursecategory')" href="../../_variables/coursecategory.html">$coursecategory</a> = <a class="class" onClick="logClass('grade_category')" href="../../_classes/grade_category.html" onMouseOver="classPopup(event,'grade_category')">grade_category</a>::<a class="function" onClick="logFunction('fetch_course_category')" href="../../_functions/fetch_course_category.html" onMouseOver="funcPopup(event,'fetch_course_category')">fetch_course_category</a>(<a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[0]-&gt;id);
<a name="l275"><span class="linenum"> 275</span></a>          <a class="var it15349" onMouseOver="hilite(15349)" onMouseOut="lolite()" onClick="logVariable('coursecategory')" href="../../_variables/coursecategory.html">$coursecategory</a>-&gt;<a onClick="logVariable('aggregation')" class="var it43065" onMouseOver="hilite(43065)" onMouseOut="lolite()" href="../../_variables/aggregation.html">aggregation</a> = <a class="constant" onClick="logConstant('GRADE_AGGREGATE_WEIGHTED_MEAN')" href="../../_constants/GRADE_AGGREGATE_WEIGHTED_MEAN.html" onMouseOver="constPopup(event,'GRADE_AGGREGATE_WEIGHTED_MEAN')">GRADE_AGGREGATE_WEIGHTED_MEAN</a>;
<a name="l276"><span class="linenum"> 276</span></a>          <a class="var it15349" onMouseOver="hilite(15349)" onMouseOut="lolite()" onClick="logVariable('coursecategory')" href="../../_variables/coursecategory.html">$coursecategory</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l277"><span class="linenum"> 277</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[0][1]-&gt;aggregationcoef = 1;
<a name="l278"><span class="linenum"> 278</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[0][1]-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l279"><span class="linenum"> 279</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[0][2]-&gt;weightoverride = 1;
<a name="l280"><span class="linenum"> 280</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[0][2]-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l281"><span class="linenum"> 281</span></a>  
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">        // Case 2: Course $c[1] has neither extra credits nor overrides</span>
<a name="l283"><span class="linenum"> 283</span></a>  
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">        // Case 3: Course $c[2] has extra credits but no overrides</span>
<a name="l285"><span class="linenum"> 285</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[2][1]-&gt;aggregationcoef = 1;
<a name="l286"><span class="linenum"> 286</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[2][1]-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">        // Case 4: Course $c[3] has no extra credits and has overrides</span>
<a name="l289"><span class="linenum"> 289</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[3][2]-&gt;weightoverride = 1;
<a name="l290"><span class="linenum"> 290</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[3][2]-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l291"><span class="linenum"> 291</span></a>  
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">        // Case 5: Course $c[4] has both extra credits and overrides</span>
<a name="l293"><span class="linenum"> 293</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[4][1]-&gt;aggregationcoef = 1;
<a name="l294"><span class="linenum"> 294</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[4][1]-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l295"><span class="linenum"> 295</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[4][2]-&gt;weightoverride = 1;
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>[4][2]-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l297"><span class="linenum"> 297</span></a>  
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">        // Run the upgrade script and make sure only course $c[4] was marked as needed to be fixed.</span>
<a name="l299"><span class="linenum"> 299</span></a>          <a class="function" onClick="logFunction('upgrade_extra_credit_weightoverride')" href="../../_functions/upgrade_extra_credit_weightoverride.html" onMouseOver="funcPopup(event,'upgrade_extra_credit_weightoverride')">upgrade_extra_credit_weightoverride</a>();
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[0]-&gt;id}));
<a name="l302"><span class="linenum"> 302</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[1]-&gt;id}));
<a name="l303"><span class="linenum"> 303</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[2]-&gt;id}));
<a name="l304"><span class="linenum"> 304</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[3]-&gt;id}));
<a name="l305"><span class="linenum"> 305</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20150619, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[4]-&gt;id});
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>          <a class="function" onClick="logFunction('set_config')" href="../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('gradebook_calculations_freeze_' . <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[4]-&gt;id, null);
<a name="l308"><span class="linenum"> 308</span></a>  
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">        // Run the upgrade script for a single course only.</span>
<a name="l310"><span class="linenum"> 310</span></a>          <a class="function" onClick="logFunction('upgrade_extra_credit_weightoverride')" href="../../_functions/upgrade_extra_credit_weightoverride.html" onMouseOver="funcPopup(event,'upgrade_extra_credit_weightoverride')">upgrade_extra_credit_weightoverride</a>(<a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[0]-&gt;id);
<a name="l311"><span class="linenum"> 311</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[0]-&gt;id}));
<a name="l312"><span class="linenum"> 312</span></a>          <a class="function" onClick="logFunction('upgrade_extra_credit_weightoverride')" href="../../_functions/upgrade_extra_credit_weightoverride.html" onMouseOver="funcPopup(event,'upgrade_extra_credit_weightoverride')">upgrade_extra_credit_weightoverride</a>(<a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[4]-&gt;id);
<a name="l313"><span class="linenum"> 313</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20150619, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../../_variables/c.html">$c</a>[4]-&gt;id});
<a name="l314"><span class="linenum"> 314</span></a>      }
<a name="l315"><span class="linenum"> 315</span></a>  
<a name="l316"><span class="linenum"> 316</span></a>      <span class="comment">/**</span>
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">     * Test the upgrade function for flagging courses with calculated grade item problems.</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">     */</span>
<a name="l319"><span class="linenum"> 319</span></a>      public function <a class="function" onClick="logFunction('test_upgrade_calculated_grade_items_freeze')" href="../../_functions/test_upgrade_calculated_grade_items_freeze.html" onMouseOver="funcPopup(event,'test_upgrade_calculated_grade_items_freeze')">test_upgrade_calculated_grade_items_freeze</a>() {
<a name="l320"><span class="linenum"> 320</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l321"><span class="linenum"> 321</span></a>  
<a name="l322"><span class="linenum"> 322</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>();
<a name="l323"><span class="linenum"> 323</span></a>  
<a name="l324"><span class="linenum"> 324</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/db/upgradelib.php');
<a name="l325"><span class="linenum"> 325</span></a>  
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">        // Create a user.</span>
<a name="l327"><span class="linenum"> 327</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_user')" href="../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>();
<a name="l328"><span class="linenum"> 328</span></a>  
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">        // Create a couple of courses.</span>
<a name="l330"><span class="linenum"> 330</span></a>          <a class="var it690" onMouseOver="hilite(690)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l331"><span class="linenum"> 331</span></a>          <a class="var it703" onMouseOver="hilite(703)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l332"><span class="linenum"> 332</span></a>          <a class="var it8347" onMouseOver="hilite(8347)" onMouseOut="lolite()" onClick="logVariable('course3')" href="../../_variables/course3.html">$course3</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">        // Enrol the user in the courses.</span>
<a name="l335"><span class="linenum"> 335</span></a>          <a class="var it1111" onMouseOver="hilite(1111)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('role', array('shortname' =&gt; 'student'));
<a name="l336"><span class="linenum"> 336</span></a>          <a class="var it3187" onMouseOver="hilite(3187)" onMouseOut="lolite()" onClick="logVariable('maninstance1')" href="../../_variables/maninstance1.html">$maninstance1</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('enrol', array('courseid' =&gt; <a class="var it690" onMouseOver="hilite(690)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it43179" onMouseOver="hilite(43179)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'enrol' =&gt; 'manual'), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l337"><span class="linenum"> 337</span></a>          <a class="var it16286" onMouseOver="hilite(16286)" onMouseOut="lolite()" onClick="logVariable('maninstance2')" href="../../_variables/maninstance2.html">$maninstance2</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('enrol', array('courseid' =&gt; <a class="var it703" onMouseOver="hilite(703)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a>-&gt;<a onClick="logVariable('id')" class="var it42953" onMouseOver="hilite(42953)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'enrol' =&gt; 'manual'), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l338"><span class="linenum"> 338</span></a>          <a class="var it16287" onMouseOver="hilite(16287)" onMouseOut="lolite()" onClick="logVariable('maninstance3')" href="../../_variables/maninstance3.html">$maninstance3</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('enrol', array('courseid' =&gt; <a class="var it8347" onMouseOver="hilite(8347)" onMouseOut="lolite()" onClick="logVariable('course3')" href="../../_variables/course3.html">$course3</a>-&gt;<a onClick="logVariable('id')" class="var it43341" onMouseOver="hilite(43341)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'enrol' =&gt; 'manual'), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l339"><span class="linenum"> 339</span></a>          <a class="var it15755" onMouseOver="hilite(15755)" onMouseOut="lolite()" onClick="logVariable('manual')" href="../../_variables/manual.html">$manual</a> = <a class="function" onClick="logFunction('enrol_get_plugin')" href="../../_functions/enrol_get_plugin.html" onMouseOver="funcPopup(event,'enrol_get_plugin')">enrol_get_plugin</a>('manual');
<a name="l340"><span class="linenum"> 340</span></a>          <a class="var it15755" onMouseOver="hilite(15755)" onMouseOut="lolite()" onClick="logVariable('manual')" href="../../_variables/manual.html">$manual</a>-&gt;<a class="function" onClick="logFunction('enrol_user')" href="../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(<a class="var it3187" onMouseOver="hilite(3187)" onMouseOut="lolite()" onClick="logVariable('maninstance1')" href="../../_variables/maninstance1.html">$maninstance1</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it1111" onMouseOver="hilite(1111)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it42933" onMouseOver="hilite(42933)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l341"><span class="linenum"> 341</span></a>          <a class="var it15755" onMouseOver="hilite(15755)" onMouseOut="lolite()" onClick="logVariable('manual')" href="../../_variables/manual.html">$manual</a>-&gt;<a class="function" onClick="logFunction('enrol_user')" href="../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(<a class="var it16286" onMouseOver="hilite(16286)" onMouseOut="lolite()" onClick="logVariable('maninstance2')" href="../../_variables/maninstance2.html">$maninstance2</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it1111" onMouseOver="hilite(1111)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it42933" onMouseOver="hilite(42933)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l342"><span class="linenum"> 342</span></a>          <a class="var it15755" onMouseOver="hilite(15755)" onMouseOut="lolite()" onClick="logVariable('manual')" href="../../_variables/manual.html">$manual</a>-&gt;<a class="function" onClick="logFunction('enrol_user')" href="../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(<a class="var it16287" onMouseOver="hilite(16287)" onMouseOut="lolite()" onClick="logVariable('maninstance3')" href="../../_variables/maninstance3.html">$maninstance3</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it1111" onMouseOver="hilite(1111)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it42933" onMouseOver="hilite(42933)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment">        // To create the data we need we freeze the grade book to use the old behaviour.</span>
<a name="l345"><span class="linenum"> 345</span></a>          <a class="function" onClick="logFunction('set_config')" href="../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('gradebook_calculations_freeze_' . <a class="var it690" onMouseOver="hilite(690)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it43179" onMouseOver="hilite(43179)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 20150627);
<a name="l346"><span class="linenum"> 346</span></a>          <a class="function" onClick="logFunction('set_config')" href="../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('gradebook_calculations_freeze_' . <a class="var it703" onMouseOver="hilite(703)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a>-&gt;<a onClick="logVariable('id')" class="var it42953" onMouseOver="hilite(42953)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 20150627);
<a name="l347"><span class="linenum"> 347</span></a>          <a class="function" onClick="logFunction('set_config')" href="../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('gradebook_calculations_freeze_' . <a class="var it8347" onMouseOver="hilite(8347)" onMouseOut="lolite()" onClick="logVariable('course3')" href="../../_variables/course3.html">$course3</a>-&gt;<a onClick="logVariable('id')" class="var it43341" onMouseOver="hilite(43341)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 20150627);
<a name="l348"><span class="linenum"> 348</span></a>          <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('grade_minmaxtouse')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/grade_minmaxtouse.html">grade_minmaxtouse</a> = 2;
<a name="l349"><span class="linenum"> 349</span></a>  
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">        // Creating a category for a grade item.</span>
<a name="l351"><span class="linenum"> 351</span></a>          <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_category')" href="../../_classes/grade_category.html" onMouseOver="classPopup(event,'grade_category')">grade_category</a>();
<a name="l352"><span class="linenum"> 352</span></a>          <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a onClick="logVariable('fullname')" class="var it43844" onMouseOver="hilite(43844)" onMouseOut="lolite()" href="../../_variables/fullname.html">fullname</a> = 'calculated grade category';
<a name="l353"><span class="linenum"> 353</span></a>          <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a onClick="logVariable('courseid')" class="var it43844" onMouseOver="hilite(43844)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a> = <a class="var it690" onMouseOver="hilite(690)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it43179" onMouseOver="hilite(43179)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l354"><span class="linenum"> 354</span></a>          <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l355"><span class="linenum"> 355</span></a>          <a class="var it16288" onMouseOver="hilite(16288)" onMouseOut="lolite()" onClick="logVariable('gradecategoryid')" href="../../_variables/gradecategoryid.html">$gradecategoryid</a> = <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a onClick="logVariable('id')" class="var it43844" onMouseOver="hilite(43844)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l356"><span class="linenum"> 356</span></a>  
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">        // This is a manual grade item.</span>
<a name="l358"><span class="linenum"> 358</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>();
<a name="l359"><span class="linenum"> 359</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemname')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/itemname.html">itemname</a> = 'grade item one';
<a name="l360"><span class="linenum"> 360</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemtype')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/itemtype.html">itemtype</a> = 'manual';
<a name="l361"><span class="linenum"> 361</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('categoryid')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/categoryid.html">categoryid</a> = <a class="var it16288" onMouseOver="hilite(16288)" onMouseOut="lolite()" onClick="logVariable('gradecategoryid')" href="../../_variables/gradecategoryid.html">$gradecategoryid</a>;
<a name="l362"><span class="linenum"> 362</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('courseid')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a> = <a class="var it690" onMouseOver="hilite(690)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it43179" onMouseOver="hilite(43179)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l363"><span class="linenum"> 363</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/idnumber.html">idnumber</a> = 'gi1';
<a name="l364"><span class="linenum"> 364</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l365"><span class="linenum"> 365</span></a>  
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">        // Changing the category into a calculated grade category.</span>
<a name="l367"><span class="linenum"> 367</span></a>          <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a> = <a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch')" href="../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(array('iteminstance' =&gt; <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a onClick="logVariable('id')" class="var it43844" onMouseOver="hilite(43844)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l368"><span class="linenum"> 368</span></a>          <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a onClick="logVariable('calculation')" class="var it44523" onMouseOver="hilite(44523)" onMouseOut="lolite()" href="../../_variables/calculation.html">calculation</a> = '=##gi' . <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('id')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . '##/2';
<a name="l369"><span class="linenum"> 369</span></a>          <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l370"><span class="linenum"> 370</span></a>  
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">        // Setting a grade for the student.</span>
<a name="l372"><span class="linenum"> 372</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('get_grade')" href="../../_functions/get_grade.html" onMouseOver="funcPopup(event,'get_grade')">get_grade</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, true);
<a name="l373"><span class="linenum"> 373</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/finalgrade.html">finalgrade</a> = 50;
<a name="l374"><span class="linenum"> 374</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment">        // Creating all the grade_grade items.</span>
<a name="l376"><span class="linenum"> 376</span></a>          <a class="function" onClick="logFunction('grade_regrade_final_grades')" href="../../_functions/grade_regrade_final_grades.html" onMouseOver="funcPopup(event,'grade_regrade_final_grades')">grade_regrade_final_grades</a>(<a class="var it690" onMouseOver="hilite(690)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it43179" onMouseOver="hilite(43179)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">        // Updating the grade category to a new grade max and min.</span>
<a name="l378"><span class="linenum"> 378</span></a>          <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a onClick="logVariable('grademax')" class="var it44523" onMouseOver="hilite(44523)" onMouseOut="lolite()" href="../../_variables/grademax.html">grademax</a> = 50;
<a name="l379"><span class="linenum"> 379</span></a>          <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a onClick="logVariable('grademin')" class="var it44523" onMouseOver="hilite(44523)" onMouseOut="lolite()" href="../../_variables/grademin.html">grademin</a> = 5;
<a name="l380"><span class="linenum"> 380</span></a>          <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l381"><span class="linenum"> 381</span></a>  
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">        // Different manual grade item for course 2. We are creating a course with a calculated grade item that has a grade max of</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">        // 50. The grade_grade will have a rawgrademax of 100 regardless.</span>
<a name="l384"><span class="linenum"> 384</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>();
<a name="l385"><span class="linenum"> 385</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemname')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/itemname.html">itemname</a> = 'grade item one';
<a name="l386"><span class="linenum"> 386</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemtype')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/itemtype.html">itemtype</a> = 'manual';
<a name="l387"><span class="linenum"> 387</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('courseid')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a> = <a class="var it703" onMouseOver="hilite(703)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a>-&gt;<a onClick="logVariable('id')" class="var it42953" onMouseOver="hilite(42953)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l388"><span class="linenum"> 388</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/idnumber.html">idnumber</a> = 'gi1';
<a name="l389"><span class="linenum"> 389</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('grademax')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/grademax.html">grademax</a> = 25;
<a name="l390"><span class="linenum"> 390</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l391"><span class="linenum"> 391</span></a>  
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">        // Calculated grade item for course 2.</span>
<a name="l393"><span class="linenum"> 393</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>();
<a name="l394"><span class="linenum"> 394</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a>-&gt;<a onClick="logVariable('itemname')" class="var it44524" onMouseOver="hilite(44524)" onMouseOut="lolite()" href="../../_variables/itemname.html">itemname</a> = 'calculated grade';
<a name="l395"><span class="linenum"> 395</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a>-&gt;<a onClick="logVariable('itemtype')" class="var it44524" onMouseOver="hilite(44524)" onMouseOut="lolite()" href="../../_variables/itemtype.html">itemtype</a> = 'manual';
<a name="l396"><span class="linenum"> 396</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a>-&gt;<a onClick="logVariable('courseid')" class="var it44524" onMouseOver="hilite(44524)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a> = <a class="var it703" onMouseOver="hilite(703)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a>-&gt;<a onClick="logVariable('id')" class="var it42953" onMouseOver="hilite(42953)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l397"><span class="linenum"> 397</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a>-&gt;<a onClick="logVariable('calculation')" class="var it44524" onMouseOver="hilite(44524)" onMouseOut="lolite()" href="../../_variables/calculation.html">calculation</a> = '=##gi' . <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('id')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . '##*2';
<a name="l398"><span class="linenum"> 398</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a>-&gt;<a onClick="logVariable('grademax')" class="var it44524" onMouseOver="hilite(44524)" onMouseOut="lolite()" href="../../_variables/grademax.html">grademax</a> = 50;
<a name="l399"><span class="linenum"> 399</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">        // Assigning a grade for the user.</span>
<a name="l402"><span class="linenum"> 402</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('get_grade')" href="../../_functions/get_grade.html" onMouseOver="funcPopup(event,'get_grade')">get_grade</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, true);
<a name="l403"><span class="linenum"> 403</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/finalgrade.html">finalgrade</a> = 10;
<a name="l404"><span class="linenum"> 404</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">        // Setting all of the grade_grade items.</span>
<a name="l407"><span class="linenum"> 407</span></a>          <a class="function" onClick="logFunction('grade_regrade_final_grades')" href="../../_functions/grade_regrade_final_grades.html" onMouseOver="funcPopup(event,'grade_regrade_final_grades')">grade_regrade_final_grades</a>(<a class="var it703" onMouseOver="hilite(703)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a>-&gt;<a onClick="logVariable('id')" class="var it42953" onMouseOver="hilite(42953)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">        // Different manual grade item for course 3. We are creating a course with a calculated grade item that has a grade max of</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">        // 50. The grade_grade will have a rawgrademax of 100 regardless.</span>
<a name="l411"><span class="linenum"> 411</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>();
<a name="l412"><span class="linenum"> 412</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemname')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/itemname.html">itemname</a> = 'grade item one';
<a name="l413"><span class="linenum"> 413</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemtype')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/itemtype.html">itemtype</a> = 'manual';
<a name="l414"><span class="linenum"> 414</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('courseid')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a> = <a class="var it8347" onMouseOver="hilite(8347)" onMouseOut="lolite()" onClick="logVariable('course3')" href="../../_variables/course3.html">$course3</a>-&gt;<a onClick="logVariable('id')" class="var it43341" onMouseOver="hilite(43341)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l415"><span class="linenum"> 415</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/idnumber.html">idnumber</a> = 'gi1';
<a name="l416"><span class="linenum"> 416</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('grademax')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/grademax.html">grademax</a> = 25;
<a name="l417"><span class="linenum"> 417</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">        // Calculated grade item for course 2.</span>
<a name="l420"><span class="linenum"> 420</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>();
<a name="l421"><span class="linenum"> 421</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a>-&gt;<a onClick="logVariable('itemname')" class="var it44524" onMouseOver="hilite(44524)" onMouseOut="lolite()" href="../../_variables/itemname.html">itemname</a> = 'calculated grade';
<a name="l422"><span class="linenum"> 422</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a>-&gt;<a onClick="logVariable('itemtype')" class="var it44524" onMouseOver="hilite(44524)" onMouseOut="lolite()" href="../../_variables/itemtype.html">itemtype</a> = 'manual';
<a name="l423"><span class="linenum"> 423</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a>-&gt;<a onClick="logVariable('courseid')" class="var it44524" onMouseOver="hilite(44524)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a> = <a class="var it8347" onMouseOver="hilite(8347)" onMouseOut="lolite()" onClick="logVariable('course3')" href="../../_variables/course3.html">$course3</a>-&gt;<a onClick="logVariable('id')" class="var it43341" onMouseOver="hilite(43341)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l424"><span class="linenum"> 424</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a>-&gt;<a onClick="logVariable('calculation')" class="var it44524" onMouseOver="hilite(44524)" onMouseOut="lolite()" href="../../_variables/calculation.html">calculation</a> = '=##gi' . <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('id')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . '##*2';
<a name="l425"><span class="linenum"> 425</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a>-&gt;<a onClick="logVariable('grademax')" class="var it44524" onMouseOver="hilite(44524)" onMouseOut="lolite()" href="../../_variables/grademax.html">grademax</a> = 50;
<a name="l426"><span class="linenum"> 426</span></a>          <a class="var it16290" onMouseOver="hilite(16290)" onMouseOut="lolite()" onClick="logVariable('calculatedgradeitem')" href="../../_variables/calculatedgradeitem.html">$calculatedgradeitem</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">        // Assigning a grade for the user.</span>
<a name="l429"><span class="linenum"> 429</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('get_grade')" href="../../_functions/get_grade.html" onMouseOver="funcPopup(event,'get_grade')">get_grade</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, true);
<a name="l430"><span class="linenum"> 430</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/finalgrade.html">finalgrade</a> = 10;
<a name="l431"><span class="linenum"> 431</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l432"><span class="linenum"> 432</span></a>  
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">        // Setting all of the grade_grade items.</span>
<a name="l434"><span class="linenum"> 434</span></a>          <a class="function" onClick="logFunction('grade_regrade_final_grades')" href="../../_functions/grade_regrade_final_grades.html" onMouseOver="funcPopup(event,'grade_regrade_final_grades')">grade_regrade_final_grades</a>(<a class="var it8347" onMouseOver="hilite(8347)" onMouseOut="lolite()" onClick="logVariable('course3')" href="../../_variables/course3.html">$course3</a>-&gt;<a onClick="logVariable('id')" class="var it43341" onMouseOver="hilite(43341)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">        // Need to do this first before changing the other courses, otherwise they will be flagged too early.</span>
<a name="l436"><span class="linenum"> 436</span></a>          <a class="function" onClick="logFunction('set_config')" href="../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('gradebook_calculations_freeze_' . <a class="var it8347" onMouseOver="hilite(8347)" onMouseOut="lolite()" onClick="logVariable('course3')" href="../../_variables/course3.html">$course3</a>-&gt;<a onClick="logVariable('id')" class="var it43341" onMouseOver="hilite(43341)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, null);
<a name="l437"><span class="linenum"> 437</span></a>          <a class="function" onClick="logFunction('upgrade_calculated_grade_items')" href="../../_functions/upgrade_calculated_grade_items.html" onMouseOver="funcPopup(event,'upgrade_calculated_grade_items')">upgrade_calculated_grade_items</a>(<a class="var it8347" onMouseOver="hilite(8347)" onMouseOut="lolite()" onClick="logVariable('course3')" href="../../_variables/course3.html">$course3</a>-&gt;<a onClick="logVariable('id')" class="var it43341" onMouseOver="hilite(43341)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l438"><span class="linenum"> 438</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20150627, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it8347" onMouseOver="hilite(8347)" onMouseOut="lolite()" onClick="logVariable('course3')" href="../../_variables/course3.html">$course3</a>-&gt;<a onClick="logVariable('id')" class="var it43341" onMouseOver="hilite(43341)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>});
<a name="l439"><span class="linenum"> 439</span></a>  
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">        // Change the setting back to null.</span>
<a name="l441"><span class="linenum"> 441</span></a>          <a class="function" onClick="logFunction('set_config')" href="../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('gradebook_calculations_freeze_' . <a class="var it690" onMouseOver="hilite(690)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it43179" onMouseOver="hilite(43179)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, null);
<a name="l442"><span class="linenum"> 442</span></a>          <a class="function" onClick="logFunction('set_config')" href="../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('gradebook_calculations_freeze_' . <a class="var it703" onMouseOver="hilite(703)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a>-&gt;<a onClick="logVariable('id')" class="var it42953" onMouseOver="hilite(42953)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, null);
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">        // Run the upgrade.</span>
<a name="l444"><span class="linenum"> 444</span></a>          <a class="function" onClick="logFunction('upgrade_calculated_grade_items')" href="../../_functions/upgrade_calculated_grade_items.html" onMouseOver="funcPopup(event,'upgrade_calculated_grade_items')">upgrade_calculated_grade_items</a>();
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">        // The setting should be set again after the upgrade.</span>
<a name="l446"><span class="linenum"> 446</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20150627, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it690" onMouseOver="hilite(690)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it43179" onMouseOver="hilite(43179)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>});
<a name="l447"><span class="linenum"> 447</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20150627, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it703" onMouseOver="hilite(703)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../_variables/course2.html">$course2</a>-&gt;<a onClick="logVariable('id')" class="var it42953" onMouseOver="hilite(42953)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>});
<a name="l448"><span class="linenum"> 448</span></a>      }
<a name="l449"><span class="linenum"> 449</span></a>  
<a name="l450"><span class="linenum"> 450</span></a>      function <a class="function" onClick="logFunction('test_upgrade_calculated_grade_items_regrade')" href="../../_functions/test_upgrade_calculated_grade_items_regrade.html" onMouseOver="funcPopup(event,'test_upgrade_calculated_grade_items_regrade')">test_upgrade_calculated_grade_items_regrade</a>() {
<a name="l451"><span class="linenum"> 451</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>();
<a name="l454"><span class="linenum"> 454</span></a>  
<a name="l455"><span class="linenum"> 455</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/db/upgradelib.php');
<a name="l456"><span class="linenum"> 456</span></a>  
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">        // Create a user.</span>
<a name="l458"><span class="linenum"> 458</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_user')" href="../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>();
<a name="l459"><span class="linenum"> 459</span></a>  
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">        // Create a course.</span>
<a name="l461"><span class="linenum"> 461</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l462"><span class="linenum"> 462</span></a>  
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">        // Enrol the user in the course.</span>
<a name="l464"><span class="linenum"> 464</span></a>          <a class="var it1111" onMouseOver="hilite(1111)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('role', array('shortname' =&gt; 'student'));
<a name="l465"><span class="linenum"> 465</span></a>          <a class="var it3187" onMouseOver="hilite(3187)" onMouseOut="lolite()" onClick="logVariable('maninstance1')" href="../../_variables/maninstance1.html">$maninstance1</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('enrol', array('courseid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'enrol' =&gt; 'manual'), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l466"><span class="linenum"> 466</span></a>          <a class="var it15755" onMouseOver="hilite(15755)" onMouseOut="lolite()" onClick="logVariable('manual')" href="../../_variables/manual.html">$manual</a> = <a class="function" onClick="logFunction('enrol_get_plugin')" href="../../_functions/enrol_get_plugin.html" onMouseOver="funcPopup(event,'enrol_get_plugin')">enrol_get_plugin</a>('manual');
<a name="l467"><span class="linenum"> 467</span></a>          <a class="var it15755" onMouseOver="hilite(15755)" onMouseOut="lolite()" onClick="logVariable('manual')" href="../../_variables/manual.html">$manual</a>-&gt;<a class="function" onClick="logFunction('enrol_user')" href="../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(<a class="var it3187" onMouseOver="hilite(3187)" onMouseOut="lolite()" onClick="logVariable('maninstance1')" href="../../_variables/maninstance1.html">$maninstance1</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it1111" onMouseOver="hilite(1111)" onMouseOut="lolite()" onClick="logVariable('studentrole')" href="../../_variables/studentrole.html">$studentrole</a>-&gt;<a onClick="logVariable('id')" class="var it42933" onMouseOver="hilite(42933)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>          <a class="function" onClick="logFunction('set_config')" href="../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('upgrade_calculatedgradeitemsonlyregrade', 1);
<a name="l470"><span class="linenum"> 470</span></a>  
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment">        // Creating a category for a grade item.</span>
<a name="l472"><span class="linenum"> 472</span></a>          <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_category')" href="../../_classes/grade_category.html" onMouseOver="classPopup(event,'grade_category')">grade_category</a>();
<a name="l473"><span class="linenum"> 473</span></a>          <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a onClick="logVariable('fullname')" class="var it43844" onMouseOver="hilite(43844)" onMouseOut="lolite()" href="../../_variables/fullname.html">fullname</a> = 'calculated grade category';
<a name="l474"><span class="linenum"> 474</span></a>          <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a onClick="logVariable('courseid')" class="var it43844" onMouseOver="hilite(43844)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a> = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l475"><span class="linenum"> 475</span></a>          <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l476"><span class="linenum"> 476</span></a>          <a class="var it16288" onMouseOver="hilite(16288)" onMouseOut="lolite()" onClick="logVariable('gradecategoryid')" href="../../_variables/gradecategoryid.html">$gradecategoryid</a> = <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a onClick="logVariable('id')" class="var it43844" onMouseOver="hilite(43844)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l477"><span class="linenum"> 477</span></a>  
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">        // This is a manual grade item.</span>
<a name="l479"><span class="linenum"> 479</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>();
<a name="l480"><span class="linenum"> 480</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemname')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/itemname.html">itemname</a> = 'grade item one';
<a name="l481"><span class="linenum"> 481</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('itemtype')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/itemtype.html">itemtype</a> = 'manual';
<a name="l482"><span class="linenum"> 482</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('categoryid')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/categoryid.html">categoryid</a> = <a class="var it16288" onMouseOver="hilite(16288)" onMouseOut="lolite()" onClick="logVariable('gradecategoryid')" href="../../_variables/gradecategoryid.html">$gradecategoryid</a>;
<a name="l483"><span class="linenum"> 483</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('courseid')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a> = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l484"><span class="linenum"> 484</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('idnumber')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/idnumber.html">idnumber</a> = 'gi1';
<a name="l485"><span class="linenum"> 485</span></a>          <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l486"><span class="linenum"> 486</span></a>  
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">        // Changing the category into a calculated grade category.</span>
<a name="l488"><span class="linenum"> 488</span></a>          <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a> = <a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch')" href="../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(array('iteminstance' =&gt; <a class="var it2469" onMouseOver="hilite(2469)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a onClick="logVariable('id')" class="var it43844" onMouseOver="hilite(43844)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l489"><span class="linenum"> 489</span></a>          <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a onClick="logVariable('calculation')" class="var it44523" onMouseOver="hilite(44523)" onMouseOut="lolite()" href="../../_variables/calculation.html">calculation</a> = '=##gi' . <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a onClick="logVariable('id')" class="var it42964" onMouseOver="hilite(42964)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> . '##/2';
<a name="l490"><span class="linenum"> 490</span></a>          <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a onClick="logVariable('grademax')" class="var it44523" onMouseOver="hilite(44523)" onMouseOut="lolite()" href="../../_variables/grademax.html">grademax</a> = 50;
<a name="l491"><span class="linenum"> 491</span></a>          <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a onClick="logVariable('grademin')" class="var it44523" onMouseOver="hilite(44523)" onMouseOut="lolite()" href="../../_variables/grademin.html">grademin</a> = 15;
<a name="l492"><span class="linenum"> 492</span></a>          <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l493"><span class="linenum"> 493</span></a>  
<a name="l494"><span class="linenum"> 494</span></a>  <span class="comment">        // Setting a grade for the student.</span>
<a name="l495"><span class="linenum"> 495</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="var it2470" onMouseOver="hilite(2470)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('get_grade')" href="../../_functions/get_grade.html" onMouseOver="funcPopup(event,'get_grade')">get_grade</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, true);
<a name="l496"><span class="linenum"> 496</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/finalgrade.html">finalgrade</a> = 50;
<a name="l497"><span class="linenum"> 497</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>          <a class="function" onClick="logFunction('grade_regrade_final_grades')" href="../../_functions/grade_regrade_final_grades.html" onMouseOver="funcPopup(event,'grade_regrade_final_grades')">grade_regrade_final_grades</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l500"><span class="linenum"> 500</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="class" onClick="logClass('grade_grade')" href="../../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>::<a class="function" onClick="logFunction('fetch')" href="../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(array('itemid' =&gt; <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a onClick="logVariable('id')" class="var it44523" onMouseOver="hilite(44523)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l501"><span class="linenum"> 501</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrademax')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/rawgrademax.html">rawgrademax</a> = 100;
<a name="l502"><span class="linenum"> 502</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrademin')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/rawgrademin.html">rawgrademin</a> = 0;
<a name="l503"><span class="linenum"> 503</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l504"><span class="linenum"> 504</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertNotEquals(<a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a onClick="logVariable('grademax')" class="var it44523" onMouseOver="hilite(44523)" onMouseOut="lolite()" href="../../_variables/grademax.html">grademax</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrademax')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/rawgrademax.html">rawgrademax</a>);
<a name="l505"><span class="linenum"> 505</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertNotEquals(<a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a onClick="logVariable('grademin')" class="var it44523" onMouseOver="hilite(44523)" onMouseOut="lolite()" href="../../_variables/grademin.html">grademin</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrademin')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/rawgrademin.html">rawgrademin</a>);
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">        // This is the function that we are testing. If we comment out this line, then the test fails because the grade items</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">        // are not flagged for regrading.</span>
<a name="l509"><span class="linenum"> 509</span></a>          <a class="function" onClick="logFunction('upgrade_calculated_grade_items')" href="../../_functions/upgrade_calculated_grade_items.html" onMouseOver="funcPopup(event,'upgrade_calculated_grade_items')">upgrade_calculated_grade_items</a>();
<a name="l510"><span class="linenum"> 510</span></a>          <a class="function" onClick="logFunction('grade_regrade_final_grades')" href="../../_functions/grade_regrade_final_grades.html" onMouseOver="funcPopup(event,'grade_regrade_final_grades')">grade_regrade_final_grades</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l511"><span class="linenum"> 511</span></a>  
<a name="l512"><span class="linenum"> 512</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="class" onClick="logClass('grade_grade')" href="../../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>::<a class="function" onClick="logFunction('fetch')" href="../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(array('itemid' =&gt; <a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a onClick="logVariable('id')" class="var it44523" onMouseOver="hilite(44523)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l513"><span class="linenum"> 513</span></a>  
<a name="l514"><span class="linenum"> 514</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a onClick="logVariable('grademax')" class="var it44523" onMouseOver="hilite(44523)" onMouseOut="lolite()" href="../../_variables/grademax.html">grademax</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrademax')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/rawgrademax.html">rawgrademax</a>);
<a name="l515"><span class="linenum"> 515</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it16289" onMouseOver="hilite(16289)" onMouseOut="lolite()" onClick="logVariable('gradecategoryitem')" href="../../_variables/gradecategoryitem.html">$gradecategoryitem</a>-&gt;<a onClick="logVariable('grademin')" class="var it44523" onMouseOver="hilite(44523)" onMouseOut="lolite()" href="../../_variables/grademin.html">grademin</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrademin')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/rawgrademin.html">rawgrademin</a>);
<a name="l516"><span class="linenum"> 516</span></a>      }
<a name="l517"><span class="linenum"> 517</span></a>  
<a name="l518"><span class="linenum"> 518</span></a>      public function <a class="function" onClick="logFunction('test_upgrade_course_tags')" href="../../_functions/test_upgrade_course_tags.html" onMouseOver="funcPopup(event,'test_upgrade_course_tags')">test_upgrade_course_tags</a>() {
<a name="l519"><span class="linenum"> 519</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>();
<a name="l522"><span class="linenum"> 522</span></a>  
<a name="l523"><span class="linenum"> 523</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/db/upgradelib.php');
<a name="l524"><span class="linenum"> 524</span></a>  
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment">        // Running upgrade script when there are no tags.</span>
<a name="l526"><span class="linenum"> 526</span></a>          <a class="function" onClick="logFunction('upgrade_course_tags')" href="../../_functions/upgrade_course_tags.html" onMouseOver="funcPopup(event,'upgrade_course_tags')">upgrade_course_tags</a>();
<a name="l527"><span class="linenum"> 527</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('tag_instance', array()));
<a name="l528"><span class="linenum"> 528</span></a>  
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment">        // No course entries.</span>
<a name="l530"><span class="linenum"> 530</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('tag_instance', array('itemid' =&gt; 123, 'tagid' =&gt; 101, 'tiuserid' =&gt; 0,
<a name="l531"><span class="linenum"> 531</span></a>              'itemtype' =&gt; 'post', 'component' =&gt; 'core', 'contextid' =&gt; 1));
<a name="l532"><span class="linenum"> 532</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('tag_instance', array('itemid' =&gt; 333, 'tagid' =&gt; 103, 'tiuserid' =&gt; 1002,
<a name="l533"><span class="linenum"> 533</span></a>              'itemtype' =&gt; 'post', 'component' =&gt; 'core', 'contextid' =&gt; 1));
<a name="l534"><span class="linenum"> 534</span></a>  
<a name="l535"><span class="linenum"> 535</span></a>          <a class="function" onClick="logFunction('upgrade_course_tags')" href="../../_functions/upgrade_course_tags.html" onMouseOver="funcPopup(event,'upgrade_course_tags')">upgrade_course_tags</a>();
<a name="l536"><span class="linenum"> 536</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('tag_instance', array(), 'id', '*'));
<a name="l537"><span class="linenum"> 537</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(2, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>));
<a name="l538"><span class="linenum"> 538</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(123, <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>[0]-&gt;itemid);
<a name="l539"><span class="linenum"> 539</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(333, <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>[1]-&gt;itemid);
<a name="l540"><span class="linenum"> 540</span></a>  
<a name="l541"><span class="linenum"> 541</span></a>  <span class="comment">        // Imagine we have tags 101, 102, 103, ... and courses 1, 2, 3, ... and users 1001, 1002, ... .</span>
<a name="l542"><span class="linenum"> 542</span></a>          <a class="var it408" onMouseOver="hilite(408)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a> = array('itemid', 'tagid', 'tiuserid');
<a name="l543"><span class="linenum"> 543</span></a>          <a class="var it2968" onMouseOver="hilite(2968)" onMouseOut="lolite()" onClick="logVariable('valuesets')" href="../../_variables/valuesets.html">$valuesets</a> = array(
<a name="l544"><span class="linenum"> 544</span></a>              array(1, 101, 0),
<a name="l545"><span class="linenum"> 545</span></a>              array(1, 102, 0),
<a name="l546"><span class="linenum"> 546</span></a>  
<a name="l547"><span class="linenum"> 547</span></a>              array(2, 102, 0),
<a name="l548"><span class="linenum"> 548</span></a>              array(2, 103, 1001),
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>              array(3, 103, 0),
<a name="l551"><span class="linenum"> 551</span></a>              array(3, 103, 1001),
<a name="l552"><span class="linenum"> 552</span></a>  
<a name="l553"><span class="linenum"> 553</span></a>              array(3, 104, 1006),
<a name="l554"><span class="linenum"> 554</span></a>              array(3, 104, 1001),
<a name="l555"><span class="linenum"> 555</span></a>              array(3, 104, 1002),
<a name="l556"><span class="linenum"> 556</span></a>          );
<a name="l557"><span class="linenum"> 557</span></a>  
<a name="l558"><span class="linenum"> 558</span></a>          foreach (<a class="var it2968" onMouseOver="hilite(2968)" onMouseOut="lolite()" onClick="logVariable('valuesets')" href="../../_variables/valuesets.html">$valuesets</a> as <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a>) {
<a name="l559"><span class="linenum"> 559</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('tag_instance', <a class="phpfunction" onClick="logFunction('array_combine')" href="../../_functions/array_combine.html" onMouseOver="phpfuncPopup(event,'array_combine')">array_combine</a>(<a class="var it408" onMouseOver="hilite(408)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../../_variables/keys.html">$keys</a>, <a class="var it753" onMouseOver="hilite(753)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a>) +
<a name="l560"><span class="linenum"> 560</span></a>                      array('itemtype' =&gt; 'course', 'component' =&gt; 'core', 'contextid' =&gt; 1));
<a name="l561"><span class="linenum"> 561</span></a>          }
<a name="l562"><span class="linenum"> 562</span></a>  
<a name="l563"><span class="linenum"> 563</span></a>          <a class="function" onClick="logFunction('upgrade_course_tags')" href="../../_functions/upgrade_course_tags.html" onMouseOver="funcPopup(event,'upgrade_course_tags')">upgrade_course_tags</a>();
<a name="l564"><span class="linenum"> 564</span></a>  <span class="comment">        // There are 8 records in 'tag_instance' table and 7 of them do not have tiuserid (except for one 'post').</span>
<a name="l565"><span class="linenum"> 565</span></a>          <a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a> = <a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('tag_instance', array(), 'id', '*'));
<a name="l566"><span class="linenum"> 566</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(8, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it988" onMouseOver="hilite(988)" onMouseOut="lolite()" onClick="logVariable('records')" href="../../_variables/records.html">$records</a>));
<a name="l567"><span class="linenum"> 567</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(7, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('tag_instance', array('tiuserid' =&gt; 0)));
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">        // Course 1 is mapped to tags 101 and 102.</span>
<a name="l569"><span class="linenum"> 569</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(array(101, 102), <a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_fieldset_select')" href="../../_functions/get_fieldset_select.html" onMouseOver="funcPopup(event,'get_fieldset_select')">get_fieldset_select</a>('tag_instance', 'tagid',
<a name="l570"><span class="linenum"> 570</span></a>                  'itemtype = ? AND itemid = ? ORDER BY tagid', array('course', 1))));
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment">        // Course 2 is mapped to tags 102 and 103.</span>
<a name="l572"><span class="linenum"> 572</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(array(102, 103), <a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_fieldset_select')" href="../../_functions/get_fieldset_select.html" onMouseOver="funcPopup(event,'get_fieldset_select')">get_fieldset_select</a>('tag_instance', 'tagid',
<a name="l573"><span class="linenum"> 573</span></a>                  'itemtype = ? AND itemid = ? ORDER BY tagid', array('course', 2))));
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">        // Course 1 is mapped to tags 101 and 102.</span>
<a name="l575"><span class="linenum"> 575</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(array(103, 104), <a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_fieldset_select')" href="../../_functions/get_fieldset_select.html" onMouseOver="funcPopup(event,'get_fieldset_select')">get_fieldset_select</a>('tag_instance', 'tagid',
<a name="l576"><span class="linenum"> 576</span></a>                  'itemtype = ? AND itemid = ? ORDER BY tagid', array('course', 3))));
<a name="l577"><span class="linenum"> 577</span></a>      }
<a name="l578"><span class="linenum"> 578</span></a>  
<a name="l579"><span class="linenum"> 579</span></a>      <span class="comment">/**</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     * Test that the upgrade script correctly flags courses to be frozen due to letter boundary problems.</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     */</span>
<a name="l582"><span class="linenum"> 582</span></a>      public function <a class="function" onClick="logFunction('test_upgrade_course_letter_boundary')" href="../../_functions/test_upgrade_course_letter_boundary.html" onMouseOver="funcPopup(event,'test_upgrade_course_letter_boundary')">test_upgrade_course_letter_boundary</a>() {
<a name="l583"><span class="linenum"> 583</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l584"><span class="linenum"> 584</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l585"><span class="linenum"> 585</span></a>  
<a name="l586"><span class="linenum"> 586</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/db/upgradelib.php');
<a name="l587"><span class="linenum"> 587</span></a>  
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment">        // Create a user.</span>
<a name="l589"><span class="linenum"> 589</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_user')" href="../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>();
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">        // Create some courses.</span>
<a name="l592"><span class="linenum"> 592</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a> = array();
<a name="l593"><span class="linenum"> 593</span></a>          <a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a> = array();
<a name="l594"><span class="linenum"> 594</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; 45; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l595"><span class="linenum"> 595</span></a>              <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l596"><span class="linenum"> 596</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l597"><span class="linenum"> 597</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, array(2, 5, 10, 13, 14, 19, 23, 25, 30, 34, 36))) {
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment">                // Assign good letter boundaries.</span>
<a name="l599"><span class="linenum"> 599</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assign_good_letter_boundary')" href="../../_functions/assign_good_letter_boundary.html" onMouseOver="funcPopup(event,'assign_good_letter_boundary')">assign_good_letter_boundary</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l600"><span class="linenum"> 600</span></a>              }
<a name="l601"><span class="linenum"> 601</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, array(3, 6, 11, 15, 20, 24, 26, 31, 35))) {
<a name="l602"><span class="linenum"> 602</span></a>  <span class="comment">                // Assign bad letter boundaries.</span>
<a name="l603"><span class="linenum"> 603</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assign_bad_letter_boundary')" href="../../_functions/assign_bad_letter_boundary.html" onMouseOver="funcPopup(event,'assign_bad_letter_boundary')">assign_bad_letter_boundary</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l604"><span class="linenum"> 604</span></a>              }
<a name="l605"><span class="linenum"> 605</span></a>  
<a name="l606"><span class="linenum"> 606</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, array(3, 9, 10, 11, 18, 19, 20, 29, 30, 31, 40))) {
<a name="l607"><span class="linenum"> 607</span></a>                  <a class="function" onClick="logFunction('grade_set_setting')" href="../../_functions/grade_set_setting.html" onMouseOver="funcPopup(event,'grade_set_setting')">grade_set_setting</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'displaytype', '3');
<a name="l608"><span class="linenum"> 608</span></a>              } else if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, array(8, 17, 28))) {
<a name="l609"><span class="linenum"> 609</span></a>                  <a class="function" onClick="logFunction('grade_set_setting')" href="../../_functions/grade_set_setting.html" onMouseOver="funcPopup(event,'grade_set_setting')">grade_set_setting</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'displaytype', '2');
<a name="l610"><span class="linenum"> 610</span></a>              }
<a name="l611"><span class="linenum"> 611</span></a>  
<a name="l612"><span class="linenum"> 612</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, array(37, 43))) {
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">                // Show.</span>
<a name="l614"><span class="linenum"> 614</span></a>                  <a class="function" onClick="logFunction('grade_set_setting')" href="../../_functions/grade_set_setting.html" onMouseOver="funcPopup(event,'grade_set_setting')">grade_set_setting</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'report_user_showlettergrade', '1');
<a name="l615"><span class="linenum"> 615</span></a>              } else if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, array(38, 42))) {
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">                // Hide.</span>
<a name="l617"><span class="linenum"> 617</span></a>                  <a class="function" onClick="logFunction('grade_set_setting')" href="../../_functions/grade_set_setting.html" onMouseOver="funcPopup(event,'grade_set_setting')">grade_set_setting</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'report_user_showlettergrade', '0');
<a name="l618"><span class="linenum"> 618</span></a>              }
<a name="l619"><span class="linenum"> 619</span></a>  
<a name="l620"><span class="linenum"> 620</span></a>              <a class="var it16291" onMouseOver="hilite(16291)" onMouseOut="lolite()" onClick="logVariable('assignrow')" href="../../_variables/assignrow.html">$assignrow</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_module')" href="../../_functions/create_module.html" onMouseOver="funcPopup(event,'create_module')">create_module</a>('assign', array('course' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'name' =&gt; 'Test!'));
<a name="l621"><span class="linenum"> 621</span></a>              <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a> = <a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('fetch')" href="../../_functions/fetch.html" onMouseOver="funcPopup(event,'fetch')">fetch</a>(
<a name="l622"><span class="linenum"> 622</span></a>                      array('itemtype' =&gt; 'mod',
<a name="l623"><span class="linenum"> 623</span></a>                            'itemmodule' =&gt; 'assign',
<a name="l624"><span class="linenum"> 624</span></a>                            'iteminstance' =&gt; <a class="var it16291" onMouseOver="hilite(16291)" onMouseOut="lolite()" onClick="logVariable('assignrow')" href="../../_variables/assignrow.html">$assignrow</a>-&gt;<a onClick="logVariable('id')" class="var it43221" onMouseOver="hilite(43221)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l625"><span class="linenum"> 625</span></a>                            'courseid' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l626"><span class="linenum"> 626</span></a>              if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, array(6, 13, 14, 15, 23, 24, 34, 35, 36, 41))) {
<a name="l627"><span class="linenum"> 627</span></a>                  <a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('set_properties')" href="../../_functions/set_properties.html" onMouseOver="funcPopup(event,'set_properties')">set_properties</a>(<a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>, array('display' =&gt; 3));
<a name="l628"><span class="linenum"> 628</span></a>                  <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l629"><span class="linenum"> 629</span></a>              } else if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, array(12, 21, 32))) {
<a name="l630"><span class="linenum"> 630</span></a>                  <a class="class" onClick="logClass('grade_item')" href="../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>::<a class="function" onClick="logFunction('set_properties')" href="../../_functions/set_properties.html" onMouseOver="funcPopup(event,'set_properties')">set_properties</a>(<a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>, array('display' =&gt; 2));
<a name="l631"><span class="linenum"> 631</span></a>                  <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>-&gt;<a class="function" onClick="logFunction('update')" href="../../_functions/update.html" onMouseOver="funcPopup(event,'update')">update</a>();
<a name="l632"><span class="linenum"> 632</span></a>              }
<a name="l633"><span class="linenum"> 633</span></a>              <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_grade')" href="../../_classes/grade_grade.html" onMouseOver="classPopup(event,'grade_grade')">grade_grade</a>();
<a name="l634"><span class="linenum"> 634</span></a>              <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a>-&gt;<a onClick="logVariable('itemid')" class="var it43454" onMouseOver="hilite(43454)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a> = <a class="var it4755" onMouseOver="hilite(4755)" onMouseOut="lolite()" onClick="logVariable('gi')" href="../../_variables/gi.html">$gi</a>-&gt;<a onClick="logVariable('id')" class="var it43457" onMouseOver="hilite(43457)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l635"><span class="linenum"> 635</span></a>              <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a>-&gt;<a onClick="logVariable('userid')" class="var it43454" onMouseOver="hilite(43454)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l636"><span class="linenum"> 636</span></a>              <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a>-&gt;<a onClick="logVariable('rawgrade')" class="var it43454" onMouseOver="hilite(43454)" onMouseOut="lolite()" href="../../_variables/rawgrade.html">rawgrade</a> = 55.5563;
<a name="l637"><span class="linenum"> 637</span></a>              <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a>-&gt;<a onClick="logVariable('finalgrade')" class="var it43454" onMouseOver="hilite(43454)" onMouseOut="lolite()" href="../../_variables/finalgrade.html">finalgrade</a> = 55.5563;
<a name="l638"><span class="linenum"> 638</span></a>              <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a>-&gt;<a onClick="logVariable('rawgrademax')" class="var it43454" onMouseOver="hilite(43454)" onMouseOut="lolite()" href="../../_variables/rawgrademax.html">rawgrademax</a> = 100;
<a name="l639"><span class="linenum"> 639</span></a>              <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a>-&gt;<a onClick="logVariable('rawgrademin')" class="var it43454" onMouseOver="hilite(43454)" onMouseOut="lolite()" href="../../_variables/rawgrademin.html">rawgrademin</a> = 0;
<a name="l640"><span class="linenum"> 640</span></a>              <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43454" onMouseOver="hilite(43454)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l641"><span class="linenum"> 641</span></a>              <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43454" onMouseOver="hilite(43454)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l642"><span class="linenum"> 642</span></a>              <a class="var it8111" onMouseOver="hilite(8111)" onMouseOut="lolite()" onClick="logVariable('gradegrade')" href="../../_variables/gradegrade.html">$gradegrade</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l643"><span class="linenum"> 643</span></a>  
<a name="l644"><span class="linenum"> 644</span></a>              <a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a>[] = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l645"><span class="linenum"> 645</span></a>              <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[] = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>;
<a name="l646"><span class="linenum"> 646</span></a>          }
<a name="l647"><span class="linenum"> 647</span></a>  
<a name="l648"><span class="linenum"> 648</span></a>          <a class="function" onClick="logFunction('upgrade_course_letter_boundary')" href="../../_functions/upgrade_course_letter_boundary.html" onMouseOver="funcPopup(event,'upgrade_course_letter_boundary')">upgrade_course_letter_boundary</a>();
<a name="l649"><span class="linenum"> 649</span></a>  
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">        // No system setting for grade letter boundaries.</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">        // [0] A course with no letter boundaries.</span>
<a name="l652"><span class="linenum"> 652</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[0]-&gt;id}));
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">        // [1] A course with letter boundaries which are default.</span>
<a name="l654"><span class="linenum"> 654</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[1]-&gt;id}));
<a name="l655"><span class="linenum"> 655</span></a>  <span class="comment">        // [2] A course with letter boundaries which are custom but not affected.</span>
<a name="l656"><span class="linenum"> 656</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[2]-&gt;id}));
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment">        // [3] A course with letter boundaries which are custom and will be affected.</span>
<a name="l658"><span class="linenum"> 658</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[3]-&gt;id});
<a name="l659"><span class="linenum"> 659</span></a>  <span class="comment">        // [4] A course with no letter boundaries, but with a grade item with letter boundaries which are default.</span>
<a name="l660"><span class="linenum"> 660</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[4]-&gt;id}));
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment">        // [5] A course with no letter boundaries, but with a grade item with letter boundaries which are not default, but not affected.</span>
<a name="l662"><span class="linenum"> 662</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[5]-&gt;id}));
<a name="l663"><span class="linenum"> 663</span></a>  <span class="comment">        // [6] A course with no letter boundaries, but with a grade item with letter boundaries which are not default which will be affected.</span>
<a name="l664"><span class="linenum"> 664</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[6]-&gt;id});
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment">        // System setting for grade letter boundaries (default).</span>
<a name="l667"><span class="linenum"> 667</span></a>          <a class="function" onClick="logFunction('set_config')" href="../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('grade_displaytype', '3');
<a name="l668"><span class="linenum"> 668</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; 45; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l669"><span class="linenum"> 669</span></a>              <a class="function" onClick="logFunction('unset_config')" href="../../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id);
<a name="l670"><span class="linenum"> 670</span></a>          }
<a name="l671"><span class="linenum"> 671</span></a>          <a class="function" onClick="logFunction('upgrade_course_letter_boundary')" href="../../_functions/upgrade_course_letter_boundary.html" onMouseOver="funcPopup(event,'upgrade_course_letter_boundary')">upgrade_course_letter_boundary</a>();
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">        // [7] A course with no grade display settings for the course or grade items.</span>
<a name="l674"><span class="linenum"> 674</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[7]-&gt;id}));
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">        // [8] A course with grade display settings, but for something that isn't letters.</span>
<a name="l676"><span class="linenum"> 676</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[8]-&gt;id}));
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">        // [9] A course with grade display settings of letters which are default.</span>
<a name="l678"><span class="linenum"> 678</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[9]-&gt;id}));
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment">        // [10] A course with grade display settings of letters which are not default, but not affected.</span>
<a name="l680"><span class="linenum"> 680</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[10]-&gt;id}));
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">        // [11] A course with grade display settings of letters which are not default, which will be affected.</span>
<a name="l682"><span class="linenum"> 682</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[11]-&gt;id});
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment">        // [12] A grade item with display settings that are not letters.</span>
<a name="l684"><span class="linenum"> 684</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[12]-&gt;id}));
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment">        // [13] A grade item with display settings of letters which are default.</span>
<a name="l686"><span class="linenum"> 686</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[13]-&gt;id}));
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment">        // [14] A grade item with display settings of letters which are not default, but not affected.</span>
<a name="l688"><span class="linenum"> 688</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[14]-&gt;id}));
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment">        // [15] A grade item with display settings of letters which are not default, which will be affected.</span>
<a name="l690"><span class="linenum"> 690</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[15]-&gt;id});
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">        // System setting for grade letter boundaries (custom with problem).</span>
<a name="l693"><span class="linenum"> 693</span></a>          <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l694"><span class="linenum"> 694</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assign_bad_letter_boundary')" href="../../_functions/assign_bad_letter_boundary.html" onMouseOver="funcPopup(event,'assign_bad_letter_boundary')">assign_bad_letter_boundary</a>(<a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>-&gt;<a onClick="logVariable('id')" class="var it42913" onMouseOver="hilite(42913)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l695"><span class="linenum"> 695</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; 45; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l696"><span class="linenum"> 696</span></a>              <a class="function" onClick="logFunction('unset_config')" href="../../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id);
<a name="l697"><span class="linenum"> 697</span></a>          }
<a name="l698"><span class="linenum"> 698</span></a>          <a class="function" onClick="logFunction('upgrade_course_letter_boundary')" href="../../_functions/upgrade_course_letter_boundary.html" onMouseOver="funcPopup(event,'upgrade_course_letter_boundary')">upgrade_course_letter_boundary</a>();
<a name="l699"><span class="linenum"> 699</span></a>  
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment">        // [16] A course with no grade display settings for the course or grade items.</span>
<a name="l701"><span class="linenum"> 701</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[16]-&gt;id});
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">        // [17] A course with grade display settings, but for something that isn't letters.</span>
<a name="l703"><span class="linenum"> 703</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[17]-&gt;id}));
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment">        // [18] A course with grade display settings of letters which are default.</span>
<a name="l705"><span class="linenum"> 705</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[18]-&gt;id});
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment">        // [19] A course with grade display settings of letters which are not default, but not affected.</span>
<a name="l707"><span class="linenum"> 707</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[19]-&gt;id}));
<a name="l708"><span class="linenum"> 708</span></a>  <span class="comment">        // [20] A course with grade display settings of letters which are not default, which will be affected.</span>
<a name="l709"><span class="linenum"> 709</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[20]-&gt;id});
<a name="l710"><span class="linenum"> 710</span></a>  <span class="comment">        // [21] A grade item with display settings which are not letters. Grade total will be affected so should be frozen.</span>
<a name="l711"><span class="linenum"> 711</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[21]-&gt;id});
<a name="l712"><span class="linenum"> 712</span></a>  <span class="comment">        // [22] A grade item with display settings of letters which are default.</span>
<a name="l713"><span class="linenum"> 713</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[22]-&gt;id});
<a name="l714"><span class="linenum"> 714</span></a>  <span class="comment">        // [23] A grade item with display settings of letters which are not default, but not affected. Course uses new letter boundary setting.</span>
<a name="l715"><span class="linenum"> 715</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[23]-&gt;id}));
<a name="l716"><span class="linenum"> 716</span></a>  <span class="comment">        // [24] A grade item with display settings of letters which are not default, which will be affected.</span>
<a name="l717"><span class="linenum"> 717</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[24]-&gt;id});
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment">        // [25] A course which is using the default grade display setting, but has updated the grade letter boundary (not 57) Should not be frozen.</span>
<a name="l719"><span class="linenum"> 719</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[25]-&gt;id}));
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment">        // [26] A course that is using the default display setting (letters) and altered the letter boundary with 57. Should be frozen.</span>
<a name="l721"><span class="linenum"> 721</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[26]-&gt;id});
<a name="l722"><span class="linenum"> 722</span></a>  
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment">        // System setting not showing letters.</span>
<a name="l724"><span class="linenum"> 724</span></a>          <a class="function" onClick="logFunction('set_config')" href="../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('grade_displaytype', '2');
<a name="l725"><span class="linenum"> 725</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; 45; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l726"><span class="linenum"> 726</span></a>              <a class="function" onClick="logFunction('unset_config')" href="../../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id);
<a name="l727"><span class="linenum"> 727</span></a>          }
<a name="l728"><span class="linenum"> 728</span></a>          <a class="function" onClick="logFunction('upgrade_course_letter_boundary')" href="../../_functions/upgrade_course_letter_boundary.html" onMouseOver="funcPopup(event,'upgrade_course_letter_boundary')">upgrade_course_letter_boundary</a>();
<a name="l729"><span class="linenum"> 729</span></a>  
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">        // [27] A course with no grade display settings for the course or grade items.</span>
<a name="l731"><span class="linenum"> 731</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[27]-&gt;id}));
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">        // [28] A course with grade display settings, but for something that isn't letters.</span>
<a name="l733"><span class="linenum"> 733</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[28]-&gt;id}));
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">        // [29] A course with grade display settings of letters which are default.</span>
<a name="l735"><span class="linenum"> 735</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[29]-&gt;id});
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment">        // [30] A course with grade display settings of letters which are not default, but not affected.</span>
<a name="l737"><span class="linenum"> 737</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[30]-&gt;id}));
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment">        // [31] A course with grade display settings of letters which are not default, which will be affected.</span>
<a name="l739"><span class="linenum"> 739</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[31]-&gt;id});
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">        // [32] A grade item with display settings which are not letters.</span>
<a name="l741"><span class="linenum"> 741</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[32]-&gt;id}));
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">        // [33] All system defaults.</span>
<a name="l743"><span class="linenum"> 743</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[33]-&gt;id}));
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">        // [34] A grade item with display settings of letters which are not default, but not affected. Course uses new letter boundary setting.</span>
<a name="l745"><span class="linenum"> 745</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[34]-&gt;id}));
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment">        // [35] A grade item with display settings of letters which are not default, which will be affected.</span>
<a name="l747"><span class="linenum"> 747</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[35]-&gt;id});
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment">        // [36] A course with grade display settings of letters with modified and good boundary (not 57) Should not be frozen.</span>
<a name="l749"><span class="linenum"> 749</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[36]-&gt;id}));
<a name="l750"><span class="linenum"> 750</span></a>  
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">        // Previous site conditions still exist.</span>
<a name="l752"><span class="linenum"> 752</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; 45; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l753"><span class="linenum"> 753</span></a>              <a class="function" onClick="logFunction('unset_config')" href="../../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id);
<a name="l754"><span class="linenum"> 754</span></a>          }
<a name="l755"><span class="linenum"> 755</span></a>          <a class="function" onClick="logFunction('upgrade_course_letter_boundary')" href="../../_functions/upgrade_course_letter_boundary.html" onMouseOver="funcPopup(event,'upgrade_course_letter_boundary')">upgrade_course_letter_boundary</a>();
<a name="l756"><span class="linenum"> 756</span></a>  
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">        // [37] Site setting for not showing the letter column and course setting set to show (frozen).</span>
<a name="l758"><span class="linenum"> 758</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[37]-&gt;id});
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">        // [38] Site setting for not showing the letter column and course setting set to hide.</span>
<a name="l760"><span class="linenum"> 760</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[38]-&gt;id}));
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment">        // [39] Site setting for not showing the letter column and course setting set to default.</span>
<a name="l762"><span class="linenum"> 762</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[39]-&gt;id}));
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment">        // [40] Site setting for not showing the letter column and course setting set to default. Course display set to letters (frozen).</span>
<a name="l764"><span class="linenum"> 764</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[40]-&gt;id});
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment">        // [41] Site setting for not showing the letter column and course setting set to default. Grade item display set to letters (frozen).</span>
<a name="l766"><span class="linenum"> 766</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[41]-&gt;id});
<a name="l767"><span class="linenum"> 767</span></a>  
<a name="l768"><span class="linenum"> 768</span></a>  <span class="comment">        // Previous site conditions still exist.</span>
<a name="l769"><span class="linenum"> 769</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; 45; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l770"><span class="linenum"> 770</span></a>              <a class="function" onClick="logFunction('unset_config')" href="../../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id);
<a name="l771"><span class="linenum"> 771</span></a>          }
<a name="l772"><span class="linenum"> 772</span></a>          <a class="function" onClick="logFunction('set_config')" href="../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('grade_report_user_showlettergrade', '1');
<a name="l773"><span class="linenum"> 773</span></a>          <a class="function" onClick="logFunction('upgrade_course_letter_boundary')" href="../../_functions/upgrade_course_letter_boundary.html" onMouseOver="funcPopup(event,'upgrade_course_letter_boundary')">upgrade_course_letter_boundary</a>();
<a name="l774"><span class="linenum"> 774</span></a>  
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">        // [42] Site setting for showing the letter column, but course setting set to hide.</span>
<a name="l776"><span class="linenum"> 776</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[42]-&gt;id}));
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">        // [43] Site setting for showing the letter column and course setting set to show (frozen).</span>
<a name="l778"><span class="linenum"> 778</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[43]-&gt;id});
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">        // [44] Site setting for showing the letter column and course setting set to default (frozen).</span>
<a name="l780"><span class="linenum"> 780</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20160518, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;{'gradebook_calculations_freeze_' . <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[44]-&gt;id});
<a name="l781"><span class="linenum"> 781</span></a>      }
<a name="l782"><span class="linenum"> 782</span></a>  
<a name="l783"><span class="linenum"> 783</span></a>      <span class="comment">/**</span>
<a name="l784"><span class="linenum"> 784</span></a>  <span class="comment">     * Test upgrade_letter_boundary_needs_freeze function.</span>
<a name="l785"><span class="linenum"> 785</span></a>  <span class="comment">     */</span>
<a name="l786"><span class="linenum"> 786</span></a>      public function <a class="function" onClick="logFunction('test_upgrade_letter_boundary_needs_freeze')" href="../../_functions/test_upgrade_letter_boundary_needs_freeze.html" onMouseOver="funcPopup(event,'test_upgrade_letter_boundary_needs_freeze')">test_upgrade_letter_boundary_needs_freeze</a>() {
<a name="l787"><span class="linenum"> 787</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l788"><span class="linenum"> 788</span></a>  
<a name="l789"><span class="linenum"> 789</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>();
<a name="l790"><span class="linenum"> 790</span></a>  
<a name="l791"><span class="linenum"> 791</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/db/upgradelib.php');
<a name="l792"><span class="linenum"> 792</span></a>  
<a name="l793"><span class="linenum"> 793</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a> = array();
<a name="l794"><span class="linenum"> 794</span></a>          <a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a> = array();
<a name="l795"><span class="linenum"> 795</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; 3; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l796"><span class="linenum"> 796</span></a>              <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l797"><span class="linenum"> 797</span></a>              <a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a>[] = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../../_variables/courses.html">$courses</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]-&gt;id);
<a name="l798"><span class="linenum"> 798</span></a>          }
<a name="l799"><span class="linenum"> 799</span></a>  
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment">        // Course one is not using a letter boundary.</span>
<a name="l801"><span class="linenum"> 801</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="function" onClick="logFunction('upgrade_letter_boundary_needs_freeze')" href="../../_functions/upgrade_letter_boundary_needs_freeze.html" onMouseOver="funcPopup(event,'upgrade_letter_boundary_needs_freeze')">upgrade_letter_boundary_needs_freeze</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a>[0]));
<a name="l802"><span class="linenum"> 802</span></a>  
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment">        // Let's make course 2 use the bad boundary.</span>
<a name="l804"><span class="linenum"> 804</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assign_bad_letter_boundary')" href="../../_functions/assign_bad_letter_boundary.html" onMouseOver="funcPopup(event,'assign_bad_letter_boundary')">assign_bad_letter_boundary</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a>[1]-&gt;id);
<a name="l805"><span class="linenum"> 805</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(<a class="function" onClick="logFunction('upgrade_letter_boundary_needs_freeze')" href="../../_functions/upgrade_letter_boundary_needs_freeze.html" onMouseOver="funcPopup(event,'upgrade_letter_boundary_needs_freeze')">upgrade_letter_boundary_needs_freeze</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a>[1]));
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment">        // Course 3 has letter boundaries that are fine.</span>
<a name="l807"><span class="linenum"> 807</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assign_good_letter_boundary')" href="../../_functions/assign_good_letter_boundary.html" onMouseOver="funcPopup(event,'assign_good_letter_boundary')">assign_good_letter_boundary</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a>[2]-&gt;id);
<a name="l808"><span class="linenum"> 808</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="function" onClick="logFunction('upgrade_letter_boundary_needs_freeze')" href="../../_functions/upgrade_letter_boundary_needs_freeze.html" onMouseOver="funcPopup(event,'upgrade_letter_boundary_needs_freeze')">upgrade_letter_boundary_needs_freeze</a>(<a class="var it2537" onMouseOver="hilite(2537)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../../_variables/contexts.html">$contexts</a>[2]));
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment">        // Try the system context not using a letter boundary.</span>
<a name="l810"><span class="linenum"> 810</span></a>          <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l811"><span class="linenum"> 811</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="function" onClick="logFunction('upgrade_letter_boundary_needs_freeze')" href="../../_functions/upgrade_letter_boundary_needs_freeze.html" onMouseOver="funcPopup(event,'upgrade_letter_boundary_needs_freeze')">upgrade_letter_boundary_needs_freeze</a>(<a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../../_variables/systemcontext.html">$systemcontext</a>));
<a name="l812"><span class="linenum"> 812</span></a>      }
<a name="l813"><span class="linenum"> 813</span></a>  
<a name="l814"><span class="linenum"> 814</span></a>      <span class="comment">/**</span>
<a name="l815"><span class="linenum"> 815</span></a>  <span class="comment">     * Assigns letter boundaries with comparison problems.</span>
<a name="l816"><span class="linenum"> 816</span></a>  <span class="comment">     *</span>
<a name="l817"><span class="linenum"> 817</span></a>  <span class="comment">     * @param int $contextid Context ID.</span>
<a name="l818"><span class="linenum"> 818</span></a>  <span class="comment">     */</span>
<a name="l819"><span class="linenum"> 819</span></a>      private function <a class="function" onClick="logFunction('assign_bad_letter_boundary')" href="../../_functions/assign_bad_letter_boundary.html" onMouseOver="funcPopup(event,'assign_bad_letter_boundary')">assign_bad_letter_boundary</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>) {
<a name="l820"><span class="linenum"> 820</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l821"><span class="linenum"> 821</span></a>          <a class="var it16292" onMouseOver="hilite(16292)" onMouseOut="lolite()" onClick="logVariable('newlettersscale')" href="../../_variables/newlettersscale.html">$newlettersscale</a> = array(
<a name="l822"><span class="linenum"> 822</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 90.00000, 'letter' =&gt; 'A'),
<a name="l823"><span class="linenum"> 823</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 85.00000, 'letter' =&gt; 'A-'),
<a name="l824"><span class="linenum"> 824</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 80.00000, 'letter' =&gt; 'B+'),
<a name="l825"><span class="linenum"> 825</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 75.00000, 'letter' =&gt; 'B'),
<a name="l826"><span class="linenum"> 826</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 70.00000, 'letter' =&gt; 'B-'),
<a name="l827"><span class="linenum"> 827</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 65.00000, 'letter' =&gt; 'C+'),
<a name="l828"><span class="linenum"> 828</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 57.00000, 'letter' =&gt; 'C'),
<a name="l829"><span class="linenum"> 829</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 50.00000, 'letter' =&gt; 'C-'),
<a name="l830"><span class="linenum"> 830</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 40.00000, 'letter' =&gt; 'D+'),
<a name="l831"><span class="linenum"> 831</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 25.00000, 'letter' =&gt; 'D'),
<a name="l832"><span class="linenum"> 832</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 0.00000, 'letter' =&gt; 'F'),
<a name="l833"><span class="linenum"> 833</span></a>              );
<a name="l834"><span class="linenum"> 834</span></a>  
<a name="l835"><span class="linenum"> 835</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('grade_letters', array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>));
<a name="l836"><span class="linenum"> 836</span></a>          foreach (<a class="var it16292" onMouseOver="hilite(16292)" onMouseOut="lolite()" onClick="logVariable('newlettersscale')" href="../../_variables/newlettersscale.html">$newlettersscale</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment">            // There is no API to do this, so we have to manually insert into the database.</span>
<a name="l838"><span class="linenum"> 838</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('grade_letters', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l839"><span class="linenum"> 839</span></a>          }
<a name="l840"><span class="linenum"> 840</span></a>      }
<a name="l841"><span class="linenum"> 841</span></a>  
<a name="l842"><span class="linenum"> 842</span></a>      <span class="comment">/**</span>
<a name="l843"><span class="linenum"> 843</span></a>  <span class="comment">     * Assigns letter boundaries with no comparison problems.</span>
<a name="l844"><span class="linenum"> 844</span></a>  <span class="comment">     *</span>
<a name="l845"><span class="linenum"> 845</span></a>  <span class="comment">     * @param int $contextid Context ID.</span>
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment">     */</span>
<a name="l847"><span class="linenum"> 847</span></a>      private function <a class="function" onClick="logFunction('assign_good_letter_boundary')" href="../../_functions/assign_good_letter_boundary.html" onMouseOver="funcPopup(event,'assign_good_letter_boundary')">assign_good_letter_boundary</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>) {
<a name="l848"><span class="linenum"> 848</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l849"><span class="linenum"> 849</span></a>          <a class="var it16292" onMouseOver="hilite(16292)" onMouseOut="lolite()" onClick="logVariable('newlettersscale')" href="../../_variables/newlettersscale.html">$newlettersscale</a> = array(
<a name="l850"><span class="linenum"> 850</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 90.00000, 'letter' =&gt; 'A'),
<a name="l851"><span class="linenum"> 851</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 85.00000, 'letter' =&gt; 'A-'),
<a name="l852"><span class="linenum"> 852</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 80.00000, 'letter' =&gt; 'B+'),
<a name="l853"><span class="linenum"> 853</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 75.00000, 'letter' =&gt; 'B'),
<a name="l854"><span class="linenum"> 854</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 70.00000, 'letter' =&gt; 'B-'),
<a name="l855"><span class="linenum"> 855</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 65.00000, 'letter' =&gt; 'C+'),
<a name="l856"><span class="linenum"> 856</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 54.00000, 'letter' =&gt; 'C'),
<a name="l857"><span class="linenum"> 857</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 50.00000, 'letter' =&gt; 'C-'),
<a name="l858"><span class="linenum"> 858</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 40.00000, 'letter' =&gt; 'D+'),
<a name="l859"><span class="linenum"> 859</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 25.00000, 'letter' =&gt; 'D'),
<a name="l860"><span class="linenum"> 860</span></a>                  array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'lowerboundary' =&gt; 0.00000, 'letter' =&gt; 'F'),
<a name="l861"><span class="linenum"> 861</span></a>              );
<a name="l862"><span class="linenum"> 862</span></a>  
<a name="l863"><span class="linenum"> 863</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('grade_letters', array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>));
<a name="l864"><span class="linenum"> 864</span></a>          foreach (<a class="var it16292" onMouseOver="hilite(16292)" onMouseOut="lolite()" onClick="logVariable('newlettersscale')" href="../../_variables/newlettersscale.html">$newlettersscale</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>) {
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment">            // There is no API to do this, so we have to manually insert into the database.</span>
<a name="l866"><span class="linenum"> 866</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('grade_letters', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l867"><span class="linenum"> 867</span></a>          }
<a name="l868"><span class="linenum"> 868</span></a>      }
<a name="l869"><span class="linenum"> 869</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1300]], 441],
'get_records_menu': ['get_records_menu', 'Get the first two columns from a number of records as an associative array where all the given conditions met. ', [['lib/dml','moodle_database.php',1375]], 75],
'getdatagenerator': ['getdatagenerator', 'Get data generator ', [['lib/phpunit/classes','advanced_testcase.php',570]], 4450],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'test_upgrade_letter_boundary_needs_freeze': ['test_upgrade_letter_boundary_needs_freeze', 'Test upgrade_letter_boundary_needs_freeze function. ', [['lib/tests','upgradelib_test.php',783]], 0],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'upgrade_extra_credit_weightoverride': ['upgrade_extra_credit_weightoverride', 'Marks all courses with changes in extra credit weight calculation ', [['lib/db','upgradelib.php',153]], 5],
'test_upgrade_calculated_grade_items_freeze': ['test_upgrade_calculated_grade_items_freeze', 'Test the upgrade function for flagging courses with calculated grade item problems. ', [['lib/tests','upgradelib_test.php',316]], 0],
'grade_set_setting': ['grade_set_setting', 'Add, update or delete a course gradebook setting ', [['lib','gradelib.php',696]], 23],
'upgrade_fix_missing_root_folders_draft': ['upgrade_fix_missing_root_folders_draft', 'Detect draft file areas with missing root directory records and add them. ', [['lib','upgradelib.php',2041]], 2],
'fetch': ['fetch', 'Finds and returns a data_object instance based on params. ', [['completion/criteria','completion_criteria_course.php',46],['lib/minify/lib/Minify/Cache','APC.php',91],['lib/grade','grade_item.php',346],['completion/criteria','completion_criteria_date.php',43],['lib/grade','grade_category.php',184],['lib/grade','grade_scale.php',89],['lib/grade','grade_object.php',126],['completion','data_object.php',152],['completion','completion_completion.php',70],['lib/grade','grade_grade.php',635],['lib/classes/update','checker.php',117],['lib/grade','grade_outcome.php',182],['lib/minify/lib/Minify/Cache','File.php',90],['completion','completion_aggregation.php',68],['completion/criteria','completion_criteria_role.php',43],['lib/minify/lib/Minify/Cache','ZendPlatform.php',97],['lib/horde/framework/Horde/Imap/Client','Base.php',2373],['completion','completion_criteria_completion.php',74],['completion/criteria','completion_criteria_self.php',43],['completion/criteria','completion_criteria_grade.php',45],['completion/criteria','completion_criteria_unenrol.php',43],['lib/minify/lib/Minify/Cache','Memcache.php',97],['lib/classes','notification.php',93],['completion/criteria','completion_criteria_activity.php',45],['completion/criteria','completion_criteria_duration.php',43],['lib/minify/lib/Minify/Cache','WinCache.php',89],['lib/minify/lib/Minify/Cache','XCache.php',86]], 253],
'upgrade_letter_boundary_needs_freeze': ['upgrade_letter_boundary_needs_freeze', 'Checks the letter boundary of the provided context to see if it needs freezing. Each letter boundary is tested to see if receiving that boundary number will result in achieving the cosponsoring letter. ', [['lib/db','upgradelib.php',470]], 6],
'create_user': ['create_user', 'Create a test user ', [['lib/testing/generator','data_generator.php',137]], 1376],
'file_prepare_draft_area': ['file_prepare_draft_area', 'Initialise a draft file area from a real one by copying the files. A draft area will be created if one does not already exist. Normally you should get $draftitemid by calling file_get_submitted_draft_itemid(\'elementname\'); ', [['lib','filelib.php',362]], 67],
'fetch_course_category': ['fetch_course_category', 'Return the course level grade_category object ', [['lib/grade','grade_category.php',2451]], 21],
'setuser': ['setuser', '', [['lib/google/src/Google/Service','Replicapool.php',1091],['lib/google/src/Google/Service','Computeaccounts.php',1294],['lib/google/src/Google/Service','Appengine.php',1341],['lib/google/src/Google/Service','DeploymentManager.php',1530],['lib/google/src/Google/Service','CloudUserAccounts.php',1733],['lib/google/src/Google/Service','Replicapoolupdater.php',852],['lib/google/src/Google/Service','Replicapoolupdater.php',1194],['lib/google/src/Google/Service','Autoscaler.php',1005],['lib/google/src/Google/Service','Appsactivity.php',273],['lib/google/src/Google/Service','Appsactivity.php',420],['lib/google/src/Google/Service','Drive.php',2824],['lib/phpunit/classes','advanced_testcase.php',511],['lib/google/src/Google/Service','AndroidEnterprise.php',2240],['lib/google/src/Google/Service','AndroidEnterprise.php',2634],['lib/google/src/Google/Service','AndroidEnterprise.php',3101],['lib/google/src/Google/Service','Resourceviews.php',820],['lib/google/src/Google/Service','SQLAdmin.php',2990],['lib/google/src/Google/Service','Compute.php',14264]], 1070],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'upgrade_stale_php_files_present': ['upgrade_stale_php_files_present', 'Detect if there are leftovers in PHP source files. ', [['lib','upgradelib.php',361]], 2],
'update': ['update', 'In addition to update() as defined in grade_object, handle the grade_outcome and grade_scale objects. Force regrading if necessary, rounds the float numbers using php function, the reason is we need to compare the db value with computed number to skip regrading if possible. ', [['lib/grade','grade_item.php',274],['lib/google/src/Google/Service','Tasks.php',386],['lib/google/src/Google/Service','Tasks.php',556],['lib/google/src/Google/Service','AndroidPublisher.php',1413],['lib/google/src/Google/Service','AndroidPublisher.php',1545],['lib/google/src/Google/Service','AndroidPublisher.php',1615],['lib/google/src/Google/Service','AndroidPublisher.php',1853],['lib/google/src/Google/Service','AndroidPublisher.php',1919],['lib/google/src/Google/Service','AndroidPublisher.php',2003],['lib/google/src/Google/Service','AndroidPublisher.php',2177],['lib/google/src/Google/Service','Reseller.php',344],['lib/grade','grade_category.php',226],['lib/grade','grade_scale.php',125],['lib/adodb','adodb-active-record.inc.php',1004],['lib/grade','grade_object.php',238],['lib/google/src/Google/Service','YouTubeAnalytics.php',534],['completion','data_object.php',252],['mod/lesson/pagetypes','matching.php',308],['tag/classes','collection.php',215],['lib/google/src/Google/Service','AdExchangeBuyer.php',802],['lib/google/src/Google/Service','AdExchangeBuyer.php',906],['lib/google/src/Google/Service','AdExchangeBuyer.php',1013],['lib/google/src/Google/Service','AdExchangeBuyer.php',1181],['lib/google/src/Google/Service','AdExchangeBuyer.php',1357],['lib/google/src/Google/Service','AdExchangeBuyer.php',1640],['lib/google/src/Google/Service','Books.php',2025],['lib/grade','grade_grade.php',1009],['lib/grade','grade_outcome.php',144],['lib/google/src/Google/Service','Analytics.php',2215],['lib/google/src/Google/Service','Analytics.php',2388],['lib/google/src/Google/Service','Analytics.php',2501],['lib/google/src/Google/Service','Analytics.php',2626],['lib/google/src/Google/Service','Analytics.php',2736],['lib/google/src/Google/Service','Analytics.php',2843],['lib/google/src/Google/Service','Analytics.php',2971],['lib/google/src/Google/Service','Analytics.php',3062],['lib/google/src/Google/Service','Analytics.php',3185],['lib/google/src/Google/Service','Analytics.php',3502],['lib/google/src/Google/Service','Analytics.php',3604],['lib/google/src/Google/Service','Analytics.php',3686],['lib/google/src/Google/Service','Coordinate.php',611],['lib/google/src/Google/Service','Coordinate.php',727],['lib/google/src/Google/Service','DeploymentManager.php',589],['tag/classes/output','tagareacollection.php',68],['lib','weblib.php',3312],['lib/google/src/Google/Service','Blogger.php',1349],['lib/google/src/Google/Service','Blogger.php',1647],['lib/google/src/Google/Service','Dataflow.php',350],['tag/classes/output','tagcollname.php',58],['competency/classes','persistent.php',452],['lib/google/src/Google/Service','Cloudresourcemanager.php',344],['lib/google/src/Google/Service','Cloudresourcemanager.php',555],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1066],['lib/google/src/Google/Service','TagManager.php',1159],['lib/google/src/Google/Service','TagManager.php',1219],['lib/google/src/Google/Service','TagManager.php',1311],['lib/google/src/Google/Service','TagManager.php',1405],['lib/google/src/Google/Service','TagManager.php',1499],['lib/google/src/Google/Service','TagManager.php',1650],['lib/google/src/Google/Service','TagManager.php',1743],['mod/lesson','locallib.php',2691],['lib/google/src/Google/Service','Bigquery.php',621],['lib/google/src/Google/Service','Bigquery.php',953],['lib/google/src/Google/Service','ShoppingContent.php',1136],['lib/google/src/Google/Service','ShoppingContent.php',1238],['lib/google/src/Google/Service','ShoppingContent.php',1401],['lib/google/src/Google/Service','ShoppingContent.php',1534],['mod/lesson/pagetypes','truefalse.php',163],['lib/google/src/Google/Service','Clouddebugger.php',307],['lib/filestorage','stored_file.php',103],['lib/google/src/Google/Service','Container.php',366],['lib/horde/framework/Horde/Support','Array.php',70],['lib/google/src/Google/Service','Storage.php',1127],['lib/google/src/Google/Service','Storage.php',1268],['lib/google/src/Google/Service','Storage.php',1423],['lib/google/src/Google/Service','Storage.php',1564],['lib/google/src/Google/Service','Storage.php',1904],['tag/classes/output','tagname.php',56],['tag/classes/output','tagcollsearchable.php',72],['lib/google/src/Google/Service','Games.php',1508],['lib/google/src/Google/Service','Licensing.php',335],['lib/google/src/Google/Service','Fitness.php',478],['lib/google/src/Google/Service','Fitness.php',691],['lib/google/src/Google/Service','Gmail.php',833],['lib/google/src/Google/Service','Gmail.php',986],['lib/google/src/Google/Service','Taskqueue.php',398],['lib/adodb','adodb-active-recordx.inc.php',1136],['grade/grading/form','lib.php',905],['lib/google/src/Google/Service','Doubleclicksearch.php',326],['lib/google/src/Google/Service','Autoscaler.php',400],['tag/classes/output','tagisstandard.php',70],['lib/google/src/Google/Service','Prediction.php',339],['lib/google/src/Google/Service','SiteVerification.php',227],['lib/google/src/Google/Service','Drive.php',1691],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2208],['lib/google/src/Google/Service','Drive.php',2320],['lib/google/src/Google/Service','Drive.php',2370],['lib/google/src/Google/Service','Drive.php',2494],['lib/google/src/Google/Service','Drive.php',2582],['tag/classes/output','tagflag.php',71],['lib/google/src/Google/Service','Proximitybeacon.php',440],['lib/google/src/Google/Service','Groupssettings.php',138],['lib/google/src/Google/Service','Directory.php',1829],['lib/google/src/Google/Service','Directory.php',1889],['lib/google/src/Google/Service','Directory.php',2141],['lib/google/src/Google/Service','Directory.php',2306],['lib/google/src/Google/Service','Directory.php',2489],['lib/google/src/Google/Service','Directory.php',2597],['lib/google/src/Google/Service','Directory.php',2808],['lib/google/src/Google/Service','Directory.php',2910],['lib/google/src/Google/Service','Directory.php',3131],['lib/google/src/Google/Service','Directory.php',3317],['lib/google/src/Google/Service','Fusiontables.php',727],['lib/google/src/Google/Service','Fusiontables.php',892],['lib/google/src/Google/Service','Fusiontables.php',1094],['lib/google/src/Google/Service','Fusiontables.php',1269],['lib/google/src/Google/Service','AdSenseHost.php',846],['lib/google/src/Google/Service','AdSenseHost.php',1097],['course/classes/output','course_module_name.php',81],['lib/google/src/Google/Service','Mirror.php',496],['lib/google/src/Google/Service','Mirror.php',634],['lib/google/src/Google/Service','Mirror.php',745],['tag/classes','area.php',226],['lib/google/src/Google/Service','AndroidEnterprise.php',1064],['lib/google/src/Google/Service','AndroidEnterprise.php',1165],['lib/google/src/Google/Service','AndroidEnterprise.php',1489],['lib/google/src/Google/Service','AndroidEnterprise.php',1672],['grade/grading/form/rubric','lib.php',828],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',200],['mod/lesson/pagetypes','essay.php',158],['lib','coursecatlib.php',438],['tag/classes','tag.php',893],['lib/google/src/Google/Service','Calendar.php',1006],['lib/google/src/Google/Service','Calendar.php',1181],['lib/google/src/Google/Service','Calendar.php',1333],['lib/google/src/Google/Service','Calendar.php',1714],['lib/google/src/Google/Service','PlusDomains.php',692],['lib/google/src/Google/Service','GamesConfiguration.php',334],['lib/google/src/Google/Service','GamesConfiguration.php',473],['mod/lesson/pagetypes','branchtable.php',262],['tag/classes/output','tagareashowstandard.php',64],['lib/google/src/Google/Service','AppState.php',202],['calendar','lib.php',2206],['tag/classes/output','tagareaenabled.php',69],['cohort/classes/output','cohortidnumber.php',53],['lib/google/src/Google/Service','Classroom.php',564],['cohort/classes/output','cohortname.php',53],['lib/google/src/Google/Service','SQLAdmin.php',947],['lib/google/src/Google/Service','SQLAdmin.php',1267],['lib/google/src/Google/Service','SQLAdmin.php',1534],['grade/grading/form/guide','lib.php',836],['lib/google/src/Google/Service','Compute.php',4253],['lib/google/src/Google/Service','Compute.php',4398],['lib/google/src/Google/Service','Compute.php',4767],['lib/google/src/Google/Service','Compute.php',5348],['lib/google/src/Google/Service','Compute.php',5478],['lib/google/src/Google/Service','Compute.php',8131],['lib/google/src/Google/Service','YouTube.php',1959],['lib/google/src/Google/Service','YouTube.php',2194],['lib/google/src/Google/Service','YouTube.php',2303],['lib/google/src/Google/Service','YouTube.php',2429],['lib/google/src/Google/Service','YouTube.php',2570],['lib/google/src/Google/Service','YouTube.php',3111],['lib/google/src/Google/Service','YouTube.php',3348],['lib/google/src/Google/Service','YouTube.php',3518],['lib/google/src/Google/Service','YouTube.php',3708],['lib/google/src/Google/Service','YouTube.php',4400],['lib/google/src/Google/Service','Dfareporting.php',4752],['lib/google/src/Google/Service','Dfareporting.php',4840],['lib/google/src/Google/Service','Dfareporting.php',4973],['lib/google/src/Google/Service','Dfareporting.php',5090],['lib/google/src/Google/Service','Dfareporting.php',5204],['lib/google/src/Google/Service','Dfareporting.php',5400],['lib/google/src/Google/Service','Dfareporting.php',5656],['lib/google/src/Google/Service','Dfareporting.php',5848],['lib/google/src/Google/Service','Dfareporting.php',5970],['lib/google/src/Google/Service','Dfareporting.php',6078],['lib/google/src/Google/Service','Dfareporting.php',6196],['lib/google/src/Google/Service','Dfareporting.php',6502],['lib/google/src/Google/Service','Dfareporting.php',6704],['lib/google/src/Google/Service','Dfareporting.php',6834],['lib/google/src/Google/Service','Dfareporting.php',6912],['lib/google/src/Google/Service','Dfareporting.php',7077],['lib/google/src/Google/Service','Dfareporting.php',7476],['lib/google/src/Google/Service','Dfareporting.php',7594],['lib/google/src/Google/Service','Dfareporting.php',7744],['lib/google/src/Google/Service','Dfareporting.php',7968],['lib/google/src/Google/Service','Dfareporting.php',8075],['lib/google/src/Google/Service','Dfareporting.php',8202],['lib/google/src/Google/Service','Dfareporting.php',8394],['lib/google/src/Google/Service','Dfareporting.php',8557],['lib/google/src/Google/Service','Dfareporting.php',8861],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',72]], 498],
'unset_config': ['unset_config', 'Removes a key from global configuration. ', [['lib','moodlelib.php',1504]], 77],
'update_grade': ['update_grade', 'Update a grade in the grade table for the assignment and in the gradebook. ', [['mod/assign','locallib.php',2100]], 11],
'upgrade_course_tags': ['upgrade_course_tags', 'This upgrade script merges all tag instances pointing to the same course tag ', [['lib/db','upgradelib.php',291]], 4],
'test_upgrade_minmaxgrade': ['test_upgrade_minmaxgrade', 'Test upgrade minmaxgrade step. ', [['lib/tests','upgradelib_test.php',122]], 0],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'create_instance': ['create_instance', '', [['mod/imscp/tests/generator','lib.php',38],['mod/forum/tests/generator','lib.php',67],['mod/workshop/tests/generator','lib.php',38],['lib/testing/generator','module_generator.php',210],['mod/book/tests/generator','lib.php',53],['mod/survey/tests/generator','lib.php',49],['notes/tests/generator','lib.php',52],['lib/testing/generator','repository_generator.php',106],['mod/lti/tests/generator','lib.php',40],['mod/lesson/tests/generator','lib.php',53],['mod/page/tests/generator','lib.php',39],['mod/glossary/tests/generator','lib.php',59],['lib/testing/generator','block_generator.php',100],['grade/grading/form','lib.php',493],['mod/choice/tests/generator','lib.php',38],['mod/chat/tests/generator','lib.php',53],['mod/assignment/tests/generator','lib.php',39],['mod/folder/tests/generator','lib.php',38],['mod/assign/tests','base_test.php',200],['mod/feedback/tests/generator','lib.php',38],['lib/portfolio','plugin.php',412],['mod/assign/tests/generator','lib.php',29],['mod/data/tests/generator','lib.php',39],['mod/quiz/tests/generator','lib.php',28],['mod/url/tests/generator','lib.php',38],['mod/resource/tests/generator','lib.php',37],['mod/wiki/tests/generator','lib.php',53],['mod/scorm/tests/generator','lib.php',38]], 328],
'test_upgrade_extra_credit_weightoverride': ['test_upgrade_extra_credit_weightoverride', '', [['lib/tests','upgradelib_test.php',251]], 0],
'get_plugin_generator': ['get_plugin_generator', 'Return generator for given plugin or component. ', [['lib/testing/generator','data_generator.php',100]], 619],
'upgrade_course_letter_boundary': ['upgrade_course_letter_boundary', 'Marks all courses that require rounded grade items be updated. ', [['lib/db','upgradelib.php',361]], 8],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'grade_get_setting': ['grade_get_setting', 'Returns a  course gradebook setting ', [['lib','gradelib.php',637]], 45],
'get_grade': ['get_grade', 'Get (or create if not exist yet) grade for this user ', [['lib/grade','grade_item.php',1265],['lib/classes/event','grade_deleted.php',81],['mod/assign','locallib.php',3195],['completion/criteria','completion_criteria_grade.php',96],['grade/grading/form/rubric','lib.php',868],['lib/classes/event','user_graded.php',72],['grade/grading/form/guide','lib.php',889]], 80],
'get_user_grade': ['get_user_grade', 'This will retrieve a grade object from the db, optionally creating it if required. ', [['mod/assign','locallib.php',3130]], 61],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'set_properties': ['set_properties', 'Overrides grade_object::set_properties() to add special handling for changes to category aggregation types ', [['lib/grade','grade_category.php',2536],['lib/grade','grade_object.php',388],['completion','data_object.php',367]], 31],
'create_module': ['create_module', 'Create a test activity module. ', [['lib/testing/generator','data_generator.php',481],['course','lib.php',3522]], 762],
'create_course': ['create_course', 'Creates the actual course. ', [['admin/tool/generator/classes','course_backend.php',246],['lib/testing/generator','data_generator.php',366],['enrol/ldap','lib.php',949],['course','lib.php',2654]], 1178],
'upgrade_minmaxgrade': ['upgrade_minmaxgrade', 'Upgrade the minmaxgrade setting. ', [['lib','upgradelib.php',2145]], 5],
'count_records': ['count_records', 'Count a list of records. ', [['competency/classes','persistent.php',815],['mod/glossary/classes','entry_query_builder.php',152],['lib/dml','moodle_database.php',1766]], 1630],
'assertequals': ['assertequals', 'Asserts that two variables are equal. ', [['lib/tests','completionlib_test.php',68]], 12471],
'test_upgrade_fix_missing_root_folders_draft': ['test_upgrade_fix_missing_root_folders_draft', '', [['lib/tests','upgradelib_test.php',78]], 0],
'insert': ['insert', 'Inserts a data transfer request. (transfers.insert) ', [['lib/google/src/Google/Service','DataTransfer.php',223],['lib/grade','grade_item.php',427],['lib/google/src/Google/Service','Replicapool.php',438],['lib/google/src/Google/Service','Tasks.php',337],['lib/google/src/Google/Service','Tasks.php',457],['lib/google/src/Google/Service','AndroidPublisher.php',1264],['lib/google/src/Google/Service','AndroidPublisher.php',2113],['lib/google/src/Google/Service','Reseller.php',310],['lib/google/src/Google/Service','Reseller.php',474],['lib/google/src/Google/Service','Computeaccounts.php',527],['lib/google/src/Google/Service','Computeaccounts.php',698],['lib/grade','grade_category.php',340],['lib/grade','grade_scale.php',111],['lib/adodb','adodb-active-record.inc.php',848],['lib/grade','grade_object.php',325],['lib/google/src/Google/Service','YouTubeAnalytics.php',379],['lib/google/src/Google/Service','YouTubeAnalytics.php',474],['lib/google/src/Google/Service','Admin.php',88],['lib/google/src/Google/Service','MapsEngine.php',2781],['lib/google/src/Google/Service','MapsEngine.php',3185],['completion','data_object.php',317],['lib/google/src/Google/Service','Urlshortener.php',125],['lib/google/src/Google/Service','AdExchangeBuyer.php',967],['lib/google/src/Google/Service','AdExchangeBuyer.php',1057],['lib/google/src/Google/Service','AdExchangeBuyer.php',1152],['lib/google/src/Google/Service','AdExchangeBuyer.php',1209],['lib/google/src/Google/Service','AdExchangeBuyer.php',1307],['lib/google/src/Google/Service','AdExchangeBuyer.php',1389],['lib/google/src/Google/Service','AdExchangeBuyer.php',1431],['lib/google/src/Google/Service','AdExchangeBuyer.php',1485],['lib/google/src/Google/Service','AdExchangeBuyer.php',1591],['lib/google/src/Google/Service','Books.php',1961],['lib/grade','grade_grade.php',997],['lib/grade','grade_outcome.php',120],['lib/google/src/Google/Service','Analytics.php',2179],['lib/google/src/Google/Service','Analytics.php',2325],['lib/google/src/Google/Service','Analytics.php',2439],['lib/google/src/Google/Service','Analytics.php',2567],['lib/google/src/Google/Service','Analytics.php',2685],['lib/google/src/Google/Service','Analytics.php',2780],['lib/google/src/Google/Service','Analytics.php',2907],['lib/google/src/Google/Service','Analytics.php',3017],['lib/google/src/Google/Service','Analytics.php',3124],['lib/google/src/Google/Service','Analytics.php',3263],['lib/google/src/Google/Service','Analytics.php',3441],['lib/google/src/Google/Service','Analytics.php',3548],['lib/google/src/Google/Service','Analytics.php',3646],['lib/google/src/Google/Service','Coordinate.php',524],['lib/google/src/Google/Service','DeploymentManager.php',483],['lib/google/src/Google/Service','Blogger.php',1258],['lib/google/src/Google/Service','Blogger.php',1510],['lib/google/src/Google/Service','CloudUserAccounts.php',674],['lib/google/src/Google/Service','CloudUserAccounts.php',939],['lib/google/src/Google/Service','Replicapoolupdater.php',355],['lib/google/src/Google/Service','Bigquery.php',567],['lib/google/src/Google/Service','Bigquery.php',709],['lib/google/src/Google/Service','Bigquery.php',897],['lib/google/src/Google/Service','ShoppingContent.php',1081],['lib/google/src/Google/Service','ShoppingContent.php',1479],['lib/google/src/Google/Service','ShoppingContent.php',2001],['lib/google/src/Google/Service','GroupsMigration.php',88],['lib/google/src/Google/Service','Storage.php',1077],['lib/google/src/Google/Service','Storage.php',1197],['lib/google/src/Google/Service','Storage.php',1367],['lib/google/src/Google/Service','Storage.php',1499],['lib/google/src/Google/Service','Storage.php',1737],['lib/google/src/Google/Service','Licensing.php',256],['lib/google/src/Google/Service','Gmail.php',1078],['lib/google/src/Google/Service','Taskqueue.php',324],['lib/adodb','adodb-active-recordx.inc.php',963],['lib/google/src/Google/Service','Doubleclicksearch.php',286],['lib/google/src/Google/Service','Autoscaler.php',347],['lib/google/src/Google/Service','Prediction.php',291],['lib/google/src/Google/Service','SiteVerification.php',181],['lib/google/src/Google/Service','Drive.php',1551],['lib/google/src/Google/Service','Drive.php',1635],['lib/google/src/Google/Service','Drive.php',1816],['lib/google/src/Google/Service','Drive.php',2069],['lib/google/src/Google/Service','Drive.php',2153],['lib/google/src/Google/Service','Drive.php',2273],['lib/google/src/Google/Service','Drive.php',2437],['lib/google/src/Google/Service','Directory.php',1945],['lib/google/src/Google/Service','Directory.php',2018],['lib/google/src/Google/Service','Directory.php',2086],['lib/google/src/Google/Service','Directory.php',2183],['lib/google/src/Google/Service','Directory.php',2253],['lib/google/src/Google/Service','Directory.php',2546],['lib/google/src/Google/Service','Directory.php',2681],['lib/google/src/Google/Service','Directory.php',2760],['lib/google/src/Google/Service','Directory.php',2865],['lib/google/src/Google/Service','Directory.php',3033],['lib/google/src/Google/Service','Directory.php',3213],['lib/google/src/Google/Service','Fusiontables.php',675],['lib/google/src/Google/Service','Fusiontables.php',841],['lib/google/src/Google/Service','Fusiontables.php',1011],['lib/google/src/Google/Service','Fusiontables.php',1217],['lib/google/src/Google/Service','AdSenseHost.php',787],['lib/google/src/Google/Service','AdSenseHost.php',1042],['lib/google/src/Google/Service','AdSenseHost.php',1183],['lib/google/src/Google/Service','Plus.php',466],['lib/google/src/Google/Service','Mirror.php',394],['lib/google/src/Google/Service','Mirror.php',452],['lib/google/src/Google/Service','Mirror.php',606],['lib/google/src/Google/Service','Mirror.php',688],['lib/google/src/Google/Service','Mirror.php',802],['lib/google/src/Google/Service','AndroidEnterprise.php',1017],['lib/google/src/Google/Service','AndroidEnterprise.php',1326],['lib/google/src/Google/Service','Calendar.php',936],['lib/google/src/Google/Service','Calendar.php',1102],['lib/google/src/Google/Service','Calendar.php',1301],['lib/google/src/Google/Service','Calendar.php',1481],['lib/google/src/Google/Service','PlusDomains.php',482],['lib/google/src/Google/Service','PlusDomains.php',607],['lib/google/src/Google/Service','PlusDomains.php',733],['lib/google/src/Google/Service','PlusDomains.php',782],['lib/google/src/Google/Service','GamesConfiguration.php',280],['lib/google/src/Google/Service','GamesConfiguration.php',419],['lib/google/src/Google/Service','Resourceviews.php',475],['lib/google/src/Google/Service','SQLAdmin.php',892],['lib/google/src/Google/Service','SQLAdmin.php',1111],['lib/google/src/Google/Service','SQLAdmin.php',1406],['lib/google/src/Google/Service','SQLAdmin.php',1501],['lib/google/src/Google/Service','Compute.php',4053],['lib/google/src/Google/Service','Compute.php',4183],['lib/google/src/Google/Service','Compute.php',4332],['lib/google/src/Google/Service','Compute.php',4606],['lib/google/src/Google/Service','Compute.php',4701],['lib/google/src/Google/Service','Compute.php',4861],['lib/google/src/Google/Service','Compute.php',4972],['lib/google/src/Google/Service','Compute.php',5063],['lib/google/src/Google/Service','Compute.php',5280],['lib/google/src/Google/Service','Compute.php',5410],['lib/google/src/Google/Service','Compute.php',5557],['lib/google/src/Google/Service','Compute.php',5744],['lib/google/src/Google/Service','Compute.php',6017],['lib/google/src/Google/Service','Compute.php',6186],['lib/google/src/Google/Service','Compute.php',6404],['lib/google/src/Google/Service','Compute.php',6747],['lib/google/src/Google/Service','Compute.php',7067],['lib/google/src/Google/Service','Compute.php',7238],['lib/google/src/Google/Service','Compute.php',7331],['lib/google/src/Google/Service','Compute.php',7441],['lib/google/src/Google/Service','Compute.php',7602],['lib/google/src/Google/Service','Compute.php',7785],['lib/google/src/Google/Service','Compute.php',7972],['lib/google/src/Google/Service','Compute.php',8065],['lib/google/src/Google/Service','Compute.php',8242],['lib/google/src/Google/Service','YouTube.php',1715],['lib/google/src/Google/Service','YouTube.php',1881],['lib/google/src/Google/Service','YouTube.php',2014],['lib/google/src/Google/Service','YouTube.php',2089],['lib/google/src/Google/Service','YouTube.php',2351],['lib/google/src/Google/Service','YouTube.php',2473],['lib/google/src/Google/Service','YouTube.php',2935],['lib/google/src/Google/Service','YouTube.php',3233],['lib/google/src/Google/Service','YouTube.php',3434],['lib/google/src/Google/Service','YouTube.php',3587],['lib/google/src/Google/Service','YouTube.php',3943],['lib/google/src/Google/Service','YouTube.php',4216],['lib/google/src/Google/Service','Dfareporting.php',4686],['lib/google/src/Google/Service','Dfareporting.php',4882],['lib/google/src/Google/Service','Dfareporting.php',5029],['lib/google/src/Google/Service','Dfareporting.php',5132],['lib/google/src/Google/Service','Dfareporting.php',5257],['lib/google/src/Google/Service','Dfareporting.php',5323],['lib/google/src/Google/Service','Dfareporting.php',5595],['lib/google/src/Google/Service','Dfareporting.php',5724],['lib/google/src/Google/Service','Dfareporting.php',5786],['lib/google/src/Google/Service','Dfareporting.php',5906],['lib/google/src/Google/Service','Dfareporting.php',6012],['lib/google/src/Google/Service','Dfareporting.php',6120],['lib/google/src/Google/Service','Dfareporting.php',6329],['lib/google/src/Google/Service','Dfareporting.php',6426],['lib/google/src/Google/Service','Dfareporting.php',6624],['lib/google/src/Google/Service','Dfareporting.php',6761],['lib/google/src/Google/Service','Dfareporting.php',7027],['lib/google/src/Google/Service','Dfareporting.php',7393],['lib/google/src/Google/Service','Dfareporting.php',7532],['lib/google/src/Google/Service','Dfareporting.php',7655],['lib/google/src/Google/Service','Dfareporting.php',8010],['lib/google/src/Google/Service','Dfareporting.php',8131],['lib/google/src/Google/Service','Dfareporting.php',8322],['lib/google/src/Google/Service','Dfareporting.php',8436],['lib/google/src/Google/Service','Dfareporting.php',8497],['lib/google/src/Google/Service','Dfareporting.php',8797],['lib/google/src/Google/Service','Manager.php',275],['lib/google/src/Google/Service','Manager.php',353]], 481],
'insert_fake_grade_item_sortorder': ['insert_fake_grade_item_sortorder', 'Populate some fake grade items into the database with specified sortorder and course id. ', [['lib/tests','upgradelib_test.php',45],['lib/grade/tests','grade_item_test.php',747]], 1],
'test_upgrade_calculated_grade_items_regrade': ['test_upgrade_calculated_grade_items_regrade', '', [['lib/tests','upgradelib_test.php',450]], 0],
'test_upgrade_stale_php_files_present': ['test_upgrade_stale_php_files_present', 'Test the {@link upgrade_stale_php_files_present() function ', [['lib/tests','upgradelib_test.php',36]], 0],
'enrol_user': ['enrol_user', 'Enrol user into course via enrol instance. ', [['enrol/flatfile','lib.php',144],['lib','enrollib.php',1270],['lib/testing/generator','data_generator.php',891],['enrol/lti/classes','helper.php',233],['enrol/self','externallib.php',122],['enrol/mnet','enrol.php',115],['enrol/guest','lib.php',60]], 745],
'assign_good_letter_boundary': ['assign_good_letter_boundary', 'Assigns letter boundaries with no comparison problems. ', [['lib/tests','upgradelib_test.php',842]], 2],
'enrol_get_plugin': ['enrol_get_plugin', 'Returns instance of enrol plugin ', [['lib','enrollib.php',111]], 156],
'test_upgrade_course_letter_boundary': ['test_upgrade_course_letter_boundary', 'Test that the upgrade script correctly flags courses to be frozen due to letter boundary problems. ', [['lib/tests','upgradelib_test.php',579]], 0],
'upgrade_calculated_grade_items': ['upgrade_calculated_grade_items', 'Marks all courses that require calculated grade items be updated. ', [['lib/db','upgradelib.php',188]], 5],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'resetaftertest': ['resetaftertest', 'Reset everything after current test. ', [['lib/phpunit/classes','advanced_testcase.php',246]], 1528],
'set_config': ['set_config', 'Set a key in global configuration ', [['lib','moodlelib.php',1336],['lib','enrollib.php',1153],['lib/editor/tinymce/classes','plugin.php',84],['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515]], 1119],
'assign_bad_letter_boundary': ['assign_bad_letter_boundary', 'Assigns letter boundaries with comparison problems. ', [['lib/tests','upgradelib_test.php',814]], 3],
'test_upgrade_course_tags': ['test_upgrade_course_tags', '', [['lib/tests','upgradelib_test.php',518]], 0],
'get_fieldset_select': ['get_fieldset_select', 'Selects records and return values of chosen field as an array which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1608]], 32],
'grade_regrade_final_grades': ['grade_regrade_final_grades', 'Updates all final grades in course. ', [['lib','gradelib.php',1098]], 29],
'in_array': ['in_array', '', [], 1234],
'array_combine': ['array_combine', '', [], 135],
'array_values': ['array_values', '', [], 342],
'count': ['count', '', [], 4095],
'time': ['time', '', [], 1959],
'defined': ['defined', '', [], 4731]};
CLASS_DATA={
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'core_upgradelib_testcase': ['core_upgradelib_testcase', 'Tests various classes and functions in upgradelib.php library. ', [['lib/tests','upgradelib_test.php',31]], 0],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'assign': ['assign', 'Standard base class for mod_assign (assignment types). ', [['mod/assign','locallib.php',82]], 76],
'grade_category': ['grade_category', 'grade_category is an object mapped to DB table {prefix}grade_categories ', [['lib/grade','grade_category.php',29]], 180],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'context_user': ['context_user', 'User context class ', [['lib','accesslib.php',6398]], 414],
'grade_grade': ['grade_grade', 'grade_grades is an object mapped to DB table {prefix}grade_grades ', [['lib/grade','grade_grade.php',30]], 154],
'grade_item': ['grade_item', 'Class representing a grade item. ', [['lib/grade','grade_item.php',29]], 246]};
CONST_DATA={
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'GRADE_MIN_MAX_FROM_GRADE_ITEM': ['GRADE_MIN_MAX_FROM_GRADE_ITEM', '', [['lib/grade','constants.php',260]], 19],
'GRADE_AGGREGATE_WEIGHTED_MEAN': ['GRADE_AGGREGATE_WEIGHTED_MEAN', '', [['lib/grade','constants.php',58]], 30],
'GRADE_TYPE_VALUE': ['GRADE_TYPE_VALUE', '', [['lib/grade','constants.php',85]], 80],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'GRADE_MIN_MAX_FROM_GRADE_GRADE': ['GRADE_MIN_MAX_FROM_GRADE_GRADE', '', [['lib/grade','constants.php',265]], 22]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
