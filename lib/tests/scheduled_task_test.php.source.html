<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/tests/scheduled_task_test.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/tests';
filename='scheduled_task_test.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/tests/</a> -> <a href="scheduled_task_test.php.html">scheduled_task_test.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="scheduled_task_test.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="scheduled_task_test.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * This file contains the unittests for scheduled tasks.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package   core</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @category  phpunit</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright 2013 Damyon Wiese</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l27"><span class="linenum">  27</span></a>  <span class="keyword">require_once</span> <a class="filename" href="../../lib/tests/fixtures/task_fixtures.php.html" onMouseOver="reqPopup(event, 'task_fixtures.php', '../../lib/tests/fixtures/task_fixtures.php')">(__DIR__ . '/fixtures/task_fixtures.php')</a>;
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Test class for scheduled task.</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @package core</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @category task</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @copyright 2013 Damyon Wiese</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> */</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('core_scheduled_task_testcase')" href="../../_classes/core_scheduled_task_testcase.html" onMouseOver="classPopup(event,'core_scheduled_task_testcase')">core_scheduled_task_testcase</a> extends advanced_testcase {
<a name="l38"><span class="linenum">  38</span></a>  
<a name="l39"><span class="linenum">  39</span></a>      <span class="comment">/**</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     * Test the cron scheduling method</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     */</span>
<a name="l42"><span class="linenum">  42</span></a>      public function <a class="function" onClick="logFunction('test_eval_cron_field')" href="../../_functions/test_eval_cron_field.html" onMouseOver="funcPopup(event,'test_eval_cron_field')">test_eval_cron_field</a>() {
<a name="l43"><span class="linenum">  43</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a> = new \core\task\scheduled_test_task();
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(20, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('eval_cron_field')" href="../../_functions/eval_cron_field.html" onMouseOver="funcPopup(event,'eval_cron_field')">eval_cron_field</a>('*/3', 0, 59)));
<a name="l46"><span class="linenum">  46</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(31, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('eval_cron_field')" href="../../_functions/eval_cron_field.html" onMouseOver="funcPopup(event,'eval_cron_field')">eval_cron_field</a>('1,*/2', 0, 59)));
<a name="l47"><span class="linenum">  47</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(15, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('eval_cron_field')" href="../../_functions/eval_cron_field.html" onMouseOver="funcPopup(event,'eval_cron_field')">eval_cron_field</a>('1-10,5-15', 0, 59)));
<a name="l48"><span class="linenum">  48</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(13, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('eval_cron_field')" href="../../_functions/eval_cron_field.html" onMouseOver="funcPopup(event,'eval_cron_field')">eval_cron_field</a>('1-10,5-15/2', 0, 59)));
<a name="l49"><span class="linenum">  49</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(3, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('eval_cron_field')" href="../../_functions/eval_cron_field.html" onMouseOver="funcPopup(event,'eval_cron_field')">eval_cron_field</a>('1,2,3,1,2,3', 0, 59)));
<a name="l50"><span class="linenum">  50</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(1, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('eval_cron_field')" href="../../_functions/eval_cron_field.html" onMouseOver="funcPopup(event,'eval_cron_field')">eval_cron_field</a>('-1,10,80', 0, 59)));
<a name="l51"><span class="linenum">  51</span></a>      }
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>      public function <a class="function" onClick="logFunction('test_get_next_scheduled_time')" href="../../_functions/test_get_next_scheduled_time.html" onMouseOver="funcPopup(event,'test_get_next_scheduled_time')">test_get_next_scheduled_time</a>() {
<a name="l54"><span class="linenum">  54</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l55"><span class="linenum">  55</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>();
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setTimezone')" href="../../_functions/settimezone.html" onMouseOver="funcPopup(event,'settimezone')">setTimezone</a>('Europe/London');
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">        // Test job run at 1 am.</span>
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a> = new \core\task\scheduled_test_task();
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">        // All fields default to '*'.</span>
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_hour')" href="../../_functions/set_hour.html" onMouseOver="funcPopup(event,'set_hour')">set_hour</a>('1');
<a name="l64"><span class="linenum">  64</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_minute')" href="../../_functions/set_minute.html" onMouseOver="funcPopup(event,'set_minute')">set_minute</a>('0');
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">        // Next valid time should be 1am of the next day.</span>
<a name="l66"><span class="linenum">  66</span></a>          <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a> = <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('get_next_scheduled_time')" href="../../_functions/get_next_scheduled_time.html" onMouseOver="funcPopup(event,'get_next_scheduled_time')">get_next_scheduled_time</a>();
<a name="l67"><span class="linenum">  67</span></a>  
<a name="l68"><span class="linenum">  68</span></a>          <a class="var it33583" onMouseOver="hilite(33583)" onMouseOut="lolite()" onClick="logVariable('oneamdate')" href="../../_variables/oneamdate.html">$oneamdate</a> = new DateTime('now', new DateTimeZone('Europe/London'));
<a name="l69"><span class="linenum">  69</span></a>          <a class="var it33583" onMouseOver="hilite(33583)" onMouseOut="lolite()" onClick="logVariable('oneamdate')" href="../../_variables/oneamdate.html">$oneamdate</a>-&gt;<a class="function" onClick="logFunction('setTime')" href="../../_functions/settime.html" onMouseOver="funcPopup(event,'settime')">setTime</a>(1, 0, 0);
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">        // Make it 1 am tomorrow if the time is after 1am.</span>
<a name="l71"><span class="linenum">  71</span></a>          if (<a class="var it33583" onMouseOver="hilite(33583)" onMouseOut="lolite()" onClick="logVariable('oneamdate')" href="../../_variables/oneamdate.html">$oneamdate</a>-&gt;<a class="function" onClick="logFunction('getTimestamp')" href="../../_functions/gettimestamp.html" onMouseOver="funcPopup(event,'gettimestamp')">getTimestamp</a>() &lt; <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>()) {
<a name="l72"><span class="linenum">  72</span></a>              <a class="var it33583" onMouseOver="hilite(33583)" onMouseOut="lolite()" onClick="logVariable('oneamdate')" href="../../_variables/oneamdate.html">$oneamdate</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(new DateInterval('P1D'));
<a name="l73"><span class="linenum">  73</span></a>          }
<a name="l74"><span class="linenum">  74</span></a>          <a class="var it33584" onMouseOver="hilite(33584)" onMouseOut="lolite()" onClick="logVariable('oneam')" href="../../_variables/oneam.html">$oneam</a> = <a class="var it33583" onMouseOver="hilite(33583)" onMouseOut="lolite()" onClick="logVariable('oneamdate')" href="../../_variables/oneamdate.html">$oneamdate</a>-&gt;<a class="function" onClick="logFunction('getTimestamp')" href="../../_functions/gettimestamp.html" onMouseOver="funcPopup(event,'gettimestamp')">getTimestamp</a>();
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it33584" onMouseOver="hilite(33584)" onMouseOut="lolite()" onClick="logVariable('oneam')" href="../../_variables/oneam.html">$oneam</a>, <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a>, 'Next scheduled time is 1am.');
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">        // Disabled flag does not affect next time.</span>
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_disabled')" href="../../_functions/set_disabled.html" onMouseOver="funcPopup(event,'set_disabled')">set_disabled</a>(true);
<a name="l80"><span class="linenum">  80</span></a>          <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a> = <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('get_next_scheduled_time')" href="../../_functions/get_next_scheduled_time.html" onMouseOver="funcPopup(event,'get_next_scheduled_time')">get_next_scheduled_time</a>();
<a name="l81"><span class="linenum">  81</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it33584" onMouseOver="hilite(33584)" onMouseOut="lolite()" onClick="logVariable('oneam')" href="../../_variables/oneam.html">$oneam</a>, <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a>, 'Next scheduled time is 1am.');
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">        // Now test for job run every 10 minutes.</span>
<a name="l84"><span class="linenum">  84</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a> = new \core\task\scheduled_test_task();
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">        // All fields default to '*'.</span>
<a name="l87"><span class="linenum">  87</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_minute')" href="../../_functions/set_minute.html" onMouseOver="funcPopup(event,'set_minute')">set_minute</a>('*/10');
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">        // Next valid time should be next 10 minute boundary.</span>
<a name="l89"><span class="linenum">  89</span></a>          <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a> = <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('get_next_scheduled_time')" href="../../_functions/get_next_scheduled_time.html" onMouseOver="funcPopup(event,'get_next_scheduled_time')">get_next_scheduled_time</a>();
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>          <a class="var it20556" onMouseOver="hilite(20556)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a> = ((<a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('i') / 10))+1) * 10;
<a name="l92"><span class="linenum">  92</span></a>          <a class="var it33585" onMouseOver="hilite(33585)" onMouseOut="lolite()" onClick="logVariable('nexttenminutes')" href="../../_variables/nexttenminutes.html">$nexttenminutes</a> = <a class="phpfunction" onClick="logFunction('mktime')" href="../../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a>(<a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('H'), <a class="var it20556" onMouseOver="hilite(20556)" onMouseOut="lolite()" onClick="logVariable('minutes')" href="../../_variables/minutes.html">$minutes</a>, 0);
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it33585" onMouseOver="hilite(33585)" onMouseOut="lolite()" onClick="logVariable('nexttenminutes')" href="../../_variables/nexttenminutes.html">$nexttenminutes</a>, <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a>, 'Next scheduled time is in 10 minutes.');
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">        // Disabled flag does not affect next time.</span>
<a name="l97"><span class="linenum">  97</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_disabled')" href="../../_functions/set_disabled.html" onMouseOver="funcPopup(event,'set_disabled')">set_disabled</a>(true);
<a name="l98"><span class="linenum">  98</span></a>          <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a> = <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('get_next_scheduled_time')" href="../../_functions/get_next_scheduled_time.html" onMouseOver="funcPopup(event,'get_next_scheduled_time')">get_next_scheduled_time</a>();
<a name="l99"><span class="linenum">  99</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it33585" onMouseOver="hilite(33585)" onMouseOut="lolite()" onClick="logVariable('nexttenminutes')" href="../../_variables/nexttenminutes.html">$nexttenminutes</a>, <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a>, 'Next scheduled time is in 10 minutes.');
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">        // Test hourly job executed on Sundays only.</span>
<a name="l102"><span class="linenum"> 102</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a> = new \core\task\scheduled_test_task();
<a name="l103"><span class="linenum"> 103</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_minute')" href="../../_functions/set_minute.html" onMouseOver="funcPopup(event,'set_minute')">set_minute</a>('0');
<a name="l104"><span class="linenum"> 104</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_day_of_week')" href="../../_functions/set_day_of_week.html" onMouseOver="funcPopup(event,'set_day_of_week')">set_day_of_week</a>('7');
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>          <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a> = <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('get_next_scheduled_time')" href="../../_functions/get_next_scheduled_time.html" onMouseOver="funcPopup(event,'get_next_scheduled_time')">get_next_scheduled_time</a>();
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(7, <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('N', <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a>));
<a name="l109"><span class="linenum"> 109</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(0, <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('i', <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a>));
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">        // Test monthly job</span>
<a name="l112"><span class="linenum"> 112</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a> = new \core\task\scheduled_test_task();
<a name="l113"><span class="linenum"> 113</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_minute')" href="../../_functions/set_minute.html" onMouseOver="funcPopup(event,'set_minute')">set_minute</a>('32');
<a name="l114"><span class="linenum"> 114</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_hour')" href="../../_functions/set_hour.html" onMouseOver="funcPopup(event,'set_hour')">set_hour</a>('0');
<a name="l115"><span class="linenum"> 115</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_day')" href="../../_functions/set_day.html" onMouseOver="funcPopup(event,'set_day')">set_day</a>('1');
<a name="l116"><span class="linenum"> 116</span></a>  
<a name="l117"><span class="linenum"> 117</span></a>          <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a> = <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('get_next_scheduled_time')" href="../../_functions/get_next_scheduled_time.html" onMouseOver="funcPopup(event,'get_next_scheduled_time')">get_next_scheduled_time</a>();
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(32, <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('i', <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a>));
<a name="l120"><span class="linenum"> 120</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(0, <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('G', <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a>));
<a name="l121"><span class="linenum"> 121</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(1, <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('j', <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a>));
<a name="l122"><span class="linenum"> 122</span></a>      }
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>      public function <a class="function" onClick="logFunction('test_timezones')" href="../../_functions/test_timezones.html" onMouseOver="funcPopup(event,'test_timezones')">test_timezones</a>() {
<a name="l125"><span class="linenum"> 125</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l126"><span class="linenum"> 126</span></a>  
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">        // The timezones used in this test are chosen because they do not use DST - that would break the test.</span>
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>();
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setTimezone')" href="../../_functions/settimezone.html" onMouseOver="funcPopup(event,'settimezone')">setTimezone</a>('Asia/Kabul');
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a> = new \core\task\scheduled_test_task();
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">        // Scheduled tasks should always use servertime - so this is 03:30 GMT.</span>
<a name="l135"><span class="linenum"> 135</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_hour')" href="../../_functions/set_hour.html" onMouseOver="funcPopup(event,'set_hour')">set_hour</a>('1');
<a name="l136"><span class="linenum"> 136</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_minute')" href="../../_functions/set_minute.html" onMouseOver="funcPopup(event,'set_minute')">set_minute</a>('0');
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">        // Next valid time should be 1am of the next day.</span>
<a name="l139"><span class="linenum"> 139</span></a>          <a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a> = <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('get_next_scheduled_time')" href="../../_functions/get_next_scheduled_time.html" onMouseOver="funcPopup(event,'get_next_scheduled_time')">get_next_scheduled_time</a>();
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">        // GMT+05:45.</span>
<a name="l142"><span class="linenum"> 142</span></a>          <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('timezone')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/timezone.html">timezone</a> = 'Asia/Kathmandu';
<a name="l143"><span class="linenum"> 143</span></a>          <a class="var it13808" onMouseOver="hilite(13808)" onMouseOut="lolite()" onClick="logVariable('userdate')" href="../../_variables/userdate.html">$userdate</a> = <a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it5787" onMouseOver="hilite(5787)" onMouseOut="lolite()" onClick="logVariable('nexttime')" href="../../_variables/nexttime.html">$nexttime</a>);
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">        // Should be displayed in user timezone.</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">        // I used http://www.timeanddate.com/worldclock/fixedtime.html?msg=Moodle+Test&amp;iso=20160502T01&amp;p1=113</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">        // setting my location to Kathmandu to verify this time.</span>
<a name="l148"><span class="linenum"> 148</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertContains('2:15 AM', <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it13808" onMouseOver="hilite(13808)" onMouseOut="lolite()" onClick="logVariable('userdate')" href="../../_variables/userdate.html">$userdate</a>));
<a name="l149"><span class="linenum"> 149</span></a>      }
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>      public function <a class="function" onClick="logFunction('test_reset_scheduled_tasks_for_component')" href="../../_functions/test_reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'test_reset_scheduled_tasks_for_component')">test_reset_scheduled_tasks_for_component</a>() {
<a name="l152"><span class="linenum"> 152</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">        // Remember the defaults.</span>
<a name="l156"><span class="linenum"> 156</span></a>          <a class="var it33586" onMouseOver="hilite(33586)" onMouseOut="lolite()" onClick="logVariable('defaulttasks')" href="../../_variables/defaulttasks.html">$defaulttasks</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('load_scheduled_tasks_for_component')" href="../../_functions/load_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'load_scheduled_tasks_for_component')">load_scheduled_tasks_for_component</a>('moodle');
<a name="l157"><span class="linenum"> 157</span></a>          <a class="var it33587" onMouseOver="hilite(33587)" onMouseOut="lolite()" onClick="logVariable('initcount')" href="../../_variables/initcount.html">$initcount</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it33586" onMouseOver="hilite(33586)" onMouseOut="lolite()" onClick="logVariable('defaulttasks')" href="../../_variables/defaulttasks.html">$defaulttasks</a>);
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">        // Customise a task.</span>
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it33588" onMouseOver="hilite(33588)" onMouseOut="lolite()" onClick="logVariable('firsttask')" href="../../_variables/firsttask.html">$firsttask</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it33586" onMouseOver="hilite(33586)" onMouseOut="lolite()" onClick="logVariable('defaulttasks')" href="../../_variables/defaulttasks.html">$defaulttasks</a>);
<a name="l160"><span class="linenum"> 160</span></a>          <a class="var it33588" onMouseOver="hilite(33588)" onMouseOut="lolite()" onClick="logVariable('firsttask')" href="../../_variables/firsttask.html">$firsttask</a>-&gt;<a class="function" onClick="logFunction('set_minute')" href="../../_functions/set_minute.html" onMouseOver="funcPopup(event,'set_minute')">set_minute</a>('1');
<a name="l161"><span class="linenum"> 161</span></a>          <a class="var it33588" onMouseOver="hilite(33588)" onMouseOut="lolite()" onClick="logVariable('firsttask')" href="../../_variables/firsttask.html">$firsttask</a>-&gt;<a class="function" onClick="logFunction('set_hour')" href="../../_functions/set_hour.html" onMouseOver="funcPopup(event,'set_hour')">set_hour</a>('2');
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it33588" onMouseOver="hilite(33588)" onMouseOut="lolite()" onClick="logVariable('firsttask')" href="../../_variables/firsttask.html">$firsttask</a>-&gt;<a class="function" onClick="logFunction('set_month')" href="../../_functions/set_month.html" onMouseOver="funcPopup(event,'set_month')">set_month</a>('3');
<a name="l163"><span class="linenum"> 163</span></a>          <a class="var it33588" onMouseOver="hilite(33588)" onMouseOut="lolite()" onClick="logVariable('firsttask')" href="../../_variables/firsttask.html">$firsttask</a>-&gt;<a class="function" onClick="logFunction('set_day_of_week')" href="../../_functions/set_day_of_week.html" onMouseOver="funcPopup(event,'set_day_of_week')">set_day_of_week</a>('4');
<a name="l164"><span class="linenum"> 164</span></a>          <a class="var it33588" onMouseOver="hilite(33588)" onMouseOut="lolite()" onClick="logVariable('firsttask')" href="../../_variables/firsttask.html">$firsttask</a>-&gt;<a class="function" onClick="logFunction('set_day')" href="../../_functions/set_day.html" onMouseOver="funcPopup(event,'set_day')">set_day</a>('5');
<a name="l165"><span class="linenum"> 165</span></a>          <a class="var it33588" onMouseOver="hilite(33588)" onMouseOut="lolite()" onClick="logVariable('firsttask')" href="../../_variables/firsttask.html">$firsttask</a>-&gt;<a class="function" onClick="logFunction('set_customised')" href="../../_functions/set_customised.html" onMouseOver="funcPopup(event,'set_customised')">set_customised</a>('1');
<a name="l166"><span class="linenum"> 166</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('configure_scheduled_task')" href="../../_functions/configure_scheduled_task.html" onMouseOver="funcPopup(event,'configure_scheduled_task')">configure_scheduled_task</a>(<a class="var it33588" onMouseOver="hilite(33588)" onMouseOut="lolite()" onClick="logVariable('firsttask')" href="../../_variables/firsttask.html">$firsttask</a>);
<a name="l167"><span class="linenum"> 167</span></a>          <a class="var it33589" onMouseOver="hilite(33589)" onMouseOut="lolite()" onClick="logVariable('firsttaskrecord')" href="../../_variables/firsttaskrecord.html">$firsttaskrecord</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('record_from_scheduled_task')" href="../../_functions/record_from_scheduled_task.html" onMouseOver="funcPopup(event,'record_from_scheduled_task')">record_from_scheduled_task</a>(<a class="var it33588" onMouseOver="hilite(33588)" onMouseOut="lolite()" onClick="logVariable('firsttask')" href="../../_variables/firsttask.html">$firsttask</a>);
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">        // We reset this field, because we do not want to compare it.</span>
<a name="l169"><span class="linenum"> 169</span></a>          <a class="var it33589" onMouseOver="hilite(33589)" onMouseOut="lolite()" onClick="logVariable('firsttaskrecord')" href="../../_variables/firsttaskrecord.html">$firsttaskrecord</a>-&gt;<a onClick="logVariable('nextruntime')" class="var it44508" onMouseOver="hilite(44508)" onMouseOut="lolite()" href="../../_variables/nextruntime.html">nextruntime</a> = '0';
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">        // Delete a task to simulate the fact that its new.</span>
<a name="l172"><span class="linenum"> 172</span></a>          <a class="var it33590" onMouseOver="hilite(33590)" onMouseOut="lolite()" onClick="logVariable('secondtask')" href="../../_variables/secondtask.html">$secondtask</a> = <a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it33586" onMouseOver="hilite(33586)" onMouseOut="lolite()" onClick="logVariable('defaulttasks')" href="../../_variables/defaulttasks.html">$defaulttasks</a>);
<a name="l173"><span class="linenum"> 173</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('task_scheduled', array('classname' =&gt; '\\' . <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('get_class')" href="../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it33590" onMouseOver="hilite(33590)" onMouseOut="lolite()" onClick="logVariable('secondtask')" href="../../_variables/secondtask.html">$secondtask</a>), '\\')));
<a name="l174"><span class="linenum"> 174</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(\core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_scheduled_task')" href="../../_functions/get_scheduled_task.html" onMouseOver="funcPopup(event,'get_scheduled_task')">get_scheduled_task</a>(<a class="phpfunction" onClick="logFunction('get_class')" href="../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it33590" onMouseOver="hilite(33590)" onMouseOut="lolite()" onClick="logVariable('secondtask')" href="../../_variables/secondtask.html">$secondtask</a>)));
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">        // Edit a task to simulate a change in its definition (as if it was not customised).</span>
<a name="l177"><span class="linenum"> 177</span></a>          <a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a> = <a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>(<a class="var it33586" onMouseOver="hilite(33586)" onMouseOut="lolite()" onClick="logVariable('defaulttasks')" href="../../_variables/defaulttasks.html">$defaulttasks</a>);
<a name="l178"><span class="linenum"> 178</span></a>          <a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a>-&gt;<a class="function" onClick="logFunction('set_minute')" href="../../_functions/set_minute.html" onMouseOver="funcPopup(event,'set_minute')">set_minute</a>('1');
<a name="l179"><span class="linenum"> 179</span></a>          <a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a>-&gt;<a class="function" onClick="logFunction('set_hour')" href="../../_functions/set_hour.html" onMouseOver="funcPopup(event,'set_hour')">set_hour</a>('2');
<a name="l180"><span class="linenum"> 180</span></a>          <a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a>-&gt;<a class="function" onClick="logFunction('set_month')" href="../../_functions/set_month.html" onMouseOver="funcPopup(event,'set_month')">set_month</a>('3');
<a name="l181"><span class="linenum"> 181</span></a>          <a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a>-&gt;<a class="function" onClick="logFunction('set_day_of_week')" href="../../_functions/set_day_of_week.html" onMouseOver="funcPopup(event,'set_day_of_week')">set_day_of_week</a>('4');
<a name="l182"><span class="linenum"> 182</span></a>          <a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a>-&gt;<a class="function" onClick="logFunction('set_day')" href="../../_functions/set_day.html" onMouseOver="funcPopup(event,'set_day')">set_day</a>('5');
<a name="l183"><span class="linenum"> 183</span></a>          <a class="var it33592" onMouseOver="hilite(33592)" onMouseOut="lolite()" onClick="logVariable('thirdtaskbefore')" href="../../_variables/thirdtaskbefore.html">$thirdtaskbefore</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_scheduled_task')" href="../../_functions/get_scheduled_task.html" onMouseOver="funcPopup(event,'get_scheduled_task')">get_scheduled_task</a>(<a class="phpfunction" onClick="logFunction('get_class')" href="../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a>));
<a name="l184"><span class="linenum"> 184</span></a>          <a class="var it33592" onMouseOver="hilite(33592)" onMouseOut="lolite()" onClick="logVariable('thirdtaskbefore')" href="../../_variables/thirdtaskbefore.html">$thirdtaskbefore</a>-&gt;<a class="function" onClick="logFunction('set_next_run_time')" href="../../_functions/set_next_run_time.html" onMouseOver="funcPopup(event,'set_next_run_time')">set_next_run_time</a>(null);      <span class="comment">// Ignore this value when comparing.</span>
<a name="l185"><span class="linenum"> 185</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('configure_scheduled_task')" href="../../_functions/configure_scheduled_task.html" onMouseOver="funcPopup(event,'configure_scheduled_task')">configure_scheduled_task</a>(<a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a>);
<a name="l186"><span class="linenum"> 186</span></a>          <a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_scheduled_task')" href="../../_functions/get_scheduled_task.html" onMouseOver="funcPopup(event,'get_scheduled_task')">get_scheduled_task</a>(<a class="phpfunction" onClick="logFunction('get_class')" href="../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a>));
<a name="l187"><span class="linenum"> 187</span></a>          <a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a>-&gt;<a class="function" onClick="logFunction('set_next_run_time')" href="../../_functions/set_next_run_time.html" onMouseOver="funcPopup(event,'set_next_run_time')">set_next_run_time</a>(null);            <span class="comment">// Ignore this value when comparing.</span>
<a name="l188"><span class="linenum"> 188</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertNotEquals(<a class="var it33592" onMouseOver="hilite(33592)" onMouseOut="lolite()" onClick="logVariable('thirdtaskbefore')" href="../../_variables/thirdtaskbefore.html">$thirdtaskbefore</a>, <a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a>);
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">        // Now call reset on all the tasks.</span>
<a name="l191"><span class="linenum"> 191</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>('moodle');
<a name="l192"><span class="linenum"> 192</span></a>  
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">        // Load the tasks again.</span>
<a name="l194"><span class="linenum"> 194</span></a>          <a class="var it33586" onMouseOver="hilite(33586)" onMouseOut="lolite()" onClick="logVariable('defaulttasks')" href="../../_variables/defaulttasks.html">$defaulttasks</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('load_scheduled_tasks_for_component')" href="../../_functions/load_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'load_scheduled_tasks_for_component')">load_scheduled_tasks_for_component</a>('moodle');
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it33593" onMouseOver="hilite(33593)" onMouseOut="lolite()" onClick="logVariable('finalcount')" href="../../_variables/finalcount.html">$finalcount</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it33586" onMouseOver="hilite(33586)" onMouseOut="lolite()" onClick="logVariable('defaulttasks')" href="../../_variables/defaulttasks.html">$defaulttasks</a>);
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">        // Compare the first task.</span>
<a name="l197"><span class="linenum"> 197</span></a>          <a class="var it33594" onMouseOver="hilite(33594)" onMouseOut="lolite()" onClick="logVariable('newfirsttask')" href="../../_variables/newfirsttask.html">$newfirsttask</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it33586" onMouseOver="hilite(33586)" onMouseOut="lolite()" onClick="logVariable('defaulttasks')" href="../../_variables/defaulttasks.html">$defaulttasks</a>);
<a name="l198"><span class="linenum"> 198</span></a>          <a class="var it33595" onMouseOver="hilite(33595)" onMouseOut="lolite()" onClick="logVariable('newfirsttaskrecord')" href="../../_variables/newfirsttaskrecord.html">$newfirsttaskrecord</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('record_from_scheduled_task')" href="../../_functions/record_from_scheduled_task.html" onMouseOver="funcPopup(event,'record_from_scheduled_task')">record_from_scheduled_task</a>(<a class="var it33594" onMouseOver="hilite(33594)" onMouseOut="lolite()" onClick="logVariable('newfirsttask')" href="../../_variables/newfirsttask.html">$newfirsttask</a>);
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">        // We reset this field, because we do not want to compare it.</span>
<a name="l200"><span class="linenum"> 200</span></a>          <a class="var it33595" onMouseOver="hilite(33595)" onMouseOut="lolite()" onClick="logVariable('newfirsttaskrecord')" href="../../_variables/newfirsttaskrecord.html">$newfirsttaskrecord</a>-&gt;<a onClick="logVariable('nextruntime')" class="var it44509" onMouseOver="hilite(44509)" onMouseOut="lolite()" href="../../_variables/nextruntime.html">nextruntime</a> = '0';
<a name="l201"><span class="linenum"> 201</span></a>  
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">        // Assert a customised task was not altered by reset.</span>
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it33589" onMouseOver="hilite(33589)" onMouseOut="lolite()" onClick="logVariable('firsttaskrecord')" href="../../_variables/firsttaskrecord.html">$firsttaskrecord</a>, <a class="var it33595" onMouseOver="hilite(33595)" onMouseOut="lolite()" onClick="logVariable('newfirsttaskrecord')" href="../../_variables/newfirsttaskrecord.html">$newfirsttaskrecord</a>);
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">        // Assert that the second task was added back.</span>
<a name="l206"><span class="linenum"> 206</span></a>          <a class="var it33596" onMouseOver="hilite(33596)" onMouseOut="lolite()" onClick="logVariable('secondtaskafter')" href="../../_variables/secondtaskafter.html">$secondtaskafter</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_scheduled_task')" href="../../_functions/get_scheduled_task.html" onMouseOver="funcPopup(event,'get_scheduled_task')">get_scheduled_task</a>(<a class="phpfunction" onClick="logFunction('get_class')" href="../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it33590" onMouseOver="hilite(33590)" onMouseOut="lolite()" onClick="logVariable('secondtask')" href="../../_variables/secondtask.html">$secondtask</a>));
<a name="l207"><span class="linenum"> 207</span></a>          <a class="var it33596" onMouseOver="hilite(33596)" onMouseOut="lolite()" onClick="logVariable('secondtaskafter')" href="../../_variables/secondtaskafter.html">$secondtaskafter</a>-&gt;<a class="function" onClick="logFunction('set_next_run_time')" href="../../_functions/set_next_run_time.html" onMouseOver="funcPopup(event,'set_next_run_time')">set_next_run_time</a>(null);   <span class="comment">// Do not compare the nextruntime.</span>
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it33590" onMouseOver="hilite(33590)" onMouseOut="lolite()" onClick="logVariable('secondtask')" href="../../_variables/secondtask.html">$secondtask</a>-&gt;<a class="function" onClick="logFunction('set_next_run_time')" href="../../_functions/set_next_run_time.html" onMouseOver="funcPopup(event,'set_next_run_time')">set_next_run_time</a>(null);
<a name="l209"><span class="linenum"> 209</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it33590" onMouseOver="hilite(33590)" onMouseOut="lolite()" onClick="logVariable('secondtask')" href="../../_variables/secondtask.html">$secondtask</a>, <a class="var it33596" onMouseOver="hilite(33596)" onMouseOut="lolite()" onClick="logVariable('secondtaskafter')" href="../../_variables/secondtaskafter.html">$secondtaskafter</a>);
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">        // Assert that the third task edits were overridden.</span>
<a name="l212"><span class="linenum"> 212</span></a>          <a class="var it33597" onMouseOver="hilite(33597)" onMouseOut="lolite()" onClick="logVariable('thirdtaskafter')" href="../../_variables/thirdtaskafter.html">$thirdtaskafter</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_scheduled_task')" href="../../_functions/get_scheduled_task.html" onMouseOver="funcPopup(event,'get_scheduled_task')">get_scheduled_task</a>(<a class="phpfunction" onClick="logFunction('get_class')" href="../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it33591" onMouseOver="hilite(33591)" onMouseOut="lolite()" onClick="logVariable('thirdtask')" href="../../_variables/thirdtask.html">$thirdtask</a>));
<a name="l213"><span class="linenum"> 213</span></a>          <a class="var it33597" onMouseOver="hilite(33597)" onMouseOut="lolite()" onClick="logVariable('thirdtaskafter')" href="../../_variables/thirdtaskafter.html">$thirdtaskafter</a>-&gt;<a class="function" onClick="logFunction('set_next_run_time')" href="../../_functions/set_next_run_time.html" onMouseOver="funcPopup(event,'set_next_run_time')">set_next_run_time</a>(null);
<a name="l214"><span class="linenum"> 214</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it33592" onMouseOver="hilite(33592)" onMouseOut="lolite()" onClick="logVariable('thirdtaskbefore')" href="../../_variables/thirdtaskbefore.html">$thirdtaskbefore</a>, <a class="var it33597" onMouseOver="hilite(33597)" onMouseOut="lolite()" onClick="logVariable('thirdtaskafter')" href="../../_variables/thirdtaskafter.html">$thirdtaskafter</a>);
<a name="l215"><span class="linenum"> 215</span></a>  
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">        // Assert we have the same number of tasks.</span>
<a name="l217"><span class="linenum"> 217</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it33587" onMouseOver="hilite(33587)" onMouseOut="lolite()" onClick="logVariable('initcount')" href="../../_variables/initcount.html">$initcount</a>, <a class="var it33593" onMouseOver="hilite(33593)" onMouseOut="lolite()" onClick="logVariable('finalcount')" href="../../_variables/finalcount.html">$finalcount</a>);
<a name="l218"><span class="linenum"> 218</span></a>      }
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>      <span class="comment">/**</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">     * Tests that the reset function deletes old tasks.</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">     */</span>
<a name="l223"><span class="linenum"> 223</span></a>      public function <a class="function" onClick="logFunction('test_reset_scheduled_tasks_for_component_delete')" href="../../_functions/test_reset_scheduled_tasks_for_component_delete.html" onMouseOver="funcPopup(event,'test_reset_scheduled_tasks_for_component_delete')">test_reset_scheduled_tasks_for_component_delete</a>() {
<a name="l224"><span class="linenum"> 224</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l225"><span class="linenum"> 225</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('task_scheduled', array('component' =&gt; 'moodle'));
<a name="l228"><span class="linenum"> 228</span></a>          <a class="var it33598" onMouseOver="hilite(33598)" onMouseOut="lolite()" onClick="logVariable('allcount')" href="../../_variables/allcount.html">$allcount</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('task_scheduled');
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a> = new \core\task\scheduled_test_task();
<a name="l231"><span class="linenum"> 231</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('set_component')" href="../../_functions/set_component.html" onMouseOver="funcPopup(event,'set_component')">set_component</a>('moodle');
<a name="l232"><span class="linenum"> 232</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('record_from_scheduled_task')" href="../../_functions/record_from_scheduled_task.html" onMouseOver="funcPopup(event,'record_from_scheduled_task')">record_from_scheduled_task</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l233"><span class="linenum"> 233</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('task_scheduled', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l234"><span class="linenum"> 234</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('task_scheduled', array('classname' =&gt; '\core\task\scheduled_test_task',
<a name="l235"><span class="linenum"> 235</span></a>              'component' =&gt; 'moodle')));
<a name="l236"><span class="linenum"> 236</span></a>  
<a name="l237"><span class="linenum"> 237</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a> = new \core\task\scheduled_test2_task();
<a name="l238"><span class="linenum"> 238</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('set_component')" href="../../_functions/set_component.html" onMouseOver="funcPopup(event,'set_component')">set_component</a>('moodle');
<a name="l239"><span class="linenum"> 239</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('record_from_scheduled_task')" href="../../_functions/record_from_scheduled_task.html" onMouseOver="funcPopup(event,'record_from_scheduled_task')">record_from_scheduled_task</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l240"><span class="linenum"> 240</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('task_scheduled', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l241"><span class="linenum"> 241</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertTrue(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('task_scheduled', array('classname' =&gt; '\core\task\scheduled_test2_task',
<a name="l242"><span class="linenum"> 242</span></a>              'component' =&gt; 'moodle')));
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>          <a class="var it5775" onMouseOver="hilite(5775)" onMouseOut="lolite()" onClick="logVariable('aftercount')" href="../../_variables/aftercount.html">$aftercount</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('task_scheduled', array('component' =&gt; 'moodle'));
<a name="l245"><span class="linenum"> 245</span></a>          <a class="var it33599" onMouseOver="hilite(33599)" onMouseOut="lolite()" onClick="logVariable('afterallcount')" href="../../_variables/afterallcount.html">$afterallcount</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('task_scheduled');
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> + 2, <a class="var it5775" onMouseOver="hilite(5775)" onMouseOut="lolite()" onClick="logVariable('aftercount')" href="../../_variables/aftercount.html">$aftercount</a>);
<a name="l248"><span class="linenum"> 248</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it33598" onMouseOver="hilite(33598)" onMouseOut="lolite()" onClick="logVariable('allcount')" href="../../_variables/allcount.html">$allcount</a> + 2, <a class="var it33599" onMouseOver="hilite(33599)" onMouseOut="lolite()" onClick="logVariable('afterallcount')" href="../../_variables/afterallcount.html">$afterallcount</a>);
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">        // Now check that the right things were deleted.</span>
<a name="l251"><span class="linenum"> 251</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('reset_scheduled_tasks_for_component')" href="../../_functions/reset_scheduled_tasks_for_component.html" onMouseOver="funcPopup(event,'reset_scheduled_tasks_for_component')">reset_scheduled_tasks_for_component</a>('moodle');
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('task_scheduled', array('component' =&gt; 'moodle')));
<a name="l254"><span class="linenum"> 254</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(<a class="var it33598" onMouseOver="hilite(33598)" onMouseOut="lolite()" onClick="logVariable('allcount')" href="../../_variables/allcount.html">$allcount</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('task_scheduled'));
<a name="l255"><span class="linenum"> 255</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('task_scheduled', array('classname' =&gt; '\core\task\scheduled_test2_task',
<a name="l256"><span class="linenum"> 256</span></a>              'component' =&gt; 'moodle')));
<a name="l257"><span class="linenum"> 257</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertFalse(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('task_scheduled', array('classname' =&gt; '\core\task\scheduled_test_task',
<a name="l258"><span class="linenum"> 258</span></a>              'component' =&gt; 'moodle')));
<a name="l259"><span class="linenum"> 259</span></a>      }
<a name="l260"><span class="linenum"> 260</span></a>  
<a name="l261"><span class="linenum"> 261</span></a>      public function <a class="function" onClick="logFunction('test_get_next_scheduled_task')" href="../../_functions/test_get_next_scheduled_task.html" onMouseOver="funcPopup(event,'test_get_next_scheduled_task')">test_get_next_scheduled_task</a>() {
<a name="l262"><span class="linenum"> 262</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">        // Delete all existing scheduled tasks.</span>
<a name="l266"><span class="linenum"> 266</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('task_scheduled');
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">        // Add a scheduled task.</span>
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">        // A task that runs once per hour.</span>
<a name="l270"><span class="linenum"> 270</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = new stdClass();
<a name="l271"><span class="linenum"> 271</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('blocking')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/blocking.html">blocking</a> = true;
<a name="l272"><span class="linenum"> 272</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('minute')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/minute.html">minute</a> = '0';
<a name="l273"><span class="linenum"> 273</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('hour')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/hour.html">hour</a> = '0';
<a name="l274"><span class="linenum"> 274</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('dayofweek')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/dayofweek.html">dayofweek</a> = '*';
<a name="l275"><span class="linenum"> 275</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('day')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/day.html">day</a> = '*';
<a name="l276"><span class="linenum"> 276</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('month')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/month.html">month</a> = '*';
<a name="l277"><span class="linenum"> 277</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('component')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = 'test_scheduled_task';
<a name="l278"><span class="linenum"> 278</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('classname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/classname.html">classname</a> = '\core\task\scheduled_test_task';
<a name="l279"><span class="linenum"> 279</span></a>  
<a name="l280"><span class="linenum"> 280</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('task_scheduled', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">        // And another one to test failures.</span>
<a name="l282"><span class="linenum"> 282</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('classname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/classname.html">classname</a> = '\core\task\scheduled_test2_task';
<a name="l283"><span class="linenum"> 283</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('task_scheduled', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">        // And disabled test.</span>
<a name="l285"><span class="linenum"> 285</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('classname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/classname.html">classname</a> = '\core\task\scheduled_test3_task';
<a name="l286"><span class="linenum"> 286</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('disabled')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/disabled.html">disabled</a> = 1;
<a name="l287"><span class="linenum"> 287</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('task_scheduled', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>          <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">        // Should get handed the first task.</span>
<a name="l292"><span class="linenum"> 292</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_next_scheduled_task')" href="../../_functions/get_next_scheduled_task.html" onMouseOver="funcPopup(event,'get_next_scheduled_task')">get_next_scheduled_task</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a>);
<a name="l293"><span class="linenum"> 293</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertInstanceOf('\core\task\scheduled_test_task', <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l294"><span class="linenum"> 294</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>();
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('scheduled_task_complete')" href="../../_functions/scheduled_task_complete.html" onMouseOver="funcPopup(event,'scheduled_task_complete')">scheduled_task_complete</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">        // Should get handed the second task.</span>
<a name="l298"><span class="linenum"> 298</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_next_scheduled_task')" href="../../_functions/get_next_scheduled_task.html" onMouseOver="funcPopup(event,'get_next_scheduled_task')">get_next_scheduled_task</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a>);
<a name="l299"><span class="linenum"> 299</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertInstanceOf('\core\task\scheduled_test2_task', <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l300"><span class="linenum"> 300</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>();
<a name="l301"><span class="linenum"> 301</span></a>  
<a name="l302"><span class="linenum"> 302</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('scheduled_task_failed')" href="../../_functions/scheduled_task_failed.html" onMouseOver="funcPopup(event,'scheduled_task_failed')">scheduled_task_failed</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">        // Should not get any task.</span>
<a name="l304"><span class="linenum"> 304</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_next_scheduled_task')" href="../../_functions/get_next_scheduled_task.html" onMouseOver="funcPopup(event,'get_next_scheduled_task')">get_next_scheduled_task</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a>);
<a name="l305"><span class="linenum"> 305</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertNull(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">        // Should get the second task (retry after delay).</span>
<a name="l308"><span class="linenum"> 308</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_next_scheduled_task')" href="../../_functions/get_next_scheduled_task.html" onMouseOver="funcPopup(event,'get_next_scheduled_task')">get_next_scheduled_task</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a> + 120);
<a name="l309"><span class="linenum"> 309</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertInstanceOf('\core\task\scheduled_test2_task', <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l310"><span class="linenum"> 310</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>();
<a name="l311"><span class="linenum"> 311</span></a>  
<a name="l312"><span class="linenum"> 312</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('scheduled_task_complete')" href="../../_functions/scheduled_task_complete.html" onMouseOver="funcPopup(event,'scheduled_task_complete')">scheduled_task_complete</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l313"><span class="linenum"> 313</span></a>  
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">        // Should not get any task.</span>
<a name="l315"><span class="linenum"> 315</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_next_scheduled_task')" href="../../_functions/get_next_scheduled_task.html" onMouseOver="funcPopup(event,'get_next_scheduled_task')">get_next_scheduled_task</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a>);
<a name="l316"><span class="linenum"> 316</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertNull(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l317"><span class="linenum"> 317</span></a>  
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">        // Check ordering.</span>
<a name="l319"><span class="linenum"> 319</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('task_scheduled');
<a name="l320"><span class="linenum"> 320</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('lastruntime')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/lastruntime.html">lastruntime</a> = 2;
<a name="l321"><span class="linenum"> 321</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('disabled')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/disabled.html">disabled</a> = 0;
<a name="l322"><span class="linenum"> 322</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('classname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/classname.html">classname</a> = '\core\task\scheduled_test_task';
<a name="l323"><span class="linenum"> 323</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('task_scheduled', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l324"><span class="linenum"> 324</span></a>  
<a name="l325"><span class="linenum"> 325</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('lastruntime')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/lastruntime.html">lastruntime</a> = 1;
<a name="l326"><span class="linenum"> 326</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('classname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/classname.html">classname</a> = '\core\task\scheduled_test2_task';
<a name="l327"><span class="linenum"> 327</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('task_scheduled', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l328"><span class="linenum"> 328</span></a>  
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">        // Should get handed the second task.</span>
<a name="l330"><span class="linenum"> 330</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_next_scheduled_task')" href="../../_functions/get_next_scheduled_task.html" onMouseOver="funcPopup(event,'get_next_scheduled_task')">get_next_scheduled_task</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a>);
<a name="l331"><span class="linenum"> 331</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertInstanceOf('\core\task\scheduled_test2_task', <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l332"><span class="linenum"> 332</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>();
<a name="l333"><span class="linenum"> 333</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('scheduled_task_complete')" href="../../_functions/scheduled_task_complete.html" onMouseOver="funcPopup(event,'scheduled_task_complete')">scheduled_task_complete</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l334"><span class="linenum"> 334</span></a>  
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">        // Should get handed the first task.</span>
<a name="l336"><span class="linenum"> 336</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_next_scheduled_task')" href="../../_functions/get_next_scheduled_task.html" onMouseOver="funcPopup(event,'get_next_scheduled_task')">get_next_scheduled_task</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a>);
<a name="l337"><span class="linenum"> 337</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertInstanceOf('\core\task\scheduled_test_task', <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l338"><span class="linenum"> 338</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>();
<a name="l339"><span class="linenum"> 339</span></a>          \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('scheduled_task_complete')" href="../../_functions/scheduled_task_complete.html" onMouseOver="funcPopup(event,'scheduled_task_complete')">scheduled_task_complete</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l340"><span class="linenum"> 340</span></a>  
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">        // Should not get any task.</span>
<a name="l342"><span class="linenum"> 342</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_next_scheduled_task')" href="../../_functions/get_next_scheduled_task.html" onMouseOver="funcPopup(event,'get_next_scheduled_task')">get_next_scheduled_task</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a>);
<a name="l343"><span class="linenum"> 343</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertNull(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l344"><span class="linenum"> 344</span></a>      }
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>      public function <a class="function" onClick="logFunction('test_get_broken_scheduled_task')" href="../../_functions/test_get_broken_scheduled_task.html" onMouseOver="funcPopup(event,'test_get_broken_scheduled_task')">test_get_broken_scheduled_task</a>() {
<a name="l347"><span class="linenum"> 347</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l348"><span class="linenum"> 348</span></a>  
<a name="l349"><span class="linenum"> 349</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">        // Delete all existing scheduled tasks.</span>
<a name="l351"><span class="linenum"> 351</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('task_scheduled');
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">        // Add a scheduled task.</span>
<a name="l353"><span class="linenum"> 353</span></a>  
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">        // A broken task that runs all the time.</span>
<a name="l355"><span class="linenum"> 355</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = new stdClass();
<a name="l356"><span class="linenum"> 356</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('blocking')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/blocking.html">blocking</a> = true;
<a name="l357"><span class="linenum"> 357</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('minute')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/minute.html">minute</a> = '*';
<a name="l358"><span class="linenum"> 358</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('hour')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/hour.html">hour</a> = '*';
<a name="l359"><span class="linenum"> 359</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('dayofweek')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/dayofweek.html">dayofweek</a> = '*';
<a name="l360"><span class="linenum"> 360</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('day')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/day.html">day</a> = '*';
<a name="l361"><span class="linenum"> 361</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('month')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/month.html">month</a> = '*';
<a name="l362"><span class="linenum"> 362</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('component')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = 'test_scheduled_task';
<a name="l363"><span class="linenum"> 363</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('classname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/classname.html">classname</a> = '\core\task\scheduled_test_task_broken';
<a name="l364"><span class="linenum"> 364</span></a>  
<a name="l365"><span class="linenum"> 365</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('task_scheduled', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>);
<a name="l366"><span class="linenum"> 366</span></a>  
<a name="l367"><span class="linenum"> 367</span></a>          <a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">        // Should not get any task.</span>
<a name="l369"><span class="linenum"> 369</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_next_scheduled_task')" href="../../_functions/get_next_scheduled_task.html" onMouseOver="funcPopup(event,'get_next_scheduled_task')">get_next_scheduled_task</a>(<a class="var it3027" onMouseOver="hilite(3027)" onMouseOut="lolite()" onClick="logVariable('now')" href="../../_variables/now.html">$now</a>);
<a name="l370"><span class="linenum"> 370</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertDebuggingCalled')" href="../../_functions/assertdebuggingcalled.html" onMouseOver="funcPopup(event,'assertdebuggingcalled')">assertDebuggingCalled</a>();
<a name="l371"><span class="linenum"> 371</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertNull(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l372"><span class="linenum"> 372</span></a>      }
<a name="l373"><span class="linenum"> 373</span></a>  
<a name="l374"><span class="linenum"> 374</span></a>      <span class="comment">/**</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment">     * Tests the use of 'R' syntax in time fields of tasks to get</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">     * tasks be configured with a non-uniform time.</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     */</span>
<a name="l378"><span class="linenum"> 378</span></a>      public function <a class="function" onClick="logFunction('test_random_time_specification')" href="../../_functions/test_random_time_specification.html" onMouseOver="funcPopup(event,'test_random_time_specification')">test_random_time_specification</a>() {
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">        // Testing non-deterministic things in a unit test is not really</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">        // wise, so we just test the values have changed within allowed bounds.</span>
<a name="l382"><span class="linenum"> 382</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a> = new \core\task\scheduled_test_task();
<a name="l383"><span class="linenum"> 383</span></a>  
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">        // The test task defaults to '*'.</span>
<a name="l385"><span class="linenum"> 385</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertInternalType('string', <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('get_minute')" href="../../_functions/get_minute.html" onMouseOver="funcPopup(event,'get_minute')">get_minute</a>());
<a name="l386"><span class="linenum"> 386</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertInternalType('string', <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('get_hour')" href="../../_functions/get_hour.html" onMouseOver="funcPopup(event,'get_hour')">get_hour</a>());
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">        // Set a random value.</span>
<a name="l389"><span class="linenum"> 389</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_minute')" href="../../_functions/set_minute.html" onMouseOver="funcPopup(event,'set_minute')">set_minute</a>('R');
<a name="l390"><span class="linenum"> 390</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_hour')" href="../../_functions/set_hour.html" onMouseOver="funcPopup(event,'set_hour')">set_hour</a>('R');
<a name="l391"><span class="linenum"> 391</span></a>          <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('set_day_of_week')" href="../../_functions/set_day_of_week.html" onMouseOver="funcPopup(event,'set_day_of_week')">set_day_of_week</a>('R');
<a name="l392"><span class="linenum"> 392</span></a>  
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">        // Verify the minute has changed within allowed bounds.</span>
<a name="l394"><span class="linenum"> 394</span></a>          <a class="var it1768" onMouseOver="hilite(1768)" onMouseOut="lolite()" onClick="logVariable('minute')" href="../../_variables/minute.html">$minute</a> = <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('get_minute')" href="../../_functions/get_minute.html" onMouseOver="funcPopup(event,'get_minute')">get_minute</a>();
<a name="l395"><span class="linenum"> 395</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertInternalType('int', <a class="var it1768" onMouseOver="hilite(1768)" onMouseOut="lolite()" onClick="logVariable('minute')" href="../../_variables/minute.html">$minute</a>);
<a name="l396"><span class="linenum"> 396</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertGreaterThanOrEqual(0, <a class="var it1768" onMouseOver="hilite(1768)" onMouseOut="lolite()" onClick="logVariable('minute')" href="../../_variables/minute.html">$minute</a>);
<a name="l397"><span class="linenum"> 397</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertLessThanOrEqual(59, <a class="var it1768" onMouseOver="hilite(1768)" onMouseOut="lolite()" onClick="logVariable('minute')" href="../../_variables/minute.html">$minute</a>);
<a name="l398"><span class="linenum"> 398</span></a>  
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">        // Verify the hour has changed within allowed bounds.</span>
<a name="l400"><span class="linenum"> 400</span></a>          <a class="var it1767" onMouseOver="hilite(1767)" onMouseOut="lolite()" onClick="logVariable('hour')" href="../../_variables/hour.html">$hour</a> = <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('get_hour')" href="../../_functions/get_hour.html" onMouseOver="funcPopup(event,'get_hour')">get_hour</a>();
<a name="l401"><span class="linenum"> 401</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertInternalType('int', <a class="var it1767" onMouseOver="hilite(1767)" onMouseOut="lolite()" onClick="logVariable('hour')" href="../../_variables/hour.html">$hour</a>);
<a name="l402"><span class="linenum"> 402</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertGreaterThanOrEqual(0, <a class="var it1767" onMouseOver="hilite(1767)" onMouseOut="lolite()" onClick="logVariable('hour')" href="../../_variables/hour.html">$hour</a>);
<a name="l403"><span class="linenum"> 403</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertLessThanOrEqual(23, <a class="var it1767" onMouseOver="hilite(1767)" onMouseOut="lolite()" onClick="logVariable('hour')" href="../../_variables/hour.html">$hour</a>);
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">        // Verify the dayofweek has changed within allowed bounds.</span>
<a name="l406"><span class="linenum"> 406</span></a>          <a class="var it19534" onMouseOver="hilite(19534)" onMouseOut="lolite()" onClick="logVariable('dayofweek')" href="../../_variables/dayofweek.html">$dayofweek</a> = <a class="var it33582" onMouseOver="hilite(33582)" onMouseOut="lolite()" onClick="logVariable('testclass')" href="../../_variables/testclass.html">$testclass</a>-&gt;<a class="function" onClick="logFunction('get_day_of_week')" href="../../_functions/get_day_of_week.html" onMouseOver="funcPopup(event,'get_day_of_week')">get_day_of_week</a>();
<a name="l407"><span class="linenum"> 407</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertInternalType('int', <a class="var it19534" onMouseOver="hilite(19534)" onMouseOut="lolite()" onClick="logVariable('dayofweek')" href="../../_variables/dayofweek.html">$dayofweek</a>);
<a name="l408"><span class="linenum"> 408</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertGreaterThanOrEqual(0, <a class="var it19534" onMouseOver="hilite(19534)" onMouseOut="lolite()" onClick="logVariable('dayofweek')" href="../../_variables/dayofweek.html">$dayofweek</a>);
<a name="l409"><span class="linenum"> 409</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertLessThanOrEqual(6, <a class="var it19534" onMouseOver="hilite(19534)" onMouseOut="lolite()" onClick="logVariable('dayofweek')" href="../../_variables/dayofweek.html">$dayofweek</a>);
<a name="l410"><span class="linenum"> 410</span></a>      }
<a name="l411"><span class="linenum"> 411</span></a>  
<a name="l412"><span class="linenum"> 412</span></a>      <span class="comment">/**</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">     * Test that the file_temp_cleanup_task removes directories and</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">     * files as expected.</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">     */</span>
<a name="l416"><span class="linenum"> 416</span></a>      public function <a class="function" onClick="logFunction('test_file_temp_cleanup_task')" href="../../_functions/test_file_temp_cleanup_task.html" onMouseOver="funcPopup(event,'test_file_temp_cleanup_task')">test_file_temp_cleanup_task</a>() {
<a name="l417"><span class="linenum"> 417</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">        // Create directories.</span>
<a name="l420"><span class="linenum"> 420</span></a>          <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tempdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/tempdir.html">tempdir</a> . DIRECTORY_SEPARATOR . 'backup' . DIRECTORY_SEPARATOR . 'backup01' . DIRECTORY_SEPARATOR . 'courses';
<a name="l421"><span class="linenum"> 421</span></a>          <a class="phpfunction" onClick="logFunction('mkdir')" href="../../_functions/mkdir.html" onMouseOver="phpfuncPopup(event,'mkdir')">mkdir</a>(<a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>, 0777, true);
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">        // Create files to be checked and then deleted.</span>
<a name="l424"><span class="linenum"> 424</span></a>          <a class="var it33600" onMouseOver="hilite(33600)" onMouseOut="lolite()" onClick="logVariable('file01')" href="../../_variables/file01.html">$file01</a> = <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a> . DIRECTORY_SEPARATOR . 'sections.xml';
<a name="l425"><span class="linenum"> 425</span></a>          <a class="phpfunction" onClick="logFunction('file_put_contents')" href="../../_functions/file_put_contents.html" onMouseOver="phpfuncPopup(event,'file_put_contents')">file_put_contents</a>(<a class="var it33600" onMouseOver="hilite(33600)" onMouseOut="lolite()" onClick="logVariable('file01')" href="../../_variables/file01.html">$file01</a>, 'test data 001');
<a name="l426"><span class="linenum"> 426</span></a>          <a class="var it33601" onMouseOver="hilite(33601)" onMouseOut="lolite()" onClick="logVariable('file02')" href="../../_variables/file02.html">$file02</a> = <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a> . DIRECTORY_SEPARATOR . 'modules.xml';
<a name="l427"><span class="linenum"> 427</span></a>          <a class="phpfunction" onClick="logFunction('file_put_contents')" href="../../_functions/file_put_contents.html" onMouseOver="phpfuncPopup(event,'file_put_contents')">file_put_contents</a>(<a class="var it33601" onMouseOver="hilite(33601)" onMouseOut="lolite()" onClick="logVariable('file02')" href="../../_variables/file02.html">$file02</a>, 'test data 002');
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">        // Change the time modified for the first file, to a time that will be deleted by the task (greater than seven days).</span>
<a name="l429"><span class="linenum"> 429</span></a>          <a class="phpfunction" onClick="logFunction('touch')" href="../../_functions/touch.html" onMouseOver="phpfuncPopup(event,'touch')">touch</a>(<a class="var it33600" onMouseOver="hilite(33600)" onMouseOut="lolite()" onClick="logVariable('file01')" href="../../_variables/file01.html">$file01</a>, <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - (8 * 24 * 3600));
<a name="l430"><span class="linenum"> 430</span></a>  
<a name="l431"><span class="linenum"> 431</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a> = \core\task\<a class="class" onClick="logClass('manager')" href="../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_scheduled_task')" href="../../_functions/get_scheduled_task.html" onMouseOver="funcPopup(event,'get_scheduled_task')">get_scheduled_task</a>('\\core\\task\\file_temp_cleanup_task');
<a name="l432"><span class="linenum"> 432</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;assertInstanceOf('\core\task\file_temp_cleanup_task', <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>);
<a name="l433"><span class="linenum"> 433</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>();
<a name="l434"><span class="linenum"> 434</span></a>  
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">        // Scan the directory. Only modules.xml should be left.</span>
<a name="l436"><span class="linenum"> 436</span></a>          <a class="var it33602" onMouseOver="hilite(33602)" onMouseOut="lolite()" onClick="logVariable('filesarray')" href="../../_variables/filesarray.html">$filesarray</a> = <a class="phpfunction" onClick="logFunction('scandir')" href="../../_functions/scandir.html" onMouseOver="phpfuncPopup(event,'scandir')">scandir</a>(<a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>);
<a name="l437"><span class="linenum"> 437</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>('modules.xml', <a class="var it33602" onMouseOver="hilite(33602)" onMouseOut="lolite()" onClick="logVariable('filesarray')" href="../../_variables/filesarray.html">$filesarray</a>[2]);
<a name="l438"><span class="linenum"> 438</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(3, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it33602" onMouseOver="hilite(33602)" onMouseOut="lolite()" onClick="logVariable('filesarray')" href="../../_variables/filesarray.html">$filesarray</a>));
<a name="l439"><span class="linenum"> 439</span></a>  
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">        // Change the time modified on modules.xml.</span>
<a name="l441"><span class="linenum"> 441</span></a>          <a class="phpfunction" onClick="logFunction('touch')" href="../../_functions/touch.html" onMouseOver="phpfuncPopup(event,'touch')">touch</a>(<a class="var it33601" onMouseOver="hilite(33601)" onMouseOut="lolite()" onClick="logVariable('file02')" href="../../_variables/file02.html">$file02</a>, <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - (8 * 24 * 3600));
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">        // Change the time modified on the courses directory.</span>
<a name="l443"><span class="linenum"> 443</span></a>          <a class="phpfunction" onClick="logFunction('touch')" href="../../_functions/touch.html" onMouseOver="phpfuncPopup(event,'touch')">touch</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tempdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/tempdir.html">tempdir</a> . DIRECTORY_SEPARATOR . 'backup' . DIRECTORY_SEPARATOR . 'backup01' . DIRECTORY_SEPARATOR .
<a name="l444"><span class="linenum"> 444</span></a>                  'courses', <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - (8 * 24 * 3600));
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">        // Run the scheduled task to remove the file and directory.</span>
<a name="l446"><span class="linenum"> 446</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>();
<a name="l447"><span class="linenum"> 447</span></a>          <a class="var it33602" onMouseOver="hilite(33602)" onMouseOut="lolite()" onClick="logVariable('filesarray')" href="../../_variables/filesarray.html">$filesarray</a> = <a class="phpfunction" onClick="logFunction('scandir')" href="../../_functions/scandir.html" onMouseOver="phpfuncPopup(event,'scandir')">scandir</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tempdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/tempdir.html">tempdir</a> . DIRECTORY_SEPARATOR . 'backup' . DIRECTORY_SEPARATOR . 'backup01');
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">        // There should only be two items in the array, '.' and '..'.</span>
<a name="l449"><span class="linenum"> 449</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(2, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it33602" onMouseOver="hilite(33602)" onMouseOut="lolite()" onClick="logVariable('filesarray')" href="../../_variables/filesarray.html">$filesarray</a>));
<a name="l450"><span class="linenum"> 450</span></a>  
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">        // Change the time modified on all of the files and directories.</span>
<a name="l452"><span class="linenum"> 452</span></a>          <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a> = new \RecursiveDirectoryIterator(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tempdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/tempdir.html">tempdir</a>);
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">        // Show all child nodes prior to their parent.</span>
<a name="l454"><span class="linenum"> 454</span></a>          <a class="var it10182" onMouseOver="hilite(10182)" onMouseOut="lolite()" onClick="logVariable('iter')" href="../../_variables/iter.html">$iter</a> = new \RecursiveIteratorIterator(<a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>, \RecursiveIteratorIterator::CHILD_FIRST);
<a name="l455"><span class="linenum"> 455</span></a>  
<a name="l456"><span class="linenum"> 456</span></a>          for (<a class="var it10182" onMouseOver="hilite(10182)" onMouseOut="lolite()" onClick="logVariable('iter')" href="../../_variables/iter.html">$iter</a>-&gt;<a class="phpfunction" onClick="logFunction('rewind')" href="../../_functions/rewind.html" onMouseOver="phpfuncPopup(event,'rewind')">rewind</a>(); <a class="var it10182" onMouseOver="hilite(10182)" onMouseOut="lolite()" onClick="logVariable('iter')" href="../../_variables/iter.html">$iter</a>-&gt;<a class="function" onClick="logFunction('valid')" href="../../_functions/valid.html" onMouseOver="funcPopup(event,'valid')">valid</a>(); <a class="var it10182" onMouseOver="hilite(10182)" onMouseOut="lolite()" onClick="logVariable('iter')" href="../../_variables/iter.html">$iter</a>-&gt;<a class="phpfunction" onClick="logFunction('next')" href="../../_functions/next.html" onMouseOver="phpfuncPopup(event,'next')">next</a>()) {
<a name="l457"><span class="linenum"> 457</span></a>              if (<a class="var it10182" onMouseOver="hilite(10182)" onMouseOut="lolite()" onClick="logVariable('iter')" href="../../_variables/iter.html">$iter</a>-&gt;isDir() &amp;&amp; !<a class="var it10182" onMouseOver="hilite(10182)" onMouseOut="lolite()" onClick="logVariable('iter')" href="../../_variables/iter.html">$iter</a>-&gt;isDot()) {
<a name="l458"><span class="linenum"> 458</span></a>                  <a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a> = <a class="var it10182" onMouseOver="hilite(10182)" onMouseOut="lolite()" onClick="logVariable('iter')" href="../../_variables/iter.html">$iter</a>-&gt;getRealPath();
<a name="l459"><span class="linenum"> 459</span></a>                  <a class="phpfunction" onClick="logFunction('touch')" href="../../_functions/touch.html" onMouseOver="phpfuncPopup(event,'touch')">touch</a>(<a class="var it481" onMouseOver="hilite(481)" onMouseOut="lolite()" onClick="logVariable('node')" href="../../_variables/node.html">$node</a>, <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - (8 * 24 * 3600));
<a name="l460"><span class="linenum"> 460</span></a>              }
<a name="l461"><span class="linenum"> 461</span></a>          }
<a name="l462"><span class="linenum"> 462</span></a>  
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">        // Run the scheduled task again to remove all of the files and directories.</span>
<a name="l464"><span class="linenum"> 464</span></a>          <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>();
<a name="l465"><span class="linenum"> 465</span></a>          <a class="var it33602" onMouseOver="hilite(33602)" onMouseOut="lolite()" onClick="logVariable('filesarray')" href="../../_variables/filesarray.html">$filesarray</a> = <a class="phpfunction" onClick="logFunction('scandir')" href="../../_functions/scandir.html" onMouseOver="phpfuncPopup(event,'scandir')">scandir</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tempdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/tempdir.html">tempdir</a>);
<a name="l466"><span class="linenum"> 466</span></a>  <span class="comment">        // All of the files and directories should be deleted.</span>
<a name="l467"><span class="linenum"> 467</span></a>  <span class="comment">        // There should only be two items in the array, '.' and '..'.</span>
<a name="l468"><span class="linenum"> 468</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('assertEquals')" href="../../_functions/assertequals.html" onMouseOver="funcPopup(event,'assertequals')">assertEquals</a>(2, <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it33602" onMouseOver="hilite(33602)" onMouseOut="lolite()" onClick="logVariable('filesarray')" href="../../_variables/filesarray.html">$filesarray</a>));
<a name="l469"><span class="linenum"> 469</span></a>      }
<a name="l470"><span class="linenum"> 470</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'test_reset_scheduled_tasks_for_component_delete': ['test_reset_scheduled_tasks_for_component_delete', 'Tests that the reset function deletes old tasks. ', [['lib/tests','scheduled_task_test.php',220]], 0],
'userdate': ['userdate', 'Returns a formatted string that represents a date in user time. ', [['lib','moodlelib.php',2155],['lib/adodb','adodb.inc.php',2842],['lib/adodb','adodb.inc.php',3569]], 525],
'get_next_scheduled_time': ['get_next_scheduled_time', 'Calculate when this task should next be run based on the schedule. ', [['lib/classes/task','scheduled_task.php',324]], 10],
'eval_cron_field': ['eval_cron_field', 'Take a cron field definition and return an array of valid numbers with the range min-max. ', [['lib/classes/task','scheduled_task.php',221]], 11],
'settimezone': ['settimezone', '', [['lib/google/src/Google/Service','AdSense.php',2182],['lib/google/src/Google/Service','Analytics.php',8096],['lib/google/src/Google/Service','ShoppingContent.php',3941],['lib/google/src/Google/Service','IdentityToolkit.php',1704],['lib/phpunit/classes','advanced_testcase.php',557],['lib/google/src/Google/Service','Calendar.php',2140],['lib/google/src/Google/Service','Calendar.php',2368],['lib/google/src/Google/Service','Calendar.php',3204],['lib/google/src/Google/Service','Calendar.php',3548],['lib/google/src/Google/Service','Calendar.php',3677],['lib/phpexcel/PHPExcel/Shared','TimeZone.php',61]], 94],
'test_get_next_scheduled_time': ['test_get_next_scheduled_time', '', [['lib/tests','scheduled_task_test.php',53]], 0],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'assertdebuggingcalled': ['assertdebuggingcalled', 'Assert that exactly debugging was just called once. ', [['lib/phpunit/classes','database_driver_testcase.php',176],['lib/phpunit/classes','advanced_testcase.php',272]], 232],
'set_minute': ['set_minute', 'Setter for $minute. Accepts a special \'R\' value which will be translated to a random minute. ', [['lib/classes/task','scheduled_task.php',105]], 11],
'count_records': ['count_records', 'Count a list of records. ', [['competency/classes','persistent.php',815],['mod/glossary/classes','entry_query_builder.php',152],['lib/dml','moodle_database.php',1766]], 1630],
'assertequals': ['assertequals', 'Asserts that two variables are equal. ', [['lib/tests','completionlib_test.php',68]], 12471],
'reset_scheduled_tasks_for_component': ['reset_scheduled_tasks_for_component', 'Update the database to contain a list of scheduled task for a component. The list of scheduled tasks is taken from @load_scheduled_tasks_for_component. Will throw exceptions for any errors. ', [['lib/classes/task','manager.php',79]], 13],
'test_get_broken_scheduled_task': ['test_get_broken_scheduled_task', '', [['lib/tests','scheduled_task_test.php',346]], 0],
'test_reset_scheduled_tasks_for_component': ['test_reset_scheduled_tasks_for_component', '', [['lib/tests','scheduled_task_test.php',151]], 0],
'test_timezones': ['test_timezones', '', [['lib/tests','scheduled_task_test.php',124]], 0],
'resetaftertest': ['resetaftertest', 'Reset everything after current test. ', [['lib/phpunit/classes','advanced_testcase.php',246]], 1528],
'settime': ['settime', '', [['lib/google/src/Google/Service','Cloudlatencytest.php',244],['lib/google/src/Google/Service','Dataflow.php',1166],['lib/google/src/Google/Service','Audit.php',400],['lib/google/src/Google/Service','Reports.php',732],['lib/google/src/Google/Service','Logging.php',94],['lib/google/src/Google/Service','PlusDomains.php',3041],['lib/google/src/Google/Service','Dfareporting.php',15904]], 19],
'get_hour': ['get_hour', 'Getter for $hour. ', [['lib/classes/task','scheduled_task.php',137]], 6],
'set_day': ['set_day', 'Setter for $day. ', [['lib/classes/task','scheduled_task.php',161]], 6],
'set_day_of_week': ['set_day_of_week', 'Setter for $dayofweek. ', [['lib/classes/task','scheduled_task.php',177]], 7],
'get_day_of_week': ['get_day_of_week', 'Getter for $dayofweek. ', [['lib/classes/task','scheduled_task.php',188]], 6],
'configure_scheduled_task': ['configure_scheduled_task', 'Change the default configuration for a scheduled task. The list of scheduled tasks is taken from {@link load_scheduled_tasks_for_component}. ', [['lib/classes/task','manager.php',147]], 4],
'set_next_run_time': ['set_next_run_time', 'Set the next run time for this task. ', [['lib/classes/task','task_base.php',85]], 10],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'test_random_time_specification': ['test_random_time_specification', 'Tests the use of \'R\' syntax in time fields of tasks to get tasks be configured with a non-uniform time. ', [['lib/tests','scheduled_task_test.php',374]], 0],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'get_next_scheduled_task': ['get_next_scheduled_task', 'This function will dispatch the next scheduled task in the queue. The task will be handed out with an open lock - possibly on the entire cron process. Make sure you call either {@link scheduled_task_failed} or {@link scheduled_task_complete} to release the lock and reschedule the task. ', [['lib/classes/task','manager.php',448]], 10],
'load_scheduled_tasks_for_component': ['load_scheduled_tasks_for_component', 'Given a component name, will load the list of tasks from the scheduled_tasks table for that component. Do not execute tasks loaded from this function - they have not been locked. ', [['lib/classes/task','manager.php',313]], 2],
'set_month': ['set_month', 'Setter for $month. ', [['lib/classes/task','scheduled_task.php',145]], 5],
'set_disabled': ['set_disabled', 'Setter for $disabled. ', [['lib/classes/task','scheduled_task.php',196]], 5],
'set_hour': ['set_hour', 'Setter for $hour. Accepts a special \'R\' value which will be translated to a random hour. ', [['lib/classes/task','scheduled_task.php',125]], 9],
'set_customised': ['set_customised', 'Has this task been changed from it\'s default config? ', [['lib/classes/task','scheduled_task.php',97]], 4],
'set_component': ['set_component', 'Setter for $component. ', [['lib/classes/task','task_base.php',117],['grade/grading','lib.php',135],['lib/classes/message/inbound','handler.php',110],['comment','lib.php',272]], 9],
'scheduled_task_complete': ['scheduled_task_complete', 'This function indicates that a scheduled task was completed successfully and should be rescheduled. ', [['lib/classes/task','manager.php',609]], 7],
'scheduled_task_failed': ['scheduled_task_failed', 'This function indicates that a scheduled task was not completed successfully and should be retried. ', [['lib/classes/task','manager.php',571]], 4],
'test_file_temp_cleanup_task': ['test_file_temp_cleanup_task', 'Test that the file_temp_cleanup_task removes directories and files as expected. ', [['lib/tests','scheduled_task_test.php',412]], 0],
'test_eval_cron_field': ['test_eval_cron_field', 'Test the cron scheduling method ', [['lib/tests','scheduled_task_test.php',39]], 0],
'execute': ['execute', 'Run langpack update ', [['admin/tool/langimport/classes/task','update_langpacks_task.php',44],['backup/converter/imscc1','lib.php',84],['lib/classes/task','blog_cron_task.php',40],['mod/workshop/allocation/scheduled','lib.php',128],['lib/classes/task','send_new_user_passwords_task.php',40],['admin/tool/log/store/standard/classes/task','cleanup_task.php',40],['lib/dml','pdo_moodle_database.php',227],['lib/classes/task','tag_cron_task.php',42],['enrol/imsenterprise/classes/task','cron_task.php',43],['lib/classes/task','completion_daily_task.php',42],['lib/google/src/Google/Http','Batch.php',61],['lib/dml','oci_native_moodle_database.php',1048],['lib/classes/task','context_cleanup_task.php',41],['backup/util/plan','backup_structure_step.class.php',50],['backup/util/ui','restore_ui.class.php',206],['webservice','lib.php',1319],['lib/classes/task','stats_cron_task.php',40],['lib/htmlpurifier/HTMLPurifier/Strategy','ValidateAttributes.php',16],['lib/htmlpurifier/HTMLPurifier/Strategy','RemoveForeignElements.php',20],['lib/classes/task','legacy_plugin_cron_task.php',42],['backup/moodle2','restore_activity_task.class.php',189],['lib/classes/task','portfolio_cron_task.php',40],['lib/google/src/Google/Http','REST.php',27],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',66],['backup/converter/imscc11','backuplib.php',42],['lib/classes/task','question_cron_task.php',40],['lib/classes/task','cache_cron_task.php',40],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',40],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',62],['admin/tool/messageinbound/classes/task','cleanup_task.php',47],['lib/adodb/drivers','adodb-pdo.inc.php',559],['lib/editor/atto/classes/task','autosave_cleanup_task.php',42],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',43],['lib/classes/task','completion_regular_task.php',42],['lib/adodb/drivers','adodb-oci8po.inc.php',54],['lib/classes/task','events_cron_task.php',40],['mod/workshop/allocation/random','lib.php',83],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',47],['auth/cas/classes/task','sync_task.php',43],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',43],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',62],['backup/util/helper','restore_decode_processor.class.php',73],['lib/behat','behat_base.php',840],['enrol/flatfile/classes/task','flatfile_sync_task.php',46],['lib/classes/task','registration_cron_task.php',40],['backup/moodle2','backup_section_task.class.php',97],['lib/classes/task','check_for_updates_task.php',40],['backup/util/plan/tests/fixtures','plan_fixtures.php',48],['backup/util/plan/tests/fixtures','plan_fixtures.php',56],['mod/forum/classes/task','cron_task.php',39],['lib/classes/task','send_failed_login_notifications_task.php',43],['enrol/lti/classes/task','sync_grades.php',45],['lib/dml','pgsql_native_moodle_database.php',665],['lib/htmlpurifier/HTMLPurifier/Strategy','Composite.php',21],['lib/classes/update','validator.php',117],['lib/google/src/Google','Client.php',574],['lib/dml','mssql_native_moodle_database.php',711],['mod/lti/service/profile/classes/local/resource','profile.php',76],['backup/util/plan','backup_plan.class.php',112],['lib/dml','mysqli_native_moodle_database.php',963],['backup/util/ui','backup_ui.class.php',122],['admin/tool/monitor/classes/task','clean_events.php',41],['backup/converter/moodle1','backuplib.php',10],['backup/converter/imscc11','lib.php',85],['lib/classes/task','grade_cron_task.php',40],['lib/classes/task','file_temp_cleanup_task.php',40],['backup/moodle2','restore_section_task.class.php',87],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',63],['filter/tex','latex.php',70],['lib/adodb','adodb.inc.php',1088],['lib/classes/task','plagiarism_cron_task.php',40],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',62],['backup/converter/moodle1','lib.php',142],['backup/util/plan','restore_structure_step.class.php',62],['lib/classes/task','search_index_task.php',44],['enrol/lti/classes/task','sync_members.php',55],['lib/classes/task','session_cleanup_task.php',40],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',61],['lib/classes/task','backup_cleanup_task.php',40],['lib/classes/task','delete_unconfirmed_users_task.php',40],['backup/converter/imscc1','backuplib.php',10],['lib/classes/task','badges_cron_task.php',40],['admin/tool/uploadcourse/classes','processor.php',174],['lib/classes/task','calendar_cron_task.php',40],['backup/util/plan','base_plan.class.php',158],['auth/ldap/classes/task','sync_task.php',43],['lib/adodb/drivers','adodb-oci8.inc.php',920],['backup/util/plan','restore_plan.class.php',159],['lib/tests/fixtures','task_fixtures.php',30],['lib/tests/fixtures','task_fixtures.php',39],['lib/tests/fixtures','task_fixtures.php',48],['lib/tests/fixtures','task_fixtures.php',57],['lib/dml','sqlsrv_native_moodle_database.php',795],['lib/classes/task','create_contexts_task.php',40],['lib/classes/task','file_trash_cleanup_task.php',40],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',46],['lib/classes/task','complete_plans_task.php',52],['lib/classes/task','messaging_cleanup_task.php',40],['backup/util/plan','backup_execution_step.class.php',25],['lib/classes/task','cache_cleanup_task.php',40],['backup/moodle2','backup_activity_task.class.php',211],['filter/tex','texdebug.php',287],['lib/classes/task','password_reset_cleanup_task.php',40],['lib/classes/task','search_optimize_task.php',47],['mod/assign','adminlib.php',342],['lib/classes/task','delete_incomplete_users_task.php',40],['lib/classes/task','automated_backup_task.php',40],['admin/tool/messageinbound/classes/task','pickup_task.php',47],['backup/util/plan','restore_execution_step.class.php',25],['lib/classes/task','sync_plans_from_template_cohorts_task.php',50],['admin/tool/monitor/classes','notification_task.php',39],['lib/dml/tests','dml_test.php',5543],['lib/htmlpurifier/HTMLPurifier/Strategy','FixNesting.php',41],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',60],['admin/tool/monitor/classes/task','check_subscriptions.php',60],['backup/util/interfaces','executable.class.php',32],['backup/util/plan','base_task.class.php',162]], 1058],
'valid': ['valid', 'Did we reach the end? ', [['lib/filestorage','zip_archive.php',514],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',51],['lib/dml','mssql_native_moodle_recordset.php',83],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',191],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',184],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',329],['lib/dml','mysqli_native_moodle_recordset.php',82],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',175],['lib/horde/framework/Horde/Mail/Rfc822','List.php',439],['lib/dml','pdo_moodle_recordset.php',75],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',104],['lib/phpexcel/PHPExcel','WorksheetIterator.php',99],['backup/util/helper','backup_null_iterator.class.php',49],['lib/horde/framework/Horde','Domhtml.php',331],['lib/dml','sqlsrv_native_moodle_recordset.php',129],['lib/classes/dml','recordset_walk.php',127],['lib/horde/framework/Horde/Imap/Client','Ids.php',419],['backup/util/helper','backup_array_iterator.class.php',59],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',44],['lib/dml','oci_native_moodle_recordset.php',76],['lib/adodb','adodb.inc.php',3041],['lib/adodb','adodb.inc.php',3168],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',182],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',110],['question/engine','questionusage.php',999],['question/engine/tests','helpers.php',1237],['backup/cc/cc_lib','cc_version11.php',47],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',75],['backup/cc/cc_lib','cc_version1.php',47],['backup/cc/cc_lib','cc_asssesment.php',58],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',80],['lib/google/src/Google','Collection.php',45],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',182],['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',378],['question/engine','questionattempt.php',1643],['question/engine','questionattempt.php',1762],['lib/tests','completionlib_test.php',903],['lib/dml','pgsql_native_moodle_recordset.php',103]], 81],
'get_minute': ['get_minute', 'Getter for $minute. ', [['lib/classes/task','scheduled_task.php',117]], 6],
'get_scheduled_task': ['get_scheduled_task', 'This function load the scheduled task details for a given classname. ', [['lib/classes/task','manager.php',336]], 17],
'test_get_next_scheduled_task': ['test_get_next_scheduled_task', '', [['lib/tests','scheduled_task_test.php',261]], 0],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'record_from_scheduled_task': ['record_from_scheduled_task', 'Utility method to create a DB record from a scheduled task. ', [['lib/classes/task','manager.php',172]], 7],
'gettimestamp': ['gettimestamp', '', [['lib/google/src/Google/Service','AdExchangeBuyer.php',5523],['lib/google/src/Google/Service','Coordinate.php',1087],['lib/google/src/Google/Service','ShoppingContent.php',8264],['lib/google/src/Google/Service','Webmasters.php',887],['lib/tcpdf/include','tcpdf_static.php',373],['lib/google/src/Google/Service','Spectrum.php',873],['lib/google/src/Google/Service','Spectrum.php',1080],['lib/google/src/Google/Service','Mirror.php',1218]], 44],
'reset': ['reset', '', [], 1213],
'next': ['next', '', [], 624],
'scandir': ['scandir', '', [], 13],
'defined': ['defined', '', [], 4731],
'strtoupper': ['strtoupper', '', [], 565],
'date': ['date', '', [], 693],
'get_class': ['get_class', '', [], 305],
'intval': ['intval', '', [], 455],
'trim': ['trim', '', [], 1948],
'mkdir': ['mkdir', '', [], 64],
'count': ['count', '', [], 4095],
'file_put_contents': ['file_put_contents', '', [], 94],
'time': ['time', '', [], 1959],
'mktime': ['mktime', '', [], 50],
'rewind': ['rewind', '', [], 64],
'touch': ['touch', '', [], 28]};
CLASS_DATA={
'core_scheduled_task_testcase': ['core_scheduled_task_testcase', 'Test class for scheduled task. ', [['lib/tests','scheduled_task_test.php',29]], 0],
'manager': ['manager', 'Search subsystem manager. ', [['search/classes','manager.php',31],['user/classes/output/myprofile','manager.php',28],['lib/classes/antivirus','manager.php',29],['lib/classes/event','manager.php',30],['lib/classes/task','manager.php',28],['admin/tool/messageinbound/classes','manager.php',29],['lib/classes/message/inbound','manager.php',29],['admin/tool/log/classes/log','manager.php',29],['lib/classes/log','manager.php',29],['lib/classes/session','manager.php',29],['lib/classes/message','manager.php',31]], 585],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566]};
CONST_DATA={
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
