<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of filelib.php</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='filelib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/lib/</a> -> <a href="filelib.php.source.html">filelib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="filelib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../_stats.html">Project Stats</a>]</p>
<p><b>Functions for file handling.</b></p>
<table>
<tr><td align="right">Copyright: </td><td>1999 onwards Martin Dougiamas (http://dougiamas.com)</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>4478 lines (171 kb)</td></tr>
<tr><td align="right">Included or required: </td><td><a href="filelib.php.xref.html">4 times</a></td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>6 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 2 classes</h3>
<div class="inset">
<p><b>curl::</b> (26 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#resetopt">resetopt</a>()<br>
&nbsp;&nbsp;<a href="#get_cacert">get_cacert</a>()<br>
&nbsp;&nbsp;<a href="#resetcookie">resetcookie</a>()<br>
&nbsp;&nbsp;<a href="#setopt">setopt</a>()<br>
&nbsp;&nbsp;<a href="#cleanopt">cleanopt</a>()<br>
&nbsp;&nbsp;<a href="#resetheader">resetHeader</a>()<br>
&nbsp;&nbsp;<a href="#setheader">setHeader</a>()<br>
&nbsp;&nbsp;<a href="#getresponse">getResponse</a>()<br>
&nbsp;&nbsp;<a href="#get_raw_response">get_raw_response</a>()<br>
&nbsp;&nbsp;<a href="#formatheader">formatHeader</a>()<br>
&nbsp;&nbsp;<a href="#apply_opt">apply_opt</a>()<br>
&nbsp;&nbsp;<a href="#download">download</a>()<br>
&nbsp;&nbsp;<a href="#multi">multi</a>()<br>
&nbsp;&nbsp;<a href="#request">request</a>()<br>
&nbsp;&nbsp;<a href="#head">head</a>()<br>
&nbsp;&nbsp;<a href="#post">post</a>()<br>
&nbsp;&nbsp;<a href="#get">get</a>()<br>
&nbsp;&nbsp;<a href="#download_one">download_one</a>()<br>
&nbsp;&nbsp;<a href="#put">put</a>()<br>
&nbsp;&nbsp;<a href="#delete">delete</a>()<br>
&nbsp;&nbsp;<a href="#trace">trace</a>()<br>
&nbsp;&nbsp;<a href="#options">options</a>()<br>
&nbsp;&nbsp;<a href="#get_info">get_info</a>()<br>
&nbsp;&nbsp;<a href="#get_errno">get_errno</a>()<br>
&nbsp;&nbsp;<a href="#strip_double_headers">strip_double_headers</a>()<br>
</p>
<p><b>curl_cache::</b> (6 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#get">get</a>()<br>
&nbsp;&nbsp;<a href="#set">set</a>()<br>
&nbsp;&nbsp;<a href="#cleanup">cleanup</a>()<br>
&nbsp;&nbsp;<a href="#refresh">refresh</a>()<br>
&nbsp;&nbsp;<a href="#file_pluginfile">file_pluginfile</a>()<br>
</p>
</div>
<h3>Defines 6 functions</h3>
<div class="inset">
&nbsp;&nbsp;<a href="#file_encode_url">file_encode_url</a>()<br>
&nbsp;&nbsp;<a href="#file_area_contains_subdirs">file_area_contains_subdirs</a>()<br>
&nbsp;&nbsp;<a href="#file_prepare_standard_editor">file_prepare_standard_editor</a>()<br>
&nbsp;&nbsp;<a href="#file_postupdate_standard_editor">file_postupdate_standard_editor</a>()<br>
&nbsp;&nbsp;<a href="#file_prepare_standard_filemanager">file_prepare_standard_filemanager</a>()<br>
&nbsp;&nbsp;<a href="#file_postupdate_standard_filemanager">file_postupdate_standard_filemanager</a>()<br>
&nbsp;&nbsp;<a href="#file_get_unused_draft_itemid">file_get_unused_draft_itemid</a>()<br>
&nbsp;&nbsp;<a href="#file_prepare_draft_area">file_prepare_draft_area</a>()<br>
&nbsp;&nbsp;<a href="#file_rewrite_pluginfile_urls">file_rewrite_pluginfile_urls</a>()<br>
&nbsp;&nbsp;<a href="#file_get_draft_area_info">file_get_draft_area_info</a>()<br>
&nbsp;&nbsp;<a href="#file_is_draft_area_limit_reached">file_is_draft_area_limit_reached</a>()<br>
&nbsp;&nbsp;<a href="#file_get_user_used_space">file_get_user_used_space</a>()<br>
&nbsp;&nbsp;<a href="#file_correct_filepath">file_correct_filepath</a>()<br>
&nbsp;&nbsp;<a href="#file_get_drafarea_folders">file_get_drafarea_folders</a>()<br>
&nbsp;&nbsp;<a href="#file_get_drafarea_files">file_get_drafarea_files</a>()<br>
&nbsp;&nbsp;<a href="#file_get_submitted_draft_itemid">file_get_submitted_draft_itemid</a>()<br>
&nbsp;&nbsp;<a href="#file_restore_source_field_from_draft_file">file_restore_source_field_from_draft_file</a>()<br>
&nbsp;&nbsp;<a href="#file_save_draft_area_files">file_save_draft_area_files</a>()<br>
&nbsp;&nbsp;<a href="#file_rewrite_urls_to_pluginfile">file_rewrite_urls_to_pluginfile</a>()<br>
&nbsp;&nbsp;<a href="#file_set_sortorder">file_set_sortorder</a>()<br>
&nbsp;&nbsp;<a href="#file_reset_sortorder">file_reset_sortorder</a>()<br>
&nbsp;&nbsp;<a href="#file_get_upload_error">file_get_upload_error</a>()<br>
&nbsp;&nbsp;<a href="#format_array_postdata_for_curlcall">format_array_postdata_for_curlcall</a>()<br>
&nbsp;&nbsp;<a href="#format_postdata_for_curlcall">format_postdata_for_curlcall</a>()<br>
&nbsp;&nbsp;<a href="#download_file_content">download_file_content</a>()<br>
&nbsp;&nbsp;<a href="#get_mimetypes_array">get_mimetypes_array</a>()<br>
&nbsp;&nbsp;<a href="#mimeinfo">mimeinfo</a>()<br>
&nbsp;&nbsp;<a href="#mimeinfo_from_type">mimeinfo_from_type</a>()<br>
&nbsp;&nbsp;<a href="#file_file_icon">file_file_icon</a>()<br>
&nbsp;&nbsp;<a href="#file_folder_icon">file_folder_icon</a>()<br>
&nbsp;&nbsp;<a href="#file_mimetype_icon">file_mimetype_icon</a>()<br>
&nbsp;&nbsp;<a href="#file_extension_icon">file_extension_icon</a>()<br>
&nbsp;&nbsp;<a href="#get_mimetype_description">get_mimetype_description</a>()<br>
&nbsp;&nbsp;<a href="#file_get_typegroup">file_get_typegroup</a>()<br>
&nbsp;&nbsp;<a href="#file_extension_in_typegroup">file_extension_in_typegroup</a>()<br>
&nbsp;&nbsp;<a href="#file_mimetype_in_typegroup">file_mimetype_in_typegroup</a>()<br>
&nbsp;&nbsp;<a href="#send_file_not_found">send_file_not_found</a>()<br>
&nbsp;&nbsp;<a href="#send_header_404">send_header_404</a>()<br>
&nbsp;&nbsp;<a href="#readfile_allow_large">readfile_allow_large</a>()<br>
&nbsp;&nbsp;<a href="#readfile_accel">readfile_accel</a>()<br>
&nbsp;&nbsp;<a href="#readstring_accel">readstring_accel</a>()<br>
&nbsp;&nbsp;<a href="#send_temp_file">send_temp_file</a>()<br>
&nbsp;&nbsp;<a href="#send_temp_file_finished">send_temp_file_finished</a>()<br>
&nbsp;&nbsp;<a href="#send_file">send_file</a>()<br>
&nbsp;&nbsp;<a href="#send_stored_file">send_stored_file</a>()<br>
&nbsp;&nbsp;<a href="#get_records_csv">get_records_csv</a>()<br>
&nbsp;&nbsp;<a href="#put_records_csv">put_records_csv</a>()<br>
&nbsp;&nbsp;<a href="#fulldelete">fulldelete</a>()<br>
&nbsp;&nbsp;<a href="#byteserving_send_file">byteserving_send_file</a>()<br>
&nbsp;&nbsp;<a href="#file_modify_html_header">file_modify_html_header</a>()<br>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="curl"><b>curl</b></a>&nbsp;&nbsp;- <a href="../_classes/curl.html"><small>X-Ref</small></a>
</p>
<b>RESTful cURL class<BR>
</b><br>
This is a wrapper class for curl, it is quite easy to use:<BR>
&lt;code&gt;<BR>
$c = new curl;<BR>
// enable cache<BR>
$c = new curl(array('cache'=&gt;true));<BR>
// enable cookie<BR>
$c = new curl(array('cookie'=&gt;true));<BR>
// enable proxy<BR>
$c = new curl(array('proxy'=&gt;true));<BR>
<BR>
// HTTP GET Method<BR>
$html = $c-&gt;get('http://example.com');<BR>
// HTTP POST Method<BR>
$html = $c-&gt;post('http://example.com/', array('q'=&gt;'words', 'name'=&gt;'moodle'));<BR>
// HTTP PUT Method<BR>
$html = $c-&gt;put('http://example.com/', array('file'=&gt;'/var/www/test.txt');<BR>
&lt;/code&gt;<BR>
<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'filelib.php.source.html#l2700')" href="filelib.php.source.html#l2700">__construct</a>(<a href="../_variables/settings.html">$settings</a> = array()&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Curl constructor.<BR>
</b><BR>Allowed settings are:<BR>
proxy: (bool) use proxy server, null means autodetect non-local from url<BR>
debug: (bool) use debug output<BR>
cookie: (string) path to cookie file, false if none<BR>
cache: (bool) use cache<BR>
module_cache: (string) type of cache<BR>
<BR>
<b>param:</b> array $settings<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="resetopt" onClick="logFunction('resetopt', 'filelib.php.source.html#l2775')" href="filelib.php.source.html#l2775">resetopt</a>()&nbsp;&nbsp;
<a href="../_functions/resetopt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Resets the CURL options that have already been set<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_cacert" onClick="logFunction('get_cacert', 'filelib.php.source.html#l2801')" href="filelib.php.source.html#l2801">get_cacert</a>()&nbsp;&nbsp;
<a href="../_functions/get_cacert.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the location of ca certificates.<BR>
</b><BR><b>return:</b> string absolute file path or empty if default used<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="resetcookie" onClick="logFunction('resetcookie', 'filelib.php.source.html#l2830')" href="filelib.php.source.html#l2830">resetcookie</a>()&nbsp;&nbsp;
<a href="../_functions/resetcookie.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Reset Cookie<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="setopt" onClick="logFunction('setopt', 'filelib.php.source.html#l2845')" href="filelib.php.source.html#l2845">setopt</a>(<a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/setopt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set curl options.<BR>
</b><BR>Do not use the curl constants to define the options, pass a string<BR>
corresponding to that constant. Ie. to set CURLOPT_MAXREDIRS, pass<BR>
array('CURLOPT_MAXREDIRS' =&gt; 10) or array('maxredirs' =&gt; 10) to this method.<BR>
<BR>
<b>param:</b> array $options If array is null, this function will reset the options to default value.<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cleanopt" onClick="logFunction('cleanopt', 'filelib.php.source.html#l2872')" href="filelib.php.source.html#l2872">cleanopt</a>()&nbsp;&nbsp;
<a href="../_functions/cleanopt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Reset http method<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="resetheader" onClick="logFunction('resetheader', 'filelib.php.source.html#l2886')" href="filelib.php.source.html#l2886">resetHeader</a>()&nbsp;&nbsp;
<a href="../_functions/resetheader.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Resets the HTTP Request headers (to prepare for the new request)<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="setheader" onClick="logFunction('setheader', 'filelib.php.source.html#l2893')" href="filelib.php.source.html#l2893">setHeader</a>(<a href="../_variables/header.html">$header</a>)&nbsp;&nbsp;
<a href="../_functions/setheader.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set HTTP Request Header<BR>
</b><BR><b>param:</b> array $header<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="getresponse" onClick="logFunction('getresponse', 'filelib.php.source.html#l2909')" href="filelib.php.source.html#l2909">getResponse</a>()&nbsp;&nbsp;
<a href="../_functions/getresponse.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get HTTP Response Headers<BR>
</b><BR><b>return:</b> array of arrays<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_raw_response" onClick="logFunction('get_raw_response', 'filelib.php.source.html#l2917')" href="filelib.php.source.html#l2917">get_raw_response</a>()&nbsp;&nbsp;
<a href="../_functions/get_raw_response.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get raw HTTP Response Headers<BR>
</b><BR><b>return:</b> array of strings<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="formatheader" onClick="logFunction('formatheader', 'filelib.php.source.html#l2925')" href="filelib.php.source.html#l2925">formatHeader</a>(<a href="../_variables/ch.html">$ch</a>, <a href="../_variables/header.html">$header</a>)&nbsp;&nbsp;
<a href="../_functions/formatheader.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>private callback function<BR>
Formatting HTTP Response Header<BR>
</b><BR>We only keep the last headers returned. For example during a redirect the<BR>
redirect headers will not appear in {@link self::getResponse()}, if you need<BR>
to use those headers, refer to {@link self::get_raw_response()}.<BR>
<BR>
<b>param:</b> resource $ch Apparently not used<br>
<b>param:</b> string $header<br>
<b>return:</b> int The strlen of the header<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="apply_opt" onClick="logFunction('apply_opt', 'filelib.php.source.html#l2971')" href="filelib.php.source.html#l2971">apply_opt</a>(<a href="../_variables/curl.html">$curl</a>, <a href="../_variables/options.html">$options</a>)&nbsp;&nbsp;
<a href="../_functions/apply_opt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set options for individual curl instance<BR>
</b><BR><b>param:</b> resource $curl A curl handle<br>
<b>param:</b> array $options<br>
<b>return:</b> resource The curl handle<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="download" onClick="logFunction('download', 'filelib.php.source.html#l3060')" href="filelib.php.source.html#l3060">download</a>(<a href="../_variables/requests.html">$requests</a>, <a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/download.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Download multiple files in parallel<BR>
</b><BR>Calls {@link multi()} with specific download headers<BR>
<BR>
&lt;code&gt;<BR>
$c = new curl();<BR>
$file1 = fopen('a', 'wb');<BR>
$file2 = fopen('b', 'wb');<BR>
$c-&gt;download(array(<BR>
array('url'=&gt;'http://localhost/', 'file'=&gt;$file1),<BR>
array('url'=&gt;'http://localhost/20/', 'file'=&gt;$file2)<BR>
));<BR>
fclose($file1);<BR>
fclose($file2);<BR>
&lt;/code&gt;<BR>
<BR>
or<BR>
<BR>
&lt;code&gt;<BR>
$c = new curl();<BR>
$c-&gt;download(array(<BR>
array('url'=&gt;'http://localhost/', 'filepath'=&gt;'/tmp/file1.tmp'),<BR>
array('url'=&gt;'http://localhost/20/', 'filepath'=&gt;'/tmp/file2.tmp')<BR>
));<BR>
&lt;/code&gt;<BR>
<BR>
<b>param:</b> array $requests An array of files to request {<br>
<b>param:</b> array $options An array of options to set<br>
<b>return:</b> array An array of results<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="multi" onClick="logFunction('multi', 'filelib.php.source.html#l3104')" href="filelib.php.source.html#l3104">multi</a>(<a href="../_variables/requests.html">$requests</a>, <a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/multi.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Multi HTTP Requests<BR>
This function could run multi-requests in parallel.<BR>
</b><BR><b>param:</b> array $requests An array of files to request<br>
<b>param:</b> array $options An array of options to set<br>
<b>return:</b> array An array of results<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="request" onClick="logFunction('request', 'filelib.php.source.html#l3153')" href="filelib.php.source.html#l3153">request</a>(<a href="../_variables/url.html">$url</a>, <a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/request.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Single HTTP Request<BR>
</b><BR><b>param:</b> string $url The URL to request<br>
<b>param:</b> array $options<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="head" onClick="logFunction('head', 'filelib.php.source.html#l3297')" href="filelib.php.source.html#l3297">head</a>(<a href="../_variables/url.html">$url</a>, <a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/head.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>HTTP HEAD method<BR>
</b><BR><b>param:</b> string $url<br>
<b>param:</b> array $options<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="post" onClick="logFunction('post', 'filelib.php.source.html#l3313')" href="filelib.php.source.html#l3313">post</a>(<a href="../_variables/url.html">$url</a>, <a href="../_variables/params.html">$params</a> = '', <a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/post.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>HTTP POST method<BR>
</b><BR><b>param:</b> string $url<br>
<b>param:</b> array|string $params<br>
<b>param:</b> array $options<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get" onClick="logFunction('get', 'filelib.php.source.html#l3341')" href="filelib.php.source.html#l3341">get</a>(<a href="../_variables/url.html">$url</a>, <a href="../_variables/params.html">$params</a> = array()&nbsp;&nbsp;
<a href="../_functions/get.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>HTTP GET method<BR>
</b><BR><b>param:</b> string $url<br>
<b>param:</b> array $params<br>
<b>param:</b> array $options<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="download_one" onClick="logFunction('download_one', 'filelib.php.source.html#l3359')" href="filelib.php.source.html#l3359">download_one</a>(<a href="../_variables/url.html">$url</a>, <a href="../_variables/params.html">$params</a>, <a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/download_one.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Downloads one file and writes it to the specified file handler<BR>
</b><BR>&lt;code&gt;<BR>
$c = new curl();<BR>
$file = fopen('savepath', 'w');<BR>
$result = $c-&gt;download_one('http://localhost/', null,<BR>
array('file' =&gt; $file, 'timeout' =&gt; 5, 'followlocation' =&gt; true, 'maxredirs' =&gt; 3));<BR>
fclose($file);<BR>
$download_info = $c-&gt;get_info();<BR>
if ($result === true) {<BR>
// file downloaded successfully<BR>
} else {<BR>
$error_text = $result;<BR>
$error_code = $c-&gt;get_errno();<BR>
}<BR>
&lt;/code&gt;<BR>
<BR>
&lt;code&gt;<BR>
$c = new curl();<BR>
$result = $c-&gt;download_one('http://localhost/', null,<BR>
array('filepath' =&gt; 'savepath', 'timeout' =&gt; 5, 'followlocation' =&gt; true, 'maxredirs' =&gt; 3));<BR>
// ... see above, no need to close handle and remove file if unsuccessful<BR>
&lt;/code&gt;<BR>
<BR>
<b>param:</b> string $url<br>
<b>param:</b> array|null $params key-value pairs to be added to $url as query string<br>
<b>param:</b> array $options request options. Must include either 'file' or 'filepath'<br>
<b>return:</b> bool|string true on success or error string on failure<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="put" onClick="logFunction('put', 'filelib.php.source.html#l3414')" href="filelib.php.source.html#l3414">put</a>(<a href="../_variables/url.html">$url</a>, <a href="../_variables/params.html">$params</a> = array()&nbsp;&nbsp;
<a href="../_functions/put.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>HTTP PUT method<BR>
</b><BR><b>param:</b> string $url<br>
<b>param:</b> array $params<br>
<b>param:</b> array $options<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete" onClick="logFunction('delete', 'filelib.php.source.html#l3440')" href="filelib.php.source.html#l3440">delete</a>(<a href="../_variables/url.html">$url</a>, <a href="../_variables/param.html">$param</a> = array()&nbsp;&nbsp;
<a href="../_functions/delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>HTTP DELETE method<BR>
</b><BR><b>param:</b> string $url<br>
<b>param:</b> array $param<br>
<b>param:</b> array $options<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="trace" onClick="logFunction('trace', 'filelib.php.source.html#l3457')" href="filelib.php.source.html#l3457">trace</a>(<a href="../_variables/url.html">$url</a>, <a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/trace.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>HTTP TRACE method<BR>
</b><BR><b>param:</b> string $url<br>
<b>param:</b> array $options<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="options" onClick="logFunction('options', 'filelib.php.source.html#l3470')" href="filelib.php.source.html#l3470">options</a>(<a href="../_variables/url.html">$url</a>, <a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/options.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>HTTP OPTIONS method<BR>
</b><BR><b>param:</b> string $url<br>
<b>param:</b> array $options<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_info" onClick="logFunction('get_info', 'filelib.php.source.html#l3483')" href="filelib.php.source.html#l3483">get_info</a>()&nbsp;&nbsp;
<a href="../_functions/get_info.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get curl information<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_errno" onClick="logFunction('get_errno', 'filelib.php.source.html#l3492')" href="filelib.php.source.html#l3492">get_errno</a>()&nbsp;&nbsp;
<a href="../_functions/get_errno.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get curl error code<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="strip_double_headers" onClick="logFunction('strip_double_headers', 'filelib.php.source.html#l3501')" href="filelib.php.source.html#l3501">strip_double_headers</a>(<a href="../_variables/input.html">$input</a>)&nbsp;&nbsp;
<a href="../_functions/strip_double_headers.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>When using a proxy, an additional HTTP response code may appear at<BR>
the start of the header. For example, when using https over a proxy<BR>
there may be 'HTTP/1.0 200 Connection Established'. Other codes are<BR>
also possible and some may come with their own headers.<BR>
</b><BR>If using the return value containing all headers, this function can be<BR>
called to remove unwanted doubles.<BR>
<BR>
Note that it is not possible to distinguish this situation from valid<BR>
data unless you know the actual response part (below the headers)<BR>
will not be included in this string, or else will not 'look like' HTTP<BR>
headers. As a result it is not safe to call this function for general<BR>
data.<BR>
<BR>
<b>param:</b> string $input Input HTTP response<br>
<b>return:</b> string HTTP response with additional headers stripped if any<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="curl_cache"><b>curl_cache</b></a>&nbsp;&nbsp;- <a href="../_classes/curl_cache.html"><small>X-Ref</small></a>
</p>
<b>This class is used by cURL class, use case:<BR>
</b><br>
&lt;code&gt;<BR>
$CFG-&gt;repositorycacheexpire = 120;<BR>
$CFG-&gt;curlcache = 120;<BR>
<BR>
$c = new curl(array('cache'=&gt;true), 'module_cache'=&gt;'repository');<BR>
$ret = $c-&gt;get('http://www.google.com');<BR>
&lt;/code&gt;<BR>
<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'filelib.php.source.html#l3560')" href="filelib.php.source.html#l3560">__construct</a>(<a href="../_variables/module.html">$module</a> = 'repository')&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR><b>param:</b> string $module which module is using curl_cache<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get" onClick="logFunction('get', 'filelib.php.source.html#l3589')" href="filelib.php.source.html#l3589">get</a>(<a href="../_variables/param.html">$param</a>)&nbsp;&nbsp;
<a href="../_functions/get.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get cached value<BR>
</b><BR><b>param:</b> mixed $param<br>
<b>return:</b> bool|string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set" onClick="logFunction('set', 'filelib.php.source.html#l3615')" href="filelib.php.source.html#l3615">set</a>(<a href="../_variables/param.html">$param</a>, <a href="../_variables/val.html">$val</a>)&nbsp;&nbsp;
<a href="../_functions/set.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set cache value<BR>
</b><BR><b>param:</b> mixed $param<br>
<b>param:</b> mixed $val<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cleanup" onClick="logFunction('cleanup', 'filelib.php.source.html#l3632')" href="filelib.php.source.html#l3632">cleanup</a>(<a href="../_variables/expire.html">$expire</a>)&nbsp;&nbsp;
<a href="../_functions/cleanup.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Remove cache files<BR>
</b><BR><b>param:</b> int $expire The number of seconds before expiry<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="refresh" onClick="logFunction('refresh', 'filelib.php.source.html#l3650')" href="filelib.php.source.html#l3650">refresh</a>()&nbsp;&nbsp;
<a href="../_functions/refresh.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>delete current user's cache file<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_pluginfile" onClick="logFunction('file_pluginfile', 'filelib.php.source.html#l3670')" href="filelib.php.source.html#l3670">file_pluginfile</a>(<a href="../_variables/relativepath.html">$relativepath</a>, <a href="../_variables/forcedownload.html">$forcedownload</a>, <a href="../_variables/preview.html">$preview</a> = null)&nbsp;&nbsp;
<a href="../_functions/file_pluginfile.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function delegates file serving to individual plugins<BR>
</b><BR><b>param:</b> string $relativepath<br>
<b>param:</b> bool $forcedownload<br>
<b>param:</b> null|string $preview the preview mode, defaults to serving the original file<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classtitle"><a name="functions"><b>Functions</b></a></div>
<div class="details-classinfo">
Functions that are not part of a class:<br><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_encode_url" onClick="logFunction('file_encode_url', 'filelib.php.source.html#l42')" href="filelib.php.source.html#l42">file_encode_url</a>(<a href="../_variables/urlbase.html">$urlbase</a>, <a href="../_variables/path.html">$path</a>, <a href="../_variables/forcedownload.html">$forcedownload</a>=false, <a href="../_variables/https.html">$https</a>=false)&nbsp;&nbsp;
<a href="../_functions/file_encode_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Encodes file serving url<BR>
</b><BR><b>param:</b> string $urlbase<br>
<b>param:</b> string $path /filearea/itemid/dir/dir/file.exe<br>
<b>param:</b> bool $forcedownload<br>
<b>param:</b> bool $https https url required<br>
<b>return:</b> string encoded file url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_area_contains_subdirs" onClick="logFunction('file_area_contains_subdirs', 'filelib.php.source.html#l83')" href="filelib.php.source.html#l83">file_area_contains_subdirs</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/component.html">$component</a>, <a href="../_variables/filearea.html">$filearea</a>, <a href="../_variables/itemid.html">$itemid</a>)&nbsp;&nbsp;
<a href="../_functions/file_area_contains_subdirs.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Detects if area contains subdirs,<BR>
this is intended for file areas that are attached to content<BR>
migrated from 1.x where subdirs were allowed everywhere.<BR>
</b><BR><b>param:</b> context $context<br>
<b>param:</b> string $component<br>
<b>param:</b> string $filearea<br>
<b>param:</b> string $itemid<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_prepare_standard_editor" onClick="logFunction('file_prepare_standard_editor', 'filelib.php.source.html#l108')" href="filelib.php.source.html#l108">file_prepare_standard_editor</a>(<a href="../_variables/data.html">$data</a>, <a href="../_variables/field.html">$field</a>, array <a href="../_variables/options.html">$options</a>, <a href="../_variables/context.html">$context</a>=null, <a href="../_variables/component.html">$component</a>=null, <a href="../_variables/filearea.html">$filearea</a>=null, <a href="../_variables/itemid.html">$itemid</a>=null)&nbsp;&nbsp;
<a href="../_functions/file_prepare_standard_editor.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prepares 'editor' formslib element from data in database<BR>
</b><BR>The passed $data record must contain field foobar, foobarformat and optionally foobartrust. This<BR>
function then copies the embedded files into draft area (assigning itemids automatically),<BR>
creates the form element foobar_editor and rewrites the URLs so the embedded images can be<BR>
displayed.<BR>
In your mform definition, you must have an 'editor' element called foobar_editor. Then you call<BR>
your mform's set_data() supplying the object returned by this function.<BR>
<BR>
<b>param:</b> stdClass $data database field that holds the html text with embedded media<br>
<b>param:</b> string $field the name of the database field that holds the html text with embedded media<br>
<b>param:</b> array $options editor options (like maxifiles, maxbytes etc.)<br>
<b>param:</b> stdClass $context context of the editor<br>
<b>param:</b> string $component<br>
<b>param:</b> string $filearea file area name<br>
<b>param:</b> int $itemid item id, required if item exists<br>
<b>return:</b> stdClass modified data object<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_postupdate_standard_editor" onClick="logFunction('file_postupdate_standard_editor', 'filelib.php.source.html#l202')" href="filelib.php.source.html#l202">file_postupdate_standard_editor</a>(<a href="../_variables/data.html">$data</a>, <a href="../_variables/field.html">$field</a>, array <a href="../_variables/options.html">$options</a>, <a href="../_variables/context.html">$context</a>, <a href="../_variables/component.html">$component</a>=null, <a href="../_variables/filearea.html">$filearea</a>=null, <a href="../_variables/itemid.html">$itemid</a>=null)&nbsp;&nbsp;
<a href="../_functions/file_postupdate_standard_editor.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prepares the content of the 'editor' form element with embedded media files to be saved in database<BR>
</b><BR>This function moves files from draft area to the destination area and<BR>
encodes URLs to the draft files so they can be safely saved into DB. The<BR>
form has to contain the 'editor' element named foobar_editor, where 'foobar'<BR>
is the name of the database field to hold the wysiwyg editor content. The<BR>
editor data comes as an array with text, format and itemid properties. This<BR>
function automatically adds $data properties foobar, foobarformat and<BR>
foobartrust, where foobar has URL to embedded files encoded.<BR>
<BR>
<b>param:</b> stdClass $data raw data submitted by the form<br>
<b>param:</b> string $field name of the database field containing the html with embedded media files<br>
<b>param:</b> array $options editor options (trusttext, subdirs, maxfiles, maxbytes etc.)<br>
<b>param:</b> stdClass $context context, required for existing data<br>
<b>param:</b> string $component file component<br>
<b>param:</b> string $filearea file area name<br>
<b>param:</b> int $itemid item id, required if item exists<br>
<b>return:</b> stdClass modified data object<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_prepare_standard_filemanager" onClick="logFunction('file_prepare_standard_filemanager', 'filelib.php.source.html#l259')" href="filelib.php.source.html#l259">file_prepare_standard_filemanager</a>(<a href="../_variables/data.html">$data</a>, <a href="../_variables/field.html">$field</a>, array <a href="../_variables/options.html">$options</a>, <a href="../_variables/context.html">$context</a>=null, <a href="../_variables/component.html">$component</a>=null, <a href="../_variables/filearea.html">$filearea</a>=null, <a href="../_variables/itemid.html">$itemid</a>=null)&nbsp;&nbsp;
<a href="../_functions/file_prepare_standard_filemanager.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Saves text and files modified by Editor formslib element<BR>
</b><BR><b>param:</b> stdClass $data $database entry field<br>
<b>param:</b> string $field name of data field<br>
<b>param:</b> array $options various options<br>
<b>param:</b> stdClass $context context - must already exist<br>
<b>param:</b> string $component<br>
<b>param:</b> string $filearea file area name<br>
<b>param:</b> int $itemid must already exist, usually means data is in db<br>
<b>return:</b> stdClass modified data obejct<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_postupdate_standard_filemanager" onClick="logFunction('file_postupdate_standard_filemanager', 'filelib.php.source.html#l291')" href="filelib.php.source.html#l291">file_postupdate_standard_filemanager</a>(<a href="../_variables/data.html">$data</a>, <a href="../_variables/field.html">$field</a>, array <a href="../_variables/options.html">$options</a>, <a href="../_variables/context.html">$context</a>, <a href="../_variables/component.html">$component</a>, <a href="../_variables/filearea.html">$filearea</a>, <a href="../_variables/itemid.html">$itemid</a>)&nbsp;&nbsp;
<a href="../_functions/file_postupdate_standard_filemanager.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Saves files modified by File manager formslib element<BR>
</b><BR><b>param:</b> stdClass $data $database entry field<br>
<b>param:</b> string $field name of data field<br>
<b>param:</b> array $options various options<br>
<b>param:</b> stdClass $context context - must already exist<br>
<b>param:</b> string $component<br>
<b>param:</b> string $filearea file area name<br>
<b>param:</b> int $itemid must already exist, usually means data is in db<br>
<b>return:</b> stdClass modified data obejct<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_get_unused_draft_itemid" onClick="logFunction('file_get_unused_draft_itemid', 'filelib.php.source.html#l334')" href="filelib.php.source.html#l334">file_get_unused_draft_itemid</a>()&nbsp;&nbsp;
<a href="../_functions/file_get_unused_draft_itemid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Generate a draft itemid<BR>
</b><BR><b>return:</b> int a random but available draft itemid that can be used to create a new draft<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_prepare_draft_area" onClick="logFunction('file_prepare_draft_area', 'filelib.php.source.html#l362')" href="filelib.php.source.html#l362">file_prepare_draft_area</a>(&amp;<a href="../_variables/draftitemid.html">$draftitemid</a>, <a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/component.html">$component</a>, <a href="../_variables/filearea.html">$filearea</a>, <a href="../_variables/itemid.html">$itemid</a>, array <a href="../_variables/options.html">$options</a>=null, <a href="../_variables/text.html">$text</a>=null)&nbsp;&nbsp;
<a href="../_functions/file_prepare_draft_area.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Initialise a draft file area from a real one by copying the files. A draft<BR>
area will be created if one does not already exist. Normally you should<BR>
get $draftitemid by calling file_get_submitted_draft_itemid('elementname');<BR>
</b><BR><b>param:</b> int $draftitemid the id of the draft area to use, or 0 to create a new one, in which case this parameter is updated.<br>
<b>param:</b> int $contextid This parameter and the next two identify the file area to copy files from.<br>
<b>param:</b> string $component<br>
<b>param:</b> string $filearea helps indentify the file area.<br>
<b>param:</b> int $itemid helps identify the file area. Can be null if there are no files yet.<br>
<b>param:</b> array $options text and file options ('subdirs'=&gt;false, 'forcehttps'=&gt;false)<br>
<b>param:</b> string $text some html content that needs to have embedded links rewritten to point to the draft area.<br>
<b>return:</b> string|null returns string if $text was passed in, the rewritten $text is returned. Otherwise NULL.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_rewrite_pluginfile_urls" onClick="logFunction('file_rewrite_pluginfile_urls', 'filelib.php.source.html#l446')" href="filelib.php.source.html#l446">file_rewrite_pluginfile_urls</a>(<a href="../_variables/text.html">$text</a>, <a href="../_variables/file.html">$file</a>, <a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/component.html">$component</a>, <a href="../_variables/filearea.html">$filearea</a>, <a href="../_variables/itemid.html">$itemid</a>, array <a href="../_variables/options.html">$options</a>=null)&nbsp;&nbsp;
<a href="../_functions/file_rewrite_pluginfile_urls.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Convert encoded URLs in $text from the @@PLUGINFILE@@/... form to an actual URL.<BR>
</b><BR><b>param:</b> string $text The content that may contain ULRs in need of rewriting.<br>
<b>param:</b> string $file The script that should be used to serve these files. pluginfile.php, draftfile.php, etc.<br>
<b>param:</b> int $contextid This parameter and the next two identify the file area to use.<br>
<b>param:</b> string $component<br>
<b>param:</b> string $filearea helps identify the file area.<br>
<b>param:</b> int $itemid helps identify the file area.<br>
<b>param:</b> array $options text and file options ('forcehttps'=&gt;false)<br>
<b>return:</b> string the processed text.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_get_draft_area_info" onClick="logFunction('file_get_draft_area_info', 'filelib.php.source.html#l485')" href="filelib.php.source.html#l485">file_get_draft_area_info</a>(<a href="../_variables/draftitemid.html">$draftitemid</a>, <a href="../_variables/filepath.html">$filepath</a> = '/')&nbsp;&nbsp;
<a href="../_functions/file_get_draft_area_info.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns information about files in a draft area.<BR>
</b><BR><b>param:</b> int $draftitemid the draft area item id.<br>
<b>param:</b> string $filepath path to the directory from which the information have to be retrieved.<br>
<b>return:</b> array with the following entries:<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_is_draft_area_limit_reached" onClick="logFunction('file_is_draft_area_limit_reached', 'filelib.php.source.html#l534')" href="filelib.php.source.html#l534">file_is_draft_area_limit_reached</a>(<a href="../_variables/draftitemid.html">$draftitemid</a>, <a href="../_variables/areamaxbytes.html">$areamaxbytes</a>, <a href="../_variables/newfilesize.html">$newfilesize</a> = 0, <a href="../_variables/includereferences.html">$includereferences</a> = false)&nbsp;&nbsp;
<a href="../_functions/file_is_draft_area_limit_reached.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns whether a draft area has exceeded/will exceed its size limit.<BR>
</b><BR>Please note that the unlimited value for $areamaxbytes is -1 {@link FILE_AREA_MAX_BYTES_UNLIMITED}, not 0.<BR>
<BR>
<b>param:</b> int $draftitemid the draft area item id.<br>
<b>param:</b> int $areamaxbytes the maximum size allowed in this draft area.<br>
<b>param:</b> int $newfilesize the size that would be added to the current area.<br>
<b>param:</b> bool $includereferences true to include the size of the references in the area size.<br>
<b>return:</b> bool true if the area will/has exceeded its limit.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_get_user_used_space" onClick="logFunction('file_get_user_used_space', 'filelib.php.source.html#l560')" href="filelib.php.source.html#l560">file_get_user_used_space</a>()&nbsp;&nbsp;
<a href="../_functions/file_get_user_used_space.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get used space of files<BR>
</b><BR><b>return:</b> int total bytes<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_correct_filepath" onClick="logFunction('file_correct_filepath', 'filelib.php.source.html#l580')" href="filelib.php.source.html#l580">file_correct_filepath</a>(<a href="../_variables/str.html">$str</a>)&nbsp;&nbsp;
<a href="../_functions/file_correct_filepath.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Convert any string to a valid filepath<BR>
</b><BR><b>param:</b> string $str<br>
<b>return:</b> string path<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_get_drafarea_folders" onClick="logFunction('file_get_drafarea_folders', 'filelib.php.source.html#l594')" href="filelib.php.source.html#l594">file_get_drafarea_folders</a>(<a href="../_variables/draftitemid.html">$draftitemid</a>, <a href="../_variables/filepath.html">$filepath</a>, &amp;<a href="../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../_functions/file_get_drafarea_folders.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Generate a folder tree of draft area of current USER recursively<BR>
</b><BR><b>param:</b> int $draftitemid<br>
<b>param:</b> string $filepath<br>
<b>param:</b> mixed $data<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_get_drafarea_files" onClick="logFunction('file_get_drafarea_files', 'filelib.php.source.html#l627')" href="filelib.php.source.html#l627">file_get_drafarea_files</a>(<a href="../_variables/draftitemid.html">$draftitemid</a>, <a href="../_variables/filepath.html">$filepath</a> = '/')&nbsp;&nbsp;
<a href="../_functions/file_get_drafarea_files.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Listing all files (including folders) in current path (draft area)<BR>
used by file manager<BR>
</b><BR><b>param:</b> int $draftitemid<br>
<b>param:</b> string $filepath<br>
<b>return:</b> stdClass<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_get_submitted_draft_itemid" onClick="logFunction('file_get_submitted_draft_itemid', 'filelib.php.source.html#l719')" href="filelib.php.source.html#l719">file_get_submitted_draft_itemid</a>(<a href="../_variables/elname.html">$elname</a>)&nbsp;&nbsp;
<a href="../_functions/file_get_submitted_draft_itemid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns draft area itemid for a given element.<BR>
</b><BR><b>param:</b> string $elname name of formlib editor element, or a hidden form field that stores the draft area item id, etc.<br>
<b>return:</b> int the itemid, or 0 if there is not one yet.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_restore_source_field_from_draft_file" onClick="logFunction('file_restore_source_field_from_draft_file', 'filelib.php.source.html#l751')" href="filelib.php.source.html#l751">file_restore_source_field_from_draft_file</a>(<a href="../_variables/storedfile.html">$storedfile</a>)&nbsp;&nbsp;
<a href="../_functions/file_restore_source_field_from_draft_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Restore the original source field from draft files<BR>
</b><BR>Do not use this function because it makes field files.source inconsistent<BR>
for draft area files. This function will be deprecated in 2.6<BR>
<BR>
<b>param:</b> stored_file $storedfile This only works with draft files<br>
<b>return:</b> stored_file<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_save_draft_area_files" onClick="logFunction('file_save_draft_area_files', 'filelib.php.source.html#l772')" href="filelib.php.source.html#l772">file_save_draft_area_files</a>(<a href="../_variables/draftitemid.html">$draftitemid</a>, <a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/component.html">$component</a>, <a href="../_variables/filearea.html">$filearea</a>, <a href="../_variables/itemid.html">$itemid</a>, array <a href="../_variables/options.html">$options</a>=null, <a href="../_variables/text.html">$text</a>=null, <a href="../_variables/forcehttps.html">$forcehttps</a>=false)&nbsp;&nbsp;
<a href="../_functions/file_save_draft_area_files.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Saves files from a draft file area to a real one (merging the list of files).<BR>
Can rewrite URLs in some content at the same time if desired.<BR>
</b><BR><b>param:</b> int $draftitemid the id of the draft area to use. Normally obtained<br>
<b>param:</b> int $contextid This parameter and the next two identify the file area to save to.<br>
<b>param:</b> string $component<br>
<b>param:</b> string $filearea indentifies the file area.<br>
<b>param:</b> int $itemid helps identifies the file area.<br>
<b>param:</b> array $options area options (subdirs=&gt;false, maxfiles=-1, maxbytes=0)<br>
<b>param:</b> string $text some html content that needs to have embedded links rewritten<br>
<b>param:</b> bool $forcehttps force https urls.<br>
<b>return:</b> string|null if $text was passed in, the rewritten $text is returned. Otherwise NULL.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_rewrite_urls_to_pluginfile" onClick="logFunction('file_rewrite_urls_to_pluginfile', 'filelib.php.source.html#l970')" href="filelib.php.source.html#l970">file_rewrite_urls_to_pluginfile</a>(<a href="../_variables/text.html">$text</a>, <a href="../_variables/draftitemid.html">$draftitemid</a>, <a href="../_variables/forcehttps.html">$forcehttps</a> = false)&nbsp;&nbsp;
<a href="../_functions/file_rewrite_urls_to_pluginfile.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Convert the draft file area URLs in some content to @@PLUGINFILE@@ tokens<BR>
ready to be saved in the database. Normally, this is done automatically by<BR>
{@link file_save_draft_area_files()}.<BR>
</b><BR><b>param:</b> string $text the content to process.<br>
<b>param:</b> int $draftitemid the draft file area the content was using.<br>
<b>param:</b> bool $forcehttps whether the content contains https URLs. Default false.<br>
<b>return:</b> string the processed content.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_set_sortorder" onClick="logFunction('file_set_sortorder', 'filelib.php.source.html#l1009')" href="filelib.php.source.html#l1009">file_set_sortorder</a>(<a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/component.html">$component</a>, <a href="../_variables/filearea.html">$filearea</a>, <a href="../_variables/itemid.html">$itemid</a>, <a href="../_variables/filepath.html">$filepath</a>, <a href="../_variables/filename.html">$filename</a>, <a href="../_variables/sortorder.html">$sortorder</a>)&nbsp;&nbsp;
<a href="../_functions/file_set_sortorder.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set file sort order<BR>
</b><BR><b>param:</b> int $contextid the context id<br>
<b>param:</b> string $component file component<br>
<b>param:</b> string $filearea file area.<br>
<b>param:</b> int $itemid itemid.<br>
<b>param:</b> string $filepath file path.<br>
<b>param:</b> string $filename file name.<br>
<b>param:</b> int $sortorder the sort order of file.<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_reset_sortorder" onClick="logFunction('file_reset_sortorder', 'filelib.php.source.html#l1034')" href="filelib.php.source.html#l1034">file_reset_sortorder</a>(<a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/component.html">$component</a>, <a href="../_variables/filearea.html">$filearea</a>, <a href="../_variables/itemid.html">$itemid</a>=false)&nbsp;&nbsp;
<a href="../_functions/file_reset_sortorder.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>reset file sort order number to 0<BR>
</b><BR><b>param:</b> int $contextid the context id<br>
<b>param:</b> string $component<br>
<b>param:</b> string $filearea file area.<br>
<b>param:</b> int|bool $itemid itemid.<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_get_upload_error" onClick="logFunction('file_get_upload_error', 'filelib.php.source.html#l1059')" href="filelib.php.source.html#l1059">file_get_upload_error</a>(<a href="../_variables/errorcode.html">$errorcode</a>)&nbsp;&nbsp;
<a href="../_functions/file_get_upload_error.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns description of upload error<BR>
</b><BR><b>param:</b> int $errorcode found in $_FILES['filename.ext']['error']<br>
<b>return:</b> string error description string, '' if ok<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="format_array_postdata_for_curlcall" onClick="logFunction('format_array_postdata_for_curlcall', 'filelib.php.source.html#l1109')" href="filelib.php.source.html#l1109">format_array_postdata_for_curlcall</a>(<a href="../_variables/arraydata.html">$arraydata</a>, <a href="../_variables/currentdata.html">$currentdata</a>, &amp;<a href="../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../_functions/format_array_postdata_for_curlcall.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Recursive function formating an array in POST parameter<BR>
</b><BR><b>param:</b> array $arraydata - the array that we are going to format and add into &amp;$data array<br>
<b>param:</b> string $currentdata - a row of the final postdata array at instant T<br>
<b>param:</b> array $data - the final data array containing all POST parameters : 1 row = 1 parameter<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="format_postdata_for_curlcall" onClick="logFunction('format_postdata_for_curlcall', 'filelib.php.source.html#l1128')" href="filelib.php.source.html#l1128">format_postdata_for_curlcall</a>(<a href="../_variables/postdata.html">$postdata</a>)&nbsp;&nbsp;
<a href="../_functions/format_postdata_for_curlcall.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Transform a PHP array into POST parameter<BR>
(see the recursive function format_array_postdata_for_curlcall)<BR>
</b><BR><b>param:</b> array $postdata<br>
<b>return:</b> array containing all POST parameters&nbsp;&nbsp;(1 row = 1 POST parameter)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="download_file_content" onClick="logFunction('download_file_content', 'filelib.php.source.html#l1148')" href="filelib.php.source.html#l1148">download_file_content</a>(<a href="../_variables/url.html">$url</a>, <a href="../_variables/headers.html">$headers</a>=null, <a href="../_variables/postdata.html">$postdata</a>=null, <a href="../_variables/fullresponse.html">$fullresponse</a>=false, <a href="../_variables/timeout.html">$timeout</a>=300, <a href="../_variables/connecttimeout.html">$connecttimeout</a>=20, <a href="../_variables/skipcertverify.html">$skipcertverify</a>=false, <a href="../_variables/tofile.html">$tofile</a>=NULL, <a href="../_variables/calctimeout.html">$calctimeout</a>=false)&nbsp;&nbsp;
<a href="../_functions/download_file_content.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Fetches content of file from Internet (using proxy if defined). Uses cURL extension if present.<BR>
Due to security concerns only downloads from http(s) sources are supported.<BR>
</b><BR><b>param:</b> string $url file url starting with http(s)://<br>
<b>param:</b> array $headers http headers, null if none. If set, should be an<br>
<b>param:</b> array $postdata array means use POST request with given parameters<br>
<b>param:</b> bool $fullresponse return headers, responses, etc in a similar way snoopy does<br>
<b>param:</b> int $timeout timeout for complete download process including all file transfer<br>
<b>param:</b> int $connecttimeout timeout for connection to server; this is the timeout that<br>
<b>param:</b> bool $skipcertverify If true, the peer's SSL certificate will not be checked.<br>
<b>param:</b> string $tofile store the downloaded content to file instead of returning it.<br>
<b>param:</b> bool $calctimeout false by default, true enables an extra head request to try and determine<br>
<b>return:</b> stdClass|string|bool stdClass object if $fullresponse is true, false if request failed, true<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_mimetypes_array" onClick="logFunction('get_mimetypes_array', 'filelib.php.source.html#l1354')" href="filelib.php.source.html#l1354">get_mimetypes_array</a>()&nbsp;&nbsp;
<a href="../_functions/get_mimetypes_array.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns a list of information about file types based on extensions.<BR>
</b><BR>The following elements expected in value array for each extension:<BR>
'type' - mimetype<BR>
'icon' - location of the icon file. If value is FILENAME, then either pix/f/FILENAME.gif<BR>
or pix/f/FILENAME.png must be present in moodle and contain 16x16 filetype icon;<BR>
also files with bigger sizes under names<BR>
FILENAME-24, FILENAME-32, FILENAME-64, FILENAME-128, FILENAME-256 are recommended.<BR>
'groups' (optional) - array of filetype groups this filetype extension is part of;<BR>
commonly used in moodle the following groups:<BR>
- web_image - image that can be included as &lt;img&gt; in HTML<BR>
- image - image that we can parse using GD to find it's dimensions, also used for portfolio format<BR>
- video - file that can be imported as video in text editor<BR>
- audio - file that can be imported as audio in text editor<BR>
- archive - we can extract files from this archive<BR>
- spreadsheet - used for portfolio format<BR>
- document - used for portfolio format<BR>
- presentation - used for portfolio format<BR>
'string' (optional) - the name of the string from lang/en/mimetypes.php that displays<BR>
human-readable description for this filetype;<BR>
Function {@link get_mimetype_description()} first looks at the presence of string for<BR>
particular mimetype (value of 'type'), if not found looks for string specified in 'string'<BR>
attribute, if not found returns the value of 'type';<BR>
'defaulticon' (boolean, optional) - used by function {@link file_mimetype_icon()} to find<BR>
an icon for mimetype. If an entry with 'defaulticon' is not found for a particular mimetype,<BR>
this function will return first found icon; Especially usefull for types such as 'text/plain'<BR>
<BR>
<b>return:</b> array List of information about file types based on extensions.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="mimeinfo" onClick="logFunction('mimeinfo', 'filelib.php.source.html#l1393')" href="filelib.php.source.html#l1393">mimeinfo</a>(<a href="../_variables/element.html">$element</a>, <a href="../_variables/filename.html">$filename</a>)&nbsp;&nbsp;
<a href="../_functions/mimeinfo.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Obtains information about a filetype based on its extension. Will<BR>
use a default if no information is present about that particular<BR>
extension.<BR>
</b><BR><b>param:</b> string $element Desired information (usually 'icon'<br>
<b>param:</b> string $filename Filename we're looking up<br>
<b>return:</b> string Requested piece of information from array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="mimeinfo_from_type" onClick="logFunction('mimeinfo_from_type', 'filelib.php.source.html#l1438')" href="filelib.php.source.html#l1438">mimeinfo_from_type</a>(<a href="../_variables/element.html">$element</a>, <a href="../_variables/mimetype.html">$mimetype</a>)&nbsp;&nbsp;
<a href="../_functions/mimeinfo_from_type.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Obtains information about a filetype based on the MIME type rather than<BR>
the other way around.<BR>
</b><BR><b>param:</b> string $element Desired information ('extension', 'icon', 'icon-24', etc.)<br>
<b>param:</b> string $mimetype MIME type we're looking up<br>
<b>return:</b> string Requested piece of information from array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_file_icon" onClick="logFunction('file_file_icon', 'filelib.php.source.html#l1476')" href="filelib.php.source.html#l1476">file_file_icon</a>(<a href="../_variables/file.html">$file</a>, <a href="../_variables/size.html">$size</a> = null)&nbsp;&nbsp;
<a href="../_functions/file_file_icon.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return the relative icon path for a given file<BR>
</b><BR>Usage:<BR>
&lt;code&gt;<BR>
// $file - instance of stored_file or file_info<BR>
$icon = $OUTPUT-&gt;pix_url(file_file_icon($file))-&gt;out();<BR>
echo html_writer::empty_tag('img', array('src' =&gt; $icon, 'alt' =&gt; get_mimetype_description($file)));<BR>
&lt;/code&gt;<BR>
or<BR>
&lt;code&gt;<BR>
echo $OUTPUT-&gt;pix_icon(file_file_icon($file), get_mimetype_description($file));<BR>
&lt;/code&gt;<BR>
<BR>
<b>param:</b> stored_file|file_info|stdClass|array $file (in case of object attributes $file-&gt;filename<br>
<b>param:</b> int $size The size of the icon. Defaults to 16 can also be 24, 32, 64, 128, 256<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_folder_icon" onClick="logFunction('file_folder_icon', 'filelib.php.source.html#l1526')" href="filelib.php.source.html#l1526">file_folder_icon</a>(<a href="../_variables/iconsize.html">$iconsize</a> = null)&nbsp;&nbsp;
<a href="../_functions/file_folder_icon.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return the relative icon path for a folder image<BR>
</b><BR>Usage:<BR>
&lt;code&gt;<BR>
$icon = $OUTPUT-&gt;pix_url(file_folder_icon())-&gt;out();<BR>
echo html_writer::empty_tag('img', array('src' =&gt; $icon));<BR>
&lt;/code&gt;<BR>
or<BR>
&lt;code&gt;<BR>
echo $OUTPUT-&gt;pix_icon(file_folder_icon(32));<BR>
&lt;/code&gt;<BR>
<BR>
<b>param:</b> int $iconsize The size of the icon. Defaults to 16 can also be 24, 32, 48, 64, 72, 80, 96, 128, 256<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_mimetype_icon" onClick="logFunction('file_mimetype_icon', 'filelib.php.source.html#l1559')" href="filelib.php.source.html#l1559">file_mimetype_icon</a>(<a href="../_variables/mimetype.html">$mimetype</a>, <a href="../_variables/size.html">$size</a> = NULL)&nbsp;&nbsp;
<a href="../_functions/file_mimetype_icon.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the relative icon path for a given mime type<BR>
</b><BR>This function should be used in conjunction with $OUTPUT-&gt;pix_url to produce<BR>
a return the full path to an icon.<BR>
<BR>
&lt;code&gt;<BR>
$mimetype = 'image/jpg';<BR>
$icon = $OUTPUT-&gt;pix_url(file_mimetype_icon($mimetype))-&gt;out();<BR>
echo html_writer::empty_tag('img', array('src' =&gt; $icon, 'alt' =&gt; get_mimetype_description($mimetype)));<BR>
&lt;/code&gt;<BR>
<BR>
<b>param:</b> string $mimetype The mimetype to fetch an icon for<br>
<b>param:</b> int $size The size of the icon. Defaults to 16 can also be 24, 32, 64, 128, 256<br>
<b>return:</b> string The relative path to the icon<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_extension_icon" onClick="logFunction('file_extension_icon', 'filelib.php.source.html#l1582')" href="filelib.php.source.html#l1582">file_extension_icon</a>(<a href="../_variables/filename.html">$filename</a>, <a href="../_variables/size.html">$size</a> = NULL)&nbsp;&nbsp;
<a href="../_functions/file_extension_icon.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the relative icon path for a given file name<BR>
</b><BR>This function should be used in conjunction with $OUTPUT-&gt;pix_url to produce<BR>
a return the full path to an icon.<BR>
<BR>
&lt;code&gt;<BR>
$filename = '.jpg';<BR>
$icon = $OUTPUT-&gt;pix_url(file_extension_icon($filename))-&gt;out();<BR>
echo html_writer::empty_tag('img', array('src' =&gt; $icon, 'alt' =&gt; '...'));<BR>
&lt;/code&gt;<BR>
<BR>
<b>param:</b> string $filename The filename to get the icon for<br>
<b>param:</b> int $size The size of the icon. Defaults to 16 can also be 24, 32, 64, 128, 256<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_mimetype_description" onClick="logFunction('get_mimetype_description', 'filelib.php.source.html#l1606')" href="filelib.php.source.html#l1606">get_mimetype_description</a>(<a href="../_variables/obj.html">$obj</a>, <a href="../_variables/capitalise.html">$capitalise</a>=false)&nbsp;&nbsp;
<a href="../_functions/get_mimetype_description.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Obtains descriptions for file types (e.g. 'Microsoft Word document') from the<BR>
mimetypes.php language file.<BR>
</b><BR><b>param:</b> mixed $obj - instance of stored_file or file_info or array/stdClass with field<br>
<b>param:</b> bool $capitalise If true, capitalises first character of result<br>
<b>return:</b> string Text description<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_get_typegroup" onClick="logFunction('file_get_typegroup', 'filelib.php.source.html#l1690')" href="filelib.php.source.html#l1690">file_get_typegroup</a>(<a href="../_variables/element.html">$element</a>, <a href="../_variables/groups.html">$groups</a>)&nbsp;&nbsp;
<a href="../_functions/file_get_typegroup.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns array of elements of type $element in type group(s)<BR>
</b><BR><b>param:</b> string $element name of the element we are interested in, usually 'type' or 'extension'<br>
<b>param:</b> string|array $groups one group or array of groups/extensions/mimetypes<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_extension_in_typegroup" onClick="logFunction('file_extension_in_typegroup', 'filelib.php.source.html#l1728')" href="filelib.php.source.html#l1728">file_extension_in_typegroup</a>(<a href="../_variables/filename.html">$filename</a>, <a href="../_variables/groups.html">$groups</a>, <a href="../_variables/checktype.html">$checktype</a> = false)&nbsp;&nbsp;
<a href="../_functions/file_extension_in_typegroup.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if file with name $filename has one of the extensions in groups $groups<BR>
</b><BR><b>param:</b> string $filename name of the file to check<br>
<b>param:</b> string|array $groups one group or array of groups to check<br>
<b>param:</b> bool $checktype if true and extension check fails, find the mimetype and check if<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_mimetype_in_typegroup" onClick="logFunction('file_mimetype_in_typegroup', 'filelib.php.source.html#l1746')" href="filelib.php.source.html#l1746">file_mimetype_in_typegroup</a>(<a href="../_variables/mimetype.html">$mimetype</a>, <a href="../_variables/groups.html">$groups</a>)&nbsp;&nbsp;
<a href="../_functions/file_mimetype_in_typegroup.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if mimetype $mimetype belongs to one of the groups $groups<BR>
</b><BR><b>param:</b> string $mimetype<br>
<b>param:</b> string|array $groups one group or array of groups to check<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="send_file_not_found" onClick="logFunction('send_file_not_found', 'filelib.php.source.html#l1758')" href="filelib.php.source.html#l1758">send_file_not_found</a>()&nbsp;&nbsp;
<a href="../_functions/send_file_not_found.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Requested file is not found or not accessible, does not return, terminates script<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="send_header_404" onClick="logFunction('send_header_404', 'filelib.php.source.html#l1776')" href="filelib.php.source.html#l1776">send_header_404</a>()&nbsp;&nbsp;
<a href="../_functions/send_header_404.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Helper function to send correct 404 for server.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="readfile_allow_large" onClick="logFunction('readfile_allow_large', 'filelib.php.source.html#l1787')" href="filelib.php.source.html#l1787">readfile_allow_large</a>(<a href="../_variables/path.html">$path</a>, <a href="../_variables/filesize.html">$filesize</a> = -1)&nbsp;&nbsp;
<a href="../_functions/readfile_allow_large.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>The readfile function can fail when files are larger than 2GB (even on 64-bit<BR>
platforms). This wrapper uses readfile for small files and custom code for<BR>
large ones.<BR>
</b><BR><b>param:</b> string $path Path to file<br>
<b>param:</b> int $filesize Size of file (if left out, will get it automatically)<br>
<b>return:</b> int|bool Size read (will always be $filesize) or false if failed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="readfile_accel" onClick="logFunction('readfile_accel', 'filelib.php.source.html#l1824')" href="filelib.php.source.html#l1824">readfile_accel</a>(<a href="../_variables/file.html">$file</a>, <a href="../_variables/mimetype.html">$mimetype</a>, <a href="../_variables/accelerate.html">$accelerate</a>)&nbsp;&nbsp;
<a href="../_functions/readfile_accel.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Enhanced readfile() with optional acceleration.<BR>
</b><BR><b>param:</b> string|stored_file $file<br>
<b>param:</b> string $mimetype<br>
<b>param:</b> bool $accelerate<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="readstring_accel" onClick="logFunction('readstring_accel', 'filelib.php.source.html#l1950')" href="filelib.php.source.html#l1950">readstring_accel</a>(<a href="../_variables/string.html">$string</a>, <a href="../_variables/mimetype.html">$mimetype</a>, <a href="../_variables/accelerate.html">$accelerate</a>)&nbsp;&nbsp;
<a href="../_functions/readstring_accel.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Similar to readfile_accel() but designed for strings.<BR>
</b><BR><b>param:</b> string $string<br>
<b>param:</b> string $mimetype<br>
<b>param:</b> bool $accelerate<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="send_temp_file" onClick="logFunction('send_temp_file', 'filelib.php.source.html#l1980')" href="filelib.php.source.html#l1980">send_temp_file</a>(<a href="../_variables/path.html">$path</a>, <a href="../_variables/filename.html">$filename</a>, <a href="../_variables/pathisstring.html">$pathisstring</a>=false)&nbsp;&nbsp;
<a href="../_functions/send_temp_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handles the sending of temporary file to user, download is forced.<BR>
File is deleted after abort or successful sending, does not return, script terminated<BR>
</b><BR><b>param:</b> string $path path to file, preferably from moodledata/temp/something; or content of file itself<br>
<b>param:</b> string $filename proposed file name when saving file<br>
<b>param:</b> bool $pathisstring If the path is string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="send_temp_file_finished" onClick="logFunction('send_temp_file_finished', 'filelib.php.source.html#l2037')" href="filelib.php.source.html#l2037">send_temp_file_finished</a>(<a href="../_variables/path.html">$path</a>)&nbsp;&nbsp;
<a href="../_functions/send_temp_file_finished.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Internal callback function used by send_temp_file()<BR>
</b><BR><b>param:</b> string $path<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="send_file" onClick="logFunction('send_file', 'filelib.php.source.html#l2048')" href="filelib.php.source.html#l2048">send_file</a>(<a href="../_variables/path.html">$path</a>, <a href="../_variables/filename.html">$filename</a>, <a href="../_variables/lifetime.html">$lifetime</a> = null , <a href="../_variables/filter.html">$filter</a>=0, <a href="../_variables/pathisstring.html">$pathisstring</a>=false, <a href="../_variables/forcedownload.html">$forcedownload</a>=false, <a href="../_variables/mimetype.html">$mimetype</a>='', <a href="../_variables/dontdie.html">$dontdie</a>=false)&nbsp;&nbsp;
<a href="../_functions/send_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handles the sending of file data to the user's browser, including support for<BR>
byteranges etc.<BR>
</b><BR><b>param:</b> string $path Path of file on disk (including real filename), or actual content of file as string<br>
<b>param:</b> string $filename Filename to send<br>
<b>param:</b> int $lifetime Number of seconds before the file should expire from caches (null means $CFG-&gt;filelifetime)<br>
<b>param:</b> int $filter 0 (default)=no filtering, 1=all files, 2=html files only<br>
<b>param:</b> bool $pathisstring If true (default false), $path is the content to send and not the pathname<br>
<b>param:</b> bool $forcedownload If true (default false), forces download of file rather than view in browser/plugin<br>
<b>param:</b> string $mimetype Include to specify the MIME type; leave blank to have it guess the type from $filename<br>
<b>param:</b> bool $dontdie - return control to caller afterwards. this is not recommended and only used for cleanup tasks.<br>
<b>return:</b> null script execution stopped unless $dontdie is true<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="send_stored_file" onClick="logFunction('send_stored_file', 'filelib.php.source.html#l2170')" href="filelib.php.source.html#l2170">send_stored_file</a>(<a href="../_variables/stored_file.html">$stored_file</a>, <a href="../_variables/lifetime.html">$lifetime</a>=null, <a href="../_variables/filter.html">$filter</a>=0, <a href="../_variables/forcedownload.html">$forcedownload</a>=false, array <a href="../_variables/options.html">$options</a>=array()&nbsp;&nbsp;
<a href="../_functions/send_stored_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handles the sending of file data to the user's browser, including support for<BR>
byteranges etc.<BR>
</b><BR>The $options parameter supports the following keys:<BR>
(string|null) preview - send the preview of the file (e.g. &quot;thumb&quot; for a thumbnail)<BR>
(string|null) filename - overrides the implicit filename<BR>
(bool) dontdie - return control to caller afterwards. this is not recommended and only used for cleanup tasks.<BR>
if this is passed as true, ignore_user_abort is called.&nbsp;&nbsp;if you don't want your processing to continue on cancel,<BR>
you must detect this case when control is returned using connection_aborted. Please not that session is closed<BR>
and should not be reopened<BR>
(string|null) cacheability - force the cacheability setting of the HTTP response, &quot;private&quot; or &quot;public&quot;,<BR>
when $lifetime is greater than 0. Cacheability defaults to &quot;private&quot; when logged in as other than guest; otherwise,<BR>
defaults to &quot;public&quot;.<BR>
<BR>
<b>param:</b> stored_file $stored_file local file object<br>
<b>param:</b> int $lifetime Number of seconds before the file should expire from caches (null means $CFG-&gt;filelifetime)<br>
<b>param:</b> int $filter 0 (default)=no filtering, 1=all files, 2=html files only<br>
<b>param:</b> bool $forcedownload If true (default false), forces download of file rather than view in browser/plugin<br>
<b>param:</b> array $options additional options affecting the file serving<br>
<b>return:</b> null script execution stopped unless $options['dontdie'] is true<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_records_csv" onClick="logFunction('get_records_csv', 'filelib.php.source.html#l2347')" href="filelib.php.source.html#l2347">get_records_csv</a>(<a href="../_variables/file.html">$file</a>, <a href="../_variables/table.html">$table</a>)&nbsp;&nbsp;
<a href="../_functions/get_records_csv.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Retrieves an array of records from a CSV file and places<BR>
them into a given table structure<BR>
</b><BR><b>param:</b> string $file The path to a CSV file<br>
<b>param:</b> string $table The table to retrieve columns from<br>
<b>return:</b> bool|array Returns an array of CSV records or false<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="put_records_csv" onClick="logFunction('put_records_csv', 'filelib.php.source.html#l2397')" href="filelib.php.source.html#l2397">put_records_csv</a>(<a href="../_variables/file.html">$file</a>, <a href="../_variables/records.html">$records</a>, <a href="../_variables/table.html">$table</a> = NULL)&nbsp;&nbsp;
<a href="../_functions/put_records_csv.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create a file with CSV contents<BR>
</b><BR><b>param:</b> string $file The file to put the CSV content into<br>
<b>param:</b> array $records An array of records to write to a CSV file<br>
<b>param:</b> string $table The table to get columns from<br>
<b>return:</b> bool success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="fulldelete" onClick="logFunction('fulldelete', 'filelib.php.source.html#l2468')" href="filelib.php.source.html#l2468">fulldelete</a>(<a href="../_variables/location.html">$location</a>)&nbsp;&nbsp;
<a href="../_functions/fulldelete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Recursively delete the file or folder with path $location. That is,<BR>
if it is a file delete it. If it is a folder, delete all its content<BR>
then delete it. If $location does not exist to start, that is not<BR>
considered an error.<BR>
</b><BR><b>param:</b> string $location the path to remove.<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="byteserving_send_file" onClick="logFunction('byteserving_send_file', 'filelib.php.source.html#l2513')" href="filelib.php.source.html#l2513">byteserving_send_file</a>(<a href="../_variables/handle.html">$handle</a>, <a href="../_variables/mimetype.html">$mimetype</a>, <a href="../_variables/ranges.html">$ranges</a>, <a href="../_variables/filesize.html">$filesize</a>)&nbsp;&nbsp;
<a href="../_functions/byteserving_send_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Send requested byterange of file.<BR>
</b><BR><b>param:</b> resource $handle A file handle<br>
<b>param:</b> string $mimetype The mimetype for the output<br>
<b>param:</b> array $ranges An array of ranges to send<br>
<b>param:</b> string $filesize The size of the content if only one range is used<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="file_modify_html_header" onClick="logFunction('file_modify_html_header', 'filelib.php.source.html#l2586')" href="filelib.php.source.html#l2586">file_modify_html_header</a>(<a href="../_variables/text.html">$text</a>)&nbsp;&nbsp;
<a href="../_functions/file_modify_html_header.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>add includes (js and css) into uploaded files<BR>
before returning them, useful for themes and utf.js includes<BR>
</b><BR><b>param:</b> string $text text to search and replace<br>
<b>return:</b> string text with added head includes<br>
</td></tr></table>

<br>
</div></div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
