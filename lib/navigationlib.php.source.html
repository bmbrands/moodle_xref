<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/navigationlib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='navigationlib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/</a> -> <a href="navigationlib.php.html">navigationlib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="navigationlib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="navigationlib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * This file contains classes used to manage the navigation structures within Moodle.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @since      Moodle 2.0</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @package    core</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  2009 Sam Hemelryk</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment">/**</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * The name that will be used to separate the navigation cache within SESSION</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> */</span>
<a name="l31"><span class="linenum">  31</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('NAVIGATION_CACHE_NAME')" href="../_constants/NAVIGATION_CACHE_NAME.html" onMouseOver="constPopup(event,'NAVIGATION_CACHE_NAME')">NAVIGATION_CACHE_NAME</a>', 'navigation');
<a name="l32"><span class="linenum">  32</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('NAVIGATION_SITE_ADMIN_CACHE_NAME')" href="../_constants/NAVIGATION_SITE_ADMIN_CACHE_NAME.html" onMouseOver="constPopup(event,'NAVIGATION_SITE_ADMIN_CACHE_NAME')">NAVIGATION_SITE_ADMIN_CACHE_NAME</a>', 'navigationsiteadmin');
<a name="l33"><span class="linenum">  33</span></a>  
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">/**</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * This class is used to represent a node in a navigation tree</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> *</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * This class is used to represent a node in a navigation tree within Moodle,</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * the tree could be one of global navigation, settings navigation, or the navbar.</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * Each node can be one of two types either a Leaf (default) or a branch.</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * When a node is first created it is created as a leaf, when/if children are added</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * the node then becomes a branch.</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> *</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> * @package   core</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> * @category  navigation</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * @copyright 2009 Sam Hemelryk</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> */</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a> <span class="keyword">implements</span> <a class="class" onClick="logClass('renderable')" href="../_classes/renderable.html" onMouseOver="classPopup(event,'renderable')">renderable</a> {
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">    /** @var int Used to identify this node a leaf (default) 0 */</span>
<a name="l50"><span class="linenum">  50</span></a>      const NODETYPE_LEAF =   0;
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">    /** @var int Used to identify this node a branch, happens with children  1 */</span>
<a name="l52"><span class="linenum">  52</span></a>      const NODETYPE_BRANCH = 1;
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">    /** @var null Unknown node type null */</span>
<a name="l54"><span class="linenum">  54</span></a>      const <a class="constant" onClick="logConstant('TYPE_UNKNOWN')" href="../_constants/TYPE_UNKNOWN.html" onMouseOver="constPopup(event,'TYPE_UNKNOWN')">TYPE_UNKNOWN</a> =    null;
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">    /** @var int System node type 0 */</span>
<a name="l56"><span class="linenum">  56</span></a>      const TYPE_ROOTNODE =   0;
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">    /** @var int System node type 1 */</span>
<a name="l58"><span class="linenum">  58</span></a>      const TYPE_SYSTEM =     1;
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">    /** @var int Category node type 10 */</span>
<a name="l60"><span class="linenum">  60</span></a>      const TYPE_CATEGORY =   10;
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">    /** var int Category displayed in MyHome navigation node */</span>
<a name="l62"><span class="linenum">  62</span></a>      const TYPE_MY_CATEGORY = 11;
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">    /** @var int Course node type 20 */</span>
<a name="l64"><span class="linenum">  64</span></a>      const TYPE_COURSE =     20;
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">    /** @var int Course Structure node type 30 */</span>
<a name="l66"><span class="linenum">  66</span></a>      const TYPE_SECTION =    30;
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">    /** @var int Activity node type, e.g. Forum, Quiz 40 */</span>
<a name="l68"><span class="linenum">  68</span></a>      const TYPE_ACTIVITY =   40;
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">    /** @var int Resource node type, e.g. Link to a file, or label 50 */</span>
<a name="l70"><span class="linenum">  70</span></a>      const TYPE_RESOURCE =   50;
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment">    /** @var int A custom node type, default when adding without specifing type 60 */</span>
<a name="l72"><span class="linenum">  72</span></a>      const TYPE_CUSTOM =     60;
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">    /** @var int Setting node type, used only within settings nav 70 */</span>
<a name="l74"><span class="linenum">  74</span></a>      const TYPE_SETTING =    70;
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">    /** @var int site admin branch node type, used only within settings nav 71 */</span>
<a name="l76"><span class="linenum">  76</span></a>      const TYPE_SITE_ADMIN = 71;
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">    /** @var int Setting node type, used only within settings nav 80 */</span>
<a name="l78"><span class="linenum">  78</span></a>      const TYPE_USER =       80;
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">    /** @var int Setting node type, used for containers of no importance 90 */</span>
<a name="l80"><span class="linenum">  80</span></a>      const TYPE_CONTAINER =  90;
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">    /** var int Course the current user is not enrolled in */</span>
<a name="l82"><span class="linenum">  82</span></a>      const COURSE_OTHER = 0;
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">    /** var int Course the current user is enrolled in but not viewing */</span>
<a name="l84"><span class="linenum">  84</span></a>      const COURSE_MY = 1;
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">    /** var int Course the current user is currently viewing */</span>
<a name="l86"><span class="linenum">  86</span></a>      const COURSE_CURRENT = 2;
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">    /** @var int Parameter to aid the coder in tracking [optional] */</span>
<a name="l89"><span class="linenum">  89</span></a>      public <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a> = null;
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">    /** @var string|int The identifier for the node, used to retrieve the node */</span>
<a name="l91"><span class="linenum">  91</span></a>      public <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = null;
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">    /** @var string The text to use for the node */</span>
<a name="l93"><span class="linenum">  93</span></a>      public <a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a> = null;
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">    /** @var string Short text to use if requested [optional] */</span>
<a name="l95"><span class="linenum">  95</span></a>      public <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a> = null;
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">    /** @var string The title attribute for an action if one is defined */</span>
<a name="l97"><span class="linenum">  97</span></a>      public <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a> = null;
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">    /** @var string A string that can be used to build a help button */</span>
<a name="l99"><span class="linenum">  99</span></a>      public <a class="var it16964" onMouseOver="hilite(16964)" onMouseOut="lolite()" onClick="logVariable('helpbutton')" href="../_variables/helpbutton.html">$helpbutton</a> = null;
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment">    /** @var moodle_url|action_link|null An action for the node (link) */</span>
<a name="l101"><span class="linenum"> 101</span></a>      public <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a> = null;
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">    /** @var pix_icon The path to an icon to use for this node */</span>
<a name="l103"><span class="linenum"> 103</span></a>      public <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = null;
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">    /** @var int See TYPE_* constants defined for this class */</span>
<a name="l105"><span class="linenum"> 105</span></a>      public <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = self::<a class="constant" onClick="logConstant('TYPE_UNKNOWN')" href="../_constants/TYPE_UNKNOWN.html" onMouseOver="constPopup(event,'TYPE_UNKNOWN')">TYPE_UNKNOWN</a>;
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">    /** @var int See NODETYPE_* constants defined for this class */</span>
<a name="l107"><span class="linenum"> 107</span></a>      public <a class="var it15868" onMouseOver="hilite(15868)" onMouseOut="lolite()" onClick="logVariable('nodetype')" href="../_variables/nodetype.html">$nodetype</a> = self::NODETYPE_LEAF;
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">    /** @var bool If set to true the node will be collapsed by default */</span>
<a name="l109"><span class="linenum"> 109</span></a>      public <a class="var it16969" onMouseOver="hilite(16969)" onMouseOut="lolite()" onClick="logVariable('collapse')" href="../_variables/collapse.html">$collapse</a> = false;
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">    /** @var bool If set to true the node will be expanded by default */</span>
<a name="l111"><span class="linenum"> 111</span></a>      public <a class="var it16968" onMouseOver="hilite(16968)" onMouseOut="lolite()" onClick="logVariable('forceopen')" href="../_variables/forceopen.html">$forceopen</a> = false;
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">    /** @var array An array of CSS classes for the node */</span>
<a name="l113"><span class="linenum"> 113</span></a>      public <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('classes')" href="../_variables/classes.html">$classes</a> = array();
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">    /** @var navigation_node_collection An array of child nodes */</span>
<a name="l115"><span class="linenum"> 115</span></a>      public <a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = array();
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">    /** @var bool If set to true the node will be recognised as active */</span>
<a name="l117"><span class="linenum"> 117</span></a>      public <a class="var it6567" onMouseOver="hilite(6567)" onMouseOut="lolite()" onClick="logVariable('isactive')" href="../_variables/isactive.html">$isactive</a> = false;
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">    /** @var bool If set to true the node will be dimmed */</span>
<a name="l119"><span class="linenum"> 119</span></a>      public <a class="var it1532" onMouseOver="hilite(1532)" onMouseOut="lolite()" onClick="logVariable('hidden')" href="../_variables/hidden.html">$hidden</a> = false;
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">    /** @var bool If set to false the node will not be displayed */</span>
<a name="l121"><span class="linenum"> 121</span></a>      public <a class="var it4914" onMouseOver="hilite(4914)" onMouseOut="lolite()" onClick="logVariable('display')" href="../_variables/display.html">$display</a> = true;
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">    /** @var bool If set to true then an HR will be printed before the node */</span>
<a name="l123"><span class="linenum"> 123</span></a>      public <a class="var it16972" onMouseOver="hilite(16972)" onMouseOut="lolite()" onClick="logVariable('preceedwithhr')" href="../_variables/preceedwithhr.html">$preceedwithhr</a> = false;
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">    /** @var bool If set to true the the navigation bar should ignore this node */</span>
<a name="l125"><span class="linenum"> 125</span></a>      public <a class="var it11512" onMouseOver="hilite(11512)" onMouseOut="lolite()" onClick="logVariable('mainnavonly')" href="../_variables/mainnavonly.html">$mainnavonly</a> = false;
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">    /** @var bool If set to true a title will be added to the action no matter what */</span>
<a name="l127"><span class="linenum"> 127</span></a>      public <a class="var it37443" onMouseOver="hilite(37443)" onMouseOut="lolite()" onClick="logVariable('forcetitle')" href="../_variables/forcetitle.html">$forcetitle</a> = false;
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">    /** @var navigation_node A reference to the node parent, you should never set this directly you should always call set_parent */</span>
<a name="l129"><span class="linenum"> 129</span></a>      public <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a> = null;
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">    /** @var bool Override to not display the icon even if one is provided **/</span>
<a name="l131"><span class="linenum"> 131</span></a>      public <a class="var it4411" onMouseOver="hilite(4411)" onMouseOut="lolite()" onClick="logVariable('hideicon')" href="../_variables/hideicon.html">$hideicon</a> = false;
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">    /** @var bool Set to true if we KNOW that this node can be expanded.  */</span>
<a name="l133"><span class="linenum"> 133</span></a>      public <a class="var it16961" onMouseOver="hilite(16961)" onMouseOut="lolite()" onClick="logVariable('isexpandable')" href="../_variables/isexpandable.html">$isexpandable</a> = false;
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">    /** @var array */</span>
<a name="l135"><span class="linenum"> 135</span></a>      protected <a class="var it37444" onMouseOver="hilite(37444)" onMouseOut="lolite()" onClick="logVariable('namedtypes')" href="../_variables/namedtypes.html">$namedtypes</a> = array(0=&gt;'system',10=&gt;'category',20=&gt;'course',30=&gt;'structure',40=&gt;'activity',50=&gt;'resource',60=&gt;'custom',70=&gt;'setting',71=&gt;'siteadmin', 80=&gt;'user');
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">    /** @var moodle_url */</span>
<a name="l137"><span class="linenum"> 137</span></a>      protected static <a class="var it37445" onMouseOver="hilite(37445)" onMouseOut="lolite()" onClick="logVariable('fullmeurl')" href="../_variables/fullmeurl.html">$fullmeurl</a> = null;
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">    /** @var bool toogles auto matching of active node */</span>
<a name="l139"><span class="linenum"> 139</span></a>      public static <a class="var it37446" onMouseOver="hilite(37446)" onMouseOut="lolite()" onClick="logVariable('autofindactive')" href="../_variables/autofindactive.html">$autofindactive</a> = true;
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">    /** @var bool should we load full admin tree or rely on AJAX for performance reasons */</span>
<a name="l141"><span class="linenum"> 141</span></a>      protected static <a class="var it37447" onMouseOver="hilite(37447)" onMouseOut="lolite()" onClick="logVariable('loadadmintree')" href="../_variables/loadadmintree.html">$loadadmintree</a> = false;
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">    /** @var mixed If set to an int, that section will be included even if it has no activities */</span>
<a name="l143"><span class="linenum"> 143</span></a>      public <a class="var it7921" onMouseOver="hilite(7921)" onMouseOut="lolite()" onClick="logVariable('includesectionnum')" href="../_variables/includesectionnum.html">$includesectionnum</a> = false;
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>      <span class="comment">/**</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">     * Constructs a new navigation_node</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     *</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     * @param array|string $properties Either an array of properties or a string to use</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     *                     as the text for the node</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     */</span>
<a name="l151"><span class="linenum"> 151</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>) {
<a name="l152"><span class="linenum"> 152</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>)) {
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">            // Check the array for each property that we allow to set at construction.</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">            // text         - The main content for the node</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">            // shorttext    - A short text if required for the node</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">            // icon         - The icon to display for the node</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">            // type         - The type of the node</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">            // key          - The key to use to identify the node</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">            // parent       - A reference to the nodes parent</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">            // action       - The action to attribute to this node, usually a URL to link to</span>
<a name="l161"><span class="linenum"> 161</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('text', <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>)) {
<a name="l162"><span class="linenum"> 162</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('text')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/text.html">text</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>['text'];
<a name="l163"><span class="linenum"> 163</span></a>              }
<a name="l164"><span class="linenum"> 164</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('shorttext', <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>)) {
<a name="l165"><span class="linenum"> 165</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('shorttext')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/shorttext.html">shorttext</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>['shorttext'];
<a name="l166"><span class="linenum"> 166</span></a>              }
<a name="l167"><span class="linenum"> 167</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('icon', <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>)) {
<a name="l168"><span class="linenum"> 168</span></a>                  <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>['icon'] = <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/navigationitem', '');
<a name="l169"><span class="linenum"> 169</span></a>              }
<a name="l170"><span class="linenum"> 170</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('icon')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>['icon'];
<a name="l171"><span class="linenum"> 171</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('icon')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> instanceof pix_icon) {
<a name="l172"><span class="linenum"> 172</span></a>                  if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('icon')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>-&gt;attributes['class'])) {
<a name="l173"><span class="linenum"> 173</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('icon')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>-&gt;attributes['class'] = 'navicon';
<a name="l174"><span class="linenum"> 174</span></a>                  } else {
<a name="l175"><span class="linenum"> 175</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('icon')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>-&gt;attributes['class'] .= ' navicon';
<a name="l176"><span class="linenum"> 176</span></a>                  }
<a name="l177"><span class="linenum"> 177</span></a>              }
<a name="l178"><span class="linenum"> 178</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('type', <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>)) {
<a name="l179"><span class="linenum"> 179</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/type.html">type</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>['type'];
<a name="l180"><span class="linenum"> 180</span></a>              } else {
<a name="l181"><span class="linenum"> 181</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/type.html">type</a> = self::TYPE_CUSTOM;
<a name="l182"><span class="linenum"> 182</span></a>              }
<a name="l183"><span class="linenum"> 183</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('key', <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>)) {
<a name="l184"><span class="linenum"> 184</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('key')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/key.html">key</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>['key'];
<a name="l185"><span class="linenum"> 185</span></a>              }
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">            // This needs to happen last because of the check_if_active call that occurs</span>
<a name="l187"><span class="linenum"> 187</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('action', <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>)) {
<a name="l188"><span class="linenum"> 188</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('action')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/action.html">action</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>['action'];
<a name="l189"><span class="linenum"> 189</span></a>                  if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('action')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/action.html">action</a>)) {
<a name="l190"><span class="linenum"> 190</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('action')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/action.html">action</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('action')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/action.html">action</a>);
<a name="l191"><span class="linenum"> 191</span></a>                  }
<a name="l192"><span class="linenum"> 192</span></a>                  if (self::<a class="var it37446" onMouseOver="hilite(37446)" onMouseOut="lolite()" onClick="logVariable('autofindactive')" href="../_variables/autofindactive.html">$autofindactive</a>) {
<a name="l193"><span class="linenum"> 193</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_if_active')" href="../_functions/check_if_active.html" onMouseOver="funcPopup(event,'check_if_active')">check_if_active</a>();
<a name="l194"><span class="linenum"> 194</span></a>                  }
<a name="l195"><span class="linenum"> 195</span></a>              }
<a name="l196"><span class="linenum"> 196</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('parent', <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>)) {
<a name="l197"><span class="linenum"> 197</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_parent')" href="../_functions/set_parent.html" onMouseOver="funcPopup(event,'set_parent')">set_parent</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>['parent']);
<a name="l198"><span class="linenum"> 198</span></a>              }
<a name="l199"><span class="linenum"> 199</span></a>          } else if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>)) {
<a name="l200"><span class="linenum"> 200</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('text')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/text.html">text</a> = <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>;
<a name="l201"><span class="linenum"> 201</span></a>          }
<a name="l202"><span class="linenum"> 202</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('text')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/text.html">text</a> === null) {
<a name="l203"><span class="linenum"> 203</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('You must set the text for the node when you create it.');
<a name="l204"><span class="linenum"> 204</span></a>          }
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">        // Instantiate a new navigation node collection for this nodes children</span>
<a name="l206"><span class="linenum"> 206</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_node_collection')" href="../_classes/navigation_node_collection.html" onMouseOver="classPopup(event,'navigation_node_collection')">navigation_node_collection</a>();
<a name="l207"><span class="linenum"> 207</span></a>      }
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>      <span class="comment">/**</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">     * Checks if this node is the active node.</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">     *</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">     * This is determined by comparing the action for the node against the</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     * defined URL for the page. A match will see this node marked as active.</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     *</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     * @param int $strength One of URL_MATCH_EXACT, URL_MATCH_PARAMS, or URL_MATCH_BASE</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">     * @return bool</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">     */</span>
<a name="l218"><span class="linenum"> 218</span></a>      public function <a class="function" onClick="logFunction('check_if_active')" href="../_functions/check_if_active.html" onMouseOver="funcPopup(event,'check_if_active')">check_if_active</a>(<a class="var it37448" onMouseOver="hilite(37448)" onMouseOut="lolite()" onClick="logVariable('strength')" href="../_variables/strength.html">$strength</a>=<a class="constant" onClick="logConstant('URL_MATCH_EXACT')" href="../_constants/URL_MATCH_EXACT.html" onMouseOver="constPopup(event,'URL_MATCH_EXACT')">URL_MATCH_EXACT</a>) {
<a name="l219"><span class="linenum"> 219</span></a>          global <a class="var it8619" onMouseOver="hilite(8619)" onMouseOut="lolite()" onClick="logVariable('FULLME')" href="../_variables/FULLME.html">$FULLME</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">        // Set fullmeurl if it hasn't already been set</span>
<a name="l221"><span class="linenum"> 221</span></a>          if (self::<a class="var it37445" onMouseOver="hilite(37445)" onMouseOut="lolite()" onClick="logVariable('fullmeurl')" href="../_variables/fullmeurl.html">$fullmeurl</a> == null) {
<a name="l222"><span class="linenum"> 222</span></a>              if (<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('has_set_url')" href="../_functions/has_set_url.html" onMouseOver="funcPopup(event,'has_set_url')">has_set_url</a>()) {
<a name="l223"><span class="linenum"> 223</span></a>                  self::<a class="function" onClick="logFunction('override_active_url')" href="../_functions/override_active_url.html" onMouseOver="funcPopup(event,'override_active_url')">override_active_url</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('url')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/url.html">url</a>));
<a name="l224"><span class="linenum"> 224</span></a>              } else {
<a name="l225"><span class="linenum"> 225</span></a>                  self::<a class="function" onClick="logFunction('override_active_url')" href="../_functions/override_active_url.html" onMouseOver="funcPopup(event,'override_active_url')">override_active_url</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it8619" onMouseOver="hilite(8619)" onMouseOut="lolite()" onClick="logVariable('FULLME')" href="../_variables/FULLME.html">$FULLME</a>));
<a name="l226"><span class="linenum"> 226</span></a>              }
<a name="l227"><span class="linenum"> 227</span></a>          }
<a name="l228"><span class="linenum"> 228</span></a>  
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">        // Compare the action of this node against the fullmeurl</span>
<a name="l230"><span class="linenum"> 230</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('action')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/action.html">action</a> instanceof moodle_url &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('action')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/action.html">action</a>-&gt;<a class="function" onClick="logFunction('compare')" href="../_functions/compare.html" onMouseOver="funcPopup(event,'compare')">compare</a>(self::<a class="var it37445" onMouseOver="hilite(37445)" onMouseOut="lolite()" onClick="logVariable('fullmeurl')" href="../_variables/fullmeurl.html">$fullmeurl</a>, <a class="var it37448" onMouseOver="hilite(37448)" onMouseOut="lolite()" onClick="logVariable('strength')" href="../_variables/strength.html">$strength</a>)) {
<a name="l231"><span class="linenum"> 231</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('make_active')" href="../_functions/make_active.html" onMouseOver="funcPopup(event,'make_active')">make_active</a>();
<a name="l232"><span class="linenum"> 232</span></a>              return true;
<a name="l233"><span class="linenum"> 233</span></a>          }
<a name="l234"><span class="linenum"> 234</span></a>          return false;
<a name="l235"><span class="linenum"> 235</span></a>      }
<a name="l236"><span class="linenum"> 236</span></a>  
<a name="l237"><span class="linenum"> 237</span></a>      <span class="comment">/**</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">     * This sets the URL that the URL of new nodes get compared to when locating</span>
<a name="l239"><span class="linenum"> 239</span></a>  <span class="comment">     * the active node.</span>
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">     *</span>
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">     * The active node is the node that matches the URL set here. By default this</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">     * is either $PAGE-&gt;url or if that hasn't been set $FULLME.</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">     *</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">     * @param moodle_url $url The url to use for the fullmeurl.</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">     * @param bool $loadadmintree use true if the URL point to administration tree</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">     */</span>
<a name="l247"><span class="linenum"> 247</span></a>      public static function <a class="function" onClick="logFunction('override_active_url')" href="../_functions/override_active_url.html" onMouseOver="funcPopup(event,'override_active_url')">override_active_url</a>(moodle_url <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it37447" onMouseOver="hilite(37447)" onMouseOut="lolite()" onClick="logVariable('loadadmintree')" href="../_variables/loadadmintree.html">$loadadmintree</a> = false) {
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">        // Clone the URL, in case the calling script changes their URL later.</span>
<a name="l249"><span class="linenum"> 249</span></a>          self::<a class="var it37445" onMouseOver="hilite(37445)" onMouseOut="lolite()" onClick="logVariable('fullmeurl')" href="../_variables/fullmeurl.html">$fullmeurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">        // True means we do not want AJAX loaded admin tree, required for all admin pages.</span>
<a name="l251"><span class="linenum"> 251</span></a>          if (<a class="var it37447" onMouseOver="hilite(37447)" onMouseOut="lolite()" onClick="logVariable('loadadmintree')" href="../_variables/loadadmintree.html">$loadadmintree</a>) {
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">            // Do not change back to false if already set.</span>
<a name="l253"><span class="linenum"> 253</span></a>              self::<a class="var it37447" onMouseOver="hilite(37447)" onMouseOut="lolite()" onClick="logVariable('loadadmintree')" href="../_variables/loadadmintree.html">$loadadmintree</a> = true;
<a name="l254"><span class="linenum"> 254</span></a>          }
<a name="l255"><span class="linenum"> 255</span></a>      }
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>      <span class="comment">/**</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">     * Use when page is linked from the admin tree,</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">     * if not used navigation could not find the page using current URL</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">     * because the tree is not fully loaded.</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">     */</span>
<a name="l262"><span class="linenum"> 262</span></a>      public static function <a class="function" onClick="logFunction('require_admin_tree')" href="../_functions/require_admin_tree.html" onMouseOver="funcPopup(event,'require_admin_tree')">require_admin_tree</a>() {
<a name="l263"><span class="linenum"> 263</span></a>          self::<a class="var it37447" onMouseOver="hilite(37447)" onMouseOut="lolite()" onClick="logVariable('loadadmintree')" href="../_variables/loadadmintree.html">$loadadmintree</a> = true;
<a name="l264"><span class="linenum"> 264</span></a>      }
<a name="l265"><span class="linenum"> 265</span></a>  
<a name="l266"><span class="linenum"> 266</span></a>      <span class="comment">/**</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     * Creates a navigation node, ready to add it as a child using add_node</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     * function. (The created node needs to be added before you can use it.)</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">     * @param string $text</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">     * @param moodle_url|action_link $action</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">     * @param int $type</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     * @param string $shorttext</span>
<a name="l273"><span class="linenum"> 273</span></a>  <span class="comment">     * @param string|int $key</span>
<a name="l274"><span class="linenum"> 274</span></a>  <span class="comment">     * @param pix_icon $icon</span>
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">     * @return navigation_node</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">     */</span>
<a name="l277"><span class="linenum"> 277</span></a>      public static function <a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>=null, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=self::TYPE_CUSTOM,
<a name="l278"><span class="linenum"> 278</span></a>              <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>=null, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=null, pix_icon <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>=null) {
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">        // Properties array used when creating the new navigation node</span>
<a name="l280"><span class="linenum"> 280</span></a>          <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a> = array(
<a name="l281"><span class="linenum"> 281</span></a>              'text' =&gt; <a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>,
<a name="l282"><span class="linenum"> 282</span></a>              'type' =&gt; <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>
<a name="l283"><span class="linenum"> 283</span></a>          );
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">        // Set the action if one was provided</span>
<a name="l285"><span class="linenum"> 285</span></a>          if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>!==null) {
<a name="l286"><span class="linenum"> 286</span></a>              <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['action'] = <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>;
<a name="l287"><span class="linenum"> 287</span></a>          }
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">        // Set the shorttext if one was provided</span>
<a name="l289"><span class="linenum"> 289</span></a>          if (<a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>!==null) {
<a name="l290"><span class="linenum"> 290</span></a>              <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['shorttext'] = <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>;
<a name="l291"><span class="linenum"> 291</span></a>          }
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">        // Set the icon if one was provided</span>
<a name="l293"><span class="linenum"> 293</span></a>          if (<a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>!==null) {
<a name="l294"><span class="linenum"> 294</span></a>              <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['icon'] = <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>;
<a name="l295"><span class="linenum"> 295</span></a>          }
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">        // Set the key</span>
<a name="l297"><span class="linenum"> 297</span></a>          <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['key'] = <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>;
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">        // Construct and return</span>
<a name="l299"><span class="linenum"> 299</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>(<a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>);
<a name="l300"><span class="linenum"> 300</span></a>      }
<a name="l301"><span class="linenum"> 301</span></a>  
<a name="l302"><span class="linenum"> 302</span></a>      <span class="comment">/**</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">     * Adds a navigation node as a child of this node.</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">     *</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">     * @param string $text</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">     * @param moodle_url|action_link $action</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">     * @param int $type</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">     * @param string $shorttext</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">     * @param string|int $key</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">     * @param pix_icon $icon</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">     * @return navigation_node</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">     */</span>
<a name="l313"><span class="linenum"> 313</span></a>      public function <a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>=null, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=self::TYPE_CUSTOM, <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>=null, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=null, pix_icon <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>=null) {
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">        // Create child node</span>
<a name="l315"><span class="linenum"> 315</span></a>          <a class="var it37450" onMouseOver="hilite(37450)" onMouseOut="lolite()" onClick="logVariable('childnode')" href="../_variables/childnode.html">$childnode</a> = self::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>);
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">        // Add the child to end and return</span>
<a name="l318"><span class="linenum"> 318</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_node')" href="../_functions/add_node.html" onMouseOver="funcPopup(event,'add_node')">add_node</a>(<a class="var it37450" onMouseOver="hilite(37450)" onMouseOut="lolite()" onClick="logVariable('childnode')" href="../_variables/childnode.html">$childnode</a>);
<a name="l319"><span class="linenum"> 319</span></a>      }
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>      <span class="comment">/**</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment">     * Adds a navigation node as a child of this one, given a $node object</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment">     * created using the create function.</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment">     * @param navigation_node $childnode Node to add</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">     * @param string $beforekey</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">     * @return navigation_node The added node</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">     */</span>
<a name="l328"><span class="linenum"> 328</span></a>      public function <a class="function" onClick="logFunction('add_node')" href="../_functions/add_node.html" onMouseOver="funcPopup(event,'add_node')">add_node</a>(navigation_node <a class="var it37450" onMouseOver="hilite(37450)" onMouseOut="lolite()" onClick="logVariable('childnode')" href="../_variables/childnode.html">$childnode</a>, <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../_variables/beforekey.html">$beforekey</a>=null) {
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">        // First convert the nodetype for this node to a branch as it will now have children</span>
<a name="l330"><span class="linenum"> 330</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('nodetype')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> !== self::NODETYPE_BRANCH) {
<a name="l331"><span class="linenum"> 331</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('nodetype')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = self::NODETYPE_BRANCH;
<a name="l332"><span class="linenum"> 332</span></a>          }
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">        // Set the parent to this node</span>
<a name="l334"><span class="linenum"> 334</span></a>          <a class="var it37450" onMouseOver="hilite(37450)" onMouseOut="lolite()" onClick="logVariable('childnode')" href="../_variables/childnode.html">$childnode</a>-&gt;<a class="function" onClick="logFunction('set_parent')" href="../_functions/set_parent.html" onMouseOver="funcPopup(event,'set_parent')">set_parent</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l335"><span class="linenum"> 335</span></a>  
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">        // Default the key to the number of children if not provided</span>
<a name="l337"><span class="linenum"> 337</span></a>          if (<a class="var it37450" onMouseOver="hilite(37450)" onMouseOut="lolite()" onClick="logVariable('childnode')" href="../_variables/childnode.html">$childnode</a>-&gt;<a onClick="logVariable('key')" class="var it41082" onMouseOver="hilite(41082)" onMouseOut="lolite()" href="../_variables/key.html">key</a> === null) {
<a name="l338"><span class="linenum"> 338</span></a>              <a class="var it37450" onMouseOver="hilite(37450)" onMouseOut="lolite()" onClick="logVariable('childnode')" href="../_variables/childnode.html">$childnode</a>-&gt;<a onClick="logVariable('key')" class="var it41082" onMouseOver="hilite(41082)" onMouseOut="lolite()" href="../_variables/key.html">key</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>();
<a name="l339"><span class="linenum"> 339</span></a>          }
<a name="l340"><span class="linenum"> 340</span></a>  
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">        // Add the child using the navigation_node_collections add method</span>
<a name="l342"><span class="linenum"> 342</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it37450" onMouseOver="hilite(37450)" onMouseOut="lolite()" onClick="logVariable('childnode')" href="../_variables/childnode.html">$childnode</a>, <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../_variables/beforekey.html">$beforekey</a>);
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment">        // If added node is a category node or the user is logged in and it's a course</span>
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment">        // then mark added node as a branch (makes it expandable by AJAX)</span>
<a name="l346"><span class="linenum"> 346</span></a>          <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = <a class="var it37450" onMouseOver="hilite(37450)" onMouseOut="lolite()" onClick="logVariable('childnode')" href="../_variables/childnode.html">$childnode</a>-&gt;<a onClick="logVariable('type')" class="var it41082" onMouseOver="hilite(41082)" onMouseOut="lolite()" href="../_variables/type.html">type</a>;
<a name="l347"><span class="linenum"> 347</span></a>          if ((<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == self::TYPE_CATEGORY) || (<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() &amp;&amp; (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == self::TYPE_COURSE)) || (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == self::TYPE_MY_CATEGORY) ||
<a name="l348"><span class="linenum"> 348</span></a>                  (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === self::TYPE_SITE_ADMIN)) {
<a name="l349"><span class="linenum"> 349</span></a>              <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('nodetype')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = self::NODETYPE_BRANCH;
<a name="l350"><span class="linenum"> 350</span></a>          }
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">        // If this node is hidden mark it's children as hidden also</span>
<a name="l352"><span class="linenum"> 352</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('hidden')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a>) {
<a name="l353"><span class="linenum"> 353</span></a>              <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('hidden')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a> = true;
<a name="l354"><span class="linenum"> 354</span></a>          }
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">        // Return added node (reference returned by $this-&gt;children-&gt;add()</span>
<a name="l356"><span class="linenum"> 356</span></a>          return <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>;
<a name="l357"><span class="linenum"> 357</span></a>      }
<a name="l358"><span class="linenum"> 358</span></a>  
<a name="l359"><span class="linenum"> 359</span></a>      <span class="comment">/**</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">     * Return a list of all the keys of all the child nodes.</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">     * @return array the keys.</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">     */</span>
<a name="l363"><span class="linenum"> 363</span></a>      public function <a class="function" onClick="logFunction('get_children_key_list')" href="../_functions/get_children_key_list.html" onMouseOver="funcPopup(event,'get_children_key_list')">get_children_key_list</a>() {
<a name="l364"><span class="linenum"> 364</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="function" onClick="logFunction('get_key_list')" href="../_functions/get_key_list.html" onMouseOver="funcPopup(event,'get_key_list')">get_key_list</a>();
<a name="l365"><span class="linenum"> 365</span></a>      }
<a name="l366"><span class="linenum"> 366</span></a>  
<a name="l367"><span class="linenum"> 367</span></a>      <span class="comment">/**</span>
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">     * Searches for a node of the given type with the given key.</span>
<a name="l369"><span class="linenum"> 369</span></a>  <span class="comment">     *</span>
<a name="l370"><span class="linenum"> 370</span></a>  <span class="comment">     * This searches this node plus all of its children, and their children....</span>
<a name="l371"><span class="linenum"> 371</span></a>  <span class="comment">     * If you know the node you are looking for is a child of this node then please</span>
<a name="l372"><span class="linenum"> 372</span></a>  <span class="comment">     * use the get method instead.</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">     *</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">     * @param int|string $key The key of the node we are looking for</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment">     * @param int $type One of navigation_node::TYPE_*</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">     * @return navigation_node|false</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     */</span>
<a name="l378"><span class="linenum"> 378</span></a>      public function <a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l379"><span class="linenum"> 379</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l380"><span class="linenum"> 380</span></a>      }
<a name="l381"><span class="linenum"> 381</span></a>  
<a name="l382"><span class="linenum"> 382</span></a>      <span class="comment">/**</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">     * Get the child of this node that has the given key + (optional) type.</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">     *</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">     * If you are looking for a node and want to search all children + their children</span>
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">     * then please use the find method instead.</span>
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">     *</span>
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">     * @param int|string $key The key of the node we are looking for</span>
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment">     * @param int $type One of navigation_node::TYPE_*</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment">     * @return navigation_node|false</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">     */</span>
<a name="l392"><span class="linenum"> 392</span></a>      public function <a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=null) {
<a name="l393"><span class="linenum"> 393</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l394"><span class="linenum"> 394</span></a>      }
<a name="l395"><span class="linenum"> 395</span></a>  
<a name="l396"><span class="linenum"> 396</span></a>      <span class="comment">/**</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">     * Removes this node.</span>
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment">     *</span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">     * @return bool</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">     */</span>
<a name="l401"><span class="linenum"> 401</span></a>      public function <a class="function" onClick="logFunction('remove')" href="../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>() {
<a name="l402"><span class="linenum"> 402</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>-&gt;children-&gt;<a class="function" onClick="logFunction('remove')" href="../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('key')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/key.html">key</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/type.html">type</a>);
<a name="l403"><span class="linenum"> 403</span></a>      }
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>      <span class="comment">/**</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">     * Checks if this node has or could have any children</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">     *</span>
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">     * @return bool Returns true if it has children or could have (by AJAX expansion)</span>
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">     */</span>
<a name="l410"><span class="linenum"> 410</span></a>      public function <a class="function" onClick="logFunction('has_children')" href="../_functions/has_children.html" onMouseOver="funcPopup(event,'has_children')">has_children</a>() {
<a name="l411"><span class="linenum"> 411</span></a>          return (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('nodetype')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> === <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::NODETYPE_BRANCH || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>()&gt;0 || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('isexpandable')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/isexpandable.html">isexpandable</a>);
<a name="l412"><span class="linenum"> 412</span></a>      }
<a name="l413"><span class="linenum"> 413</span></a>  
<a name="l414"><span class="linenum"> 414</span></a>      <span class="comment">/**</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">     * Marks this node as active and forces it open.</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">     *</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment">     * Important: If you are here because you need to mark a node active to get</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment">     * the navigation to do what you want have you looked at {@link navigation_node::override_active_url()}?</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">     * You can use it to specify a different URL to match the active navigation node on</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">     * rather than having to locate and manually mark a node active.</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">     */</span>
<a name="l422"><span class="linenum"> 422</span></a>      public function <a class="function" onClick="logFunction('make_active')" href="../_functions/make_active.html" onMouseOver="funcPopup(event,'make_active')">make_active</a>() {
<a name="l423"><span class="linenum"> 423</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('isactive')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/isactive.html">isactive</a> = true;
<a name="l424"><span class="linenum"> 424</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_class')" href="../_functions/add_class.html" onMouseOver="funcPopup(event,'add_class')">add_class</a>('active_tree_node');
<a name="l425"><span class="linenum"> 425</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l426"><span class="linenum"> 426</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> !== null) {
<a name="l427"><span class="linenum"> 427</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>-&gt;<a class="function" onClick="logFunction('make_inactive')" href="../_functions/make_inactive.html" onMouseOver="funcPopup(event,'make_inactive')">make_inactive</a>();
<a name="l428"><span class="linenum"> 428</span></a>          }
<a name="l429"><span class="linenum"> 429</span></a>      }
<a name="l430"><span class="linenum"> 430</span></a>  
<a name="l431"><span class="linenum"> 431</span></a>      <span class="comment">/**</span>
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">     * Marks a node as inactive and recusised back to the base of the tree</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">     * doing the same to all parents.</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">     */</span>
<a name="l435"><span class="linenum"> 435</span></a>      public function <a class="function" onClick="logFunction('make_inactive')" href="../_functions/make_inactive.html" onMouseOver="funcPopup(event,'make_inactive')">make_inactive</a>() {
<a name="l436"><span class="linenum"> 436</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('isactive')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/isactive.html">isactive</a> = false;
<a name="l437"><span class="linenum"> 437</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('remove_class')" href="../_functions/remove_class.html" onMouseOver="funcPopup(event,'remove_class')">remove_class</a>('active_tree_node');
<a name="l438"><span class="linenum"> 438</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> !== null) {
<a name="l439"><span class="linenum"> 439</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>-&gt;<a class="function" onClick="logFunction('make_inactive')" href="../_functions/make_inactive.html" onMouseOver="funcPopup(event,'make_inactive')">make_inactive</a>();
<a name="l440"><span class="linenum"> 440</span></a>          }
<a name="l441"><span class="linenum"> 441</span></a>      }
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>      <span class="comment">/**</span>
<a name="l444"><span class="linenum"> 444</span></a>  <span class="comment">     * Forces this node to be open and at the same time forces open all</span>
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">     * parents until the root node.</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">     *</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">     * Recursive.</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">     */</span>
<a name="l449"><span class="linenum"> 449</span></a>      public function <a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>() {
<a name="l450"><span class="linenum"> 450</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forceopen')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/forceopen.html">forceopen</a> = true;
<a name="l451"><span class="linenum"> 451</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> !== null) {
<a name="l452"><span class="linenum"> 452</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l453"><span class="linenum"> 453</span></a>          }
<a name="l454"><span class="linenum"> 454</span></a>      }
<a name="l455"><span class="linenum"> 455</span></a>  
<a name="l456"><span class="linenum"> 456</span></a>      <span class="comment">/**</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">     * Adds a CSS class to this node.</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">     *</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">     * @param string $class</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">     * @return bool</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">     */</span>
<a name="l462"><span class="linenum"> 462</span></a>      public function <a class="function" onClick="logFunction('add_class')" href="../_functions/add_class.html" onMouseOver="funcPopup(event,'add_class')">add_class</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>) {
<a name="l463"><span class="linenum"> 463</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('classes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/classes.html">classes</a>)) {
<a name="l464"><span class="linenum"> 464</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('classes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/classes.html">classes</a>[] = <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>;
<a name="l465"><span class="linenum"> 465</span></a>          }
<a name="l466"><span class="linenum"> 466</span></a>          return true;
<a name="l467"><span class="linenum"> 467</span></a>      }
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>      <span class="comment">/**</span>
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment">     * Removes a CSS class from this node.</span>
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment">     *</span>
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">     * @param string $class</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">     * @return bool True if the class was successfully removed.</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">     */</span>
<a name="l475"><span class="linenum"> 475</span></a>      public function <a class="function" onClick="logFunction('remove_class')" href="../_functions/remove_class.html" onMouseOver="funcPopup(event,'remove_class')">remove_class</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>) {
<a name="l476"><span class="linenum"> 476</span></a>          if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('classes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/classes.html">classes</a>)) {
<a name="l477"><span class="linenum"> 477</span></a>              <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../_variables/class.html">$class</a>,<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('classes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/classes.html">classes</a>);
<a name="l478"><span class="linenum"> 478</span></a>              if (<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>!==false) {
<a name="l479"><span class="linenum"> 479</span></a>                  unset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('classes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/classes.html">classes</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l480"><span class="linenum"> 480</span></a>                  return true;
<a name="l481"><span class="linenum"> 481</span></a>              }
<a name="l482"><span class="linenum"> 482</span></a>          }
<a name="l483"><span class="linenum"> 483</span></a>          return false;
<a name="l484"><span class="linenum"> 484</span></a>      }
<a name="l485"><span class="linenum"> 485</span></a>  
<a name="l486"><span class="linenum"> 486</span></a>      <span class="comment">/**</span>
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">     * Sets the title for this node and forces Moodle to utilise it.</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment">     * @param string $title</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">     */</span>
<a name="l490"><span class="linenum"> 490</span></a>      public function <a class="function" onClick="logFunction('title')" href="../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>) {
<a name="l491"><span class="linenum"> 491</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/title.html">title</a> = <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('title')" href="../_variables/title.html">$title</a>;
<a name="l492"><span class="linenum"> 492</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forcetitle')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/forcetitle.html">forcetitle</a> = true;
<a name="l493"><span class="linenum"> 493</span></a>      }
<a name="l494"><span class="linenum"> 494</span></a>  
<a name="l495"><span class="linenum"> 495</span></a>      <span class="comment">/**</span>
<a name="l496"><span class="linenum"> 496</span></a>  <span class="comment">     * Resets the page specific information on this node if it is being unserialised.</span>
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">     */</span>
<a name="l498"><span class="linenum"> 498</span></a>      public function <a class="function" onClick="logFunction('__wakeup')" href="../_functions/__wakeup.html" onMouseOver="funcPopup(event,'__wakeup')">__wakeup</a>(){
<a name="l499"><span class="linenum"> 499</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forceopen')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/forceopen.html">forceopen</a> = false;
<a name="l500"><span class="linenum"> 500</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('isactive')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/isactive.html">isactive</a> = false;
<a name="l501"><span class="linenum"> 501</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('remove_class')" href="../_functions/remove_class.html" onMouseOver="funcPopup(event,'remove_class')">remove_class</a>('active_tree_node');
<a name="l502"><span class="linenum"> 502</span></a>      }
<a name="l503"><span class="linenum"> 503</span></a>  
<a name="l504"><span class="linenum"> 504</span></a>      <span class="comment">/**</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment">     * Checks if this node or any of its children contain the active node.</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">     *</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">     * Recursive.</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">     *</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">     * @return bool</span>
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">     */</span>
<a name="l511"><span class="linenum"> 511</span></a>      public function <a class="function" onClick="logFunction('contains_active_node')" href="../_functions/contains_active_node.html" onMouseOver="funcPopup(event,'contains_active_node')">contains_active_node</a>() {
<a name="l512"><span class="linenum"> 512</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('isactive')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/isactive.html">isactive</a>) {
<a name="l513"><span class="linenum"> 513</span></a>              return true;
<a name="l514"><span class="linenum"> 514</span></a>          } else {
<a name="l515"><span class="linenum"> 515</span></a>              foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l516"><span class="linenum"> 516</span></a>                  if (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('isactive')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/isactive.html">isactive</a> || <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('contains_active_node')" href="../_functions/contains_active_node.html" onMouseOver="funcPopup(event,'contains_active_node')">contains_active_node</a>()) {
<a name="l517"><span class="linenum"> 517</span></a>                      return true;
<a name="l518"><span class="linenum"> 518</span></a>                  }
<a name="l519"><span class="linenum"> 519</span></a>              }
<a name="l520"><span class="linenum"> 520</span></a>          }
<a name="l521"><span class="linenum"> 521</span></a>          return false;
<a name="l522"><span class="linenum"> 522</span></a>      }
<a name="l523"><span class="linenum"> 523</span></a>  
<a name="l524"><span class="linenum"> 524</span></a>      <span class="comment">/**</span>
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment">     * Finds the active node.</span>
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment">     *</span>
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment">     * Searches this nodes children plus all of the children for the active node</span>
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment">     * and returns it if found.</span>
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment">     *</span>
<a name="l530"><span class="linenum"> 530</span></a>  <span class="comment">     * Recursive.</span>
<a name="l531"><span class="linenum"> 531</span></a>  <span class="comment">     *</span>
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment">     * @return navigation_node|false</span>
<a name="l533"><span class="linenum"> 533</span></a>  <span class="comment">     */</span>
<a name="l534"><span class="linenum"> 534</span></a>      public function <a class="function" onClick="logFunction('find_active_node')" href="../_functions/find_active_node.html" onMouseOver="funcPopup(event,'find_active_node')">find_active_node</a>() {
<a name="l535"><span class="linenum"> 535</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('isactive')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/isactive.html">isactive</a>) {
<a name="l536"><span class="linenum"> 536</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>;
<a name="l537"><span class="linenum"> 537</span></a>          } else {
<a name="l538"><span class="linenum"> 538</span></a>              foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as &amp;<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l539"><span class="linenum"> 539</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a> = <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('find_active_node')" href="../_functions/find_active_node.html" onMouseOver="funcPopup(event,'find_active_node')">find_active_node</a>();
<a name="l540"><span class="linenum"> 540</span></a>                  if (<a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a> !== false) {
<a name="l541"><span class="linenum"> 541</span></a>                      return <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>;
<a name="l542"><span class="linenum"> 542</span></a>                  }
<a name="l543"><span class="linenum"> 543</span></a>              }
<a name="l544"><span class="linenum"> 544</span></a>          }
<a name="l545"><span class="linenum"> 545</span></a>          return false;
<a name="l546"><span class="linenum"> 546</span></a>      }
<a name="l547"><span class="linenum"> 547</span></a>  
<a name="l548"><span class="linenum"> 548</span></a>      <span class="comment">/**</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment">     * Searches all children for the best matching active node</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">     * @return navigation_node|false</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">     */</span>
<a name="l552"><span class="linenum"> 552</span></a>      public function <a class="function" onClick="logFunction('search_for_active_node')" href="../_functions/search_for_active_node.html" onMouseOver="funcPopup(event,'search_for_active_node')">search_for_active_node</a>() {
<a name="l553"><span class="linenum"> 553</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_if_active')" href="../_functions/check_if_active.html" onMouseOver="funcPopup(event,'check_if_active')">check_if_active</a>(<a class="constant" onClick="logConstant('URL_MATCH_BASE')" href="../_constants/URL_MATCH_BASE.html" onMouseOver="constPopup(event,'URL_MATCH_BASE')">URL_MATCH_BASE</a>)) {
<a name="l554"><span class="linenum"> 554</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>;
<a name="l555"><span class="linenum"> 555</span></a>          } else {
<a name="l556"><span class="linenum"> 556</span></a>              foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as &amp;<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l557"><span class="linenum"> 557</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a> = <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('search_for_active_node')" href="../_functions/search_for_active_node.html" onMouseOver="funcPopup(event,'search_for_active_node')">search_for_active_node</a>();
<a name="l558"><span class="linenum"> 558</span></a>                  if (<a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a> !== false) {
<a name="l559"><span class="linenum"> 559</span></a>                      return <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>;
<a name="l560"><span class="linenum"> 560</span></a>                  }
<a name="l561"><span class="linenum"> 561</span></a>              }
<a name="l562"><span class="linenum"> 562</span></a>          }
<a name="l563"><span class="linenum"> 563</span></a>          return false;
<a name="l564"><span class="linenum"> 564</span></a>      }
<a name="l565"><span class="linenum"> 565</span></a>  
<a name="l566"><span class="linenum"> 566</span></a>      <span class="comment">/**</span>
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment">     * Gets the content for this node.</span>
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">     *</span>
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment">     * @param bool $shorttext If true shorttext is used rather than the normal text</span>
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment">     * @return string</span>
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment">     */</span>
<a name="l572"><span class="linenum"> 572</span></a>      public function <a class="function" onClick="logFunction('get_content')" href="../_functions/get_content.html" onMouseOver="funcPopup(event,'get_content')">get_content</a>(<a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>=false) {
<a name="l573"><span class="linenum"> 573</span></a>          if (<a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a> &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('shorttext')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/shorttext.html">shorttext</a>!==null) {
<a name="l574"><span class="linenum"> 574</span></a>              return <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('shorttext')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/shorttext.html">shorttext</a>);
<a name="l575"><span class="linenum"> 575</span></a>          } else {
<a name="l576"><span class="linenum"> 576</span></a>              return <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('text')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/text.html">text</a>);
<a name="l577"><span class="linenum"> 577</span></a>          }
<a name="l578"><span class="linenum"> 578</span></a>      }
<a name="l579"><span class="linenum"> 579</span></a>  
<a name="l580"><span class="linenum"> 580</span></a>      <span class="comment">/**</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     * Gets the title to use for this node.</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     *</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     * @return string</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">     */</span>
<a name="l585"><span class="linenum"> 585</span></a>      public function <a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>() {
<a name="l586"><span class="linenum"> 586</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forcetitle')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/forcetitle.html">forcetitle</a> || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('action')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/action.html">action</a> != null){
<a name="l587"><span class="linenum"> 587</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('title')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/title.html">title</a>;
<a name="l588"><span class="linenum"> 588</span></a>          } else {
<a name="l589"><span class="linenum"> 589</span></a>              return '';
<a name="l590"><span class="linenum"> 590</span></a>          }
<a name="l591"><span class="linenum"> 591</span></a>      }
<a name="l592"><span class="linenum"> 592</span></a>  
<a name="l593"><span class="linenum"> 593</span></a>      <span class="comment">/**</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment">     * Gets the CSS class to add to this node to describe its type</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment">     *</span>
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment">     * @return string</span>
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment">     */</span>
<a name="l598"><span class="linenum"> 598</span></a>      public function <a class="function" onClick="logFunction('get_css_type')" href="../_functions/get_css_type.html" onMouseOver="funcPopup(event,'get_css_type')">get_css_type</a>() {
<a name="l599"><span class="linenum"> 599</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/type.html">type</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('namedtypes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/namedtypes.html">namedtypes</a>)) {
<a name="l600"><span class="linenum"> 600</span></a>              return 'type_'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('namedtypes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/namedtypes.html">namedtypes</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/type.html">type</a>];
<a name="l601"><span class="linenum"> 601</span></a>          }
<a name="l602"><span class="linenum"> 602</span></a>          return 'type_unknown';
<a name="l603"><span class="linenum"> 603</span></a>      }
<a name="l604"><span class="linenum"> 604</span></a>  
<a name="l605"><span class="linenum"> 605</span></a>      <span class="comment">/**</span>
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment">     * Finds all nodes that are expandable by AJAX</span>
<a name="l607"><span class="linenum"> 607</span></a>  <span class="comment">     *</span>
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment">     * @param array $expandable An array by reference to populate with expandable nodes.</span>
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment">     */</span>
<a name="l610"><span class="linenum"> 610</span></a>      public function <a class="function" onClick="logFunction('find_expandable')" href="../_functions/find_expandable.html" onMouseOver="funcPopup(event,'find_expandable')">find_expandable</a>(array &amp;<a class="var it18829" onMouseOver="hilite(18829)" onMouseOut="lolite()" onClick="logVariable('expandable')" href="../_variables/expandable.html">$expandable</a>) {
<a name="l611"><span class="linenum"> 611</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as &amp;<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l612"><span class="linenum"> 612</span></a>              if (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('display')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/display.html">display</a> &amp;&amp; <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('has_children')" href="../_functions/has_children.html" onMouseOver="funcPopup(event,'has_children')">has_children</a>() &amp;&amp; <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('children')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() == 0) {
<a name="l613"><span class="linenum"> 613</span></a>                  <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('id')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = 'expandable_branch_'.<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('type')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/type.html">type</a>.'_'.<a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('key')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/key.html">key</a>, <a class="constant" onClick="logConstant('PARAM_ALPHANUMEXT')" href="../_constants/PARAM_ALPHANUMEXT.html" onMouseOver="constPopup(event,'PARAM_ALPHANUMEXT')">PARAM_ALPHANUMEXT</a>);
<a name="l614"><span class="linenum"> 614</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_class')" href="../_functions/add_class.html" onMouseOver="funcPopup(event,'add_class')">add_class</a>('canexpand');
<a name="l615"><span class="linenum"> 615</span></a>                  <a class="var it18829" onMouseOver="hilite(18829)" onMouseOut="lolite()" onClick="logVariable('expandable')" href="../_variables/expandable.html">$expandable</a>[] = array('id' =&gt; <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('id')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'key' =&gt; <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('key')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/key.html">key</a>, 'type' =&gt; <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('type')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/type.html">type</a>);
<a name="l616"><span class="linenum"> 616</span></a>              }
<a name="l617"><span class="linenum"> 617</span></a>              <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('find_expandable')" href="../_functions/find_expandable.html" onMouseOver="funcPopup(event,'find_expandable')">find_expandable</a>(<a class="var it18829" onMouseOver="hilite(18829)" onMouseOut="lolite()" onClick="logVariable('expandable')" href="../_variables/expandable.html">$expandable</a>);
<a name="l618"><span class="linenum"> 618</span></a>          }
<a name="l619"><span class="linenum"> 619</span></a>      }
<a name="l620"><span class="linenum"> 620</span></a>  
<a name="l621"><span class="linenum"> 621</span></a>      <span class="comment">/**</span>
<a name="l622"><span class="linenum"> 622</span></a>  <span class="comment">     * Finds all nodes of a given type (recursive)</span>
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">     *</span>
<a name="l624"><span class="linenum"> 624</span></a>  <span class="comment">     * @param int $type One of navigation_node::TYPE_*</span>
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment">     * @return array</span>
<a name="l626"><span class="linenum"> 626</span></a>  <span class="comment">     */</span>
<a name="l627"><span class="linenum"> 627</span></a>      public function <a class="function" onClick="logFunction('find_all_of_type')" href="../_functions/find_all_of_type.html" onMouseOver="funcPopup(event,'find_all_of_type')">find_all_of_type</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l628"><span class="linenum"> 628</span></a>          <a class="var it51" onMouseOver="hilite(51)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="function" onClick="logFunction('type')" href="../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l629"><span class="linenum"> 629</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as &amp;<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l630"><span class="linenum"> 630</span></a>              <a class="var it2805" onMouseOver="hilite(2805)" onMouseOut="lolite()" onClick="logVariable('childnodes')" href="../_variables/childnodes.html">$childnodes</a> = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a class="function" onClick="logFunction('find_all_of_type')" href="../_functions/find_all_of_type.html" onMouseOver="funcPopup(event,'find_all_of_type')">find_all_of_type</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l631"><span class="linenum"> 631</span></a>              <a class="var it51" onMouseOver="hilite(51)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it51" onMouseOver="hilite(51)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a>, <a class="var it2805" onMouseOver="hilite(2805)" onMouseOut="lolite()" onClick="logVariable('childnodes')" href="../_variables/childnodes.html">$childnodes</a>);
<a name="l632"><span class="linenum"> 632</span></a>          }
<a name="l633"><span class="linenum"> 633</span></a>          return <a class="var it51" onMouseOver="hilite(51)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a>;
<a name="l634"><span class="linenum"> 634</span></a>      }
<a name="l635"><span class="linenum"> 635</span></a>  
<a name="l636"><span class="linenum"> 636</span></a>      <span class="comment">/**</span>
<a name="l637"><span class="linenum"> 637</span></a>  <span class="comment">     * Removes this node if it is empty</span>
<a name="l638"><span class="linenum"> 638</span></a>  <span class="comment">     */</span>
<a name="l639"><span class="linenum"> 639</span></a>      public function <a class="function" onClick="logFunction('trim_if_empty')" href="../_functions/trim_if_empty.html" onMouseOver="funcPopup(event,'trim_if_empty')">trim_if_empty</a>() {
<a name="l640"><span class="linenum"> 640</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() == 0) {
<a name="l641"><span class="linenum"> 641</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('remove')" href="../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l642"><span class="linenum"> 642</span></a>          }
<a name="l643"><span class="linenum"> 643</span></a>      }
<a name="l644"><span class="linenum"> 644</span></a>  
<a name="l645"><span class="linenum"> 645</span></a>      <span class="comment">/**</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">     * Creates a tab representation of this nodes children that can be used</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment">     * with print_tabs to produce the tabs on a page.</span>
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">     *</span>
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">     * call_user_func_array('print_tabs', $node-&gt;get_tabs_array());</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">     *</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">     * @param array $inactive</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment">     * @param bool $return</span>
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">     * @return array Array (tabs, selected, inactive, activated, return)</span>
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">     */</span>
<a name="l655"><span class="linenum"> 655</span></a>      public function <a class="function" onClick="logFunction('get_tabs_array')" href="../_functions/get_tabs_array.html" onMouseOver="funcPopup(event,'get_tabs_array')">get_tabs_array</a>(array <a class="var it4431" onMouseOver="hilite(4431)" onMouseOut="lolite()" onClick="logVariable('inactive')" href="../_variables/inactive.html">$inactive</a>=array(), <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>=false) {
<a name="l656"><span class="linenum"> 656</span></a>          <a class="var it8048" onMouseOver="hilite(8048)" onMouseOut="lolite()" onClick="logVariable('tabs')" href="../_variables/tabs.html">$tabs</a> = array();
<a name="l657"><span class="linenum"> 657</span></a>          <a class="var it296" onMouseOver="hilite(296)" onMouseOut="lolite()" onClick="logVariable('rows')" href="../_variables/rows.html">$rows</a> = array();
<a name="l658"><span class="linenum"> 658</span></a>          <a class="var it4428" onMouseOver="hilite(4428)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../_variables/selected.html">$selected</a> = null;
<a name="l659"><span class="linenum"> 659</span></a>          <a class="var it4429" onMouseOver="hilite(4429)" onMouseOut="lolite()" onClick="logVariable('activated')" href="../_variables/activated.html">$activated</a> = array();
<a name="l660"><span class="linenum"> 660</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l661"><span class="linenum"> 661</span></a>              <a class="var it8048" onMouseOver="hilite(8048)" onMouseOut="lolite()" onClick="logVariable('tabs')" href="../_variables/tabs.html">$tabs</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('tabobject')" href="../_classes/tabobject.html" onMouseOver="classPopup(event,'tabobject')">tabobject</a>(<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('key')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/key.html">key</a>, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('action')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/action.html">action</a>, <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a class="function" onClick="logFunction('get_content')" href="../_functions/get_content.html" onMouseOver="funcPopup(event,'get_content')">get_content</a>(), <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>());
<a name="l662"><span class="linenum"> 662</span></a>              if (<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a class="function" onClick="logFunction('contains_active_node')" href="../_functions/contains_active_node.html" onMouseOver="funcPopup(event,'contains_active_node')">contains_active_node</a>()) {
<a name="l663"><span class="linenum"> 663</span></a>                  if (<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('children')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() &gt; 0) {
<a name="l664"><span class="linenum"> 664</span></a>                      <a class="var it4429" onMouseOver="hilite(4429)" onMouseOut="lolite()" onClick="logVariable('activated')" href="../_variables/activated.html">$activated</a>[] = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('key')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/key.html">key</a>;
<a name="l665"><span class="linenum"> 665</span></a>                      foreach (<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('children')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l666"><span class="linenum"> 666</span></a>                          if (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('contains_active_node')" href="../_functions/contains_active_node.html" onMouseOver="funcPopup(event,'contains_active_node')">contains_active_node</a>()) {
<a name="l667"><span class="linenum"> 667</span></a>                              <a class="var it4428" onMouseOver="hilite(4428)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../_variables/selected.html">$selected</a> = <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('key')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/key.html">key</a>;
<a name="l668"><span class="linenum"> 668</span></a>                          }
<a name="l669"><span class="linenum"> 669</span></a>                          <a class="var it296" onMouseOver="hilite(296)" onMouseOut="lolite()" onClick="logVariable('rows')" href="../_variables/rows.html">$rows</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('tabobject')" href="../_classes/tabobject.html" onMouseOver="classPopup(event,'tabobject')">tabobject</a>(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('key')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/key.html">key</a>, <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('action')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/action.html">action</a>, <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('get_content')" href="../_functions/get_content.html" onMouseOver="funcPopup(event,'get_content')">get_content</a>(), <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>());
<a name="l670"><span class="linenum"> 670</span></a>                      }
<a name="l671"><span class="linenum"> 671</span></a>                  } else {
<a name="l672"><span class="linenum"> 672</span></a>                      <a class="var it4428" onMouseOver="hilite(4428)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../_variables/selected.html">$selected</a> = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('key')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/key.html">key</a>;
<a name="l673"><span class="linenum"> 673</span></a>                  }
<a name="l674"><span class="linenum"> 674</span></a>              }
<a name="l675"><span class="linenum"> 675</span></a>          }
<a name="l676"><span class="linenum"> 676</span></a>          return array(array(<a class="var it8048" onMouseOver="hilite(8048)" onMouseOut="lolite()" onClick="logVariable('tabs')" href="../_variables/tabs.html">$tabs</a>, <a class="var it296" onMouseOver="hilite(296)" onMouseOut="lolite()" onClick="logVariable('rows')" href="../_variables/rows.html">$rows</a>), <a class="var it4428" onMouseOver="hilite(4428)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../_variables/selected.html">$selected</a>, <a class="var it4431" onMouseOver="hilite(4431)" onMouseOut="lolite()" onClick="logVariable('inactive')" href="../_variables/inactive.html">$inactive</a>, <a class="var it4429" onMouseOver="hilite(4429)" onMouseOut="lolite()" onClick="logVariable('activated')" href="../_variables/activated.html">$activated</a>, <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>);
<a name="l677"><span class="linenum"> 677</span></a>      }
<a name="l678"><span class="linenum"> 678</span></a>  
<a name="l679"><span class="linenum"> 679</span></a>      <span class="comment">/**</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment">     * Sets the parent for this node and if this node is active ensures that the tree is properly</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">     * adjusted as well.</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment">     *</span>
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment">     * @param navigation_node $parent</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment">     */</span>
<a name="l685"><span class="linenum"> 685</span></a>      public function <a class="function" onClick="logFunction('set_parent')" href="../_functions/set_parent.html" onMouseOver="funcPopup(event,'set_parent')">set_parent</a>(navigation_node <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a>) {
<a name="l686"><span class="linenum"> 686</span></a>  <span class="comment">        // Set the parent (thats the easy part)</span>
<a name="l687"><span class="linenum"> 687</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> = <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a>;
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment">        // Check if this node is active (this is checked during construction)</span>
<a name="l689"><span class="linenum"> 689</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('isactive')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/isactive.html">isactive</a>) {
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment">            // Force all of the parent nodes open so you can see this node</span>
<a name="l691"><span class="linenum"> 691</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">            // Make all parents inactive so that its clear where we are.</span>
<a name="l693"><span class="linenum"> 693</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('parent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>-&gt;<a class="function" onClick="logFunction('make_inactive')" href="../_functions/make_inactive.html" onMouseOver="funcPopup(event,'make_inactive')">make_inactive</a>();
<a name="l694"><span class="linenum"> 694</span></a>          }
<a name="l695"><span class="linenum"> 695</span></a>      }
<a name="l696"><span class="linenum"> 696</span></a>  
<a name="l697"><span class="linenum"> 697</span></a>      <span class="comment">/**</span>
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment">     * Hides the node and any children it has.</span>
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">     *</span>
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment">     * @param array $typestohide Optional. An array of node types that should be hidden.</span>
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">     *      If null all nodes will be hidden.</span>
<a name="l703"><span class="linenum"> 703</span></a>  <span class="comment">     *      If an array is given then nodes will only be hidden if their type mtatches an element in the array.</span>
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment">     *          e.g. array(navigation_node::TYPE_COURSE) would hide only course nodes.</span>
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment">     */</span>
<a name="l706"><span class="linenum"> 706</span></a>      public function <a class="function" onClick="logFunction('hide')" href="../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(array <a class="var it37451" onMouseOver="hilite(37451)" onMouseOut="lolite()" onClick="logVariable('typestohide')" href="../_variables/typestohide.html">$typestohide</a> = null) {
<a name="l707"><span class="linenum"> 707</span></a>          if (<a class="var it37451" onMouseOver="hilite(37451)" onMouseOut="lolite()" onClick="logVariable('typestohide')" href="../_variables/typestohide.html">$typestohide</a> === null || <a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/type.html">type</a>, <a class="var it37451" onMouseOver="hilite(37451)" onMouseOut="lolite()" onClick="logVariable('typestohide')" href="../_variables/typestohide.html">$typestohide</a>)) {
<a name="l708"><span class="linenum"> 708</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('display')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/display.html">display</a> = false;
<a name="l709"><span class="linenum"> 709</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_children')" href="../_functions/has_children.html" onMouseOver="funcPopup(event,'has_children')">has_children</a>()) {
<a name="l710"><span class="linenum"> 710</span></a>                  foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l711"><span class="linenum"> 711</span></a>                      <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('hide')" href="../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(<a class="var it37451" onMouseOver="hilite(37451)" onMouseOut="lolite()" onClick="logVariable('typestohide')" href="../_variables/typestohide.html">$typestohide</a>);
<a name="l712"><span class="linenum"> 712</span></a>                  }
<a name="l713"><span class="linenum"> 713</span></a>              }
<a name="l714"><span class="linenum"> 714</span></a>          }
<a name="l715"><span class="linenum"> 715</span></a>      }
<a name="l716"><span class="linenum"> 716</span></a>  }
<a name="l717"><span class="linenum"> 717</span></a>  
<a name="l718"><span class="linenum"> 718</span></a>  <span class="comment">/**</span>
<a name="l719"><span class="linenum"> 719</span></a>  <span class="comment"> * Navigation node collection</span>
<a name="l720"><span class="linenum"> 720</span></a>  <span class="comment"> *</span>
<a name="l721"><span class="linenum"> 721</span></a>  <span class="comment"> * This class is responsible for managing a collection of navigation nodes.</span>
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment"> * It is required because a node's unique identifier is a combination of both its</span>
<a name="l723"><span class="linenum"> 723</span></a>  <span class="comment"> * key and its type.</span>
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment"> *</span>
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment"> * Originally an array was used with a string key that was a combination of the two</span>
<a name="l726"><span class="linenum"> 726</span></a>  <span class="comment"> * however it was decided that a better solution would be to use a class that</span>
<a name="l727"><span class="linenum"> 727</span></a>  <span class="comment"> * implements the standard IteratorAggregate interface.</span>
<a name="l728"><span class="linenum"> 728</span></a>  <span class="comment"> *</span>
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment"> * @package   core</span>
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment"> * @category  navigation</span>
<a name="l731"><span class="linenum"> 731</span></a>  <span class="comment"> * @copyright 2010 Sam Hemelryk</span>
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l733"><span class="linenum"> 733</span></a>  <span class="comment"> */</span>
<a name="l734"><span class="linenum"> 734</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('navigation_node_collection')" href="../_classes/navigation_node_collection.html" onMouseOver="classPopup(event,'navigation_node_collection')">navigation_node_collection</a> implements IteratorAggregate {
<a name="l735"><span class="linenum"> 735</span></a>      <span class="comment">/**</span>
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment">     * A multidimensional array to where the first key is the type and the second</span>
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment">     * key is the nodes key.</span>
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment">     * @var array</span>
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">     */</span>
<a name="l740"><span class="linenum"> 740</span></a>      protected <a class="var it6413" onMouseOver="hilite(6413)" onMouseOut="lolite()" onClick="logVariable('collection')" href="../_variables/collection.html">$collection</a> = array();
<a name="l741"><span class="linenum"> 741</span></a>      <span class="comment">/**</span>
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">     * An array that contains references to nodes in the same order they were added.</span>
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">     * This is maintained as a progressive array.</span>
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">     * @var array</span>
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment">     */</span>
<a name="l746"><span class="linenum"> 746</span></a>      protected <a class="var it37452" onMouseOver="hilite(37452)" onMouseOut="lolite()" onClick="logVariable('orderedcollection')" href="../_variables/orderedcollection.html">$orderedcollection</a> = array();
<a name="l747"><span class="linenum"> 747</span></a>      <span class="comment">/**</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment">     * A reference to the last node that was added to the collection</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment">     * @var navigation_node</span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">     */</span>
<a name="l751"><span class="linenum"> 751</span></a>      protected <a class="var it893" onMouseOver="hilite(893)" onMouseOut="lolite()" onClick="logVariable('last')" href="../_variables/last.html">$last</a> = null;
<a name="l752"><span class="linenum"> 752</span></a>      <span class="comment">/**</span>
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment">     * The total number of items added to this array.</span>
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment">     * @var int</span>
<a name="l755"><span class="linenum"> 755</span></a>  <span class="comment">     */</span>
<a name="l756"><span class="linenum"> 756</span></a>      protected <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a> = 0;
<a name="l757"><span class="linenum"> 757</span></a>  
<a name="l758"><span class="linenum"> 758</span></a>      <span class="comment">/**</span>
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">     * Adds a navigation node to the collection</span>
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment">     *</span>
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment">     * @param navigation_node $node Node to add</span>
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment">     * @param string $beforekey If specified, adds before a node with this key,</span>
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment">     *   otherwise adds at end</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment">     * @return navigation_node Added node</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment">     */</span>
<a name="l766"><span class="linenum"> 766</span></a>      public function <a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(navigation_node <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>, <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../_variables/beforekey.html">$beforekey</a>=null) {
<a name="l767"><span class="linenum"> 767</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l768"><span class="linenum"> 768</span></a>          <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('key')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/key.html">key</a>;
<a name="l769"><span class="linenum"> 769</span></a>          <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('type')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/type.html">type</a>;
<a name="l770"><span class="linenum"> 770</span></a>  
<a name="l771"><span class="linenum"> 771</span></a>  <span class="comment">        // First check we have a 2nd dimension for this type</span>
<a name="l772"><span class="linenum"> 772</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>)) {
<a name="l773"><span class="linenum"> 773</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>] = array();
<a name="l774"><span class="linenum"> 774</span></a>          }
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">        // Check for a collision and report if debugging is turned on</span>
<a name="l776"><span class="linenum"> 776</span></a>          if (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('debug')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/debug.html">debug</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>])) {
<a name="l777"><span class="linenum"> 777</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Navigation node intersect: Adding a node that already exists '.<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l778"><span class="linenum"> 778</span></a>          }
<a name="l779"><span class="linenum"> 779</span></a>  
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment">        // Find the key to add before</span>
<a name="l781"><span class="linenum"> 781</span></a>          <a class="var it30629" onMouseOver="hilite(30629)" onMouseOut="lolite()" onClick="logVariable('newindex')" href="../_variables/newindex.html">$newindex</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('count')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/count.html">count</a>;
<a name="l782"><span class="linenum"> 782</span></a>          <a class="var it893" onMouseOver="hilite(893)" onMouseOut="lolite()" onClick="logVariable('last')" href="../_variables/last.html">$last</a> = true;
<a name="l783"><span class="linenum"> 783</span></a>          if (<a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../_variables/beforekey.html">$beforekey</a> !== null) {
<a name="l784"><span class="linenum"> 784</span></a>              foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('collection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/collection.html">collection</a> as <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../_variables/index.html">$index</a> =&gt; <a class="var it37453" onMouseOver="hilite(37453)" onMouseOut="lolite()" onClick="logVariable('othernode')" href="../_variables/othernode.html">$othernode</a>) {
<a name="l785"><span class="linenum"> 785</span></a>                  if (<a class="var it37453" onMouseOver="hilite(37453)" onMouseOut="lolite()" onClick="logVariable('othernode')" href="../_variables/othernode.html">$othernode</a>-&gt;<a onClick="logVariable('key')" class="var it41083" onMouseOver="hilite(41083)" onMouseOut="lolite()" href="../_variables/key.html">key</a> === <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../_variables/beforekey.html">$beforekey</a>) {
<a name="l786"><span class="linenum"> 786</span></a>                      <a class="var it30629" onMouseOver="hilite(30629)" onMouseOut="lolite()" onClick="logVariable('newindex')" href="../_variables/newindex.html">$newindex</a> = <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../_variables/index.html">$index</a>;
<a name="l787"><span class="linenum"> 787</span></a>                      <a class="var it893" onMouseOver="hilite(893)" onMouseOut="lolite()" onClick="logVariable('last')" href="../_variables/last.html">$last</a> = false;
<a name="l788"><span class="linenum"> 788</span></a>                      break;
<a name="l789"><span class="linenum"> 789</span></a>                  }
<a name="l790"><span class="linenum"> 790</span></a>              }
<a name="l791"><span class="linenum"> 791</span></a>              if (<a class="var it30629" onMouseOver="hilite(30629)" onMouseOut="lolite()" onClick="logVariable('newindex')" href="../_variables/newindex.html">$newindex</a> === <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('count')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/count.html">count</a>) {
<a name="l792"><span class="linenum"> 792</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Navigation node add_before: Reference node not found ' . <a class="var it24094" onMouseOver="hilite(24094)" onMouseOut="lolite()" onClick="logVariable('beforekey')" href="../_variables/beforekey.html">$beforekey</a> .
<a name="l793"><span class="linenum"> 793</span></a>                          ', options: ' . <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(' ', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_key_list')" href="../_functions/get_key_list.html" onMouseOver="funcPopup(event,'get_key_list')">get_key_list</a>()), <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l794"><span class="linenum"> 794</span></a>              }
<a name="l795"><span class="linenum"> 795</span></a>          }
<a name="l796"><span class="linenum"> 796</span></a>  
<a name="l797"><span class="linenum"> 797</span></a>  <span class="comment">        // Add the node to the appropriate place in the by-type structure (which</span>
<a name="l798"><span class="linenum"> 798</span></a>  <span class="comment">        // is not ordered, despite the variable name)</span>
<a name="l799"><span class="linenum"> 799</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>][<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>;
<a name="l800"><span class="linenum"> 800</span></a>          if (!<a class="var it893" onMouseOver="hilite(893)" onMouseOut="lolite()" onClick="logVariable('last')" href="../_variables/last.html">$last</a>) {
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment">            // Update existing references in the ordered collection (which is the</span>
<a name="l802"><span class="linenum"> 802</span></a>  <span class="comment">            // one that isn't called 'ordered') to shuffle them along if required</span>
<a name="l803"><span class="linenum"> 803</span></a>              for (<a class="var it37352" onMouseOver="hilite(37352)" onMouseOut="lolite()" onClick="logVariable('oldindex')" href="../_variables/oldindex.html">$oldindex</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('count')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/count.html">count</a>; <a class="var it37352" onMouseOver="hilite(37352)" onMouseOut="lolite()" onClick="logVariable('oldindex')" href="../_variables/oldindex.html">$oldindex</a> &gt; <a class="var it30629" onMouseOver="hilite(30629)" onMouseOut="lolite()" onClick="logVariable('newindex')" href="../_variables/newindex.html">$newindex</a>; <a class="var it37352" onMouseOver="hilite(37352)" onMouseOut="lolite()" onClick="logVariable('oldindex')" href="../_variables/oldindex.html">$oldindex</a>--) {
<a name="l804"><span class="linenum"> 804</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('collection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/collection.html">collection</a>[<a class="var it37352" onMouseOver="hilite(37352)" onMouseOut="lolite()" onClick="logVariable('oldindex')" href="../_variables/oldindex.html">$oldindex</a>] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('collection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/collection.html">collection</a>[<a class="var it37352" onMouseOver="hilite(37352)" onMouseOut="lolite()" onClick="logVariable('oldindex')" href="../_variables/oldindex.html">$oldindex</a> - 1];
<a name="l805"><span class="linenum"> 805</span></a>              }
<a name="l806"><span class="linenum"> 806</span></a>          }
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment">        // Add a reference to the node to the progressive collection.</span>
<a name="l808"><span class="linenum"> 808</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('collection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/collection.html">collection</a>[<a class="var it30629" onMouseOver="hilite(30629)" onMouseOut="lolite()" onClick="logVariable('newindex')" href="../_variables/newindex.html">$newindex</a>] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>][<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>];
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment">        // Update the last property to a reference to this new node.</span>
<a name="l810"><span class="linenum"> 810</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('last')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/last.html">last</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>][<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>];
<a name="l811"><span class="linenum"> 811</span></a>  
<a name="l812"><span class="linenum"> 812</span></a>  <span class="comment">        // Reorder the array by index if needed</span>
<a name="l813"><span class="linenum"> 813</span></a>          if (!<a class="var it893" onMouseOver="hilite(893)" onMouseOut="lolite()" onClick="logVariable('last')" href="../_variables/last.html">$last</a>) {
<a name="l814"><span class="linenum"> 814</span></a>              <a class="phpfunction" onClick="logFunction('ksort')" href="../_functions/ksort.html" onMouseOver="phpfuncPopup(event,'ksort')">ksort</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('collection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/collection.html">collection</a>);
<a name="l815"><span class="linenum"> 815</span></a>          }
<a name="l816"><span class="linenum"> 816</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('count')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/count.html">count</a>++;
<a name="l817"><span class="linenum"> 817</span></a>  <span class="comment">        // Return the reference to the now added node</span>
<a name="l818"><span class="linenum"> 818</span></a>          return <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>;
<a name="l819"><span class="linenum"> 819</span></a>      }
<a name="l820"><span class="linenum"> 820</span></a>  
<a name="l821"><span class="linenum"> 821</span></a>      <span class="comment">/**</span>
<a name="l822"><span class="linenum"> 822</span></a>  <span class="comment">     * Return a list of all the keys of all the nodes.</span>
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment">     * @return array the keys.</span>
<a name="l824"><span class="linenum"> 824</span></a>  <span class="comment">     */</span>
<a name="l825"><span class="linenum"> 825</span></a>      public function <a class="function" onClick="logFunction('get_key_list')" href="../_functions/get_key_list.html" onMouseOver="funcPopup(event,'get_key_list')">get_key_list</a>() {
<a name="l826"><span class="linenum"> 826</span></a>          <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../_variables/keys.html">$keys</a> = array();
<a name="l827"><span class="linenum"> 827</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('collection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/collection.html">collection</a> as <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l828"><span class="linenum"> 828</span></a>              <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../_variables/keys.html">$keys</a>[] = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('key')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/key.html">key</a>;
<a name="l829"><span class="linenum"> 829</span></a>          }
<a name="l830"><span class="linenum"> 830</span></a>          return <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../_variables/keys.html">$keys</a>;
<a name="l831"><span class="linenum"> 831</span></a>      }
<a name="l832"><span class="linenum"> 832</span></a>  
<a name="l833"><span class="linenum"> 833</span></a>      <span class="comment">/**</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment">     * Fetches a node from this collection.</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment">     *</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment">     * @param string|int $key The key of the node we want to find.</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment">     * @param int $type One of navigation_node::TYPE_*.</span>
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment">     * @return navigation_node|null</span>
<a name="l839"><span class="linenum"> 839</span></a>  <span class="comment">     */</span>
<a name="l840"><span class="linenum"> 840</span></a>      public function <a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=null) {
<a name="l841"><span class="linenum"> 841</span></a>          if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> !== null) {
<a name="l842"><span class="linenum"> 842</span></a>  <span class="comment">            // If the type is known then we can simply check and fetch</span>
<a name="l843"><span class="linenum"> 843</span></a>              if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>][<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>])) {
<a name="l844"><span class="linenum"> 844</span></a>                  return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>][<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>];
<a name="l845"><span class="linenum"> 845</span></a>              }
<a name="l846"><span class="linenum"> 846</span></a>          } else {
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment">            // Because we don't know the type we look in the progressive array</span>
<a name="l848"><span class="linenum"> 848</span></a>              foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('collection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/collection.html">collection</a> as <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l849"><span class="linenum"> 849</span></a>                  if (<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('key')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/key.html">key</a> === <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l850"><span class="linenum"> 850</span></a>                      return <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>;
<a name="l851"><span class="linenum"> 851</span></a>                  }
<a name="l852"><span class="linenum"> 852</span></a>              }
<a name="l853"><span class="linenum"> 853</span></a>          }
<a name="l854"><span class="linenum"> 854</span></a>          return false;
<a name="l855"><span class="linenum"> 855</span></a>      }
<a name="l856"><span class="linenum"> 856</span></a>  
<a name="l857"><span class="linenum"> 857</span></a>      <span class="comment">/**</span>
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">     * Searches for a node with matching key and type.</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">     *</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">     * This function searches both the nodes in this collection and all of</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">     * the nodes in each collection belonging to the nodes in this collection.</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment">     *</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment">     * Recursive.</span>
<a name="l864"><span class="linenum"> 864</span></a>  <span class="comment">     *</span>
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment">     * @param string|int $key  The key of the node we want to find.</span>
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment">     * @param int $type  One of navigation_node::TYPE_*.</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment">     * @return navigation_node|null</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment">     */</span>
<a name="l869"><span class="linenum"> 869</span></a>      public function <a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=null) {
<a name="l870"><span class="linenum"> 870</span></a>          if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> !== null &amp;&amp; <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>])) {
<a name="l871"><span class="linenum"> 871</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>][<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>];
<a name="l872"><span class="linenum"> 872</span></a>          } else {
<a name="l873"><span class="linenum"> 873</span></a>              <a class="var it51" onMouseOver="hilite(51)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getIterator')" href="../_functions/getiterator.html" onMouseOver="funcPopup(event,'getiterator')">getIterator</a>();
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment">            // Search immediate children first</span>
<a name="l875"><span class="linenum"> 875</span></a>              foreach (<a class="var it51" onMouseOver="hilite(51)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a> as &amp;<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l876"><span class="linenum"> 876</span></a>                  if (<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('key')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/key.html">key</a> === <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> &amp;&amp; (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === null || <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> === <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('type')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/type.html">type</a>)) {
<a name="l877"><span class="linenum"> 877</span></a>                      return <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>;
<a name="l878"><span class="linenum"> 878</span></a>                  }
<a name="l879"><span class="linenum"> 879</span></a>              }
<a name="l880"><span class="linenum"> 880</span></a>  <span class="comment">            // Now search each childs children</span>
<a name="l881"><span class="linenum"> 881</span></a>              foreach (<a class="var it51" onMouseOver="hilite(51)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a> as &amp;<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l882"><span class="linenum"> 882</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('children')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l883"><span class="linenum"> 883</span></a>                  if (<a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> !== false) {
<a name="l884"><span class="linenum"> 884</span></a>                      return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l885"><span class="linenum"> 885</span></a>                  }
<a name="l886"><span class="linenum"> 886</span></a>              }
<a name="l887"><span class="linenum"> 887</span></a>          }
<a name="l888"><span class="linenum"> 888</span></a>          return false;
<a name="l889"><span class="linenum"> 889</span></a>      }
<a name="l890"><span class="linenum"> 890</span></a>  
<a name="l891"><span class="linenum"> 891</span></a>      <span class="comment">/**</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment">     * Fetches the last node that was added to this collection</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment">     *</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment">     * @return navigation_node</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment">     */</span>
<a name="l896"><span class="linenum"> 896</span></a>      public function <a class="function" onClick="logFunction('last')" href="../_functions/last.html" onMouseOver="funcPopup(event,'last')">last</a>() {
<a name="l897"><span class="linenum"> 897</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('last')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/last.html">last</a>;
<a name="l898"><span class="linenum"> 898</span></a>      }
<a name="l899"><span class="linenum"> 899</span></a>  
<a name="l900"><span class="linenum"> 900</span></a>      <span class="comment">/**</span>
<a name="l901"><span class="linenum"> 901</span></a>  <span class="comment">     * Fetches all nodes of a given type from this collection</span>
<a name="l902"><span class="linenum"> 902</span></a>  <span class="comment">     *</span>
<a name="l903"><span class="linenum"> 903</span></a>  <span class="comment">     * @param string|int $type  node type being searched for.</span>
<a name="l904"><span class="linenum"> 904</span></a>  <span class="comment">     * @return array ordered collection</span>
<a name="l905"><span class="linenum"> 905</span></a>  <span class="comment">     */</span>
<a name="l906"><span class="linenum"> 906</span></a>      public function <a class="function" onClick="logFunction('type')" href="../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l907"><span class="linenum"> 907</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>)) {
<a name="l908"><span class="linenum"> 908</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>] = array();
<a name="l909"><span class="linenum"> 909</span></a>          }
<a name="l910"><span class="linenum"> 910</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>];
<a name="l911"><span class="linenum"> 911</span></a>      }
<a name="l912"><span class="linenum"> 912</span></a>      <span class="comment">/**</span>
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">     * Removes the node with the given key and type from the collection</span>
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment">     *</span>
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">     * @param string|int $key The key of the node we want to find.</span>
<a name="l916"><span class="linenum"> 916</span></a>  <span class="comment">     * @param int $type</span>
<a name="l917"><span class="linenum"> 917</span></a>  <span class="comment">     * @return bool</span>
<a name="l918"><span class="linenum"> 918</span></a>  <span class="comment">     */</span>
<a name="l919"><span class="linenum"> 919</span></a>      public function <a class="function" onClick="logFunction('remove')" href="../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=null) {
<a name="l920"><span class="linenum"> 920</span></a>          <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l921"><span class="linenum"> 921</span></a>          if (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a> !== false) {
<a name="l922"><span class="linenum"> 922</span></a>              foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('collection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/collection.html">collection</a> as <a class="var it12254" onMouseOver="hilite(12254)" onMouseOut="lolite()" onClick="logVariable('colkey')" href="../_variables/colkey.html">$colkey</a> =&gt; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l923"><span class="linenum"> 923</span></a>                  if (<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('key')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/key.html">key</a> === <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> &amp;&amp; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('type')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/type.html">type</a> == <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l924"><span class="linenum"> 924</span></a>                      unset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('collection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/collection.html">collection</a>[<a class="var it12254" onMouseOver="hilite(12254)" onMouseOut="lolite()" onClick="logVariable('colkey')" href="../_variables/colkey.html">$colkey</a>]);
<a name="l925"><span class="linenum"> 925</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('collection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/collection.html">collection</a> = <a class="phpfunction" onClick="logFunction('array_values')" href="../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('collection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/collection.html">collection</a>);
<a name="l926"><span class="linenum"> 926</span></a>                      break;
<a name="l927"><span class="linenum"> 927</span></a>                  }
<a name="l928"><span class="linenum"> 928</span></a>              }
<a name="l929"><span class="linenum"> 929</span></a>              unset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('orderedcollection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/orderedcollection.html">orderedcollection</a>[<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('type')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/type.html">type</a>][<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('key')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/key.html">key</a>]);
<a name="l930"><span class="linenum"> 930</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('count')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/count.html">count</a>--;
<a name="l931"><span class="linenum"> 931</span></a>              return true;
<a name="l932"><span class="linenum"> 932</span></a>          }
<a name="l933"><span class="linenum"> 933</span></a>          return false;
<a name="l934"><span class="linenum"> 934</span></a>      }
<a name="l935"><span class="linenum"> 935</span></a>  
<a name="l936"><span class="linenum"> 936</span></a>      <span class="comment">/**</span>
<a name="l937"><span class="linenum"> 937</span></a>  <span class="comment">     * Gets the number of nodes in this collection</span>
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment">     *</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment">     * This option uses an internal count rather than counting the actual options to avoid</span>
<a name="l940"><span class="linenum"> 940</span></a>  <span class="comment">     * a performance hit through the count function.</span>
<a name="l941"><span class="linenum"> 941</span></a>  <span class="comment">     *</span>
<a name="l942"><span class="linenum"> 942</span></a>  <span class="comment">     * @return int</span>
<a name="l943"><span class="linenum"> 943</span></a>  <span class="comment">     */</span>
<a name="l944"><span class="linenum"> 944</span></a>      public function <a class="function" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="funcPopup(event,'count')">count</a>() {
<a name="l945"><span class="linenum"> 945</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('count')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/count.html">count</a>;
<a name="l946"><span class="linenum"> 946</span></a>      }
<a name="l947"><span class="linenum"> 947</span></a>      <span class="comment">/**</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment">     * Gets an array iterator for the collection.</span>
<a name="l949"><span class="linenum"> 949</span></a>  <span class="comment">     *</span>
<a name="l950"><span class="linenum"> 950</span></a>  <span class="comment">     * This is required by the IteratorAggregator interface and is used by routines</span>
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment">     * such as the foreach loop.</span>
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment">     *</span>
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment">     * @return ArrayIterator</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment">     */</span>
<a name="l955"><span class="linenum"> 955</span></a>      public function <a class="function" onClick="logFunction('getIterator')" href="../_functions/getiterator.html" onMouseOver="funcPopup(event,'getiterator')">getIterator</a>() {
<a name="l956"><span class="linenum"> 956</span></a>          return new ArrayIterator(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('collection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/collection.html">collection</a>);
<a name="l957"><span class="linenum"> 957</span></a>      }
<a name="l958"><span class="linenum"> 958</span></a>  }
<a name="l959"><span class="linenum"> 959</span></a>  
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment">/**</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment"> * The global navigation class used for... the global navigation</span>
<a name="l962"><span class="linenum"> 962</span></a>  <span class="comment"> *</span>
<a name="l963"><span class="linenum"> 963</span></a>  <span class="comment"> * This class is used by PAGE to store the global navigation for the site</span>
<a name="l964"><span class="linenum"> 964</span></a>  <span class="comment"> * and is then used by the settings nav and navbar to save on processing and DB calls</span>
<a name="l965"><span class="linenum"> 965</span></a>  <span class="comment"> *</span>
<a name="l966"><span class="linenum"> 966</span></a>  <span class="comment"> * See</span>
<a name="l967"><span class="linenum"> 967</span></a>  <span class="comment"> * {@link lib/pagelib.php} {@link moodle_page::initialise_theme_and_output()}</span>
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment"> * {@link lib/ajax/getnavbranch.php} Called by ajax</span>
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment"> *</span>
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment"> * @package   core</span>
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment"> * @category  navigation</span>
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment"> * @copyright 2009 Sam Hemelryk</span>
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment"> */</span>
<a name="l975"><span class="linenum"> 975</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('global_navigation')" href="../_classes/global_navigation.html" onMouseOver="classPopup(event,'global_navigation')">global_navigation</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a> {
<a name="l976"><span class="linenum"> 976</span></a>  <span class="comment">    /** @var moodle_page The Moodle page this navigation object belongs to. */</span>
<a name="l977"><span class="linenum"> 977</span></a>      protected <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>;
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment">    /** @var bool switch to let us know if the navigation object is initialised*/</span>
<a name="l979"><span class="linenum"> 979</span></a>      protected <a class="var it19743" onMouseOver="hilite(19743)" onMouseOut="lolite()" onClick="logVariable('initialised')" href="../_variables/initialised.html">$initialised</a> = false;
<a name="l980"><span class="linenum"> 980</span></a>  <span class="comment">    /** @var array An array of course information */</span>
<a name="l981"><span class="linenum"> 981</span></a>      protected <a class="var it3111" onMouseOver="hilite(3111)" onMouseOut="lolite()" onClick="logVariable('mycourses')" href="../_variables/mycourses.html">$mycourses</a> = array();
<a name="l982"><span class="linenum"> 982</span></a>  <span class="comment">    /** @var navigation_node[] An array for containing  root navigation nodes */</span>
<a name="l983"><span class="linenum"> 983</span></a>      protected <a class="var it37454" onMouseOver="hilite(37454)" onMouseOut="lolite()" onClick="logVariable('rootnodes')" href="../_variables/rootnodes.html">$rootnodes</a> = array();
<a name="l984"><span class="linenum"> 984</span></a>  <span class="comment">    /** @var bool A switch for whether to show empty sections in the navigation */</span>
<a name="l985"><span class="linenum"> 985</span></a>      protected <a class="var it37455" onMouseOver="hilite(37455)" onMouseOut="lolite()" onClick="logVariable('showemptysections')" href="../_variables/showemptysections.html">$showemptysections</a> = true;
<a name="l986"><span class="linenum"> 986</span></a>  <span class="comment">    /** @var bool A switch for whether courses should be shown within categories on the navigation. */</span>
<a name="l987"><span class="linenum"> 987</span></a>      protected <a class="var it37456" onMouseOver="hilite(37456)" onMouseOut="lolite()" onClick="logVariable('showcategories')" href="../_variables/showcategories.html">$showcategories</a> = null;
<a name="l988"><span class="linenum"> 988</span></a>  <span class="comment">    /** @var null@var bool A switch for whether or not to show categories in the my courses branch. */</span>
<a name="l989"><span class="linenum"> 989</span></a>      protected <a class="var it37457" onMouseOver="hilite(37457)" onMouseOut="lolite()" onClick="logVariable('showmycategories')" href="../_variables/showmycategories.html">$showmycategories</a> = null;
<a name="l990"><span class="linenum"> 990</span></a>  <span class="comment">    /** @var array An array of stdClasses for users that the navigation is extended for */</span>
<a name="l991"><span class="linenum"> 991</span></a>      protected <a class="var it37458" onMouseOver="hilite(37458)" onMouseOut="lolite()" onClick="logVariable('extendforuser')" href="../_variables/extendforuser.html">$extendforuser</a> = array();
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment">    /** @var navigation_cache */</span>
<a name="l993"><span class="linenum"> 993</span></a>      protected <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>;
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment">    /** @var array An array of course ids that are present in the navigation */</span>
<a name="l995"><span class="linenum"> 995</span></a>      protected <a class="var it37459" onMouseOver="hilite(37459)" onMouseOut="lolite()" onClick="logVariable('addedcourses')" href="../_variables/addedcourses.html">$addedcourses</a> = array();
<a name="l996"><span class="linenum"> 996</span></a>  <span class="comment">    /** @var bool */</span>
<a name="l997"><span class="linenum"> 997</span></a>      protected <a class="var it37460" onMouseOver="hilite(37460)" onMouseOut="lolite()" onClick="logVariable('allcategoriesloaded')" href="../_variables/allcategoriesloaded.html">$allcategoriesloaded</a> = false;
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment">    /** @var array An array of category ids that are included in the navigation */</span>
<a name="l999"><span class="linenum"> 999</span></a>      protected <a class="var it37461" onMouseOver="hilite(37461)" onMouseOut="lolite()" onClick="logVariable('addedcategories')" href="../_variables/addedcategories.html">$addedcategories</a> = array();
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment">    /** @var int expansion limit */</span>
<a name="l1001"><span class="linenum">1001</span></a>      protected <a class="var it16959" onMouseOver="hilite(16959)" onMouseOut="lolite()" onClick="logVariable('expansionlimit')" href="../_variables/expansionlimit.html">$expansionlimit</a> = 0;
<a name="l1002"><span class="linenum">1002</span></a>  <span class="comment">    /** @var int userid to allow parent to see child's profile page navigation */</span>
<a name="l1003"><span class="linenum">1003</span></a>      protected <a class="var it37462" onMouseOver="hilite(37462)" onMouseOut="lolite()" onClick="logVariable('useridtouseforparentchecks')" href="../_variables/useridtouseforparentchecks.html">$useridtouseforparentchecks</a> = 0;
<a name="l1004"><span class="linenum">1004</span></a>  <span class="comment">    /** @var cache_session A cache that stores information on expanded courses */</span>
<a name="l1005"><span class="linenum">1005</span></a>      protected <a class="var it37463" onMouseOver="hilite(37463)" onMouseOut="lolite()" onClick="logVariable('cacheexpandcourse')" href="../_variables/cacheexpandcourse.html">$cacheexpandcourse</a> = null;
<a name="l1006"><span class="linenum">1006</span></a>  
<a name="l1007"><span class="linenum">1007</span></a>  <span class="comment">    /** Used when loading categories to load all top level categories [parent = 0] **/</span>
<a name="l1008"><span class="linenum">1008</span></a>      const LOAD_ROOT_CATEGORIES = 0;
<a name="l1009"><span class="linenum">1009</span></a>  <span class="comment">    /** Used when loading categories to load all categories **/</span>
<a name="l1010"><span class="linenum">1010</span></a>      const LOAD_ALL_CATEGORIES = -1;
<a name="l1011"><span class="linenum">1011</span></a>  
<a name="l1012"><span class="linenum">1012</span></a>      <span class="comment">/**</span>
<a name="l1013"><span class="linenum">1013</span></a>  <span class="comment">     * Constructs a new global navigation</span>
<a name="l1014"><span class="linenum">1014</span></a>  <span class="comment">     *</span>
<a name="l1015"><span class="linenum">1015</span></a>  <span class="comment">     * @param moodle_page $page The page this navigation object belongs to</span>
<a name="l1016"><span class="linenum">1016</span></a>  <span class="comment">     */</span>
<a name="l1017"><span class="linenum">1017</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(moodle_page <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>) {
<a name="l1018"><span class="linenum">1018</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l1019"><span class="linenum">1019</span></a>  
<a name="l1020"><span class="linenum">1020</span></a>          if (<a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l1021"><span class="linenum">1021</span></a>              return;
<a name="l1022"><span class="linenum">1022</span></a>          }
<a name="l1023"><span class="linenum">1023</span></a>  
<a name="l1024"><span class="linenum">1024</span></a>          if (<a class="function" onClick="logFunction('get_home_page')" href="../_functions/get_home_page.html" onMouseOver="funcPopup(event,'get_home_page')">get_home_page</a>() == <a class="constant" onClick="logConstant('HOMEPAGE_SITE')" href="../_constants/HOMEPAGE_SITE.html" onMouseOver="constPopup(event,'HOMEPAGE_SITE')">HOMEPAGE_SITE</a>) {
<a name="l1025"><span class="linenum">1025</span></a>  <span class="comment">            // We are using the site home for the root element</span>
<a name="l1026"><span class="linenum">1026</span></a>              <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a> = array(
<a name="l1027"><span class="linenum">1027</span></a>                  'key' =&gt; 'home',
<a name="l1028"><span class="linenum">1028</span></a>                  'type' =&gt; <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SYSTEM,
<a name="l1029"><span class="linenum">1029</span></a>                  'text' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('home'),
<a name="l1030"><span class="linenum">1030</span></a>                  'action' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/')
<a name="l1031"><span class="linenum">1031</span></a>              );
<a name="l1032"><span class="linenum">1032</span></a>          } else {
<a name="l1033"><span class="linenum">1033</span></a>  <span class="comment">            // We are using the users my moodle for the root element</span>
<a name="l1034"><span class="linenum">1034</span></a>              <a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a> = array(
<a name="l1035"><span class="linenum">1035</span></a>                  'key' =&gt; 'myhome',
<a name="l1036"><span class="linenum">1036</span></a>                  'type' =&gt; <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SYSTEM,
<a name="l1037"><span class="linenum">1037</span></a>                  'text' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('myhome'),
<a name="l1038"><span class="linenum">1038</span></a>                  'action' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/my/')
<a name="l1039"><span class="linenum">1039</span></a>              );
<a name="l1040"><span class="linenum">1040</span></a>          }
<a name="l1041"><span class="linenum">1041</span></a>  
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment">        // Use the parents constructor.... good good reuse</span>
<a name="l1043"><span class="linenum">1043</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it515" onMouseOver="hilite(515)" onMouseOut="lolite()" onClick="logVariable('properties')" href="../_variables/properties.html">$properties</a>);
<a name="l1044"><span class="linenum">1044</span></a>  
<a name="l1045"><span class="linenum">1045</span></a>  <span class="comment">        // Initalise and set defaults</span>
<a name="l1046"><span class="linenum">1046</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>;
<a name="l1047"><span class="linenum">1047</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('forceopen')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/forceopen.html">forceopen</a> = true;
<a name="l1048"><span class="linenum">1048</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a> = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_cache')" href="../_classes/navigation_cache.html" onMouseOver="classPopup(event,'navigation_cache')">navigation_cache</a>(<a class="constant" onClick="logConstant('NAVIGATION_CACHE_NAME')" href="../_constants/NAVIGATION_CACHE_NAME.html" onMouseOver="constPopup(event,'NAVIGATION_CACHE_NAME')">NAVIGATION_CACHE_NAME</a>);
<a name="l1049"><span class="linenum">1049</span></a>      }
<a name="l1050"><span class="linenum">1050</span></a>  
<a name="l1051"><span class="linenum">1051</span></a>      <span class="comment">/**</span>
<a name="l1052"><span class="linenum">1052</span></a>  <span class="comment">     * Mutator to set userid to allow parent to see child's profile</span>
<a name="l1053"><span class="linenum">1053</span></a>  <span class="comment">     * page navigation. See MDL-25805 for initial issue. Linked to it</span>
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment">     * is an issue explaining why this is a REALLY UGLY HACK thats not</span>
<a name="l1055"><span class="linenum">1055</span></a>  <span class="comment">     * for you to use!</span>
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment">     *</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment">     * @param int $userid userid of profile page that parent wants to navigate around.</span>
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment">     */</span>
<a name="l1059"><span class="linenum">1059</span></a>      public function <a class="function" onClick="logFunction('set_userid_for_parent_checks')" href="../_functions/set_userid_for_parent_checks.html" onMouseOver="funcPopup(event,'set_userid_for_parent_checks')">set_userid_for_parent_checks</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l1060"><span class="linenum">1060</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('useridtouseforparentchecks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/useridtouseforparentchecks.html">useridtouseforparentchecks</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>;
<a name="l1061"><span class="linenum">1061</span></a>      }
<a name="l1062"><span class="linenum">1062</span></a>  
<a name="l1063"><span class="linenum">1063</span></a>  
<a name="l1064"><span class="linenum">1064</span></a>      <span class="comment">/**</span>
<a name="l1065"><span class="linenum">1065</span></a>  <span class="comment">     * Initialises the navigation object.</span>
<a name="l1066"><span class="linenum">1066</span></a>  <span class="comment">     *</span>
<a name="l1067"><span class="linenum">1067</span></a>  <span class="comment">     * This causes the navigation object to look at the current state of the page</span>
<a name="l1068"><span class="linenum">1068</span></a>  <span class="comment">     * that it is associated with and then load the appropriate content.</span>
<a name="l1069"><span class="linenum">1069</span></a>  <span class="comment">     *</span>
<a name="l1070"><span class="linenum">1070</span></a>  <span class="comment">     * This should only occur the first time that the navigation structure is utilised</span>
<a name="l1071"><span class="linenum">1071</span></a>  <span class="comment">     * which will normally be either when the navbar is called to be displayed or</span>
<a name="l1072"><span class="linenum">1072</span></a>  <span class="comment">     * when a block makes use of it.</span>
<a name="l1073"><span class="linenum">1073</span></a>  <span class="comment">     *</span>
<a name="l1074"><span class="linenum">1074</span></a>  <span class="comment">     * @return bool</span>
<a name="l1075"><span class="linenum">1075</span></a>  <span class="comment">     */</span>
<a name="l1076"><span class="linenum">1076</span></a>      public function <a class="function" onClick="logFunction('initialise')" href="../_functions/initialise.html" onMouseOver="funcPopup(event,'initialise')">initialise</a>() {
<a name="l1077"><span class="linenum">1077</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l1078"><span class="linenum">1078</span></a>  <span class="comment">        // Check if it has already been initialised</span>
<a name="l1079"><span class="linenum">1079</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('initialised')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/initialised.html">initialised</a> || <a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l1080"><span class="linenum">1080</span></a>              return true;
<a name="l1081"><span class="linenum">1081</span></a>          }
<a name="l1082"><span class="linenum">1082</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('initialised')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/initialised.html">initialised</a> = true;
<a name="l1083"><span class="linenum">1083</span></a>  
<a name="l1084"><span class="linenum">1084</span></a>  <span class="comment">        // Set up the five base root nodes. These are nodes where we will put our</span>
<a name="l1085"><span class="linenum">1085</span></a>  <span class="comment">        // content and are as follows:</span>
<a name="l1086"><span class="linenum">1086</span></a>  <span class="comment">        // site: Navigation for the front page.</span>
<a name="l1087"><span class="linenum">1087</span></a>  <span class="comment">        // myprofile: User profile information goes here.</span>
<a name="l1088"><span class="linenum">1088</span></a>  <span class="comment">        // currentcourse: The course being currently viewed.</span>
<a name="l1089"><span class="linenum">1089</span></a>  <span class="comment">        // mycourses: The users courses get added here.</span>
<a name="l1090"><span class="linenum">1090</span></a>  <span class="comment">        // courses: Additional courses are added here.</span>
<a name="l1091"><span class="linenum">1091</span></a>  <span class="comment">        // users: Other users information loaded here.</span>
<a name="l1092"><span class="linenum">1092</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a> = array();
<a name="l1093"><span class="linenum">1093</span></a>          if (<a class="function" onClick="logFunction('get_home_page')" href="../_functions/get_home_page.html" onMouseOver="funcPopup(event,'get_home_page')">get_home_page</a>() == <a class="constant" onClick="logConstant('HOMEPAGE_SITE')" href="../_constants/HOMEPAGE_SITE.html" onMouseOver="constPopup(event,'HOMEPAGE_SITE')">HOMEPAGE_SITE</a>) {
<a name="l1094"><span class="linenum">1094</span></a>  <span class="comment">            // The home element should be my moodle because the root element is the site</span>
<a name="l1095"><span class="linenum">1095</span></a>              if (<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() &amp;&amp; !<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {  // Makes no sense if you aren't logged in
<a name="l1096"><span class="linenum">1096</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['home'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('myhome'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/my/'), self::TYPE_SETTING, null, 'home');
<a name="l1097"><span class="linenum">1097</span></a>              }
<a name="l1098"><span class="linenum">1098</span></a>          } else {
<a name="l1099"><span class="linenum">1099</span></a>  <span class="comment">            // The home element should be the site because the root node is my moodle</span>
<a name="l1100"><span class="linenum">1100</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['home'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('sitehome'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'), self::TYPE_SETTING, null, 'home');
<a name="l1101"><span class="linenum">1101</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaulthomepage')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/defaulthomepage.html">defaulthomepage</a>) &amp;&amp; (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaulthomepage')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/defaulthomepage.html">defaulthomepage</a> == <a class="constant" onClick="logConstant('HOMEPAGE_MY')" href="../_constants/HOMEPAGE_MY.html" onMouseOver="constPopup(event,'HOMEPAGE_MY')">HOMEPAGE_MY</a>)) {
<a name="l1102"><span class="linenum">1102</span></a>  <span class="comment">                // We need to stop automatic redirection</span>
<a name="l1103"><span class="linenum">1103</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['home']-&gt;action-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('redirect', '0');
<a name="l1104"><span class="linenum">1104</span></a>              }
<a name="l1105"><span class="linenum">1105</span></a>          }
<a name="l1106"><span class="linenum">1106</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['site'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>);
<a name="l1107"><span class="linenum">1107</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['myprofile'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('profile'), null, self::TYPE_USER, null, 'myprofile');
<a name="l1108"><span class="linenum">1108</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['currentcourse'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('currentcourse'), null, self::TYPE_ROOTNODE, null, 'currentcourse');
<a name="l1109"><span class="linenum">1109</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['mycourses'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('mycourses'), null, self::TYPE_ROOTNODE, null, 'mycourses');
<a name="l1110"><span class="linenum">1110</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['courses'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courses'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/index.php.html">/course/index.php</a>'), self::TYPE_ROOTNODE, null, 'courses');
<a name="l1111"><span class="linenum">1111</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['users'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('users'), null, self::TYPE_ROOTNODE, null, 'users');
<a name="l1112"><span class="linenum">1112</span></a>  
<a name="l1113"><span class="linenum">1113</span></a>  <span class="comment">        // We always load the frontpage course to ensure it is available without</span>
<a name="l1114"><span class="linenum">1114</span></a>  <span class="comment">        // JavaScript enabled.</span>
<a name="l1115"><span class="linenum">1115</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_front_page_course_essentials')" href="../_functions/add_front_page_course_essentials.html" onMouseOver="funcPopup(event,'add_front_page_course_essentials')">add_front_page_course_essentials</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['site'], <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>);
<a name="l1116"><span class="linenum">1116</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_course_sections')" href="../_functions/load_course_sections.html" onMouseOver="funcPopup(event,'load_course_sections')">load_course_sections</a>(<a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['site']);
<a name="l1117"><span class="linenum">1117</span></a>  
<a name="l1118"><span class="linenum">1118</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course;
<a name="l1119"><span class="linenum">1119</span></a>  
<a name="l1120"><span class="linenum">1120</span></a>  <span class="comment">        // $issite gets set to true if the current pages course is the sites frontpage course</span>
<a name="l1121"><span class="linenum">1121</span></a>          <a class="var it12949" onMouseOver="hilite(12949)" onMouseOut="lolite()" onClick="logVariable('issite')" href="../_variables/issite.html">$issite</a> = (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course-&gt;id == <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1122"><span class="linenum">1122</span></a>  <span class="comment">        // Determine if the user is enrolled in any course.</span>
<a name="l1123"><span class="linenum">1123</span></a>          <a class="var it37464" onMouseOver="hilite(37464)" onMouseOut="lolite()" onClick="logVariable('enrolledinanycourse')" href="../_variables/enrolledinanycourse.html">$enrolledinanycourse</a> = <a class="function" onClick="logFunction('enrol_user_sees_own_courses')" href="../_functions/enrol_user_sees_own_courses.html" onMouseOver="funcPopup(event,'enrol_user_sees_own_courses')">enrol_user_sees_own_courses</a>();
<a name="l1124"><span class="linenum">1124</span></a>  
<a name="l1125"><span class="linenum">1125</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['currentcourse']-&gt;mainnavonly = true;
<a name="l1126"><span class="linenum">1126</span></a>          if (<a class="var it37464" onMouseOver="hilite(37464)" onMouseOut="lolite()" onClick="logVariable('enrolledinanycourse')" href="../_variables/enrolledinanycourse.html">$enrolledinanycourse</a>) {
<a name="l1127"><span class="linenum">1127</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['mycourses']-&gt;isexpandable = true;
<a name="l1128"><span class="linenum">1128</span></a>              if (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navshowallcourses')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navshowallcourses.html">navshowallcourses</a>) {
<a name="l1129"><span class="linenum">1129</span></a>  <span class="comment">                // When we show all courses we need to show both the my courses and the regular courses branch.</span>
<a name="l1130"><span class="linenum">1130</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['courses']-&gt;isexpandable = true;
<a name="l1131"><span class="linenum">1131</span></a>              }
<a name="l1132"><span class="linenum">1132</span></a>          } else {
<a name="l1133"><span class="linenum">1133</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['courses']-&gt;isexpandable = true;
<a name="l1134"><span class="linenum">1134</span></a>          }
<a name="l1135"><span class="linenum">1135</span></a>  
<a name="l1136"><span class="linenum">1136</span></a>  <span class="comment">        // Load the users enrolled courses if they are viewing the My Moodle page AND the admin has not</span>
<a name="l1137"><span class="linenum">1137</span></a>  <span class="comment">        // set that they wish to keep the My Courses branch collapsed by default.</span>
<a name="l1138"><span class="linenum">1138</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navexpandmycourses')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navexpandmycourses.html">navexpandmycourses</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagelayout === 'mydashboard'){
<a name="l1139"><span class="linenum">1139</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['mycourses']-&gt;forceopen = true;
<a name="l1140"><span class="linenum">1140</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_courses_enrolled')" href="../_functions/load_courses_enrolled.html" onMouseOver="funcPopup(event,'load_courses_enrolled')">load_courses_enrolled</a>();
<a name="l1141"><span class="linenum">1141</span></a>          } else {
<a name="l1142"><span class="linenum">1142</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['mycourses']-&gt;collapse = true;
<a name="l1143"><span class="linenum">1143</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['mycourses']-&gt;<a class="function" onClick="logFunction('make_inactive')" href="../_functions/make_inactive.html" onMouseOver="funcPopup(event,'make_inactive')">make_inactive</a>();
<a name="l1144"><span class="linenum">1144</span></a>          }
<a name="l1145"><span class="linenum">1145</span></a>  
<a name="l1146"><span class="linenum">1146</span></a>          <a class="var it37467" onMouseOver="hilite(37467)" onMouseOut="lolite()" onClick="logVariable('canviewcourseprofile')" href="../_variables/canviewcourseprofile.html">$canviewcourseprofile</a> = true;
<a name="l1147"><span class="linenum">1147</span></a>  
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment">        // Next load context specific content into the navigation</span>
<a name="l1149"><span class="linenum">1149</span></a>          switch (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;contextlevel) {
<a name="l1150"><span class="linenum">1150</span></a>              case <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a> :
<a name="l1151"><span class="linenum">1151</span></a>  <span class="comment">                // Nothing left to do here I feel.</span>
<a name="l1152"><span class="linenum">1152</span></a>                  break;
<a name="l1153"><span class="linenum">1153</span></a>              case <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a> :
<a name="l1154"><span class="linenum">1154</span></a>  <span class="comment">                // This is essential, we must load categories.</span>
<a name="l1155"><span class="linenum">1155</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_categories')" href="../_functions/load_all_categories.html" onMouseOver="funcPopup(event,'load_all_categories')">load_all_categories</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;instanceid, true);
<a name="l1156"><span class="linenum">1156</span></a>                  break;
<a name="l1157"><span class="linenum">1157</span></a>              case <a class="constant" onClick="logConstant('CONTEXT_BLOCK')" href="../_constants/CONTEXT_BLOCK.html" onMouseOver="constPopup(event,'CONTEXT_BLOCK')">CONTEXT_BLOCK</a> :
<a name="l1158"><span class="linenum">1158</span></a>              case <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a> :
<a name="l1159"><span class="linenum">1159</span></a>                  if (<a class="var it12949" onMouseOver="hilite(12949)" onMouseOut="lolite()" onClick="logVariable('issite')" href="../_variables/issite.html">$issite</a>) {
<a name="l1160"><span class="linenum">1160</span></a>  <span class="comment">                    // Nothing left to do here.</span>
<a name="l1161"><span class="linenum">1161</span></a>                      break;
<a name="l1162"><span class="linenum">1162</span></a>                  }
<a name="l1163"><span class="linenum">1163</span></a>  
<a name="l1164"><span class="linenum">1164</span></a>  <span class="comment">                // Load the course associated with the current page into the navigation.</span>
<a name="l1165"><span class="linenum">1165</span></a>                  <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, false, self::COURSE_CURRENT);
<a name="l1166"><span class="linenum">1166</span></a>  <span class="comment">                // If the course wasn't added then don't try going any further.</span>
<a name="l1167"><span class="linenum">1167</span></a>                  if (!<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>) {
<a name="l1168"><span class="linenum">1168</span></a>                      <a class="var it37467" onMouseOver="hilite(37467)" onMouseOut="lolite()" onClick="logVariable('canviewcourseprofile')" href="../_variables/canviewcourseprofile.html">$canviewcourseprofile</a> = false;
<a name="l1169"><span class="linenum">1169</span></a>                      break;
<a name="l1170"><span class="linenum">1170</span></a>                  }
<a name="l1171"><span class="linenum">1171</span></a>  
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment">                // If the user is not enrolled then we only want to show the</span>
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment">                // course node and not populate it.</span>
<a name="l1174"><span class="linenum">1174</span></a>  
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment">                // Not enrolled, can't view, and hasn't switched roles</span>
<a name="l1176"><span class="linenum">1176</span></a>                  if (!<a class="function" onClick="logFunction('can_access_course')" href="../_functions/can_access_course.html" onMouseOver="funcPopup(event,'can_access_course')">can_access_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, null, '', true)) {
<a name="l1177"><span class="linenum">1177</span></a>                      if (<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a onClick="logVariable('isexpandable')" class="var it41084" onMouseOver="hilite(41084)" onMouseOut="lolite()" href="../_variables/isexpandable.html">isexpandable</a> === true) {
<a name="l1178"><span class="linenum">1178</span></a>  <span class="comment">                        // Obviously the situation has changed, update the cache and adjust the node.</span>
<a name="l1179"><span class="linenum">1179</span></a>  <span class="comment">                        // This occurs if the user access to a course has been revoked (one way or another) after</span>
<a name="l1180"><span class="linenum">1180</span></a>  <span class="comment">                        // initially logging in for this session.</span>
<a name="l1181"><span class="linenum">1181</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_expand_course_cache')" href="../_functions/get_expand_course_cache.html" onMouseOver="funcPopup(event,'get_expand_course_cache')">get_expand_course_cache</a>()-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 1);
<a name="l1182"><span class="linenum">1182</span></a>                          <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a onClick="logVariable('isexpandable')" class="var it41084" onMouseOver="hilite(41084)" onMouseOut="lolite()" href="../_variables/isexpandable.html">isexpandable</a> = true;
<a name="l1183"><span class="linenum">1183</span></a>                          <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a onClick="logVariable('nodetype')" class="var it41084" onMouseOver="hilite(41084)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = self::NODETYPE_BRANCH;
<a name="l1184"><span class="linenum">1184</span></a>                      }
<a name="l1185"><span class="linenum">1185</span></a>  <span class="comment">                    // Very ugly hack - do not force &quot;parents&quot; to enrol into course their child is enrolled in,</span>
<a name="l1186"><span class="linenum">1186</span></a>  <span class="comment">                    // this hack has been propagated from user/view.php to display the navigation node. (MDL-25805)</span>
<a name="l1187"><span class="linenum">1187</span></a>                      if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('current_user_is_parent_role')" href="../_functions/current_user_is_parent_role.html" onMouseOver="funcPopup(event,'current_user_is_parent_role')">current_user_is_parent_role</a>()) {
<a name="l1188"><span class="linenum">1188</span></a>                          <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('make_active')" href="../_functions/make_active.html" onMouseOver="funcPopup(event,'make_active')">make_active</a>();
<a name="l1189"><span class="linenum">1189</span></a>                          <a class="var it37467" onMouseOver="hilite(37467)" onMouseOut="lolite()" onClick="logVariable('canviewcourseprofile')" href="../_variables/canviewcourseprofile.html">$canviewcourseprofile</a> = false;
<a name="l1190"><span class="linenum">1190</span></a>                          break;
<a name="l1191"><span class="linenum">1191</span></a>                      }
<a name="l1192"><span class="linenum">1192</span></a>                  } else if (<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a onClick="logVariable('isexpandable')" class="var it41084" onMouseOver="hilite(41084)" onMouseOut="lolite()" href="../_variables/isexpandable.html">isexpandable</a> === false) {
<a name="l1193"><span class="linenum">1193</span></a>  <span class="comment">                    // Obviously the situation has changed, update the cache and adjust the node.</span>
<a name="l1194"><span class="linenum">1194</span></a>  <span class="comment">                    // This occurs if the user has been granted access to a course (one way or another) after initially</span>
<a name="l1195"><span class="linenum">1195</span></a>  <span class="comment">                    // logging in for this session.</span>
<a name="l1196"><span class="linenum">1196</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_expand_course_cache')" href="../_functions/get_expand_course_cache.html" onMouseOver="funcPopup(event,'get_expand_course_cache')">get_expand_course_cache</a>()-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 1);
<a name="l1197"><span class="linenum">1197</span></a>                      <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a onClick="logVariable('isexpandable')" class="var it41084" onMouseOver="hilite(41084)" onMouseOut="lolite()" href="../_variables/isexpandable.html">isexpandable</a> = true;
<a name="l1198"><span class="linenum">1198</span></a>                      <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a onClick="logVariable('nodetype')" class="var it41084" onMouseOver="hilite(41084)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = self::NODETYPE_BRANCH;
<a name="l1199"><span class="linenum">1199</span></a>                  }
<a name="l1200"><span class="linenum">1200</span></a>  
<a name="l1201"><span class="linenum">1201</span></a>  <span class="comment">                // Add the essentials such as reports etc...</span>
<a name="l1202"><span class="linenum">1202</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course_essentials')" href="../_functions/add_course_essentials.html" onMouseOver="funcPopup(event,'add_course_essentials')">add_course_essentials</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1203"><span class="linenum">1203</span></a>  <span class="comment">                // Extend course navigation with it's sections/activities</span>
<a name="l1204"><span class="linenum">1204</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_course_sections')" href="../_functions/load_course_sections.html" onMouseOver="funcPopup(event,'load_course_sections')">load_course_sections</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>);
<a name="l1205"><span class="linenum">1205</span></a>                  if (!<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('contains_active_node')" href="../_functions/contains_active_node.html" onMouseOver="funcPopup(event,'contains_active_node')">contains_active_node</a>() &amp;&amp; !<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('search_for_active_node')" href="../_functions/search_for_active_node.html" onMouseOver="funcPopup(event,'search_for_active_node')">search_for_active_node</a>()) {
<a name="l1206"><span class="linenum">1206</span></a>                      <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('make_active')" href="../_functions/make_active.html" onMouseOver="funcPopup(event,'make_active')">make_active</a>();
<a name="l1207"><span class="linenum">1207</span></a>                  }
<a name="l1208"><span class="linenum">1208</span></a>  
<a name="l1209"><span class="linenum">1209</span></a>                  break;
<a name="l1210"><span class="linenum">1210</span></a>              case <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a> :
<a name="l1211"><span class="linenum">1211</span></a>                  if (<a class="var it12949" onMouseOver="hilite(12949)" onMouseOut="lolite()" onClick="logVariable('issite')" href="../_variables/issite.html">$issite</a>) {
<a name="l1212"><span class="linenum">1212</span></a>  <span class="comment">                    // If this is the site course then most information will have</span>
<a name="l1213"><span class="linenum">1213</span></a>  <span class="comment">                    // already been loaded.</span>
<a name="l1214"><span class="linenum">1214</span></a>  <span class="comment">                    // However we need to check if there is more content that can</span>
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment">                    // yet be loaded for the specific module instance.</span>
<a name="l1216"><span class="linenum">1216</span></a>                      <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['site']-&gt;<a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;id, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_ACTIVITY);
<a name="l1217"><span class="linenum">1217</span></a>                      if (<a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>) {
<a name="l1218"><span class="linenum">1218</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_activity')" href="../_functions/load_activity.html" onMouseOver="funcPopup(event,'load_activity')">load_activity</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course, <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>);
<a name="l1219"><span class="linenum">1219</span></a>                      }
<a name="l1220"><span class="linenum">1220</span></a>                      break;
<a name="l1221"><span class="linenum">1221</span></a>                  }
<a name="l1222"><span class="linenum">1222</span></a>  
<a name="l1223"><span class="linenum">1223</span></a>                  <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course;
<a name="l1224"><span class="linenum">1224</span></a>                  <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm;
<a name="l1225"><span class="linenum">1225</span></a>  
<a name="l1226"><span class="linenum">1226</span></a>  <span class="comment">                // Load the course associated with the page into the navigation</span>
<a name="l1227"><span class="linenum">1227</span></a>                  <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, false, self::COURSE_CURRENT);
<a name="l1228"><span class="linenum">1228</span></a>  
<a name="l1229"><span class="linenum">1229</span></a>  <span class="comment">                // If the course wasn't added then don't try going any further.</span>
<a name="l1230"><span class="linenum">1230</span></a>                  if (!<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>) {
<a name="l1231"><span class="linenum">1231</span></a>                      <a class="var it37467" onMouseOver="hilite(37467)" onMouseOut="lolite()" onClick="logVariable('canviewcourseprofile')" href="../_variables/canviewcourseprofile.html">$canviewcourseprofile</a> = false;
<a name="l1232"><span class="linenum">1232</span></a>                      break;
<a name="l1233"><span class="linenum">1233</span></a>                  }
<a name="l1234"><span class="linenum">1234</span></a>  
<a name="l1235"><span class="linenum">1235</span></a>  <span class="comment">                // If the user is not enrolled then we only want to show the</span>
<a name="l1236"><span class="linenum">1236</span></a>  <span class="comment">                // course node and not populate it.</span>
<a name="l1237"><span class="linenum">1237</span></a>                  if (!<a class="function" onClick="logFunction('can_access_course')" href="../_functions/can_access_course.html" onMouseOver="funcPopup(event,'can_access_course')">can_access_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, null, '', true)) {
<a name="l1238"><span class="linenum">1238</span></a>                      <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('make_active')" href="../_functions/make_active.html" onMouseOver="funcPopup(event,'make_active')">make_active</a>();
<a name="l1239"><span class="linenum">1239</span></a>                      <a class="var it37467" onMouseOver="hilite(37467)" onMouseOut="lolite()" onClick="logVariable('canviewcourseprofile')" href="../_variables/canviewcourseprofile.html">$canviewcourseprofile</a> = false;
<a name="l1240"><span class="linenum">1240</span></a>                      break;
<a name="l1241"><span class="linenum">1241</span></a>                  }
<a name="l1242"><span class="linenum">1242</span></a>  
<a name="l1243"><span class="linenum">1243</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course_essentials')" href="../_functions/add_course_essentials.html" onMouseOver="funcPopup(event,'add_course_essentials')">add_course_essentials</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1244"><span class="linenum">1244</span></a>  
<a name="l1245"><span class="linenum">1245</span></a>  <span class="comment">                // Load the course sections into the page</span>
<a name="l1246"><span class="linenum">1246</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_course_sections')" href="../_functions/load_course_sections.html" onMouseOver="funcPopup(event,'load_course_sections')">load_course_sections</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, null, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l1247"><span class="linenum">1247</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a> = <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_ACTIVITY);
<a name="l1248"><span class="linenum">1248</span></a>                  if (!empty(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>)) {
<a name="l1249"><span class="linenum">1249</span></a>  <span class="comment">                    // Finally load the cm specific navigaton information</span>
<a name="l1250"><span class="linenum">1250</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_activity')" href="../_functions/load_activity.html" onMouseOver="funcPopup(event,'load_activity')">load_activity</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>);
<a name="l1251"><span class="linenum">1251</span></a>  <span class="comment">                    // Check if we have an active ndoe</span>
<a name="l1252"><span class="linenum">1252</span></a>                      if (!<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a class="function" onClick="logFunction('contains_active_node')" href="../_functions/contains_active_node.html" onMouseOver="funcPopup(event,'contains_active_node')">contains_active_node</a>() &amp;&amp; !<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a class="function" onClick="logFunction('search_for_active_node')" href="../_functions/search_for_active_node.html" onMouseOver="funcPopup(event,'search_for_active_node')">search_for_active_node</a>()) {
<a name="l1253"><span class="linenum">1253</span></a>  <span class="comment">                        // And make the activity node active.</span>
<a name="l1254"><span class="linenum">1254</span></a>                          <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a class="function" onClick="logFunction('make_active')" href="../_functions/make_active.html" onMouseOver="funcPopup(event,'make_active')">make_active</a>();
<a name="l1255"><span class="linenum">1255</span></a>                      }
<a name="l1256"><span class="linenum">1256</span></a>                  }
<a name="l1257"><span class="linenum">1257</span></a>                  break;
<a name="l1258"><span class="linenum">1258</span></a>              case <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a> :
<a name="l1259"><span class="linenum">1259</span></a>                  if (<a class="var it12949" onMouseOver="hilite(12949)" onMouseOut="lolite()" onClick="logVariable('issite')" href="../_variables/issite.html">$issite</a>) {
<a name="l1260"><span class="linenum">1260</span></a>  <span class="comment">                    // The users profile information etc is already loaded</span>
<a name="l1261"><span class="linenum">1261</span></a>  <span class="comment">                    // for the front page.</span>
<a name="l1262"><span class="linenum">1262</span></a>                      break;
<a name="l1263"><span class="linenum">1263</span></a>                  }
<a name="l1264"><span class="linenum">1264</span></a>                  <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course;
<a name="l1265"><span class="linenum">1265</span></a>  <span class="comment">                // Load the course associated with the user into the navigation</span>
<a name="l1266"><span class="linenum">1266</span></a>                  <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, false, self::COURSE_CURRENT);
<a name="l1267"><span class="linenum">1267</span></a>  
<a name="l1268"><span class="linenum">1268</span></a>  <span class="comment">                // If the course wasn't added then don't try going any further.</span>
<a name="l1269"><span class="linenum">1269</span></a>                  if (!<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>) {
<a name="l1270"><span class="linenum">1270</span></a>                      <a class="var it37467" onMouseOver="hilite(37467)" onMouseOut="lolite()" onClick="logVariable('canviewcourseprofile')" href="../_variables/canviewcourseprofile.html">$canviewcourseprofile</a> = false;
<a name="l1271"><span class="linenum">1271</span></a>                      break;
<a name="l1272"><span class="linenum">1272</span></a>                  }
<a name="l1273"><span class="linenum">1273</span></a>  
<a name="l1274"><span class="linenum">1274</span></a>  <span class="comment">                // If the user is not enrolled then we only want to show the</span>
<a name="l1275"><span class="linenum">1275</span></a>  <span class="comment">                // course node and not populate it.</span>
<a name="l1276"><span class="linenum">1276</span></a>                  if (!<a class="function" onClick="logFunction('can_access_course')" href="../_functions/can_access_course.html" onMouseOver="funcPopup(event,'can_access_course')">can_access_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, null, '', true)) {
<a name="l1277"><span class="linenum">1277</span></a>                      <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('make_active')" href="../_functions/make_active.html" onMouseOver="funcPopup(event,'make_active')">make_active</a>();
<a name="l1278"><span class="linenum">1278</span></a>                      <a class="var it37467" onMouseOver="hilite(37467)" onMouseOut="lolite()" onClick="logVariable('canviewcourseprofile')" href="../_variables/canviewcourseprofile.html">$canviewcourseprofile</a> = false;
<a name="l1279"><span class="linenum">1279</span></a>                      break;
<a name="l1280"><span class="linenum">1280</span></a>                  }
<a name="l1281"><span class="linenum">1281</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course_essentials')" href="../_functions/add_course_essentials.html" onMouseOver="funcPopup(event,'add_course_essentials')">add_course_essentials</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1282"><span class="linenum">1282</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_course_sections')" href="../_functions/load_course_sections.html" onMouseOver="funcPopup(event,'load_course_sections')">load_course_sections</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>);
<a name="l1283"><span class="linenum">1283</span></a>                  break;
<a name="l1284"><span class="linenum">1284</span></a>          }
<a name="l1285"><span class="linenum">1285</span></a>  
<a name="l1286"><span class="linenum">1286</span></a>  <span class="comment">        // Load for the current user</span>
<a name="l1287"><span class="linenum">1287</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_for_user')" href="../_functions/load_for_user.html" onMouseOver="funcPopup(event,'load_for_user')">load_for_user</a>();
<a name="l1288"><span class="linenum">1288</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;contextlevel &gt;= <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a> &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;instanceid != <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a> &amp;&amp; <a class="var it37467" onMouseOver="hilite(37467)" onMouseOut="lolite()" onClick="logVariable('canviewcourseprofile')" href="../_variables/canviewcourseprofile.html">$canviewcourseprofile</a>) {
<a name="l1289"><span class="linenum">1289</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_for_user')" href="../_functions/load_for_user.html" onMouseOver="funcPopup(event,'load_for_user')">load_for_user</a>(null, true);
<a name="l1290"><span class="linenum">1290</span></a>          }
<a name="l1291"><span class="linenum">1291</span></a>  <span class="comment">        // Load each extending user into the navigation.</span>
<a name="l1292"><span class="linenum">1292</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extendforuser')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/extendforuser.html">extendforuser</a> as <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) {
<a name="l1293"><span class="linenum">1293</span></a>              if (<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1294"><span class="linenum">1294</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_for_user')" href="../_functions/load_for_user.html" onMouseOver="funcPopup(event,'load_for_user')">load_for_user</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>);
<a name="l1295"><span class="linenum">1295</span></a>              }
<a name="l1296"><span class="linenum">1296</span></a>          }
<a name="l1297"><span class="linenum">1297</span></a>  
<a name="l1298"><span class="linenum">1298</span></a>  <span class="comment">        // Give the local plugins a chance to include some navigation if they want.</span>
<a name="l1299"><span class="linenum">1299</span></a>          foreach (<a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list_with_file')" href="../_functions/get_plugin_list_with_file.html" onMouseOver="funcPopup(event,'get_plugin_list_with_file')">get_plugin_list_with_file</a>('local', 'lib.php', true) as <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> =&gt; <a class="var it1136" onMouseOver="hilite(1136)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../_variables/unused.html">$unused</a>) {
<a name="l1300"><span class="linenum">1300</span></a>              <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = &quot;local_{<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>}_extend_navigation&quot;;
<a name="l1301"><span class="linenum">1301</span></a>              <a class="var it13150" onMouseOver="hilite(13150)" onMouseOut="lolite()" onClick="logVariable('oldfunction')" href="../_variables/oldfunction.html">$oldfunction</a> = &quot;local_{<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>}_extends_navigation&quot;;
<a name="l1302"><span class="linenum">1302</span></a>  
<a name="l1303"><span class="linenum">1303</span></a>              if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)) {
<a name="l1304"><span class="linenum">1304</span></a>                  <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l1305"><span class="linenum">1305</span></a>  
<a name="l1306"><span class="linenum">1306</span></a>              } else if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it13150" onMouseOver="hilite(13150)" onMouseOut="lolite()" onClick="logVariable('oldfunction')" href="../_variables/oldfunction.html">$oldfunction</a>)) {
<a name="l1307"><span class="linenum">1307</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;Deprecated local plugin navigation callback: Please rename '{<a class="var it13150" onMouseOver="hilite(13150)" onMouseOut="lolite()" onClick="logVariable('oldfunction')" href="../_variables/oldfunction.html">$oldfunction</a>}' to '{<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>}'. &quot;.
<a name="l1308"><span class="linenum">1308</span></a>                      &quot;Support for the old callback will be dropped in Moodle 3.1&quot;, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1309"><span class="linenum">1309</span></a>                  <a class="var it13150" onMouseOver="hilite(13150)" onMouseOut="lolite()" onClick="logVariable('oldfunction')" href="../_variables/oldfunction.html">$oldfunction</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>);
<a name="l1310"><span class="linenum">1310</span></a>              }
<a name="l1311"><span class="linenum">1311</span></a>          }
<a name="l1312"><span class="linenum">1312</span></a>  
<a name="l1313"><span class="linenum">1313</span></a>  <span class="comment">        // Remove any empty root nodes</span>
<a name="l1314"><span class="linenum">1314</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a> as <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l1315"><span class="linenum">1315</span></a>  <span class="comment">            // Dont remove the home node</span>
<a name="l1316"><span class="linenum">1316</span></a>  <span class="comment">            /** @var navigation_node $node */</span>
<a name="l1317"><span class="linenum">1317</span></a>              if (<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('key')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/key.html">key</a> !== 'home' &amp;&amp; !<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a class="function" onClick="logFunction('has_children')" href="../_functions/has_children.html" onMouseOver="funcPopup(event,'has_children')">has_children</a>() &amp;&amp; !<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('isactive')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/isactive.html">isactive</a>) {
<a name="l1318"><span class="linenum">1318</span></a>                  <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a class="function" onClick="logFunction('remove')" href="../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l1319"><span class="linenum">1319</span></a>              }
<a name="l1320"><span class="linenum">1320</span></a>          }
<a name="l1321"><span class="linenum">1321</span></a>  
<a name="l1322"><span class="linenum">1322</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('contains_active_node')" href="../_functions/contains_active_node.html" onMouseOver="funcPopup(event,'contains_active_node')">contains_active_node</a>()) {
<a name="l1323"><span class="linenum">1323</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('search_for_active_node')" href="../_functions/search_for_active_node.html" onMouseOver="funcPopup(event,'search_for_active_node')">search_for_active_node</a>();
<a name="l1324"><span class="linenum">1324</span></a>          }
<a name="l1325"><span class="linenum">1325</span></a>  
<a name="l1326"><span class="linenum">1326</span></a>  <span class="comment">        // If the user is not logged in modify the navigation structure as detailed</span>
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment">        // in {@link http://docs.moodle.org/dev/Navigation_2.0_structure}</span>
<a name="l1328"><span class="linenum">1328</span></a>          if (!<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>()) {
<a name="l1329"><span class="linenum">1329</span></a>              <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../_variables/activities.html">$activities</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['site']-&gt;children);
<a name="l1330"><span class="linenum">1330</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['site']-&gt;<a class="function" onClick="logFunction('remove')" href="../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l1331"><span class="linenum">1331</span></a>              <a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>);
<a name="l1332"><span class="linenum">1332</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_node_collection')" href="../_classes/navigation_node_collection.html" onMouseOver="classPopup(event,'navigation_node_collection')">navigation_node_collection</a>();
<a name="l1333"><span class="linenum">1333</span></a>              foreach (<a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../_variables/activities.html">$activities</a> as <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l1334"><span class="linenum">1334</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>);
<a name="l1335"><span class="linenum">1335</span></a>              }
<a name="l1336"><span class="linenum">1336</span></a>              foreach (<a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> as <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l1337"><span class="linenum">1337</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>);
<a name="l1338"><span class="linenum">1338</span></a>              }
<a name="l1339"><span class="linenum">1339</span></a>          }
<a name="l1340"><span class="linenum">1340</span></a>          return true;
<a name="l1341"><span class="linenum">1341</span></a>      }
<a name="l1342"><span class="linenum">1342</span></a>  
<a name="l1343"><span class="linenum">1343</span></a>      <span class="comment">/**</span>
<a name="l1344"><span class="linenum">1344</span></a>  <span class="comment">     * Returns true if the current user is a parent of the user being currently viewed.</span>
<a name="l1345"><span class="linenum">1345</span></a>  <span class="comment">     *</span>
<a name="l1346"><span class="linenum">1346</span></a>  <span class="comment">     * If the current user is not viewing another user, or if the current user does not hold any parent roles over the</span>
<a name="l1347"><span class="linenum">1347</span></a>  <span class="comment">     * other user being viewed this function returns false.</span>
<a name="l1348"><span class="linenum">1348</span></a>  <span class="comment">     * In order to set the user for whom we are checking against you must call {@link set_userid_for_parent_checks()}</span>
<a name="l1349"><span class="linenum">1349</span></a>  <span class="comment">     *</span>
<a name="l1350"><span class="linenum">1350</span></a>  <span class="comment">     * @since Moodle 2.4</span>
<a name="l1351"><span class="linenum">1351</span></a>  <span class="comment">     * @return bool</span>
<a name="l1352"><span class="linenum">1352</span></a>  <span class="comment">     */</span>
<a name="l1353"><span class="linenum">1353</span></a>      protected function <a class="function" onClick="logFunction('current_user_is_parent_role')" href="../_functions/current_user_is_parent_role.html" onMouseOver="funcPopup(event,'current_user_is_parent_role')">current_user_is_parent_role</a>() {
<a name="l1354"><span class="linenum">1354</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1355"><span class="linenum">1355</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('useridtouseforparentchecks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/useridtouseforparentchecks.html">useridtouseforparentchecks</a> &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('useridtouseforparentchecks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/useridtouseforparentchecks.html">useridtouseforparentchecks</a> != <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1356"><span class="linenum">1356</span></a>              <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('useridtouseforparentchecks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/useridtouseforparentchecks.html">useridtouseforparentchecks</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1357"><span class="linenum">1357</span></a>              if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:viewdetails', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>)) {
<a name="l1358"><span class="linenum">1358</span></a>                  return false;
<a name="l1359"><span class="linenum">1359</span></a>              }
<a name="l1360"><span class="linenum">1360</span></a>              if (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('role_assignments', array('userid' =&gt; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'contextid' =&gt; <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it39494" onMouseOver="hilite(39494)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l1361"><span class="linenum">1361</span></a>                  return true;
<a name="l1362"><span class="linenum">1362</span></a>              }
<a name="l1363"><span class="linenum">1363</span></a>          }
<a name="l1364"><span class="linenum">1364</span></a>          return false;
<a name="l1365"><span class="linenum">1365</span></a>      }
<a name="l1366"><span class="linenum">1366</span></a>  
<a name="l1367"><span class="linenum">1367</span></a>      <span class="comment">/**</span>
<a name="l1368"><span class="linenum">1368</span></a>  <span class="comment">     * Returns true if courses should be shown within categories on the navigation.</span>
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment">     *</span>
<a name="l1370"><span class="linenum">1370</span></a>  <span class="comment">     * @param bool $ismycourse Set to true if you are calculating this for a course.</span>
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment">     * @return bool</span>
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment">     */</span>
<a name="l1373"><span class="linenum">1373</span></a>      protected function <a class="function" onClick="logFunction('show_categories')" href="../_functions/show_categories.html" onMouseOver="funcPopup(event,'show_categories')">show_categories</a>(<a class="var it37468" onMouseOver="hilite(37468)" onMouseOut="lolite()" onClick="logVariable('ismycourse')" href="../_variables/ismycourse.html">$ismycourse</a> = false) {
<a name="l1374"><span class="linenum">1374</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1375"><span class="linenum">1375</span></a>          if (<a class="var it37468" onMouseOver="hilite(37468)" onMouseOut="lolite()" onClick="logVariable('ismycourse')" href="../_variables/ismycourse.html">$ismycourse</a>) {
<a name="l1376"><span class="linenum">1376</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_my_categories')" href="../_functions/show_my_categories.html" onMouseOver="funcPopup(event,'show_my_categories')">show_my_categories</a>();
<a name="l1377"><span class="linenum">1377</span></a>          }
<a name="l1378"><span class="linenum">1378</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/showcategories.html">showcategories</a> === null) {
<a name="l1379"><span class="linenum">1379</span></a>              <a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('show')" href="../_variables/show.html">$show</a> = false;
<a name="l1380"><span class="linenum">1380</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;contextlevel == <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>) {
<a name="l1381"><span class="linenum">1381</span></a>                  <a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('show')" href="../_variables/show.html">$show</a> = true;
<a name="l1382"><span class="linenum">1382</span></a>              } else if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navshowcategories')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navshowcategories.html">navshowcategories</a>) &amp;&amp; <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('course_categories') &gt; 1) {
<a name="l1383"><span class="linenum">1383</span></a>                  <a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('show')" href="../_variables/show.html">$show</a> = true;
<a name="l1384"><span class="linenum">1384</span></a>              }
<a name="l1385"><span class="linenum">1385</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/showcategories.html">showcategories</a> = <a class="var it7063" onMouseOver="hilite(7063)" onMouseOut="lolite()" onClick="logVariable('show')" href="../_variables/show.html">$show</a>;
<a name="l1386"><span class="linenum">1386</span></a>          }
<a name="l1387"><span class="linenum">1387</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/showcategories.html">showcategories</a>;
<a name="l1388"><span class="linenum">1388</span></a>      }
<a name="l1389"><span class="linenum">1389</span></a>  
<a name="l1390"><span class="linenum">1390</span></a>      <span class="comment">/**</span>
<a name="l1391"><span class="linenum">1391</span></a>  <span class="comment">     * Returns true if we should show categories in the My Courses branch.</span>
<a name="l1392"><span class="linenum">1392</span></a>  <span class="comment">     * @return bool</span>
<a name="l1393"><span class="linenum">1393</span></a>  <span class="comment">     */</span>
<a name="l1394"><span class="linenum">1394</span></a>      protected function <a class="function" onClick="logFunction('show_my_categories')" href="../_functions/show_my_categories.html" onMouseOver="funcPopup(event,'show_my_categories')">show_my_categories</a>() {
<a name="l1395"><span class="linenum">1395</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1396"><span class="linenum">1396</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showmycategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/showmycategories.html">showmycategories</a> === null) {
<a name="l1397"><span class="linenum">1397</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showmycategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/showmycategories.html">showmycategories</a> = !empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navshowmycoursecategories')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navshowmycoursecategories.html">navshowmycoursecategories</a>) &amp;&amp; <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('course_categories') &gt; 1;
<a name="l1398"><span class="linenum">1398</span></a>          }
<a name="l1399"><span class="linenum">1399</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showmycategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/showmycategories.html">showmycategories</a>;
<a name="l1400"><span class="linenum">1400</span></a>      }
<a name="l1401"><span class="linenum">1401</span></a>  
<a name="l1402"><span class="linenum">1402</span></a>      <span class="comment">/**</span>
<a name="l1403"><span class="linenum">1403</span></a>  <span class="comment">     * Loads the courses in Moodle into the navigation.</span>
<a name="l1404"><span class="linenum">1404</span></a>  <span class="comment">     *</span>
<a name="l1405"><span class="linenum">1405</span></a>  <span class="comment">     * @global moodle_database $DB</span>
<a name="l1406"><span class="linenum">1406</span></a>  <span class="comment">     * @param string|array $categoryids An array containing categories to load courses</span>
<a name="l1407"><span class="linenum">1407</span></a>  <span class="comment">     *                     for, OR null to load courses for all categories.</span>
<a name="l1408"><span class="linenum">1408</span></a>  <span class="comment">     * @return array An array of navigation_nodes one for each course</span>
<a name="l1409"><span class="linenum">1409</span></a>  <span class="comment">     */</span>
<a name="l1410"><span class="linenum">1410</span></a>      protected function <a class="function" onClick="logFunction('load_all_courses')" href="../_functions/load_all_courses.html" onMouseOver="funcPopup(event,'load_all_courses')">load_all_courses</a>(<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a> = null) {
<a name="l1411"><span class="linenum">1411</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l1412"><span class="linenum">1412</span></a>  
<a name="l1413"><span class="linenum">1413</span></a>  <span class="comment">        // Work out the limit of courses.</span>
<a name="l1414"><span class="linenum">1414</span></a>          <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> = 20;
<a name="l1415"><span class="linenum">1415</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navcourselimit')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navcourselimit.html">navcourselimit</a>)) {
<a name="l1416"><span class="linenum">1416</span></a>              <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navcourselimit')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navcourselimit.html">navcourselimit</a>;
<a name="l1417"><span class="linenum">1417</span></a>          }
<a name="l1418"><span class="linenum">1418</span></a>  
<a name="l1419"><span class="linenum">1419</span></a>          <a class="var it37470" onMouseOver="hilite(37470)" onMouseOut="lolite()" onClick="logVariable('toload')" href="../_variables/toload.html">$toload</a> = (empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navshowallcourses')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navshowallcourses.html">navshowallcourses</a>))?self::LOAD_ROOT_CATEGORIES:self::LOAD_ALL_CATEGORIES;
<a name="l1420"><span class="linenum">1420</span></a>  
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment">        // If we are going to show all courses AND we are showing categories then</span>
<a name="l1422"><span class="linenum">1422</span></a>  <span class="comment">        // to save us repeated DB calls load all of the categories now</span>
<a name="l1423"><span class="linenum">1423</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_categories')" href="../_functions/show_categories.html" onMouseOver="funcPopup(event,'show_categories')">show_categories</a>()) {
<a name="l1424"><span class="linenum">1424</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_categories')" href="../_functions/load_all_categories.html" onMouseOver="funcPopup(event,'load_all_categories')">load_all_categories</a>(<a class="var it37470" onMouseOver="hilite(37470)" onMouseOut="lolite()" onClick="logVariable('toload')" href="../_variables/toload.html">$toload</a>);
<a name="l1425"><span class="linenum">1425</span></a>          }
<a name="l1426"><span class="linenum">1426</span></a>  
<a name="l1427"><span class="linenum">1427</span></a>  <span class="comment">        // Will be the return of our efforts</span>
<a name="l1428"><span class="linenum">1428</span></a>          <a class="var it37471" onMouseOver="hilite(37471)" onMouseOut="lolite()" onClick="logVariable('coursenodes')" href="../_variables/coursenodes.html">$coursenodes</a> = array();
<a name="l1429"><span class="linenum">1429</span></a>  
<a name="l1430"><span class="linenum">1430</span></a>  <span class="comment">        // Check if we need to show categories.</span>
<a name="l1431"><span class="linenum">1431</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_categories')" href="../_functions/show_categories.html" onMouseOver="funcPopup(event,'show_categories')">show_categories</a>()) {
<a name="l1432"><span class="linenum">1432</span></a>  <span class="comment">            // Hmmm we need to show categories... this is going to be painful.</span>
<a name="l1433"><span class="linenum">1433</span></a>  <span class="comment">            // We now need to fetch up to $limit courses for each category to</span>
<a name="l1434"><span class="linenum">1434</span></a>  <span class="comment">            // be displayed.</span>
<a name="l1435"><span class="linenum">1435</span></a>              if (<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a> !== null) {
<a name="l1436"><span class="linenum">1436</span></a>                  if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>)) {
<a name="l1437"><span class="linenum">1437</span></a>                      <a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a> = array(<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>);
<a name="l1438"><span class="linenum">1438</span></a>                  }
<a name="l1439"><span class="linenum">1439</span></a>                  <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it37472" onMouseOver="hilite(37472)" onMouseOut="lolite()" onClick="logVariable('categorywhere')" href="../_variables/categorywhere.html">$categorywhere</a>, <a class="var it37473" onMouseOver="hilite(37473)" onMouseOut="lolite()" onClick="logVariable('categoryparams')" href="../_variables/categoryparams.html">$categoryparams</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'cc');
<a name="l1440"><span class="linenum">1440</span></a>                  <a class="var it37472" onMouseOver="hilite(37472)" onMouseOut="lolite()" onClick="logVariable('categorywhere')" href="../_variables/categorywhere.html">$categorywhere</a> = 'WHERE cc.id '.<a class="var it37472" onMouseOver="hilite(37472)" onMouseOut="lolite()" onClick="logVariable('categorywhere')" href="../_variables/categorywhere.html">$categorywhere</a>;
<a name="l1441"><span class="linenum">1441</span></a>              } else if (<a class="var it37470" onMouseOver="hilite(37470)" onMouseOut="lolite()" onClick="logVariable('toload')" href="../_variables/toload.html">$toload</a> == self::LOAD_ROOT_CATEGORIES) {
<a name="l1442"><span class="linenum">1442</span></a>                  <a class="var it37472" onMouseOver="hilite(37472)" onMouseOut="lolite()" onClick="logVariable('categorywhere')" href="../_variables/categorywhere.html">$categorywhere</a> = 'WHERE cc.depth = 1 OR cc.depth = 2';
<a name="l1443"><span class="linenum">1443</span></a>                  <a class="var it37473" onMouseOver="hilite(37473)" onMouseOut="lolite()" onClick="logVariable('categoryparams')" href="../_variables/categoryparams.html">$categoryparams</a> = array();
<a name="l1444"><span class="linenum">1444</span></a>              } else {
<a name="l1445"><span class="linenum">1445</span></a>                  <a class="var it37472" onMouseOver="hilite(37472)" onMouseOut="lolite()" onClick="logVariable('categorywhere')" href="../_variables/categorywhere.html">$categorywhere</a> = '';
<a name="l1446"><span class="linenum">1446</span></a>                  <a class="var it37473" onMouseOver="hilite(37473)" onMouseOut="lolite()" onClick="logVariable('categoryparams')" href="../_variables/categoryparams.html">$categoryparams</a> = array();
<a name="l1447"><span class="linenum">1447</span></a>              }
<a name="l1448"><span class="linenum">1448</span></a>  
<a name="l1449"><span class="linenum">1449</span></a>  <span class="comment">            // First up we are going to get the categories that we are going to</span>
<a name="l1450"><span class="linenum">1450</span></a>  <span class="comment">            // need so that we can determine how best to load the courses from them.</span>
<a name="l1451"><span class="linenum">1451</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT cc.id, <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(c.id) AS coursecount
<a name="l1452"><span class="linenum">1452</span></a>                          FROM {course_categories} cc
<a name="l1453"><span class="linenum">1453</span></a>                      LEFT JOIN {course} c ON c.category = cc.id
<a name="l1454"><span class="linenum">1454</span></a>                              {<a class="var it37472" onMouseOver="hilite(37472)" onMouseOut="lolite()" onClick="logVariable('categorywhere')" href="../_variables/categorywhere.html">$categorywhere</a>}
<a name="l1455"><span class="linenum">1455</span></a>                      GROUP BY cc.id&quot;;
<a name="l1456"><span class="linenum">1456</span></a>              <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it37473" onMouseOver="hilite(37473)" onMouseOut="lolite()" onClick="logVariable('categoryparams')" href="../_variables/categoryparams.html">$categoryparams</a>);
<a name="l1457"><span class="linenum">1457</span></a>              <a class="var it37474" onMouseOver="hilite(37474)" onMouseOut="lolite()" onClick="logVariable('fullfetch')" href="../_variables/fullfetch.html">$fullfetch</a> = array();
<a name="l1458"><span class="linenum">1458</span></a>              <a class="var it37475" onMouseOver="hilite(37475)" onMouseOut="lolite()" onClick="logVariable('partfetch')" href="../_variables/partfetch.html">$partfetch</a> = array();
<a name="l1459"><span class="linenum">1459</span></a>              foreach (<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l1460"><span class="linenum">1460</span></a>                  if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_add_more_courses_to_category')" href="../_functions/can_add_more_courses_to_category.html" onMouseOver="funcPopup(event,'can_add_more_courses_to_category')">can_add_more_courses_to_category</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l1461"><span class="linenum">1461</span></a>                      continue;
<a name="l1462"><span class="linenum">1462</span></a>                  }
<a name="l1463"><span class="linenum">1463</span></a>                  if (<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('coursecount')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/coursecount.html">coursecount</a> &gt; <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> * 5) {
<a name="l1464"><span class="linenum">1464</span></a>                      <a class="var it37475" onMouseOver="hilite(37475)" onMouseOut="lolite()" onClick="logVariable('partfetch')" href="../_variables/partfetch.html">$partfetch</a>[] = <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1465"><span class="linenum">1465</span></a>                  } else if (<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('coursecount')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/coursecount.html">coursecount</a> &gt; 0) {
<a name="l1466"><span class="linenum">1466</span></a>                      <a class="var it37474" onMouseOver="hilite(37474)" onMouseOut="lolite()" onClick="logVariable('fullfetch')" href="../_variables/fullfetch.html">$fullfetch</a>[] = <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1467"><span class="linenum">1467</span></a>                  }
<a name="l1468"><span class="linenum">1468</span></a>              }
<a name="l1469"><span class="linenum">1469</span></a>              <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1470"><span class="linenum">1470</span></a>  
<a name="l1471"><span class="linenum">1471</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it37474" onMouseOver="hilite(37474)" onMouseOut="lolite()" onClick="logVariable('fullfetch')" href="../_variables/fullfetch.html">$fullfetch</a>)) {
<a name="l1472"><span class="linenum">1472</span></a>  <span class="comment">                // First up fetch all of the courses in categories where we know that we are going to</span>
<a name="l1473"><span class="linenum">1473</span></a>  <span class="comment">                // need the majority of courses.</span>
<a name="l1474"><span class="linenum">1474</span></a>                  <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>, <a class="var it37473" onMouseOver="hilite(37473)" onMouseOut="lolite()" onClick="logVariable('categoryparams')" href="../_variables/categoryparams.html">$categoryparams</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it37474" onMouseOver="hilite(37474)" onMouseOut="lolite()" onClick="logVariable('fullfetch')" href="../_variables/fullfetch.html">$fullfetch</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'lcategory');
<a name="l1475"><span class="linenum">1475</span></a>                  <a class="var it7824" onMouseOver="hilite(7824)" onMouseOut="lolite()" onClick="logVariable('ccselect')" href="../_variables/ccselect.html">$ccselect</a> = ', ' . <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l1476"><span class="linenum">1476</span></a>                  <a class="var it7825" onMouseOver="hilite(7825)" onMouseOut="lolite()" onClick="logVariable('ccjoin')" href="../_variables/ccjoin.html">$ccjoin</a> = &quot;LEFT JOIN {context} ctx <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (ctx.instanceid = c.id AND ctx.contextlevel = :contextlevel)&quot;;
<a name="l1477"><span class="linenum">1477</span></a>                  <a class="var it37473" onMouseOver="hilite(37473)" onMouseOut="lolite()" onClick="logVariable('categoryparams')" href="../_variables/categoryparams.html">$categoryparams</a>['contextlevel'] = <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>;
<a name="l1478"><span class="linenum">1478</span></a>                  <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT c.id, c.sortorder, c.visible, c.fullname, c.shortname, c.category <a class="var it7824" onMouseOver="hilite(7824)" onMouseOut="lolite()" onClick="logVariable('ccselect')" href="../_variables/ccselect.html">$ccselect</a>
<a name="l1479"><span class="linenum">1479</span></a>                              FROM {course} c
<a name="l1480"><span class="linenum">1480</span></a>                                  <a class="var it7825" onMouseOver="hilite(7825)" onMouseOut="lolite()" onClick="logVariable('ccjoin')" href="../_variables/ccjoin.html">$ccjoin</a>
<a name="l1481"><span class="linenum">1481</span></a>                              WHERE c.category {<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>}
<a name="l1482"><span class="linenum">1482</span></a>                          ORDER BY c.sortorder ASC&quot;;
<a name="l1483"><span class="linenum">1483</span></a>                  <a class="var it37476" onMouseOver="hilite(37476)" onMouseOut="lolite()" onClick="logVariable('coursesrs')" href="../_variables/coursesrs.html">$coursesrs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it37473" onMouseOver="hilite(37473)" onMouseOut="lolite()" onClick="logVariable('categoryparams')" href="../_variables/categoryparams.html">$categoryparams</a>);
<a name="l1484"><span class="linenum">1484</span></a>                  foreach (<a class="var it37476" onMouseOver="hilite(37476)" onMouseOut="lolite()" onClick="logVariable('coursesrs')" href="../_variables/coursesrs.html">$coursesrs</a> as <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1485"><span class="linenum">1485</span></a>                      if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1486"><span class="linenum">1486</span></a>  <span class="comment">                        // This should not be necessary, frontpage is not in any category.</span>
<a name="l1487"><span class="linenum">1487</span></a>                          continue;
<a name="l1488"><span class="linenum">1488</span></a>                      }
<a name="l1489"><span class="linenum">1489</span></a>                      if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcourses')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcourses.html">addedcourses</a>)) {
<a name="l1490"><span class="linenum">1490</span></a>  <span class="comment">                        // It is probably better to not include the already loaded courses</span>
<a name="l1491"><span class="linenum">1491</span></a>  <span class="comment">                        // directly in SQL because inequalities may confuse query optimisers</span>
<a name="l1492"><span class="linenum">1492</span></a>  <span class="comment">                        // and may interfere with query caching.</span>
<a name="l1493"><span class="linenum">1493</span></a>                          continue;
<a name="l1494"><span class="linenum">1494</span></a>                      }
<a name="l1495"><span class="linenum">1495</span></a>                      if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_add_more_courses_to_category')" href="../_functions/can_add_more_courses_to_category.html" onMouseOver="funcPopup(event,'can_add_more_courses_to_category')">can_add_more_courses_to_category</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/category.html">category</a>)) {
<a name="l1496"><span class="linenum">1496</span></a>                          continue;
<a name="l1497"><span class="linenum">1497</span></a>                      }
<a name="l1498"><span class="linenum">1498</span></a>                      <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1499"><span class="linenum">1499</span></a>                      if (!<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('visible')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> &amp;&amp; !<a class="function" onClick="logFunction('is_role_switched')" href="../_functions/is_role_switched.html" onMouseOver="funcPopup(event,'is_role_switched')">is_role_switched</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewhiddencourses', <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l1500"><span class="linenum">1500</span></a>                          continue;
<a name="l1501"><span class="linenum">1501</span></a>                      }
<a name="l1502"><span class="linenum">1502</span></a>                      <a class="var it37471" onMouseOver="hilite(37471)" onMouseOut="lolite()" onClick="logVariable('coursenodes')" href="../_variables/coursenodes.html">$coursenodes</a>[<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1503"><span class="linenum">1503</span></a>                  }
<a name="l1504"><span class="linenum">1504</span></a>                  <a class="var it37476" onMouseOver="hilite(37476)" onMouseOut="lolite()" onClick="logVariable('coursesrs')" href="../_variables/coursesrs.html">$coursesrs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1505"><span class="linenum">1505</span></a>              }
<a name="l1506"><span class="linenum">1506</span></a>  
<a name="l1507"><span class="linenum">1507</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it37475" onMouseOver="hilite(37475)" onMouseOut="lolite()" onClick="logVariable('partfetch')" href="../_variables/partfetch.html">$partfetch</a>)) {
<a name="l1508"><span class="linenum">1508</span></a>  <span class="comment">                // Next we will work our way through the categories where we will likely only need a small</span>
<a name="l1509"><span class="linenum">1509</span></a>  <span class="comment">                // proportion of the courses.</span>
<a name="l1510"><span class="linenum">1510</span></a>                  foreach (<a class="var it37475" onMouseOver="hilite(37475)" onMouseOut="lolite()" onClick="logVariable('partfetch')" href="../_variables/partfetch.html">$partfetch</a> as <a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>) {
<a name="l1511"><span class="linenum">1511</span></a>                      <a class="var it7824" onMouseOver="hilite(7824)" onMouseOut="lolite()" onClick="logVariable('ccselect')" href="../_variables/ccselect.html">$ccselect</a> = ', ' . <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l1512"><span class="linenum">1512</span></a>                      <a class="var it7825" onMouseOver="hilite(7825)" onMouseOut="lolite()" onClick="logVariable('ccjoin')" href="../_variables/ccjoin.html">$ccjoin</a> = &quot;LEFT JOIN {context} ctx <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (ctx.instanceid = c.id AND ctx.contextlevel = :contextlevel)&quot;;
<a name="l1513"><span class="linenum">1513</span></a>                      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT c.id, c.sortorder, c.visible, c.fullname, c.shortname, c.category <a class="var it7824" onMouseOver="hilite(7824)" onMouseOut="lolite()" onClick="logVariable('ccselect')" href="../_variables/ccselect.html">$ccselect</a>
<a name="l1514"><span class="linenum">1514</span></a>                                  FROM {course} c
<a name="l1515"><span class="linenum">1515</span></a>                                      <a class="var it7825" onMouseOver="hilite(7825)" onMouseOut="lolite()" onClick="logVariable('ccjoin')" href="../_variables/ccjoin.html">$ccjoin</a>
<a name="l1516"><span class="linenum">1516</span></a>                                  WHERE c.category = :categoryid
<a name="l1517"><span class="linenum">1517</span></a>                              ORDER BY c.sortorder ASC&quot;;
<a name="l1518"><span class="linenum">1518</span></a>                      <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('courseparams')" href="../_variables/courseparams.html">$courseparams</a> = array('categoryid' =&gt; <a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>, 'contextlevel' =&gt; <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>);
<a name="l1519"><span class="linenum">1519</span></a>                      <a class="var it37476" onMouseOver="hilite(37476)" onMouseOut="lolite()" onClick="logVariable('coursesrs')" href="../_variables/coursesrs.html">$coursesrs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('courseparams')" href="../_variables/courseparams.html">$courseparams</a>, 0, <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> * 5);
<a name="l1520"><span class="linenum">1520</span></a>                      foreach (<a class="var it37476" onMouseOver="hilite(37476)" onMouseOut="lolite()" onClick="logVariable('coursesrs')" href="../_variables/coursesrs.html">$coursesrs</a> as <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1521"><span class="linenum">1521</span></a>                          if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment">                            // This should not be necessary, frontpage is not in any category.</span>
<a name="l1523"><span class="linenum">1523</span></a>                              continue;
<a name="l1524"><span class="linenum">1524</span></a>                          }
<a name="l1525"><span class="linenum">1525</span></a>                          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcourses')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcourses.html">addedcourses</a>)) {
<a name="l1526"><span class="linenum">1526</span></a>  <span class="comment">                            // It is probably better to not include the already loaded courses</span>
<a name="l1527"><span class="linenum">1527</span></a>  <span class="comment">                            // directly in SQL because inequalities may confuse query optimisers</span>
<a name="l1528"><span class="linenum">1528</span></a>  <span class="comment">                            // and may interfere with query caching.</span>
<a name="l1529"><span class="linenum">1529</span></a>  <span class="comment">                            // This also helps to respect expected $limit on repeated executions.</span>
<a name="l1530"><span class="linenum">1530</span></a>                              continue;
<a name="l1531"><span class="linenum">1531</span></a>                          }
<a name="l1532"><span class="linenum">1532</span></a>                          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_add_more_courses_to_category')" href="../_functions/can_add_more_courses_to_category.html" onMouseOver="funcPopup(event,'can_add_more_courses_to_category')">can_add_more_courses_to_category</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/category.html">category</a>)) {
<a name="l1533"><span class="linenum">1533</span></a>                              break;
<a name="l1534"><span class="linenum">1534</span></a>                          }
<a name="l1535"><span class="linenum">1535</span></a>                          <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1536"><span class="linenum">1536</span></a>                          if (!<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('visible')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> &amp;&amp; !<a class="function" onClick="logFunction('is_role_switched')" href="../_functions/is_role_switched.html" onMouseOver="funcPopup(event,'is_role_switched')">is_role_switched</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewhiddencourses', <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l1537"><span class="linenum">1537</span></a>                              continue;
<a name="l1538"><span class="linenum">1538</span></a>                          }
<a name="l1539"><span class="linenum">1539</span></a>                          <a class="var it37471" onMouseOver="hilite(37471)" onMouseOut="lolite()" onClick="logVariable('coursenodes')" href="../_variables/coursenodes.html">$coursenodes</a>[<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1540"><span class="linenum">1540</span></a>                      }
<a name="l1541"><span class="linenum">1541</span></a>                      <a class="var it37476" onMouseOver="hilite(37476)" onMouseOut="lolite()" onClick="logVariable('coursesrs')" href="../_variables/coursesrs.html">$coursesrs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1542"><span class="linenum">1542</span></a>                  }
<a name="l1543"><span class="linenum">1543</span></a>              }
<a name="l1544"><span class="linenum">1544</span></a>          } else {
<a name="l1545"><span class="linenum">1545</span></a>  <span class="comment">            // Prepare the SQL to load the courses and their contexts</span>
<a name="l1546"><span class="linenum">1546</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a>, <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('courseparams')" href="../_variables/courseparams.html">$courseparams</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcourses')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcourses.html">addedcourses</a>), <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'lc', false);
<a name="l1547"><span class="linenum">1547</span></a>              <a class="var it7824" onMouseOver="hilite(7824)" onMouseOut="lolite()" onClick="logVariable('ccselect')" href="../_variables/ccselect.html">$ccselect</a> = ', ' . <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l1548"><span class="linenum">1548</span></a>              <a class="var it7825" onMouseOver="hilite(7825)" onMouseOut="lolite()" onClick="logVariable('ccjoin')" href="../_variables/ccjoin.html">$ccjoin</a> = &quot;LEFT JOIN {context} ctx <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (ctx.instanceid = c.id AND ctx.contextlevel = :contextlevel)&quot;;
<a name="l1549"><span class="linenum">1549</span></a>              <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('courseparams')" href="../_variables/courseparams.html">$courseparams</a>['contextlevel'] = <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>;
<a name="l1550"><span class="linenum">1550</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT c.id, c.sortorder, c.visible, c.fullname, c.shortname, c.category <a class="var it7824" onMouseOver="hilite(7824)" onMouseOut="lolite()" onClick="logVariable('ccselect')" href="../_variables/ccselect.html">$ccselect</a>
<a name="l1551"><span class="linenum">1551</span></a>                          FROM {course} c
<a name="l1552"><span class="linenum">1552</span></a>                              <a class="var it7825" onMouseOver="hilite(7825)" onMouseOut="lolite()" onClick="logVariable('ccjoin')" href="../_variables/ccjoin.html">$ccjoin</a>
<a name="l1553"><span class="linenum">1553</span></a>                          WHERE c.id {<a class="var it2977" onMouseOver="hilite(2977)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a>}
<a name="l1554"><span class="linenum">1554</span></a>                      ORDER BY c.sortorder ASC&quot;;
<a name="l1555"><span class="linenum">1555</span></a>              <a class="var it37476" onMouseOver="hilite(37476)" onMouseOut="lolite()" onClick="logVariable('coursesrs')" href="../_variables/coursesrs.html">$coursesrs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it14700" onMouseOver="hilite(14700)" onMouseOut="lolite()" onClick="logVariable('courseparams')" href="../_variables/courseparams.html">$courseparams</a>);
<a name="l1556"><span class="linenum">1556</span></a>              foreach (<a class="var it37476" onMouseOver="hilite(37476)" onMouseOut="lolite()" onClick="logVariable('coursesrs')" href="../_variables/coursesrs.html">$coursesrs</a> as <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1557"><span class="linenum">1557</span></a>                  if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1558"><span class="linenum">1558</span></a>  <span class="comment">                    // frotpage is not wanted here</span>
<a name="l1559"><span class="linenum">1559</span></a>                      continue;
<a name="l1560"><span class="linenum">1560</span></a>                  }
<a name="l1561"><span class="linenum">1561</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course &amp;&amp; (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course-&gt;id == <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l1562"><span class="linenum">1562</span></a>  <span class="comment">                    // Don't include the currentcourse in this nodelist - it's displayed in the Current course node</span>
<a name="l1563"><span class="linenum">1563</span></a>                      continue;
<a name="l1564"><span class="linenum">1564</span></a>                  }
<a name="l1565"><span class="linenum">1565</span></a>                  <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1566"><span class="linenum">1566</span></a>                  if (!<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('visible')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> &amp;&amp; !<a class="function" onClick="logFunction('is_role_switched')" href="../_functions/is_role_switched.html" onMouseOver="funcPopup(event,'is_role_switched')">is_role_switched</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewhiddencourses', <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l1567"><span class="linenum">1567</span></a>                      continue;
<a name="l1568"><span class="linenum">1568</span></a>                  }
<a name="l1569"><span class="linenum">1569</span></a>                  <a class="var it37471" onMouseOver="hilite(37471)" onMouseOut="lolite()" onClick="logVariable('coursenodes')" href="../_variables/coursenodes.html">$coursenodes</a>[<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1570"><span class="linenum">1570</span></a>                  if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it37471" onMouseOver="hilite(37471)" onMouseOut="lolite()" onClick="logVariable('coursenodes')" href="../_variables/coursenodes.html">$coursenodes</a>) &gt;= <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>) {
<a name="l1571"><span class="linenum">1571</span></a>                      break;
<a name="l1572"><span class="linenum">1572</span></a>                  }
<a name="l1573"><span class="linenum">1573</span></a>              }
<a name="l1574"><span class="linenum">1574</span></a>              <a class="var it37476" onMouseOver="hilite(37476)" onMouseOut="lolite()" onClick="logVariable('coursesrs')" href="../_variables/coursesrs.html">$coursesrs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1575"><span class="linenum">1575</span></a>          }
<a name="l1576"><span class="linenum">1576</span></a>  
<a name="l1577"><span class="linenum">1577</span></a>          return <a class="var it37471" onMouseOver="hilite(37471)" onMouseOut="lolite()" onClick="logVariable('coursenodes')" href="../_variables/coursenodes.html">$coursenodes</a>;
<a name="l1578"><span class="linenum">1578</span></a>      }
<a name="l1579"><span class="linenum">1579</span></a>  
<a name="l1580"><span class="linenum">1580</span></a>      <span class="comment">/**</span>
<a name="l1581"><span class="linenum">1581</span></a>  <span class="comment">     * Returns true if more courses can be added to the provided category.</span>
<a name="l1582"><span class="linenum">1582</span></a>  <span class="comment">     *</span>
<a name="l1583"><span class="linenum">1583</span></a>  <span class="comment">     * @param int|navigation_node|stdClass $category</span>
<a name="l1584"><span class="linenum">1584</span></a>  <span class="comment">     * @return bool</span>
<a name="l1585"><span class="linenum">1585</span></a>  <span class="comment">     */</span>
<a name="l1586"><span class="linenum">1586</span></a>      protected function <a class="function" onClick="logFunction('can_add_more_courses_to_category')" href="../_functions/can_add_more_courses_to_category.html" onMouseOver="funcPopup(event,'can_add_more_courses_to_category')">can_add_more_courses_to_category</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l1587"><span class="linenum">1587</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1588"><span class="linenum">1588</span></a>          <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> = 20;
<a name="l1589"><span class="linenum">1589</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navcourselimit')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navcourselimit.html">navcourselimit</a>)) {
<a name="l1590"><span class="linenum">1590</span></a>              <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> = (int)<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navcourselimit')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navcourselimit.html">navcourselimit</a>;
<a name="l1591"><span class="linenum">1591</span></a>          }
<a name="l1592"><span class="linenum">1592</span></a>          if (<a class="phpfunction" onClick="logFunction('is_numeric')" href="../_functions/is_numeric.html" onMouseOver="phpfuncPopup(event,'is_numeric')">is_numeric</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>)) {
<a name="l1593"><span class="linenum">1593</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>)) {
<a name="l1594"><span class="linenum">1594</span></a>                  return true;
<a name="l1595"><span class="linenum">1595</span></a>              }
<a name="l1596"><span class="linenum">1596</span></a>              <a class="var it3888" onMouseOver="hilite(3888)" onMouseOut="lolite()" onClick="logVariable('coursecount')" href="../_variables/coursecount.html">$coursecount</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>[<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>]-&gt;children-&gt;<a class="function" onClick="logFunction('type')" href="../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a>(self::TYPE_COURSE));
<a name="l1597"><span class="linenum">1597</span></a>          } else if (<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> instanceof navigation_node) {
<a name="l1598"><span class="linenum">1598</span></a>              if ((<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('type')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/type.html">type</a> != self::TYPE_CATEGORY) || (<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('type')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/type.html">type</a> != self::TYPE_MY_CATEGORY)) {
<a name="l1599"><span class="linenum">1599</span></a>                  return false;
<a name="l1600"><span class="linenum">1600</span></a>              }
<a name="l1601"><span class="linenum">1601</span></a>              <a class="var it3888" onMouseOver="hilite(3888)" onMouseOut="lolite()" onClick="logVariable('coursecount')" href="../_variables/coursecount.html">$coursecount</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('children')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="function" onClick="logFunction('type')" href="../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a>(self::TYPE_COURSE));
<a name="l1602"><span class="linenum">1602</span></a>          } else if (<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) &amp;&amp; property_exists(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>,'id')) {
<a name="l1603"><span class="linenum">1603</span></a>              <a class="var it3888" onMouseOver="hilite(3888)" onMouseOut="lolite()" onClick="logVariable('coursecount')" href="../_variables/coursecount.html">$coursecount</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>[<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>]-&gt;children-&gt;<a class="function" onClick="logFunction('type')" href="../_functions/type.html" onMouseOver="funcPopup(event,'type')">type</a>(self::TYPE_COURSE));
<a name="l1604"><span class="linenum">1604</span></a>          }
<a name="l1605"><span class="linenum">1605</span></a>          return (<a class="var it3888" onMouseOver="hilite(3888)" onMouseOut="lolite()" onClick="logVariable('coursecount')" href="../_variables/coursecount.html">$coursecount</a> &lt;= <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>);
<a name="l1606"><span class="linenum">1606</span></a>      }
<a name="l1607"><span class="linenum">1607</span></a>  
<a name="l1608"><span class="linenum">1608</span></a>      <span class="comment">/**</span>
<a name="l1609"><span class="linenum">1609</span></a>  <span class="comment">     * Loads all categories (top level or if an id is specified for that category)</span>
<a name="l1610"><span class="linenum">1610</span></a>  <span class="comment">     *</span>
<a name="l1611"><span class="linenum">1611</span></a>  <span class="comment">     * @param int $categoryid The category id to load or null/0 to load all base level categories</span>
<a name="l1612"><span class="linenum">1612</span></a>  <span class="comment">     * @param bool $showbasecategories If set to true all base level categories will be loaded as well</span>
<a name="l1613"><span class="linenum">1613</span></a>  <span class="comment">     *        as the requested category and any parent categories.</span>
<a name="l1614"><span class="linenum">1614</span></a>  <span class="comment">     * @return navigation_node|void returns a navigation node if a category has been loaded.</span>
<a name="l1615"><span class="linenum">1615</span></a>  <span class="comment">     */</span>
<a name="l1616"><span class="linenum">1616</span></a>      protected function <a class="function" onClick="logFunction('load_all_categories')" href="../_functions/load_all_categories.html" onMouseOver="funcPopup(event,'load_all_categories')">load_all_categories</a>(<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a> = self::LOAD_ROOT_CATEGORIES, <a class="var it37477" onMouseOver="hilite(37477)" onMouseOut="lolite()" onClick="logVariable('showbasecategories')" href="../_variables/showbasecategories.html">$showbasecategories</a> = false) {
<a name="l1617"><span class="linenum">1617</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l1618"><span class="linenum">1618</span></a>  
<a name="l1619"><span class="linenum">1619</span></a>  <span class="comment">        // Check if this category has already been loaded</span>
<a name="l1620"><span class="linenum">1620</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allcategoriesloaded')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/allcategoriesloaded.html">allcategoriesloaded</a> || (<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a> &lt; 1 &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_category_fully_loaded')" href="../_functions/is_category_fully_loaded.html" onMouseOver="funcPopup(event,'is_category_fully_loaded')">is_category_fully_loaded</a>(<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>))) {
<a name="l1621"><span class="linenum">1621</span></a>              return true;
<a name="l1622"><span class="linenum">1622</span></a>          }
<a name="l1623"><span class="linenum">1623</span></a>  
<a name="l1624"><span class="linenum">1624</span></a>          <a class="var it37478" onMouseOver="hilite(37478)" onMouseOut="lolite()" onClick="logVariable('catcontextsql')" href="../_variables/catcontextsql.html">$catcontextsql</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l1625"><span class="linenum">1625</span></a>          <a class="var it6369" onMouseOver="hilite(6369)" onMouseOut="lolite()" onClick="logVariable('sqlselect')" href="../_variables/sqlselect.html">$sqlselect</a> = &quot;SELECT cc.*, <a class="var it37478" onMouseOver="hilite(37478)" onMouseOut="lolite()" onClick="logVariable('catcontextsql')" href="../_variables/catcontextsql.html">$catcontextsql</a>
<a name="l1626"><span class="linenum">1626</span></a>                        FROM {course_categories} cc
<a name="l1627"><span class="linenum">1627</span></a>                        JOIN {context} ctx ON cc.id = ctx.instanceid&quot;;
<a name="l1628"><span class="linenum">1628</span></a>          <a class="var it6271" onMouseOver="hilite(6271)" onMouseOut="lolite()" onClick="logVariable('sqlwhere')" href="../_variables/sqlwhere.html">$sqlwhere</a> = &quot;WHERE ctx.contextlevel = &quot;.<a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>;
<a name="l1629"><span class="linenum">1629</span></a>          <a class="var it37479" onMouseOver="hilite(37479)" onMouseOut="lolite()" onClick="logVariable('sqlorder')" href="../_variables/sqlorder.html">$sqlorder</a> = &quot;ORDER BY cc.depth ASC, cc.sortorder ASC, cc.id ASC&quot;;
<a name="l1630"><span class="linenum">1630</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l1631"><span class="linenum">1631</span></a>  
<a name="l1632"><span class="linenum">1632</span></a>          <a class="var it37480" onMouseOver="hilite(37480)" onMouseOut="lolite()" onClick="logVariable('categoriestoload')" href="../_variables/categoriestoload.html">$categoriestoload</a> = array();
<a name="l1633"><span class="linenum">1633</span></a>          if (<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a> == self::LOAD_ALL_CATEGORIES) {
<a name="l1634"><span class="linenum">1634</span></a>  <span class="comment">            // We are going to load all categories regardless... prepare to fire</span>
<a name="l1635"><span class="linenum">1635</span></a>  <span class="comment">            // on the database server!</span>
<a name="l1636"><span class="linenum">1636</span></a>          } else if (<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a> == self::LOAD_ROOT_CATEGORIES) { // can be 0
<a name="l1637"><span class="linenum">1637</span></a>  <span class="comment">            // We are going to load all of the first level categories (categories without parents)</span>
<a name="l1638"><span class="linenum">1638</span></a>              <a class="var it6271" onMouseOver="hilite(6271)" onMouseOut="lolite()" onClick="logVariable('sqlwhere')" href="../_variables/sqlwhere.html">$sqlwhere</a> .= &quot; AND cc.parent = 0&quot;;
<a name="l1639"><span class="linenum">1639</span></a>          } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>)) {
<a name="l1640"><span class="linenum">1640</span></a>  <span class="comment">            // The category itself has been loaded already so we just need to ensure its subcategories</span>
<a name="l1641"><span class="linenum">1641</span></a>  <span class="comment">            // have been loaded</span>
<a name="l1642"><span class="linenum">1642</span></a>              <a class="var it37461" onMouseOver="hilite(37461)" onMouseOut="lolite()" onClick="logVariable('addedcategories')" href="../_variables/addedcategories.html">$addedcategories</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>;
<a name="l1643"><span class="linenum">1643</span></a>              unset(<a class="var it37461" onMouseOver="hilite(37461)" onMouseOut="lolite()" onClick="logVariable('addedcategories')" href="../_variables/addedcategories.html">$addedcategories</a>[<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>]);
<a name="l1644"><span class="linenum">1644</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it37461" onMouseOver="hilite(37461)" onMouseOut="lolite()" onClick="logVariable('addedcategories')" href="../_variables/addedcategories.html">$addedcategories</a>) &gt; 0) {
<a name="l1645"><span class="linenum">1645</span></a>                  <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it37461" onMouseOver="hilite(37461)" onMouseOut="lolite()" onClick="logVariable('addedcategories')" href="../_variables/addedcategories.html">$addedcategories</a>), <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'parent', false);
<a name="l1646"><span class="linenum">1646</span></a>                  if (<a class="var it37477" onMouseOver="hilite(37477)" onMouseOut="lolite()" onClick="logVariable('showbasecategories')" href="../_variables/showbasecategories.html">$showbasecategories</a>) {
<a name="l1647"><span class="linenum">1647</span></a>  <span class="comment">                    // We need to include categories with parent = 0 as well</span>
<a name="l1648"><span class="linenum">1648</span></a>                      <a class="var it6271" onMouseOver="hilite(6271)" onMouseOut="lolite()" onClick="logVariable('sqlwhere')" href="../_variables/sqlwhere.html">$sqlwhere</a> .= &quot; AND (cc.parent = :categoryid OR cc.parent = 0) AND cc.parent {<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>}&quot;;
<a name="l1649"><span class="linenum">1649</span></a>                  } else {
<a name="l1650"><span class="linenum">1650</span></a>  <span class="comment">                    // All we need is categories that match the parent</span>
<a name="l1651"><span class="linenum">1651</span></a>                      <a class="var it6271" onMouseOver="hilite(6271)" onMouseOut="lolite()" onClick="logVariable('sqlwhere')" href="../_variables/sqlwhere.html">$sqlwhere</a> .= &quot; AND cc.parent = :categoryid AND cc.parent {<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>}&quot;;
<a name="l1652"><span class="linenum">1652</span></a>                  }
<a name="l1653"><span class="linenum">1653</span></a>              }
<a name="l1654"><span class="linenum">1654</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['categoryid'] = <a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>;
<a name="l1655"><span class="linenum">1655</span></a>          } else {
<a name="l1656"><span class="linenum">1656</span></a>  <span class="comment">            // This category hasn't been loaded yet so we need to fetch it, work out its category path</span>
<a name="l1657"><span class="linenum">1657</span></a>  <span class="comment">            // and load this category plus all its parents and subcategories</span>
<a name="l1658"><span class="linenum">1658</span></a>              <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_categories', array('id' =&gt; <a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>), 'path', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l1659"><span class="linenum">1659</span></a>              <a class="var it37480" onMouseOver="hilite(37480)" onMouseOut="lolite()" onClick="logVariable('categoriestoload')" href="../_variables/categoriestoload.html">$categoriestoload</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('/', <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('path')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/path.html">path</a>, '/'));
<a name="l1660"><span class="linenum">1660</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it37480" onMouseOver="hilite(37480)" onMouseOut="lolite()" onClick="logVariable('categoriestoload')" href="../_variables/categoriestoload.html">$categoriestoload</a>);
<a name="l1661"><span class="linenum">1661</span></a>  <span class="comment">            // We are going to use select twice so double the params</span>
<a name="l1662"><span class="linenum">1662</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1663"><span class="linenum">1663</span></a>              <a class="var it37481" onMouseOver="hilite(37481)" onMouseOut="lolite()" onClick="logVariable('basecategorysql')" href="../_variables/basecategorysql.html">$basecategorysql</a> = (<a class="var it37477" onMouseOver="hilite(37477)" onMouseOut="lolite()" onClick="logVariable('showbasecategories')" href="../_variables/showbasecategories.html">$showbasecategories</a>)?' OR cc.depth = 1':'';
<a name="l1664"><span class="linenum">1664</span></a>              <a class="var it6271" onMouseOver="hilite(6271)" onMouseOut="lolite()" onClick="logVariable('sqlwhere')" href="../_variables/sqlwhere.html">$sqlwhere</a> .= &quot; AND (cc.id {<a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>} OR cc.parent {<a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>}{<a class="var it37481" onMouseOver="hilite(37481)" onMouseOut="lolite()" onClick="logVariable('basecategorysql')" href="../_variables/basecategorysql.html">$basecategorysql</a>})&quot;;
<a name="l1665"><span class="linenum">1665</span></a>          }
<a name="l1666"><span class="linenum">1666</span></a>  
<a name="l1667"><span class="linenum">1667</span></a>          <a class="var it37482" onMouseOver="hilite(37482)" onMouseOut="lolite()" onClick="logVariable('categoriesrs')" href="../_variables/categoriesrs.html">$categoriesrs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(&quot;<a class="var it6369" onMouseOver="hilite(6369)" onMouseOut="lolite()" onClick="logVariable('sqlselect')" href="../_variables/sqlselect.html">$sqlselect</a> <a class="var it6271" onMouseOver="hilite(6271)" onMouseOut="lolite()" onClick="logVariable('sqlwhere')" href="../_variables/sqlwhere.html">$sqlwhere</a> <a class="var it37479" onMouseOver="hilite(37479)" onMouseOut="lolite()" onClick="logVariable('sqlorder')" href="../_variables/sqlorder.html">$sqlorder</a>&quot;, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1668"><span class="linenum">1668</span></a>          <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = array();
<a name="l1669"><span class="linenum">1669</span></a>          foreach (<a class="var it37482" onMouseOver="hilite(37482)" onMouseOut="lolite()" onClick="logVariable('categoriesrs')" href="../_variables/categoriesrs.html">$categoriesrs</a> as <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l1670"><span class="linenum">1670</span></a>  <span class="comment">            // Preload the context.. we'll need it when adding the category in order</span>
<a name="l1671"><span class="linenum">1671</span></a>  <span class="comment">            // to format the category name.</span>
<a name="l1672"><span class="linenum">1672</span></a>              <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>);
<a name="l1673"><span class="linenum">1673</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>)) {
<a name="l1674"><span class="linenum">1674</span></a>  <span class="comment">                // Do nothing, its already been added.</span>
<a name="l1675"><span class="linenum">1675</span></a>              } else if (<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> == '0') {
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment">                // This is a root category lets add it immediately</span>
<a name="l1677"><span class="linenum">1677</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_category')" href="../_functions/add_category.html" onMouseOver="funcPopup(event,'add_category')">add_category</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['courses']);
<a name="l1678"><span class="linenum">1678</span></a>              } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>)) {
<a name="l1679"><span class="linenum">1679</span></a>  <span class="comment">                // This categories parent has already been added we can add this immediately</span>
<a name="l1680"><span class="linenum">1680</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_category')" href="../_functions/add_category.html" onMouseOver="funcPopup(event,'add_category')">add_category</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>[<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>]);
<a name="l1681"><span class="linenum">1681</span></a>              } else {
<a name="l1682"><span class="linenum">1682</span></a>                  <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[] = <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>;
<a name="l1683"><span class="linenum">1683</span></a>              }
<a name="l1684"><span class="linenum">1684</span></a>          }
<a name="l1685"><span class="linenum">1685</span></a>          <a class="var it37482" onMouseOver="hilite(37482)" onMouseOut="lolite()" onClick="logVariable('categoriesrs')" href="../_variables/categoriesrs.html">$categoriesrs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l1686"><span class="linenum">1686</span></a>  
<a name="l1687"><span class="linenum">1687</span></a>  <span class="comment">        // Now we have an array of categories we need to add them to the navigation.</span>
<a name="l1688"><span class="linenum">1688</span></a>          while (!empty(<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>)) {
<a name="l1689"><span class="linenum">1689</span></a>              <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>);
<a name="l1690"><span class="linenum">1690</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>)) {
<a name="l1691"><span class="linenum">1691</span></a>  <span class="comment">                // Do nothing</span>
<a name="l1692"><span class="linenum">1692</span></a>              } else if (<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> == '0') {
<a name="l1693"><span class="linenum">1693</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_category')" href="../_functions/add_category.html" onMouseOver="funcPopup(event,'add_category')">add_category</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['courses']);
<a name="l1694"><span class="linenum">1694</span></a>              } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>)) {
<a name="l1695"><span class="linenum">1695</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_category')" href="../_functions/add_category.html" onMouseOver="funcPopup(event,'add_category')">add_category</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>[<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>]);
<a name="l1696"><span class="linenum">1696</span></a>              } else {
<a name="l1697"><span class="linenum">1697</span></a>  <span class="comment">                // This category isn't in the navigation and niether is it's parent (yet).</span>
<a name="l1698"><span class="linenum">1698</span></a>  <span class="comment">                // We need to go through the category path and add all of its components in order.</span>
<a name="l1699"><span class="linenum">1699</span></a>                  <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('/', <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('path')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/path.html">path</a>, '/'));
<a name="l1700"><span class="linenum">1700</span></a>                  foreach (<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> as <a class="var it5174" onMouseOver="hilite(5174)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a>) {
<a name="l1701"><span class="linenum">1701</span></a>                      if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it5174" onMouseOver="hilite(5174)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>)) {
<a name="l1702"><span class="linenum">1702</span></a>  <span class="comment">                        // This category isn't in the navigation yet so add it.</span>
<a name="l1703"><span class="linenum">1703</span></a>                          <a class="var it4941" onMouseOver="hilite(4941)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a> = <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it5174" onMouseOver="hilite(5174)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a>];
<a name="l1704"><span class="linenum">1704</span></a>                          if (<a class="var it4941" onMouseOver="hilite(4941)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a>-&gt;<a onClick="logVariable('parent')" class="var it41085" onMouseOver="hilite(41085)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> == '0') {
<a name="l1705"><span class="linenum">1705</span></a>  <span class="comment">                            // Yay we have a root category - this likely means we will now be able</span>
<a name="l1706"><span class="linenum">1706</span></a>  <span class="comment">                            // to add categories without problems.</span>
<a name="l1707"><span class="linenum">1707</span></a>                              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_category')" href="../_functions/add_category.html" onMouseOver="funcPopup(event,'add_category')">add_category</a>(<a class="var it4941" onMouseOver="hilite(4941)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['courses']);
<a name="l1708"><span class="linenum">1708</span></a>                          } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it4941" onMouseOver="hilite(4941)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a>-&gt;<a onClick="logVariable('parent')" class="var it41085" onMouseOver="hilite(41085)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>)) {
<a name="l1709"><span class="linenum">1709</span></a>  <span class="comment">                            // The parent is in the category (as we'd expect) so add it now.</span>
<a name="l1710"><span class="linenum">1710</span></a>                              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_category')" href="../_functions/add_category.html" onMouseOver="funcPopup(event,'add_category')">add_category</a>(<a class="var it4941" onMouseOver="hilite(4941)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>[<a class="var it4941" onMouseOver="hilite(4941)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a>-&gt;<a onClick="logVariable('parent')" class="var it41085" onMouseOver="hilite(41085)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>]);
<a name="l1711"><span class="linenum">1711</span></a>  <span class="comment">                            // Remove the category from the categories array.</span>
<a name="l1712"><span class="linenum">1712</span></a>                              unset(<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it5174" onMouseOver="hilite(5174)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../_variables/catid.html">$catid</a>]);
<a name="l1713"><span class="linenum">1713</span></a>                          } else {
<a name="l1714"><span class="linenum">1714</span></a>  <span class="comment">                            // We should never ever arrive here - if we have then there is a bigger</span>
<a name="l1715"><span class="linenum">1715</span></a>  <span class="comment">                            // problem at hand.</span>
<a name="l1716"><span class="linenum">1716</span></a>                              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Category path order is incorrect and/or there are missing categories');
<a name="l1717"><span class="linenum">1717</span></a>                          }
<a name="l1718"><span class="linenum">1718</span></a>                      }
<a name="l1719"><span class="linenum">1719</span></a>                  }
<a name="l1720"><span class="linenum">1720</span></a>              }
<a name="l1721"><span class="linenum">1721</span></a>  <span class="comment">            // Remove the category from the categories array now that we know it has been added.</span>
<a name="l1722"><span class="linenum">1722</span></a>              unset(<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>]);
<a name="l1723"><span class="linenum">1723</span></a>          }
<a name="l1724"><span class="linenum">1724</span></a>          if (<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a> === self::LOAD_ALL_CATEGORIES) {
<a name="l1725"><span class="linenum">1725</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allcategoriesloaded')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/allcategoriesloaded.html">allcategoriesloaded</a> = true;
<a name="l1726"><span class="linenum">1726</span></a>          }
<a name="l1727"><span class="linenum">1727</span></a>  <span class="comment">        // Check if there are any categories to load.</span>
<a name="l1728"><span class="linenum">1728</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it37480" onMouseOver="hilite(37480)" onMouseOut="lolite()" onClick="logVariable('categoriestoload')" href="../_variables/categoriestoload.html">$categoriestoload</a>) &gt; 0) {
<a name="l1729"><span class="linenum">1729</span></a>              <a class="var it37483" onMouseOver="hilite(37483)" onMouseOut="lolite()" onClick="logVariable('readytoloadcourses')" href="../_variables/readytoloadcourses.html">$readytoloadcourses</a> = array();
<a name="l1730"><span class="linenum">1730</span></a>              foreach (<a class="var it37480" onMouseOver="hilite(37480)" onMouseOut="lolite()" onClick="logVariable('categoriestoload')" href="../_variables/categoriestoload.html">$categoriestoload</a> as <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l1731"><span class="linenum">1731</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_add_more_courses_to_category')" href="../_functions/can_add_more_courses_to_category.html" onMouseOver="funcPopup(event,'can_add_more_courses_to_category')">can_add_more_courses_to_category</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>)) {
<a name="l1732"><span class="linenum">1732</span></a>                      <a class="var it37483" onMouseOver="hilite(37483)" onMouseOut="lolite()" onClick="logVariable('readytoloadcourses')" href="../_variables/readytoloadcourses.html">$readytoloadcourses</a>[] = <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>;
<a name="l1733"><span class="linenum">1733</span></a>                  }
<a name="l1734"><span class="linenum">1734</span></a>              }
<a name="l1735"><span class="linenum">1735</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it37483" onMouseOver="hilite(37483)" onMouseOut="lolite()" onClick="logVariable('readytoloadcourses')" href="../_variables/readytoloadcourses.html">$readytoloadcourses</a>)) {
<a name="l1736"><span class="linenum">1736</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_courses')" href="../_functions/load_all_courses.html" onMouseOver="funcPopup(event,'load_all_courses')">load_all_courses</a>(<a class="var it37483" onMouseOver="hilite(37483)" onMouseOut="lolite()" onClick="logVariable('readytoloadcourses')" href="../_variables/readytoloadcourses.html">$readytoloadcourses</a>);
<a name="l1737"><span class="linenum">1737</span></a>              }
<a name="l1738"><span class="linenum">1738</span></a>          }
<a name="l1739"><span class="linenum">1739</span></a>  
<a name="l1740"><span class="linenum">1740</span></a>  <span class="comment">        // Look for all categories which have been loaded</span>
<a name="l1741"><span class="linenum">1741</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>)) {
<a name="l1742"><span class="linenum">1742</span></a>              <a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a> = array();
<a name="l1743"><span class="linenum">1743</span></a>              foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a> as <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l1744"><span class="linenum">1744</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_add_more_courses_to_category')" href="../_functions/can_add_more_courses_to_category.html" onMouseOver="funcPopup(event,'can_add_more_courses_to_category')">can_add_more_courses_to_category</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>)) {
<a name="l1745"><span class="linenum">1745</span></a>                      <a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>[] = <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('key')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/key.html">key</a>;
<a name="l1746"><span class="linenum">1746</span></a>                  }
<a name="l1747"><span class="linenum">1747</span></a>              }
<a name="l1748"><span class="linenum">1748</span></a>              if (<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>) {
<a name="l1749"><span class="linenum">1749</span></a>                  <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it37484" onMouseOver="hilite(37484)" onMouseOut="lolite()" onClick="logVariable('categoriessql')" href="../_variables/categoriessql.html">$categoriessql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>);
<a name="l1750"><span class="linenum">1750</span></a>                  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['limit'] = (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navcourselimit')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navcourselimit.html">navcourselimit</a>))?<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navcourselimit')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navcourselimit.html">navcourselimit</a>:20;
<a name="l1751"><span class="linenum">1751</span></a>                  <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT cc.id, <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(c.id) AS coursecount
<a name="l1752"><span class="linenum">1752</span></a>                            FROM {course_categories} cc
<a name="l1753"><span class="linenum">1753</span></a>                            JOIN {course} c ON c.category = cc.id
<a name="l1754"><span class="linenum">1754</span></a>                           WHERE cc.id {<a class="var it37484" onMouseOver="hilite(37484)" onMouseOut="lolite()" onClick="logVariable('categoriessql')" href="../_variables/categoriessql.html">$categoriessql</a>}
<a name="l1755"><span class="linenum">1755</span></a>                        GROUP BY cc.id
<a name="l1756"><span class="linenum">1756</span></a>                          HAVING <a class="phpfunction" onClick="logFunction('COUNT')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(c.id) &gt; :limit&quot;;
<a name="l1757"><span class="linenum">1757</span></a>                  <a class="var it37485" onMouseOver="hilite(37485)" onMouseOut="lolite()" onClick="logVariable('excessivecategories')" href="../_variables/excessivecategories.html">$excessivecategories</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l1758"><span class="linenum">1758</span></a>                  foreach (<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as &amp;<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l1759"><span class="linenum">1759</span></a>                      if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('key')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/key.html">key</a>, <a class="var it37485" onMouseOver="hilite(37485)" onMouseOut="lolite()" onClick="logVariable('excessivecategories')" href="../_variables/excessivecategories.html">$excessivecategories</a>) &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_add_more_courses_to_category')" href="../_functions/can_add_more_courses_to_category.html" onMouseOver="funcPopup(event,'can_add_more_courses_to_category')">can_add_more_courses_to_category</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>)) {
<a name="l1760"><span class="linenum">1760</span></a>                          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/index.php.html">/course/index.php</a>', array('categoryid' =&gt; <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('key')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/key.html">key</a>));
<a name="l1761"><span class="linenum">1761</span></a>                          <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('viewallcourses'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l1762"><span class="linenum">1762</span></a>                      }
<a name="l1763"><span class="linenum">1763</span></a>                  }
<a name="l1764"><span class="linenum">1764</span></a>              }
<a name="l1765"><span class="linenum">1765</span></a>          }
<a name="l1766"><span class="linenum">1766</span></a>      }
<a name="l1767"><span class="linenum">1767</span></a>  
<a name="l1768"><span class="linenum">1768</span></a>      <span class="comment">/**</span>
<a name="l1769"><span class="linenum">1769</span></a>  <span class="comment">     * Adds a structured category to the navigation in the correct order/place</span>
<a name="l1770"><span class="linenum">1770</span></a>  <span class="comment">     *</span>
<a name="l1771"><span class="linenum">1771</span></a>  <span class="comment">     * @param stdClass $category category to be added in navigation.</span>
<a name="l1772"><span class="linenum">1772</span></a>  <span class="comment">     * @param navigation_node $parent parent navigation node</span>
<a name="l1773"><span class="linenum">1773</span></a>  <span class="comment">     * @param int $nodetype type of node, if category is under MyHome then it's TYPE_MY_CATEGORY</span>
<a name="l1774"><span class="linenum">1774</span></a>  <span class="comment">     * @return void.</span>
<a name="l1775"><span class="linenum">1775</span></a>  <span class="comment">     */</span>
<a name="l1776"><span class="linenum">1776</span></a>      protected function <a class="function" onClick="logFunction('add_category')" href="../_functions/add_category.html" onMouseOver="funcPopup(event,'add_category')">add_category</a>(stdClass <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>, navigation_node <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a>, <a class="var it15868" onMouseOver="hilite(15868)" onMouseOut="lolite()" onClick="logVariable('nodetype')" href="../_variables/nodetype.html">$nodetype</a> = self::TYPE_CATEGORY) {
<a name="l1777"><span class="linenum">1777</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>)) {
<a name="l1778"><span class="linenum">1778</span></a>              return;
<a name="l1779"><span class="linenum">1779</span></a>          }
<a name="l1780"><span class="linenum">1780</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/index.php.html">/course/index.php</a>', array('categoryid' =&gt; <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l1781"><span class="linenum">1781</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1782"><span class="linenum">1782</span></a>          <a class="var it1253" onMouseOver="hilite(1253)" onMouseOut="lolite()" onClick="logVariable('categoryname')" href="../_variables/categoryname.html">$categoryname</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('name')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, true, array('context' =&gt; <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>));
<a name="l1783"><span class="linenum">1783</span></a>          <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a> = <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it1253" onMouseOver="hilite(1253)" onMouseOut="lolite()" onClick="logVariable('categoryname')" href="../_variables/categoryname.html">$categoryname</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it15868" onMouseOver="hilite(15868)" onMouseOut="lolite()" onClick="logVariable('nodetype')" href="../_variables/nodetype.html">$nodetype</a>, <a class="var it1253" onMouseOver="hilite(1253)" onMouseOut="lolite()" onClick="logVariable('categoryname')" href="../_variables/categoryname.html">$categoryname</a>, <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1784"><span class="linenum">1784</span></a>          if (empty(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('visible')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>)) {
<a name="l1785"><span class="linenum">1785</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:viewhiddencategories', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l1786"><span class="linenum">1786</span></a>                  <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a onClick="logVariable('hidden')" class="var it41086" onMouseOver="hilite(41086)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a> = true;
<a name="l1787"><span class="linenum">1787</span></a>              } else {
<a name="l1788"><span class="linenum">1788</span></a>                  <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a onClick="logVariable('display')" class="var it41086" onMouseOver="hilite(41086)" onMouseOut="lolite()" href="../_variables/display.html">display</a> = false;
<a name="l1789"><span class="linenum">1789</span></a>              }
<a name="l1790"><span class="linenum">1790</span></a>          }
<a name="l1791"><span class="linenum">1791</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>[<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>;
<a name="l1792"><span class="linenum">1792</span></a>      }
<a name="l1793"><span class="linenum">1793</span></a>  
<a name="l1794"><span class="linenum">1794</span></a>      <span class="comment">/**</span>
<a name="l1795"><span class="linenum">1795</span></a>  <span class="comment">     * Loads the given course into the navigation</span>
<a name="l1796"><span class="linenum">1796</span></a>  <span class="comment">     *</span>
<a name="l1797"><span class="linenum">1797</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l1798"><span class="linenum">1798</span></a>  <span class="comment">     * @return navigation_node</span>
<a name="l1799"><span class="linenum">1799</span></a>  <span class="comment">     */</span>
<a name="l1800"><span class="linenum">1800</span></a>      protected function <a class="function" onClick="logFunction('load_course')" href="../_functions/load_course.html" onMouseOver="funcPopup(event,'load_course')">load_course</a>(stdClass <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1801"><span class="linenum">1801</span></a>          global <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l1802"><span class="linenum">1802</span></a>          if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1803"><span class="linenum">1803</span></a>  <span class="comment">            // This is always loaded during initialisation</span>
<a name="l1804"><span class="linenum">1804</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['site'];
<a name="l1805"><span class="linenum">1805</span></a>          } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcourses')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcourses.html">addedcourses</a>)) {
<a name="l1806"><span class="linenum">1806</span></a>  <span class="comment">            // The course has already been loaded so return a reference</span>
<a name="l1807"><span class="linenum">1807</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcourses')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcourses.html">addedcourses</a>[<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>];
<a name="l1808"><span class="linenum">1808</span></a>          } else {
<a name="l1809"><span class="linenum">1809</span></a>  <span class="comment">            // Add the course</span>
<a name="l1810"><span class="linenum">1810</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1811"><span class="linenum">1811</span></a>          }
<a name="l1812"><span class="linenum">1812</span></a>      }
<a name="l1813"><span class="linenum">1813</span></a>  
<a name="l1814"><span class="linenum">1814</span></a>      <span class="comment">/**</span>
<a name="l1815"><span class="linenum">1815</span></a>  <span class="comment">     * Loads all of the courses section into the navigation.</span>
<a name="l1816"><span class="linenum">1816</span></a>  <span class="comment">     *</span>
<a name="l1817"><span class="linenum">1817</span></a>  <span class="comment">     * This function calls method from current course format, see</span>
<a name="l1818"><span class="linenum">1818</span></a>  <span class="comment">     * {@link format_base::extend_course_navigation()}</span>
<a name="l1819"><span class="linenum">1819</span></a>  <span class="comment">     * If course module ($cm) is specified but course format failed to create the node,</span>
<a name="l1820"><span class="linenum">1820</span></a>  <span class="comment">     * the activity node is created anyway.</span>
<a name="l1821"><span class="linenum">1821</span></a>  <span class="comment">     *</span>
<a name="l1822"><span class="linenum">1822</span></a>  <span class="comment">     * By default course formats call the method {@link global_navigation::load_generic_course_sections()}</span>
<a name="l1823"><span class="linenum">1823</span></a>  <span class="comment">     *</span>
<a name="l1824"><span class="linenum">1824</span></a>  <span class="comment">     * @param stdClass $course Database record for the course</span>
<a name="l1825"><span class="linenum">1825</span></a>  <span class="comment">     * @param navigation_node $coursenode The course node within the navigation</span>
<a name="l1826"><span class="linenum">1826</span></a>  <span class="comment">     * @param null|int $sectionnum If specified load the contents of section with this relative number</span>
<a name="l1827"><span class="linenum">1827</span></a>  <span class="comment">     * @param null|cm_info $cm If specified make sure that activity node is created (either</span>
<a name="l1828"><span class="linenum">1828</span></a>  <span class="comment">     *    in containg section or by calling load_stealth_activity() )</span>
<a name="l1829"><span class="linenum">1829</span></a>  <span class="comment">     */</span>
<a name="l1830"><span class="linenum">1830</span></a>      protected function <a class="function" onClick="logFunction('load_course_sections')" href="../_functions/load_course_sections.html" onMouseOver="funcPopup(event,'load_course_sections')">load_course_sections</a>(stdClass <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, navigation_node <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it4315" onMouseOver="hilite(4315)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a> = null, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = null) {
<a name="l1831"><span class="linenum">1831</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l1832"><span class="linenum">1832</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../course/lib.php.html">/course/lib.php</a>');
<a name="l1833"><span class="linenum">1833</span></a>          if (isset(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/sectionnum.html">sectionnum</a>)) {
<a name="l1834"><span class="linenum">1834</span></a>              <a class="var it4315" onMouseOver="hilite(4315)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/sectionnum.html">sectionnum</a>;
<a name="l1835"><span class="linenum">1835</span></a>          }
<a name="l1836"><span class="linenum">1836</span></a>          if (<a class="var it4315" onMouseOver="hilite(4315)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a> !== null) {
<a name="l1837"><span class="linenum">1837</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('includesectionnum')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/includesectionnum.html">includesectionnum</a> = <a class="var it4315" onMouseOver="hilite(4315)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a>;
<a name="l1838"><span class="linenum">1838</span></a>          }
<a name="l1839"><span class="linenum">1839</span></a>          <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)-&gt;<a class="function" onClick="logFunction('extend_course_navigation')" href="../_functions/extend_course_navigation.html" onMouseOver="funcPopup(event,'extend_course_navigation')">extend_course_navigation</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it4315" onMouseOver="hilite(4315)" onMouseOut="lolite()" onClick="logVariable('sectionnum')" href="../_variables/sectionnum.html">$sectionnum</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l1840"><span class="linenum">1840</span></a>          if (isset(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l1841"><span class="linenum">1841</span></a>              <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a> = <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, self::TYPE_ACTIVITY);
<a name="l1842"><span class="linenum">1842</span></a>              if (empty(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>)) {
<a name="l1843"><span class="linenum">1843</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_stealth_activity')" href="../_functions/load_stealth_activity.html" onMouseOver="funcPopup(event,'load_stealth_activity')">load_stealth_activity</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>));
<a name="l1844"><span class="linenum">1844</span></a>              }
<a name="l1845"><span class="linenum">1845</span></a>          }
<a name="l1846"><span class="linenum">1846</span></a>     }
<a name="l1847"><span class="linenum">1847</span></a>  
<a name="l1848"><span class="linenum">1848</span></a>      <span class="comment">/**</span>
<a name="l1849"><span class="linenum">1849</span></a>  <span class="comment">     * Generates an array of sections and an array of activities for the given course.</span>
<a name="l1850"><span class="linenum">1850</span></a>  <span class="comment">     *</span>
<a name="l1851"><span class="linenum">1851</span></a>  <span class="comment">     * This method uses the cache to improve performance and avoid the get_fast_modinfo call</span>
<a name="l1852"><span class="linenum">1852</span></a>  <span class="comment">     *</span>
<a name="l1853"><span class="linenum">1853</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l1854"><span class="linenum">1854</span></a>  <span class="comment">     * @return array Array($sections, $activities)</span>
<a name="l1855"><span class="linenum">1855</span></a>  <span class="comment">     */</span>
<a name="l1856"><span class="linenum">1856</span></a>      protected function <a class="function" onClick="logFunction('generate_sections_and_activities')" href="../_functions/generate_sections_and_activities.html" onMouseOver="funcPopup(event,'generate_sections_and_activities')">generate_sections_and_activities</a>(stdClass <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1857"><span class="linenum">1857</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1858"><span class="linenum">1858</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../course/lib.php.html">/course/lib.php</a>');
<a name="l1859"><span class="linenum">1859</span></a>  
<a name="l1860"><span class="linenum">1860</span></a>          <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1861"><span class="linenum">1861</span></a>          <a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_section_info_all')" href="../_functions/get_section_info_all.html" onMouseOver="funcPopup(event,'get_section_info_all')">get_section_info_all</a>();
<a name="l1862"><span class="linenum">1862</span></a>  
<a name="l1863"><span class="linenum">1863</span></a>  <span class="comment">        // For course formats using 'numsections' trim the sections list</span>
<a name="l1864"><span class="linenum">1864</span></a>          <a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('courseformatoptions')" href="../_variables/courseformatoptions.html">$courseformatoptions</a> = <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)-&gt;<a class="function" onClick="logFunction('get_format_options')" href="../_functions/get_format_options.html" onMouseOver="funcPopup(event,'get_format_options')">get_format_options</a>();
<a name="l1865"><span class="linenum">1865</span></a>          if (isset(<a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('courseformatoptions')" href="../_variables/courseformatoptions.html">$courseformatoptions</a>['numsections'])) {
<a name="l1866"><span class="linenum">1866</span></a>              <a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>, 0, <a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('courseformatoptions')" href="../_variables/courseformatoptions.html">$courseformatoptions</a>['numsections']+1, true);
<a name="l1867"><span class="linenum">1867</span></a>          }
<a name="l1868"><span class="linenum">1868</span></a>  
<a name="l1869"><span class="linenum">1869</span></a>          <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../_variables/activities.html">$activities</a> = array();
<a name="l1870"><span class="linenum">1870</span></a>  
<a name="l1871"><span class="linenum">1871</span></a>          foreach (<a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>) {
<a name="l1872"><span class="linenum">1872</span></a>  <span class="comment">            // Clone and unset summary to prevent $SESSION bloat (MDL-31802).</span>
<a name="l1873"><span class="linenum">1873</span></a>              <a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>);
<a name="l1874"><span class="linenum">1874</span></a>              unset(<a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;summary);
<a name="l1875"><span class="linenum">1875</span></a>              <a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;hasactivites = false;
<a name="l1876"><span class="linenum">1876</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/section.html">section</a>, <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('sections')" class="var it39598" onMouseOver="hilite(39598)" onMouseOut="lolite()" href="../_variables/sections.html">sections</a>)) {
<a name="l1877"><span class="linenum">1877</span></a>                  continue;
<a name="l1878"><span class="linenum">1878</span></a>              }
<a name="l1879"><span class="linenum">1879</span></a>              foreach (<a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('sections')" class="var it39598" onMouseOver="hilite(39598)" onMouseOut="lolite()" href="../_variables/sections.html">sections</a>[<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/section.html">section</a>] as <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>) {
<a name="l1880"><span class="linenum">1880</span></a>                  <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('cms')" class="var it39598" onMouseOver="hilite(39598)" onMouseOut="lolite()" href="../_variables/cms.html">cms</a>[<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>];
<a name="l1881"><span class="linenum">1881</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a> = new stdClass;
<a name="l1882"><span class="linenum">1882</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('id')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1883"><span class="linenum">1883</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('course')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/course.html">course</a> = <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1884"><span class="linenum">1884</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('section')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/section.html">section</a> = <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/section.html">section</a>;
<a name="l1885"><span class="linenum">1885</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('name')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/name.html">name</a>;
<a name="l1886"><span class="linenum">1886</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('icon')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('icon')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>;
<a name="l1887"><span class="linenum">1887</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('iconcomponent')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/iconcomponent.html">iconcomponent</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('iconcomponent')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/iconcomponent.html">iconcomponent</a>;
<a name="l1888"><span class="linenum">1888</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('hidden')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a> = (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('visible')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>);
<a name="l1889"><span class="linenum">1889</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('modname')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>;
<a name="l1890"><span class="linenum">1890</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('nodetype')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::NODETYPE_LEAF;
<a name="l1891"><span class="linenum">1891</span></a>                  <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('onclick')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/onclick.html">onclick</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('onclick')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/onclick.html">onclick</a>;
<a name="l1892"><span class="linenum">1892</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('url')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/url.html">url</a>;
<a name="l1893"><span class="linenum">1893</span></a>                  if (!<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) {
<a name="l1894"><span class="linenum">1894</span></a>                      <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('url')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/url.html">url</a> = null;
<a name="l1895"><span class="linenum">1895</span></a>                      <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('display')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/display.html">display</a> = false;
<a name="l1896"><span class="linenum">1896</span></a>                  } else {
<a name="l1897"><span class="linenum">1897</span></a>                      <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('url')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/url.html">url</a> = <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l1898"><span class="linenum">1898</span></a>                      <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('display')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/display.html">display</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('uservisible')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/uservisible.html">uservisible</a> ? true : false;
<a name="l1899"><span class="linenum">1899</span></a>                      if (self::<a class="function" onClick="logFunction('module_extends_navigation')" href="../_functions/module_extends_navigation.html" onMouseOver="funcPopup(event,'module_extends_navigation')">module_extends_navigation</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>)) {
<a name="l1900"><span class="linenum">1900</span></a>                          <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('nodetype')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::NODETYPE_BRANCH;
<a name="l1901"><span class="linenum">1901</span></a>                      }
<a name="l1902"><span class="linenum">1902</span></a>                  }
<a name="l1903"><span class="linenum">1903</span></a>                  <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../_variables/activities.html">$activities</a>[<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>] = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>;
<a name="l1904"><span class="linenum">1904</span></a>                  if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('display')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/display.html">display</a>) {
<a name="l1905"><span class="linenum">1905</span></a>                      <a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]-&gt;hasactivites = true;
<a name="l1906"><span class="linenum">1906</span></a>                  }
<a name="l1907"><span class="linenum">1907</span></a>              }
<a name="l1908"><span class="linenum">1908</span></a>          }
<a name="l1909"><span class="linenum">1909</span></a>  
<a name="l1910"><span class="linenum">1910</span></a>          return array(<a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>, <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../_variables/activities.html">$activities</a>);
<a name="l1911"><span class="linenum">1911</span></a>      }
<a name="l1912"><span class="linenum">1912</span></a>  
<a name="l1913"><span class="linenum">1913</span></a>      <span class="comment">/**</span>
<a name="l1914"><span class="linenum">1914</span></a>  <span class="comment">     * Generically loads the course sections into the course's navigation.</span>
<a name="l1915"><span class="linenum">1915</span></a>  <span class="comment">     *</span>
<a name="l1916"><span class="linenum">1916</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l1917"><span class="linenum">1917</span></a>  <span class="comment">     * @param navigation_node $coursenode</span>
<a name="l1918"><span class="linenum">1918</span></a>  <span class="comment">     * @return array An array of course section nodes</span>
<a name="l1919"><span class="linenum">1919</span></a>  <span class="comment">     */</span>
<a name="l1920"><span class="linenum">1920</span></a>      public function <a class="function" onClick="logFunction('load_generic_course_sections')" href="../_functions/load_generic_course_sections.html" onMouseOver="funcPopup(event,'load_generic_course_sections')">load_generic_course_sections</a>(stdClass <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, navigation_node <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>) {
<a name="l1921"><span class="linenum">1921</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l1922"><span class="linenum">1922</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../course/lib.php.html">/course/lib.php</a>');
<a name="l1923"><span class="linenum">1923</span></a>  
<a name="l1924"><span class="linenum">1924</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a>, <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../_variables/activities.html">$activities</a>) = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('generate_sections_and_activities')" href="../_functions/generate_sections_and_activities.html" onMouseOver="funcPopup(event,'generate_sections_and_activities')">generate_sections_and_activities</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l1925"><span class="linenum">1925</span></a>  
<a name="l1926"><span class="linenum">1926</span></a>          <a class="var it37486" onMouseOver="hilite(37486)" onMouseOut="lolite()" onClick="logVariable('navigationsections')" href="../_variables/navigationsections.html">$navigationsections</a> = array();
<a name="l1927"><span class="linenum">1927</span></a>          foreach (<a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../_variables/sections.html">$sections</a> as <a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a> =&gt; <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>) {
<a name="l1928"><span class="linenum">1928</span></a>              <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>);
<a name="l1929"><span class="linenum">1929</span></a>              if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l1930"><span class="linenum">1930</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_section_activities')" href="../_functions/load_section_activities.html" onMouseOver="funcPopup(event,'load_section_activities')">load_section_activities</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/section.html">section</a>, <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../_variables/activities.html">$activities</a>);
<a name="l1931"><span class="linenum">1931</span></a>              } else {
<a name="l1932"><span class="linenum">1932</span></a>                  if (!<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('uservisible')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/uservisible.html">uservisible</a> || (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('showemptysections')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/showemptysections.html">showemptysections</a> &amp;&amp;
<a name="l1933"><span class="linenum">1933</span></a>                          !<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('hasactivites')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/hasactivites.html">hasactivites</a> &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('includesectionnum')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/includesectionnum.html">includesectionnum</a> !== <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/section.html">section</a>)) {
<a name="l1934"><span class="linenum">1934</span></a>                      continue;
<a name="l1935"><span class="linenum">1935</span></a>                  }
<a name="l1936"><span class="linenum">1936</span></a>  
<a name="l1937"><span class="linenum">1937</span></a>                  <a class="var it7294" onMouseOver="hilite(7294)" onMouseOut="lolite()" onClick="logVariable('sectionname')" href="../_variables/sectionname.html">$sectionname</a> = <a class="function" onClick="logFunction('get_section_name')" href="../_functions/get_section_name.html" onMouseOver="funcPopup(event,'get_section_name')">get_section_name</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>);
<a name="l1938"><span class="linenum">1938</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('course_get_url')" href="../_functions/course_get_url.html" onMouseOver="funcPopup(event,'course_get_url')">course_get_url</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/section.html">section</a>, array('navigation' =&gt; true));
<a name="l1939"><span class="linenum">1939</span></a>  
<a name="l1940"><span class="linenum">1940</span></a>                  <a class="var it30961" onMouseOver="hilite(30961)" onMouseOut="lolite()" onClick="logVariable('sectionnode')" href="../_variables/sectionnode.html">$sectionnode</a> = <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it7294" onMouseOver="hilite(7294)" onMouseOut="lolite()" onClick="logVariable('sectionname')" href="../_variables/sectionname.html">$sectionname</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SECTION, null, <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('id')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l1941"><span class="linenum">1941</span></a>                  <a class="var it30961" onMouseOver="hilite(30961)" onMouseOut="lolite()" onClick="logVariable('sectionnode')" href="../_variables/sectionnode.html">$sectionnode</a>-&gt;<a onClick="logVariable('nodetype')" class="var it41087" onMouseOver="hilite(41087)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::NODETYPE_BRANCH;
<a name="l1942"><span class="linenum">1942</span></a>                  <a class="var it30961" onMouseOver="hilite(30961)" onMouseOut="lolite()" onClick="logVariable('sectionnode')" href="../_variables/sectionnode.html">$sectionnode</a>-&gt;<a onClick="logVariable('hidden')" class="var it41087" onMouseOver="hilite(41087)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a> = (!<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('visible')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> || !<a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('available')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/available.html">available</a>);
<a name="l1943"><span class="linenum">1943</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('includesectionnum')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/includesectionnum.html">includesectionnum</a> !== false &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('includesectionnum')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/includesectionnum.html">includesectionnum</a> == <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/section.html">section</a>) {
<a name="l1944"><span class="linenum">1944</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_section_activities')" href="../_functions/load_section_activities.html" onMouseOver="funcPopup(event,'load_section_activities')">load_section_activities</a>(<a class="var it30961" onMouseOver="hilite(30961)" onMouseOut="lolite()" onClick="logVariable('sectionnode')" href="../_variables/sectionnode.html">$sectionnode</a>, <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('section')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/section.html">section</a>, <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../_variables/activities.html">$activities</a>);
<a name="l1945"><span class="linenum">1945</span></a>                  }
<a name="l1946"><span class="linenum">1946</span></a>                  <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('sectionnode')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../_variables/sectionnode.html">sectionnode</a> = <a class="var it30961" onMouseOver="hilite(30961)" onMouseOut="lolite()" onClick="logVariable('sectionnode')" href="../_variables/sectionnode.html">$sectionnode</a>;
<a name="l1947"><span class="linenum">1947</span></a>                  <a class="var it37486" onMouseOver="hilite(37486)" onMouseOut="lolite()" onClick="logVariable('navigationsections')" href="../_variables/navigationsections.html">$navigationsections</a>[<a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../_variables/sectionid.html">$sectionid</a>] = <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../_variables/section.html">$section</a>;
<a name="l1948"><span class="linenum">1948</span></a>              }
<a name="l1949"><span class="linenum">1949</span></a>          }
<a name="l1950"><span class="linenum">1950</span></a>          return <a class="var it37486" onMouseOver="hilite(37486)" onMouseOut="lolite()" onClick="logVariable('navigationsections')" href="../_variables/navigationsections.html">$navigationsections</a>;
<a name="l1951"><span class="linenum">1951</span></a>      }
<a name="l1952"><span class="linenum">1952</span></a>  
<a name="l1953"><span class="linenum">1953</span></a>      <span class="comment">/**</span>
<a name="l1954"><span class="linenum">1954</span></a>  <span class="comment">     * Loads all of the activities for a section into the navigation structure.</span>
<a name="l1955"><span class="linenum">1955</span></a>  <span class="comment">     *</span>
<a name="l1956"><span class="linenum">1956</span></a>  <span class="comment">     * @param navigation_node $sectionnode</span>
<a name="l1957"><span class="linenum">1957</span></a>  <span class="comment">     * @param int $sectionnumber</span>
<a name="l1958"><span class="linenum">1958</span></a>  <span class="comment">     * @param array $activities An array of activites as returned by {@link global_navigation::generate_sections_and_activities()}</span>
<a name="l1959"><span class="linenum">1959</span></a>  <span class="comment">     * @param stdClass $course The course object the section and activities relate to.</span>
<a name="l1960"><span class="linenum">1960</span></a>  <span class="comment">     * @return array Array of activity nodes</span>
<a name="l1961"><span class="linenum">1961</span></a>  <span class="comment">     */</span>
<a name="l1962"><span class="linenum">1962</span></a>      protected function <a class="function" onClick="logFunction('load_section_activities')" href="../_functions/load_section_activities.html" onMouseOver="funcPopup(event,'load_section_activities')">load_section_activities</a>(navigation_node <a class="var it30961" onMouseOver="hilite(30961)" onMouseOut="lolite()" onClick="logVariable('sectionnode')" href="../_variables/sectionnode.html">$sectionnode</a>, <a class="var it8348" onMouseOver="hilite(8348)" onMouseOut="lolite()" onClick="logVariable('sectionnumber')" href="../_variables/sectionnumber.html">$sectionnumber</a>, array <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../_variables/activities.html">$activities</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = null) {
<a name="l1963"><span class="linenum">1963</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l1964"><span class="linenum">1964</span></a>  <span class="comment">        // A static counter for JS function naming</span>
<a name="l1965"><span class="linenum">1965</span></a>          static <a class="var it37488" onMouseOver="hilite(37488)" onMouseOut="lolite()" onClick="logVariable('legacyonclickcounter')" href="../_variables/legacyonclickcounter.html">$legacyonclickcounter</a> = 0;
<a name="l1966"><span class="linenum">1966</span></a>  
<a name="l1967"><span class="linenum">1967</span></a>          <a class="var it37489" onMouseOver="hilite(37489)" onMouseOut="lolite()" onClick="logVariable('activitynodes')" href="../_variables/activitynodes.html">$activitynodes</a> = array();
<a name="l1968"><span class="linenum">1968</span></a>          if (empty(<a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../_variables/activities.html">$activities</a>)) {
<a name="l1969"><span class="linenum">1969</span></a>              return <a class="var it37489" onMouseOver="hilite(37489)" onMouseOut="lolite()" onClick="logVariable('activitynodes')" href="../_variables/activitynodes.html">$activitynodes</a>;
<a name="l1970"><span class="linenum">1970</span></a>          }
<a name="l1971"><span class="linenum">1971</span></a>  
<a name="l1972"><span class="linenum">1972</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)) {
<a name="l1973"><span class="linenum">1973</span></a>              <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../_variables/activities.html">$activities</a>);
<a name="l1974"><span class="linenum">1974</span></a>              <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('course')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/course.html">course</a>;
<a name="l1975"><span class="linenum">1975</span></a>          } else {
<a name="l1976"><span class="linenum">1976</span></a>              <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1977"><span class="linenum">1977</span></a>          }
<a name="l1978"><span class="linenum">1978</span></a>          <a class="var it37490" onMouseOver="hilite(37490)" onMouseOut="lolite()" onClick="logVariable('showactivities')" href="../_variables/showactivities.html">$showactivities</a> = (<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> != <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a> || !empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navshowfrontpagemods')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navshowfrontpagemods.html">navshowfrontpagemods</a>));
<a name="l1979"><span class="linenum">1979</span></a>  
<a name="l1980"><span class="linenum">1980</span></a>          foreach (<a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../_variables/activities.html">$activities</a> as <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>) {
<a name="l1981"><span class="linenum">1981</span></a>              if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('section')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/section.html">section</a> != <a class="var it8348" onMouseOver="hilite(8348)" onMouseOut="lolite()" onClick="logVariable('sectionnumber')" href="../_variables/sectionnumber.html">$sectionnumber</a>) {
<a name="l1982"><span class="linenum">1982</span></a>                  continue;
<a name="l1983"><span class="linenum">1983</span></a>              }
<a name="l1984"><span class="linenum">1984</span></a>              if (<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('icon')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>) {
<a name="l1985"><span class="linenum">1985</span></a>                  <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('icon')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('modname')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>), <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('iconcomponent')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/iconcomponent.html">iconcomponent</a>);
<a name="l1986"><span class="linenum">1986</span></a>              } else {
<a name="l1987"><span class="linenum">1987</span></a>                  <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('icon', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('modname')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>), <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('modname')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>);
<a name="l1988"><span class="linenum">1988</span></a>              }
<a name="l1989"><span class="linenum">1989</span></a>  
<a name="l1990"><span class="linenum">1990</span></a>  <span class="comment">            // Prepare the default name and url for the node</span>
<a name="l1991"><span class="linenum">1991</span></a>              <a class="var it9350" onMouseOver="hilite(9350)" onMouseOut="lolite()" onClick="logVariable('activityname')" href="../_variables/activityname.html">$activityname</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('name')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, true, array('context' =&gt; <a class="class" onClick="logClass('context_module')" href="../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('id')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)));
<a name="l1992"><span class="linenum">1992</span></a>              <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('url')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l1993"><span class="linenum">1993</span></a>  
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment">            // Check if the onclick property is set (puke!)</span>
<a name="l1995"><span class="linenum">1995</span></a>              if (!empty(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('onclick')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/onclick.html">onclick</a>)) {
<a name="l1996"><span class="linenum">1996</span></a>  <span class="comment">                // Increment the counter so that we have a unique number.</span>
<a name="l1997"><span class="linenum">1997</span></a>                  <a class="var it37488" onMouseOver="hilite(37488)" onMouseOut="lolite()" onClick="logVariable('legacyonclickcounter')" href="../_variables/legacyonclickcounter.html">$legacyonclickcounter</a>++;
<a name="l1998"><span class="linenum">1998</span></a>  <span class="comment">                // Generate the function name we will use</span>
<a name="l1999"><span class="linenum">1999</span></a>                  <a class="var it3922" onMouseOver="hilite(3922)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../_variables/functionname.html">$functionname</a> = 'legacy_activity_onclick_handler_'.<a class="var it37488" onMouseOver="hilite(37488)" onMouseOut="lolite()" onClick="logVariable('legacyonclickcounter')" href="../_variables/legacyonclickcounter.html">$legacyonclickcounter</a>;
<a name="l2000"><span class="linenum">2000</span></a>                  <a class="var it37492" onMouseOver="hilite(37492)" onMouseOut="lolite()" onClick="logVariable('propogrationhandler')" href="../_variables/propogrationhandler.html">$propogrationhandler</a> = '';
<a name="l2001"><span class="linenum">2001</span></a>  <span class="comment">                // Check if we need to cancel propogation. Remember inline onclick</span>
<a name="l2002"><span class="linenum">2002</span></a>  <span class="comment">                // events would return false if they wanted to prevent propogation and the</span>
<a name="l2003"><span class="linenum">2003</span></a>  <span class="comment">                // default action.</span>
<a name="l2004"><span class="linenum">2004</span></a>                  if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('onclick')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/onclick.html">onclick</a>, 'return false')) {
<a name="l2005"><span class="linenum">2005</span></a>                      <a class="var it37492" onMouseOver="hilite(37492)" onMouseOut="lolite()" onClick="logVariable('propogrationhandler')" href="../_variables/propogrationhandler.html">$propogrationhandler</a> = 'e.halt();';
<a name="l2006"><span class="linenum">2006</span></a>                  }
<a name="l2007"><span class="linenum">2007</span></a>  <span class="comment">                // Decode the onclick - it has already been encoded for display (puke)</span>
<a name="l2008"><span class="linenum">2008</span></a>                  <a class="var it6615" onMouseOver="hilite(6615)" onMouseOut="lolite()" onClick="logVariable('onclick')" href="../_variables/onclick.html">$onclick</a> = <a class="function" onClick="logFunction('htmlspecialchars_decode')" href="../_functions/htmlspecialchars_decode.html" onMouseOver="funcPopup(event,'htmlspecialchars_decode')">htmlspecialchars_decode</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('onclick')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/onclick.html">onclick</a>, ENT_QUOTES);
<a name="l2009"><span class="linenum">2009</span></a>  <span class="comment">                // Build the JS function the click event will call</span>
<a name="l2010"><span class="linenum">2010</span></a>                  <a class="var it23654" onMouseOver="hilite(23654)" onMouseOut="lolite()" onClick="logVariable('jscode')" href="../_variables/jscode.html">$jscode</a> = &quot;function {<a class="var it3922" onMouseOver="hilite(3922)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../_variables/functionname.html">$functionname</a>}(e) { <a class="var it37492" onMouseOver="hilite(37492)" onMouseOut="lolite()" onClick="logVariable('propogrationhandler')" href="../_variables/propogrationhandler.html">$propogrationhandler</a> <a class="var it6615" onMouseOver="hilite(6615)" onMouseOut="lolite()" onClick="logVariable('onclick')" href="../_variables/onclick.html">$onclick</a> }&quot;;
<a name="l2011"><span class="linenum">2011</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;requires-&gt;<a class="function" onClick="logFunction('js_init_code')" href="../_functions/js_init_code.html" onMouseOver="funcPopup(event,'js_init_code')">js_init_code</a>(<a class="var it23654" onMouseOver="hilite(23654)" onMouseOut="lolite()" onClick="logVariable('jscode')" href="../_variables/jscode.html">$jscode</a>);
<a name="l2012"><span class="linenum">2012</span></a>  <span class="comment">                // Override the default url with the new action link</span>
<a name="l2013"><span class="linenum">2013</span></a>                  <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a> = <span class="keyword">new </span><a class="class" onClick="logClass('action_link')" href="../_classes/action_link.html" onMouseOver="classPopup(event,'action_link')">action_link</a>(<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>, <a class="var it9350" onMouseOver="hilite(9350)" onMouseOut="lolite()" onClick="logVariable('activityname')" href="../_variables/activityname.html">$activityname</a>, <span class="keyword">new </span><a class="class" onClick="logClass('component_action')" href="../_classes/component_action.html" onMouseOver="classPopup(event,'component_action')">component_action</a>('click', <a class="var it3922" onMouseOver="hilite(3922)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../_variables/functionname.html">$functionname</a>));
<a name="l2014"><span class="linenum">2014</span></a>              }
<a name="l2015"><span class="linenum">2015</span></a>  
<a name="l2016"><span class="linenum">2016</span></a>              <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a> = <a class="var it30961" onMouseOver="hilite(30961)" onMouseOut="lolite()" onClick="logVariable('sectionnode')" href="../_variables/sectionnode.html">$sectionnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it9350" onMouseOver="hilite(9350)" onMouseOut="lolite()" onClick="logVariable('activityname')" href="../_variables/activityname.html">$activityname</a>, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_ACTIVITY, null, <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('id')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>);
<a name="l2017"><span class="linenum">2017</span></a>              <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>-&gt;<a class="function" onClick="logFunction('title')" href="../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('modname')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>));
<a name="l2018"><span class="linenum">2018</span></a>              <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>-&gt;<a onClick="logVariable('hidden')" class="var it40491" onMouseOver="hilite(40491)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('hidden')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a>;
<a name="l2019"><span class="linenum">2019</span></a>              <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>-&gt;<a onClick="logVariable('display')" class="var it40491" onMouseOver="hilite(40491)" onMouseOut="lolite()" href="../_variables/display.html">display</a> = <a class="var it37490" onMouseOver="hilite(37490)" onMouseOut="lolite()" onClick="logVariable('showactivities')" href="../_variables/showactivities.html">$showactivities</a> &amp;&amp; <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('display')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/display.html">display</a>;
<a name="l2020"><span class="linenum">2020</span></a>              <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>-&gt;<a onClick="logVariable('nodetype')" class="var it40491" onMouseOver="hilite(40491)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('nodetype')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a>;
<a name="l2021"><span class="linenum">2021</span></a>              <a class="var it37489" onMouseOver="hilite(37489)" onMouseOut="lolite()" onClick="logVariable('activitynodes')" href="../_variables/activitynodes.html">$activitynodes</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('id')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>;
<a name="l2022"><span class="linenum">2022</span></a>          }
<a name="l2023"><span class="linenum">2023</span></a>  
<a name="l2024"><span class="linenum">2024</span></a>          return <a class="var it37489" onMouseOver="hilite(37489)" onMouseOut="lolite()" onClick="logVariable('activitynodes')" href="../_variables/activitynodes.html">$activitynodes</a>;
<a name="l2025"><span class="linenum">2025</span></a>      }
<a name="l2026"><span class="linenum">2026</span></a>      <span class="comment">/**</span>
<a name="l2027"><span class="linenum">2027</span></a>  <span class="comment">     * Loads a stealth module from unavailable section</span>
<a name="l2028"><span class="linenum">2028</span></a>  <span class="comment">     * @param navigation_node $coursenode</span>
<a name="l2029"><span class="linenum">2029</span></a>  <span class="comment">     * @param stdClass $modinfo</span>
<a name="l2030"><span class="linenum">2030</span></a>  <span class="comment">     * @return navigation_node or null if not accessible</span>
<a name="l2031"><span class="linenum">2031</span></a>  <span class="comment">     */</span>
<a name="l2032"><span class="linenum">2032</span></a>      protected function <a class="function" onClick="logFunction('load_stealth_activity')" href="../_functions/load_stealth_activity.html" onMouseOver="funcPopup(event,'load_stealth_activity')">load_stealth_activity</a>(navigation_node <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>) {
<a name="l2033"><span class="linenum">2033</span></a>          if (empty(<a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('cms')" class="var it39598" onMouseOver="hilite(39598)" onMouseOut="lolite()" href="../_variables/cms.html">cms</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;id])) {
<a name="l2034"><span class="linenum">2034</span></a>              return null;
<a name="l2035"><span class="linenum">2035</span></a>          }
<a name="l2036"><span class="linenum">2036</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('cms')" class="var it39598" onMouseOver="hilite(39598)" onMouseOut="lolite()" href="../_variables/cms.html">cms</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;id];
<a name="l2037"><span class="linenum">2037</span></a>          if (<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('icon')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>) {
<a name="l2038"><span class="linenum">2038</span></a>              <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('icon')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>), <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('iconcomponent')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/iconcomponent.html">iconcomponent</a>);
<a name="l2039"><span class="linenum">2039</span></a>          } else {
<a name="l2040"><span class="linenum">2040</span></a>              <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('icon', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>), <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>);
<a name="l2041"><span class="linenum">2041</span></a>          }
<a name="l2042"><span class="linenum">2042</span></a>          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('url')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/url.html">url</a>;
<a name="l2043"><span class="linenum">2043</span></a>          <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a> = <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/name.html">name</a>), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_ACTIVITY, null, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>);
<a name="l2044"><span class="linenum">2044</span></a>          <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>-&gt;<a class="function" onClick="logFunction('title')" href="../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>));
<a name="l2045"><span class="linenum">2045</span></a>          <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>-&gt;<a onClick="logVariable('hidden')" class="var it40491" onMouseOver="hilite(40491)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a> = (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('visible')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>);
<a name="l2046"><span class="linenum">2046</span></a>          if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('uservisible')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/uservisible.html">uservisible</a>) {
<a name="l2047"><span class="linenum">2047</span></a>  <span class="comment">            // Do not show any error here, let the page handle exception that activity is not visible for the current user.</span>
<a name="l2048"><span class="linenum">2048</span></a>  <span class="comment">            // Also there may be no exception at all in case when teacher is logged in as student.</span>
<a name="l2049"><span class="linenum">2049</span></a>              <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>-&gt;<a onClick="logVariable('display')" class="var it40491" onMouseOver="hilite(40491)" onMouseOut="lolite()" href="../_variables/display.html">display</a> = false;
<a name="l2050"><span class="linenum">2050</span></a>          } else if (!<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>) {
<a name="l2051"><span class="linenum">2051</span></a>  <span class="comment">            // Don't show activities that don't have links!</span>
<a name="l2052"><span class="linenum">2052</span></a>              <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>-&gt;<a onClick="logVariable('display')" class="var it40491" onMouseOver="hilite(40491)" onMouseOut="lolite()" href="../_variables/display.html">display</a> = false;
<a name="l2053"><span class="linenum">2053</span></a>          } else if (self::<a class="function" onClick="logFunction('module_extends_navigation')" href="../_functions/module_extends_navigation.html" onMouseOver="funcPopup(event,'module_extends_navigation')">module_extends_navigation</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>)) {
<a name="l2054"><span class="linenum">2054</span></a>              <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>-&gt;<a onClick="logVariable('nodetype')" class="var it40491" onMouseOver="hilite(40491)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::NODETYPE_BRANCH;
<a name="l2055"><span class="linenum">2055</span></a>          }
<a name="l2056"><span class="linenum">2056</span></a>          return <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>;
<a name="l2057"><span class="linenum">2057</span></a>      }
<a name="l2058"><span class="linenum">2058</span></a>      <span class="comment">/**</span>
<a name="l2059"><span class="linenum">2059</span></a>  <span class="comment">     * Loads the navigation structure for the given activity into the activities node.</span>
<a name="l2060"><span class="linenum">2060</span></a>  <span class="comment">     *</span>
<a name="l2061"><span class="linenum">2061</span></a>  <span class="comment">     * This method utilises a callback within the modules lib.php file to load the</span>
<a name="l2062"><span class="linenum">2062</span></a>  <span class="comment">     * content specific to activity given.</span>
<a name="l2063"><span class="linenum">2063</span></a>  <span class="comment">     *</span>
<a name="l2064"><span class="linenum">2064</span></a>  <span class="comment">     * The callback is a method: {modulename}_extend_navigation()</span>
<a name="l2065"><span class="linenum">2065</span></a>  <span class="comment">     * Examples:</span>
<a name="l2066"><span class="linenum">2066</span></a>  <span class="comment">     *  * {@link forum_extend_navigation()}</span>
<a name="l2067"><span class="linenum">2067</span></a>  <span class="comment">     *  * {@link workshop_extend_navigation()}</span>
<a name="l2068"><span class="linenum">2068</span></a>  <span class="comment">     *</span>
<a name="l2069"><span class="linenum">2069</span></a>  <span class="comment">     * @param cm_info|stdClass $cm</span>
<a name="l2070"><span class="linenum">2070</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l2071"><span class="linenum">2071</span></a>  <span class="comment">     * @param navigation_node $activity</span>
<a name="l2072"><span class="linenum">2072</span></a>  <span class="comment">     * @return bool</span>
<a name="l2073"><span class="linenum">2073</span></a>  <span class="comment">     */</span>
<a name="l2074"><span class="linenum">2074</span></a>      protected function <a class="function" onClick="logFunction('load_activity')" href="../_functions/load_activity.html" onMouseOver="funcPopup(event,'load_activity')">load_activity</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, stdClass <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, navigation_node <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>) {
<a name="l2075"><span class="linenum">2075</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2076"><span class="linenum">2076</span></a>  
<a name="l2077"><span class="linenum">2077</span></a>  <span class="comment">        // make sure we have a $cm from get_fast_modinfo as this contains activity access details</span>
<a name="l2078"><span class="linenum">2078</span></a>          if (!(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> instanceof cm_info)) {
<a name="l2079"><span class="linenum">2079</span></a>              <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2080"><span class="linenum">2080</span></a>              <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_cm')" href="../_functions/get_cm.html" onMouseOver="funcPopup(event,'get_cm')">get_cm</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2081"><span class="linenum">2081</span></a>          }
<a name="l2082"><span class="linenum">2082</span></a>          <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('nodetype')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::NODETYPE_LEAF;
<a name="l2083"><span class="linenum">2083</span></a>          <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a class="function" onClick="logFunction('make_active')" href="../_functions/make_active.html" onMouseOver="funcPopup(event,'make_active')">make_active</a>();
<a name="l2084"><span class="linenum">2084</span></a>          <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'/mod/'.<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>.'/lib.php';
<a name="l2085"><span class="linenum">2085</span></a>          <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>.'_extend_navigation';
<a name="l2086"><span class="linenum">2086</span></a>  
<a name="l2087"><span class="linenum">2087</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>)) {
<a name="l2088"><span class="linenum">2088</span></a>              require_once(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>);
<a name="l2089"><span class="linenum">2089</span></a>              if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)) {
<a name="l2090"><span class="linenum">2090</span></a>                  <a class="var it37493" onMouseOver="hilite(37493)" onMouseOut="lolite()" onClick="logVariable('activtyrecord')" href="../_variables/activtyrecord.html">$activtyrecord</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>, array('id' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2091"><span class="linenum">2091</span></a>                  <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it37493" onMouseOver="hilite(37493)" onMouseOut="lolite()" onClick="logVariable('activtyrecord')" href="../_variables/activtyrecord.html">$activtyrecord</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l2092"><span class="linenum">2092</span></a>              }
<a name="l2093"><span class="linenum">2093</span></a>          }
<a name="l2094"><span class="linenum">2094</span></a>  
<a name="l2095"><span class="linenum">2095</span></a>  <span class="comment">        // Allow the active advanced grading method plugin to append module navigation</span>
<a name="l2096"><span class="linenum">2096</span></a>          <a class="var it37494" onMouseOver="hilite(37494)" onMouseOut="lolite()" onClick="logVariable('featuresfunc')" href="../_variables/featuresfunc.html">$featuresfunc</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>.'_supports';
<a name="l2097"><span class="linenum">2097</span></a>          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it37494" onMouseOver="hilite(37494)" onMouseOut="lolite()" onClick="logVariable('featuresfunc')" href="../_variables/featuresfunc.html">$featuresfunc</a>) &amp;&amp; <a class="var it37494" onMouseOver="hilite(37494)" onMouseOut="lolite()" onClick="logVariable('featuresfunc')" href="../_variables/featuresfunc.html">$featuresfunc</a>(<a class="constant" onClick="logConstant('FEATURE_ADVANCED_GRADING')" href="../_constants/FEATURE_ADVANCED_GRADING.html" onMouseOver="constPopup(event,'FEATURE_ADVANCED_GRADING')">FEATURE_ADVANCED_GRADING</a>)) {
<a name="l2098"><span class="linenum">2098</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../grade/grading/lib.php.html">/grade/grading/lib.php</a>');
<a name="l2099"><span class="linenum">2099</span></a>              <a class="var it10729" onMouseOver="hilite(10729)" onMouseOut="lolite()" onClick="logVariable('gradingman')" href="../_variables/gradingman.html">$gradingman</a> = <a class="function" onClick="logFunction('get_grading_manager')" href="../_functions/get_grading_manager.html" onMouseOver="funcPopup(event,'get_grading_manager')">get_grading_manager</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('context')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/context.html">context</a>,  'mod_'.<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>);
<a name="l2100"><span class="linenum">2100</span></a>              <a class="var it10729" onMouseOver="hilite(10729)" onMouseOut="lolite()" onClick="logVariable('gradingman')" href="../_variables/gradingman.html">$gradingman</a>-&gt;<a class="function" onClick="logFunction('extend_navigation')" href="../_functions/extend_navigation.html" onMouseOver="funcPopup(event,'extend_navigation')">extend_navigation</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>);
<a name="l2101"><span class="linenum">2101</span></a>          }
<a name="l2102"><span class="linenum">2102</span></a>  
<a name="l2103"><span class="linenum">2103</span></a>          return <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../_variables/activity.html">$activity</a>-&gt;<a class="function" onClick="logFunction('has_children')" href="../_functions/has_children.html" onMouseOver="funcPopup(event,'has_children')">has_children</a>();
<a name="l2104"><span class="linenum">2104</span></a>      }
<a name="l2105"><span class="linenum">2105</span></a>      <span class="comment">/**</span>
<a name="l2106"><span class="linenum">2106</span></a>  <span class="comment">     * Loads user specific information into the navigation in the appropriate place.</span>
<a name="l2107"><span class="linenum">2107</span></a>  <span class="comment">     *</span>
<a name="l2108"><span class="linenum">2108</span></a>  <span class="comment">     * If no user is provided the current user is assumed.</span>
<a name="l2109"><span class="linenum">2109</span></a>  <span class="comment">     *</span>
<a name="l2110"><span class="linenum">2110</span></a>  <span class="comment">     * @param stdClass $user</span>
<a name="l2111"><span class="linenum">2111</span></a>  <span class="comment">     * @param bool $forceforcontext probably force something to be loaded somewhere (ask SamH if not sure what this means)</span>
<a name="l2112"><span class="linenum">2112</span></a>  <span class="comment">     * @return bool</span>
<a name="l2113"><span class="linenum">2113</span></a>  <span class="comment">     */</span>
<a name="l2114"><span class="linenum">2114</span></a>      protected function <a class="function" onClick="logFunction('load_for_user')" href="../_functions/load_for_user.html" onMouseOver="funcPopup(event,'load_for_user')">load_for_user</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>=null, <a class="var it19744" onMouseOver="hilite(19744)" onMouseOut="lolite()" onClick="logVariable('forceforcontext')" href="../_variables/forceforcontext.html">$forceforcontext</a>=false) {
<a name="l2115"><span class="linenum">2115</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l2116"><span class="linenum">2116</span></a>  
<a name="l2117"><span class="linenum">2117</span></a>          if (<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> === null) {
<a name="l2118"><span class="linenum">2118</span></a>  <span class="comment">            // We can't require login here but if the user isn't logged in we don't</span>
<a name="l2119"><span class="linenum">2119</span></a>  <span class="comment">            // want to show anything</span>
<a name="l2120"><span class="linenum">2120</span></a>              if (!<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() || <a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {
<a name="l2121"><span class="linenum">2121</span></a>                  return false;
<a name="l2122"><span class="linenum">2122</span></a>              }
<a name="l2123"><span class="linenum">2123</span></a>              <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l2124"><span class="linenum">2124</span></a>          } else if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>)) {
<a name="l2125"><span class="linenum">2125</span></a>  <span class="comment">            // If the user is not an object then get them from the database</span>
<a name="l2126"><span class="linenum">2126</span></a>              <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l2127"><span class="linenum">2127</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT u.*, <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>
<a name="l2128"><span class="linenum">2128</span></a>                        FROM {user} u
<a name="l2129"><span class="linenum">2129</span></a>                        JOIN {context} ctx ON u.id = ctx.instanceid
<a name="l2130"><span class="linenum">2130</span></a>                       WHERE u.id = :userid AND
<a name="l2131"><span class="linenum">2131</span></a>                             ctx.contextlevel = :contextlevel&quot;;
<a name="l2132"><span class="linenum">2132</span></a>              <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array('userid' =&gt; (int)<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, 'contextlevel' =&gt; <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a>), <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2133"><span class="linenum">2133</span></a>              <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>);
<a name="l2134"><span class="linenum">2134</span></a>          }
<a name="l2135"><span class="linenum">2135</span></a>  
<a name="l2136"><span class="linenum">2136</span></a>          <a class="var it5232" onMouseOver="hilite(5232)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../_variables/iscurrentuser.html">$iscurrentuser</a> = (<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2137"><span class="linenum">2137</span></a>  
<a name="l2138"><span class="linenum">2138</span></a>          <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2139"><span class="linenum">2139</span></a>  
<a name="l2140"><span class="linenum">2140</span></a>  <span class="comment">        // Get the course set against the page, by default this will be the site</span>
<a name="l2141"><span class="linenum">2141</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course;
<a name="l2142"><span class="linenum">2142</span></a>          <a class="var it37495" onMouseOver="hilite(37495)" onMouseOut="lolite()" onClick="logVariable('baseargs')" href="../_variables/baseargs.html">$baseargs</a> = array('id'=&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2143"><span class="linenum">2143</span></a>          if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a> &amp;&amp; (!<a class="var it5232" onMouseOver="hilite(5232)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../_variables/iscurrentuser.html">$iscurrentuser</a> || <a class="var it19744" onMouseOver="hilite(19744)" onMouseOut="lolite()" onClick="logVariable('forceforcontext')" href="../_variables/forceforcontext.html">$forceforcontext</a>)) {
<a name="l2144"><span class="linenum">2144</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, false, self::COURSE_CURRENT);
<a name="l2145"><span class="linenum">2145</span></a>              <a class="var it37495" onMouseOver="hilite(37495)" onMouseOut="lolite()" onClick="logVariable('baseargs')" href="../_variables/baseargs.html">$baseargs</a>['course'] = <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2146"><span class="linenum">2146</span></a>              <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2147"><span class="linenum">2147</span></a>              <a class="var it37496" onMouseOver="hilite(37496)" onMouseOut="lolite()" onClick="logVariable('issitecourse')" href="../_variables/issitecourse.html">$issitecourse</a> = false;
<a name="l2148"><span class="linenum">2148</span></a>          } else {
<a name="l2149"><span class="linenum">2149</span></a>  <span class="comment">            // Load all categories and get the context for the system</span>
<a name="l2150"><span class="linenum">2150</span></a>              <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l2151"><span class="linenum">2151</span></a>              <a class="var it37496" onMouseOver="hilite(37496)" onMouseOut="lolite()" onClick="logVariable('issitecourse')" href="../_variables/issitecourse.html">$issitecourse</a> = true;
<a name="l2152"><span class="linenum">2152</span></a>          }
<a name="l2153"><span class="linenum">2153</span></a>  
<a name="l2154"><span class="linenum">2154</span></a>  <span class="comment">        // Create a node to add user information under.</span>
<a name="l2155"><span class="linenum">2155</span></a>          <a class="var it19376" onMouseOver="hilite(19376)" onMouseOut="lolite()" onClick="logVariable('usersnode')" href="../_variables/usersnode.html">$usersnode</a> = null;
<a name="l2156"><span class="linenum">2156</span></a>          if (!<a class="var it37496" onMouseOver="hilite(37496)" onMouseOut="lolite()" onClick="logVariable('issitecourse')" href="../_variables/issitecourse.html">$issitecourse</a>) {
<a name="l2157"><span class="linenum">2157</span></a>  <span class="comment">            // Not the current user so add it to the participants node for the current course.</span>
<a name="l2158"><span class="linenum">2158</span></a>              <a class="var it19376" onMouseOver="hilite(19376)" onMouseOut="lolite()" onClick="logVariable('usersnode')" href="../_variables/usersnode.html">$usersnode</a> = <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('participants', <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_CONTAINER);
<a name="l2159"><span class="linenum">2159</span></a>              <a class="var it37497" onMouseOver="hilite(37497)" onMouseOut="lolite()" onClick="logVariable('userviewurl')" href="../_variables/userviewurl.html">$userviewurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/view.php.html">/user/view.php</a>', <a class="var it37495" onMouseOver="hilite(37495)" onMouseOut="lolite()" onClick="logVariable('baseargs')" href="../_variables/baseargs.html">$baseargs</a>);
<a name="l2160"><span class="linenum">2160</span></a>          } else if (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2161"><span class="linenum">2161</span></a>  <span class="comment">            // This is the site so add a users node to the root branch.</span>
<a name="l2162"><span class="linenum">2162</span></a>              <a class="var it19376" onMouseOver="hilite(19376)" onMouseOut="lolite()" onClick="logVariable('usersnode')" href="../_variables/usersnode.html">$usersnode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['users'];
<a name="l2163"><span class="linenum">2163</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewparticipants', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l2164"><span class="linenum">2164</span></a>                  <a class="var it19376" onMouseOver="hilite(19376)" onMouseOut="lolite()" onClick="logVariable('usersnode')" href="../_variables/usersnode.html">$usersnode</a>-&gt;<a onClick="logVariable('action')" class="var it41088" onMouseOver="hilite(41088)" onMouseOut="lolite()" href="../_variables/action.html">action</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/index.php.html">/user/index.php</a>', array('id' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2165"><span class="linenum">2165</span></a>              }
<a name="l2166"><span class="linenum">2166</span></a>              <a class="var it37497" onMouseOver="hilite(37497)" onMouseOut="lolite()" onClick="logVariable('userviewurl')" href="../_variables/userviewurl.html">$userviewurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/profile.php.html">/user/profile.php</a>', <a class="var it37495" onMouseOver="hilite(37495)" onMouseOut="lolite()" onClick="logVariable('baseargs')" href="../_variables/baseargs.html">$baseargs</a>);
<a name="l2167"><span class="linenum">2167</span></a>          }
<a name="l2168"><span class="linenum">2168</span></a>          if (!<a class="var it19376" onMouseOver="hilite(19376)" onMouseOut="lolite()" onClick="logVariable('usersnode')" href="../_variables/usersnode.html">$usersnode</a>) {
<a name="l2169"><span class="linenum">2169</span></a>  <span class="comment">            // We should NEVER get here, if the course hasn't been populated</span>
<a name="l2170"><span class="linenum">2170</span></a>  <span class="comment">            // with a participants node then the navigaiton either wasn't generated</span>
<a name="l2171"><span class="linenum">2171</span></a>  <span class="comment">            // for it (you are missing a require_login or set_context call) or</span>
<a name="l2172"><span class="linenum">2172</span></a>  <span class="comment">            // you don't have access.... in the interests of no leaking informatin</span>
<a name="l2173"><span class="linenum">2173</span></a>  <span class="comment">            // we simply quit...</span>
<a name="l2174"><span class="linenum">2174</span></a>              return false;
<a name="l2175"><span class="linenum">2175</span></a>          }
<a name="l2176"><span class="linenum">2176</span></a>  <span class="comment">        // Add a branch for the current user.</span>
<a name="l2177"><span class="linenum">2177</span></a>          <a class="var it37498" onMouseOver="hilite(37498)" onMouseOut="lolite()" onClick="logVariable('canseefullname')" href="../_variables/canseefullname.html">$canseefullname</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l2178"><span class="linenum">2178</span></a>          <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a> = <a class="var it19376" onMouseOver="hilite(19376)" onMouseOut="lolite()" onClick="logVariable('usersnode')" href="../_variables/usersnode.html">$usersnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it37498" onMouseOver="hilite(37498)" onMouseOut="lolite()" onClick="logVariable('canseefullname')" href="../_variables/canseefullname.html">$canseefullname</a>), <a class="var it37497" onMouseOver="hilite(37497)" onMouseOut="lolite()" onClick="logVariable('userviewurl')" href="../_variables/userviewurl.html">$userviewurl</a>, self::TYPE_USER, null, 'user' . <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2179"><span class="linenum">2179</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;contextlevel == <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a> &amp;&amp; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;instanceid) {
<a name="l2180"><span class="linenum">2180</span></a>              <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>-&gt;<a class="function" onClick="logFunction('make_active')" href="../_functions/make_active.html" onMouseOver="funcPopup(event,'make_active')">make_active</a>();
<a name="l2181"><span class="linenum">2181</span></a>          }
<a name="l2182"><span class="linenum">2182</span></a>  
<a name="l2183"><span class="linenum">2183</span></a>  <span class="comment">        // Add user information to the participants or user node.</span>
<a name="l2184"><span class="linenum">2184</span></a>          if (<a class="var it37496" onMouseOver="hilite(37496)" onMouseOut="lolite()" onClick="logVariable('issitecourse')" href="../_variables/issitecourse.html">$issitecourse</a>) {
<a name="l2185"><span class="linenum">2185</span></a>  
<a name="l2186"><span class="linenum">2186</span></a>  <span class="comment">            // If the user is the current user or has permission to view the details of the requested</span>
<a name="l2187"><span class="linenum">2187</span></a>  <span class="comment">            // user than add a view profile link.</span>
<a name="l2188"><span class="linenum">2188</span></a>              if (<a class="var it5232" onMouseOver="hilite(5232)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../_variables/iscurrentuser.html">$iscurrentuser</a> || <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:viewdetails', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>) ||
<a name="l2189"><span class="linenum">2189</span></a>                      <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:viewdetails', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>)) {
<a name="l2190"><span class="linenum">2190</span></a>                  if (<a class="var it37496" onMouseOver="hilite(37496)" onMouseOut="lolite()" onClick="logVariable('issitecourse')" href="../_variables/issitecourse.html">$issitecourse</a> || (<a class="var it5232" onMouseOver="hilite(5232)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../_variables/iscurrentuser.html">$iscurrentuser</a> &amp;&amp; !<a class="var it19744" onMouseOver="hilite(19744)" onMouseOut="lolite()" onClick="logVariable('forceforcontext')" href="../_variables/forceforcontext.html">$forceforcontext</a>)) {
<a name="l2191"><span class="linenum">2191</span></a>                      <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('viewprofile'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/profile.php.html">/user/profile.php</a>', <a class="var it37495" onMouseOver="hilite(37495)" onMouseOut="lolite()" onClick="logVariable('baseargs')" href="../_variables/baseargs.html">$baseargs</a>));
<a name="l2192"><span class="linenum">2192</span></a>                  } else {
<a name="l2193"><span class="linenum">2193</span></a>                      <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('viewprofile'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/view.php.html">/user/view.php</a>', <a class="var it37495" onMouseOver="hilite(37495)" onMouseOut="lolite()" onClick="logVariable('baseargs')" href="../_variables/baseargs.html">$baseargs</a>));
<a name="l2194"><span class="linenum">2194</span></a>                  }
<a name="l2195"><span class="linenum">2195</span></a>              }
<a name="l2196"><span class="linenum">2196</span></a>  
<a name="l2197"><span class="linenum">2197</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navadduserpostslinks')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navadduserpostslinks.html">navadduserpostslinks</a>)) {
<a name="l2198"><span class="linenum">2198</span></a>  <span class="comment">                // Add nodes for forum posts and discussions if the user can view either or both</span>
<a name="l2199"><span class="linenum">2199</span></a>  <span class="comment">                // There are no capability checks here as the content of the page is based</span>
<a name="l2200"><span class="linenum">2200</span></a>  <span class="comment">                // purely on the forums the current user has access too.</span>
<a name="l2201"><span class="linenum">2201</span></a>                  <a class="var it37500" onMouseOver="hilite(37500)" onMouseOut="lolite()" onClick="logVariable('forumtab')" href="../_variables/forumtab.html">$forumtab</a> = <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('forumposts', 'forum'));
<a name="l2202"><span class="linenum">2202</span></a>                  <a class="var it37500" onMouseOver="hilite(37500)" onMouseOut="lolite()" onClick="logVariable('forumtab')" href="../_variables/forumtab.html">$forumtab</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('posts', 'forum'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../mod/forum/user.php.html">/mod/forum/user.php</a>', <a class="var it37495" onMouseOver="hilite(37495)" onMouseOut="lolite()" onClick="logVariable('baseargs')" href="../_variables/baseargs.html">$baseargs</a>));
<a name="l2203"><span class="linenum">2203</span></a>                  <a class="var it37500" onMouseOver="hilite(37500)" onMouseOut="lolite()" onClick="logVariable('forumtab')" href="../_variables/forumtab.html">$forumtab</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('discussions', 'forum'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../mod/forum/user.php.html">/mod/forum/user.php</a>',
<a name="l2204"><span class="linenum">2204</span></a>                          <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it37495" onMouseOver="hilite(37495)" onMouseOut="lolite()" onClick="logVariable('baseargs')" href="../_variables/baseargs.html">$baseargs</a>, array('mode' =&gt; 'discussions'))));
<a name="l2205"><span class="linenum">2205</span></a>              }
<a name="l2206"><span class="linenum">2206</span></a>  
<a name="l2207"><span class="linenum">2207</span></a>  <span class="comment">            // Add blog nodes.</span>
<a name="l2208"><span class="linenum">2208</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableblogs')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enableblogs.html">enableblogs</a>)) {
<a name="l2209"><span class="linenum">2209</span></a>                  if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;<a class="function" onClick="logFunction('cached')" href="../_functions/cached.html" onMouseOver="funcPopup(event,'cached')">cached</a>('userblogoptions'.<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l2210"><span class="linenum">2210</span></a>                      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../blog/lib.php.html">/blog/lib.php</a>');
<a name="l2211"><span class="linenum">2211</span></a>  <span class="comment">                    // Get all options for the user.</span>
<a name="l2212"><span class="linenum">2212</span></a>                      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = <a class="function" onClick="logFunction('blog_get_options_for_user')" href="../_functions/blog_get_options_for_user.html" onMouseOver="funcPopup(event,'blog_get_options_for_user')">blog_get_options_for_user</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>);
<a name="l2213"><span class="linenum">2213</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('userblogoptions'.<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l2214"><span class="linenum">2214</span></a>                  } else {
<a name="l2215"><span class="linenum">2215</span></a>                      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;{'userblogoptions'.<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>};
<a name="l2216"><span class="linenum">2216</span></a>                  }
<a name="l2217"><span class="linenum">2217</span></a>  
<a name="l2218"><span class="linenum">2218</span></a>                  if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>) &gt; 0) {
<a name="l2219"><span class="linenum">2219</span></a>                      <a class="var it4270" onMouseOver="hilite(4270)" onMouseOut="lolite()" onClick="logVariable('blogs')" href="../_variables/blogs.html">$blogs</a> = <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('blogs', 'blog'), null, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_CONTAINER);
<a name="l2220"><span class="linenum">2220</span></a>                      foreach (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> as <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> =&gt; <a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('option')" href="../_variables/option.html">$option</a>) {
<a name="l2221"><span class="linenum">2221</span></a>                          if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == &quot;rss&quot;) {
<a name="l2222"><span class="linenum">2222</span></a>                              <a class="var it4270" onMouseOver="hilite(4270)" onMouseOut="lolite()" onClick="logVariable('blogs')" href="../_variables/blogs.html">$blogs</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('option')" href="../_variables/option.html">$option</a>['string'], <a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('option')" href="../_variables/option.html">$option</a>['link'], <a class="class" onClick="logClass('settings_navigation')" href="../_classes/settings_navigation.html" onMouseOver="classPopup(event,'settings_navigation')">settings_navigation</a>::TYPE_SETTING, null, null,
<a name="l2223"><span class="linenum">2223</span></a>                                      <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/rss', ''));
<a name="l2224"><span class="linenum">2224</span></a>                          } else {
<a name="l2225"><span class="linenum">2225</span></a>                              <a class="var it4270" onMouseOver="hilite(4270)" onMouseOut="lolite()" onClick="logVariable('blogs')" href="../_variables/blogs.html">$blogs</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('option')" href="../_variables/option.html">$option</a>['string'], <a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('option')" href="../_variables/option.html">$option</a>['link']);
<a name="l2226"><span class="linenum">2226</span></a>                          }
<a name="l2227"><span class="linenum">2227</span></a>                      }
<a name="l2228"><span class="linenum">2228</span></a>                  }
<a name="l2229"><span class="linenum">2229</span></a>              }
<a name="l2230"><span class="linenum">2230</span></a>  
<a name="l2231"><span class="linenum">2231</span></a>  <span class="comment">            // Add the messages link.</span>
<a name="l2232"><span class="linenum">2232</span></a>  <span class="comment">            // It is context based so can appear in the user's profile and in course participants information.</span>
<a name="l2233"><span class="linenum">2233</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messaging')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/messaging.html">messaging</a>)) {
<a name="l2234"><span class="linenum">2234</span></a>                  <a class="var it37501" onMouseOver="hilite(37501)" onMouseOut="lolite()" onClick="logVariable('messageargs')" href="../_variables/messageargs.html">$messageargs</a> = array('user1' =&gt; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2235"><span class="linenum">2235</span></a>                  if (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2236"><span class="linenum">2236</span></a>                      <a class="var it37501" onMouseOver="hilite(37501)" onMouseOut="lolite()" onClick="logVariable('messageargs')" href="../_variables/messageargs.html">$messageargs</a>['user2'] = <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2237"><span class="linenum">2237</span></a>                  }
<a name="l2238"><span class="linenum">2238</span></a>                  if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2239"><span class="linenum">2239</span></a>                      <a class="var it37501" onMouseOver="hilite(37501)" onMouseOut="lolite()" onClick="logVariable('messageargs')" href="../_variables/messageargs.html">$messageargs</a>['viewing'] = <a class="constant" onClick="logConstant('MESSAGE_VIEW_COURSE')" href="../_constants/MESSAGE_VIEW_COURSE.html" onMouseOver="constPopup(event,'MESSAGE_VIEW_COURSE')">MESSAGE_VIEW_COURSE</a>. <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2240"><span class="linenum">2240</span></a>                  }
<a name="l2241"><span class="linenum">2241</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../message/index.php.html">/message/index.php</a>', <a class="var it37501" onMouseOver="hilite(37501)" onMouseOut="lolite()" onClick="logVariable('messageargs')" href="../_variables/messageargs.html">$messageargs</a>);
<a name="l2242"><span class="linenum">2242</span></a>                  <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messages', 'message'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'messages');
<a name="l2243"><span class="linenum">2243</span></a>              }
<a name="l2244"><span class="linenum">2244</span></a>  
<a name="l2245"><span class="linenum">2245</span></a>  <span class="comment">            // Add the &quot;My private files&quot; link.</span>
<a name="l2246"><span class="linenum">2246</span></a>  <span class="comment">            // This link doesn't have a unique display for course context so only display it under the user's profile.</span>
<a name="l2247"><span class="linenum">2247</span></a>              if (<a class="var it37496" onMouseOver="hilite(37496)" onMouseOut="lolite()" onClick="logVariable('issitecourse')" href="../_variables/issitecourse.html">$issitecourse</a> &amp;&amp; <a class="var it5232" onMouseOver="hilite(5232)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../_variables/iscurrentuser.html">$iscurrentuser</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:manageownfiles', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>)) {
<a name="l2248"><span class="linenum">2248</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/files.php.html">/user/files.php</a>');
<a name="l2249"><span class="linenum">2249</span></a>                  <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('privatefiles'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l2250"><span class="linenum">2250</span></a>              }
<a name="l2251"><span class="linenum">2251</span></a>  
<a name="l2252"><span class="linenum">2252</span></a>  <span class="comment">            // Add a node to view the users notes if permitted.</span>
<a name="l2253"><span class="linenum">2253</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablenotes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enablenotes.html">enablenotes</a>) &amp;&amp;
<a name="l2254"><span class="linenum">2254</span></a>                      <a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/notes:manage', 'moodle/notes:view'), <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l2255"><span class="linenum">2255</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../notes/index.php.html">/notes/index.php</a>', array('user' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2256"><span class="linenum">2256</span></a>                  if (<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l2257"><span class="linenum">2257</span></a>                      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('course', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>);
<a name="l2258"><span class="linenum">2258</span></a>                  }
<a name="l2259"><span class="linenum">2259</span></a>                  <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notes', 'notes'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l2260"><span class="linenum">2260</span></a>              }
<a name="l2261"><span class="linenum">2261</span></a>  
<a name="l2262"><span class="linenum">2262</span></a>  <span class="comment">            // Show the grades node.</span>
<a name="l2263"><span class="linenum">2263</span></a>              if ((<a class="var it37496" onMouseOver="hilite(37496)" onMouseOut="lolite()" onClick="logVariable('issitecourse')" href="../_variables/issitecourse.html">$issitecourse</a> &amp;&amp; <a class="var it5232" onMouseOver="hilite(5232)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../_variables/iscurrentuser.html">$iscurrentuser</a>) || <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:viewdetails', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>)) {
<a name="l2264"><span class="linenum">2264</span></a>                  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../user/lib.php.html">/user/lib.php</a>');
<a name="l2265"><span class="linenum">2265</span></a>  <span class="comment">                // Set the grades node to link to the &quot;Grades&quot; page.</span>
<a name="l2266"><span class="linenum">2266</span></a>                  if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l2267"><span class="linenum">2267</span></a>                      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('user_mygrades_url')" href="../_functions/user_mygrades_url.html" onMouseOver="funcPopup(event,'user_mygrades_url')">user_mygrades_url</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2268"><span class="linenum">2268</span></a>                  } else { // Otherwise we are in a course and should redirect to the user grade report (Activity report version).
<a name="l2269"><span class="linenum">2269</span></a>                      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/user.php.html">/course/user.php</a>', array('mode' =&gt; 'grade', 'id' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'user' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2270"><span class="linenum">2270</span></a>                  }
<a name="l2271"><span class="linenum">2271</span></a>                  if (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2272"><span class="linenum">2272</span></a>                      <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grades', 'grades'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'usergrades');
<a name="l2273"><span class="linenum">2273</span></a>                  } else {
<a name="l2274"><span class="linenum">2274</span></a>                      <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grades', 'grades'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l2275"><span class="linenum">2275</span></a>                  }
<a name="l2276"><span class="linenum">2276</span></a>              }
<a name="l2277"><span class="linenum">2277</span></a>  
<a name="l2278"><span class="linenum">2278</span></a>  <span class="comment">            // If the user is the current user add the repositories for the current user.</span>
<a name="l2279"><span class="linenum">2279</span></a>              <a class="var it11630" onMouseOver="hilite(11630)" onMouseOut="lolite()" onClick="logVariable('hiddenfields')" href="../_variables/hiddenfields.html">$hiddenfields</a> = <a class="phpfunction" onClick="logFunction('array_flip')" href="../_functions/array_flip.html" onMouseOver="phpfuncPopup(event,'array_flip')">array_flip</a>(<a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('hiddenuserfields')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/hiddenuserfields.html">hiddenuserfields</a>));
<a name="l2280"><span class="linenum">2280</span></a>              if (!<a class="var it5232" onMouseOver="hilite(5232)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../_variables/iscurrentuser.html">$iscurrentuser</a> &amp;&amp;
<a name="l2281"><span class="linenum">2281</span></a>                      <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a> &amp;&amp;
<a name="l2282"><span class="linenum">2282</span></a>                      <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:viewdetails', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>) &amp;&amp;
<a name="l2283"><span class="linenum">2283</span></a>                      (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('mycourses', <a class="var it11630" onMouseOver="hilite(11630)" onMouseOut="lolite()" onClick="logVariable('hiddenfields')" href="../_variables/hiddenfields.html">$hiddenfields</a>) || <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:viewhiddendetails', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>))) {
<a name="l2284"><span class="linenum">2284</span></a>  
<a name="l2285"><span class="linenum">2285</span></a>  <span class="comment">                // Add view grade report is permitted.</span>
<a name="l2286"><span class="linenum">2286</span></a>                  <a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('gradereport');
<a name="l2287"><span class="linenum">2287</span></a>                  <a class="phpfunction" onClick="logFunction('arsort')" href="../_functions/arsort.html" onMouseOver="phpfuncPopup(event,'arsort')">arsort</a>(<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a>); <span class="comment">// User is last, we want to test it first.</span>
<a name="l2288"><span class="linenum">2288</span></a>  
<a name="l2289"><span class="linenum">2289</span></a>                  <a class="var it37502" onMouseOver="hilite(37502)" onMouseOut="lolite()" onClick="logVariable('userscourses')" href="../_variables/userscourses.html">$userscourses</a> = <a class="function" onClick="logFunction('enrol_get_users_courses')" href="../_functions/enrol_get_users_courses.html" onMouseOver="funcPopup(event,'enrol_get_users_courses')">enrol_get_users_courses</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2290"><span class="linenum">2290</span></a>                  <a class="var it37503" onMouseOver="hilite(37503)" onMouseOut="lolite()" onClick="logVariable('userscoursesnode')" href="../_variables/userscoursesnode.html">$userscoursesnode</a> = <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courses'));
<a name="l2291"><span class="linenum">2291</span></a>  
<a name="l2292"><span class="linenum">2292</span></a>                  <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a> = 0;
<a name="l2293"><span class="linenum">2293</span></a>                  foreach (<a class="var it37502" onMouseOver="hilite(37502)" onMouseOut="lolite()" onClick="logVariable('userscourses')" href="../_variables/userscourses.html">$userscourses</a> as <a class="var it37504" onMouseOver="hilite(37504)" onMouseOut="lolite()" onClick="logVariable('usercourse')" href="../_variables/usercourse.html">$usercourse</a>) {
<a name="l2294"><span class="linenum">2294</span></a>                      if (<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a> === (int)<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navcourselimit')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navcourselimit.html">navcourselimit</a>) {
<a name="l2295"><span class="linenum">2295</span></a>                          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/profile.php.html">/user/profile.php</a>', array('id' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'showallcourses' =&gt; 1));
<a name="l2296"><span class="linenum">2296</span></a>                          <a class="var it37503" onMouseOver="hilite(37503)" onMouseOut="lolite()" onClick="logVariable('userscoursesnode')" href="../_variables/userscoursesnode.html">$userscoursesnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('showallcourses'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l2297"><span class="linenum">2297</span></a>                          break;
<a name="l2298"><span class="linenum">2298</span></a>                      }
<a name="l2299"><span class="linenum">2299</span></a>                      <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a>++;
<a name="l2300"><span class="linenum">2300</span></a>                      <a class="var it37505" onMouseOver="hilite(37505)" onMouseOut="lolite()" onClick="logVariable('usercoursecontext')" href="../_variables/usercoursecontext.html">$usercoursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it37504" onMouseOver="hilite(37504)" onMouseOut="lolite()" onClick="logVariable('usercourse')" href="../_variables/usercourse.html">$usercourse</a>-&gt;<a onClick="logVariable('id')" class="var it41089" onMouseOver="hilite(41089)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2301"><span class="linenum">2301</span></a>                      <a class="var it37506" onMouseOver="hilite(37506)" onMouseOut="lolite()" onClick="logVariable('usercourseshortname')" href="../_variables/usercourseshortname.html">$usercourseshortname</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it37504" onMouseOver="hilite(37504)" onMouseOut="lolite()" onClick="logVariable('usercourse')" href="../_variables/usercourse.html">$usercourse</a>-&gt;<a onClick="logVariable('shortname')" class="var it41089" onMouseOver="hilite(41089)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>, true, array('context' =&gt; <a class="var it37505" onMouseOver="hilite(37505)" onMouseOut="lolite()" onClick="logVariable('usercoursecontext')" href="../_variables/usercoursecontext.html">$usercoursecontext</a>));
<a name="l2302"><span class="linenum">2302</span></a>                      <a class="var it37507" onMouseOver="hilite(37507)" onMouseOut="lolite()" onClick="logVariable('usercoursenode')" href="../_variables/usercoursenode.html">$usercoursenode</a> = <a class="var it37503" onMouseOver="hilite(37503)" onMouseOut="lolite()" onClick="logVariable('userscoursesnode')" href="../_variables/userscoursesnode.html">$userscoursesnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it37506" onMouseOver="hilite(37506)" onMouseOut="lolite()" onClick="logVariable('usercourseshortname')" href="../_variables/usercourseshortname.html">$usercourseshortname</a>, <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/view.php.html">/user/view.php</a>',
<a name="l2303"><span class="linenum">2303</span></a>                              array('id' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'course' =&gt; <a class="var it37504" onMouseOver="hilite(37504)" onMouseOut="lolite()" onClick="logVariable('usercourse')" href="../_variables/usercourse.html">$usercourse</a>-&gt;<a onClick="logVariable('id')" class="var it41089" onMouseOver="hilite(41089)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)), self::TYPE_CONTAINER);
<a name="l2304"><span class="linenum">2304</span></a>  
<a name="l2305"><span class="linenum">2305</span></a>                      <a class="var it37508" onMouseOver="hilite(37508)" onMouseOut="lolite()" onClick="logVariable('gradeavailable')" href="../_variables/gradeavailable.html">$gradeavailable</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:viewall', <a class="var it37505" onMouseOver="hilite(37505)" onMouseOut="lolite()" onClick="logVariable('usercoursecontext')" href="../_variables/usercoursecontext.html">$usercoursecontext</a>);
<a name="l2306"><span class="linenum">2306</span></a>                      if (!<a class="var it37508" onMouseOver="hilite(37508)" onMouseOut="lolite()" onClick="logVariable('gradeavailable')" href="../_variables/gradeavailable.html">$gradeavailable</a> &amp;&amp; !empty(<a class="var it37504" onMouseOver="hilite(37504)" onMouseOut="lolite()" onClick="logVariable('usercourse')" href="../_variables/usercourse.html">$usercourse</a>-&gt;<a onClick="logVariable('showgrades')" class="var it41089" onMouseOver="hilite(41089)" onMouseOut="lolite()" href="../_variables/showgrades.html">showgrades</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a>) &amp;&amp; !empty(<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a>)) {
<a name="l2307"><span class="linenum">2307</span></a>                          foreach (<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a> as <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> =&gt; <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('plugindir')" href="../_variables/plugindir.html">$plugindir</a>) {
<a name="l2308"><span class="linenum">2308</span></a>                              if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('gradereport/'.<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>.':view', <a class="var it37505" onMouseOver="hilite(37505)" onMouseOut="lolite()" onClick="logVariable('usercoursecontext')" href="../_variables/usercoursecontext.html">$usercoursecontext</a>)) {
<a name="l2309"><span class="linenum">2309</span></a>  <span class="comment">                                // Stop when the first visible plugin is found.</span>
<a name="l2310"><span class="linenum">2310</span></a>                                  <a class="var it37508" onMouseOver="hilite(37508)" onMouseOut="lolite()" onClick="logVariable('gradeavailable')" href="../_variables/gradeavailable.html">$gradeavailable</a> = true;
<a name="l2311"><span class="linenum">2311</span></a>                                  break;
<a name="l2312"><span class="linenum">2312</span></a>                              }
<a name="l2313"><span class="linenum">2313</span></a>                          }
<a name="l2314"><span class="linenum">2314</span></a>                      }
<a name="l2315"><span class="linenum">2315</span></a>  
<a name="l2316"><span class="linenum">2316</span></a>                      if (<a class="var it37508" onMouseOver="hilite(37508)" onMouseOut="lolite()" onClick="logVariable('gradeavailable')" href="../_variables/gradeavailable.html">$gradeavailable</a>) {
<a name="l2317"><span class="linenum">2317</span></a>                          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../grade/report/index.php.html">/grade/report/index.php</a>', array('id' =&gt; <a class="var it37504" onMouseOver="hilite(37504)" onMouseOut="lolite()" onClick="logVariable('usercourse')" href="../_variables/usercourse.html">$usercourse</a>-&gt;<a onClick="logVariable('id')" class="var it41089" onMouseOver="hilite(41089)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2318"><span class="linenum">2318</span></a>                          <a class="var it37507" onMouseOver="hilite(37507)" onMouseOut="lolite()" onClick="logVariable('usercoursenode')" href="../_variables/usercoursenode.html">$usercoursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grades'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null,
<a name="l2319"><span class="linenum">2319</span></a>                                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/grades', ''));
<a name="l2320"><span class="linenum">2320</span></a>                      }
<a name="l2321"><span class="linenum">2321</span></a>  
<a name="l2322"><span class="linenum">2322</span></a>  <span class="comment">                    // Add a node to view the users notes if permitted.</span>
<a name="l2323"><span class="linenum">2323</span></a>                      if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablenotes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enablenotes.html">enablenotes</a>) &amp;&amp;
<a name="l2324"><span class="linenum">2324</span></a>                              <a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/notes:manage', 'moodle/notes:view'), <a class="var it37505" onMouseOver="hilite(37505)" onMouseOut="lolite()" onClick="logVariable('usercoursecontext')" href="../_variables/usercoursecontext.html">$usercoursecontext</a>)) {
<a name="l2325"><span class="linenum">2325</span></a>                          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../notes/index.php.html">/notes/index.php</a>', array('user' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'course' =&gt; <a class="var it37504" onMouseOver="hilite(37504)" onMouseOut="lolite()" onClick="logVariable('usercourse')" href="../_variables/usercourse.html">$usercourse</a>-&gt;<a onClick="logVariable('id')" class="var it41089" onMouseOver="hilite(41089)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2326"><span class="linenum">2326</span></a>                          <a class="var it37507" onMouseOver="hilite(37507)" onMouseOut="lolite()" onClick="logVariable('usercoursenode')" href="../_variables/usercoursenode.html">$usercoursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notes', 'notes'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l2327"><span class="linenum">2327</span></a>                      }
<a name="l2328"><span class="linenum">2328</span></a>  
<a name="l2329"><span class="linenum">2329</span></a>                      if (<a class="function" onClick="logFunction('can_access_course')" href="../_functions/can_access_course.html" onMouseOver="funcPopup(event,'can_access_course')">can_access_course</a>(<a class="var it37504" onMouseOver="hilite(37504)" onMouseOut="lolite()" onClick="logVariable('usercourse')" href="../_variables/usercourse.html">$usercourse</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, '', true)) {
<a name="l2330"><span class="linenum">2330</span></a>                          <a class="var it37507" onMouseOver="hilite(37507)" onMouseOut="lolite()" onClick="logVariable('usercoursenode')" href="../_variables/usercoursenode.html">$usercoursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('entercourse'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/view.php.html">/course/view.php</a>',
<a name="l2331"><span class="linenum">2331</span></a>                                  array('id' =&gt; <a class="var it37504" onMouseOver="hilite(37504)" onMouseOut="lolite()" onClick="logVariable('usercourse')" href="../_variables/usercourse.html">$usercourse</a>-&gt;<a onClick="logVariable('id')" class="var it41089" onMouseOver="hilite(41089)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)), self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/course', ''));
<a name="l2332"><span class="linenum">2332</span></a>                      }
<a name="l2333"><span class="linenum">2333</span></a>  
<a name="l2334"><span class="linenum">2334</span></a>                      <a class="var it37509" onMouseOver="hilite(37509)" onMouseOut="lolite()" onClick="logVariable('reporttab')" href="../_variables/reporttab.html">$reporttab</a> = <a class="var it37507" onMouseOver="hilite(37507)" onMouseOut="lolite()" onClick="logVariable('usercoursenode')" href="../_variables/usercoursenode.html">$usercoursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('activityreports'));
<a name="l2335"><span class="linenum">2335</span></a>  
<a name="l2336"><span class="linenum">2336</span></a>                      <a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a> = <a class="function" onClick="logFunction('get_plugin_list_with_function')" href="../_functions/get_plugin_list_with_function.html" onMouseOver="funcPopup(event,'get_plugin_list_with_function')">get_plugin_list_with_function</a>('report', 'extend_navigation_user', 'lib.php');
<a name="l2337"><span class="linenum">2337</span></a>                      foreach (<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a> as <a class="var it37510" onMouseOver="hilite(37510)" onMouseOut="lolite()" onClick="logVariable('reportfunction')" href="../_variables/reportfunction.html">$reportfunction</a>) {
<a name="l2338"><span class="linenum">2338</span></a>                          <a class="var it37510" onMouseOver="hilite(37510)" onMouseOut="lolite()" onClick="logVariable('reportfunction')" href="../_variables/reportfunction.html">$reportfunction</a>(<a class="var it37509" onMouseOver="hilite(37509)" onMouseOut="lolite()" onClick="logVariable('reporttab')" href="../_variables/reporttab.html">$reporttab</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it37504" onMouseOver="hilite(37504)" onMouseOut="lolite()" onClick="logVariable('usercourse')" href="../_variables/usercourse.html">$usercourse</a>);
<a name="l2339"><span class="linenum">2339</span></a>                      }
<a name="l2340"><span class="linenum">2340</span></a>  
<a name="l2341"><span class="linenum">2341</span></a>                      <a class="var it37509" onMouseOver="hilite(37509)" onMouseOut="lolite()" onClick="logVariable('reporttab')" href="../_variables/reporttab.html">$reporttab</a>-&gt;<a class="function" onClick="logFunction('trim_if_empty')" href="../_functions/trim_if_empty.html" onMouseOver="funcPopup(event,'trim_if_empty')">trim_if_empty</a>();
<a name="l2342"><span class="linenum">2342</span></a>                  }
<a name="l2343"><span class="linenum">2343</span></a>              }
<a name="l2344"><span class="linenum">2344</span></a>  
<a name="l2345"><span class="linenum">2345</span></a>          }
<a name="l2346"><span class="linenum">2346</span></a>          return true;
<a name="l2347"><span class="linenum">2347</span></a>      }
<a name="l2348"><span class="linenum">2348</span></a>  
<a name="l2349"><span class="linenum">2349</span></a>      <span class="comment">/**</span>
<a name="l2350"><span class="linenum">2350</span></a>  <span class="comment">     * This method simply checks to see if a given module can extend the navigation.</span>
<a name="l2351"><span class="linenum">2351</span></a>  <span class="comment">     *</span>
<a name="l2352"><span class="linenum">2352</span></a>  <span class="comment">     * @todo (MDL-25290) A shared caching solution should be used to save details on what extends navigation.</span>
<a name="l2353"><span class="linenum">2353</span></a>  <span class="comment">     *</span>
<a name="l2354"><span class="linenum">2354</span></a>  <span class="comment">     * @param string $modname</span>
<a name="l2355"><span class="linenum">2355</span></a>  <span class="comment">     * @return bool</span>
<a name="l2356"><span class="linenum">2356</span></a>  <span class="comment">     */</span>
<a name="l2357"><span class="linenum">2357</span></a>      public static function <a class="function" onClick="logFunction('module_extends_navigation')" href="../_functions/module_extends_navigation.html" onMouseOver="funcPopup(event,'module_extends_navigation')">module_extends_navigation</a>(<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>) {
<a name="l2358"><span class="linenum">2358</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2359"><span class="linenum">2359</span></a>          static <a class="var it37511" onMouseOver="hilite(37511)" onMouseOut="lolite()" onClick="logVariable('extendingmodules')" href="../_variables/extendingmodules.html">$extendingmodules</a> = array();
<a name="l2360"><span class="linenum">2360</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>, <a class="var it37511" onMouseOver="hilite(37511)" onMouseOut="lolite()" onClick="logVariable('extendingmodules')" href="../_variables/extendingmodules.html">$extendingmodules</a>)) {
<a name="l2361"><span class="linenum">2361</span></a>              <a class="var it37511" onMouseOver="hilite(37511)" onMouseOut="lolite()" onClick="logVariable('extendingmodules')" href="../_variables/extendingmodules.html">$extendingmodules</a>[<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>] = false;
<a name="l2362"><span class="linenum">2362</span></a>              <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'/mod/'.<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>.'/lib.php';
<a name="l2363"><span class="linenum">2363</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>)) {
<a name="l2364"><span class="linenum">2364</span></a>                  <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>.'_extend_navigation';
<a name="l2365"><span class="linenum">2365</span></a>                  require_once(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>);
<a name="l2366"><span class="linenum">2366</span></a>                  <a class="var it37511" onMouseOver="hilite(37511)" onMouseOut="lolite()" onClick="logVariable('extendingmodules')" href="../_variables/extendingmodules.html">$extendingmodules</a>[<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>] = (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>));
<a name="l2367"><span class="linenum">2367</span></a>              }
<a name="l2368"><span class="linenum">2368</span></a>          }
<a name="l2369"><span class="linenum">2369</span></a>          return <a class="var it37511" onMouseOver="hilite(37511)" onMouseOut="lolite()" onClick="logVariable('extendingmodules')" href="../_variables/extendingmodules.html">$extendingmodules</a>[<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../_variables/modname.html">$modname</a>];
<a name="l2370"><span class="linenum">2370</span></a>      }
<a name="l2371"><span class="linenum">2371</span></a>      <span class="comment">/**</span>
<a name="l2372"><span class="linenum">2372</span></a>  <span class="comment">     * Extends the navigation for the given user.</span>
<a name="l2373"><span class="linenum">2373</span></a>  <span class="comment">     *</span>
<a name="l2374"><span class="linenum">2374</span></a>  <span class="comment">     * @param stdClass $user A user from the database</span>
<a name="l2375"><span class="linenum">2375</span></a>  <span class="comment">     */</span>
<a name="l2376"><span class="linenum">2376</span></a>      public function <a class="function" onClick="logFunction('extend_for_user')" href="../_functions/extend_for_user.html" onMouseOver="funcPopup(event,'extend_for_user')">extend_for_user</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) {
<a name="l2377"><span class="linenum">2377</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extendforuser')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/extendforuser.html">extendforuser</a>[] = <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>;
<a name="l2378"><span class="linenum">2378</span></a>      }
<a name="l2379"><span class="linenum">2379</span></a>  
<a name="l2380"><span class="linenum">2380</span></a>      <span class="comment">/**</span>
<a name="l2381"><span class="linenum">2381</span></a>  <span class="comment">     * Returns all of the users the navigation is being extended for</span>
<a name="l2382"><span class="linenum">2382</span></a>  <span class="comment">     *</span>
<a name="l2383"><span class="linenum">2383</span></a>  <span class="comment">     * @return array An array of extending users.</span>
<a name="l2384"><span class="linenum">2384</span></a>  <span class="comment">     */</span>
<a name="l2385"><span class="linenum">2385</span></a>      public function <a class="function" onClick="logFunction('get_extending_users')" href="../_functions/get_extending_users.html" onMouseOver="funcPopup(event,'get_extending_users')">get_extending_users</a>() {
<a name="l2386"><span class="linenum">2386</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extendforuser')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/extendforuser.html">extendforuser</a>;
<a name="l2387"><span class="linenum">2387</span></a>      }
<a name="l2388"><span class="linenum">2388</span></a>      <span class="comment">/**</span>
<a name="l2389"><span class="linenum">2389</span></a>  <span class="comment">     * Adds the given course to the navigation structure.</span>
<a name="l2390"><span class="linenum">2390</span></a>  <span class="comment">     *</span>
<a name="l2391"><span class="linenum">2391</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l2392"><span class="linenum">2392</span></a>  <span class="comment">     * @param bool $forcegeneric</span>
<a name="l2393"><span class="linenum">2393</span></a>  <span class="comment">     * @param bool $ismycourse</span>
<a name="l2394"><span class="linenum">2394</span></a>  <span class="comment">     * @return navigation_node</span>
<a name="l2395"><span class="linenum">2395</span></a>  <span class="comment">     */</span>
<a name="l2396"><span class="linenum">2396</span></a>      public function <a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(stdClass <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it37512" onMouseOver="hilite(37512)" onMouseOut="lolite()" onClick="logVariable('forcegeneric')" href="../_variables/forcegeneric.html">$forcegeneric</a> = false, <a class="var it37513" onMouseOver="hilite(37513)" onMouseOut="lolite()" onClick="logVariable('coursetype')" href="../_variables/coursetype.html">$coursetype</a> = self::COURSE_OTHER) {
<a name="l2397"><span class="linenum">2397</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l2398"><span class="linenum">2398</span></a>  
<a name="l2399"><span class="linenum">2399</span></a>  <span class="comment">        // We found the course... we can return it now :)</span>
<a name="l2400"><span class="linenum">2400</span></a>          if (!<a class="var it37512" onMouseOver="hilite(37512)" onMouseOut="lolite()" onClick="logVariable('forcegeneric')" href="../_variables/forcegeneric.html">$forcegeneric</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcourses')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcourses.html">addedcourses</a>)) {
<a name="l2401"><span class="linenum">2401</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcourses')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcourses.html">addedcourses</a>[<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>];
<a name="l2402"><span class="linenum">2402</span></a>          }
<a name="l2403"><span class="linenum">2403</span></a>  
<a name="l2404"><span class="linenum">2404</span></a>          <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2405"><span class="linenum">2405</span></a>  
<a name="l2406"><span class="linenum">2406</span></a>          if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a> &amp;&amp; !<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('visible')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l2407"><span class="linenum">2407</span></a>              if (<a class="function" onClick="logFunction('is_role_switched')" href="../_functions/is_role_switched.html" onMouseOver="funcPopup(event,'is_role_switched')">is_role_switched</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l2408"><span class="linenum">2408</span></a>  <span class="comment">                // user has to be able to access course in order to switch, let's skip the visibility test here</span>
<a name="l2409"><span class="linenum">2409</span></a>              } else if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewhiddencourses', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l2410"><span class="linenum">2410</span></a>                  return false;
<a name="l2411"><span class="linenum">2411</span></a>              }
<a name="l2412"><span class="linenum">2412</span></a>          }
<a name="l2413"><span class="linenum">2413</span></a>  
<a name="l2414"><span class="linenum">2414</span></a>          <a class="var it12949" onMouseOver="hilite(12949)" onMouseOut="lolite()" onClick="logVariable('issite')" href="../_variables/issite.html">$issite</a> = (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2415"><span class="linenum">2415</span></a>          <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>, true, array('context' =&gt; <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>));
<a name="l2416"><span class="linenum">2416</span></a>          <a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('fullname')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>, true, array('context' =&gt; <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>));
<a name="l2417"><span class="linenum">2417</span></a>  <span class="comment">        // This is the name that will be shown for the course.</span>
<a name="l2418"><span class="linenum">2418</span></a>          <a class="var it2658" onMouseOver="hilite(2658)" onMouseOut="lolite()" onClick="logVariable('coursename')" href="../_variables/coursename.html">$coursename</a> = empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navshowfullcoursenames')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navshowfullcoursenames.html">navshowfullcoursenames</a>) ? <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a> : <a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a>;
<a name="l2419"><span class="linenum">2419</span></a>  
<a name="l2420"><span class="linenum">2420</span></a>  <span class="comment">        // Can the user expand the course to see its content.</span>
<a name="l2421"><span class="linenum">2421</span></a>          <a class="var it37515" onMouseOver="hilite(37515)" onMouseOut="lolite()" onClick="logVariable('canexpandcourse')" href="../_variables/canexpandcourse.html">$canexpandcourse</a> = true;
<a name="l2422"><span class="linenum">2422</span></a>          if (<a class="var it12949" onMouseOver="hilite(12949)" onMouseOut="lolite()" onClick="logVariable('issite')" href="../_variables/issite.html">$issite</a>) {
<a name="l2423"><span class="linenum">2423</span></a>              <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>;
<a name="l2424"><span class="linenum">2424</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = null;
<a name="l2425"><span class="linenum">2425</span></a>              if (empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('usesitenameforsitepages')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/usesitenameforsitepages.html">usesitenameforsitepages</a>)) {
<a name="l2426"><span class="linenum">2426</span></a>                  <a class="var it2658" onMouseOver="hilite(2658)" onMouseOut="lolite()" onClick="logVariable('coursename')" href="../_variables/coursename.html">$coursename</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('sitepages');
<a name="l2427"><span class="linenum">2427</span></a>              }
<a name="l2428"><span class="linenum">2428</span></a>          } else if (<a class="var it37513" onMouseOver="hilite(37513)" onMouseOut="lolite()" onClick="logVariable('coursetype')" href="../_variables/coursetype.html">$coursetype</a> == self::COURSE_CURRENT) {
<a name="l2429"><span class="linenum">2429</span></a>              <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['currentcourse'];
<a name="l2430"><span class="linenum">2430</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/view.php.html">/course/view.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2431"><span class="linenum">2431</span></a>              <a class="var it37515" onMouseOver="hilite(37515)" onMouseOut="lolite()" onClick="logVariable('canexpandcourse')" href="../_variables/canexpandcourse.html">$canexpandcourse</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_expand_course')" href="../_functions/can_expand_course.html" onMouseOver="funcPopup(event,'can_expand_course')">can_expand_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2432"><span class="linenum">2432</span></a>          } else if (<a class="var it37513" onMouseOver="hilite(37513)" onMouseOut="lolite()" onClick="logVariable('coursetype')" href="../_variables/coursetype.html">$coursetype</a> == self::COURSE_MY &amp;&amp; !<a class="var it37512" onMouseOver="hilite(37512)" onMouseOut="lolite()" onClick="logVariable('forcegeneric')" href="../_variables/forcegeneric.html">$forcegeneric</a>) {
<a name="l2433"><span class="linenum">2433</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navshowmycoursecategories')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navshowmycoursecategories.html">navshowmycoursecategories</a>) &amp;&amp; (<a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['mycourses']-&gt;<a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/category.html">category</a>, self::TYPE_MY_CATEGORY))) {
<a name="l2434"><span class="linenum">2434</span></a>  <span class="comment">                // Nothing to do here the above statement set $parent to the category within mycourses.</span>
<a name="l2435"><span class="linenum">2435</span></a>              } else {
<a name="l2436"><span class="linenum">2436</span></a>                  <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['mycourses'];
<a name="l2437"><span class="linenum">2437</span></a>              }
<a name="l2438"><span class="linenum">2438</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/view.php.html">/course/view.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2439"><span class="linenum">2439</span></a>          } else {
<a name="l2440"><span class="linenum">2440</span></a>              <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['courses'];
<a name="l2441"><span class="linenum">2441</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/view.php.html">/course/view.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2442"><span class="linenum">2442</span></a>  <span class="comment">            // They can only expand the course if they can access it.</span>
<a name="l2443"><span class="linenum">2443</span></a>              <a class="var it37515" onMouseOver="hilite(37515)" onMouseOut="lolite()" onClick="logVariable('canexpandcourse')" href="../_variables/canexpandcourse.html">$canexpandcourse</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('can_expand_course')" href="../_functions/can_expand_course.html" onMouseOver="funcPopup(event,'can_expand_course')">can_expand_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2444"><span class="linenum">2444</span></a>              if (!empty(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/category.html">category</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_categories')" href="../_functions/show_categories.html" onMouseOver="funcPopup(event,'show_categories')">show_categories</a>(<a class="var it37513" onMouseOver="hilite(37513)" onMouseOut="lolite()" onClick="logVariable('coursetype')" href="../_variables/coursetype.html">$coursetype</a> == self::COURSE_MY)) {
<a name="l2445"><span class="linenum">2445</span></a>                  if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_category_fully_loaded')" href="../_functions/is_category_fully_loaded.html" onMouseOver="funcPopup(event,'is_category_fully_loaded')">is_category_fully_loaded</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/category.html">category</a>)) {
<a name="l2446"><span class="linenum">2446</span></a>  <span class="comment">                    // We need to load the category structure for this course</span>
<a name="l2447"><span class="linenum">2447</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_categories')" href="../_functions/load_all_categories.html" onMouseOver="funcPopup(event,'load_all_categories')">load_all_categories</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/category.html">category</a>, false);
<a name="l2448"><span class="linenum">2448</span></a>                  }
<a name="l2449"><span class="linenum">2449</span></a>                  if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/category.html">category</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>)) {
<a name="l2450"><span class="linenum">2450</span></a>                      <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>[<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/category.html">category</a>];
<a name="l2451"><span class="linenum">2451</span></a>  <span class="comment">                    // This could lead to the course being created so we should check whether it is the case again</span>
<a name="l2452"><span class="linenum">2452</span></a>                      if (!<a class="var it37512" onMouseOver="hilite(37512)" onMouseOut="lolite()" onClick="logVariable('forcegeneric')" href="../_variables/forcegeneric.html">$forcegeneric</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcourses')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcourses.html">addedcourses</a>)) {
<a name="l2453"><span class="linenum">2453</span></a>                          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcourses')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcourses.html">addedcourses</a>[<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>];
<a name="l2454"><span class="linenum">2454</span></a>                      }
<a name="l2455"><span class="linenum">2455</span></a>                  }
<a name="l2456"><span class="linenum">2456</span></a>              }
<a name="l2457"><span class="linenum">2457</span></a>          }
<a name="l2458"><span class="linenum">2458</span></a>  
<a name="l2459"><span class="linenum">2459</span></a>          <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a> = <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('parent')" href="../_variables/parent.html">$parent</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it2658" onMouseOver="hilite(2658)" onMouseOut="lolite()" onClick="logVariable('coursename')" href="../_variables/coursename.html">$coursename</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_COURSE, <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../_variables/shortname.html">$shortname</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2460"><span class="linenum">2460</span></a>          <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a onClick="logVariable('hidden')" class="var it41084" onMouseOver="hilite(41084)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a> = (!<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('visible')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>);
<a name="l2461"><span class="linenum">2461</span></a>  <span class="comment">        // We need to decode &amp;amp;'s here as they will have been added by format_string above and attributes will be encoded again</span>
<a name="l2462"><span class="linenum">2462</span></a>  <span class="comment">        // later.</span>
<a name="l2463"><span class="linenum">2463</span></a>          <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('title')" href="../_functions/title.html" onMouseOver="funcPopup(event,'title')">title</a>(<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('&amp;amp;', '&amp;', <a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a>));
<a name="l2464"><span class="linenum">2464</span></a>          if (<a class="var it37515" onMouseOver="hilite(37515)" onMouseOut="lolite()" onClick="logVariable('canexpandcourse')" href="../_variables/canexpandcourse.html">$canexpandcourse</a>) {
<a name="l2465"><span class="linenum">2465</span></a>  <span class="comment">            // This course can be expanded by the user, make it a branch to make the system aware that its expandable by ajax.</span>
<a name="l2466"><span class="linenum">2466</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a onClick="logVariable('nodetype')" class="var it41084" onMouseOver="hilite(41084)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = self::NODETYPE_BRANCH;
<a name="l2467"><span class="linenum">2467</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a onClick="logVariable('isexpandable')" class="var it41084" onMouseOver="hilite(41084)" onMouseOut="lolite()" href="../_variables/isexpandable.html">isexpandable</a> = true;
<a name="l2468"><span class="linenum">2468</span></a>          } else {
<a name="l2469"><span class="linenum">2469</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a onClick="logVariable('nodetype')" class="var it41084" onMouseOver="hilite(41084)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = self::NODETYPE_LEAF;
<a name="l2470"><span class="linenum">2470</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a onClick="logVariable('isexpandable')" class="var it41084" onMouseOver="hilite(41084)" onMouseOut="lolite()" href="../_variables/isexpandable.html">isexpandable</a> = false;
<a name="l2471"><span class="linenum">2471</span></a>          }
<a name="l2472"><span class="linenum">2472</span></a>          if (!<a class="var it37512" onMouseOver="hilite(37512)" onMouseOut="lolite()" onClick="logVariable('forcegeneric')" href="../_variables/forcegeneric.html">$forcegeneric</a>) {
<a name="l2473"><span class="linenum">2473</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcourses')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcourses.html">addedcourses</a>[<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>;
<a name="l2474"><span class="linenum">2474</span></a>          }
<a name="l2475"><span class="linenum">2475</span></a>  
<a name="l2476"><span class="linenum">2476</span></a>          return <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>;
<a name="l2477"><span class="linenum">2477</span></a>      }
<a name="l2478"><span class="linenum">2478</span></a>  
<a name="l2479"><span class="linenum">2479</span></a>      <span class="comment">/**</span>
<a name="l2480"><span class="linenum">2480</span></a>  <span class="comment">     * Returns a cache instance to use for the expand course cache.</span>
<a name="l2481"><span class="linenum">2481</span></a>  <span class="comment">     * @return cache_session</span>
<a name="l2482"><span class="linenum">2482</span></a>  <span class="comment">     */</span>
<a name="l2483"><span class="linenum">2483</span></a>      protected function <a class="function" onClick="logFunction('get_expand_course_cache')" href="../_functions/get_expand_course_cache.html" onMouseOver="funcPopup(event,'get_expand_course_cache')">get_expand_course_cache</a>() {
<a name="l2484"><span class="linenum">2484</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cacheexpandcourse')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cacheexpandcourse.html">cacheexpandcourse</a> === null) {
<a name="l2485"><span class="linenum">2485</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cacheexpandcourse')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cacheexpandcourse.html">cacheexpandcourse</a> = <a class="class" onClick="logClass('cache')" href="../_classes/cache.html" onMouseOver="classPopup(event,'cache')">cache</a>::<a class="function" onClick="logFunction('make')" href="../_functions/make.html" onMouseOver="funcPopup(event,'make')">make</a>('core', 'navigation_expandcourse');
<a name="l2486"><span class="linenum">2486</span></a>          }
<a name="l2487"><span class="linenum">2487</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cacheexpandcourse')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cacheexpandcourse.html">cacheexpandcourse</a>;
<a name="l2488"><span class="linenum">2488</span></a>      }
<a name="l2489"><span class="linenum">2489</span></a>  
<a name="l2490"><span class="linenum">2490</span></a>      <span class="comment">/**</span>
<a name="l2491"><span class="linenum">2491</span></a>  <span class="comment">     * Checks if a user can expand a course in the navigation.</span>
<a name="l2492"><span class="linenum">2492</span></a>  <span class="comment">     *</span>
<a name="l2493"><span class="linenum">2493</span></a>  <span class="comment">     * We use a cache here because in order to be accurate we need to call can_access_course which is a costly function.</span>
<a name="l2494"><span class="linenum">2494</span></a>  <span class="comment">     * Because this functionality is basic + non-essential and because we lack good event triggering this cache</span>
<a name="l2495"><span class="linenum">2495</span></a>  <span class="comment">     * permits stale data.</span>
<a name="l2496"><span class="linenum">2496</span></a>  <span class="comment">     * In the situation the user is granted access to a course after we've initialised this session cache the cache</span>
<a name="l2497"><span class="linenum">2497</span></a>  <span class="comment">     * will be stale.</span>
<a name="l2498"><span class="linenum">2498</span></a>  <span class="comment">     * It is brought up to date in only one of two ways.</span>
<a name="l2499"><span class="linenum">2499</span></a>  <span class="comment">     *   1. The user logs out and in again.</span>
<a name="l2500"><span class="linenum">2500</span></a>  <span class="comment">     *   2. The user browses to the course they've just being given access to.</span>
<a name="l2501"><span class="linenum">2501</span></a>  <span class="comment">     *</span>
<a name="l2502"><span class="linenum">2502</span></a>  <span class="comment">     * Really all this controls is whether the node is shown as expandable or not. It is uber un-important.</span>
<a name="l2503"><span class="linenum">2503</span></a>  <span class="comment">     *</span>
<a name="l2504"><span class="linenum">2504</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l2505"><span class="linenum">2505</span></a>  <span class="comment">     * @return bool</span>
<a name="l2506"><span class="linenum">2506</span></a>  <span class="comment">     */</span>
<a name="l2507"><span class="linenum">2507</span></a>      protected function <a class="function" onClick="logFunction('can_expand_course')" href="../_functions/can_expand_course.html" onMouseOver="funcPopup(event,'can_expand_course')">can_expand_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l2508"><span class="linenum">2508</span></a>          <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_expand_course_cache')" href="../_functions/get_expand_course_cache.html" onMouseOver="funcPopup(event,'get_expand_course_cache')">get_expand_course_cache</a>();
<a name="l2509"><span class="linenum">2509</span></a>          <a class="var it37517" onMouseOver="hilite(37517)" onMouseOut="lolite()" onClick="logVariable('canexpand')" href="../_variables/canexpand.html">$canexpand</a> = <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2510"><span class="linenum">2510</span></a>          if (<a class="var it37517" onMouseOver="hilite(37517)" onMouseOut="lolite()" onClick="logVariable('canexpand')" href="../_variables/canexpand.html">$canexpand</a> === false) {
<a name="l2511"><span class="linenum">2511</span></a>              <a class="var it37517" onMouseOver="hilite(37517)" onMouseOut="lolite()" onClick="logVariable('canexpand')" href="../_variables/canexpand.html">$canexpand</a> = <a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() &amp;&amp; <a class="function" onClick="logFunction('can_access_course')" href="../_functions/can_access_course.html" onMouseOver="funcPopup(event,'can_access_course')">can_access_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, null, '', true);
<a name="l2512"><span class="linenum">2512</span></a>              <a class="var it37517" onMouseOver="hilite(37517)" onMouseOut="lolite()" onClick="logVariable('canexpand')" href="../_variables/canexpand.html">$canexpand</a> = (int)<a class="var it37517" onMouseOver="hilite(37517)" onMouseOut="lolite()" onClick="logVariable('canexpand')" href="../_variables/canexpand.html">$canexpand</a>;
<a name="l2513"><span class="linenum">2513</span></a>              <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it37517" onMouseOver="hilite(37517)" onMouseOut="lolite()" onClick="logVariable('canexpand')" href="../_variables/canexpand.html">$canexpand</a>);
<a name="l2514"><span class="linenum">2514</span></a>          }
<a name="l2515"><span class="linenum">2515</span></a>          return (<a class="var it37517" onMouseOver="hilite(37517)" onMouseOut="lolite()" onClick="logVariable('canexpand')" href="../_variables/canexpand.html">$canexpand</a> === 1);
<a name="l2516"><span class="linenum">2516</span></a>      }
<a name="l2517"><span class="linenum">2517</span></a>  
<a name="l2518"><span class="linenum">2518</span></a>      <span class="comment">/**</span>
<a name="l2519"><span class="linenum">2519</span></a>  <span class="comment">     * Returns true if the category has already been loaded as have any child categories</span>
<a name="l2520"><span class="linenum">2520</span></a>  <span class="comment">     *</span>
<a name="l2521"><span class="linenum">2521</span></a>  <span class="comment">     * @param int $categoryid</span>
<a name="l2522"><span class="linenum">2522</span></a>  <span class="comment">     * @return bool</span>
<a name="l2523"><span class="linenum">2523</span></a>  <span class="comment">     */</span>
<a name="l2524"><span class="linenum">2524</span></a>      protected function <a class="function" onClick="logFunction('is_category_fully_loaded')" href="../_functions/is_category_fully_loaded.html" onMouseOver="funcPopup(event,'is_category_fully_loaded')">is_category_fully_loaded</a>(<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>) {
<a name="l2525"><span class="linenum">2525</span></a>          return (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>) &amp;&amp; (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allcategoriesloaded')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/allcategoriesloaded.html">allcategoriesloaded</a> || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>[<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>]-&gt;children-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() &gt; 0));
<a name="l2526"><span class="linenum">2526</span></a>      }
<a name="l2527"><span class="linenum">2527</span></a>  
<a name="l2528"><span class="linenum">2528</span></a>      <span class="comment">/**</span>
<a name="l2529"><span class="linenum">2529</span></a>  <span class="comment">     * Adds essential course nodes to the navigation for the given course.</span>
<a name="l2530"><span class="linenum">2530</span></a>  <span class="comment">     *</span>
<a name="l2531"><span class="linenum">2531</span></a>  <span class="comment">     * This method adds nodes such as reports, blogs and participants</span>
<a name="l2532"><span class="linenum">2532</span></a>  <span class="comment">     *</span>
<a name="l2533"><span class="linenum">2533</span></a>  <span class="comment">     * @param navigation_node $coursenode</span>
<a name="l2534"><span class="linenum">2534</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l2535"><span class="linenum">2535</span></a>  <span class="comment">     * @return bool returns true on successful addition of a node.</span>
<a name="l2536"><span class="linenum">2536</span></a>  <span class="comment">     */</span>
<a name="l2537"><span class="linenum">2537</span></a>      public function <a class="function" onClick="logFunction('add_course_essentials')" href="../_functions/add_course_essentials.html" onMouseOver="funcPopup(event,'add_course_essentials')">add_course_essentials</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, stdClass <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l2538"><span class="linenum">2538</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l2539"><span class="linenum">2539</span></a>  
<a name="l2540"><span class="linenum">2540</span></a>          if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2541"><span class="linenum">2541</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_front_page_course_essentials')" href="../_functions/add_front_page_course_essentials.html" onMouseOver="funcPopup(event,'add_front_page_course_essentials')">add_front_page_course_essentials</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2542"><span class="linenum">2542</span></a>          }
<a name="l2543"><span class="linenum">2543</span></a>  
<a name="l2544"><span class="linenum">2544</span></a>          if (<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a> == false || !(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a> instanceof navigation_node) || <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('participants', <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_CONTAINER)) {
<a name="l2545"><span class="linenum">2545</span></a>              return true;
<a name="l2546"><span class="linenum">2546</span></a>          }
<a name="l2547"><span class="linenum">2547</span></a>  
<a name="l2548"><span class="linenum">2548</span></a>  <span class="comment">        //Participants</span>
<a name="l2549"><span class="linenum">2549</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewparticipants', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context)) {
<a name="l2550"><span class="linenum">2550</span></a>              <a class="var it10377" onMouseOver="hilite(10377)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../_variables/participants.html">$participants</a> = <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participants'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/user/index.php?id='.<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>), self::TYPE_CONTAINER, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participants'), 'participants');
<a name="l2551"><span class="linenum">2551</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableblogs')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enableblogs.html">enableblogs</a>)) {
<a name="l2552"><span class="linenum">2552</span></a>                  if ((<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('bloglevel')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/bloglevel.html">bloglevel</a> == <a class="constant" onClick="logConstant('BLOG_GLOBAL_LEVEL')" href="../_constants/BLOG_GLOBAL_LEVEL.html" onMouseOver="constPopup(event,'BLOG_GLOBAL_LEVEL')">BLOG_GLOBAL_LEVEL</a> <a class="function" onClick="logFunction('or')" href="../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('bloglevel')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/bloglevel.html">bloglevel</a> == <a class="constant" onClick="logConstant('BLOG_SITE_LEVEL')" href="../_constants/BLOG_SITE_LEVEL.html" onMouseOver="constPopup(event,'BLOG_SITE_LEVEL')">BLOG_SITE_LEVEL</a> and (<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() and !<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>())))
<a name="l2553"><span class="linenum">2553</span></a>                     and <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/blog:view', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l2554"><span class="linenum">2554</span></a>                      <a class="var it37518" onMouseOver="hilite(37518)" onMouseOut="lolite()" onClick="logVariable('blogsurls')" href="../_variables/blogsurls.html">$blogsurls</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../blog/index.php.html">/blog/index.php</a>');
<a name="l2555"><span class="linenum">2555</span></a>                      if (<a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../_variables/currentgroup.html">$currentgroup</a> = <a class="function" onClick="logFunction('groups_get_course_group')" href="../_functions/groups_get_course_group.html" onMouseOver="funcPopup(event,'groups_get_course_group')">groups_get_course_group</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, true)) {
<a name="l2556"><span class="linenum">2556</span></a>                          <a class="var it37518" onMouseOver="hilite(37518)" onMouseOut="lolite()" onClick="logVariable('blogsurls')" href="../_variables/blogsurls.html">$blogsurls</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('groupid', <a class="var it2906" onMouseOver="hilite(2906)" onMouseOut="lolite()" onClick="logVariable('currentgroup')" href="../_variables/currentgroup.html">$currentgroup</a>);
<a name="l2557"><span class="linenum">2557</span></a>                      } else {
<a name="l2558"><span class="linenum">2558</span></a>                          <a class="var it37518" onMouseOver="hilite(37518)" onMouseOut="lolite()" onClick="logVariable('blogsurls')" href="../_variables/blogsurls.html">$blogsurls</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('courseid', <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2559"><span class="linenum">2559</span></a>                      }
<a name="l2560"><span class="linenum">2560</span></a>                      <a class="var it10377" onMouseOver="hilite(10377)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../_variables/participants.html">$participants</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('blogscourse', 'blog'), <a class="var it37518" onMouseOver="hilite(37518)" onMouseOut="lolite()" onClick="logVariable('blogsurls')" href="../_variables/blogsurls.html">$blogsurls</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), self::TYPE_SETTING, null, 'courseblogs');
<a name="l2561"><span class="linenum">2561</span></a>                  }
<a name="l2562"><span class="linenum">2562</span></a>              }
<a name="l2563"><span class="linenum">2563</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablenotes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enablenotes.html">enablenotes</a>) &amp;&amp; (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/notes:manage', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context) || <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/notes:view', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context))) {
<a name="l2564"><span class="linenum">2564</span></a>                  <a class="var it10377" onMouseOver="hilite(10377)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../_variables/participants.html">$participants</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notes', 'notes'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../notes/index.php.html">/notes/index.php</a>', array('filtertype' =&gt; 'course', 'filterselect' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)), self::TYPE_SETTING, null, 'currentcoursenotes');
<a name="l2565"><span class="linenum">2565</span></a>              }
<a name="l2566"><span class="linenum">2566</span></a>          } else if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extendforuser')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/extendforuser.html">extendforuser</a>) &gt; 0 || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course-&gt;id == <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2567"><span class="linenum">2567</span></a>              <a class="var it10377" onMouseOver="hilite(10377)" onMouseOut="lolite()" onClick="logVariable('participants')" href="../_variables/participants.html">$participants</a> = <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participants'), null, self::TYPE_CONTAINER, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participants'), 'participants');
<a name="l2568"><span class="linenum">2568</span></a>          }
<a name="l2569"><span class="linenum">2569</span></a>  
<a name="l2570"><span class="linenum">2570</span></a>  <span class="comment">        // Badges.</span>
<a name="l2571"><span class="linenum">2571</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablebadges')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enablebadges.html">enablebadges</a>) &amp;&amp; !empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('badges_allowcoursebadges')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/badges_allowcoursebadges.html">badges_allowcoursebadges</a>) &amp;&amp;
<a name="l2572"><span class="linenum">2572</span></a>              <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/badges:viewbadges', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context)) {
<a name="l2573"><span class="linenum">2573</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../badges/view.php.html">/badges/view.php</a>', array('type' =&gt; 2, 'id' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2574"><span class="linenum">2574</span></a>  
<a name="l2575"><span class="linenum">2575</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('coursebadges', 'badges'), null,
<a name="l2576"><span class="linenum">2576</span></a>                      <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_CONTAINER, null, 'coursebadges');
<a name="l2577"><span class="linenum">2577</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('coursebadges')-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('badgesview', 'badges'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>,
<a name="l2578"><span class="linenum">2578</span></a>                      <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING, null, 'badgesview',
<a name="l2579"><span class="linenum">2579</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/badge', <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('badgesview', 'badges')));
<a name="l2580"><span class="linenum">2580</span></a>          }
<a name="l2581"><span class="linenum">2581</span></a>  
<a name="l2582"><span class="linenum">2582</span></a>          return true;
<a name="l2583"><span class="linenum">2583</span></a>      }
<a name="l2584"><span class="linenum">2584</span></a>      <span class="comment">/**</span>
<a name="l2585"><span class="linenum">2585</span></a>  <span class="comment">     * This generates the structure of the course that won't be generated when</span>
<a name="l2586"><span class="linenum">2586</span></a>  <span class="comment">     * the modules and sections are added.</span>
<a name="l2587"><span class="linenum">2587</span></a>  <span class="comment">     *</span>
<a name="l2588"><span class="linenum">2588</span></a>  <span class="comment">     * Things such as the reports branch, the participants branch, blogs... get</span>
<a name="l2589"><span class="linenum">2589</span></a>  <span class="comment">     * added to the course node by this method.</span>
<a name="l2590"><span class="linenum">2590</span></a>  <span class="comment">     *</span>
<a name="l2591"><span class="linenum">2591</span></a>  <span class="comment">     * @param navigation_node $coursenode</span>
<a name="l2592"><span class="linenum">2592</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l2593"><span class="linenum">2593</span></a>  <span class="comment">     * @return bool True for successfull generation</span>
<a name="l2594"><span class="linenum">2594</span></a>  <span class="comment">     */</span>
<a name="l2595"><span class="linenum">2595</span></a>      public function <a class="function" onClick="logFunction('add_front_page_course_essentials')" href="../_functions/add_front_page_course_essentials.html" onMouseOver="funcPopup(event,'add_front_page_course_essentials')">add_front_page_course_essentials</a>(navigation_node <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, stdClass <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l2596"><span class="linenum">2596</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2597"><span class="linenum">2597</span></a>  
<a name="l2598"><span class="linenum">2598</span></a>          if (<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a> == false || <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('frontpageloaded', <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_CUSTOM)) {
<a name="l2599"><span class="linenum">2599</span></a>              return true;
<a name="l2600"><span class="linenum">2600</span></a>          }
<a name="l2601"><span class="linenum">2601</span></a>  
<a name="l2602"><span class="linenum">2602</span></a>  <span class="comment">        // Hidden node that we use to determine if the front page navigation is loaded.</span>
<a name="l2603"><span class="linenum">2603</span></a>  <span class="comment">        // This required as there are not other guaranteed nodes that may be loaded.</span>
<a name="l2604"><span class="linenum">2604</span></a>          <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>('frontpageloaded', null, self::TYPE_CUSTOM, null, 'frontpageloaded')-&gt;display = false;
<a name="l2605"><span class="linenum">2605</span></a>  
<a name="l2606"><span class="linenum">2606</span></a>  <span class="comment">        //Participants</span>
<a name="l2607"><span class="linenum">2607</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewparticipants',  <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l2608"><span class="linenum">2608</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participants'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/user/index.php?id='.<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>), self::TYPE_CUSTOM, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('participants'), 'participants');
<a name="l2609"><span class="linenum">2609</span></a>          }
<a name="l2610"><span class="linenum">2610</span></a>  
<a name="l2611"><span class="linenum">2611</span></a>  <span class="comment">        // Blogs</span>
<a name="l2612"><span class="linenum">2612</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableblogs')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enableblogs.html">enableblogs</a>)
<a name="l2613"><span class="linenum">2613</span></a>            and (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('bloglevel')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/bloglevel.html">bloglevel</a> == <a class="constant" onClick="logConstant('BLOG_GLOBAL_LEVEL')" href="../_constants/BLOG_GLOBAL_LEVEL.html" onMouseOver="constPopup(event,'BLOG_GLOBAL_LEVEL')">BLOG_GLOBAL_LEVEL</a> <a class="function" onClick="logFunction('or')" href="../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('bloglevel')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/bloglevel.html">bloglevel</a> == <a class="constant" onClick="logConstant('BLOG_SITE_LEVEL')" href="../_constants/BLOG_SITE_LEVEL.html" onMouseOver="constPopup(event,'BLOG_SITE_LEVEL')">BLOG_SITE_LEVEL</a> and (<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() and !<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>())))
<a name="l2614"><span class="linenum">2614</span></a>            and <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/blog:view', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l2615"><span class="linenum">2615</span></a>              <a class="var it37518" onMouseOver="hilite(37518)" onMouseOut="lolite()" onClick="logVariable('blogsurls')" href="../_variables/blogsurls.html">$blogsurls</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../blog/index.php.html">/blog/index.php</a>');
<a name="l2616"><span class="linenum">2616</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('blogssite', 'blog'), <a class="var it37518" onMouseOver="hilite(37518)" onMouseOut="lolite()" onClick="logVariable('blogsurls')" href="../_variables/blogsurls.html">$blogsurls</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), self::TYPE_SYSTEM, null, 'siteblog');
<a name="l2617"><span class="linenum">2617</span></a>          }
<a name="l2618"><span class="linenum">2618</span></a>  
<a name="l2619"><span class="linenum">2619</span></a>          <a class="var it17207" onMouseOver="hilite(17207)" onMouseOut="lolite()" onClick="logVariable('filterselect')" href="../_variables/filterselect.html">$filterselect</a> = 0;
<a name="l2620"><span class="linenum">2620</span></a>  
<a name="l2621"><span class="linenum">2621</span></a>  <span class="comment">        //Badges</span>
<a name="l2622"><span class="linenum">2622</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablebadges')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enablebadges.html">enablebadges</a>) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/badges:viewbadges', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context)) {
<a name="l2623"><span class="linenum">2623</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . '<a class="filename" href="../badges/view.php.html">/badges/view.php</a>', array('type' =&gt; 1));
<a name="l2624"><span class="linenum">2624</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('sitebadges', 'badges'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_CUSTOM);
<a name="l2625"><span class="linenum">2625</span></a>          }
<a name="l2626"><span class="linenum">2626</span></a>  
<a name="l2627"><span class="linenum">2627</span></a>  <span class="comment">        // Notes</span>
<a name="l2628"><span class="linenum">2628</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablenotes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enablenotes.html">enablenotes</a>) &amp;&amp; (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/notes:manage', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context) || <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/notes:view', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context))) {
<a name="l2629"><span class="linenum">2629</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notes', 'notes'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../notes/index.php.html">/notes/index.php</a>',
<a name="l2630"><span class="linenum">2630</span></a>                  array('filtertype' =&gt; 'course', 'filterselect' =&gt; <a class="var it17207" onMouseOver="hilite(17207)" onMouseOut="lolite()" onClick="logVariable('filterselect')" href="../_variables/filterselect.html">$filterselect</a>)), self::TYPE_SETTING, null, 'notes');
<a name="l2631"><span class="linenum">2631</span></a>          }
<a name="l2632"><span class="linenum">2632</span></a>  
<a name="l2633"><span class="linenum">2633</span></a>  <span class="comment">        // Tags</span>
<a name="l2634"><span class="linenum">2634</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('usetags')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/usetags.html">usetags</a>) &amp;&amp; <a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>()) {
<a name="l2635"><span class="linenum">2635</span></a>              <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a> = <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('tags', 'tag'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../tag/search.php.html">/tag/search.php</a>'),
<a name="l2636"><span class="linenum">2636</span></a>                      self::TYPE_SETTING, null, 'tags');
<a name="l2637"><span class="linenum">2637</span></a>          }
<a name="l2638"><span class="linenum">2638</span></a>  
<a name="l2639"><span class="linenum">2639</span></a>          if (<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>()) {
<a name="l2640"><span class="linenum">2640</span></a>  <span class="comment">            // Calendar</span>
<a name="l2641"><span class="linenum">2641</span></a>              <a class="var it13459" onMouseOver="hilite(13459)" onMouseOut="lolite()" onClick="logVariable('calendarurl')" href="../_variables/calendarurl.html">$calendarurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../calendar/view.php.html">/calendar/view.php</a>', array('view' =&gt; 'month'));
<a name="l2642"><span class="linenum">2642</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('calendar', 'calendar'), <a class="var it13459" onMouseOver="hilite(13459)" onMouseOut="lolite()" onClick="logVariable('calendarurl')" href="../_variables/calendarurl.html">$calendarurl</a>, self::TYPE_CUSTOM, null, 'calendar');
<a name="l2643"><span class="linenum">2643</span></a>          }
<a name="l2644"><span class="linenum">2644</span></a>  
<a name="l2645"><span class="linenum">2645</span></a>          return true;
<a name="l2646"><span class="linenum">2646</span></a>      }
<a name="l2647"><span class="linenum">2647</span></a>  
<a name="l2648"><span class="linenum">2648</span></a>      <span class="comment">/**</span>
<a name="l2649"><span class="linenum">2649</span></a>  <span class="comment">     * Clears the navigation cache</span>
<a name="l2650"><span class="linenum">2650</span></a>  <span class="comment">     */</span>
<a name="l2651"><span class="linenum">2651</span></a>      public function <a class="function" onClick="logFunction('clear_cache')" href="../_functions/clear_cache.html" onMouseOver="funcPopup(event,'clear_cache')">clear_cache</a>() {
<a name="l2652"><span class="linenum">2652</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;<a class="function" onClick="logFunction('clear')" href="../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>();
<a name="l2653"><span class="linenum">2653</span></a>      }
<a name="l2654"><span class="linenum">2654</span></a>  
<a name="l2655"><span class="linenum">2655</span></a>      <span class="comment">/**</span>
<a name="l2656"><span class="linenum">2656</span></a>  <span class="comment">     * Sets an expansion limit for the navigation</span>
<a name="l2657"><span class="linenum">2657</span></a>  <span class="comment">     *</span>
<a name="l2658"><span class="linenum">2658</span></a>  <span class="comment">     * The expansion limit is used to prevent the display of content that has a type</span>
<a name="l2659"><span class="linenum">2659</span></a>  <span class="comment">     * greater than the provided $type.</span>
<a name="l2660"><span class="linenum">2660</span></a>  <span class="comment">     *</span>
<a name="l2661"><span class="linenum">2661</span></a>  <span class="comment">     * Can be used to ensure things such as activities or activity content don't get</span>
<a name="l2662"><span class="linenum">2662</span></a>  <span class="comment">     * shown on the navigation.</span>
<a name="l2663"><span class="linenum">2663</span></a>  <span class="comment">     * They are still generated in order to ensure the navbar still makes sense.</span>
<a name="l2664"><span class="linenum">2664</span></a>  <span class="comment">     *</span>
<a name="l2665"><span class="linenum">2665</span></a>  <span class="comment">     * @param int $type One of navigation_node::TYPE_*</span>
<a name="l2666"><span class="linenum">2666</span></a>  <span class="comment">     * @return bool true when complete.</span>
<a name="l2667"><span class="linenum">2667</span></a>  <span class="comment">     */</span>
<a name="l2668"><span class="linenum">2668</span></a>      public function <a class="function" onClick="logFunction('set_expansion_limit')" href="../_functions/set_expansion_limit.html" onMouseOver="funcPopup(event,'set_expansion_limit')">set_expansion_limit</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l2669"><span class="linenum">2669</span></a>          global <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l2670"><span class="linenum">2670</span></a>          <a class="var it51" onMouseOver="hilite(51)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_all_of_type')" href="../_functions/find_all_of_type.html" onMouseOver="funcPopup(event,'find_all_of_type')">find_all_of_type</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l2671"><span class="linenum">2671</span></a>  
<a name="l2672"><span class="linenum">2672</span></a>  <span class="comment">        // We only want to hide specific types of nodes.</span>
<a name="l2673"><span class="linenum">2673</span></a>  <span class="comment">        // Only nodes that represent &quot;structure&quot; in the navigation tree should be hidden.</span>
<a name="l2674"><span class="linenum">2674</span></a>  <span class="comment">        // If we hide all nodes then we risk hiding vital information.</span>
<a name="l2675"><span class="linenum">2675</span></a>          <a class="var it37451" onMouseOver="hilite(37451)" onMouseOut="lolite()" onClick="logVariable('typestohide')" href="../_variables/typestohide.html">$typestohide</a> = array(
<a name="l2676"><span class="linenum">2676</span></a>              self::TYPE_CATEGORY,
<a name="l2677"><span class="linenum">2677</span></a>              self::TYPE_COURSE,
<a name="l2678"><span class="linenum">2678</span></a>              self::TYPE_SECTION,
<a name="l2679"><span class="linenum">2679</span></a>              self::TYPE_ACTIVITY
<a name="l2680"><span class="linenum">2680</span></a>          );
<a name="l2681"><span class="linenum">2681</span></a>  
<a name="l2682"><span class="linenum">2682</span></a>          foreach (<a class="var it51" onMouseOver="hilite(51)" onMouseOut="lolite()" onClick="logVariable('nodes')" href="../_variables/nodes.html">$nodes</a> as <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l2683"><span class="linenum">2683</span></a>  <span class="comment">            // We need to generate the full site node</span>
<a name="l2684"><span class="linenum">2684</span></a>              if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == self::TYPE_COURSE &amp;&amp; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('key')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/key.html">key</a> == <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2685"><span class="linenum">2685</span></a>                  continue;
<a name="l2686"><span class="linenum">2686</span></a>              }
<a name="l2687"><span class="linenum">2687</span></a>              foreach (<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('children')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l2688"><span class="linenum">2688</span></a>                  <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('hide')" href="../_functions/hide.html" onMouseOver="funcPopup(event,'hide')">hide</a>(<a class="var it37451" onMouseOver="hilite(37451)" onMouseOut="lolite()" onClick="logVariable('typestohide')" href="../_variables/typestohide.html">$typestohide</a>);
<a name="l2689"><span class="linenum">2689</span></a>              }
<a name="l2690"><span class="linenum">2690</span></a>          }
<a name="l2691"><span class="linenum">2691</span></a>          return true;
<a name="l2692"><span class="linenum">2692</span></a>      }
<a name="l2693"><span class="linenum">2693</span></a>      <span class="comment">/**</span>
<a name="l2694"><span class="linenum">2694</span></a>  <span class="comment">     * Attempts to get the navigation with the given key from this nodes children.</span>
<a name="l2695"><span class="linenum">2695</span></a>  <span class="comment">     *</span>
<a name="l2696"><span class="linenum">2696</span></a>  <span class="comment">     * This function only looks at this nodes children, it does NOT look recursivily.</span>
<a name="l2697"><span class="linenum">2697</span></a>  <span class="comment">     * If the node can't be found then false is returned.</span>
<a name="l2698"><span class="linenum">2698</span></a>  <span class="comment">     *</span>
<a name="l2699"><span class="linenum">2699</span></a>  <span class="comment">     * If you need to search recursivily then use the {@link global_navigation::find()} method.</span>
<a name="l2700"><span class="linenum">2700</span></a>  <span class="comment">     *</span>
<a name="l2701"><span class="linenum">2701</span></a>  <span class="comment">     * Note: If you are trying to set the active node {@link navigation_node::override_active_url()}</span>
<a name="l2702"><span class="linenum">2702</span></a>  <span class="comment">     * may be of more use to you.</span>
<a name="l2703"><span class="linenum">2703</span></a>  <span class="comment">     *</span>
<a name="l2704"><span class="linenum">2704</span></a>  <span class="comment">     * @param string|int $key The key of the node you wish to receive.</span>
<a name="l2705"><span class="linenum">2705</span></a>  <span class="comment">     * @param int $type One of navigation_node::TYPE_*</span>
<a name="l2706"><span class="linenum">2706</span></a>  <span class="comment">     * @return navigation_node|false</span>
<a name="l2707"><span class="linenum">2707</span></a>  <span class="comment">     */</span>
<a name="l2708"><span class="linenum">2708</span></a>      public function <a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = null) {
<a name="l2709"><span class="linenum">2709</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('initialised')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/initialised.html">initialised</a>) {
<a name="l2710"><span class="linenum">2710</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('initialise')" href="../_functions/initialise.html" onMouseOver="funcPopup(event,'initialise')">initialise</a>();
<a name="l2711"><span class="linenum">2711</span></a>          }
<a name="l2712"><span class="linenum">2712</span></a>          return parent::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l2713"><span class="linenum">2713</span></a>      }
<a name="l2714"><span class="linenum">2714</span></a>  
<a name="l2715"><span class="linenum">2715</span></a>      <span class="comment">/**</span>
<a name="l2716"><span class="linenum">2716</span></a>  <span class="comment">     * Searches this nodes children and their children to find a navigation node</span>
<a name="l2717"><span class="linenum">2717</span></a>  <span class="comment">     * with the matching key and type.</span>
<a name="l2718"><span class="linenum">2718</span></a>  <span class="comment">     *</span>
<a name="l2719"><span class="linenum">2719</span></a>  <span class="comment">     * This method is recursive and searches children so until either a node is</span>
<a name="l2720"><span class="linenum">2720</span></a>  <span class="comment">     * found or there are no more nodes to search.</span>
<a name="l2721"><span class="linenum">2721</span></a>  <span class="comment">     *</span>
<a name="l2722"><span class="linenum">2722</span></a>  <span class="comment">     * If you know that the node being searched for is a child of this node</span>
<a name="l2723"><span class="linenum">2723</span></a>  <span class="comment">     * then use the {@link global_navigation::get()} method instead.</span>
<a name="l2724"><span class="linenum">2724</span></a>  <span class="comment">     *</span>
<a name="l2725"><span class="linenum">2725</span></a>  <span class="comment">     * Note: If you are trying to set the active node {@link navigation_node::override_active_url()}</span>
<a name="l2726"><span class="linenum">2726</span></a>  <span class="comment">     * may be of more use to you.</span>
<a name="l2727"><span class="linenum">2727</span></a>  <span class="comment">     *</span>
<a name="l2728"><span class="linenum">2728</span></a>  <span class="comment">     * @param string|int $key The key of the node you wish to receive.</span>
<a name="l2729"><span class="linenum">2729</span></a>  <span class="comment">     * @param int $type One of navigation_node::TYPE_*</span>
<a name="l2730"><span class="linenum">2730</span></a>  <span class="comment">     * @return navigation_node|false</span>
<a name="l2731"><span class="linenum">2731</span></a>  <span class="comment">     */</span>
<a name="l2732"><span class="linenum">2732</span></a>      public function <a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>) {
<a name="l2733"><span class="linenum">2733</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('initialised')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/initialised.html">initialised</a>) {
<a name="l2734"><span class="linenum">2734</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('initialise')" href="../_functions/initialise.html" onMouseOver="funcPopup(event,'initialise')">initialise</a>();
<a name="l2735"><span class="linenum">2735</span></a>          }
<a name="l2736"><span class="linenum">2736</span></a>          if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == self::TYPE_ROOTNODE &amp;&amp; <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>)) {
<a name="l2737"><span class="linenum">2737</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>];
<a name="l2738"><span class="linenum">2738</span></a>          }
<a name="l2739"><span class="linenum">2739</span></a>          return parent::<a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l2740"><span class="linenum">2740</span></a>      }
<a name="l2741"><span class="linenum">2741</span></a>  
<a name="l2742"><span class="linenum">2742</span></a>      <span class="comment">/**</span>
<a name="l2743"><span class="linenum">2743</span></a>  <span class="comment">     * They've expanded the 'my courses' branch.</span>
<a name="l2744"><span class="linenum">2744</span></a>  <span class="comment">     */</span>
<a name="l2745"><span class="linenum">2745</span></a>      protected function <a class="function" onClick="logFunction('load_courses_enrolled')" href="../_functions/load_courses_enrolled.html" onMouseOver="funcPopup(event,'load_courses_enrolled')">load_courses_enrolled</a>() {
<a name="l2746"><span class="linenum">2746</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2747"><span class="linenum">2747</span></a>          <a class="var it4036" onMouseOver="hilite(4036)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a> = 'visible DESC';
<a name="l2748"><span class="linenum">2748</span></a>  <span class="comment">        // Prevent undefined $CFG-&gt;navsortmycoursessort errors.</span>
<a name="l2749"><span class="linenum">2749</span></a>          if (empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navsortmycoursessort')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navsortmycoursessort.html">navsortmycoursessort</a>)) {
<a name="l2750"><span class="linenum">2750</span></a>              <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navsortmycoursessort')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navsortmycoursessort.html">navsortmycoursessort</a> = 'sortorder';
<a name="l2751"><span class="linenum">2751</span></a>          }
<a name="l2752"><span class="linenum">2752</span></a>  <span class="comment">        // Append the chosen sortorder.</span>
<a name="l2753"><span class="linenum">2753</span></a>          <a class="var it4036" onMouseOver="hilite(4036)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a> = <a class="var it4036" onMouseOver="hilite(4036)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a> . ',' . <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navsortmycoursessort')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navsortmycoursessort.html">navsortmycoursessort</a> . ' ASC';
<a name="l2754"><span class="linenum">2754</span></a>          <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="function" onClick="logFunction('enrol_get_my_courses')" href="../_functions/enrol_get_my_courses.html" onMouseOver="funcPopup(event,'enrol_get_my_courses')">enrol_get_my_courses</a>(null, <a class="var it4036" onMouseOver="hilite(4036)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../_variables/sortorder.html">$sortorder</a>);
<a name="l2755"><span class="linenum">2755</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('show_my_categories')" href="../_functions/show_my_categories.html" onMouseOver="funcPopup(event,'show_my_categories')">show_my_categories</a>()) {
<a name="l2756"><span class="linenum">2756</span></a>  <span class="comment">            // OK Actually we are loading categories. We only want to load categories that have a parent of 0.</span>
<a name="l2757"><span class="linenum">2757</span></a>  <span class="comment">            // In order to make sure we load everything required we must first find the categories that are not</span>
<a name="l2758"><span class="linenum">2758</span></a>  <span class="comment">            // base categories and work out the bottom category in thier path.</span>
<a name="l2759"><span class="linenum">2759</span></a>              <a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a> = array();
<a name="l2760"><span class="linenum">2760</span></a>              foreach (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> as <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l2761"><span class="linenum">2761</span></a>                  <a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>[] = <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/category.html">category</a>;
<a name="l2762"><span class="linenum">2762</span></a>              }
<a name="l2763"><span class="linenum">2763</span></a>              <a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>);
<a name="l2764"><span class="linenum">2764</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>);
<a name="l2765"><span class="linenum">2765</span></a>              <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_select')" href="../_functions/get_recordset_select.html" onMouseOver="funcPopup(event,'get_recordset_select')">get_recordset_select</a>('course_categories', 'id '.<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>.' AND parent &lt;&gt; 0', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, 'sortorder, id', 'id, path');
<a name="l2766"><span class="linenum">2766</span></a>              foreach (<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l2767"><span class="linenum">2767</span></a>                  <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('/', <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('path')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/path.html">path</a>,'/'));
<a name="l2768"><span class="linenum">2768</span></a>                  <a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>[] = <a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>);
<a name="l2769"><span class="linenum">2769</span></a>              }
<a name="l2770"><span class="linenum">2770</span></a>              <a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>);
<a name="l2771"><span class="linenum">2771</span></a>              <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2772"><span class="linenum">2772</span></a>  
<a name="l2773"><span class="linenum">2773</span></a>  <span class="comment">            // Now we load the base categories.</span>
<a name="l2774"><span class="linenum">2774</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>);
<a name="l2775"><span class="linenum">2775</span></a>              <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_select')" href="../_functions/get_recordset_select.html" onMouseOver="funcPopup(event,'get_recordset_select')">get_recordset_select</a>('course_categories', 'id '.<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>.' AND parent = 0', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, 'sortorder, id');
<a name="l2776"><span class="linenum">2776</span></a>              foreach (<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l2777"><span class="linenum">2777</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_category')" href="../_functions/add_category.html" onMouseOver="funcPopup(event,'add_category')">add_category</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['mycourses'], self::TYPE_MY_CATEGORY);
<a name="l2778"><span class="linenum">2778</span></a>              }
<a name="l2779"><span class="linenum">2779</span></a>              <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2780"><span class="linenum">2780</span></a>          } else {
<a name="l2781"><span class="linenum">2781</span></a>              foreach (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> as <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l2782"><span class="linenum">2782</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, false, self::COURSE_MY);
<a name="l2783"><span class="linenum">2783</span></a>              }
<a name="l2784"><span class="linenum">2784</span></a>          }
<a name="l2785"><span class="linenum">2785</span></a>      }
<a name="l2786"><span class="linenum">2786</span></a>  }
<a name="l2787"><span class="linenum">2787</span></a>  
<a name="l2788"><span class="linenum">2788</span></a>  <span class="comment">/**</span>
<a name="l2789"><span class="linenum">2789</span></a>  <span class="comment"> * The global navigation class used especially for AJAX requests.</span>
<a name="l2790"><span class="linenum">2790</span></a>  <span class="comment"> *</span>
<a name="l2791"><span class="linenum">2791</span></a>  <span class="comment"> * The primary methods that are used in the global navigation class have been overriden</span>
<a name="l2792"><span class="linenum">2792</span></a>  <span class="comment"> * to ensure that only the relevant branch is generated at the root of the tree.</span>
<a name="l2793"><span class="linenum">2793</span></a>  <span class="comment"> * This can be done because AJAX is only used when the backwards structure for the</span>
<a name="l2794"><span class="linenum">2794</span></a>  <span class="comment"> * requested branch exists.</span>
<a name="l2795"><span class="linenum">2795</span></a>  <span class="comment"> * This has been done only because it shortens the amounts of information that is generated</span>
<a name="l2796"><span class="linenum">2796</span></a>  <span class="comment"> * which of course will speed up the response time.. because no one likes laggy AJAX.</span>
<a name="l2797"><span class="linenum">2797</span></a>  <span class="comment"> *</span>
<a name="l2798"><span class="linenum">2798</span></a>  <span class="comment"> * @package   core</span>
<a name="l2799"><span class="linenum">2799</span></a>  <span class="comment"> * @category  navigation</span>
<a name="l2800"><span class="linenum">2800</span></a>  <span class="comment"> * @copyright 2009 Sam Hemelryk</span>
<a name="l2801"><span class="linenum">2801</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l2802"><span class="linenum">2802</span></a>  <span class="comment"> */</span>
<a name="l2803"><span class="linenum">2803</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('global_navigation_for_ajax')" href="../_classes/global_navigation_for_ajax.html" onMouseOver="classPopup(event,'global_navigation_for_ajax')">global_navigation_for_ajax</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('global_navigation')" href="../_classes/global_navigation.html" onMouseOver="classPopup(event,'global_navigation')">global_navigation</a> {
<a name="l2804"><span class="linenum">2804</span></a>  
<a name="l2805"><span class="linenum">2805</span></a>  <span class="comment">    /** @var int used for determining what type of navigation_node::TYPE_* is being used */</span>
<a name="l2806"><span class="linenum">2806</span></a>      protected <a class="var it31441" onMouseOver="hilite(31441)" onMouseOut="lolite()" onClick="logVariable('branchtype')" href="../_variables/branchtype.html">$branchtype</a>;
<a name="l2807"><span class="linenum">2807</span></a>  
<a name="l2808"><span class="linenum">2808</span></a>  <span class="comment">    /** @var int the instance id */</span>
<a name="l2809"><span class="linenum">2809</span></a>      protected <a class="var it1622" onMouseOver="hilite(1622)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>;
<a name="l2810"><span class="linenum">2810</span></a>  
<a name="l2811"><span class="linenum">2811</span></a>  <span class="comment">    /** @var array Holds an array of expandable nodes */</span>
<a name="l2812"><span class="linenum">2812</span></a>      protected <a class="var it18829" onMouseOver="hilite(18829)" onMouseOut="lolite()" onClick="logVariable('expandable')" href="../_variables/expandable.html">$expandable</a> = array();
<a name="l2813"><span class="linenum">2813</span></a>  
<a name="l2814"><span class="linenum">2814</span></a>      <span class="comment">/**</span>
<a name="l2815"><span class="linenum">2815</span></a>  <span class="comment">     * Constructs the navigation for use in an AJAX request</span>
<a name="l2816"><span class="linenum">2816</span></a>  <span class="comment">     *</span>
<a name="l2817"><span class="linenum">2817</span></a>  <span class="comment">     * @param moodle_page $page moodle_page object</span>
<a name="l2818"><span class="linenum">2818</span></a>  <span class="comment">     * @param int $branchtype</span>
<a name="l2819"><span class="linenum">2819</span></a>  <span class="comment">     * @param int $id</span>
<a name="l2820"><span class="linenum">2820</span></a>  <span class="comment">     */</span>
<a name="l2821"><span class="linenum">2821</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it31441" onMouseOver="hilite(31441)" onMouseOut="lolite()" onClick="logVariable('branchtype')" href="../_variables/branchtype.html">$branchtype</a>, <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>) {
<a name="l2822"><span class="linenum">2822</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>;
<a name="l2823"><span class="linenum">2823</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a> = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_cache')" href="../_classes/navigation_cache.html" onMouseOver="classPopup(event,'navigation_cache')">navigation_cache</a>(<a class="constant" onClick="logConstant('NAVIGATION_CACHE_NAME')" href="../_constants/NAVIGATION_CACHE_NAME.html" onMouseOver="constPopup(event,'NAVIGATION_CACHE_NAME')">NAVIGATION_CACHE_NAME</a>);
<a name="l2824"><span class="linenum">2824</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_node_collection')" href="../_classes/navigation_node_collection.html" onMouseOver="classPopup(event,'navigation_node_collection')">navigation_node_collection</a>();
<a name="l2825"><span class="linenum">2825</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('branchtype')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/branchtype.html">branchtype</a> = <a class="var it31441" onMouseOver="hilite(31441)" onMouseOut="lolite()" onClick="logVariable('branchtype')" href="../_variables/branchtype.html">$branchtype</a>;
<a name="l2826"><span class="linenum">2826</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> = <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../_variables/id.html">$id</a>;
<a name="l2827"><span class="linenum">2827</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('initialise')" href="../_functions/initialise.html" onMouseOver="funcPopup(event,'initialise')">initialise</a>();
<a name="l2828"><span class="linenum">2828</span></a>      }
<a name="l2829"><span class="linenum">2829</span></a>      <span class="comment">/**</span>
<a name="l2830"><span class="linenum">2830</span></a>  <span class="comment">     * Initialise the navigation given the type and id for the branch to expand.</span>
<a name="l2831"><span class="linenum">2831</span></a>  <span class="comment">     *</span>
<a name="l2832"><span class="linenum">2832</span></a>  <span class="comment">     * @return array An array of the expandable nodes</span>
<a name="l2833"><span class="linenum">2833</span></a>  <span class="comment">     */</span>
<a name="l2834"><span class="linenum">2834</span></a>      public function <a class="function" onClick="logFunction('initialise')" href="../_functions/initialise.html" onMouseOver="funcPopup(event,'initialise')">initialise</a>() {
<a name="l2835"><span class="linenum">2835</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l2836"><span class="linenum">2836</span></a>  
<a name="l2837"><span class="linenum">2837</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('initialised')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/initialised.html">initialised</a> || <a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l2838"><span class="linenum">2838</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('expandable')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/expandable.html">expandable</a>;
<a name="l2839"><span class="linenum">2839</span></a>          }
<a name="l2840"><span class="linenum">2840</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('initialised')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/initialised.html">initialised</a> = true;
<a name="l2841"><span class="linenum">2841</span></a>  
<a name="l2842"><span class="linenum">2842</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a> = array();
<a name="l2843"><span class="linenum">2843</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['site']    = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>);
<a name="l2844"><span class="linenum">2844</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['mycourses'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('mycourses'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/my'), self::TYPE_ROOTNODE, null, 'mycourses');
<a name="l2845"><span class="linenum">2845</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['courses'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courses'), null, self::TYPE_ROOTNODE, null, 'courses');
<a name="l2846"><span class="linenum">2846</span></a>  <span class="comment">        // The courses branch is always displayed, and is always expandable (although may be empty).</span>
<a name="l2847"><span class="linenum">2847</span></a>  <span class="comment">        // This mimicks what is done during {@link global_navigation::initialise()}.</span>
<a name="l2848"><span class="linenum">2848</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rootnodes')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/rootnodes.html">rootnodes</a>['courses']-&gt;isexpandable = true;
<a name="l2849"><span class="linenum">2849</span></a>  
<a name="l2850"><span class="linenum">2850</span></a>  <span class="comment">        // Branchtype will be one of navigation_node::TYPE_*</span>
<a name="l2851"><span class="linenum">2851</span></a>          switch (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('branchtype')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/branchtype.html">branchtype</a>) {
<a name="l2852"><span class="linenum">2852</span></a>              case 0:
<a name="l2853"><span class="linenum">2853</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> === 'mycourses') {
<a name="l2854"><span class="linenum">2854</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_courses_enrolled')" href="../_functions/load_courses_enrolled.html" onMouseOver="funcPopup(event,'load_courses_enrolled')">load_courses_enrolled</a>();
<a name="l2855"><span class="linenum">2855</span></a>                  } else if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> === 'courses') {
<a name="l2856"><span class="linenum">2856</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_courses_other')" href="../_functions/load_courses_other.html" onMouseOver="funcPopup(event,'load_courses_other')">load_courses_other</a>();
<a name="l2857"><span class="linenum">2857</span></a>                  }
<a name="l2858"><span class="linenum">2858</span></a>                  break;
<a name="l2859"><span class="linenum">2859</span></a>              case self::TYPE_CATEGORY :
<a name="l2860"><span class="linenum">2860</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_category')" href="../_functions/load_category.html" onMouseOver="funcPopup(event,'load_category')">load_category</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>);
<a name="l2861"><span class="linenum">2861</span></a>                  break;
<a name="l2862"><span class="linenum">2862</span></a>              case self::TYPE_MY_CATEGORY :
<a name="l2863"><span class="linenum">2863</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_category')" href="../_functions/load_category.html" onMouseOver="funcPopup(event,'load_category')">load_category</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>, self::TYPE_MY_CATEGORY);
<a name="l2864"><span class="linenum">2864</span></a>                  break;
<a name="l2865"><span class="linenum">2865</span></a>              case self::TYPE_COURSE :
<a name="l2866"><span class="linenum">2866</span></a>                  <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2867"><span class="linenum">2867</span></a>                  if (!<a class="function" onClick="logFunction('can_access_course')" href="../_functions/can_access_course.html" onMouseOver="funcPopup(event,'can_access_course')">can_access_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, null, '', true)) {
<a name="l2868"><span class="linenum">2868</span></a>  <span class="comment">                    // Thats OK all courses are expandable by default. We don't need to actually expand it we can just</span>
<a name="l2869"><span class="linenum">2869</span></a>  <span class="comment">                    // add the course node and break. This leads to an empty node.</span>
<a name="l2870"><span class="linenum">2870</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2871"><span class="linenum">2871</span></a>                      break;
<a name="l2872"><span class="linenum">2872</span></a>                  }
<a name="l2873"><span class="linenum">2873</span></a>                  <a class="function" onClick="logFunction('require_course_login')" href="../_functions/require_course_login.html" onMouseOver="funcPopup(event,'require_course_login')">require_course_login</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, true, null, false, true);
<a name="l2874"><span class="linenum">2874</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2875"><span class="linenum">2875</span></a>                  <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2876"><span class="linenum">2876</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course_essentials')" href="../_functions/add_course_essentials.html" onMouseOver="funcPopup(event,'add_course_essentials')">add_course_essentials</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2877"><span class="linenum">2877</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_course_sections')" href="../_functions/load_course_sections.html" onMouseOver="funcPopup(event,'load_course_sections')">load_course_sections</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>);
<a name="l2878"><span class="linenum">2878</span></a>                  break;
<a name="l2879"><span class="linenum">2879</span></a>              case self::TYPE_SECTION :
<a name="l2880"><span class="linenum">2880</span></a>                  <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = 'SELECT c.*, cs.section AS sectionnumber
<a name="l2881"><span class="linenum">2881</span></a>                          FROM {course} c
<a name="l2882"><span class="linenum">2882</span></a>                          LEFT JOIN {course_sections} cs ON cs.course = c.id
<a name="l2883"><span class="linenum">2883</span></a>                          WHERE cs.id = ?';
<a name="l2884"><span class="linenum">2884</span></a>                  <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, array(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>), <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2885"><span class="linenum">2885</span></a>                  <a class="function" onClick="logFunction('require_course_login')" href="../_functions/require_course_login.html" onMouseOver="funcPopup(event,'require_course_login')">require_course_login</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, true, null, false, true);
<a name="l2886"><span class="linenum">2886</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2887"><span class="linenum">2887</span></a>                  <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2888"><span class="linenum">2888</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course_essentials')" href="../_functions/add_course_essentials.html" onMouseOver="funcPopup(event,'add_course_essentials')">add_course_essentials</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2889"><span class="linenum">2889</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_course_sections')" href="../_functions/load_course_sections.html" onMouseOver="funcPopup(event,'load_course_sections')">load_course_sections</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('sectionnumber')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/sectionnumber.html">sectionnumber</a>);
<a name="l2890"><span class="linenum">2890</span></a>                  break;
<a name="l2891"><span class="linenum">2891</span></a>              case self::TYPE_ACTIVITY :
<a name="l2892"><span class="linenum">2892</span></a>                  <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT c.*
<a name="l2893"><span class="linenum">2893</span></a>                            FROM {course} c
<a name="l2894"><span class="linenum">2894</span></a>                            JOIN {course_modules} cm ON cm.course = c.id
<a name="l2895"><span class="linenum">2895</span></a>                           WHERE cm.id = :cmid&quot;;
<a name="l2896"><span class="linenum">2896</span></a>                  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('cmid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>);
<a name="l2897"><span class="linenum">2897</span></a>                  <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l2898"><span class="linenum">2898</span></a>                  <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2899"><span class="linenum">2899</span></a>                  <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_cm')" href="../_functions/get_cm.html" onMouseOver="funcPopup(event,'get_cm')">get_cm</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>);
<a name="l2900"><span class="linenum">2900</span></a>                  <a class="function" onClick="logFunction('require_course_login')" href="../_functions/require_course_login.html" onMouseOver="funcPopup(event,'require_course_login')">require_course_login</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, true, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, false, true);
<a name="l2901"><span class="linenum">2901</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="class" onClick="logClass('context_module')" href="../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2902"><span class="linenum">2902</span></a>                  <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_course')" href="../_functions/load_course.html" onMouseOver="funcPopup(event,'load_course')">load_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2903"><span class="linenum">2903</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_course_sections')" href="../_functions/load_course_sections.html" onMouseOver="funcPopup(event,'load_course_sections')">load_course_sections</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, null, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l2904"><span class="linenum">2904</span></a>                  <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a> = <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('find')" href="../_functions/find.html" onMouseOver="funcPopup(event,'find')">find</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, self::TYPE_ACTIVITY);
<a name="l2905"><span class="linenum">2905</span></a>                  if (<a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>) {
<a name="l2906"><span class="linenum">2906</span></a>                      <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_activity')" href="../_functions/load_activity.html" onMouseOver="funcPopup(event,'load_activity')">load_activity</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it15869" onMouseOver="hilite(15869)" onMouseOut="lolite()" onClick="logVariable('activitynode')" href="../_variables/activitynode.html">$activitynode</a>);
<a name="l2907"><span class="linenum">2907</span></a>                  }
<a name="l2908"><span class="linenum">2908</span></a>                  break;
<a name="l2909"><span class="linenum">2909</span></a>              default:
<a name="l2910"><span class="linenum">2910</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('Exception')" href="../_classes/exception.html" onMouseOver="classPopup(event,'exception')">Exception</a>('Unknown type');
<a name="l2911"><span class="linenum">2911</span></a>                  return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('expandable')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/expandable.html">expandable</a>;
<a name="l2912"><span class="linenum">2912</span></a>          }
<a name="l2913"><span class="linenum">2913</span></a>  
<a name="l2914"><span class="linenum">2914</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;contextlevel == <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a> &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;instanceid != <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l2915"><span class="linenum">2915</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_for_user')" href="../_functions/load_for_user.html" onMouseOver="funcPopup(event,'load_for_user')">load_for_user</a>(null, true);
<a name="l2916"><span class="linenum">2916</span></a>          }
<a name="l2917"><span class="linenum">2917</span></a>  
<a name="l2918"><span class="linenum">2918</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_expandable')" href="../_functions/find_expandable.html" onMouseOver="funcPopup(event,'find_expandable')">find_expandable</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('expandable')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/expandable.html">expandable</a>);
<a name="l2919"><span class="linenum">2919</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('expandable')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/expandable.html">expandable</a>;
<a name="l2920"><span class="linenum">2920</span></a>      }
<a name="l2921"><span class="linenum">2921</span></a>  
<a name="l2922"><span class="linenum">2922</span></a>      <span class="comment">/**</span>
<a name="l2923"><span class="linenum">2923</span></a>  <span class="comment">     * They've expanded the general 'courses' branch.</span>
<a name="l2924"><span class="linenum">2924</span></a>  <span class="comment">     */</span>
<a name="l2925"><span class="linenum">2925</span></a>      protected function <a class="function" onClick="logFunction('load_courses_other')" href="../_functions/load_courses_other.html" onMouseOver="funcPopup(event,'load_courses_other')">load_courses_other</a>() {
<a name="l2926"><span class="linenum">2926</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_all_courses')" href="../_functions/load_all_courses.html" onMouseOver="funcPopup(event,'load_all_courses')">load_all_courses</a>();
<a name="l2927"><span class="linenum">2927</span></a>      }
<a name="l2928"><span class="linenum">2928</span></a>  
<a name="l2929"><span class="linenum">2929</span></a>      <span class="comment">/**</span>
<a name="l2930"><span class="linenum">2930</span></a>  <span class="comment">     * Loads a single category into the AJAX navigation.</span>
<a name="l2931"><span class="linenum">2931</span></a>  <span class="comment">     *</span>
<a name="l2932"><span class="linenum">2932</span></a>  <span class="comment">     * This function is special in that it doesn't concern itself with the parent of</span>
<a name="l2933"><span class="linenum">2933</span></a>  <span class="comment">     * the requested category or its siblings.</span>
<a name="l2934"><span class="linenum">2934</span></a>  <span class="comment">     * This is because with the AJAX navigation we know exactly what is wanted and only need to</span>
<a name="l2935"><span class="linenum">2935</span></a>  <span class="comment">     * request that.</span>
<a name="l2936"><span class="linenum">2936</span></a>  <span class="comment">     *</span>
<a name="l2937"><span class="linenum">2937</span></a>  <span class="comment">     * @global moodle_database $DB</span>
<a name="l2938"><span class="linenum">2938</span></a>  <span class="comment">     * @param int $categoryid id of category to load in navigation.</span>
<a name="l2939"><span class="linenum">2939</span></a>  <span class="comment">     * @param int $nodetype type of node, if category is under MyHome then it's TYPE_MY_CATEGORY</span>
<a name="l2940"><span class="linenum">2940</span></a>  <span class="comment">     * @return void.</span>
<a name="l2941"><span class="linenum">2941</span></a>  <span class="comment">     */</span>
<a name="l2942"><span class="linenum">2942</span></a>      protected function <a class="function" onClick="logFunction('load_category')" href="../_functions/load_category.html" onMouseOver="funcPopup(event,'load_category')">load_category</a>(<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>, <a class="var it15868" onMouseOver="hilite(15868)" onMouseOut="lolite()" onClick="logVariable('nodetype')" href="../_variables/nodetype.html">$nodetype</a> = self::TYPE_CATEGORY) {
<a name="l2943"><span class="linenum">2943</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2944"><span class="linenum">2944</span></a>  
<a name="l2945"><span class="linenum">2945</span></a>          <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> = 20;
<a name="l2946"><span class="linenum">2946</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navcourselimit')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navcourselimit.html">navcourselimit</a>)) {
<a name="l2947"><span class="linenum">2947</span></a>              <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> = (int)<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navcourselimit')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navcourselimit.html">navcourselimit</a>;
<a name="l2948"><span class="linenum">2948</span></a>          }
<a name="l2949"><span class="linenum">2949</span></a>  
<a name="l2950"><span class="linenum">2950</span></a>          <a class="var it37478" onMouseOver="hilite(37478)" onMouseOut="lolite()" onClick="logVariable('catcontextsql')" href="../_variables/catcontextsql.html">$catcontextsql</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l2951"><span class="linenum">2951</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT cc.*, <a class="var it37478" onMouseOver="hilite(37478)" onMouseOut="lolite()" onClick="logVariable('catcontextsql')" href="../_variables/catcontextsql.html">$catcontextsql</a>
<a name="l2952"><span class="linenum">2952</span></a>                    FROM {course_categories} cc
<a name="l2953"><span class="linenum">2953</span></a>                    JOIN {context} ctx ON cc.id = ctx.instanceid
<a name="l2954"><span class="linenum">2954</span></a>                   WHERE ctx.contextlevel = &quot;.<a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>.&quot; AND
<a name="l2955"><span class="linenum">2955</span></a>                         (cc.id = :categoryid1 OR cc.parent = :categoryid2)
<a name="l2956"><span class="linenum">2956</span></a>                ORDER BY cc.depth ASC, cc.sortorder ASC, cc.id ASC&quot;;
<a name="l2957"><span class="linenum">2957</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('categoryid1' =&gt; <a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>, 'categoryid2' =&gt; <a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>);
<a name="l2958"><span class="linenum">2958</span></a>          <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, 0, <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>);
<a name="l2959"><span class="linenum">2959</span></a>          <a class="var it12652" onMouseOver="hilite(12652)" onMouseOut="lolite()" onClick="logVariable('categorylist')" href="../_variables/categorylist.html">$categorylist</a> = array();
<a name="l2960"><span class="linenum">2960</span></a>          <a class="var it7354" onMouseOver="hilite(7354)" onMouseOut="lolite()" onClick="logVariable('subcategories')" href="../_variables/subcategories.html">$subcategories</a> = array();
<a name="l2961"><span class="linenum">2961</span></a>          <a class="var it37519" onMouseOver="hilite(37519)" onMouseOut="lolite()" onClick="logVariable('basecategory')" href="../_variables/basecategory.html">$basecategory</a> = null;
<a name="l2962"><span class="linenum">2962</span></a>          foreach (<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l2963"><span class="linenum">2963</span></a>              <a class="var it12652" onMouseOver="hilite(12652)" onMouseOut="lolite()" onClick="logVariable('categorylist')" href="../_variables/categorylist.html">$categorylist</a>[] = <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2964"><span class="linenum">2964</span></a>              <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>);
<a name="l2965"><span class="linenum">2965</span></a>              if (<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>) {
<a name="l2966"><span class="linenum">2966</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_category')" href="../_functions/add_category.html" onMouseOver="funcPopup(event,'add_category')">add_category</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it15868" onMouseOver="hilite(15868)" onMouseOut="lolite()" onClick="logVariable('nodetype')" href="../_variables/nodetype.html">$nodetype</a>);
<a name="l2967"><span class="linenum">2967</span></a>                  <a class="var it37519" onMouseOver="hilite(37519)" onMouseOut="lolite()" onClick="logVariable('basecategory')" href="../_variables/basecategory.html">$basecategory</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addedcategories')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addedcategories.html">addedcategories</a>[<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>];
<a name="l2968"><span class="linenum">2968</span></a>              } else {
<a name="l2969"><span class="linenum">2969</span></a>                  <a class="var it7354" onMouseOver="hilite(7354)" onMouseOut="lolite()" onClick="logVariable('subcategories')" href="../_variables/subcategories.html">$subcategories</a>[<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>] = <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>;
<a name="l2970"><span class="linenum">2970</span></a>              }
<a name="l2971"><span class="linenum">2971</span></a>          }
<a name="l2972"><span class="linenum">2972</span></a>          <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2973"><span class="linenum">2973</span></a>  
<a name="l2974"><span class="linenum">2974</span></a>  
<a name="l2975"><span class="linenum">2975</span></a>  <span class="comment">        // If category is shown in MyHome then only show enrolled courses and hide empty subcategories,</span>
<a name="l2976"><span class="linenum">2976</span></a>  <span class="comment">        // else show all courses.</span>
<a name="l2977"><span class="linenum">2977</span></a>          if (<a class="var it15868" onMouseOver="hilite(15868)" onMouseOut="lolite()" onClick="logVariable('nodetype')" href="../_variables/nodetype.html">$nodetype</a> === self::TYPE_MY_CATEGORY) {
<a name="l2978"><span class="linenum">2978</span></a>              <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="function" onClick="logFunction('enrol_get_my_courses')" href="../_functions/enrol_get_my_courses.html" onMouseOver="funcPopup(event,'enrol_get_my_courses')">enrol_get_my_courses</a>();
<a name="l2979"><span class="linenum">2979</span></a>              <a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a> = array();
<a name="l2980"><span class="linenum">2980</span></a>  
<a name="l2981"><span class="linenum">2981</span></a>  <span class="comment">            // Only search for categories if basecategory was found.</span>
<a name="l2982"><span class="linenum">2982</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it37519" onMouseOver="hilite(37519)" onMouseOut="lolite()" onClick="logVariable('basecategory')" href="../_variables/basecategory.html">$basecategory</a>)) {
<a name="l2983"><span class="linenum">2983</span></a>  <span class="comment">                // Get course parent category ids.</span>
<a name="l2984"><span class="linenum">2984</span></a>                  foreach (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> as <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l2985"><span class="linenum">2985</span></a>                      <a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>[] = <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/category.html">category</a>;
<a name="l2986"><span class="linenum">2986</span></a>                  }
<a name="l2987"><span class="linenum">2987</span></a>  
<a name="l2988"><span class="linenum">2988</span></a>  <span class="comment">                // Get a unique list of category ids which a part of the path</span>
<a name="l2989"><span class="linenum">2989</span></a>  <span class="comment">                // to user's courses.</span>
<a name="l2990"><span class="linenum">2990</span></a>                  <a class="var it37520" onMouseOver="hilite(37520)" onMouseOut="lolite()" onClick="logVariable('coursesubcategories')" href="../_variables/coursesubcategories.html">$coursesubcategories</a> = array();
<a name="l2991"><span class="linenum">2991</span></a>                  <a class="var it37521" onMouseOver="hilite(37521)" onMouseOut="lolite()" onClick="logVariable('addedsubcategories')" href="../_variables/addedsubcategories.html">$addedsubcategories</a> = array();
<a name="l2992"><span class="linenum">2992</span></a>  
<a name="l2993"><span class="linenum">2993</span></a>                  <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it12063" onMouseOver="hilite(12063)" onMouseOut="lolite()" onClick="logVariable('categoryids')" href="../_variables/categoryids.html">$categoryids</a>);
<a name="l2994"><span class="linenum">2994</span></a>                  <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_select')" href="../_functions/get_recordset_select.html" onMouseOver="funcPopup(event,'get_recordset_select')">get_recordset_select</a>('course_categories', 'id '.<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, 'sortorder, id', 'id, path');
<a name="l2995"><span class="linenum">2995</span></a>  
<a name="l2996"><span class="linenum">2996</span></a>                  foreach (<a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> as <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>){
<a name="l2997"><span class="linenum">2997</span></a>                      <a class="var it37520" onMouseOver="hilite(37520)" onMouseOut="lolite()" onClick="logVariable('coursesubcategories')" href="../_variables/coursesubcategories.html">$coursesubcategories</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it37520" onMouseOver="hilite(37520)" onMouseOut="lolite()" onClick="logVariable('coursesubcategories')" href="../_variables/coursesubcategories.html">$coursesubcategories</a>, <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('/', <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('path')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/path.html">path</a>, &quot;/&quot;)));
<a name="l2998"><span class="linenum">2998</span></a>                  }
<a name="l2999"><span class="linenum">2999</span></a>                  <a class="var it37520" onMouseOver="hilite(37520)" onMouseOut="lolite()" onClick="logVariable('coursesubcategories')" href="../_variables/coursesubcategories.html">$coursesubcategories</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it37520" onMouseOver="hilite(37520)" onMouseOut="lolite()" onClick="logVariable('coursesubcategories')" href="../_variables/coursesubcategories.html">$coursesubcategories</a>);
<a name="l3000"><span class="linenum">3000</span></a>  
<a name="l3001"><span class="linenum">3001</span></a>  <span class="comment">                // Only add a subcategory if it is part of the path to user's course and</span>
<a name="l3002"><span class="linenum">3002</span></a>  <span class="comment">                // wasn't already added.</span>
<a name="l3003"><span class="linenum">3003</span></a>                  foreach (<a class="var it7354" onMouseOver="hilite(7354)" onMouseOut="lolite()" onClick="logVariable('subcategories')" href="../_variables/subcategories.html">$subcategories</a> as <a class="var it17372" onMouseOver="hilite(17372)" onMouseOut="lolite()" onClick="logVariable('subid')" href="../_variables/subid.html">$subid</a> =&gt; <a class="var it4941" onMouseOver="hilite(4941)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a>) {
<a name="l3004"><span class="linenum">3004</span></a>                      if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it17372" onMouseOver="hilite(17372)" onMouseOut="lolite()" onClick="logVariable('subid')" href="../_variables/subid.html">$subid</a>, <a class="var it37520" onMouseOver="hilite(37520)" onMouseOut="lolite()" onClick="logVariable('coursesubcategories')" href="../_variables/coursesubcategories.html">$coursesubcategories</a>) &amp;&amp;
<a name="l3005"><span class="linenum">3005</span></a>                              !<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it17372" onMouseOver="hilite(17372)" onMouseOut="lolite()" onClick="logVariable('subid')" href="../_variables/subid.html">$subid</a>, <a class="var it37521" onMouseOver="hilite(37521)" onMouseOut="lolite()" onClick="logVariable('addedsubcategories')" href="../_variables/addedsubcategories.html">$addedsubcategories</a>)) {
<a name="l3006"><span class="linenum">3006</span></a>                              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_category')" href="../_functions/add_category.html" onMouseOver="funcPopup(event,'add_category')">add_category</a>(<a class="var it4941" onMouseOver="hilite(4941)" onMouseOut="lolite()" onClick="logVariable('subcategory')" href="../_variables/subcategory.html">$subcategory</a>, <a class="var it37519" onMouseOver="hilite(37519)" onMouseOut="lolite()" onClick="logVariable('basecategory')" href="../_variables/basecategory.html">$basecategory</a>, <a class="var it15868" onMouseOver="hilite(15868)" onMouseOut="lolite()" onClick="logVariable('nodetype')" href="../_variables/nodetype.html">$nodetype</a>);
<a name="l3007"><span class="linenum">3007</span></a>                              <a class="var it37521" onMouseOver="hilite(37521)" onMouseOut="lolite()" onClick="logVariable('addedsubcategories')" href="../_variables/addedsubcategories.html">$addedsubcategories</a>[] = <a class="var it17372" onMouseOver="hilite(17372)" onMouseOut="lolite()" onClick="logVariable('subid')" href="../_variables/subid.html">$subid</a>;
<a name="l3008"><span class="linenum">3008</span></a>                      }
<a name="l3009"><span class="linenum">3009</span></a>                  }
<a name="l3010"><span class="linenum">3010</span></a>              }
<a name="l3011"><span class="linenum">3011</span></a>  
<a name="l3012"><span class="linenum">3012</span></a>              foreach (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> as <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l3013"><span class="linenum">3013</span></a>  <span class="comment">                // Add course if it's in category.</span>
<a name="l3014"><span class="linenum">3014</span></a>                  if (<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('category')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/category.html">category</a>, <a class="var it12652" onMouseOver="hilite(12652)" onMouseOut="lolite()" onClick="logVariable('categorylist')" href="../_variables/categorylist.html">$categorylist</a>)) {
<a name="l3015"><span class="linenum">3015</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, true, self::COURSE_MY);
<a name="l3016"><span class="linenum">3016</span></a>                  }
<a name="l3017"><span class="linenum">3017</span></a>              }
<a name="l3018"><span class="linenum">3018</span></a>          } else {
<a name="l3019"><span class="linenum">3019</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it37519" onMouseOver="hilite(37519)" onMouseOut="lolite()" onClick="logVariable('basecategory')" href="../_variables/basecategory.html">$basecategory</a>)) {
<a name="l3020"><span class="linenum">3020</span></a>                  foreach (<a class="var it7354" onMouseOver="hilite(7354)" onMouseOut="lolite()" onClick="logVariable('subcategories')" href="../_variables/subcategories.html">$subcategories</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l3021"><span class="linenum">3021</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_category')" href="../_functions/add_category.html" onMouseOver="funcPopup(event,'add_category')">add_category</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>, <a class="var it37519" onMouseOver="hilite(37519)" onMouseOut="lolite()" onClick="logVariable('basecategory')" href="../_variables/basecategory.html">$basecategory</a>, <a class="var it15868" onMouseOver="hilite(15868)" onMouseOut="lolite()" onClick="logVariable('nodetype')" href="../_variables/nodetype.html">$nodetype</a>);
<a name="l3022"><span class="linenum">3022</span></a>                  }
<a name="l3023"><span class="linenum">3023</span></a>              }
<a name="l3024"><span class="linenum">3024</span></a>              <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset')" href="../_functions/get_recordset.html" onMouseOver="funcPopup(event,'get_recordset')">get_recordset</a>('course', array('category' =&gt; <a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>), 'sortorder', '*' , 0, <a class="var it589" onMouseOver="hilite(589)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>);
<a name="l3025"><span class="linenum">3025</span></a>              foreach (<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> as <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l3026"><span class="linenum">3026</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_course')" href="../_functions/add_course.html" onMouseOver="funcPopup(event,'add_course')">add_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l3027"><span class="linenum">3027</span></a>              }
<a name="l3028"><span class="linenum">3028</span></a>              <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l3029"><span class="linenum">3029</span></a>          }
<a name="l3030"><span class="linenum">3030</span></a>      }
<a name="l3031"><span class="linenum">3031</span></a>  
<a name="l3032"><span class="linenum">3032</span></a>      <span class="comment">/**</span>
<a name="l3033"><span class="linenum">3033</span></a>  <span class="comment">     * Returns an array of expandable nodes</span>
<a name="l3034"><span class="linenum">3034</span></a>  <span class="comment">     * @return array</span>
<a name="l3035"><span class="linenum">3035</span></a>  <span class="comment">     */</span>
<a name="l3036"><span class="linenum">3036</span></a>      public function <a class="function" onClick="logFunction('get_expandable')" href="../_functions/get_expandable.html" onMouseOver="funcPopup(event,'get_expandable')">get_expandable</a>() {
<a name="l3037"><span class="linenum">3037</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('expandable')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/expandable.html">expandable</a>;
<a name="l3038"><span class="linenum">3038</span></a>      }
<a name="l3039"><span class="linenum">3039</span></a>  }
<a name="l3040"><span class="linenum">3040</span></a>  
<a name="l3041"><span class="linenum">3041</span></a>  <span class="comment">/**</span>
<a name="l3042"><span class="linenum">3042</span></a>  <span class="comment"> * Navbar class</span>
<a name="l3043"><span class="linenum">3043</span></a>  <span class="comment"> *</span>
<a name="l3044"><span class="linenum">3044</span></a>  <span class="comment"> * This class is used to manage the navbar, which is initialised from the navigation</span>
<a name="l3045"><span class="linenum">3045</span></a>  <span class="comment"> * object held by PAGE</span>
<a name="l3046"><span class="linenum">3046</span></a>  <span class="comment"> *</span>
<a name="l3047"><span class="linenum">3047</span></a>  <span class="comment"> * @package   core</span>
<a name="l3048"><span class="linenum">3048</span></a>  <span class="comment"> * @category  navigation</span>
<a name="l3049"><span class="linenum">3049</span></a>  <span class="comment"> * @copyright 2009 Sam Hemelryk</span>
<a name="l3050"><span class="linenum">3050</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3051"><span class="linenum">3051</span></a>  <span class="comment"> */</span>
<a name="l3052"><span class="linenum">3052</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('navbar')" href="../_classes/navbar.html" onMouseOver="classPopup(event,'navbar')">navbar</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a> {
<a name="l3053"><span class="linenum">3053</span></a>  <span class="comment">    /** @var bool A switch for whether the navbar is initialised or not */</span>
<a name="l3054"><span class="linenum">3054</span></a>      protected <a class="var it19743" onMouseOver="hilite(19743)" onMouseOut="lolite()" onClick="logVariable('initialised')" href="../_variables/initialised.html">$initialised</a> = false;
<a name="l3055"><span class="linenum">3055</span></a>  <span class="comment">    /** @var mixed keys used to reference the nodes on the navbar */</span>
<a name="l3056"><span class="linenum">3056</span></a>      protected <a class="var it1933" onMouseOver="hilite(1933)" onMouseOut="lolite()" onClick="logVariable('keys')" href="../_variables/keys.html">$keys</a> = array();
<a name="l3057"><span class="linenum">3057</span></a>  <span class="comment">    /** @var null|string content of the navbar */</span>
<a name="l3058"><span class="linenum">3058</span></a>      protected <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = null;
<a name="l3059"><span class="linenum">3059</span></a>  <span class="comment">    /** @var moodle_page object the moodle page that this navbar belongs to */</span>
<a name="l3060"><span class="linenum">3060</span></a>      protected <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>;
<a name="l3061"><span class="linenum">3061</span></a>  <span class="comment">    /** @var bool A switch for whether to ignore the active navigation information */</span>
<a name="l3062"><span class="linenum">3062</span></a>      protected <a class="var it37522" onMouseOver="hilite(37522)" onMouseOut="lolite()" onClick="logVariable('ignoreactive')" href="../_variables/ignoreactive.html">$ignoreactive</a> = false;
<a name="l3063"><span class="linenum">3063</span></a>  <span class="comment">    /** @var bool A switch to let us know if we are in the middle of an install */</span>
<a name="l3064"><span class="linenum">3064</span></a>      protected <a class="var it37523" onMouseOver="hilite(37523)" onMouseOut="lolite()" onClick="logVariable('duringinstall')" href="../_variables/duringinstall.html">$duringinstall</a> = false;
<a name="l3065"><span class="linenum">3065</span></a>  <span class="comment">    /** @var bool A switch for whether the navbar has items */</span>
<a name="l3066"><span class="linenum">3066</span></a>      protected <a class="var it30284" onMouseOver="hilite(30284)" onMouseOut="lolite()" onClick="logVariable('hasitems')" href="../_variables/hasitems.html">$hasitems</a> = false;
<a name="l3067"><span class="linenum">3067</span></a>  <span class="comment">    /** @var array An array of navigation nodes for the navbar */</span>
<a name="l3068"><span class="linenum">3068</span></a>      protected <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>;
<a name="l3069"><span class="linenum">3069</span></a>  <span class="comment">    /** @var array An array of child node objects */</span>
<a name="l3070"><span class="linenum">3070</span></a>      public <a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = array();
<a name="l3071"><span class="linenum">3071</span></a>  <span class="comment">    /** @var bool A switch for whether we want to include the root node in the navbar */</span>
<a name="l3072"><span class="linenum">3072</span></a>      public <a class="var it37524" onMouseOver="hilite(37524)" onMouseOut="lolite()" onClick="logVariable('includesettingsbase')" href="../_variables/includesettingsbase.html">$includesettingsbase</a> = false;
<a name="l3073"><span class="linenum">3073</span></a>  <span class="comment">    /** @var navigation_node[] $prependchildren */</span>
<a name="l3074"><span class="linenum">3074</span></a>      protected <a class="var it37525" onMouseOver="hilite(37525)" onMouseOut="lolite()" onClick="logVariable('prependchildren')" href="../_variables/prependchildren.html">$prependchildren</a> = array();
<a name="l3075"><span class="linenum">3075</span></a>      <span class="comment">/**</span>
<a name="l3076"><span class="linenum">3076</span></a>  <span class="comment">     * The almighty constructor</span>
<a name="l3077"><span class="linenum">3077</span></a>  <span class="comment">     *</span>
<a name="l3078"><span class="linenum">3078</span></a>  <span class="comment">     * @param moodle_page $page</span>
<a name="l3079"><span class="linenum">3079</span></a>  <span class="comment">     */</span>
<a name="l3080"><span class="linenum">3080</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(moodle_page <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>) {
<a name="l3081"><span class="linenum">3081</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3082"><span class="linenum">3082</span></a>          if (<a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l3083"><span class="linenum">3083</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('duringinstall')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/duringinstall.html">duringinstall</a> = true;
<a name="l3084"><span class="linenum">3084</span></a>              return false;
<a name="l3085"><span class="linenum">3085</span></a>          }
<a name="l3086"><span class="linenum">3086</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>;
<a name="l3087"><span class="linenum">3087</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('text')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/text.html">text</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('home');
<a name="l3088"><span class="linenum">3088</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('shorttext')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/shorttext.html">shorttext</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('home');
<a name="l3089"><span class="linenum">3089</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('action')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/action.html">action</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>);
<a name="l3090"><span class="linenum">3090</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('nodetype')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> = self::NODETYPE_BRANCH;
<a name="l3091"><span class="linenum">3091</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/type.html">type</a> = self::TYPE_SYSTEM;
<a name="l3092"><span class="linenum">3092</span></a>      }
<a name="l3093"><span class="linenum">3093</span></a>  
<a name="l3094"><span class="linenum">3094</span></a>      <span class="comment">/**</span>
<a name="l3095"><span class="linenum">3095</span></a>  <span class="comment">     * Quick check to see if the navbar will have items in.</span>
<a name="l3096"><span class="linenum">3096</span></a>  <span class="comment">     *</span>
<a name="l3097"><span class="linenum">3097</span></a>  <span class="comment">     * @return bool Returns true if the navbar will have items, false otherwise</span>
<a name="l3098"><span class="linenum">3098</span></a>  <span class="comment">     */</span>
<a name="l3099"><span class="linenum">3099</span></a>      public function <a class="function" onClick="logFunction('has_items')" href="../_functions/has_items.html" onMouseOver="funcPopup(event,'has_items')">has_items</a>() {
<a name="l3100"><span class="linenum">3100</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('duringinstall')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/duringinstall.html">duringinstall</a>) {
<a name="l3101"><span class="linenum">3101</span></a>              return false;
<a name="l3102"><span class="linenum">3102</span></a>          } else if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('hasitems')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/hasitems.html">hasitems</a> !== false) {
<a name="l3103"><span class="linenum">3103</span></a>              return true;
<a name="l3104"><span class="linenum">3104</span></a>          }
<a name="l3105"><span class="linenum">3105</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>) &gt; 0 || <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prependchildren')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/prependchildren.html">prependchildren</a>) &gt; 0) {
<a name="l3106"><span class="linenum">3106</span></a>  <span class="comment">            // There have been manually added items - there are definitely items.</span>
<a name="l3107"><span class="linenum">3107</span></a>              <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a> = true;
<a name="l3108"><span class="linenum">3108</span></a>          } else if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ignoreactive')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/ignoreactive.html">ignoreactive</a>) {
<a name="l3109"><span class="linenum">3109</span></a>  <span class="comment">            // We will need to initialise the navigation structure to check if there are active items.</span>
<a name="l3110"><span class="linenum">3110</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;navigation-&gt;<a class="function" onClick="logFunction('initialise')" href="../_functions/initialise.html" onMouseOver="funcPopup(event,'initialise')">initialise</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>);
<a name="l3111"><span class="linenum">3111</span></a>              <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a> = (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;navigation-&gt;<a class="function" onClick="logFunction('contains_active_node')" href="../_functions/contains_active_node.html" onMouseOver="funcPopup(event,'contains_active_node')">contains_active_node</a>() || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;settingsnav-&gt;<a class="function" onClick="logFunction('contains_active_node')" href="../_functions/contains_active_node.html" onMouseOver="funcPopup(event,'contains_active_node')">contains_active_node</a>());
<a name="l3112"><span class="linenum">3112</span></a>          }
<a name="l3113"><span class="linenum">3113</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('hasitems')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/hasitems.html">hasitems</a> = <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>;
<a name="l3114"><span class="linenum">3114</span></a>          return <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../_variables/outcome.html">$outcome</a>;
<a name="l3115"><span class="linenum">3115</span></a>      }
<a name="l3116"><span class="linenum">3116</span></a>  
<a name="l3117"><span class="linenum">3117</span></a>      <span class="comment">/**</span>
<a name="l3118"><span class="linenum">3118</span></a>  <span class="comment">     * Turn on/off ignore active</span>
<a name="l3119"><span class="linenum">3119</span></a>  <span class="comment">     *</span>
<a name="l3120"><span class="linenum">3120</span></a>  <span class="comment">     * @param bool $setting</span>
<a name="l3121"><span class="linenum">3121</span></a>  <span class="comment">     */</span>
<a name="l3122"><span class="linenum">3122</span></a>      public function <a class="function" onClick="logFunction('ignore_active')" href="../_functions/ignore_active.html" onMouseOver="funcPopup(event,'ignore_active')">ignore_active</a>(<a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a>=true) {
<a name="l3123"><span class="linenum">3123</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ignoreactive')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/ignoreactive.html">ignoreactive</a> = (<a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a>);
<a name="l3124"><span class="linenum">3124</span></a>      }
<a name="l3125"><span class="linenum">3125</span></a>  
<a name="l3126"><span class="linenum">3126</span></a>      <span class="comment">/**</span>
<a name="l3127"><span class="linenum">3127</span></a>  <span class="comment">     * Gets a navigation node</span>
<a name="l3128"><span class="linenum">3128</span></a>  <span class="comment">     *</span>
<a name="l3129"><span class="linenum">3129</span></a>  <span class="comment">     * @param string|int $key for referencing the navbar nodes</span>
<a name="l3130"><span class="linenum">3130</span></a>  <span class="comment">     * @param int $type navigation_node::TYPE_*</span>
<a name="l3131"><span class="linenum">3131</span></a>  <span class="comment">     * @return navigation_node|bool</span>
<a name="l3132"><span class="linenum">3132</span></a>  <span class="comment">     */</span>
<a name="l3133"><span class="linenum">3133</span></a>      public function <a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = null) {
<a name="l3134"><span class="linenum">3134</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as &amp;<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l3135"><span class="linenum">3135</span></a>              if (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('key')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/key.html">key</a> === <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> &amp;&amp; (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == null || <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('type')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/type.html">type</a>)) {
<a name="l3136"><span class="linenum">3136</span></a>                  return <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>;
<a name="l3137"><span class="linenum">3137</span></a>              }
<a name="l3138"><span class="linenum">3138</span></a>          }
<a name="l3139"><span class="linenum">3139</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prependchildren')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/prependchildren.html">prependchildren</a> as &amp;<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l3140"><span class="linenum">3140</span></a>              if (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('key')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/key.html">key</a> === <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> &amp;&amp; (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == null || <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('type')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/type.html">type</a>)) {
<a name="l3141"><span class="linenum">3141</span></a>                  return <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>;
<a name="l3142"><span class="linenum">3142</span></a>              }
<a name="l3143"><span class="linenum">3143</span></a>          }
<a name="l3144"><span class="linenum">3144</span></a>          return false;
<a name="l3145"><span class="linenum">3145</span></a>      }
<a name="l3146"><span class="linenum">3146</span></a>      <span class="comment">/**</span>
<a name="l3147"><span class="linenum">3147</span></a>  <span class="comment">     * Returns an array of navigation_node's that make up the navbar.</span>
<a name="l3148"><span class="linenum">3148</span></a>  <span class="comment">     *</span>
<a name="l3149"><span class="linenum">3149</span></a>  <span class="comment">     * @return array</span>
<a name="l3150"><span class="linenum">3150</span></a>  <span class="comment">     */</span>
<a name="l3151"><span class="linenum">3151</span></a>      public function <a class="function" onClick="logFunction('get_items')" href="../_functions/get_items.html" onMouseOver="funcPopup(event,'get_items')">get_items</a>() {
<a name="l3152"><span class="linenum">3152</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3153"><span class="linenum">3153</span></a>          <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> = array();
<a name="l3154"><span class="linenum">3154</span></a>  <span class="comment">        // Make sure that navigation is initialised</span>
<a name="l3155"><span class="linenum">3155</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('has_items')" href="../_functions/has_items.html" onMouseOver="funcPopup(event,'has_items')">has_items</a>()) {
<a name="l3156"><span class="linenum">3156</span></a>              return <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>;
<a name="l3157"><span class="linenum">3157</span></a>          }
<a name="l3158"><span class="linenum">3158</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('items')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/items.html">items</a> !== null) {
<a name="l3159"><span class="linenum">3159</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('items')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/items.html">items</a>;
<a name="l3160"><span class="linenum">3160</span></a>          }
<a name="l3161"><span class="linenum">3161</span></a>  
<a name="l3162"><span class="linenum">3162</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>) &gt; 0) {
<a name="l3163"><span class="linenum">3163</span></a>  <span class="comment">            // Add the custom children.</span>
<a name="l3164"><span class="linenum">3164</span></a>              <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> = <a class="phpfunction" onClick="logFunction('array_reverse')" href="../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>);
<a name="l3165"><span class="linenum">3165</span></a>          }
<a name="l3166"><span class="linenum">3166</span></a>  
<a name="l3167"><span class="linenum">3167</span></a>  <span class="comment">        // Check if navigation contains the active node</span>
<a name="l3168"><span class="linenum">3168</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('ignoreactive')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/ignoreactive.html">ignoreactive</a>) {
<a name="l3169"><span class="linenum">3169</span></a>  <span class="comment">            // We will need to ensure the navigation has been initialised.</span>
<a name="l3170"><span class="linenum">3170</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;navigation-&gt;<a class="function" onClick="logFunction('initialise')" href="../_functions/initialise.html" onMouseOver="funcPopup(event,'initialise')">initialise</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>);
<a name="l3171"><span class="linenum">3171</span></a>  <span class="comment">            // Now find the active nodes on both the navigation and settings.</span>
<a name="l3172"><span class="linenum">3172</span></a>              <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;navigation-&gt;<a class="function" onClick="logFunction('find_active_node')" href="../_functions/find_active_node.html" onMouseOver="funcPopup(event,'find_active_node')">find_active_node</a>();
<a name="l3173"><span class="linenum">3173</span></a>              <a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;settingsnav-&gt;<a class="function" onClick="logFunction('find_active_node')" href="../_functions/find_active_node.html" onMouseOver="funcPopup(event,'find_active_node')">find_active_node</a>();
<a name="l3174"><span class="linenum">3174</span></a>  
<a name="l3175"><span class="linenum">3175</span></a>              if (<a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a> &amp;&amp; <a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a>) {
<a name="l3176"><span class="linenum">3176</span></a>  <span class="comment">                // Parse a combined navigation tree</span>
<a name="l3177"><span class="linenum">3177</span></a>                  while (<a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a> &amp;&amp; <a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a>-&gt;<a onClick="logVariable('parent')" class="var it41090" onMouseOver="hilite(41090)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> !== null) {
<a name="l3178"><span class="linenum">3178</span></a>                      if (!<a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a>-&gt;<a onClick="logVariable('mainnavonly')" class="var it41090" onMouseOver="hilite(41090)" onMouseOut="lolite()" href="../_variables/mainnavonly.html">mainnavonly</a>) {
<a name="l3179"><span class="linenum">3179</span></a>                          <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>[] = <a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a>;
<a name="l3180"><span class="linenum">3180</span></a>                      }
<a name="l3181"><span class="linenum">3181</span></a>                      <a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a> = <a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a>-&gt;<a onClick="logVariable('parent')" class="var it41090" onMouseOver="hilite(41090)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>;
<a name="l3182"><span class="linenum">3182</span></a>                  }
<a name="l3183"><span class="linenum">3183</span></a>                  if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('includesettingsbase')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/includesettingsbase.html">includesettingsbase</a>) {
<a name="l3184"><span class="linenum">3184</span></a>  <span class="comment">                    // Removes the first node from the settings (root node) from the list</span>
<a name="l3185"><span class="linenum">3185</span></a>                      <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>);
<a name="l3186"><span class="linenum">3186</span></a>                  }
<a name="l3187"><span class="linenum">3187</span></a>                  while (<a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a> &amp;&amp; <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>-&gt;<a onClick="logVariable('parent')" class="var it41091" onMouseOver="hilite(41091)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> !== null) {
<a name="l3188"><span class="linenum">3188</span></a>                      if (!<a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>-&gt;<a onClick="logVariable('mainnavonly')" class="var it41091" onMouseOver="hilite(41091)" onMouseOut="lolite()" href="../_variables/mainnavonly.html">mainnavonly</a>) {
<a name="l3189"><span class="linenum">3189</span></a>                          <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>[] = <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>;
<a name="l3190"><span class="linenum">3190</span></a>                      }
<a name="l3191"><span class="linenum">3191</span></a>                      if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navshowcategories')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navshowcategories.html">navshowcategories</a>) &amp;&amp;
<a name="l3192"><span class="linenum">3192</span></a>                              <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>-&gt;<a onClick="logVariable('type')" class="var it41091" onMouseOver="hilite(41091)" onMouseOut="lolite()" href="../_variables/type.html">type</a> === self::TYPE_COURSE &amp;&amp;
<a name="l3193"><span class="linenum">3193</span></a>                              <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>-&gt;<a onClick="logVariable('parent')" class="var it41091" onMouseOver="hilite(41091)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>-&gt;key === 'currentcourse') {
<a name="l3194"><span class="linenum">3194</span></a>                          <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_categories')" href="../_functions/get_course_categories.html" onMouseOver="funcPopup(event,'get_course_categories')">get_course_categories</a>());
<a name="l3195"><span class="linenum">3195</span></a>                      }
<a name="l3196"><span class="linenum">3196</span></a>                      <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a> = <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>-&gt;<a onClick="logVariable('parent')" class="var it41091" onMouseOver="hilite(41091)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>;
<a name="l3197"><span class="linenum">3197</span></a>                  }
<a name="l3198"><span class="linenum">3198</span></a>              } else if (<a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>) {
<a name="l3199"><span class="linenum">3199</span></a>  <span class="comment">                // Parse the navigation tree to get the active node</span>
<a name="l3200"><span class="linenum">3200</span></a>                  while (<a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a> &amp;&amp; <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>-&gt;<a onClick="logVariable('parent')" class="var it41091" onMouseOver="hilite(41091)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> !== null) {
<a name="l3201"><span class="linenum">3201</span></a>                      if (!<a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>-&gt;<a onClick="logVariable('mainnavonly')" class="var it41091" onMouseOver="hilite(41091)" onMouseOut="lolite()" href="../_variables/mainnavonly.html">mainnavonly</a>) {
<a name="l3202"><span class="linenum">3202</span></a>                          <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>[] = <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>;
<a name="l3203"><span class="linenum">3203</span></a>                      }
<a name="l3204"><span class="linenum">3204</span></a>                      if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navshowcategories')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navshowcategories.html">navshowcategories</a>) &amp;&amp;
<a name="l3205"><span class="linenum">3205</span></a>                              <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>-&gt;<a onClick="logVariable('type')" class="var it41091" onMouseOver="hilite(41091)" onMouseOut="lolite()" href="../_variables/type.html">type</a> === self::TYPE_COURSE &amp;&amp;
<a name="l3206"><span class="linenum">3206</span></a>                              <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>-&gt;<a onClick="logVariable('parent')" class="var it41091" onMouseOver="hilite(41091)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>-&gt;key === 'currentcourse') {
<a name="l3207"><span class="linenum">3207</span></a>                          <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_course_categories')" href="../_functions/get_course_categories.html" onMouseOver="funcPopup(event,'get_course_categories')">get_course_categories</a>());
<a name="l3208"><span class="linenum">3208</span></a>                      }
<a name="l3209"><span class="linenum">3209</span></a>                      <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a> = <a class="var it37526" onMouseOver="hilite(37526)" onMouseOut="lolite()" onClick="logVariable('navigationactivenode')" href="../_variables/navigationactivenode.html">$navigationactivenode</a>-&gt;<a onClick="logVariable('parent')" class="var it41091" onMouseOver="hilite(41091)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>;
<a name="l3210"><span class="linenum">3210</span></a>                  }
<a name="l3211"><span class="linenum">3211</span></a>              } else if (<a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a>) {
<a name="l3212"><span class="linenum">3212</span></a>  <span class="comment">                // Parse the settings navigation to get the active node</span>
<a name="l3213"><span class="linenum">3213</span></a>                  while (<a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a> &amp;&amp; <a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a>-&gt;<a onClick="logVariable('parent')" class="var it41090" onMouseOver="hilite(41090)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a> !== null) {
<a name="l3214"><span class="linenum">3214</span></a>                      if (!<a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a>-&gt;<a onClick="logVariable('mainnavonly')" class="var it41090" onMouseOver="hilite(41090)" onMouseOut="lolite()" href="../_variables/mainnavonly.html">mainnavonly</a>) {
<a name="l3215"><span class="linenum">3215</span></a>                          <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>[] = <a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a>;
<a name="l3216"><span class="linenum">3216</span></a>                      }
<a name="l3217"><span class="linenum">3217</span></a>                      <a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a> = <a class="var it37527" onMouseOver="hilite(37527)" onMouseOut="lolite()" onClick="logVariable('settingsactivenode')" href="../_variables/settingsactivenode.html">$settingsactivenode</a>-&gt;<a onClick="logVariable('parent')" class="var it41090" onMouseOver="hilite(41090)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>;
<a name="l3218"><span class="linenum">3218</span></a>                  }
<a name="l3219"><span class="linenum">3219</span></a>              }
<a name="l3220"><span class="linenum">3220</span></a>          }
<a name="l3221"><span class="linenum">3221</span></a>  
<a name="l3222"><span class="linenum">3222</span></a>          <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>(array(
<a name="l3223"><span class="linenum">3223</span></a>              'text'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;navigation-&gt;text,
<a name="l3224"><span class="linenum">3224</span></a>              'shorttext'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;navigation-&gt;shorttext,
<a name="l3225"><span class="linenum">3225</span></a>              'key'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;navigation-&gt;key,
<a name="l3226"><span class="linenum">3226</span></a>              'action'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;navigation-&gt;action
<a name="l3227"><span class="linenum">3227</span></a>          ));
<a name="l3228"><span class="linenum">3228</span></a>  
<a name="l3229"><span class="linenum">3229</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prependchildren')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/prependchildren.html">prependchildren</a>) &gt; 0) {
<a name="l3230"><span class="linenum">3230</span></a>  <span class="comment">            // Add the custom children</span>
<a name="l3231"><span class="linenum">3231</span></a>              <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>, <a class="phpfunction" onClick="logFunction('array_reverse')" href="../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prependchildren')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/prependchildren.html">prependchildren</a>));
<a name="l3232"><span class="linenum">3232</span></a>          }
<a name="l3233"><span class="linenum">3233</span></a>  
<a name="l3234"><span class="linenum">3234</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('items')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/items.html">items</a> = <a class="phpfunction" onClick="logFunction('array_reverse')" href="../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../_variables/items.html">$items</a>);
<a name="l3235"><span class="linenum">3235</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('items')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/items.html">items</a>;
<a name="l3236"><span class="linenum">3236</span></a>      }
<a name="l3237"><span class="linenum">3237</span></a>  
<a name="l3238"><span class="linenum">3238</span></a>      <span class="comment">/**</span>
<a name="l3239"><span class="linenum">3239</span></a>  <span class="comment">     * Get the list of categories leading to this course.</span>
<a name="l3240"><span class="linenum">3240</span></a>  <span class="comment">     *</span>
<a name="l3241"><span class="linenum">3241</span></a>  <span class="comment">     * This function is used by {@link navbar::get_items()} to add back the &quot;courses&quot;</span>
<a name="l3242"><span class="linenum">3242</span></a>  <span class="comment">     * node and category chain leading to the current course.  Note that this is only ever</span>
<a name="l3243"><span class="linenum">3243</span></a>  <span class="comment">     * called for the current course, so we don't need to bother taking in any parameters.</span>
<a name="l3244"><span class="linenum">3244</span></a>  <span class="comment">     *</span>
<a name="l3245"><span class="linenum">3245</span></a>  <span class="comment">     * @return array</span>
<a name="l3246"><span class="linenum">3246</span></a>  <span class="comment">     */</span>
<a name="l3247"><span class="linenum">3247</span></a>      private function <a class="function" onClick="logFunction('get_course_categories')" href="../_functions/get_course_categories.html" onMouseOver="funcPopup(event,'get_course_categories')">get_course_categories</a>() {
<a name="l3248"><span class="linenum">3248</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3249"><span class="linenum">3249</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../course/lib.php.html">/course/lib.php</a>');
<a name="l3250"><span class="linenum">3250</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>.'/coursecatlib.php');
<a name="l3251"><span class="linenum">3251</span></a>  
<a name="l3252"><span class="linenum">3252</span></a>          <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a> = array();
<a name="l3253"><span class="linenum">3253</span></a>          <a class="var it3026" onMouseOver="hilite(3026)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a> = 'moodle/category:viewhiddencategories';
<a name="l3254"><span class="linenum">3254</span></a>          <a class="var it37456" onMouseOver="hilite(37456)" onMouseOut="lolite()" onClick="logVariable('showcategories')" href="../_variables/showcategories.html">$showcategories</a> = <a class="class" onClick="logClass('coursecat')" href="../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>::<a class="function" onClick="logFunction('count_all')" href="../_functions/count_all.html" onMouseOver="funcPopup(event,'count_all')">count_all</a>() &gt; 1;
<a name="l3255"><span class="linenum">3255</span></a>  
<a name="l3256"><span class="linenum">3256</span></a>          if (<a class="var it37456" onMouseOver="hilite(37456)" onMouseOut="lolite()" onClick="logVariable('showcategories')" href="../_variables/showcategories.html">$showcategories</a>) {
<a name="l3257"><span class="linenum">3257</span></a>              foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;categories as <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) {
<a name="l3258"><span class="linenum">3258</span></a>                  if (!<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('visible')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>(<a class="var it3026" onMouseOver="hilite(3026)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../_variables/cap.html">$cap</a>, <a class="function" onClick="logFunction('get_category_or_system_context')" href="../_functions/get_category_or_system_context.html" onMouseOver="funcPopup(event,'get_category_or_system_context')">get_category_or_system_context</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/parent.html">parent</a>))) {
<a name="l3259"><span class="linenum">3259</span></a>                      continue;
<a name="l3260"><span class="linenum">3260</span></a>                  }
<a name="l3261"><span class="linenum">3261</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/index.php.html">/course/index.php</a>', array('categoryid' =&gt; <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3262"><span class="linenum">3262</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a> = <a class="function" onClick="logFunction('format_string')" href="../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('name')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, true, array('context' =&gt; <a class="class" onClick="logClass('context_coursecat')" href="../_classes/context_coursecat.html" onMouseOver="classPopup(event,'context_coursecat')">context_coursecat</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)));
<a name="l3263"><span class="linenum">3263</span></a>                  <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a> = <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_CATEGORY, null, <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l3264"><span class="linenum">3264</span></a>                  if (!<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('visible')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>) {
<a name="l3265"><span class="linenum">3265</span></a>                      <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a onClick="logVariable('hidden')" class="var it41086" onMouseOver="hilite(41086)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a> = true;
<a name="l3266"><span class="linenum">3266</span></a>                  }
<a name="l3267"><span class="linenum">3267</span></a>                  <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[] = <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>;
<a name="l3268"><span class="linenum">3268</span></a>              }
<a name="l3269"><span class="linenum">3269</span></a>          }
<a name="l3270"><span class="linenum">3270</span></a>  
<a name="l3271"><span class="linenum">3271</span></a>  <span class="comment">        // Don't show the 'course' node if enrolled in this course.</span>
<a name="l3272"><span class="linenum">3272</span></a>          if (!<a class="function" onClick="logFunction('is_enrolled')" href="../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course-&gt;id, null, '', true))) {
<a name="l3273"><span class="linenum">3273</span></a>              <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;navigation-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>('courses');
<a name="l3274"><span class="linenum">3274</span></a>              if (!<a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>) {
<a name="l3275"><span class="linenum">3275</span></a>  <span class="comment">                // Courses node may not be present.</span>
<a name="l3276"><span class="linenum">3276</span></a>                  <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(
<a name="l3277"><span class="linenum">3277</span></a>                      <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courses'),
<a name="l3278"><span class="linenum">3278</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/index.php.html">/course/index.php</a>'),
<a name="l3279"><span class="linenum">3279</span></a>                      self::TYPE_CONTAINER
<a name="l3280"><span class="linenum">3280</span></a>                  );
<a name="l3281"><span class="linenum">3281</span></a>              }
<a name="l3282"><span class="linenum">3282</span></a>              <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>[] = <a class="var it520" onMouseOver="hilite(520)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>;
<a name="l3283"><span class="linenum">3283</span></a>          }
<a name="l3284"><span class="linenum">3284</span></a>  
<a name="l3285"><span class="linenum">3285</span></a>          return <a class="var it3174" onMouseOver="hilite(3174)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../_variables/categories.html">$categories</a>;
<a name="l3286"><span class="linenum">3286</span></a>      }
<a name="l3287"><span class="linenum">3287</span></a>  
<a name="l3288"><span class="linenum">3288</span></a>      <span class="comment">/**</span>
<a name="l3289"><span class="linenum">3289</span></a>  <span class="comment">     * Add a new navigation_node to the navbar, overrides parent::add</span>
<a name="l3290"><span class="linenum">3290</span></a>  <span class="comment">     *</span>
<a name="l3291"><span class="linenum">3291</span></a>  <span class="comment">     * This function overrides {@link navigation_node::add()} so that we can change</span>
<a name="l3292"><span class="linenum">3292</span></a>  <span class="comment">     * the way nodes get added to allow us to simply call add and have the node added to the</span>
<a name="l3293"><span class="linenum">3293</span></a>  <span class="comment">     * end of the navbar</span>
<a name="l3294"><span class="linenum">3294</span></a>  <span class="comment">     *</span>
<a name="l3295"><span class="linenum">3295</span></a>  <span class="comment">     * @param string $text</span>
<a name="l3296"><span class="linenum">3296</span></a>  <span class="comment">     * @param string|moodle_url|action_link $action An action to associate with this node.</span>
<a name="l3297"><span class="linenum">3297</span></a>  <span class="comment">     * @param int $type One of navigation_node::TYPE_*</span>
<a name="l3298"><span class="linenum">3298</span></a>  <span class="comment">     * @param string $shorttext</span>
<a name="l3299"><span class="linenum">3299</span></a>  <span class="comment">     * @param string|int $key A key to identify this node with. Key + type is unique to a parent.</span>
<a name="l3300"><span class="linenum">3300</span></a>  <span class="comment">     * @param pix_icon $icon An optional icon to use for this node.</span>
<a name="l3301"><span class="linenum">3301</span></a>  <span class="comment">     * @return navigation_node</span>
<a name="l3302"><span class="linenum">3302</span></a>  <span class="comment">     */</span>
<a name="l3303"><span class="linenum">3303</span></a>      public function <a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>=null, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=self::TYPE_CUSTOM, <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>=null, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=null, pix_icon <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>=null) {
<a name="l3304"><span class="linenum">3304</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/content.html">content</a> !== null) {
<a name="l3305"><span class="linenum">3305</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Nav bar items must be printed before <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>() has been called', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l3306"><span class="linenum">3306</span></a>          }
<a name="l3307"><span class="linenum">3307</span></a>  
<a name="l3308"><span class="linenum">3308</span></a>  <span class="comment">        // Properties array used when creating the new navigation node</span>
<a name="l3309"><span class="linenum">3309</span></a>          <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a> = array(
<a name="l3310"><span class="linenum">3310</span></a>              'text' =&gt; <a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>,
<a name="l3311"><span class="linenum">3311</span></a>              'type' =&gt; <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>
<a name="l3312"><span class="linenum">3312</span></a>          );
<a name="l3313"><span class="linenum">3313</span></a>  <span class="comment">        // Set the action if one was provided</span>
<a name="l3314"><span class="linenum">3314</span></a>          if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>!==null) {
<a name="l3315"><span class="linenum">3315</span></a>              <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['action'] = <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>;
<a name="l3316"><span class="linenum">3316</span></a>          }
<a name="l3317"><span class="linenum">3317</span></a>  <span class="comment">        // Set the shorttext if one was provided</span>
<a name="l3318"><span class="linenum">3318</span></a>          if (<a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>!==null) {
<a name="l3319"><span class="linenum">3319</span></a>              <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['shorttext'] = <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>;
<a name="l3320"><span class="linenum">3320</span></a>          }
<a name="l3321"><span class="linenum">3321</span></a>  <span class="comment">        // Set the icon if one was provided</span>
<a name="l3322"><span class="linenum">3322</span></a>          if (<a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>!==null) {
<a name="l3323"><span class="linenum">3323</span></a>              <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['icon'] = <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>;
<a name="l3324"><span class="linenum">3324</span></a>          }
<a name="l3325"><span class="linenum">3325</span></a>  <span class="comment">        // Default the key to the number of children if not provided</span>
<a name="l3326"><span class="linenum">3326</span></a>          if (<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> === null) {
<a name="l3327"><span class="linenum">3327</span></a>              <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>);
<a name="l3328"><span class="linenum">3328</span></a>          }
<a name="l3329"><span class="linenum">3329</span></a>  <span class="comment">        // Set the key</span>
<a name="l3330"><span class="linenum">3330</span></a>          <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['key'] = <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>;
<a name="l3331"><span class="linenum">3331</span></a>  <span class="comment">        // Set the parent to this node</span>
<a name="l3332"><span class="linenum">3332</span></a>          <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['parent'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>;
<a name="l3333"><span class="linenum">3333</span></a>  <span class="comment">        // Add the child using the navigation_node_collections add method</span>
<a name="l3334"><span class="linenum">3334</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>(<a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>);
<a name="l3335"><span class="linenum">3335</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>;
<a name="l3336"><span class="linenum">3336</span></a>      }
<a name="l3337"><span class="linenum">3337</span></a>  
<a name="l3338"><span class="linenum">3338</span></a>      <span class="comment">/**</span>
<a name="l3339"><span class="linenum">3339</span></a>  <span class="comment">     * Prepends a new navigation_node to the start of the navbar</span>
<a name="l3340"><span class="linenum">3340</span></a>  <span class="comment">     *</span>
<a name="l3341"><span class="linenum">3341</span></a>  <span class="comment">     * @param string $text</span>
<a name="l3342"><span class="linenum">3342</span></a>  <span class="comment">     * @param string|moodle_url|action_link $action An action to associate with this node.</span>
<a name="l3343"><span class="linenum">3343</span></a>  <span class="comment">     * @param int $type One of navigation_node::TYPE_*</span>
<a name="l3344"><span class="linenum">3344</span></a>  <span class="comment">     * @param string $shorttext</span>
<a name="l3345"><span class="linenum">3345</span></a>  <span class="comment">     * @param string|int $key A key to identify this node with. Key + type is unique to a parent.</span>
<a name="l3346"><span class="linenum">3346</span></a>  <span class="comment">     * @param pix_icon $icon An optional icon to use for this node.</span>
<a name="l3347"><span class="linenum">3347</span></a>  <span class="comment">     * @return navigation_node</span>
<a name="l3348"><span class="linenum">3348</span></a>  <span class="comment">     */</span>
<a name="l3349"><span class="linenum">3349</span></a>      public function <a class="function" onClick="logFunction('prepend')" href="../_functions/prepend.html" onMouseOver="funcPopup(event,'prepend')">prepend</a>(<a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>=null, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=self::TYPE_CUSTOM, <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>=null, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=null, pix_icon <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>=null) {
<a name="l3350"><span class="linenum">3350</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('content')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/content.html">content</a> !== null) {
<a name="l3351"><span class="linenum">3351</span></a>              <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Nav bar items must be printed before <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>() has been called', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l3352"><span class="linenum">3352</span></a>          }
<a name="l3353"><span class="linenum">3353</span></a>  <span class="comment">        // Properties array used when creating the new navigation node.</span>
<a name="l3354"><span class="linenum">3354</span></a>          <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a> = array(
<a name="l3355"><span class="linenum">3355</span></a>              'text' =&gt; <a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>,
<a name="l3356"><span class="linenum">3356</span></a>              'type' =&gt; <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>
<a name="l3357"><span class="linenum">3357</span></a>          );
<a name="l3358"><span class="linenum">3358</span></a>  <span class="comment">        // Set the action if one was provided.</span>
<a name="l3359"><span class="linenum">3359</span></a>          if (<a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>!==null) {
<a name="l3360"><span class="linenum">3360</span></a>              <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['action'] = <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('action')" href="../_variables/action.html">$action</a>;
<a name="l3361"><span class="linenum">3361</span></a>          }
<a name="l3362"><span class="linenum">3362</span></a>  <span class="comment">        // Set the shorttext if one was provided.</span>
<a name="l3363"><span class="linenum">3363</span></a>          if (<a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>!==null) {
<a name="l3364"><span class="linenum">3364</span></a>              <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['shorttext'] = <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>;
<a name="l3365"><span class="linenum">3365</span></a>          }
<a name="l3366"><span class="linenum">3366</span></a>  <span class="comment">        // Set the icon if one was provided.</span>
<a name="l3367"><span class="linenum">3367</span></a>          if (<a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>!==null) {
<a name="l3368"><span class="linenum">3368</span></a>              <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['icon'] = <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>;
<a name="l3369"><span class="linenum">3369</span></a>          }
<a name="l3370"><span class="linenum">3370</span></a>  <span class="comment">        // Default the key to the number of children if not provided.</span>
<a name="l3371"><span class="linenum">3371</span></a>          if (<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> === null) {
<a name="l3372"><span class="linenum">3372</span></a>              <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>);
<a name="l3373"><span class="linenum">3373</span></a>          }
<a name="l3374"><span class="linenum">3374</span></a>  <span class="comment">        // Set the key.</span>
<a name="l3375"><span class="linenum">3375</span></a>          <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['key'] = <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>;
<a name="l3376"><span class="linenum">3376</span></a>  <span class="comment">        // Set the parent to this node.</span>
<a name="l3377"><span class="linenum">3377</span></a>          <a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>['parent'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>;
<a name="l3378"><span class="linenum">3378</span></a>  <span class="comment">        // Add the child node to the prepend list.</span>
<a name="l3379"><span class="linenum">3379</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prependchildren')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/prependchildren.html">prependchildren</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>(<a class="var it37449" onMouseOver="hilite(37449)" onMouseOut="lolite()" onClick="logVariable('itemarray')" href="../_variables/itemarray.html">$itemarray</a>);
<a name="l3380"><span class="linenum">3380</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>;
<a name="l3381"><span class="linenum">3381</span></a>      }
<a name="l3382"><span class="linenum">3382</span></a>  }
<a name="l3383"><span class="linenum">3383</span></a>  
<a name="l3384"><span class="linenum">3384</span></a>  <span class="comment">/**</span>
<a name="l3385"><span class="linenum">3385</span></a>  <span class="comment"> * Class used to manage the settings option for the current page</span>
<a name="l3386"><span class="linenum">3386</span></a>  <span class="comment"> *</span>
<a name="l3387"><span class="linenum">3387</span></a>  <span class="comment"> * This class is used to manage the settings options in a tree format (recursively)</span>
<a name="l3388"><span class="linenum">3388</span></a>  <span class="comment"> * and was created initially for use with the settings blocks.</span>
<a name="l3389"><span class="linenum">3389</span></a>  <span class="comment"> *</span>
<a name="l3390"><span class="linenum">3390</span></a>  <span class="comment"> * @package   core</span>
<a name="l3391"><span class="linenum">3391</span></a>  <span class="comment"> * @category  navigation</span>
<a name="l3392"><span class="linenum">3392</span></a>  <span class="comment"> * @copyright 2009 Sam Hemelryk</span>
<a name="l3393"><span class="linenum">3393</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l3394"><span class="linenum">3394</span></a>  <span class="comment"> */</span>
<a name="l3395"><span class="linenum">3395</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('settings_navigation')" href="../_classes/settings_navigation.html" onMouseOver="classPopup(event,'settings_navigation')">settings_navigation</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a> {
<a name="l3396"><span class="linenum">3396</span></a>  <span class="comment">    /** @var stdClass the current context */</span>
<a name="l3397"><span class="linenum">3397</span></a>      protected <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>;
<a name="l3398"><span class="linenum">3398</span></a>  <span class="comment">    /** @var moodle_page the moodle page that the navigation belongs to */</span>
<a name="l3399"><span class="linenum">3399</span></a>      protected <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>;
<a name="l3400"><span class="linenum">3400</span></a>  <span class="comment">    /** @var string contains administration section navigation_nodes */</span>
<a name="l3401"><span class="linenum">3401</span></a>      protected <a class="var it18489" onMouseOver="hilite(18489)" onMouseOut="lolite()" onClick="logVariable('adminsection')" href="../_variables/adminsection.html">$adminsection</a>;
<a name="l3402"><span class="linenum">3402</span></a>  <span class="comment">    /** @var bool A switch to see if the navigation node is initialised */</span>
<a name="l3403"><span class="linenum">3403</span></a>      protected <a class="var it19743" onMouseOver="hilite(19743)" onMouseOut="lolite()" onClick="logVariable('initialised')" href="../_variables/initialised.html">$initialised</a> = false;
<a name="l3404"><span class="linenum">3404</span></a>  <span class="comment">    /** @var array An array of users that the nodes can extend for. */</span>
<a name="l3405"><span class="linenum">3405</span></a>      protected <a class="var it37528" onMouseOver="hilite(37528)" onMouseOut="lolite()" onClick="logVariable('userstoextendfor')" href="../_variables/userstoextendfor.html">$userstoextendfor</a> = array();
<a name="l3406"><span class="linenum">3406</span></a>  <span class="comment">    /** @var navigation_cache **/</span>
<a name="l3407"><span class="linenum">3407</span></a>      protected <a class="var it1081" onMouseOver="hilite(1081)" onMouseOut="lolite()" onClick="logVariable('cache')" href="../_variables/cache.html">$cache</a>;
<a name="l3408"><span class="linenum">3408</span></a>  
<a name="l3409"><span class="linenum">3409</span></a>      <span class="comment">/**</span>
<a name="l3410"><span class="linenum">3410</span></a>  <span class="comment">     * Sets up the object with basic settings and preparse it for use</span>
<a name="l3411"><span class="linenum">3411</span></a>  <span class="comment">     *</span>
<a name="l3412"><span class="linenum">3412</span></a>  <span class="comment">     * @param moodle_page $page</span>
<a name="l3413"><span class="linenum">3413</span></a>  <span class="comment">     */</span>
<a name="l3414"><span class="linenum">3414</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(moodle_page &amp;<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>) {
<a name="l3415"><span class="linenum">3415</span></a>          if (<a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l3416"><span class="linenum">3416</span></a>              return false;
<a name="l3417"><span class="linenum">3417</span></a>          }
<a name="l3418"><span class="linenum">3418</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>;
<a name="l3419"><span class="linenum">3419</span></a>  <span class="comment">        // Initialise the main navigation. It is most important that this is done</span>
<a name="l3420"><span class="linenum">3420</span></a>  <span class="comment">        // before we try anything</span>
<a name="l3421"><span class="linenum">3421</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;navigation-&gt;<a class="function" onClick="logFunction('initialise')" href="../_functions/initialise.html" onMouseOver="funcPopup(event,'initialise')">initialise</a>();
<a name="l3422"><span class="linenum">3422</span></a>  <span class="comment">        // Initialise the navigation cache</span>
<a name="l3423"><span class="linenum">3423</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a> = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_cache')" href="../_classes/navigation_cache.html" onMouseOver="classPopup(event,'navigation_cache')">navigation_cache</a>(<a class="constant" onClick="logConstant('NAVIGATION_CACHE_NAME')" href="../_constants/NAVIGATION_CACHE_NAME.html" onMouseOver="constPopup(event,'NAVIGATION_CACHE_NAME')">NAVIGATION_CACHE_NAME</a>);
<a name="l3424"><span class="linenum">3424</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_node_collection')" href="../_classes/navigation_node_collection.html" onMouseOver="classPopup(event,'navigation_node_collection')">navigation_node_collection</a>();
<a name="l3425"><span class="linenum">3425</span></a>      }
<a name="l3426"><span class="linenum">3426</span></a>      <span class="comment">/**</span>
<a name="l3427"><span class="linenum">3427</span></a>  <span class="comment">     * Initialise the settings navigation based on the current context</span>
<a name="l3428"><span class="linenum">3428</span></a>  <span class="comment">     *</span>
<a name="l3429"><span class="linenum">3429</span></a>  <span class="comment">     * This function initialises the settings navigation tree for a given context</span>
<a name="l3430"><span class="linenum">3430</span></a>  <span class="comment">     * by calling supporting functions to generate major parts of the tree.</span>
<a name="l3431"><span class="linenum">3431</span></a>  <span class="comment">     *</span>
<a name="l3432"><span class="linenum">3432</span></a>  <span class="comment">     */</span>
<a name="l3433"><span class="linenum">3433</span></a>      public function <a class="function" onClick="logFunction('initialise')" href="../_functions/initialise.html" onMouseOver="funcPopup(event,'initialise')">initialise</a>() {
<a name="l3434"><span class="linenum">3434</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l3435"><span class="linenum">3435</span></a>  
<a name="l3436"><span class="linenum">3436</span></a>          if (<a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l3437"><span class="linenum">3437</span></a>              return false;
<a name="l3438"><span class="linenum">3438</span></a>          } else if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('initialised')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/initialised.html">initialised</a>) {
<a name="l3439"><span class="linenum">3439</span></a>              return true;
<a name="l3440"><span class="linenum">3440</span></a>          }
<a name="l3441"><span class="linenum">3441</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('id')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = 'settingsnav';
<a name="l3442"><span class="linenum">3442</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context;
<a name="l3443"><span class="linenum">3443</span></a>  
<a name="l3444"><span class="linenum">3444</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>;
<a name="l3445"><span class="linenum">3445</span></a>          if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_BLOCK')" href="../_constants/CONTEXT_BLOCK.html" onMouseOver="constPopup(event,'CONTEXT_BLOCK')">CONTEXT_BLOCK</a>) {
<a name="l3446"><span class="linenum">3446</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_block_settings')" href="../_functions/load_block_settings.html" onMouseOver="funcPopup(event,'load_block_settings')">load_block_settings</a>();
<a name="l3447"><span class="linenum">3447</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_parent_context')" href="../_functions/get_parent_context.html" onMouseOver="funcPopup(event,'get_parent_context')">get_parent_context</a>();
<a name="l3448"><span class="linenum">3448</span></a>          }
<a name="l3449"><span class="linenum">3449</span></a>          switch (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a>) {
<a name="l3450"><span class="linenum">3450</span></a>              case <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a>:
<a name="l3451"><span class="linenum">3451</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('compare')" href="../_functions/compare.html" onMouseOver="funcPopup(event,'compare')">compare</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/settings.php.html">/admin/settings.php</a>', array('section'=&gt;'frontpagesettings')))) {
<a name="l3452"><span class="linenum">3452</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_front_page_settings')" href="../_functions/load_front_page_settings.html" onMouseOver="funcPopup(event,'load_front_page_settings')">load_front_page_settings</a>((<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id));
<a name="l3453"><span class="linenum">3453</span></a>                  }
<a name="l3454"><span class="linenum">3454</span></a>                  break;
<a name="l3455"><span class="linenum">3455</span></a>              case <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>:
<a name="l3456"><span class="linenum">3456</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_category_settings')" href="../_functions/load_category_settings.html" onMouseOver="funcPopup(event,'load_category_settings')">load_category_settings</a>();
<a name="l3457"><span class="linenum">3457</span></a>                  break;
<a name="l3458"><span class="linenum">3458</span></a>              case <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>:
<a name="l3459"><span class="linenum">3459</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course-&gt;id != <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l3460"><span class="linenum">3460</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_course_settings')" href="../_functions/load_course_settings.html" onMouseOver="funcPopup(event,'load_course_settings')">load_course_settings</a>((<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id));
<a name="l3461"><span class="linenum">3461</span></a>                  } else {
<a name="l3462"><span class="linenum">3462</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_front_page_settings')" href="../_functions/load_front_page_settings.html" onMouseOver="funcPopup(event,'load_front_page_settings')">load_front_page_settings</a>((<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id));
<a name="l3463"><span class="linenum">3463</span></a>                  }
<a name="l3464"><span class="linenum">3464</span></a>                  break;
<a name="l3465"><span class="linenum">3465</span></a>              case <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>:
<a name="l3466"><span class="linenum">3466</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_module_settings')" href="../_functions/load_module_settings.html" onMouseOver="funcPopup(event,'load_module_settings')">load_module_settings</a>();
<a name="l3467"><span class="linenum">3467</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_course_settings')" href="../_functions/load_course_settings.html" onMouseOver="funcPopup(event,'load_course_settings')">load_course_settings</a>();
<a name="l3468"><span class="linenum">3468</span></a>                  break;
<a name="l3469"><span class="linenum">3469</span></a>              case <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a>:
<a name="l3470"><span class="linenum">3470</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course-&gt;id != <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l3471"><span class="linenum">3471</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_course_settings')" href="../_functions/load_course_settings.html" onMouseOver="funcPopup(event,'load_course_settings')">load_course_settings</a>();
<a name="l3472"><span class="linenum">3472</span></a>                  }
<a name="l3473"><span class="linenum">3473</span></a>                  break;
<a name="l3474"><span class="linenum">3474</span></a>          }
<a name="l3475"><span class="linenum">3475</span></a>  
<a name="l3476"><span class="linenum">3476</span></a>          <a class="var it37529" onMouseOver="hilite(37529)" onMouseOut="lolite()" onClick="logVariable('usersettings')" href="../_variables/usersettings.html">$usersettings</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_user_settings')" href="../_functions/load_user_settings.html" onMouseOver="funcPopup(event,'load_user_settings')">load_user_settings</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course-&gt;id);
<a name="l3477"><span class="linenum">3477</span></a>  
<a name="l3478"><span class="linenum">3478</span></a>          <a class="var it37530" onMouseOver="hilite(37530)" onMouseOut="lolite()" onClick="logVariable('adminsettings')" href="../_variables/adminsettings.html">$adminsettings</a> = false;
<a name="l3479"><span class="linenum">3479</span></a>          if (<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() &amp;&amp; !<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>() &amp;&amp; (!isset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('load_navigation_admin')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/load_navigation_admin.html">load_navigation_admin</a>) || <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('load_navigation_admin')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/load_navigation_admin.html">load_navigation_admin</a>)) {
<a name="l3480"><span class="linenum">3480</span></a>              <a class="var it37531" onMouseOver="hilite(37531)" onMouseOut="lolite()" onClick="logVariable('isadminpage')" href="../_variables/isadminpage.html">$isadminpage</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_admin_tree_needed')" href="../_functions/is_admin_tree_needed.html" onMouseOver="funcPopup(event,'is_admin_tree_needed')">is_admin_tree_needed</a>();
<a name="l3481"><span class="linenum">3481</span></a>  
<a name="l3482"><span class="linenum">3482</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:config', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l3483"><span class="linenum">3483</span></a>  <span class="comment">                // Make sure this works even if config capability changes on the fly</span>
<a name="l3484"><span class="linenum">3484</span></a>  <span class="comment">                // and also make it fast for admin right after login.</span>
<a name="l3485"><span class="linenum">3485</span></a>                  <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('load_navigation_admin')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/load_navigation_admin.html">load_navigation_admin</a> = 1;
<a name="l3486"><span class="linenum">3486</span></a>                  if (<a class="var it37531" onMouseOver="hilite(37531)" onMouseOut="lolite()" onClick="logVariable('isadminpage')" href="../_variables/isadminpage.html">$isadminpage</a>) {
<a name="l3487"><span class="linenum">3487</span></a>                      <a class="var it37530" onMouseOver="hilite(37530)" onMouseOut="lolite()" onClick="logVariable('adminsettings')" href="../_variables/adminsettings.html">$adminsettings</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_administration_settings')" href="../_functions/load_administration_settings.html" onMouseOver="funcPopup(event,'load_administration_settings')">load_administration_settings</a>();
<a name="l3488"><span class="linenum">3488</span></a>                  }
<a name="l3489"><span class="linenum">3489</span></a>  
<a name="l3490"><span class="linenum">3490</span></a>              } else if (!isset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('load_navigation_admin')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/load_navigation_admin.html">load_navigation_admin</a>)) {
<a name="l3491"><span class="linenum">3491</span></a>                  <a class="var it37530" onMouseOver="hilite(37530)" onMouseOut="lolite()" onClick="logVariable('adminsettings')" href="../_variables/adminsettings.html">$adminsettings</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_administration_settings')" href="../_functions/load_administration_settings.html" onMouseOver="funcPopup(event,'load_administration_settings')">load_administration_settings</a>();
<a name="l3492"><span class="linenum">3492</span></a>                  <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('load_navigation_admin')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/load_navigation_admin.html">load_navigation_admin</a> = (int)(<a class="var it37530" onMouseOver="hilite(37530)" onMouseOut="lolite()" onClick="logVariable('adminsettings')" href="../_variables/adminsettings.html">$adminsettings</a>-&gt;<a onClick="logVariable('children')" class="var it41092" onMouseOver="hilite(41092)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() &gt; 0);
<a name="l3493"><span class="linenum">3493</span></a>  
<a name="l3494"><span class="linenum">3494</span></a>              } else if (<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('load_navigation_admin')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/load_navigation_admin.html">load_navigation_admin</a>) {
<a name="l3495"><span class="linenum">3495</span></a>                  if (<a class="var it37531" onMouseOver="hilite(37531)" onMouseOut="lolite()" onClick="logVariable('isadminpage')" href="../_variables/isadminpage.html">$isadminpage</a>) {
<a name="l3496"><span class="linenum">3496</span></a>                      <a class="var it37530" onMouseOver="hilite(37530)" onMouseOut="lolite()" onClick="logVariable('adminsettings')" href="../_variables/adminsettings.html">$adminsettings</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_administration_settings')" href="../_functions/load_administration_settings.html" onMouseOver="funcPopup(event,'load_administration_settings')">load_administration_settings</a>();
<a name="l3497"><span class="linenum">3497</span></a>                  }
<a name="l3498"><span class="linenum">3498</span></a>              }
<a name="l3499"><span class="linenum">3499</span></a>  
<a name="l3500"><span class="linenum">3500</span></a>  <span class="comment">            // Print empty navigation node, if needed.</span>
<a name="l3501"><span class="linenum">3501</span></a>              if (<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('load_navigation_admin')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/load_navigation_admin.html">load_navigation_admin</a> &amp;&amp; !<a class="var it37531" onMouseOver="hilite(37531)" onMouseOut="lolite()" onClick="logVariable('isadminpage')" href="../_variables/isadminpage.html">$isadminpage</a>) {
<a name="l3502"><span class="linenum">3502</span></a>                  if (<a class="var it37530" onMouseOver="hilite(37530)" onMouseOut="lolite()" onClick="logVariable('adminsettings')" href="../_variables/adminsettings.html">$adminsettings</a>) {
<a name="l3503"><span class="linenum">3503</span></a>  <span class="comment">                    // Do not print settings tree on pages that do not need it, this helps with performance.</span>
<a name="l3504"><span class="linenum">3504</span></a>                      <a class="var it37530" onMouseOver="hilite(37530)" onMouseOut="lolite()" onClick="logVariable('adminsettings')" href="../_variables/adminsettings.html">$adminsettings</a>-&gt;<a class="function" onClick="logFunction('remove')" href="../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l3505"><span class="linenum">3505</span></a>                      <a class="var it37530" onMouseOver="hilite(37530)" onMouseOut="lolite()" onClick="logVariable('adminsettings')" href="../_variables/adminsettings.html">$adminsettings</a> = false;
<a name="l3506"><span class="linenum">3506</span></a>                  }
<a name="l3507"><span class="linenum">3507</span></a>                  <a class="var it37532" onMouseOver="hilite(37532)" onMouseOut="lolite()" onClick="logVariable('siteadminnode')" href="../_variables/siteadminnode.html">$siteadminnode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('administrationsite'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/admin'), self::TYPE_SITE_ADMIN, null, 'siteadministration');
<a name="l3508"><span class="linenum">3508</span></a>                  <a class="var it37532" onMouseOver="hilite(37532)" onMouseOut="lolite()" onClick="logVariable('siteadminnode')" href="../_variables/siteadminnode.html">$siteadminnode</a>-&gt;<a onClick="logVariable('id')" class="var it41093" onMouseOver="hilite(41093)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = 'expandable_branch_'.<a class="var it37532" onMouseOver="hilite(37532)" onMouseOut="lolite()" onClick="logVariable('siteadminnode')" href="../_variables/siteadminnode.html">$siteadminnode</a>-&gt;<a onClick="logVariable('type')" class="var it41093" onMouseOver="hilite(41093)" onMouseOut="lolite()" href="../_variables/type.html">type</a>.'_'.<a class="function" onClick="logFunction('clean_param')" href="../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it37532" onMouseOver="hilite(37532)" onMouseOut="lolite()" onClick="logVariable('siteadminnode')" href="../_variables/siteadminnode.html">$siteadminnode</a>-&gt;<a onClick="logVariable('key')" class="var it41093" onMouseOver="hilite(41093)" onMouseOut="lolite()" href="../_variables/key.html">key</a>, <a class="constant" onClick="logConstant('PARAM_ALPHANUMEXT')" href="../_constants/PARAM_ALPHANUMEXT.html" onMouseOver="constPopup(event,'PARAM_ALPHANUMEXT')">PARAM_ALPHANUMEXT</a>);
<a name="l3509"><span class="linenum">3509</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;requires-&gt;<a class="function" onClick="logFunction('data_for_js')" href="../_functions/data_for_js.html" onMouseOver="funcPopup(event,'data_for_js')">data_for_js</a>('siteadminexpansion', <a class="var it37532" onMouseOver="hilite(37532)" onMouseOut="lolite()" onClick="logVariable('siteadminnode')" href="../_variables/siteadminnode.html">$siteadminnode</a>);
<a name="l3510"><span class="linenum">3510</span></a>              }
<a name="l3511"><span class="linenum">3511</span></a>          }
<a name="l3512"><span class="linenum">3512</span></a>  
<a name="l3513"><span class="linenum">3513</span></a>          if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a> &amp;&amp; <a class="var it37530" onMouseOver="hilite(37530)" onMouseOut="lolite()" onClick="logVariable('adminsettings')" href="../_variables/adminsettings.html">$adminsettings</a>) {
<a name="l3514"><span class="linenum">3514</span></a>              <a class="var it37530" onMouseOver="hilite(37530)" onMouseOut="lolite()" onClick="logVariable('adminsettings')" href="../_variables/adminsettings.html">$adminsettings</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l3515"><span class="linenum">3515</span></a>          } else if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a> &amp;&amp; <a class="var it37529" onMouseOver="hilite(37529)" onMouseOut="lolite()" onClick="logVariable('usersettings')" href="../_variables/usersettings.html">$usersettings</a>) {
<a name="l3516"><span class="linenum">3516</span></a>              <a class="var it37529" onMouseOver="hilite(37529)" onMouseOut="lolite()" onClick="logVariable('usersettings')" href="../_variables/usersettings.html">$usersettings</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l3517"><span class="linenum">3517</span></a>          }
<a name="l3518"><span class="linenum">3518</span></a>  
<a name="l3519"><span class="linenum">3519</span></a>  <span class="comment">        // Check if the user is currently logged in as another user</span>
<a name="l3520"><span class="linenum">3520</span></a>          if (\core\session\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('is_loggedinas')" href="../_functions/is_loggedinas.html" onMouseOver="funcPopup(event,'is_loggedinas')">is_loggedinas</a>()) {
<a name="l3521"><span class="linenum">3521</span></a>  <span class="comment">            // Get the actual user, we need this so we can display an informative return link</span>
<a name="l3522"><span class="linenum">3522</span></a>              <a class="var it11663" onMouseOver="hilite(11663)" onMouseOut="lolite()" onClick="logVariable('realuser')" href="../_variables/realuser.html">$realuser</a> = \core\session\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('get_realuser')" href="../_functions/get_realuser.html" onMouseOver="funcPopup(event,'get_realuser')">get_realuser</a>();
<a name="l3523"><span class="linenum">3523</span></a>  <span class="comment">            // Add the informative return to original user link</span>
<a name="l3524"><span class="linenum">3524</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/loginas.php.html">/course/loginas.php</a>',array('id'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course-&gt;id, 'return'=&gt;1,'sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l3525"><span class="linenum">3525</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('returntooriginaluser', 'moodle', <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it11663" onMouseOver="hilite(11663)" onMouseOut="lolite()" onClick="logVariable('realuser')" href="../_variables/realuser.html">$realuser</a>, true)), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/left', ''));
<a name="l3526"><span class="linenum">3526</span></a>          }
<a name="l3527"><span class="linenum">3527</span></a>  
<a name="l3528"><span class="linenum">3528</span></a>  <span class="comment">        // At this point we give any local plugins the ability to extend/tinker with the navigation settings.</span>
<a name="l3529"><span class="linenum">3529</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_local_plugin_settings')" href="../_functions/load_local_plugin_settings.html" onMouseOver="funcPopup(event,'load_local_plugin_settings')">load_local_plugin_settings</a>();
<a name="l3530"><span class="linenum">3530</span></a>  
<a name="l3531"><span class="linenum">3531</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l3532"><span class="linenum">3532</span></a>              if (<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('nodetype')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/nodetype.html">nodetype</a> != self::NODETYPE_BRANCH || <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('children')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>()===0) {
<a name="l3533"><span class="linenum">3533</span></a>  <span class="comment">                // Site administration is shown as link.</span>
<a name="l3534"><span class="linenum">3534</span></a>                  if (!empty(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('load_navigation_admin')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/load_navigation_admin.html">load_navigation_admin</a>) &amp;&amp; (<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('type')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/type.html">type</a> === self::TYPE_SITE_ADMIN)) {
<a name="l3535"><span class="linenum">3535</span></a>                      continue;
<a name="l3536"><span class="linenum">3536</span></a>                  }
<a name="l3537"><span class="linenum">3537</span></a>                  <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a class="function" onClick="logFunction('remove')" href="../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l3538"><span class="linenum">3538</span></a>              }
<a name="l3539"><span class="linenum">3539</span></a>          }
<a name="l3540"><span class="linenum">3540</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('initialised')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/initialised.html">initialised</a> = true;
<a name="l3541"><span class="linenum">3541</span></a>      }
<a name="l3542"><span class="linenum">3542</span></a>      <span class="comment">/**</span>
<a name="l3543"><span class="linenum">3543</span></a>  <span class="comment">     * Override the parent function so that we can add preceeding hr's and set a</span>
<a name="l3544"><span class="linenum">3544</span></a>  <span class="comment">     * root node class against all first level element</span>
<a name="l3545"><span class="linenum">3545</span></a>  <span class="comment">     *</span>
<a name="l3546"><span class="linenum">3546</span></a>  <span class="comment">     * It does this by first calling the parent's add method {@link navigation_node::add()}</span>
<a name="l3547"><span class="linenum">3547</span></a>  <span class="comment">     * and then proceeds to use the key to set class and hr</span>
<a name="l3548"><span class="linenum">3548</span></a>  <span class="comment">     *</span>
<a name="l3549"><span class="linenum">3549</span></a>  <span class="comment">     * @param string $text text to be used for the link.</span>
<a name="l3550"><span class="linenum">3550</span></a>  <span class="comment">     * @param string|moodle_url $url url for the new node</span>
<a name="l3551"><span class="linenum">3551</span></a>  <span class="comment">     * @param int $type the type of node navigation_node::TYPE_*</span>
<a name="l3552"><span class="linenum">3552</span></a>  <span class="comment">     * @param string $shorttext</span>
<a name="l3553"><span class="linenum">3553</span></a>  <span class="comment">     * @param string|int $key a key to access the node by.</span>
<a name="l3554"><span class="linenum">3554</span></a>  <span class="comment">     * @param pix_icon $icon An icon that appears next to the node.</span>
<a name="l3555"><span class="linenum">3555</span></a>  <span class="comment">     * @return navigation_node with the new node added to it.</span>
<a name="l3556"><span class="linenum">3556</span></a>  <span class="comment">     */</span>
<a name="l3557"><span class="linenum">3557</span></a>      public function <a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>=null, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=null, <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>=null, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=null, pix_icon <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>=null) {
<a name="l3558"><span class="linenum">3558</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a> = parent::<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>);
<a name="l3559"><span class="linenum">3559</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a class="function" onClick="logFunction('add_class')" href="../_functions/add_class.html" onMouseOver="funcPopup(event,'add_class')">add_class</a>('root_node');
<a name="l3560"><span class="linenum">3560</span></a>          return <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>;
<a name="l3561"><span class="linenum">3561</span></a>      }
<a name="l3562"><span class="linenum">3562</span></a>  
<a name="l3563"><span class="linenum">3563</span></a>      <span class="comment">/**</span>
<a name="l3564"><span class="linenum">3564</span></a>  <span class="comment">     * This function allows the user to add something to the start of the settings</span>
<a name="l3565"><span class="linenum">3565</span></a>  <span class="comment">     * navigation, which means it will be at the top of the settings navigation block</span>
<a name="l3566"><span class="linenum">3566</span></a>  <span class="comment">     *</span>
<a name="l3567"><span class="linenum">3567</span></a>  <span class="comment">     * @param string $text text to be used for the link.</span>
<a name="l3568"><span class="linenum">3568</span></a>  <span class="comment">     * @param string|moodle_url $url url for the new node</span>
<a name="l3569"><span class="linenum">3569</span></a>  <span class="comment">     * @param int $type the type of node navigation_node::TYPE_*</span>
<a name="l3570"><span class="linenum">3570</span></a>  <span class="comment">     * @param string $shorttext</span>
<a name="l3571"><span class="linenum">3571</span></a>  <span class="comment">     * @param string|int $key a key to access the node by.</span>
<a name="l3572"><span class="linenum">3572</span></a>  <span class="comment">     * @param pix_icon $icon An icon that appears next to the node.</span>
<a name="l3573"><span class="linenum">3573</span></a>  <span class="comment">     * @return navigation_node $node with the new node added to it.</span>
<a name="l3574"><span class="linenum">3574</span></a>  <span class="comment">     */</span>
<a name="l3575"><span class="linenum">3575</span></a>      public function <a class="function" onClick="logFunction('prepend')" href="../_functions/prepend.html" onMouseOver="funcPopup(event,'prepend')">prepend</a>(<a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>=null, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>=null, <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>=null, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=null, pix_icon <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>=null) {
<a name="l3576"><span class="linenum">3576</span></a>          <a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>;
<a name="l3577"><span class="linenum">3577</span></a>          <a class="var it37533" onMouseOver="hilite(37533)" onMouseOut="lolite()" onClick="logVariable('childrenclass')" href="../_variables/childrenclass.html">$childrenclass</a> = <a class="phpfunction" onClick="logFunction('get_class')" href="../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>);
<a name="l3578"><span class="linenum">3578</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> = new <a class="var it37533" onMouseOver="hilite(37533)" onMouseOut="lolite()" onClick="logVariable('childrenclass')" href="../_variables/childrenclass.html">$childrenclass</a>;
<a name="l3579"><span class="linenum">3579</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it72" onMouseOver="hilite(72)" onMouseOut="lolite()" onClick="logVariable('text')" href="../_variables/text.html">$text</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it9460" onMouseOver="hilite(9460)" onMouseOut="lolite()" onClick="logVariable('shorttext')" href="../_variables/shorttext.html">$shorttext</a>, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>);
<a name="l3580"><span class="linenum">3580</span></a>          foreach (<a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> as <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l3581"><span class="linenum">3581</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>);
<a name="l3582"><span class="linenum">3582</span></a>          }
<a name="l3583"><span class="linenum">3583</span></a>          return <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>;
<a name="l3584"><span class="linenum">3584</span></a>      }
<a name="l3585"><span class="linenum">3585</span></a>  
<a name="l3586"><span class="linenum">3586</span></a>      <span class="comment">/**</span>
<a name="l3587"><span class="linenum">3587</span></a>  <span class="comment">     * Does this page require loading of full admin tree or is</span>
<a name="l3588"><span class="linenum">3588</span></a>  <span class="comment">     * it enough rely on AJAX?</span>
<a name="l3589"><span class="linenum">3589</span></a>  <span class="comment">     *</span>
<a name="l3590"><span class="linenum">3590</span></a>  <span class="comment">     * @return bool</span>
<a name="l3591"><span class="linenum">3591</span></a>  <span class="comment">     */</span>
<a name="l3592"><span class="linenum">3592</span></a>      protected function <a class="function" onClick="logFunction('is_admin_tree_needed')" href="../_functions/is_admin_tree_needed.html" onMouseOver="funcPopup(event,'is_admin_tree_needed')">is_admin_tree_needed</a>() {
<a name="l3593"><span class="linenum">3593</span></a>          if (self::<a class="var it37447" onMouseOver="hilite(37447)" onMouseOut="lolite()" onClick="logVariable('loadadmintree')" href="../_variables/loadadmintree.html">$loadadmintree</a>) {
<a name="l3594"><span class="linenum">3594</span></a>  <span class="comment">            // Usually external admin page or settings page.</span>
<a name="l3595"><span class="linenum">3595</span></a>              return true;
<a name="l3596"><span class="linenum">3596</span></a>          }
<a name="l3597"><span class="linenum">3597</span></a>  
<a name="l3598"><span class="linenum">3598</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagelayout === 'admin' or <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype, 'admin-') === 0) {
<a name="l3599"><span class="linenum">3599</span></a>  <span class="comment">            // Admin settings tree is intended for system level settings and management only, use navigation for the rest!</span>
<a name="l3600"><span class="linenum">3600</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;contextlevel != <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a>) {
<a name="l3601"><span class="linenum">3601</span></a>                  return false;
<a name="l3602"><span class="linenum">3602</span></a>              }
<a name="l3603"><span class="linenum">3603</span></a>              return true;
<a name="l3604"><span class="linenum">3604</span></a>          }
<a name="l3605"><span class="linenum">3605</span></a>  
<a name="l3606"><span class="linenum">3606</span></a>          return false;
<a name="l3607"><span class="linenum">3607</span></a>      }
<a name="l3608"><span class="linenum">3608</span></a>  
<a name="l3609"><span class="linenum">3609</span></a>      <span class="comment">/**</span>
<a name="l3610"><span class="linenum">3610</span></a>  <span class="comment">     * Load the site administration tree</span>
<a name="l3611"><span class="linenum">3611</span></a>  <span class="comment">     *</span>
<a name="l3612"><span class="linenum">3612</span></a>  <span class="comment">     * This function loads the site administration tree by using the lib/adminlib library functions</span>
<a name="l3613"><span class="linenum">3613</span></a>  <span class="comment">     *</span>
<a name="l3614"><span class="linenum">3614</span></a>  <span class="comment">     * @param navigation_node $referencebranch A reference to a branch in the settings</span>
<a name="l3615"><span class="linenum">3615</span></a>  <span class="comment">     *      navigation tree</span>
<a name="l3616"><span class="linenum">3616</span></a>  <span class="comment">     * @param part_of_admin_tree $adminbranch The branch to add, if null generate the admin</span>
<a name="l3617"><span class="linenum">3617</span></a>  <span class="comment">     *      tree and start at the beginning</span>
<a name="l3618"><span class="linenum">3618</span></a>  <span class="comment">     * @return mixed A key to access the admin tree by</span>
<a name="l3619"><span class="linenum">3619</span></a>  <span class="comment">     */</span>
<a name="l3620"><span class="linenum">3620</span></a>      protected function <a class="function" onClick="logFunction('load_administration_settings')" href="../_functions/load_administration_settings.html" onMouseOver="funcPopup(event,'load_administration_settings')">load_administration_settings</a>(navigation_node <a class="var it37534" onMouseOver="hilite(37534)" onMouseOut="lolite()" onClick="logVariable('referencebranch')" href="../_variables/referencebranch.html">$referencebranch</a>=null, part_of_admin_tree <a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>=null) {
<a name="l3621"><span class="linenum">3621</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3622"><span class="linenum">3622</span></a>  
<a name="l3623"><span class="linenum">3623</span></a>  <span class="comment">        // Check if we are just starting to generate this navigation.</span>
<a name="l3624"><span class="linenum">3624</span></a>          if (<a class="var it37534" onMouseOver="hilite(37534)" onMouseOut="lolite()" onClick="logVariable('referencebranch')" href="../_variables/referencebranch.html">$referencebranch</a> === null) {
<a name="l3625"><span class="linenum">3625</span></a>  
<a name="l3626"><span class="linenum">3626</span></a>  <span class="comment">            // Require the admin lib then get an admin structure</span>
<a name="l3627"><span class="linenum">3627</span></a>              if (!<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('admin_get_root')) {
<a name="l3628"><span class="linenum">3628</span></a>                  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../lib/adminlib.php.html">/lib/adminlib.php</a>');
<a name="l3629"><span class="linenum">3629</span></a>              }
<a name="l3630"><span class="linenum">3630</span></a>              <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('adminroot')" href="../_variables/adminroot.html">$adminroot</a> = <a class="function" onClick="logFunction('admin_get_root')" href="../_functions/admin_get_root.html" onMouseOver="funcPopup(event,'admin_get_root')">admin_get_root</a>(false, false);
<a name="l3631"><span class="linenum">3631</span></a>  <span class="comment">            // This is the active section identifier</span>
<a name="l3632"><span class="linenum">3632</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('adminsection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/adminsection.html">adminsection</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('section');
<a name="l3633"><span class="linenum">3633</span></a>  
<a name="l3634"><span class="linenum">3634</span></a>  <span class="comment">            // Disable the navigation from automatically finding the active node</span>
<a name="l3635"><span class="linenum">3635</span></a>              navigation_node::<a class="var it37446" onMouseOver="hilite(37446)" onMouseOut="lolite()" onClick="logVariable('autofindactive')" href="../_variables/autofindactive.html">$autofindactive</a> = false;
<a name="l3636"><span class="linenum">3636</span></a>              <a class="var it37534" onMouseOver="hilite(37534)" onMouseOut="lolite()" onClick="logVariable('referencebranch')" href="../_variables/referencebranch.html">$referencebranch</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('administrationsite'), null, self::TYPE_SITE_ADMIN, null, 'root');
<a name="l3637"><span class="linenum">3637</span></a>              foreach (<a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('adminroot')" href="../_variables/adminroot.html">$adminroot</a>-&gt;<a onClick="logVariable('children')" class="var it40993" onMouseOver="hilite(40993)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as <a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>) {
<a name="l3638"><span class="linenum">3638</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_administration_settings')" href="../_functions/load_administration_settings.html" onMouseOver="funcPopup(event,'load_administration_settings')">load_administration_settings</a>(<a class="var it37534" onMouseOver="hilite(37534)" onMouseOut="lolite()" onClick="logVariable('referencebranch')" href="../_variables/referencebranch.html">$referencebranch</a>, <a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>);
<a name="l3639"><span class="linenum">3639</span></a>              }
<a name="l3640"><span class="linenum">3640</span></a>              navigation_node::<a class="var it37446" onMouseOver="hilite(37446)" onMouseOut="lolite()" onClick="logVariable('autofindactive')" href="../_variables/autofindactive.html">$autofindactive</a> = true;
<a name="l3641"><span class="linenum">3641</span></a>  
<a name="l3642"><span class="linenum">3642</span></a>  <span class="comment">            // Use the admin structure to locate the active page</span>
<a name="l3643"><span class="linenum">3643</span></a>              if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('contains_active_node')" href="../_functions/contains_active_node.html" onMouseOver="funcPopup(event,'contains_active_node')">contains_active_node</a>() &amp;&amp; <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a> = <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('adminroot')" href="../_variables/adminroot.html">$adminroot</a>-&gt;<a class="function" onClick="logFunction('locate')" href="../_functions/locate.html" onMouseOver="funcPopup(event,'locate')">locate</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('adminsection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/adminsection.html">adminsection</a>, true)) {
<a name="l3644"><span class="linenum">3644</span></a>                  <a class="var it37536" onMouseOver="hilite(37536)" onMouseOut="lolite()" onClick="logVariable('currentnode')" href="../_variables/currentnode.html">$currentnode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>;
<a name="l3645"><span class="linenum">3645</span></a>                  while ((<a class="var it37537" onMouseOver="hilite(37537)" onMouseOut="lolite()" onClick="logVariable('pathkey')" href="../_variables/pathkey.html">$pathkey</a> = <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('current')" href="../_variables/current.html">$current</a>-&gt;<a onClick="logVariable('path')" class="var it39467" onMouseOver="hilite(39467)" onMouseOut="lolite()" href="../_variables/path.html">path</a>))!==null &amp;&amp; <a class="var it37536" onMouseOver="hilite(37536)" onMouseOut="lolite()" onClick="logVariable('currentnode')" href="../_variables/currentnode.html">$currentnode</a>) {
<a name="l3646"><span class="linenum">3646</span></a>                      <a class="var it37536" onMouseOver="hilite(37536)" onMouseOut="lolite()" onClick="logVariable('currentnode')" href="../_variables/currentnode.html">$currentnode</a> = <a class="var it37536" onMouseOver="hilite(37536)" onMouseOut="lolite()" onClick="logVariable('currentnode')" href="../_variables/currentnode.html">$currentnode</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it37537" onMouseOver="hilite(37537)" onMouseOut="lolite()" onClick="logVariable('pathkey')" href="../_variables/pathkey.html">$pathkey</a>);
<a name="l3647"><span class="linenum">3647</span></a>                  }
<a name="l3648"><span class="linenum">3648</span></a>                  if (<a class="var it37536" onMouseOver="hilite(37536)" onMouseOut="lolite()" onClick="logVariable('currentnode')" href="../_variables/currentnode.html">$currentnode</a>) {
<a name="l3649"><span class="linenum">3649</span></a>                      <a class="var it37536" onMouseOver="hilite(37536)" onMouseOut="lolite()" onClick="logVariable('currentnode')" href="../_variables/currentnode.html">$currentnode</a>-&gt;<a class="function" onClick="logFunction('make_active')" href="../_functions/make_active.html" onMouseOver="funcPopup(event,'make_active')">make_active</a>();
<a name="l3650"><span class="linenum">3650</span></a>                  }
<a name="l3651"><span class="linenum">3651</span></a>              } else {
<a name="l3652"><span class="linenum">3652</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('scan_for_active_node')" href="../_functions/scan_for_active_node.html" onMouseOver="funcPopup(event,'scan_for_active_node')">scan_for_active_node</a>(<a class="var it37534" onMouseOver="hilite(37534)" onMouseOut="lolite()" onClick="logVariable('referencebranch')" href="../_variables/referencebranch.html">$referencebranch</a>);
<a name="l3653"><span class="linenum">3653</span></a>              }
<a name="l3654"><span class="linenum">3654</span></a>              return <a class="var it37534" onMouseOver="hilite(37534)" onMouseOut="lolite()" onClick="logVariable('referencebranch')" href="../_variables/referencebranch.html">$referencebranch</a>;
<a name="l3655"><span class="linenum">3655</span></a>          } else if (<a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a class="function" onClick="logFunction('check_access')" href="../_functions/check_access.html" onMouseOver="funcPopup(event,'check_access')">check_access</a>()) {
<a name="l3656"><span class="linenum">3656</span></a>  <span class="comment">            // We have a reference branch that we can access and is not hidden `hurrah`</span>
<a name="l3657"><span class="linenum">3657</span></a>  <span class="comment">            // Now we need to display it and any children it may have</span>
<a name="l3658"><span class="linenum">3658</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = null;
<a name="l3659"><span class="linenum">3659</span></a>              <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = null;
<a name="l3660"><span class="linenum">3660</span></a>              if (<a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a> instanceof admin_settingpage) {
<a name="l3661"><span class="linenum">3661</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>.'/settings.php', array('section'=&gt;<a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a onClick="logVariable('name')" class="var it41094" onMouseOver="hilite(41094)" onMouseOut="lolite()" href="../_variables/name.html">name</a>));
<a name="l3662"><span class="linenum">3662</span></a>              } else if (<a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a> instanceof admin_externalpage) {
<a name="l3663"><span class="linenum">3663</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a onClick="logVariable('url')" class="var it41094" onMouseOver="hilite(41094)" onMouseOut="lolite()" href="../_variables/url.html">url</a>;
<a name="l3664"><span class="linenum">3664</span></a>              } else if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('linkadmincategories')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/linkadmincategories.html">linkadmincategories</a>) &amp;&amp; <a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a> instanceof admin_category) {
<a name="l3665"><span class="linenum">3665</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>.'/category.php', array('category' =&gt; <a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a onClick="logVariable('name')" class="var it41094" onMouseOver="hilite(41094)" onMouseOut="lolite()" href="../_variables/name.html">name</a>));
<a name="l3666"><span class="linenum">3666</span></a>              }
<a name="l3667"><span class="linenum">3667</span></a>  
<a name="l3668"><span class="linenum">3668</span></a>  <span class="comment">            // Add the branch</span>
<a name="l3669"><span class="linenum">3669</span></a>              <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a> = <a class="var it37534" onMouseOver="hilite(37534)" onMouseOut="lolite()" onClick="logVariable('referencebranch')" href="../_variables/referencebranch.html">$referencebranch</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a onClick="logVariable('visiblename')" class="var it41094" onMouseOver="hilite(41094)" onMouseOut="lolite()" href="../_variables/visiblename.html">visiblename</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, <a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a onClick="logVariable('name')" class="var it41094" onMouseOver="hilite(41094)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>);
<a name="l3670"><span class="linenum">3670</span></a>  
<a name="l3671"><span class="linenum">3671</span></a>              if (<a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a class="function" onClick="logFunction('is_hidden')" href="../_functions/is_hidden.html" onMouseOver="funcPopup(event,'is_hidden')">is_hidden</a>()) {
<a name="l3672"><span class="linenum">3672</span></a>                  if ((<a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a> instanceof admin_externalpage || <a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a> instanceof admin_settingpage) &amp;&amp; <a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a onClick="logVariable('name')" class="var it41094" onMouseOver="hilite(41094)" onMouseOut="lolite()" href="../_variables/name.html">name</a> == <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('adminsection')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/adminsection.html">adminsection</a>) {
<a name="l3673"><span class="linenum">3673</span></a>                      <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a>-&gt;<a class="function" onClick="logFunction('add_class')" href="../_functions/add_class.html" onMouseOver="funcPopup(event,'add_class')">add_class</a>('hidden');
<a name="l3674"><span class="linenum">3674</span></a>                  } else {
<a name="l3675"><span class="linenum">3675</span></a>                      <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a>-&gt;<a onClick="logVariable('display')" class="var it39943" onMouseOver="hilite(39943)" onMouseOut="lolite()" href="../_variables/display.html">display</a> = false;
<a name="l3676"><span class="linenum">3676</span></a>                  }
<a name="l3677"><span class="linenum">3677</span></a>              }
<a name="l3678"><span class="linenum">3678</span></a>  
<a name="l3679"><span class="linenum">3679</span></a>  <span class="comment">            // Check if we are generating the admin notifications and whether notificiations exist</span>
<a name="l3680"><span class="linenum">3680</span></a>              if (<a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a onClick="logVariable('name')" class="var it41094" onMouseOver="hilite(41094)" onMouseOut="lolite()" href="../_variables/name.html">name</a> === 'adminnotifications' &amp;&amp; <a class="function" onClick="logFunction('admin_critical_warnings_present')" href="../_functions/admin_critical_warnings_present.html" onMouseOver="funcPopup(event,'admin_critical_warnings_present')">admin_critical_warnings_present</a>()) {
<a name="l3681"><span class="linenum">3681</span></a>                  <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a>-&gt;<a class="function" onClick="logFunction('add_class')" href="../_functions/add_class.html" onMouseOver="funcPopup(event,'add_class')">add_class</a>('criticalnotification');
<a name="l3682"><span class="linenum">3682</span></a>              }
<a name="l3683"><span class="linenum">3683</span></a>  <span class="comment">            // Check if this branch has children</span>
<a name="l3684"><span class="linenum">3684</span></a>              if (<a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a> &amp;&amp; isset(<a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a onClick="logVariable('children')" class="var it41094" onMouseOver="hilite(41094)" onMouseOut="lolite()" href="../_variables/children.html">children</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a onClick="logVariable('children')" class="var it41094" onMouseOver="hilite(41094)" onMouseOut="lolite()" href="../_variables/children.html">children</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a onClick="logVariable('children')" class="var it41094" onMouseOver="hilite(41094)" onMouseOut="lolite()" href="../_variables/children.html">children</a>)&gt;0) {
<a name="l3685"><span class="linenum">3685</span></a>                  foreach (<a class="var it37535" onMouseOver="hilite(37535)" onMouseOut="lolite()" onClick="logVariable('adminbranch')" href="../_variables/adminbranch.html">$adminbranch</a>-&gt;<a onClick="logVariable('children')" class="var it41094" onMouseOver="hilite(41094)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as <a class="var it662" onMouseOver="hilite(662)" onMouseOut="lolite()" onClick="logVariable('branch')" href="../_variables/branch.html">$branch</a>) {
<a name="l3686"><span class="linenum">3686</span></a>  <span class="comment">                    // Generate the child branches as well now using this branch as the reference</span>
<a name="l3687"><span class="linenum">3687</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_administration_settings')" href="../_functions/load_administration_settings.html" onMouseOver="funcPopup(event,'load_administration_settings')">load_administration_settings</a>(<a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a>, <a class="var it662" onMouseOver="hilite(662)" onMouseOut="lolite()" onClick="logVariable('branch')" href="../_variables/branch.html">$branch</a>);
<a name="l3688"><span class="linenum">3688</span></a>                  }
<a name="l3689"><span class="linenum">3689</span></a>              } else {
<a name="l3690"><span class="linenum">3690</span></a>                  <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('reference')" href="../_variables/reference.html">$reference</a>-&gt;<a onClick="logVariable('icon')" class="var it39943" onMouseOver="hilite(39943)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/settings', '');
<a name="l3691"><span class="linenum">3691</span></a>              }
<a name="l3692"><span class="linenum">3692</span></a>          }
<a name="l3693"><span class="linenum">3693</span></a>      }
<a name="l3694"><span class="linenum">3694</span></a>  
<a name="l3695"><span class="linenum">3695</span></a>      <span class="comment">/**</span>
<a name="l3696"><span class="linenum">3696</span></a>  <span class="comment">     * This function recursivily scans nodes until it finds the active node or there</span>
<a name="l3697"><span class="linenum">3697</span></a>  <span class="comment">     * are no more nodes.</span>
<a name="l3698"><span class="linenum">3698</span></a>  <span class="comment">     * @param navigation_node $node</span>
<a name="l3699"><span class="linenum">3699</span></a>  <span class="comment">     */</span>
<a name="l3700"><span class="linenum">3700</span></a>      protected function <a class="function" onClick="logFunction('scan_for_active_node')" href="../_functions/scan_for_active_node.html" onMouseOver="funcPopup(event,'scan_for_active_node')">scan_for_active_node</a>(navigation_node <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l3701"><span class="linenum">3701</span></a>          if (!<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a class="function" onClick="logFunction('check_if_active')" href="../_functions/check_if_active.html" onMouseOver="funcPopup(event,'check_if_active')">check_if_active</a>() &amp;&amp; <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('children')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>()&gt;0) {
<a name="l3702"><span class="linenum">3702</span></a>              foreach (<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a onClick="logVariable('children')" class="var it39454" onMouseOver="hilite(39454)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as &amp;<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l3703"><span class="linenum">3703</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('scan_for_active_node')" href="../_functions/scan_for_active_node.html" onMouseOver="funcPopup(event,'scan_for_active_node')">scan_for_active_node</a>(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>);
<a name="l3704"><span class="linenum">3704</span></a>              }
<a name="l3705"><span class="linenum">3705</span></a>          }
<a name="l3706"><span class="linenum">3706</span></a>      }
<a name="l3707"><span class="linenum">3707</span></a>  
<a name="l3708"><span class="linenum">3708</span></a>      <span class="comment">/**</span>
<a name="l3709"><span class="linenum">3709</span></a>  <span class="comment">     * Gets a navigation node given an array of keys that represent the path to</span>
<a name="l3710"><span class="linenum">3710</span></a>  <span class="comment">     * the desired node.</span>
<a name="l3711"><span class="linenum">3711</span></a>  <span class="comment">     *</span>
<a name="l3712"><span class="linenum">3712</span></a>  <span class="comment">     * @param array $path</span>
<a name="l3713"><span class="linenum">3713</span></a>  <span class="comment">     * @return navigation_node|false</span>
<a name="l3714"><span class="linenum">3714</span></a>  <span class="comment">     */</span>
<a name="l3715"><span class="linenum">3715</span></a>      protected function <a class="function" onClick="logFunction('get_by_path')" href="../_functions/get_by_path.html" onMouseOver="funcPopup(event,'get_by_path')">get_by_path</a>(array <a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>) {
<a name="l3716"><span class="linenum">3716</span></a>          <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a>));
<a name="l3717"><span class="linenum">3717</span></a>          foreach (<a class="var it154" onMouseOver="hilite(154)" onMouseOut="lolite()" onClick="logVariable('path')" href="../_variables/path.html">$path</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l3718"><span class="linenum">3718</span></a>              <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>-&gt;<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>);
<a name="l3719"><span class="linenum">3719</span></a>          }
<a name="l3720"><span class="linenum">3720</span></a>          return <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>;
<a name="l3721"><span class="linenum">3721</span></a>      }
<a name="l3722"><span class="linenum">3722</span></a>  
<a name="l3723"><span class="linenum">3723</span></a>      <span class="comment">/**</span>
<a name="l3724"><span class="linenum">3724</span></a>  <span class="comment">     * This function loads the course settings that are available for the user</span>
<a name="l3725"><span class="linenum">3725</span></a>  <span class="comment">     *</span>
<a name="l3726"><span class="linenum">3726</span></a>  <span class="comment">     * @param bool $forceopen If set to true the course node will be forced open</span>
<a name="l3727"><span class="linenum">3727</span></a>  <span class="comment">     * @return navigation_node|false</span>
<a name="l3728"><span class="linenum">3728</span></a>  <span class="comment">     */</span>
<a name="l3729"><span class="linenum">3729</span></a>      protected function <a class="function" onClick="logFunction('load_course_settings')" href="../_functions/load_course_settings.html" onMouseOver="funcPopup(event,'load_course_settings')">load_course_settings</a>(<a class="var it16968" onMouseOver="hilite(16968)" onMouseOut="lolite()" onClick="logVariable('forceopen')" href="../_variables/forceopen.html">$forceopen</a> = false) {
<a name="l3730"><span class="linenum">3730</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3731"><span class="linenum">3731</span></a>  
<a name="l3732"><span class="linenum">3732</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course;
<a name="l3733"><span class="linenum">3733</span></a>          <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l3734"><span class="linenum">3734</span></a>  
<a name="l3735"><span class="linenum">3735</span></a>  <span class="comment">        // note: do not test if enrolled or viewing here because we need the enrol link in Course administration section</span>
<a name="l3736"><span class="linenum">3736</span></a>  
<a name="l3737"><span class="linenum">3737</span></a>          <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courseadministration'), null, self::TYPE_COURSE, null, 'courseadmin');
<a name="l3738"><span class="linenum">3738</span></a>          if (<a class="var it16968" onMouseOver="hilite(16968)" onMouseOut="lolite()" onClick="logVariable('forceopen')" href="../_variables/forceopen.html">$forceopen</a>) {
<a name="l3739"><span class="linenum">3739</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l3740"><span class="linenum">3740</span></a>          }
<a name="l3741"><span class="linenum">3741</span></a>  
<a name="l3742"><span class="linenum">3742</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_allowed_editing')" href="../_functions/user_allowed_editing.html" onMouseOver="funcPopup(event,'user_allowed_editing')">user_allowed_editing</a>()) {
<a name="l3743"><span class="linenum">3743</span></a>  <span class="comment">            // Add the turn on/off settings</span>
<a name="l3744"><span class="linenum">3744</span></a>  
<a name="l3745"><span class="linenum">3745</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('compare')" href="../_functions/compare.html" onMouseOver="funcPopup(event,'compare')">compare</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/view.php.html">/course/view.php</a>'), <a class="constant" onClick="logConstant('URL_MATCH_BASE')" href="../_constants/URL_MATCH_BASE.html" onMouseOver="constPopup(event,'URL_MATCH_BASE')">URL_MATCH_BASE</a>)) {
<a name="l3746"><span class="linenum">3746</span></a>  <span class="comment">                // We are on the course page, retain the current page params e.g. section.</span>
<a name="l3747"><span class="linenum">3747</span></a>                  <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url);
<a name="l3748"><span class="linenum">3748</span></a>                  <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('sesskey', <a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>());
<a name="l3749"><span class="linenum">3749</span></a>              } else {
<a name="l3750"><span class="linenum">3750</span></a>  <span class="comment">                // Edit on the main course page.</span>
<a name="l3751"><span class="linenum">3751</span></a>                  <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/view.php.html">/course/view.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'return'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out_as_local_url')" href="../_functions/out_as_local_url.html" onMouseOver="funcPopup(event,'out_as_local_url')">out_as_local_url</a>(false), 'sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l3752"><span class="linenum">3752</span></a>              }
<a name="l3753"><span class="linenum">3753</span></a>  
<a name="l3754"><span class="linenum">3754</span></a>              <a class="var it1722" onMouseOver="hilite(1722)" onMouseOut="lolite()" onClick="logVariable('editurl')" href="../_variables/editurl.html">$editurl</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>);
<a name="l3755"><span class="linenum">3755</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>()) {
<a name="l3756"><span class="linenum">3756</span></a>                  <a class="var it1722" onMouseOver="hilite(1722)" onMouseOut="lolite()" onClick="logVariable('editurl')" href="../_variables/editurl.html">$editurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('edit', 'off');
<a name="l3757"><span class="linenum">3757</span></a>                  <a class="var it21086" onMouseOver="hilite(21086)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('turneditingoff');
<a name="l3758"><span class="linenum">3758</span></a>              } else {
<a name="l3759"><span class="linenum">3759</span></a>                  <a class="var it1722" onMouseOver="hilite(1722)" onMouseOut="lolite()" onClick="logVariable('editurl')" href="../_variables/editurl.html">$editurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('edit', 'on');
<a name="l3760"><span class="linenum">3760</span></a>                  <a class="var it21086" onMouseOver="hilite(21086)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('turneditingon');
<a name="l3761"><span class="linenum">3761</span></a>              }
<a name="l3762"><span class="linenum">3762</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it21086" onMouseOver="hilite(21086)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a>, <a class="var it1722" onMouseOver="hilite(1722)" onMouseOut="lolite()" onClick="logVariable('editurl')" href="../_variables/editurl.html">$editurl</a>, self::TYPE_SETTING, null, 'turneditingonoff', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/edit', ''));
<a name="l3763"><span class="linenum">3763</span></a>          }
<a name="l3764"><span class="linenum">3764</span></a>  
<a name="l3765"><span class="linenum">3765</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:update', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l3766"><span class="linenum">3766</span></a>  <span class="comment">            // Add the course settings link</span>
<a name="l3767"><span class="linenum">3767</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/edit.php.html">/course/edit.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3768"><span class="linenum">3768</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editsettings'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'editsettings', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/settings', ''));
<a name="l3769"><span class="linenum">3769</span></a>  
<a name="l3770"><span class="linenum">3770</span></a>  <span class="comment">            // Add the course completion settings link</span>
<a name="l3771"><span class="linenum">3771</span></a>              if (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablecompletion')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enablecompletion.html">enablecompletion</a> &amp;&amp; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('enablecompletion')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/enablecompletion.html">enablecompletion</a>) {
<a name="l3772"><span class="linenum">3772</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/completion.php.html">/course/completion.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3773"><span class="linenum">3773</span></a>                  <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('coursecompletion', 'completion'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/settings', ''));
<a name="l3774"><span class="linenum">3774</span></a>              }
<a name="l3775"><span class="linenum">3775</span></a>          }
<a name="l3776"><span class="linenum">3776</span></a>  
<a name="l3777"><span class="linenum">3777</span></a>  <span class="comment">        // add enrol nodes</span>
<a name="l3778"><span class="linenum">3778</span></a>          <a class="function" onClick="logFunction('enrol_add_course_navigation')" href="../_functions/enrol_add_course_navigation.html" onMouseOver="funcPopup(event,'enrol_add_course_navigation')">enrol_add_course_navigation</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l3779"><span class="linenum">3779</span></a>  
<a name="l3780"><span class="linenum">3780</span></a>  <span class="comment">        // Manage filters</span>
<a name="l3781"><span class="linenum">3781</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/filter:manage', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="function" onClick="logFunction('filter_get_available_in_context')" href="../_functions/filter_get_available_in_context.html" onMouseOver="funcPopup(event,'filter_get_available_in_context')">filter_get_available_in_context</a>(<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>))&gt;0) {
<a name="l3782"><span class="linenum">3782</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../filter/manage.php.html">/filter/manage.php</a>', array('contextid'=&gt;<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('id')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3783"><span class="linenum">3783</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('filters', 'admin'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/filter', ''));
<a name="l3784"><span class="linenum">3784</span></a>          }
<a name="l3785"><span class="linenum">3785</span></a>  
<a name="l3786"><span class="linenum">3786</span></a>  <span class="comment">        // View course reports.</span>
<a name="l3787"><span class="linenum">3787</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewreports', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) { // Basic capability for listing of reports.
<a name="l3788"><span class="linenum">3788</span></a>              <a class="var it37539" onMouseOver="hilite(37539)" onMouseOut="lolite()" onClick="logVariable('reportnav')" href="../_variables/reportnav.html">$reportnav</a> = <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('reports'), null, self::TYPE_CONTAINER, null, 'coursereports',
<a name="l3789"><span class="linenum">3789</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/stats', ''));
<a name="l3790"><span class="linenum">3790</span></a>              <a class="var it37540" onMouseOver="hilite(37540)" onMouseOut="lolite()" onClick="logVariable('coursereports')" href="../_variables/coursereports.html">$coursereports</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('coursereport');
<a name="l3791"><span class="linenum">3791</span></a>              foreach (<a class="var it37540" onMouseOver="hilite(37540)" onMouseOut="lolite()" onClick="logVariable('coursereports')" href="../_variables/coursereports.html">$coursereports</a> as <a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../_variables/report.html">$report</a> =&gt; <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a>) {
<a name="l3792"><span class="linenum">3792</span></a>                  <a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'/course/report/'.<a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../_variables/report.html">$report</a>.'/lib.php';
<a name="l3793"><span class="linenum">3793</span></a>                  if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>)) {
<a name="l3794"><span class="linenum">3794</span></a>                      require_once(<a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>);
<a name="l3795"><span class="linenum">3795</span></a>                      <a class="var it37510" onMouseOver="hilite(37510)" onMouseOut="lolite()" onClick="logVariable('reportfunction')" href="../_variables/reportfunction.html">$reportfunction</a> = <a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../_variables/report.html">$report</a>.'_report_extend_navigation';
<a name="l3796"><span class="linenum">3796</span></a>                      if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../_variables/report.html">$report</a>.'_report_extend_navigation')) {
<a name="l3797"><span class="linenum">3797</span></a>                          <a class="var it37510" onMouseOver="hilite(37510)" onMouseOut="lolite()" onClick="logVariable('reportfunction')" href="../_variables/reportfunction.html">$reportfunction</a>(<a class="var it37539" onMouseOver="hilite(37539)" onMouseOut="lolite()" onClick="logVariable('reportnav')" href="../_variables/reportnav.html">$reportnav</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l3798"><span class="linenum">3798</span></a>                      }
<a name="l3799"><span class="linenum">3799</span></a>                  }
<a name="l3800"><span class="linenum">3800</span></a>              }
<a name="l3801"><span class="linenum">3801</span></a>  
<a name="l3802"><span class="linenum">3802</span></a>              <a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a> = <a class="function" onClick="logFunction('get_plugin_list_with_function')" href="../_functions/get_plugin_list_with_function.html" onMouseOver="funcPopup(event,'get_plugin_list_with_function')">get_plugin_list_with_function</a>('report', 'extend_navigation_course', 'lib.php');
<a name="l3803"><span class="linenum">3803</span></a>              foreach (<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a> as <a class="var it37510" onMouseOver="hilite(37510)" onMouseOut="lolite()" onClick="logVariable('reportfunction')" href="../_variables/reportfunction.html">$reportfunction</a>) {
<a name="l3804"><span class="linenum">3804</span></a>                  <a class="var it37510" onMouseOver="hilite(37510)" onMouseOut="lolite()" onClick="logVariable('reportfunction')" href="../_variables/reportfunction.html">$reportfunction</a>(<a class="var it37539" onMouseOver="hilite(37539)" onMouseOut="lolite()" onClick="logVariable('reportnav')" href="../_variables/reportnav.html">$reportnav</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l3805"><span class="linenum">3805</span></a>              }
<a name="l3806"><span class="linenum">3806</span></a>          }
<a name="l3807"><span class="linenum">3807</span></a>  
<a name="l3808"><span class="linenum">3808</span></a>  <span class="comment">        // Add view grade report is permitted</span>
<a name="l3809"><span class="linenum">3809</span></a>          <a class="var it37541" onMouseOver="hilite(37541)" onMouseOut="lolite()" onClick="logVariable('reportavailable')" href="../_variables/reportavailable.html">$reportavailable</a> = false;
<a name="l3810"><span class="linenum">3810</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:viewall', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l3811"><span class="linenum">3811</span></a>              <a class="var it37541" onMouseOver="hilite(37541)" onMouseOut="lolite()" onClick="logVariable('reportavailable')" href="../_variables/reportavailable.html">$reportavailable</a> = true;
<a name="l3812"><span class="linenum">3812</span></a>          } else if (!empty(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('showgrades')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/showgrades.html">showgrades</a>)) {
<a name="l3813"><span class="linenum">3813</span></a>              <a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('gradereport');
<a name="l3814"><span class="linenum">3814</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a>)&gt;0) {     // Get all installed reports
<a name="l3815"><span class="linenum">3815</span></a>                  <a class="phpfunction" onClick="logFunction('arsort')" href="../_functions/arsort.html" onMouseOver="phpfuncPopup(event,'arsort')">arsort</a>(<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a>); <span class="comment">// user is last, we want to test it first</span>
<a name="l3816"><span class="linenum">3816</span></a>                  foreach (<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a> as <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> =&gt; <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('plugindir')" href="../_variables/plugindir.html">$plugindir</a>) {
<a name="l3817"><span class="linenum">3817</span></a>                      if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('gradereport/'.<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>.':view', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l3818"><span class="linenum">3818</span></a>  <span class="comment">                        //stop when the first visible plugin is found</span>
<a name="l3819"><span class="linenum">3819</span></a>                          <a class="var it37541" onMouseOver="hilite(37541)" onMouseOut="lolite()" onClick="logVariable('reportavailable')" href="../_variables/reportavailable.html">$reportavailable</a> = true;
<a name="l3820"><span class="linenum">3820</span></a>                          break;
<a name="l3821"><span class="linenum">3821</span></a>                      }
<a name="l3822"><span class="linenum">3822</span></a>                  }
<a name="l3823"><span class="linenum">3823</span></a>              }
<a name="l3824"><span class="linenum">3824</span></a>          }
<a name="l3825"><span class="linenum">3825</span></a>          if (<a class="var it37541" onMouseOver="hilite(37541)" onMouseOut="lolite()" onClick="logVariable('reportavailable')" href="../_variables/reportavailable.html">$reportavailable</a>) {
<a name="l3826"><span class="linenum">3826</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../grade/report/index.php.html">/grade/report/index.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3827"><span class="linenum">3827</span></a>              <a class="var it30144" onMouseOver="hilite(30144)" onMouseOut="lolite()" onClick="logVariable('gradenode')" href="../_variables/gradenode.html">$gradenode</a> = <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grades'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'grades', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/grades', ''));
<a name="l3828"><span class="linenum">3828</span></a>          }
<a name="l3829"><span class="linenum">3829</span></a>  
<a name="l3830"><span class="linenum">3830</span></a>  <span class="comment">        //  Add outcome if permitted</span>
<a name="l3831"><span class="linenum">3831</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableoutcomes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enableoutcomes.html">enableoutcomes</a>) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:update', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l3832"><span class="linenum">3832</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../grade/edit/outcome/course.php.html">/grade/edit/outcome/course.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3833"><span class="linenum">3833</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('outcomes', 'grades'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'outcomes', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/outcomes', ''));
<a name="l3834"><span class="linenum">3834</span></a>          }
<a name="l3835"><span class="linenum">3835</span></a>  
<a name="l3836"><span class="linenum">3836</span></a>  <span class="comment">        //Add badges navigation</span>
<a name="l3837"><span class="linenum">3837</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> .'/badgeslib.php');
<a name="l3838"><span class="linenum">3838</span></a>          <a class="function" onClick="logFunction('badges_add_course_navigation')" href="../_functions/badges_add_course_navigation.html" onMouseOver="funcPopup(event,'badges_add_course_navigation')">badges_add_course_navigation</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l3839"><span class="linenum">3839</span></a>  
<a name="l3840"><span class="linenum">3840</span></a>  <span class="comment">        // Backup this course</span>
<a name="l3841"><span class="linenum">3841</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/backup:backupcourse', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l3842"><span class="linenum">3842</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../backup/backup.php.html">/backup/backup.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3843"><span class="linenum">3843</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('backup'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'backup', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/backup', ''));
<a name="l3844"><span class="linenum">3844</span></a>          }
<a name="l3845"><span class="linenum">3845</span></a>  
<a name="l3846"><span class="linenum">3846</span></a>  <span class="comment">        // Restore to this course</span>
<a name="l3847"><span class="linenum">3847</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/restore:restorecourse', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l3848"><span class="linenum">3848</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../backup/restorefile.php.html">/backup/restorefile.php</a>', array('contextid'=&gt;<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('id')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3849"><span class="linenum">3849</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('restore'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'restore', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/restore', ''));
<a name="l3850"><span class="linenum">3850</span></a>          }
<a name="l3851"><span class="linenum">3851</span></a>  
<a name="l3852"><span class="linenum">3852</span></a>  <span class="comment">        // Import data from other courses</span>
<a name="l3853"><span class="linenum">3853</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/restore:restoretargetimport', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l3854"><span class="linenum">3854</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../backup/import.php.html">/backup/import.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3855"><span class="linenum">3855</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('import'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'import', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/import', ''));
<a name="l3856"><span class="linenum">3856</span></a>          }
<a name="l3857"><span class="linenum">3857</span></a>  
<a name="l3858"><span class="linenum">3858</span></a>  <span class="comment">        // Publish course on a hub</span>
<a name="l3859"><span class="linenum">3859</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:publish', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l3860"><span class="linenum">3860</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/publish/index.php.html">/course/publish/index.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3861"><span class="linenum">3861</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('publish'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'publish', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/publish', ''));
<a name="l3862"><span class="linenum">3862</span></a>          }
<a name="l3863"><span class="linenum">3863</span></a>  
<a name="l3864"><span class="linenum">3864</span></a>  <span class="comment">        // Reset this course</span>
<a name="l3865"><span class="linenum">3865</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:reset', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l3866"><span class="linenum">3866</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/reset.php.html">/course/reset.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3867"><span class="linenum">3867</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('reset'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/return', ''));
<a name="l3868"><span class="linenum">3868</span></a>          }
<a name="l3869"><span class="linenum">3869</span></a>  
<a name="l3870"><span class="linenum">3870</span></a>  <span class="comment">        // Questions</span>
<a name="l3871"><span class="linenum">3871</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/questionlib.php');
<a name="l3872"><span class="linenum">3872</span></a>          <a class="function" onClick="logFunction('question_extend_settings_navigation')" href="../_functions/question_extend_settings_navigation.html" onMouseOver="funcPopup(event,'question_extend_settings_navigation')">question_extend_settings_navigation</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)-&gt;<a class="function" onClick="logFunction('trim_if_empty')" href="../_functions/trim_if_empty.html" onMouseOver="funcPopup(event,'trim_if_empty')">trim_if_empty</a>();
<a name="l3873"><span class="linenum">3873</span></a>  
<a name="l3874"><span class="linenum">3874</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:update', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l3875"><span class="linenum">3875</span></a>  <span class="comment">            // Repository Instances</span>
<a name="l3876"><span class="linenum">3876</span></a>              if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;<a class="function" onClick="logFunction('cached')" href="../_functions/cached.html" onMouseOver="funcPopup(event,'cached')">cached</a>('contexthasrepos'.<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('id')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l3877"><span class="linenum">3877</span></a>                  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../repository/lib.php.html">/repository/lib.php</a>');
<a name="l3878"><span class="linenum">3878</span></a>                  <a class="var it28569" onMouseOver="hilite(28569)" onMouseOut="lolite()" onClick="logVariable('editabletypes')" href="../_variables/editabletypes.html">$editabletypes</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_editable_types')" href="../_functions/get_editable_types.html" onMouseOver="funcPopup(event,'get_editable_types')">get_editable_types</a>(<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l3879"><span class="linenum">3879</span></a>                  <a class="var it37542" onMouseOver="hilite(37542)" onMouseOut="lolite()" onClick="logVariable('haseditabletypes')" href="../_variables/haseditabletypes.html">$haseditabletypes</a> = !empty(<a class="var it28569" onMouseOver="hilite(28569)" onMouseOut="lolite()" onClick="logVariable('editabletypes')" href="../_variables/editabletypes.html">$editabletypes</a>);
<a name="l3880"><span class="linenum">3880</span></a>                  unset(<a class="var it28569" onMouseOver="hilite(28569)" onMouseOut="lolite()" onClick="logVariable('editabletypes')" href="../_variables/editabletypes.html">$editabletypes</a>);
<a name="l3881"><span class="linenum">3881</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('contexthasrepos'.<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('id')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it37542" onMouseOver="hilite(37542)" onMouseOut="lolite()" onClick="logVariable('haseditabletypes')" href="../_variables/haseditabletypes.html">$haseditabletypes</a>);
<a name="l3882"><span class="linenum">3882</span></a>              } else {
<a name="l3883"><span class="linenum">3883</span></a>                  <a class="var it37542" onMouseOver="hilite(37542)" onMouseOut="lolite()" onClick="logVariable('haseditabletypes')" href="../_variables/haseditabletypes.html">$haseditabletypes</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;{'contexthasrepos'.<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('id')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/id.html">id</a>};
<a name="l3884"><span class="linenum">3884</span></a>              }
<a name="l3885"><span class="linenum">3885</span></a>              if (<a class="var it37542" onMouseOver="hilite(37542)" onMouseOut="lolite()" onClick="logVariable('haseditabletypes')" href="../_variables/haseditabletypes.html">$haseditabletypes</a>) {
<a name="l3886"><span class="linenum">3886</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../repository/manage_instances.php.html">/repository/manage_instances.php</a>', array('contextid' =&gt; <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('id')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3887"><span class="linenum">3887</span></a>                  <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('repositories'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/repository', ''));
<a name="l3888"><span class="linenum">3888</span></a>              }
<a name="l3889"><span class="linenum">3889</span></a>          }
<a name="l3890"><span class="linenum">3890</span></a>  
<a name="l3891"><span class="linenum">3891</span></a>  <span class="comment">        // Manage files</span>
<a name="l3892"><span class="linenum">3892</span></a>          if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('legacyfiles')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/legacyfiles.html">legacyfiles</a> == 2 and <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:managefiles', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l3893"><span class="linenum">3893</span></a>  <span class="comment">            // hidden in new courses and courses where legacy files were turned off</span>
<a name="l3894"><span class="linenum">3894</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../files/index.php.html">/files/index.php</a>', array('contextid'=&gt;<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('id')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l3895"><span class="linenum">3895</span></a>              <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('courselegacyfiles'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'coursefiles', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/folder', ''));
<a name="l3896"><span class="linenum">3896</span></a>  
<a name="l3897"><span class="linenum">3897</span></a>          }
<a name="l3898"><span class="linenum">3898</span></a>  
<a name="l3899"><span class="linenum">3899</span></a>  <span class="comment">        // Switch roles</span>
<a name="l3900"><span class="linenum">3900</span></a>          <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a> = array();
<a name="l3901"><span class="linenum">3901</span></a>          <a class="var it37543" onMouseOver="hilite(37543)" onMouseOut="lolite()" onClick="logVariable('assumedrole')" href="../_variables/assumedrole.html">$assumedrole</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('in_alternative_role')" href="../_functions/in_alternative_role.html" onMouseOver="funcPopup(event,'in_alternative_role')">in_alternative_role</a>();
<a name="l3902"><span class="linenum">3902</span></a>          if (<a class="var it37543" onMouseOver="hilite(37543)" onMouseOut="lolite()" onClick="logVariable('assumedrole')" href="../_variables/assumedrole.html">$assumedrole</a> !== false) {
<a name="l3903"><span class="linenum">3903</span></a>              <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>[0] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('switchrolereturn');
<a name="l3904"><span class="linenum">3904</span></a>          }
<a name="l3905"><span class="linenum">3905</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/role:switchroles', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l3906"><span class="linenum">3906</span></a>              <a class="var it37544" onMouseOver="hilite(37544)" onMouseOut="lolite()" onClick="logVariable('availableroles')" href="../_variables/availableroles.html">$availableroles</a> = <a class="function" onClick="logFunction('get_switchable_roles')" href="../_functions/get_switchable_roles.html" onMouseOver="funcPopup(event,'get_switchable_roles')">get_switchable_roles</a>(<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l3907"><span class="linenum">3907</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it37544" onMouseOver="hilite(37544)" onMouseOut="lolite()" onClick="logVariable('availableroles')" href="../_variables/availableroles.html">$availableroles</a>)) {
<a name="l3908"><span class="linenum">3908</span></a>                  foreach (<a class="var it37544" onMouseOver="hilite(37544)" onMouseOut="lolite()" onClick="logVariable('availableroles')" href="../_variables/availableroles.html">$availableroles</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>) {
<a name="l3909"><span class="linenum">3909</span></a>                      if (<a class="var it37543" onMouseOver="hilite(37543)" onMouseOut="lolite()" onClick="logVariable('assumedrole')" href="../_variables/assumedrole.html">$assumedrole</a> == (int)<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l3910"><span class="linenum">3910</span></a>                          continue;
<a name="l3911"><span class="linenum">3911</span></a>                      }
<a name="l3912"><span class="linenum">3912</span></a>                      <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>;
<a name="l3913"><span class="linenum">3913</span></a>                  }
<a name="l3914"><span class="linenum">3914</span></a>              }
<a name="l3915"><span class="linenum">3915</span></a>          }
<a name="l3916"><span class="linenum">3916</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>)&gt;0) {
<a name="l3917"><span class="linenum">3917</span></a>              <a class="var it37545" onMouseOver="hilite(37545)" onMouseOut="lolite()" onClick="logVariable('switchroles')" href="../_variables/switchroles.html">$switchroles</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('switchroleto'));
<a name="l3918"><span class="linenum">3918</span></a>              if ((<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>)==1 &amp;&amp; <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(0, <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>))|| <a class="var it37543" onMouseOver="hilite(37543)" onMouseOut="lolite()" onClick="logVariable('assumedrole')" href="../_variables/assumedrole.html">$assumedrole</a>!==false) {
<a name="l3919"><span class="linenum">3919</span></a>                  <a class="var it37545" onMouseOver="hilite(37545)" onMouseOut="lolite()" onClick="logVariable('switchroles')" href="../_variables/switchroles.html">$switchroles</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l3920"><span class="linenum">3920</span></a>              }
<a name="l3921"><span class="linenum">3921</span></a>              foreach (<a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>) {
<a name="l3922"><span class="linenum">3922</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/switchrole.php.html">/course/switchrole.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>(), 'switchrole'=&gt;<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, 'returnurl'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out_as_local_url')" href="../_functions/out_as_local_url.html" onMouseOver="funcPopup(event,'out_as_local_url')">out_as_local_url</a>(false)));
<a name="l3923"><span class="linenum">3923</span></a>                  <a class="var it37545" onMouseOver="hilite(37545)" onMouseOut="lolite()" onClick="logVariable('switchroles')" href="../_variables/switchroles.html">$switchroles</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/switchrole', ''));
<a name="l3924"><span class="linenum">3924</span></a>              }
<a name="l3925"><span class="linenum">3925</span></a>          }
<a name="l3926"><span class="linenum">3926</span></a>  
<a name="l3927"><span class="linenum">3927</span></a>  <span class="comment">        // Let admin tools hook into course navigation.</span>
<a name="l3928"><span class="linenum">3928</span></a>          <a class="var it20817" onMouseOver="hilite(20817)" onMouseOut="lolite()" onClick="logVariable('tools')" href="../_variables/tools.html">$tools</a> = <a class="function" onClick="logFunction('get_plugin_list_with_function')" href="../_functions/get_plugin_list_with_function.html" onMouseOver="funcPopup(event,'get_plugin_list_with_function')">get_plugin_list_with_function</a>('tool', 'extend_navigation_course', 'lib.php');
<a name="l3929"><span class="linenum">3929</span></a>          foreach (<a class="var it20817" onMouseOver="hilite(20817)" onMouseOut="lolite()" onClick="logVariable('tools')" href="../_variables/tools.html">$tools</a> as <a class="var it37546" onMouseOver="hilite(37546)" onMouseOut="lolite()" onClick="logVariable('toolfunction')" href="../_variables/toolfunction.html">$toolfunction</a>) {
<a name="l3930"><span class="linenum">3930</span></a>              <a class="var it37546" onMouseOver="hilite(37546)" onMouseOut="lolite()" onClick="logVariable('toolfunction')" href="../_variables/toolfunction.html">$toolfunction</a>(<a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l3931"><span class="linenum">3931</span></a>          }
<a name="l3932"><span class="linenum">3932</span></a>  
<a name="l3933"><span class="linenum">3933</span></a>  <span class="comment">        // Return we are done</span>
<a name="l3934"><span class="linenum">3934</span></a>          return <a class="var it7269" onMouseOver="hilite(7269)" onMouseOut="lolite()" onClick="logVariable('coursenode')" href="../_variables/coursenode.html">$coursenode</a>;
<a name="l3935"><span class="linenum">3935</span></a>      }
<a name="l3936"><span class="linenum">3936</span></a>  
<a name="l3937"><span class="linenum">3937</span></a>      <span class="comment">/**</span>
<a name="l3938"><span class="linenum">3938</span></a>  <span class="comment">     * This function calls the module function to inject module settings into the</span>
<a name="l3939"><span class="linenum">3939</span></a>  <span class="comment">     * settings navigation tree.</span>
<a name="l3940"><span class="linenum">3940</span></a>  <span class="comment">     *</span>
<a name="l3941"><span class="linenum">3941</span></a>  <span class="comment">     * This only gets called if there is a corrosponding function in the modules</span>
<a name="l3942"><span class="linenum">3942</span></a>  <span class="comment">     * lib file.</span>
<a name="l3943"><span class="linenum">3943</span></a>  <span class="comment">     *</span>
<a name="l3944"><span class="linenum">3944</span></a>  <span class="comment">     * For examples mod/forum/lib.php {@link forum_extend_settings_navigation()}</span>
<a name="l3945"><span class="linenum">3945</span></a>  <span class="comment">     *</span>
<a name="l3946"><span class="linenum">3946</span></a>  <span class="comment">     * @return navigation_node|false</span>
<a name="l3947"><span class="linenum">3947</span></a>  <span class="comment">     */</span>
<a name="l3948"><span class="linenum">3948</span></a>      protected function <a class="function" onClick="logFunction('load_module_settings')" href="../_functions/load_module_settings.html" onMouseOver="funcPopup(event,'load_module_settings')">load_module_settings</a>() {
<a name="l3949"><span class="linenum">3949</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l3950"><span class="linenum">3950</span></a>  
<a name="l3951"><span class="linenum">3951</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;contextlevel == <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a> &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;instanceid) {
<a name="l3952"><span class="linenum">3952</span></a>              <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_id')" href="../_functions/get_coursemodule_from_id.html" onMouseOver="funcPopup(event,'get_coursemodule_from_id')">get_coursemodule_from_id</a>(false, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;instanceid, 0, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l3953"><span class="linenum">3953</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('set_cm')" href="../_functions/set_cm.html" onMouseOver="funcPopup(event,'set_cm')">set_cm</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course);
<a name="l3954"><span class="linenum">3954</span></a>          }
<a name="l3955"><span class="linenum">3955</span></a>  
<a name="l3956"><span class="linenum">3956</span></a>          <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'/mod/'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;activityname.'/lib.php';
<a name="l3957"><span class="linenum">3957</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>)) {
<a name="l3958"><span class="linenum">3958</span></a>              require_once(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../_variables/file.html">$file</a>);
<a name="l3959"><span class="linenum">3959</span></a>          }
<a name="l3960"><span class="linenum">3960</span></a>  
<a name="l3961"><span class="linenum">3961</span></a>          <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('pluginadministration', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;activityname), null, self::TYPE_SETTING, null, 'modulesettings');
<a name="l3962"><span class="linenum">3962</span></a>          <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l3963"><span class="linenum">3963</span></a>  
<a name="l3964"><span class="linenum">3964</span></a>  <span class="comment">        // Settings for the module</span>
<a name="l3965"><span class="linenum">3965</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:manageactivities', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context)) {
<a name="l3966"><span class="linenum">3966</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/modedit.php.html">/course/modedit.php</a>', array('update' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;id, 'return' =&gt; 1));
<a name="l3967"><span class="linenum">3967</span></a>              <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editsettings'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING, null, 'modedit');
<a name="l3968"><span class="linenum">3968</span></a>          }
<a name="l3969"><span class="linenum">3969</span></a>  <span class="comment">        // Assign local roles</span>
<a name="l3970"><span class="linenum">3970</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="function" onClick="logFunction('get_assignable_roles')" href="../_functions/get_assignable_roles.html" onMouseOver="funcPopup(event,'get_assignable_roles')">get_assignable_roles</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context))&gt;0) {
<a name="l3971"><span class="linenum">3971</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>.'/roles/assign.php', array('contextid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context-&gt;id));
<a name="l3972"><span class="linenum">3972</span></a>              <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('localroles', 'role'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'roleassign');
<a name="l3973"><span class="linenum">3973</span></a>          }
<a name="l3974"><span class="linenum">3974</span></a>  <span class="comment">        // Override roles</span>
<a name="l3975"><span class="linenum">3975</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/role:review', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context) or <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="function" onClick="logFunction('get_overridable_roles')" href="../_functions/get_overridable_roles.html" onMouseOver="funcPopup(event,'get_overridable_roles')">get_overridable_roles</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context))&gt;0) {
<a name="l3976"><span class="linenum">3976</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>.'/roles/permissions.php', array('contextid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context-&gt;id));
<a name="l3977"><span class="linenum">3977</span></a>              <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('permissions', 'role'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'roleoverride');
<a name="l3978"><span class="linenum">3978</span></a>          }
<a name="l3979"><span class="linenum">3979</span></a>  <span class="comment">        // Check role permissions</span>
<a name="l3980"><span class="linenum">3980</span></a>          if (<a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/role:assign', 'moodle/role:safeoverride','moodle/role:override', 'moodle/role:assign'), <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context)) {
<a name="l3981"><span class="linenum">3981</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>.'/roles/check.php', array('contextid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context-&gt;id));
<a name="l3982"><span class="linenum">3982</span></a>              <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('checkpermissions', 'role'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'rolecheck');
<a name="l3983"><span class="linenum">3983</span></a>          }
<a name="l3984"><span class="linenum">3984</span></a>  <span class="comment">        // Manage filters</span>
<a name="l3985"><span class="linenum">3985</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/filter:manage', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="function" onClick="logFunction('filter_get_available_in_context')" href="../_functions/filter_get_available_in_context.html" onMouseOver="funcPopup(event,'filter_get_available_in_context')">filter_get_available_in_context</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context))&gt;0) {
<a name="l3986"><span class="linenum">3986</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../filter/manage.php.html">/filter/manage.php</a>', array('contextid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context-&gt;id));
<a name="l3987"><span class="linenum">3987</span></a>              <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('filters', 'admin'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'filtermanage');
<a name="l3988"><span class="linenum">3988</span></a>          }
<a name="l3989"><span class="linenum">3989</span></a>  <span class="comment">        // Add reports</span>
<a name="l3990"><span class="linenum">3990</span></a>          <a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a> = <a class="function" onClick="logFunction('get_plugin_list_with_function')" href="../_functions/get_plugin_list_with_function.html" onMouseOver="funcPopup(event,'get_plugin_list_with_function')">get_plugin_list_with_function</a>('report', 'extend_navigation_module', 'lib.php');
<a name="l3991"><span class="linenum">3991</span></a>          foreach (<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a> as <a class="var it37510" onMouseOver="hilite(37510)" onMouseOut="lolite()" onClick="logVariable('reportfunction')" href="../_variables/reportfunction.html">$reportfunction</a>) {
<a name="l3992"><span class="linenum">3992</span></a>              <a class="var it37510" onMouseOver="hilite(37510)" onMouseOut="lolite()" onClick="logVariable('reportfunction')" href="../_variables/reportfunction.html">$reportfunction</a>(<a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm);
<a name="l3993"><span class="linenum">3993</span></a>          }
<a name="l3994"><span class="linenum">3994</span></a>  <span class="comment">        // Add a backup link</span>
<a name="l3995"><span class="linenum">3995</span></a>          <a class="var it37494" onMouseOver="hilite(37494)" onMouseOut="lolite()" onClick="logVariable('featuresfunc')" href="../_variables/featuresfunc.html">$featuresfunc</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;activityname.'_supports';
<a name="l3996"><span class="linenum">3996</span></a>          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it37494" onMouseOver="hilite(37494)" onMouseOut="lolite()" onClick="logVariable('featuresfunc')" href="../_variables/featuresfunc.html">$featuresfunc</a>) &amp;&amp; <a class="var it37494" onMouseOver="hilite(37494)" onMouseOut="lolite()" onClick="logVariable('featuresfunc')" href="../_variables/featuresfunc.html">$featuresfunc</a>(<a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/backup:backupactivity', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context)) {
<a name="l3997"><span class="linenum">3997</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../backup/backup.php.html">/backup/backup.php</a>', array('id'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;course, 'cm'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;id));
<a name="l3998"><span class="linenum">3998</span></a>              <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('backup'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'backup');
<a name="l3999"><span class="linenum">3999</span></a>          }
<a name="l4000"><span class="linenum">4000</span></a>  
<a name="l4001"><span class="linenum">4001</span></a>  <span class="comment">        // Restore this activity</span>
<a name="l4002"><span class="linenum">4002</span></a>          <a class="var it37494" onMouseOver="hilite(37494)" onMouseOut="lolite()" onClick="logVariable('featuresfunc')" href="../_variables/featuresfunc.html">$featuresfunc</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;activityname.'_supports';
<a name="l4003"><span class="linenum">4003</span></a>          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it37494" onMouseOver="hilite(37494)" onMouseOut="lolite()" onClick="logVariable('featuresfunc')" href="../_variables/featuresfunc.html">$featuresfunc</a>) &amp;&amp; <a class="var it37494" onMouseOver="hilite(37494)" onMouseOut="lolite()" onClick="logVariable('featuresfunc')" href="../_variables/featuresfunc.html">$featuresfunc</a>(<a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/restore:restoreactivity', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context)) {
<a name="l4004"><span class="linenum">4004</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../backup/restorefile.php.html">/backup/restorefile.php</a>', array('contextid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context-&gt;id));
<a name="l4005"><span class="linenum">4005</span></a>              <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('restore'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'restore');
<a name="l4006"><span class="linenum">4006</span></a>          }
<a name="l4007"><span class="linenum">4007</span></a>  
<a name="l4008"><span class="linenum">4008</span></a>  <span class="comment">        // Allow the active advanced grading method plugin to append its settings</span>
<a name="l4009"><span class="linenum">4009</span></a>          <a class="var it37494" onMouseOver="hilite(37494)" onMouseOut="lolite()" onClick="logVariable('featuresfunc')" href="../_variables/featuresfunc.html">$featuresfunc</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;activityname.'_supports';
<a name="l4010"><span class="linenum">4010</span></a>          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it37494" onMouseOver="hilite(37494)" onMouseOut="lolite()" onClick="logVariable('featuresfunc')" href="../_variables/featuresfunc.html">$featuresfunc</a>) &amp;&amp; <a class="var it37494" onMouseOver="hilite(37494)" onMouseOut="lolite()" onClick="logVariable('featuresfunc')" href="../_variables/featuresfunc.html">$featuresfunc</a>(<a class="constant" onClick="logConstant('FEATURE_ADVANCED_GRADING')" href="../_constants/FEATURE_ADVANCED_GRADING.html" onMouseOver="constPopup(event,'FEATURE_ADVANCED_GRADING')">FEATURE_ADVANCED_GRADING</a>) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/grade:managegradingforms', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context)) {
<a name="l4011"><span class="linenum">4011</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../grade/grading/lib.php.html">/grade/grading/lib.php</a>');
<a name="l4012"><span class="linenum">4012</span></a>              <a class="var it10729" onMouseOver="hilite(10729)" onMouseOut="lolite()" onClick="logVariable('gradingman')" href="../_variables/gradingman.html">$gradingman</a> = <a class="function" onClick="logFunction('get_grading_manager')" href="../_functions/get_grading_manager.html" onMouseOver="funcPopup(event,'get_grading_manager')">get_grading_manager</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm-&gt;context, 'mod_'.<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;activityname);
<a name="l4013"><span class="linenum">4013</span></a>              <a class="var it10729" onMouseOver="hilite(10729)" onMouseOut="lolite()" onClick="logVariable('gradingman')" href="../_variables/gradingman.html">$gradingman</a>-&gt;<a class="function" onClick="logFunction('extend_settings_navigation')" href="../_functions/extend_settings_navigation.html" onMouseOver="funcPopup(event,'extend_settings_navigation')">extend_settings_navigation</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>);
<a name="l4014"><span class="linenum">4014</span></a>          }
<a name="l4015"><span class="linenum">4015</span></a>  
<a name="l4016"><span class="linenum">4016</span></a>          <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;activityname.'_extend_settings_navigation';
<a name="l4017"><span class="linenum">4017</span></a>          if (!<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)) {
<a name="l4018"><span class="linenum">4018</span></a>              return <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>;
<a name="l4019"><span class="linenum">4019</span></a>          }
<a name="l4020"><span class="linenum">4020</span></a>  
<a name="l4021"><span class="linenum">4021</span></a>          <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>);
<a name="l4022"><span class="linenum">4022</span></a>  
<a name="l4023"><span class="linenum">4023</span></a>  <span class="comment">        // Remove the module node if there are no children</span>
<a name="l4024"><span class="linenum">4024</span></a>          if (empty(<a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>-&gt;<a onClick="logVariable('children')" class="var it41095" onMouseOver="hilite(41095)" onMouseOut="lolite()" href="../_variables/children.html">children</a>)) {
<a name="l4025"><span class="linenum">4025</span></a>              <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>-&gt;<a class="function" onClick="logFunction('remove')" href="../_functions/remove.html" onMouseOver="funcPopup(event,'remove')">remove</a>();
<a name="l4026"><span class="linenum">4026</span></a>          }
<a name="l4027"><span class="linenum">4027</span></a>  
<a name="l4028"><span class="linenum">4028</span></a>          return <a class="var it35251" onMouseOver="hilite(35251)" onMouseOut="lolite()" onClick="logVariable('modulenode')" href="../_variables/modulenode.html">$modulenode</a>;
<a name="l4029"><span class="linenum">4029</span></a>      }
<a name="l4030"><span class="linenum">4030</span></a>  
<a name="l4031"><span class="linenum">4031</span></a>      <span class="comment">/**</span>
<a name="l4032"><span class="linenum">4032</span></a>  <span class="comment">     * Loads the user settings block of the settings nav</span>
<a name="l4033"><span class="linenum">4033</span></a>  <span class="comment">     *</span>
<a name="l4034"><span class="linenum">4034</span></a>  <span class="comment">     * This function is simply works out the userid and whether we need to load</span>
<a name="l4035"><span class="linenum">4035</span></a>  <span class="comment">     * just the current users profile settings, or the current user and the user the</span>
<a name="l4036"><span class="linenum">4036</span></a>  <span class="comment">     * current user is viewing.</span>
<a name="l4037"><span class="linenum">4037</span></a>  <span class="comment">     *</span>
<a name="l4038"><span class="linenum">4038</span></a>  <span class="comment">     * This function has some very ugly code to work out the user, if anyone has</span>
<a name="l4039"><span class="linenum">4039</span></a>  <span class="comment">     * any bright ideas please feel free to intervene.</span>
<a name="l4040"><span class="linenum">4040</span></a>  <span class="comment">     *</span>
<a name="l4041"><span class="linenum">4041</span></a>  <span class="comment">     * @param int $courseid The course id of the current course</span>
<a name="l4042"><span class="linenum">4042</span></a>  <span class="comment">     * @return navigation_node|false</span>
<a name="l4043"><span class="linenum">4043</span></a>  <span class="comment">     */</span>
<a name="l4044"><span class="linenum">4044</span></a>      protected function <a class="function" onClick="logFunction('load_user_settings')" href="../_functions/load_user_settings.html" onMouseOver="funcPopup(event,'load_user_settings')">load_user_settings</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l4045"><span class="linenum">4045</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l4046"><span class="linenum">4046</span></a>  
<a name="l4047"><span class="linenum">4047</span></a>          if (<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>() || !<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>()) {
<a name="l4048"><span class="linenum">4048</span></a>              return false;
<a name="l4049"><span class="linenum">4049</span></a>          }
<a name="l4050"><span class="linenum">4050</span></a>  
<a name="l4051"><span class="linenum">4051</span></a>          <a class="var it37547" onMouseOver="hilite(37547)" onMouseOut="lolite()" onClick="logVariable('navusers')" href="../_variables/navusers.html">$navusers</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;navigation-&gt;<a class="function" onClick="logFunction('get_extending_users')" href="../_functions/get_extending_users.html" onMouseOver="funcPopup(event,'get_extending_users')">get_extending_users</a>();
<a name="l4052"><span class="linenum">4052</span></a>  
<a name="l4053"><span class="linenum">4053</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userstoextendfor')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/userstoextendfor.html">userstoextendfor</a>) &gt; 0 || <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it37547" onMouseOver="hilite(37547)" onMouseOut="lolite()" onClick="logVariable('navusers')" href="../_variables/navusers.html">$navusers</a>) &gt; 0) {
<a name="l4054"><span class="linenum">4054</span></a>              <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a> = null;
<a name="l4055"><span class="linenum">4055</span></a>              foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userstoextendfor')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/userstoextendfor.html">userstoextendfor</a> as <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l4056"><span class="linenum">4056</span></a>                  if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l4057"><span class="linenum">4057</span></a>                      continue;
<a name="l4058"><span class="linenum">4058</span></a>                  }
<a name="l4059"><span class="linenum">4059</span></a>                  <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('generate_user_settings')" href="../_functions/generate_user_settings.html" onMouseOver="funcPopup(event,'generate_user_settings')">generate_user_settings</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, 'userviewingsettings');
<a name="l4060"><span class="linenum">4060</span></a>                  if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>)) {
<a name="l4061"><span class="linenum">4061</span></a>                      <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a> = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>;
<a name="l4062"><span class="linenum">4062</span></a>                  }
<a name="l4063"><span class="linenum">4063</span></a>              }
<a name="l4064"><span class="linenum">4064</span></a>              foreach (<a class="var it37547" onMouseOver="hilite(37547)" onMouseOut="lolite()" onClick="logVariable('navusers')" href="../_variables/navusers.html">$navusers</a> as <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) {
<a name="l4065"><span class="linenum">4065</span></a>                  if (<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l4066"><span class="linenum">4066</span></a>                      continue;
<a name="l4067"><span class="linenum">4067</span></a>                  }
<a name="l4068"><span class="linenum">4068</span></a>                  <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('generate_user_settings')" href="../_functions/generate_user_settings.html" onMouseOver="funcPopup(event,'generate_user_settings')">generate_user_settings</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'userviewingsettings');
<a name="l4069"><span class="linenum">4069</span></a>                  if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>)) {
<a name="l4070"><span class="linenum">4070</span></a>                      <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a> = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>;
<a name="l4071"><span class="linenum">4071</span></a>                  }
<a name="l4072"><span class="linenum">4072</span></a>              }
<a name="l4073"><span class="linenum">4073</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('generate_user_settings')" href="../_functions/generate_user_settings.html" onMouseOver="funcPopup(event,'generate_user_settings')">generate_user_settings</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l4074"><span class="linenum">4074</span></a>          } else {
<a name="l4075"><span class="linenum">4075</span></a>              <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('generate_user_settings')" href="../_functions/generate_user_settings.html" onMouseOver="funcPopup(event,'generate_user_settings')">generate_user_settings</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l4076"><span class="linenum">4076</span></a>          }
<a name="l4077"><span class="linenum">4077</span></a>          return <a class="var it1521" onMouseOver="hilite(1521)" onMouseOut="lolite()" onClick="logVariable('usernode')" href="../_variables/usernode.html">$usernode</a>;
<a name="l4078"><span class="linenum">4078</span></a>      }
<a name="l4079"><span class="linenum">4079</span></a>  
<a name="l4080"><span class="linenum">4080</span></a>      <span class="comment">/**</span>
<a name="l4081"><span class="linenum">4081</span></a>  <span class="comment">     * Extends the settings navigation for the given user.</span>
<a name="l4082"><span class="linenum">4082</span></a>  <span class="comment">     *</span>
<a name="l4083"><span class="linenum">4083</span></a>  <span class="comment">     * Note: This method gets called automatically if you call</span>
<a name="l4084"><span class="linenum">4084</span></a>  <span class="comment">     * $PAGE-&gt;navigation-&gt;extend_for_user($userid)</span>
<a name="l4085"><span class="linenum">4085</span></a>  <span class="comment">     *</span>
<a name="l4086"><span class="linenum">4086</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l4087"><span class="linenum">4087</span></a>  <span class="comment">     */</span>
<a name="l4088"><span class="linenum">4088</span></a>      public function <a class="function" onClick="logFunction('extend_for_user')" href="../_functions/extend_for_user.html" onMouseOver="funcPopup(event,'extend_for_user')">extend_for_user</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>) {
<a name="l4089"><span class="linenum">4089</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l4090"><span class="linenum">4090</span></a>  
<a name="l4091"><span class="linenum">4091</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userstoextendfor')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/userstoextendfor.html">userstoextendfor</a>)) {
<a name="l4092"><span class="linenum">4092</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('userstoextendfor')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/userstoextendfor.html">userstoextendfor</a>[] = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>;
<a name="l4093"><span class="linenum">4093</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('initialised')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/initialised.html">initialised</a>) {
<a name="l4094"><span class="linenum">4094</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('generate_user_settings')" href="../_functions/generate_user_settings.html" onMouseOver="funcPopup(event,'generate_user_settings')">generate_user_settings</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course-&gt;id, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, 'userviewingsettings');
<a name="l4095"><span class="linenum">4095</span></a>                  <a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> = array();
<a name="l4096"><span class="linenum">4096</span></a>                  foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l4097"><span class="linenum">4097</span></a>                      <a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>[] = <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>;
<a name="l4098"><span class="linenum">4098</span></a>                  }
<a name="l4099"><span class="linenum">4099</span></a>                  <a class="phpfunction" onClick="logFunction('array_unshift')" href="../_functions/array_unshift.html" onMouseOver="phpfuncPopup(event,'array_unshift')">array_unshift</a>(<a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>, <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a>));
<a name="l4100"><span class="linenum">4100</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_node_collection')" href="../_classes/navigation_node_collection.html" onMouseOver="classPopup(event,'navigation_node_collection')">navigation_node_collection</a>();
<a name="l4101"><span class="linenum">4101</span></a>                  foreach (<a class="var it1701" onMouseOver="hilite(1701)" onMouseOut="lolite()" onClick="logVariable('children')" href="../_variables/children.html">$children</a> as <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>) {
<a name="l4102"><span class="linenum">4102</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>);
<a name="l4103"><span class="linenum">4103</span></a>                  }
<a name="l4104"><span class="linenum">4104</span></a>              }
<a name="l4105"><span class="linenum">4105</span></a>          }
<a name="l4106"><span class="linenum">4106</span></a>      }
<a name="l4107"><span class="linenum">4107</span></a>  
<a name="l4108"><span class="linenum">4108</span></a>      <span class="comment">/**</span>
<a name="l4109"><span class="linenum">4109</span></a>  <span class="comment">     * This function gets called by {@link settings_navigation::load_user_settings()} and actually works out</span>
<a name="l4110"><span class="linenum">4110</span></a>  <span class="comment">     * what can be shown/done</span>
<a name="l4111"><span class="linenum">4111</span></a>  <span class="comment">     *</span>
<a name="l4112"><span class="linenum">4112</span></a>  <span class="comment">     * @param int $courseid The current course' id</span>
<a name="l4113"><span class="linenum">4113</span></a>  <span class="comment">     * @param int $userid The user id to load for</span>
<a name="l4114"><span class="linenum">4114</span></a>  <span class="comment">     * @param string $gstitle The string to pass to get_string for the branch title</span>
<a name="l4115"><span class="linenum">4115</span></a>  <span class="comment">     * @return navigation_node|false</span>
<a name="l4116"><span class="linenum">4116</span></a>  <span class="comment">     */</span>
<a name="l4117"><span class="linenum">4117</span></a>      protected function <a class="function" onClick="logFunction('generate_user_settings')" href="../_functions/generate_user_settings.html" onMouseOver="funcPopup(event,'generate_user_settings')">generate_user_settings</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="var it37548" onMouseOver="hilite(37548)" onMouseOut="lolite()" onClick="logVariable('gstitle')" href="../_variables/gstitle.html">$gstitle</a>='usercurrentsettings') {
<a name="l4118"><span class="linenum">4118</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>, <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l4119"><span class="linenum">4119</span></a>  
<a name="l4120"><span class="linenum">4120</span></a>          if (<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> != <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l4121"><span class="linenum">4121</span></a>              if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course-&gt;id) &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course-&gt;id == <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>) {
<a name="l4122"><span class="linenum">4122</span></a>                  <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course;
<a name="l4123"><span class="linenum">4123</span></a>              } else {
<a name="l4124"><span class="linenum">4124</span></a>                  <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l4125"><span class="linenum">4125</span></a>                  <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT c.*, <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>
<a name="l4126"><span class="linenum">4126</span></a>                            FROM {course} c
<a name="l4127"><span class="linenum">4127</span></a>                            JOIN {context} ctx ON c.id = ctx.instanceid
<a name="l4128"><span class="linenum">4128</span></a>                           WHERE c.id = :courseid AND ctx.contextlevel = :contextlevel&quot;;
<a name="l4129"><span class="linenum">4129</span></a>                  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('courseid' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, 'contextlevel' =&gt; <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>);
<a name="l4130"><span class="linenum">4130</span></a>                  <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l4131"><span class="linenum">4131</span></a>                  <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l4132"><span class="linenum">4132</span></a>              }
<a name="l4133"><span class="linenum">4133</span></a>          } else {
<a name="l4134"><span class="linenum">4134</span></a>              <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>;
<a name="l4135"><span class="linenum">4135</span></a>          }
<a name="l4136"><span class="linenum">4136</span></a>  
<a name="l4137"><span class="linenum">4137</span></a>          <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);   <span class="comment">// Course context</span>
<a name="l4138"><span class="linenum">4138</span></a>          <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>   = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l4139"><span class="linenum">4139</span></a>          <a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a> = (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>);
<a name="l4140"><span class="linenum">4140</span></a>  
<a name="l4141"><span class="linenum">4141</span></a>          if (<a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a>) {
<a name="l4142"><span class="linenum">4142</span></a>              <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l4143"><span class="linenum">4143</span></a>              <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);       <span class="comment">// User context</span>
<a name="l4144"><span class="linenum">4144</span></a>          } else {
<a name="l4145"><span class="linenum">4145</span></a>              <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l4146"><span class="linenum">4146</span></a>              <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT u.*, <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>
<a name="l4147"><span class="linenum">4147</span></a>                        FROM {user} u
<a name="l4148"><span class="linenum">4148</span></a>                        JOIN {context} ctx ON u.id = ctx.instanceid
<a name="l4149"><span class="linenum">4149</span></a>                       WHERE u.id = :userid AND ctx.contextlevel = :contextlevel&quot;;
<a name="l4150"><span class="linenum">4150</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('userid' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, 'contextlevel' =&gt; <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a>);
<a name="l4151"><span class="linenum">4151</span></a>              <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l4152"><span class="linenum">4152</span></a>              if (!<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) {
<a name="l4153"><span class="linenum">4153</span></a>                  return false;
<a name="l4154"><span class="linenum">4154</span></a>              }
<a name="l4155"><span class="linenum">4155</span></a>              <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>);
<a name="l4156"><span class="linenum">4156</span></a>  
<a name="l4157"><span class="linenum">4157</span></a>  <span class="comment">            // Check that the user can view the profile</span>
<a name="l4158"><span class="linenum">4158</span></a>              <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>); <span class="comment">// User context</span>
<a name="l4159"><span class="linenum">4159</span></a>              <a class="var it22519" onMouseOver="hilite(22519)" onMouseOut="lolite()" onClick="logVariable('canviewuser')" href="../_variables/canviewuser.html">$canviewuser</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:viewdetails', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>);
<a name="l4160"><span class="linenum">4160</span></a>  
<a name="l4161"><span class="linenum">4161</span></a>              if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l4162"><span class="linenum">4162</span></a>                  if (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('forceloginforprofiles')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/forceloginforprofiles.html">forceloginforprofiles</a> &amp;&amp; !<a class="function" onClick="logFunction('has_coursecontact_role')" href="../_functions/has_coursecontact_role.html" onMouseOver="funcPopup(event,'has_coursecontact_role')">has_coursecontact_role</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) &amp;&amp; !<a class="var it22519" onMouseOver="hilite(22519)" onMouseOut="lolite()" onClick="logVariable('canviewuser')" href="../_variables/canviewuser.html">$canviewuser</a>) {  // Reduce possibility of &quot;browsing&quot; userbase at site level
<a name="l4163"><span class="linenum">4163</span></a>  <span class="comment">                    // Teachers can browse and be browsed at site level. If not forceloginforprofiles, allow access (bug #4366)</span>
<a name="l4164"><span class="linenum">4164</span></a>                      return false;
<a name="l4165"><span class="linenum">4165</span></a>                  }
<a name="l4166"><span class="linenum">4166</span></a>              } else {
<a name="l4167"><span class="linenum">4167</span></a>                  <a class="var it37549" onMouseOver="hilite(37549)" onMouseOut="lolite()" onClick="logVariable('canviewusercourse')" href="../_variables/canviewusercourse.html">$canviewusercourse</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:viewdetails', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l4168"><span class="linenum">4168</span></a>                  <a class="var it37550" onMouseOver="hilite(37550)" onMouseOut="lolite()" onClick="logVariable('userisenrolled')" href="../_variables/userisenrolled.html">$userisenrolled</a> = <a class="function" onClick="logFunction('is_enrolled')" href="../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, '', true);
<a name="l4169"><span class="linenum">4169</span></a>                  if ((!<a class="var it37549" onMouseOver="hilite(37549)" onMouseOut="lolite()" onClick="logVariable('canviewusercourse')" href="../_variables/canviewusercourse.html">$canviewusercourse</a> &amp;&amp; !<a class="var it22519" onMouseOver="hilite(22519)" onMouseOut="lolite()" onClick="logVariable('canviewuser')" href="../_variables/canviewuser.html">$canviewuser</a>) || !<a class="var it37550" onMouseOver="hilite(37550)" onMouseOut="lolite()" onClick="logVariable('userisenrolled')" href="../_variables/userisenrolled.html">$userisenrolled</a>) {
<a name="l4170"><span class="linenum">4170</span></a>                      return false;
<a name="l4171"><span class="linenum">4171</span></a>                  }
<a name="l4172"><span class="linenum">4172</span></a>                  <a class="var it11626" onMouseOver="hilite(11626)" onMouseOut="lolite()" onClick="logVariable('canaccessallgroups')" href="../_variables/canaccessallgroups.html">$canaccessallgroups</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l4173"><span class="linenum">4173</span></a>                  if (!<a class="var it11626" onMouseOver="hilite(11626)" onMouseOut="lolite()" onClick="logVariable('canaccessallgroups')" href="../_variables/canaccessallgroups.html">$canaccessallgroups</a> &amp;&amp; <a class="function" onClick="logFunction('groups_get_course_groupmode')" href="../_functions/groups_get_course_groupmode.html" onMouseOver="funcPopup(event,'groups_get_course_groupmode')">groups_get_course_groupmode</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> &amp;&amp; !<a class="var it22519" onMouseOver="hilite(22519)" onMouseOut="lolite()" onClick="logVariable('canviewuser')" href="../_variables/canviewuser.html">$canviewuser</a>) {
<a name="l4174"><span class="linenum">4174</span></a>  <span class="comment">                    // If groups are in use, make sure we can see that group (MDL-45874). That does not apply to parents.</span>
<a name="l4175"><span class="linenum">4175</span></a>                      if (<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> == <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course-&gt;id) {
<a name="l4176"><span class="linenum">4176</span></a>                          <a class="var it23129" onMouseOver="hilite(23129)" onMouseOut="lolite()" onClick="logVariable('mygroups')" href="../_variables/mygroups.html">$mygroups</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course)-&gt;groups;
<a name="l4177"><span class="linenum">4177</span></a>                      } else {
<a name="l4178"><span class="linenum">4178</span></a>                          <a class="var it23129" onMouseOver="hilite(23129)" onMouseOut="lolite()" onClick="logVariable('mygroups')" href="../_variables/mygroups.html">$mygroups</a> = <a class="function" onClick="logFunction('groups_get_user_groups')" href="../_functions/groups_get_user_groups.html" onMouseOver="funcPopup(event,'groups_get_user_groups')">groups_get_user_groups</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l4179"><span class="linenum">4179</span></a>                      }
<a name="l4180"><span class="linenum">4180</span></a>                      <a class="var it11639" onMouseOver="hilite(11639)" onMouseOut="lolite()" onClick="logVariable('usergroups')" href="../_variables/usergroups.html">$usergroups</a> = <a class="function" onClick="logFunction('groups_get_user_groups')" href="../_functions/groups_get_user_groups.html" onMouseOver="funcPopup(event,'groups_get_user_groups')">groups_get_user_groups</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>);
<a name="l4181"><span class="linenum">4181</span></a>                      if (!array_intersect_key(<a class="var it23129" onMouseOver="hilite(23129)" onMouseOut="lolite()" onClick="logVariable('mygroups')" href="../_variables/mygroups.html">$mygroups</a>[0], <a class="var it11639" onMouseOver="hilite(11639)" onMouseOut="lolite()" onClick="logVariable('usergroups')" href="../_variables/usergroups.html">$usergroups</a>[0])) {
<a name="l4182"><span class="linenum">4182</span></a>                          return false;
<a name="l4183"><span class="linenum">4183</span></a>                      }
<a name="l4184"><span class="linenum">4184</span></a>                  }
<a name="l4185"><span class="linenum">4185</span></a>              }
<a name="l4186"><span class="linenum">4186</span></a>          }
<a name="l4187"><span class="linenum">4187</span></a>  
<a name="l4188"><span class="linenum">4188</span></a>          <a class="var it104" onMouseOver="hilite(104)" onMouseOut="lolite()" onClick="logVariable('fullname')" href="../_variables/fullname.html">$fullname</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context));
<a name="l4189"><span class="linenum">4189</span></a>  
<a name="l4190"><span class="linenum">4190</span></a>          <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> = <a class="var it37548" onMouseOver="hilite(37548)" onMouseOut="lolite()" onClick="logVariable('gstitle')" href="../_variables/gstitle.html">$gstitle</a>;
<a name="l4191"><span class="linenum">4191</span></a>          <a class="var it37551" onMouseOver="hilite(37551)" onMouseOut="lolite()" onClick="logVariable('prefurl')" href="../_variables/prefurl.html">$prefurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/preferences.php.html">/user/preferences.php</a>');
<a name="l4192"><span class="linenum">4192</span></a>          if (<a class="var it37548" onMouseOver="hilite(37548)" onMouseOut="lolite()" onClick="logVariable('gstitle')" href="../_variables/gstitle.html">$gstitle</a> != 'usercurrentsettings') {
<a name="l4193"><span class="linenum">4193</span></a>              <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> .= <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>;
<a name="l4194"><span class="linenum">4194</span></a>              <a class="var it37551" onMouseOver="hilite(37551)" onMouseOut="lolite()" onClick="logVariable('prefurl')" href="../_variables/prefurl.html">$prefurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('userid', <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>);
<a name="l4195"><span class="linenum">4195</span></a>          }
<a name="l4196"><span class="linenum">4196</span></a>  
<a name="l4197"><span class="linenum">4197</span></a>  <span class="comment">        // Add a user setting branch.</span>
<a name="l4198"><span class="linenum">4198</span></a>          if (<a class="var it37548" onMouseOver="hilite(37548)" onMouseOut="lolite()" onClick="logVariable('gstitle')" href="../_variables/gstitle.html">$gstitle</a> == 'usercurrentsettings') {
<a name="l4199"><span class="linenum">4199</span></a>              <a class="var it37552" onMouseOver="hilite(37552)" onMouseOut="lolite()" onClick="logVariable('dashboard')" href="../_variables/dashboard.html">$dashboard</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('myhome'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/my/'), self::TYPE_CONTAINER, null, 'dashboard');
<a name="l4200"><span class="linenum">4200</span></a>  <span class="comment">            // This should be set to false as we don't want to show this to the user. It's only for generating the correct</span>
<a name="l4201"><span class="linenum">4201</span></a>  <span class="comment">            // breadcrumb.</span>
<a name="l4202"><span class="linenum">4202</span></a>              <a class="var it37552" onMouseOver="hilite(37552)" onMouseOut="lolite()" onClick="logVariable('dashboard')" href="../_variables/dashboard.html">$dashboard</a>-&gt;<a onClick="logVariable('display')" class="var it41096" onMouseOver="hilite(41096)" onMouseOut="lolite()" href="../_variables/display.html">display</a> = false;
<a name="l4203"><span class="linenum">4203</span></a>              if (<a class="function" onClick="logFunction('get_home_page')" href="../_functions/get_home_page.html" onMouseOver="funcPopup(event,'get_home_page')">get_home_page</a>() == <a class="constant" onClick="logConstant('HOMEPAGE_MY')" href="../_constants/HOMEPAGE_MY.html" onMouseOver="constPopup(event,'HOMEPAGE_MY')">HOMEPAGE_MY</a>) {
<a name="l4204"><span class="linenum">4204</span></a>                  <a class="var it37552" onMouseOver="hilite(37552)" onMouseOut="lolite()" onClick="logVariable('dashboard')" href="../_variables/dashboard.html">$dashboard</a>-&gt;<a onClick="logVariable('mainnavonly')" class="var it41096" onMouseOver="hilite(41096)" onMouseOut="lolite()" href="../_variables/mainnavonly.html">mainnavonly</a> = true;
<a name="l4205"><span class="linenum">4205</span></a>              }
<a name="l4206"><span class="linenum">4206</span></a>  
<a name="l4207"><span class="linenum">4207</span></a>              <a class="var it5232" onMouseOver="hilite(5232)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../_variables/iscurrentuser.html">$iscurrentuser</a> = (<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l4208"><span class="linenum">4208</span></a>  
<a name="l4209"><span class="linenum">4209</span></a>              <a class="var it37495" onMouseOver="hilite(37495)" onMouseOut="lolite()" onClick="logVariable('baseargs')" href="../_variables/baseargs.html">$baseargs</a> = array('id' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l4210"><span class="linenum">4210</span></a>              if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a> &amp;&amp; !<a class="var it5232" onMouseOver="hilite(5232)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../_variables/iscurrentuser.html">$iscurrentuser</a>) {
<a name="l4211"><span class="linenum">4211</span></a>                  <a class="var it37495" onMouseOver="hilite(37495)" onMouseOut="lolite()" onClick="logVariable('baseargs')" href="../_variables/baseargs.html">$baseargs</a>['course'] = <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l4212"><span class="linenum">4212</span></a>                  <a class="var it37496" onMouseOver="hilite(37496)" onMouseOut="lolite()" onClick="logVariable('issitecourse')" href="../_variables/issitecourse.html">$issitecourse</a> = false;
<a name="l4213"><span class="linenum">4213</span></a>              } else {
<a name="l4214"><span class="linenum">4214</span></a>  <span class="comment">                // Load all categories and get the context for the system.</span>
<a name="l4215"><span class="linenum">4215</span></a>                  <a class="var it37496" onMouseOver="hilite(37496)" onMouseOut="lolite()" onClick="logVariable('issitecourse')" href="../_variables/issitecourse.html">$issitecourse</a> = true;
<a name="l4216"><span class="linenum">4216</span></a>              }
<a name="l4217"><span class="linenum">4217</span></a>  
<a name="l4218"><span class="linenum">4218</span></a>  <span class="comment">            // Add the user profile to the dashboard.</span>
<a name="l4219"><span class="linenum">4219</span></a>              <a class="var it37553" onMouseOver="hilite(37553)" onMouseOut="lolite()" onClick="logVariable('profilenode')" href="../_variables/profilenode.html">$profilenode</a> = <a class="var it37552" onMouseOver="hilite(37552)" onMouseOut="lolite()" onClick="logVariable('dashboard')" href="../_variables/dashboard.html">$dashboard</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('profile'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/profile.php.html">/user/profile.php</a>',
<a name="l4220"><span class="linenum">4220</span></a>                      array('id' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)), self::TYPE_SETTING, null, 'myprofile');
<a name="l4221"><span class="linenum">4221</span></a>  
<a name="l4222"><span class="linenum">4222</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('navadduserpostslinks')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/navadduserpostslinks.html">navadduserpostslinks</a>)) {
<a name="l4223"><span class="linenum">4223</span></a>  <span class="comment">                // Add nodes for forum posts and discussions if the user can view either or both</span>
<a name="l4224"><span class="linenum">4224</span></a>  <span class="comment">                // There are no capability checks here as the content of the page is based</span>
<a name="l4225"><span class="linenum">4225</span></a>  <span class="comment">                // purely on the forums the current user has access too.</span>
<a name="l4226"><span class="linenum">4226</span></a>                  <a class="var it37500" onMouseOver="hilite(37500)" onMouseOut="lolite()" onClick="logVariable('forumtab')" href="../_variables/forumtab.html">$forumtab</a> = <a class="var it37553" onMouseOver="hilite(37553)" onMouseOut="lolite()" onClick="logVariable('profilenode')" href="../_variables/profilenode.html">$profilenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('forumposts', 'forum'));
<a name="l4227"><span class="linenum">4227</span></a>                  <a class="var it37500" onMouseOver="hilite(37500)" onMouseOut="lolite()" onClick="logVariable('forumtab')" href="../_variables/forumtab.html">$forumtab</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('posts', 'forum'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../mod/forum/user.php.html">/mod/forum/user.php</a>', <a class="var it37495" onMouseOver="hilite(37495)" onMouseOut="lolite()" onClick="logVariable('baseargs')" href="../_variables/baseargs.html">$baseargs</a>), null, 'myposts');
<a name="l4228"><span class="linenum">4228</span></a>                  <a class="var it37500" onMouseOver="hilite(37500)" onMouseOut="lolite()" onClick="logVariable('forumtab')" href="../_variables/forumtab.html">$forumtab</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('discussions', 'forum'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../mod/forum/user.php.html">/mod/forum/user.php</a>',
<a name="l4229"><span class="linenum">4229</span></a>                          <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it37495" onMouseOver="hilite(37495)" onMouseOut="lolite()" onClick="logVariable('baseargs')" href="../_variables/baseargs.html">$baseargs</a>, array('mode' =&gt; 'discussions'))), null, 'mydiscussions');
<a name="l4230"><span class="linenum">4230</span></a>              }
<a name="l4231"><span class="linenum">4231</span></a>  
<a name="l4232"><span class="linenum">4232</span></a>  <span class="comment">            // Add blog nodes.</span>
<a name="l4233"><span class="linenum">4233</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableblogs')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enableblogs.html">enableblogs</a>)) {
<a name="l4234"><span class="linenum">4234</span></a>                  if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;<a class="function" onClick="logFunction('cached')" href="../_functions/cached.html" onMouseOver="funcPopup(event,'cached')">cached</a>('userblogoptions'.<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l4235"><span class="linenum">4235</span></a>                      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../blog/lib.php.html">/blog/lib.php</a>');
<a name="l4236"><span class="linenum">4236</span></a>  <span class="comment">                    // Get all options for the user.</span>
<a name="l4237"><span class="linenum">4237</span></a>                      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = <a class="function" onClick="logFunction('blog_get_options_for_user')" href="../_functions/blog_get_options_for_user.html" onMouseOver="funcPopup(event,'blog_get_options_for_user')">blog_get_options_for_user</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>);
<a name="l4238"><span class="linenum">4238</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('userblogoptions'.<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>);
<a name="l4239"><span class="linenum">4239</span></a>                  } else {
<a name="l4240"><span class="linenum">4240</span></a>                      <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;{'userblogoptions'.<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>};
<a name="l4241"><span class="linenum">4241</span></a>                  }
<a name="l4242"><span class="linenum">4242</span></a>  
<a name="l4243"><span class="linenum">4243</span></a>                  if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a>) &gt; 0) {
<a name="l4244"><span class="linenum">4244</span></a>                      <a class="var it4270" onMouseOver="hilite(4270)" onMouseOut="lolite()" onClick="logVariable('blogs')" href="../_variables/blogs.html">$blogs</a> = <a class="var it37553" onMouseOver="hilite(37553)" onMouseOut="lolite()" onClick="logVariable('profilenode')" href="../_variables/profilenode.html">$profilenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('blogs', 'blog'), null, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_CONTAINER);
<a name="l4245"><span class="linenum">4245</span></a>                      foreach (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../_variables/options.html">$options</a> as <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> =&gt; <a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('option')" href="../_variables/option.html">$option</a>) {
<a name="l4246"><span class="linenum">4246</span></a>                          if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> == &quot;rss&quot;) {
<a name="l4247"><span class="linenum">4247</span></a>                              <a class="var it4270" onMouseOver="hilite(4270)" onMouseOut="lolite()" onClick="logVariable('blogs')" href="../_variables/blogs.html">$blogs</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('option')" href="../_variables/option.html">$option</a>['string'], <a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('option')" href="../_variables/option.html">$option</a>['link'], self::TYPE_SETTING, null, null,
<a name="l4248"><span class="linenum">4248</span></a>                                      <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/rss', ''));
<a name="l4249"><span class="linenum">4249</span></a>                          } else {
<a name="l4250"><span class="linenum">4250</span></a>                              <a class="var it4270" onMouseOver="hilite(4270)" onMouseOut="lolite()" onClick="logVariable('blogs')" href="../_variables/blogs.html">$blogs</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('option')" href="../_variables/option.html">$option</a>['string'], <a class="var it38" onMouseOver="hilite(38)" onMouseOut="lolite()" onClick="logVariable('option')" href="../_variables/option.html">$option</a>['link'], self::TYPE_SETTING, null, 'blog' . <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l4251"><span class="linenum">4251</span></a>                          }
<a name="l4252"><span class="linenum">4252</span></a>                      }
<a name="l4253"><span class="linenum">4253</span></a>                  }
<a name="l4254"><span class="linenum">4254</span></a>              }
<a name="l4255"><span class="linenum">4255</span></a>  
<a name="l4256"><span class="linenum">4256</span></a>  <span class="comment">            // Add the messages link.</span>
<a name="l4257"><span class="linenum">4257</span></a>  <span class="comment">            // It is context based so can appear in the user's profile and in course participants information.</span>
<a name="l4258"><span class="linenum">4258</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messaging')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/messaging.html">messaging</a>)) {
<a name="l4259"><span class="linenum">4259</span></a>                  <a class="var it37501" onMouseOver="hilite(37501)" onMouseOut="lolite()" onClick="logVariable('messageargs')" href="../_variables/messageargs.html">$messageargs</a> = array('user1' =&gt; <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l4260"><span class="linenum">4260</span></a>                  if (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l4261"><span class="linenum">4261</span></a>                      <a class="var it37501" onMouseOver="hilite(37501)" onMouseOut="lolite()" onClick="logVariable('messageargs')" href="../_variables/messageargs.html">$messageargs</a>['user2'] = <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l4262"><span class="linenum">4262</span></a>                  }
<a name="l4263"><span class="linenum">4263</span></a>                  if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l4264"><span class="linenum">4264</span></a>                      <a class="var it37501" onMouseOver="hilite(37501)" onMouseOut="lolite()" onClick="logVariable('messageargs')" href="../_variables/messageargs.html">$messageargs</a>['viewing'] = <a class="constant" onClick="logConstant('MESSAGE_VIEW_COURSE')" href="../_constants/MESSAGE_VIEW_COURSE.html" onMouseOver="constPopup(event,'MESSAGE_VIEW_COURSE')">MESSAGE_VIEW_COURSE</a>. <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l4265"><span class="linenum">4265</span></a>                  }
<a name="l4266"><span class="linenum">4266</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../message/index.php.html">/message/index.php</a>', <a class="var it37501" onMouseOver="hilite(37501)" onMouseOut="lolite()" onClick="logVariable('messageargs')" href="../_variables/messageargs.html">$messageargs</a>);
<a name="l4267"><span class="linenum">4267</span></a>                  <a class="var it37552" onMouseOver="hilite(37552)" onMouseOut="lolite()" onClick="logVariable('dashboard')" href="../_variables/dashboard.html">$dashboard</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messages', 'message'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'messages');
<a name="l4268"><span class="linenum">4268</span></a>              }
<a name="l4269"><span class="linenum">4269</span></a>  
<a name="l4270"><span class="linenum">4270</span></a>  <span class="comment">            // Add the &quot;My private files&quot; link.</span>
<a name="l4271"><span class="linenum">4271</span></a>  <span class="comment">            // This link doesn't have a unique display for course context so only display it under the user's profile.</span>
<a name="l4272"><span class="linenum">4272</span></a>              if (<a class="var it37496" onMouseOver="hilite(37496)" onMouseOut="lolite()" onClick="logVariable('issitecourse')" href="../_variables/issitecourse.html">$issitecourse</a> &amp;&amp; <a class="var it5232" onMouseOver="hilite(5232)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../_variables/iscurrentuser.html">$iscurrentuser</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:manageownfiles', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>)) {
<a name="l4273"><span class="linenum">4273</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/files.php.html">/user/files.php</a>');
<a name="l4274"><span class="linenum">4274</span></a>                  <a class="var it37552" onMouseOver="hilite(37552)" onMouseOut="lolite()" onClick="logVariable('dashboard')" href="../_variables/dashboard.html">$dashboard</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('privatefiles'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4275"><span class="linenum">4275</span></a>              }
<a name="l4276"><span class="linenum">4276</span></a>  
<a name="l4277"><span class="linenum">4277</span></a>  <span class="comment">            // Add a node to view the users notes if permitted.</span>
<a name="l4278"><span class="linenum">4278</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablenotes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enablenotes.html">enablenotes</a>) &amp;&amp;
<a name="l4279"><span class="linenum">4279</span></a>                      <a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/notes:manage', 'moodle/notes:view'), <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l4280"><span class="linenum">4280</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../notes/index.php.html">/notes/index.php</a>', array('user' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4281"><span class="linenum">4281</span></a>                  if (<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l4282"><span class="linenum">4282</span></a>                      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('course', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>);
<a name="l4283"><span class="linenum">4283</span></a>                  }
<a name="l4284"><span class="linenum">4284</span></a>                  <a class="var it37553" onMouseOver="hilite(37553)" onMouseOut="lolite()" onClick="logVariable('profilenode')" href="../_variables/profilenode.html">$profilenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('notes', 'notes'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>);
<a name="l4285"><span class="linenum">4285</span></a>              }
<a name="l4286"><span class="linenum">4286</span></a>  
<a name="l4287"><span class="linenum">4287</span></a>  <span class="comment">            // Show the grades node.</span>
<a name="l4288"><span class="linenum">4288</span></a>              if ((<a class="var it37496" onMouseOver="hilite(37496)" onMouseOut="lolite()" onClick="logVariable('issitecourse')" href="../_variables/issitecourse.html">$issitecourse</a> &amp;&amp; <a class="var it5232" onMouseOver="hilite(5232)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../_variables/iscurrentuser.html">$iscurrentuser</a>) || <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:viewdetails', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>)) {
<a name="l4289"><span class="linenum">4289</span></a>                  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../user/lib.php.html">/user/lib.php</a>');
<a name="l4290"><span class="linenum">4290</span></a>  <span class="comment">                // Set the grades node to link to the &quot;Grades&quot; page.</span>
<a name="l4291"><span class="linenum">4291</span></a>                  if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l4292"><span class="linenum">4292</span></a>                      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="function" onClick="logFunction('user_mygrades_url')" href="../_functions/user_mygrades_url.html" onMouseOver="funcPopup(event,'user_mygrades_url')">user_mygrades_url</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l4293"><span class="linenum">4293</span></a>                  } else { // Otherwise we are in a course and should redirect to the user grade report (Activity report version).
<a name="l4294"><span class="linenum">4294</span></a>                      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/user.php.html">/course/user.php</a>', array('mode' =&gt; 'grade', 'id' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'user' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4295"><span class="linenum">4295</span></a>                  }
<a name="l4296"><span class="linenum">4296</span></a>                  <a class="var it37552" onMouseOver="hilite(37552)" onMouseOut="lolite()" onClick="logVariable('dashboard')" href="../_variables/dashboard.html">$dashboard</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grades', 'grades'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'mygrades');
<a name="l4297"><span class="linenum">4297</span></a>              }
<a name="l4298"><span class="linenum">4298</span></a>              <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a> = <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('preferences', 'moodle'), <a class="var it37551" onMouseOver="hilite(37551)" onMouseOut="lolite()" onClick="logVariable('prefurl')" href="../_variables/prefurl.html">$prefurl</a>, self::TYPE_CONTAINER, null, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>);
<a name="l4299"><span class="linenum">4299</span></a>              <a class="var it37552" onMouseOver="hilite(37552)" onMouseOut="lolite()" onClick="logVariable('dashboard')" href="../_variables/dashboard.html">$dashboard</a>-&gt;<a class="function" onClick="logFunction('add_node')" href="../_functions/add_node.html" onMouseOver="funcPopup(event,'add_node')">add_node</a>(<a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>);
<a name="l4300"><span class="linenum">4300</span></a>          } else {
<a name="l4301"><span class="linenum">4301</span></a>              <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('preferences', 'moodle'), <a class="var it37551" onMouseOver="hilite(37551)" onMouseOut="lolite()" onClick="logVariable('prefurl')" href="../_variables/prefurl.html">$prefurl</a>, self::TYPE_CONTAINER, null, <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>);
<a name="l4302"><span class="linenum">4302</span></a>              <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>-&gt;<a onClick="logVariable('display')" class="var it41097" onMouseOver="hilite(41097)" onMouseOut="lolite()" href="../_variables/display.html">display</a> = false;
<a name="l4303"><span class="linenum">4303</span></a>          }
<a name="l4304"><span class="linenum">4304</span></a>          <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>-&gt;<a onClick="logVariable('id')" class="var it41097" onMouseOver="hilite(41097)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = 'usersettings';
<a name="l4305"><span class="linenum">4305</span></a>  
<a name="l4306"><span class="linenum">4306</span></a>  <span class="comment">        // Check if the user has been deleted.</span>
<a name="l4307"><span class="linenum">4307</span></a>          if (<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('deleted')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/deleted.html">deleted</a>) {
<a name="l4308"><span class="linenum">4308</span></a>              if (!<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:update', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l4309"><span class="linenum">4309</span></a>  <span class="comment">                // We can't edit the user so just show the user deleted message.</span>
<a name="l4310"><span class="linenum">4310</span></a>                  <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('userdeleted'), null, self::TYPE_SETTING);
<a name="l4311"><span class="linenum">4311</span></a>              } else {
<a name="l4312"><span class="linenum">4312</span></a>  <span class="comment">                // We can edit the user so show the user deleted message and link it to the profile.</span>
<a name="l4313"><span class="linenum">4313</span></a>                  if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('id')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) {
<a name="l4314"><span class="linenum">4314</span></a>                      <a class="var it16215" onMouseOver="hilite(16215)" onMouseOut="lolite()" onClick="logVariable('profileurl')" href="../_variables/profileurl.html">$profileurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/profile.php.html">/user/profile.php</a>', array('id'=&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4315"><span class="linenum">4315</span></a>                  } else {
<a name="l4316"><span class="linenum">4316</span></a>                      <a class="var it16215" onMouseOver="hilite(16215)" onMouseOut="lolite()" onClick="logVariable('profileurl')" href="../_variables/profileurl.html">$profileurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/view.php.html">/user/view.php</a>', array('id'=&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'course'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4317"><span class="linenum">4317</span></a>                  }
<a name="l4318"><span class="linenum">4318</span></a>                  <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('userdeleted'), <a class="var it16215" onMouseOver="hilite(16215)" onMouseOut="lolite()" onClick="logVariable('profileurl')" href="../_variables/profileurl.html">$profileurl</a>, self::TYPE_SETTING);
<a name="l4319"><span class="linenum">4319</span></a>              }
<a name="l4320"><span class="linenum">4320</span></a>              return true;
<a name="l4321"><span class="linenum">4321</span></a>          }
<a name="l4322"><span class="linenum">4322</span></a>  
<a name="l4323"><span class="linenum">4323</span></a>          <a class="var it37555" onMouseOver="hilite(37555)" onMouseOut="lolite()" onClick="logVariable('userauthplugin')" href="../_variables/userauthplugin.html">$userauthplugin</a> = false;
<a name="l4324"><span class="linenum">4324</span></a>          if (!empty(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('auth')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/auth.html">auth</a>)) {
<a name="l4325"><span class="linenum">4325</span></a>              <a class="var it37555" onMouseOver="hilite(37555)" onMouseOut="lolite()" onClick="logVariable('userauthplugin')" href="../_variables/userauthplugin.html">$userauthplugin</a> = <a class="function" onClick="logFunction('get_auth_plugin')" href="../_functions/get_auth_plugin.html" onMouseOver="funcPopup(event,'get_auth_plugin')">get_auth_plugin</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('auth')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/auth.html">auth</a>);
<a name="l4326"><span class="linenum">4326</span></a>          }
<a name="l4327"><span class="linenum">4327</span></a>  
<a name="l4328"><span class="linenum">4328</span></a>          <a class="var it37556" onMouseOver="hilite(37556)" onMouseOut="lolite()" onClick="logVariable('useraccount')" href="../_variables/useraccount.html">$useraccount</a> = <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('useraccount'), null, self::TYPE_CONTAINER, null, 'useraccount');
<a name="l4329"><span class="linenum">4329</span></a>  
<a name="l4330"><span class="linenum">4330</span></a>  <span class="comment">        // Add the profile edit link.</span>
<a name="l4331"><span class="linenum">4331</span></a>          if (<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() &amp;&amp; !<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) &amp;&amp; !<a class="function" onClick="logFunction('is_mnet_remote_user')" href="../_functions/is_mnet_remote_user.html" onMouseOver="funcPopup(event,'is_mnet_remote_user')">is_mnet_remote_user</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>)) {
<a name="l4332"><span class="linenum">4332</span></a>              if ((<a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a> || <a class="function" onClick="logFunction('is_siteadmin')" href="../_functions/is_siteadmin.html" onMouseOver="funcPopup(event,'is_siteadmin')">is_siteadmin</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>) || !<a class="function" onClick="logFunction('is_siteadmin')" href="../_functions/is_siteadmin.html" onMouseOver="funcPopup(event,'is_siteadmin')">is_siteadmin</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>)) &amp;&amp;
<a name="l4333"><span class="linenum">4333</span></a>                      <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:update', <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>)) {
<a name="l4334"><span class="linenum">4334</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/editadvanced.php.html">/user/editadvanced.php</a>', array('id'=&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'course'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4335"><span class="linenum">4335</span></a>                  <a class="var it37556" onMouseOver="hilite(37556)" onMouseOut="lolite()" onClick="logVariable('useraccount')" href="../_variables/useraccount.html">$useraccount</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editmyprofile'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4336"><span class="linenum">4336</span></a>              } else if ((<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:editprofile', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>) &amp;&amp; !<a class="function" onClick="logFunction('is_siteadmin')" href="../_functions/is_siteadmin.html" onMouseOver="funcPopup(event,'is_siteadmin')">is_siteadmin</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>)) ||
<a name="l4337"><span class="linenum">4337</span></a>                      (<a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:editownprofile', <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>))) {
<a name="l4338"><span class="linenum">4338</span></a>                  if (<a class="var it37555" onMouseOver="hilite(37555)" onMouseOut="lolite()" onClick="logVariable('userauthplugin')" href="../_variables/userauthplugin.html">$userauthplugin</a> &amp;&amp; <a class="var it37555" onMouseOver="hilite(37555)" onMouseOut="lolite()" onClick="logVariable('userauthplugin')" href="../_variables/userauthplugin.html">$userauthplugin</a>-&gt;<a class="function" onClick="logFunction('can_edit_profile')" href="../_functions/can_edit_profile.html" onMouseOver="funcPopup(event,'can_edit_profile')">can_edit_profile</a>()) {
<a name="l4339"><span class="linenum">4339</span></a>                      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <a class="var it37555" onMouseOver="hilite(37555)" onMouseOut="lolite()" onClick="logVariable('userauthplugin')" href="../_variables/userauthplugin.html">$userauthplugin</a>-&gt;<a class="function" onClick="logFunction('edit_profile_url')" href="../_functions/edit_profile_url.html" onMouseOver="funcPopup(event,'edit_profile_url')">edit_profile_url</a>();
<a name="l4340"><span class="linenum">4340</span></a>                      if (empty(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>)) {
<a name="l4341"><span class="linenum">4341</span></a>                          <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/edit.php.html">/user/edit.php</a>', array('id'=&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'course'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4342"><span class="linenum">4342</span></a>                      }
<a name="l4343"><span class="linenum">4343</span></a>                      <a class="var it37556" onMouseOver="hilite(37556)" onMouseOut="lolite()" onClick="logVariable('useraccount')" href="../_variables/useraccount.html">$useraccount</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editmyprofile'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4344"><span class="linenum">4344</span></a>                  }
<a name="l4345"><span class="linenum">4345</span></a>              }
<a name="l4346"><span class="linenum">4346</span></a>          }
<a name="l4347"><span class="linenum">4347</span></a>  
<a name="l4348"><span class="linenum">4348</span></a>  <span class="comment">        // Change password link.</span>
<a name="l4349"><span class="linenum">4349</span></a>          if (<a class="var it37555" onMouseOver="hilite(37555)" onMouseOut="lolite()" onClick="logVariable('userauthplugin')" href="../_variables/userauthplugin.html">$userauthplugin</a> &amp;&amp; <a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a> &amp;&amp; !\core\session\<a class="class" onClick="logClass('manager')" href="../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a>::<a class="function" onClick="logFunction('is_loggedinas')" href="../_functions/is_loggedinas.html" onMouseOver="funcPopup(event,'is_loggedinas')">is_loggedinas</a>() &amp;&amp; !<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>() &amp;&amp;
<a name="l4350"><span class="linenum">4350</span></a>                  <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:changeownpassword', <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>) &amp;&amp; <a class="var it37555" onMouseOver="hilite(37555)" onMouseOut="lolite()" onClick="logVariable('userauthplugin')" href="../_variables/userauthplugin.html">$userauthplugin</a>-&gt;<a class="function" onClick="logFunction('can_change_password')" href="../_functions/can_change_password.html" onMouseOver="funcPopup(event,'can_change_password')">can_change_password</a>()) {
<a name="l4351"><span class="linenum">4351</span></a>              <a class="var it4818" onMouseOver="hilite(4818)" onMouseOut="lolite()" onClick="logVariable('passwordchangeurl')" href="../_variables/passwordchangeurl.html">$passwordchangeurl</a> = <a class="var it37555" onMouseOver="hilite(37555)" onMouseOut="lolite()" onClick="logVariable('userauthplugin')" href="../_variables/userauthplugin.html">$userauthplugin</a>-&gt;<a class="function" onClick="logFunction('change_password_url')" href="../_functions/change_password_url.html" onMouseOver="funcPopup(event,'change_password_url')">change_password_url</a>();
<a name="l4352"><span class="linenum">4352</span></a>              if (empty(<a class="var it4818" onMouseOver="hilite(4818)" onMouseOut="lolite()" onClick="logVariable('passwordchangeurl')" href="../_variables/passwordchangeurl.html">$passwordchangeurl</a>)) {
<a name="l4353"><span class="linenum">4353</span></a>                  <a class="var it4818" onMouseOver="hilite(4818)" onMouseOut="lolite()" onClick="logVariable('passwordchangeurl')" href="../_variables/passwordchangeurl.html">$passwordchangeurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../login/change_password.php.html">/login/change_password.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4354"><span class="linenum">4354</span></a>              }
<a name="l4355"><span class="linenum">4355</span></a>              <a class="var it37556" onMouseOver="hilite(37556)" onMouseOut="lolite()" onClick="logVariable('useraccount')" href="../_variables/useraccount.html">$useraccount</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;changepassword&quot;), <a class="var it4818" onMouseOver="hilite(4818)" onMouseOut="lolite()" onClick="logVariable('passwordchangeurl')" href="../_variables/passwordchangeurl.html">$passwordchangeurl</a>, self::TYPE_SETTING, null, 'changepassword');
<a name="l4356"><span class="linenum">4356</span></a>          }
<a name="l4357"><span class="linenum">4357</span></a>  
<a name="l4358"><span class="linenum">4358</span></a>          if (<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() &amp;&amp; !<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) &amp;&amp; !<a class="function" onClick="logFunction('is_mnet_remote_user')" href="../_functions/is_mnet_remote_user.html" onMouseOver="funcPopup(event,'is_mnet_remote_user')">is_mnet_remote_user</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>)) {
<a name="l4359"><span class="linenum">4359</span></a>              if (<a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:editownprofile', <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>) ||
<a name="l4360"><span class="linenum">4360</span></a>                      <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:editprofile', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>)) {
<a name="l4361"><span class="linenum">4361</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/language.php.html">/user/language.php</a>', array('id' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'course' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4362"><span class="linenum">4362</span></a>                  <a class="var it37556" onMouseOver="hilite(37556)" onMouseOut="lolite()" onClick="logVariable('useraccount')" href="../_variables/useraccount.html">$useraccount</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('preferredlanguage'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'preferredlanguage');
<a name="l4363"><span class="linenum">4363</span></a>              }
<a name="l4364"><span class="linenum">4364</span></a>          }
<a name="l4365"><span class="linenum">4365</span></a>          <a class="var it2592" onMouseOver="hilite(2592)" onMouseOut="lolite()" onClick="logVariable('pluginmanager')" href="../_variables/pluginmanager.html">$pluginmanager</a> = <a class="class" onClick="logClass('core_plugin_manager')" href="../_classes/core_plugin_manager.html" onMouseOver="classPopup(event,'core_plugin_manager')">core_plugin_manager</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l4366"><span class="linenum">4366</span></a>          <a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('enabled')" href="../_variables/enabled.html">$enabled</a> = <a class="var it2592" onMouseOver="hilite(2592)" onMouseOut="lolite()" onClick="logVariable('pluginmanager')" href="../_variables/pluginmanager.html">$pluginmanager</a>-&gt;<a class="function" onClick="logFunction('get_enabled_plugins')" href="../_functions/get_enabled_plugins.html" onMouseOver="funcPopup(event,'get_enabled_plugins')">get_enabled_plugins</a>('mod');
<a name="l4367"><span class="linenum">4367</span></a>          if (isset(<a class="var it1760" onMouseOver="hilite(1760)" onMouseOut="lolite()" onClick="logVariable('enabled')" href="../_variables/enabled.html">$enabled</a>['forum']) &amp;&amp; <a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() &amp;&amp; !<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) &amp;&amp; !<a class="function" onClick="logFunction('is_mnet_remote_user')" href="../_functions/is_mnet_remote_user.html" onMouseOver="funcPopup(event,'is_mnet_remote_user')">is_mnet_remote_user</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>)) {
<a name="l4368"><span class="linenum">4368</span></a>              if (<a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:editownprofile', <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>) ||
<a name="l4369"><span class="linenum">4369</span></a>                      <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:editprofile', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>)) {
<a name="l4370"><span class="linenum">4370</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/forum.php.html">/user/forum.php</a>', array('id' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'course' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4371"><span class="linenum">4371</span></a>                  <a class="var it37556" onMouseOver="hilite(37556)" onMouseOut="lolite()" onClick="logVariable('useraccount')" href="../_variables/useraccount.html">$useraccount</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('forumpreferences'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4372"><span class="linenum">4372</span></a>              }
<a name="l4373"><span class="linenum">4373</span></a>          }
<a name="l4374"><span class="linenum">4374</span></a>          <a class="var it23566" onMouseOver="hilite(23566)" onMouseOut="lolite()" onClick="logVariable('editors')" href="../_variables/editors.html">$editors</a> = <a class="function" onClick="logFunction('editors_get_enabled')" href="../_functions/editors_get_enabled.html" onMouseOver="funcPopup(event,'editors_get_enabled')">editors_get_enabled</a>();
<a name="l4375"><span class="linenum">4375</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it23566" onMouseOver="hilite(23566)" onMouseOut="lolite()" onClick="logVariable('editors')" href="../_variables/editors.html">$editors</a>) &gt; 1) {
<a name="l4376"><span class="linenum">4376</span></a>              if (<a class="function" onClick="logFunction('isloggedin')" href="../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() &amp;&amp; !<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) &amp;&amp; !<a class="function" onClick="logFunction('is_mnet_remote_user')" href="../_functions/is_mnet_remote_user.html" onMouseOver="funcPopup(event,'is_mnet_remote_user')">is_mnet_remote_user</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>)) {
<a name="l4377"><span class="linenum">4377</span></a>                  if (<a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:editownprofile', <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>) ||
<a name="l4378"><span class="linenum">4378</span></a>                          <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:editprofile', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>)) {
<a name="l4379"><span class="linenum">4379</span></a>                      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/editor.php.html">/user/editor.php</a>', array('id' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'course' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4380"><span class="linenum">4380</span></a>                      <a class="var it37556" onMouseOver="hilite(37556)" onMouseOut="lolite()" onClick="logVariable('useraccount')" href="../_variables/useraccount.html">$useraccount</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editorpreferences'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4381"><span class="linenum">4381</span></a>                  }
<a name="l4382"><span class="linenum">4382</span></a>              }
<a name="l4383"><span class="linenum">4383</span></a>          }
<a name="l4384"><span class="linenum">4384</span></a>  
<a name="l4385"><span class="linenum">4385</span></a>  <span class="comment">        // View the roles settings.</span>
<a name="l4386"><span class="linenum">4386</span></a>          if (<a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/role:assign', 'moodle/role:safeoverride', 'moodle/role:override',
<a name="l4387"><span class="linenum">4387</span></a>                  'moodle/role:manage'), <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>)) {
<a name="l4388"><span class="linenum">4388</span></a>              <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a> = <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('roles'), null, self::TYPE_SETTING);
<a name="l4389"><span class="linenum">4389</span></a>  
<a name="l4390"><span class="linenum">4390</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/roles/usersroles.php.html">/admin/roles/usersroles.php</a>', array('userid'=&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'courseid'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4391"><span class="linenum">4391</span></a>              <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('thisusersroles', 'role'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4392"><span class="linenum">4392</span></a>  
<a name="l4393"><span class="linenum">4393</span></a>              <a class="var it16182" onMouseOver="hilite(16182)" onMouseOut="lolite()" onClick="logVariable('assignableroles')" href="../_variables/assignableroles.html">$assignableroles</a> = <a class="function" onClick="logFunction('get_assignable_roles')" href="../_functions/get_assignable_roles.html" onMouseOver="funcPopup(event,'get_assignable_roles')">get_assignable_roles</a>(<a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>, <a class="constant" onClick="logConstant('ROLENAME_BOTH')" href="../_constants/ROLENAME_BOTH.html" onMouseOver="constPopup(event,'ROLENAME_BOTH')">ROLENAME_BOTH</a>);
<a name="l4394"><span class="linenum">4394</span></a>  
<a name="l4395"><span class="linenum">4395</span></a>              if (!empty(<a class="var it16182" onMouseOver="hilite(16182)" onMouseOut="lolite()" onClick="logVariable('assignableroles')" href="../_variables/assignableroles.html">$assignableroles</a>)) {
<a name="l4396"><span class="linenum">4396</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/roles/assign.php.html">/admin/roles/assign.php</a>',
<a name="l4397"><span class="linenum">4397</span></a>                          array('contextid' =&gt; <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it39494" onMouseOver="hilite(39494)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'courseid' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4398"><span class="linenum">4398</span></a>                  <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('assignrolesrelativetothisuser', 'role'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4399"><span class="linenum">4399</span></a>              }
<a name="l4400"><span class="linenum">4400</span></a>  
<a name="l4401"><span class="linenum">4401</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/role:review', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>) || <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="function" onClick="logFunction('get_overridable_roles')" href="../_functions/get_overridable_roles.html" onMouseOver="funcPopup(event,'get_overridable_roles')">get_overridable_roles</a>(<a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>, <a class="constant" onClick="logConstant('ROLENAME_BOTH')" href="../_constants/ROLENAME_BOTH.html" onMouseOver="constPopup(event,'ROLENAME_BOTH')">ROLENAME_BOTH</a>))&gt;0) {
<a name="l4402"><span class="linenum">4402</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/roles/permissions.php.html">/admin/roles/permissions.php</a>',
<a name="l4403"><span class="linenum">4403</span></a>                          array('contextid' =&gt; <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it39494" onMouseOver="hilite(39494)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'courseid' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4404"><span class="linenum">4404</span></a>                  <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('permissions', 'role'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4405"><span class="linenum">4405</span></a>              }
<a name="l4406"><span class="linenum">4406</span></a>  
<a name="l4407"><span class="linenum">4407</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/roles/check.php.html">/admin/roles/check.php</a>',
<a name="l4408"><span class="linenum">4408</span></a>                      array('contextid' =&gt; <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it39494" onMouseOver="hilite(39494)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'userid' =&gt; <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'courseid' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4409"><span class="linenum">4409</span></a>              <a class="var it425" onMouseOver="hilite(425)" onMouseOut="lolite()" onClick="logVariable('roles')" href="../_variables/roles.html">$roles</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('checkpermissions', 'role'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4410"><span class="linenum">4410</span></a>          }
<a name="l4411"><span class="linenum">4411</span></a>  
<a name="l4412"><span class="linenum">4412</span></a>  <span class="comment">        // Repositories.</span>
<a name="l4413"><span class="linenum">4413</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;<a class="function" onClick="logFunction('cached')" href="../_functions/cached.html" onMouseOver="funcPopup(event,'cached')">cached</a>('contexthasrepos'.<a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it39494" onMouseOver="hilite(39494)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l4414"><span class="linenum">4414</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../repository/lib.php.html">/repository/lib.php</a>');
<a name="l4415"><span class="linenum">4415</span></a>              <a class="var it28569" onMouseOver="hilite(28569)" onMouseOut="lolite()" onClick="logVariable('editabletypes')" href="../_variables/editabletypes.html">$editabletypes</a> = <a class="class" onClick="logClass('repository')" href="../_classes/repository.html" onMouseOver="classPopup(event,'repository')">repository</a>::<a class="function" onClick="logFunction('get_editable_types')" href="../_functions/get_editable_types.html" onMouseOver="funcPopup(event,'get_editable_types')">get_editable_types</a>(<a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>);
<a name="l4416"><span class="linenum">4416</span></a>              <a class="var it37542" onMouseOver="hilite(37542)" onMouseOut="lolite()" onClick="logVariable('haseditabletypes')" href="../_variables/haseditabletypes.html">$haseditabletypes</a> = !empty(<a class="var it28569" onMouseOver="hilite(28569)" onMouseOut="lolite()" onClick="logVariable('editabletypes')" href="../_variables/editabletypes.html">$editabletypes</a>);
<a name="l4417"><span class="linenum">4417</span></a>              unset(<a class="var it28569" onMouseOver="hilite(28569)" onMouseOut="lolite()" onClick="logVariable('editabletypes')" href="../_variables/editabletypes.html">$editabletypes</a>);
<a name="l4418"><span class="linenum">4418</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>('contexthasrepos'.<a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it39494" onMouseOver="hilite(39494)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it37542" onMouseOver="hilite(37542)" onMouseOut="lolite()" onClick="logVariable('haseditabletypes')" href="../_variables/haseditabletypes.html">$haseditabletypes</a>);
<a name="l4419"><span class="linenum">4419</span></a>          } else {
<a name="l4420"><span class="linenum">4420</span></a>              <a class="var it37542" onMouseOver="hilite(37542)" onMouseOut="lolite()" onClick="logVariable('haseditabletypes')" href="../_variables/haseditabletypes.html">$haseditabletypes</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;{'contexthasrepos'.<a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it39494" onMouseOver="hilite(39494)" onMouseOut="lolite()" href="../_variables/id.html">id</a>};
<a name="l4421"><span class="linenum">4421</span></a>          }
<a name="l4422"><span class="linenum">4422</span></a>          if (<a class="var it37542" onMouseOver="hilite(37542)" onMouseOut="lolite()" onClick="logVariable('haseditabletypes')" href="../_variables/haseditabletypes.html">$haseditabletypes</a>) {
<a name="l4423"><span class="linenum">4423</span></a>              <a class="var it26184" onMouseOver="hilite(26184)" onMouseOut="lolite()" onClick="logVariable('repositories')" href="../_variables/repositories.html">$repositories</a> = <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('repositories', 'repository'), null, self::TYPE_SETTING);
<a name="l4424"><span class="linenum">4424</span></a>              <a class="var it26184" onMouseOver="hilite(26184)" onMouseOut="lolite()" onClick="logVariable('repositories')" href="../_variables/repositories.html">$repositories</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('manageinstances', 'repository'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../repository/manage_instances.php.html">/repository/manage_instances.php</a>',
<a name="l4425"><span class="linenum">4425</span></a>                  array('contextid' =&gt; <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>-&gt;<a onClick="logVariable('id')" class="var it39494" onMouseOver="hilite(39494)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)));
<a name="l4426"><span class="linenum">4426</span></a>          }
<a name="l4427"><span class="linenum">4427</span></a>  
<a name="l4428"><span class="linenum">4428</span></a>  <span class="comment">        // Portfolio.</span>
<a name="l4429"><span class="linenum">4429</span></a>          if (<a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a> &amp;&amp; !empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableportfolios')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enableportfolios.html">enableportfolios</a>) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/portfolio:export', <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>)) {
<a name="l4430"><span class="linenum">4430</span></a>              require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/portfoliolib.php');
<a name="l4431"><span class="linenum">4431</span></a>              if (<a class="function" onClick="logFunction('portfolio_has_visible_instances')" href="../_functions/portfolio_has_visible_instances.html" onMouseOver="funcPopup(event,'portfolio_has_visible_instances')">portfolio_has_visible_instances</a>()) {
<a name="l4432"><span class="linenum">4432</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('portfolio')" href="../_variables/portfolio.html">$portfolio</a> = <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('portfolios', 'portfolio'), null, self::TYPE_SETTING);
<a name="l4433"><span class="linenum">4433</span></a>  
<a name="l4434"><span class="linenum">4434</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/portfolio.php.html">/user/portfolio.php</a>', array('courseid'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4435"><span class="linenum">4435</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('portfolio')" href="../_variables/portfolio.html">$portfolio</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('configure', 'portfolio'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4436"><span class="linenum">4436</span></a>  
<a name="l4437"><span class="linenum">4437</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/portfoliologs.php.html">/user/portfoliologs.php</a>', array('courseid'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4438"><span class="linenum">4438</span></a>                  <a class="var it142" onMouseOver="hilite(142)" onMouseOut="lolite()" onClick="logVariable('portfolio')" href="../_variables/portfolio.html">$portfolio</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('logs', 'portfolio'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4439"><span class="linenum">4439</span></a>              }
<a name="l4440"><span class="linenum">4440</span></a>          }
<a name="l4441"><span class="linenum">4441</span></a>  
<a name="l4442"><span class="linenum">4442</span></a>          <a class="var it37557" onMouseOver="hilite(37557)" onMouseOut="lolite()" onClick="logVariable('enablemanagetokens')" href="../_variables/enablemanagetokens.html">$enablemanagetokens</a> = false;
<a name="l4443"><span class="linenum">4443</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablerssfeeds')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enablerssfeeds.html">enablerssfeeds</a>)) {
<a name="l4444"><span class="linenum">4444</span></a>              <a class="var it37557" onMouseOver="hilite(37557)" onMouseOut="lolite()" onClick="logVariable('enablemanagetokens')" href="../_variables/enablemanagetokens.html">$enablemanagetokens</a> = true;
<a name="l4445"><span class="linenum">4445</span></a>          } else if (!<a class="function" onClick="logFunction('is_siteadmin')" href="../_functions/is_siteadmin.html" onMouseOver="funcPopup(event,'is_siteadmin')">is_siteadmin</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)
<a name="l4446"><span class="linenum">4446</span></a>               &amp;&amp; !empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablewebservices')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enablewebservices.html">enablewebservices</a>)
<a name="l4447"><span class="linenum">4447</span></a>               &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/webservice:createtoken', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>()) ) {
<a name="l4448"><span class="linenum">4448</span></a>              <a class="var it37557" onMouseOver="hilite(37557)" onMouseOut="lolite()" onClick="logVariable('enablemanagetokens')" href="../_variables/enablemanagetokens.html">$enablemanagetokens</a> = true;
<a name="l4449"><span class="linenum">4449</span></a>          }
<a name="l4450"><span class="linenum">4450</span></a>  <span class="comment">        // Security keys.</span>
<a name="l4451"><span class="linenum">4451</span></a>          if (<a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a> &amp;&amp; <a class="var it37557" onMouseOver="hilite(37557)" onMouseOut="lolite()" onClick="logVariable('enablemanagetokens')" href="../_variables/enablemanagetokens.html">$enablemanagetokens</a>) {
<a name="l4452"><span class="linenum">4452</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../user/managetoken.php.html">/user/managetoken.php</a>', array('sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l4453"><span class="linenum">4453</span></a>              <a class="var it37556" onMouseOver="hilite(37556)" onMouseOut="lolite()" onClick="logVariable('useraccount')" href="../_variables/useraccount.html">$useraccount</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('securitykeys', 'webservice'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4454"><span class="linenum">4454</span></a>          }
<a name="l4455"><span class="linenum">4455</span></a>  
<a name="l4456"><span class="linenum">4456</span></a>  <span class="comment">        // Messaging.</span>
<a name="l4457"><span class="linenum">4457</span></a>          if ((<a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:editownmessageprofile', <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>)) || (!<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>) &amp;&amp;
<a name="l4458"><span class="linenum">4458</span></a>                  <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/user:editmessageprofile', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>) &amp;&amp; !<a class="function" onClick="logFunction('is_primary_admin')" href="../_functions/is_primary_admin.html" onMouseOver="funcPopup(event,'is_primary_admin')">is_primary_admin</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l4459"><span class="linenum">4459</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../message/edit.php.html">/message/edit.php</a>', array('id'=&gt;<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it39447" onMouseOver="hilite(39447)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4460"><span class="linenum">4460</span></a>              <a class="var it37556" onMouseOver="hilite(37556)" onMouseOut="lolite()" onClick="logVariable('useraccount')" href="../_variables/useraccount.html">$useraccount</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('messaging', 'message'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4461"><span class="linenum">4461</span></a>          }
<a name="l4462"><span class="linenum">4462</span></a>  
<a name="l4463"><span class="linenum">4463</span></a>  <span class="comment">        // Blogs.</span>
<a name="l4464"><span class="linenum">4464</span></a>          if (<a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a> &amp;&amp; !empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableblogs')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enableblogs.html">enableblogs</a>)) {
<a name="l4465"><span class="linenum">4465</span></a>              <a class="var it4273" onMouseOver="hilite(4273)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../_variables/blog.html">$blog</a> = <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('blogs', 'blog'), null, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_CONTAINER, null, 'blogs');
<a name="l4466"><span class="linenum">4466</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/blog:view', <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>)) {
<a name="l4467"><span class="linenum">4467</span></a>                  <a class="var it4273" onMouseOver="hilite(4273)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../_variables/blog.html">$blog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('preferences', 'blog'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../blog/preferences.php.html">/blog/preferences.php</a>'),
<a name="l4468"><span class="linenum">4468</span></a>                          <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l4469"><span class="linenum">4469</span></a>              }
<a name="l4470"><span class="linenum">4470</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('useexternalblogs')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/useexternalblogs.html">useexternalblogs</a>) &amp;&amp; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('maxexternalblogsperuser')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/maxexternalblogsperuser.html">maxexternalblogsperuser</a> &gt; 0 &amp;&amp;
<a name="l4471"><span class="linenum">4471</span></a>                      <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/blog:manageexternal', <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>)) {
<a name="l4472"><span class="linenum">4472</span></a>                  <a class="var it4273" onMouseOver="hilite(4273)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../_variables/blog.html">$blog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('externalblogs', 'blog'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../blog/external_blogs.php.html">/blog/external_blogs.php</a>'),
<a name="l4473"><span class="linenum">4473</span></a>                          <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l4474"><span class="linenum">4474</span></a>                  <a class="var it4273" onMouseOver="hilite(4273)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../_variables/blog.html">$blog</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addnewexternalblog', 'blog'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../blog/external_blog_edit.php.html">/blog/external_blog_edit.php</a>'),
<a name="l4475"><span class="linenum">4475</span></a>                          <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l4476"><span class="linenum">4476</span></a>              }
<a name="l4477"><span class="linenum">4477</span></a>  <span class="comment">            // Remove the blog node if empty.</span>
<a name="l4478"><span class="linenum">4478</span></a>              <a class="var it4273" onMouseOver="hilite(4273)" onMouseOut="lolite()" onClick="logVariable('blog')" href="../_variables/blog.html">$blog</a>-&gt;<a class="function" onClick="logFunction('trim_if_empty')" href="../_functions/trim_if_empty.html" onMouseOver="funcPopup(event,'trim_if_empty')">trim_if_empty</a>();
<a name="l4479"><span class="linenum">4479</span></a>          }
<a name="l4480"><span class="linenum">4480</span></a>  
<a name="l4481"><span class="linenum">4481</span></a>  <span class="comment">        // Badges.</span>
<a name="l4482"><span class="linenum">4482</span></a>          if (<a class="var it1510" onMouseOver="hilite(1510)" onMouseOut="lolite()" onClick="logVariable('currentuser')" href="../_variables/currentuser.html">$currentuser</a> &amp;&amp; !empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablebadges')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/enablebadges.html">enablebadges</a>)) {
<a name="l4483"><span class="linenum">4483</span></a>              <a class="var it5240" onMouseOver="hilite(5240)" onMouseOut="lolite()" onClick="logVariable('badges')" href="../_variables/badges.html">$badges</a> = <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('badges'), null, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_CONTAINER, null, 'badges');
<a name="l4484"><span class="linenum">4484</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/badges:manageownbadges', <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>)) {
<a name="l4485"><span class="linenum">4485</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../badges/mybadges.php.html">/badges/mybadges.php</a>');
<a name="l4486"><span class="linenum">4486</span></a>                  <a class="var it5240" onMouseOver="hilite(5240)" onMouseOut="lolite()" onClick="logVariable('badges')" href="../_variables/badges.html">$badges</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('managebadges', 'badges'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4487"><span class="linenum">4487</span></a>              }
<a name="l4488"><span class="linenum">4488</span></a>              <a class="var it5240" onMouseOver="hilite(5240)" onMouseOut="lolite()" onClick="logVariable('badges')" href="../_variables/badges.html">$badges</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('preferences', 'badges'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../badges/preferences.php.html">/badges/preferences.php</a>'),
<a name="l4489"><span class="linenum">4489</span></a>                      <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l4490"><span class="linenum">4490</span></a>              if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('badges_allowexternalbackpack')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/badges_allowexternalbackpack.html">badges_allowexternalbackpack</a>)) {
<a name="l4491"><span class="linenum">4491</span></a>                  <a class="var it5240" onMouseOver="hilite(5240)" onMouseOut="lolite()" onClick="logVariable('badges')" href="../_variables/badges.html">$badges</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('backpackdetails', 'badges'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../badges/mybackpack.php.html">/badges/mybackpack.php</a>'),
<a name="l4492"><span class="linenum">4492</span></a>                          <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l4493"><span class="linenum">4493</span></a>              }
<a name="l4494"><span class="linenum">4494</span></a>          }
<a name="l4495"><span class="linenum">4495</span></a>  
<a name="l4496"><span class="linenum">4496</span></a>  <span class="comment">        // Let admin tools hook into user settings navigation.</span>
<a name="l4497"><span class="linenum">4497</span></a>          <a class="var it20817" onMouseOver="hilite(20817)" onMouseOut="lolite()" onClick="logVariable('tools')" href="../_variables/tools.html">$tools</a> = <a class="function" onClick="logFunction('get_plugin_list_with_function')" href="../_functions/get_plugin_list_with_function.html" onMouseOver="funcPopup(event,'get_plugin_list_with_function')">get_plugin_list_with_function</a>('tool', 'extend_navigation_user_settings', 'lib.php');
<a name="l4498"><span class="linenum">4498</span></a>          foreach (<a class="var it20817" onMouseOver="hilite(20817)" onMouseOut="lolite()" onClick="logVariable('tools')" href="../_variables/tools.html">$tools</a> as <a class="var it37546" onMouseOver="hilite(37546)" onMouseOut="lolite()" onClick="logVariable('toolfunction')" href="../_variables/toolfunction.html">$toolfunction</a>) {
<a name="l4499"><span class="linenum">4499</span></a>              <a class="var it37546" onMouseOver="hilite(37546)" onMouseOut="lolite()" onClick="logVariable('toolfunction')" href="../_variables/toolfunction.html">$toolfunction</a>(<a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, <a class="var it1419" onMouseOver="hilite(1419)" onMouseOut="lolite()" onClick="logVariable('usercontext')" href="../_variables/usercontext.html">$usercontext</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l4500"><span class="linenum">4500</span></a>          }
<a name="l4501"><span class="linenum">4501</span></a>  
<a name="l4502"><span class="linenum">4502</span></a>          return <a class="var it37554" onMouseOver="hilite(37554)" onMouseOut="lolite()" onClick="logVariable('usersetting')" href="../_variables/usersetting.html">$usersetting</a>;
<a name="l4503"><span class="linenum">4503</span></a>      }
<a name="l4504"><span class="linenum">4504</span></a>  
<a name="l4505"><span class="linenum">4505</span></a>      <span class="comment">/**</span>
<a name="l4506"><span class="linenum">4506</span></a>  <span class="comment">     * Loads block specific settings in the navigation</span>
<a name="l4507"><span class="linenum">4507</span></a>  <span class="comment">     *</span>
<a name="l4508"><span class="linenum">4508</span></a>  <span class="comment">     * @return navigation_node</span>
<a name="l4509"><span class="linenum">4509</span></a>  <span class="comment">     */</span>
<a name="l4510"><span class="linenum">4510</span></a>      protected function <a class="function" onClick="logFunction('load_block_settings')" href="../_functions/load_block_settings.html" onMouseOver="funcPopup(event,'load_block_settings')">load_block_settings</a>() {
<a name="l4511"><span class="linenum">4511</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l4512"><span class="linenum">4512</span></a>  
<a name="l4513"><span class="linenum">4513</span></a>          <a class="var it10219" onMouseOver="hilite(10219)" onMouseOut="lolite()" onClick="logVariable('blocknode')" href="../_variables/blocknode.html">$blocknode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>(), null, self::TYPE_SETTING, null, 'blocksettings');
<a name="l4514"><span class="linenum">4514</span></a>          <a class="var it10219" onMouseOver="hilite(10219)" onMouseOut="lolite()" onClick="logVariable('blocknode')" href="../_variables/blocknode.html">$blocknode</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l4515"><span class="linenum">4515</span></a>  
<a name="l4516"><span class="linenum">4516</span></a>  <span class="comment">        // Assign local roles</span>
<a name="l4517"><span class="linenum">4517</span></a>          <a class="var it30663" onMouseOver="hilite(30663)" onMouseOut="lolite()" onClick="logVariable('assignurl')" href="../_variables/assignurl.html">$assignurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>.'/roles/assign.php', array('contextid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id));
<a name="l4518"><span class="linenum">4518</span></a>          <a class="var it10219" onMouseOver="hilite(10219)" onMouseOut="lolite()" onClick="logVariable('blocknode')" href="../_variables/blocknode.html">$blocknode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('assignroles', 'role'), <a class="var it30663" onMouseOver="hilite(30663)" onMouseOut="lolite()" onClick="logVariable('assignurl')" href="../_variables/assignurl.html">$assignurl</a>, self::TYPE_SETTING);
<a name="l4519"><span class="linenum">4519</span></a>  
<a name="l4520"><span class="linenum">4520</span></a>  <span class="comment">        // Override roles</span>
<a name="l4521"><span class="linenum">4521</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/role:review', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>) or  <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="function" onClick="logFunction('get_overridable_roles')" href="../_functions/get_overridable_roles.html" onMouseOver="funcPopup(event,'get_overridable_roles')">get_overridable_roles</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>))&gt;0) {
<a name="l4522"><span class="linenum">4522</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>.'/roles/permissions.php', array('contextid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id));
<a name="l4523"><span class="linenum">4523</span></a>              <a class="var it10219" onMouseOver="hilite(10219)" onMouseOut="lolite()" onClick="logVariable('blocknode')" href="../_variables/blocknode.html">$blocknode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('permissions', 'role'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4524"><span class="linenum">4524</span></a>          }
<a name="l4525"><span class="linenum">4525</span></a>  <span class="comment">        // Check role permissions</span>
<a name="l4526"><span class="linenum">4526</span></a>          if (<a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/role:assign', 'moodle/role:safeoverride','moodle/role:override', 'moodle/role:assign'), <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>)) {
<a name="l4527"><span class="linenum">4527</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>.'/roles/check.php', array('contextid'=&gt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id));
<a name="l4528"><span class="linenum">4528</span></a>              <a class="var it10219" onMouseOver="hilite(10219)" onMouseOut="lolite()" onClick="logVariable('blocknode')" href="../_variables/blocknode.html">$blocknode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('checkpermissions', 'role'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING);
<a name="l4529"><span class="linenum">4529</span></a>          }
<a name="l4530"><span class="linenum">4530</span></a>  
<a name="l4531"><span class="linenum">4531</span></a>          return <a class="var it10219" onMouseOver="hilite(10219)" onMouseOut="lolite()" onClick="logVariable('blocknode')" href="../_variables/blocknode.html">$blocknode</a>;
<a name="l4532"><span class="linenum">4532</span></a>      }
<a name="l4533"><span class="linenum">4533</span></a>  
<a name="l4534"><span class="linenum">4534</span></a>      <span class="comment">/**</span>
<a name="l4535"><span class="linenum">4535</span></a>  <span class="comment">     * Loads category specific settings in the navigation</span>
<a name="l4536"><span class="linenum">4536</span></a>  <span class="comment">     *</span>
<a name="l4537"><span class="linenum">4537</span></a>  <span class="comment">     * @return navigation_node</span>
<a name="l4538"><span class="linenum">4538</span></a>  <span class="comment">     */</span>
<a name="l4539"><span class="linenum">4539</span></a>      protected function <a class="function" onClick="logFunction('load_category_settings')" href="../_functions/load_category_settings.html" onMouseOver="funcPopup(event,'load_category_settings')">load_category_settings</a>() {
<a name="l4540"><span class="linenum">4540</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l4541"><span class="linenum">4541</span></a>  
<a name="l4542"><span class="linenum">4542</span></a>  <span class="comment">        // We can land here while being in the context of a block, in which case we</span>
<a name="l4543"><span class="linenum">4543</span></a>  <span class="comment">        // should get the parent context which should be the category one. See self::initialise().</span>
<a name="l4544"><span class="linenum">4544</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;contextlevel == <a class="constant" onClick="logConstant('CONTEXT_BLOCK')" href="../_constants/CONTEXT_BLOCK.html" onMouseOver="constPopup(event,'CONTEXT_BLOCK')">CONTEXT_BLOCK</a>) {
<a name="l4545"><span class="linenum">4545</span></a>              <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;<a class="function" onClick="logFunction('get_parent_context')" href="../_functions/get_parent_context.html" onMouseOver="funcPopup(event,'get_parent_context')">get_parent_context</a>();
<a name="l4546"><span class="linenum">4546</span></a>          } else {
<a name="l4547"><span class="linenum">4547</span></a>              <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>;
<a name="l4548"><span class="linenum">4548</span></a>          }
<a name="l4549"><span class="linenum">4549</span></a>  
<a name="l4550"><span class="linenum">4550</span></a>  <span class="comment">        // Let's make sure that we always have the right context when getting here.</span>
<a name="l4551"><span class="linenum">4551</span></a>          if (<a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39839" onMouseOver="hilite(39839)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> != <a class="constant" onClick="logConstant('CONTEXT_COURSECAT')" href="../_constants/CONTEXT_COURSECAT.html" onMouseOver="constPopup(event,'CONTEXT_COURSECAT')">CONTEXT_COURSECAT</a>) {
<a name="l4552"><span class="linenum">4552</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unexpected context while loading category settings.');
<a name="l4553"><span class="linenum">4553</span></a>          }
<a name="l4554"><span class="linenum">4554</span></a>  
<a name="l4555"><span class="linenum">4555</span></a>          <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>(), null, null, null, 'categorysettings');
<a name="l4556"><span class="linenum">4556</span></a>          <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l4557"><span class="linenum">4557</span></a>  
<a name="l4558"><span class="linenum">4558</span></a>          if (<a class="function" onClick="logFunction('can_edit_in_category')" href="../_functions/can_edit_in_category.html" onMouseOver="funcPopup(event,'can_edit_in_category')">can_edit_in_category</a>(<a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39839" onMouseOver="hilite(39839)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>)) {
<a name="l4559"><span class="linenum">4559</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/management.php.html">/course/management.php</a>', array('categoryid' =&gt; <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39839" onMouseOver="hilite(39839)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>));
<a name="l4560"><span class="linenum">4560</span></a>              <a class="var it21086" onMouseOver="hilite(21086)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('managecategorythis');
<a name="l4561"><span class="linenum">4561</span></a>              <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it21086" onMouseOver="hilite(21086)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/edit', ''));
<a name="l4562"><span class="linenum">4562</span></a>          }
<a name="l4563"><span class="linenum">4563</span></a>  
<a name="l4564"><span class="linenum">4564</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/category:manage', <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>)) {
<a name="l4565"><span class="linenum">4565</span></a>              <a class="var it1722" onMouseOver="hilite(1722)" onMouseOut="lolite()" onClick="logVariable('editurl')" href="../_variables/editurl.html">$editurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/editcategory.php.html">/course/editcategory.php</a>', array('id' =&gt; <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39839" onMouseOver="hilite(39839)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>));
<a name="l4566"><span class="linenum">4566</span></a>              <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editcategorythis'), <a class="var it1722" onMouseOver="hilite(1722)" onMouseOut="lolite()" onClick="logVariable('editurl')" href="../_variables/editurl.html">$editurl</a>, self::TYPE_SETTING, null, 'edit', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/edit', ''));
<a name="l4567"><span class="linenum">4567</span></a>  
<a name="l4568"><span class="linenum">4568</span></a>              <a class="var it37559" onMouseOver="hilite(37559)" onMouseOut="lolite()" onClick="logVariable('addsubcaturl')" href="../_variables/addsubcaturl.html">$addsubcaturl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/editcategory.php.html">/course/editcategory.php</a>', array('parent' =&gt; <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39839" onMouseOver="hilite(39839)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>));
<a name="l4569"><span class="linenum">4569</span></a>              <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addsubcategory'), <a class="var it37559" onMouseOver="hilite(37559)" onMouseOut="lolite()" onClick="logVariable('addsubcaturl')" href="../_variables/addsubcaturl.html">$addsubcaturl</a>, self::TYPE_SETTING, null, 'addsubcat', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/withsubcat', ''));
<a name="l4570"><span class="linenum">4570</span></a>          }
<a name="l4571"><span class="linenum">4571</span></a>  
<a name="l4572"><span class="linenum">4572</span></a>  <span class="comment">        // Assign local roles</span>
<a name="l4573"><span class="linenum">4573</span></a>          <a class="var it16182" onMouseOver="hilite(16182)" onMouseOut="lolite()" onClick="logVariable('assignableroles')" href="../_variables/assignableroles.html">$assignableroles</a> = <a class="function" onClick="logFunction('get_assignable_roles')" href="../_functions/get_assignable_roles.html" onMouseOver="funcPopup(event,'get_assignable_roles')">get_assignable_roles</a>(<a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>);
<a name="l4574"><span class="linenum">4574</span></a>          if (!empty(<a class="var it16182" onMouseOver="hilite(16182)" onMouseOut="lolite()" onClick="logVariable('assignableroles')" href="../_variables/assignableroles.html">$assignableroles</a>)) {
<a name="l4575"><span class="linenum">4575</span></a>              <a class="var it30663" onMouseOver="hilite(30663)" onMouseOut="lolite()" onClick="logVariable('assignurl')" href="../_variables/assignurl.html">$assignurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>.'/roles/assign.php', array('contextid' =&gt; <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39839" onMouseOver="hilite(39839)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4576"><span class="linenum">4576</span></a>              <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('assignroles', 'role'), <a class="var it30663" onMouseOver="hilite(30663)" onMouseOut="lolite()" onClick="logVariable('assignurl')" href="../_variables/assignurl.html">$assignurl</a>, self::TYPE_SETTING, null, 'roles', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/assignroles', ''));
<a name="l4577"><span class="linenum">4577</span></a>          }
<a name="l4578"><span class="linenum">4578</span></a>  
<a name="l4579"><span class="linenum">4579</span></a>  <span class="comment">        // Override roles</span>
<a name="l4580"><span class="linenum">4580</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/role:review', <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>) or <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="function" onClick="logFunction('get_overridable_roles')" href="../_functions/get_overridable_roles.html" onMouseOver="funcPopup(event,'get_overridable_roles')">get_overridable_roles</a>(<a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>)) &gt; 0) {
<a name="l4581"><span class="linenum">4581</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>.'/roles/permissions.php', array('contextid' =&gt; <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39839" onMouseOver="hilite(39839)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4582"><span class="linenum">4582</span></a>              <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('permissions', 'role'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'permissions', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/permissions', ''));
<a name="l4583"><span class="linenum">4583</span></a>          }
<a name="l4584"><span class="linenum">4584</span></a>  <span class="comment">        // Check role permissions</span>
<a name="l4585"><span class="linenum">4585</span></a>          if (<a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/role:assign', 'moodle/role:safeoverride',
<a name="l4586"><span class="linenum">4586</span></a>                  'moodle/role:override', 'moodle/role:assign'), <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>)) {
<a name="l4587"><span class="linenum">4587</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/'.<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('admin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/admin.html">admin</a>.'/roles/check.php', array('contextid' =&gt; <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39839" onMouseOver="hilite(39839)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4588"><span class="linenum">4588</span></a>              <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('checkpermissions', 'role'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'checkpermissions', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/checkpermissions', ''));
<a name="l4589"><span class="linenum">4589</span></a>          }
<a name="l4590"><span class="linenum">4590</span></a>  
<a name="l4591"><span class="linenum">4591</span></a>  <span class="comment">        // Cohorts</span>
<a name="l4592"><span class="linenum">4592</span></a>          if (<a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/cohort:view', 'moodle/cohort:manage'), <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>)) {
<a name="l4593"><span class="linenum">4593</span></a>              <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cohorts', 'cohort'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../cohort/index.php.html">/cohort/index.php</a>',
<a name="l4594"><span class="linenum">4594</span></a>                  array('contextid' =&gt; <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39839" onMouseOver="hilite(39839)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)), self::TYPE_SETTING, null, 'cohort', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/cohort', ''));
<a name="l4595"><span class="linenum">4595</span></a>          }
<a name="l4596"><span class="linenum">4596</span></a>  
<a name="l4597"><span class="linenum">4597</span></a>  <span class="comment">        // Manage filters</span>
<a name="l4598"><span class="linenum">4598</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/filter:manage', <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="function" onClick="logFunction('filter_get_available_in_context')" href="../_functions/filter_get_available_in_context.html" onMouseOver="funcPopup(event,'filter_get_available_in_context')">filter_get_available_in_context</a>(<a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>)) &gt; 0) {
<a name="l4599"><span class="linenum">4599</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../filter/manage.php.html">/filter/manage.php</a>', array('contextid' =&gt; <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39839" onMouseOver="hilite(39839)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4600"><span class="linenum">4600</span></a>              <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('filters', 'admin'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'filters', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/filter', ''));
<a name="l4601"><span class="linenum">4601</span></a>          }
<a name="l4602"><span class="linenum">4602</span></a>  
<a name="l4603"><span class="linenum">4603</span></a>  <span class="comment">        // Restore.</span>
<a name="l4604"><span class="linenum">4604</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/restore:restorecourse', <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>)) {
<a name="l4605"><span class="linenum">4605</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../backup/restorefile.php.html">/backup/restorefile.php</a>', array('contextid' =&gt; <a class="var it6699" onMouseOver="hilite(6699)" onMouseOut="lolite()" onClick="logVariable('catcontext')" href="../_variables/catcontext.html">$catcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39839" onMouseOver="hilite(39839)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4606"><span class="linenum">4606</span></a>              <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('restorecourse', 'admin'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, 'restorecourse', <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/restore', ''));
<a name="l4607"><span class="linenum">4607</span></a>          }
<a name="l4608"><span class="linenum">4608</span></a>  
<a name="l4609"><span class="linenum">4609</span></a>          return <a class="var it30984" onMouseOver="hilite(30984)" onMouseOut="lolite()" onClick="logVariable('categorynode')" href="../_variables/categorynode.html">$categorynode</a>;
<a name="l4610"><span class="linenum">4610</span></a>      }
<a name="l4611"><span class="linenum">4611</span></a>  
<a name="l4612"><span class="linenum">4612</span></a>      <span class="comment">/**</span>
<a name="l4613"><span class="linenum">4613</span></a>  <span class="comment">     * Determine whether the user is assuming another role</span>
<a name="l4614"><span class="linenum">4614</span></a>  <span class="comment">     *</span>
<a name="l4615"><span class="linenum">4615</span></a>  <span class="comment">     * This function checks to see if the user is assuming another role by means of</span>
<a name="l4616"><span class="linenum">4616</span></a>  <span class="comment">     * role switching. In doing this we compare each RSW key (context path) against</span>
<a name="l4617"><span class="linenum">4617</span></a>  <span class="comment">     * the current context path. This ensures that we can provide the switching</span>
<a name="l4618"><span class="linenum">4618</span></a>  <span class="comment">     * options against both the course and any page shown under the course.</span>
<a name="l4619"><span class="linenum">4619</span></a>  <span class="comment">     *</span>
<a name="l4620"><span class="linenum">4620</span></a>  <span class="comment">     * @return bool|int The role(int) if the user is in another role, false otherwise</span>
<a name="l4621"><span class="linenum">4621</span></a>  <span class="comment">     */</span>
<a name="l4622"><span class="linenum">4622</span></a>      protected function <a class="function" onClick="logFunction('in_alternative_role')" href="../_functions/in_alternative_role.html" onMouseOver="funcPopup(event,'in_alternative_role')">in_alternative_role</a>() {
<a name="l4623"><span class="linenum">4623</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l4624"><span class="linenum">4624</span></a>          if (!empty(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('access')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/access.html">access</a>['rsw']) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('access')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/access.html">access</a>['rsw'])) {
<a name="l4625"><span class="linenum">4625</span></a>              if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context) &amp;&amp; !empty(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('access')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/access.html">access</a>['rsw'][<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;path])) {
<a name="l4626"><span class="linenum">4626</span></a>                  return <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('access')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/access.html">access</a>['rsw'][<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;path];
<a name="l4627"><span class="linenum">4627</span></a>              }
<a name="l4628"><span class="linenum">4628</span></a>              foreach (<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('access')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/access.html">access</a>['rsw'] as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>) {
<a name="l4629"><span class="linenum">4629</span></a>                  if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;path,<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>)===0) {
<a name="l4630"><span class="linenum">4630</span></a>                      return <a class="var it426" onMouseOver="hilite(426)" onMouseOut="lolite()" onClick="logVariable('role')" href="../_variables/role.html">$role</a>;
<a name="l4631"><span class="linenum">4631</span></a>                  }
<a name="l4632"><span class="linenum">4632</span></a>              }
<a name="l4633"><span class="linenum">4633</span></a>          }
<a name="l4634"><span class="linenum">4634</span></a>          return false;
<a name="l4635"><span class="linenum">4635</span></a>      }
<a name="l4636"><span class="linenum">4636</span></a>  
<a name="l4637"><span class="linenum">4637</span></a>      <span class="comment">/**</span>
<a name="l4638"><span class="linenum">4638</span></a>  <span class="comment">     * This function loads all of the front page settings into the settings navigation.</span>
<a name="l4639"><span class="linenum">4639</span></a>  <span class="comment">     * This function is called when the user is on the front page, or $COURSE==$SITE</span>
<a name="l4640"><span class="linenum">4640</span></a>  <span class="comment">     * @param bool $forceopen (optional)</span>
<a name="l4641"><span class="linenum">4641</span></a>  <span class="comment">     * @return navigation_node</span>
<a name="l4642"><span class="linenum">4642</span></a>  <span class="comment">     */</span>
<a name="l4643"><span class="linenum">4643</span></a>      protected function <a class="function" onClick="logFunction('load_front_page_settings')" href="../_functions/load_front_page_settings.html" onMouseOver="funcPopup(event,'load_front_page_settings')">load_front_page_settings</a>(<a class="var it16968" onMouseOver="hilite(16968)" onMouseOut="lolite()" onClick="logVariable('forceopen')" href="../_variables/forceopen.html">$forceopen</a> = false) {
<a name="l4644"><span class="linenum">4644</span></a>          global <a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l4645"><span class="linenum">4645</span></a>  
<a name="l4646"><span class="linenum">4646</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>);
<a name="l4647"><span class="linenum">4647</span></a>          <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);   <span class="comment">// Course context</span>
<a name="l4648"><span class="linenum">4648</span></a>  
<a name="l4649"><span class="linenum">4649</span></a>          <a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('frontpagesettings'), null, self::TYPE_SETTING, null, 'frontpage');
<a name="l4650"><span class="linenum">4650</span></a>          if (<a class="var it16968" onMouseOver="hilite(16968)" onMouseOut="lolite()" onClick="logVariable('forceopen')" href="../_variables/forceopen.html">$forceopen</a>) {
<a name="l4651"><span class="linenum">4651</span></a>              <a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l4652"><span class="linenum">4652</span></a>          }
<a name="l4653"><span class="linenum">4653</span></a>          <a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>-&gt;<a onClick="logVariable('id')" class="var it40666" onMouseOver="hilite(40666)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = 'frontpagesettings';
<a name="l4654"><span class="linenum">4654</span></a>  
<a name="l4655"><span class="linenum">4655</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_allowed_editing')" href="../_functions/user_allowed_editing.html" onMouseOver="funcPopup(event,'user_allowed_editing')">user_allowed_editing</a>()) {
<a name="l4656"><span class="linenum">4656</span></a>  
<a name="l4657"><span class="linenum">4657</span></a>  <span class="comment">            // Add the turn on/off settings</span>
<a name="l4658"><span class="linenum">4658</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../course/view.php.html">/course/view.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, 'sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l4659"><span class="linenum">4659</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>()) {
<a name="l4660"><span class="linenum">4660</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('edit', 'off');
<a name="l4661"><span class="linenum">4661</span></a>                  <a class="var it21086" onMouseOver="hilite(21086)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('turneditingoff');
<a name="l4662"><span class="linenum">4662</span></a>              } else {
<a name="l4663"><span class="linenum">4663</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('edit', 'on');
<a name="l4664"><span class="linenum">4664</span></a>                  <a class="var it21086" onMouseOver="hilite(21086)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('turneditingon');
<a name="l4665"><span class="linenum">4665</span></a>              }
<a name="l4666"><span class="linenum">4666</span></a>              <a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it21086" onMouseOver="hilite(21086)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a>, <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/edit', ''));
<a name="l4667"><span class="linenum">4667</span></a>          }
<a name="l4668"><span class="linenum">4668</span></a>  
<a name="l4669"><span class="linenum">4669</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:update', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l4670"><span class="linenum">4670</span></a>  <span class="comment">            // Add the course settings link</span>
<a name="l4671"><span class="linenum">4671</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/settings.php.html">/admin/settings.php</a>', array('section'=&gt;'frontpagesettings'));
<a name="l4672"><span class="linenum">4672</span></a>              <a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editsettings'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/settings', ''));
<a name="l4673"><span class="linenum">4673</span></a>          }
<a name="l4674"><span class="linenum">4674</span></a>  
<a name="l4675"><span class="linenum">4675</span></a>  <span class="comment">        // add enrol nodes</span>
<a name="l4676"><span class="linenum">4676</span></a>          <a class="function" onClick="logFunction('enrol_add_course_navigation')" href="../_functions/enrol_add_course_navigation.html" onMouseOver="funcPopup(event,'enrol_add_course_navigation')">enrol_add_course_navigation</a>(<a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l4677"><span class="linenum">4677</span></a>  
<a name="l4678"><span class="linenum">4678</span></a>  <span class="comment">        // Manage filters</span>
<a name="l4679"><span class="linenum">4679</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/filter:manage', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="function" onClick="logFunction('filter_get_available_in_context')" href="../_functions/filter_get_available_in_context.html" onMouseOver="funcPopup(event,'filter_get_available_in_context')">filter_get_available_in_context</a>(<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>))&gt;0) {
<a name="l4680"><span class="linenum">4680</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../filter/manage.php.html">/filter/manage.php</a>', array('contextid'=&gt;<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('id')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4681"><span class="linenum">4681</span></a>              <a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('filters', 'admin'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/filter', ''));
<a name="l4682"><span class="linenum">4682</span></a>          }
<a name="l4683"><span class="linenum">4683</span></a>  
<a name="l4684"><span class="linenum">4684</span></a>  <span class="comment">        // View course reports.</span>
<a name="l4685"><span class="linenum">4685</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewreports', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) { // Basic capability for listing of reports.
<a name="l4686"><span class="linenum">4686</span></a>              <a class="var it37560" onMouseOver="hilite(37560)" onMouseOut="lolite()" onClick="logVariable('frontpagenav')" href="../_variables/frontpagenav.html">$frontpagenav</a> = <a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('reports'), null, self::TYPE_CONTAINER, null, 'frontpagereports',
<a name="l4687"><span class="linenum">4687</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/stats', ''));
<a name="l4688"><span class="linenum">4688</span></a>              <a class="var it37540" onMouseOver="hilite(37540)" onMouseOut="lolite()" onClick="logVariable('coursereports')" href="../_variables/coursereports.html">$coursereports</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list')" href="../_functions/get_plugin_list.html" onMouseOver="funcPopup(event,'get_plugin_list')">get_plugin_list</a>('coursereport');
<a name="l4689"><span class="linenum">4689</span></a>              foreach (<a class="var it37540" onMouseOver="hilite(37540)" onMouseOut="lolite()" onClick="logVariable('coursereports')" href="../_variables/coursereports.html">$coursereports</a> as <a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../_variables/report.html">$report</a>=&gt;<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../_variables/dir.html">$dir</a>) {
<a name="l4690"><span class="linenum">4690</span></a>                  <a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'/course/report/'.<a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../_variables/report.html">$report</a>.'/lib.php';
<a name="l4691"><span class="linenum">4691</span></a>                  if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>)) {
<a name="l4692"><span class="linenum">4692</span></a>                      require_once(<a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>);
<a name="l4693"><span class="linenum">4693</span></a>                      <a class="var it37510" onMouseOver="hilite(37510)" onMouseOut="lolite()" onClick="logVariable('reportfunction')" href="../_variables/reportfunction.html">$reportfunction</a> = <a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../_variables/report.html">$report</a>.'_report_extend_navigation';
<a name="l4694"><span class="linenum">4694</span></a>                      if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it153" onMouseOver="hilite(153)" onMouseOut="lolite()" onClick="logVariable('report')" href="../_variables/report.html">$report</a>.'_report_extend_navigation')) {
<a name="l4695"><span class="linenum">4695</span></a>                          <a class="var it37510" onMouseOver="hilite(37510)" onMouseOut="lolite()" onClick="logVariable('reportfunction')" href="../_variables/reportfunction.html">$reportfunction</a>(<a class="var it37560" onMouseOver="hilite(37560)" onMouseOut="lolite()" onClick="logVariable('frontpagenav')" href="../_variables/frontpagenav.html">$frontpagenav</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l4696"><span class="linenum">4696</span></a>                      }
<a name="l4697"><span class="linenum">4697</span></a>                  }
<a name="l4698"><span class="linenum">4698</span></a>              }
<a name="l4699"><span class="linenum">4699</span></a>  
<a name="l4700"><span class="linenum">4700</span></a>              <a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a> = <a class="function" onClick="logFunction('get_plugin_list_with_function')" href="../_functions/get_plugin_list_with_function.html" onMouseOver="funcPopup(event,'get_plugin_list_with_function')">get_plugin_list_with_function</a>('report', 'extend_navigation_course', 'lib.php');
<a name="l4701"><span class="linenum">4701</span></a>              foreach (<a class="var it1891" onMouseOver="hilite(1891)" onMouseOut="lolite()" onClick="logVariable('reports')" href="../_variables/reports.html">$reports</a> as <a class="var it37510" onMouseOver="hilite(37510)" onMouseOut="lolite()" onClick="logVariable('reportfunction')" href="../_variables/reportfunction.html">$reportfunction</a>) {
<a name="l4702"><span class="linenum">4702</span></a>                  <a class="var it37510" onMouseOver="hilite(37510)" onMouseOut="lolite()" onClick="logVariable('reportfunction')" href="../_variables/reportfunction.html">$reportfunction</a>(<a class="var it37560" onMouseOver="hilite(37560)" onMouseOut="lolite()" onClick="logVariable('frontpagenav')" href="../_variables/frontpagenav.html">$frontpagenav</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l4703"><span class="linenum">4703</span></a>              }
<a name="l4704"><span class="linenum">4704</span></a>          }
<a name="l4705"><span class="linenum">4705</span></a>  
<a name="l4706"><span class="linenum">4706</span></a>  <span class="comment">        // Backup this course</span>
<a name="l4707"><span class="linenum">4707</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/backup:backupcourse', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l4708"><span class="linenum">4708</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../backup/backup.php.html">/backup/backup.php</a>', array('id'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4709"><span class="linenum">4709</span></a>              <a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('backup'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/backup', ''));
<a name="l4710"><span class="linenum">4710</span></a>          }
<a name="l4711"><span class="linenum">4711</span></a>  
<a name="l4712"><span class="linenum">4712</span></a>  <span class="comment">        // Restore to this course</span>
<a name="l4713"><span class="linenum">4713</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/restore:restorecourse', <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)) {
<a name="l4714"><span class="linenum">4714</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../backup/restorefile.php.html">/backup/restorefile.php</a>', array('contextid'=&gt;<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('id')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4715"><span class="linenum">4715</span></a>              <a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('restore'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/restore', ''));
<a name="l4716"><span class="linenum">4716</span></a>          }
<a name="l4717"><span class="linenum">4717</span></a>  
<a name="l4718"><span class="linenum">4718</span></a>  <span class="comment">        // Questions</span>
<a name="l4719"><span class="linenum">4719</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/questionlib.php');
<a name="l4720"><span class="linenum">4720</span></a>          <a class="function" onClick="logFunction('question_extend_settings_navigation')" href="../_functions/question_extend_settings_navigation.html" onMouseOver="funcPopup(event,'question_extend_settings_navigation')">question_extend_settings_navigation</a>(<a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>, <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>)-&gt;<a class="function" onClick="logFunction('trim_if_empty')" href="../_functions/trim_if_empty.html" onMouseOver="funcPopup(event,'trim_if_empty')">trim_if_empty</a>();
<a name="l4721"><span class="linenum">4721</span></a>  
<a name="l4722"><span class="linenum">4722</span></a>  <span class="comment">        // Manage files</span>
<a name="l4723"><span class="linenum">4723</span></a>          if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('legacyfiles')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/legacyfiles.html">legacyfiles</a> == 2 and <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:managefiles', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>)) {
<a name="l4724"><span class="linenum">4724</span></a>  <span class="comment">            //hiden in new installs</span>
<a name="l4725"><span class="linenum">4725</span></a>              <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../files/index.php.html">/files/index.php</a>', array('contextid'=&gt;<a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>-&gt;<a onClick="logVariable('id')" class="var it39493" onMouseOver="hilite(39493)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l4726"><span class="linenum">4726</span></a>              <a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('sitelegacyfiles'), <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, self::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/folder', ''));
<a name="l4727"><span class="linenum">4727</span></a>          }
<a name="l4728"><span class="linenum">4728</span></a>  
<a name="l4729"><span class="linenum">4729</span></a>  <span class="comment">        // Let admin tools hook into frontpage navigation.</span>
<a name="l4730"><span class="linenum">4730</span></a>          <a class="var it20817" onMouseOver="hilite(20817)" onMouseOut="lolite()" onClick="logVariable('tools')" href="../_variables/tools.html">$tools</a> = <a class="function" onClick="logFunction('get_plugin_list_with_function')" href="../_functions/get_plugin_list_with_function.html" onMouseOver="funcPopup(event,'get_plugin_list_with_function')">get_plugin_list_with_function</a>('tool', 'extend_navigation_frontpage', 'lib.php');
<a name="l4731"><span class="linenum">4731</span></a>          foreach (<a class="var it20817" onMouseOver="hilite(20817)" onMouseOut="lolite()" onClick="logVariable('tools')" href="../_variables/tools.html">$tools</a> as <a class="var it37546" onMouseOver="hilite(37546)" onMouseOut="lolite()" onClick="logVariable('toolfunction')" href="../_variables/toolfunction.html">$toolfunction</a>) {
<a name="l4732"><span class="linenum">4732</span></a>              <a class="var it37546" onMouseOver="hilite(37546)" onMouseOut="lolite()" onClick="logVariable('toolfunction')" href="../_variables/toolfunction.html">$toolfunction</a>(<a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../_variables/coursecontext.html">$coursecontext</a>);
<a name="l4733"><span class="linenum">4733</span></a>          }
<a name="l4734"><span class="linenum">4734</span></a>  
<a name="l4735"><span class="linenum">4735</span></a>          return <a class="var it6473" onMouseOver="hilite(6473)" onMouseOut="lolite()" onClick="logVariable('frontpage')" href="../_variables/frontpage.html">$frontpage</a>;
<a name="l4736"><span class="linenum">4736</span></a>      }
<a name="l4737"><span class="linenum">4737</span></a>  
<a name="l4738"><span class="linenum">4738</span></a>      <span class="comment">/**</span>
<a name="l4739"><span class="linenum">4739</span></a>  <span class="comment">     * This function gives local plugins an opportunity to modify the settings navigation.</span>
<a name="l4740"><span class="linenum">4740</span></a>  <span class="comment">     */</span>
<a name="l4741"><span class="linenum">4741</span></a>      protected function <a class="function" onClick="logFunction('load_local_plugin_settings')" href="../_functions/load_local_plugin_settings.html" onMouseOver="funcPopup(event,'load_local_plugin_settings')">load_local_plugin_settings</a>() {
<a name="l4742"><span class="linenum">4742</span></a>  
<a name="l4743"><span class="linenum">4743</span></a>          foreach (<a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_list_with_file')" href="../_functions/get_plugin_list_with_file.html" onMouseOver="funcPopup(event,'get_plugin_list_with_file')">get_plugin_list_with_file</a>('local', 'lib.php', true) as <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a> =&gt; <a class="var it1136" onMouseOver="hilite(1136)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../_variables/unused.html">$unused</a>) {
<a name="l4744"><span class="linenum">4744</span></a>              <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = &quot;local_{<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>}_extend_settings_navigation&quot;;
<a name="l4745"><span class="linenum">4745</span></a>              <a class="var it13150" onMouseOver="hilite(13150)" onMouseOut="lolite()" onClick="logVariable('oldfunction')" href="../_variables/oldfunction.html">$oldfunction</a> = &quot;local_{<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../_variables/plugin.html">$plugin</a>}_extends_settings_navigation&quot;;
<a name="l4746"><span class="linenum">4746</span></a>  
<a name="l4747"><span class="linenum">4747</span></a>              if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)) {
<a name="l4748"><span class="linenum">4748</span></a>                  <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>);
<a name="l4749"><span class="linenum">4749</span></a>  
<a name="l4750"><span class="linenum">4750</span></a>              } else if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it13150" onMouseOver="hilite(13150)" onMouseOut="lolite()" onClick="logVariable('oldfunction')" href="../_variables/oldfunction.html">$oldfunction</a>)) {
<a name="l4751"><span class="linenum">4751</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;Deprecated local plugin navigation callback: Please rename '{<a class="var it13150" onMouseOver="hilite(13150)" onMouseOut="lolite()" onClick="logVariable('oldfunction')" href="../_variables/oldfunction.html">$oldfunction</a>}' to '{<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>}'. &quot;.
<a name="l4752"><span class="linenum">4752</span></a>                      &quot;Support for the old callback will be dropped in Moodle 3.1&quot;, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l4753"><span class="linenum">4753</span></a>                  <a class="var it13150" onMouseOver="hilite(13150)" onMouseOut="lolite()" onClick="logVariable('oldfunction')" href="../_variables/oldfunction.html">$oldfunction</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a>);
<a name="l4754"><span class="linenum">4754</span></a>              }
<a name="l4755"><span class="linenum">4755</span></a>          }
<a name="l4756"><span class="linenum">4756</span></a>      }
<a name="l4757"><span class="linenum">4757</span></a>  
<a name="l4758"><span class="linenum">4758</span></a>      <span class="comment">/**</span>
<a name="l4759"><span class="linenum">4759</span></a>  <span class="comment">     * This function marks the cache as volatile so it is cleared during shutdown</span>
<a name="l4760"><span class="linenum">4760</span></a>  <span class="comment">     */</span>
<a name="l4761"><span class="linenum">4761</span></a>      public function <a class="function" onClick="logFunction('clear_cache')" href="../_functions/clear_cache.html" onMouseOver="funcPopup(event,'clear_cache')">clear_cache</a>() {
<a name="l4762"><span class="linenum">4762</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a>-&gt;<a class="function" onClick="logFunction('volatile')" href="../_functions/volatile.html" onMouseOver="funcPopup(event,'volatile')">volatile</a>();
<a name="l4763"><span class="linenum">4763</span></a>      }
<a name="l4764"><span class="linenum">4764</span></a>  }
<a name="l4765"><span class="linenum">4765</span></a>  
<a name="l4766"><span class="linenum">4766</span></a>  <span class="comment">/**</span>
<a name="l4767"><span class="linenum">4767</span></a>  <span class="comment"> * Class used to populate site admin navigation for ajax.</span>
<a name="l4768"><span class="linenum">4768</span></a>  <span class="comment"> *</span>
<a name="l4769"><span class="linenum">4769</span></a>  <span class="comment"> * @package   core</span>
<a name="l4770"><span class="linenum">4770</span></a>  <span class="comment"> * @category  navigation</span>
<a name="l4771"><span class="linenum">4771</span></a>  <span class="comment"> * @copyright 2013 Rajesh Taneja &lt;rajesh@moodle.com&gt;</span>
<a name="l4772"><span class="linenum">4772</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l4773"><span class="linenum">4773</span></a>  <span class="comment"> */</span>
<a name="l4774"><span class="linenum">4774</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('settings_navigation_ajax')" href="../_classes/settings_navigation_ajax.html" onMouseOver="classPopup(event,'settings_navigation_ajax')">settings_navigation_ajax</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('settings_navigation')" href="../_classes/settings_navigation.html" onMouseOver="classPopup(event,'settings_navigation')">settings_navigation</a> {
<a name="l4775"><span class="linenum">4775</span></a>      <span class="comment">/**</span>
<a name="l4776"><span class="linenum">4776</span></a>  <span class="comment">     * Constructs the navigation for use in an AJAX request</span>
<a name="l4777"><span class="linenum">4777</span></a>  <span class="comment">     *</span>
<a name="l4778"><span class="linenum">4778</span></a>  <span class="comment">     * @param moodle_page $page</span>
<a name="l4779"><span class="linenum">4779</span></a>  <span class="comment">     */</span>
<a name="l4780"><span class="linenum">4780</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(moodle_page &amp;<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>) {
<a name="l4781"><span class="linenum">4781</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>;
<a name="l4782"><span class="linenum">4782</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cache')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/cache.html">cache</a> = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_cache')" href="../_classes/navigation_cache.html" onMouseOver="classPopup(event,'navigation_cache')">navigation_cache</a>(<a class="constant" onClick="logConstant('NAVIGATION_CACHE_NAME')" href="../_constants/NAVIGATION_CACHE_NAME.html" onMouseOver="constPopup(event,'NAVIGATION_CACHE_NAME')">NAVIGATION_CACHE_NAME</a>);
<a name="l4783"><span class="linenum">4783</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('children')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/children.html">children</a> = <span class="keyword">new </span><a class="class" onClick="logClass('navigation_node_collection')" href="../_classes/navigation_node_collection.html" onMouseOver="classPopup(event,'navigation_node_collection')">navigation_node_collection</a>();
<a name="l4784"><span class="linenum">4784</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('initialise')" href="../_functions/initialise.html" onMouseOver="funcPopup(event,'initialise')">initialise</a>();
<a name="l4785"><span class="linenum">4785</span></a>      }
<a name="l4786"><span class="linenum">4786</span></a>  
<a name="l4787"><span class="linenum">4787</span></a>      <span class="comment">/**</span>
<a name="l4788"><span class="linenum">4788</span></a>  <span class="comment">     * Initialise the site admin navigation.</span>
<a name="l4789"><span class="linenum">4789</span></a>  <span class="comment">     *</span>
<a name="l4790"><span class="linenum">4790</span></a>  <span class="comment">     * @return array An array of the expandable nodes</span>
<a name="l4791"><span class="linenum">4791</span></a>  <span class="comment">     */</span>
<a name="l4792"><span class="linenum">4792</span></a>      public function <a class="function" onClick="logFunction('initialise')" href="../_functions/initialise.html" onMouseOver="funcPopup(event,'initialise')">initialise</a>() {
<a name="l4793"><span class="linenum">4793</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('initialised')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/initialised.html">initialised</a> || <a class="function" onClick="logFunction('during_initial_install')" href="../_functions/during_initial_install.html" onMouseOver="funcPopup(event,'during_initial_install')">during_initial_install</a>()) {
<a name="l4794"><span class="linenum">4794</span></a>              return false;
<a name="l4795"><span class="linenum">4795</span></a>          }
<a name="l4796"><span class="linenum">4796</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('context')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/context.html">context</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context;
<a name="l4797"><span class="linenum">4797</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_administration_settings')" href="../_functions/load_administration_settings.html" onMouseOver="funcPopup(event,'load_administration_settings')">load_administration_settings</a>();
<a name="l4798"><span class="linenum">4798</span></a>  
<a name="l4799"><span class="linenum">4799</span></a>  <span class="comment">        // Check if local plugins is adding node to site admin.</span>
<a name="l4800"><span class="linenum">4800</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('load_local_plugin_settings')" href="../_functions/load_local_plugin_settings.html" onMouseOver="funcPopup(event,'load_local_plugin_settings')">load_local_plugin_settings</a>();
<a name="l4801"><span class="linenum">4801</span></a>  
<a name="l4802"><span class="linenum">4802</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('initialised')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/initialised.html">initialised</a> = true;
<a name="l4803"><span class="linenum">4803</span></a>      }
<a name="l4804"><span class="linenum">4804</span></a>  }
<a name="l4805"><span class="linenum">4805</span></a>  
<a name="l4806"><span class="linenum">4806</span></a>  <span class="comment">/**</span>
<a name="l4807"><span class="linenum">4807</span></a>  <span class="comment"> * Simple class used to output a navigation branch in XML</span>
<a name="l4808"><span class="linenum">4808</span></a>  <span class="comment"> *</span>
<a name="l4809"><span class="linenum">4809</span></a>  <span class="comment"> * @package   core</span>
<a name="l4810"><span class="linenum">4810</span></a>  <span class="comment"> * @category  navigation</span>
<a name="l4811"><span class="linenum">4811</span></a>  <span class="comment"> * @copyright 2009 Sam Hemelryk</span>
<a name="l4812"><span class="linenum">4812</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l4813"><span class="linenum">4813</span></a>  <span class="comment"> */</span>
<a name="l4814"><span class="linenum">4814</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('navigation_json')" href="../_classes/navigation_json.html" onMouseOver="classPopup(event,'navigation_json')">navigation_json</a> {
<a name="l4815"><span class="linenum">4815</span></a>  <span class="comment">    /** @var array An array of different node types */</span>
<a name="l4816"><span class="linenum">4816</span></a>      protected <a class="var it15868" onMouseOver="hilite(15868)" onMouseOut="lolite()" onClick="logVariable('nodetype')" href="../_variables/nodetype.html">$nodetype</a> = array('node','branch');
<a name="l4817"><span class="linenum">4817</span></a>  <span class="comment">    /** @var array An array of node keys and types */</span>
<a name="l4818"><span class="linenum">4818</span></a>      protected <a class="var it18829" onMouseOver="hilite(18829)" onMouseOut="lolite()" onClick="logVariable('expandable')" href="../_variables/expandable.html">$expandable</a> = array();
<a name="l4819"><span class="linenum">4819</span></a>      <span class="comment">/**</span>
<a name="l4820"><span class="linenum">4820</span></a>  <span class="comment">     * Turns a branch and all of its children into XML</span>
<a name="l4821"><span class="linenum">4821</span></a>  <span class="comment">     *</span>
<a name="l4822"><span class="linenum">4822</span></a>  <span class="comment">     * @param navigation_node $branch</span>
<a name="l4823"><span class="linenum">4823</span></a>  <span class="comment">     * @return string XML string</span>
<a name="l4824"><span class="linenum">4824</span></a>  <span class="comment">     */</span>
<a name="l4825"><span class="linenum">4825</span></a>      public function <a class="function" onClick="logFunction('convert')" href="../_functions/convert.html" onMouseOver="funcPopup(event,'convert')">convert</a>(<a class="var it662" onMouseOver="hilite(662)" onMouseOut="lolite()" onClick="logVariable('branch')" href="../_variables/branch.html">$branch</a>) {
<a name="l4826"><span class="linenum">4826</span></a>          <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../_variables/xml.html">$xml</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('convert_child')" href="../_functions/convert_child.html" onMouseOver="funcPopup(event,'convert_child')">convert_child</a>(<a class="var it662" onMouseOver="hilite(662)" onMouseOut="lolite()" onClick="logVariable('branch')" href="../_variables/branch.html">$branch</a>);
<a name="l4827"><span class="linenum">4827</span></a>          return <a class="var it2503" onMouseOver="hilite(2503)" onMouseOut="lolite()" onClick="logVariable('xml')" href="../_variables/xml.html">$xml</a>;
<a name="l4828"><span class="linenum">4828</span></a>      }
<a name="l4829"><span class="linenum">4829</span></a>      <span class="comment">/**</span>
<a name="l4830"><span class="linenum">4830</span></a>  <span class="comment">     * Set the expandable items in the array so that we have enough information</span>
<a name="l4831"><span class="linenum">4831</span></a>  <span class="comment">     * to attach AJAX events</span>
<a name="l4832"><span class="linenum">4832</span></a>  <span class="comment">     * @param array $expandable</span>
<a name="l4833"><span class="linenum">4833</span></a>  <span class="comment">     */</span>
<a name="l4834"><span class="linenum">4834</span></a>      public function <a class="function" onClick="logFunction('set_expandable')" href="../_functions/set_expandable.html" onMouseOver="funcPopup(event,'set_expandable')">set_expandable</a>(<a class="var it18829" onMouseOver="hilite(18829)" onMouseOut="lolite()" onClick="logVariable('expandable')" href="../_variables/expandable.html">$expandable</a>) {
<a name="l4835"><span class="linenum">4835</span></a>          foreach (<a class="var it18829" onMouseOver="hilite(18829)" onMouseOut="lolite()" onClick="logVariable('expandable')" href="../_variables/expandable.html">$expandable</a> as <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>) {
<a name="l4836"><span class="linenum">4836</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('expandable')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/expandable.html">expandable</a>[<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>['key'].':'.<a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>['type']] = <a class="var it52" onMouseOver="hilite(52)" onMouseOut="lolite()" onClick="logVariable('node')" href="../_variables/node.html">$node</a>;
<a name="l4837"><span class="linenum">4837</span></a>          }
<a name="l4838"><span class="linenum">4838</span></a>      }
<a name="l4839"><span class="linenum">4839</span></a>      <span class="comment">/**</span>
<a name="l4840"><span class="linenum">4840</span></a>  <span class="comment">     * Recusively converts a child node and its children to XML for output</span>
<a name="l4841"><span class="linenum">4841</span></a>  <span class="comment">     *</span>
<a name="l4842"><span class="linenum">4842</span></a>  <span class="comment">     * @param navigation_node $child The child to convert</span>
<a name="l4843"><span class="linenum">4843</span></a>  <span class="comment">     * @param int $depth Pointlessly used to track the depth of the XML structure</span>
<a name="l4844"><span class="linenum">4844</span></a>  <span class="comment">     * @return string JSON</span>
<a name="l4845"><span class="linenum">4845</span></a>  <span class="comment">     */</span>
<a name="l4846"><span class="linenum">4846</span></a>      protected function <a class="function" onClick="logFunction('convert_child')" href="../_functions/convert_child.html" onMouseOver="funcPopup(event,'convert_child')">convert_child</a>(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>, <a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>=1) {
<a name="l4847"><span class="linenum">4847</span></a>          if (!<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('display')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/display.html">display</a>) {
<a name="l4848"><span class="linenum">4848</span></a>              return '';
<a name="l4849"><span class="linenum">4849</span></a>          }
<a name="l4850"><span class="linenum">4850</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a> = array();
<a name="l4851"><span class="linenum">4851</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['id'] = <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('id')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l4852"><span class="linenum">4852</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['name'] = (string)<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('text')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/text.html">text</a>; <span class="comment">// This can be lang_string object so typecast it.</span>
<a name="l4853"><span class="linenum">4853</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['type'] = <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('type')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/type.html">type</a>;
<a name="l4854"><span class="linenum">4854</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['key'] = <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('key')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/key.html">key</a>;
<a name="l4855"><span class="linenum">4855</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['class'] = <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('get_css_type')" href="../_functions/get_css_type.html" onMouseOver="funcPopup(event,'get_css_type')">get_css_type</a>();
<a name="l4856"><span class="linenum">4856</span></a>  
<a name="l4857"><span class="linenum">4857</span></a>          if (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('icon')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a> instanceof pix_icon) {
<a name="l4858"><span class="linenum">4858</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['icon'] = array(
<a name="l4859"><span class="linenum">4859</span></a>                  'component' =&gt; <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('icon')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>-&gt;component,
<a name="l4860"><span class="linenum">4860</span></a>                  'pix' =&gt; <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('icon')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>-&gt;pix,
<a name="l4861"><span class="linenum">4861</span></a>              );
<a name="l4862"><span class="linenum">4862</span></a>              foreach (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('icon')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>-&gt;attributes as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l4863"><span class="linenum">4863</span></a>                  if (<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> == 'class') {
<a name="l4864"><span class="linenum">4864</span></a>                      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['icon']['classes'] = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(' ', <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>);
<a name="l4865"><span class="linenum">4865</span></a>                  } else if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['icon'])) {
<a name="l4866"><span class="linenum">4866</span></a>                      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['icon'][<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l4867"><span class="linenum">4867</span></a>                  }
<a name="l4868"><span class="linenum">4868</span></a>  
<a name="l4869"><span class="linenum">4869</span></a>              }
<a name="l4870"><span class="linenum">4870</span></a>          } else if (!empty(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('icon')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>)) {
<a name="l4871"><span class="linenum">4871</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['icon'] = (string)<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('icon')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/icon.html">icon</a>;
<a name="l4872"><span class="linenum">4872</span></a>          }
<a name="l4873"><span class="linenum">4873</span></a>  
<a name="l4874"><span class="linenum">4874</span></a>          if (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('forcetitle')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/forcetitle.html">forcetitle</a> || <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('title')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/title.html">title</a> !== <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('text')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/text.html">text</a>) {
<a name="l4875"><span class="linenum">4875</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['title'] = <a class="phpfunction" onClick="logFunction('htmlentities')" href="../_functions/htmlentities.html" onMouseOver="phpfuncPopup(event,'htmlentities')">htmlentities</a>(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('title')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/title.html">title</a>, ENT_QUOTES, 'UTF-8');
<a name="l4876"><span class="linenum">4876</span></a>          }
<a name="l4877"><span class="linenum">4877</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('key')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/key.html">key</a>.':'.<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('type')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/type.html">type</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('expandable')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/expandable.html">expandable</a>)) {
<a name="l4878"><span class="linenum">4878</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['expandable'] = <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('key')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/key.html">key</a>;
<a name="l4879"><span class="linenum">4879</span></a>              <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a class="function" onClick="logFunction('add_class')" href="../_functions/add_class.html" onMouseOver="funcPopup(event,'add_class')">add_class</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('expandable')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/expandable.html">expandable</a>[<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('key')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/key.html">key</a>.':'.<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('type')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/type.html">type</a>]['id']);
<a name="l4880"><span class="linenum">4880</span></a>          }
<a name="l4881"><span class="linenum">4881</span></a>  
<a name="l4882"><span class="linenum">4882</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('classes')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/classes.html">classes</a>)&gt;0) {
<a name="l4883"><span class="linenum">4883</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['class'] .= ' '.<a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(' ',<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('classes')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/classes.html">classes</a>);
<a name="l4884"><span class="linenum">4884</span></a>          }
<a name="l4885"><span class="linenum">4885</span></a>          if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('action')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/action.html">action</a>)) {
<a name="l4886"><span class="linenum">4886</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['link'] = <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('action')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/action.html">action</a>;
<a name="l4887"><span class="linenum">4887</span></a>          } else if (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('action')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/action.html">action</a> instanceof moodle_url) {
<a name="l4888"><span class="linenum">4888</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['link'] = <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('action')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/action.html">action</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l4889"><span class="linenum">4889</span></a>          } else if (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('action')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/action.html">action</a> instanceof action_link) {
<a name="l4890"><span class="linenum">4890</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['link'] = <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('action')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/action.html">action</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l4891"><span class="linenum">4891</span></a>          }
<a name="l4892"><span class="linenum">4892</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['hidden'] = (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('hidden')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/hidden.html">hidden</a>);
<a name="l4893"><span class="linenum">4893</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['haschildren'] = (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('children')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>()&gt;0 || <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('type')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/type.html">type</a> == <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_CATEGORY);
<a name="l4894"><span class="linenum">4894</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['haschildren'] = <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['haschildren'] || <a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('type')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/type.html">type</a> == <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_MY_CATEGORY;
<a name="l4895"><span class="linenum">4895</span></a>  
<a name="l4896"><span class="linenum">4896</span></a>          if (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('children')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/children.html">children</a>-&gt;<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>() &gt; 0) {
<a name="l4897"><span class="linenum">4897</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['children'] = array();
<a name="l4898"><span class="linenum">4898</span></a>              foreach (<a class="var it579" onMouseOver="hilite(579)" onMouseOut="lolite()" onClick="logVariable('child')" href="../_variables/child.html">$child</a>-&gt;<a onClick="logVariable('children')" class="var it39612" onMouseOver="hilite(39612)" onMouseOut="lolite()" href="../_variables/children.html">children</a> as <a class="var it37561" onMouseOver="hilite(37561)" onMouseOut="lolite()" onClick="logVariable('subchild')" href="../_variables/subchild.html">$subchild</a>) {
<a name="l4899"><span class="linenum">4899</span></a>                  <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>['children'][] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('convert_child')" href="../_functions/convert_child.html" onMouseOver="funcPopup(event,'convert_child')">convert_child</a>(<a class="var it37561" onMouseOver="hilite(37561)" onMouseOut="lolite()" onClick="logVariable('subchild')" href="../_variables/subchild.html">$subchild</a>, <a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>+1);
<a name="l4900"><span class="linenum">4900</span></a>              }
<a name="l4901"><span class="linenum">4901</span></a>          }
<a name="l4902"><span class="linenum">4902</span></a>  
<a name="l4903"><span class="linenum">4903</span></a>          if (<a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> &gt; 1) {
<a name="l4904"><span class="linenum">4904</span></a>              return <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>;
<a name="l4905"><span class="linenum">4905</span></a>          } else {
<a name="l4906"><span class="linenum">4906</span></a>              return <a class="function" onClick="logFunction('json_encode')" href="../_functions/json_encode.html" onMouseOver="funcPopup(event,'json_encode')">json_encode</a>(<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>);
<a name="l4907"><span class="linenum">4907</span></a>          }
<a name="l4908"><span class="linenum">4908</span></a>      }
<a name="l4909"><span class="linenum">4909</span></a>  }
<a name="l4910"><span class="linenum">4910</span></a>  
<a name="l4911"><span class="linenum">4911</span></a>  <span class="comment">/**</span>
<a name="l4912"><span class="linenum">4912</span></a>  <span class="comment"> * The cache class used by global navigation and settings navigation.</span>
<a name="l4913"><span class="linenum">4913</span></a>  <span class="comment"> *</span>
<a name="l4914"><span class="linenum">4914</span></a>  <span class="comment"> * It is basically an easy access point to session with a bit of smarts to make</span>
<a name="l4915"><span class="linenum">4915</span></a>  <span class="comment"> * sure that the information that is cached is valid still.</span>
<a name="l4916"><span class="linenum">4916</span></a>  <span class="comment"> *</span>
<a name="l4917"><span class="linenum">4917</span></a>  <span class="comment"> * Example use:</span>
<a name="l4918"><span class="linenum">4918</span></a>  <span class="comment"> * &lt;code php&gt;</span>
<a name="l4919"><span class="linenum">4919</span></a>  <span class="comment"> * if (!$cache-&gt;viewdiscussion()) {</span>
<a name="l4920"><span class="linenum">4920</span></a>  <span class="comment"> *     // Code to do stuff and produce cachable content</span>
<a name="l4921"><span class="linenum">4921</span></a>  <span class="comment"> *     $cache-&gt;viewdiscussion = has_capability('mod/forum:viewdiscussion', $coursecontext);</span>
<a name="l4922"><span class="linenum">4922</span></a>  <span class="comment"> * }</span>
<a name="l4923"><span class="linenum">4923</span></a>  <span class="comment"> * $content = $cache-&gt;viewdiscussion;</span>
<a name="l4924"><span class="linenum">4924</span></a>  <span class="comment"> * &lt;/code&gt;</span>
<a name="l4925"><span class="linenum">4925</span></a>  <span class="comment"> *</span>
<a name="l4926"><span class="linenum">4926</span></a>  <span class="comment"> * @package   core</span>
<a name="l4927"><span class="linenum">4927</span></a>  <span class="comment"> * @category  navigation</span>
<a name="l4928"><span class="linenum">4928</span></a>  <span class="comment"> * @copyright 2009 Sam Hemelryk</span>
<a name="l4929"><span class="linenum">4929</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l4930"><span class="linenum">4930</span></a>  <span class="comment"> */</span>
<a name="l4931"><span class="linenum">4931</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('navigation_cache')" href="../_classes/navigation_cache.html" onMouseOver="classPopup(event,'navigation_cache')">navigation_cache</a> {
<a name="l4932"><span class="linenum">4932</span></a>  <span class="comment">    /** @var int represents the time created */</span>
<a name="l4933"><span class="linenum">4933</span></a>      protected <a class="var it37562" onMouseOver="hilite(37562)" onMouseOut="lolite()" onClick="logVariable('creation')" href="../_variables/creation.html">$creation</a>;
<a name="l4934"><span class="linenum">4934</span></a>  <span class="comment">    /** @var array An array of session keys */</span>
<a name="l4935"><span class="linenum">4935</span></a>      protected <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('session')" href="../_variables/session.html">$session</a>;
<a name="l4936"><span class="linenum">4936</span></a>      <span class="comment">/**</span>
<a name="l4937"><span class="linenum">4937</span></a>  <span class="comment">     * The string to use to segregate this particular cache. It can either be</span>
<a name="l4938"><span class="linenum">4938</span></a>  <span class="comment">     * unique to start a fresh cache or if you want to share a cache then make</span>
<a name="l4939"><span class="linenum">4939</span></a>  <span class="comment">     * it the string used in the original cache.</span>
<a name="l4940"><span class="linenum">4940</span></a>  <span class="comment">     * @var string</span>
<a name="l4941"><span class="linenum">4941</span></a>  <span class="comment">     */</span>
<a name="l4942"><span class="linenum">4942</span></a>      protected <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('area')" href="../_variables/area.html">$area</a>;
<a name="l4943"><span class="linenum">4943</span></a>  <span class="comment">    /** @var int a time that the information will time out */</span>
<a name="l4944"><span class="linenum">4944</span></a>      protected <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../_variables/timeout.html">$timeout</a>;
<a name="l4945"><span class="linenum">4945</span></a>  <span class="comment">    /** @var stdClass The current context */</span>
<a name="l4946"><span class="linenum">4946</span></a>      protected <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>;
<a name="l4947"><span class="linenum">4947</span></a>  <span class="comment">    /** @var int cache time information */</span>
<a name="l4948"><span class="linenum">4948</span></a>      const CACHETIME = 0;
<a name="l4949"><span class="linenum">4949</span></a>  <span class="comment">    /** @var int cache user id */</span>
<a name="l4950"><span class="linenum">4950</span></a>      const CACHEUSERID = 1;
<a name="l4951"><span class="linenum">4951</span></a>  <span class="comment">    /** @var int cache value */</span>
<a name="l4952"><span class="linenum">4952</span></a>      const CACHEVALUE = 2;
<a name="l4953"><span class="linenum">4953</span></a>  <span class="comment">    /** @var null|array An array of navigation cache areas to expire on shutdown */</span>
<a name="l4954"><span class="linenum">4954</span></a>      public static <a class="var it37563" onMouseOver="hilite(37563)" onMouseOut="lolite()" onClick="logVariable('volatilecaches')" href="../_variables/volatilecaches.html">$volatilecaches</a>;
<a name="l4955"><span class="linenum">4955</span></a>  
<a name="l4956"><span class="linenum">4956</span></a>      <span class="comment">/**</span>
<a name="l4957"><span class="linenum">4957</span></a>  <span class="comment">     * Contructor for the cache. Requires two arguments</span>
<a name="l4958"><span class="linenum">4958</span></a>  <span class="comment">     *</span>
<a name="l4959"><span class="linenum">4959</span></a>  <span class="comment">     * @param string $area The string to use to segregate this particular cache</span>
<a name="l4960"><span class="linenum">4960</span></a>  <span class="comment">     *                it can either be unique to start a fresh cache or if you want</span>
<a name="l4961"><span class="linenum">4961</span></a>  <span class="comment">     *                to share a cache then make it the string used in the original</span>
<a name="l4962"><span class="linenum">4962</span></a>  <span class="comment">     *                cache</span>
<a name="l4963"><span class="linenum">4963</span></a>  <span class="comment">     * @param int $timeout The number of seconds to time the information out after</span>
<a name="l4964"><span class="linenum">4964</span></a>  <span class="comment">     */</span>
<a name="l4965"><span class="linenum">4965</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('area')" href="../_variables/area.html">$area</a>, <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../_variables/timeout.html">$timeout</a>=1800) {
<a name="l4966"><span class="linenum">4966</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('creation')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/creation.html">creation</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l4967"><span class="linenum">4967</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/area.html">area</a> = <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('area')" href="../_variables/area.html">$area</a>;
<a name="l4968"><span class="linenum">4968</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('timeout')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/timeout.html">timeout</a> = <a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - <a class="var it353" onMouseOver="hilite(353)" onMouseOut="lolite()" onClick="logVariable('timeout')" href="../_variables/timeout.html">$timeout</a>;
<a name="l4969"><span class="linenum">4969</span></a>          if (<a class="phpfunction" onClick="logFunction('rand')" href="../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0,100) === 0) {
<a name="l4970"><span class="linenum">4970</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('garbage_collection')" href="../_functions/garbage_collection.html" onMouseOver="funcPopup(event,'garbage_collection')">garbage_collection</a>();
<a name="l4971"><span class="linenum">4971</span></a>          }
<a name="l4972"><span class="linenum">4972</span></a>      }
<a name="l4973"><span class="linenum">4973</span></a>  
<a name="l4974"><span class="linenum">4974</span></a>      <span class="comment">/**</span>
<a name="l4975"><span class="linenum">4975</span></a>  <span class="comment">     * Used to set up the cache within the SESSION.</span>
<a name="l4976"><span class="linenum">4976</span></a>  <span class="comment">     *</span>
<a name="l4977"><span class="linenum">4977</span></a>  <span class="comment">     * This is called for each access and ensure that we don't put anything into the session before</span>
<a name="l4978"><span class="linenum">4978</span></a>  <span class="comment">     * it is required.</span>
<a name="l4979"><span class="linenum">4979</span></a>  <span class="comment">     */</span>
<a name="l4980"><span class="linenum">4980</span></a>      protected function <a class="function" onClick="logFunction('ensure_session_cache_initialised')" href="../_functions/ensure_session_cache_initialised.html" onMouseOver="funcPopup(event,'ensure_session_cache_initialised')">ensure_session_cache_initialised</a>() {
<a name="l4981"><span class="linenum">4981</span></a>          global <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>;
<a name="l4982"><span class="linenum">4982</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a>)) {
<a name="l4983"><span class="linenum">4983</span></a>              if (!isset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('navcache')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/navcache.html">navcache</a>)) {
<a name="l4984"><span class="linenum">4984</span></a>                  <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('navcache')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/navcache.html">navcache</a> = new stdClass;
<a name="l4985"><span class="linenum">4985</span></a>              }
<a name="l4986"><span class="linenum">4986</span></a>              if (!isset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('navcache')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/navcache.html">navcache</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/area.html">area</a>})) {
<a name="l4987"><span class="linenum">4987</span></a>                  <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('navcache')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/navcache.html">navcache</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/area.html">area</a>} = array();
<a name="l4988"><span class="linenum">4988</span></a>              }
<a name="l4989"><span class="linenum">4989</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a> = &amp;<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('navcache')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/navcache.html">navcache</a>-&gt;{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/area.html">area</a>}; <span class="comment">// pointer to array, =&amp; is correct here</span>
<a name="l4990"><span class="linenum">4990</span></a>          }
<a name="l4991"><span class="linenum">4991</span></a>      }
<a name="l4992"><span class="linenum">4992</span></a>  
<a name="l4993"><span class="linenum">4993</span></a>      <span class="comment">/**</span>
<a name="l4994"><span class="linenum">4994</span></a>  <span class="comment">     * Magic Method to retrieve something by simply calling using = cache-&gt;key</span>
<a name="l4995"><span class="linenum">4995</span></a>  <span class="comment">     *</span>
<a name="l4996"><span class="linenum">4996</span></a>  <span class="comment">     * @param mixed $key The identifier for the information you want out again</span>
<a name="l4997"><span class="linenum">4997</span></a>  <span class="comment">     * @return void|mixed Either void or what ever was put in</span>
<a name="l4998"><span class="linenum">4998</span></a>  <span class="comment">     */</span>
<a name="l4999"><span class="linenum">4999</span></a>      public function <a class="function" onClick="logFunction('__get')" href="../_functions/__get.html" onMouseOver="funcPopup(event,'__get')">__get</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l5000"><span class="linenum">5000</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cached')" href="../_functions/cached.html" onMouseOver="funcPopup(event,'cached')">cached</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>)) {
<a name="l5001"><span class="linenum">5001</span></a>              return;
<a name="l5002"><span class="linenum">5002</span></a>          }
<a name="l5003"><span class="linenum">5003</span></a>          <a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('information')" href="../_variables/information.html">$information</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>][self::CACHEVALUE];
<a name="l5004"><span class="linenum">5004</span></a>          return <a class="phpfunction" onClick="logFunction('unserialize')" href="../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('information')" href="../_variables/information.html">$information</a>);
<a name="l5005"><span class="linenum">5005</span></a>      }
<a name="l5006"><span class="linenum">5006</span></a>  
<a name="l5007"><span class="linenum">5007</span></a>      <span class="comment">/**</span>
<a name="l5008"><span class="linenum">5008</span></a>  <span class="comment">     * Magic method that simply uses {@link set();} to store something in the cache</span>
<a name="l5009"><span class="linenum">5009</span></a>  <span class="comment">     *</span>
<a name="l5010"><span class="linenum">5010</span></a>  <span class="comment">     * @param string|int $key</span>
<a name="l5011"><span class="linenum">5011</span></a>  <span class="comment">     * @param mixed $information</span>
<a name="l5012"><span class="linenum">5012</span></a>  <span class="comment">     */</span>
<a name="l5013"><span class="linenum">5013</span></a>      public function <a class="function" onClick="logFunction('__set')" href="../_functions/__set.html" onMouseOver="funcPopup(event,'__set')">__set</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('information')" href="../_variables/information.html">$information</a>) {
<a name="l5014"><span class="linenum">5014</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('information')" href="../_variables/information.html">$information</a>);
<a name="l5015"><span class="linenum">5015</span></a>      }
<a name="l5016"><span class="linenum">5016</span></a>  
<a name="l5017"><span class="linenum">5017</span></a>      <span class="comment">/**</span>
<a name="l5018"><span class="linenum">5018</span></a>  <span class="comment">     * Sets some information against the cache (session) for later retrieval</span>
<a name="l5019"><span class="linenum">5019</span></a>  <span class="comment">     *</span>
<a name="l5020"><span class="linenum">5020</span></a>  <span class="comment">     * @param string|int $key</span>
<a name="l5021"><span class="linenum">5021</span></a>  <span class="comment">     * @param mixed $information</span>
<a name="l5022"><span class="linenum">5022</span></a>  <span class="comment">     */</span>
<a name="l5023"><span class="linenum">5023</span></a>      public function <a class="function" onClick="logFunction('set')" href="../_functions/set.html" onMouseOver="funcPopup(event,'set')">set</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('information')" href="../_variables/information.html">$information</a>) {
<a name="l5024"><span class="linenum">5024</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l5025"><span class="linenum">5025</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_session_cache_initialised')" href="../_functions/ensure_session_cache_initialised.html" onMouseOver="funcPopup(event,'ensure_session_cache_initialised')">ensure_session_cache_initialised</a>();
<a name="l5026"><span class="linenum">5026</span></a>          <a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('information')" href="../_variables/information.html">$information</a> = <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('information')" href="../_variables/information.html">$information</a>);
<a name="l5027"><span class="linenum">5027</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]= array(self::CACHETIME=&gt;<a class="phpfunction" onClick="logFunction('time')" href="../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), self::CACHEUSERID=&gt;<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, self::CACHEVALUE=&gt;<a class="var it4931" onMouseOver="hilite(4931)" onMouseOut="lolite()" onClick="logVariable('information')" href="../_variables/information.html">$information</a>);
<a name="l5028"><span class="linenum">5028</span></a>      }
<a name="l5029"><span class="linenum">5029</span></a>      <span class="comment">/**</span>
<a name="l5030"><span class="linenum">5030</span></a>  <span class="comment">     * Check the existence of the identifier in the cache</span>
<a name="l5031"><span class="linenum">5031</span></a>  <span class="comment">     *</span>
<a name="l5032"><span class="linenum">5032</span></a>  <span class="comment">     * @param string|int $key</span>
<a name="l5033"><span class="linenum">5033</span></a>  <span class="comment">     * @return bool</span>
<a name="l5034"><span class="linenum">5034</span></a>  <span class="comment">     */</span>
<a name="l5035"><span class="linenum">5035</span></a>      public function <a class="function" onClick="logFunction('cached')" href="../_functions/cached.html" onMouseOver="funcPopup(event,'cached')">cached</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>) {
<a name="l5036"><span class="linenum">5036</span></a>          global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l5037"><span class="linenum">5037</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_session_cache_initialised')" href="../_functions/ensure_session_cache_initialised.html" onMouseOver="funcPopup(event,'ensure_session_cache_initialised')">ensure_session_cache_initialised</a>();
<a name="l5038"><span class="linenum">5038</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a>) || !<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]) || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>][self::CACHEUSERID]!=<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a> || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>][self::CACHETIME] &lt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('timeout')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/timeout.html">timeout</a>) {
<a name="l5039"><span class="linenum">5039</span></a>              return false;
<a name="l5040"><span class="linenum">5040</span></a>          }
<a name="l5041"><span class="linenum">5041</span></a>          return true;
<a name="l5042"><span class="linenum">5042</span></a>      }
<a name="l5043"><span class="linenum">5043</span></a>      <span class="comment">/**</span>
<a name="l5044"><span class="linenum">5044</span></a>  <span class="comment">     * Compare something to it's equivilant in the cache</span>
<a name="l5045"><span class="linenum">5045</span></a>  <span class="comment">     *</span>
<a name="l5046"><span class="linenum">5046</span></a>  <span class="comment">     * @param string $key</span>
<a name="l5047"><span class="linenum">5047</span></a>  <span class="comment">     * @param mixed $value</span>
<a name="l5048"><span class="linenum">5048</span></a>  <span class="comment">     * @param bool $serialise Whether to serialise the value before comparison</span>
<a name="l5049"><span class="linenum">5049</span></a>  <span class="comment">     *              this should only be set to false if the value is already</span>
<a name="l5050"><span class="linenum">5050</span></a>  <span class="comment">     *              serialised</span>
<a name="l5051"><span class="linenum">5051</span></a>  <span class="comment">     * @return bool If the value is the same false if it is not set or doesn't match</span>
<a name="l5052"><span class="linenum">5052</span></a>  <span class="comment">     */</span>
<a name="l5053"><span class="linenum">5053</span></a>      public function <a class="function" onClick="logFunction('compare')" href="../_functions/compare.html" onMouseOver="funcPopup(event,'compare')">compare</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>, <a class="var it37565" onMouseOver="hilite(37565)" onMouseOut="lolite()" onClick="logVariable('serialise')" href="../_variables/serialise.html">$serialise</a> = true) {
<a name="l5054"><span class="linenum">5054</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cached')" href="../_functions/cached.html" onMouseOver="funcPopup(event,'cached')">cached</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>)) {
<a name="l5055"><span class="linenum">5055</span></a>              if (<a class="var it37565" onMouseOver="hilite(37565)" onMouseOut="lolite()" onClick="logVariable('serialise')" href="../_variables/serialise.html">$serialise</a>) {
<a name="l5056"><span class="linenum">5056</span></a>                  <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a> = <a class="phpfunction" onClick="logFunction('serialize')" href="../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>);
<a name="l5057"><span class="linenum">5057</span></a>              }
<a name="l5058"><span class="linenum">5058</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>][self::CACHEVALUE] === <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l5059"><span class="linenum">5059</span></a>                  return true;
<a name="l5060"><span class="linenum">5060</span></a>              }
<a name="l5061"><span class="linenum">5061</span></a>          }
<a name="l5062"><span class="linenum">5062</span></a>          return false;
<a name="l5063"><span class="linenum">5063</span></a>      }
<a name="l5064"><span class="linenum">5064</span></a>      <span class="comment">/**</span>
<a name="l5065"><span class="linenum">5065</span></a>  <span class="comment">     * Wipes the entire cache, good to force regeneration</span>
<a name="l5066"><span class="linenum">5066</span></a>  <span class="comment">     */</span>
<a name="l5067"><span class="linenum">5067</span></a>      public function <a class="function" onClick="logFunction('clear')" href="../_functions/clear.html" onMouseOver="funcPopup(event,'clear')">clear</a>() {
<a name="l5068"><span class="linenum">5068</span></a>          global <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>;
<a name="l5069"><span class="linenum">5069</span></a>          unset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('navcache')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/navcache.html">navcache</a>);
<a name="l5070"><span class="linenum">5070</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a> = null;
<a name="l5071"><span class="linenum">5071</span></a>      }
<a name="l5072"><span class="linenum">5072</span></a>      <span class="comment">/**</span>
<a name="l5073"><span class="linenum">5073</span></a>  <span class="comment">     * Checks all cache entries and removes any that have expired, good ole cleanup</span>
<a name="l5074"><span class="linenum">5074</span></a>  <span class="comment">     */</span>
<a name="l5075"><span class="linenum">5075</span></a>      protected function <a class="function" onClick="logFunction('garbage_collection')" href="../_functions/garbage_collection.html" onMouseOver="funcPopup(event,'garbage_collection')">garbage_collection</a>() {
<a name="l5076"><span class="linenum">5076</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a>)) {
<a name="l5077"><span class="linenum">5077</span></a>              return true;
<a name="l5078"><span class="linenum">5078</span></a>          }
<a name="l5079"><span class="linenum">5079</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>=&gt;<a class="var it37566" onMouseOver="hilite(37566)" onMouseOut="lolite()" onClick="logVariable('cachedinfo')" href="../_variables/cachedinfo.html">$cachedinfo</a>) {
<a name="l5080"><span class="linenum">5080</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it37566" onMouseOver="hilite(37566)" onMouseOut="lolite()" onClick="logVariable('cachedinfo')" href="../_variables/cachedinfo.html">$cachedinfo</a>) &amp;&amp; <a class="var it37566" onMouseOver="hilite(37566)" onMouseOut="lolite()" onClick="logVariable('cachedinfo')" href="../_variables/cachedinfo.html">$cachedinfo</a>[self::CACHETIME]&lt;<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('timeout')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/timeout.html">timeout</a>) {
<a name="l5081"><span class="linenum">5081</span></a>                  unset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('session')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/session.html">session</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>]);
<a name="l5082"><span class="linenum">5082</span></a>              }
<a name="l5083"><span class="linenum">5083</span></a>          }
<a name="l5084"><span class="linenum">5084</span></a>      }
<a name="l5085"><span class="linenum">5085</span></a>  
<a name="l5086"><span class="linenum">5086</span></a>      <span class="comment">/**</span>
<a name="l5087"><span class="linenum">5087</span></a>  <span class="comment">     * Marks the cache as being volatile (likely to change)</span>
<a name="l5088"><span class="linenum">5088</span></a>  <span class="comment">     *</span>
<a name="l5089"><span class="linenum">5089</span></a>  <span class="comment">     * Any caches marked as volatile will be destroyed at the on shutdown by</span>
<a name="l5090"><span class="linenum">5090</span></a>  <span class="comment">     * {@link navigation_node::destroy_volatile_caches()} which is registered</span>
<a name="l5091"><span class="linenum">5091</span></a>  <span class="comment">     * as a shutdown function if any caches are marked as volatile.</span>
<a name="l5092"><span class="linenum">5092</span></a>  <span class="comment">     *</span>
<a name="l5093"><span class="linenum">5093</span></a>  <span class="comment">     * @param bool $setting True to destroy the cache false not too</span>
<a name="l5094"><span class="linenum">5094</span></a>  <span class="comment">     */</span>
<a name="l5095"><span class="linenum">5095</span></a>      public function <a class="function" onClick="logFunction('volatile')" href="../_functions/volatile.html" onMouseOver="funcPopup(event,'volatile')">volatile</a>(<a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a> = true) {
<a name="l5096"><span class="linenum">5096</span></a>          if (self::<a class="var it37563" onMouseOver="hilite(37563)" onMouseOut="lolite()" onClick="logVariable('volatilecaches')" href="../_variables/volatilecaches.html">$volatilecaches</a>===null) {
<a name="l5097"><span class="linenum">5097</span></a>              self::<a class="var it37563" onMouseOver="hilite(37563)" onMouseOut="lolite()" onClick="logVariable('volatilecaches')" href="../_variables/volatilecaches.html">$volatilecaches</a> = array();
<a name="l5098"><span class="linenum">5098</span></a>              <a class="class" onClick="logClass('core_shutdown_manager')" href="../_classes/core_shutdown_manager.html" onMouseOver="classPopup(event,'core_shutdown_manager')">core_shutdown_manager</a>::<a class="function" onClick="logFunction('register_function')" href="../_functions/register_function.html" onMouseOver="funcPopup(event,'register_function')">register_function</a>(array('navigation_cache','destroy_volatile_caches'));
<a name="l5099"><span class="linenum">5099</span></a>          }
<a name="l5100"><span class="linenum">5100</span></a>  
<a name="l5101"><span class="linenum">5101</span></a>          if (<a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a>) {
<a name="l5102"><span class="linenum">5102</span></a>              self::<a class="var it37563" onMouseOver="hilite(37563)" onMouseOut="lolite()" onClick="logVariable('volatilecaches')" href="../_variables/volatilecaches.html">$volatilecaches</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/area.html">area</a>] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/area.html">area</a>;
<a name="l5103"><span class="linenum">5103</span></a>          } else if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/area.html">area</a>, self::<a class="var it37563" onMouseOver="hilite(37563)" onMouseOut="lolite()" onClick="logVariable('volatilecaches')" href="../_variables/volatilecaches.html">$volatilecaches</a>)) {
<a name="l5104"><span class="linenum">5104</span></a>              unset(self::<a class="var it37563" onMouseOver="hilite(37563)" onMouseOut="lolite()" onClick="logVariable('volatilecaches')" href="../_variables/volatilecaches.html">$volatilecaches</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('area')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/area.html">area</a>]);
<a name="l5105"><span class="linenum">5105</span></a>          }
<a name="l5106"><span class="linenum">5106</span></a>      }
<a name="l5107"><span class="linenum">5107</span></a>  
<a name="l5108"><span class="linenum">5108</span></a>      <span class="comment">/**</span>
<a name="l5109"><span class="linenum">5109</span></a>  <span class="comment">     * Destroys all caches marked as volatile</span>
<a name="l5110"><span class="linenum">5110</span></a>  <span class="comment">     *</span>
<a name="l5111"><span class="linenum">5111</span></a>  <span class="comment">     * This function is static and works in conjunction with the static volatilecaches</span>
<a name="l5112"><span class="linenum">5112</span></a>  <span class="comment">     * property of navigation cache.</span>
<a name="l5113"><span class="linenum">5113</span></a>  <span class="comment">     * Because this function is static it manually resets the cached areas back to an</span>
<a name="l5114"><span class="linenum">5114</span></a>  <span class="comment">     * empty array.</span>
<a name="l5115"><span class="linenum">5115</span></a>  <span class="comment">     */</span>
<a name="l5116"><span class="linenum">5116</span></a>      public static function <a class="function" onClick="logFunction('destroy_volatile_caches')" href="../_functions/destroy_volatile_caches.html" onMouseOver="funcPopup(event,'destroy_volatile_caches')">destroy_volatile_caches</a>() {
<a name="l5117"><span class="linenum">5117</span></a>          global <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>;
<a name="l5118"><span class="linenum">5118</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(self::<a class="var it37563" onMouseOver="hilite(37563)" onMouseOut="lolite()" onClick="logVariable('volatilecaches')" href="../_variables/volatilecaches.html">$volatilecaches</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(self::<a class="var it37563" onMouseOver="hilite(37563)" onMouseOut="lolite()" onClick="logVariable('volatilecaches')" href="../_variables/volatilecaches.html">$volatilecaches</a>)&gt;0) {
<a name="l5119"><span class="linenum">5119</span></a>              foreach (self::<a class="var it37563" onMouseOver="hilite(37563)" onMouseOut="lolite()" onClick="logVariable('volatilecaches')" href="../_variables/volatilecaches.html">$volatilecaches</a> as <a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('area')" href="../_variables/area.html">$area</a>) {
<a name="l5120"><span class="linenum">5120</span></a>                  <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('navcache')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/navcache.html">navcache</a>-&gt;{<a class="var it1628" onMouseOver="hilite(1628)" onMouseOut="lolite()" onClick="logVariable('area')" href="../_variables/area.html">$area</a>} = array();
<a name="l5121"><span class="linenum">5121</span></a>              }
<a name="l5122"><span class="linenum">5122</span></a>          } else {
<a name="l5123"><span class="linenum">5123</span></a>              <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('navcache')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/navcache.html">navcache</a> = new stdClass;
<a name="l5124"><span class="linenum">5124</span></a>          }
<a name="l5125"><span class="linenum">5125</span></a>      }
<a name="l5126"><span class="linenum">5126</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'load_activity': ['load_activity', 'Loads the navigation structure for the given activity into the activities node. ', [['lib','navigationlib.php',2058]], 3],
'groups_get_user_groups': ['groups_get_user_groups', 'Returns info about user\'s groups in course. ', [['lib','grouplib.php',290]], 20],
'check_access': ['check_access', 'Verifies current user\'s access to this part_of_admin_tree. ', [['lib','adminlib.php',695],['lib','adminlib.php',982],['lib','adminlib.php',1290],['lib','adminlib.php',1466]], 5],
'title': ['title', '', [['admin/tool/health','index.php',142],['admin/tool/health','index.php',157],['admin/tool/health','index.php',181],['admin/tool/health','index.php',205],['admin/tool/health','index.php',226],['admin/tool/health','index.php',245],['admin/tool/health','index.php',264],['admin/tool/health','index.php',310],['admin/tool/health','index.php',331],['admin/tool/health','index.php',417],['admin/tool/health','index.php',441],['admin/tool/health','index.php',478],['admin/tool/health','index.php',503],['admin/tool/health','index.php',551],['admin/tool/health','index.php',596],['admin/tool/health','index.php',673],['admin/tool/health','index.php',774],['lib','navigationlib.php',486]], 9],
'require_course_login': ['require_course_login', 'Weaker version of require_login() ', [['lib','moodlelib.php',2887]], 68],
'get_content': ['get_content', 'Parent class version of this function simply returns NULL This should be implemented by the derived class to return the content object. ', [['blocks','moodleblock.class.php',143],['blocks/login','block_login.php',34],['blocks/participants','block_participants.php',30],['blocks/feedback','block_feedback.php',40],['blocks/quiz_results','block_quiz_results.php',52],['blocks/community','block_community.php',50],['blocks/mnet_hosts','block_mnet_hosts.php',42],['blocks/course_overview','block_course_overview.php',45],['blocks/mentees','block_mentees.php',43],['blocks/myprofile','block_myprofile.php',47],['blocks/social_activities','block_social_activities.php',34],['blocks/calendar_month','block_calendar_month.php',33],['lib','modinfolib.php',1250],['blocks/navigation','block_navigation.php',131],['blocks/site_main_menu','block_site_main_menu.php',34],['blocks/blog_tags','block_blog_tags.php',62],['blocks/private_files','block_private_files.php',43],['blocks/news_items','block_news_items.php',37],['blocks/messages','block_messages.php',30],['blocks/course_summary','block_course_summary.php',40],['lib/simplepie/library/SimplePie','Item.php',372],['blocks/tag_youtube','block_tag_youtube.php',48],['mod/workshop','locallib.php',3857],['blocks/completionstatus','block_completionstatus.php',44],['blocks/badges','block_badges.php',69],['blocks/activity_modules','block_activity_modules.php',33],['blocks/search_forums','block_search_forums.php',30],['blocks/section_links','block_section_links.php',53],['blocks/blog_menu','block_blog_menu.php',52],['blocks/selfcompletion','block_selfcompletion.php',45],['blocks/online_users','block_online_users.php',39],['blocks/activity_results','block_activity_results.php',129],['blocks/blog_recent','block_blog_recent.php',46],['blocks/admin_bookmarks','block_admin_bookmarks.php',69],['blocks/glossary_random','block_glossary_random.php',168],['blocks/course_list','block_course_list.php',37],['blocks/tags','block_tags.php',56],['lib/filestorage','stored_file.php',451],['lib/filebrowser','virtual_root_file.php',106],['blocks/recent_activity','block_recent_activity.php',50],['blocks/calendar_upcoming','block_calendar_upcoming.php',33],['blocks/html','block_html.php',47],['lib','navigationlib.php',566],['blocks/comments','block_comments.php',48],['blocks/settings','block_settings.php',102],['blocks/tag_flickr','block_tag_flickr.php',46],['blocks/rss_client','block_rss_client.php',46]], 62],
'add_course': ['add_course', 'Adds the given course to the navigation structure. ', [['lib','navigationlib.php',2388]], 16],
'ignore_active': ['ignore_active', 'Turn on/off ignore active ', [['lib','navigationlib.php',3117]], 4],
'initialise': ['initialise', 'Initialises the cache. ', [['cache/stores/memcached','lib.php',203],['cache/stores/static','lib.php',192],['cache/stores/memcache','lib.php',198],['cache/stores/session','lib.php',196],['cache/classes','dummystore.php',105],['cache/stores/mongodb','lib.php',194],['mnet/xmlrpc','xmlparser.php',24],['cache/stores/file','lib.php',258],['lib','navigationlib.php',1064],['lib','navigationlib.php',2829],['lib','navigationlib.php',3426],['lib','navigationlib.php',4787]], 27],
'show_my_categories': ['show_my_categories', 'Returns true if we should show categories in the My Courses branch. ', [['lib','navigationlib.php',1390]], 2],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1318]], 854],
'load_course': ['load_course', 'Loads the given course into the navigation ', [['lib','navigationlib.php',1794]], 1],
'type': ['type', 'TYPE ', [['lib/phpexcel/PHPExcel/Calculation','Functions.php',543],['lib','navigationlib.php',900]], 131],
'data_for_js': ['data_for_js', '!!!!!!DEPRECATED!!!!!! please use js_init_call() for everything now. ', [['lib','outputrequirementslib.php',1202]], 9],
'user_mygrades_url': ['user_mygrades_url', 'Returns the url to use for the "Grades" link in the user navigation. ', [['user','lib.php',1032]], 5],
'enrol_get_users_courses': ['enrol_get_users_courses', 'Returns list of courses user is enrolled into. (Note: use enrol_get_all_users_courses if you want to use the list wihtout any cap checks ) ', [['lib','enrollib.php',679]], 18],
'register_function': ['register_function', 'Register custom shutdown function. ', [['lib/classes','shutdown_manager.php',53]], 11],
'load_stealth_activity': ['load_stealth_activity', 'Loads a stealth module from unavailable section ', [['lib','navigationlib.php',2026]], 1],
'on': ['on', '', [['lib/requirejs','require.js',506]], 3494],
'extend_for_user': ['extend_for_user', 'Extends the navigation for the given user. ', [['lib','navigationlib.php',2371],['lib','navigationlib.php',4080]], 25],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',2854]], 853],
'get_format_options': ['get_format_options', 'Returns the format options stored for this course or course section ', [['course/format','lib.php',555]], 18],
'set_expandable': ['set_expandable', 'Set the expandable items in the array so that we have enough information to attach AJAX events ', [['lib','navigationlib.php',4829]], 1],
'count_records': ['count_records', 'Count the records in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1717]], 1399],
'load_user_settings': ['load_user_settings', 'Loads the user settings block of the settings nav ', [['lib','navigationlib.php',4031]], 1],
'make_inactive': ['make_inactive', 'Marks a node as inactive and recusised back to the base of the tree doing the same to all parents. ', [['lib','navigationlib.php',431]], 11],
'add_course_essentials': ['add_course_essentials', 'Adds essential course nodes to the navigation for the given course. ', [['lib','navigationlib.php',2528]], 5],
'find_all_of_type': ['find_all_of_type', 'Finds all nodes of a given type (recursive) ', [['lib','navigationlib.php',621]], 4],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3234],['mod/assign','locallib.php',3440]], 532],
'portfolio_has_visible_instances': ['portfolio_has_visible_instances', 'Return whether there are visible instances in portfolio. ', [['lib','portfoliolib.php',536]], 1],
'get_plugin_list_with_function': ['get_plugin_list_with_function', 'Get a list of all the plugins of a given type that define a certain API function in a certain file. The plugin component names and function names are returned. ', [['lib','moodlelib.php',7009]], 15],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 315],
'get_preload_record_columns_sql': ['get_preload_record_columns_sql', 'Returns all fields necessary for context preloading from user $rec. ', [['lib','accesslib.php',6015]], 54],
'param': ['param', 'Returns a placeholder for query parameters e.g. $DB->Param(\'a\') will return - \'?\' for most databases - \':a\' for Oracle - \'$1\', \'$2\', etc. for PostgreSQL ', [['lib/adodb','adodb.inc.php',815],['lib/adodb/drivers','adodb-postgres64.inc.php',591],['lib','weblib.php',455],['lib/adodb/drivers','adodb-oci8po.inc.php',37],['lib/adodb/drivers','adodb-db2oci.inc.php',166],['lib/adodb/drivers','adodb-oci8.inc.php',1014]], 641],
'getiterator': ['getiterator', 'Returns an iterator for the link set ', [['lib/zend/Zend/Service/Simpy','LinkSet.php',64],['lib/zend/Zend/Rest/Client','Result.php',165],['lib/adodb','adodb.inc.php',2848],['lib/adodb','adodb.inc.php',2965],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',175],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',97],['lib/classes/event','base.php',873],['lib/horde/framework/Horde/Support','Stub.php',135],['lib/zend/Zend/Service/Simpy','WatchlistFilterSet.php',58],['lib','modinfolib.php',1172],['lib','modinfolib.php',2672],['lib/zend/Zend/Http','CookieJar.php',373],['lib/horde/framework/Horde','Variables.php',391],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',135],['lib/zend/Zend/Service/Simpy','TagSet.php',64],['lib/horde/framework/Horde/Mime','Related.php',146],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',153],['lib','accesslib.php',5282],['lib/horde/framework/Horde/Support','Array.php',156],['lib/zend/Zend/Service/Simpy','WatchlistSet.php',63],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',202],['lib/zend/Zend/Service/Simpy','NoteSet.php',64],['lib','navigationlib.php',947],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',125],['lib','coursecatlib.php',180],['lib','coursecatlib.php',2875],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',146]], 5],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'get_context_name': ['get_context_name', 'Returns human readable context identifier. ', [['lib','accesslib.php',5588],['lib','accesslib.php',6138],['lib','accesslib.php',6380],['lib','accesslib.php',6567],['lib','accesslib.php',6799],['lib','accesslib.php',7021],['lib','accesslib.php',7263]], 53],
'get_recordset': ['get_recordset', 'Get a number of records as a moodle_recordset where all the given conditions met. ', [['lib/dml','moodle_database.php',1113]], 95],
'__wakeup': ['__wakeup', '', [['lib/adodb','adodb-active-recordx.inc.php',182],['lib/zend/Zend/Server/Reflection/Function','Abstract.php',486],['lib/zend/Zend/Server/Reflection','Method.php',96],['mod/data','locallib.php',265],['lib/zend/Zend/Server/Reflection','Class.php',186],['backup/util/loggers','file_logger.class.php',61],['lib/zend/Zend/Service/Technorati','ResultSet.php',274],['lib','navigationlib.php',495],['portfolio/mahara','lib.php',57],['lib/adodb','adodb-active-record.inc.php',141]], 0],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as a moodle_recordset using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','oci_native_moodle_database.php',1065],['lib/dml','sqlsrv_native_moodle_database.php',761],['lib/dml','mssql_native_moodle_database.php',687],['lib/dml','mysqli_native_moodle_database.php',985],['lib/dml/tests','dml_test.php',5423],['lib/dml','pdo_moodle_database.php',251]], 279],
'get_category_or_system_context': ['get_category_or_system_context', 'Return the course category context for the category with id $categoryid, except that if $categoryid is 0, return the system context. ', [['course','lib.php',1355]], 5],
'js_init_code': ['js_init_code', 'Add short static javascript code fragment to page footer. This is intended primarily for loading of js modules and initialising page layout. Ideally the JS code fragment should be stored in plugin renderer so that themes may override it. ', [['lib','outputrequirementslib.php',1074]], 7],
'count_all': ['count_all', 'Returns number of ALL categories in the system regardless if they are visible to current user or not ', [['lib','coursecatlib.php',644]], 6],
'get_cm': ['get_cm', 'Obtains a single course-module object (for a course-module that is on this course). ', [['lib','modinfolib.php',222],['mod/quiz','attemptlib.php',215],['mod/quiz','attemptlib.php',701],['comment','lib.php',1006]], 96],
'ensure_session_cache_initialised': ['ensure_session_cache_initialised', 'Used to set up the cache within the SESSION. ', [['lib','navigationlib.php',4974]], 2],
'load_administration_settings': ['load_administration_settings', 'Load the site administration tree ', [['lib','navigationlib.php',3609]], 6],
'admin_get_root': ['admin_get_root', 'Returns the reference to admin tree root ', [['lib','adminlib.php',6742]], 27],
'hide': ['hide', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/contextmenu','editor_plugin_src.js',71],['lib/xhprof/xhprof_html/jquery','jquery.tooltip.js',269],['repository','lib.php',2059],['lib/google/src/Google/Service','GamesManagement.php',559],['lib','navigationlib.php',697],['lib','coursecatlib.php',1954]], 750],
'question_extend_settings_navigation': ['question_extend_settings_navigation', 'Adds question bank setting links to the given navigation node if caps are met. ', [['lib','questionlib.php',1407]], 3],
'load_block_settings': ['load_block_settings', 'Loads block specific settings in the navigation ', [['lib','navigationlib.php',4505]], 1],
'load_all_categories': ['load_all_categories', 'Loads all categories (top level or if an id is specified for that category) ', [['lib','navigationlib.php',1608]], 3],
'cached': ['cached', 'Check the existence of the identifier in the cache ', [['lib','navigationlib.php',5029]], 39],
'has_any_capability': ['has_any_capability', 'Check if the user has any one of several capabilities from a list. ', [['lib','accesslib.php',498]], 56],
'last': ['last', '', [['lib/evalmath','evalmath.class.php',465],['lib/phpexcel/PHPExcel/Calculation/Token','Stack.php',94],['lib/mustache/src/Mustache','Context.php',72],['lib','navigationlib.php',891]], 35],
'load_front_page_settings': ['load_front_page_settings', 'This function loads all of the front page settings into the settings navigation. This function is called when the user is on the front page, or $COURSE==$SITE ', [['lib','navigationlib.php',4637]], 2],
'get_expandable': ['get_expandable', 'Returns an array of expandable nodes ', [['lib','navigationlib.php',3032]], 1],
'set_userid_for_parent_checks': ['set_userid_for_parent_checks', 'Mutator to set userid to allow parent to see child\'s profile page navigation. See MDL-25805 for initial issue. Linked to it is an issue explaining why this is a REALLY UGLY HACK thats not for you to use! ', [['lib','navigationlib.php',1051]], 8],
'trim_if_empty': ['trim_if_empty', 'Removes this node if it is empty ', [['lib','navigationlib.php',636]], 7],
'get_overridable_roles': ['get_overridable_roles', 'Gets a list of roles that this user can override in this context. ', [['lib','accesslib.php',3516]], 14],
'get_realuser': ['get_realuser', 'Returns the $USER object ignoring current login-as session ', [['lib/classes/session','manager.php',794]], 10],
'load_category': ['load_category', 'Loads the requested category into the pages categories array. ', [['lib','pagelib.php',1785],['lib','navigationlib.php',2929]], 4],
'show_categories': ['show_categories', 'Returns true if courses should be shown within categories on the navigation. ', [['lib','navigationlib.php',1367]], 3],
'convert': ['convert', '', [['backup/cc/cc_lib','cc_converter_basiclti.php',36],['backup/cc/cc_lib','cc_converter_page.php',35],['backup/cc/cc_lib','cc_converter_lti.php',36],['backup/cc/cc_lib','cc_converter_url.php',36],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',63],['backup/cc/cc_lib','cc_converter_resource.php',34],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',18498],['backup/cc/cc_lib','cc_converter_quiz.php',40],['lib/lessphp','Functions.php',450],['lib/classes','text.php',162],['backup/converter','convertlib.php',119],['backup/cc/cc_lib','cc_converter_label.php',33],['backup/controller','restore_controller.class.php',437],['lib','wiki_to_markdown.php',315],['backup/cc/cc_lib','cc_convert_moodle2.php',29],['backup/cc/cc_lib','cc_converter_forum.php',36],['lib','navigationlib.php',4819],['backup/cc/cc_lib','cc_converter_folder.php',33]], 138],
'make': ['make', '', [['mod/quiz/accessrule/delaybetweenattempts','rule.php',40],['admin/tool/generator/classes','site_backend.php',89],['mod/quiz/accessrule/numattempts','rule.php',40],['lib/htmlpurifier/HTMLPurifier','AttrDef.php',67],['mod/quiz/accessrule/securewindow','rule.php',55],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',52],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',45],['mod/quiz/accessrule/ipaddress','rule.php',40],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',96],['lib/yuilib/2in3/2.9.0/build/yui2-logger','yui2-logger.js',655],['mod/quiz/accessrule/safebrowser','rule.php',40],['admin/tool/generator/classes','course_backend.php',202],['backup/util/ui','backup_ui_setting.class.php',234],['admin/tool/assignmentupgrade','locallib.php',110],['cache/classes','loaders.php',163],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',38],['mod/quiz/accessrule','accessrulebase.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',60],['mod/quiz/accessrule/timelimit','rule.php',41],['mod/quiz/accessrule/openclosedate','rule.php',40],['lib/yuilib/2in3/2.9.0/build/yui2-logger','yui2-logger-debug.js',655],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',64],['lib/htmlpurifier/HTMLPurifier','Length.php',52],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',33],['mod/quiz/accessrule/password','rule.php',40]], 163],
'clear': ['clear', 'Clears all fetch results. ', [['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',120],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',316],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',260],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',308],['lib/phpunit/classes','event_sink.php',81],['lib/phpexcel/PHPExcel/Calculation/Token','Stack.php',107],['lib/google/src/Google/Service','AppState.php',134],['lib/alfresco/Service','Session.php',173],['lib/horde/framework/Horde/Support','Array.php',106],['lib/horde/framework/Horde/Imap/Client','Cache.php',250],['lib/google/src/Google/Service','Calendar.php',1214],['lib/google/src/Google/Service','Tasks.php',412],['lib/phpunit/classes','phpmailer_sink.php',81],['backup/cc/cc_lib/gral_lib','cssparser.php',32],['lib/phpunit/classes','message_sink.php',79],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',74],['lib','navigationlib.php',5064],['lib/phpexcel/PHPExcel','HashTable.php',124],['lib/mustache/src/Mustache','HelperCollection.php',153],['webservice/amf/testclient','AMFTester.mxml',345],['lib/phpexcel/PHPExcel/CalcEngine','CyclicReferenceStack.php',82],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',315]], 188],
'prepend': ['prepend', 'In CSS content, prepend a path to relative URIs ', [['lib/minify/lib/Minify/CSS','UriRewriter.php',79],['lib','navigationlib.php',3338],['lib','navigationlib.php',3563]], 96],
'set_parent': ['set_parent', 'Set the parent of the optigroup and, at the same time, process all the condition params in all the childs ', [['backup/util/structure','base_optigroup.class.php',118],['lib/grade','grade_item.php',1318],['lib','listlib.php',183],['lib','listlib.php',624],['backup/util/structure','base_final_element.class.php',62],['backup/util/structure','backup_optigroup_element.class.php',184],['lib/grade','grade_category.php',2172],['lib','navigationlib.php',679]], 28],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1715],['lib/google/src/Google/Service','Games.php',2099]], 949],
'load_courses_other': ['load_courses_other', 'They\'ve expanded the general \'courses\' branch. ', [['lib','navigationlib.php',2922]], 1],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'record_exists': ['record_exists', 'Test whether a record exists in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1768]], 735],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1035],['lib/dml','moodle_database.php',1457]], 140],
'set': ['set', '', [['lib/adodb','adodb-active-recordx.inc.php',620],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',286],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',31],['lib/portfolio','plugin.php',647],['lib/portfolio','exporter.php',154],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',167],['lib/pear/Net/GeoIP','Location.php',125],['cache/classes','interfaces.php',68],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',85],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',39],['lib/google/src/Google/Cache','Memcache.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',162],['cache','disabledlib.php',81],['grade/report/singleview/classes/local/ui','finalgrade.php',136],['cache/stores/memcached','lib.php',320],['lib/google/src/Google/Service','YouTube.php',3122],['lib/google/src/Google/Service','YouTube.php',3481],['lib/zend/Zend','Registry.php',153],['lib/phpmailer','class.phpmailer.php',3144],['grade/report/singleview/classes/local/ui','feedback.php',102],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',114],['lib/google/src/Google/Service','ShoppingContent.php',919],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',51],['grade/report/singleview/classes/local/ui','override.php',95],['lib/horde/framework/Horde','Variables.php',189],['lib/htmlpurifier/HTMLPurifier','Config.php',289],['cache/stores/static','lib.php',265],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',24],['lib/portfolio','caller.php',187],['lib/zend/Zend','Date.php',1056],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',47],['cache/stores/memcache','lib.php',358],['lib','filelib.php',3615],['cache/stores/session','lib.php',290],['cache/classes','dummystore.php',170],['lib/horde/framework/Horde/Imap/Client','Cache.php',127],['grade/report/singleview/classes/local/ui','exclude.php',77],['cache/classes','loaders.php',484],['cache/classes','loaders.php',1370],['cache/classes','loaders.php',1815],['cache/stores/mongodb','lib.php',305],['lib/zend/Zend/Service','Audioscrobbler.php',125],['cache/stores/file','lib.php',425],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',60],['lib/google/src/Google/Cache','Null.php',42],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',41],['lib/google/src/Google/Cache','File.php',84],['lib','navigationlib.php',5017],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',41],['lib/google/src/Google/Cache','Apc.php',80],['lib/adodb','adodb-active-record.inc.php',569],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',203]], 4687],
'garbage_collection': ['garbage_collection', 'Checks all cache entries and removes any that have expired, good ole cleanup ', [['lib','navigationlib.php',5072]], 1],
'get_title': ['get_title', 'Returns the class $title var value. ', [['blocks','moodleblock.class.php',155],['question/classes/bank','checkbox_column.php',36],['completion/criteria','completion_criteria_unenrol.php',92],['lib','authlib.php',510],['completion/criteria','completion_criteria_grade.php',129],['question/classes/bank','modifier_name_column.php',31],['completion/criteria','completion_criteria_activity.php',165],['completion/criteria','completion_criteria_course.php',120],['question/classes/bank','question_name_column.php',32],['question/classes/bank','question_text_row.php',39],['lib/simplepie/library/SimplePie','Enclosure.php',860],['lib/simplepie/library','SimplePie.php',1969],['question/classes/bank','action_column_base.php',28],['enrol','locallib.php',1388],['lib/simplepie/library/SimplePie','Item.php',260],['lib','outputcomponents.php',2759],['completion/criteria','completion_criteria_role.php',118],['badges/criteria','award_criteria.php',162],['completion/criteria','completion_criteria_date.php',106],['enrol/manual','locallib.php',167],['enrol/manual','locallib.php',312],['completion/criteria','completion_criteria_self.php',109],['lib/simplepie/library/SimplePie','Source.php',104],['lib','navigationlib.php',580],['question/classes/bank','creator_name_column.php',32],['completion/criteria','completion_criteria_duration.php',153],['question/classes/bank','question_type_column.php',30]], 71],
'or': ['or', '', [['lib/tcpdf','LICENSE.TXT',69]], 552],
'find_active_node': ['find_active_node', 'Finds the active node. ', [['lib','navigationlib.php',524]], 7],
'__get': ['__get', '__get override. ', [['lib/alfresco/Service','Version.php',59],['lib/minify/lib/MrClay/Cli','Arg.php',170],['lib/adodb','adodb-active-recordx.inc.php',333],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',63],['lib/zend/Zend/Service/WindowsAzure/Storage','SignedIdentifier.php',82],['lib/zend/Zend/Gdata','Query.php',396],['lib/zend/Zend/Rest/Client','Result.php',93],['user/classes/output/myprofile','tree.php',144],['lib/zend/Zend/Server/Reflection/Function','Abstract.php',376],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',70],['lib/zend/Zend/Service/StrikeIron','Decorator.php',59],['course','lib.php',2960],['lib/pear/Net/GeoIP','Location.php',158],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobContainer.php',83],['lib/horde/framework/Horde/Imap/Client','Ids.php',92],['lib/classes/event','base.php',826],['lib/horde/framework/Horde/Support','Stub.php',41],['lib/zend/Zend/XmlRpc/Client','ServerProxy.php',67],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',84],['lib/zend/Zend/Validate','Abstract.php',175],['lib/horde/framework/Horde/Stream','TempString.php',65],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueMessage.php',89],['lib/zend/Zend/Gdata/App','FeedSourceParent.php',121],['lib','modinfolib.php',124],['lib','modinfolib.php',1153],['lib','modinfolib.php',2601],['calendar/tests','rrule_manager_tests.php',521],['lib/htmlpurifier/HTMLPurifier','Token.php',48],['lib/horde/framework/Horde/Mail/Rfc822','List.php',75],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',67],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',85],['lib/classes/message/inbound','handler.php',79],['user/classes/output/myprofile','node.php',106],['lib/classes/plugininfo','mod.php',43],['calendar','lib.php',2042],['lib/horde/framework/Horde/Imap/Client','Url.php',196],['lib/zend/Zend/Service','Twitter.php',216],['lib/zend/Zend/Gdata/App','Base.php',466],['mod/lesson','locallib.php',2031],['lib/horde/framework/Horde','Variables.php',150],['lib/zend/Zend/Gdata/App','BaseMediaSource.php',102],['lib/classes/plugininfo','base.php',168],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',92],['lib/zend/Zend/Service/Nirvanix','Response.php',81],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',85],['lib/horde/framework/Horde/Socket','Client.php',91],['lib','accesslib.php',5235],['lib/zend/Zend/Gdata/App','Feed.php',68],['lib/zend/Zend/Server/Reflection','Class.php',112],['lib/zend/Zend/Service/WindowsAzure/Storage','DynamicTableEntity.php',61],['lib/minify/lib','JSMinPlus.php',1686],['lib/classes/plugininfo','block.php',44],['lib/horde/framework/Horde/Support','Array.php',116],['lib/zend/Zend/Service/WindowsAzure/Storage','TableInstance.php',83],['user/classes/output/myprofile','category.php',185],['lib/horde/framework/Horde','Stream.php',74],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',108],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',56],['lib','adminlib.php',1072],['lib/google/src/Google','Model.php',46],['lib/horde/framework/Horde/Crypt','Blowfish.php',86],['lib/simplepie/library/SimplePie','IRI.php',168],['lib','pagelib.php',756],['lib/alfresco/Service','BaseObject.php',23],['lib/alfresco/Service','Node.php',251],['admin/tool/monitor/classes','subscription.php',54],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobInstance.php',104],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',255],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueInstance.php',79],['lib','navigationlib.php',4993],['lib/mustache/src/Mustache','HelperCollection.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',69],['lib/classes/message','message.php',187],['lib','coursecatlib.php',134],['lib','coursecatlib.php',2829],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',72],['lib/adodb','adodb-active-record.inc.php',269],['lib/horde/framework/Horde/Support','ObjectStub.php',41],['admin/tool/monitor/classes','rule.php',166],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',121]], 25],
'override_active_url': ['override_active_url', 'This sets the URL that the URL of new nodes get compared to when locating the active node. ', [['lib','navigationlib.php',237]], 89],
'load_course_settings': ['load_course_settings', 'This function loads the course settings that are available for the user ', [['lib','navigationlib.php',3723]], 3],
'is_category_fully_loaded': ['is_category_fully_loaded', 'Returns true if the category has already been loaded as have any child categories ', [['lib','navigationlib.php',2518]], 2],
'contains_active_node': ['contains_active_node', 'Checks if this node or any of its children contain the active node. ', [['lib','navigationlib.php',504]], 19],
'can_expand_course': ['can_expand_course', 'Checks if a user can expand a course in the navigation. ', [['lib','navigationlib.php',2490]], 2],
'admin_critical_warnings_present': ['admin_critical_warnings_present', 'Test if and critical warnings are present ', [['lib','adminlib.php',474]], 1],
'isloggedin': ['isloggedin', 'Return true, if session is currently logged into the backend server ', [['lib/zend/Zend/Service','LiveDocx.php',293],['lib','accesslib.php',1909]], 177],
'load_local_plugin_settings': ['load_local_plugin_settings', 'This function gives local plugins an opportunity to modify the settings navigation. ', [['lib','navigationlib.php',4738]], 2],
'user_allowed_editing': ['user_allowed_editing', 'Does the user have permission to see this page in editing mode. ', [['lib','pagelib.php',846]], 21],
'add_front_page_course_essentials': ['add_front_page_course_essentials', 'This generates the structure of the course that won\'t be generated when the modules and sections are added. ', [['lib','navigationlib.php',2584]], 2],
'course_get_format': ['course_get_format', 'Returns an instance of format class (extending format_base) for given course ', [['course/format','lib.php',27]], 88],
'destroy_volatile_caches': ['destroy_volatile_caches', 'Destroys all caches marked as volatile ', [['lib','navigationlib.php',5108]], 1],
'make_active': ['make_active', 'Marks the instance as ACTIVE and current active instance (if exists) as ARCHIVE ', [['grade/grading/form','lib.php',872],['lib','navigationlib.php',414]], 42],
'has_coursecontact_role': ['has_coursecontact_role', 'Returns true if user has at least one role assign of \'coursecontact\' role (is potentially listed in some course descriptions). ', [['lib','accesslib.php',648]], 13],
'load_for_user': ['load_for_user', '', [['lib/tests','navigationlib_test.php',517],['lib','navigationlib.php',2105]], 4],
'set_expansion_limit': ['set_expansion_limit', 'Sets an expansion limit for the navigation ', [['lib','navigationlib.php',2655]], 3],
'groups_get_course_group': ['groups_get_course_group', 'Returns group active in course, changes the group by default if \'group\' page param present ', [['lib','grouplib.php',762]], 26],
'add_node': ['add_node', 'Add a node to the tree. ', [['user/classes/output/myprofile','tree.php',52],['user/classes/output/myprofile','category.php',83],['lib','navigationlib.php',321]], 95],
'load_section_activities': ['load_section_activities', 'Loads all of the activities for a section into the navigation structure. ', [['lib','navigationlib.php',1953]], 2],
'module_extends_navigation': ['module_extends_navigation', 'This method simply checks to see if a given module can extend the navigation. ', [['lib','navigationlib.php',2349]], 3],
'is_admin_tree_needed': ['is_admin_tree_needed', 'Does this page require loading of full admin tree or is it enough rely on AJAX? ', [['lib','navigationlib.php',3586]], 1],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 631],
'during_initial_install': ['during_initial_install', 'Indicates whether we are in the middle of the initial Moodle install. ', [['lib','setuplib.php',1124]], 48],
'load_generic_course_sections': ['load_generic_course_sections', 'Generically loads the course sections into the course\'s navigation. ', [['lib','navigationlib.php',1913]], 1],
'remove': ['remove', '', [['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',80],['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',271],['lib/google/src/Google/Service','Plus.php',522],['lib/horde/framework/Horde/Support','ConsistentHash.php',184],['lib/horde/framework/Horde/Imap/Client','Ids.php',187],['lib/google/src/Google/Service','PlusDomains.php',660],['lib/horde/framework/Horde/Mail/Rfc822','List.php',128],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',590],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',17045],['lib/horde/framework/Horde','Variables.php',238],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',43],['lib/google/src/Google/Service','Games.php',1493],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',121],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',88],['lib','navigationlib.php',396],['lib','navigationlib.php',912],['lib/phpexcel/PHPExcel','HashTable.php',99],['lib/mustache/src/Mustache','HelperCollection.php',137]], 1034],
'can_edit_in_category': ['can_edit_in_category', 'Does the user have permission to edit things in this category? ', [['course','lib.php',1410]], 4],
'locate': ['locate', 'Finds a named part_of_admin_tree. ', [['lib','adminlib.php',663],['lib','adminlib.php',806],['lib','adminlib.php',1237],['lib','adminlib.php',1379]], 16],
'generate_sections_and_activities': ['generate_sections_and_activities', 'Generates an array of sections and an array of activities for the given course. ', [['lib','navigationlib.php',1848]], 1],
'has_set_url': ['has_set_url', 'Returns true if the page URL has beem set. ', [['lib','pagelib.php',1878]], 3],
'groups_get_course_groupmode': ['groups_get_course_groupmode', 'Returns effective groupmode used in course ', [['lib','grouplib.php',457]], 28],
'get_by_path': ['get_by_path', 'Gets a navigation node given an array of keys that represent the path to the desired node. ', [['lib','navigationlib.php',3708]], 0],
'can_access_course': ['can_access_course', 'Returns true if the user is able to access the course. ', [['lib','accesslib.php',2129]], 10],
'add': ['add', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',454],['blog','locallib.php',242],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['backup/cc','validator.php',51],['lib/google/src/Google/Http','Batch.php',47],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['lib/zend/Zend/Service/Simpy','WatchlistFilterSet.php',47],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/lessphp/Output','Mapped.php',50],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/google/src/Google/Service','Webmasters.php',375],['lib/horde/framework/Horde','Variables.php',297],['lib','outputcomponents.php',2700],['lib','outputcomponents.php',3375],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/zend/Zend','Date.php',1081],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['comment','lib.php',675],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',86],['lib/horde/framework/Horde','Stream.php',116],['backup/cc/cc_lib/gral_lib','cssparser.php',111],['lib/lessphp','Output.php',18],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib','adminlib.php',736],['lib','adminlib.php',895],['lib','adminlib.php',1447],['lib','csslib.php',1508],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib','navigationlib.php',302],['lib','navigationlib.php',758],['lib','navigationlib.php',3288],['lib','navigationlib.php',3542],['lib/phpexcel/PHPExcel','HashTable.php',85],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454]], 5988],
'get_enabled_plugins': ['get_enabled_plugins', 'Finds all enabled plugins, the result may include missing plugins. ', [['lib/editor/tinymce/classes/plugininfo','tinymce.php',32],['lib/classes/plugininfo','portfolio.php',34],['lib/classes/plugininfo','filter.php',43],['lib/classes/plugininfo','qtype.php',34],['lib/classes/plugininfo','orphaned.php',52],['lib/classes/plugininfo','webservice.php',34],['lib/classes/plugininfo','mod.php',34],['lib/classes/plugininfo','base.php',67],['lib/classes/plugininfo','auth.php',44],['mod/assign/classes/plugininfo','assignfeedback.php',32],['lib/classes/plugininfo','block.php',34],['lib/classes/plugininfo','editor.php',35],['mod/assign/classes/plugininfo','assignsubmission.php',32],['lib/classes/plugininfo','message.php',34],['lib/classes/plugininfo','format.php',34],['lib/classes/plugininfo','qbehaviour.php',34],['lib/classes/plugininfo','repository.php',34],['lib/classes','plugin_manager.php',254],['lib/classes/plugininfo','availability.php',36],['lib/classes/plugininfo','enrol.php',34]], 10],
'check_if_active': ['check_if_active', 'Checks if this node is the active node. ', [['lib','navigationlib.php',209]], 5],
'get': ['get', 'Gets a customer resource if one exists and is owned by the reseller. (customers.get) ', [['lib/google/src/Google/Service','Reseller.php',294],['lib/google/src/Google/Service','Reseller.php',457],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['lib/google/src/Google/Service','Replicapoolupdater.php',275],['lib/zend/Zend/Gdata','Gapps.php',187],['lib/google/src/Google/Service','Fusiontables.php',658],['lib/google/src/Google/Service','Fusiontables.php',823],['lib/google/src/Google/Service','Fusiontables.php',947],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',148],['lib/htmlpurifier/HTMLPurifier','Context.php',36],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','Blogger.php',931],['lib/google/src/Google/Service','Blogger.php',962],['lib/google/src/Google/Service','Blogger.php',1066],['lib/google/src/Google/Service','Blogger.php',1184],['lib/google/src/Google/Service','Blogger.php',1226],['lib/google/src/Google/Service','Blogger.php',1365],['lib/google/src/Google/Service','Blogger.php',1448],['lib/google/src/Google/Service','Blogger.php',1669],['lib/google/src/Google/Service','Doubleclicksearch.php',256],['lib/google/src/Google/Service','Doubleclicksearch.php',380],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','AdExchangeBuyer.php',349],['lib/google/src/Google/Service','AdExchangeBuyer.php',419],['lib/google/src/Google/Service','AdExchangeBuyer.php',460],['lib/google/src/Google/Service','AdExchangeBuyer.php',528],['lib/google/src/Google/Service','AdExchangeBuyer.php',620],['lib/google/src/Google/Service','Manager.php',255],['lib/google/src/Google/Service','Manager.php',334],['lib/google/src/Google/Service','Reports.php',374],['lib/google/src/Google/Service','Reports.php',408],['lib/portfolio','exporter.php',134],['lib','webdavlib.php',264],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','Gmail.php',702],['lib/google/src/Google/Service','Gmail.php',859],['lib/google/src/Google/Service','Gmail.php',952],['lib/google/src/Google/Service','Gmail.php',1118],['lib/google/src/Google/Service','Gmail.php',1162],['lib/google/src/Google/Service','Plus.php',352],['lib/google/src/Google/Service','Plus.php',427],['lib/google/src/Google/Service','Plus.php',547],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/testing/classes','nasty_strings.php',73],['lib/google/src/Google/Service','Mirror.php',437],['lib/google/src/Google/Service','Mirror.php',522],['lib/google/src/Google/Service','Mirror.php',562],['lib/google/src/Google/Service','Mirror.php',673],['lib/google/src/Google/Service','Mirror.php',785],['lib/google/src/Google/Service','Genomics.php',645],['lib/google/src/Google/Service','Genomics.php',744],['lib/google/src/Google/Service','Genomics.php',891],['lib/google/src/Google/Service','Genomics.php',997],['lib/google/src/Google/Service','Genomics.php',1187],['lib/google/src/Google/Service','Genomics.php',1269],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1430],['lib/google/src/Google/Service','Urlshortener.php',108],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Dfareporting.php',421],['lib/google/src/Google/Service','Dfareporting.php',484],['lib/google/src/Google/Service','Dfareporting.php',626],['lib/google/src/Google/Service','Dfareporting.php',675],['lib/google/src/Google/Service','PlusDomains.php',467],['lib/google/src/Google/Service','PlusDomains.php',592],['lib/google/src/Google/Service','PlusDomains.php',718],['lib/google/src/Google/Service','PlusDomains.php',812],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','Licensing.php',236],['lib/google/src/Google/Service','Drive.php',1277],['lib/google/src/Google/Service','Drive.php',1313],['lib/google/src/Google/Service','Drive.php',1366],['lib/google/src/Google/Service','Drive.php',1476],['lib/google/src/Google/Service','Drive.php',1550],['lib/google/src/Google/Service','Drive.php',1706],['lib/google/src/Google/Service','Drive.php',1946],['lib/google/src/Google/Service','Drive.php',2016],['lib/google/src/Google/Service','Drive.php',2147],['lib/google/src/Google/Service','Drive.php',2241],['lib/google/src/Google/Service','Drive.php',2309],['lib/google/src/Google/Service','Drive.php',2428],['lib/google/src/Google/Service','Books.php',1343],['lib/google/src/Google/Service','Books.php',1512],['lib/google/src/Google/Service','Books.php',1564],['lib/google/src/Google/Service','Books.php',1639],['lib/google/src/Google/Service','Books.php',1819],['lib/google/src/Google/Service','Books.php',1960],['lib/google/src/Google/Service','Books.php',2077],['lib/google/src/Google/Service','Books.php',2175],['lib/google/src/Google/Service','Books.php',2207],['lib/zend/Zend/Gdata','App.php',847],['lib/google/src/Google/Service','AdExchangeSeller.php',443],['lib/google/src/Google/Service','AdExchangeSeller.php',551],['lib/google/src/Google/Service','AdExchangeSeller.php',665],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['lib/google/src/Google/Cache','Memcache.php',72],['lib/google/src/Google/Service','Bigquery.php',533],['lib/google/src/Google/Service','Bigquery.php',633],['lib/google/src/Google/Service','Bigquery.php',838],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['cache','disabledlib.php',55],['lib/zend/Zend/Server','Cache.php',78],['lib/google/src/Google/Service','Groupssettings.php',107],['cache/stores/memcached','lib.php',285],['lib/google/src/Google/Service','Coordinate.php',476],['lib/google/src/Google/Service','Coordinate.php',642],['lib/zend/Zend','Registry.php',130],['lib/google/src/Google/Service','Webmasters.php',314],['lib/google/src/Google/Service','Webmasters.php',403],['lib/google/src/Google/Service','Webmasters.php',479],['lib/google/src/Google/Service','Autoscaler.php',330],['lib/google/src/Google/Service','Autoscaler.php',444],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/google/src/Google/Service','ShoppingContent.php',567],['lib/google/src/Google/Service','ShoppingContent.php',675],['lib/google/src/Google/Service','ShoppingContent.php',749],['lib/google/src/Google/Service','ShoppingContent.php',857],['lib/google/src/Google/Service','ShoppingContent.php',985],['lib/google/src/Google/Service','ShoppingContent.php',1062],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/editor/tinymce/classes','plugin.php',447],['mod/lesson','locallib.php',3239],['lib/horde/framework/Horde','Variables.php',135],['lib/google/src/Google/Service','SQLAdmin.php',528],['lib/google/src/Google/Service','SQLAdmin.php',664],['lib/google/src/Google/Service','SQLAdmin.php',872],['lib/google/src/Google/Service','SQLAdmin.php',941],['lib/google/src/Google/Service','Fitness.php',363],['lib/google/src/Google/Service','Fitness.php',489],['lib/google/src/Google/Service','TagManager.php',977],['lib/google/src/Google/Service','TagManager.php',1063],['lib/google/src/Google/Service','TagManager.php',1155],['lib/google/src/Google/Service','TagManager.php',1248],['lib/google/src/Google/Service','TagManager.php',1341],['lib/google/src/Google/Service','TagManager.php',1434],['lib/google/src/Google/Service','TagManager.php',1528],['lib/google/src/Google/Service','TagManager.php',1622],['lib/google/src/Google/Service','TagManager.php',1772],['lib/google/src/Google/Service','Directory.php',1315],['lib/google/src/Google/Service','Directory.php',1383],['lib/google/src/Google/Service','Directory.php',1490],['lib/google/src/Google/Service','Directory.php',1656],['lib/google/src/Google/Service','Directory.php',1783],['lib/google/src/Google/Service','Directory.php',1853],['lib/google/src/Google/Service','Directory.php',1949],['lib/google/src/Google/Service','Directory.php',2056],['lib/google/src/Google/Service','Directory.php',2160],['lib/google/src/Google/Service','Directory.php',2218],['lib/google/src/Google/Service','Directory.php',2493],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['cache/stores/static','lib.php',220],['question/engine','states.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/google/src/Google/Service','AppState.php',170],['lib/google/src/Google/Service','Taskqueue.php',263],['lib/google/src/Google/Service','Taskqueue.php',307],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Container.php',364],['lib/google/src/Google/Service','Container.php',411],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','AndroidPublisher.php',1194],['lib/google/src/Google/Service','AndroidPublisher.php',1296],['lib/google/src/Google/Service','AndroidPublisher.php',1437],['lib/google/src/Google/Service','AndroidPublisher.php',1500],['lib/google/src/Google/Service','AndroidPublisher.php',1723],['lib/google/src/Google/Service','AndroidPublisher.php',1811],['lib/google/src/Google/Service','AndroidPublisher.php',1875],['lib/google/src/Google/Service','AndroidPublisher.php',1987],['lib/google/src/Google/Service','AndroidPublisher.php',2112],['lib/google/src/Google/Service','AndroidPublisher.php',2182],['lib/zend/Zend','Date.php',516],['lib/google/src/Google/Service','AdSenseHost.php',644],['lib/google/src/Google/Service','AdSenseHost.php',685],['lib/google/src/Google/Service','AdSenseHost.php',750],['lib/google/src/Google/Service','AdSenseHost.php',917],['lib/google/src/Google/Service','AdSenseHost.php',1025],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Games.php',1219],['lib/google/src/Google/Service','Games.php',1338],['lib/google/src/Google/Service','Games.php',1440],['lib/google/src/Google/Service','Games.php',1698],['lib/google/src/Google/Service','Games.php',1805],['lib/google/src/Google/Service','Games.php',1947],['lib/google/src/Google/Service','Games.php',2081],['lib','filelib.php',3341],['lib','filelib.php',3589],['lib','oauthlib.php',302],['lib/google/src/Google/Service','MapsEngine.php',1529],['lib/google/src/Google/Service','MapsEngine.php',1708],['lib/google/src/Google/Service','MapsEngine.php',2005],['lib/google/src/Google/Service','MapsEngine.php',2267],['lib/google/src/Google/Service','MapsEngine.php',2359],['lib/google/src/Google/Service','MapsEngine.php',2665],['lib/google/src/Google/Service','MapsEngine.php',2926],['lib/google/src/Google/Service','MapsEngine.php',3117],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','SiteVerification.php',151],['lib/horde/framework/Horde/Support','Array.php',30],['lib/google/src/Google/Service','Prediction.php',275],['cache/stores/session','lib.php',225],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Compute.php',2828],['lib/google/src/Google/Service','Compute.php',2911],['lib/google/src/Google/Service','Compute.php',3050],['lib/google/src/Google/Service','Compute.php',3155],['lib/google/src/Google/Service','Compute.php',3240],['lib/google/src/Google/Service','Compute.php',3377],['lib/google/src/Google/Service','Compute.php',3478],['lib/google/src/Google/Service','Compute.php',3558],['lib/google/src/Google/Service','Compute.php',3676],['lib/google/src/Google/Service','Compute.php',3741],['lib/google/src/Google/Service','Compute.php',3876],['lib/google/src/Google/Service','Compute.php',3957],['lib/google/src/Google/Service','Compute.php',4132],['lib/google/src/Google/Service','Compute.php',4306],['lib/google/src/Google/Service','Compute.php',4355],['lib/google/src/Google/Service','Compute.php',4421],['lib/google/src/Google/Service','Compute.php',4486],['lib/google/src/Google/Service','Compute.php',4559],['lib/google/src/Google/Service','Compute.php',4611],['lib/google/src/Google/Service','Compute.php',4675],['lib/google/src/Google/Service','Compute.php',4756],['lib/google/src/Google/Service','Compute.php',4822],['lib/google/src/Google/Service','Compute.php',4943],['lib/google/src/Google/Service','Compute.php',5085],['lib/google/src/Google/Service','Compute.php',5244],['lib/google/src/Google/Service','Compute.php',5376],['lib/google/src/Google/Service','Compute.php',5428],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Calendar.php',900],['lib/google/src/Google/Service','Calendar.php',1053],['lib/google/src/Google/Service','Calendar.php',1241],['lib/google/src/Google/Service','Calendar.php',1337],['lib/google/src/Google/Service','Calendar.php',1379],['lib/google/src/Google/Service','Calendar.php',1780],['lib/google/src/Google/Service','Analytics.php',1891],['lib/google/src/Google/Service','Analytics.php',1940],['lib/google/src/Google/Service','Analytics.php',1987],['lib/google/src/Google/Service','Analytics.php',2309],['lib/google/src/Google/Service','Analytics.php',2429],['lib/google/src/Google/Service','Analytics.php',2522],['lib/google/src/Google/Service','Analytics.php',2648],['lib/google/src/Google/Service','Analytics.php',2867],['lib/google/src/Google/Service','Analytics.php',3004],['lib/google/src/Google/Service','Analytics.php',3095],['lib/google/src/Google/Service','Analytics.php',3197],['lib/google/src/Google/Service','Analytics.php',3308],['lib/google/src/Google/Service','Tasks.php',322],['lib/google/src/Google/Service','Tasks.php',441],['lib/behat/classes','behat_context_helper.php',66],['backup/cc/cc_lib/gral_lib','cssparser.php',137],['cache/classes','loaders.php',270],['cache/classes','loaders.php',1442],['cache/classes','loaders.php',1749],['cache/stores/mongodb','lib.php',252],['lib/zend/Zend/Service','Audioscrobbler.php',110],['lib/google/src/Google/Service','Oauth2.php',143],['lib/google/src/Google/Service','Oauth2.php',180],['cache/stores/file','lib.php',329],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Storage.php',962],['lib/google/src/Google/Service','Storage.php',1078],['lib/google/src/Google/Service','Storage.php',1244],['lib/google/src/Google/Service','Storage.php',1370],['lib/google/src/Google/Service','Storage.php',1592],['lib/google/src/Google/Cache','Null.php',34],['lib/google/src/Google/Service','AdSense.php',1075],['lib/google/src/Google/Service','AdSense.php',1154],['lib/google/src/Google/Service','AdSense.php',1302],['lib/google/src/Google/Service','AdSense.php',1518],['lib/google/src/Google/Service','AdSense.php',1630],['lib/google/src/Google/Service','AdSense.php',1772],['lib/google/src/Google/Service','AdSense.php',2046],['lib/google/src/Google/Service','Pubsub.php',254],['lib/google/src/Google/Service','Pubsub.php',393],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['lib/google/src/Google/Cache','File.php',45],['lib','navigationlib.php',382],['lib','navigationlib.php',833],['lib','navigationlib.php',2693],['lib','navigationlib.php',3126],['lib/google/src/Google/Service','Dns.php',299],['lib/google/src/Google/Service','Dns.php',385],['lib/google/src/Google/Service','Dns.php',434],['lib/mustache/src/Mustache','HelperCollection.php',81],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapool.php',416],['lib/google/src/Google/Service','Replicapool.php',571],['lib/google/src/Google/Service','Resourceviews.php',350],['lib/google/src/Google/Service','Resourceviews.php',435],['lib','coursecatlib.php',215],['lib/google/src/Google/Cache','Apc.php',50],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163]], 21003],
'volatile': ['volatile', 'Marks the cache as being volatile (likely to change) ', [['lib','navigationlib.php',5086]], 1],
'add_category': ['add_category', 'Add a category to the tree. ', [['user/classes/output/myprofile','tree.php',67],['lib/portfolio/formats/leap2a','lib.php',348],['lib','navigationlib.php',1768],['question','category_class.php',380]], 42],
'get_auth_plugin': ['get_auth_plugin', 'Returns an authentication plugin instance. ', [['lib','moodlelib.php',3596]], 76],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',2001]], 277],
'extend_navigation': ['extend_navigation', 'Extends the module navigation ', [['grade/grading/form','lib.php',233],['grade/grading/form/guide','lib.php',74],['grade/grading','lib.php',467],['grade/grading/form/rubric','lib.php',71]], 2],
'find_expandable': ['find_expandable', 'Finds all nodes that are expandable by AJAX ', [['lib','navigationlib.php',605]], 4],
'editors_get_enabled': ['editors_get_enabled', 'Returns list of enabled text editors ', [['lib','editorlib.php',90]], 5],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'out': ['out', 'Returns the string ', [['lib','moodlelib.php',9451],['lib','weblib.php',547],['lib','tablelib.php',1526],['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['report/loglive/classes','table_log_ajax.php',37]], 549],
'out_as_local_url': ['out_as_local_url', 'Returns URL a relative path from $CFG->wwwroot ', [['lib','weblib.php',809]], 41],
'is_hidden': ['is_hidden', 'Returns the current hidden state of this grade_item ', [['lib/grade','grade_object.php',415],['lib/grade','grade_grade.php',503],['lib','adminlib.php',709],['lib','adminlib.php',996],['lib','adminlib.php',1306],['lib','adminlib.php',1503]], 55],
'get_section_name': ['get_section_name', 'Returns the display name of the given section that the course prefers. ', [['course/format/weeks','lib.php',47],['course','lib.php',2370],['course/format/topics','lib.php',47],['course/format','formatlegacy.php',53],['course/format','lib.php',341],['course/format','lib.php',1028]], 49],
'get_home_page': ['get_home_page', 'Gets the homepage to use for the current user ', [['lib','moodlelib.php',9236]], 6],
'get_items': ['get_items', 'Get all items from the feed ', [['lib/simplepie/library','SimplePie.php',2813],['admin/tool/customlang','locallib.php',413],['grade','lib.php',2449],['lib','navigationlib.php',3146]], 16],
'get_tabs_array': ['get_tabs_array', 'Creates a tab representation of this nodes children that can be used with print_tabs to produce the tabs on a page. ', [['lib','navigationlib.php',645]], 0],
'get_key_list': ['get_key_list', 'Return a list of all the keys of all the nodes. ', [['lib','navigationlib.php',821]], 2],
'require_admin_tree': ['require_admin_tree', 'Use when page is linked from the admin tree, if not used navigation could not find the page using current URL because the tree is not fully loaded. ', [['lib','navigationlib.php',257]], 3],
'get_recordset_select': ['get_recordset_select', 'Get a number of records as a moodle_recordset which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1175]], 35],
'create': ['create', 'Creates a new 2048 bit RSA key pair and returns a unique ID that can be used to reference this key pair when launching new instances. ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',39],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',271],['repository/filesystem','lib.php',283],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',39],['lib/google/src/Google/Service','Gmail.php',670],['lib/google/src/Google/Service','Gmail.php',827],['course','lib.php',2874],['lib/classes/event','base.php',139],['lib/google/src/Google/Service','Genomics.php',618],['lib/google/src/Google/Service','Genomics.php',717],['lib/google/src/Google/Service','Genomics.php',850],['lib/google/src/Google/Service','Genomics.php',1313],['lib','modinfolib.php',1747],['calendar','lib.php',2651],['lib/zend/Zend/Service/Amazon','Sqs.php',82],['lib','weblib.php',3048],['mod/lesson','locallib.php',1013],['mod/lesson','locallib.php',2166],['mod/lesson','locallib.php',3203],['lib/google/src/Google/Service','Fitness.php',340],['lib/google/src/Google/Service','TagManager.php',1034],['lib/google/src/Google/Service','TagManager.php',1124],['lib/google/src/Google/Service','TagManager.php',1217],['lib/google/src/Google/Service','TagManager.php',1310],['lib/google/src/Google/Service','TagManager.php',1403],['lib/google/src/Google/Service','TagManager.php',1497],['lib/google/src/Google/Service','TagManager.php',1591],['lib/google/src/Google/Service','TagManager.php',1742],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Container.php',314],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['repository','lib.php',206],['repository','lib.php',1960],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',555],['lib/google/src/Google/Service','Games.php',1648],['lib/google/src/Google/Service','Games.php',2012],['lib/google/src/Google/Service','MapsEngine.php',1676],['lib/google/src/Google/Service','MapsEngine.php',1976],['lib/google/src/Google/Service','MapsEngine.php',2252],['lib/google/src/Google/Service','MapsEngine.php',2329],['lib/google/src/Google/Service','MapsEngine.php',2897],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Pubsub.php',219],['lib/google/src/Google/Service','Pubsub.php',364],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/simplepie/library/SimplePie','Registry.php',153],['lib','navigationlib.php',266],['lib/google/src/Google/Service','Dns.php',282],['lib/google/src/Google/Service','Dns.php',355],['lib','coursecatlib.php',328],['mod/quiz/classes','structure.php',65]], 3074],
'is_enrolled': ['is_enrolled', 'Returns true if user is enrolled (is participating) in course this is intended for students and teachers. ', [['lib','accesslib.php',2037]], 143],
'remove_class': ['remove_class', 'Removes a CSS class from this node. ', [['lib','navigationlib.php',469]], 3],
'get_children_key_list': ['get_children_key_list', 'Return a list of all the keys of all the child nodes. ', [['lib','navigationlib.php',359]], 4],
'in_alternative_role': ['in_alternative_role', 'Determine whether the user is assuming another role ', [['lib','navigationlib.php',4612]], 1],
'search_for_active_node': ['search_for_active_node', 'Searches all children for the best matching active node ', [['lib','navigationlib.php',548]], 5],
'force_open': ['force_open', 'Forces this node to be open and at the same time forces open all parents until the root node. ', [['lib','navigationlib.php',443]], 16],
'filter_get_available_in_context': ['filter_get_available_in_context', 'List all of the filters that are available in this context, and what the local and inherited states of that filter are. ', [['lib','filterlib.php',1051]], 10],
'can_add_more_courses_to_category': ['can_add_more_courses_to_category', 'Returns true if more courses can be added to the provided category. ', [['lib','navigationlib.php',1580]], 6],
'isguestuser': ['isguestuser', 'Determines if a user is logged in as real guest user with username \'guest\'. ', [['lib','accesslib.php',1922]], 237],
'is_siteadmin': ['is_siteadmin', 'Check if the user is an admin at the site level. ', [['lib','accesslib.php',604]], 92],
'compare': ['compare', '', [['lib/lessphp/Tree','Anonymous.php',32],['lib/horde/framework/Horde/Array/Sort','Helper.php',26],['lib/lessphp/Tree','Keyword.php',37],['lib','weblib.php',595],['lib/zend/Zend','Date.php',1129],['lib/lessphp/Tree','Dimension.php',122],['lib/lessphp/Tree','Color.php',186],['lib/lessphp/Tree','Quoted.php',66],['lib','navigationlib.php',5043],['lib/lessphp/Tree','Unit.php',56]], 47],
'clear_cache': ['clear_cache', 'Clears the navigation cache ', [['lib','navigationlib.php',2648],['lib','navigationlib.php',4758]], 5],
'preload_from_record': ['preload_from_record', 'Preloads context information from db record and strips the cached info. ', [['lib','accesslib.php',5199],['lib','accesslib.php',6028]], 57],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',768]], 607],
'can_change_password': ['can_change_password', 'Returns true if this authentication plugin can change the user\'s password. ', [['auth/radius','auth.php',151],['lib','authlib.php',151],['auth/pam','auth.php',101],['auth/db','auth.php',675],['auth/email','auth.php',173],['auth/shibboleth','auth.php',170],['auth/none','auth.php',89],['auth/nologin','auth.php',72],['auth/cas','auth.php',76],['auth/mnet','auth.php',588],['auth/pop3','auth.php',106],['auth/nntp','auth.php',89],['auth/manual','auth.php',112],['auth/fc','auth.php',170],['auth/imap','auth.php',110],['auth/webservice','auth.php',101],['auth/ldap','auth.php',1599]], 13],
'enrol_add_course_navigation': ['enrol_add_course_navigation', 'Add navigation nodes ', [['lib','enrollib.php',381]], 2],
'__construct': ['__construct', 'Constructor ', [['lib/jabber/XMPP','Log.php',67],['lib/zend/Zend/Gdata/Books','VolumeFeed.php',41],['lib/markdown','MarkdownExtra.php',51],['lib/zend/Zend/Gdata/Books/Extension','BooksCategory.php',42],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/zend/Zend/Validate','Iban.php',106],['repository/wikimedia','wikimedia.php',35],['lib/lessphp/Tree','Operation.php',19],['lib/alfresco/Service','Version.php',38],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['backup/moodle2','backup_activity_task.class.php',45],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/phpunit/classes','advanced_testcase.php',45],['lib/zend/Zend/Service/DeveloperGarden/Request','RequestAbstract.php',40],['lib','outputlib.php',447],['lib','outputlib.php',2000],['repository/filesystem','lib.php',48],['lib/zend/Zend/XmlRpc/Value','Nil.php',40],['lib/lessphp/Tree','NameValue.php',21],['lib/zend/Zend/Gdata/YouTube','UserProfileEntry.php',283],['lib/zend/Zend/Gdata/Gapps','EmailListRecipientEntry.php',69],['lib/simplepie/library/SimplePie','Restriction.php',81],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes/update','checker.php',50],['lib/adodb','adodb-active-recordx.inc.php',131],['lib/phpexcel/PHPExcel','Calculation.php',1721],['lib/zend/Zend/Gdata/Photos/Extension','NumPhotos.php',50],['availability/classes','info_module.php',40],['lib/zend/Zend/Gdata/Geo/Extension','GmlPos.php',49],['lib/zend/Zend/Gdata/App/Extension','Link.php',49],['lib/zend/Zend/Gdata/Photos/Extension','Access.php',51],['lib/zend/Zend/Server/Reflection','Parameter.php',58],['lib/zend/Zend/Service/DeveloperGarden/Client','ClientAbstract.php',129],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['lib/zend/Zend/Validate/Db','Abstract.php',79],['cache/locks/file','lib.php',66],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',180],['question/type/missingtype','edit_missingtype_form.php',38],['auth/cas/CAS/CAS','Client.php',862],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/zend/Zend/Gdata/Books','VolumeQuery.php',46],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/zend/Zend/XmlRpc','Request.php',92],['lib/zend/Zend/Service/Delicious','Post.php',74],['lib/zend/Zend/Gdata/Extension','FeedLink.php',53],['lib/zend/Zend/Http/Client/Adapter','Socket.php',97],['lib/grade','grade_object.php',80],['lib/zend/Zend/Gdata/YouTube','ContactFeed.php',55],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['lib/google/src/Google/Auth','LoginTicket.php',35],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',84],['lib/zend/Zend/Service/DeveloperGarden/SecurityTokenServer','Cache.php',59],['question/type/randomsamatch','question.php',114],['lib/zend/Zend/Service/WindowsAzure/Storage','SignedIdentifier.php',49],['lib/zend/Zend/Amf/Parse','OutputStream.php',40],['blocks','moodleblock.class.php',111],['lib/simplepie','autoloader.php',62],['mod/scorm','renderer.php',129],['lib/zend/Zend/Gdata/Extension','Who.php',64],['lib/zend/Zend/Gdata/Gapps','EmailListQuery.php',54],['lib/zend/Zend/Service/Simpy','LinkSet.php',47],['repository/flickr_public','lib.php',49],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Replicapoolupdater.php',47],['admin/tool/generator/classes','site_backend.php',58],['mod/assign','assignmentplugin.php',50],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['mod/lti/service/profile/classes/local/resource','profile.php',43],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['lib/lessphp/Tree','Anonymous.php',21],['user','renderer.php',186],['lib/zend/Zend/Service/WindowsAzure','Storage.php',170],['lib/google/src/Google','Service.php',26],['lib/lessphp/Tree','Url.php',17],['webservice','lib.php',745],['webservice','lib.php',841],['webservice','lib.php',1120],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',270],['lib/zend/Zend/Gdata/YouTube/Extension','MediaContent.php',55],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib/tests','completionlib_test.php',863],['lib/zend/Zend/Service/Amazon','Accessories.php',44],['lib/zend/Zend/Validate/Barcode','Code39ext.php',47],['mod/assign/feedback/editpdf/classes','comment.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',46],['backup/moodle2','backup_settingslib.php',42],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateListRequest.php',46],['lib/zend/Zend/XmlRpc/Value','Base64.php',40],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['lib/zend/Zend/Service/WindowsAzure/Storage','Blob.php',117],['lib/lessphp','Parser.php',75],['lib/zend/Zend/Service/DeveloperGarden/Response/IpLocation','LocateIPResponse.php',47],['lib/zend/Zend/Gdata','Query.php',72],['lib/zend/Zend/Service/Technorati','TagResultSet.php',57],['lib/zend/Zend/Rest/Client','Result.php',42],['lib/lessphp/Tree','Call.php',19],['lib/zend/Zend/Server/Method','Callback.php',59],['lib/minify/lib/Minify/JS','ClosureCompiler.php',38],['mod/workshop/backup/moodle1','lib.php',308],['lib/zend/Zend/Gdata/YouTube','ActivityFeed.php',54],['admin/tool/log/store/database/classes/log','store.php',47],['lib/zend/Zend/Validate','Alpha.php',65],['lib/zend/Zend/Gdata','Gapps.php',109],['lib/zend/Zend/Service/Flickr','Result.php',174],['question/type/multianswer','edit_multianswer_form.php',58],['mod/assign/feedback/file','renderable.php',44],['lib/horde/framework/Horde','Secret.php',48],['lib/zend/Zend/Gdata/Photos/Extension','AlbumId.php',51],['lib/lessphp/SourceMap','Base64VLQ.php',67],['lib/lessphp/Tree/Mixin','Call.php',14],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/google/src/Google/Service','Fusiontables.php',48],['grade/report/singleview','lib.php',69],['lib/classes/lock','lock.php',55],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['blog','locallib.php',71],['blog','locallib.php',581],['blog','locallib.php',849],['blog','locallib.php',894],['blog','locallib.php',953],['blog','locallib.php',1004],['blog','locallib.php',1028],['blog','locallib.php',1038],['blog','locallib.php',1050],['blog','locallib.php',1071],['lib/zend/Zend/Gdata/Exif/Extension','Flash.php',49],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',61],['admin/webservice','lib.php',38],['lib/zend/Zend/Validate/File','FilesSize.php',60],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',46],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['lib/zend/Zend/Validate','Int.php',53],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['lib/zend/Zend/Soap','Server.php',146],['lib/zend/Zend/Gdata/Photos','PhotoEntry.php',215],['lib/zend/Zend/Service/Yahoo','LocalResult.php',111],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','GetAccountBalance.php',40],['badges/lib','backpacklib.php',40],['lib/zend/Zend/Service/Yahoo','Result.php',77],['lib/form','filemanager.php',306],['lib/lessphp/Tree','Condition.php',18],['lib/pear/PEAR','Exception.php',107],['lib/zend/Zend/Gdata/YouTube/Extension','Racy.php',45],['question/classes/bank','view.php',70],['lib/adodb','adodb.inc.php',2790],['lib/adodb','adodb.inc.php',2865],['lib/zend/Zend/Gdata/App/Extension','Text.php',45],['question/engine/upgrade/tests','helper.php',45],['lib/zend/Zend/Validate/Barcode','Ean5.php',47],['blocks/private_files','renderer.php',83],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/classes','useragent.php',115],['lib/zend/Zend/Gdata/Photos/Extension','CommentCount.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/zend/Zend/Gdata/Spreadsheets/Extension','ColCount.php',49],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/portfolio','exceptions.php',50],['lib/zend/Zend/Gdata/Calendar/Extension','QuickAdd.php',45],['lib/xmldb','xmldb_object.php',55],['lib/zend/Zend/Service','SlideShare.php',283],['webservice/amf','introspector.php',52],['question/behaviour/adaptive','behaviour.php',310],['question/behaviour','behaviourtypebase.php',133],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['course','renderer.php',52],['lib/zend/Zend/Validate','Hostname.php',315],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',249],['lib/zend/Zend/Amf','Server.php',134],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/zend/Zend/Http','Cookie.php',98],['lib/lessphp/Tree','Extend.php',28],['lib/zend/Zend/Validate','Barcode.php',75],['lib/zend/Zend/XmlRpc/Value','BigInteger.php',47],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/google/src/Google/Service','QPXExpress.php',39],['lib/zend/Zend/Server/Reflection/Function','Abstract.php',105],['lib/phpexcel/PHPExcel/Style','Color.php',72],['lib/zend/Zend/Validate/File','Hash.php',60],['backup/util/settings/root','root_backup_setting.class.php',34],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/zend/Zend/Gdata/Photos/Extension','QuotaCurrent.php',50],['lib/zend/Zend/Service/Nirvanix/Namespace','Base.php',76],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['lib/zend/Zend/Service/Technorati','DailyCountsResult.php',60],['lib/zend/Zend/Rest','Server.php',102],['lib/zend/Zend/Gdata/Photos','UserFeed.php',106],['lib/tcpdf/include/barcodes','pdf417.php',523],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/zend/Zend/Gdata/YouTube/Extension','VideoId.php',44],['lib/google/src/Google/Service','Blogger.php',50],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['lib/zend/Zend/Gdata/App/Extension','Published.php',43],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',129],['lib/zend/Zend/Gdata/Photos','AlbumEntry.php',193],['lib/zend/Zend/Gdata/Docs','DocumentListFeed.php',56],['lib/zend/Zend/Gdata/App/Extension','Icon.php',43],['lib/portfolio','plugin.php',445],['lib/zend/Zend/Gdata/Extension','OpenSearchItemsPerPage.php',44],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['lib/zend/Zend/Service/Yahoo','WebResult.php',83],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['lib/google/src/Google/Service','AdExchangeBuyer.php',46],['lib/dtl','file_xml_database_exporter.php',36],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/zend/Zend/Gdata/YouTube/Extension','Token.php',44],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',87],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',47],['lib/xmldb','xmldb_field.php',84],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',126],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceStatusRequest.php',65],['lib/google/src/Google/Service','Manager.php',57],['lib/zend/Zend/Service/Amazon','Offer.php',79],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['lib/zend/Zend/Gdata/App','FeedEntryParent.php',129],['lib/zend/Zend/Service/Technorati','KeyInfoResult.php',61],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['webservice/rest','lib.php',47],['lib/zend/Zend/Service/StrikeIron','Decorator.php',47],['lib/google/src/Google/Http','Batch.php',38],['lib/google/src/Google/Service','Reports.php',47],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['lib/zend/Zend/Gdata/Media/Extension','MediaKeywords.php',43],['repository/url','lib.php',46],['lib','xmlize.php',31],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/filebrowser','file_info_context_system.php',37],['lib/zend/Zend/Service/Amazon','Abstract.php',74],['lib/zend/Zend/Server','Definition.php',43],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/zend/Zend/Amf/Util','BinaryStream.php',53],['lib/portfolio','exporter.php',113],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/zend/Zend/Gdata/YouTube','SubscriptionFeed.php',55],['lib/alfresco/Service','SpacesStore.php',28],['repository/recent','lib.php',39],['lib/zend/Zend/Service/DeveloperGarden/IpLocation','IpAddress.php',59],['lib/zend/Zend/Validate','Regex.php',62],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',135],['lib/phpexcel/PHPExcel','ReferenceHelper.php',65],['lib','webdavlib.php',84],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['auth/cas/CAS/CAS','AuthenticationException.php',53],['lib/zend/Zend/Gdata/Gapps','NicknameQuery.php',54],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',36],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['lib/horde/framework/Horde','Domhtml.php',53],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/google/src/Google/Service','Customsearch.php',38],['lib/zend/Zend/Gdata/App','MediaFileSource.php',54],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/lessphp/Tree','Comment.php',17],['availability/tests/fixtures','mock_info.php',40],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['backup/util/ui','base_ui.class.php',84],['lib/phpexcel/PHPExcel','DocumentSecurity.php',73],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['backup/cc/cc_lib','cc_converter_lti.php',29],['lib/zend/Zend/Gdata/YouTube/Extension','Position.php',44],['lib/zend/Zend/Service/WindowsAzure/Credentials','CredentialsAbstract.php',77],['lib/zend/Zend/Soap','AutoDiscover.php',94],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['lib/phpexcel/PHPExcel','IOFactory.php',77],['lib/zend/Zend/Gdata/App/Extension','Email.php',43],['lib/zend/Zend/Gdata/Media/Extension','MediaHash.php',45],['lib/zend/Zend/Gdata/App/Extension','Element.php',42],['lib/google/src/Google/Service','Gmail.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['repository/dropbox','lib.php',49],['lib/minify/lib/Minify','Source.php',43],['backup/util/dbops','backup_dbops.class.php',37],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/google/src/Google/Service','Spectrum.php',38],['files','renderer.php',1080],['lib/zend/Zend/Validate/Barcode','Ean2.php',47],['course','lib.php',2932],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/zend/Zend/Service/Simpy','Watchlist.php',89],['lib/phpexcel/PHPExcel','Style.php',101],['lib/zend/Zend/Gdata/YouTube/Extension','CountHint.php',44],['lib/minify/lib/Minify/Cache','Memcache.php',22],['auth/db','auth.php',36],['lib/zend/Zend/Gdata/Gapps','UserQuery.php',54],['admin/roles/classes','assign_user_selector_base.php',40],['lib/zend/Zend/Gdata/Exif/Extension','Model.php',49],['lib/zend/Zend/Gdata/YouTube','PlaylistListFeed.php',55],['lib/zend/Zend/Gdata/Docs','DocumentListEntry.php',42],['mod/quiz/tests','repaginate_test.php',39],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['lib/zend/Zend/Service/Twitter','Search.php',70],['lib/zend/Zend/Server/Method','Parameter.php',59],['lib/phpunit/classes','basic_testcase.php',39],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobContainer.php',50],['lib/zend/Zend/Service/DeveloperGarden/Response/LocalSearch','LocalSearchResponse.php',50],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['mod/wiki/parser/markups','html.php',18],['lib/google/src/Google/Service','Mirror.php',49],['lib/classes/event','base.php',114],['lib/alfresco/Service','Repository.php',36],['lib/zend/Zend/Service/Technorati','CosmosResult.php',84],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',42],['lib/zend/Zend/Service/Yahoo','PageDataResult.php',47],['lib/zend/Zend/Service/WindowsAzure/Storage','Table.php',99],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceTemplateRequest.php',60],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',775],['lib/tcpdf','tcpdf_parser.php',92],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/zend/Zend/Gdata','MimeBodyString.php',49],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',55],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',92],['lib/google/src/Google/Http','MediaFileUpload.php',73],['lib/zend/Zend/XmlRpc/Client','ServerProxy.php',54],['lib','listlib.php',82],['lib','listlib.php',485],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/zend/Zend/Gdata/Health','ProfileFeed.php',49],['lib/google/src/Google/Service','Genomics.php',60],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/zend/Zend/Server/Reflection','Method.php',51],['lib/tests','medialib_test.php',631],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['lib/zend/Zend/Soap/Client','DotNet.php',43],['admin/roles/classes','allow_role_page.php',37],['backup/util/dbops','restore_dbops.class.php',1755],['lib/zend/Zend/Service/Yahoo','NewsResult.php',97],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['webservice/rest','locallib.php',40],['lib/simplepie/library/SimplePie','Sanitize.php',75],['lib','uploadlib.php',40],['lib/zend/Zend/Gdata','Health.php',109],['lib','questionlib.php',1269],['lib','questionlib.php',1513],['lib/dml','oci_native_moodle_recordset.php',34],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveParticipantRequest.php',53],['lib/zend/Zend/XmlRpc/Value','String.php',38],['lib/zend/Zend/Gdata/Calendar/Extension','AccessLevel.php',45],['lib/ddl','database_manager.php',48],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CreateConferenceTemplateRequest.php',60],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib/dtl','database_exporter.php',55],['mod/workshop/form/accumulative','lib.php',99],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib/zend/Zend/Validate','Float.php',53],['lib/zend/Zend/Gdata/Gapps/Extension','EmailList.php',59],['cache/classes','interfaces.php',473],['lib/zend/Zend/Gdata/App/Extension','Edited.php',43],['lib/zend/Zend/Gdata/Gapps','UserEntry.php',103],['lib/lessphp/Tree','Element.php',19],['lib','moodlelib.php',9143],['lib','moodlelib.php',9354],['repository/picasa','lib.php',41],['webservice/soap','lib.php',42],['lib/zend/Zend/Gdata/Calendar','EventEntry.php',71],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',98],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/zend/Zend/Service/WindowsAzure/RetryPolicy','RetryN.php',56],['lib/dml','moodle_temptables.php',51],['lib/zend/Zend/Gdata/Media/Extension','MediaContent.php',116],['lib/zend/Zend/Gdata/Gapps','EmailListEntry.php',80],['admin/roles/classes','allow_assign_page.php',31],['lib/zend/Zend/Gdata','Books.php',80],['lib/zend/Zend/Amf/Value','MessageHeader.php',64],['lib/zend/Zend/Validate','GreaterThan.php',59],['lib/zend/Zend/Gdata/YouTube/Extension','PlaylistId.php',44],['calendar/classes','rrule_manager.php',182],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',45],['lib/zend/Zend/Service/ReCaptcha','Response.php',53],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',106],['lib/zend/Zend/Amf/Value/Messaging','RemotingMessage.php',58],['lib/tcpdf','tcpdf.php',1822],['lib/zend/Zend/Gdata/YouTube/Extension','Username.php',44],['lib/zend/Zend/Gdata/Photos/Extension','Version.php',51],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/zend/Zend/Service/WindowsAzure/Storage','Batch.php',77],['lib/mustache/src/Mustache','Engine.php',61],['lib/xmldb','xmldb_structure.php',40],['lib/zend/Zend/Gdata/Photos','TagEntry.php',61],['webservice/amf','locallib.php',41],['webservice/amf','locallib.php',60],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['question/type/numerical/tests','form_test.php',40],['lib/google/src/Google/Service','IdentityToolkit.php',38],['comment','locallib.php',39],['lib/zend/Zend/Gdata/Extension','Comments.php',50],['lib/google/src/Google/Service','Resource.php',60],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/zend/Zend/Gdata/YouTube/Extension','Recorded.php',44],['lib/zend/Zend/Amf/Request','Http.php',46],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['question/engine/upgrade','behaviourconverters.php',78],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantDetail.php',62],['repository/s3','lib.php',39],['lib/minify/lib/MrClay','Cli.php',74],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/zend/Zend/Gdata/App','HttpException.php',51],['lib/zend/Zend/Soap/Client','Common.php',40],['lib/google/src/Google/Service','Dfareporting.php',45],['lib/lessphp/Output','Mapped.php',39],['lib/classes/output','notification.php',66],['lib/google/src/Google/Service','PlusDomains.php',72],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/editor/tinymce','adminlib.php',36],['lib/zend/Zend/Service/Amazon/Ec2','Exception.php',41],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',52],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',846],['lib/xmldb','xmldb_key.php',43],['user/filters','checkbox.php',51],['lib/phpexcel/PHPExcel/Reader','SYLK.php',75],['question/type/numerical','questiontype.php',507],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/zend/Zend/Gdata/App/Extension','Control.php',50],['lib/minify/lib','FirePHP.php',189],['lib/lessphp/Tree/Mixin','Definition.php',18],['lib/zend/Zend/Service/Yahoo','LocalResultSet.php',61],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['admin/tool/langimport/classes','controller.php',48],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['lib/horde/framework/Horde/Stream','String.php',27],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',454],['lib/horde/framework/Horde/Stream','Temp.php',25],['lib/alfresco/Service','VersionHistory.php',34],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceSchedule.php',81],['mod/quiz/classes','repaginate.php',49],['lib/zend/Zend/Validate','Isbn.php',65],['lib/zend/Zend/Service/Amazon','Image.php',55],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['lib/classes/lock','db_record_lock_factory.php',61],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/zend/Zend/Gdata/Spreadsheets/Extension','Cell.php',76],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['lib/horde/framework/Horde/Text','Flowed.php',75],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/zend/Zend/Gdata/Gapps/Extension','Login.php',111],['mod/workshop/form/rubric','lib.php',105],['cohort','locallib.php',37],['cohort','locallib.php',101],['lib/zend/Zend/XmlRpc/Value','DateTime.php',53],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueMessage.php',52],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/zend/Zend/Amf/Parse','Serializer.php',40],['lib/google/src/Google/Service','GroupsMigration.php',38],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['lib/zend/Zend/Gdata/Gapps','ServiceException.php',61],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/zend/Zend/XmlRpc','Fault.php',100],['lib/zend/Zend/Gdata','Photos.php',124],['question/type/calculated','datasetdefinitions_form.php',53],['lib/phpexcel/PHPExcel/Reader','Excel5.php',424],['question/type/shortanswer','question.php',43],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/zend/Zend/Service','LiveDocx.php',67],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/google/src/Google/Auth','AppIdentity.php',38],['lib/zend/Zend/Gdata/Exif/Extension','FocalLength.php',49],['lib/zend/Zend/Gdata/App/Extension','Id.php',43],['lib/zend/Zend/Gdata/Books/Extension','PreviewLink.php',42],['mod/chat','locallib.php',179],['mod/chat','locallib.php',227],['lib/google/src/Google/Service','Licensing.php',38],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['lib/zend/Zend/Server/Method','Definition.php',64],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetParticipantStatusRequest.php',53],['question/classes/bank','column_base.php',44],['lib/zend/Zend/XmlRpc/Server','Fault.php',67],['lib/zend/Zend/Amf/Value/Messaging','AcknowledgeMessage.php',40],['grade/report/singleview/classes/local/ui','range.php',38],['lib/zend/Zend/Gdata/Books/Extension','Viewability.php',45],['mod/book','locallib.php',405],['lib/zend/Zend/XmlRpc/Value','Array.php',39],['lib/zend/Zend/Service/Technorati','Result.php',63],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceTemplateRequest.php',46],['lib/zend/Zend/Gdata/Exif/Extension','Exposure.php',49],['lib/zend/Zend/Gdata/Exif','Feed.php',58],['question/type/randomsamatch/tests','helper.php',121],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/zend/Zend/Gdata/Spreadsheets','CellEntry.php',49],['lib/zend/Zend/Gdata/Photos/Extension','PhotoId.php',49],['lib/zend/Zend/Http/Response','Stream.php',120],['lib','modinfolib.php',429],['lib','modinfolib.php',1680],['lib','modinfolib.php',2516],['lib/dtl','database_importer.php',61],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['lib/zend/Zend/Gdata/Exif/Extension','Iso.php',49],['lib/zend/Zend/Gdata/YouTube','VideoQuery.php',48],['lib/lessphp/Tree','Variable.php',20],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['lib/google/src/Google/Signer','P12.php',33],['lib/lessphp/Tree','DetachedRuleset.php',15],['lib/zend/Zend/Gdata/YouTube','SubscriptionEntry.php',138],['lib/zend/Zend/Http/Client/Adapter','Test.php',81],['','mdeploy.php',120],['lib/ddl','sqlite_sql_generator.php',73],['lib/google/src/Google/Service','Drive.php',70],['mod/quiz/classes','admin_review_setting.php',82],['lib','pdflib.php',161],['lib/zend/Zend/Gdata/YouTube/Extension','Duration.php',45],['mod/quiz/report','attemptsreport_options.php',95],['lib/zend/Zend/Validate/File','Md5.php',60],['backup/util/helper','restore_questions_parser_processor.class.php',42],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/filebrowser','file_info_context_coursecat.php',39],['badges','renderer.php',972],['badges','renderer.php',1013],['badges','renderer.php',1077],['badges','renderer.php',1110],['badges','renderer.php',1136],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['lib/zend/Zend/Gdata/Gapps/Extension','Nickname.php',59],['lib/zend/Zend/Gdata/YouTube/Extension','MediaRating.php',54],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['mnet/xmlrpc','serverlib.php',674],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/simplepie/library/SimplePie','gzdecode.php',186],['lib/jabber/XMPP','Roster.php',48],['lib/classes/dml','recordset_walk.php',64],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',129],['lib/google/src/Google/Service','Books.php',57],['mod/assign/feedback/offline','importgradeslib.php',60],['lib/zend/Zend/Gdata','App.php',165],['lib/pear/Net','GeoIP.php',323],['lib/zend/Zend/Gdata/Photos/Extension','Name.php',50],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['lib/zend/Zend/Gdata/Docs','Query.php',75],['lib/zend/Zend/Gdata/YouTube/Extension','Occupation.php',44],['lib/zend/Zend/Gdata/Exif/Extension','Time.php',49],['cache/tests/fixtures','lib.php',325],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['lib/google/src/Google/Cache','Memcache.php',42],['lib/dml','sqlsrv_native_moodle_database.php',47],['backup/util/structure','backup_optigroup_element.class.php',51],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/simplepie/library/SimplePie','Caption.php',98],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['lib/classes','collator.php',58],['lib/zend/Zend/Service/Delicious','PostList.php',56],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/zend/Zend/Service/Amazon/Ec2','Abstract.php',91],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['mod/workshop/form/numerrors','lib.php',102],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateRequest.php',46],['report/log/classes','table_log.php',52],['lib/zend/Zend/Gdata/YouTube','CommentEntry.php',48],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/zend/Zend/Gdata/YouTube/Extension','Status.php',44],['lib/adodb','adodb-exceptions.inc.php',28],['backup/util/helper','backup_array_iterator.class.php',39],['lib/zend/Zend/Rest','Client.php',54],['lib/zend/Zend/Gdata/YouTube/Extension','Company.php',44],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceTemplateParticipantRequest.php',53],['question/engine','lib.php',770],['question/engine','lib.php',1000],['question/engine','lib.php',1048],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/google/src/Google/Service','Bigquery.php',59],['backup/moodle2','restore_course_task.class.php',41],['lib/zend/Zend/Gdata/Media/Extension','MediaRestriction.php',54],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/phpexcel/PHPExcel/Writer','CSV.php',86],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['cache','disabledlib.php',44],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['webservice/xmlrpc','locallib.php',85],['lib/google/src/Google/Service','Freebase.php',38],['mod/lti/service/profile/classes/local/service','profile.php',41],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['backup/util/settings','backup_setting.class.php',43],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/alfresco/Service','ContentData.php',38],['enrol/ldap','lib.php',36],['lib/zend/Zend/Validate/File','MimeType.php',112],['lib/zend/Zend/Gdata/Gbase/Extension','BaseAttribute.php',47],['lib/zend/Zend/Gdata/Gapps','NicknameEntry.php',79],['lib/minify/lib/Minify','HTML.php',49],['lib/zend/Zend/Gdata/Extension','OriginalEvent.php',56],['lib/zend/Zend/Gdata/YouTube','InboxFeed.php',55],['lib/google/src/Google/Service','Groupssettings.php',40],['availability/classes','info.php',55],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['lib/tests','navigationlib_test.php',472],['lib/tests','navigationlib_test.php',530],['lib/tests','navigationlib_test.php',557],['lib/zend/Zend/Service/DeveloperGarden/Request/IpLocation','LocateIPRequest.php',58],['mod/quiz/report/statistics/classes','calculated.php',43],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['cache/stores/memcached','lib.php',107],['lib/zend/Zend/Validate','Between.php',89],['lib/zend/Zend/Gdata/Media/Extension','MediaGroup.php',183],['user/selector','lib.php',85],['user/selector','lib.php',674],['lib/google/src/Google/Service','YouTube.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/zend/Zend/Gdata','Exif.php',51],['backup/util/helper','backup_helper.class.php',380],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',154],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',71],['lib/zend/Zend/Gdata','YouTube.php',192],['lib/zend/Zend/Gdata/Calendar/Extension','Link.php',48],['blocks','edit_form.php',47],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign','locallib.php',149],['mod/assign','locallib.php',7411],['grade/report/user','lib.php',188],['lib/zend/Zend/Validate/Barcode','Code93ext.php',47],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','ChangeQuotaPool.php',47],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',294],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['lib/zend/Zend/Gdata','Media.php',51],['lib/zend/Zend/Gdata/Gapps/Extension','Quota.php',59],['lib/zend/Zend/Amf/Value','ByteArray.php',38],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/behat/form_field','behat_form_field.php',59],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['backup/moodle2','restore_subplugin.class.php',45],['lib/zend/Zend/Gdata/Spreadsheets','SpreadsheetFeed.php',54],['backup/util/structure','base_processor.class.php',49],['lib/zend/Zend/Gdata/Calendar/Extension','Timezone.php',45],['lib/zend/Zend/Validate','Ip.php',56],['lib/zend/Zend/Gdata/Extension','OpenSearchTotalResults.php',44],['badges/criteria','award_criteria_activity.php',45],['lib/zend/Zend/Service/Technorati','DailyCountsResultSet.php',67],['lib/zend/Zend/XmlRpc/Value','Collection.php',40],['lib/google/src/Google/Service','Coordinate.php',47],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['lib/classes/output','mustache_pix_helper.php',43],['lib/zend/Zend/Amf/Value','MessageBody.php',81],['user/classes/output/myprofile','node.php',82],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['lib/zend/Zend','Registry.php',186],['lib/lessphp/Exception','Chunk.php',19],['lib/dtl','database_mover.php',33],['lib/zend/Zend/Http','CookieJar.php',106],['lib/zend/Zend/Gdata/Extension','Transparency.php',44],['lib/zend/Zend/Gdata/Media/Extension','MediaText.php',64],['lib/phpexcel/PHPExcel/RichText','TextElement.php',43],['lib/simplepie/library/SimplePie','Enclosure.php',219],['lib/google/src/Google/Service','Webmasters.php',46],['lib/lessphp/Tree','Value.php',14],['lib/simplepie/library','SimplePie.php',611],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/zend/Zend/Gdata/App','CaptchaRequiredException.php',64],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['mod/folder','renderer.php',139],['lib/google/src/Google/Service','Webfonts.php',38],['lib/zend/Zend/Gdata/DublinCore/Extension','Description.php',44],['admin/roles/classes','admins_potential_selector.php',30],['lib/zend/Zend/Soap/Client','Local.php',52],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/lessphp/Tree','Negative.php',14],['mod/quiz','override_form.php',58],['lib/classes/session','file.php',40],['lib/google/src/Google/Auth','OAuth2.php',55],['admin/roles/classes','check_users_selector.php',38],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/alfresco/Service','Store.php',31],['lib/google/src/Google/Service','Audit.php',39],['lib/zend/Zend/Gdata','Gbase.php',95],['mod/wiki','pagelib.php',94],['mod/wiki','pagelib.php',381],['mod/wiki','pagelib.php',986],['mod/wiki','pagelib.php',1195],['mod/wiki','pagelib.php',2201],['mod/wiki','pagelib.php',2429],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['calendar','lib.php',1968],['calendar','lib.php',2709],['lib/zend/Zend/Gdata/Photos','AlbumFeed.php',133],['lib/phpmailer','class.phpmailer.php',572],['lib/google/src/Google/Service','Datastore.php',46],['lib/google/src/Google/Service','YouTubeAnalytics.php',45],['lib/lessphp/Tree','Keyword.php',17],['lib/zend/Zend/Service/Amazon','Sqs.php',70],['backup/util/plan','backup_structure_step.class.php',38],['availability/condition/profile/classes','condition.php',73],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/simplepie/library/SimplePie','Author.php',81],['report/loglive/classes','table_log.php',50],['lib','completionlib.php',243],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/zend/Zend/Gdata/Exif/Extension','Make.php',49],['lib/dml','moodle_database.php',139],['lib/lessphp/Tree','Media.php',18],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes/update','info.php',48],['backup/moodle2','backup_subplugin.class.php',44],['backup/util/ui','base_moodleform.class.php',68],['lib/zend/Zend/Gdata/DublinCore/Extension','Creator.php',44],['lib/alfresco/Service','Association.php',28],['lib/zend/Zend/Gdata/Geo/Extension','GeoRssWhere.php',62],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/zend/Zend/Service','Twitter.php',125],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['admin/tool/log/classes/log','store.php',30],['lib/phpexcel/PHPExcel','Comment.php',101],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CommitConferenceRequest.php',46],['filter','local_settings_form.php',33],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['badges/classes','assertion.php',49],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateParticipantRequest.php',67],['lib/phpexcel/PHPExcel','RichText.php',45],['lib/zend/Zend/Gdata/App','Base.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/filestorage','file_storage.php',57],['lib/adodb/drivers','adodb-postgres64.inc.php',125],['lib/adodb/drivers','adodb-postgres64.inc.php',904],['lib/phpexcel/PHPExcel/Chart','Title.php',53],['lib/zend/Zend/Mime','Part.php',51],['lib/phpexcel/PHPExcel','Worksheet.php',335],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',78],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/zend/Zend/Gdata/DublinCore/Extension','Language.php',44],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',77],['lib/alfresco/Service/WebService','AlfrescoWebService.php',30],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['lib/google/src/Google/Service','ShoppingContent.php',47],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib/zend/Zend/Gdata/Spreadsheets','ListQuery.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['mod/workshop/allocation/scheduled','lib.php',48],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib/zend/Zend/Gdata/Spreadsheets','ListEntry.php',62],['repository/merlot','lib.php',37],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/lessphp/Visitor','extendFinder.php',15],['lib/zend/Zend/Gdata/YouTube/Extension','MediaGroup.php',112],['mod/quiz/report/grading','gradingsettings_form.php',44],['lib/zend/Zend/Service/Simpy','Note.php',104],['lib/zend/Zend/Gdata/Photos/Extension','Rotation.php',51],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',89],['lib/editor/tinymce/classes','plugin.php',49],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/zend/Zend/XmlRpc/Value','Integer.php',40],['lib/zend/Zend/Validate/File','Upload.php',74],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',201],['admin/roles/classes','capability_table_with_risks.php',46],['lib/zend/Zend/Gdata/Extension','EntryLink.php',52],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib','outputrequirementslib.php',166],['lib/google/src/Google/Service','Appsactivity.php',49],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/zend/Zend/Loader','Autoloader.php',446],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/zend/Zend/Gdata','Docs.php',87],['lib/alfresco/Service/Logger','Logger.php',27],['lib/zend/Zend/Gdata/App/Extension','Logo.php',43],['lib/dml','pgsql_native_moodle_recordset.php',44],['backup/cc/cc_lib','cc_version11.php',57],['lib','weblib.php',315],['lib','weblib.php',3025],['lib','weblib.php',3325],['lib','weblib.php',3360],['lib','weblib.php',3435],['backup/cc/cc_lib','xmlbase.php',52],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['mod/lesson','locallib.php',2007],['mod/lesson','locallib.php',2602],['lib/zend/Zend/Service/LiveDocx','MailMerge.php',61],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',101],['lib/zend/Zend/Server/Reflection','ReturnValue.php',47],['lib/minify/lib/Minify','Build.php',77],['lib/horde/framework/Horde','Variables.php',60],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/phpexcel/PHPExcel','NamedRange.php',73],['lib/zend/Zend/Gdata/Extension','OpenSearchStartIndex.php',44],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['lib/zend/Zend/Service/Amazon','OfferSet.php',79],['grade/export/txt','grade_export_txt.php',27],['admin/roles/classes','allow_override_page.php',31],['lib/lessphp/Tree','Assignment.php',15],['lib/zend/Zend/Gdata/Books/Extension','ThumbnailLink.php',42],['lib/zend/Zend/Gdata/YouTube/Extension','Uploaded.php',44],['lib/zend/Zend/Gdata/Extension','AttendeeStatus.php',44],['lib/tcpdf/include/barcodes','qrcode.php',631],['lib/zend/Zend/Gdata/Photos/Extension','Weight.php',51],['enrol','locallib.php',125],['enrol','locallib.php',1240],['enrol','locallib.php',1363],['enrol','locallib.php',1414],['enrol','locallib.php',1447],['lib/lessphp/Visitor','toCSS.php',13],['question/classes/statistics/questions','calculator.php',66],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['backup/util/helper','restore_prechecks_helper.class.php',213],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',605],['grade/edit/tree','lib.php',638],['grade/edit/tree','lib.php',804],['lib/zend/Zend/Gdata','Geo.php',56],['lib/zend/Zend/Gdata/Books','CollectionFeed.php',41],['lib/classes','string_manager_standard.php',53],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',163],['admin/tool/installaddon/classes','validator.php',223],['admin/tool/generator/classes','backend.php',84],['lib/zend/Zend/Service/WindowsAzure/Credentials','SharedAccessSignature.php',53],['lib/zend/Zend/Gdata/Spreadsheets/Extension','Custom.php',49],['availability/condition/completion/classes','condition.php',48],['question/classes/statistics/questions','calculated.php',181],['lib/lessphp/Tree','Javascript.php',20],['mod/quiz','locallib.php',1898],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',89],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',62],['lib/zend/Zend/Gdata/DublinCore/Extension','Date.php',45],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['lib/zend/Zend/Loader','PluginLoader.php',95],['lib/zend/Zend/Gdata/YouTube/Extension','Description.php',44],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/zend/Zend/Gdata/App/Extension','Generator.php',45],['lib/zend/Zend/Gdata/DublinCore/Extension','Rights.php',44],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['repository/skydrive','lib.php',42],['lib/google/src/Google/Service','SQLAdmin.php',48],['lib/zend/Zend/Gdata/YouTube/Extension','NoEmbed.php',44],['lib/zend/Zend/Gdata/Exif/Extension','ImageUniqueId.php',49],['lib/simplepie/library/SimplePie','Item.php',82],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',214],['lib/zend/Zend/Validate/File','IsImage.php',53],['lib/zend/Zend/Date','Exception.php',39],['lib/zend/Zend/Amf/Adobe','Introspector.php',65],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/zend/Zend/Service','ReCaptcha.php',117],['lib/zend/Zend/Gdata/Health','ProfileEntry.php',61],['lib/zend/Zend/Server/Reflection','Prototype.php',45],['admin/roles/classes','allow_switch_page.php',33],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',140],['lib/google/src/Google/Service','Fitness.php',57],['filter/emoticon/tests','filter_test.php',68],['backup/util/helper','convert_helper.class.php',378],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['repository/webdav','lib.php',38],['repository/dropbox','locallib.php',46],['lib/lessphp/Exception','Parser.php',30],['lib/filestorage','tgz_packer.php',726],['lib/filestorage','tgz_packer.php',808],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['lib/classes/output','mustache_javascript_helper.php',40],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/zend/Zend/Gdata/YouTube/Extension','FirstName.php',44],['lib/zend/Zend/Service/WindowsAzure/Storage','Queue.php',83],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/zend/Zend/Gdata/Media/Extension','MediaDescription.php',53],['lib/google/src/Google/Service','TagManager.php',66],['lib/zend/Zend/Server','Abstract.php',89],['cache/classes','config.php',80],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',579],['lib','outputcomponents.php',655],['lib','outputcomponents.php',773],['lib','outputcomponents.php',915],['lib','outputcomponents.php',999],['lib','outputcomponents.php',2178],['lib','outputcomponents.php',2217],['lib','outputcomponents.php',2290],['lib','outputcomponents.php',2371],['lib','outputcomponents.php',2574],['lib','outputcomponents.php',2622],['lib','outputcomponents.php',2682],['lib','outputcomponents.php',2855],['lib','outputcomponents.php',3025],['lib','outputcomponents.php',3129],['lib','outputcomponents.php',3196],['lib','outputcomponents.php',3324],['lib','outputcomponents.php',3608],['lib','outputcomponents.php',3637],['lib','outputcomponents.php',3663],['lib','outputcomponents.php',3685],['lib','outputcomponents.php',3714],['lib','outputcomponents.php',3746],['lib/zend/Zend/Validate/Barcode','Code25.php',53],['lib/zend/Zend/Gdata/YouTube','CommentFeed.php',53],['lib/dtl','string_xml_database_importer.php',34],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/simplepie/library/SimplePie','Cache.php',69],['backup/util/ui','renderer.php',813],['grade/export/xls','grade_export_xls.php',24],['lib/google/src/Google/Service','Directory.php',110],['lib/zend/Zend/Gdata/YouTube/Extension','State.php',47],['lib/phpexcel/PHPExcel/Style','Alignment.php',97],['mod/quiz/report/statistics','statistics_table.php',45],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/zend/Zend/Gdata/DublinCore/Extension','Title.php',44],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib/zend/Zend/Validate/Barcode','Code93.php',67],['lib/lessphp','Functions.php',15],['lib/adodb/drivers','adodb-postgres7.inc.php',78],['lib/adodb/drivers','adodb-postgres7.inc.php',273],['lib/adodb/drivers','adodb-postgres7.inc.php',304],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetRunningConferenceRequest.php',46],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceRequest.php',74],['lib/zend/Zend/Validate','EmailAddress.php',118],['mod/workshop','locallib.php',178],['mod/workshop','locallib.php',2801],['mod/workshop','locallib.php',3236],['mod/workshop','locallib.php',3472],['mod/workshop','locallib.php',3714],['mod/workshop','locallib.php',3800],['mod/workshop','locallib.php',3885],['mod/workshop','locallib.php',3904],['lib/zend/Zend/XmlRpc/Value','Struct.php',39],['lib/zend/Zend/Gdata/Books/Extension','Embeddability.php',45],['lib/horde/framework/Horde/Mime','Mdn.php',35],['cache/stores/static','lib.php',127],['lib','blocklib.php',54],['lib','blocklib.php',152],['lib/zend/Zend/Gdata/Books/Extension','Review.php',46],['lib','componentlib.class.php',597],['lib','componentlib.class.php',821],['lib/zend/Zend/Validate/Barcode','Code39.php',66],['lib/filebrowser','file_info_context_module.php',47],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',42],['question/engine','states.php',61],['lib/jabber/XMPP','XMLStream.php',171],['lib/jabber/XMPP','XMPP.php',101],['lib/classes/lock','lock_factory.php',39],['lib/tests','collator_test.php',310],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['course/format','lib.php',78],['lib/ddl','sql_generator.php',175],['lib/zend/Zend/XmlRpc/Generator','GeneratorAbstract.php',35],['mod/quiz','accessmanager.php',45],['lib/zend/Zend/Amf/Value','TraitsInfo.php',53],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['lib/zend/Zend/Service/Nirvanix','Response.php',43],['lib','boxlib.php',293],['repository/flickr_public','image.php',34],['lib/google/src/Google/Service','AppState.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/filestorage','zip_archive.php',66],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/zend/Zend/Server/Method','Prototype.php',49],['lib/zend/Zend/Service/Technorati','Author.php',90],['mod/workshop/form/comments','lib.php',99],['lib/phpexcel/PHPExcel/RichText','Run.php',43],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',89],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',69],['lib/zend/Zend/Service/Simpy','WatchlistFilter.php',48],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceRequest.php',46],['lib/zend/Zend/Gdata/Photos','UserEntry.php',131],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['lib/zend/Zend/Gdata/Spreadsheets','ListFeed.php',54],['lib/phpexcel/PHPExcel','DocumentProperties.php',131],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',62],['lib/lessphp/Tree','Paren.php',14],['lib/zend/Zend/Gdata/Photos/Extension','Thumbnail.php',50],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['lib/filebrowser','file_info_context_user.php',39],['lib/google/src/Google/Service','CivicInfo.php',40],['lib/zend/Zend/Gdata/YouTube/Extension','Private.php',44],['lib/zend/Zend/Gdata/YouTube/Extension','Music.php',44],['backup/moodle2','restore_block_task.class.php',45],['lib/zend/Zend','Gdata.php',99],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/phpunit/classes','hint_resultprinter.php',37],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['admin/roles/classes','capability_table_base.php',51],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['lib/google/src/Google/Service','Container.php',44],['lib/zend/Zend/Service/Simpy','TagSet.php',47],['lib/phpexcel/PHPExcel/Chart','Legend.php',82],['question/type/calculated/tests','helper.php',205],['lib/phpexcel/PHPExcel/Reader','CSV.php',103],['availability/classes','result.php',46],['lib/zend/Zend/XmlRpc/Value','Double.php',40],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',462],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1700],['lib/horde/framework/Horde/Mime','Related.php',32],['report/log/classes','renderable.php',93],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/phpexcel/PHPExcel/Style','Font.php',108],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['course/tests/fixtures','course_capability_assignment.php',60],['lib/zend/Zend/Service/Amazon','ResultSet.php',68],['lib/zend/Zend/Validate','Callback.php',69],['lib/zend/Zend/Gdata/Books','CollectionEntry.php',41],['lib/zend/Zend/Gdata/DublinCore/Extension','Publisher.php',44],['lib/zend/Zend/Gdata/Spreadsheets','WorksheetEntry.php',56],['badges/lib','bakerlib.php',52],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['lib/portfolio','caller.php',67],['lib/zend/Zend/Validate/File','Sha1.php',60],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/zend/Zend/Gdata/Media','Feed.php',58],['lib/zend/Zend/Gdata/YouTube/Extension','LastName.php',44],['mod/data','locallib.php',64],['mod/data','locallib.php',431],['lib/zend/Zend/Gdata/App/Extension','Content.php',44],['lib/classes/update','checker_exception.php',37],['backup/cc/cc_lib','cc_manifest.php',45],['lib','odslib.class.php',42],['lib','odslib.class.php',121],['lib','odslib.class.php',419],['lib','odslib.class.php',824],['lib/zend/Zend/Gdata/Books/Extension','AnnotationLink.php',42],['lib/zend/Zend/Gdata/Calendar/Extension','Color.php',46],['backup/util/helper','restore_structure_parser_processor.class.php',41],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/alfresco/Service','Session.php',39],['grade/report/singleview/classes/local/ui','empty_element.php',38],['enrol/database','settingslib.php',34],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',125],['lib/google/src/Google/Service','AndroidPublisher.php',51],['lib/zend/Zend/Service','StrikeIron.php',43],['lib/zend/Zend/Gdata/Books/Extension','InfoLink.php',41],['lib/lessphp/SourceMap','Generator.php',82],['filter/urltolink/tests','filter_test.php',209],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/zend/Zend/Service/Amazon','Item.php',112],['repository','lib.php',116],['repository','lib.php',533],['admin/roles/classes','define_role_table_basic.php',31],['lib/phpexcel/PHPExcel','WorksheetIterator.php',54],['lib/zend/Zend/Gdata/Photos/Extension','NumPhotosRemaining.php',50],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',505],['mod/quiz','attemptlib.php',2058],['mod/quiz','attemptlib.php',2113],['lib/zend/Zend/Server/Reflection','Node.php',51],['lib/zend/Zend/Gdata/Media/Extension','MediaTitle.php',49],['lib/zend/Zend','Date.php',123],['lib/zend/Zend','Mime.php',290],['lib','accesslib.php',5301],['lib','accesslib.php',5846],['lib','accesslib.php',6116],['lib','accesslib.php',6357],['lib','accesslib.php',6544],['lib','accesslib.php',6776],['lib','accesslib.php',6998],['lib','accesslib.php',7240],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1180],['lib/zend/Zend/Validate','Ccnum.php',62],['lib/zend/Zend/Gdata/Extension','EventStatus.php',44],['lib/google/src/Google/Verifier','Pem.php',29],['lib/zend/Zend/Service/Technorati','BlogInfoResult.php',74],['admin/tool/log/classes','setting_managestores.php',30],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['backup/util/ui','restore_moodleform.class.php',34],['grade/report/singleview/classes/local/ui','element.php',47],['mod/quiz/report','attemptsreport_table.php',76],['lib/lessphp/Tree','Attribute.php',16],['lib/phpexcel/PHPExcel/Style','Supervisor.php',52],['lib/zend/Zend/Gdata/Media/Extension','MediaCategory.php',50],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/zend/Zend/Gdata/Photos/Extension','Checksum.php',51],['lib/lessphp/Tree','Expression.php',16],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['course/format','renderer.php',44],['lib/zend/Zend/XmlRpc/Value','Boolean.php',40],['blocks/rss_client','editfeed.php',36],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['question/type/numerical','question.php',321],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['lib/typo3','class.t3lib_cs.php',509],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/zend/Zend/Gdata/Health','ProfileListEntry.php',49],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['cache/stores/memcache','lib.php',120],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['lib/zend/Zend/Gdata/Calendar/Extension','WebContent.php',47],['lib/zend/Zend/Gdata/Photos/Extension','Id.php',50],['lib/google/src/Google/Service','Games.php',60],['lib/zend/Zend/Validate/File','Size.php',92],['lib/classes/lock','file_lock_factory.php',57],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',64],['lib','filelib.php',2700],['lib','filelib.php',3560],['lib/classes/session','database.php',52],['lib/zend/Zend/Gdata/YouTube/Extension','Movies.php',44],['grade','lib.php',103],['grade','lib.php',785],['availability/condition/grouping/classes','condition.php',46],['lib/zend/Zend/Service/Technorati','SearchResult.php',84],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/zend/Zend/XmlRpc','Server.php',186],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/htmlpurifier','HTMLPurifier.php',104],['lib/zend/Zend/Gdata/Media/Extension','MediaPlayer.php',59],['lib/phpexcel/PHPExcel','Cell.php',122],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',248],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['backup/util/helper','restore_log_rule.class.php',62],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',108],['lib/zend/Zend/Server/Reflection','Class.php',66],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['repository/flickr','lib.php',51],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/google/src/Google/Service','MapsEngine.php',66],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['lib/filestorage','tgz_extractor.php',119],['lib/zend/Zend/Soap','Client.php',142],['lib/zend/Zend/Gdata/Calendar/Extension','Hidden.php',45],['cache/classes','factory.php',149],['lib/zend/Zend/Gdata/Media/Extension','MediaCredit.php',54],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['mod/lti/classes/local/ltiservice','resource_base.php',62],['lib/zend/Zend/Http','Response.php',132],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceListRequest.php',63],['backup/util/ui','backup_moodleform.class.php',41],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['comment','lib.php',100],['lib/phpexcel','PHPExcel.php',354],['grade/export/ods','grade_export_ods.php',24],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/zend/Zend/Gdata/YouTube/Extension','Location.php',44],['lib/lessphp/Tree','Dimension.php',15],['lib/phpexcel/PHPExcel/Worksheet','Row.php',54],['lib/phpexcel/PHPExcel/Writer','HTML.php',135],['lib/zend/Zend/Service/Technorati','TagsResultSet.php',41],['backup/moodle2','backup_theme_plugin.class.php',61],['lib/zend/Zend/Gdata','Extension.php',43],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['mod/forum/classes','subscriber_selector_base.php',53],['lib/zend/Zend','Auth.php',45],['lib/phpexcel/PHPExcel/Style','Borders.php',121],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CreateConferenceRequest.php',67],['lib/zend/Zend/Gdata/Calendar','ListFeed.php',54],['lib/zend/Zend/Gdata/Extension','Visibility.php',44],['webservice/xmlrpc','lib.php',42],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',76],['lib/zend/Zend/Gdata/App','MediaEntry.php',57],['lib/horde/framework/Horde/Mime','Part.php',261],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['question/classes/engine/variants','least_used_strategy.php',51],['lib/horde/framework/Horde/Support','Array.php',21],['lib/zend/Zend/Gdata/YouTube/Extension','Statistics.php',93],['lib/zend/Zend/Gdata/Photos/Extension','BytesUsed.php',50],['lib','tablelib.php',127],['lib','tablelib.php',1400],['lib','tablelib.php',1723],['lib/zend/Zend/Gdata/App/Extension','Uri.php',43],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/zend/Zend/Gdata/Media/Extension','MediaCopyright.php',53],['lib/zend/Zend/Gdata/DublinCore/Extension','Identifier.php',44],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/zend/Zend/Gdata/Gbase','Feed.php',49],['availability/condition/date/classes','condition.php',52],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['admin/tool/generator/classes','course_backend.php',116],['lib/google/src/Google/Service','Prediction.php',51],['cache/stores/session','lib.php',131],['cache/classes','dummystore.php',62],['lib/zend/Zend/XmlRpc/Server','System.php',39],['lib/zend/Zend/Service/WindowsAzure/Storage','TableInstance.php',50],['backup/util/settings/course','course_backup_setting.class.php',25],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['mod/lesson','override_form.php',58],['lib/zend/Zend/Service/Simpy','WatchlistSet.php',47],['lib/google/src/Google/Service','Compute.php',78],['badges/criteria','award_criteria.php',127],['lib/zend/Zend/Gdata/Calendar/Extension','Selected.php',45],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['lib/zend/Zend/Validate','PostCode.php',65],['lib/dml','oci_native_moodle_temptables.php',40],['lib/zend/Zend/Gdata/Photos/Extension','CommentingEnabled.php',51],['lib/simplepie/library/SimplePie','Category.php',81],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',45],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['user/classes/output/myprofile','category.php',68],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['mod/wiki/parser','parser.php',98],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['repository/googledocs','lib.php',65],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/zend/Zend/Validate/File','Extension.php',71],['mod/imscp','locallib.php',289],['lib/classes/session','memcache.php',50],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/zend/Zend/Service','Simpy.php',53],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/zend/Zend/Gdata/Gapps','EmailListRecipientQuery.php',54],['lib/zend/Zend/Gdata/YouTube','PlaylistVideoEntry.php',55],['lib/zend/Zend/Gdata/Photos','CommentEntry.php',85],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/zend/Zend/Gdata/YouTube','InboxEntry.php',92],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/phpexcel/PHPExcel/Style','Border.php',75],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateParticipantRequest.php',53],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['lib/zend/Zend/Gdata/Exif/Extension','Distance.php',49],['lib/phpexcel/PHPExcel/Writer','PDF.php',46],['lib/zend/Zend/Gdata/Photos/Extension','Size.php',50],['lib/google/src/Google/Service','CloudMonitoring.php',42],['backup/util/xml/output','memory_xml_output.class.php',37],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/zend/Zend/Service','Delicious.php',112],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib','outputrenderers.php',117],['lib','outputrenderers.php',282],['lib','outputrenderers.php',405],['lib','outputrenderers.php',4280],['lib','outputrenderers.php',4533],['lib/zend/Zend/Service/Amazon','ListmaniaList.php',44],['lib/zend/Zend/Service','Flickr.php',54],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['lib/google/src/Google/Logger','File.php',49],['backup','backup.class.php',146],['lib/zend/Zend/Gdata/App/Extension','Updated.php',43],['lib/zend/Zend/Gdata/YouTube','PlaylistVideoFeed.php',55],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',137],['lib/zend/Zend/Gdata/Geo','Feed.php',51],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',107],['backup/util/loggers','file_logger.class.php',35],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',57],['lib/zend/Zend/Gdata/Extension','Reminder.php',48],['course/format/topics','renderer.php',38],['mod/lesson/classes','file_info.php',45],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',62],['lib/minify/lib/HTTP','Encoder.php',75],['lib/zend/Zend/Gdata/App/Extension','Name.php',43],['lib/google/src/Google/Service','Calendar.php',50],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['lib/dml','database_column_info.php',137],['lib/zend/Zend/Gdata/YouTube/Extension','Gender.php',44],['lib/zend/Zend/Service','Yahoo.php',49],['lib/zend/Zend/Service/Amazon','SimilarProduct.php',44],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/horde/framework/Horde','Stream.php',50],['lib/google/src/Google/Service','Analytics.php',76],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['lib/xmldb','xmldb_file.php',43],['lib/zend/Zend/Gdata/YouTube','PlaylistListEntry.php',97],['lib/zend/Zend/Service/Amazon/Ec2','Response.php',78],['lib/zend/Zend/Soap/Wsdl/Strategy','Composite.php',60],['lib/google/src/Google/Service','Tasks.php',44],['lib/zend/Zend/XmlRpc','Response.php',68],['lib/horde/framework/Horde/Exception','NotFound.php',15],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['lib/zend/Zend/Gdata/Books','VolumeEntry.php',131],['question','previewlib.php',122],['mod/wiki','renderer.php',537],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',62],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',393],['mod/assign','renderable.php',517],['mod/assign','renderable.php',576],['mod/assign','renderable.php',613],['mod/assign','renderable.php',653],['mod/assign','renderable.php',706],['mod/assign','renderable.php',760],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/zend/Zend/Service/DeveloperGarden/Request/SmsValidation','Invalidate.php',46],['lib/zend/Zend/Service/Yahoo','ImageResult.php',97],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',183],['mod/quiz/classes/question/bank','custom_view.php',44],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['lib/zend/Zend/Amf/Adobe','Auth.php',56],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/zend/Zend/Amf/Parse','Deserializer.php',45],['lib/zend/Zend/Service/Delicious','SimplePost.php',56],['lib/zend/Zend/Service/Technorati','ResultSet.php',112],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1211],['cache/classes','loaders.php',1606],['lib/zend/Zend/Gdata/Gbase','Entry.php',62],['lib/zend/Zend/Validate','Identical.php',64],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['cache/stores/mongodb','lib.php',116],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/zend/Zend/Gdata/App/Extension','Draft.php',44],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceDetail.php',54],['lib/zend/Zend/Service/Yahoo','InlinkDataResult.php',47],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/lessphp/Tree','Directive.php',20],['lib/zend/Zend/Service/Yahoo','VideoResult.php',118],['question/type/calculated','edit_calculated_form.php',51],['lib/classes','string_manager_install.php',43],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/google/src/Google/Logger','Psr.php',37],['grade/report/history/classes/output','user_button.php',40],['lib','externallib.php',129],['lib','externallib.php',426],['lib','externallib.php',457],['lib','externallib.php',488],['lib','externallib.php',517],['lib','externallib.php',649],['lib','externallib.php',684],['lib','externallib.php',782],['backup/util/ui','base_ui_stage.class.php',67],['lib/zend/Zend/Validate','CreditCard.php',136],['lib/zend/Zend/Gdata/Spreadsheets','CellQuery.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['mod/quiz/accessrule','accessrulebase.php',52],['lib/mustache/src/Mustache','Context.php',20],['lib/zend/Zend/Service/DeveloperGarden/Request/VoiceButler','CallStatus.php',46],['lib/zend/Zend/Gdata/Spreadsheets','CellFeed.php',78],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['lib/lessphp/Tree','Color.php',15],['lib/zend/Zend/Service/StrikeIron','Base.php',56],['lib/zend/Zend/Gdata/Exif/Extension','FStop.php',49],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/zend/Zend/Service/Simpy','Tag.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['cache/classes','helper.php',90],['lib/zend/Zend/Soap','Wsdl.php',73],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['lib/zend/Zend/Validate/Barcode','Code25interleaved.php',53],['webservice/soap','locallib.php',162],['lib/lessphp/Tree','Quoted.php',20],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['lib/zend/Zend/Gdata/YouTube','ActivityEntry.php',88],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',517],['lib/zend/Zend/Service','Audioscrobbler.php',65],['lib/zend/Zend/Service/Flickr','ResultSet.php',82],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['lib/zend/Zend/XmlRpc/Request','Stdin.php',47],['lib/zend/Zend/Service/DeveloperGarden/Request/SmsValidation','Validate.php',63],['mod/glossary','locallib.php',481],['lib/google/src/Google/Logger','Abstract.php',121],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/zend/Zend/Http/Client/Adapter','Curl.php',92],['lib/google/src/Google/Service','Oauth2.php',50],['lib/phpmailer','moodle_phpmailer.php',47],['lib/zend/Zend/Validate/Barcode','Intelligentmail.php',47],['repository/skydrive','microsoftliveapi.php',50],['mod/workshop/allocation/manual','lib.php',51],['lib/zend/Zend/Validate/File','Exists.php',62],['lib/xhprof','xhprof_moodle.php',788],['question/classes/bank/search','category_condition.php',60],['lib/markdown','Markdown.php',96],['grade/report/grader','lib.php',104],['lib/zend/Zend/Gdata/YouTube/Extension','Control.php',48],['lib/zend/Zend/Validate','StringLength.php',79],['question/behaviour','behaviourbase.php',50],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib/zend/Zend/Gdata/Photos/Extension','Nickname.php',50],['lib/zend/Zend/Gdata/Exif/Extension','Tags.php',169],['lib/zend/Zend/Uri','Http.php',108],['lib/zend/Zend/Gdata/YouTube/Extension','Hometown.php',44],['cache/stores/file','lib.php',117],['lib/zend/Zend/Service','Amazon.php',75],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/zend/Zend/Gdata/Media/Extension','MediaThumbnail.php',64],['lib/zend/Zend/Service/Yahoo','Image.php',56],['lib/zend/Zend/Gdata','Feed.php',87],['lib/google/src/Google/Service','Storage.php',54],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['admin/tool/uploadcourse/classes','course.php',111],['lib/zend/Zend/Gdata/Extension','Where.php',52],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/zend/Zend/Service/Amazon','S3.php',102],['lib/horde/framework/Horde/Stream','Existing.php',28],['backup/util/output','output_controller.class.php',44],['backup/cc/cc_lib','cc_version1.php',57],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/zend/Zend/Service/Simpy','Link.php',104],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['lib/zend/Zend/Gdata','Calendar.php',77],['lib/zend/Zend/Validate','Date.php',71],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/xmldb','xmldb_table.php',49],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['backup/cc','cc112moodle.php',59],['lib/zend/Zend/XmlRpc/Client','ServerIntrospection.php',43],['lib/zend/Zend/Gdata/Photos','PhotoFeed.php',147],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',407],['lib','adminlib.php',792],['lib','adminlib.php',1139],['lib','adminlib.php',1213],['lib','adminlib.php',1356],['lib','adminlib.php',1553],['lib','adminlib.php',1925],['lib','adminlib.php',2037],['lib','adminlib.php',2103],['lib','adminlib.php',2204],['lib','adminlib.php',2246],['lib','adminlib.php',2284],['lib','adminlib.php',2372],['lib','adminlib.php',2406],['lib','adminlib.php',2563],['lib','adminlib.php',2648],['lib','adminlib.php',2877],['lib','adminlib.php',3033],['lib','adminlib.php',3175],['lib','adminlib.php',3266],['lib','adminlib.php',3430],['lib','adminlib.php',3510],['lib','adminlib.php',3621],['lib','adminlib.php',3772],['lib','adminlib.php',4001],['lib','adminlib.php',4068],['lib','adminlib.php',4286],['lib','adminlib.php',4315],['lib','adminlib.php',4344],['lib','adminlib.php',4368],['lib','adminlib.php',4398],['lib','adminlib.php',4434],['lib','adminlib.php',4469],['lib','adminlib.php',4501],['lib','adminlib.php',4591],['lib','adminlib.php',4624],['lib','adminlib.php',4680],['lib','adminlib.php',4704],['lib','adminlib.php',4730],['lib','adminlib.php',4753],['lib','adminlib.php',4770],['lib','adminlib.php',4815],['lib','adminlib.php',4878],['lib','adminlib.php',4913],['lib','adminlib.php',4956],['lib','adminlib.php',5039],['lib','adminlib.php',5169],['lib','adminlib.php',5211],['lib','adminlib.php',5256],['lib','adminlib.php',5313],['lib','adminlib.php',5329],['lib','adminlib.php',5385],['lib','adminlib.php',5610],['lib','adminlib.php',5664],['lib','adminlib.php',5718],['lib','adminlib.php',5735],['lib','adminlib.php',5783],['lib','adminlib.php',5825],['lib','adminlib.php',5876],['lib','adminlib.php',5932],['lib','adminlib.php',6161],['lib','adminlib.php',6341],['lib','adminlib.php',6435],['lib','adminlib.php',6582],['lib','adminlib.php',7206],['lib','adminlib.php',7658],['lib','adminlib.php',7841],['lib','adminlib.php',8128],['lib','adminlib.php',8275],['lib','adminlib.php',8435],['lib','adminlib.php',8582],['lib','adminlib.php',8746],['lib','adminlib.php',8939],['lib','adminlib.php',8993],['lib','adminlib.php',9055],['lib','adminlib.php',9100],['mod/workshop/eval/best','lib.php',44],['lib/zend/Zend/Gdata/Calendar','EventQuery.php',91],['lib/zend/Zend/Service/Technorati','TagResult.php',94],['lib/google/src/Google/Cache','Null.php',26],['enrol/flatfile','adminlib.php',35],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',52],['mod/quiz/report/statistics','statistics_question_table.php',49],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','AddConferenceTemplateParticipantRequest.php',53],['mod/data','lib.php',66],['mod/data','lib.php',2164],['mod/data','lib.php',2438],['mod/data','lib.php',2459],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/classes/session','memcached.php',51],['lib/google/src/Google/IO','Abstract.php',37],['availability/classes','info_section.php',40],['lib/zend/Zend/Gdata/YouTube/Extension','Books.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/filestorage','stored_file.php',63],['grade/report/history/classes/output','tablelog.php',72],['lib/classes','plugin_manager.php',71],['lib/google/src/Google','Model.php',32],['lib/zend/Zend/Gdata/YouTube/Extension','Relationship.php',44],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/filebrowser','virtual_root_file.php',45],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['availability/condition/grade/classes','condition.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',188],['admin/roles/classes','check_capability_table.php',40],['lib/zend/Zend/Gdata/Media','Entry.php',60],['lib/zend/Zend/Gdata','MimeFile.php',43],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/cc/cc_lib','cc_resources.php',102],['lib/zend/Zend/Loader/Autoloader','Resource.php',62],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/simplepie/library/SimplePie','IRI.php',252],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/zend/Zend/Gdata/Calendar/Extension','SendEventNotifications.php',44],['lib/zend/Zend/Service/WindowsAzure/Storage','TableEntity.php',66],['lib/zend/Zend/Service/DeveloperGarden/Request/LocalSearch','LocalSearchRequest.php',60],['mod/quiz/report/overview','overview_table.php',41],['lib/zend/Zend/Gdata/Photos/Extension','Client.php',51],['backup/cc/cc_lib','cc_converters.php',75],['lib/google/src/Google/Service','AdSense.php',68],['lib/zend/Zend/Gdata','Entry.php',48],['lib','filterlib.php',74],['lib','filterlib.php',382],['lib/lessphp/Tree','Alpha.php',13],['lib/zend/Zend/Gdata','DublinCore.php',51],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/lessphp/Tree','Selector.php',31],['lib/zend/Zend/Service','Nirvanix.php',47],['lib/dtl','file_xml_database_importer.php',34],['mod/workshop','mod_form.php',44],['lib/zend/Zend/Service/Technorati','CosmosResultSet.php',73],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['lib/zend/Zend/Gdata/YouTube/Extension','Age.php',44],['repository/s3','S3.php',176],['repository/s3','S3.php',1994],['repository/s3','S3.php',2346],['lib/lessphp/Tree','Ruleset.php',45],['lib/zend/Zend/Service/Simpy','NoteSet.php',47],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['lib/google/src/Google/Service','Pubsub.php',44],['lib/alfresco/Service','Node.php',51],['lib/zend/Zend/Service','Technorati.php',79],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['admin/tool/monitor/classes','subscription.php',43],['lib/zend/Zend/Gdata/App/Extension','Person.php',61],['backup/moodle2','backup_course_task.class.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['lib/zend/Zend/Gdata/YouTube','ContactEntry.php',61],['lib/zend/Zend/Gdata/Extension','AttendeeType.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['mod/assignment/backup/moodle1','lib.php',223],['lib/zend/Zend/Gdata/Health/Extension','Ccr.php',43],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['mod/quiz','mod_form.php',48],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/zend/Zend/Gdata/Calendar','EventFeed.php',55],['lib/zend/Zend/Gdata/Spreadsheets','DocumentQuery.php',57],['availability/tests/fixtures','mock_condition.php',52],['lib/lessphp','Visitor.php',14],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/minify/lib/Minify/Cache','File.php',9],['lib/zend/Zend/Gdata/Exif','Entry.php',64],['grade/tests','reportlib_test.php',36],['mod/workshop/allocation','lib.php',103],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobInstance.php',57],['lib/zend/Zend/Gdata/Photos/Extension','User.php',50],['admin/tool/uploadcourse/classes','tracker.php',72],['lib/zend/Zend/Service/Technorati','GetInfoResult.php',52],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',61],['lib/zend/Zend/Gdata/YouTube/Extension','Hobbies.php',44],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/zend/Zend/Gdata/Photos/Extension','Width.php',50],['admin/roles/classes','view_role_definition_table.php',28],['lib/phpunit/classes','arraydataset.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/zend/Zend','Exception.php',34],['backup/util/xml/parser/tests','parser_test.php',797],['lib/zend/Zend/Validate/File','ImageSize.php',113],['lib/zend/Zend/Validate','Alnum.php',65],['lib/zend/Zend/Service/Flickr','Image.php',62],['lib/phpexcel/PHPExcel/Calculation','Function.php',71],['lib/horde/framework/Horde/Support','Inflector.php',115],['lib/horde/framework/Horde/Exception','Pear.php',22],['question/classes/bank','random_question_loader.php',61],['lib/phpexcel/PHPExcel/Reader','HTML.php',104],['lib/mustache/src/Mustache/Loader','InlineLoader.php',57],['lib/zend/Zend/Gdata/Photos/Extension','QuotaLimit.php',51],['admin/tool/uploadcourse/classes','processor.php',122],['lib/zend/Zend/Gdata/Spreadsheets','WorksheetFeed.php',40],['lib/lessphp/Tree','Rule.php',24],['lib/zend/Zend/Service/Amazon','EditorialReview.php',44],['lib/zend/Zend/Service/ReCaptcha','MailHide.php',86],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['lib/classes/progress','display_if_slow.php',60],['availability/condition/group/classes','condition.php',43],['lib/zend/Zend/Gdata/Photos/Extension','Location.php',50],['backup/moodle2','restore_settingslib.php',125],['lib/filebrowser','file_info.php',43],['repository/equella','lib.php',42],['lib/zend/Zend/Http','Client.php',242],['lib/alfresco/Service','ChildAssociation.php',30],['lib/zend/Zend/Gdata/DublinCore/Extension','Subject.php',44],['lib/zend/Zend/Gdata/App/Extension','Category.php',46],['badges/lib','awardlib.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/mustache/src/Mustache','Template.php',29],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueInstance.php',49],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['admin/roles/classes','define_role_table_advanced.php',46],['backup/moodle2','restore_section_task.class.php',42],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib/google/src/Google','Client.php',71],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['backup/moodle2','restore_plugin.class.php',43],['lib/simplepie/library/SimplePie','Registry.php',99],['backup/cc','cc2moodle.php',105],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',56],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['lib/zend/Zend/Validate/File','Count.php',92],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/editor/atto','adminlib.php',109],['lib/google/src/Google/Service','Admin.php',40],['lib/dml','moodle_transaction.php',40],['backup/util/plan','restore_structure_step.class.php',46],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1513],['question/engine','questionattempt.php',1599],['question/engine','questionattempt.php',1684],['lib/zend/Zend/Service/Technorati','Weblog.php',152],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantStatus.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['lib/google/src/Google/Cache','File.php',39],['lib/google/src/Google/Http','Request.php',55],['backup/moodle2','backup_block_task.class.php',43],['lib/simplepie/library/SimplePie','Source.php',61],['lib/google/src/Google/Service','Translate.php',40],['availability/classes','capability_checker.php',49],['lib','navigationlib.php',145],['lib','navigationlib.php',1012],['lib','navigationlib.php',2814],['lib','navigationlib.php',3075],['lib','navigationlib.php',3409],['lib','navigationlib.php',4775],['lib','navigationlib.php',4956],['lib/zend/Zend/Gdata/YouTube/Extension','MediaCredit.php',64],['lib/dml','pdo_moodle_database.php',42],['lib/zend/Zend/Gdata/YouTube/Extension','ReleaseDate.php',44],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','NewParticipantRequest.php',53],['lib/zend/Zend/Gdata/Spreadsheets/Extension','RowCount.php',49],['lib/zend/Zend/Validate/File','IsCompressed.php',53],['lib/zend/Zend/Gdata/Photos/Extension','MaxPhotosPerAlbum.php',51],['lib/zend/Zend/Gdata/Extension','When.php',52],['question/classes/bank/search','hidden_condition.php',42],['report/loglive/classes','renderable.php',73],['mod/lti/classes/local/ltiservice','response.php',58],['lib/zend/Zend/Gdata/Extension','Recurrence.php',43],['lib/zend/Zend/Gdata/Books/Extension','BooksLink.php',41],['backup/util/loggers','database_logger.class.php',40],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',250],['lib/phpexcel/PHPExcel','HashTable.php',52],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/classes/update','deployer.php',42],['lib/zend/Zend/Gdata/YouTube','VideoFeed.php',53],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','GetQuotaInformation.php',40],['lib/minify/lib','CSSmin.php',43],['lib/zend/Zend/Validate/File','Crc32.php',60],['mod/feedback/item','feedback_item_class.php',20],['question/engine/upgrade','upgradelib.php',280],['question/engine/upgrade','upgradelib.php',381],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/zend/Zend/Gdata/Spreadsheets','SpreadsheetEntry.php',43],['lib/google/src/Google/Service','Dns.php',50],['lib/zend/Zend/Gdata/Gapps','Query.php',57],['lib/zend/Zend/Gdata/YouTube/Extension','School.php',44],['lib/mustache/src/Mustache','HelperCollection.php',19],['mod/assign','gradingtable.php',68],['backup/util/xml/output','file_xml_output.class.php',37],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/zend/Zend/Service','Akismet.php',77],['lib','googleapi.php',52],['lib','googleapi.php',243],['lib/zend/Zend/Service/Yahoo','ResultSet.php',84],['lib/classes/message/inbound','processing_failed_exception.php',36],['lib','portfoliolib.php',101],['lib/lessphp/Tree','Import.php',30],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',53],['lib/tests/fixtures','test_renderer_factory.php',41],['mod/lesson','editpage_form.php',41],['grade/report','lib.php',156],['lib/zend/Zend/XmlRpc/Request','Http.php',53],['lib/filebrowser','file_info_stored.php',51],['lib/phpexcel/PHPExcel/Style','Protection.php',57],['lib/google/src/Google','Config.php',30],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/zend/Zend/Validate','LessThan.php',58],['grade/export','lib.php',60],['lib/zend/Zend/Gdata/YouTube/Extension','PlaylistTitle.php',44],['availability/classes','tree.php',118],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['question/classes/statistics/responses','analysis_for_subpart.php',50],['lib/zend/Zend/Validate','InArray.php',65],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['lib/zend/Zend/Gdata/Photos/Extension','Height.php',50],['lib/zend/Zend/Gdata/Gapps','Error.php',76],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['lib/phpexcel/PHPExcel','Chart.php',150],['lib/google/src/Google/Service','Replicapool.php',48],['lib/zend/Zend/Gdata/Media/Extension','MediaRating.php',49],['lib/zend/Zend/Gdata/YouTube','VideoEntry.php',175],['admin/tool/installaddon/classes','pluginfo_client.php',68],['admin/tool/installaddon/classes','pluginfo_client.php',206],['lib/google/src/Google/Service','Resourceviews.php',54],['admin/tool/log/store/legacy/classes/log','store.php',33],['backup/moodle2','backup_section_task.class.php',40],['lib/phpexcel/PHPExcel/Worksheet','CellIterator.php',68],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['repository/youtube','lib.php',40],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/testing/generator','component_generator_base.php',45],['lib/zend/Zend/Gdata/DublinCore/Extension','Format.php',44],['lib','badgeslib.php',133],['admin/tool/installaddon/classes','installer.php',488],['admin/tool/installaddon/classes','installer.php',745],['lib/zend/Zend/XmlRpc','Client.php',122],['lib/mustache/src/Mustache','LambdaHelper.php',24],['admin/roles/classes','permissions_table.php',38],['lib/jabber/XMPP','XMLObj.php',76],['lib','coursecatlib.php',197],['lib','coursecatlib.php',2668],['question/type','edit_question_form.php',96],['lib/zend/Zend/Gdata','MediaMimeStream.php',80],['mod/quiz/report/responses','last_responses_table.php',39],['lib/zend/Zend/Gdata/Photos/Extension','Timestamp.php',51],['lib','setuplib.php',106],['lib','setuplib.php',158],['lib','setuplib.php',174],['lib','setuplib.php',194],['lib','setuplib.php',224],['lib','setuplib.php',246],['lib','setuplib.php',262],['lib','setuplib.php',284],['lib','setuplib.php',303],['lib','setuplib.php',321],['lib/google/src/Google/Cache','Apc.php',35],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/lessphp/Tree','Unit.php',16],['lib/zend/Zend/Service/DeveloperGarden/Request/VoiceButler','TearDownCall.php',46],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',261],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['lib/zend/Zend/Service/Amazon','CustomerReview.php',69],['lib/zend/Zend/Gdata/YouTube/Extension','QueryString.php',44],['lib/zend/Zend/Gdata/Gapps/Extension','Name.php',65],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/lessphp/Tree','RulesetCall.php',14],['lib/zend/Zend/Gdata/Extension','Rating.php',49],['repository/alfresco','lib.php',42],['lib/zend/Zend/Service/Technorati','SearchResultSet.php',49],['lib/zend/Zend/Gdata/Photos','UserQuery.php',71],['enrol','renderer.php',426],['enrol','renderer.php',728],['badges/criteria','award_criteria_course.php',47],['lib/zend/Zend/Gdata/Extension','RecurrenceException.php',56],['lib/phpexcel/PHPExcel/Style','Fill.php',89],['lib/zend/Zend/Service/Technorati','TagsResult.php',60],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/google/src/Google/Service','Exception.php',12],['lib/zend/Zend/Gdata','Spreadsheets.php',115],['lib/xmldb','xmldb_index.php',56],['question/classes/statistics/responses','analyser.php',69],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['lib/zend/Zend/Gdata/Photos/Extension','Position.php',50],['lib/google/src/Google/Auth','Simple.php',32],['lib/zend/Zend/Gdata/Geo/Extension','GmlPoint.php',62],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/zend/Zend/Rest','Route.php',71],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceTemplateParticipantRequest.php',60],['question','category_class.php',58],['lib/classes/progress','display.php',48],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['lib/zend/Zend/Gdata/App/Extension','Rights.php',43],['lib/adodb','adodb-active-record.inc.php',113],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['lib/zend/Zend/Validate','NotEmpty.php',77],['question/type/calculated','datasetitems_form.php',72],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['lib/dml','pdo_moodle_recordset.php',41],['backup/cc/cc_lib','cc_converter_folder.php',28],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib/zend/Zend/Gdata/Calendar','ListEntry.php',85],['admin/tool/monitor/classes','rule.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/zend/Zend/Gdata/Geo','Entry.php',55],['lib/zend/Zend/Gdata/YouTube/Extension','Link.php',48],['lib','flickrlib.php',53],['lib/zend/Zend/Gdata/YouTube/Extension','AboutMe.php',44],['lib/zend/Zend/Service/DeveloperGarden','Credential.php',54],['grade/report/overview','lib.php',76],['lib/simplepie/library/SimplePie','File.php',68],['backup/moodle2','backup_plugin.class.php',44],['lib/zend/Zend/Gdata/Extension','ExtendedProperty.php',46],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['rating','lib.php',114],['rating','lib.php',1070],['lib','dtllib.php',66],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['question/engine','datalib.php',68],['question/engine','datalib.php',1330],['question/engine','datalib.php',1631],['question/engine','datalib.php',1739],['question/engine','datalib.php',1869],['question/engine','datalib.php',1940],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',405]], 1047],
'count': ['count', '', [['lib/google/src/Google','Collection.php',49],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',166],['lib/zend/Zend/Server','Definition.php',208],['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',337],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',90],['lib/horde/framework/Horde/Imap/Client','Ids.php',372],['lib/horde/framework/Horde/Support','Stub.php',126],['lib/horde/framework/Horde/Mail/Rfc822','List.php',368],['lib/zend/Zend/Service/Delicious','PostList.php',157],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',128],['lib/zend/Zend/Http','CookieJar.php',363],['lib/zend/Zend/Service/Amazon','Sqs.php',173],['lib/phpunit/classes','event_sink.php',72],['lib/phpexcel/PHPExcel/Calculation/Token','Stack.php',53],['lib/horde/framework/Horde','Variables.php',384],['lib/filestorage','zip_archive.php',333],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',144],['lib/zend/Zend/Gdata/App','Feed.php',127],['comment','lib.php',614],['lib/horde/framework/Horde/Mime','Part.php',2287],['lib/horde/framework/Horde/Support','Array.php',144],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',126],['lib/phpunit/classes','phpmailer_sink.php',73],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',193],['lib/phpunit/classes','message_sink.php',71],['lib/phpexcel/PHPExcel/Calculation','Statistical.php',1152],['question/engine','questionattempt.php',1770],['lib','navigationlib.php',936],['lib/phpexcel/PHPExcel','HashTable.php',133],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',116],['lib/phpexcel/PHPExcel/CalcEngine','CyclicReferenceStack.php',46],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',137]], 3984],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'current_user_is_parent_role': ['current_user_is_parent_role', 'Returns true if the current user is a parent of the user being currently viewed. ', [['lib','navigationlib.php',1343]], 1],
'set_cm': ['set_cm', 'The course module that this page belongs to (if it does belong to one). ', [['lib','pagelib.php',979]], 36],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'get_section_info_all': ['get_section_info_all', 'Gets all sections as array from section number => data about section. ', [['lib','modinfolib.php',303]], 27],
'get_css_type': ['get_css_type', 'Gets the CSS class to add to this node to describe its type ', [['lib','navigationlib.php',593]], 8],
'is_primary_admin': ['is_primary_admin', 'Is a userid the primary administrator? ', [['lib','moodlelib.php',9046]], 1],
'is_role_switched': ['is_role_switched', 'Checks if the user has switched roles within the given course. ', [['lib','accesslib.php',4385]], 11],
'load_category_settings': ['load_category_settings', 'Loads category specific settings in the navigation ', [['lib','navigationlib.php',4534]], 1],
'load_courses_enrolled': ['load_courses_enrolled', 'They\'ve expanded the \'my courses\' branch. ', [['lib','navigationlib.php',2742]], 2],
'badges_add_course_navigation': ['badges_add_course_navigation', 'Extends the course administration navigation with the Badges page ', [['lib','badgeslib.php',893]], 1],
'get_extending_users': ['get_extending_users', 'Returns all of the users the navigation is being extended for ', [['lib','navigationlib.php',2380]], 1],
'get_plugin_list_with_file': ['get_plugin_list_with_file', 'Get a list of all the plugins of a given type that contain a particular file. ', [['lib/classes','component.php',851],['lib','deprecatedlib.php',3818]], 24],
'scan_for_active_node': ['scan_for_active_node', 'This function recursivily scans nodes until it finds the active node or there are no more nodes. ', [['lib','navigationlib.php',3695]], 2],
'extend_course_navigation': ['extend_course_navigation', 'Loads all of the course sections into the navigation ', [['course/format/weeks','lib.php',135],['course/format/topics','lib.php',128],['course/format','formatlegacy.php',168],['course/format/singleactivity','lib.php',63],['course/format/social','lib.php',55],['course/format','lib.php',419]], 4],
'get_plugin_list': ['get_plugin_list', 'Get list of plugins of given type. ', [['lib/classes','component.php',781],['lib','deprecatedlib.php',467],['admin/tool/monitor/classes','eventlist.php',176]], 184],
'add_class': ['add_class', 'Adds a CSS class to this action link object ', [['lib','outputcomponents.php',1030],['lib','outputcomponents.php',1782],['lib','outputcomponents.php',2591],['lib','navigationlib.php',456]], 33],
'get_switchable_roles': ['get_switchable_roles', 'Gets a list of roles that this user can switch to in a context ', [['lib','accesslib.php',3466]], 4],
'close': ['close', 'Close the connection to the server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',486],['lib/tests','completionlib_test.php',888],['lib/adodb','adodb.inc.php',2164],['lib/adodb','adodb.inc.php',2844],['lib/adodb','adodb.inc.php',3536],['lib','webdavlib.php',176],['admin/tool/uploaduser','locallib.php',149],['lib/dml','oci_native_moodle_recordset.php',80],['lib/tcpdf','tcpdf.php',2943],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['lib','excellib.class.php',93],['lib/zend/Zend/Http/Client/Adapter','Test.php',187],['lib/classes/dml','recordset_walk.php',153],['mod/assign/feedback/offline','importgradeslib.php',178],['lib/pear/Net','GeoIP.php',556],['backup/util/helper','backup_array_iterator.class.php',63],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',109],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',266],['lib/dml','mssql_native_moodle_recordset.php',87],['lib/pear/Auth','RADIUS.php',542],['lib/pear/Auth','RADIUS.php',703],['lib/pear/Auth','RADIUS.php',824],['lib/phpmailer','class.smtp.php',507],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',80],['lib/phpunit/classes','event_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Interface.php',73],['lib/dml','pgsql_native_moodle_recordset.php',104],['auth/fc','fcFPP.php',72],['lib/filestorage','zip_archive.php',183],['lib','odslib.class.php',71],['lib/horde/framework/Horde/Socket','Client.php',135],['question/engine/tests','helpers.php',1225],['grade','lib.php',323],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib','csvlib.class.php',256],['lib/google/src/Google/Logger','File.php',130],['lib/horde/framework/Horde','Stream.php',585],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpunit/classes','message_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Curl.php',460],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',109],['backup/util/helper','backup_null_iterator.class.php',53],['grade/export','lib.php',662],['lib/dml','pdo_moodle_recordset.php',79]], 1036],
'load_module_settings': ['load_module_settings', 'This function calls the module function to inject module settings into the settings navigation tree. ', [['lib','navigationlib.php',3937]], 1],
'load_course_sections': ['load_course_sections', 'Loads all of the courses section into the navigation. ', [['lib','navigationlib.php',1814]], 7],
'set_context': ['set_context', 'Set the context. ', [['mod/assign','locallib.php',246],['lib/portfolio','caller.php',568],['grade/grading','lib.php',116],['lib','pagelib.php',942]], 254],
'change_password_url': ['change_password_url', 'Returns the URL for changing the users\' passwords, or empty if the default URL can be used. ', [['lib','authlib.php',162],['auth/db','auth.php',685],['auth/email','auth.php',183],['auth/none','auth.php',99],['auth/cas','auth.php',259],['auth/mnet','auth.php',599],['auth/pop3','auth.php',116],['auth/manual','auth.php',122],['auth/imap','auth.php',120],['auth/webservice','auth.php',111],['auth/ldap','auth.php',1609]], 9],
'blog_get_options_for_user': ['blog_get_options_for_user', 'Get all of the blog options that relate to the passed user. ', [['blog','lib.php',376]], 4],
'get_assignable_roles': ['get_assignable_roles', 'Gets all of the assignable roles for this course. ', [['enrol','locallib.php',585],['lib','accesslib.php',3381]], 45],
'generate_user_settings': ['generate_user_settings', 'This function gets called by {@link settings_navigation::load_user_settings()} and actually works out what can be shown/done ', [['lib','navigationlib.php',4108]], 5],
'get_coursemodule_from_id': ['get_coursemodule_from_id', 'Given an id of a course module, finds the coursemodule description ', [['lib','datalib.php',1269]], 212],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1583],['lib/dml','moodle_database.php',678]], 375],
'json_encode': ['json_encode', 'encodes an arbitrary variable into JSON format ', [['lib/minify/lib','FirePHP.php',1124]], 247],
'can_edit_profile': ['can_edit_profile', 'Returns true if this authentication plugin can edit the users\' profile. ', [['lib','authlib.php',178]], 3],
'get_editable_types': ['get_editable_types', 'Return all types that you a user can create/edit and which are also visible Note: Mostly used in order to know if at least one editable type can be set ', [['repository','lib.php',964]], 3],
'get_expand_course_cache': ['get_expand_course_cache', 'Returns a cache instance to use for the expand course cache. ', [['lib','navigationlib.php',2479]], 3],
'htmlspecialchars_decode': ['htmlspecialchars_decode', 'Inverse version of htmlspecialchars() ', [['lib/typo3','class.t3lib_div.php',1201]], 13],
'find': ['find', '', [['lib/adodb','adodb-active-recordx.inc.php',962],['lib/simplepie/library/SimplePie','Locator.php',94],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',17964],['lib/lessphp/Tree','Media.php',79],['lib/behat','behat_base.php',92],['lib','outputcomponents.php',3065],['lib/lessphp/Tree','Directive.php',85],['lib/mustache/src/Mustache','Context.php',82],['lib/lessphp/Tree','Ruleset.php',317],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/tabfocus','editor_plugin_src.js',24],['lib','navigationlib.php',367],['lib','navigationlib.php',857],['lib','navigationlib.php',2715],['lib/adodb','adodb-active-record.inc.php',805]], 517],
'get_parent_context': ['get_parent_context', 'Returns parent context ', [['lib','accesslib.php',5695]], 37],
'edit_profile_url': ['edit_profile_url', 'Returns the URL for editing the users\' profile, or empty if the default URL can be used. ', [['lib','authlib.php',189]], 3],
'__set': ['__set', '', [['lib/adodb','adodb-active-recordx.inc.php',115],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',121],['lib/zend/Zend/Service/WindowsAzure/Storage','SignedIdentifier.php',67],['lib/zend/Zend/Gdata','Query.php',407],['lib/zend/Zend/Server/Reflection/Function','Abstract.php',394],['lib','webdavlib.php',98],['lib/pear/Net/GeoIP','Location.php',142],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobContainer.php',68],['lib/classes/event','base.php',844],['lib/horde/framework/Horde/Support','Stub.php',31],['lib/horde/framework/Horde/Stream','TempString.php',83],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueMessage.php',74],['lib/portfolio/formats/leap2a','lib.php',277],['lib','modinfolib.php',168],['lib','modinfolib.php',1221],['lib/simplepie/library/SimplePie','gzdecode.php',175],['lib/horde/framework/Horde/Imap/Client/Data','Namespace.php',94],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',74],['calendar','lib.php',2026],['lib/zend/Zend/Gdata/App','Base.php',489],['mod/lesson','locallib.php',2015],['lib/horde/framework/Horde','Variables.php',199],['lib/zend/Zend/Gdata/App','BaseMediaSource.php',125],['lib','accesslib.php',5226],['lib/zend/Zend/Server/Reflection','Class.php',130],['lib/zend/Zend/Service/WindowsAzure/Storage','DynamicTableEntity.php',51],['lib/minify/lib','JSMinPlus.php',1681],['lib/horde/framework/Horde/Support','Array.php',123],['lib/zend/Zend/Service/WindowsAzure/Storage','TableInstance.php',68],['lib/horde/framework/Horde','Stream.php',84],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',88],['lib','adminlib.php',1086],['lib/simplepie/library/SimplePie','IRI.php',143],['lib','pagelib.php',774],['lib/alfresco/Service','BaseObject.php',35],['lib/alfresco/Service','Node.php',272],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobInstance.php',89],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueInstance.php',64],['lib','navigationlib.php',5007],['lib/mustache/src/Mustache','HelperCollection.php',43],['lib/classes/message','message.php',202],['lib','coursecatlib.php',124],['lib','coursecatlib.php',2865],['lib/adodb','adodb-active-record.inc.php',106],['lib/horde/framework/Horde/Support','ObjectStub.php',50]], 5],
'get_grading_manager': ['get_grading_manager', 'Factory method returning an instance of the grading manager ', [['grade/grading','lib.php',27]], 37],
'course_get_url': ['course_get_url', 'The URL to use for the specified course (with section) ', [['course','lib.php',3375]], 42],
'is_mnet_remote_user': ['is_mnet_remote_user', 'Returns whether or not the user object is a remote MNET user. This function is in moodlelib because it does not rely on loading any of the MNET code. ', [['lib','moodlelib.php',8869]], 20],
'extend_settings_navigation': ['extend_settings_navigation', 'Extends the module settings navigation ', [['grade/grading/form','lib.php',219],['grade/grading/form/guide','lib.php',58],['grade/grading','lib.php',418],['grade/grading/form/rubric','lib.php',55]], 3],
'user_is_editing': ['user_is_editing', 'Should the current user see this page in editing mode. That is, are they allowed to edit this page, and are they currently in editing mode. ', [['lib','pagelib.php',827]], 52],
'get_course_categories': ['get_course_categories', 'Returns an array of course categories ', [['user/filters','courserole.php',54],['lib','navigationlib.php',3238]], 3],
'has_children': ['has_children', 'Returns true if this item has any children ', [['lib','outputcomponents.php',2799],['lib','navigationlib.php',405],['lib','coursecatlib.php',1176]], 24],
'enrol_get_my_courses': ['enrol_get_my_courses', 'Returns list of courses current $USER is enrolled in and can access ', [['lib','enrollib.php',512]], 16],
'enrol_user_sees_own_courses': ['enrol_user_sees_own_courses', 'Can user access at least one enrolled course? ', [['lib','enrollib.php',719]], 20],
'convert_child': ['convert_child', 'Recusively converts a child node and its children to XML for output ', [['lib','navigationlib.php',4839]], 2],
'load_all_courses': ['load_all_courses', 'Loads the courses in Moodle into the navigation. ', [['lib','navigationlib.php',1402]], 2],
'has_items': ['has_items', '', [['backup/cc/cc_lib','cc_interfaces.php',50],['backup/cc/cc_lib','cc_organization.php',81],['lib','navigationlib.php',3094]], 4],
'is_loggedinas': ['is_loggedinas', 'Is current $USER logged-in-as somebody else? ', [['lib/classes/session','manager.php',786]], 32],
'explode': ['explode', '', [], 1599],
'is_array': ['is_array', '', [], 1820],
'count': ['count', '', [], 3984],
'trim': ['trim', '', [], 1889],
'in_array': ['in_array', '', [], 1173],
'time': ['time', '', [], 1768],
'array_shift': ['array_shift', '', [], 607],
'array_pop': ['array_pop', '', [], 438],
'implode': ['implode', '', [], 1259],
'array_unshift': ['array_unshift', '', [], 114],
'array_slice': ['array_slice', '', [], 169],
'array_flip': ['array_flip', '', [], 118],
'array_key_exists': ['array_key_exists', '', [], 1539],
'array_search': ['array_search', '', [], 188],
'arsort': ['arsort', '', [], 15],
'htmlentities': ['htmlentities', '', [], 53],
'str_replace': ['str_replace', '', [], 1667],
'is_null': ['is_null', '', [], 1992],
'file_exists': ['file_exists', '', [], 873],
'array_keys': ['array_keys', '', [], 1152],
'array_unique': ['array_unique', '', [], 173],
'unserialize': ['unserialize', '', [], 180],
'is_numeric': ['is_numeric', '', [], 723],
'get_class': ['get_class', '', [], 332],
'array_merge': ['array_merge', '', [], 2320],
'is_string': ['is_string', '', [], 680],
'array_reverse': ['array_reverse', '', [], 127],
'array_values': ['array_values', '', [], 283],
'define': ['define', '', [], 2170],
'ksort': ['ksort', '', [], 158],
'strpos': ['strpos', '', [], 1623],
'defined': ['defined', '', [], 4098],
'function_exists': ['function_exists', '', [], 443],
'serialize': ['serialize', '', [], 266],
'reset': ['reset', '', [], 1070],
'rand': ['rand', '', [], 107],
'is_object': ['is_object', '', [], 508],
'header': ['header', '', [], 1294]};
CLASS_DATA={
'navbar': ['navbar', 'Navbar class ', [['lib','navigationlib.php',3041]], 3],
'navigation_node_collection': ['navigation_node_collection', 'Navigation node collection ', [['lib','navigationlib.php',718]], 6],
'action_link': ['action_link', 'Data structure describing html link with special action attached. ', [['lib','outputcomponents.php',963]], 16],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6106]], 929],
'manager': ['manager', 'Defines MAnager class for myprofile navigation tree. ', [['user/classes/output/myprofile','manager.php',28],['lib/classes/log','manager.php',29],['admin/tool/messageinbound/classes','manager.php',29],['lib/classes/message','manager.php',31],['lib/classes/message/inbound','manager.php',29],['admin/tool/log/classes/log','manager.php',29],['lib/classes/session','manager.php',29],['lib/classes/task','manager.php',28],['lib/classes/event','manager.php',30]], 346],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',214]], 867],
'context_coursecat': ['context_coursecat', 'Course category context class ', [['lib','accesslib.php',6534]], 160],
'global_navigation': ['global_navigation', 'The global navigation class used for... the global navigation ', [['lib','navigationlib.php',960]], 8],
'navigation_node': ['navigation_node', 'This class is used to represent a node in a navigation tree ', [['lib','navigationlib.php',34]], 338],
'component_action': ['component_action', 'Helper class used by other components that involve an action on the page (URL or JS). ', [['lib','outputactions.php',31]], 15],
'navigation_cache': ['navigation_cache', 'The cache class used by global navigation and settings navigation. ', [['lib','navigationlib.php',4911]], 13],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'global_navigation_for_ajax': ['global_navigation_for_ajax', 'The global navigation class used especially for AJAX requests. ', [['lib','navigationlib.php',2788]], 1],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6766]], 1197],
'core_plugin_manager': ['core_plugin_manager', 'Singleton class providing general plugins management functionality. ', [['lib/classes','plugin_manager.php',31]], 187],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',6988]], 942],
'context_user': ['context_user', 'User context class ', [['lib','accesslib.php',6347]], 288],
'repository': ['repository', 'Class for repositories ', [['lib/classes/plugininfo','repository.php',30]], 213],
'renderable': ['renderable', 'Renderable class for manage rules page. ', [['admin/tool/monitor/classes/output/managerules','renderable.php',31],['lib','outputcomponents.php',31]], 69],
'coursecat': ['coursecat', 'Class to store, cache, render and manage course category ', [['lib','coursecatlib.php',28]], 262],
'cache': ['cache', 'The main cache class. ', [['cache/classes','loaders.php',31]], 213],
'settings_navigation_ajax': ['settings_navigation_ajax', 'Class used to populate site admin navigation for ajax. ', [['lib','navigationlib.php',4766]], 1],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 485],
'pix_icon': ['pix_icon', 'Data structure representing an icon. ', [['lib','outputcomponents.php',497]], 247],
'navigation_json': ['navigation_json', 'Simple class used to output a navigation branch in XML ', [['lib','navigationlib.php',4806]], 2],
'settings_navigation': ['settings_navigation', 'Class used to manage the settings option for the current page ', [['lib','navigationlib.php',3384]], 17],
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5824]], 210],
'tabobject': ['tabobject', 'Stores one tab ', [['lib','outputcomponents.php',2997]], 72],
'core_shutdown_manager': ['core_shutdown_manager', 'Shutdown management class. ', [['lib/classes','shutdown_manager.php',27]], 12],
'exception': ['exception', 'Session related exception class. ', [['lib/classes/session','exception.php',29],['lib/horde/framework/Horde/Socket/Client','Exception.php',17]], 223]};
CONST_DATA={
'TYPE_UNKNOWN': ['TYPE_UNKNOWN', '', [['backup/cc/includes','constants.php',81]], 32],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 554],
'MESSAGE_VIEW_COURSE': ['MESSAGE_VIEW_COURSE', '', [['message','lib.php',42]], 7],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 462],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 204],
'CONTEXT_COURSECAT': ['CONTEXT_COURSECAT', '', [['lib','accesslib.php',146]], 99],
'NAVIGATION_SITE_ADMIN_CACHE_NAME': ['NAVIGATION_SITE_ADMIN_CACHE_NAME', '', [['lib','navigationlib.php',32]], 1],
'SITEID': ['SITEID', '', [['admin/cli','install.php',217],['','install.php',244],['lib/db','install.php',87],['lib','setup.php',748]], 612],
'CONTEXT_BLOCK': ['CONTEXT_BLOCK', '', [['lib','accesslib.php',156]], 99],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 271],
'BLOG_GLOBAL_LEVEL': ['BLOG_GLOBAL_LEVEL', '', [['lib','moodlelib.php',371]], 15],
'CONTEXT_SYSTEM': ['CONTEXT_SYSTEM', '', [['lib','accesslib.php',142]], 165],
'HOMEPAGE_MY': ['HOMEPAGE_MY', '', [['lib','moodlelib.php',478]], 14],
'NAVIGATION_CACHE_NAME': ['NAVIGATION_CACHE_NAME', '', [['lib','navigationlib.php',31]], 5],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1252],
'URL_MATCH_EXACT': ['URL_MATCH_EXACT', '', [['lib','weblib.php',80]], 9],
'PARAM_ALPHANUMEXT': ['PARAM_ALPHANUMEXT', '', [['lib','moodlelib.php',93]], 165],
'ROLENAME_BOTH': ['ROLENAME_BOTH', '', [['lib','accesslib.php',176]], 27],
'FEATURE_BACKUP_MOODLE2': ['FEATURE_BACKUP_MOODLE2', '', [['lib','moodlelib.php',434]], 34],
'HOMEPAGE_SITE': ['HOMEPAGE_SITE', '', [['lib','moodlelib.php',474]], 7],
'FEATURE_ADVANCED_GRADING': ['FEATURE_ADVANCED_GRADING', '', [['lib','moodlelib.php',398]], 9],
'CONTEXT_COURSE': ['CONTEXT_COURSE', '', [['lib','accesslib.php',148]], 422],
'URL_MATCH_BASE': ['URL_MATCH_BASE', '', [['lib','weblib.php',70]], 18],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532],
'SEPARATEGROUPS': ['SEPARATEGROUPS', '', [['lib','grouplib.php',34]], 158],
'CONTEXT_USER': ['CONTEXT_USER', '', [['lib','accesslib.php',144]], 95],
'BLOG_SITE_LEVEL': ['BLOG_SITE_LEVEL', '', [['lib','moodlelib.php',370]], 17]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
