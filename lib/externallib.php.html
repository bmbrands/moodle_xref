<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of externallib.php</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='externallib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/lib/</a> -> <a href="externallib.php.source.html">externallib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="externallib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../_stats.html">Project Stats</a>]</p>
<p><b>Support for external API</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2009 Petr Skodak</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>1200 lines (47 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>1 time</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 11 classes</h3>
<div class="inset">
<p><b>restricted_context_exception::</b> (1 method):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
</p>
<p><b>external_api::</b> (9 methods):<br>
&nbsp;&nbsp;<a href="#external_function_info">external_function_info</a>()<br>
&nbsp;&nbsp;<a href="#call_external_function">call_external_function</a>()<br>
&nbsp;&nbsp;<a href="#set_context_restriction">set_context_restriction</a>()<br>
&nbsp;&nbsp;<a href="#set_timeout">set_timeout</a>()<br>
&nbsp;&nbsp;<a href="#validate_parameters">validate_parameters</a>()<br>
&nbsp;&nbsp;<a href="#clean_returnvalue">clean_returnvalue</a>()<br>
&nbsp;&nbsp;<a href="#validate_context">validate_context</a>()<br>
&nbsp;&nbsp;<a href="#get_context_from_params">get_context_from_params</a>()<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
</p>
<p><b>external_value::</b> (1 method):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
</p>
<p><b>external_single_structure::</b> (1 method):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
</p>
<p><b>external_multiple_structure::</b> (1 method):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
</p>
<p><b>external_function_parameters::</b> (4 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#external_generate_token">external_generate_token</a>()<br>
&nbsp;&nbsp;<a href="#external_create_service_token">external_create_service_token</a>()<br>
&nbsp;&nbsp;<a href="#external_delete_descriptions">external_delete_descriptions</a>()<br>
</p>
<p><b>external_warnings::</b> (1 method):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
</p>
<p><b>external_format_value::</b> (4 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#external_validate_format">external_validate_format</a>()<br>
&nbsp;&nbsp;<a href="#external_format_string">external_format_string</a>()<br>
&nbsp;&nbsp;<a href="#external_format_text">external_format_text</a>()<br>
</p>
<p><b>external_settings::</b> (11 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#__clone">__clone</a>()<br>
&nbsp;&nbsp;<a href="#get_instance">get_instance</a>()<br>
&nbsp;&nbsp;<a href="#set_raw">set_raw</a>()<br>
&nbsp;&nbsp;<a href="#get_raw">get_raw</a>()<br>
&nbsp;&nbsp;<a href="#set_filter">set_filter</a>()<br>
&nbsp;&nbsp;<a href="#get_filter">get_filter</a>()<br>
&nbsp;&nbsp;<a href="#set_fileurl">set_fileurl</a>()<br>
&nbsp;&nbsp;<a href="#get_fileurl">get_fileurl</a>()<br>
&nbsp;&nbsp;<a href="#set_file">set_file</a>()<br>
&nbsp;&nbsp;<a href="#get_file">get_file</a>()<br>
</p>
<p><b>external_util::</b> (2 methods):<br>
&nbsp;&nbsp;<a href="#validate_courses">validate_courses</a>()<br>
&nbsp;&nbsp;<a href="#get_area_files">get_area_files</a>()<br>
</p>
<p><b>external_files::</b> (1 method):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
</p>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="restricted_context_exception"><b>restricted_context_exception</b></a>&nbsp;&nbsp;- <a href="../_classes/restricted_context_exception.html"><small>X-Ref</small></a>
</p>
<b>Exception indicating user is not allowed to use external function in the current context.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'externallib.php.source.html#l37')" href="externallib.php.source.html#l37">__construct</a>()&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR></td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="external_api"><b>external_api</b></a>&nbsp;&nbsp;- <a href="../_classes/external_api.html"><small>X-Ref</small></a>
</p>
<b>Base class for external api methods.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="external_function_info" onClick="logFunction('external_function_info', 'externallib.php.source.html#l60')" href="externallib.php.source.html#l60">external_function_info</a>(<a href="../_variables/function.html">$function</a>, <a href="../_variables/strictness.html">$strictness</a>=MUST_EXIST)&nbsp;&nbsp;
<a href="../_functions/external_function_info.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns detailed function information<BR>
</b><BR><b>param:</b> string|object $function name of external function or record from external_function<br>
<b>param:</b> int $strictness IGNORE_MISSING means compatible mode, false returned if record not found, debug message if more found;<br>
<b>return:</b> stdClass description or false if not found or exception thrown<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="call_external_function" onClick="logFunction('call_external_function', 'externallib.php.source.html#l169')" href="externallib.php.source.html#l169">call_external_function</a>(<a href="../_variables/function.html">$function</a>, <a href="../_variables/args.html">$args</a>, <a href="../_variables/ajaxonly.html">$ajaxonly</a>=false)&nbsp;&nbsp;
<a href="../_functions/call_external_function.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Call an external function validating all params/returns correctly.<BR>
</b><BR>Note that an external function may modify the state of the current page, so this wrapper<BR>
saves and restores tha PAGE and COURSE global variables before/after calling the external function.<BR>
<BR>
<b>param:</b> string $function A webservice function name.<br>
<b>param:</b> array $args Params array (named params)<br>
<b>param:</b> boolean $ajaxonly If true, an extra check will be peformed to see if ajax is required.<br>
<b>return:</b> array containing keys for error (bool), exception and data.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_context_restriction" onClick="logFunction('set_context_restriction', 'externallib.php.source.html#l257')" href="externallib.php.source.html#l257">set_context_restriction</a>(<a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/set_context_restriction.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set context restriction for all following subsequent function calls.<BR>
</b><BR><b>param:</b> stdClass $context the context restriction<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_timeout" onClick="logFunction('set_timeout', 'externallib.php.source.html#l267')" href="externallib.php.source.html#l267">set_timeout</a>(<a href="../_variables/seconds.html">$seconds</a>=360)&nbsp;&nbsp;
<a href="../_functions/set_timeout.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This method has to be called before every operation<BR>
that takes a longer time to finish!<BR>
</b><BR><b>param:</b> int $seconds max expected time the next operation needs<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="validate_parameters" onClick="logFunction('validate_parameters', 'externallib.php.source.html#l279')" href="externallib.php.source.html#l279">validate_parameters</a>(external_description <a href="../_variables/description.html">$description</a>, <a href="../_variables/params.html">$params</a>)&nbsp;&nbsp;
<a href="../_functions/validate_parameters.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Validates submitted function parameters, if anything is incorrect<BR>
invalid_parameter_exception is thrown.<BR>
This is a simple recursive method which is intended to be called from<BR>
each implementation method of external API.<BR>
</b><BR><b>param:</b> external_description $description description of parameters<br>
<b>param:</b> mixed $params the actual parameters<br>
<b>return:</b> mixed params with added defaults for optional items, invalid_parameters_exception thrown if any problem found<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="clean_returnvalue" onClick="logFunction('clean_returnvalue', 'externallib.php.source.html#l358')" href="externallib.php.source.html#l358">clean_returnvalue</a>(external_description <a href="../_variables/description.html">$description</a>, <a href="../_variables/response.html">$response</a>)&nbsp;&nbsp;
<a href="../_functions/clean_returnvalue.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Clean response<BR>
If a response attribute is unknown from the description, we just ignore the attribute.<BR>
If a response attribute is incorrect, invalid_response_exception is thrown.<BR>
Note: this function is similar to validate parameters, however it is distinct because<BR>
parameters validation must be distinct from cleaning return values.<BR>
</b><BR><b>param:</b> external_description $description description of the return values<br>
<b>param:</b> mixed $response the actual response<br>
<b>return:</b> mixed response with added defaults for optional items, invalid_response_exception thrown if any problem found<br>
<b>author:</b> 2010 Jerome Mouneyrac<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="validate_context" onClick="logFunction('validate_context', 'externallib.php.source.html#l448')" href="externallib.php.source.html#l448">validate_context</a>(<a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/validate_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Makes sure user may execute functions in this context.<BR>
</b><BR><b>param:</b> stdClass $context<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context_from_params" onClick="logFunction('get_context_from_params', 'externallib.php.source.html#l484')" href="externallib.php.source.html#l484">get_context_from_params</a>(<a href="../_variables/param.html">$param</a>)&nbsp;&nbsp;
<a href="../_functions/get_context_from_params.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get context from passed parameters.<BR>
The passed array must either contain a contextid or a combination of context level and instance id to fetch the context.<BR>
For example, the context level can be &quot;course&quot; and instanceid can be courseid.<BR>
</b><BR>See context_helper::get_all_levels() for a list of valid context levels.<BR>
<BR>
<b>param:</b> array $param<br>
<b>return:</b> context<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'externallib.php.source.html#l531')" href="externallib.php.source.html#l531">__construct</a>(<a href="../_variables/desc.html">$desc</a>, <a href="../_variables/required.html">$required</a>, <a href="../_variables/default.html">$default</a>)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Contructor<BR>
</b><BR><b>param:</b> string $desc<br>
<b>param:</b> bool $required<br>
<b>param:</b> mixed $default<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="external_value"><b>external_value</b></a>&nbsp;&nbsp;- <a href="../_classes/external_value.html"><small>X-Ref</small></a>
</p>
<b>Scalar value description class<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'externallib.php.source.html#l562')" href="externallib.php.source.html#l562">__construct</a>(<a href="../_variables/type.html">$type</a>, <a href="../_variables/desc.html">$desc</a>='', <a href="../_variables/required.html">$required</a>=VALUE_REQUIRED,<a href="../_variables/default.html">$default</a>=null, <a href="../_variables/allownull.html">$allownull</a>=NULL_ALLOWED)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR><b>param:</b> mixed $type<br>
<b>param:</b> string $desc<br>
<b>param:</b> bool $required<br>
<b>param:</b> mixed $default<br>
<b>param:</b> bool $allownull<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="external_single_structure"><b>external_single_structure</b></a>&nbsp;&nbsp;- <a href="../_classes/external_single_structure.html"><small>X-Ref</small></a>
</p>
<b>Associative array description class<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'externallib.php.source.html#l593')" href="externallib.php.source.html#l593">__construct</a>(array <a href="../_variables/keys.html">$keys</a>, <a href="../_variables/desc.html">$desc</a>='',<a href="../_variables/required.html">$required</a>=VALUE_REQUIRED, <a href="../_variables/default.html">$default</a>=null)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR><b>param:</b> array $keys<br>
<b>param:</b> string $desc<br>
<b>param:</b> bool $required<br>
<b>param:</b> array $default<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="external_multiple_structure"><b>external_multiple_structure</b></a>&nbsp;&nbsp;- <a href="../_classes/external_multiple_structure.html"><small>X-Ref</small></a>
</p>
<b>Bulk array description class.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'externallib.php.source.html#l622')" href="externallib.php.source.html#l622">__construct</a>(external_description <a href="../_variables/content.html">$content</a>, <a href="../_variables/desc.html">$desc</a>='',<a href="../_variables/required.html">$required</a>=VALUE_REQUIRED, <a href="../_variables/default.html">$default</a>=null)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR><b>param:</b> external_description $content<br>
<b>param:</b> string $desc<br>
<b>param:</b> bool $required<br>
<b>param:</b> array $default<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="external_function_parameters"><b>external_function_parameters</b></a>&nbsp;&nbsp;- <a href="../_classes/external_function_parameters.html"><small>X-Ref</small></a>
</p>
<b>Description of top level - PHP function parameters.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'externallib.php.source.html#l648')" href="externallib.php.source.html#l648">__construct</a>(array <a href="../_variables/keys.html">$keys</a>, <a href="../_variables/desc.html">$desc</a>='', <a href="../_variables/required.html">$required</a>=VALUE_REQUIRED, <a href="../_variables/default.html">$default</a>=null)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor - does extra checking to prevent top level optional parameters.<BR>
</b><BR><b>param:</b> array $keys<br>
<b>param:</b> string $desc<br>
<b>param:</b> bool $required<br>
<b>param:</b> array $default<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="external_generate_token" onClick="logFunction('external_generate_token', 'externallib.php.source.html#l673')" href="externallib.php.source.html#l673">external_generate_token</a>(<a href="../_variables/tokentype.html">$tokentype</a>, <a href="../_variables/serviceorid.html">$serviceorid</a>, <a href="../_variables/userid.html">$userid</a>, <a href="../_variables/contextorid.html">$contextorid</a>, <a href="../_variables/validuntil.html">$validuntil</a>=0, <a href="../_variables/iprestriction.html">$iprestriction</a>='')&nbsp;&nbsp;
<a href="../_functions/external_generate_token.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Generate a token<BR>
</b><BR><b>param:</b> string $tokentype EXTERNAL_TOKEN_EMBEDDED|EXTERNAL_TOKEN_PERMANENT<br>
<b>param:</b> stdClass|int $serviceorid service linked to the token<br>
<b>param:</b> int $userid user linked to the token<br>
<b>param:</b> stdClass|int $contextorid<br>
<b>param:</b> int $validuntil date when the token expired<br>
<b>param:</b> string $iprestriction allowed ip - if 0 or empty then all ips are allowed<br>
<b>return:</b> string generated token<br>
<b>author:</b> 2010 Jamie Pratt<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="external_create_service_token" onClick="logFunction('external_create_service_token', 'externallib.php.source.html#l731')" href="externallib.php.source.html#l731">external_create_service_token</a>(<a href="../_variables/servicename.html">$servicename</a>, <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/external_create_service_token.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create and return a session linked token. Token to be used for html embedded client apps that want to communicate<BR>
with the Moodle server through web services. The token is linked to the current session for the current page request.<BR>
It is expected this will be called in the script generating the html page that is embedding the client app and that the<BR>
returned token will be somehow passed into the client app being embedded in the page.<BR>
</b><BR><b>param:</b> string $servicename name of the web service. Service name as defined in db/services.php<br>
<b>param:</b> int $context context within which the web service can operate.<br>
<b>return:</b> int returns token id.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="external_delete_descriptions" onClick="logFunction('external_delete_descriptions', 'externallib.php.source.html#l748')" href="externallib.php.source.html#l748">external_delete_descriptions</a>(<a href="../_variables/component.html">$component</a>)&nbsp;&nbsp;
<a href="../_functions/external_delete_descriptions.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete all pre-built services (+ related tokens) and external functions information defined in the specified component.<BR>
</b><BR><b>param:</b> string $component name of component (moodle, mod_assignment, etc.)<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="external_warnings"><b>external_warnings</b></a>&nbsp;&nbsp;- <a href="../_classes/external_warnings.html"><small>X-Ref</small></a>
</p>
<b>Standard Moodle web service warnings<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'externallib.php.source.html#l778')" href="externallib.php.source.html#l778">__construct</a>(<a href="../_variables/itemdesc.html">$itemdesc</a> = 'item', <a href="../_variables/itemiddesc.html">$itemiddesc</a> = 'item id',<a href="../_variables/warningcodedesc.html">$warningcodedesc</a> = 'the warning code can be used by the client app to implement specific behaviour')&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR></td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="external_format_value"><b>external_format_value</b></a>&nbsp;&nbsp;- <a href="../_classes/external_format_value.html"><small>X-Ref</small></a>
</p>
<b>A pre-filled external_value class for text format.<BR>
</b><br>
Default is FORMAT_HTML<BR>
This should be used all the time in external xxx_params()/xxx_returns functions<BR>
as it is the standard way to implement text format param/return values.<BR>
<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'externallib.php.source.html#l813')" href="externallib.php.source.html#l813">__construct</a>(<a href="../_variables/textfieldname.html">$textfieldname</a>, <a href="../_variables/required.html">$required</a> = VALUE_REQUIRED)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR><b>param:</b> string $textfieldname Name of the text field<br>
<b>param:</b> int $required if VALUE_REQUIRED then set standard default FORMAT_HTML<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="external_validate_format" onClick="logFunction('external_validate_format', 'externallib.php.source.html#l833')" href="externallib.php.source.html#l833">external_validate_format</a>(<a href="../_variables/format.html">$format</a>)&nbsp;&nbsp;
<a href="../_functions/external_validate_format.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Validate text field format against known FORMAT_XXX<BR>
</b><BR><b>param:</b> array $format the format to validate<br>
<b>return:</b> the validated format<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="external_format_string" onClick="logFunction('external_format_string', 'externallib.php.source.html#l850')" href="externallib.php.source.html#l850">external_format_string</a>(<a href="../_variables/str.html">$str</a>, <a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/striplinks.html">$striplinks</a> = true, <a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/external_format_string.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Format the string to be returned properly as requested by the either the web service server,<BR>
either by an internally call.<BR>
The caller can change the format (raw) with the external_settings singleton<BR>
All web service servers must set this singleton when parsing the $_GET and $_POST.<BR>
</b><BR>&lt;pre&gt;<BR>
Options are the same that in {@link format_string()} with some changes:<BR>
filter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: Can be set to false to force filters off, else observes {@link external_settings}.<BR>
&lt;/pre&gt;<BR>
<BR>
<b>param:</b> string $str The string to be filtered. Should be plain text, expect<br>
<b>param:</b> boolean $striplinks To strip any link in the result text. Moodle 1.8 default changed from false to true! MDL-8713<br>
<b>param:</b> int $contextid The id of the context for the string (affects filters).<br>
<b>param:</b> array $options options array/object or courseid<br>
<b>return:</b> string text<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="external_format_text" onClick="logFunction('external_format_text', 'externallib.php.source.html#l887')" href="externallib.php.source.html#l887">external_format_text</a>(<a href="../_variables/text.html">$text</a>, <a href="../_variables/textformat.html">$textformat</a>, <a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/component.html">$component</a> = null, <a href="../_variables/filearea.html">$filearea</a> = null, <a href="../_variables/itemid.html">$itemid</a> = null,<a href="../_variables/options.html">$options</a> = null)&nbsp;&nbsp;
<a href="../_functions/external_format_text.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Format the text to be returned properly as requested by the either the web service server,<BR>
either by an internally call.<BR>
The caller can change the format (raw, filter, file, fileurl) with the external_settings singleton<BR>
All web service servers must set this singleton when parsing the $_GET and $_POST.<BR>
</b><BR>&lt;pre&gt;<BR>
Options are the same that in {@link format_text()} with some changes in defaults to provide backwards compatibility:<BR>
trusted&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;If true the string won't be cleaned. Default false.<BR>
noclean&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;If true the string won't be cleaned only if trusted is also true. Default false.<BR>
nocache&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;If true the string will not be cached and will be formatted every call. Default false.<BR>
filter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;Can be set to false to force filters off, else observes {@link external_settings}.<BR>
para&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;If true then the returned string will be wrapped in div tags. Default (different from format_text) false.<BR>
Default changed because div tags are not commonly needed.<BR>
newlines&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;If true then lines newline breaks will be converted to HTML newline breaks. Default true.<BR>
context&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;Not used! Using contextid parameter instead.<BR>
overflowdiv :&nbsp;&nbsp;&nbsp;If set to true the formatted text will be encased in a div with the class no-overflow before being<BR>
returned. Default false.<BR>
allowid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;If true then id attributes will not be removed, even when using htmlpurifier. Default (different from<BR>
format_text) true. Default changed id attributes are commonly needed.<BR>
blanktarget :&nbsp;&nbsp;&nbsp;If true all &lt;a&gt; tags will have target=&quot;_blank&quot; added unless target is explicitly specified.<BR>
&lt;/pre&gt;<BR>
<BR>
<b>param:</b> string $text The content that may contain ULRs in need of rewriting.<br>
<b>param:</b> int $textformat The text format.<br>
<b>param:</b> int $contextid This parameter and the next two identify the file area to use.<br>
<b>param:</b> string $component<br>
<b>param:</b> string $filearea helps identify the file area.<br>
<b>param:</b> int $itemid helps identify the file area.<br>
<b>param:</b> object/array $options text formatting options<br>
<b>return:</b> array text + textformat<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="external_settings"><b>external_settings</b></a>&nbsp;&nbsp;- <a href="../_classes/external_settings.html"><small>X-Ref</small></a>
</p>
<b>Singleton to handle the external settings.<BR>
</b><br>
We use singleton to encapsulate the &quot;logic&quot;<BR>
<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'externallib.php.source.html#l984')" href="externallib.php.source.html#l984">__construct</a>()&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor - protected - can not be instanciated<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__clone" onClick="logFunction('__clone', 'externallib.php.source.html#l994')" href="externallib.php.source.html#l994">__clone</a>()&nbsp;&nbsp;
<a href="../_functions/__clone.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Clone - private - can not be cloned<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_instance" onClick="logFunction('get_instance', 'externallib.php.source.html#l1000')" href="externallib.php.source.html#l1000">get_instance</a>()&nbsp;&nbsp;
<a href="../_functions/get_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return only one instance<BR>
</b><BR><b>return:</b> object<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_raw" onClick="logFunction('set_raw', 'externallib.php.source.html#l1013')" href="externallib.php.source.html#l1013">set_raw</a>(<a href="../_variables/raw.html">$raw</a>)&nbsp;&nbsp;
<a href="../_functions/set_raw.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set raw<BR>
</b><BR><b>param:</b> boolean $raw<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_raw" onClick="logFunction('get_raw', 'externallib.php.source.html#l1022')" href="externallib.php.source.html#l1022">get_raw</a>()&nbsp;&nbsp;
<a href="../_functions/get_raw.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get raw<BR>
</b><BR><b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_filter" onClick="logFunction('set_filter', 'externallib.php.source.html#l1031')" href="externallib.php.source.html#l1031">set_filter</a>(<a href="../_variables/filter.html">$filter</a>)&nbsp;&nbsp;
<a href="../_functions/set_filter.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set filter<BR>
</b><BR><b>param:</b> boolean $filter<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_filter" onClick="logFunction('get_filter', 'externallib.php.source.html#l1040')" href="externallib.php.source.html#l1040">get_filter</a>()&nbsp;&nbsp;
<a href="../_functions/get_filter.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get filter<BR>
</b><BR><b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_fileurl" onClick="logFunction('set_fileurl', 'externallib.php.source.html#l1049')" href="externallib.php.source.html#l1049">set_fileurl</a>(<a href="../_variables/fileurl.html">$fileurl</a>)&nbsp;&nbsp;
<a href="../_functions/set_fileurl.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set fileurl<BR>
</b><BR><b>param:</b> boolean $fileurl<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_fileurl" onClick="logFunction('get_fileurl', 'externallib.php.source.html#l1058')" href="externallib.php.source.html#l1058">get_fileurl</a>()&nbsp;&nbsp;
<a href="../_functions/get_fileurl.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get fileurl<BR>
</b><BR><b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_file" onClick="logFunction('set_file', 'externallib.php.source.html#l1067')" href="externallib.php.source.html#l1067">set_file</a>(<a href="../_variables/file.html">$file</a>)&nbsp;&nbsp;
<a href="../_functions/set_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set file<BR>
</b><BR><b>param:</b> string $file<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_file" onClick="logFunction('get_file', 'externallib.php.source.html#l1076')" href="externallib.php.source.html#l1076">get_file</a>()&nbsp;&nbsp;
<a href="../_functions/get_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get file<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="external_util"><b>external_util</b></a>&nbsp;&nbsp;- <a href="../_classes/external_util.html"><small>X-Ref</small></a>
</p>
<b>Utility functions for the external API.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="validate_courses" onClick="logFunction('validate_courses', 'externallib.php.source.html#l1096')" href="externallib.php.source.html#l1096">validate_courses</a>(<a href="../_variables/courseids.html">$courseids</a>, <a href="../_variables/courses.html">$courses</a> = array()&nbsp;&nbsp;
<a href="../_functions/validate_courses.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Validate a list of courses, returning the complete course objects for valid courses.<BR>
</b><BR><b>param:</b> array $courseids A list of course ids<br>
<b>param:</b> array $courses&nbsp;&nbsp;&nbsp;An array of courses already pre-fetched, indexed by course id.<br>
<b>return:</b> array&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;An array of courses and the validation warnings<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_area_files" onClick="logFunction('get_area_files', 'externallib.php.source.html#l1134')" href="externallib.php.source.html#l1134">get_area_files</a>(<a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/component.html">$component</a>, <a href="../_variables/filearea.html">$filearea</a>, <a href="../_variables/itemid.html">$itemid</a> = false, <a href="../_variables/useitemidinurl.html">$useitemidinurl</a> = true)&nbsp;&nbsp;
<a href="../_functions/get_area_files.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns all area files (optionally limited by itemid).<BR>
</b><BR><b>param:</b> int $contextid context ID<br>
<b>param:</b> string $component component<br>
<b>param:</b> string $filearea file area<br>
<b>param:</b> int $itemid item ID or all files if not specified<br>
<b>param:</b> bool $useitemidinurl wether to use the item id in the file URL (modules intro don't use it)<br>
<b>return:</b> array of files, compatible with the external_files structure.<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="external_files"><b>external_files</b></a>&nbsp;&nbsp;- <a href="../_classes/external_files.html"><small>X-Ref</small></a>
</p>
<b>External structure representing a set of files.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'externallib.php.source.html#l1177')" href="externallib.php.source.html#l1177">__construct</a>(<a href="../_variables/desc.html">$desc</a> = 'List of files.', <a href="../_variables/required.html">$required</a> = VALUE_REQUIRED)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR><b>param:</b> string $desc Description for the multiple structure.<br>
<b>param:</b> int $required The type of value (VALUE_REQUIRED OR VALUE_OPTIONAL).<br>
</td></tr></table>

<br>
</div>
</div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
