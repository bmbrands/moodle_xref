<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of grade_item.php</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/grade';
filename='grade_item.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/lib/grade/</a> -> <a href="grade_item.php.source.html">grade_item.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="grade_item.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../../_stats.html">Project Stats</a>]</p>
<p><b>Definition of a class to represent a grade item</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2006 Nicolas Connault</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>2208 lines (77 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>0 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>1 file<br>&nbsp;<a href="../../lib/grade/grade_object.php.html">lib/grade/grade_object.php</a>
</td></tr>
</table>
<h3>Defines 1 class</h3>
<div class="inset">
<p><b>grade_item::</b> (65 methods):<br>
&nbsp;&nbsp;<a href="#update">update</a>()<br>
&nbsp;&nbsp;<a href="#qualifies_for_regrading">qualifies_for_regrading</a>()<br>
&nbsp;&nbsp;<a href="#fetch">fetch</a>()<br>
&nbsp;&nbsp;<a href="#fetch_all">fetch_all</a>()<br>
&nbsp;&nbsp;<a href="#delete">delete</a>()<br>
&nbsp;&nbsp;<a href="#delete_all_grades">delete_all_grades</a>()<br>
&nbsp;&nbsp;<a href="#insert">insert</a>()<br>
&nbsp;&nbsp;<a href="#add_idnumber">add_idnumber</a>()<br>
&nbsp;&nbsp;<a href="#is_locked">is_locked</a>()<br>
&nbsp;&nbsp;<a href="#set_locked">set_locked</a>()<br>
&nbsp;&nbsp;<a href="#check_locktime">check_locktime</a>()<br>
&nbsp;&nbsp;<a href="#set_locktime">set_locktime</a>()<br>
&nbsp;&nbsp;<a href="#get_locktime">get_locktime</a>()<br>
&nbsp;&nbsp;<a href="#set_hidden">set_hidden</a>()<br>
&nbsp;&nbsp;<a href="#has_hidden_grades">has_hidden_grades</a>()<br>
&nbsp;&nbsp;<a href="#regrading_finished">regrading_finished</a>()<br>
&nbsp;&nbsp;<a href="#regrade_final_grades">regrade_final_grades</a>()<br>
&nbsp;&nbsp;<a href="#adjust_raw_grade">adjust_raw_grade</a>()<br>
&nbsp;&nbsp;<a href="#force_regrading">force_regrading</a>()<br>
&nbsp;&nbsp;<a href="#load_scale">load_scale</a>()<br>
&nbsp;&nbsp;<a href="#load_outcome">load_outcome</a>()<br>
&nbsp;&nbsp;<a href="#get_parent_category">get_parent_category</a>()<br>
&nbsp;&nbsp;<a href="#load_parent_category">load_parent_category</a>()<br>
&nbsp;&nbsp;<a href="#get_item_category">get_item_category</a>()<br>
&nbsp;&nbsp;<a href="#load_item_category">load_item_category</a>()<br>
&nbsp;&nbsp;<a href="#is_category_item">is_category_item</a>()<br>
&nbsp;&nbsp;<a href="#is_course_item">is_course_item</a>()<br>
&nbsp;&nbsp;<a href="#is_manual_item">is_manual_item</a>()<br>
&nbsp;&nbsp;<a href="#is_outcome_item">is_outcome_item</a>()<br>
&nbsp;&nbsp;<a href="#is_external_item">is_external_item</a>()<br>
&nbsp;&nbsp;<a href="#is_overridable_item">is_overridable_item</a>()<br>
&nbsp;&nbsp;<a href="#is_overridable_item_feedback">is_overridable_item_feedback</a>()<br>
&nbsp;&nbsp;<a href="#is_raw_used">is_raw_used</a>()<br>
&nbsp;&nbsp;<a href="#fetch_course_item">fetch_course_item</a>()<br>
&nbsp;&nbsp;<a href="#is_editable">is_editable</a>()<br>
&nbsp;&nbsp;<a href="#is_calculated">is_calculated</a>()<br>
&nbsp;&nbsp;<a href="#get_calculation">get_calculation</a>()<br>
&nbsp;&nbsp;<a href="#set_calculation">set_calculation</a>()<br>
&nbsp;&nbsp;<a href="#denormalize_formula">denormalize_formula</a>()<br>
&nbsp;&nbsp;<a href="#normalize_formula">normalize_formula</a>()<br>
&nbsp;&nbsp;<a href="#get_final">get_final</a>()<br>
&nbsp;&nbsp;<a href="#get_grade">get_grade</a>()<br>
&nbsp;&nbsp;<a href="#get_sortorder">get_sortorder</a>()<br>
&nbsp;&nbsp;<a href="#get_idnumber">get_idnumber</a>()<br>
&nbsp;&nbsp;<a href="#get_grade_item">get_grade_item</a>()<br>
&nbsp;&nbsp;<a href="#set_sortorder">set_sortorder</a>()<br>
&nbsp;&nbsp;<a href="#move_after_sortorder">move_after_sortorder</a>()<br>
&nbsp;&nbsp;<a href="#fix_duplicate_sortorder">fix_duplicate_sortorder</a>()<br>
&nbsp;&nbsp;<a href="#get_name">get_name</a>()<br>
&nbsp;&nbsp;<a href="#get_description">get_description</a>()<br>
&nbsp;&nbsp;<a href="#set_parent">set_parent</a>()<br>
&nbsp;&nbsp;<a href="#bounded_grade">bounded_grade</a>()<br>
&nbsp;&nbsp;<a href="#depends_on">depends_on</a>()<br>
&nbsp;&nbsp;<a href="#refresh_grades">refresh_grades</a>()<br>
&nbsp;&nbsp;<a href="#update_final_grade">update_final_grade</a>()<br>
&nbsp;&nbsp;<a href="#update_raw_grade">update_raw_grade</a>()<br>
&nbsp;&nbsp;<a href="#compute">compute</a>()<br>
&nbsp;&nbsp;<a href="#use_formula">use_formula</a>()<br>
&nbsp;&nbsp;<a href="#validate_formula">validate_formula</a>()<br>
&nbsp;&nbsp;<a href="#get_displaytype">get_displaytype</a>()<br>
&nbsp;&nbsp;<a href="#get_decimals">get_decimals</a>()<br>
&nbsp;&nbsp;<a href="#get_formatted_range">get_formatted_range</a>()<br>
&nbsp;&nbsp;<a href="#get_coefstring">get_coefstring</a>()<br>
&nbsp;&nbsp;<a href="#can_control_visibility">can_control_visibility</a>()<br>
&nbsp;&nbsp;<a href="#notify_changed">notify_changed</a>()<br>
</p>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="grade_item"><b>grade_item</b></a>&nbsp;&nbsp;- <a href="../../_classes/grade_item.html"><small>X-Ref</small></a>
</p>
<b>Class representing a grade item.<BR>
</b><br>
It is responsible for handling its DB representation, modifying and returning its metadata.<BR>
<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update" onClick="logFunction('update', 'grade_item.php.source.html#l260')" href="grade_item.php.source.html#l260">update</a>(<a href="../../_variables/source.html">$source</a>=null)&nbsp;&nbsp;
<a href="../../_functions/update.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>In addition to update() as defined in grade_object, handle the grade_outcome and grade_scale objects.<BR>
Force regrading if necessary, rounds the float numbers using php function,<BR>
the reason is we need to compare the db value with computed number to skip regrading if possible.<BR>
</b><BR><b>param:</b> string $source from where was the object inserted (mod/forum, manual, etc.)<br>
<b>return:</b> bool success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="qualifies_for_regrading" onClick="logFunction('qualifies_for_regrading', 'grade_item.php.source.html#l296')" href="grade_item.php.source.html#l296">qualifies_for_regrading</a>()&nbsp;&nbsp;
<a href="../../_functions/qualifies_for_regrading.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Compares the values held by this object with those of the matching record in DB, and returns<BR>
whether or not these differences are sufficient to justify an update of all parent objects.<BR>
This assumes that this object has an id number and a matching record in DB. If not, it will return false.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="fetch" onClick="logFunction('fetch', 'grade_item.php.source.html#l332')" href="grade_item.php.source.html#l332">fetch</a>(<a href="../../_variables/params.html">$params</a>)&nbsp;&nbsp;
<a href="../../_functions/fetch.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Finds and returns a grade_item instance based on params.<BR>
</b><BR><b>param:</b> array $params associative arrays varname=&gt;value<br>
<b>return:</b> grade_item|bool Returns a grade_item instance or false if none found<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="fetch_all" onClick="logFunction('fetch_all', 'grade_item.php.source.html#l343')" href="grade_item.php.source.html#l343">fetch_all</a>(<a href="../../_variables/params.html">$params</a>)&nbsp;&nbsp;
<a href="../../_functions/fetch_all.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Finds and returns all grade_item instances based on params.<BR>
</b><BR><b>param:</b> array $params associative arrays varname=&gt;value<br>
<b>return:</b> array array of grade_item instances or false if none found.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete" onClick="logFunction('delete', 'grade_item.php.source.html#l354')" href="grade_item.php.source.html#l354">delete</a>(<a href="../../_variables/source.html">$source</a>=null)&nbsp;&nbsp;
<a href="../../_functions/delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete all grades and force_regrading of parent category.<BR>
</b><BR><b>param:</b> string $source from where was the object deleted (mod/forum, manual, etc.)<br>
<b>return:</b> bool success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_all_grades" onClick="logFunction('delete_all_grades', 'grade_item.php.source.html#l365')" href="grade_item.php.source.html#l365">delete_all_grades</a>(<a href="../../_variables/source.html">$source</a>=null)&nbsp;&nbsp;
<a href="../../_functions/delete_all_grades.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete all grades<BR>
</b><BR><b>param:</b> string $source from where was the object deleted (mod/forum, manual, etc.)<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="insert" onClick="logFunction('insert', 'grade_item.php.source.html#l385')" href="grade_item.php.source.html#l385">insert</a>(<a href="../../_variables/source.html">$source</a>=null)&nbsp;&nbsp;
<a href="../../_functions/insert.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>In addition to perform parent::insert(), calls force_regrading() method too.<BR>
</b><BR><b>param:</b> string $source From where was the object inserted (mod/forum, manual, etc.)<br>
<b>return:</b> int PK ID if successful, false otherwise<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_idnumber" onClick="logFunction('add_idnumber', 'grade_item.php.source.html#l441')" href="grade_item.php.source.html#l441">add_idnumber</a>(<a href="../../_variables/idnumber.html">$idnumber</a>)&nbsp;&nbsp;
<a href="../../_functions/add_idnumber.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set idnumber of grade item, updates also course_modules table<BR>
</b><BR><b>param:</b> string $idnumber (without magic quotes)<br>
<b>return:</b> bool success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_locked" onClick="logFunction('is_locked', 'grade_item.php.source.html#l476')" href="grade_item.php.source.html#l476">is_locked</a>(<a href="../../_variables/userid.html">$userid</a>=NULL)&nbsp;&nbsp;
<a href="../../_functions/is_locked.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the locked state of this grade_item (if the grade_item is locked OR no specific<BR>
$userid is given) or the locked state of a specific grade within this item if a specific<BR>
$userid is given and the grade_item is unlocked.<BR>
</b><BR><b>param:</b> int $userid The user's ID<br>
<b>return:</b> bool Locked state<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_locked" onClick="logFunction('set_locked', 'grade_item.php.source.html#l499')" href="grade_item.php.source.html#l499">set_locked</a>(<a href="../../_variables/lockedstate.html">$lockedstate</a>, <a href="../../_variables/cascade.html">$cascade</a>=false, <a href="../../_variables/refresh.html">$refresh</a>=true)&nbsp;&nbsp;
<a href="../../_functions/set_locked.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Locks or unlocks this grade_item and (optionally) all its associated final grades.<BR>
</b><BR><b>param:</b> int $lockedstate 0, 1 or a timestamp int(10) after which date the item will be locked.<br>
<b>param:</b> bool $cascade Lock/unlock child objects too<br>
<b>param:</b> bool $refresh Refresh grades when unlocking<br>
<b>return:</b> bool True if grade_item all grades updated, false if at least one update fails<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="check_locktime" onClick="logFunction('check_locktime', 'grade_item.php.source.html#l556')" href="grade_item.php.source.html#l556">check_locktime</a>()&nbsp;&nbsp;
<a href="../../_functions/check_locktime.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Lock the grade if needed. Make sure this is called only when final grades are valid<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_locktime" onClick="logFunction('set_locktime', 'grade_item.php.source.html#l570')" href="grade_item.php.source.html#l570">set_locktime</a>(<a href="../../_variables/locktime.html">$locktime</a>)&nbsp;&nbsp;
<a href="../../_functions/set_locktime.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set the locktime for this grade item.<BR>
</b><BR><b>param:</b> int $locktime timestamp for lock to activate<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_locktime" onClick="logFunction('get_locktime', 'grade_item.php.source.html#l581')" href="grade_item.php.source.html#l581">get_locktime</a>()&nbsp;&nbsp;
<a href="../../_functions/get_locktime.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set the locktime for this grade item.<BR>
</b><BR><b>return:</b> int $locktime timestamp for lock to activate<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_hidden" onClick="logFunction('set_hidden', 'grade_item.php.source.html#l590')" href="grade_item.php.source.html#l590">set_hidden</a>(<a href="../../_variables/hidden.html">$hidden</a>, <a href="../../_variables/cascade.html">$cascade</a>=false)&nbsp;&nbsp;
<a href="../../_functions/set_hidden.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set the hidden status of grade_item and all grades.<BR>
</b><BR>0 mean always visible, 1 means always hidden and a number &gt; 1 is a timestamp to hide until<BR>
<BR>
<b>param:</b> int $hidden new hidden status<br>
<b>param:</b> bool $cascade apply to child objects too<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_hidden_grades" onClick="logFunction('has_hidden_grades', 'grade_item.php.source.html#l623')" href="grade_item.php.source.html#l623">has_hidden_grades</a>(<a href="../../_variables/groupsql.html">$groupsql</a>=&quot;&quot;, array <a href="../../_variables/params.html">$params</a>=null, <a href="../../_variables/groupwheresql.html">$groupwheresql</a>=&quot;&quot;)&nbsp;&nbsp;
<a href="../../_functions/has_hidden_grades.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the number of grades that are hidden<BR>
</b><BR><b>param:</b> string $groupsql SQL to limit the query by group<br>
<b>param:</b> array $params SQL params for $groupsql<br>
<b>param:</b> string $groupwheresql Where conditions for $groupsql<br>
<b>return:</b> int The number of hidden grades<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="regrading_finished" onClick="logFunction('regrading_finished', 'grade_item.php.source.html#l640')" href="grade_item.php.source.html#l640">regrading_finished</a>()&nbsp;&nbsp;
<a href="../../_functions/regrading_finished.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Mark regrading as finished successfully.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="regrade_final_grades" onClick="logFunction('regrade_final_grades', 'grade_item.php.source.html#l650')" href="grade_item.php.source.html#l650">regrade_final_grades</a>(<a href="../../_variables/userid.html">$userid</a>=null)&nbsp;&nbsp;
<a href="../../_functions/regrade_final_grades.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Performs the necessary calculations on the grades_final referenced by this grade_item.<BR>
Also resets the needsupdate flag once successfully performed.<BR>
</b><BR>This function must be used ONLY from lib/gradeslib.php/grade_regrade_final_grades(),<BR>
because the regrading must be done in correct order!!<BR>
<BR>
<b>param:</b> int $userid Supply a user ID to limit the regrading to a single user<br>
<b>return:</b> bool true if ok, error string otherwise<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="adjust_raw_grade" onClick="logFunction('adjust_raw_grade', 'grade_item.php.source.html#l739')" href="grade_item.php.source.html#l739">adjust_raw_grade</a>(<a href="../../_variables/rawgrade.html">$rawgrade</a>, <a href="../../_variables/rawmin.html">$rawmin</a>, <a href="../../_variables/rawmax.html">$rawmax</a>)&nbsp;&nbsp;
<a href="../../_functions/adjust_raw_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Given a float grade value or integer grade scale, applies a number of adjustment based on<BR>
grade_item variables and returns the result.<BR>
</b><BR><b>param:</b> float $rawgrade The raw grade value<br>
<b>param:</b> float $rawmin original rawmin<br>
<b>param:</b> float $rawmax original rawmax<br>
<b>return:</b> mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="force_regrading" onClick="logFunction('force_regrading', 'grade_item.php.source.html#l808')" href="grade_item.php.source.html#l808">force_regrading</a>()&nbsp;&nbsp;
<a href="../../_functions/force_regrading.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets this grade_item's needsupdate to true. Also marks the course item as needing update.<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_scale" onClick="logFunction('load_scale', 'grade_item.php.source.html#l822')" href="grade_item.php.source.html#l822">load_scale</a>()&nbsp;&nbsp;
<a href="../../_functions/load_scale.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Instantiates a grade_scale object from the DB if this item's scaleid variable is set<BR>
</b><BR><b>return:</b> grade_scale Returns a grade_scale object or null if no scale used<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_outcome" onClick="logFunction('load_outcome', 'grade_item.php.source.html#l856')" href="grade_item.php.source.html#l856">load_outcome</a>()&nbsp;&nbsp;
<a href="../../_functions/load_outcome.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Instantiates a grade_outcome object from the DB if this item's outcomeid variable is set<BR>
</b><BR><b>return:</b> grade_outcome This grade item's associated grade_outcome or null<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_parent_category" onClick="logFunction('get_parent_category', 'grade_item.php.source.html#l868')" href="grade_item.php.source.html#l868">get_parent_category</a>()&nbsp;&nbsp;
<a href="../../_functions/get_parent_category.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the grade_category object this grade_item belongs to (referenced by categoryid)<BR>
or category attached to category item.<BR>
</b><BR><b>return:</b> grade_category|bool Returns a grade_category object if applicable or false if this is a course item<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_parent_category" onClick="logFunction('load_parent_category', 'grade_item.php.source.html#l883')" href="grade_item.php.source.html#l883">load_parent_category</a>()&nbsp;&nbsp;
<a href="../../_functions/load_parent_category.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Calls upon the get_parent_category method to retrieve the grade_category object<BR>
from the DB and assigns it to $this-&gt;parent_category. It also returns the object.<BR>
</b><BR><b>return:</b> grade_category This grade item's parent grade_category.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_item_category" onClick="logFunction('get_item_category', 'grade_item.php.source.html#l896')" href="grade_item.php.source.html#l896">get_item_category</a>()&nbsp;&nbsp;
<a href="../../_functions/get_item_category.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the grade_category for a grade category grade item<BR>
</b><BR><b>return:</b> grade_category|bool Returns a grade_category instance if applicable or false otherwise<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_item_category" onClick="logFunction('load_item_category', 'grade_item.php.source.html#l908')" href="grade_item.php.source.html#l908">load_item_category</a>()&nbsp;&nbsp;
<a href="../../_functions/load_item_category.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Calls upon the get_item_category method to retrieve the grade_category object<BR>
from the DB and assigns it to $this-&gt;item_category. It also returns the object.<BR>
</b><BR><b>return:</b> grade_category<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_category_item" onClick="logFunction('is_category_item', 'grade_item.php.source.html#l921')" href="grade_item.php.source.html#l921">is_category_item</a>()&nbsp;&nbsp;
<a href="../../_functions/is_category_item.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is the grade item associated with category?<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_course_item" onClick="logFunction('is_course_item', 'grade_item.php.source.html#l930')" href="grade_item.php.source.html#l930">is_course_item</a>()&nbsp;&nbsp;
<a href="../../_functions/is_course_item.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is the grade item associated with course?<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_manual_item" onClick="logFunction('is_manual_item', 'grade_item.php.source.html#l939')" href="grade_item.php.source.html#l939">is_manual_item</a>()&nbsp;&nbsp;
<a href="../../_functions/is_manual_item.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is this a manually graded item?<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_outcome_item" onClick="logFunction('is_outcome_item', 'grade_item.php.source.html#l948')" href="grade_item.php.source.html#l948">is_outcome_item</a>()&nbsp;&nbsp;
<a href="../../_functions/is_outcome_item.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is this an outcome item?<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_external_item" onClick="logFunction('is_external_item', 'grade_item.php.source.html#l957')" href="grade_item.php.source.html#l957">is_external_item</a>()&nbsp;&nbsp;
<a href="../../_functions/is_external_item.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is the grade item external - associated with module, plugin or something else?<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_overridable_item" onClick="logFunction('is_overridable_item', 'grade_item.php.source.html#l966')" href="grade_item.php.source.html#l966">is_overridable_item</a>()&nbsp;&nbsp;
<a href="../../_functions/is_overridable_item.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is the grade item overridable<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_overridable_item_feedback" onClick="logFunction('is_overridable_item_feedback', 'grade_item.php.source.html#l981')" href="grade_item.php.source.html#l981">is_overridable_item_feedback</a>()&nbsp;&nbsp;
<a href="../../_functions/is_overridable_item_feedback.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is the grade item feedback overridable<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_raw_used" onClick="logFunction('is_raw_used', 'grade_item.php.source.html#l990')" href="grade_item.php.source.html#l990">is_raw_used</a>()&nbsp;&nbsp;
<a href="../../_functions/is_raw_used.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if grade items uses raw grades<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="fetch_course_item" onClick="logFunction('fetch_course_item', 'grade_item.php.source.html#l999')" href="grade_item.php.source.html#l999">fetch_course_item</a>(<a href="../../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../../_functions/fetch_course_item.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the grade item associated with the course<BR>
</b><BR><b>param:</b> int $courseid<br>
<b>return:</b> grade_item Course level grade item object<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_editable" onClick="logFunction('is_editable', 'grade_item.php.source.html#l1015')" href="grade_item.php.source.html#l1015">is_editable</a>()&nbsp;&nbsp;
<a href="../../_functions/is_editable.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is grading object editable?<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_calculated" onClick="logFunction('is_calculated', 'grade_item.php.source.html#l1024')" href="grade_item.php.source.html#l1024">is_calculated</a>()&nbsp;&nbsp;
<a href="../../_functions/is_calculated.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if grade calculated. Returns this object's calculation.<BR>
</b><BR><b>return:</b> bool true if grade item calculated.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_calculation" onClick="logFunction('get_calculation', 'grade_item.php.source.html#l1048')" href="grade_item.php.source.html#l1048">get_calculation</a>()&nbsp;&nbsp;
<a href="../../_functions/get_calculation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns calculation string if grade calculated.<BR>
</b><BR><b>return:</b> string Returns the grade item's calculation if calculation is used, null if not<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_calculation" onClick="logFunction('set_calculation', 'grade_item.php.source.html#l1062')" href="grade_item.php.source.html#l1062">set_calculation</a>(<a href="../../_variables/formula.html">$formula</a>)&nbsp;&nbsp;
<a href="../../_functions/set_calculation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets this item's calculation (creates it) if not yet set, or<BR>
updates it if already set (in the DB). If no calculation is given,<BR>
the calculation is removed.<BR>
</b><BR><b>param:</b> string $formula string representation of formula used for calculation<br>
<b>return:</b> bool success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="denormalize_formula" onClick="logFunction('denormalize_formula', 'grade_item.php.source.html#l1076')" href="grade_item.php.source.html#l1076">denormalize_formula</a>(<a href="../../_variables/formula.html">$formula</a>, <a href="../../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../../_functions/denormalize_formula.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Denormalizes the calculation formula to [idnumber] form<BR>
</b><BR><b>param:</b> string $formula A string representation of the formula<br>
<b>param:</b> int $courseid The course ID<br>
<b>return:</b> string The denormalized formula as a string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="normalize_formula" onClick="logFunction('normalize_formula', 'grade_item.php.source.html#l1103')" href="grade_item.php.source.html#l1103">normalize_formula</a>(<a href="../../_variables/formula.html">$formula</a>, <a href="../../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../../_functions/normalize_formula.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Normalizes the calculation formula to [#giXX#] form<BR>
</b><BR><b>param:</b> string $formula The formula<br>
<b>param:</b> int $courseid The course ID<br>
<b>return:</b> string The normalized formula as a string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_final" onClick="logFunction('get_final', 'grade_item.php.source.html#l1128')" href="grade_item.php.source.html#l1128">get_final</a>(<a href="../../_variables/userid.html">$userid</a>=NULL)&nbsp;&nbsp;
<a href="../../_functions/get_final.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the final values for this grade item (as imported by module or other source).<BR>
</b><BR><b>param:</b> int $userid Optional: to retrieve a single user's final grade<br>
<b>return:</b> array|grade_grade An array of all grade_grade instances for this grade_item, or a single grade_grade instance.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_grade" onClick="logFunction('get_grade', 'grade_item.php.source.html#l1155')" href="grade_item.php.source.html#l1155">get_grade</a>(<a href="../../_variables/userid.html">$userid</a>, <a href="../../_variables/create.html">$create</a>=true)&nbsp;&nbsp;
<a href="../../_functions/get_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get (or create if not exist yet) grade for this user<BR>
</b><BR><b>param:</b> int $userid The user ID<br>
<b>param:</b> bool $create If true and the user has no grade for this grade item a new grade_grade instance will be inserted<br>
<b>return:</b> grade_grade The grade_grade instance for the user for this grade item<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_sortorder" onClick="logFunction('get_sortorder', 'grade_item.php.source.html#l1176')" href="grade_item.php.source.html#l1176">get_sortorder</a>()&nbsp;&nbsp;
<a href="../../_functions/get_sortorder.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the sortorder of this grade_item. This method is also available in<BR>
grade_category, for cases where the object type is not know.<BR>
</b><BR><b>return:</b> int Sort order<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_idnumber" onClick="logFunction('get_idnumber', 'grade_item.php.source.html#l1186')" href="grade_item.php.source.html#l1186">get_idnumber</a>()&nbsp;&nbsp;
<a href="../../_functions/get_idnumber.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the idnumber of this grade_item. This method is also available in<BR>
grade_category, for cases where the object type is not know.<BR>
</b><BR><b>return:</b> string The grade item idnumber<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_grade_item" onClick="logFunction('get_grade_item', 'grade_item.php.source.html#l1196')" href="grade_item.php.source.html#l1196">get_grade_item</a>()&nbsp;&nbsp;
<a href="../../_functions/get_grade_item.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns this grade_item. This method is also available in<BR>
grade_category, for cases where the object type is not know.<BR>
</b><BR><b>return:</b> grade_item<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_sortorder" onClick="logFunction('set_sortorder', 'grade_item.php.source.html#l1206')" href="grade_item.php.source.html#l1206">set_sortorder</a>(<a href="../../_variables/sortorder.html">$sortorder</a>)&nbsp;&nbsp;
<a href="../../_functions/set_sortorder.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets the sortorder of this grade_item. This method is also available in<BR>
grade_category, for cases where the object type is not know.<BR>
</b><BR><b>param:</b> int $sortorder<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="move_after_sortorder" onClick="logFunction('move_after_sortorder', 'grade_item.php.source.html#l1220')" href="grade_item.php.source.html#l1220">move_after_sortorder</a>(<a href="../../_variables/sortorder.html">$sortorder</a>)&nbsp;&nbsp;
<a href="../../_functions/move_after_sortorder.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Update this grade item's sortorder so that it will appear after $sortorder<BR>
</b><BR><b>param:</b> int $sortorder The sort order to place this grade item after<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="fix_duplicate_sortorder" onClick="logFunction('fix_duplicate_sortorder', 'grade_item.php.source.html#l1238')" href="grade_item.php.source.html#l1238">fix_duplicate_sortorder</a>(<a href="../../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../../_functions/fix_duplicate_sortorder.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Detect duplicate grade item's sortorder and re-sort them.<BR>
Note: Duplicate sortorder will be introduced while duplicating activities or<BR>
merging two courses.<BR>
</b><BR><b>param:</b> int $courseid id of the course for which grade_items sortorder need to be fixed.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_name" onClick="logFunction('get_name', 'grade_item.php.source.html#l1274')" href="grade_item.php.source.html#l1274">get_name</a>(<a href="../../_variables/fulltotal.html">$fulltotal</a>=false)&nbsp;&nbsp;
<a href="../../_functions/get_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the most descriptive field for this object.<BR>
</b><BR>Determines what type of grade item it is then returns the appropriate string<BR>
<BR>
<b>param:</b> bool $fulltotal If the item is a category total, returns $categoryname.&quot;total&quot; instead of &quot;Category total&quot; or &quot;Course total&quot;<br>
<b>return:</b> string name<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_description" onClick="logFunction('get_description', 'grade_item.php.source.html#l1305')" href="grade_item.php.source.html#l1305">get_description</a>()&nbsp;&nbsp;
<a href="../../_functions/get_description.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>A grade item can return a more detailed description which will be added to the header of the column/row in some reports.<BR>
</b><BR><b>return:</b> string description<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_parent" onClick="logFunction('set_parent', 'grade_item.php.source.html#l1318')" href="grade_item.php.source.html#l1318">set_parent</a>(<a href="../../_variables/parentid.html">$parentid</a>)&nbsp;&nbsp;
<a href="../../_functions/set_parent.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets this item's categoryid. A generic method shared by objects that have a parent id of some kind.<BR>
</b><BR><b>param:</b> int $parentid The ID of the new parent<br>
<b>return:</b> bool True if success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="bounded_grade" onClick="logFunction('bounded_grade', 'grade_item.php.source.html#l1354')" href="grade_item.php.source.html#l1354">bounded_grade</a>(<a href="../../_variables/gradevalue.html">$gradevalue</a>)&nbsp;&nbsp;
<a href="../../_functions/bounded_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Makes sure value is a valid grade value.<BR>
</b><BR><b>param:</b> float $gradevalue<br>
<b>return:</b> mixed float or int fixed grade value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="depends_on" onClick="logFunction('depends_on', 'grade_item.php.source.html#l1392')" href="grade_item.php.source.html#l1392">depends_on</a>(<a href="../../_variables/reset_cache.html">$reset_cache</a>=false)&nbsp;&nbsp;
<a href="../../_functions/depends_on.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Finds out on which other items does this depend directly when doing calculation or category aggregation<BR>
</b><BR><b>param:</b> bool $reset_cache<br>
<b>return:</b> array of grade_item IDs this one depends on<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="refresh_grades" onClick="logFunction('refresh_grades', 'grade_item.php.source.html#l1488')" href="grade_item.php.source.html#l1488">refresh_grades</a>(<a href="../../_variables/userid.html">$userid</a>=0)&nbsp;&nbsp;
<a href="../../_functions/refresh_grades.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Refetch grades from modules, plugins.<BR>
</b><BR><b>param:</b> int $userid optional, limit the refetch to a single user<br>
<b>return:</b> bool Returns true on success or if there is nothing to do<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_final_grade" onClick="logFunction('update_final_grade', 'grade_item.php.source.html#l1521')" href="grade_item.php.source.html#l1521">update_final_grade</a>(<a href="../../_variables/userid.html">$userid</a>, <a href="../../_variables/finalgrade.html">$finalgrade</a>=false, <a href="../../_variables/source.html">$source</a>=NULL, <a href="../../_variables/feedback.html">$feedback</a>=false, <a href="../../_variables/feedbackformat.html">$feedbackformat</a>=FORMAT_MOODLE, <a href="../../_variables/usermodified.html">$usermodified</a>=null)&nbsp;&nbsp;
<a href="../../_functions/update_final_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Updates final grade value for given user, this is a only way to update final<BR>
grades from gradebook and import because it logs the change in history table<BR>
and deals with overridden flag. This flag is set to prevent later overriding<BR>
from raw grades submitted from modules.<BR>
</b><BR><b>param:</b> int $userid The graded user<br>
<b>param:</b> float|false $finalgrade The float value of final grade, false means do not change<br>
<b>param:</b> string $source The modification source<br>
<b>param:</b> string $feedback Optional teacher feedback<br>
<b>param:</b> int $feedbackformat A format like FORMAT_PLAIN or FORMAT_HTML<br>
<b>param:</b> int $usermodified The ID of the user making the modification<br>
<b>return:</b> bool success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_raw_grade" onClick="logFunction('update_raw_grade', 'grade_item.php.source.html#l1646')" href="grade_item.php.source.html#l1646">update_raw_grade</a>(<a href="../../_variables/userid.html">$userid</a>, <a href="../../_variables/rawgrade.html">$rawgrade</a>=false, <a href="../../_variables/source.html">$source</a>=NULL, <a href="../../_variables/feedback.html">$feedback</a>=false, <a href="../../_variables/feedbackformat.html">$feedbackformat</a>=FORMAT_MOODLE, <a href="../../_variables/usermodified.html">$usermodified</a>=null, <a href="../../_variables/dategraded.html">$dategraded</a>=null, <a href="../../_variables/datesubmitted.html">$datesubmitted</a>=null, <a href="../../_variables/grade.html">$grade</a>=null)&nbsp;&nbsp;
<a href="../../_functions/update_raw_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Updates raw grade value for given user, this is a only way to update raw<BR>
grades from external source (modules, etc.),<BR>
because it logs the change in history table and deals with final grade recalculation.<BR>
</b><BR><b>param:</b> int $userid the graded user<br>
<b>param:</b> mixed $rawgrade float value of raw grade - false means do not change<br>
<b>param:</b> string $source modification source<br>
<b>param:</b> string $feedback optional teacher feedback<br>
<b>param:</b> int $feedbackformat A format like FORMAT_PLAIN or FORMAT_HTML<br>
<b>param:</b> int $usermodified the ID of the user who did the grading<br>
<b>param:</b> int $dategraded A timestamp of when the student's work was graded<br>
<b>param:</b> int $datesubmitted A timestamp of when the student's work was submitted<br>
<b>param:</b> grade_grade $grade A grade object, useful for bulk upgrades<br>
<b>return:</b> bool success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="compute" onClick="logFunction('compute', 'grade_item.php.source.html#l1802')" href="grade_item.php.source.html#l1802">compute</a>(<a href="../../_variables/userid.html">$userid</a>=null)&nbsp;&nbsp;
<a href="../../_functions/compute.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Calculates final grade values using the formula in the calculation property.<BR>
The parameters are taken from final grades of grade items in current course only.<BR>
</b><BR><b>param:</b> int $userid Supply a user ID to limit the calculations to the grades of a single user<br>
<b>return:</b> bool false if error<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="use_formula" onClick="logFunction('use_formula', 'grade_item.php.source.html#l1913')" href="grade_item.php.source.html#l1913">use_formula</a>(<a href="../../_variables/userid.html">$userid</a>, <a href="../../_variables/params.html">$params</a>, <a href="../../_variables/useditems.html">$useditems</a>, <a href="../../_variables/oldgrade.html">$oldgrade</a>)&nbsp;&nbsp;
<a href="../../_functions/use_formula.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Internal function that does the final grade calculation<BR>
</b><BR><b>param:</b> int $userid The user ID<br>
<b>param:</b> array $params An array of grade items of the form {'gi'.$itemid]} =&gt; $finalgrade<br>
<b>param:</b> array $useditems An array of grade item IDs that this grade item depends on plus its own ID<br>
<b>param:</b> grade_grade $oldgrade A grade_grade instance containing the old values from the database<br>
<b>return:</b> bool False if an error occurred<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="validate_formula" onClick="logFunction('validate_formula', 'grade_item.php.source.html#l2005')" href="grade_item.php.source.html#l2005">validate_formula</a>(<a href="../../_variables/formulastr.html">$formulastr</a>)&nbsp;&nbsp;
<a href="../../_functions/validate_formula.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Validate the formula.<BR>
</b><BR><b>param:</b> string $formulastr<br>
<b>return:</b> bool true if calculation possible, false otherwise<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_displaytype" onClick="logFunction('get_displaytype', 'grade_item.php.source.html#l2084')" href="grade_item.php.source.html#l2084">get_displaytype</a>()&nbsp;&nbsp;
<a href="../../_functions/get_displaytype.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the value of the display type<BR>
</b><BR>It can be set at 3 levels: grade_item, course setting and site. The lowest level overrides the higher ones.<BR>
<BR>
<b>return:</b> int Display type<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_decimals" onClick="logFunction('get_decimals', 'grade_item.php.source.html#l2102')" href="grade_item.php.source.html#l2102">get_decimals</a>()&nbsp;&nbsp;
<a href="../../_functions/get_decimals.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the value of the decimals field<BR>
</b><BR>It can be set at 3 levels: grade_item, course setting and site. The lowest level overrides the higher ones.<BR>
<BR>
<b>return:</b> int Decimals (0 - 5)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_formatted_range" onClick="logFunction('get_formatted_range', 'grade_item.php.source.html#l2120')" href="grade_item.php.source.html#l2120">get_formatted_range</a>(<a href="../../_variables/rangesdisplaytype.html">$rangesdisplaytype</a>=null, <a href="../../_variables/rangesdecimalpoints.html">$rangesdecimalpoints</a>=null)&nbsp;&nbsp;
<a href="../../_functions/get_formatted_range.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns a string representing the range of grademin - grademax for this grade item.<BR>
</b><BR><b>param:</b> int $rangesdisplaytype<br>
<b>param:</b> int $rangesdecimalpoints<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_coefstring" onClick="logFunction('get_coefstring', 'grade_item.php.source.html#l2162')" href="grade_item.php.source.html#l2162">get_coefstring</a>()&nbsp;&nbsp;
<a href="../../_functions/get_coefstring.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Queries parent categories recursively to find the aggregationcoef type that applies to this grade item.<BR>
</b><BR><b>return:</b> string|false Returns the coefficient string of false is no coefficient is being used<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_control_visibility" onClick="logFunction('can_control_visibility', 'grade_item.php.source.html#l2180')" href="grade_item.php.source.html#l2180">can_control_visibility</a>()&nbsp;&nbsp;
<a href="../../_functions/can_control_visibility.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns whether the grade item can control the visibility of the grades<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="notify_changed" onClick="logFunction('notify_changed', 'grade_item.php.source.html#l2192')" href="grade_item.php.source.html#l2192">notify_changed</a>(<a href="../../_variables/deleted.html">$deleted</a>)&nbsp;&nbsp;
<a href="../../_functions/notify_changed.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Used to notify the completion system (if necessary) that a user's grade<BR>
has changed, and clear up a possible score cache.<BR>
</b><BR><b>param:</b> bool $deleted True if grade was actually deleted<br>
</td></tr></table>

<br>
</div>
</div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
