<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of stored_file.php</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/filestorage';
filename='stored_file.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/lib/filestorage/</a> -> <a href="stored_file.php.source.html">stored_file.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="stored_file.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../../_stats.html">Project Stats</a>]</p>
<p><b>Definition of a class stored_file.</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2008 Petr Skoda {@link http://skodak.org}</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>1066 lines (37 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>0 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 1 class</h3>
<div class="inset">
<p><b>stored_file::</b> (62 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#is_external_file">is_external_file</a>()<br>
&nbsp;&nbsp;<a href="#update">update</a>()<br>
&nbsp;&nbsp;<a href="#rename">rename</a>()<br>
&nbsp;&nbsp;<a href="#replace_content_with">replace_content_with</a>()<br>
&nbsp;&nbsp;<a href="#replace_file_with">replace_file_with</a>()<br>
&nbsp;&nbsp;<a href="#delete_reference">delete_reference</a>()<br>
&nbsp;&nbsp;<a href="#is_directory">is_directory</a>()<br>
&nbsp;&nbsp;<a href="#delete">delete</a>()<br>
&nbsp;&nbsp;<a href="#get_pathname_by_contenthash">get_pathname_by_contenthash</a>()<br>
&nbsp;&nbsp;<a href="#get_content_file_location">get_content_file_location</a>()<br>
&nbsp;&nbsp;<a href="#add_to_curl_request">add_to_curl_request</a>()<br>
&nbsp;&nbsp;<a href="#get_content_file_handle">get_content_file_handle</a>()<br>
&nbsp;&nbsp;<a href="#readfile">readfile</a>()<br>
&nbsp;&nbsp;<a href="#get_content">get_content</a>()<br>
&nbsp;&nbsp;<a href="#copy_content_to">copy_content_to</a>()<br>
&nbsp;&nbsp;<a href="#copy_content_to_temp">copy_content_to_temp</a>()<br>
&nbsp;&nbsp;<a href="#list_files">list_files</a>()<br>
&nbsp;&nbsp;<a href="#extract_to_pathname">extract_to_pathname</a>()<br>
&nbsp;&nbsp;<a href="#extract_to_storage">extract_to_storage</a>()<br>
&nbsp;&nbsp;<a href="#archive_file">archive_file</a>()<br>
&nbsp;&nbsp;<a href="#get_imageinfo">get_imageinfo</a>()<br>
&nbsp;&nbsp;<a href="#is_valid_image">is_valid_image</a>()<br>
&nbsp;&nbsp;<a href="#get_parent_directory">get_parent_directory</a>()<br>
&nbsp;&nbsp;<a href="#sync_external_file">sync_external_file</a>()<br>
&nbsp;&nbsp;<a href="#get_contextid">get_contextid</a>()<br>
&nbsp;&nbsp;<a href="#get_component">get_component</a>()<br>
&nbsp;&nbsp;<a href="#get_filearea">get_filearea</a>()<br>
&nbsp;&nbsp;<a href="#get_itemid">get_itemid</a>()<br>
&nbsp;&nbsp;<a href="#get_filepath">get_filepath</a>()<br>
&nbsp;&nbsp;<a href="#get_filename">get_filename</a>()<br>
&nbsp;&nbsp;<a href="#get_userid">get_userid</a>()<br>
&nbsp;&nbsp;<a href="#get_filesize">get_filesize</a>()<br>
&nbsp;&nbsp;<a href="#set_filesize">set_filesize</a>()<br>
&nbsp;&nbsp;<a href="#get_mimetype">get_mimetype</a>()<br>
&nbsp;&nbsp;<a href="#get_timecreated">get_timecreated</a>()<br>
&nbsp;&nbsp;<a href="#get_timemodified">get_timemodified</a>()<br>
&nbsp;&nbsp;<a href="#set_timemodified">set_timemodified</a>()<br>
&nbsp;&nbsp;<a href="#get_status">get_status</a>()<br>
&nbsp;&nbsp;<a href="#get_id">get_id</a>()<br>
&nbsp;&nbsp;<a href="#get_contenthash">get_contenthash</a>()<br>
&nbsp;&nbsp;<a href="#get_pathnamehash">get_pathnamehash</a>()<br>
&nbsp;&nbsp;<a href="#get_license">get_license</a>()<br>
&nbsp;&nbsp;<a href="#set_license">set_license</a>()<br>
&nbsp;&nbsp;<a href="#get_author">get_author</a>()<br>
&nbsp;&nbsp;<a href="#set_author">set_author</a>()<br>
&nbsp;&nbsp;<a href="#get_source">get_source</a>()<br>
&nbsp;&nbsp;<a href="#set_source">set_source</a>()<br>
&nbsp;&nbsp;<a href="#get_sortorder">get_sortorder</a>()<br>
&nbsp;&nbsp;<a href="#set_sortorder">set_sortorder</a>()<br>
&nbsp;&nbsp;<a href="#get_repository_id">get_repository_id</a>()<br>
&nbsp;&nbsp;<a href="#get_referencefileid">get_referencefileid</a>()<br>
&nbsp;&nbsp;<a href="#get_referencelastsync">get_referencelastsync</a>()<br>
&nbsp;&nbsp;<a href="#get_referencelifetime">get_referencelifetime</a>()<br>
&nbsp;&nbsp;<a href="#get_reference">get_reference</a>()<br>
&nbsp;&nbsp;<a href="#get_reference_details">get_reference_details</a>()<br>
&nbsp;&nbsp;<a href="#set_synchronized">set_synchronized</a>()<br>
&nbsp;&nbsp;<a href="#set_missingsource">set_missingsource</a>()<br>
&nbsp;&nbsp;<a href="#send_file">send_file</a>()<br>
&nbsp;&nbsp;<a href="#import_external_file_contents">import_external_file_contents</a>()<br>
&nbsp;&nbsp;<a href="#send_relative_file">send_relative_file</a>()<br>
&nbsp;&nbsp;<a href="#generate_image_thumbnail">generate_image_thumbnail</a>()<br>
</p>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="stored_file"><b>stored_file</b></a>&nbsp;&nbsp;- <a href="../../_classes/stored_file.html"><small>X-Ref</small></a>
</p>
<b>Class representing local files stored in a sha1 file pool.<BR>
</b><br>
Since Moodle 2.0 file contents are stored in sha1 pool and<BR>
all other file information is stored in new &quot;files&quot; database table.<BR>
<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'stored_file.php.source.html#l63')" href="stored_file.php.source.html#l63">__construct</a>(file_storage <a href="../../_variables/fs.html">$fs</a>, stdClass <a href="../../_variables/file_record.html">$file_record</a>, <a href="../../_variables/filedir.html">$filedir</a>)&nbsp;&nbsp;
<a href="../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor, this constructor should be called ONLY from the file_storage class!<BR>
</b><BR><b>param:</b> file_storage $fs file&nbsp;&nbsp;storage instance<br>
<b>param:</b> stdClass $file_record description of file<br>
<b>param:</b> string $filedir location of file directory with sh1 named content files<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_external_file" onClick="logFunction('is_external_file', 'stored_file.php.source.html#l94')" href="stored_file.php.source.html#l94">is_external_file</a>()&nbsp;&nbsp;
<a href="../../_functions/is_external_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Whether or not this is a external resource<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update" onClick="logFunction('update', 'stored_file.php.source.html#l103')" href="stored_file.php.source.html#l103">update</a>(<a href="../../_variables/dataobject.html">$dataobject</a>)&nbsp;&nbsp;
<a href="../../_functions/update.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Update some file record fields<BR>
NOTE: Must remain protected<BR>
</b><BR><b>param:</b> stdClass $dataobject<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="rename" onClick="logFunction('rename', 'stored_file.php.source.html#l200')" href="stored_file.php.source.html#l200">rename</a>(<a href="../../_variables/filepath.html">$filepath</a>, <a href="../../_variables/filename.html">$filename</a>)&nbsp;&nbsp;
<a href="../../_functions/rename.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Rename filename<BR>
</b><BR><b>param:</b> string $filepath file path<br>
<b>param:</b> string $filename file name<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="replace_content_with" onClick="logFunction('replace_content_with', 'stored_file.php.source.html#l225')" href="stored_file.php.source.html#l225">replace_content_with</a>(stored_file <a href="../../_variables/storedfile.html">$storedfile</a>)&nbsp;&nbsp;
<a href="../../_functions/replace_content_with.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Function stored_file::replace_content_with() is deprecated. Please use stored_file::replace_file_with()<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="replace_file_with" onClick="logFunction('replace_file_with', 'stored_file.php.source.html#l236')" href="stored_file.php.source.html#l236">replace_file_with</a>(stored_file <a href="../../_variables/newfile.html">$newfile</a>)&nbsp;&nbsp;
<a href="../../_functions/replace_file_with.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Replaces the fields that might have changed when file was overriden in filepicker:<BR>
reference, contenthash, filesize, userid<BR>
</b><BR>Note that field 'source' must be updated separately because<BR>
it has different format for draft and non-draft areas and<BR>
this function will usually be used to replace non-draft area<BR>
file with draft area file.<BR>
<BR>
<b>param:</b> stored_file $newfile<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_reference" onClick="logFunction('delete_reference', 'stored_file.php.source.html#l270')" href="stored_file.php.source.html#l270">delete_reference</a>()&nbsp;&nbsp;
<a href="../../_functions/delete_reference.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Unlink the stored file from the referenced file<BR>
</b><BR>This methods destroys the link to the record in files_reference table. This effectively<BR>
turns the stored file from being an alias to a plain copy. However, the caller has<BR>
to make sure that the actual file's content has beed synced prior to calling this method.<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_directory" onClick="logFunction('is_directory', 'stored_file.php.source.html#l310')" href="stored_file.php.source.html#l310">is_directory</a>()&nbsp;&nbsp;
<a href="../../_functions/is_directory.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is this a directory?<BR>
</b><BR>Directories are only emulated, internally they are stored as empty<BR>
files with a &quot;.&quot; instead of name - this means empty directory contains<BR>
exactly one empty file with name dot.<BR>
<BR>
<b>return:</b> bool true means directory, false means file<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete" onClick="logFunction('delete', 'stored_file.php.source.html#l323')" href="stored_file.php.source.html#l323">delete</a>()&nbsp;&nbsp;
<a href="../../_functions/delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete file from files table.<BR>
</b><BR>The content of files stored in sha1 pool is reclaimed<BR>
later - the occupied disk space is reclaimed much later.<BR>
<BR>
<b>return:</b> bool always true or exception if error occurred<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_pathname_by_contenthash" onClick="logFunction('get_pathname_by_contenthash', 'stored_file.php.source.html#l364')" href="stored_file.php.source.html#l364">get_pathname_by_contenthash</a>()&nbsp;&nbsp;
<a href="../../_functions/get_pathname_by_contenthash.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get file pathname by contenthash<BR>
</b><BR>NOTE, this function is not calling sync_external_file, it assume the contenthash is current<BR>
Protected - developers must not gain direct access to this function.<BR>
<BR>
<b>return:</b> string full path to pool file with file content<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_content_file_location" onClick="logFunction('get_content_file_location', 'stored_file.php.source.html#l380')" href="stored_file.php.source.html#l380">get_content_file_location</a>()&nbsp;&nbsp;
<a href="../../_functions/get_content_file_location.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get file pathname by given contenthash, this method will try to sync files<BR>
</b><BR>Protected - developers must not gain direct access to this function.<BR>
<BR>
NOTE: do not make this public, we must not modify or delete the pool files directly! ;-)<BR>
<BR>
<b>return:</b> string full path to pool file with file content<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_to_curl_request" onClick="logFunction('add_to_curl_request', 'stored_file.php.source.html#l394')" href="stored_file.php.source.html#l394">add_to_curl_request</a>(&amp;<a href="../../_variables/curlrequest.html">$curlrequest</a>, <a href="../../_variables/key.html">$key</a>)&nbsp;&nbsp;
<a href="../../_functions/add_to_curl_request.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>adds this file path to a curl request (POST only)<BR>
</b><BR><b>param:</b> curl $curlrequest the curl request object<br>
<b>param:</b> string $key what key to use in the POST request<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_content_file_handle" onClick="logFunction('get_content_file_handle', 'stored_file.php.source.html#l411')" href="stored_file.php.source.html#l411">get_content_file_handle</a>(<a href="../../_variables/type.html">$type</a> = self::FILE_HANDLE_FOPEN)&nbsp;&nbsp;
<a href="../../_functions/get_content_file_handle.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns file handle - read only mode, no writing allowed into pool files!<BR>
</b><BR>When you want to modify a file, create a new file and delete the old one.<BR>
<BR>
<b>param:</b> int $type Type of file handle (FILE_HANDLE_xx constant)<br>
<b>return:</b> resource file handle<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="readfile" onClick="logFunction('readfile', 'stored_file.php.source.html#l438')" href="stored_file.php.source.html#l438">readfile</a>()&nbsp;&nbsp;
<a href="../../_functions/readfile.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Dumps file content to page.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_content" onClick="logFunction('get_content', 'stored_file.php.source.html#l451')" href="stored_file.php.source.html#l451">get_content</a>()&nbsp;&nbsp;
<a href="../../_functions/get_content.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns file content as string.<BR>
</b><BR><b>return:</b> string content<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="copy_content_to" onClick="logFunction('copy_content_to', 'stored_file.php.source.html#l466')" href="stored_file.php.source.html#l466">copy_content_to</a>(<a href="../../_variables/pathname.html">$pathname</a>)&nbsp;&nbsp;
<a href="../../_functions/copy_content_to.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Copy content of file to given pathname.<BR>
</b><BR><b>param:</b> string $pathname real path to the new file<br>
<b>return:</b> bool success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="copy_content_to_temp" onClick="logFunction('copy_content_to_temp', 'stored_file.php.source.html#l482')" href="stored_file.php.source.html#l482">copy_content_to_temp</a>(<a href="../../_variables/dir.html">$dir</a> = 'files', <a href="../../_variables/fileprefix.html">$fileprefix</a> = 'tempup_')&nbsp;&nbsp;
<a href="../../_functions/copy_content_to_temp.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Copy content of file to temporary folder and returns file path<BR>
</b><BR><b>param:</b> string $dir name of the temporary directory<br>
<b>param:</b> string $fileprefix prefix of temporary file.<br>
<b>return:</b> string|bool path of temporary file or false.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="list_files" onClick="logFunction('list_files', 'stored_file.php.source.html#l505')" href="stored_file.php.source.html#l505">list_files</a>(file_packer <a href="../../_variables/packer.html">$packer</a>)&nbsp;&nbsp;
<a href="../../_functions/list_files.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>List contents of archive.<BR>
</b><BR><b>param:</b> file_packer $packer file packer instance<br>
<b>return:</b> array of file infos<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="extract_to_pathname" onClick="logFunction('extract_to_pathname', 'stored_file.php.source.html#l516')" href="stored_file.php.source.html#l516">extract_to_pathname</a>(file_packer <a href="../../_variables/packer.html">$packer</a>, <a href="../../_variables/pathname.html">$pathname</a>,file_progress <a href="../../_variables/progress.html">$progress</a> = null)&nbsp;&nbsp;
<a href="../../_functions/extract_to_pathname.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Extract file to given file path (real OS filesystem), existing files are overwritten.<BR>
</b><BR><b>param:</b> file_packer $packer file packer instance<br>
<b>param:</b> string $pathname target directory<br>
<b>param:</b> file_progress $progress Progress indicator callback or null if not required<br>
<b>return:</b> array|bool list of processed files; false if error<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="extract_to_storage" onClick="logFunction('extract_to_storage', 'stored_file.php.source.html#l530')" href="stored_file.php.source.html#l530">extract_to_storage</a>(file_packer <a href="../../_variables/packer.html">$packer</a>, <a href="../../_variables/contextid.html">$contextid</a>,<a href="../../_variables/component.html">$component</a>, <a href="../../_variables/filearea.html">$filearea</a>, <a href="../../_variables/itemid.html">$itemid</a>, <a href="../../_variables/pathbase.html">$pathbase</a>, <a href="../../_variables/userid.html">$userid</a> = null, file_progress <a href="../../_variables/progress.html">$progress</a> = null)&nbsp;&nbsp;
<a href="../../_functions/extract_to_storage.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Extract file to given file path (real OS filesystem), existing files are overwritten.<BR>
</b><BR><b>param:</b> file_packer $packer file packer instance<br>
<b>param:</b> int $contextid context ID<br>
<b>param:</b> string $component component<br>
<b>param:</b> string $filearea file area<br>
<b>param:</b> int $itemid item ID<br>
<b>param:</b> string $pathbase path base<br>
<b>param:</b> int $userid user ID<br>
<b>param:</b> file_progress $progress Progress indicator callback or null if not required<br>
<b>return:</b> array|bool list of processed files; false if error<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="archive_file" onClick="logFunction('archive_file', 'stored_file.php.source.html#l550')" href="stored_file.php.source.html#l550">archive_file</a>(file_archive <a href="../../_variables/filearch.html">$filearch</a>, <a href="../../_variables/archivepath.html">$archivepath</a>)&nbsp;&nbsp;
<a href="../../_functions/archive_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Add file/directory into archive.<BR>
</b><BR><b>param:</b> file_archive $filearch file archive instance<br>
<b>param:</b> string $archivepath pathname in archive<br>
<b>return:</b> bool success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_imageinfo" onClick="logFunction('get_imageinfo', 'stored_file.php.source.html#l569')" href="stored_file.php.source.html#l569">get_imageinfo</a>()&nbsp;&nbsp;
<a href="../../_functions/get_imageinfo.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns information about image,<BR>
information is determined from the file content<BR>
</b><BR><b>return:</b> mixed array with width, height and mimetype; false if not an image<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_valid_image" onClick="logFunction('is_valid_image', 'stored_file.php.source.html#l594')" href="stored_file.php.source.html#l594">is_valid_image</a>()&nbsp;&nbsp;
<a href="../../_functions/is_valid_image.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Verifies the file is a valid web image - gif, png and jpeg only.<BR>
</b><BR>It should be ok to serve this image from server without any other security workarounds.<BR>
<BR>
<b>return:</b> bool true if file ok<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_parent_directory" onClick="logFunction('get_parent_directory', 'stored_file.php.source.html#l616')" href="stored_file.php.source.html#l616">get_parent_directory</a>()&nbsp;&nbsp;
<a href="../../_functions/get_parent_directory.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns parent directory, creates missing parents if needed.<BR>
</b><BR><b>return:</b> stored_file<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sync_external_file" onClick="logFunction('sync_external_file', 'stored_file.php.source.html#l641')" href="stored_file.php.source.html#l641">sync_external_file</a>()&nbsp;&nbsp;
<a href="../../_functions/sync_external_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Synchronize file if it is a reference and needs synchronizing<BR>
</b><BR>Updates contenthash and filesize<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_contextid" onClick="logFunction('get_contextid', 'stored_file.php.source.html#l652')" href="stored_file.php.source.html#l652">get_contextid</a>()&nbsp;&nbsp;
<a href="../../_functions/get_contextid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns context id of the file<BR>
</b><BR><b>return:</b> int context id<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_component" onClick="logFunction('get_component', 'stored_file.php.source.html#l661')" href="stored_file.php.source.html#l661">get_component</a>()&nbsp;&nbsp;
<a href="../../_functions/get_component.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns component name - this is the owner of the areas,<BR>
nothing else is allowed to read or modify the files directly!!<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_filearea" onClick="logFunction('get_filearea', 'stored_file.php.source.html#l671')" href="stored_file.php.source.html#l671">get_filearea</a>()&nbsp;&nbsp;
<a href="../../_functions/get_filearea.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns file area name, this divides files of one component into groups with different access control.<BR>
All files in one area have the same access control.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_itemid" onClick="logFunction('get_itemid', 'stored_file.php.source.html#l681')" href="stored_file.php.source.html#l681">get_itemid</a>()&nbsp;&nbsp;
<a href="../../_functions/get_itemid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns returns item id of file.<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_filepath" onClick="logFunction('get_filepath', 'stored_file.php.source.html#l690')" href="stored_file.php.source.html#l690">get_filepath</a>()&nbsp;&nbsp;
<a href="../../_functions/get_filepath.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns file path - starts and ends with /, \ are not allowed.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_filename" onClick="logFunction('get_filename', 'stored_file.php.source.html#l699')" href="stored_file.php.source.html#l699">get_filename</a>()&nbsp;&nbsp;
<a href="../../_functions/get_filename.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns file name or '.' in case of directories.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_userid" onClick="logFunction('get_userid', 'stored_file.php.source.html#l708')" href="stored_file.php.source.html#l708">get_userid</a>()&nbsp;&nbsp;
<a href="../../_functions/get_userid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns id of user who created the file.<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_filesize" onClick="logFunction('get_filesize', 'stored_file.php.source.html#l717')" href="stored_file.php.source.html#l717">get_filesize</a>()&nbsp;&nbsp;
<a href="../../_functions/get_filesize.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the size of file in bytes.<BR>
</b><BR><b>return:</b> int bytes<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_filesize" onClick="logFunction('set_filesize', 'stored_file.php.source.html#l727')" href="stored_file.php.source.html#l727">set_filesize</a>(<a href="../../_variables/filesize.html">$filesize</a>)&nbsp;&nbsp;
<a href="../../_functions/set_filesize.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Function stored_file::set_filesize() is deprecated. Please use stored_file::replace_file_with<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_mimetype" onClick="logFunction('get_mimetype', 'stored_file.php.source.html#l738')" href="stored_file.php.source.html#l738">get_mimetype</a>()&nbsp;&nbsp;
<a href="../../_functions/get_mimetype.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns mime type of file.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_timecreated" onClick="logFunction('get_timecreated', 'stored_file.php.source.html#l747')" href="stored_file.php.source.html#l747">get_timecreated</a>()&nbsp;&nbsp;
<a href="../../_functions/get_timecreated.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns unix timestamp of file creation date.<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_timemodified" onClick="logFunction('get_timemodified', 'stored_file.php.source.html#l756')" href="stored_file.php.source.html#l756">get_timemodified</a>()&nbsp;&nbsp;
<a href="../../_functions/get_timemodified.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns unix timestamp of last file modification.<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_timemodified" onClick="logFunction('set_timemodified', 'stored_file.php.source.html#l766')" href="stored_file.php.source.html#l766">set_timemodified</a>(<a href="../../_variables/timemodified.html">$timemodified</a>)&nbsp;&nbsp;
<a href="../../_functions/set_timemodified.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>set timemodified<BR>
</b><BR><b>param:</b> int $timemodified<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_status" onClick="logFunction('get_status', 'stored_file.php.source.html#l777')" href="stored_file.php.source.html#l777">get_status</a>()&nbsp;&nbsp;
<a href="../../_functions/get_status.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns file status flag.<BR>
</b><BR><b>return:</b> int 0 means file OK, anything else is a problem and file can not be used<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_id" onClick="logFunction('get_id', 'stored_file.php.source.html#l786')" href="stored_file.php.source.html#l786">get_id</a>()&nbsp;&nbsp;
<a href="../../_functions/get_id.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns file id.<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_contenthash" onClick="logFunction('get_contenthash', 'stored_file.php.source.html#l795')" href="stored_file.php.source.html#l795">get_contenthash</a>()&nbsp;&nbsp;
<a href="../../_functions/get_contenthash.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns sha1 hash of file content.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_pathnamehash" onClick="logFunction('get_pathnamehash', 'stored_file.php.source.html#l805')" href="stored_file.php.source.html#l805">get_pathnamehash</a>()&nbsp;&nbsp;
<a href="../../_functions/get_pathnamehash.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns sha1 hash of all file path components sha1(&quot;contextid/component/filearea/itemid/dir/dir/filename.ext&quot;).<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_license" onClick="logFunction('get_license', 'stored_file.php.source.html#l814')" href="stored_file.php.source.html#l814">get_license</a>()&nbsp;&nbsp;
<a href="../../_functions/get_license.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the license type of the file, it is a short name referred from license table.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_license" onClick="logFunction('set_license', 'stored_file.php.source.html#l823')" href="stored_file.php.source.html#l823">set_license</a>(<a href="../../_variables/license.html">$license</a>)&nbsp;&nbsp;
<a href="../../_functions/set_license.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set license<BR>
</b><BR><b>param:</b> string $license license<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_author" onClick="logFunction('get_author', 'stored_file.php.source.html#l834')" href="stored_file.php.source.html#l834">get_author</a>()&nbsp;&nbsp;
<a href="../../_functions/get_author.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the author name of the file.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_author" onClick="logFunction('set_author', 'stored_file.php.source.html#l843')" href="stored_file.php.source.html#l843">set_author</a>(<a href="../../_variables/author.html">$author</a>)&nbsp;&nbsp;
<a href="../../_functions/set_author.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set author<BR>
</b><BR><b>param:</b> string $author<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_source" onClick="logFunction('get_source', 'stored_file.php.source.html#l854')" href="stored_file.php.source.html#l854">get_source</a>()&nbsp;&nbsp;
<a href="../../_functions/get_source.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the source of the file, usually it is a url.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_source" onClick="logFunction('set_source', 'stored_file.php.source.html#l863')" href="stored_file.php.source.html#l863">set_source</a>(<a href="../../_variables/source.html">$source</a>)&nbsp;&nbsp;
<a href="../../_functions/set_source.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set license<BR>
</b><BR><b>param:</b> string $license license<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_sortorder" onClick="logFunction('get_sortorder', 'stored_file.php.source.html#l875')" href="stored_file.php.source.html#l875">get_sortorder</a>()&nbsp;&nbsp;
<a href="../../_functions/get_sortorder.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the sort order of file<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_sortorder" onClick="logFunction('set_sortorder', 'stored_file.php.source.html#l884')" href="stored_file.php.source.html#l884">set_sortorder</a>(<a href="../../_variables/sortorder.html">$sortorder</a>)&nbsp;&nbsp;
<a href="../../_functions/set_sortorder.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set file sort order<BR>
</b><BR><b>param:</b> int $sortorder<br>
<b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_repository_id" onClick="logFunction('get_repository_id', 'stored_file.php.source.html#l896')" href="stored_file.php.source.html#l896">get_repository_id</a>()&nbsp;&nbsp;
<a href="../../_functions/get_repository_id.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns repository id<BR>
</b><BR><b>return:</b> int|null<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_referencefileid" onClick="logFunction('get_referencefileid', 'stored_file.php.source.html#l909')" href="stored_file.php.source.html#l909">get_referencefileid</a>()&nbsp;&nbsp;
<a href="../../_functions/get_referencefileid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>get reference file id<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_referencelastsync" onClick="logFunction('get_referencelastsync', 'stored_file.php.source.html#l917')" href="stored_file.php.source.html#l917">get_referencelastsync</a>()&nbsp;&nbsp;
<a href="../../_functions/get_referencelastsync.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get reference last sync time<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_referencelifetime" onClick="logFunction('get_referencelifetime', 'stored_file.php.source.html#l925')" href="stored_file.php.source.html#l925">get_referencelifetime</a>()&nbsp;&nbsp;
<a href="../../_functions/get_referencelifetime.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Function stored_file::get_referencelifetime() is deprecated as reference<BR>
life time is no longer stored in DB or returned by repository. Each<BR>
repository should decide by itself when to synchronise the references.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_reference" onClick="logFunction('get_reference', 'stored_file.php.source.html#l937')" href="stored_file.php.source.html#l937">get_reference</a>()&nbsp;&nbsp;
<a href="../../_functions/get_reference.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns file reference<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_reference_details" onClick="logFunction('get_reference_details', 'stored_file.php.source.html#l946')" href="stored_file.php.source.html#l946">get_reference_details</a>()&nbsp;&nbsp;
<a href="../../_functions/get_reference_details.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get human readable file reference information<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_synchronized" onClick="logFunction('set_synchronized', 'stored_file.php.source.html#l955')" href="stored_file.php.source.html#l955">set_synchronized</a>(<a href="../../_variables/contenthash.html">$contenthash</a>, <a href="../../_variables/filesize.html">$filesize</a>, <a href="../../_variables/status.html">$status</a> = 0, <a href="../../_variables/timemodified.html">$timemodified</a> = null)&nbsp;&nbsp;
<a href="../../_functions/set_synchronized.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Called after reference-file has been synchronized with the repository<BR>
</b><BR>We update contenthash, filesize and status in files table if changed<BR>
and we always update lastsync in files_reference table<BR>
<BR>
<b>param:</b> null|string $contenthash if set to null contenthash is not changed<br>
<b>param:</b> int $filesize new size of the file<br>
<b>param:</b> int $status new status of the file (0 means OK, 666 - source missing)<br>
<b>param:</b> int $timemodified last time modified of the source, if known<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_missingsource" onClick="logFunction('set_missingsource', 'stored_file.php.source.html#l992')" href="stored_file.php.source.html#l992">set_missingsource</a>()&nbsp;&nbsp;
<a href="../../_functions/set_missingsource.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets the error status for a file that could not be synchronised<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="send_file" onClick="logFunction('send_file', 'stored_file.php.source.html#l999')" href="stored_file.php.source.html#l999">send_file</a>(<a href="../../_variables/lifetime.html">$lifetime</a>, <a href="../../_variables/filter.html">$filter</a>, <a href="../../_variables/forcedownload.html">$forcedownload</a>, <a href="../../_variables/options.html">$options</a>)&nbsp;&nbsp;
<a href="../../_functions/send_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Send file references<BR>
</b><BR><b>param:</b> int $lifetime Number of seconds before the file should expire from caches (default 24 hours)<br>
<b>param:</b> int $filter 0 (default)=no filtering, 1=all files, 2=html files only<br>
<b>param:</b> bool $forcedownload If true (default false), forces download of file rather than view in browser/plugin<br>
<b>param:</b> array $options additional options affecting the file serving<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="import_external_file_contents" onClick="logFunction('import_external_file_contents', 'stored_file.php.source.html#l1011')" href="stored_file.php.source.html#l1011">import_external_file_contents</a>(<a href="../../_variables/maxbytes.html">$maxbytes</a> = 0)&nbsp;&nbsp;
<a href="../../_functions/import_external_file_contents.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Imports the contents of an external file into moodle filepool.<BR>
</b><BR><b>param:</b> int $maxbytes throw an exception if file size is bigger than $maxbytes (0 means no limit)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="send_relative_file" onClick="logFunction('send_relative_file', 'stored_file.php.source.html#l1023')" href="stored_file.php.source.html#l1023">send_relative_file</a>(<a href="../../_variables/relativepath.html">$relativepath</a>)&nbsp;&nbsp;
<a href="../../_functions/send_relative_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets a file relative to this file in the repository and sends it to the browser.<BR>
Checks the function repository::supports_relative_file() to make sure it can be used.<BR>
</b><BR><b>param:</b> string $relativepath the relative path to the file we are trying to access<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="generate_image_thumbnail" onClick="logFunction('generate_image_thumbnail', 'stored_file.php.source.html#l1038')" href="stored_file.php.source.html#l1038">generate_image_thumbnail</a>(<a href="../../_variables/width.html">$width</a>, <a href="../../_variables/height.html">$height</a>)&nbsp;&nbsp;
<a href="../../_functions/generate_image_thumbnail.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Generates a thumbnail for this stored_file.<BR>
</b><BR>If the GD library has at least version 2 and PNG support is available, the returned data<BR>
is the content of a transparent PNG file containing the thumbnail. Otherwise, the function<BR>
returns contents of a JPEG file with black background containing the thumbnail.<BR>
<BR>
<b>param:</b> int $width the width of the requested thumbnail<br>
<b>param:</b> int $height the height of the requested thumbnail<br>
<b>return:</b> string|bool false if a problem occurs, the thumbnail image data otherwise<br>
</td></tr></table>

<br>
</div>
</div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
