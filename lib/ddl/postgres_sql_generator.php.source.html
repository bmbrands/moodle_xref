<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/ddl/postgres_sql_generator.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/ddl';
filename='postgres_sql_generator.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/ddl/</a> -> <a href="postgres_sql_generator.php.html">postgres_sql_generator.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="postgres_sql_generator.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="postgres_sql_generator.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * PostgreSQL specific SQL code generator.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core_ddl</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas     http://dougiamas.com</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *             2001-3001 Eloy Lafuente (stronk7) http://contiento.com</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/ddl/sql_generator.php');
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">/**</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * This class generate SQL code to be used against PostgreSQL</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * It extends XMLDBgenerator so everything can be</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * overridden as needed to generate correct SQL.</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> *</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @package    core_ddl</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas     http://dougiamas.com</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> *             2001-3001 Eloy Lafuente (stronk7) http://contiento.com</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> */</span>
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('postgres_sql_generator')" href="../../_classes/postgres_sql_generator.html" onMouseOver="classPopup(event,'postgres_sql_generator')">postgres_sql_generator</a> extends sql_generator {
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">    // Only set values that are different from the defaults present in XMLDBgenerator</span>
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">    /** @var string Proper type for NUMBER(x) in this DB. */</span>
<a name="l46"><span class="linenum">  46</span></a>      public <a class="var it1485" onMouseOver="hilite(1485)" onMouseOut="lolite()" onClick="logVariable('number_type')" href="../../_variables/number_type.html">$number_type</a> = 'NUMERIC';
<a name="l47"><span class="linenum">  47</span></a>  
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">    /** @var string To define the default to set for NOT NULLs CHARs without default (null=do nothing).*/</span>
<a name="l49"><span class="linenum">  49</span></a>      public <a class="var it1448" onMouseOver="hilite(1448)" onMouseOut="lolite()" onClick="logVariable('default_for_char')" href="../../_variables/default_for_char.html">$default_for_char</a> = '';
<a name="l50"><span class="linenum">  50</span></a>  
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">    /** @var bool True if the generator needs to add extra code to generate the sequence fields.*/</span>
<a name="l52"><span class="linenum">  52</span></a>      public <a class="var it1455" onMouseOver="hilite(1455)" onMouseOut="lolite()" onClick="logVariable('sequence_extra_code')" href="../../_variables/sequence_extra_code.html">$sequence_extra_code</a> = false;
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">    /** @var string The particular name for inline sequences in this generator.*/</span>
<a name="l55"><span class="linenum">  55</span></a>      public <a class="var it1456" onMouseOver="hilite(1456)" onMouseOut="lolite()" onClick="logVariable('sequence_name')" href="../../_variables/sequence_name.html">$sequence_name</a> = 'BIGSERIAL';
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">    /** @var string The particular name for inline sequences in this generator.*/</span>
<a name="l58"><span class="linenum">  58</span></a>      public <a class="var it26889" onMouseOver="hilite(26889)" onMouseOut="lolite()" onClick="logVariable('sequence_name_small')" href="../../_variables/sequence_name_small.html">$sequence_name_small</a> = 'SERIAL';
<a name="l59"><span class="linenum">  59</span></a>  
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">    /** @var bool To avoid outputting the rest of the field specs, leaving only the name and the sequence_name returned.*/</span>
<a name="l61"><span class="linenum">  61</span></a>      public <a class="var it17426" onMouseOver="hilite(17426)" onMouseOut="lolite()" onClick="logVariable('sequence_only')" href="../../_variables/sequence_only.html">$sequence_only</a> = true;
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">    /** @var string SQL sentence to rename one index where 'TABLENAME', 'OLDINDEXNAME' and 'NEWINDEXNAME' are dynamically replaced.*/</span>
<a name="l64"><span class="linenum">  64</span></a>      public <a class="var it1461" onMouseOver="hilite(1461)" onMouseOut="lolite()" onClick="logVariable('rename_index_sql')" href="../../_variables/rename_index_sql.html">$rename_index_sql</a> = 'ALTER TABLE OLDINDEXNAME RENAME TO NEWINDEXNAME';
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">    /** @var string SQL sentence to rename one key 'TABLENAME', 'OLDKEYNAME' and 'NEWKEYNAME' are dynamically replaced.*/</span>
<a name="l67"><span class="linenum">  67</span></a>      public <a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('rename_key_sql')" href="../../_variables/rename_key_sql.html">$rename_key_sql</a> = null;
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">    /** @var string type of string quoting used - '' or \' quotes*/</span>
<a name="l70"><span class="linenum">  70</span></a>      protected <a class="var it30628" onMouseOver="hilite(30628)" onMouseOut="lolite()" onClick="logVariable('std_strings')" href="../../_variables/std_strings.html">$std_strings</a> = null;
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>      <span class="comment">/**</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     * Reset a sequence to the id field of a table.</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     *</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">     * @param xmldb_table|string $table name of table or the table object.</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">     * @return array of sql statements</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">     */</span>
<a name="l78"><span class="linenum">  78</span></a>      public function <a class="function" onClick="logFunction('getResetSequenceSQL')" href="../../_functions/getresetsequencesql.html" onMouseOver="funcPopup(event,'getresetsequencesql')">getResetSequenceSQL</a>(<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>) {
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>          if (<a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a> instanceof xmldb_table) {
<a name="l81"><span class="linenum">  81</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> = <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>();
<a name="l82"><span class="linenum">  82</span></a>          } else {
<a name="l83"><span class="linenum">  83</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> = <a class="var it127" onMouseOver="hilite(127)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../_variables/table.html">$table</a>;
<a name="l84"><span class="linenum">  84</span></a>          }
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">        // From http://www.postgresql.org/docs/7.4/static/sql-altersequence.html</span>
<a name="l87"><span class="linenum">  87</span></a>          <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = (int)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mdb')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mdb.html">mdb</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>('SELECT <a class="phpfunction" onClick="logFunction('MAX')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(id) FROM {'.<a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a>.'}');
<a name="l88"><span class="linenum">  88</span></a>          <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>++;
<a name="l89"><span class="linenum">  89</span></a>          return array(&quot;ALTER SEQUENCE <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('prefix')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/prefix.html">prefix</a>{<a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a>}_id_seq RESTART WITH <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>&quot;);
<a name="l90"><span class="linenum">  90</span></a>      }
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>      <span class="comment">/**</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">     * Given one correct xmldb_table, returns the SQL statements</span>
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">     * to create temporary table (inside one array).</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">     *</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">     * @param xmldb_table $xmldb_table The xmldb_table object instance.</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">     * @return array of sql statements</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">     */</span>
<a name="l99"><span class="linenum">  99</span></a>      public function <a class="function" onClick="logFunction('getCreateTempTableSQL')" href="../../_functions/getcreatetemptablesql.html" onMouseOver="funcPopup(event,'getcreatetemptablesql')">getCreateTempTableSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>) {
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('temptables')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/temptables.html">temptables</a>-&gt;<a class="function" onClick="logFunction('add_temptable')" href="../../_functions/add_temptable.html" onMouseOver="funcPopup(event,'add_temptable')">add_temptable</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>());
<a name="l101"><span class="linenum"> 101</span></a>          <a class="var it1473" onMouseOver="hilite(1473)" onMouseOut="lolite()" onClick="logVariable('sqlarr')" href="../../_variables/sqlarr.html">$sqlarr</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getCreateTableSQL')" href="../../_functions/getcreatetablesql.html" onMouseOver="funcPopup(event,'getcreatetablesql')">getCreateTableSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>);
<a name="l102"><span class="linenum"> 102</span></a>          <a class="var it1473" onMouseOver="hilite(1473)" onMouseOut="lolite()" onClick="logVariable('sqlarr')" href="../../_variables/sqlarr.html">$sqlarr</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/^CREATE TABLE/', &quot;CREATE TEMPORARY TABLE&quot;, <a class="var it1473" onMouseOver="hilite(1473)" onMouseOut="lolite()" onClick="logVariable('sqlarr')" href="../../_variables/sqlarr.html">$sqlarr</a>);
<a name="l103"><span class="linenum"> 103</span></a>          return <a class="var it1473" onMouseOver="hilite(1473)" onMouseOut="lolite()" onClick="logVariable('sqlarr')" href="../../_variables/sqlarr.html">$sqlarr</a>;
<a name="l104"><span class="linenum"> 104</span></a>      }
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>      <span class="comment">/**</span>
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">     * Given one correct xmldb_table, returns the SQL statements</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     * to drop it (inside one array).</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     *</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">     * @param xmldb_table $xmldb_table The table to drop.</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     * @return array SQL statement(s) for dropping the specified table.</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     */</span>
<a name="l113"><span class="linenum"> 113</span></a>      public function <a class="function" onClick="logFunction('getDropTableSQL')" href="../../_functions/getdroptablesql.html" onMouseOver="funcPopup(event,'getdroptablesql')">getDropTableSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>) {
<a name="l114"><span class="linenum"> 114</span></a>          <a class="var it1473" onMouseOver="hilite(1473)" onMouseOut="lolite()" onClick="logVariable('sqlarr')" href="../../_variables/sqlarr.html">$sqlarr</a> = parent::<a class="function" onClick="logFunction('getDropTableSQL')" href="../../_functions/getdroptablesql.html" onMouseOver="funcPopup(event,'getdroptablesql')">getDropTableSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>);
<a name="l115"><span class="linenum"> 115</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('temptables')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/temptables.html">temptables</a>-&gt;<a class="function" onClick="logFunction('is_temptable')" href="../../_functions/is_temptable.html" onMouseOver="funcPopup(event,'is_temptable')">is_temptable</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>())) {
<a name="l116"><span class="linenum"> 116</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('temptables')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/temptables.html">temptables</a>-&gt;<a class="function" onClick="logFunction('delete_temptable')" href="../../_functions/delete_temptable.html" onMouseOver="funcPopup(event,'delete_temptable')">delete_temptable</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>());
<a name="l117"><span class="linenum"> 117</span></a>          }
<a name="l118"><span class="linenum"> 118</span></a>          return <a class="var it1473" onMouseOver="hilite(1473)" onMouseOut="lolite()" onClick="logVariable('sqlarr')" href="../../_variables/sqlarr.html">$sqlarr</a>;
<a name="l119"><span class="linenum"> 119</span></a>      }
<a name="l120"><span class="linenum"> 120</span></a>  
<a name="l121"><span class="linenum"> 121</span></a>      <span class="comment">/**</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     * Given one correct xmldb_index, returns the SQL statements</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * needed to create it (in array).</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     *</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     * @param xmldb_table $xmldb_table The xmldb_table instance to create the index on.</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     * @param xmldb_index $xmldb_index The xmldb_index to create.</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     * @return array An array of SQL statements to create the index.</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">     * @throws coding_exception Thrown if the xmldb_index does not validate with the xmldb_table.</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     */</span>
<a name="l130"><span class="linenum"> 130</span></a>      public function <a class="function" onClick="logFunction('getCreateIndexSQL')" href="../../_functions/getcreateindexsql.html" onMouseOver="funcPopup(event,'getcreateindexsql')">getCreateIndexSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>, <a class="var it12723" onMouseOver="hilite(12723)" onMouseOut="lolite()" onClick="logVariable('xmldb_index')" href="../../_variables/xmldb_index.html">$xmldb_index</a>) {
<a name="l131"><span class="linenum"> 131</span></a>          <a class="var it1474" onMouseOver="hilite(1474)" onMouseOut="lolite()" onClick="logVariable('sqls')" href="../../_variables/sqls.html">$sqls</a> = parent::<a class="function" onClick="logFunction('getCreateIndexSQL')" href="../../_functions/getcreateindexsql.html" onMouseOver="funcPopup(event,'getcreateindexsql')">getCreateIndexSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>, <a class="var it12723" onMouseOver="hilite(12723)" onMouseOut="lolite()" onClick="logVariable('xmldb_index')" href="../../_variables/xmldb_index.html">$xmldb_index</a>);
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it4729" onMouseOver="hilite(4729)" onMouseOut="lolite()" onClick="logVariable('hints')" href="../../_variables/hints.html">$hints</a> = <a class="var it12723" onMouseOver="hilite(12723)" onMouseOut="lolite()" onClick="logVariable('xmldb_index')" href="../../_variables/xmldb_index.html">$xmldb_index</a>-&gt;<a class="function" onClick="logFunction('getHints')" href="../../_functions/gethints.html" onMouseOver="funcPopup(event,'gethints')">getHints</a>();
<a name="l134"><span class="linenum"> 134</span></a>          <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = <a class="var it12723" onMouseOver="hilite(12723)" onMouseOut="lolite()" onClick="logVariable('xmldb_index')" href="../../_variables/xmldb_index.html">$xmldb_index</a>-&gt;<a class="function" onClick="logFunction('getFields')" href="../../_functions/getfields.html" onMouseOver="funcPopup(event,'getfields')">getFields</a>();
<a name="l135"><span class="linenum"> 135</span></a>          if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('varchar_pattern_ops', <a class="var it4729" onMouseOver="hilite(4729)" onMouseOut="lolite()" onClick="logVariable('hints')" href="../../_variables/hints.html">$hints</a>) and <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>) == 1) {
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">            // Add the pattern index and keep the normal one, keep unique only the standard index to improve perf.</span>
<a name="l137"><span class="linenum"> 137</span></a>              foreach (<a class="var it1474" onMouseOver="hilite(1474)" onMouseOut="lolite()" onClick="logVariable('sqls')" href="../../_variables/sqls.html">$sqls</a> as <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>) {
<a name="l138"><span class="linenum"> 138</span></a>                  <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>);
<a name="l139"><span class="linenum"> 139</span></a>                  <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = 0;
<a name="l140"><span class="linenum"> 140</span></a>                  <a class="var it30629" onMouseOver="hilite(30629)" onMouseOut="lolite()" onClick="logVariable('newindex')" href="../../_variables/newindex.html">$newindex</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/^<a class="function" onClick="logFunction('CREATE')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">CREATE</a>( UNIQUE)? <a class="function" onClick="logFunction('INDEX')" href="../../_functions/index.html" onMouseOver="funcPopup(event,'index')">INDEX</a> ([a-z0-9_]+) <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> ([a-z0-9_]+) \(<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>\)$/&quot;, &quot;CREATE INDEX \\2_pattern ON \\3 USING btree (<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> varchar_pattern_ops)&quot;, <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, -1, <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>);
<a name="l141"><span class="linenum"> 141</span></a>                  if (<a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> != 1) {
<a name="l142"><span class="linenum"> 142</span></a>                      <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Unexpected <a class="function" onClick="logFunction('getCreateIndexSQL')" href="../../_functions/getcreateindexsql.html" onMouseOver="funcPopup(event,'getcreateindexsql')">getCreateIndexSQL</a>() structure.');
<a name="l143"><span class="linenum"> 143</span></a>                      continue;
<a name="l144"><span class="linenum"> 144</span></a>                  }
<a name="l145"><span class="linenum"> 145</span></a>                  <a class="var it1474" onMouseOver="hilite(1474)" onMouseOut="lolite()" onClick="logVariable('sqls')" href="../../_variables/sqls.html">$sqls</a>[] = <a class="var it30629" onMouseOver="hilite(30629)" onMouseOut="lolite()" onClick="logVariable('newindex')" href="../../_variables/newindex.html">$newindex</a>;
<a name="l146"><span class="linenum"> 146</span></a>              }
<a name="l147"><span class="linenum"> 147</span></a>          }
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>          return <a class="var it1474" onMouseOver="hilite(1474)" onMouseOut="lolite()" onClick="logVariable('sqls')" href="../../_variables/sqls.html">$sqls</a>;
<a name="l150"><span class="linenum"> 150</span></a>      }
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>      <span class="comment">/**</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     * Given one XMLDB Type, length and decimals, returns the DB proper SQL type.</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     *</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     * @param int $xmldb_type The xmldb_type defined constant. XMLDB_TYPE_INTEGER and other XMLDB_TYPE_* constants.</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     * @param int $xmldb_length The length of that data type.</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     * @param int $xmldb_decimals The decimal places of precision of the data type.</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">     * @return string The DB defined data type.</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment">     */</span>
<a name="l160"><span class="linenum"> 160</span></a>      public function <a class="function" onClick="logFunction('getTypeSQL')" href="../../_functions/gettypesql.html" onMouseOver="funcPopup(event,'gettypesql')">getTypeSQL</a>(<a class="var it1482" onMouseOver="hilite(1482)" onMouseOut="lolite()" onClick="logVariable('xmldb_type')" href="../../_variables/xmldb_type.html">$xmldb_type</a>, <a class="var it1483" onMouseOver="hilite(1483)" onMouseOut="lolite()" onClick="logVariable('xmldb_length')" href="../../_variables/xmldb_length.html">$xmldb_length</a>=null, <a class="var it1484" onMouseOver="hilite(1484)" onMouseOut="lolite()" onClick="logVariable('xmldb_decimals')" href="../../_variables/xmldb_decimals.html">$xmldb_decimals</a>=null) {
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>          switch (<a class="var it1482" onMouseOver="hilite(1482)" onMouseOut="lolite()" onClick="logVariable('xmldb_type')" href="../../_variables/xmldb_type.html">$xmldb_type</a>) {
<a name="l163"><span class="linenum"> 163</span></a>              case <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a>:    // From http://www.postgresql.org/docs/7.4/interactive/datatype.html
<a name="l164"><span class="linenum"> 164</span></a>                  if (empty(<a class="var it1483" onMouseOver="hilite(1483)" onMouseOut="lolite()" onClick="logVariable('xmldb_length')" href="../../_variables/xmldb_length.html">$xmldb_length</a>)) {
<a name="l165"><span class="linenum"> 165</span></a>                      <a class="var it1483" onMouseOver="hilite(1483)" onMouseOut="lolite()" onClick="logVariable('xmldb_length')" href="../../_variables/xmldb_length.html">$xmldb_length</a> = 10;
<a name="l166"><span class="linenum"> 166</span></a>                  }
<a name="l167"><span class="linenum"> 167</span></a>                  if (<a class="var it1483" onMouseOver="hilite(1483)" onMouseOut="lolite()" onClick="logVariable('xmldb_length')" href="../../_variables/xmldb_length.html">$xmldb_length</a> &gt; 9) {
<a name="l168"><span class="linenum"> 168</span></a>                      <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> = 'BIGINT';
<a name="l169"><span class="linenum"> 169</span></a>                  } else if (<a class="var it1483" onMouseOver="hilite(1483)" onMouseOut="lolite()" onClick="logVariable('xmldb_length')" href="../../_variables/xmldb_length.html">$xmldb_length</a> &gt; 4) {
<a name="l170"><span class="linenum"> 170</span></a>                      <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> = 'INTEGER';
<a name="l171"><span class="linenum"> 171</span></a>                  } else {
<a name="l172"><span class="linenum"> 172</span></a>                      <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> = 'SMALLINT';
<a name="l173"><span class="linenum"> 173</span></a>                  }
<a name="l174"><span class="linenum"> 174</span></a>                  break;
<a name="l175"><span class="linenum"> 175</span></a>              case <a class="constant" onClick="logConstant('XMLDB_TYPE_NUMBER')" href="../../_constants/XMLDB_TYPE_NUMBER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_NUMBER')">XMLDB_TYPE_NUMBER</a>:
<a name="l176"><span class="linenum"> 176</span></a>                  <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('number_type')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/number_type.html">number_type</a>;
<a name="l177"><span class="linenum"> 177</span></a>                  if (!empty(<a class="var it1483" onMouseOver="hilite(1483)" onMouseOut="lolite()" onClick="logVariable('xmldb_length')" href="../../_variables/xmldb_length.html">$xmldb_length</a>)) {
<a name="l178"><span class="linenum"> 178</span></a>                      <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> .= '(' . <a class="var it1483" onMouseOver="hilite(1483)" onMouseOut="lolite()" onClick="logVariable('xmldb_length')" href="../../_variables/xmldb_length.html">$xmldb_length</a>;
<a name="l179"><span class="linenum"> 179</span></a>                      if (!empty(<a class="var it1484" onMouseOver="hilite(1484)" onMouseOut="lolite()" onClick="logVariable('xmldb_decimals')" href="../../_variables/xmldb_decimals.html">$xmldb_decimals</a>)) {
<a name="l180"><span class="linenum"> 180</span></a>                          <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> .= ',' . <a class="var it1484" onMouseOver="hilite(1484)" onMouseOut="lolite()" onClick="logVariable('xmldb_decimals')" href="../../_variables/xmldb_decimals.html">$xmldb_decimals</a>;
<a name="l181"><span class="linenum"> 181</span></a>                      }
<a name="l182"><span class="linenum"> 182</span></a>                      <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> .= ')';
<a name="l183"><span class="linenum"> 183</span></a>                  }
<a name="l184"><span class="linenum"> 184</span></a>                  break;
<a name="l185"><span class="linenum"> 185</span></a>              case <a class="constant" onClick="logConstant('XMLDB_TYPE_FLOAT')" href="../../_constants/XMLDB_TYPE_FLOAT.html" onMouseOver="constPopup(event,'XMLDB_TYPE_FLOAT')">XMLDB_TYPE_FLOAT</a>:
<a name="l186"><span class="linenum"> 186</span></a>                  <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> = 'DOUBLE <a class="constant" onClick="logConstant('PRECISION')" href="../../_constants/PRECISION.html" onMouseOver="constPopup(event,'PRECISION')">PRECISION</a>';
<a name="l187"><span class="linenum"> 187</span></a>                  if (!empty(<a class="var it1484" onMouseOver="hilite(1484)" onMouseOut="lolite()" onClick="logVariable('xmldb_decimals')" href="../../_variables/xmldb_decimals.html">$xmldb_decimals</a>)) {
<a name="l188"><span class="linenum"> 188</span></a>                      if (<a class="var it1484" onMouseOver="hilite(1484)" onMouseOut="lolite()" onClick="logVariable('xmldb_decimals')" href="../../_variables/xmldb_decimals.html">$xmldb_decimals</a> &lt; 6) {
<a name="l189"><span class="linenum"> 189</span></a>                          <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> = 'REAL';
<a name="l190"><span class="linenum"> 190</span></a>                      }
<a name="l191"><span class="linenum"> 191</span></a>                  }
<a name="l192"><span class="linenum"> 192</span></a>                  break;
<a name="l193"><span class="linenum"> 193</span></a>              case <a class="constant" onClick="logConstant('XMLDB_TYPE_CHAR')" href="../../_constants/XMLDB_TYPE_CHAR.html" onMouseOver="constPopup(event,'XMLDB_TYPE_CHAR')">XMLDB_TYPE_CHAR</a>:
<a name="l194"><span class="linenum"> 194</span></a>                  <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> = 'VARCHAR';
<a name="l195"><span class="linenum"> 195</span></a>                  if (empty(<a class="var it1483" onMouseOver="hilite(1483)" onMouseOut="lolite()" onClick="logVariable('xmldb_length')" href="../../_variables/xmldb_length.html">$xmldb_length</a>)) {
<a name="l196"><span class="linenum"> 196</span></a>                      <a class="var it1483" onMouseOver="hilite(1483)" onMouseOut="lolite()" onClick="logVariable('xmldb_length')" href="../../_variables/xmldb_length.html">$xmldb_length</a>='255';
<a name="l197"><span class="linenum"> 197</span></a>                  }
<a name="l198"><span class="linenum"> 198</span></a>                  <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> .= '(' . <a class="var it1483" onMouseOver="hilite(1483)" onMouseOut="lolite()" onClick="logVariable('xmldb_length')" href="../../_variables/xmldb_length.html">$xmldb_length</a> . ')';
<a name="l199"><span class="linenum"> 199</span></a>                  break;
<a name="l200"><span class="linenum"> 200</span></a>              case <a class="constant" onClick="logConstant('XMLDB_TYPE_TEXT')" href="../../_constants/XMLDB_TYPE_TEXT.html" onMouseOver="constPopup(event,'XMLDB_TYPE_TEXT')">XMLDB_TYPE_TEXT</a>:
<a name="l201"><span class="linenum"> 201</span></a>                  <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> = 'TEXT';
<a name="l202"><span class="linenum"> 202</span></a>                  break;
<a name="l203"><span class="linenum"> 203</span></a>              case <a class="constant" onClick="logConstant('XMLDB_TYPE_BINARY')" href="../../_constants/XMLDB_TYPE_BINARY.html" onMouseOver="constPopup(event,'XMLDB_TYPE_BINARY')">XMLDB_TYPE_BINARY</a>:
<a name="l204"><span class="linenum"> 204</span></a>                  <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> = 'BYTEA';
<a name="l205"><span class="linenum"> 205</span></a>                  break;
<a name="l206"><span class="linenum"> 206</span></a>              case <a class="constant" onClick="logConstant('XMLDB_TYPE_DATETIME')" href="../../_constants/XMLDB_TYPE_DATETIME.html" onMouseOver="constPopup(event,'XMLDB_TYPE_DATETIME')">XMLDB_TYPE_DATETIME</a>:
<a name="l207"><span class="linenum"> 207</span></a>                  <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a> = 'TIMESTAMP';
<a name="l208"><span class="linenum"> 208</span></a>                  break;
<a name="l209"><span class="linenum"> 209</span></a>          }
<a name="l210"><span class="linenum"> 210</span></a>          return <a class="var it632" onMouseOver="hilite(632)" onMouseOut="lolite()" onClick="logVariable('dbtype')" href="../../_variables/dbtype.html">$dbtype</a>;
<a name="l211"><span class="linenum"> 211</span></a>      }
<a name="l212"><span class="linenum"> 212</span></a>  
<a name="l213"><span class="linenum"> 213</span></a>      <span class="comment">/**</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     * Returns the code (array of statements) needed to add one comment to the table.</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     *</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">     * @param xmldb_table $xmldb_table The xmldb_table object instance.</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">     * @return array Array of SQL statements to add one comment to the table.</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">     */</span>
<a name="l219"><span class="linenum"> 219</span></a>      function <a class="function" onClick="logFunction('getCommentSQL')" href="../../_functions/getcommentsql.html" onMouseOver="funcPopup(event,'getcommentsql')">getCommentSQL</a> (<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>) {
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>          <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a> = &quot;COMMENT ON TABLE &quot; . <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getTableName')" href="../../_functions/gettablename.html" onMouseOver="funcPopup(event,'gettablename')">getTableName</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>);
<a name="l222"><span class="linenum"> 222</span></a>          <a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>.= &quot; IS '&quot; . <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="phpfunction" onClick="logFunction('addslashes')" href="../../_functions/addslashes.html" onMouseOver="phpfuncPopup(event,'addslashes')">addslashes</a>(<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('getComment')" href="../../_functions/getcomment.html" onMouseOver="funcPopup(event,'getcomment')">getComment</a>(), 0, 250)) . &quot;'&quot;;
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>          return array(<a class="var it1145" onMouseOver="hilite(1145)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>);
<a name="l225"><span class="linenum"> 225</span></a>      }
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>      <span class="comment">/**</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">     * Returns the code (array of statements) needed to execute extra statements on table rename.</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">     *</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">     * @param xmldb_table $xmldb_table The xmldb_table object instance.</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment">     * @param string $newname The new name for the table.</span>
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment">     * @return array Array of extra SQL statements to rename a table.</span>
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">     */</span>
<a name="l234"><span class="linenum"> 234</span></a>      public function <a class="function" onClick="logFunction('getRenameTableExtraSQL')" href="../../_functions/getrenametableextrasql.html" onMouseOver="funcPopup(event,'getrenametableextrasql')">getRenameTableExtraSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>, <a class="var it1486" onMouseOver="hilite(1486)" onMouseOut="lolite()" onClick="logVariable('newname')" href="../../_variables/newname.html">$newname</a>) {
<a name="l235"><span class="linenum"> 235</span></a>  
<a name="l236"><span class="linenum"> 236</span></a>          <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a> = array();
<a name="l237"><span class="linenum"> 237</span></a>  
<a name="l238"><span class="linenum"> 238</span></a>          <a class="var it11084" onMouseOver="hilite(11084)" onMouseOut="lolite()" onClick="logVariable('newt')" href="../../_variables/newt.html">$newt</a> = <span class="keyword">new </span><a class="class" onClick="logClass('xmldb_table')" href="../../_classes/xmldb_table.html" onMouseOver="classPopup(event,'xmldb_table')">xmldb_table</a>(<a class="var it1486" onMouseOver="hilite(1486)" onMouseOut="lolite()" onClick="logVariable('newname')" href="../../_variables/newname.html">$newname</a>);
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>          <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a> = <span class="keyword">new </span><a class="class" onClick="logClass('xmldb_field')" href="../../_classes/xmldb_field.html" onMouseOver="classPopup(event,'xmldb_field')">xmldb_field</a>('id'); <span class="comment">// Fields having sequences should be exclusively, id.</span>
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>          <a class="var it11080" onMouseOver="hilite(11080)" onMouseOut="lolite()" onClick="logVariable('oldseqname')" href="../../_variables/oldseqname.html">$oldseqname</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getTableName')" href="../../_functions/gettablename.html" onMouseOver="funcPopup(event,'gettablename')">getTableName</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>) . '_' . <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>() . '_seq';
<a name="l243"><span class="linenum"> 243</span></a>          <a class="var it11081" onMouseOver="hilite(11081)" onMouseOut="lolite()" onClick="logVariable('newseqname')" href="../../_variables/newseqname.html">$newseqname</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getTableName')" href="../../_functions/gettablename.html" onMouseOver="funcPopup(event,'gettablename')">getTableName</a>(<a class="var it11084" onMouseOver="hilite(11084)" onMouseOut="lolite()" onClick="logVariable('newt')" href="../../_variables/newt.html">$newt</a>) . '_' . <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>() . '_seq';
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">        // Rename de sequence</span>
<a name="l246"><span class="linenum"> 246</span></a>          <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a>[] = 'ALTER TABLE ' . <a class="var it11080" onMouseOver="hilite(11080)" onMouseOut="lolite()" onClick="logVariable('oldseqname')" href="../../_variables/oldseqname.html">$oldseqname</a> . ' RENAME TO ' . <a class="var it11081" onMouseOver="hilite(11081)" onMouseOut="lolite()" onClick="logVariable('newseqname')" href="../../_variables/newseqname.html">$newseqname</a>;
<a name="l247"><span class="linenum"> 247</span></a>  
<a name="l248"><span class="linenum"> 248</span></a>          return <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a>;
<a name="l249"><span class="linenum"> 249</span></a>      }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>      <span class="comment">/**</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">     * Given one xmldb_table and one xmldb_field, return the SQL statements needed to alter the field in the table.</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">     *</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     * PostgreSQL has some severe limits:</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     *     - Any change of type or precision requires a new temporary column to be created, values to</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">     *       be transfered potentially casting them, to apply defaults if the column is not null and</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">     *       finally, to rename it</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">     *     - Changes in null/not null require the SET/DROP NOT NULL clause</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">     *     - Changes in default require the SET/DROP DEFAULT clause</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">     *</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">     * @param xmldb_table $xmldb_table The table related to $xmldb_field.</span>
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">     * @param xmldb_field $xmldb_field The instance of xmldb_field to create the SQL from.</span>
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment">     * @param string $skip_type_clause The type clause on alter columns, NULL by default.</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">     * @param string $skip_default_clause The default clause on alter columns, NULL by default.</span>
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">     * @param string $skip_notnull_clause The null/notnull clause on alter columns, NULL by default.</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">     * @return string The field altering SQL statement.</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     */</span>
<a name="l268"><span class="linenum"> 268</span></a>      public function <a class="function" onClick="logFunction('getAlterFieldSQL')" href="../../_functions/getalterfieldsql.html" onMouseOver="funcPopup(event,'getalterfieldsql')">getAlterFieldSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>, <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>, <a class="var it1478" onMouseOver="hilite(1478)" onMouseOut="lolite()" onClick="logVariable('skip_type_clause')" href="../../_variables/skip_type_clause.html">$skip_type_clause</a> = NULL, <a class="var it1479" onMouseOver="hilite(1479)" onMouseOut="lolite()" onClick="logVariable('skip_default_clause')" href="../../_variables/skip_default_clause.html">$skip_default_clause</a> = NULL, <a class="var it1480" onMouseOver="hilite(1480)" onMouseOut="lolite()" onClick="logVariable('skip_notnull_clause')" href="../../_variables/skip_notnull_clause.html">$skip_notnull_clause</a> = NULL) {
<a name="l269"><span class="linenum"> 269</span></a>          <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a> = array();     <span class="comment">// To store all the needed SQL commands</span>
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">        // Get the normal names of the table and field</span>
<a name="l272"><span class="linenum"> 272</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> = <a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>();
<a name="l273"><span class="linenum"> 273</span></a>          <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> = <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>();
<a name="l274"><span class="linenum"> 274</span></a>  
<a name="l275"><span class="linenum"> 275</span></a>  <span class="comment">        // Take a look to field metadata</span>
<a name="l276"><span class="linenum"> 276</span></a>          <a class="var it4077" onMouseOver="hilite(4077)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../../_variables/meta.html">$meta</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mdb')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mdb.html">mdb</a>-&gt;<a class="function" onClick="logFunction('get_columns')" href="../../_functions/get_columns.html" onMouseOver="funcPopup(event,'get_columns')">get_columns</a>(<a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a>);
<a name="l277"><span class="linenum"> 277</span></a>          <a class="var it11088" onMouseOver="hilite(11088)" onMouseOut="lolite()" onClick="logVariable('metac')" href="../../_variables/metac.html">$metac</a> = <a class="var it4077" onMouseOver="hilite(4077)" onMouseOut="lolite()" onClick="logVariable('meta')" href="../../_variables/meta.html">$meta</a>[<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>()];
<a name="l278"><span class="linenum"> 278</span></a>          <a class="var it11089" onMouseOver="hilite(11089)" onMouseOut="lolite()" onClick="logVariable('oldmetatype')" href="../../_variables/oldmetatype.html">$oldmetatype</a> = <a class="var it11088" onMouseOver="hilite(11088)" onMouseOut="lolite()" onClick="logVariable('metac')" href="../../_variables/metac.html">$metac</a>-&gt;<a onClick="logVariable('meta_type')" class="var it40142" onMouseOver="hilite(40142)" onMouseOut="lolite()" href="../../_variables/meta_type.html">meta_type</a>;
<a name="l279"><span class="linenum"> 279</span></a>          <a class="var it11090" onMouseOver="hilite(11090)" onMouseOut="lolite()" onClick="logVariable('oldlength')" href="../../_variables/oldlength.html">$oldlength</a> = <a class="var it11088" onMouseOver="hilite(11088)" onMouseOut="lolite()" onClick="logVariable('metac')" href="../../_variables/metac.html">$metac</a>-&gt;<a onClick="logVariable('max_length')" class="var it40142" onMouseOver="hilite(40142)" onMouseOut="lolite()" href="../../_variables/max_length.html">max_length</a>;
<a name="l280"><span class="linenum"> 280</span></a>          <a class="var it11093" onMouseOver="hilite(11093)" onMouseOut="lolite()" onClick="logVariable('olddecimals')" href="../../_variables/olddecimals.html">$olddecimals</a> = empty(<a class="var it11088" onMouseOver="hilite(11088)" onMouseOut="lolite()" onClick="logVariable('metac')" href="../../_variables/metac.html">$metac</a>-&gt;<a onClick="logVariable('scale')" class="var it40142" onMouseOver="hilite(40142)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>) ? null : <a class="var it11088" onMouseOver="hilite(11088)" onMouseOut="lolite()" onClick="logVariable('metac')" href="../../_variables/metac.html">$metac</a>-&gt;<a onClick="logVariable('scale')" class="var it40142" onMouseOver="hilite(40142)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>;
<a name="l281"><span class="linenum"> 281</span></a>          <a class="var it11094" onMouseOver="hilite(11094)" onMouseOut="lolite()" onClick="logVariable('oldnotnull')" href="../../_variables/oldnotnull.html">$oldnotnull</a> = empty(<a class="var it11088" onMouseOver="hilite(11088)" onMouseOut="lolite()" onClick="logVariable('metac')" href="../../_variables/metac.html">$metac</a>-&gt;<a onClick="logVariable('not_null')" class="var it40142" onMouseOver="hilite(40142)" onMouseOut="lolite()" href="../../_variables/not_null.html">not_null</a>) ? false : <a class="var it11088" onMouseOver="hilite(11088)" onMouseOut="lolite()" onClick="logVariable('metac')" href="../../_variables/metac.html">$metac</a>-&gt;<a onClick="logVariable('not_null')" class="var it40142" onMouseOver="hilite(40142)" onMouseOut="lolite()" href="../../_variables/not_null.html">not_null</a>;
<a name="l282"><span class="linenum"> 282</span></a>          <a class="var it11095" onMouseOver="hilite(11095)" onMouseOut="lolite()" onClick="logVariable('olddefault')" href="../../_variables/olddefault.html">$olddefault</a> = empty(<a class="var it11088" onMouseOver="hilite(11088)" onMouseOut="lolite()" onClick="logVariable('metac')" href="../../_variables/metac.html">$metac</a>-&gt;<a onClick="logVariable('has_default')" class="var it40142" onMouseOver="hilite(40142)" onMouseOut="lolite()" href="../../_variables/has_default.html">has_default</a>) ? null : <a class="var it11088" onMouseOver="hilite(11088)" onMouseOut="lolite()" onClick="logVariable('metac')" href="../../_variables/metac.html">$metac</a>-&gt;<a onClick="logVariable('default_value')" class="var it40142" onMouseOver="hilite(40142)" onMouseOut="lolite()" href="../../_variables/default_value.html">default_value</a>;
<a name="l283"><span class="linenum"> 283</span></a>  
<a name="l284"><span class="linenum"> 284</span></a>          <a class="var it11096" onMouseOver="hilite(11096)" onMouseOut="lolite()" onClick="logVariable('typechanged')" href="../../_variables/typechanged.html">$typechanged</a> = true;  <span class="comment">//By default, assume that the column type has changed</span>
<a name="l285"><span class="linenum"> 285</span></a>          <a class="var it11097" onMouseOver="hilite(11097)" onMouseOut="lolite()" onClick="logVariable('precisionchanged')" href="../../_variables/precisionchanged.html">$precisionchanged</a> = true;  <span class="comment">//By default, assume that the column precision has changed</span>
<a name="l286"><span class="linenum"> 286</span></a>          <a class="var it11098" onMouseOver="hilite(11098)" onMouseOut="lolite()" onClick="logVariable('decimalchanged')" href="../../_variables/decimalchanged.html">$decimalchanged</a> = true;  <span class="comment">//By default, assume that the column decimal has changed</span>
<a name="l287"><span class="linenum"> 287</span></a>          <a class="var it11099" onMouseOver="hilite(11099)" onMouseOut="lolite()" onClick="logVariable('defaultchanged')" href="../../_variables/defaultchanged.html">$defaultchanged</a> = true;  <span class="comment">//By default, assume that the column default has changed</span>
<a name="l288"><span class="linenum"> 288</span></a>          <a class="var it11100" onMouseOver="hilite(11100)" onMouseOut="lolite()" onClick="logVariable('notnullchanged')" href="../../_variables/notnullchanged.html">$notnullchanged</a> = true;  <span class="comment">//By default, assume that the column notnull has changed</span>
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">        // Detect if we are changing the type of the column</span>
<a name="l291"><span class="linenum"> 291</span></a>          if ((<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a> &amp;&amp; <a class="var it11089" onMouseOver="hilite(11089)" onMouseOut="lolite()" onClick="logVariable('oldmetatype')" href="../../_variables/oldmetatype.html">$oldmetatype</a> == 'I') ||
<a name="l292"><span class="linenum"> 292</span></a>              (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_NUMBER')" href="../../_constants/XMLDB_TYPE_NUMBER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_NUMBER')">XMLDB_TYPE_NUMBER</a>  &amp;&amp; <a class="var it11089" onMouseOver="hilite(11089)" onMouseOut="lolite()" onClick="logVariable('oldmetatype')" href="../../_variables/oldmetatype.html">$oldmetatype</a> == 'N') ||
<a name="l293"><span class="linenum"> 293</span></a>              (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_FLOAT')" href="../../_constants/XMLDB_TYPE_FLOAT.html" onMouseOver="constPopup(event,'XMLDB_TYPE_FLOAT')">XMLDB_TYPE_FLOAT</a>   &amp;&amp; <a class="var it11089" onMouseOver="hilite(11089)" onMouseOut="lolite()" onClick="logVariable('oldmetatype')" href="../../_variables/oldmetatype.html">$oldmetatype</a> == 'F') ||
<a name="l294"><span class="linenum"> 294</span></a>              (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_CHAR')" href="../../_constants/XMLDB_TYPE_CHAR.html" onMouseOver="constPopup(event,'XMLDB_TYPE_CHAR')">XMLDB_TYPE_CHAR</a>    &amp;&amp; <a class="var it11089" onMouseOver="hilite(11089)" onMouseOut="lolite()" onClick="logVariable('oldmetatype')" href="../../_variables/oldmetatype.html">$oldmetatype</a> == 'C') ||
<a name="l295"><span class="linenum"> 295</span></a>              (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_TEXT')" href="../../_constants/XMLDB_TYPE_TEXT.html" onMouseOver="constPopup(event,'XMLDB_TYPE_TEXT')">XMLDB_TYPE_TEXT</a>    &amp;&amp; <a class="var it11089" onMouseOver="hilite(11089)" onMouseOut="lolite()" onClick="logVariable('oldmetatype')" href="../../_variables/oldmetatype.html">$oldmetatype</a> == 'X') ||
<a name="l296"><span class="linenum"> 296</span></a>              (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_BINARY')" href="../../_constants/XMLDB_TYPE_BINARY.html" onMouseOver="constPopup(event,'XMLDB_TYPE_BINARY')">XMLDB_TYPE_BINARY</a>  &amp;&amp; <a class="var it11089" onMouseOver="hilite(11089)" onMouseOut="lolite()" onClick="logVariable('oldmetatype')" href="../../_variables/oldmetatype.html">$oldmetatype</a> == 'B')) {
<a name="l297"><span class="linenum"> 297</span></a>              <a class="var it11096" onMouseOver="hilite(11096)" onMouseOut="lolite()" onClick="logVariable('typechanged')" href="../../_variables/typechanged.html">$typechanged</a> = false;
<a name="l298"><span class="linenum"> 298</span></a>          }
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment">        // Detect if we are changing the precision</span>
<a name="l300"><span class="linenum"> 300</span></a>          if ((<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_TEXT')" href="../../_constants/XMLDB_TYPE_TEXT.html" onMouseOver="constPopup(event,'XMLDB_TYPE_TEXT')">XMLDB_TYPE_TEXT</a>) ||
<a name="l301"><span class="linenum"> 301</span></a>              (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_BINARY')" href="../../_constants/XMLDB_TYPE_BINARY.html" onMouseOver="constPopup(event,'XMLDB_TYPE_BINARY')">XMLDB_TYPE_BINARY</a>) ||
<a name="l302"><span class="linenum"> 302</span></a>              (<a class="var it11090" onMouseOver="hilite(11090)" onMouseOut="lolite()" onClick="logVariable('oldlength')" href="../../_variables/oldlength.html">$oldlength</a> == -1) ||
<a name="l303"><span class="linenum"> 303</span></a>              (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getLength')" href="../../_functions/getlength.html" onMouseOver="funcPopup(event,'getlength')">getLength</a>() == <a class="var it11090" onMouseOver="hilite(11090)" onMouseOut="lolite()" onClick="logVariable('oldlength')" href="../../_variables/oldlength.html">$oldlength</a>)) {
<a name="l304"><span class="linenum"> 304</span></a>              <a class="var it11097" onMouseOver="hilite(11097)" onMouseOut="lolite()" onClick="logVariable('precisionchanged')" href="../../_variables/precisionchanged.html">$precisionchanged</a> = false;
<a name="l305"><span class="linenum"> 305</span></a>          }
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">        // Detect if we are changing the decimals</span>
<a name="l307"><span class="linenum"> 307</span></a>          if ((<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a>) ||
<a name="l308"><span class="linenum"> 308</span></a>              (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_CHAR')" href="../../_constants/XMLDB_TYPE_CHAR.html" onMouseOver="constPopup(event,'XMLDB_TYPE_CHAR')">XMLDB_TYPE_CHAR</a>) ||
<a name="l309"><span class="linenum"> 309</span></a>              (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_TEXT')" href="../../_constants/XMLDB_TYPE_TEXT.html" onMouseOver="constPopup(event,'XMLDB_TYPE_TEXT')">XMLDB_TYPE_TEXT</a>) ||
<a name="l310"><span class="linenum"> 310</span></a>              (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_BINARY')" href="../../_constants/XMLDB_TYPE_BINARY.html" onMouseOver="constPopup(event,'XMLDB_TYPE_BINARY')">XMLDB_TYPE_BINARY</a>) ||
<a name="l311"><span class="linenum"> 311</span></a>              (!<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getDecimals')" href="../../_functions/getdecimals.html" onMouseOver="funcPopup(event,'getdecimals')">getDecimals</a>()) ||
<a name="l312"><span class="linenum"> 312</span></a>              (!<a class="var it11093" onMouseOver="hilite(11093)" onMouseOut="lolite()" onClick="logVariable('olddecimals')" href="../../_variables/olddecimals.html">$olddecimals</a>) ||
<a name="l313"><span class="linenum"> 313</span></a>              (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getDecimals')" href="../../_functions/getdecimals.html" onMouseOver="funcPopup(event,'getdecimals')">getDecimals</a>() == <a class="var it11093" onMouseOver="hilite(11093)" onMouseOut="lolite()" onClick="logVariable('olddecimals')" href="../../_variables/olddecimals.html">$olddecimals</a>)) {
<a name="l314"><span class="linenum"> 314</span></a>              <a class="var it11098" onMouseOver="hilite(11098)" onMouseOut="lolite()" onClick="logVariable('decimalchanged')" href="../../_variables/decimalchanged.html">$decimalchanged</a> = false;
<a name="l315"><span class="linenum"> 315</span></a>          }
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment">        // Detect if we are changing the default</span>
<a name="l317"><span class="linenum"> 317</span></a>          if ((<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getDefault')" href="../../_functions/getdefault.html" onMouseOver="funcPopup(event,'getdefault')">getDefault</a>() === null &amp;&amp; <a class="var it11095" onMouseOver="hilite(11095)" onMouseOut="lolite()" onClick="logVariable('olddefault')" href="../../_variables/olddefault.html">$olddefault</a> === null) ||
<a name="l318"><span class="linenum"> 318</span></a>              (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getDefault')" href="../../_functions/getdefault.html" onMouseOver="funcPopup(event,'getdefault')">getDefault</a>() === <a class="var it11095" onMouseOver="hilite(11095)" onMouseOut="lolite()" onClick="logVariable('olddefault')" href="../../_variables/olddefault.html">$olddefault</a>)) {
<a name="l319"><span class="linenum"> 319</span></a>              <a class="var it11099" onMouseOver="hilite(11099)" onMouseOut="lolite()" onClick="logVariable('defaultchanged')" href="../../_variables/defaultchanged.html">$defaultchanged</a> = false;
<a name="l320"><span class="linenum"> 320</span></a>          }
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">        // Detect if we are changing the nullability</span>
<a name="l322"><span class="linenum"> 322</span></a>          if ((<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getNotnull')" href="../../_functions/getnotnull.html" onMouseOver="funcPopup(event,'getnotnull')">getNotnull</a>() === <a class="var it11094" onMouseOver="hilite(11094)" onMouseOut="lolite()" onClick="logVariable('oldnotnull')" href="../../_variables/oldnotnull.html">$oldnotnull</a>)) {
<a name="l323"><span class="linenum"> 323</span></a>              <a class="var it11100" onMouseOver="hilite(11100)" onMouseOut="lolite()" onClick="logVariable('notnullchanged')" href="../../_variables/notnullchanged.html">$notnullchanged</a> = false;
<a name="l324"><span class="linenum"> 324</span></a>          }
<a name="l325"><span class="linenum"> 325</span></a>  
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">        // Get the quoted name of the table and field</span>
<a name="l327"><span class="linenum"> 327</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getTableName')" href="../../_functions/gettablename.html" onMouseOver="funcPopup(event,'gettablename')">getTableName</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>);
<a name="l328"><span class="linenum"> 328</span></a>          <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getEncQuoted')" href="../../_functions/getencquoted.html" onMouseOver="funcPopup(event,'getencquoted')">getEncQuoted</a>(<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>());
<a name="l329"><span class="linenum"> 329</span></a>  
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment">        // Decide if we have changed the column specs (type/precision/decimals)</span>
<a name="l331"><span class="linenum"> 331</span></a>          <a class="var it30630" onMouseOver="hilite(30630)" onMouseOut="lolite()" onClick="logVariable('specschanged')" href="../../_variables/specschanged.html">$specschanged</a> = <a class="var it11096" onMouseOver="hilite(11096)" onMouseOut="lolite()" onClick="logVariable('typechanged')" href="../../_variables/typechanged.html">$typechanged</a> || <a class="var it11097" onMouseOver="hilite(11097)" onMouseOut="lolite()" onClick="logVariable('precisionchanged')" href="../../_variables/precisionchanged.html">$precisionchanged</a> || <a class="var it11098" onMouseOver="hilite(11098)" onMouseOut="lolite()" onClick="logVariable('decimalchanged')" href="../../_variables/decimalchanged.html">$decimalchanged</a>;
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">        // if specs have changed, need to alter column</span>
<a name="l334"><span class="linenum"> 334</span></a>          if (<a class="var it30630" onMouseOver="hilite(30630)" onMouseOut="lolite()" onClick="logVariable('specschanged')" href="../../_variables/specschanged.html">$specschanged</a>) {
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">            // Always drop any exiting default before alter column (some type changes can cause casting error in default for column)</span>
<a name="l336"><span class="linenum"> 336</span></a>              if (<a class="var it11095" onMouseOver="hilite(11095)" onMouseOut="lolite()" onClick="logVariable('olddefault')" href="../../_variables/olddefault.html">$olddefault</a> !== null) {
<a name="l337"><span class="linenum"> 337</span></a>                  <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a>[] = 'ALTER TABLE ' . <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> . ' ALTER COLUMN ' . <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> . ' DROP DEFAULT';     <span class="comment">// Drop default clause</span>
<a name="l338"><span class="linenum"> 338</span></a>              }
<a name="l339"><span class="linenum"> 339</span></a>              <a class="var it30631" onMouseOver="hilite(30631)" onMouseOut="lolite()" onClick="logVariable('alterstmt')" href="../../_variables/alterstmt.html">$alterstmt</a> = 'ALTER TABLE ' . <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> . ' ALTER COLUMN ' . <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getEncQuoted')" href="../../_functions/getencquoted.html" onMouseOver="funcPopup(event,'getencquoted')">getEncQuoted</a>(<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getName')" href="../../_functions/getname.html" onMouseOver="funcPopup(event,'getname')">getName</a>()) .
<a name="l340"><span class="linenum"> 340</span></a>                  ' TYPE' . <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getFieldSQL')" href="../../_functions/getfieldsql.html" onMouseOver="funcPopup(event,'getfieldsql')">getFieldSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>, <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>, null, true, true, null, false);
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment">            // Some castings must be performed explicitly (mainly from text|char to numeric|integer)</span>
<a name="l342"><span class="linenum"> 342</span></a>              if ((<a class="var it11089" onMouseOver="hilite(11089)" onMouseOut="lolite()" onClick="logVariable('oldmetatype')" href="../../_variables/oldmetatype.html">$oldmetatype</a> == 'C' || <a class="var it11089" onMouseOver="hilite(11089)" onMouseOut="lolite()" onClick="logVariable('oldmetatype')" href="../../_variables/oldmetatype.html">$oldmetatype</a> == 'X') &amp;&amp;
<a name="l343"><span class="linenum"> 343</span></a>                  (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_NUMBER')" href="../../_constants/XMLDB_TYPE_NUMBER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_NUMBER')">XMLDB_TYPE_NUMBER</a> || <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_FLOAT')" href="../../_constants/XMLDB_TYPE_FLOAT.html" onMouseOver="constPopup(event,'XMLDB_TYPE_FLOAT')">XMLDB_TYPE_FLOAT</a>)) {
<a name="l344"><span class="linenum"> 344</span></a>                  <a class="var it30631" onMouseOver="hilite(30631)" onMouseOut="lolite()" onClick="logVariable('alterstmt')" href="../../_variables/alterstmt.html">$alterstmt</a> .= ' USING CAST('.<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>.' AS NUMERIC)'; <span class="comment">// from char or text to number or float</span>
<a name="l345"><span class="linenum"> 345</span></a>              } else if ((<a class="var it11089" onMouseOver="hilite(11089)" onMouseOut="lolite()" onClick="logVariable('oldmetatype')" href="../../_variables/oldmetatype.html">$oldmetatype</a> == 'C' || <a class="var it11089" onMouseOver="hilite(11089)" onMouseOut="lolite()" onClick="logVariable('oldmetatype')" href="../../_variables/oldmetatype.html">$oldmetatype</a> == 'X') &amp;&amp;
<a name="l346"><span class="linenum"> 346</span></a>                  <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="phpfunction" onClick="logFunction('getType')" href="../../_functions/gettype.html" onMouseOver="phpfuncPopup(event,'gettype')">getType</a>() == <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a>) {
<a name="l347"><span class="linenum"> 347</span></a>                  <a class="var it30631" onMouseOver="hilite(30631)" onMouseOut="lolite()" onClick="logVariable('alterstmt')" href="../../_variables/alterstmt.html">$alterstmt</a> .= ' USING CAST(CAST('.<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a>.' AS NUMERIC) AS INTEGER)'; <span class="comment">// From char to integer</span>
<a name="l348"><span class="linenum"> 348</span></a>              }
<a name="l349"><span class="linenum"> 349</span></a>              <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a>[] = <a class="var it30631" onMouseOver="hilite(30631)" onMouseOut="lolite()" onClick="logVariable('alterstmt')" href="../../_variables/alterstmt.html">$alterstmt</a>;
<a name="l350"><span class="linenum"> 350</span></a>          }
<a name="l351"><span class="linenum"> 351</span></a>  
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">        // If the default has changed or we have performed one change in specs</span>
<a name="l353"><span class="linenum"> 353</span></a>          if (<a class="var it11099" onMouseOver="hilite(11099)" onMouseOut="lolite()" onClick="logVariable('defaultchanged')" href="../../_variables/defaultchanged.html">$defaultchanged</a> || <a class="var it30630" onMouseOver="hilite(30630)" onMouseOut="lolite()" onClick="logVariable('specschanged')" href="../../_variables/specschanged.html">$specschanged</a>) {
<a name="l354"><span class="linenum"> 354</span></a>              <a class="var it11103" onMouseOver="hilite(11103)" onMouseOut="lolite()" onClick="logVariable('default_clause')" href="../../_variables/default_clause.html">$default_clause</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDefaultClause')" href="../../_functions/getdefaultclause.html" onMouseOver="funcPopup(event,'getdefaultclause')">getDefaultClause</a>(<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>);
<a name="l355"><span class="linenum"> 355</span></a>              if (<a class="var it11103" onMouseOver="hilite(11103)" onMouseOut="lolite()" onClick="logVariable('default_clause')" href="../../_variables/default_clause.html">$default_clause</a>) {
<a name="l356"><span class="linenum"> 356</span></a>                  <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'ALTER TABLE ' . <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> . ' ALTER COLUMN ' . <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> . ' SET' . <a class="var it11103" onMouseOver="hilite(11103)" onMouseOut="lolite()" onClick="logVariable('default_clause')" href="../../_variables/default_clause.html">$default_clause</a>;     <span class="comment">// Add default clause</span>
<a name="l357"><span class="linenum"> 357</span></a>                  <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a>[] = <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>;
<a name="l358"><span class="linenum"> 358</span></a>              } else {
<a name="l359"><span class="linenum"> 359</span></a>                  if (!<a class="var it30630" onMouseOver="hilite(30630)" onMouseOut="lolite()" onClick="logVariable('specschanged')" href="../../_variables/specschanged.html">$specschanged</a>) {     // Only drop default if we haven't performed one specs change
<a name="l360"><span class="linenum"> 360</span></a>                      <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a>[] = 'ALTER TABLE ' . <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> . ' ALTER COLUMN ' . <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> . ' DROP DEFAULT';     <span class="comment">// Drop default clause</span>
<a name="l361"><span class="linenum"> 361</span></a>                  }
<a name="l362"><span class="linenum"> 362</span></a>              }
<a name="l363"><span class="linenum"> 363</span></a>          }
<a name="l364"><span class="linenum"> 364</span></a>  
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment">        // If the not null has changed</span>
<a name="l366"><span class="linenum"> 366</span></a>          if (<a class="var it11100" onMouseOver="hilite(11100)" onMouseOut="lolite()" onClick="logVariable('notnullchanged')" href="../../_variables/notnullchanged.html">$notnullchanged</a>) {
<a name="l367"><span class="linenum"> 367</span></a>              if (<a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>-&gt;<a class="function" onClick="logFunction('getNotnull')" href="../../_functions/getnotnull.html" onMouseOver="funcPopup(event,'getnotnull')">getNotnull</a>()) {
<a name="l368"><span class="linenum"> 368</span></a>                  <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a>[] = 'ALTER TABLE ' . <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> . ' ALTER COLUMN ' . <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> . ' SET NOT NULL';
<a name="l369"><span class="linenum"> 369</span></a>              } else {
<a name="l370"><span class="linenum"> 370</span></a>                  <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a>[] = 'ALTER TABLE ' . <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> . ' ALTER COLUMN ' . <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../_variables/fieldname.html">$fieldname</a> . ' DROP NOT NULL';
<a name="l371"><span class="linenum"> 371</span></a>              }
<a name="l372"><span class="linenum"> 372</span></a>          }
<a name="l373"><span class="linenum"> 373</span></a>  
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">        // Return the results</span>
<a name="l375"><span class="linenum"> 375</span></a>          return <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../../_variables/results.html">$results</a>;
<a name="l376"><span class="linenum"> 376</span></a>      }
<a name="l377"><span class="linenum"> 377</span></a>  
<a name="l378"><span class="linenum"> 378</span></a>      <span class="comment">/**</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     * Given one xmldb_table and one xmldb_field, return the SQL statements needed to add its default</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     * (usually invoked from getModifyDefaultSQL()</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     *</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     * @param xmldb_table $xmldb_table The xmldb_table object instance.</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">     * @param xmldb_field $xmldb_field The xmldb_field object instance.</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">     * @return array Array of SQL statements to create a field's default.</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">     */</span>
<a name="l386"><span class="linenum"> 386</span></a>      public function <a class="function" onClick="logFunction('getCreateDefaultSQL')" href="../../_functions/getcreatedefaultsql.html" onMouseOver="funcPopup(event,'getcreatedefaultsql')">getCreateDefaultSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>, <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>) {
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">        // Just a wrapper over the getAlterFieldSQL() function for PostgreSQL that</span>
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">        // is capable of handling defaults</span>
<a name="l389"><span class="linenum"> 389</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getAlterFieldSQL')" href="../../_functions/getalterfieldsql.html" onMouseOver="funcPopup(event,'getalterfieldsql')">getAlterFieldSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>, <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>);
<a name="l390"><span class="linenum"> 390</span></a>      }
<a name="l391"><span class="linenum"> 391</span></a>  
<a name="l392"><span class="linenum"> 392</span></a>      <span class="comment">/**</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">     * Given one xmldb_table and one xmldb_field, return the SQL statements needed to drop its default</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">     * (usually invoked from getModifyDefaultSQL()</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">     *</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">     * Note that this method may be dropped in future.</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">     *</span>
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment">     * @param xmldb_table $xmldb_table The xmldb_table object instance.</span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">     * @param xmldb_field $xmldb_field The xmldb_field object instance.</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">     * @return array Array of SQL statements to create a field's default.</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">     *</span>
<a name="l402"><span class="linenum"> 402</span></a>  <span class="comment">     * @todo MDL-31147 Moodle 2.1 - Drop getDropDefaultSQL()</span>
<a name="l403"><span class="linenum"> 403</span></a>  <span class="comment">     */</span>
<a name="l404"><span class="linenum"> 404</span></a>      public function <a class="function" onClick="logFunction('getDropDefaultSQL')" href="../../_functions/getdropdefaultsql.html" onMouseOver="funcPopup(event,'getdropdefaultsql')">getDropDefaultSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>, <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>) {
<a name="l405"><span class="linenum"> 405</span></a>  <span class="comment">        // Just a wrapper over the getAlterFieldSQL() function for PostgreSQL that</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">        // is capable of handling defaults</span>
<a name="l407"><span class="linenum"> 407</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getAlterFieldSQL')" href="../../_functions/getalterfieldsql.html" onMouseOver="funcPopup(event,'getalterfieldsql')">getAlterFieldSQL</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>, <a class="var it1477" onMouseOver="hilite(1477)" onMouseOut="lolite()" onClick="logVariable('xmldb_field')" href="../../_variables/xmldb_field.html">$xmldb_field</a>);
<a name="l408"><span class="linenum"> 408</span></a>      }
<a name="l409"><span class="linenum"> 409</span></a>  
<a name="l410"><span class="linenum"> 410</span></a>      <span class="comment">/**</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">     * Adds slashes to string.</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">     * @param string $s</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">     * @return string The escaped string.</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">     */</span>
<a name="l415"><span class="linenum"> 415</span></a>      public function <a class="function" onClick="logFunction('addslashes')" href="../../_functions/addslashes.html" onMouseOver="funcPopup(event,'addslashes')">addslashes</a>(<a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>) {
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">        // Postgres is gradually switching to ANSI quotes, we need to check what is expected</span>
<a name="l417"><span class="linenum"> 417</span></a>          if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('std_strings')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/std_strings.html">std_strings</a>)) {
<a name="l418"><span class="linenum"> 418</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('std_strings')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/std_strings.html">std_strings</a> = (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mdb')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mdb.html">mdb</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>(&quot;select setting from pg_settings where name = 'standard_conforming_strings'&quot;) === 'on');
<a name="l419"><span class="linenum"> 419</span></a>          }
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('std_strings')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/std_strings.html">std_strings</a>) {
<a name="l422"><span class="linenum"> 422</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;'&quot;,  &quot;''&quot;, <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>);
<a name="l423"><span class="linenum"> 423</span></a>          } else {
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">            // do not use php addslashes() because it depends on PHP quote settings!</span>
<a name="l425"><span class="linenum"> 425</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('\\','\\\\',<a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>);
<a name="l426"><span class="linenum"> 426</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;\0&quot;,&quot;\\\0&quot;, <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>);
<a name="l427"><span class="linenum"> 427</span></a>              <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(&quot;'&quot;,  &quot;\\'&quot;, <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>);
<a name="l428"><span class="linenum"> 428</span></a>          }
<a name="l429"><span class="linenum"> 429</span></a>  
<a name="l430"><span class="linenum"> 430</span></a>          return <a class="var it292" onMouseOver="hilite(292)" onMouseOut="lolite()" onClick="logVariable('s')" href="../../_variables/s.html">$s</a>;
<a name="l431"><span class="linenum"> 431</span></a>      }
<a name="l432"><span class="linenum"> 432</span></a>  
<a name="l433"><span class="linenum"> 433</span></a>      <span class="comment">/**</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">     * Given one xmldb_table returns one string with the sequence of the table</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">     * in the table (fetched from DB)</span>
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">     * The sequence name for Postgres has one standard name convention:</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">     *     tablename_fieldname_seq</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">     * so we just calculate it and confirm it's present in pg_class</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">     *</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">     * @param xmldb_table $xmldb_table The xmldb_table object instance.</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">     * @return string|bool If no sequence is found, returns false</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">     */</span>
<a name="l443"><span class="linenum"> 443</span></a>      function <a class="function" onClick="logFunction('getSequenceFromDB')" href="../../_functions/getsequencefromdb.html" onMouseOver="funcPopup(event,'getsequencefromdb')">getSequenceFromDB</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>) {
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getTableName')" href="../../_functions/gettablename.html" onMouseOver="funcPopup(event,'gettablename')">getTableName</a>(<a class="var it1469" onMouseOver="hilite(1469)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../_variables/xmldb_table.html">$xmldb_table</a>);
<a name="l446"><span class="linenum"> 446</span></a>          <a class="var it11105" onMouseOver="hilite(11105)" onMouseOut="lolite()" onClick="logVariable('sequencename')" href="../../_variables/sequencename.html">$sequencename</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('tablename')" href="../../_variables/tablename.html">$tablename</a> . '_id_seq';
<a name="l447"><span class="linenum"> 447</span></a>  
<a name="l448"><span class="linenum"> 448</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mdb')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mdb.html">mdb</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(&quot;SELECT c.*
<a name="l449"><span class="linenum"> 449</span></a>                                             FROM pg_catalog.pg_class c
<a name="l450"><span class="linenum"> 450</span></a>                                             JOIN pg_catalog.pg_namespace as ns ON ns.oid = c.relnamespace
<a name="l451"><span class="linenum"> 451</span></a>                                            WHERE c.relname = ? AND c.relkind = 'S'
<a name="l452"><span class="linenum"> 452</span></a>                                                  AND (ns.nspname = current_schema() OR ns.oid = pg_my_temp_schema())&quot;,
<a name="l453"><span class="linenum"> 453</span></a>              array(<a class="var it11105" onMouseOver="hilite(11105)" onMouseOut="lolite()" onClick="logVariable('sequencename')" href="../../_variables/sequencename.html">$sequencename</a>))) {
<a name="l454"><span class="linenum"> 454</span></a>              <a class="var it11105" onMouseOver="hilite(11105)" onMouseOut="lolite()" onClick="logVariable('sequencename')" href="../../_variables/sequencename.html">$sequencename</a> = false;
<a name="l455"><span class="linenum"> 455</span></a>          }
<a name="l456"><span class="linenum"> 456</span></a>  
<a name="l457"><span class="linenum"> 457</span></a>          return <a class="var it11105" onMouseOver="hilite(11105)" onMouseOut="lolite()" onClick="logVariable('sequencename')" href="../../_variables/sequencename.html">$sequencename</a>;
<a name="l458"><span class="linenum"> 458</span></a>      }
<a name="l459"><span class="linenum"> 459</span></a>  
<a name="l460"><span class="linenum"> 460</span></a>      <span class="comment">/**</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">     * Given one object name and it's type (pk, uk, fk, ck, ix, uix, seq, trg).</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">     *</span>
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">     * (MySQL requires the whole xmldb_table object to be specified, so we add it always)</span>
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">     *</span>
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment">     * This is invoked from getNameForObject().</span>
<a name="l466"><span class="linenum"> 466</span></a>  <span class="comment">     * Only some DB have this implemented.</span>
<a name="l467"><span class="linenum"> 467</span></a>  <span class="comment">     *</span>
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">     * @param string $object_name The object's name to check for.</span>
<a name="l469"><span class="linenum"> 469</span></a>  <span class="comment">     * @param string $type The object's type (pk, uk, fk, ck, ix, uix, seq, trg).</span>
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment">     * @param string $table_name The table's name to check in</span>
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment">     * @return bool If such name is currently in use (true) or no (false)</span>
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">     */</span>
<a name="l473"><span class="linenum"> 473</span></a>      public function <a class="function" onClick="logFunction('isNameInUse')" href="../../_functions/isnameinuse.html" onMouseOver="funcPopup(event,'isnameinuse')">isNameInUse</a>(<a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('object_name')" href="../../_variables/object_name.html">$object_name</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>, <a class="var it1490" onMouseOver="hilite(1490)" onMouseOut="lolite()" onClick="logVariable('table_name')" href="../../_variables/table_name.html">$table_name</a>) {
<a name="l474"><span class="linenum"> 474</span></a>          switch(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l475"><span class="linenum"> 475</span></a>              case 'ix':
<a name="l476"><span class="linenum"> 476</span></a>              case 'uix':
<a name="l477"><span class="linenum"> 477</span></a>              case 'seq':
<a name="l478"><span class="linenum"> 478</span></a>                  if (<a class="var it5355" onMouseOver="hilite(5355)" onMouseOut="lolite()" onClick="logVariable('check')" href="../../_variables/check.html">$check</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mdb')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mdb.html">mdb</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;SELECT c.relname
<a name="l479"><span class="linenum"> 479</span></a>                                                              FROM pg_class c
<a name="l480"><span class="linenum"> 480</span></a>                                                              JOIN pg_catalog.pg_namespace as ns ON ns.oid = c.relnamespace
<a name="l481"><span class="linenum"> 481</span></a>                                                             WHERE <a class="function" onClick="logFunction('lower')" href="../../_functions/lower.html" onMouseOver="funcPopup(event,'lower')">lower</a>(c.relname) = ?
<a name="l482"><span class="linenum"> 482</span></a>                                                                   AND (ns.nspname = current_schema() OR ns.oid = pg_my_temp_schema())&quot;, array(<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('object_name')" href="../../_variables/object_name.html">$object_name</a>)))) {
<a name="l483"><span class="linenum"> 483</span></a>                      return true;
<a name="l484"><span class="linenum"> 484</span></a>                  }
<a name="l485"><span class="linenum"> 485</span></a>                  break;
<a name="l486"><span class="linenum"> 486</span></a>              case 'pk':
<a name="l487"><span class="linenum"> 487</span></a>              case 'uk':
<a name="l488"><span class="linenum"> 488</span></a>              case 'fk':
<a name="l489"><span class="linenum"> 489</span></a>              case 'ck':
<a name="l490"><span class="linenum"> 490</span></a>                  if (<a class="var it5355" onMouseOver="hilite(5355)" onMouseOut="lolite()" onClick="logVariable('check')" href="../../_variables/check.html">$check</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mdb')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mdb.html">mdb</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;SELECT c.conname
<a name="l491"><span class="linenum"> 491</span></a>                                                              FROM pg_constraint c
<a name="l492"><span class="linenum"> 492</span></a>                                                              JOIN pg_catalog.pg_namespace as ns ON ns.oid = c.connamespace
<a name="l493"><span class="linenum"> 493</span></a>                                                             WHERE <a class="function" onClick="logFunction('lower')" href="../../_functions/lower.html" onMouseOver="funcPopup(event,'lower')">lower</a>(c.conname) = ?
<a name="l494"><span class="linenum"> 494</span></a>                                                                   AND (ns.nspname = current_schema() OR ns.oid = pg_my_temp_schema())&quot;, array(<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('object_name')" href="../../_variables/object_name.html">$object_name</a>)))) {
<a name="l495"><span class="linenum"> 495</span></a>                      return true;
<a name="l496"><span class="linenum"> 496</span></a>                  }
<a name="l497"><span class="linenum"> 497</span></a>                  break;
<a name="l498"><span class="linenum"> 498</span></a>              case 'trg':
<a name="l499"><span class="linenum"> 499</span></a>                  if (<a class="var it5355" onMouseOver="hilite(5355)" onMouseOut="lolite()" onClick="logVariable('check')" href="../../_variables/check.html">$check</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('mdb')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../_variables/mdb.html">mdb</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;SELECT tgname
<a name="l500"><span class="linenum"> 500</span></a>                                                              FROM pg_trigger
<a name="l501"><span class="linenum"> 501</span></a>                                                             WHERE <a class="function" onClick="logFunction('lower')" href="../../_functions/lower.html" onMouseOver="funcPopup(event,'lower')">lower</a>(tgname) = ?&quot;, array(<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it1489" onMouseOver="hilite(1489)" onMouseOut="lolite()" onClick="logVariable('object_name')" href="../../_variables/object_name.html">$object_name</a>)))) {
<a name="l502"><span class="linenum"> 502</span></a>                      return true;
<a name="l503"><span class="linenum"> 503</span></a>                  }
<a name="l504"><span class="linenum"> 504</span></a>                  break;
<a name="l505"><span class="linenum"> 505</span></a>          }
<a name="l506"><span class="linenum"> 506</span></a>          return false; <span class="comment">//No name in use found</span>
<a name="l507"><span class="linenum"> 507</span></a>      }
<a name="l508"><span class="linenum"> 508</span></a>  
<a name="l509"><span class="linenum"> 509</span></a>      <span class="comment">/**</span>
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">     * Returns an array of reserved words (lowercase) for this DB</span>
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">     * @return array An array of database specific reserved words</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">     */</span>
<a name="l513"><span class="linenum"> 513</span></a>      public static function <a class="function" onClick="logFunction('getReservedWords')" href="../../_functions/getreservedwords.html" onMouseOver="funcPopup(event,'getreservedwords')">getReservedWords</a>() {
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">        // This file contains the reserved words for PostgreSQL databases</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">                // This file contains the reserved words for PostgreSQL databases</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">        // http://www.postgresql.org/docs/current/static/sql-keywords-appendix.html</span>
<a name="l517"><span class="linenum"> 517</span></a>          <a class="var it1493" onMouseOver="hilite(1493)" onMouseOut="lolite()" onClick="logVariable('reserved_words')" href="../../_variables/reserved_words.html">$reserved_words</a> = array (
<a name="l518"><span class="linenum"> 518</span></a>              'all', 'analyse', 'analyze', 'and', 'any', 'array', 'as', 'asc',
<a name="l519"><span class="linenum"> 519</span></a>              'asymmetric', 'authorization', 'between', 'binary', 'both', 'case',
<a name="l520"><span class="linenum"> 520</span></a>              'cast', 'check', 'collate', 'column', 'constraint', 'create', 'cross',
<a name="l521"><span class="linenum"> 521</span></a>              'current_date', 'current_role', 'current_time', 'current_timestamp',
<a name="l522"><span class="linenum"> 522</span></a>              'current_user', 'default', 'deferrable', 'desc', 'distinct', 'do',
<a name="l523"><span class="linenum"> 523</span></a>              'else', 'end', 'except', 'false', 'for', 'foreign', 'freeze', 'from',
<a name="l524"><span class="linenum"> 524</span></a>              'full', 'grant', 'group', 'having', 'ilike', 'in', 'initially', 'inner',
<a name="l525"><span class="linenum"> 525</span></a>              'intersect', 'into', 'is', 'isnull', 'join', 'leading', 'left', 'like',
<a name="l526"><span class="linenum"> 526</span></a>              'limit', 'localtime', 'localtimestamp', 'natural', 'new', 'not',
<a name="l527"><span class="linenum"> 527</span></a>              'notnull', 'null', 'off', 'offset', 'old', 'on', 'only', 'or', 'order',
<a name="l528"><span class="linenum"> 528</span></a>              'outer', 'overlaps', 'placing', 'primary', 'references', 'returning', 'right', 'select',
<a name="l529"><span class="linenum"> 529</span></a>              'session_user', 'similar', 'some', 'symmetric', 'table', 'then', 'to',
<a name="l530"><span class="linenum"> 530</span></a>              'trailing', 'true', 'union', 'unique', 'user', 'using', 'verbose',
<a name="l531"><span class="linenum"> 531</span></a>              'when', 'where', 'with'
<a name="l532"><span class="linenum"> 532</span></a>          );
<a name="l533"><span class="linenum"> 533</span></a>          return <a class="var it1493" onMouseOver="hilite(1493)" onMouseOut="lolite()" onClick="logVariable('reserved_words')" href="../../_variables/reserved_words.html">$reserved_words</a>;
<a name="l534"><span class="linenum"> 534</span></a>      }
<a name="l535"><span class="linenum"> 535</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'add_temptable': ['add_temptable', 'Add one temptable to the store. ', [['lib/dml','mssql_native_moodle_temptables.php',33],['lib/dml','moodle_temptables.php',61],['lib/dml','oci_native_moodle_temptables.php',50]], 4],
'getsequencefromdb': ['getsequencefromdb', 'Given one xmldb_table returns one string with the sequence of the table in the table (fetched from DB) The sequence name for oracle is calculated by looking the corresponding trigger and retrieving the sequence name from it (because sequences are independent elements) ', [['lib/ddl','oracle_sql_generator.php',570],['lib/ddl','sql_generator.php',1218],['lib/ddl','postgres_sql_generator.php',433]], 4],
'getrenametableextrasql': ['getrenametableextrasql', 'Returns the code (array of statements) needed to execute extra statements on table rename. ', [['lib/ddl','oracle_sql_generator.php',316],['lib/ddl','sql_generator.php',1308],['lib/ddl','postgres_sql_generator.php',227],['lib/ddl','mssql_sql_generator.php',296]], 1],
'on': ['on', '', [['lib/requirejs','require.js',506]], 3494],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',2854]], 853],
'addslashes': ['addslashes', 'Adds slashes to string. ', [['lib/ddl','oracle_sql_generator.php',661],['lib/ddl','sqlite_sql_generator.php',453],['lib/ddl','sql_generator.php',1385],['lib/ddl','postgres_sql_generator.php',410],['lib/ddl','mssql_sql_generator.php',637]], 31],
'gethints': ['gethints', '', [['lib/google/src/Google/Service','YouTube.php',4535],['lib/xmldb','xmldb_index.php',125]], 3],
'getcommentsql': ['getcommentsql', 'Returns the code (array of statements) needed to add one comment to the table. ', [['lib/ddl','mysql_sql_generator.php',515],['lib/adodb','adodb-datadict.inc.php',184],['lib/ddl','oracle_sql_generator.php',291],['lib/ddl','sqlite_sql_generator.php',394],['lib/adodb/datadict','datadict-oci8.inc.php',284],['lib/ddl','postgres_sql_generator.php',213],['lib/ddl','mssql_sql_generator.php',627]], 2],
'getcreatetemptablesql': ['getcreatetemptablesql', 'Given one correct xmldb_table, returns the SQL statements to create temporary table (inside one array). ', [['lib/ddl','mysql_sql_generator.php',324],['lib/ddl','oracle_sql_generator.php',134],['lib/ddl','postgres_sql_generator.php',92],['lib/ddl','mssql_sql_generator.php',143]], 2],
'getdecimals': ['getdecimals', 'Get the decimals ', [['lib/xmldb','xmldb_field.php',157]], 13],
'index': ['index', 'INDEX ', [['lib/phpexcel/PHPExcel/Calculation','LookupRef.php',590]], 62],
'gettablename': ['gettablename', 'Given one xmldb_table, returns it\'s correct name, depending of all the parametrization Overridden to allow change of names in temp tables ', [['lib/ddl','oracle_sql_generator.php',110],['lib/ddl','sql_generator.php',255],['lib/ddl','mssql_sql_generator.php',119]], 36],
'getdroptablesql': ['getdroptablesql', 'Given one correct xmldb_table, returns the SQL statements to drop it (inside one array). ', [['lib/ddl','mysql_sql_generator.php',355],['lib/ddl','oracle_sql_generator.php',148],['lib/ddl','sql_generator.php',653],['lib/ddl','postgres_sql_generator.php',106],['lib/ddl','mssql_sql_generator.php',156]], 5],
'getnotnull': ['getnotnull', 'Get the notnull ', [['lib/xmldb','xmldb_field.php',165]], 16],
'gettypesql': ['gettypesql', 'Given one XMLDB Type, length and decimals, returns the DB proper SQL type. ', [['lib/ddl','mysql_sql_generator.php',371],['lib/ddl','oracle_sql_generator.php',164],['lib/ddl','sqlite_sql_generator.php',135],['lib/ddl','postgres_sql_generator.php',152],['lib/ddl','mssql_sql_generator.php',171]], 2],
'getcreateindexsql': ['getcreateindexsql', 'Given one correct xmldb_index, returns the SQL statements needed to create it (in array). ', [['lib/ddl','sql_generator.php',410],['lib/ddl','postgres_sql_generator.php',121]], 6],
'getalterfieldsql': ['getalterfieldsql', 'Given one xmldb_table and one xmldb_field, return the SQL statements needed to alter the field in the table. ', [['lib/ddl','oracle_sql_generator.php',351],['lib/ddl','sqlite_sql_generator.php',278],['lib/ddl','sql_generator.php',731],['lib/ddl','postgres_sql_generator.php',251],['lib/ddl','mssql_sql_generator.php',310]], 13],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1035],['lib/dml','moodle_database.php',1457]], 140],
'is_temptable': ['is_temptable', 'Returns if one table, based in the information present in the store, is a temp table ', [['lib/dml','moodle_temptables.php',96]], 13],
'get_field_sql': ['get_field_sql', 'Get a single field value (first field) using a SQL statement. ', [['lib/dml','moodle_database.php',1539]], 135],
'getdefaultclause': ['getdefaultclause', 'Given one xmldb_field, returns the correct "default clause" for the current configuration. ', [['lib/ddl','sql_generator.php',610]], 6],
'getcomment': ['getcomment', 'This function returns the comment of one xmldb_object ', [['lib/xmldb','xmldb_object.php',86],['lib/pear/HTML','Common.php',404],['lib/google/src/Google/Service','YouTube.php',3663],['lib/phpexcel/PHPExcel','Worksheet.php',2221],['lib/google/src/Google/Service','Calendar.php',2926]], 24],
'getresetsequencesql': ['getresetsequencesql', 'Reset a sequence to the id field of a table. ', [['lib/ddl','mysql_sql_generator.php',94],['lib/ddl','oracle_sql_generator.php',80],['lib/ddl','sqlite_sql_generator.php',80],['lib/ddl','postgres_sql_generator.php',72],['lib/ddl','mssql_sql_generator.php',89]], 2],
'getdefault': ['getdefault', 'Get the default ', [['lib/xmldb','xmldb_field.php',190],['lib/google/src/Google/Service','YouTube.php',7347],['lib/google/src/Google/Service','YouTube.php',8787]], 25],
'delete_temptable': ['delete_temptable', 'Delete one temptable from the store ', [['lib/dml','moodle_temptables.php',77]], 4],
'getreservedwords': ['getreservedwords', 'Returns an array of reserved words (lowercase) for this DB ', [['lib/ddl','mysql_sql_generator.php',566],['lib/ddl','oracle_sql_generator.php',672],['lib/ddl','sqlite_sql_generator.php',422],['lib/ddl','sql_generator.php',1353],['lib/ddl','postgres_sql_generator.php',509],['lib/ddl','mssql_sql_generator.php',648]], 2],
'getcreatetablesql': ['getcreatetablesql', 'Given one correct xmldb_table, returns the SQL statements to create it (inside one array). ', [['lib/ddl','mysql_sql_generator.php',201],['lib/ddl','sql_generator.php',277]], 9],
'getname': ['getname', '', [['lib/google/src/Google/Service','Fusiontables.php',1439],['lib/google/src/Google/Service','Fusiontables.php',2031],['lib/google/src/Google/Service','Fusiontables.php',2204],['lib/google/src/Google/Service','Fusiontables.php',2419],['lib/pear/HTML/QuickForm','input.php',89],['lib/form','filemanager.php',109],['lib/xmldb','xmldb_object.php',118],['lib/zend/Zend/Http','Cookie.php',133],['lib/google/src/Google/Service','QPXExpress.php',127],['lib/google/src/Google/Service','QPXExpress.php',171],['lib/google/src/Google/Service','QPXExpress.php',260],['lib/google/src/Google/Service','QPXExpress.php',304],['lib/google/src/Google/Service','QPXExpress.php',1223],['lib/google/src/Google/Service','Blogger.php',1753],['lib/google/src/Google/Service','Blogger.php',2957],['lib/google/src/Google/Service','Doubleclicksearch.php',792],['lib/google/src/Google/Service','Doubleclicksearch.php',818],['lib/google/src/Google/Service','AdExchangeBuyer.php',1339],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',102],['lib/google/src/Google/Service','Manager.php',401],['lib/google/src/Google/Service','Manager.php',637],['lib/google/src/Google/Service','Manager.php',1296],['lib/google/src/Google/Service','Manager.php',1817],['lib/pear/HTML/QuickForm','link.php',89],['lib/google/src/Google/Service','Reports.php',620],['lib/google/src/Google/Service','Reports.php',691],['lib/google/src/Google/Service','Reports.php',1000],['lib/google/src/Google/Service','Customsearch.php',1076],['lib/google/src/Google/Service','Gmail.php',1376],['lib/google/src/Google/Service','Gmail.php',1768],['lib/google/src/Google/Service','Plus.php',912],['lib/google/src/Google/Service','Plus.php',2321],['lib/google/src/Google/Service','Plus.php',2877],['lib/google/src/Google/Service','Plus.php',3268],['lib/google/src/Google/Service','Spectrum.php',245],['lib/zend/Zend/Service/Simpy','Watchlist.php',132],['lib/zend/Zend/Server/Method','Parameter.php',145],['lib/form','editor.php',128],['lib/google/src/Google/Service','Genomics.php',1708],['lib/google/src/Google/Service','Genomics.php',1826],['lib/google/src/Google/Service','Genomics.php',2991],['lib/google/src/Google/Service','Genomics.php',3108],['lib/google/src/Google/Service','Genomics.php',3172],['lib/google/src/Google/Service','Genomics.php',3240],['lib/google/src/Google/Service','Genomics.php',3392],['lib/google/src/Google/Service','Genomics.php',3564],['lib/form','selectgroups.php',114],['lib/zend/Zend/Gdata/Gapps/Extension','EmailList.php',108],['lib/zend/Zend/Gdata/Gapps','UserEntry.php',204],['lib/google/src/Google/Service','Dfareporting.php',1086],['lib/google/src/Google/Service','Dfareporting.php',1404],['lib/google/src/Google/Service','Dfareporting.php',1704],['lib/google/src/Google/Service','Dfareporting.php',2569],['lib/google/src/Google/Service','PlusDomains.php',1180],['lib/google/src/Google/Service','PlusDomains.php',3073],['lib/google/src/Google/Service','PlusDomains.php',3438],['lib/zend/Zend/Server/Method','Definition.php',106],['lib/google/src/Google/Service','Drive.php',2622],['lib/google/src/Google/Service','Drive.php',3011],['lib/google/src/Google/Service','Drive.php',5034],['lib/zend/Zend/Gdata/Gapps/Extension','Nickname.php',107],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',161],['lib/google/src/Google/Service','AdExchangeSeller.php',860],['lib/google/src/Google/Service','AdExchangeSeller.php',1132],['lib/google/src/Google/Service','AdExchangeSeller.php',1466],['lib/google/src/Google/Service','AdExchangeSeller.php',1581],['lib/google/src/Google/Service','Bigquery.php',2992],['lib/pear/HTML/QuickForm','select.php',151],['lib/google/src/Google/Service','Freebase.php',304],['lib/google/src/Google/Service','Freebase.php',338],['lib/zend/Zend/Gdata/Gbase/Extension','BaseAttribute.php',68],['lib/google/src/Google/Service','Groupssettings.php',314],['lib/google/src/Google/Service','YouTube.php',6163],['lib/google/src/Google/Service','YouTube.php',6289],['lib/google/src/Google/Service','Coordinate.php',807],['lib/google/src/Google/Service','Autoscaler.php',574],['lib/google/src/Google/Service','Autoscaler.php',928],['lib/google/src/Google/Service','Autoscaler.php',1273],['lib/google/src/Google/Service','Autoscaler.php',1396],['lib/google/src/Google/Service','Audit.php',334],['lib/google/src/Google/Service','Audit.php',360],['lib/pear/HTML/QuickForm','static.php',78],['lib/google/src/Google/Service','Datastore.php',579],['lib/google/src/Google/Service','Datastore.php',651],['lib/google/src/Google/Service','Datastore.php',668],['lib/google/src/Google/Service','Datastore.php',1096],['lib/google/src/Google/Service','YouTubeAnalytics.php',344],['lib/google/src/Google/Service','YouTubeAnalytics.php',604],['lib/pear/HTML/QuickForm','textarea.php',84],['lib/google/src/Google/Service','ShoppingContent.php',1155],['lib/google/src/Google/Service','ShoppingContent.php',1862],['lib/google/src/Google/Service','ShoppingContent.php',2835],['lib/google/src/Google/Service','ShoppingContent.php',3459],['lib/google/src/Google/Service','ShoppingContent.php',3511],['lib/google/src/Google/Service','Appsactivity.php',388],['lib/google/src/Google/Service','Appsactivity.php',535],['lib/google/src/Google/Service','Appsactivity.php',554],['lib/phpexcel/PHPExcel','NamedRange.php',99],['lib/google/src/Google/Service','SQLAdmin.php',1299],['lib/google/src/Google/Service','SQLAdmin.php',1572],['lib/google/src/Google/Service','Fitness.php',653],['lib/google/src/Google/Service','Fitness.php',817],['lib/google/src/Google/Service','Fitness.php',853],['lib/google/src/Google/Service','Fitness.php',879],['lib/google/src/Google/Service','Fitness.php',1117],['lib/google/src/Google/Service','TagManager.php',1854],['lib/google/src/Google/Service','TagManager.php',1976],['lib/google/src/Google/Service','TagManager.php',2135],['lib/google/src/Google/Service','TagManager.php',2233],['lib/google/src/Google/Service','TagManager.php',2292],['lib/google/src/Google/Service','TagManager.php',2594],['lib/google/src/Google/Service','TagManager.php',2774],['lib/google/src/Google/Service','TagManager.php',2889],['lib/google/src/Google/Service','TagManager.php',3080],['lib/google/src/Google/Service','TagManager.php',3254],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',3308],['lib/google/src/Google/Service','Directory.php',3650],['lib/google/src/Google/Service','Directory.php',4021],['lib/google/src/Google/Service','Directory.php',4618],['lib/google/src/Google/Service','Directory.php',5099],['lib/zend/Zend/Gdata/YouTube/Extension','State.php',116],['lib/pear/HTML/QuickForm','element.php',143],['lib/zend/Zend/Service/Simpy','WatchlistFilter.php',62],['lib/google/src/Google/Service','CivicInfo.php',354],['lib/google/src/Google/Service','CivicInfo.php',468],['lib/google/src/Google/Service','CivicInfo.php',542],['lib/google/src/Google/Service','CivicInfo.php',821],['lib/google/src/Google/Service','CivicInfo.php',864],['lib/google/src/Google/Service','CivicInfo.php',901],['lib/google/src/Google/Service','CivicInfo.php',972],['lib/google/src/Google/Service','CivicInfo.php',1008],['lib/google/src/Google/Service','CivicInfo.php',1056],['lib/google/src/Google/Service','CivicInfo.php',1131],['lib/google/src/Google/Service','CivicInfo.php',1215],['lib/google/src/Google/Service','CivicInfo.php',1449],['lib/google/src/Google/Service','Container.php',526],['lib/google/src/Google/Service','Container.php',758],['lib/phpexcel/PHPExcel/Style','Font.php',226],['lib/google/src/Google/Service','AdSenseHost.php',1253],['lib/google/src/Google/Service','AdSenseHost.php',1623],['lib/google/src/Google/Service','AdSenseHost.php',1926],['lib/google/src/Google/Service','AdSenseHost.php',2072],['lib/google/src/Google/Service','Games.php',2357],['lib/google/src/Google/Service','Games.php',2924],['lib/google/src/Google/Service','Games.php',3555],['lib/google/src/Google/Service','Games.php',3631],['lib/google/src/Google/Service','Games.php',3867],['lib/google/src/Google/Service','Games.php',4512],['lib/google/src/Google/Service','Games.php',5430],['lib/google/src/Google/Service','MapsEngine.php',3420],['lib/google/src/Google/Service','MapsEngine.php',3610],['lib/google/src/Google/Service','MapsEngine.php',4066],['lib/google/src/Google/Service','MapsEngine.php',4096],['lib/google/src/Google/Service','MapsEngine.php',4347],['lib/google/src/Google/Service','MapsEngine.php',4639],['lib/google/src/Google/Service','MapsEngine.php',4754],['lib/google/src/Google/Service','MapsEngine.php',4819],['lib/google/src/Google/Service','MapsEngine.php',4876],['lib/google/src/Google/Service','MapsEngine.php',5196],['lib/google/src/Google/Service','MapsEngine.php',5264],['lib/google/src/Google/Service','MapsEngine.php',5355],['lib/google/src/Google/Service','MapsEngine.php',5533],['lib/google/src/Google/Service','MapsEngine.php',5695],['lib/google/src/Google/Service','MapsEngine.php',5829],['lib/google/src/Google/Service','MapsEngine.php',6216],['lib/google/src/Google/Service','MapsEngine.php',6290],['lib/horde/framework/Horde/Mime','Part.php',374],['lib/google/src/Google/Service','Compute.php',5491],['lib/google/src/Google/Service','Compute.php',5574],['lib/google/src/Google/Service','Compute.php',6122],['lib/google/src/Google/Service','Compute.php',6371],['lib/google/src/Google/Service','Compute.php',6639],['lib/google/src/Google/Service','Compute.php',7029],['lib/google/src/Google/Service','Compute.php',7229],['lib/google/src/Google/Service','Compute.php',7648],['lib/google/src/Google/Service','Compute.php',7841],['lib/google/src/Google/Service','Compute.php',8083],['lib/google/src/Google/Service','Compute.php',8429],['lib/google/src/Google/Service','Compute.php',8628],['lib/google/src/Google/Service','Compute.php',8749],['lib/google/src/Google/Service','Compute.php',9131],['lib/google/src/Google/Service','Compute.php',9169],['lib/google/src/Google/Service','Compute.php',9353],['lib/google/src/Google/Service','Compute.php',9809],['lib/google/src/Google/Service','Compute.php',9913],['lib/google/src/Google/Service','Compute.php',10041],['lib/google/src/Google/Service','Compute.php',10218],['lib/google/src/Google/Service','Compute.php',10574],['lib/google/src/Google/Service','Compute.php',10759],['lib/google/src/Google/Service','Compute.php',10895],['lib/google/src/Google/Service','Compute.php',11217],['lib/google/src/Google/Service','Compute.php',11698],['lib/google/src/Google/Service','Compute.php',12023],['lib/google/src/Google/Service','Compute.php',12146],['lib/google/src/Google/Service','CloudMonitoring.php',589],['lib/google/src/Google/Service','Analytics.php',3601],['lib/google/src/Google/Service','Analytics.php',3713],['lib/google/src/Google/Service','Analytics.php',3833],['lib/google/src/Google/Service','Analytics.php',4225],['lib/google/src/Google/Service','Analytics.php',4788],['lib/google/src/Google/Service','Analytics.php',5225],['lib/google/src/Google/Service','Analytics.php',5408],['lib/google/src/Google/Service','Analytics.php',5624],['lib/google/src/Google/Service','Analytics.php',5919],['lib/google/src/Google/Service','Analytics.php',6254],['lib/google/src/Google/Service','Analytics.php',6627],['lib/google/src/Google/Service','Analytics.php',6888],['lib/google/src/Google/Service','Analytics.php',7221],['lib/google/src/Google/Service','Analytics.php',7584],['lib/google/src/Google/Service','Analytics.php',7959],['lib/google/src/Google/Service','Analytics.php',8003],['lib/google/src/Google/Service','Analytics.php',8221],['lib/google/src/Google/Service','Analytics.php',8408],['lib/google/src/Google/Service','Analytics.php',9063],['lib/google/src/Google/Service','Analytics.php',9120],['lib/google/src/Google/Service','Analytics.php',9325],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceDetail.php',125],['lib/google/src/Google/Service','GamesManagement.php',1219],['lib/google/src/Google/Service','Oauth2.php',370],['lib/google/src/Google/Service','Storage.php',1900],['lib/google/src/Google/Service','Storage.php',2571],['lib/google/src/Google/Service','Storage.php',3000],['mod/wiki/editors','wikifiletable.php',66],['lib/google/src/Google/Service','AdSense.php',2151],['lib/google/src/Google/Service','AdSense.php',2566],['lib/google/src/Google/Service','AdSense.php',2905],['lib/google/src/Google/Service','AdSense.php',3049],['lib/google/src/Google/Service','AdSense.php',3373],['lib/google/src/Google/Service','AdSense.php',3454],['lib/google/src/Google/Service','Pubsub.php',943],['lib/google/src/Google/Service','Pubsub.php',976],['lib/zend/Zend/Gdata/App/Extension','Person.php',112],['lib/alfresco/Service','ChildAssociation.php',55],['lib/zend/Zend/Service/Technorati','Weblog.php',212],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantStatus.php',60],['lib/google/src/Google/Service','Translate.php',319],['lib/pear/HTML/QuickForm','group.php',129],['lib/google/src/Google/Service','Dns.php',651],['lib/google/src/Google/Service','Dns.php',842],['lib/pear/HTML/QuickForm','xbutton.php',82],['lib/phpexcel/PHPExcel','Chart.php',165],['lib/google/src/Google/Service','Replicapool.php',711],['lib/google/src/Google/Service','Replicapool.php',1001],['lib/google/src/Google/Service','Resourceviews.php',740],['lib/google/src/Google/Service','Resourceviews.php',1095],['lib/google/src/Google/Service','Resourceviews.php',1145],['lib/zend/Zend/Gdata/Extension','ExtendedProperty.php',84]], 882],
'lower': ['lower', 'Makes a string lowercase. ', [['lib/horde/framework/Horde','String.php',167]], 83],
'create': ['create', 'Creates a new 2048 bit RSA key pair and returns a unique ID that can be used to reference this key pair when launching new instances. ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',39],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',271],['repository/filesystem','lib.php',283],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',39],['lib/google/src/Google/Service','Gmail.php',670],['lib/google/src/Google/Service','Gmail.php',827],['course','lib.php',2874],['lib/classes/event','base.php',139],['lib/google/src/Google/Service','Genomics.php',618],['lib/google/src/Google/Service','Genomics.php',717],['lib/google/src/Google/Service','Genomics.php',850],['lib/google/src/Google/Service','Genomics.php',1313],['lib','modinfolib.php',1747],['calendar','lib.php',2651],['lib/zend/Zend/Service/Amazon','Sqs.php',82],['lib','weblib.php',3048],['mod/lesson','locallib.php',1013],['mod/lesson','locallib.php',2166],['mod/lesson','locallib.php',3203],['lib/google/src/Google/Service','Fitness.php',340],['lib/google/src/Google/Service','TagManager.php',1034],['lib/google/src/Google/Service','TagManager.php',1124],['lib/google/src/Google/Service','TagManager.php',1217],['lib/google/src/Google/Service','TagManager.php',1310],['lib/google/src/Google/Service','TagManager.php',1403],['lib/google/src/Google/Service','TagManager.php',1497],['lib/google/src/Google/Service','TagManager.php',1591],['lib/google/src/Google/Service','TagManager.php',1742],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Container.php',314],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['repository','lib.php',206],['repository','lib.php',1960],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',555],['lib/google/src/Google/Service','Games.php',1648],['lib/google/src/Google/Service','Games.php',2012],['lib/google/src/Google/Service','MapsEngine.php',1676],['lib/google/src/Google/Service','MapsEngine.php',1976],['lib/google/src/Google/Service','MapsEngine.php',2252],['lib/google/src/Google/Service','MapsEngine.php',2329],['lib/google/src/Google/Service','MapsEngine.php',2897],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Pubsub.php',219],['lib/google/src/Google/Service','Pubsub.php',364],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/simplepie/library/SimplePie','Registry.php',153],['lib','navigationlib.php',266],['lib/google/src/Google/Service','Dns.php',282],['lib/google/src/Google/Service','Dns.php',355],['lib','coursecatlib.php',328],['mod/quiz/classes','structure.php',65]], 3074],
'getfieldsql': ['getfieldsql', 'Given one correct xmldb_field, returns the complete SQL line to create it. ', [['lib/ddl','sql_generator.php',439]], 5],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'getencquoted': ['getencquoted', 'Given any string (or one array), enclose it by the proper quotes if it\'s a reserved word ', [['lib/ddl','sql_generator.php',1113]], 42],
'getlength': ['getlength', '', [['lib/zend/Zend/Gdata/App/Extension','Link.php',204],['lib/zend/Zend/Service/Simpy','LinkSet.php',74],['lib/xmldb','xmldb_field.php',149],['lib/google/src/Google/Service','Genomics.php',3224],['lib/zend/Zend/Service/Simpy','WatchlistFilterSet.php',68],['lib/zend/Zend/Validate/Barcode','AdapterAbstract.php',149],['lib/zend/Zend/Service/Simpy','TagSet.php',74],['lib/zend/Zend/Service/Simpy','WatchlistSet.php',73],['lib/zend/Zend/Service/Simpy','NoteSet.php',74]], 55],
'getfields': ['getfields', 'Get the key fields ', [['lib/xmldb','xmldb_key.php',115],['lib/google/src/Google/Service','Bigquery.php',2976],['lib/google/src/Google/Service','Bigquery.php',3182],['lib/google/src/Google/Service','Directory.php',4105],['lib/xmldb','xmldb_table.php',240],['lib/xmldb','xmldb_index.php',109]], 64],
'get_columns': ['get_columns', 'Returns detailed information about columns in table. This information is cached internally. ', [['lib/dml','pgsql_native_moodle_database.php',385],['lib/dml','oci_native_moodle_database.php',464],['lib/dml','sqlsrv_native_moodle_database.php',462],['lib/dml','sqlite3_pdo_moodle_database.php',195],['lib/dml','mssql_native_moodle_database.php',392],['lib','csvlib.class.php',190],['lib/dml','mysqli_native_moodle_database.php',572],['lib/dml/tests','dml_test.php',5417]], 108],
'getcreatedefaultsql': ['getcreatedefaultsql', 'Given one xmldb_table and one xmldb_field, return the SQL statements needed to add its default (usually invoked from getModifyDefaultSQL() ', [['lib/ddl','mysql_sql_generator.php',457],['lib/ddl','oracle_sql_generator.php',538],['lib/ddl','sqlite_sql_generator.php',301],['lib/ddl','postgres_sql_generator.php',378],['lib/ddl','mssql_sql_generator.php',478]], 5],
'isnameinuse': ['isnameinuse', 'Given one object name and it\'s type (pk, uk, fk, ck, ix, uix, seq, trg). ', [['lib/ddl','mysql_sql_generator.php',531],['lib/ddl','oracle_sql_generator.php',622],['lib/ddl','sqlite_sql_generator.php',404],['lib/ddl','sql_generator.php',1229],['lib/ddl','postgres_sql_generator.php',460],['lib/ddl','mssql_sql_generator.php',588]], 1],
'getdropdefaultsql': ['getdropdefaultsql', 'Given one xmldb_table and one xmldb_field, return the SQL statements needed to drop its default (usually invoked from getModifyDefaultSQL() ', [['lib/ddl','mysql_sql_generator.php',497],['lib/ddl','oracle_sql_generator.php',552],['lib/ddl','sqlite_sql_generator.php',378],['lib/ddl','postgres_sql_generator.php',392],['lib/ddl','mssql_sql_generator.php',506]], 5],
'addslashes': ['addslashes', '', [], 31],
'max': ['max', '', [], 1096],
'substr': ['substr', '', [], 2883],
'strtolower': ['strtolower', '', [], 922],
'gettype': ['gettype', '', [], 288],
'count': ['count', '', [], 3984],
'defined': ['defined', '', [], 4098],
'in_array': ['in_array', '', [], 1173],
'str_replace': ['str_replace', '', [], 1667],
'reset': ['reset', '', [], 1070],
'preg_replace': ['preg_replace', '', [], 903]};
CLASS_DATA={
'postgres_sql_generator': ['postgres_sql_generator', 'This class generate SQL code to be used against PostgreSQL It extends XMLDBgenerator so everything can be overridden as needed to generate correct SQL. ', [['lib/ddl','postgres_sql_generator.php',30]], 0],
'xmldb_table': ['xmldb_table', '', [['lib/xmldb','xmldb_table.php',29]], 397],
'xmldb_field': ['xmldb_field', '', [['lib/xmldb','xmldb_field.php',29]], 306]};
CONST_DATA={
'PRECISION': ['PRECISION', '', [['lib/phpexcel/PHPExcel/Calculation','Functions.php',49]], 20],
'XMLDB_TYPE_NUMBER': ['XMLDB_TYPE_NUMBER', '', [['lib/xmldb','xmldb_constants.php',46]], 89],
'XMLDB_TYPE_INTEGER': ['XMLDB_TYPE_INTEGER', '', [['lib/xmldb','xmldb_constants.php',44]], 652],
'XMLDB_TYPE_DATETIME': ['XMLDB_TYPE_DATETIME', '', [['lib/xmldb','xmldb_constants.php',56]], 20],
'XMLDB_TYPE_BINARY': ['XMLDB_TYPE_BINARY', '', [['lib/xmldb','xmldb_constants.php',54]], 40],
'XMLDB_TYPE_FLOAT': ['XMLDB_TYPE_FLOAT', '', [['lib/xmldb','xmldb_constants.php',48]], 48],
'XMLDB_TYPE_CHAR': ['XMLDB_TYPE_CHAR', '', [['lib/xmldb','xmldb_constants.php',50]], 231],
'XMLDB_TYPE_TEXT': ['XMLDB_TYPE_TEXT', '', [['lib/xmldb','xmldb_constants.php',52]], 121],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
