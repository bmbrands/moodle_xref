<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/classes/text.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/classes';
filename='text.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/classes/</a> -> <a href="text.php.html">text.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="text.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="text.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Defines string apis</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  (C) 2001-3001 Eloy Lafuente (stronk7) {@link http://contiento.com}</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">/**</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * defines string api's for manipulating strings</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> *</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * This class is used to manipulate strings under Moodle 1.6 an later. As</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * utf-8 text become mandatory a pool of safe functions under this encoding</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * become necessary. The name of the methods is exactly the</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * same than their PHP originals.</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> *</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * A big part of this class acts as a wrapper over the Typo3 charset library,</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * really a cool group of utilities to handle texts and encoding conversion.</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> *</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * Take a look to its own copyright and license details.</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> *</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> * IMPORTANT Note: Typo3 libraries always expect lowercase charsets to use 100%</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment"> * its capabilities so, don't forget to make the conversion</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment"> * from every wrapper function!</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment"> *</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> * @package   core</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> * @category  string</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> */</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a> {
<a name="l50"><span class="linenum">  50</span></a>  
<a name="l51"><span class="linenum">  51</span></a>      <span class="comment">/**</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     * Return t3lib helper class, which is used for conversion between charsets</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     *</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     * @param bool $reset</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     * @return t3lib_cs</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     */</span>
<a name="l57"><span class="linenum">  57</span></a>      protected static function <a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>(<a class="var it2084" onMouseOver="hilite(2084)" onMouseOut="lolite()" onClick="logVariable('reset')" href="../../_variables/reset.html">$reset</a> = false) {
<a name="l58"><span class="linenum">  58</span></a>          static <a class="var it37282" onMouseOver="hilite(37282)" onMouseOut="lolite()" onClick="logVariable('typo3cs')" href="../../_variables/typo3cs.html">$typo3cs</a> = null;
<a name="l59"><span class="linenum">  59</span></a>  
<a name="l60"><span class="linenum">  60</span></a>          if (<a class="var it2084" onMouseOver="hilite(2084)" onMouseOut="lolite()" onClick="logVariable('reset')" href="../../_variables/reset.html">$reset</a>) {
<a name="l61"><span class="linenum">  61</span></a>              <a class="var it37282" onMouseOver="hilite(37282)" onMouseOut="lolite()" onClick="logVariable('typo3cs')" href="../../_variables/typo3cs.html">$typo3cs</a> = null;
<a name="l62"><span class="linenum">  62</span></a>              return null;
<a name="l63"><span class="linenum">  63</span></a>          }
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>          if (isset(<a class="var it37282" onMouseOver="hilite(37282)" onMouseOut="lolite()" onClick="logVariable('typo3cs')" href="../../_variables/typo3cs.html">$typo3cs</a>)) {
<a name="l66"><span class="linenum">  66</span></a>              return <a class="var it37282" onMouseOver="hilite(37282)" onMouseOut="lolite()" onClick="logVariable('typo3cs')" href="../../_variables/typo3cs.html">$typo3cs</a>;
<a name="l67"><span class="linenum">  67</span></a>          }
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment">        // Required files</span>
<a name="l72"><span class="linenum">  72</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/typo3/class.t3lib_cs.php');
<a name="l73"><span class="linenum">  73</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/typo3/class.t3lib_div.php');
<a name="l74"><span class="linenum">  74</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/typo3/interface.t3lib_singleton.php');
<a name="l75"><span class="linenum">  75</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/typo3/class.t3lib_l10n_locales.php');
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">        // do not use mbstring or recode because it may return invalid results in some corner cases</span>
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it2008" onMouseOver="hilite(2008)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../_variables/GLOBALS.html">$GLOBALS</a>['TYPO3_CONF_VARS']['SYS']['t3lib_cs_convMethod'] = 'iconv';
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it2008" onMouseOver="hilite(2008)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../_variables/GLOBALS.html">$GLOBALS</a>['TYPO3_CONF_VARS']['SYS']['t3lib_cs_utils'] = 'iconv';
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">        // Tell Typo3 we are curl enabled always (mandatory since 2.0)</span>
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it2008" onMouseOver="hilite(2008)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../_variables/GLOBALS.html">$GLOBALS</a>['TYPO3_CONF_VARS']['SYS']['curlUse'] = '1';
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">        // And this directory must exist to allow Typo to cache conversion</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">        // tables when using internal functions</span>
<a name="l86"><span class="linenum">  86</span></a>          <a class="function" onClick="logFunction('make_temp_directory')" href="../../_functions/make_temp_directory.html" onMouseOver="funcPopup(event,'make_temp_directory')">make_temp_directory</a>('typo3temp/cs');
<a name="l87"><span class="linenum">  87</span></a>  
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">        // Make sure typo is using our dir permissions</span>
<a name="l89"><span class="linenum">  89</span></a>          <a class="var it2008" onMouseOver="hilite(2008)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../_variables/GLOBALS.html">$GLOBALS</a>['TYPO3_CONF_VARS']['BE']['folderCreateMask'] = <a class="phpfunction" onClick="logFunction('decoct')" href="../../_functions/decoct.html" onMouseOver="phpfuncPopup(event,'decoct')">decoct</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('directorypermissions')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/directorypermissions.html">directorypermissions</a>);
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">        // Default mask for Typo</span>
<a name="l92"><span class="linenum">  92</span></a>          <a class="var it2008" onMouseOver="hilite(2008)" onMouseOut="lolite()" onClick="logVariable('GLOBALS')" href="../../_variables/GLOBALS.html">$GLOBALS</a>['TYPO3_CONF_VARS']['BE']['fileCreateMask'] = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('directorypermissions')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/directorypermissions.html">directorypermissions</a>;
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">        // This full path constants must be defined too, transforming backslashes</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">        // to forward slashed because Typo3 requires it.</span>
<a name="l96"><span class="linenum">  96</span></a>          if (!<a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('PATH_t3lib')) {
<a name="l97"><span class="linenum">  97</span></a>              <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('PATH_t3lib', <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('\\','/',<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/typo3/'));
<a name="l98"><span class="linenum">  98</span></a>              <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('PATH_typo3', <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('\\','/',<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/typo3/'));
<a name="l99"><span class="linenum">  99</span></a>              <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('PATH_site', <a class="phpfunction" onClick="logFunction('str_replace')" href="../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('\\','/',<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('tempdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/tempdir.html">tempdir</a>.'/'));
<a name="l100"><span class="linenum"> 100</span></a>              <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('TYPO3_OS')" href="../../_constants/TYPO3_OS.html" onMouseOver="constPopup(event,'TYPO3_OS')">TYPO3_OS</a>', <a class="phpfunction" onClick="logFunction('stristr')" href="../../_functions/stristr.html" onMouseOver="phpfuncPopup(event,'stristr')">stristr</a>(PHP_OS,'win')&amp;&amp;!<a class="phpfunction" onClick="logFunction('stristr')" href="../../_functions/stristr.html" onMouseOver="phpfuncPopup(event,'stristr')">stristr</a>(PHP_OS,'darwin')?'WIN':'');
<a name="l101"><span class="linenum"> 101</span></a>          }
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>          <a class="var it37282" onMouseOver="hilite(37282)" onMouseOut="lolite()" onClick="logVariable('typo3cs')" href="../../_variables/typo3cs.html">$typo3cs</a> = <span class="keyword">new </span><a class="class" onClick="logClass('t3lib_cs')" href="../../_classes/t3lib_cs.html" onMouseOver="classPopup(event,'t3lib_cs')">t3lib_cs</a>();
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>          return <a class="var it37282" onMouseOver="hilite(37282)" onMouseOut="lolite()" onClick="logVariable('typo3cs')" href="../../_variables/typo3cs.html">$typo3cs</a>;
<a name="l106"><span class="linenum"> 106</span></a>      }
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>      <span class="comment">/**</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     * Reset internal textlib caches.</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">     * @static</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     */</span>
<a name="l112"><span class="linenum"> 112</span></a>      public static function <a class="function" onClick="logFunction('reset_caches')" href="../../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>() {
<a name="l113"><span class="linenum"> 113</span></a>          self::<a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>(true);
<a name="l114"><span class="linenum"> 114</span></a>      }
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>      <span class="comment">/**</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     * Standardise charset name</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">     *</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">     * Please note it does not mean the returned charset is actually supported.</span>
<a name="l120"><span class="linenum"> 120</span></a>  <span class="comment">     *</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     * @static</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     * @param string $charset raw charset name</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * @return string normalised lowercase charset name</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     */</span>
<a name="l125"><span class="linenum"> 125</span></a>      public static function <a class="function" onClick="logFunction('parse_charset')" href="../../_functions/parse_charset.html" onMouseOver="funcPopup(event,'parse_charset')">parse_charset</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>) {
<a name="l126"><span class="linenum"> 126</span></a>          <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> = <a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>);
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">        // shortcuts so that we do not have to load typo3 on every page</span>
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>          if (<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> === 'utf8' or <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> === 'utf-8') {
<a name="l131"><span class="linenum"> 131</span></a>              return 'utf-8';
<a name="l132"><span class="linenum"> 132</span></a>          }
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>          if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/^(cp|win|windows)-?(12[0-9]{2})$/', <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>)) {
<a name="l135"><span class="linenum"> 135</span></a>              return 'windows-'.<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[2];
<a name="l136"><span class="linenum"> 136</span></a>          }
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>          if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/^iso-8859-[0-9]+$/', <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>)) {
<a name="l139"><span class="linenum"> 139</span></a>              return <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>;
<a name="l140"><span class="linenum"> 140</span></a>          }
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>          if (<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> === 'euc-jp') {
<a name="l143"><span class="linenum"> 143</span></a>              return 'euc-jp';
<a name="l144"><span class="linenum"> 144</span></a>          }
<a name="l145"><span class="linenum"> 145</span></a>          if (<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> === 'iso-2022-jp') {
<a name="l146"><span class="linenum"> 146</span></a>              return 'iso-2022-jp';
<a name="l147"><span class="linenum"> 147</span></a>          }
<a name="l148"><span class="linenum"> 148</span></a>          if (<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> === 'shift-jis' or <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> === 'shift_jis') {
<a name="l149"><span class="linenum"> 149</span></a>              return 'shift_jis';
<a name="l150"><span class="linenum"> 150</span></a>          }
<a name="l151"><span class="linenum"> 151</span></a>          if (<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> === 'gb2312') {
<a name="l152"><span class="linenum"> 152</span></a>              return 'gb2312';
<a name="l153"><span class="linenum"> 153</span></a>          }
<a name="l154"><span class="linenum"> 154</span></a>          if (<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> === 'gb18030') {
<a name="l155"><span class="linenum"> 155</span></a>              return 'gb18030';
<a name="l156"><span class="linenum"> 156</span></a>          }
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">        // fallback to typo3</span>
<a name="l159"><span class="linenum"> 159</span></a>          return self::<a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>()-&gt;<a class="function" onClick="logFunction('parse_charset')" href="../../_functions/parse_charset.html" onMouseOver="funcPopup(event,'parse_charset')">parse_charset</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>);
<a name="l160"><span class="linenum"> 160</span></a>      }
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>      <span class="comment">/**</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     * Converts the text between different encodings. It uses iconv extension with //TRANSLIT parameter,</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">     * falls back to typo3. If both source and target are utf-8 it tries to fix invalid characters only.</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     *</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">     * @param string $text</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * @param string $fromCS source encoding</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     * @param string $toCS result encoding</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     * @return string|bool converted string or false on error</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     */</span>
<a name="l171"><span class="linenum"> 171</span></a>      public static function <a class="function" onClick="logFunction('convert')" href="../../_functions/convert.html" onMouseOver="funcPopup(event,'convert')">convert</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it2005" onMouseOver="hilite(2005)" onMouseOut="lolite()" onClick="logVariable('fromCS')" href="../../_variables/fromCS.html">$fromCS</a>, <a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('toCS')" href="../../_variables/toCS.html">$toCS</a>='utf-8') {
<a name="l172"><span class="linenum"> 172</span></a>          <a class="var it2005" onMouseOver="hilite(2005)" onMouseOut="lolite()" onClick="logVariable('fromCS')" href="../../_variables/fromCS.html">$fromCS</a> = self::<a class="function" onClick="logFunction('parse_charset')" href="../../_functions/parse_charset.html" onMouseOver="funcPopup(event,'parse_charset')">parse_charset</a>(<a class="var it2005" onMouseOver="hilite(2005)" onMouseOut="lolite()" onClick="logVariable('fromCS')" href="../../_variables/fromCS.html">$fromCS</a>);
<a name="l173"><span class="linenum"> 173</span></a>          <a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('toCS')" href="../../_variables/toCS.html">$toCS</a>   = self::<a class="function" onClick="logFunction('parse_charset')" href="../../_functions/parse_charset.html" onMouseOver="funcPopup(event,'parse_charset')">parse_charset</a>(<a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('toCS')" href="../../_variables/toCS.html">$toCS</a>);
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = (string)<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>; <span class="comment">// we can work only with strings</span>
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>          if (<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> === '') {
<a name="l178"><span class="linenum"> 178</span></a>              return '';
<a name="l179"><span class="linenum"> 179</span></a>          }
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>          if (<a class="var it2005" onMouseOver="hilite(2005)" onMouseOut="lolite()" onClick="logVariable('fromCS')" href="../../_variables/fromCS.html">$fromCS</a> === 'utf-8') {
<a name="l182"><span class="linenum"> 182</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('fix_utf8')" href="../../_functions/fix_utf8.html" onMouseOver="funcPopup(event,'fix_utf8')">fix_utf8</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>);
<a name="l183"><span class="linenum"> 183</span></a>              if (<a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('toCS')" href="../../_variables/toCS.html">$toCS</a> === 'utf-8') {
<a name="l184"><span class="linenum"> 184</span></a>                  return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>;
<a name="l185"><span class="linenum"> 185</span></a>              }
<a name="l186"><span class="linenum"> 186</span></a>          }
<a name="l187"><span class="linenum"> 187</span></a>  
<a name="l188"><span class="linenum"> 188</span></a>          if (<a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('toCS')" href="../../_variables/toCS.html">$toCS</a> === 'ascii') {
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">            // Try to normalize the conversion a bit.</span>
<a name="l190"><span class="linenum"> 190</span></a>              <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = self::<a class="function" onClick="logFunction('specialtoascii')" href="../../_functions/specialtoascii.html" onMouseOver="funcPopup(event,'specialtoascii')">specialtoascii</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it2005" onMouseOver="hilite(2005)" onMouseOut="lolite()" onClick="logVariable('fromCS')" href="../../_variables/fromCS.html">$fromCS</a>);
<a name="l191"><span class="linenum"> 191</span></a>          }
<a name="l192"><span class="linenum"> 192</span></a>  
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">        // Prevent any error notices, do not use //IGNORE so that we get</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">        // consistent result from Typo3 if iconv fails.</span>
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = @<a class="function" onClick="logFunction('iconv')" href="../../_functions/iconv.html" onMouseOver="funcPopup(event,'iconv')">iconv</a>(<a class="var it2005" onMouseOver="hilite(2005)" onMouseOut="lolite()" onClick="logVariable('fromCS')" href="../../_variables/fromCS.html">$fromCS</a>, <a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('toCS')" href="../../_variables/toCS.html">$toCS</a>.'//TRANSLIT', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>);
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>          if (<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> === false or <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> === '') {
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">            // note: iconv is prone to return empty string when invalid char encountered, or false if encoding unsupported</span>
<a name="l199"><span class="linenum"> 199</span></a>              <a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a> = <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(E_PARSE);
<a name="l200"><span class="linenum"> 200</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = self::<a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>()-&gt;<a class="function" onClick="logFunction('conv')" href="../../_functions/conv.html" onMouseOver="funcPopup(event,'conv')">conv</a>((string)<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it2005" onMouseOver="hilite(2005)" onMouseOut="lolite()" onClick="logVariable('fromCS')" href="../../_variables/fromCS.html">$fromCS</a>, <a class="var it2006" onMouseOver="hilite(2006)" onMouseOut="lolite()" onClick="logVariable('toCS')" href="../../_variables/toCS.html">$toCS</a>);
<a name="l201"><span class="linenum"> 201</span></a>              <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(<a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a>);
<a name="l202"><span class="linenum"> 202</span></a>          }
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l205"><span class="linenum"> 205</span></a>      }
<a name="l206"><span class="linenum"> 206</span></a>  
<a name="l207"><span class="linenum"> 207</span></a>      <span class="comment">/**</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment">     * Multibyte safe substr() function, uses mbstring or iconv for UTF-8, falls back to typo3.</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment">     *</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">     * @param string $text string to truncate</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">     * @param int $start negative value means from end</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">     * @param int $len maximum length of characters beginning from start</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     * @param string $charset encoding of the text</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     * @return string portion of string specified by the $start and $len</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     */</span>
<a name="l216"><span class="linenum"> 216</span></a>      public static function <a class="function" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="funcPopup(event,'substr')">substr</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../_variables/len.html">$len</a>=null, <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>='utf-8') {
<a name="l217"><span class="linenum"> 217</span></a>          <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> = self::<a class="function" onClick="logFunction('parse_charset')" href="../../_functions/parse_charset.html" onMouseOver="funcPopup(event,'parse_charset')">parse_charset</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>);
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>          if (<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> === 'utf-8') {
<a name="l220"><span class="linenum"> 220</span></a>              if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_substr')) {
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">                // this is much faster than iconv - see MDL-31142</span>
<a name="l222"><span class="linenum"> 222</span></a>                  if (<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../_variables/len.html">$len</a> === null) {
<a name="l223"><span class="linenum"> 223</span></a>                      <a class="var it5639" onMouseOver="hilite(5639)" onMouseOut="lolite()" onClick="logVariable('oldcharset')" href="../../_variables/oldcharset.html">$oldcharset</a> = <a class="phpfunction" onClick="logFunction('mb_internal_encoding')" href="../../_functions/mb_internal_encoding.html" onMouseOver="phpfuncPopup(event,'mb_internal_encoding')">mb_internal_encoding</a>();
<a name="l224"><span class="linenum"> 224</span></a>                      <a class="phpfunction" onClick="logFunction('mb_internal_encoding')" href="../../_functions/mb_internal_encoding.html" onMouseOver="phpfuncPopup(event,'mb_internal_encoding')">mb_internal_encoding</a>('UTF-8');
<a name="l225"><span class="linenum"> 225</span></a>                      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="phpfunction" onClick="logFunction('mb_substr')" href="../../_functions/mb_substr.html" onMouseOver="phpfuncPopup(event,'mb_substr')">mb_substr</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>);
<a name="l226"><span class="linenum"> 226</span></a>                      <a class="phpfunction" onClick="logFunction('mb_internal_encoding')" href="../../_functions/mb_internal_encoding.html" onMouseOver="phpfuncPopup(event,'mb_internal_encoding')">mb_internal_encoding</a>(<a class="var it5639" onMouseOver="hilite(5639)" onMouseOut="lolite()" onClick="logVariable('oldcharset')" href="../../_variables/oldcharset.html">$oldcharset</a>);
<a name="l227"><span class="linenum"> 227</span></a>                      return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l228"><span class="linenum"> 228</span></a>                  } else {
<a name="l229"><span class="linenum"> 229</span></a>                      return <a class="phpfunction" onClick="logFunction('mb_substr')" href="../../_functions/mb_substr.html" onMouseOver="phpfuncPopup(event,'mb_substr')">mb_substr</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../_variables/len.html">$len</a>, 'UTF-8');
<a name="l230"><span class="linenum"> 230</span></a>                  }
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>              } else {
<a name="l233"><span class="linenum"> 233</span></a>                  if (<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../_variables/len.html">$len</a> === null) {
<a name="l234"><span class="linenum"> 234</span></a>                      <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../_variables/len.html">$len</a> = <a class="phpfunction" onClick="logFunction('iconv_strlen')" href="../../_functions/iconv_strlen.html" onMouseOver="phpfuncPopup(event,'iconv_strlen')">iconv_strlen</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, 'UTF-8');
<a name="l235"><span class="linenum"> 235</span></a>                  }
<a name="l236"><span class="linenum"> 236</span></a>                  return <a class="phpfunction" onClick="logFunction('iconv_substr')" href="../../_functions/iconv_substr.html" onMouseOver="phpfuncPopup(event,'iconv_substr')">iconv_substr</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../_variables/len.html">$len</a>, 'UTF-8');
<a name="l237"><span class="linenum"> 237</span></a>              }
<a name="l238"><span class="linenum"> 238</span></a>          }
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>          <a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a> = <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(E_PARSE);
<a name="l241"><span class="linenum"> 241</span></a>          if (<a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../_variables/len.html">$len</a> === null) {
<a name="l242"><span class="linenum"> 242</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = self::<a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>()-&gt;<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>, (string)<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>);
<a name="l243"><span class="linenum"> 243</span></a>          } else {
<a name="l244"><span class="linenum"> 244</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = self::<a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>()-&gt;<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>, (string)<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>, <a class="var it106" onMouseOver="hilite(106)" onMouseOut="lolite()" onClick="logVariable('len')" href="../../_variables/len.html">$len</a>);
<a name="l245"><span class="linenum"> 245</span></a>          }
<a name="l246"><span class="linenum"> 246</span></a>          <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(<a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a>);
<a name="l247"><span class="linenum"> 247</span></a>  
<a name="l248"><span class="linenum"> 248</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l249"><span class="linenum"> 249</span></a>      }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>      <span class="comment">/**</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">     * Truncates a string to no more than a certain number of bytes in a multi-byte safe manner.</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">     * UTF-8 only!</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     *</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     * Many of the other charsets we test for (like ISO-2022-JP and EUC-JP) are not supported</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">     * by typo3, and will give invalid results, so we are supporting UTF-8 only.</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">     *</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">     * @param string $string String to truncate</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">     * @param int $bytes Maximum length of bytes in the result</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">     * @return string Portion of string specified by $bytes</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment">     * @since Moodle 3.1</span>
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">     */</span>
<a name="l263"><span class="linenum"> 263</span></a>      public static function <a class="function" onClick="logFunction('str_max_bytes')" href="../../_functions/str_max_bytes.html" onMouseOver="funcPopup(event,'str_max_bytes')">str_max_bytes</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a>, <a class="var it2904" onMouseOver="hilite(2904)" onMouseOut="lolite()" onClick="logVariable('bytes')" href="../../_variables/bytes.html">$bytes</a>) {
<a name="l264"><span class="linenum"> 264</span></a>          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_strcut')) {
<a name="l265"><span class="linenum"> 265</span></a>              return <a class="phpfunction" onClick="logFunction('mb_strcut')" href="../../_functions/mb_strcut.html" onMouseOver="phpfuncPopup(event,'mb_strcut')">mb_strcut</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a>, 0, <a class="var it2904" onMouseOver="hilite(2904)" onMouseOut="lolite()" onClick="logVariable('bytes')" href="../../_variables/bytes.html">$bytes</a>, 'UTF-8');
<a name="l266"><span class="linenum"> 266</span></a>          }
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>          <a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a> = <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(E_PARSE);
<a name="l269"><span class="linenum"> 269</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = self::<a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>()-&gt;<a class="function" onClick="logFunction('strtrunc')" href="../../_functions/strtrunc.html" onMouseOver="funcPopup(event,'strtrunc')">strtrunc</a>('utf-8', <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a>, <a class="var it2904" onMouseOver="hilite(2904)" onMouseOut="lolite()" onClick="logVariable('bytes')" href="../../_variables/bytes.html">$bytes</a>);
<a name="l270"><span class="linenum"> 270</span></a>          <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(<a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a>);
<a name="l271"><span class="linenum"> 271</span></a>  
<a name="l272"><span class="linenum"> 272</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l273"><span class="linenum"> 273</span></a>      }
<a name="l274"><span class="linenum"> 274</span></a>  
<a name="l275"><span class="linenum"> 275</span></a>      <span class="comment">/**</span>
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">     * Finds the last occurrence of a character in a string within another.</span>
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">     * UTF-8 ONLY safe mb_strrchr().</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">     *</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">     * @param string $haystack The string from which to get the last occurrence of needle.</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">     * @param string $needle The string to find in haystack.</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">     * @param boolean $part If true, returns the portion before needle, else return the portion after (including needle).</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">     * @return string|false False when not found.</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">     * @since Moodle 2.4.6, 2.5.2, 2.6</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">     */</span>
<a name="l285"><span class="linenum"> 285</span></a>      public static function <a class="function" onClick="logFunction('strrchr')" href="../../_functions/strrchr.html" onMouseOver="funcPopup(event,'strrchr')">strrchr</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../_variables/haystack.html">$haystack</a>, <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../_variables/needle.html">$needle</a>, <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../_variables/part.html">$part</a> = false) {
<a name="l286"><span class="linenum"> 286</span></a>  
<a name="l287"><span class="linenum"> 287</span></a>          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_strrchr')) {
<a name="l288"><span class="linenum"> 288</span></a>              return mb_strrchr(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../_variables/haystack.html">$haystack</a>, <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../_variables/needle.html">$needle</a>, <a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../_variables/part.html">$part</a>, 'UTF-8');
<a name="l289"><span class="linenum"> 289</span></a>          }
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>          <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../_variables/pos.html">$pos</a> = self::<a class="phpfunction" onClick="logFunction('strrpos')" href="../../_functions/strrpos.html" onMouseOver="phpfuncPopup(event,'strrpos')">strrpos</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../_variables/haystack.html">$haystack</a>, <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../_variables/needle.html">$needle</a>);
<a name="l292"><span class="linenum"> 292</span></a>          if (<a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../_variables/pos.html">$pos</a> === false) {
<a name="l293"><span class="linenum"> 293</span></a>              return false;
<a name="l294"><span class="linenum"> 294</span></a>          }
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../_variables/length.html">$length</a> = null;
<a name="l297"><span class="linenum"> 297</span></a>          if (<a class="var it2545" onMouseOver="hilite(2545)" onMouseOut="lolite()" onClick="logVariable('part')" href="../../_variables/part.html">$part</a>) {
<a name="l298"><span class="linenum"> 298</span></a>              <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../_variables/length.html">$length</a> = <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../_variables/pos.html">$pos</a>;
<a name="l299"><span class="linenum"> 299</span></a>              <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../_variables/pos.html">$pos</a> = 0;
<a name="l300"><span class="linenum"> 300</span></a>          }
<a name="l301"><span class="linenum"> 301</span></a>  
<a name="l302"><span class="linenum"> 302</span></a>          return self::<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../_variables/haystack.html">$haystack</a>, <a class="var it791" onMouseOver="hilite(791)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../_variables/pos.html">$pos</a>, <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../_variables/length.html">$length</a>, 'utf-8');
<a name="l303"><span class="linenum"> 303</span></a>      }
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>      <span class="comment">/**</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">     * Multibyte safe strlen() function, uses mbstring or iconv for UTF-8, falls back to typo3.</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">     *</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">     * @param string $text input string</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">     * @param string $charset encoding of the text</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">     * @return int number of characters</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">     */</span>
<a name="l312"><span class="linenum"> 312</span></a>      public static function <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>='utf-8') {
<a name="l313"><span class="linenum"> 313</span></a>          <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> = self::<a class="function" onClick="logFunction('parse_charset')" href="../../_functions/parse_charset.html" onMouseOver="funcPopup(event,'parse_charset')">parse_charset</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>);
<a name="l314"><span class="linenum"> 314</span></a>  
<a name="l315"><span class="linenum"> 315</span></a>          if (<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> === 'utf-8') {
<a name="l316"><span class="linenum"> 316</span></a>              if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_strlen')) {
<a name="l317"><span class="linenum"> 317</span></a>                  return <a class="phpfunction" onClick="logFunction('mb_strlen')" href="../../_functions/mb_strlen.html" onMouseOver="phpfuncPopup(event,'mb_strlen')">mb_strlen</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, 'UTF-8');
<a name="l318"><span class="linenum"> 318</span></a>              } else {
<a name="l319"><span class="linenum"> 319</span></a>                  return <a class="phpfunction" onClick="logFunction('iconv_strlen')" href="../../_functions/iconv_strlen.html" onMouseOver="phpfuncPopup(event,'iconv_strlen')">iconv_strlen</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, 'UTF-8');
<a name="l320"><span class="linenum"> 320</span></a>              }
<a name="l321"><span class="linenum"> 321</span></a>          }
<a name="l322"><span class="linenum"> 322</span></a>  
<a name="l323"><span class="linenum"> 323</span></a>          <a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a> = <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(E_PARSE);
<a name="l324"><span class="linenum"> 324</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = self::<a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>()-&gt;<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>, (string)<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>);
<a name="l325"><span class="linenum"> 325</span></a>          <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(<a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a>);
<a name="l326"><span class="linenum"> 326</span></a>  
<a name="l327"><span class="linenum"> 327</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l328"><span class="linenum"> 328</span></a>      }
<a name="l329"><span class="linenum"> 329</span></a>  
<a name="l330"><span class="linenum"> 330</span></a>      <span class="comment">/**</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">     * Multibyte safe strtolower() function, uses mbstring, falls back to typo3.</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">     *</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">     * @param string $text input string</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment">     * @param string $charset encoding of the text (may not work for all encodings)</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment">     * @return string lower case text</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">     */</span>
<a name="l337"><span class="linenum"> 337</span></a>      public static function <a class="function" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="funcPopup(event,'strtolower')">strtolower</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>='utf-8') {
<a name="l338"><span class="linenum"> 338</span></a>          <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> = self::<a class="function" onClick="logFunction('parse_charset')" href="../../_functions/parse_charset.html" onMouseOver="funcPopup(event,'parse_charset')">parse_charset</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>);
<a name="l339"><span class="linenum"> 339</span></a>  
<a name="l340"><span class="linenum"> 340</span></a>          if (<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> === 'utf-8' and <a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_strtolower')) {
<a name="l341"><span class="linenum"> 341</span></a>              return <a class="phpfunction" onClick="logFunction('mb_strtolower')" href="../../_functions/mb_strtolower.html" onMouseOver="phpfuncPopup(event,'mb_strtolower')">mb_strtolower</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, 'UTF-8');
<a name="l342"><span class="linenum"> 342</span></a>          }
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>          <a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a> = <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(E_PARSE);
<a name="l345"><span class="linenum"> 345</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = self::<a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>()-&gt;<a class="function" onClick="logFunction('conv_case')" href="../../_functions/conv_case.html" onMouseOver="funcPopup(event,'conv_case')">conv_case</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>, (string)<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, 'toLower');
<a name="l346"><span class="linenum"> 346</span></a>          <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(<a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a>);
<a name="l347"><span class="linenum"> 347</span></a>  
<a name="l348"><span class="linenum"> 348</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l349"><span class="linenum"> 349</span></a>      }
<a name="l350"><span class="linenum"> 350</span></a>  
<a name="l351"><span class="linenum"> 351</span></a>      <span class="comment">/**</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">     * Multibyte safe strtoupper() function, uses mbstring, falls back to typo3.</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">     *</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">     * @param string $text input string</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">     * @param string $charset encoding of the text (may not work for all encodings)</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment">     * @return string upper case text</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">     */</span>
<a name="l358"><span class="linenum"> 358</span></a>      public static function <a class="function" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="funcPopup(event,'strtoupper')">strtoupper</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>='utf-8') {
<a name="l359"><span class="linenum"> 359</span></a>          <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> = self::<a class="function" onClick="logFunction('parse_charset')" href="../../_functions/parse_charset.html" onMouseOver="funcPopup(event,'parse_charset')">parse_charset</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>);
<a name="l360"><span class="linenum"> 360</span></a>  
<a name="l361"><span class="linenum"> 361</span></a>          if (<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> === 'utf-8' and <a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_strtoupper')) {
<a name="l362"><span class="linenum"> 362</span></a>              return <a class="phpfunction" onClick="logFunction('mb_strtoupper')" href="../../_functions/mb_strtoupper.html" onMouseOver="phpfuncPopup(event,'mb_strtoupper')">mb_strtoupper</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, 'UTF-8');
<a name="l363"><span class="linenum"> 363</span></a>          }
<a name="l364"><span class="linenum"> 364</span></a>  
<a name="l365"><span class="linenum"> 365</span></a>          <a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a> = <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(E_PARSE);
<a name="l366"><span class="linenum"> 366</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = self::<a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>()-&gt;<a class="function" onClick="logFunction('conv_case')" href="../../_functions/conv_case.html" onMouseOver="funcPopup(event,'conv_case')">conv_case</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>, (string)<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, 'toUpper');
<a name="l367"><span class="linenum"> 367</span></a>          <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(<a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a>);
<a name="l368"><span class="linenum"> 368</span></a>  
<a name="l369"><span class="linenum"> 369</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l370"><span class="linenum"> 370</span></a>      }
<a name="l371"><span class="linenum"> 371</span></a>  
<a name="l372"><span class="linenum"> 372</span></a>      <span class="comment">/**</span>
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">     * Find the position of the first occurrence of a substring in a string.</span>
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">     * UTF-8 ONLY safe strpos(), uses mbstring, falls back to iconv.</span>
<a name="l375"><span class="linenum"> 375</span></a>  <span class="comment">     *</span>
<a name="l376"><span class="linenum"> 376</span></a>  <span class="comment">     * @param string $haystack the string to search in</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     * @param string $needle one or more charachters to search for</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">     * @param int $offset offset from begining of string</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     * @return int the numeric position of the first occurrence of needle in haystack.</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     */</span>
<a name="l381"><span class="linenum"> 381</span></a>      public static function <a class="function" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="funcPopup(event,'strpos')">strpos</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../_variables/haystack.html">$haystack</a>, <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../_variables/needle.html">$needle</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../../_variables/offset.html">$offset</a>=0) {
<a name="l382"><span class="linenum"> 382</span></a>          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_strpos')) {
<a name="l383"><span class="linenum"> 383</span></a>              return <a class="phpfunction" onClick="logFunction('mb_strpos')" href="../../_functions/mb_strpos.html" onMouseOver="phpfuncPopup(event,'mb_strpos')">mb_strpos</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../_variables/haystack.html">$haystack</a>, <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../_variables/needle.html">$needle</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../../_variables/offset.html">$offset</a>, 'UTF-8');
<a name="l384"><span class="linenum"> 384</span></a>          } else {
<a name="l385"><span class="linenum"> 385</span></a>              return <a class="phpfunction" onClick="logFunction('iconv_strpos')" href="../../_functions/iconv_strpos.html" onMouseOver="phpfuncPopup(event,'iconv_strpos')">iconv_strpos</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../_variables/haystack.html">$haystack</a>, <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../_variables/needle.html">$needle</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../../_variables/offset.html">$offset</a>, 'UTF-8');
<a name="l386"><span class="linenum"> 386</span></a>          }
<a name="l387"><span class="linenum"> 387</span></a>      }
<a name="l388"><span class="linenum"> 388</span></a>  
<a name="l389"><span class="linenum"> 389</span></a>      <span class="comment">/**</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment">     * Find the position of the last occurrence of a substring in a string</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">     * UTF-8 ONLY safe strrpos(), uses mbstring, falls back to iconv.</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">     *</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">     * @param string $haystack the string to search in</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment">     * @param string $needle one or more charachters to search for</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">     * @return int the numeric position of the last occurrence of needle in haystack</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">     */</span>
<a name="l397"><span class="linenum"> 397</span></a>      public static function <a class="function" onClick="logFunction('strrpos')" href="../../_functions/strrpos.html" onMouseOver="funcPopup(event,'strrpos')">strrpos</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../_variables/haystack.html">$haystack</a>, <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../_variables/needle.html">$needle</a>) {
<a name="l398"><span class="linenum"> 398</span></a>          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_strrpos')) {
<a name="l399"><span class="linenum"> 399</span></a>              return <a class="phpfunction" onClick="logFunction('mb_strrpos')" href="../../_functions/mb_strrpos.html" onMouseOver="phpfuncPopup(event,'mb_strrpos')">mb_strrpos</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../_variables/haystack.html">$haystack</a>, <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../_variables/needle.html">$needle</a>, null, 'UTF-8');
<a name="l400"><span class="linenum"> 400</span></a>          } else {
<a name="l401"><span class="linenum"> 401</span></a>              return <a class="phpfunction" onClick="logFunction('iconv_strrpos')" href="../../_functions/iconv_strrpos.html" onMouseOver="phpfuncPopup(event,'iconv_strrpos')">iconv_strrpos</a>(<a class="var it134" onMouseOver="hilite(134)" onMouseOut="lolite()" onClick="logVariable('haystack')" href="../../_variables/haystack.html">$haystack</a>, <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('needle')" href="../../_variables/needle.html">$needle</a>, 'UTF-8');
<a name="l402"><span class="linenum"> 402</span></a>          }
<a name="l403"><span class="linenum"> 403</span></a>      }
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>      <span class="comment">/**</span>
<a name="l406"><span class="linenum"> 406</span></a>  <span class="comment">     * Reverse UTF-8 multibytes character sets (used for RTL languages)</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">     * (We only do this because there is no mb_strrev or iconv_strrev)</span>
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">     *</span>
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">     * @param string $str the multibyte string to reverse</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">     * @return string the reversed multi byte string</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">     */</span>
<a name="l412"><span class="linenum"> 412</span></a>      public static function <a class="function" onClick="logFunction('strrev')" href="../../_functions/strrev.html" onMouseOver="funcPopup(event,'strrev')">strrev</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>) {
<a name="l413"><span class="linenum"> 413</span></a>          <a class="phpfunction" onClick="logFunction('preg_match_all')" href="../../_functions/preg_match_all.html" onMouseOver="phpfuncPopup(event,'preg_match_all')">preg_match_all</a>('/./us', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>, <a class="var it10137" onMouseOver="hilite(10137)" onMouseOut="lolite()" onClick="logVariable('ar')" href="../../_variables/ar.html">$ar</a>);
<a name="l414"><span class="linenum"> 414</span></a>          return <a class="function" onClick="logFunction('join')" href="../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>('', <a class="phpfunction" onClick="logFunction('array_reverse')" href="../../_functions/array_reverse.html" onMouseOver="phpfuncPopup(event,'array_reverse')">array_reverse</a>(<a class="var it10137" onMouseOver="hilite(10137)" onMouseOut="lolite()" onClick="logVariable('ar')" href="../../_variables/ar.html">$ar</a>[0]));
<a name="l415"><span class="linenum"> 415</span></a>      }
<a name="l416"><span class="linenum"> 416</span></a>  
<a name="l417"><span class="linenum"> 417</span></a>      <span class="comment">/**</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment">     * Try to convert upper unicode characters to plain ascii,</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">     * the returned string may contain unconverted unicode characters.</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">     *</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">     * @param string $text input string</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">     * @param string $charset encoding of the text</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">     * @return string converted ascii string</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">     */</span>
<a name="l425"><span class="linenum"> 425</span></a>      public static function <a class="function" onClick="logFunction('specialtoascii')" href="../../_functions/specialtoascii.html" onMouseOver="funcPopup(event,'specialtoascii')">specialtoascii</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>='utf-8') {
<a name="l426"><span class="linenum"> 426</span></a>          <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> = self::<a class="function" onClick="logFunction('parse_charset')" href="../../_functions/parse_charset.html" onMouseOver="funcPopup(event,'parse_charset')">parse_charset</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>);
<a name="l427"><span class="linenum"> 427</span></a>          <a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a> = <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(E_PARSE);
<a name="l428"><span class="linenum"> 428</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = self::<a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>()-&gt;<a class="function" onClick="logFunction('specCharsToASCII')" href="../../_functions/speccharstoascii.html" onMouseOver="funcPopup(event,'speccharstoascii')">specCharsToASCII</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>, (string)<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>);
<a name="l429"><span class="linenum"> 429</span></a>          <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(<a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a>);
<a name="l430"><span class="linenum"> 430</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l431"><span class="linenum"> 431</span></a>      }
<a name="l432"><span class="linenum"> 432</span></a>  
<a name="l433"><span class="linenum"> 433</span></a>      <span class="comment">/**</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">     * Generate a correct base64 encoded header to be used in MIME mail messages.</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">     * This function seems to be 100% compliant with RFC1342. Credits go to:</span>
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">     * paravoid (http://www.php.net/manual/en/function.mb-encode-mimeheader.php#60283).</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">     *</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">     * @param string $text input string</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">     * @param string $charset encoding of the text</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">     * @return string base64 encoded header</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">     */</span>
<a name="l442"><span class="linenum"> 442</span></a>      public static function <a class="function" onClick="logFunction('encode_mimeheader')" href="../../_functions/encode_mimeheader.html" onMouseOver="funcPopup(event,'encode_mimeheader')">encode_mimeheader</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>='utf-8') {
<a name="l443"><span class="linenum"> 443</span></a>          if (empty(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>)) {
<a name="l444"><span class="linenum"> 444</span></a>              return (string)<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>;
<a name="l445"><span class="linenum"> 445</span></a>          }
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">        // Normalize charset</span>
<a name="l447"><span class="linenum"> 447</span></a>          <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> = self::<a class="function" onClick="logFunction('parse_charset')" href="../../_functions/parse_charset.html" onMouseOver="funcPopup(event,'parse_charset')">parse_charset</a>(<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>);
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">        // If the text is pure ASCII, we don't need to encode it</span>
<a name="l449"><span class="linenum"> 449</span></a>          if (self::<a class="function" onClick="logFunction('convert')" href="../../_functions/convert.html" onMouseOver="funcPopup(event,'convert')">convert</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>, 'ascii') == <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>) {
<a name="l450"><span class="linenum"> 450</span></a>              return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>;
<a name="l451"><span class="linenum"> 451</span></a>          }
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">        // Although RFC says that line feed should be \r\n, it seems that</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">        // some mailers double convert \r, so we are going to use \n alone</span>
<a name="l454"><span class="linenum"> 454</span></a>          <a class="var it37284" onMouseOver="hilite(37284)" onMouseOut="lolite()" onClick="logVariable('linefeed')" href="../../_variables/linefeed.html">$linefeed</a>=&quot;\n&quot;;
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment">        // Define start and end of every chunk</span>
<a name="l456"><span class="linenum"> 456</span></a>          <a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a> = &quot;=?<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>?B?&quot;;
<a name="l457"><span class="linenum"> 457</span></a>          <a class="var it1128" onMouseOver="hilite(1128)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a> = &quot;?=&quot;;
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">        // Accumulate results</span>
<a name="l459"><span class="linenum"> 459</span></a>          <a class="var it12341" onMouseOver="hilite(12341)" onMouseOut="lolite()" onClick="logVariable('encoded')" href="../../_variables/encoded.html">$encoded</a> = '';
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">        // Max line length is 75 (including start and end)</span>
<a name="l461"><span class="linenum"> 461</span></a>          <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../_variables/length.html">$length</a> = 75 - <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>) - <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it1128" onMouseOver="hilite(1128)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a>);
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">        // Multi-byte ratio</span>
<a name="l463"><span class="linenum"> 463</span></a>          <a class="var it37285" onMouseOver="hilite(37285)" onMouseOut="lolite()" onClick="logVariable('multilength')" href="../../_variables/multilength.html">$multilength</a> = self::<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>);
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">        // Detect if strlen and friends supported</span>
<a name="l465"><span class="linenum"> 465</span></a>          if (<a class="var it37285" onMouseOver="hilite(37285)" onMouseOut="lolite()" onClick="logVariable('multilength')" href="../../_variables/multilength.html">$multilength</a> === false) {
<a name="l466"><span class="linenum"> 466</span></a>              if (<a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> == 'GB18030' or <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a> == 'gb18030') {
<a name="l467"><span class="linenum"> 467</span></a>                  while (<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>)) {
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment">                    // try to encode first 22 chars - we expect most chars are two bytes long</span>
<a name="l469"><span class="linenum"> 469</span></a>                      if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/^(([\x00-\x7f])|([\x81-\xfe][\x40-\x7e])|([\x81-\xfe][\x80-\xfe])|([\x81-\xfe][\x30-\x39]..)){1,22}/m', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>)) {
<a name="l470"><span class="linenum"> 470</span></a>                          <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a> = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[0];
<a name="l471"><span class="linenum"> 471</span></a>                          <a class="var it37286" onMouseOver="hilite(37286)" onMouseOut="lolite()" onClick="logVariable('encchunk')" href="../../_variables/encchunk.html">$encchunk</a> = <a class="phpfunction" onClick="logFunction('base64_encode')" href="../../_functions/base64_encode.html" onMouseOver="phpfuncPopup(event,'base64_encode')">base64_encode</a>(<a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a>);
<a name="l472"><span class="linenum"> 472</span></a>                          if (<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it37286" onMouseOver="hilite(37286)" onMouseOut="lolite()" onClick="logVariable('encchunk')" href="../../_variables/encchunk.html">$encchunk</a>) &gt; <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../_variables/length.html">$length</a>) {
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">                            // find first 11 chars - each char in 4 bytes - worst case scenario</span>
<a name="l474"><span class="linenum"> 474</span></a>                              <a class="phpfunction" onClick="logFunction('preg_match')" href="../../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/^(([\x00-\x7f])|([\x81-\xfe][\x40-\x7e])|([\x81-\xfe][\x80-\xfe])|([\x81-\xfe][\x30-\x39]..)){1,11}/m', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>);
<a name="l475"><span class="linenum"> 475</span></a>                              <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a> = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[0];
<a name="l476"><span class="linenum"> 476</span></a>                              <a class="var it37286" onMouseOver="hilite(37286)" onMouseOut="lolite()" onClick="logVariable('encchunk')" href="../../_variables/encchunk.html">$encchunk</a> = <a class="phpfunction" onClick="logFunction('base64_encode')" href="../../_functions/base64_encode.html" onMouseOver="phpfuncPopup(event,'base64_encode')">base64_encode</a>(<a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a>);
<a name="l477"><span class="linenum"> 477</span></a>                          }
<a name="l478"><span class="linenum"> 478</span></a>                          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a>));
<a name="l479"><span class="linenum"> 479</span></a>                          <a class="var it12341" onMouseOver="hilite(12341)" onMouseOut="lolite()" onClick="logVariable('encoded')" href="../../_variables/encoded.html">$encoded</a> .= ' '.<a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>.<a class="var it37286" onMouseOver="hilite(37286)" onMouseOut="lolite()" onClick="logVariable('encchunk')" href="../../_variables/encchunk.html">$encchunk</a>.<a class="var it1128" onMouseOver="hilite(1128)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a>.<a class="var it37284" onMouseOver="hilite(37284)" onMouseOut="lolite()" onClick="logVariable('linefeed')" href="../../_variables/linefeed.html">$linefeed</a>;
<a name="l480"><span class="linenum"> 480</span></a>                      } else {
<a name="l481"><span class="linenum"> 481</span></a>                          break;
<a name="l482"><span class="linenum"> 482</span></a>                      }
<a name="l483"><span class="linenum"> 483</span></a>                  }
<a name="l484"><span class="linenum"> 484</span></a>                  <a class="var it12341" onMouseOver="hilite(12341)" onMouseOut="lolite()" onClick="logVariable('encoded')" href="../../_variables/encoded.html">$encoded</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it12341" onMouseOver="hilite(12341)" onMouseOut="lolite()" onClick="logVariable('encoded')" href="../../_variables/encoded.html">$encoded</a>);
<a name="l485"><span class="linenum"> 485</span></a>                  return <a class="var it12341" onMouseOver="hilite(12341)" onMouseOut="lolite()" onClick="logVariable('encoded')" href="../../_variables/encoded.html">$encoded</a>;
<a name="l486"><span class="linenum"> 486</span></a>              } else {
<a name="l487"><span class="linenum"> 487</span></a>                  return false;
<a name="l488"><span class="linenum"> 488</span></a>              }
<a name="l489"><span class="linenum"> 489</span></a>          }
<a name="l490"><span class="linenum"> 490</span></a>          <a class="var it891" onMouseOver="hilite(891)" onMouseOut="lolite()" onClick="logVariable('ratio')" href="../../_variables/ratio.html">$ratio</a> = <a class="var it37285" onMouseOver="hilite(37285)" onMouseOut="lolite()" onClick="logVariable('multilength')" href="../../_variables/multilength.html">$multilength</a> / <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>);
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">        // Base64 ratio</span>
<a name="l492"><span class="linenum"> 492</span></a>          <a class="var it23780" onMouseOver="hilite(23780)" onMouseOut="lolite()" onClick="logVariable('magic')" href="../../_variables/magic.html">$magic</a> = <a class="var it37287" onMouseOver="hilite(37287)" onMouseOut="lolite()" onClick="logVariable('avglength')" href="../../_variables/avglength.html">$avglength</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>(3 * <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../_variables/length.html">$length</a> * <a class="var it891" onMouseOver="hilite(891)" onMouseOut="lolite()" onClick="logVariable('ratio')" href="../../_variables/ratio.html">$ratio</a> / 4);
<a name="l493"><span class="linenum"> 493</span></a>  <span class="comment">        // basic infinite loop protection</span>
<a name="l494"><span class="linenum"> 494</span></a>          <a class="var it19272" onMouseOver="hilite(19272)" onMouseOut="lolite()" onClick="logVariable('maxiterations')" href="../../_variables/maxiterations.html">$maxiterations</a> = <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>)*2;
<a name="l495"><span class="linenum"> 495</span></a>          <a class="var it37288" onMouseOver="hilite(37288)" onMouseOut="lolite()" onClick="logVariable('iteration')" href="../../_variables/iteration.html">$iteration</a> = 0;
<a name="l496"><span class="linenum"> 496</span></a>  <span class="comment">        // Iterate over the string in magic chunks</span>
<a name="l497"><span class="linenum"> 497</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>=0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt;= <a class="var it37285" onMouseOver="hilite(37285)" onMouseOut="lolite()" onClick="logVariable('multilength')" href="../../_variables/multilength.html">$multilength</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>+=<a class="var it23780" onMouseOver="hilite(23780)" onMouseOut="lolite()" onClick="logVariable('magic')" href="../../_variables/magic.html">$magic</a>) {
<a name="l498"><span class="linenum"> 498</span></a>              if (<a class="var it37288" onMouseOver="hilite(37288)" onMouseOut="lolite()" onClick="logVariable('iteration')" href="../../_variables/iteration.html">$iteration</a>++ &gt; <a class="var it19272" onMouseOver="hilite(19272)" onMouseOut="lolite()" onClick="logVariable('maxiterations')" href="../../_variables/maxiterations.html">$maxiterations</a>) {
<a name="l499"><span class="linenum"> 499</span></a>                  return false; <span class="comment">// probably infinite loop</span>
<a name="l500"><span class="linenum"> 500</span></a>              }
<a name="l501"><span class="linenum"> 501</span></a>              <a class="var it23780" onMouseOver="hilite(23780)" onMouseOut="lolite()" onClick="logVariable('magic')" href="../../_variables/magic.html">$magic</a> = <a class="var it37287" onMouseOver="hilite(37287)" onMouseOut="lolite()" onClick="logVariable('avglength')" href="../../_variables/avglength.html">$avglength</a>;
<a name="l502"><span class="linenum"> 502</span></a>              <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../../_variables/offset.html">$offset</a> = 0;
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">            // Ensure the chunk fits in length, reducing magic if necessary</span>
<a name="l504"><span class="linenum"> 504</span></a>              do {
<a name="l505"><span class="linenum"> 505</span></a>                  <a class="var it23780" onMouseOver="hilite(23780)" onMouseOut="lolite()" onClick="logVariable('magic')" href="../../_variables/magic.html">$magic</a> -= <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../../_variables/offset.html">$offset</a>;
<a name="l506"><span class="linenum"> 506</span></a>                  <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a> = self::<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>, <a class="var it23780" onMouseOver="hilite(23780)" onMouseOut="lolite()" onClick="logVariable('magic')" href="../../_variables/magic.html">$magic</a>, <a class="var it128" onMouseOver="hilite(128)" onMouseOut="lolite()" onClick="logVariable('charset')" href="../../_variables/charset.html">$charset</a>);
<a name="l507"><span class="linenum"> 507</span></a>                  <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a> = <a class="phpfunction" onClick="logFunction('base64_encode')" href="../../_functions/base64_encode.html" onMouseOver="phpfuncPopup(event,'base64_encode')">base64_encode</a>(<a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a>);
<a name="l508"><span class="linenum"> 508</span></a>                  <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../../_variables/offset.html">$offset</a>++;
<a name="l509"><span class="linenum"> 509</span></a>              } while (<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a>) &gt; <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../_variables/length.html">$length</a>);
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">            // This chunk doesn't break any multi-byte char. Use it.</span>
<a name="l511"><span class="linenum"> 511</span></a>              if (<a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a>)
<a name="l512"><span class="linenum"> 512</span></a>                  <a class="var it12341" onMouseOver="hilite(12341)" onMouseOut="lolite()" onClick="logVariable('encoded')" href="../../_variables/encoded.html">$encoded</a> .= ' '.<a class="var it133" onMouseOver="hilite(133)" onMouseOut="lolite()" onClick="logVariable('start')" href="../../_variables/start.html">$start</a>.<a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../../_variables/chunk.html">$chunk</a>.<a class="var it1128" onMouseOver="hilite(1128)" onMouseOut="lolite()" onClick="logVariable('end')" href="../../_variables/end.html">$end</a>.<a class="var it37284" onMouseOver="hilite(37284)" onMouseOut="lolite()" onClick="logVariable('linefeed')" href="../../_variables/linefeed.html">$linefeed</a>;
<a name="l513"><span class="linenum"> 513</span></a>          }
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">        // Strip the first space and the last linefeed</span>
<a name="l515"><span class="linenum"> 515</span></a>          <a class="var it12341" onMouseOver="hilite(12341)" onMouseOut="lolite()" onClick="logVariable('encoded')" href="../../_variables/encoded.html">$encoded</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it12341" onMouseOver="hilite(12341)" onMouseOut="lolite()" onClick="logVariable('encoded')" href="../../_variables/encoded.html">$encoded</a>, 1, -<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it37284" onMouseOver="hilite(37284)" onMouseOut="lolite()" onClick="logVariable('linefeed')" href="../../_variables/linefeed.html">$linefeed</a>));
<a name="l516"><span class="linenum"> 516</span></a>  
<a name="l517"><span class="linenum"> 517</span></a>          return <a class="var it12341" onMouseOver="hilite(12341)" onMouseOut="lolite()" onClick="logVariable('encoded')" href="../../_variables/encoded.html">$encoded</a>;
<a name="l518"><span class="linenum"> 518</span></a>      }
<a name="l519"><span class="linenum"> 519</span></a>  
<a name="l520"><span class="linenum"> 520</span></a>      <span class="comment">/**</span>
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">     * Returns HTML entity transliteration table.</span>
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">     * @return array with (html entity =&gt; utf-8) elements</span>
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment">     */</span>
<a name="l524"><span class="linenum"> 524</span></a>      protected static function <a class="function" onClick="logFunction('get_entities_table')" href="../../_functions/get_entities_table.html" onMouseOver="funcPopup(event,'get_entities_table')">get_entities_table</a>() {
<a name="l525"><span class="linenum"> 525</span></a>          static <a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a> = null;
<a name="l526"><span class="linenum"> 526</span></a>  
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment">        // Generate/create $trans_tbl</span>
<a name="l528"><span class="linenum"> 528</span></a>          if (!isset(<a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a>)) {
<a name="l529"><span class="linenum"> 529</span></a>              if (<a class="phpfunction" onClick="logFunction('version_compare')" href="../../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>(<a class="phpfunction" onClick="logFunction('phpversion')" href="../../_functions/phpversion.html" onMouseOver="phpfuncPopup(event,'phpversion')">phpversion</a>(), '5.3.4') &lt; 0) {
<a name="l530"><span class="linenum"> 530</span></a>                  <a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a> = array();
<a name="l531"><span class="linenum"> 531</span></a>                  foreach (<a class="phpfunction" onClick="logFunction('get_html_translation_table')" href="../../_functions/get_html_translation_table.html" onMouseOver="phpfuncPopup(event,'get_html_translation_table')">get_html_translation_table</a>(HTML_ENTITIES) as <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>=&gt;<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>) {
<a name="l532"><span class="linenum"> 532</span></a>                      <a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] = self::<a class="function" onClick="logFunction('convert')" href="../../_functions/convert.html" onMouseOver="funcPopup(event,'convert')">convert</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>, 'ISO-8859-1', 'utf-8');
<a name="l533"><span class="linenum"> 533</span></a>                  }
<a name="l534"><span class="linenum"> 534</span></a>  
<a name="l535"><span class="linenum"> 535</span></a>              } else if (<a class="phpfunction" onClick="logFunction('version_compare')" href="../../_functions/version_compare.html" onMouseOver="phpfuncPopup(event,'version_compare')">version_compare</a>(<a class="phpfunction" onClick="logFunction('phpversion')" href="../../_functions/phpversion.html" onMouseOver="phpfuncPopup(event,'phpversion')">phpversion</a>(), '5.4.0') &lt; 0) {
<a name="l536"><span class="linenum"> 536</span></a>                  <a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a> = <a class="phpfunction" onClick="logFunction('get_html_translation_table')" href="../../_functions/get_html_translation_table.html" onMouseOver="phpfuncPopup(event,'get_html_translation_table')">get_html_translation_table</a>(HTML_ENTITIES, ENT_COMPAT, 'UTF-8');
<a name="l537"><span class="linenum"> 537</span></a>                  <a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a> = <a class="phpfunction" onClick="logFunction('array_flip')" href="../../_functions/array_flip.html" onMouseOver="phpfuncPopup(event,'array_flip')">array_flip</a>(<a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a>);
<a name="l538"><span class="linenum"> 538</span></a>  
<a name="l539"><span class="linenum"> 539</span></a>              } else {
<a name="l540"><span class="linenum"> 540</span></a>                  <a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a> = <a class="phpfunction" onClick="logFunction('get_html_translation_table')" href="../../_functions/get_html_translation_table.html" onMouseOver="phpfuncPopup(event,'get_html_translation_table')">get_html_translation_table</a>(HTML_ENTITIES, ENT_COMPAT | ENT_HTML401, 'UTF-8');
<a name="l541"><span class="linenum"> 541</span></a>                  <a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a> = <a class="phpfunction" onClick="logFunction('array_flip')" href="../../_functions/array_flip.html" onMouseOver="phpfuncPopup(event,'array_flip')">array_flip</a>(<a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a>);
<a name="l542"><span class="linenum"> 542</span></a>              }
<a name="l543"><span class="linenum"> 543</span></a>          }
<a name="l544"><span class="linenum"> 544</span></a>  
<a name="l545"><span class="linenum"> 545</span></a>          return <a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a>;
<a name="l546"><span class="linenum"> 546</span></a>      }
<a name="l547"><span class="linenum"> 547</span></a>  
<a name="l548"><span class="linenum"> 548</span></a>      <span class="comment">/**</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment">     * Converts all the numeric entities &amp;#nnnn; or &amp;#xnnn; to UTF-8</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">     * Original from laurynas dot butkus at gmail at:</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">     * http://php.net/manual/en/function.html-entity-decode.php#75153</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">     * with some custom mods to provide more functionality</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">     *</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">     * @param string $str input string</span>
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">     * @param boolean $htmlent convert also html entities (defaults to true)</span>
<a name="l556"><span class="linenum"> 556</span></a>  <span class="comment">     * @return string encoded UTF-8 string</span>
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">     */</span>
<a name="l558"><span class="linenum"> 558</span></a>      public static function <a class="function" onClick="logFunction('entities_to_utf8')" href="../../_functions/entities_to_utf8.html" onMouseOver="funcPopup(event,'entities_to_utf8')">entities_to_utf8</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>, <a class="var it37289" onMouseOver="hilite(37289)" onMouseOut="lolite()" onClick="logVariable('htmlent')" href="../../_variables/htmlent.html">$htmlent</a>=true) {
<a name="l559"><span class="linenum"> 559</span></a>          static <a class="var it37290" onMouseOver="hilite(37290)" onMouseOut="lolite()" onClick="logVariable('callback1')" href="../../_variables/callback1.html">$callback1</a> = null ;
<a name="l560"><span class="linenum"> 560</span></a>          static <a class="var it37291" onMouseOver="hilite(37291)" onMouseOut="lolite()" onClick="logVariable('callback2')" href="../../_variables/callback2.html">$callback2</a> = null ;
<a name="l561"><span class="linenum"> 561</span></a>  
<a name="l562"><span class="linenum"> 562</span></a>          if (!<a class="var it37290" onMouseOver="hilite(37290)" onMouseOut="lolite()" onClick="logVariable('callback1')" href="../../_variables/callback1.html">$callback1</a> or !<a class="var it37291" onMouseOver="hilite(37291)" onMouseOut="lolite()" onClick="logVariable('callback2')" href="../../_variables/callback2.html">$callback2</a>) {
<a name="l563"><span class="linenum"> 563</span></a>              <a class="var it37290" onMouseOver="hilite(37290)" onMouseOut="lolite()" onClick="logVariable('callback1')" href="../../_variables/callback1.html">$callback1</a> = <a class="phpfunction" onClick="logFunction('create_function')" href="../../_functions/create_function.html" onMouseOver="phpfuncPopup(event,'create_function')">create_function</a>('<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>', 'return <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('code2utf8')" href="../../_functions/code2utf8.html" onMouseOver="funcPopup(event,'code2utf8')">code2utf8</a>(<a class="phpfunction" onClick="logFunction('hexdec')" href="../../_functions/hexdec.html" onMouseOver="phpfuncPopup(event,'hexdec')">hexdec</a>(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[1]));');
<a name="l564"><span class="linenum"> 564</span></a>              <a class="var it37291" onMouseOver="hilite(37291)" onMouseOut="lolite()" onClick="logVariable('callback2')" href="../../_variables/callback2.html">$callback2</a> = <a class="phpfunction" onClick="logFunction('create_function')" href="../../_functions/create_function.html" onMouseOver="phpfuncPopup(event,'create_function')">create_function</a>('<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>', 'return <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('code2utf8')" href="../../_functions/code2utf8.html" onMouseOver="funcPopup(event,'code2utf8')">code2utf8</a>(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[1]);');
<a name="l565"><span class="linenum"> 565</span></a>          }
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = (string)<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>;
<a name="l568"><span class="linenum"> 568</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="phpfunction" onClick="logFunction('preg_replace_callback')" href="../../_functions/preg_replace_callback.html" onMouseOver="phpfuncPopup(event,'preg_replace_callback')">preg_replace_callback</a>('/&amp;#x([0-9a-f]+);/i', <a class="var it37290" onMouseOver="hilite(37290)" onMouseOut="lolite()" onClick="logVariable('callback1')" href="../../_variables/callback1.html">$callback1</a>, <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l569"><span class="linenum"> 569</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="phpfunction" onClick="logFunction('preg_replace_callback')" href="../../_functions/preg_replace_callback.html" onMouseOver="phpfuncPopup(event,'preg_replace_callback')">preg_replace_callback</a>('/&amp;#([0-9]+);/', <a class="var it37291" onMouseOver="hilite(37291)" onMouseOut="lolite()" onClick="logVariable('callback2')" href="../../_variables/callback2.html">$callback2</a>, <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l570"><span class="linenum"> 570</span></a>  
<a name="l571"><span class="linenum"> 571</span></a>  <span class="comment">        // Replace literal entities (if desired)</span>
<a name="l572"><span class="linenum"> 572</span></a>          if (<a class="var it37289" onMouseOver="hilite(37289)" onMouseOut="lolite()" onClick="logVariable('htmlent')" href="../../_variables/htmlent.html">$htmlent</a>) {
<a name="l573"><span class="linenum"> 573</span></a>              <a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a> = self::<a class="function" onClick="logFunction('get_entities_table')" href="../../_functions/get_entities_table.html" onMouseOver="funcPopup(event,'get_entities_table')">get_entities_table</a>();
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">            // It should be safe to search for ascii strings and replace them with utf-8 here.</span>
<a name="l575"><span class="linenum"> 575</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="phpfunction" onClick="logFunction('strtr')" href="../../_functions/strtr.html" onMouseOver="phpfuncPopup(event,'strtr')">strtr</a>(<a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>, <a class="var it2019" onMouseOver="hilite(2019)" onMouseOut="lolite()" onClick="logVariable('trans_tbl')" href="../../_variables/trans_tbl.html">$trans_tbl</a>);
<a name="l576"><span class="linenum"> 576</span></a>          }
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">        // Return utf8-ised string</span>
<a name="l578"><span class="linenum"> 578</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l579"><span class="linenum"> 579</span></a>      }
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>      <span class="comment">/**</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     * Converts all Unicode chars &gt; 127 to numeric entities &amp;#nnnn; or &amp;#xnnn;.</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     *</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">     * @param string $str input string</span>
<a name="l585"><span class="linenum"> 585</span></a>  <span class="comment">     * @param boolean $dec output decadic only number entities</span>
<a name="l586"><span class="linenum"> 586</span></a>  <span class="comment">     * @param boolean $nonnum remove all non-numeric entities</span>
<a name="l587"><span class="linenum"> 587</span></a>  <span class="comment">     * @return string converted string</span>
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment">     */</span>
<a name="l589"><span class="linenum"> 589</span></a>      public static function <a class="function" onClick="logFunction('utf8_to_entities')" href="../../_functions/utf8_to_entities.html" onMouseOver="funcPopup(event,'utf8_to_entities')">utf8_to_entities</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>, <a class="var it13027" onMouseOver="hilite(13027)" onMouseOut="lolite()" onClick="logVariable('dec')" href="../../_variables/dec.html">$dec</a>=false, <a class="var it37292" onMouseOver="hilite(37292)" onMouseOut="lolite()" onClick="logVariable('nonnum')" href="../../_variables/nonnum.html">$nonnum</a>=false) {
<a name="l590"><span class="linenum"> 590</span></a>          static <a class="var it2214" onMouseOver="hilite(2214)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../_variables/callback.html">$callback</a> = null ;
<a name="l591"><span class="linenum"> 591</span></a>  
<a name="l592"><span class="linenum"> 592</span></a>          if (<a class="var it37292" onMouseOver="hilite(37292)" onMouseOut="lolite()" onClick="logVariable('nonnum')" href="../../_variables/nonnum.html">$nonnum</a>) {
<a name="l593"><span class="linenum"> 593</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a> = self::<a class="function" onClick="logFunction('entities_to_utf8')" href="../../_functions/entities_to_utf8.html" onMouseOver="funcPopup(event,'entities_to_utf8')">entities_to_utf8</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>, true);
<a name="l594"><span class="linenum"> 594</span></a>          }
<a name="l595"><span class="linenum"> 595</span></a>  
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment">        // Avoid some notices from Typo3 code</span>
<a name="l597"><span class="linenum"> 597</span></a>          <a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a> = <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(E_PARSE);
<a name="l598"><span class="linenum"> 598</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = self::<a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>()-&gt;<a class="function" onClick="logFunction('utf8_to_entities')" href="../../_functions/utf8_to_entities.html" onMouseOver="funcPopup(event,'utf8_to_entities')">utf8_to_entities</a>((string)<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>);
<a name="l599"><span class="linenum"> 599</span></a>          <a class="phpfunction" onClick="logFunction('error_reporting')" href="../../_functions/error_reporting.html" onMouseOver="phpfuncPopup(event,'error_reporting')">error_reporting</a>(<a class="var it37283" onMouseOver="hilite(37283)" onMouseOut="lolite()" onClick="logVariable('oldlevel')" href="../../_variables/oldlevel.html">$oldlevel</a>);
<a name="l600"><span class="linenum"> 600</span></a>  
<a name="l601"><span class="linenum"> 601</span></a>          if (<a class="var it13027" onMouseOver="hilite(13027)" onMouseOut="lolite()" onClick="logVariable('dec')" href="../../_variables/dec.html">$dec</a>) {
<a name="l602"><span class="linenum"> 602</span></a>              if (!<a class="var it2214" onMouseOver="hilite(2214)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../_variables/callback.html">$callback</a>) {
<a name="l603"><span class="linenum"> 603</span></a>                  <a class="var it2214" onMouseOver="hilite(2214)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../_variables/callback.html">$callback</a> = <a class="phpfunction" onClick="logFunction('create_function')" href="../../_functions/create_function.html" onMouseOver="phpfuncPopup(event,'create_function')">create_function</a>('<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>', 'return \'&amp;#\'.(<a class="phpfunction" onClick="logFunction('hexdec')" href="../../_functions/hexdec.html" onMouseOver="phpfuncPopup(event,'hexdec')">hexdec</a>(<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('matches')" href="../../_variables/matches.html">$matches</a>[1])).\';\';');
<a name="l604"><span class="linenum"> 604</span></a>              }
<a name="l605"><span class="linenum"> 605</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="phpfunction" onClick="logFunction('preg_replace_callback')" href="../../_functions/preg_replace_callback.html" onMouseOver="phpfuncPopup(event,'preg_replace_callback')">preg_replace_callback</a>('/&amp;#x([0-9a-f]+);/i', <a class="var it2214" onMouseOver="hilite(2214)" onMouseOut="lolite()" onClick="logVariable('callback')" href="../../_variables/callback.html">$callback</a>, <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>);
<a name="l606"><span class="linenum"> 606</span></a>          }
<a name="l607"><span class="linenum"> 607</span></a>  
<a name="l608"><span class="linenum"> 608</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l609"><span class="linenum"> 609</span></a>      }
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>      <span class="comment">/**</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">     * Removes the BOM from unicode string {@link http://unicode.org/faq/utf_bom.html}</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">     *</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">     * @param string $str input string</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">     * @return string</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">     */</span>
<a name="l617"><span class="linenum"> 617</span></a>      public static function <a class="function" onClick="logFunction('trim_utf8_bom')" href="../../_functions/trim_utf8_bom.html" onMouseOver="funcPopup(event,'trim_utf8_bom')">trim_utf8_bom</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>) {
<a name="l618"><span class="linenum"> 618</span></a>          <a class="var it8939" onMouseOver="hilite(8939)" onMouseOut="lolite()" onClick="logVariable('bom')" href="../../_variables/bom.html">$bom</a> = &quot;\xef\xbb\xbf&quot;;
<a name="l619"><span class="linenum"> 619</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>, <a class="var it8939" onMouseOver="hilite(8939)" onMouseOut="lolite()" onClick="logVariable('bom')" href="../../_variables/bom.html">$bom</a>) === 0) {
<a name="l620"><span class="linenum"> 620</span></a>              return <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>, <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it8939" onMouseOver="hilite(8939)" onMouseOut="lolite()" onClick="logVariable('bom')" href="../../_variables/bom.html">$bom</a>));
<a name="l621"><span class="linenum"> 621</span></a>          }
<a name="l622"><span class="linenum"> 622</span></a>          return <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../../_variables/str.html">$str</a>;
<a name="l623"><span class="linenum"> 623</span></a>      }
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>      <span class="comment">/**</span>
<a name="l626"><span class="linenum"> 626</span></a>  <span class="comment">     * Returns encoding options for select boxes, utf-8 and platform encoding first</span>
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment">     *</span>
<a name="l628"><span class="linenum"> 628</span></a>  <span class="comment">     * @return array encodings</span>
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">     */</span>
<a name="l630"><span class="linenum"> 630</span></a>      public static function <a class="function" onClick="logFunction('get_encodings')" href="../../_functions/get_encodings.html" onMouseOver="funcPopup(event,'get_encodings')">get_encodings</a>() {
<a name="l631"><span class="linenum"> 631</span></a>          <a class="var it7961" onMouseOver="hilite(7961)" onMouseOut="lolite()" onClick="logVariable('encodings')" href="../../_variables/encodings.html">$encodings</a> = array();
<a name="l632"><span class="linenum"> 632</span></a>          <a class="var it7961" onMouseOver="hilite(7961)" onMouseOut="lolite()" onClick="logVariable('encodings')" href="../../_variables/encodings.html">$encodings</a>['UTF-8'] = 'UTF-8';
<a name="l633"><span class="linenum"> 633</span></a>          <a class="var it37293" onMouseOver="hilite(37293)" onMouseOut="lolite()" onClick="logVariable('winenc')" href="../../_variables/winenc.html">$winenc</a> = <a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('localewincharset', 'langconfig'));
<a name="l634"><span class="linenum"> 634</span></a>          if (<a class="var it37293" onMouseOver="hilite(37293)" onMouseOut="lolite()" onClick="logVariable('winenc')" href="../../_variables/winenc.html">$winenc</a> != '') {
<a name="l635"><span class="linenum"> 635</span></a>              <a class="var it7961" onMouseOver="hilite(7961)" onMouseOut="lolite()" onClick="logVariable('encodings')" href="../../_variables/encodings.html">$encodings</a>[<a class="var it37293" onMouseOver="hilite(37293)" onMouseOut="lolite()" onClick="logVariable('winenc')" href="../../_variables/winenc.html">$winenc</a>] = <a class="var it37293" onMouseOver="hilite(37293)" onMouseOut="lolite()" onClick="logVariable('winenc')" href="../../_variables/winenc.html">$winenc</a>;
<a name="l636"><span class="linenum"> 636</span></a>          }
<a name="l637"><span class="linenum"> 637</span></a>          <a class="var it37294" onMouseOver="hilite(37294)" onMouseOut="lolite()" onClick="logVariable('nixenc')" href="../../_variables/nixenc.html">$nixenc</a> = <a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('oldcharset', 'langconfig'));
<a name="l638"><span class="linenum"> 638</span></a>          <a class="var it7961" onMouseOver="hilite(7961)" onMouseOut="lolite()" onClick="logVariable('encodings')" href="../../_variables/encodings.html">$encodings</a>[<a class="var it37294" onMouseOver="hilite(37294)" onMouseOut="lolite()" onClick="logVariable('nixenc')" href="../../_variables/nixenc.html">$nixenc</a>] = <a class="var it37294" onMouseOver="hilite(37294)" onMouseOut="lolite()" onClick="logVariable('nixenc')" href="../../_variables/nixenc.html">$nixenc</a>;
<a name="l639"><span class="linenum"> 639</span></a>  
<a name="l640"><span class="linenum"> 640</span></a>          foreach (self::<a class="function" onClick="logFunction('typo3')" href="../../_functions/typo3.html" onMouseOver="funcPopup(event,'typo3')">typo3</a>()-&gt;synonyms as <a class="var it739" onMouseOver="hilite(739)" onMouseOut="lolite()" onClick="logVariable('enc')" href="../../_variables/enc.html">$enc</a>) {
<a name="l641"><span class="linenum"> 641</span></a>              <a class="var it739" onMouseOver="hilite(739)" onMouseOut="lolite()" onClick="logVariable('enc')" href="../../_variables/enc.html">$enc</a> = <a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it739" onMouseOver="hilite(739)" onMouseOut="lolite()" onClick="logVariable('enc')" href="../../_variables/enc.html">$enc</a>);
<a name="l642"><span class="linenum"> 642</span></a>              <a class="var it7961" onMouseOver="hilite(7961)" onMouseOut="lolite()" onClick="logVariable('encodings')" href="../../_variables/encodings.html">$encodings</a>[<a class="var it739" onMouseOver="hilite(739)" onMouseOut="lolite()" onClick="logVariable('enc')" href="../../_variables/enc.html">$enc</a>] = <a class="var it739" onMouseOver="hilite(739)" onMouseOut="lolite()" onClick="logVariable('enc')" href="../../_variables/enc.html">$enc</a>;
<a name="l643"><span class="linenum"> 643</span></a>          }
<a name="l644"><span class="linenum"> 644</span></a>          return <a class="var it7961" onMouseOver="hilite(7961)" onMouseOut="lolite()" onClick="logVariable('encodings')" href="../../_variables/encodings.html">$encodings</a>;
<a name="l645"><span class="linenum"> 645</span></a>      }
<a name="l646"><span class="linenum"> 646</span></a>  
<a name="l647"><span class="linenum"> 647</span></a>      <span class="comment">/**</span>
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">     * Returns the utf8 string corresponding to the unicode value</span>
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">     * (from php.net, courtesy - romans@void.lv)</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">     *</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">     * @param  int    $num one unicode value</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment">     * @return string the UTF-8 char corresponding to the unicode value</span>
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">     */</span>
<a name="l654"><span class="linenum"> 654</span></a>      public static function <a class="function" onClick="logFunction('code2utf8')" href="../../_functions/code2utf8.html" onMouseOver="funcPopup(event,'code2utf8')">code2utf8</a>(<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a>) {
<a name="l655"><span class="linenum"> 655</span></a>          if (<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &lt; 128) {
<a name="l656"><span class="linenum"> 656</span></a>              return <a class="phpfunction" onClick="logFunction('chr')" href="../../_functions/chr.html" onMouseOver="phpfuncPopup(event,'chr')">chr</a>(<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a>);
<a name="l657"><span class="linenum"> 657</span></a>          }
<a name="l658"><span class="linenum"> 658</span></a>          if (<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &lt; 2048) {
<a name="l659"><span class="linenum"> 659</span></a>              return <a class="phpfunction" onClick="logFunction('chr')" href="../../_functions/chr.html" onMouseOver="phpfuncPopup(event,'chr')">chr</a>((<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &gt;&gt; 6) + 192) . <a class="phpfunction" onClick="logFunction('chr')" href="../../_functions/chr.html" onMouseOver="phpfuncPopup(event,'chr')">chr</a>((<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &amp; 63) + 128);
<a name="l660"><span class="linenum"> 660</span></a>          }
<a name="l661"><span class="linenum"> 661</span></a>          if (<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &lt; 65536) {
<a name="l662"><span class="linenum"> 662</span></a>              return <a class="phpfunction" onClick="logFunction('chr')" href="../../_functions/chr.html" onMouseOver="phpfuncPopup(event,'chr')">chr</a>((<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &gt;&gt; 12) + 224) . <a class="phpfunction" onClick="logFunction('chr')" href="../../_functions/chr.html" onMouseOver="phpfuncPopup(event,'chr')">chr</a>(((<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &gt;&gt; 6) &amp; 63) + 128) . <a class="phpfunction" onClick="logFunction('chr')" href="../../_functions/chr.html" onMouseOver="phpfuncPopup(event,'chr')">chr</a>((<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &amp; 63) + 128);
<a name="l663"><span class="linenum"> 663</span></a>          }
<a name="l664"><span class="linenum"> 664</span></a>          if (<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &lt; 2097152) {
<a name="l665"><span class="linenum"> 665</span></a>              return <a class="phpfunction" onClick="logFunction('chr')" href="../../_functions/chr.html" onMouseOver="phpfuncPopup(event,'chr')">chr</a>((<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &gt;&gt; 18) + 240) . <a class="phpfunction" onClick="logFunction('chr')" href="../../_functions/chr.html" onMouseOver="phpfuncPopup(event,'chr')">chr</a>(((<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &gt;&gt; 12) &amp; 63) + 128) . <a class="phpfunction" onClick="logFunction('chr')" href="../../_functions/chr.html" onMouseOver="phpfuncPopup(event,'chr')">chr</a>(((<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &gt;&gt; 6) &amp; 63) + 128) . <a class="phpfunction" onClick="logFunction('chr')" href="../../_functions/chr.html" onMouseOver="phpfuncPopup(event,'chr')">chr</a>((<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('num')" href="../../_variables/num.html">$num</a> &amp; 63) + 128);
<a name="l666"><span class="linenum"> 666</span></a>          }
<a name="l667"><span class="linenum"> 667</span></a>          return '';
<a name="l668"><span class="linenum"> 668</span></a>      }
<a name="l669"><span class="linenum"> 669</span></a>  
<a name="l670"><span class="linenum"> 670</span></a>      <span class="comment">/**</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">     * Returns the code of the given UTF-8 character</span>
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment">     *</span>
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">     * @param  string $utf8char one UTF-8 character</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment">     * @return int    the code of the given character</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">     */</span>
<a name="l676"><span class="linenum"> 676</span></a>      public static function <a class="function" onClick="logFunction('utf8ord')" href="../../_functions/utf8ord.html" onMouseOver="funcPopup(event,'utf8ord')">utf8ord</a>(<a class="var it37295" onMouseOver="hilite(37295)" onMouseOut="lolite()" onClick="logVariable('utf8char')" href="../../_variables/utf8char.html">$utf8char</a>) {
<a name="l677"><span class="linenum"> 677</span></a>          if (<a class="var it37295" onMouseOver="hilite(37295)" onMouseOut="lolite()" onClick="logVariable('utf8char')" href="../../_variables/utf8char.html">$utf8char</a> == '') {
<a name="l678"><span class="linenum"> 678</span></a>              return 0;
<a name="l679"><span class="linenum"> 679</span></a>          }
<a name="l680"><span class="linenum"> 680</span></a>          <a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a> = <a class="phpfunction" onClick="logFunction('ord')" href="../../_functions/ord.html" onMouseOver="phpfuncPopup(event,'ord')">ord</a>(<a class="var it37295" onMouseOver="hilite(37295)" onMouseOut="lolite()" onClick="logVariable('utf8char')" href="../../_variables/utf8char.html">$utf8char</a>{0});
<a name="l681"><span class="linenum"> 681</span></a>          if (<a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a> &gt;= 0 &amp;&amp; <a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a> &lt;= 127) {
<a name="l682"><span class="linenum"> 682</span></a>              return <a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a>;
<a name="l683"><span class="linenum"> 683</span></a>          }
<a name="l684"><span class="linenum"> 684</span></a>          <a class="var it37297" onMouseOver="hilite(37297)" onMouseOut="lolite()" onClick="logVariable('ord1')" href="../../_variables/ord1.html">$ord1</a> = <a class="phpfunction" onClick="logFunction('ord')" href="../../_functions/ord.html" onMouseOver="phpfuncPopup(event,'ord')">ord</a>(<a class="var it37295" onMouseOver="hilite(37295)" onMouseOut="lolite()" onClick="logVariable('utf8char')" href="../../_variables/utf8char.html">$utf8char</a>{1});
<a name="l685"><span class="linenum"> 685</span></a>          if (<a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a> &gt;= 192 &amp;&amp; <a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a> &lt;= 223) {
<a name="l686"><span class="linenum"> 686</span></a>              return (<a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a> - 192) * 64 + (<a class="var it37297" onMouseOver="hilite(37297)" onMouseOut="lolite()" onClick="logVariable('ord1')" href="../../_variables/ord1.html">$ord1</a> - 128);
<a name="l687"><span class="linenum"> 687</span></a>          }
<a name="l688"><span class="linenum"> 688</span></a>          <a class="var it2014" onMouseOver="hilite(2014)" onMouseOut="lolite()" onClick="logVariable('ord2')" href="../../_variables/ord2.html">$ord2</a> = <a class="phpfunction" onClick="logFunction('ord')" href="../../_functions/ord.html" onMouseOver="phpfuncPopup(event,'ord')">ord</a>(<a class="var it37295" onMouseOver="hilite(37295)" onMouseOut="lolite()" onClick="logVariable('utf8char')" href="../../_variables/utf8char.html">$utf8char</a>{2});
<a name="l689"><span class="linenum"> 689</span></a>          if (<a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a> &gt;= 224 &amp;&amp; <a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a> &lt;= 239) {
<a name="l690"><span class="linenum"> 690</span></a>              return (<a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a> - 224) * 4096 + (<a class="var it37297" onMouseOver="hilite(37297)" onMouseOut="lolite()" onClick="logVariable('ord1')" href="../../_variables/ord1.html">$ord1</a> - 128) * 64 + (<a class="var it2014" onMouseOver="hilite(2014)" onMouseOut="lolite()" onClick="logVariable('ord2')" href="../../_variables/ord2.html">$ord2</a> - 128);
<a name="l691"><span class="linenum"> 691</span></a>          }
<a name="l692"><span class="linenum"> 692</span></a>          <a class="var it37298" onMouseOver="hilite(37298)" onMouseOut="lolite()" onClick="logVariable('ord3')" href="../../_variables/ord3.html">$ord3</a> = <a class="phpfunction" onClick="logFunction('ord')" href="../../_functions/ord.html" onMouseOver="phpfuncPopup(event,'ord')">ord</a>(<a class="var it37295" onMouseOver="hilite(37295)" onMouseOut="lolite()" onClick="logVariable('utf8char')" href="../../_variables/utf8char.html">$utf8char</a>{3});
<a name="l693"><span class="linenum"> 693</span></a>          if (<a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a> &gt;= 240 &amp;&amp; <a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a> &lt;= 247) {
<a name="l694"><span class="linenum"> 694</span></a>              return (<a class="var it37296" onMouseOver="hilite(37296)" onMouseOut="lolite()" onClick="logVariable('ord0')" href="../../_variables/ord0.html">$ord0</a> - 240) * 262144 + (<a class="var it37297" onMouseOver="hilite(37297)" onMouseOut="lolite()" onClick="logVariable('ord1')" href="../../_variables/ord1.html">$ord1</a> - 128 )* 4096 + (<a class="var it2014" onMouseOver="hilite(2014)" onMouseOut="lolite()" onClick="logVariable('ord2')" href="../../_variables/ord2.html">$ord2</a> - 128) * 64 + (<a class="var it37298" onMouseOver="hilite(37298)" onMouseOut="lolite()" onClick="logVariable('ord3')" href="../../_variables/ord3.html">$ord3</a> - 128);
<a name="l695"><span class="linenum"> 695</span></a>          }
<a name="l696"><span class="linenum"> 696</span></a>          return false;
<a name="l697"><span class="linenum"> 697</span></a>      }
<a name="l698"><span class="linenum"> 698</span></a>  
<a name="l699"><span class="linenum"> 699</span></a>      <span class="comment">/**</span>
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment">     * Makes first letter of each word capital - words must be separated by spaces.</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment">     * Use with care, this function does not work properly in many locales!!!</span>
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">     *</span>
<a name="l703"><span class="linenum"> 703</span></a>  <span class="comment">     * @param string $text input string</span>
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment">     * @return string</span>
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment">     */</span>
<a name="l706"><span class="linenum"> 706</span></a>      public static function <a class="function" onClick="logFunction('strtotitle')" href="../../_functions/strtotitle.html" onMouseOver="funcPopup(event,'strtotitle')">strtotitle</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>) {
<a name="l707"><span class="linenum"> 707</span></a>          if (empty(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>)) {
<a name="l708"><span class="linenum"> 708</span></a>              return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>;
<a name="l709"><span class="linenum"> 709</span></a>          }
<a name="l710"><span class="linenum"> 710</span></a>  
<a name="l711"><span class="linenum"> 711</span></a>          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('mb_convert_case')) {
<a name="l712"><span class="linenum"> 712</span></a>              return <a class="phpfunction" onClick="logFunction('mb_convert_case')" href="../../_functions/mb_convert_case.html" onMouseOver="phpfuncPopup(event,'mb_convert_case')">mb_convert_case</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>, MB_CASE_TITLE, 'UTF-8');
<a name="l713"><span class="linenum"> 713</span></a>          }
<a name="l714"><span class="linenum"> 714</span></a>  
<a name="l715"><span class="linenum"> 715</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = self::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>);
<a name="l716"><span class="linenum"> 716</span></a>          <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../../_variables/words.html">$words</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(' ', <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>);
<a name="l717"><span class="linenum"> 717</span></a>          foreach (<a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../../_variables/words.html">$words</a> as <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>=&gt;<a class="var it6546" onMouseOver="hilite(6546)" onMouseOut="lolite()" onClick="logVariable('word')" href="../../_variables/word.html">$word</a>) {
<a name="l718"><span class="linenum"> 718</span></a>              <a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../_variables/length.html">$length</a> = self::<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it6546" onMouseOver="hilite(6546)" onMouseOut="lolite()" onClick="logVariable('word')" href="../../_variables/word.html">$word</a>);
<a name="l719"><span class="linenum"> 719</span></a>              if (!<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../_variables/length.html">$length</a>) {
<a name="l720"><span class="linenum"> 720</span></a>                  continue;
<a name="l721"><span class="linenum"> 721</span></a>  
<a name="l722"><span class="linenum"> 722</span></a>              } else if (<a class="var it50" onMouseOver="hilite(50)" onMouseOut="lolite()" onClick="logVariable('length')" href="../../_variables/length.html">$length</a> == 1) {
<a name="l723"><span class="linenum"> 723</span></a>                  <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../../_variables/words.html">$words</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = self::<a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it6546" onMouseOver="hilite(6546)" onMouseOut="lolite()" onClick="logVariable('word')" href="../../_variables/word.html">$word</a>);
<a name="l724"><span class="linenum"> 724</span></a>  
<a name="l725"><span class="linenum"> 725</span></a>              } else {
<a name="l726"><span class="linenum"> 726</span></a>                  <a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a> = self::<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6546" onMouseOver="hilite(6546)" onMouseOut="lolite()" onClick="logVariable('word')" href="../../_variables/word.html">$word</a>, 0, 1);
<a name="l727"><span class="linenum"> 727</span></a>                  <a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a> = self::<a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a>);
<a name="l728"><span class="linenum"> 728</span></a>                  <a class="var it19208" onMouseOver="hilite(19208)" onMouseOut="lolite()" onClick="logVariable('rest')" href="../../_variables/rest.html">$rest</a>   = self::<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it6546" onMouseOver="hilite(6546)" onMouseOut="lolite()" onClick="logVariable('word')" href="../../_variables/word.html">$word</a>, 1);
<a name="l729"><span class="linenum"> 729</span></a>                  <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../../_variables/words.html">$words</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = <a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a>.<a class="var it19208" onMouseOver="hilite(19208)" onMouseOut="lolite()" onClick="logVariable('rest')" href="../../_variables/rest.html">$rest</a>;
<a name="l730"><span class="linenum"> 730</span></a>              }
<a name="l731"><span class="linenum"> 731</span></a>          }
<a name="l732"><span class="linenum"> 732</span></a>          return <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(' ', <a class="var it131" onMouseOver="hilite(131)" onMouseOut="lolite()" onClick="logVariable('words')" href="../../_variables/words.html">$words</a>);
<a name="l733"><span class="linenum"> 733</span></a>      }
<a name="l734"><span class="linenum"> 734</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'conv_case': ['conv_case', 'Translates all characters of a string into their respective case values. Unlike strtolower() and strtoupper() this method is locale independent. Note that the string length may change! eg. lower case German "ß" (sharp S) becomes upper case "SS" Unit-tested by Kasper Real case folding is language dependent, this method ignores this fact. ', [['lib/typo3','class.t3lib_cs.php',1668]], 3],
'get_encodings': ['get_encodings', 'Returns encoding options for select boxes, utf-8 and platform encoding first ', [['lib/classes','text.php',625]], 10],
'strtolower': ['strtolower', 'Convert a UTF-8 encoded string to lower case ', [['lib/phpexcel/PHPExcel/Shared','String.php',606],['lib/classes','text.php',330],['lib/typo3','class.t3lib_div.php',1336]], 817],
'trim_utf8_bom': ['trim_utf8_bom', 'Removes the BOM from unicode string {@link http://unicode.org/faq/utf_bom.html} ', [['lib/classes','text.php',611]], 3],
'utf8_to_entities': ['utf8_to_entities', 'Converts all chars > 127 to numeric entities. ', [['lib/typo3','class.t3lib_cs.php',772],['mod/scorm/datamodels','scormlib.php',895],['lib/classes','text.php',581]], 9],
'strrev': ['strrev', 'Reverse UTF-8 multibytes character sets (used for RTL languages) (We only do this because there is no mb_strrev or iconv_strrev) ', [['lib/classes','text.php',405]], 40],
'strrpos': ['strrpos', 'Find the position of the last occurrence of a substring in a string UTF-8 ONLY safe strrpos(), uses mbstring, falls back to iconv. ', [['lib/classes','text.php',389]], 75],
'specialtoascii': ['specialtoascii', 'Try to convert upper unicode characters to plain ascii, the returned string may contain unconverted unicode characters. ', [['lib/classes','text.php',417]], 4],
'convert': ['convert', '', [['lib','wiki_to_markdown.php',314],['backup/converter','convertlib.php',119],['backup/cc/cc_lib','cc_converter_url.php',36],['backup/cc/cc_lib','cc_converter_forum.php',36],['backup/cc/cc_lib','cc_converter_basiclti.php',36],['lib/html2text','Html2Text.php',325],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',18498],['backup/cc/cc_lib','cc_converter_quiz.php',40],['lib','navigationlib.php',4932],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',63],['backup/cc/cc_lib','cc_converter_resource.php',34],['backup/cc/cc_lib','cc_convert_moodle2.php',29],['backup/cc/cc_lib','cc_converter_lti.php',36],['lib/classes','text.php',162],['backup/cc/cc_lib','cc_converter_label.php',33],['backup/cc/cc_lib','cc_converter_page.php',35],['backup/cc/cc_lib','cc_converter_folder.php',33],['lib/lessphp','Functions.php',569],['backup/controller','restore_controller.class.php',439]], 141],
'parse_charset': ['parse_charset', 'Normalize - changes input character set to lowercase letters. ', [['lib/typo3','class.t3lib_cs.php',516],['lib/classes','text.php',116]], 15],
'make_temp_directory': ['make_temp_directory', 'Create a directory under tempdir and make sure it is writable. ', [['lib','setuplib.php',1642]], 50],
'entities_to_utf8': ['entities_to_utf8', 'Converts numeric entities (UNICODE, eg. decimal (&#1234;) or hexadecimal (&#x1b;)) to UTF-8 multibyte chars ', [['lib/typo3','class.t3lib_cs.php',810],['lib/classes','text.php',548]], 11],
'strrchr': ['strrchr', 'Finds the last occurrence of a character in a string within another. UTF-8 ONLY safe mb_strrchr(). ', [['lib/classes','text.php',275]], 15],
'str_max_bytes': ['str_max_bytes', 'Truncates a string to no more than a certain number of bytes in a multi-byte safe manner. UTF-8 only! ', [['lib/classes','text.php',251]], 11],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'strtoupper': ['strtoupper', 'Strtoupper multibyte wrapper function with HTML entities handling. ', [['lib/html2text','Html2Text.php',599],['lib/phpexcel/PHPExcel/Shared','String.php',592],['lib/html2text','lib.php',62],['lib/classes','text.php',351],['lib/typo3','class.t3lib_div.php',1323]], 565],
'iconv': ['iconv', 'Wrapper around global function iconv() ', [['lib/spout/src/Spout/Common/Helper','GlobalFunctionsHelper.php',255],['lib/htmlpurifier/HTMLPurifier','Encoder.php',40]], 23],
'encode_mimeheader': ['encode_mimeheader', 'Generate a correct base64 encoded header to be used in MIME mail messages. This function seems to be 100% compliant with RFC1342. Credits go to: paravoid (http://www.php.net/manual/en/function.mb-encode-mimeheader.php#60283). ', [['lib/classes','text.php',433]], 4],
'utf8ord': ['utf8ord', 'Returns the code of the given UTF-8 character ', [['lib/classes','text.php',670]], 7],
'strtrunc': ['strtrunc', 'Cuts a string short at a given byte length. ', [['lib/typo3','class.t3lib_cs.php',1635]], 1],
'substr': ['substr', 'Returns part of a string. ', [['lib/horde/framework/Horde','String.php',289],['lib/typo3','class.t3lib_cs.php',1463],['lib/classes','text.php',207]], 2823],
'fix_utf8': ['fix_utf8', 'Makes sure the data is using valid utf8, invalid characters are discarded. ', [['lib','moodlelib.php',1227]], 33],
'typo3': ['typo3', 'Return t3lib helper class, which is used for conversion between charsets ', [['lib/classes','text.php',51]], 12],
'reset_caches': ['reset_caches', 'This implementation does not use any caches. ', [['lib/classes','string_manager_install.php',245],['lib/classes','plugin_manager.php',115],['lib/classes/update','checker.php',74],['backup/moodle2','restore_stepslib.php',1538],['tag/classes','index_builder.php',367],['repository','lib.php',2636],['lib/dml','moodle_database.php',1052],['lib/classes','filetypes.php',419],['lib','accesslib.php',5149],['lib','accesslib.php',6045],['mod/glossary/classes/local','concept_cache.php',49],['lib/classes','string_manager_standard.php',599],['lib/classes','string_manager.php',127],['lib','filterlib.php',97],['lib/classes','text.php',108],['lib/classes','user.php',486]], 111],
'strpos': ['strpos', 'Find the position of the first occurrence of a substring in a string. UTF-8 ONLY safe strpos(), uses mbstring, falls back to iconv. ', [['lib/classes','text.php',372]], 1604],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'strtotitle': ['strtotitle', 'Convert a UTF-8 encoded string to title/proper case (uppercase every first character in each word, lower case all other characters) ', [['lib/phpexcel/PHPExcel/Shared','String.php',620],['lib/classes','text.php',699]], 5],
'speccharstoascii': ['speccharstoascii', 'Converts special chars (like æøåÆØÅ, umlauts etc) to ascii equivalents (usually double-bytes, like æ => ae etc.) ', [['lib/typo3','class.t3lib_cs.php',1718]], 1],
'conv': ['conv', 'Convert from one charset to another charset. ', [['lib/typo3','class.t3lib_cs.php',588]], 8],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'get_entities_table': ['get_entities_table', 'Returns HTML entity transliteration table. ', [['lib/classes','text.php',520]], 1],
'code2utf8': ['code2utf8', 'Returns the utf8 string corresponding to the unicode value (from php.net, courtesy - romans@void.lv) ', [['lib/classes','text.php',647]], 7],
'iconv_substr': ['iconv_substr', '', [], 6],
'base64_encode': ['base64_encode', '', [], 134],
'mb_strrpos': ['mb_strrpos', '', [], 4],
'error_reporting': ['error_reporting', '', [], 91],
'mb_strcut': ['mb_strcut', '', [], 2],
'trim': ['trim', '', [], 1948],
'array_flip': ['array_flip', '', [], 131],
'define': ['define', '', [], 2373],
'create_function': ['create_function', '', [], 43],
'strpos': ['strpos', '', [], 1604],
'decoct': ['decoct', '', [], 17],
'mb_strtolower': ['mb_strtolower', '', [], 7],
'implode': ['implode', '', [], 1281],
'phpversion': ['phpversion', '', [], 32],
'explode': ['explode', '', [], 1572],
'mb_substr': ['mb_substr', '', [], 24],
'strtolower': ['strtolower', '', [], 817],
'strrpos': ['strrpos', '', [], 75],
'mb_strtoupper': ['mb_strtoupper', '', [], 5],
'iconv_strlen': ['iconv_strlen', '', [], 4],
'mb_internal_encoding': ['mb_internal_encoding', '', [], 23],
'substr': ['substr', '', [], 2823],
'preg_replace_callback': ['preg_replace_callback', '', [], 136],
'array_reverse': ['array_reverse', '', [], 130],
'function_exists': ['function_exists', '', [], 419],
'floor': ['floor', '', [], 514],
'hexdec': ['hexdec', '', [], 72],
'iconv_strrpos': ['iconv_strrpos', '', [], 2],
'defined': ['defined', '', [], 4731],
'strtoupper': ['strtoupper', '', [], 565],
'mb_strlen': ['mb_strlen', '', [], 31],
'preg_match_all': ['preg_match_all', '', [], 161],
'ord': ['ord', '', [], 439],
'get_html_translation_table': ['get_html_translation_table', '', [], 6],
'mb_convert_case': ['mb_convert_case', '', [], 5],
'iconv_strpos': ['iconv_strpos', '', [], 2],
'chr': ['chr', '', [], 816],
'version_compare': ['version_compare', '', [], 74],
'mb_strpos': ['mb_strpos', '', [], 8],
'preg_match': ['preg_match', '', [], 1286],
'str_replace': ['str_replace', '', [], 1648],
'strtr': ['strtr', '', [], 63],
'stristr': ['stristr', '', [], 53]};
CLASS_DATA={
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566],
't3lib_cs': ['t3lib_cs', 'Class for conversion between charsets ', [['lib/typo3','class.t3lib_cs.php',61]], 1]};
CONST_DATA={
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'TYPO3_OS': ['TYPO3_OS', '', [['lib/classes','text.php',100]], 8]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
