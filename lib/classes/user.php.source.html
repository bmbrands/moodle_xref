<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/classes/user.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/classes';
filename='user.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/classes/</a> -> <a href="user.php.html">user.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="user.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="user.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * User class</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2013 Rajesh Taneja &lt;rajesh@moodle.com&gt;</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment">/**</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * User class to access user details.</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> *</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @todo       move api's from user/lib.php and depreciate old ones.</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @package    core</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @copyright  2013 Rajesh Taneja &lt;rajesh@moodle.com&gt;</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> */</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('core_user')" href="../../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a> {
<a name="l36"><span class="linenum">  36</span></a>      <span class="comment">/**</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     * No reply user id.</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">     */</span>
<a name="l39"><span class="linenum">  39</span></a>      const NOREPLY_USER = -10;
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>      <span class="comment">/**</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     * Support user id.</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     */</span>
<a name="l44"><span class="linenum">  44</span></a>      const SUPPORT_USER = -20;
<a name="l45"><span class="linenum">  45</span></a>  
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">    /** @var stdClass keep record of noreply user */</span>
<a name="l47"><span class="linenum">  47</span></a>      public static <a class="var it16330" onMouseOver="hilite(16330)" onMouseOut="lolite()" onClick="logVariable('noreplyuser')" href="../../_variables/noreplyuser.html">$noreplyuser</a> = false;
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">    /** @var stdClass keep record of support user */</span>
<a name="l50"><span class="linenum">  50</span></a>      public static <a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a> = false;
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">    /** @var array store user fields properties cache. */</span>
<a name="l53"><span class="linenum">  53</span></a>      protected static <a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a> = null;
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>      <span class="comment">/**</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     * Return user object from db or create noreply or support user,</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">     * if userid matches corse_user::NOREPLY_USER or corse_user::SUPPORT_USER</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     * respectively. If userid is not found, then return false.</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     *</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     * @param int $userid user id</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">     * @param string $fields A comma separated list of user fields to be returned, support and noreply user</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     *                       will not be filtered by this.</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     * @param int $strictness IGNORE_MISSING means compatible mode, false returned if user not found, debug message if more found;</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     *                        IGNORE_MULTIPLE means return first user, ignore multiple user records found(not recommended);</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">     *                        MUST_EXIST means throw an exception if no user record or multiple records found.</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     * @return stdClass|bool user record if found, else false.</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     * @throws dml_exception if user record not found and respective $strictness is set.</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     */</span>
<a name="l69"><span class="linenum">  69</span></a>      public static function <a class="function" onClick="logFunction('get_user')" href="../../_functions/get_user.html" onMouseOver="funcPopup(event,'get_user')">get_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = '*', <a class="var it1289" onMouseOver="hilite(1289)" onMouseOut="lolite()" onClick="logVariable('strictness')" href="../../_variables/strictness.html">$strictness</a> = <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>) {
<a name="l70"><span class="linenum">  70</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">        // If noreply user then create fake record and return.</span>
<a name="l73"><span class="linenum">  73</span></a>          switch (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l74"><span class="linenum">  74</span></a>              case self::NOREPLY_USER:
<a name="l75"><span class="linenum">  75</span></a>                  return self::<a class="function" onClick="logFunction('get_noreply_user')" href="../../_functions/get_noreply_user.html" onMouseOver="funcPopup(event,'get_noreply_user')">get_noreply_user</a>();
<a name="l76"><span class="linenum">  76</span></a>                  break;
<a name="l77"><span class="linenum">  77</span></a>              case self::SUPPORT_USER:
<a name="l78"><span class="linenum">  78</span></a>                  return self::<a class="function" onClick="logFunction('get_support_user')" href="../../_functions/get_support_user.html" onMouseOver="funcPopup(event,'get_support_user')">get_support_user</a>();
<a name="l79"><span class="linenum">  79</span></a>                  break;
<a name="l80"><span class="linenum">  80</span></a>              default:
<a name="l81"><span class="linenum">  81</span></a>                  return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>), <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>, <a class="var it1289" onMouseOver="hilite(1289)" onMouseOut="lolite()" onClick="logVariable('strictness')" href="../../_variables/strictness.html">$strictness</a>);
<a name="l82"><span class="linenum">  82</span></a>          }
<a name="l83"><span class="linenum">  83</span></a>      }
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>      <span class="comment">/**</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">     * Return user object from db based on their username.</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">     *</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">     * @param string $username The username of the user searched.</span>
<a name="l90"><span class="linenum">  90</span></a>  <span class="comment">     * @param string $fields A comma separated list of user fields to be returned, support and noreply user.</span>
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">     * @param int $mnethostid The id of the remote host.</span>
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">     * @param int $strictness IGNORE_MISSING means compatible mode, false returned if user not found, debug message if more found;</span>
<a name="l93"><span class="linenum">  93</span></a>  <span class="comment">     *                        IGNORE_MULTIPLE means return first user, ignore multiple user records found(not recommended);</span>
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">     *                        MUST_EXIST means throw an exception if no user record or multiple records found.</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment">     * @return stdClass|bool user record if found, else false.</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">     * @throws dml_exception if user record not found and respective $strictness is set.</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">     */</span>
<a name="l98"><span class="linenum">  98</span></a>      public static function <a class="function" onClick="logFunction('get_user_by_username')" href="../../_functions/get_user_by_username.html" onMouseOver="funcPopup(event,'get_user_by_username')">get_user_by_username</a>(<a class="var it200" onMouseOver="hilite(200)" onMouseOut="lolite()" onClick="logVariable('username')" href="../../_variables/username.html">$username</a>, <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = '*', <a class="var it3328" onMouseOver="hilite(3328)" onMouseOut="lolite()" onClick="logVariable('mnethostid')" href="../../_variables/mnethostid.html">$mnethostid</a> = null, <a class="var it1289" onMouseOver="hilite(1289)" onMouseOut="lolite()" onClick="logVariable('strictness')" href="../../_variables/strictness.html">$strictness</a> = <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>) {
<a name="l99"><span class="linenum">  99</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">        // Because we use the username as the search criteria, we must also restrict our search based on mnet host.</span>
<a name="l102"><span class="linenum"> 102</span></a>          if (empty(<a class="var it3328" onMouseOver="hilite(3328)" onMouseOut="lolite()" onClick="logVariable('mnethostid')" href="../../_variables/mnethostid.html">$mnethostid</a>)) {
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">            // If empty, we restrict to local users.</span>
<a name="l104"><span class="linenum"> 104</span></a>              <a class="var it3328" onMouseOver="hilite(3328)" onMouseOut="lolite()" onClick="logVariable('mnethostid')" href="../../_variables/mnethostid.html">$mnethostid</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('mnet_localhost_id')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/mnet_localhost_id.html">mnet_localhost_id</a>;
<a name="l105"><span class="linenum"> 105</span></a>          }
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('username' =&gt; <a class="var it200" onMouseOver="hilite(200)" onMouseOut="lolite()" onClick="logVariable('username')" href="../../_variables/username.html">$username</a>, 'mnethostid' =&gt; <a class="var it3328" onMouseOver="hilite(3328)" onMouseOut="lolite()" onClick="logVariable('mnethostid')" href="../../_variables/mnethostid.html">$mnethostid</a>), <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>, <a class="var it1289" onMouseOver="hilite(1289)" onMouseOut="lolite()" onClick="logVariable('strictness')" href="../../_variables/strictness.html">$strictness</a>);
<a name="l108"><span class="linenum"> 108</span></a>      }
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>      <span class="comment">/**</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">     * Helper function to return dummy noreply user record.</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">     *</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">     * @return stdClass</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">     */</span>
<a name="l115"><span class="linenum"> 115</span></a>      protected static function <a class="function" onClick="logFunction('get_dummy_user_record')" href="../../_functions/get_dummy_user_record.html" onMouseOver="funcPopup(event,'get_dummy_user_record')">get_dummy_user_record</a>() {
<a name="l116"><span class="linenum"> 116</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a> = new stdClass();
<a name="l119"><span class="linenum"> 119</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('id')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = self::NOREPLY_USER;
<a name="l120"><span class="linenum"> 120</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('email')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/email.html">email</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('noreplyaddress')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/noreplyaddress.html">noreplyaddress</a>;
<a name="l121"><span class="linenum"> 121</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('firstname')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/firstname.html">firstname</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('noreplyname');
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('username')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/username.html">username</a> = 'noreply';
<a name="l123"><span class="linenum"> 123</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('lastname')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/lastname.html">lastname</a> = '';
<a name="l124"><span class="linenum"> 124</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('confirmed')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/confirmed.html">confirmed</a> = 1;
<a name="l125"><span class="linenum"> 125</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('suspended')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/suspended.html">suspended</a> = 0;
<a name="l126"><span class="linenum"> 126</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('deleted')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/deleted.html">deleted</a> = 0;
<a name="l127"><span class="linenum"> 127</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('picture')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/picture.html">picture</a> = 0;
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('auth')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/auth.html">auth</a> = 'manual';
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('firstnamephonetic')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/firstnamephonetic.html">firstnamephonetic</a> = '';
<a name="l130"><span class="linenum"> 130</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('lastnamephonetic')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/lastnamephonetic.html">lastnamephonetic</a> = '';
<a name="l131"><span class="linenum"> 131</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('middlename')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/middlename.html">middlename</a> = '';
<a name="l132"><span class="linenum"> 132</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('alternatename')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/alternatename.html">alternatename</a> = '';
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>-&gt;<a onClick="logVariable('imagealt')" class="var it45002" onMouseOver="hilite(45002)" onMouseOut="lolite()" href="../../_variables/imagealt.html">imagealt</a> = '';
<a name="l134"><span class="linenum"> 134</span></a>          return <a class="var it35305" onMouseOver="hilite(35305)" onMouseOut="lolite()" onClick="logVariable('dummyuser')" href="../../_variables/dummyuser.html">$dummyuser</a>;
<a name="l135"><span class="linenum"> 135</span></a>      }
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>      <span class="comment">/**</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     * Return noreply user record, this is currently used in messaging</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     * system only for sending messages from noreply email.</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">     * It will return record of $CFG-&gt;noreplyuserid if set else return dummy</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">     * user object with hard-coded $user-&gt;emailstop = 1 so noreply can be sent to user.</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">     *</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment">     * @return stdClass user record.</span>
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment">     */</span>
<a name="l145"><span class="linenum"> 145</span></a>      public static function <a class="function" onClick="logFunction('get_noreply_user')" href="../../_functions/get_noreply_user.html" onMouseOver="funcPopup(event,'get_noreply_user')">get_noreply_user</a>() {
<a name="l146"><span class="linenum"> 146</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l147"><span class="linenum"> 147</span></a>  
<a name="l148"><span class="linenum"> 148</span></a>          if (!empty(self::<a class="var it16330" onMouseOver="hilite(16330)" onMouseOut="lolite()" onClick="logVariable('noreplyuser')" href="../../_variables/noreplyuser.html">$noreplyuser</a>)) {
<a name="l149"><span class="linenum"> 149</span></a>              return self::<a class="var it16330" onMouseOver="hilite(16330)" onMouseOut="lolite()" onClick="logVariable('noreplyuser')" href="../../_variables/noreplyuser.html">$noreplyuser</a>;
<a name="l150"><span class="linenum"> 150</span></a>          }
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">        // If noreply user is set then use it, else create one.</span>
<a name="l153"><span class="linenum"> 153</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('noreplyuserid')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/noreplyuserid.html">noreplyuserid</a>)) {
<a name="l154"><span class="linenum"> 154</span></a>              self::<a class="var it16330" onMouseOver="hilite(16330)" onMouseOut="lolite()" onClick="logVariable('noreplyuser')" href="../../_variables/noreplyuser.html">$noreplyuser</a> = self::<a class="function" onClick="logFunction('get_user')" href="../../_functions/get_user.html" onMouseOver="funcPopup(event,'get_user')">get_user</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('noreplyuserid')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/noreplyuserid.html">noreplyuserid</a>);
<a name="l155"><span class="linenum"> 155</span></a>              self::<a class="var it16330" onMouseOver="hilite(16330)" onMouseOut="lolite()" onClick="logVariable('noreplyuser')" href="../../_variables/noreplyuser.html">$noreplyuser</a>-&gt;<a onClick="logVariable('emailstop')" class="var it44525" onMouseOver="hilite(44525)" onMouseOut="lolite()" href="../../_variables/emailstop.html">emailstop</a> = 1; <span class="comment">// Force msg stop for this user.</span>
<a name="l156"><span class="linenum"> 156</span></a>              return self::<a class="var it16330" onMouseOver="hilite(16330)" onMouseOut="lolite()" onClick="logVariable('noreplyuser')" href="../../_variables/noreplyuser.html">$noreplyuser</a>;
<a name="l157"><span class="linenum"> 157</span></a>          } else {
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">            // Do not cache the dummy user record to avoid language internationalization issues.</span>
<a name="l159"><span class="linenum"> 159</span></a>              <a class="var it16330" onMouseOver="hilite(16330)" onMouseOut="lolite()" onClick="logVariable('noreplyuser')" href="../../_variables/noreplyuser.html">$noreplyuser</a> = self::<a class="function" onClick="logFunction('get_dummy_user_record')" href="../../_functions/get_dummy_user_record.html" onMouseOver="funcPopup(event,'get_dummy_user_record')">get_dummy_user_record</a>();
<a name="l160"><span class="linenum"> 160</span></a>              <a class="var it16330" onMouseOver="hilite(16330)" onMouseOut="lolite()" onClick="logVariable('noreplyuser')" href="../../_variables/noreplyuser.html">$noreplyuser</a>-&gt;<a onClick="logVariable('maildisplay')" class="var it44525" onMouseOver="hilite(44525)" onMouseOut="lolite()" href="../../_variables/maildisplay.html">maildisplay</a> = '1'; <span class="comment">// Show to all.</span>
<a name="l161"><span class="linenum"> 161</span></a>              <a class="var it16330" onMouseOver="hilite(16330)" onMouseOut="lolite()" onClick="logVariable('noreplyuser')" href="../../_variables/noreplyuser.html">$noreplyuser</a>-&gt;<a onClick="logVariable('emailstop')" class="var it44525" onMouseOver="hilite(44525)" onMouseOut="lolite()" href="../../_variables/emailstop.html">emailstop</a> = 1;
<a name="l162"><span class="linenum"> 162</span></a>              return <a class="var it16330" onMouseOver="hilite(16330)" onMouseOut="lolite()" onClick="logVariable('noreplyuser')" href="../../_variables/noreplyuser.html">$noreplyuser</a>;
<a name="l163"><span class="linenum"> 163</span></a>          }
<a name="l164"><span class="linenum"> 164</span></a>      }
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>      <span class="comment">/**</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * Return support user record, this is currently used in messaging</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     * system only for sending messages to support email.</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment">     * $CFG-&gt;supportuserid is set then returns user record</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     * $CFG-&gt;supportemail is set then return dummy record with $CFG-&gt;supportemail</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">     * else return admin user record with hard-coded $user-&gt;emailstop = 0, so user</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     * gets support message.</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     *</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">     * @return stdClass user record.</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">     */</span>
<a name="l176"><span class="linenum"> 176</span></a>      public static function <a class="function" onClick="logFunction('get_support_user')" href="../../_functions/get_support_user.html" onMouseOver="funcPopup(event,'get_support_user')">get_support_user</a>() {
<a name="l177"><span class="linenum"> 177</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>          if (!empty(self::<a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>)) {
<a name="l180"><span class="linenum"> 180</span></a>              return self::<a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>;
<a name="l181"><span class="linenum"> 181</span></a>          }
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">        // If custom support user is set then use it, else if supportemail is set then use it, else use noreply.</span>
<a name="l184"><span class="linenum"> 184</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('supportuserid')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/supportuserid.html">supportuserid</a>)) {
<a name="l185"><span class="linenum"> 185</span></a>              self::<a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a> = self::<a class="function" onClick="logFunction('get_user')" href="../../_functions/get_user.html" onMouseOver="funcPopup(event,'get_user')">get_user</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('supportuserid')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/supportuserid.html">supportuserid</a>, '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l186"><span class="linenum"> 186</span></a>          } else if (empty(self::<a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>) &amp;&amp; !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('supportemail')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/supportemail.html">supportemail</a>)) {
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">            // Try sending it to support email if support user is not set.</span>
<a name="l188"><span class="linenum"> 188</span></a>              <a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a> = self::<a class="function" onClick="logFunction('get_dummy_user_record')" href="../../_functions/get_dummy_user_record.html" onMouseOver="funcPopup(event,'get_dummy_user_record')">get_dummy_user_record</a>();
<a name="l189"><span class="linenum"> 189</span></a>              <a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>-&gt;<a onClick="logVariable('id')" class="var it44294" onMouseOver="hilite(44294)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = self::SUPPORT_USER;
<a name="l190"><span class="linenum"> 190</span></a>              <a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>-&gt;<a onClick="logVariable('email')" class="var it44294" onMouseOver="hilite(44294)" onMouseOut="lolite()" href="../../_variables/email.html">email</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('supportemail')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/supportemail.html">supportemail</a>;
<a name="l191"><span class="linenum"> 191</span></a>              if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('supportname')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/supportname.html">supportname</a>) {
<a name="l192"><span class="linenum"> 192</span></a>                  <a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>-&gt;<a onClick="logVariable('firstname')" class="var it44294" onMouseOver="hilite(44294)" onMouseOut="lolite()" href="../../_variables/firstname.html">firstname</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('supportname')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/supportname.html">supportname</a>;
<a name="l193"><span class="linenum"> 193</span></a>              }
<a name="l194"><span class="linenum"> 194</span></a>              <a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>-&gt;<a onClick="logVariable('username')" class="var it44294" onMouseOver="hilite(44294)" onMouseOut="lolite()" href="../../_variables/username.html">username</a> = 'support';
<a name="l195"><span class="linenum"> 195</span></a>              <a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>-&gt;<a onClick="logVariable('maildisplay')" class="var it44294" onMouseOver="hilite(44294)" onMouseOut="lolite()" href="../../_variables/maildisplay.html">maildisplay</a> = '1'; <span class="comment">// Show to all.</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">            // Unset emailstop to make sure support message is sent.</span>
<a name="l197"><span class="linenum"> 197</span></a>              <a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>-&gt;<a onClick="logVariable('emailstop')" class="var it44294" onMouseOver="hilite(44294)" onMouseOut="lolite()" href="../../_variables/emailstop.html">emailstop</a> = 0;
<a name="l198"><span class="linenum"> 198</span></a>              return <a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>;
<a name="l199"><span class="linenum"> 199</span></a>          }
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">        // Send support msg to admin user if nothing is set above.</span>
<a name="l202"><span class="linenum"> 202</span></a>          if (empty(self::<a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>)) {
<a name="l203"><span class="linenum"> 203</span></a>              self::<a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a> = <a class="function" onClick="logFunction('get_admin')" href="../../_functions/get_admin.html" onMouseOver="funcPopup(event,'get_admin')">get_admin</a>();
<a name="l204"><span class="linenum"> 204</span></a>          }
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">        // Unset emailstop to make sure support message is sent.</span>
<a name="l207"><span class="linenum"> 207</span></a>          self::<a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>-&gt;<a onClick="logVariable('emailstop')" class="var it44294" onMouseOver="hilite(44294)" onMouseOut="lolite()" href="../../_variables/emailstop.html">emailstop</a> = 0;
<a name="l208"><span class="linenum"> 208</span></a>          return self::<a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a>;
<a name="l209"><span class="linenum"> 209</span></a>      }
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>      <span class="comment">/**</span>
<a name="l212"><span class="linenum"> 212</span></a>  <span class="comment">     * Reset self::$noreplyuser and self::$supportuser.</span>
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">     * This is only used by phpunit, and there is no other use case for this function.</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment">     * Please don't use it outside phpunit.</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     */</span>
<a name="l216"><span class="linenum"> 216</span></a>      public static function <a class="function" onClick="logFunction('reset_internal_users')" href="../../_functions/reset_internal_users.html" onMouseOver="funcPopup(event,'reset_internal_users')">reset_internal_users</a>() {
<a name="l217"><span class="linenum"> 217</span></a>          if (<a class="constant" onClick="logConstant('PHPUNIT_TEST')" href="../../_constants/PHPUNIT_TEST.html" onMouseOver="constPopup(event,'PHPUNIT_TEST')">PHPUNIT_TEST</a>) {
<a name="l218"><span class="linenum"> 218</span></a>              self::<a class="var it16330" onMouseOver="hilite(16330)" onMouseOut="lolite()" onClick="logVariable('noreplyuser')" href="../../_variables/noreplyuser.html">$noreplyuser</a> = false;
<a name="l219"><span class="linenum"> 219</span></a>              self::<a class="var it13960" onMouseOver="hilite(13960)" onMouseOut="lolite()" onClick="logVariable('supportuser')" href="../../_variables/supportuser.html">$supportuser</a> = false;
<a name="l220"><span class="linenum"> 220</span></a>          } else {
<a name="l221"><span class="linenum"> 221</span></a>              <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('<a class="function" onClick="logFunction('reset_internal_users')" href="../../_functions/reset_internal_users.html" onMouseOver="funcPopup(event,'reset_internal_users')">reset_internal_users</a>() should not be used outside phpunit.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l222"><span class="linenum"> 222</span></a>          }
<a name="l223"><span class="linenum"> 223</span></a>      }
<a name="l224"><span class="linenum"> 224</span></a>  
<a name="l225"><span class="linenum"> 225</span></a>      <span class="comment">/**</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">     * Return true is user id is greater than self::NOREPLY_USER and</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">     * alternatively check db.</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment">     *</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">     * @param int $userid user id.</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">     * @param bool $checkdb if true userid will be checked in db. By default it's false, and</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment">     *                      userid is compared with NOREPLY_USER for performance.</span>
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment">     * @return bool true is real user else false.</span>
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">     */</span>
<a name="l234"><span class="linenum"> 234</span></a>      public static function <a class="function" onClick="logFunction('is_real_user')" href="../../_functions/is_real_user.html" onMouseOver="funcPopup(event,'is_real_user')">is_real_user</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it38210" onMouseOver="hilite(38210)" onMouseOut="lolite()" onClick="logVariable('checkdb')" href="../../_variables/checkdb.html">$checkdb</a> = false) {
<a name="l235"><span class="linenum"> 235</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l236"><span class="linenum"> 236</span></a>  
<a name="l237"><span class="linenum"> 237</span></a>          if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> &lt; 0) {
<a name="l238"><span class="linenum"> 238</span></a>              return false;
<a name="l239"><span class="linenum"> 239</span></a>          }
<a name="l240"><span class="linenum"> 240</span></a>          if (<a class="var it38210" onMouseOver="hilite(38210)" onMouseOut="lolite()" onClick="logVariable('checkdb')" href="../../_variables/checkdb.html">$checkdb</a>) {
<a name="l241"><span class="linenum"> 241</span></a>              return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('user', array('id' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l242"><span class="linenum"> 242</span></a>          } else {
<a name="l243"><span class="linenum"> 243</span></a>              return true;
<a name="l244"><span class="linenum"> 244</span></a>          }
<a name="l245"><span class="linenum"> 245</span></a>      }
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>      <span class="comment">/**</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">     * Check if the given user is an active user in the site.</span>
<a name="l249"><span class="linenum"> 249</span></a>  <span class="comment">     *</span>
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">     * @param  stdClass  $user         user object</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">     * @param  boolean $checksuspended whether to check if the user has the account suspended</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">     * @param  boolean $checknologin   whether to check if the user uses the nologin auth method</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     * @since  Moodle 3.0</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     */</span>
<a name="l256"><span class="linenum"> 256</span></a>      public static function <a class="function" onClick="logFunction('require_active_user')" href="../../_functions/require_active_user.html" onMouseOver="funcPopup(event,'require_active_user')">require_active_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it38211" onMouseOver="hilite(38211)" onMouseOut="lolite()" onClick="logVariable('checksuspended')" href="../../_variables/checksuspended.html">$checksuspended</a> = false, <a class="var it38212" onMouseOver="hilite(38212)" onMouseOut="lolite()" onClick="logVariable('checknologin')" href="../../_variables/checknologin.html">$checknologin</a> = false) {
<a name="l257"><span class="linenum"> 257</span></a>  
<a name="l258"><span class="linenum"> 258</span></a>          if (!self::<a class="function" onClick="logFunction('is_real_user')" href="../../_functions/is_real_user.html" onMouseOver="funcPopup(event,'is_real_user')">is_real_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l259"><span class="linenum"> 259</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('invaliduser', 'error');
<a name="l260"><span class="linenum"> 260</span></a>          }
<a name="l261"><span class="linenum"> 261</span></a>  
<a name="l262"><span class="linenum"> 262</span></a>          if (<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('deleted')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/deleted.html">deleted</a>) {
<a name="l263"><span class="linenum"> 263</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('userdeleted');
<a name="l264"><span class="linenum"> 264</span></a>          }
<a name="l265"><span class="linenum"> 265</span></a>  
<a name="l266"><span class="linenum"> 266</span></a>          if (empty(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('confirmed')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/confirmed.html">confirmed</a>)) {
<a name="l267"><span class="linenum"> 267</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('usernotconfirmed', 'moodle', '', <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('username')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/username.html">username</a>);
<a name="l268"><span class="linenum"> 268</span></a>          }
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>          if (<a class="function" onClick="logFunction('isguestuser')" href="../../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>)) {
<a name="l271"><span class="linenum"> 271</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('guestsarenotallowed', 'error');
<a name="l272"><span class="linenum"> 272</span></a>          }
<a name="l273"><span class="linenum"> 273</span></a>  
<a name="l274"><span class="linenum"> 274</span></a>          if (<a class="var it38211" onMouseOver="hilite(38211)" onMouseOut="lolite()" onClick="logVariable('checksuspended')" href="../../_variables/checksuspended.html">$checksuspended</a> and <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('suspended')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/suspended.html">suspended</a>) {
<a name="l275"><span class="linenum"> 275</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('suspended', 'auth');
<a name="l276"><span class="linenum"> 276</span></a>          }
<a name="l277"><span class="linenum"> 277</span></a>  
<a name="l278"><span class="linenum"> 278</span></a>          if (<a class="var it38212" onMouseOver="hilite(38212)" onMouseOut="lolite()" onClick="logVariable('checknologin')" href="../../_variables/checknologin.html">$checknologin</a> and <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('auth')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/auth.html">auth</a> == 'nologin') {
<a name="l279"><span class="linenum"> 279</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('suspended', 'auth');
<a name="l280"><span class="linenum"> 280</span></a>          }
<a name="l281"><span class="linenum"> 281</span></a>      }
<a name="l282"><span class="linenum"> 282</span></a>  
<a name="l283"><span class="linenum"> 283</span></a>      <span class="comment">/**</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">     * Updates the provided users profile picture based upon the expected fields returned from the edit or edit_advanced forms.</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">     *</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">     * @param stdClass $usernew An object that contains some information about the user being updated</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">     * @param array $filemanageroptions</span>
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">     * @return bool True if the user was updated, false if it stayed the same.</span>
<a name="l289"><span class="linenum"> 289</span></a>  <span class="comment">     */</span>
<a name="l290"><span class="linenum"> 290</span></a>      public static function <a class="function" onClick="logFunction('update_picture')" href="../../_functions/update_picture.html" onMouseOver="funcPopup(event,'update_picture')">update_picture</a>(stdClass <a class="var it3325" onMouseOver="hilite(3325)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>, <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('filemanageroptions')" href="../../_variables/filemanageroptions.html">$filemanageroptions</a> = array()) {
<a name="l291"><span class="linenum"> 291</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l292"><span class="linenum"> 292</span></a>          require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/gdlib.php&quot;);
<a name="l293"><span class="linenum"> 293</span></a>  
<a name="l294"><span class="linenum"> 294</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_user')" href="../../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it3325" onMouseOver="hilite(3325)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;<a onClick="logVariable('id')" class="var it43513" onMouseOver="hilite(43513)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l295"><span class="linenum"> 295</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="class" onClick="logClass('core_user')" href="../../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a>::<a class="function" onClick="logFunction('get_user')" href="../../_functions/get_user.html" onMouseOver="funcPopup(event,'get_user')">get_user</a>(<a class="var it3325" onMouseOver="hilite(3325)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;<a onClick="logVariable('id')" class="var it43513" onMouseOver="hilite(43513)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'id, picture', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l296"><span class="linenum"> 296</span></a>  
<a name="l297"><span class="linenum"> 297</span></a>          <a class="var it35338" onMouseOver="hilite(35338)" onMouseOut="lolite()" onClick="logVariable('newpicture')" href="../../_variables/newpicture.html">$newpicture</a> = <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('picture')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/picture.html">picture</a>;
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment">        // Get file_storage to process files.</span>
<a name="l299"><span class="linenum"> 299</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l300"><span class="linenum"> 300</span></a>          if (!empty(<a class="var it3325" onMouseOver="hilite(3325)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;<a onClick="logVariable('deletepicture')" class="var it43513" onMouseOver="hilite(43513)" onMouseOut="lolite()" href="../../_variables/deletepicture.html">deletepicture</a>)) {
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment">            // The user has chosen to delete the selected users picture.</span>
<a name="l302"><span class="linenum"> 302</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'user', 'icon'); <span class="comment">// Drop all images in area.</span>
<a name="l303"><span class="linenum"> 303</span></a>              <a class="var it35338" onMouseOver="hilite(35338)" onMouseOut="lolite()" onClick="logVariable('newpicture')" href="../../_variables/newpicture.html">$newpicture</a> = 0;
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>          } else {
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">            // Save newly uploaded file, this will avoid context mismatch for newly created users.</span>
<a name="l307"><span class="linenum"> 307</span></a>              <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it3325" onMouseOver="hilite(3325)" onMouseOut="lolite()" onClick="logVariable('usernew')" href="../../_variables/usernew.html">$usernew</a>-&gt;<a onClick="logVariable('imagefile')" class="var it43513" onMouseOver="hilite(43513)" onMouseOut="lolite()" href="../../_variables/imagefile.html">imagefile</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'user', 'newicon', 0, <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('filemanageroptions')" href="../../_variables/filemanageroptions.html">$filemanageroptions</a>);
<a name="l308"><span class="linenum"> 308</span></a>              if ((<a class="var it38213" onMouseOver="hilite(38213)" onMouseOut="lolite()" onClick="logVariable('iconfiles')" href="../../_variables/iconfiles.html">$iconfiles</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'user', 'newicon')) &amp;&amp; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it38213" onMouseOver="hilite(38213)" onMouseOut="lolite()" onClick="logVariable('iconfiles')" href="../../_variables/iconfiles.html">$iconfiles</a>) == 2) {
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">                // Get file which was uploaded in draft area.</span>
<a name="l310"><span class="linenum"> 310</span></a>                  foreach (<a class="var it38213" onMouseOver="hilite(38213)" onMouseOut="lolite()" onClick="logVariable('iconfiles')" href="../../_variables/iconfiles.html">$iconfiles</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l311"><span class="linenum"> 311</span></a>                      if (!<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l312"><span class="linenum"> 312</span></a>                          break;
<a name="l313"><span class="linenum"> 313</span></a>                      }
<a name="l314"><span class="linenum"> 314</span></a>                  }
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">                // Copy file to temporary location and the send it for processing icon.</span>
<a name="l316"><span class="linenum"> 316</span></a>                  if (<a class="var it21934" onMouseOver="hilite(21934)" onMouseOut="lolite()" onClick="logVariable('iconfile')" href="../../_variables/iconfile.html">$iconfile</a> = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('copy_content_to_temp')" href="../../_functions/copy_content_to_temp.html" onMouseOver="funcPopup(event,'copy_content_to_temp')">copy_content_to_temp</a>()) {
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">                    // There is a new image that has been uploaded.</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">                    // Process the new image and set the user to make use of it.</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">                    // NOTE: Uploaded images always take over Gravatar.</span>
<a name="l320"><span class="linenum"> 320</span></a>                      <a class="var it35338" onMouseOver="hilite(35338)" onMouseOut="lolite()" onClick="logVariable('newpicture')" href="../../_variables/newpicture.html">$newpicture</a> = (int)<a class="function" onClick="logFunction('process_new_icon')" href="../../_functions/process_new_icon.html" onMouseOver="funcPopup(event,'process_new_icon')">process_new_icon</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, 'user', 'icon', 0, <a class="var it21934" onMouseOver="hilite(21934)" onMouseOut="lolite()" onClick="logVariable('iconfile')" href="../../_variables/iconfile.html">$iconfile</a>);
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">                    // Delete temporary file.</span>
<a name="l322"><span class="linenum"> 322</span></a>                      @<a class="phpfunction" onClick="logFunction('unlink')" href="../../_functions/unlink.html" onMouseOver="phpfuncPopup(event,'unlink')">unlink</a>(<a class="var it21934" onMouseOver="hilite(21934)" onMouseOut="lolite()" onClick="logVariable('iconfile')" href="../../_variables/iconfile.html">$iconfile</a>);
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment">                    // Remove uploaded file.</span>
<a name="l324"><span class="linenum"> 324</span></a>                      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'user', 'newicon');
<a name="l325"><span class="linenum"> 325</span></a>                  } else {
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">                    // Something went wrong while creating temp file.</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">                    // Remove uploaded file.</span>
<a name="l328"><span class="linenum"> 328</span></a>                      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'user', 'newicon');
<a name="l329"><span class="linenum"> 329</span></a>                      return false;
<a name="l330"><span class="linenum"> 330</span></a>                  }
<a name="l331"><span class="linenum"> 331</span></a>              }
<a name="l332"><span class="linenum"> 332</span></a>          }
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>          if (<a class="var it35338" onMouseOver="hilite(35338)" onMouseOut="lolite()" onClick="logVariable('newpicture')" href="../../_variables/newpicture.html">$newpicture</a> != <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('picture')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/picture.html">picture</a>) {
<a name="l335"><span class="linenum"> 335</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('user', 'picture', <a class="var it35338" onMouseOver="hilite(35338)" onMouseOut="lolite()" onClick="logVariable('newpicture')" href="../../_variables/newpicture.html">$newpicture</a>, array('id' =&gt; <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l336"><span class="linenum"> 336</span></a>              return true;
<a name="l337"><span class="linenum"> 337</span></a>          } else {
<a name="l338"><span class="linenum"> 338</span></a>              return false;
<a name="l339"><span class="linenum"> 339</span></a>          }
<a name="l340"><span class="linenum"> 340</span></a>      }
<a name="l341"><span class="linenum"> 341</span></a>  
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>      <span class="comment">/**</span>
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment">     * Definition of user profile fields and the expected parameter type for data validation.</span>
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">     *</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">     * array(</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">     *     'property_name' =&gt; array(       // The user property to be checked. Should match the field on the user table.</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">     *          'null' =&gt; NULL_ALLOWED,    // Defaults to NULL_NOT_ALLOWED. Takes NULL_NOT_ALLOWED or NULL_ALLOWED.</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">     *          'type' =&gt; PARAM_TYPE,      // Expected parameter type of the user field.</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">     *          'choices' =&gt; array(1, 2..) // An array of accepted values of the user field.</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">     *          'default' =&gt; $CFG-&gt;setting // An default value for the field.</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">     *     )</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">     * )</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment">     *</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment">     * The fields choices and default are optional.</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">     *</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">     * @return void</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">     */</span>
<a name="l360"><span class="linenum"> 360</span></a>      protected static function <a class="function" onClick="logFunction('fill_properties_cache')" href="../../_functions/fill_properties_cache.html" onMouseOver="funcPopup(event,'fill_properties_cache')">fill_properties_cache</a>() {
<a name="l361"><span class="linenum"> 361</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l362"><span class="linenum"> 362</span></a>          if (self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a> !== null) {
<a name="l363"><span class="linenum"> 363</span></a>              return;
<a name="l364"><span class="linenum"> 364</span></a>          }
<a name="l365"><span class="linenum"> 365</span></a>  
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment">        // Array of user fields properties and expected parameters.</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment">        // Every new field on the user table should be added here otherwise it won't be validated.</span>
<a name="l368"><span class="linenum"> 368</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = array();
<a name="l369"><span class="linenum"> 369</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['id'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l370"><span class="linenum"> 370</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['auth'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_AUTH')" href="../../_constants/PARAM_AUTH.html" onMouseOver="constPopup(event,'PARAM_AUTH')">PARAM_AUTH</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l371"><span class="linenum"> 371</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['confirmed'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l372"><span class="linenum"> 372</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['policyagreed'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l373"><span class="linenum"> 373</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['deleted'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l374"><span class="linenum"> 374</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['suspended'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l375"><span class="linenum"> 375</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['mnethostid'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l376"><span class="linenum"> 376</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['username'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_USERNAME')" href="../../_constants/PARAM_USERNAME.html" onMouseOver="constPopup(event,'PARAM_USERNAME')">PARAM_USERNAME</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l377"><span class="linenum"> 377</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['password'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l378"><span class="linenum"> 378</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['idnumber'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l379"><span class="linenum"> 379</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['firstname'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l380"><span class="linenum"> 380</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['lastname'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l381"><span class="linenum"> 381</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['surname'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l382"><span class="linenum"> 382</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['email'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_RAW_TRIMMED')" href="../../_constants/PARAM_RAW_TRIMMED.html" onMouseOver="constPopup(event,'PARAM_RAW_TRIMMED')">PARAM_RAW_TRIMMED</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l383"><span class="linenum"> 383</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['emailstop'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l384"><span class="linenum"> 384</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['icq'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l385"><span class="linenum"> 385</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['skype'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_ALLOWED')" href="../../_constants/NULL_ALLOWED.html" onMouseOver="constPopup(event,'NULL_ALLOWED')">NULL_ALLOWED</a>);
<a name="l386"><span class="linenum"> 386</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['aim'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l387"><span class="linenum"> 387</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['yahoo'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l388"><span class="linenum"> 388</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['msn'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l389"><span class="linenum"> 389</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['phone1'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l390"><span class="linenum"> 390</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['phone2'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l391"><span class="linenum"> 391</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['institution'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l392"><span class="linenum"> 392</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['department'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l393"><span class="linenum"> 393</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['address'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l394"><span class="linenum"> 394</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['city'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>, 'default' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultcity')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/defaultcity.html">defaultcity</a>);
<a name="l395"><span class="linenum"> 395</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['country'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>, 'default' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('country')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/country.html">country</a>,
<a name="l396"><span class="linenum"> 396</span></a>                  'choices' =&gt; <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(array('' =&gt; ''), <a class="function" onClick="logFunction('get_string_manager')" href="../../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('get_list_of_countries')" href="../../_functions/get_list_of_countries.html" onMouseOver="funcPopup(event,'get_list_of_countries')">get_list_of_countries</a>(true, true)));
<a name="l397"><span class="linenum"> 397</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['lang'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_LANG')" href="../../_constants/PARAM_LANG.html" onMouseOver="constPopup(event,'PARAM_LANG')">PARAM_LANG</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>, 'default' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('lang')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/lang.html">lang</a>,
<a name="l398"><span class="linenum"> 398</span></a>                  'choices' =&gt; <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(array('' =&gt; ''), <a class="function" onClick="logFunction('get_string_manager')" href="../../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('get_list_of_translations')" href="../../_functions/get_list_of_translations.html" onMouseOver="funcPopup(event,'get_list_of_translations')">get_list_of_translations</a>(false)));
<a name="l399"><span class="linenum"> 399</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['calendartype'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>, 'default' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('calendartype')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/calendartype.html">calendartype</a>,
<a name="l400"><span class="linenum"> 400</span></a>                  'choices' =&gt; <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(array('' =&gt; ''), \core_calendar\<a class="class" onClick="logClass('type_factory')" href="../../_classes/type_factory.html" onMouseOver="classPopup(event,'type_factory')">type_factory</a>::<a class="function" onClick="logFunction('get_list_of_calendar_types')" href="../../_functions/get_list_of_calendar_types.html" onMouseOver="funcPopup(event,'get_list_of_calendar_types')">get_list_of_calendar_types</a>()));
<a name="l401"><span class="linenum"> 401</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['theme'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_THEME')" href="../../_constants/PARAM_THEME.html" onMouseOver="constPopup(event,'PARAM_THEME')">PARAM_THEME</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>,
<a name="l402"><span class="linenum"> 402</span></a>                  'default' =&gt; <a class="class" onClick="logClass('theme_config')" href="../../_classes/theme_config.html" onMouseOver="classPopup(event,'theme_config')">theme_config</a>::DEFAULT_THEME, 'choices' =&gt; <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(array('' =&gt; ''), <a class="function" onClick="logFunction('get_list_of_themes')" href="../../_functions/get_list_of_themes.html" onMouseOver="funcPopup(event,'get_list_of_themes')">get_list_of_themes</a>()));
<a name="l403"><span class="linenum"> 403</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['timezone'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_TIMEZONE')" href="../../_constants/PARAM_TIMEZONE.html" onMouseOver="constPopup(event,'PARAM_TIMEZONE')">PARAM_TIMEZONE</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>,
<a name="l404"><span class="linenum"> 404</span></a>                  'default' =&gt; <a class="class" onClick="logClass('core_date')" href="../../_classes/core_date.html" onMouseOver="classPopup(event,'core_date')">core_date</a>::<a class="function" onClick="logFunction('get_server_timezone')" href="../../_functions/get_server_timezone.html" onMouseOver="funcPopup(event,'get_server_timezone')">get_server_timezone</a>()); <span class="comment">// Must not use choices here: timezones can come and go.</span>
<a name="l405"><span class="linenum"> 405</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['firstaccess'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l406"><span class="linenum"> 406</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['lastaccess'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l407"><span class="linenum"> 407</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['lastlogin'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l408"><span class="linenum"> 408</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['currentlogin'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l409"><span class="linenum"> 409</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['lastip'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l410"><span class="linenum"> 410</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['secret'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l411"><span class="linenum"> 411</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['picture'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l412"><span class="linenum"> 412</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['url'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_URL')" href="../../_constants/PARAM_URL.html" onMouseOver="constPopup(event,'PARAM_URL')">PARAM_URL</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l413"><span class="linenum"> 413</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['description'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_ALLOWED')" href="../../_constants/NULL_ALLOWED.html" onMouseOver="constPopup(event,'NULL_ALLOWED')">NULL_ALLOWED</a>);
<a name="l414"><span class="linenum"> 414</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['descriptionformat'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l415"><span class="linenum"> 415</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['mailformat'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>,
<a name="l416"><span class="linenum"> 416</span></a>                  'default' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultpreference_mailformat')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/defaultpreference_mailformat.html">defaultpreference_mailformat</a>);
<a name="l417"><span class="linenum"> 417</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['maildigest'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>,
<a name="l418"><span class="linenum"> 418</span></a>                  'default' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultpreference_maildigest')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/defaultpreference_maildigest.html">defaultpreference_maildigest</a>);
<a name="l419"><span class="linenum"> 419</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['maildisplay'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>,
<a name="l420"><span class="linenum"> 420</span></a>                  'default' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultpreference_maildisplay')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/defaultpreference_maildisplay.html">defaultpreference_maildisplay</a>);
<a name="l421"><span class="linenum"> 421</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['autosubscribe'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>,
<a name="l422"><span class="linenum"> 422</span></a>                  'default' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultpreference_autosubscribe')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/defaultpreference_autosubscribe.html">defaultpreference_autosubscribe</a>);
<a name="l423"><span class="linenum"> 423</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['trackforums'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>,
<a name="l424"><span class="linenum"> 424</span></a>                  'default' =&gt; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultpreference_trackforums')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/defaultpreference_trackforums.html">defaultpreference_trackforums</a>);
<a name="l425"><span class="linenum"> 425</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['timecreated'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l426"><span class="linenum"> 426</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['timemodified'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l427"><span class="linenum"> 427</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['trustbitmask'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_NOT_ALLOWED')" href="../../_constants/NULL_NOT_ALLOWED.html" onMouseOver="constPopup(event,'NULL_NOT_ALLOWED')">NULL_NOT_ALLOWED</a>);
<a name="l428"><span class="linenum"> 428</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['imagealt'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_ALLOWED')" href="../../_constants/NULL_ALLOWED.html" onMouseOver="constPopup(event,'NULL_ALLOWED')">NULL_ALLOWED</a>);
<a name="l429"><span class="linenum"> 429</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['lastnamephonetic'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_ALLOWED')" href="../../_constants/NULL_ALLOWED.html" onMouseOver="constPopup(event,'NULL_ALLOWED')">NULL_ALLOWED</a>);
<a name="l430"><span class="linenum"> 430</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['firstnamephonetic'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_ALLOWED')" href="../../_constants/NULL_ALLOWED.html" onMouseOver="constPopup(event,'NULL_ALLOWED')">NULL_ALLOWED</a>);
<a name="l431"><span class="linenum"> 431</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['middlename'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_ALLOWED')" href="../../_constants/NULL_ALLOWED.html" onMouseOver="constPopup(event,'NULL_ALLOWED')">NULL_ALLOWED</a>);
<a name="l432"><span class="linenum"> 432</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>['alternatename'] = array('type' =&gt; <a class="constant" onClick="logConstant('PARAM_NOTAGS')" href="../../_constants/PARAM_NOTAGS.html" onMouseOver="constPopup(event,'PARAM_NOTAGS')">PARAM_NOTAGS</a>, 'null' =&gt; <a class="constant" onClick="logConstant('NULL_ALLOWED')" href="../../_constants/NULL_ALLOWED.html" onMouseOver="constPopup(event,'NULL_ALLOWED')">NULL_ALLOWED</a>);
<a name="l433"><span class="linenum"> 433</span></a>  
<a name="l434"><span class="linenum"> 434</span></a>          self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a> = <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>;
<a name="l435"><span class="linenum"> 435</span></a>      }
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>      <span class="comment">/**</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">     * Get properties of a user field.</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">     *</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">     * @param string $property property name to be retrieved.</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">     * @throws coding_exception if the requested property name is invalid.</span>
<a name="l442"><span class="linenum"> 442</span></a>  <span class="comment">     * @return array the property definition.</span>
<a name="l443"><span class="linenum"> 443</span></a>  <span class="comment">     */</span>
<a name="l444"><span class="linenum"> 444</span></a>      public static function <a class="function" onClick="logFunction('get_property_definition')" href="../../_functions/get_property_definition.html" onMouseOver="funcPopup(event,'get_property_definition')">get_property_definition</a>(<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>) {
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>          self::<a class="function" onClick="logFunction('fill_properties_cache')" href="../../_functions/fill_properties_cache.html" onMouseOver="funcPopup(event,'fill_properties_cache')">fill_properties_cache</a>();
<a name="l447"><span class="linenum"> 447</span></a>  
<a name="l448"><span class="linenum"> 448</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>, self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>)) {
<a name="l449"><span class="linenum"> 449</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid property requested.');
<a name="l450"><span class="linenum"> 450</span></a>          }
<a name="l451"><span class="linenum"> 451</span></a>  
<a name="l452"><span class="linenum"> 452</span></a>          return self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>];
<a name="l453"><span class="linenum"> 453</span></a>      }
<a name="l454"><span class="linenum"> 454</span></a>  
<a name="l455"><span class="linenum"> 455</span></a>      <span class="comment">/**</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">     * Validate user data.</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">     *</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">     * This method just validates each user field and return an array of errors. It doesn't clean the data,</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">     * the methods clean() and clean_field() should be used for this purpose.</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">     *</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">     * @param stdClass|array $data user data object or array to be validated.</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">     * @return array|true $errors array of errors found on the user object, true if the validation passed.</span>
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">     */</span>
<a name="l464"><span class="linenum"> 464</span></a>      public static function <a class="function" onClick="logFunction('validate')" href="../../_functions/validate.html" onMouseOver="funcPopup(event,'validate')">validate</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l465"><span class="linenum"> 465</span></a>  <span class="comment">        // Get all user profile fields definition.</span>
<a name="l466"><span class="linenum"> 466</span></a>          self::<a class="function" onClick="logFunction('fill_properties_cache')" href="../../_functions/fill_properties_cache.html" onMouseOver="funcPopup(event,'fill_properties_cache')">fill_properties_cache</a>();
<a name="l467"><span class="linenum"> 467</span></a>  
<a name="l468"><span class="linenum"> 468</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> as <a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l469"><span class="linenum"> 469</span></a>              try {
<a name="l470"><span class="linenum"> 470</span></a>                  if (isset(self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>])) {
<a name="l471"><span class="linenum"> 471</span></a>                      <a class="function" onClick="logFunction('validate_param')" href="../../_functions/validate_param.html" onMouseOver="funcPopup(event,'validate_param')">validate_param</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>, self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>]['type'], self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>]['null']);
<a name="l472"><span class="linenum"> 472</span></a>                  }
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">                // Check that the value is part of a list of allowed values.</span>
<a name="l474"><span class="linenum"> 474</span></a>                  if (!empty(self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>]['choices']) &amp;&amp;
<a name="l475"><span class="linenum"> 475</span></a>                          !isset(self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>]['choices'][<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>])) {
<a name="l476"><span class="linenum"> 476</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('invalid_parameter_exception')" href="../../_classes/invalid_parameter_exception.html" onMouseOver="classPopup(event,'invalid_parameter_exception')">invalid_parameter_exception</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l477"><span class="linenum"> 477</span></a>                  }
<a name="l478"><span class="linenum"> 478</span></a>              } catch (invalid_parameter_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l479"><span class="linenum"> 479</span></a>                  <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../../_variables/errors.html">$errors</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>] = <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>-&gt;<a class="function" onClick="logFunction('getMessage')" href="../../_functions/getmessage.html" onMouseOver="funcPopup(event,'getmessage')">getMessage</a>();
<a name="l480"><span class="linenum"> 480</span></a>              }
<a name="l481"><span class="linenum"> 481</span></a>          }
<a name="l482"><span class="linenum"> 482</span></a>  
<a name="l483"><span class="linenum"> 483</span></a>          return empty(<a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../../_variables/errors.html">$errors</a>) ? true : <a class="var it224" onMouseOver="hilite(224)" onMouseOut="lolite()" onClick="logVariable('errors')" href="../../_variables/errors.html">$errors</a>;
<a name="l484"><span class="linenum"> 484</span></a>      }
<a name="l485"><span class="linenum"> 485</span></a>  
<a name="l486"><span class="linenum"> 486</span></a>      <span class="comment">/**</span>
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">     * Clean the properties cache.</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment">     *</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">     * During unit tests we need to be able to reset all caches so that each new test starts in a known state.</span>
<a name="l490"><span class="linenum"> 490</span></a>  <span class="comment">     * Intended for use only for testing, phpunit calls this before every test.</span>
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">     */</span>
<a name="l492"><span class="linenum"> 492</span></a>      public static function <a class="function" onClick="logFunction('reset_caches')" href="../../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>() {
<a name="l493"><span class="linenum"> 493</span></a>          self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a> = null;
<a name="l494"><span class="linenum"> 494</span></a>      }
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>      <span class="comment">/**</span>
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">     * Clean the user data.</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment">     *</span>
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment">     * @param stdClass|array $user the user data to be validated against properties definition.</span>
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment">     * @return stdClass $user the cleaned user data.</span>
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment">     */</span>
<a name="l502"><span class="linenum"> 502</span></a>      public static function <a class="function" onClick="logFunction('clean_data')" href="../../_functions/clean_data.html" onMouseOver="funcPopup(event,'clean_data')">clean_data</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>) {
<a name="l503"><span class="linenum"> 503</span></a>          if (empty(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>)) {
<a name="l504"><span class="linenum"> 504</span></a>              return <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>;
<a name="l505"><span class="linenum"> 505</span></a>          }
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>          foreach (<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> as <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">            // Get the property parameter type and do the cleaning.</span>
<a name="l509"><span class="linenum"> 509</span></a>              try {
<a name="l510"><span class="linenum"> 510</span></a>                  <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> = <a class="class" onClick="logClass('core_user')" href="../../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a>::<a class="function" onClick="logFunction('clean_field')" href="../../_functions/clean_field.html" onMouseOver="funcPopup(event,'clean_field')">clean_field</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>, <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>);
<a name="l511"><span class="linenum"> 511</span></a>              } catch (coding_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l512"><span class="linenum"> 512</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;The property '<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>' could not be cleaned.&quot;, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l513"><span class="linenum"> 513</span></a>              }
<a name="l514"><span class="linenum"> 514</span></a>          }
<a name="l515"><span class="linenum"> 515</span></a>  
<a name="l516"><span class="linenum"> 516</span></a>          return <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>;
<a name="l517"><span class="linenum"> 517</span></a>      }
<a name="l518"><span class="linenum"> 518</span></a>  
<a name="l519"><span class="linenum"> 519</span></a>      <span class="comment">/**</span>
<a name="l520"><span class="linenum"> 520</span></a>  <span class="comment">     * Clean a specific user field.</span>
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">     *</span>
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">     * @param string $data the user field data to be cleaned.</span>
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment">     * @param string $field the user field name on the property definition cache.</span>
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">     * @return string the cleaned user data.</span>
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment">     */</span>
<a name="l526"><span class="linenum"> 526</span></a>      public static function <a class="function" onClick="logFunction('clean_field')" href="../../_functions/clean_field.html" onMouseOver="funcPopup(event,'clean_field')">clean_field</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>) {
<a name="l527"><span class="linenum"> 527</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) || empty(<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>)) {
<a name="l528"><span class="linenum"> 528</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>;
<a name="l529"><span class="linenum"> 529</span></a>          }
<a name="l530"><span class="linenum"> 530</span></a>  
<a name="l531"><span class="linenum"> 531</span></a>          try {
<a name="l532"><span class="linenum"> 532</span></a>              <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = <a class="class" onClick="logClass('core_user')" href="../../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a>::<a class="function" onClick="logFunction('get_property_type')" href="../../_functions/get_property_type.html" onMouseOver="funcPopup(event,'get_property_type')">get_property_type</a>(<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>);
<a name="l533"><span class="linenum"> 533</span></a>  
<a name="l534"><span class="linenum"> 534</span></a>              if (isset(self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>]['choices'])) {
<a name="l535"><span class="linenum"> 535</span></a>                  if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>]['choices'])) {
<a name="l536"><span class="linenum"> 536</span></a>                      if (isset(self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>]['default'])) {
<a name="l537"><span class="linenum"> 537</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>]['default'];
<a name="l538"><span class="linenum"> 538</span></a>                      } else {
<a name="l539"><span class="linenum"> 539</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = '';
<a name="l540"><span class="linenum"> 540</span></a>                      }
<a name="l541"><span class="linenum"> 541</span></a>                  } else {
<a name="l542"><span class="linenum"> 542</span></a>                      return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>;
<a name="l543"><span class="linenum"> 543</span></a>                  }
<a name="l544"><span class="linenum"> 544</span></a>              } else {
<a name="l545"><span class="linenum"> 545</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>, <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>);
<a name="l546"><span class="linenum"> 546</span></a>              }
<a name="l547"><span class="linenum"> 547</span></a>          } catch (coding_exception <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('e')" href="../../_variables/e.html">$e</a>) {
<a name="l548"><span class="linenum"> 548</span></a>              <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;The property '<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>' could not be cleaned.&quot;, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l549"><span class="linenum"> 549</span></a>          }
<a name="l550"><span class="linenum"> 550</span></a>  
<a name="l551"><span class="linenum"> 551</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>;
<a name="l552"><span class="linenum"> 552</span></a>      }
<a name="l553"><span class="linenum"> 553</span></a>  
<a name="l554"><span class="linenum"> 554</span></a>      <span class="comment">/**</span>
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">     * Get the parameter type of the property.</span>
<a name="l556"><span class="linenum"> 556</span></a>  <span class="comment">     *</span>
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">     * @param string $property property name to be retrieved.</span>
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment">     * @throws coding_exception if the requested property name is invalid.</span>
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment">     * @return int the property parameter type.</span>
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">     */</span>
<a name="l561"><span class="linenum"> 561</span></a>      public static function <a class="function" onClick="logFunction('get_property_type')" href="../../_functions/get_property_type.html" onMouseOver="funcPopup(event,'get_property_type')">get_property_type</a>(<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>) {
<a name="l562"><span class="linenum"> 562</span></a>  
<a name="l563"><span class="linenum"> 563</span></a>          self::<a class="function" onClick="logFunction('fill_properties_cache')" href="../../_functions/fill_properties_cache.html" onMouseOver="funcPopup(event,'fill_properties_cache')">fill_properties_cache</a>();
<a name="l564"><span class="linenum"> 564</span></a>  
<a name="l565"><span class="linenum"> 565</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>, self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>)) {
<a name="l566"><span class="linenum"> 566</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid property requested: ' . <a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>);
<a name="l567"><span class="linenum"> 567</span></a>          }
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>          return self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>]['type'];
<a name="l570"><span class="linenum"> 570</span></a>      }
<a name="l571"><span class="linenum"> 571</span></a>  
<a name="l572"><span class="linenum"> 572</span></a>      <span class="comment">/**</span>
<a name="l573"><span class="linenum"> 573</span></a>  <span class="comment">     * Discover if the property is NULL_ALLOWED or NULL_NOT_ALLOWED.</span>
<a name="l574"><span class="linenum"> 574</span></a>  <span class="comment">     *</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">     * @param string $property property name to be retrieved.</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">     * @throws coding_exception if the requested property name is invalid.</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">     * @return bool true if the property is NULL_ALLOWED, false otherwise.</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment">     */</span>
<a name="l579"><span class="linenum"> 579</span></a>      public static function <a class="function" onClick="logFunction('get_property_null')" href="../../_functions/get_property_null.html" onMouseOver="funcPopup(event,'get_property_null')">get_property_null</a>(<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>) {
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>          self::<a class="function" onClick="logFunction('fill_properties_cache')" href="../../_functions/fill_properties_cache.html" onMouseOver="funcPopup(event,'fill_properties_cache')">fill_properties_cache</a>();
<a name="l582"><span class="linenum"> 582</span></a>  
<a name="l583"><span class="linenum"> 583</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>, self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>)) {
<a name="l584"><span class="linenum"> 584</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid property requested: ' . <a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>);
<a name="l585"><span class="linenum"> 585</span></a>          }
<a name="l586"><span class="linenum"> 586</span></a>  
<a name="l587"><span class="linenum"> 587</span></a>          return self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>]['null'];
<a name="l588"><span class="linenum"> 588</span></a>      }
<a name="l589"><span class="linenum"> 589</span></a>  
<a name="l590"><span class="linenum"> 590</span></a>      <span class="comment">/**</span>
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">     * Get the choices of the property.</span>
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment">     *</span>
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment">     * This is a helper method to validate a value against a list of acceptable choices.</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment">     * For instance: country, language, themes and etc.</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment">     *</span>
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment">     * @param string $property property name to be retrieved.</span>
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment">     * @throws coding_exception if the requested property name is invalid or if it does not has a list of choices.</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment">     * @return array the property parameter type.</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment">     */</span>
<a name="l600"><span class="linenum"> 600</span></a>      public static function <a class="function" onClick="logFunction('get_property_choices')" href="../../_functions/get_property_choices.html" onMouseOver="funcPopup(event,'get_property_choices')">get_property_choices</a>(<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>) {
<a name="l601"><span class="linenum"> 601</span></a>  
<a name="l602"><span class="linenum"> 602</span></a>          self::<a class="function" onClick="logFunction('fill_properties_cache')" href="../../_functions/fill_properties_cache.html" onMouseOver="funcPopup(event,'fill_properties_cache')">fill_properties_cache</a>();
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>, self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>) &amp;&amp; !<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('choices',
<a name="l605"><span class="linenum"> 605</span></a>                  self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>])) {
<a name="l606"><span class="linenum"> 606</span></a>  
<a name="l607"><span class="linenum"> 607</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid property requested, or the property does not has a list of choices.');
<a name="l608"><span class="linenum"> 608</span></a>          }
<a name="l609"><span class="linenum"> 609</span></a>  
<a name="l610"><span class="linenum"> 610</span></a>          return self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>]['choices'];
<a name="l611"><span class="linenum"> 611</span></a>      }
<a name="l612"><span class="linenum"> 612</span></a>  
<a name="l613"><span class="linenum"> 613</span></a>      <span class="comment">/**</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">     * Get the property default.</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">     *</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">     * This method gets the default value of a field (if exists).</span>
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment">     *</span>
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment">     * @param string $property property name to be retrieved.</span>
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment">     * @throws coding_exception if the requested property name is invalid or if it does not has a default value.</span>
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment">     * @return string the property default value.</span>
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment">     */</span>
<a name="l622"><span class="linenum"> 622</span></a>      public static function <a class="function" onClick="logFunction('get_property_default')" href="../../_functions/get_property_default.html" onMouseOver="funcPopup(event,'get_property_default')">get_property_default</a>(<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>) {
<a name="l623"><span class="linenum"> 623</span></a>  
<a name="l624"><span class="linenum"> 624</span></a>          self::<a class="function" onClick="logFunction('fill_properties_cache')" href="../../_functions/fill_properties_cache.html" onMouseOver="funcPopup(event,'fill_properties_cache')">fill_properties_cache</a>();
<a name="l625"><span class="linenum"> 625</span></a>  
<a name="l626"><span class="linenum"> 626</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>, self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>) || !isset(self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>]['default'])) {
<a name="l627"><span class="linenum"> 627</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid property requested, or the property does not has a default value.');
<a name="l628"><span class="linenum"> 628</span></a>          }
<a name="l629"><span class="linenum"> 629</span></a>  
<a name="l630"><span class="linenum"> 630</span></a>          return self::<a class="var it38208" onMouseOver="hilite(38208)" onMouseOut="lolite()" onClick="logVariable('propertiescache')" href="../../_variables/propertiescache.html">$propertiescache</a>[<a class="var it1414" onMouseOver="hilite(1414)" onMouseOut="lolite()" onClick="logVariable('property')" href="../../_variables/property.html">$property</a>]['default'];
<a name="l631"><span class="linenum"> 631</span></a>      }
<a name="l632"><span class="linenum"> 632</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_server_timezone': ['get_server_timezone', 'Returns server timezone. ', [['lib/classes','date.php',166]], 14],
'get_property_default': ['get_property_default', 'Get the property default. ', [['lib/classes','user.php',613]], 29],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'validate_param': ['validate_param', 'Strict validation of parameter values, the values are only converted to requested PHP type. Internally it is using clean_param, the values before and after cleaning must be equal - otherwise an invalid_parameter_exception is thrown. Objects and classes are not accepted. ', [['lib','moodlelib.php',696]], 36],
'get_admin': ['get_admin', 'Returns $user object of the main admin user ', [['lib','datalib.php',53]], 61],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'require_active_user': ['require_active_user', 'Check if the given user is an active user in the site. ', [['lib/classes','user.php',247]], 29],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'update_picture': ['update_picture', 'Updates the provided users profile picture based upon the expected fields returned from the edit or edit_advanced forms. ', [['lib/classes','user.php',283]], 5],
'get_string_manager': ['get_string_manager', 'Returns current string_manager instance. ', [['lib','moodlelib.php',6678]], 163],
'get_noreply_user': ['get_noreply_user', 'Return noreply user record, this is currently used in messaging system only for sending messages from noreply email. It will return record of $CFG->noreplyuserid if set else return dummy user object with hard-coded $user->emailstop = 1 so noreply can be sent to user. ', [['lib/classes','user.php',137]], 34],
'get_property_definition': ['get_property_definition', 'Get properties of a user field. ', [['lib/classes','user.php',437]], 4],
'reset_caches': ['reset_caches', 'This implementation does not use any caches. ', [['lib/classes','string_manager_install.php',245],['lib/classes','plugin_manager.php',115],['lib/classes/update','checker.php',74],['backup/moodle2','restore_stepslib.php',1538],['tag/classes','index_builder.php',367],['repository','lib.php',2636],['lib/dml','moodle_database.php',1052],['lib/classes','filetypes.php',419],['lib','accesslib.php',5149],['lib','accesslib.php',6045],['mod/glossary/classes/local','concept_cache.php',49],['lib/classes','string_manager_standard.php',599],['lib/classes','string_manager.php',127],['lib','filterlib.php',97],['lib/classes','text.php',108],['lib/classes','user.php',486]], 111],
'get_list_of_translations': ['get_list_of_translations', 'Returns localised list of installed translations ', [['lib/classes','string_manager_install.php',209],['lib/classes','string_manager_standard.php',504],['lib/classes','string_manager.php',102]], 23],
'get_property_choices': ['get_property_choices', 'Get the choices of the property. ', [['lib/classes','user.php',590]], 3],
'get_list_of_themes': ['get_list_of_themes', 'Returns a list of valid and compatible themes ', [['lib','moodlelib.php',6929]], 7],
'get_list_of_calendar_types': ['get_list_of_calendar_types', 'Returns a list of calendar typess available for use. ', [['calendar/classes','type_factory.php',53]], 4],
'is_real_user': ['is_real_user', 'Return true is user id is greater than self::NOREPLY_USER and alternatively check db. ', [['lib/classes','user.php',225]], 22],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'reset_internal_users': ['reset_internal_users', 'Reset self::$noreplyuser and self::$supportuser. This is only used by phpunit, and there is no other use case for this function. Please don\'t use it outside phpunit. ', [['lib/classes','user.php',211]], 7],
'process_new_icon': ['process_new_icon', 'Stores optimised icon images in icon file area. ', [['lib','gdlib.php',90]], 6],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'get_property_null': ['get_property_null', 'Discover if the property is NULL_ALLOWED or NULL_NOT_ALLOWED. ', [['lib/classes','user.php',572]], 10],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'copy_content_to_temp': ['copy_content_to_temp', 'Copy content of file to temporary folder and returns file path ', [['lib/filestorage','stored_file.php',482]], 6],
'file_save_draft_area_files': ['file_save_draft_area_files', 'Saves files from a draft file area to a real one (merging the list of files). Can rewrite URLs in some content at the same time if desired. ', [['lib','filelib.php',778]], 61],
'is_directory': ['is_directory', 'Whether or not this is a directory ', [['lib/filebrowser','file_info_context_system.php',133],['mod/lesson/classes','file_info.php',94],['mod/imscp','locallib.php',328],['lib/filebrowser','file_info_context_coursecat.php',146],['mod/book','locallib.php',463],['lib/filebrowser','file_info_context_user.php',265],['lib/filebrowser','virtual_root_file.php',60],['mod/data','locallib.php',477],['lib/filebrowser','file_info_stored.php',267],['lib/filestorage','stored_file.php',310],['mod/workshop','fileinfolib.php',82],['mod/workshop','fileinfolib.php',241],['lib/filebrowser','file_info_context_module.php',249],['mod/glossary','locallib.php',525],['lib/filebrowser','file_info_context_course.php',372],['lib/filebrowser','file_info_context_course.php',657],['lib/filebrowser','file_info_context_course.php',803],['mod/forum','locallib.php',463]], 140],
'get_support_user': ['get_support_user', 'Return support user record, this is currently used in messaging system only for sending messages to support email. $CFG->supportuserid is set then returns user record $CFG->supportemail is set then return dummy record with $CFG->supportemail else return admin user record with hard-coded $user->emailstop = 0, so user gets support message. ', [['lib/classes','user.php',166]], 21],
'get_user': ['get_user', 'Returns user data checking the internal static cache. ', [['search/classes','engine.php',119],['lib/classes','user.php',55]], 53],
'isguestuser': ['isguestuser', 'Determines if a user is logged in as real guest user with username \'guest\'. ', [['lib','accesslib.php',1923]], 260],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'fill_properties_cache': ['fill_properties_cache', 'Definition of user profile fields and the expected parameter type for data validation. ', [['lib/classes','user.php',344]], 7],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'clean_field': ['clean_field', 'Clean a specific user field. ', [['lib/classes','user.php',519]], 26],
'get_dummy_user_record': ['get_dummy_user_record', 'Helper function to return dummy noreply user record. ', [['lib/classes','user.php',110]], 2],
'get_list_of_countries': ['get_list_of_countries', 'Returns a localised list of all country names, sorted by country keys. ', [['lib/classes','string_manager_install.php',173],['lib/classes','string_manager_standard.php',410],['lib/classes','string_manager.php',75]], 17],
'get_property_type': ['get_property_type', 'Get the parameter type of the property. ', [['lib/classes','user.php',554]], 139],
'getmessage': ['getmessage', '', [['lib/google/src/Google/Service','Freebase.php',441],['lib/google/src/Google/Service','AdSense.php',2970],['lib/google/src/Google/Service','Replicapool.php',1165],['lib/google/src/Google/Service','Replicapool.php',1257],['lib/google/src/Google/Service','Computeaccounts.php',1368],['lib/google/src/Google/Service','Computeaccounts.php',1460],['lib/google/src/Google/Service','Appengine.php',1604],['lib/google/src/Google/Service','Books.php',3579],['lib/google/src/Google/Service','Books.php',4429],['lib/google/src/Google/Service','Script.php',360],['lib/google/src/Google/Service','DeploymentManager.php',1116],['lib/google/src/Google/Service','DeploymentManager.php',1604],['lib/google/src/Google/Service','DeploymentManager.php',1641],['lib/google/src/Google/Service','DeploymentManager.php',1823],['lib/google/src/Google/Service','DeploymentManager.php',1860],['lib/google/src/Google/Service','Dataflow.php',2656],['lib/google/src/Google/Service','CloudUserAccounts.php',1807],['lib/google/src/Google/Service','CloudUserAccounts.php',1899],['lib/google/src/Google/Service','Replicapoolupdater.php',617],['lib/google/src/Google/Service','Replicapoolupdater.php',926],['lib/google/src/Google/Service','Replicapoolupdater.php',1018],['lib/google/src/Google/Service','Replicapoolupdater.php',1252],['lib/google/src/Google/Service','Bigquery.php',1367],['lib/google/src/Google/Service','ShoppingContent.php',4125],['lib/google/src/Google/Service','ShoppingContent.php',4527],['lib/google/src/Google/Service','ShoppingContent.php',4572],['lib/google/src/Google/Service','Genomics.php',3622],['lib/google/src/Google/Service','Reports.php',1106],['lib/google/src/Google/Service','Gmail.php',1371],['lib/google/src/Google/Service','Gmail.php',1467],['lib/google/src/Google/Service','Gmail.php',1495],['lib/google/src/Google/Service','Gmail.php',1513],['lib/google/src/Google/Service','Gmail.php',1531],['lib/google/src/Google/Service','Autoscaler.php',1079],['lib/google/src/Google/Service','Autoscaler.php',1171],['lib/google/src/Google/Service','AdExchangeSeller.php',1043],['lib/google/src/Google/Service','IdentityToolkit.php',1266],['lib/pear','PEAR.php',941],['lib/google/src/Google/Service','Storagetransfer.php',948],['lib/htmlpurifier/HTMLPurifier','Language.php',86],['lib/google/src/Google/Service','Resourceviews.php',894],['lib/google/src/Google/Service','Resourceviews.php',986],['lib/google/src/Google/Service','SQLAdmin.php',3029],['lib/google/src/Google/Service','Compute.php',8752],['lib/google/src/Google/Service','Compute.php',9200],['lib/google/src/Google/Service','Compute.php',10292],['lib/google/src/Google/Service','Compute.php',10384],['lib/google/src/Google/Service','Compute.php',10890],['lib/google/src/Google/Service','Compute.php',12525],['lib/google/src/Google/Service','Compute.php',12771],['lib/google/src/Google/Service','Compute.php',13249],['lib/google/src/Google/Service','Compute.php',13652],['lib/google/src/Google/Service','Compute.php',13804],['lib/google/src/Google/Service','Compute.php',14396],['lib/google/src/Google/Service','Compute.php',14488],['lib/google/src/Google/Service','Compute.php',14580],['lib/google/src/Google/Service','Compute.php',15235],['lib/google/src/Google/Service','Compute.php',16249],['lib/google/src/Google/Service','Compute.php',16675],['lib/google/src/Google/Service','Compute.php',17005],['lib/google/src/Google/Service','Compute.php',17723],['lib/google/src/Google/Service','Pubsub.php',711],['lib/google/src/Google/Service','Pubsub.php',748],['lib/google/src/Google/Service','Dfareporting.php',19533]], 489],
'validate': ['validate', '', [['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','IPv4.php',22],['lib/htmlpurifier/HTMLPurifier/AttrDef','Text.php',15],['grade/grading/form/rubric','rubriceditor.php',356],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','IPv6.php',18],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Nmtokens.php',15],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',29],['lib/google/src/Google/Service','AndroidPublisher.php',1281],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',69],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',32],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',45],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',34],['backup/cc/cc_lib','xmlbase.php',187],['lib/pear/HTML/QuickForm/Rule','Required.php',29],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',39],['message/tests','inbound_test.php',622],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Ident.php',15],['lib','formslib.php',2955],['lib/editor/atto','adminlib.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',42],['competency/classes','persistent.php',562],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Interchange.php',36],['lib/minify/lib/MrClay','Cli.php',136],['lib/pear/HTML/QuickForm/Rule','Email.php',31],['lib','adminlib.php',2148],['lib','adminlib.php',2217],['lib','adminlib.php',3513],['lib','adminlib.php',4004],['lib','adminlib.php',5100],['lib','adminlib.php',5158],['lib','adminlib.php',8954],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI/Email','SimpleCheck.php',16],['grade/grading/form/guide','guideeditor.php',348],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',26],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',29],['lib/pear/HTML/QuickForm/Rule','Compare.php',71],['lib/htmlpurifier/HTMLPurifier','URIScheme.php',55],['lib/pear/HTML','QuickForm.php',1459],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Color.php',15],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',39],['comment','lib.php',932],['lib/pear/HTML/QuickForm/Rule','Callback.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',28],['lib/pear/HTML/QuickForm/Rule','Regex.php',46],['lib/pear/HTML/QuickForm/Rule','Range.php',29],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',29],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',27],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',33],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',44],['lib/portfolio/formats/leap2a','lib.php',167],['lib/portfolio/formats/leap2a','lib.php',297],['admin/tool/uploadcourse/classes','processor.php',374],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',26],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',17],['lib/pear/HTML/QuickForm','RuleRegistry.php',124],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','TextDecoration.php',17],['lib/htmlpurifier/HTMLPurifier','URI.php',99],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',27],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',42],['lib/pear/HTML/QuickForm','Rule.php',34],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',35],['lib/htmlpurifier/HTMLPurifier/AttrDef','Lang.php',16],['lib/classes','user.php',455],['lib/classes/message/inbound','address_manager.php',370],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',33],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','MultiLength.php',18],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Color.php',15],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',45],['backup/cc','validator.php',207],['lib/htmlpurifier/HTMLPurifier','Length.php',66],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Length.php',19],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',31],['lib/google/src/Google/Service','Compute.php',8147],['lib/htmlpurifier/HTMLPurifier/AttrDef','CSS.php',23],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',41]], 248],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'get_user_by_username': ['get_user_by_username', 'Return user object from db based on their username. ', [['lib/classes','user.php',86]], 7],
'clean_data': ['clean_data', 'Clean the user data. ', [['lib/classes','user.php',496],['auth/db','auth.php',924]], 7],
'delete_area_files': ['delete_area_files', 'Delete all area files (optionally limited by itemid). ', [['lib/filestorage','file_storage.php',992]], 123],
'array_merge': ['array_merge', '', [], 2944],
'defined': ['defined', '', [], 4731],
'array_key_exists': ['array_key_exists', '', [], 1445],
'count': ['count', '', [], 4095],
'unlink': ['unlink', '', [], 256]};
CLASS_DATA={
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'type_factory': ['type_factory', 'Class \core_calendar\type_factory. ', [['calendar/classes','type_factory.php',19]], 48],
'core_date': ['core_date', 'Core date and time related code. ', [['lib/classes','date.php',26]], 192],
'invalid_parameter_exception': ['invalid_parameter_exception', 'Exception indicating malformed parameter problem. This exception is not supposed to be thrown when processing user submitted data in forms. It is more suitable for WS and other low level stuff. ', [['lib','setuplib.php',259]], 88],
'core_user': ['core_user', 'User class to access user details. ', [['lib/classes','user.php',27]], 457],
'context_user': ['context_user', 'User context class ', [['lib','accesslib.php',6398]], 414],
'theme_config': ['theme_config', 'This class represents the configuration variables of a Moodle theme. ', [['lib','outputlib.php',126]], 41]};
CONST_DATA={
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'PARAM_THEME': ['PARAM_THEME', '', [['lib','moodlelib.php',233]], 9],
'PARAM_TEXT': ['PARAM_TEXT', '', [['lib','moodlelib.php',228]], 542],
'NULL_NOT_ALLOWED': ['NULL_NOT_ALLOWED', '', [['lib','moodlelib.php',347]], 88],
'PARAM_RAW_TRIMMED': ['PARAM_RAW_TRIMMED', '', [['lib','moodlelib.php',198]], 55],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812],
'PARAM_ALPHA': ['PARAM_ALPHA', '', [['lib','moodlelib.php',77]], 398],
'PARAM_TIMEZONE': ['PARAM_TIMEZONE', '', [['lib','moodlelib.php',297]], 5],
'PARAM_USERNAME': ['PARAM_USERNAME', '', [['lib','moodlelib.php',245]], 29],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 802],
'PARAM_LANG': ['PARAM_LANG', '', [['lib','moodlelib.php',161]], 19],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 921],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 215],
'PARAM_NOTAGS': ['PARAM_NOTAGS', '', [['lib','moodlelib.php',172]], 217],
'NULL_ALLOWED': ['NULL_ALLOWED', '', [['lib','moodlelib.php',352]], 55],
'PARAM_AUTH': ['PARAM_AUTH', '', [['lib','moodlelib.php',98]], 3],
'PHPUNIT_TEST': ['PHPUNIT_TEST', '', [['admin/cli','install.php',145],['','install.php',49],['lib/phpunit','bootstrap.php',63],['lib','setup.php',247]], 59],
'PARAM_URL': ['PARAM_URL', '', [['lib','moodlelib.php',239]], 165],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
