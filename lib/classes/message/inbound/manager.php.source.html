<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/classes/message/inbound/manager.php source</title>
    <link rel="stylesheet" href="../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../';
subdir='lib/classes/message/inbound';
filename='manager.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/classes/message/inbound/</a> -> <a href="manager.php.html">manager.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="manager.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="manager.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Variable Envelope Return Path management.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core_message</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2014 Andrew Nicols &lt;andrew@nicols.co.uk&gt;</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  namespace core\message\inbound;
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Variable Envelope Return Path manager class.</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @copyright  2014 Andrew Nicols &lt;andrew@nicols.co.uk&gt;</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> */</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('manager')" href="../../../../_classes/manager.html" onMouseOver="classPopup(event,'manager')">manager</a> {
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>      <span class="comment">/**</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">     * Whether the Inbound Message interface is enabled.</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">     *</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     * @return bool</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     */</span>
<a name="l42"><span class="linenum">  42</span></a>      public static function <a class="function" onClick="logFunction('is_enabled')" href="../../../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>() {
<a name="l43"><span class="linenum">  43</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>;
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">        // Check whether Inbound Message is enabled at all.</span>
<a name="l46"><span class="linenum">  46</span></a>          if (!isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_enabled')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_enabled.html">messageinbound_enabled</a>) || !<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_enabled')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_enabled.html">messageinbound_enabled</a>) {
<a name="l47"><span class="linenum">  47</span></a>              return false;
<a name="l48"><span class="linenum">  48</span></a>          }
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">        // Check whether the outgoing mailbox and domain are configured properly.</span>
<a name="l51"><span class="linenum">  51</span></a>          if (!isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_mailbox')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_mailbox.html">messageinbound_mailbox</a>) || empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_mailbox')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_mailbox.html">messageinbound_mailbox</a>)) {
<a name="l52"><span class="linenum">  52</span></a>              return false;
<a name="l53"><span class="linenum">  53</span></a>          }
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>          if (!isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_domain')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_domain.html">messageinbound_domain</a>) || empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('messageinbound_domain')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../../_variables/messageinbound_domain.html">messageinbound_domain</a>)) {
<a name="l56"><span class="linenum">  56</span></a>              return false;
<a name="l57"><span class="linenum">  57</span></a>          }
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>          return true;
<a name="l60"><span class="linenum">  60</span></a>      }
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>      <span class="comment">/**</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     * Update the database to create, update, and remove handlers.</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     *</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">     * @param string $componentname - The frankenstyle component name.</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     */</span>
<a name="l67"><span class="linenum">  67</span></a>      public static function <a class="function" onClick="logFunction('update_handlers_for_component')" href="../../../../_functions/update_handlers_for_component.html" onMouseOver="funcPopup(event,'update_handlers_for_component')">update_handlers_for_component</a>(<a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>) {
<a name="l68"><span class="linenum">  68</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>          <a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a> = \<a class="class" onClick="logClass('core_component')" href="../../../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('normalize_componentname')" href="../../../../_functions/normalize_componentname.html" onMouseOver="funcPopup(event,'normalize_componentname')">normalize_componentname</a>(<a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>);
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it26705" onMouseOver="hilite(26705)" onMouseOut="lolite()" onClick="logVariable('existinghandlers')" href="../../../../_variables/existinghandlers.html">$existinghandlers</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset')" href="../../../../_functions/get_recordset.html" onMouseOver="funcPopup(event,'get_recordset')">get_recordset</a>('messageinbound_handlers', array('component' =&gt; <a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>));
<a name="l72"><span class="linenum">  72</span></a>          foreach (<a class="var it26705" onMouseOver="hilite(26705)" onMouseOut="lolite()" onClick="logVariable('existinghandlers')" href="../../../../_variables/existinghandlers.html">$existinghandlers</a> as <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>) {
<a name="l73"><span class="linenum">  73</span></a>              if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../../../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a onClick="logVariable('classname')" class="var it44100" onMouseOver="hilite(44100)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a>)) {
<a name="l74"><span class="linenum">  74</span></a>                  self::<a class="function" onClick="logFunction('remove_messageinbound_handler')" href="../../../../_functions/remove_messageinbound_handler.html" onMouseOver="funcPopup(event,'remove_messageinbound_handler')">remove_messageinbound_handler</a>(<a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>);
<a name="l75"><span class="linenum">  75</span></a>              }
<a name="l76"><span class="linenum">  76</span></a>          }
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>          self::<a class="function" onClick="logFunction('create_missing_messageinbound_handlers_for_component')" href="../../../../_functions/create_missing_messageinbound_handlers_for_component.html" onMouseOver="funcPopup(event,'create_missing_messageinbound_handlers_for_component')">create_missing_messageinbound_handlers_for_component</a>(<a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>);
<a name="l79"><span class="linenum">  79</span></a>      }
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>      <span class="comment">/**</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">     * Load handler instances for all of the handlers defined in db/messageinbound_handlers.php for the specified component.</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">     *</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">     * @param string $componentname - The name of the component to fetch the handlers for.</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">     * @return \core\message\inbound\handler[] - List of handlers for this component.</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">     */</span>
<a name="l87"><span class="linenum">  87</span></a>      public static function <a class="function" onClick="logFunction('load_default_handlers_for_component')" href="../../../../_functions/load_default_handlers_for_component.html" onMouseOver="funcPopup(event,'load_default_handlers_for_component')">load_default_handlers_for_component</a>(<a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>) {
<a name="l88"><span class="linenum">  88</span></a>          <a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a> = \<a class="class" onClick="logClass('core_component')" href="../../../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('normalize_componentname')" href="../../../../_functions/normalize_componentname.html" onMouseOver="funcPopup(event,'normalize_componentname')">normalize_componentname</a>(<a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>);
<a name="l89"><span class="linenum">  89</span></a>          <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../../../_variables/dir.html">$dir</a> = \<a class="class" onClick="logClass('core_component')" href="../../../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_component_directory')" href="../../../../_functions/get_component_directory.html" onMouseOver="funcPopup(event,'get_component_directory')">get_component_directory</a>(<a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>);
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>          if (!<a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../../../_variables/dir.html">$dir</a>) {
<a name="l92"><span class="linenum">  92</span></a>              return array();
<a name="l93"><span class="linenum">  93</span></a>          }
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>          <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../_variables/file.html">$file</a> = <a class="var it1519" onMouseOver="hilite(1519)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../../../_variables/dir.html">$dir</a> . '/db/messageinbound_handlers.php';
<a name="l96"><span class="linenum">  96</span></a>          if (!<a class="phpfunction" onClick="logFunction('file_exists')" href="../../../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../_variables/file.html">$file</a>)) {
<a name="l97"><span class="linenum">  97</span></a>              return array();
<a name="l98"><span class="linenum">  98</span></a>          }
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it2690" onMouseOver="hilite(2690)" onMouseOut="lolite()" onClick="logVariable('handlers')" href="../../../../_variables/handlers.html">$handlers</a> = null;
<a name="l101"><span class="linenum"> 101</span></a>          require_once(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../../../_variables/file.html">$file</a>);
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>          if (!isset(<a class="var it2690" onMouseOver="hilite(2690)" onMouseOut="lolite()" onClick="logVariable('handlers')" href="../../../../_variables/handlers.html">$handlers</a>)) {
<a name="l104"><span class="linenum"> 104</span></a>              return array();
<a name="l105"><span class="linenum"> 105</span></a>          }
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>          <a class="var it26706" onMouseOver="hilite(26706)" onMouseOut="lolite()" onClick="logVariable('handlerinstances')" href="../../../../_variables/handlerinstances.html">$handlerinstances</a> = array();
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>          foreach (<a class="var it2690" onMouseOver="hilite(2690)" onMouseOut="lolite()" onClick="logVariable('handlers')" href="../../../../_variables/handlers.html">$handlers</a> as <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>) {
<a name="l110"><span class="linenum"> 110</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = (object) <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>;
<a name="l111"><span class="linenum"> 111</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('component')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/component.html">component</a> = <a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>;
<a name="l112"><span class="linenum"> 112</span></a>              if (<a class="var it26707" onMouseOver="hilite(26707)" onMouseOut="lolite()" onClick="logVariable('handlerinstance')" href="../../../../_variables/handlerinstance.html">$handlerinstance</a> = self::<a class="function" onClick="logFunction('handler_from_record')" href="../../../../_functions/handler_from_record.html" onMouseOver="funcPopup(event,'handler_from_record')">handler_from_record</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>)) {
<a name="l113"><span class="linenum"> 113</span></a>                  <a class="var it26706" onMouseOver="hilite(26706)" onMouseOut="lolite()" onClick="logVariable('handlerinstances')" href="../../../../_variables/handlerinstances.html">$handlerinstances</a>[] = <a class="var it26707" onMouseOver="hilite(26707)" onMouseOut="lolite()" onClick="logVariable('handlerinstance')" href="../../../../_variables/handlerinstance.html">$handlerinstance</a>;
<a name="l114"><span class="linenum"> 114</span></a>              } else {
<a name="l115"><span class="linenum"> 115</span></a>                  throw new \coding_exception(&quot;Inbound Message Handler not found for '{<a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>}'.&quot;);
<a name="l116"><span class="linenum"> 116</span></a>              }
<a name="l117"><span class="linenum"> 117</span></a>          }
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>          return <a class="var it26706" onMouseOver="hilite(26706)" onMouseOut="lolite()" onClick="logVariable('handlerinstances')" href="../../../../_variables/handlerinstances.html">$handlerinstances</a>;
<a name="l120"><span class="linenum"> 120</span></a>      }
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>      <span class="comment">/**</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * Update the database to contain a list of handlers for a component,</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     * adding any handlers which do not exist in the database.</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     *</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     * @param string $componentname - The frankenstyle component name.</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     */</span>
<a name="l128"><span class="linenum"> 128</span></a>      public static function <a class="function" onClick="logFunction('create_missing_messageinbound_handlers_for_component')" href="../../../../_functions/create_missing_messageinbound_handlers_for_component.html" onMouseOver="funcPopup(event,'create_missing_messageinbound_handlers_for_component')">create_missing_messageinbound_handlers_for_component</a>(<a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>) {
<a name="l129"><span class="linenum"> 129</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l130"><span class="linenum"> 130</span></a>          <a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a> = \<a class="class" onClick="logClass('core_component')" href="../../../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('normalize_componentname')" href="../../../../_functions/normalize_componentname.html" onMouseOver="funcPopup(event,'normalize_componentname')">normalize_componentname</a>(<a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>);
<a name="l131"><span class="linenum"> 131</span></a>  
<a name="l132"><span class="linenum"> 132</span></a>          <a class="var it26708" onMouseOver="hilite(26708)" onMouseOut="lolite()" onClick="logVariable('expectedhandlers')" href="../../../../_variables/expectedhandlers.html">$expectedhandlers</a> = self::<a class="function" onClick="logFunction('load_default_handlers_for_component')" href="../../../../_functions/load_default_handlers_for_component.html" onMouseOver="funcPopup(event,'load_default_handlers_for_component')">load_default_handlers_for_component</a>(<a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>);
<a name="l133"><span class="linenum"> 133</span></a>          foreach (<a class="var it26708" onMouseOver="hilite(26708)" onMouseOut="lolite()" onClick="logVariable('expectedhandlers')" href="../../../../_variables/expectedhandlers.html">$expectedhandlers</a> as <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>) {
<a name="l134"><span class="linenum"> 134</span></a>              <a class="var it26709" onMouseOver="hilite(26709)" onMouseOut="lolite()" onClick="logVariable('recordexists')" href="../../../../_variables/recordexists.html">$recordexists</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('messageinbound_handlers', array(
<a name="l135"><span class="linenum"> 135</span></a>                  'component' =&gt; <a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>,
<a name="l136"><span class="linenum"> 136</span></a>                  'classname' =&gt; <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a onClick="logVariable('classname')" class="var it44100" onMouseOver="hilite(44100)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a>,
<a name="l137"><span class="linenum"> 137</span></a>              ));
<a name="l138"><span class="linenum"> 138</span></a>  
<a name="l139"><span class="linenum"> 139</span></a>              if (!<a class="var it26709" onMouseOver="hilite(26709)" onMouseOut="lolite()" onClick="logVariable('recordexists')" href="../../../../_variables/recordexists.html">$recordexists</a>) {
<a name="l140"><span class="linenum"> 140</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = self::<a class="function" onClick="logFunction('record_from_handler')" href="../../../../_functions/record_from_handler.html" onMouseOver="funcPopup(event,'record_from_handler')">record_from_handler</a>(<a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>);
<a name="l141"><span class="linenum"> 141</span></a>                  <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('component')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/component.html">component</a> = <a class="var it2129" onMouseOver="hilite(2129)" onMouseOut="lolite()" onClick="logVariable('componentname')" href="../../../../_variables/componentname.html">$componentname</a>;
<a name="l142"><span class="linenum"> 142</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('messageinbound_handlers', <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>);
<a name="l143"><span class="linenum"> 143</span></a>              }
<a name="l144"><span class="linenum"> 144</span></a>          }
<a name="l145"><span class="linenum"> 145</span></a>      }
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>      <span class="comment">/**</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     * Remove the specified handler.</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     *</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     * @param \core\message\inbound\handler $handler The handler to remove</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">     */</span>
<a name="l152"><span class="linenum"> 152</span></a>      public static function <a class="function" onClick="logFunction('remove_messageinbound_handler')" href="../../../../_functions/remove_messageinbound_handler.html" onMouseOver="funcPopup(event,'remove_messageinbound_handler')">remove_messageinbound_handler</a>(<a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>) {
<a name="l153"><span class="linenum"> 153</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">        // Delete Inbound Message datakeys.</span>
<a name="l156"><span class="linenum"> 156</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('messageinbound_datakeys', array('handler' =&gt; <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a onClick="logVariable('id')" class="var it44100" onMouseOver="hilite(44100)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>));
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">        // Delete Inbound Message handlers.</span>
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('messageinbound_handlers', array('id' =&gt; <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a onClick="logVariable('id')" class="var it44100" onMouseOver="hilite(44100)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>));
<a name="l160"><span class="linenum"> 160</span></a>      }
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>      <span class="comment">/**</span>
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">     * Create a flat stdClass for the handler, appropriate for inserting</span>
<a name="l164"><span class="linenum"> 164</span></a>  <span class="comment">     * into the database.</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     *</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">     * @param \core\message\inbound\handler $handler The handler to retrieve the record for.</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * @return \stdClass</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     */</span>
<a name="l169"><span class="linenum"> 169</span></a>      public static function <a class="function" onClick="logFunction('record_from_handler')" href="../../../../_functions/record_from_handler.html" onMouseOver="funcPopup(event,'record_from_handler')">record_from_handler</a>(<a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>) {
<a name="l170"><span class="linenum"> 170</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = new \stdClass();
<a name="l171"><span class="linenum"> 171</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a> = <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a onClick="logVariable('id')" class="var it44100" onMouseOver="hilite(44100)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>;
<a name="l172"><span class="linenum"> 172</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('component')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/component.html">component</a> = <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a onClick="logVariable('component')" class="var it44100" onMouseOver="hilite(44100)" onMouseOut="lolite()" href="../../../../_variables/component.html">component</a>;
<a name="l173"><span class="linenum"> 173</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('classname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a> = <a class="phpfunction" onClick="logFunction('get_class')" href="../../../../_functions/get_class.html" onMouseOver="phpfuncPopup(event,'get_class')">get_class</a>(<a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>);
<a name="l174"><span class="linenum"> 174</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('classname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a>, '\\') !== 0) {
<a name="l175"><span class="linenum"> 175</span></a>              <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('classname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a> = '\\' . <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('classname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a>;
<a name="l176"><span class="linenum"> 176</span></a>          }
<a name="l177"><span class="linenum"> 177</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('defaultexpiration')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/defaultexpiration.html">defaultexpiration</a> = <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a onClick="logVariable('defaultexpiration')" class="var it44100" onMouseOver="hilite(44100)" onMouseOut="lolite()" href="../../../../_variables/defaultexpiration.html">defaultexpiration</a>;
<a name="l178"><span class="linenum"> 178</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('validateaddress')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/validateaddress.html">validateaddress</a> = <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a onClick="logVariable('validateaddress')" class="var it44100" onMouseOver="hilite(44100)" onMouseOut="lolite()" href="../../../../_variables/validateaddress.html">validateaddress</a>;
<a name="l179"><span class="linenum"> 179</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('enabled')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/enabled.html">enabled</a> = <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a onClick="logVariable('enabled')" class="var it44100" onMouseOver="hilite(44100)" onMouseOut="lolite()" href="../../../../_variables/enabled.html">enabled</a>;
<a name="l180"><span class="linenum"> 180</span></a>  
<a name="l181"><span class="linenum"> 181</span></a>          return <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>;
<a name="l182"><span class="linenum"> 182</span></a>      }
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>      <span class="comment">/**</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">     * Load the Inbound Message handler details for a given record.</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">     *</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">     * @param \stdClass $record The record to retrieve the handler for.</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">     * @return \core\message\inbound\handler or false</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">     */</span>
<a name="l190"><span class="linenum"> 190</span></a>      protected static function <a class="function" onClick="logFunction('handler_from_record')" href="../../../../_functions/handler_from_record.html" onMouseOver="funcPopup(event,'handler_from_record')">handler_from_record</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>) {
<a name="l191"><span class="linenum"> 191</span></a>          <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a> = <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('classname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/classname.html">classname</a>;
<a name="l192"><span class="linenum"> 192</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>, '\\') !== 0) {
<a name="l193"><span class="linenum"> 193</span></a>              <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a> = '\\' . <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>;
<a name="l194"><span class="linenum"> 194</span></a>          }
<a name="l195"><span class="linenum"> 195</span></a>          if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../../../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>)) {
<a name="l196"><span class="linenum"> 196</span></a>              return false;
<a name="l197"><span class="linenum"> 197</span></a>          }
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>          <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a> = new <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>;
<a name="l200"><span class="linenum"> 200</span></a>          if (isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>)) {
<a name="l201"><span class="linenum"> 201</span></a>              <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a class="function" onClick="logFunction('set_id')" href="../../../../_functions/set_id.html" onMouseOver="funcPopup(event,'set_id')">set_id</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('id')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/id.html">id</a>);
<a name="l202"><span class="linenum"> 202</span></a>          }
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a class="function" onClick="logFunction('set_component')" href="../../../../_functions/set_component.html" onMouseOver="funcPopup(event,'set_component')">set_component</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('component')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/component.html">component</a>);
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">        // Overload fields which can be modified.</span>
<a name="l206"><span class="linenum"> 206</span></a>          if (isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('defaultexpiration')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/defaultexpiration.html">defaultexpiration</a>)) {
<a name="l207"><span class="linenum"> 207</span></a>              <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a class="function" onClick="logFunction('set_defaultexpiration')" href="../../../../_functions/set_defaultexpiration.html" onMouseOver="funcPopup(event,'set_defaultexpiration')">set_defaultexpiration</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('defaultexpiration')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/defaultexpiration.html">defaultexpiration</a>);
<a name="l208"><span class="linenum"> 208</span></a>          }
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>          if (isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('validateaddress')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/validateaddress.html">validateaddress</a>)) {
<a name="l211"><span class="linenum"> 211</span></a>              <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a class="function" onClick="logFunction('set_validateaddress')" href="../../../../_functions/set_validateaddress.html" onMouseOver="funcPopup(event,'set_validateaddress')">set_validateaddress</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('validateaddress')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/validateaddress.html">validateaddress</a>);
<a name="l212"><span class="linenum"> 212</span></a>          }
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>          if (isset(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('enabled')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/enabled.html">enabled</a>)) {
<a name="l215"><span class="linenum"> 215</span></a>              <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>-&gt;<a class="function" onClick="logFunction('set_enabled')" href="../../../../_functions/set_enabled.html" onMouseOver="funcPopup(event,'set_enabled')">set_enabled</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('enabled')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../../../_variables/enabled.html">enabled</a>);
<a name="l216"><span class="linenum"> 216</span></a>          }
<a name="l217"><span class="linenum"> 217</span></a>  
<a name="l218"><span class="linenum"> 218</span></a>          return <a class="var it2691" onMouseOver="hilite(2691)" onMouseOut="lolite()" onClick="logVariable('handler')" href="../../../../_variables/handler.html">$handler</a>;
<a name="l219"><span class="linenum"> 219</span></a>      }
<a name="l220"><span class="linenum"> 220</span></a>  
<a name="l221"><span class="linenum"> 221</span></a>      <span class="comment">/**</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">     * Load the Inbound Message handler details for a given classname.</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">     *</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">     * @param string $classname The name of the class for the handler.</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment">     * @return \core\message\inbound\handler or false</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment">     */</span>
<a name="l227"><span class="linenum"> 227</span></a>      public static function <a class="function" onClick="logFunction('get_handler')" href="../../../../_functions/get_handler.html" onMouseOver="funcPopup(event,'get_handler')">get_handler</a>(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>) {
<a name="l228"><span class="linenum"> 228</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>, '\\') !== 0) {
<a name="l231"><span class="linenum"> 231</span></a>              <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a> = '\\' . <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>;
<a name="l232"><span class="linenum"> 232</span></a>          }
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('messageinbound_handlers', array('classname' =&gt; <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../../_variables/classname.html">$classname</a>), '*', <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l235"><span class="linenum"> 235</span></a>          if (!<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>) {
<a name="l236"><span class="linenum"> 236</span></a>              return false;
<a name="l237"><span class="linenum"> 237</span></a>          }
<a name="l238"><span class="linenum"> 238</span></a>          return self::<a class="function" onClick="logFunction('handler_from_record')" href="../../../../_functions/handler_from_record.html" onMouseOver="funcPopup(event,'handler_from_record')">handler_from_record</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>);
<a name="l239"><span class="linenum"> 239</span></a>      }
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>      <span class="comment">/**</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">     * Load the Inbound Message handler with a given ID</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">     *</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">     * @param int $id</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">     * @return \core\message\inbound\handler or false</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">     */</span>
<a name="l247"><span class="linenum"> 247</span></a>      public static function <a class="function" onClick="logFunction('get_handler_from_id')" href="../../../../_functions/get_handler_from_id.html" onMouseOver="funcPopup(event,'get_handler_from_id')">get_handler_from_id</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../../_variables/id.html">$id</a>) {
<a name="l248"><span class="linenum"> 248</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>;
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>          <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('messageinbound_handlers', array('id' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../../_variables/id.html">$id</a>), '*', <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l251"><span class="linenum"> 251</span></a>          if (!<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>) {
<a name="l252"><span class="linenum"> 252</span></a>              return false;
<a name="l253"><span class="linenum"> 253</span></a>          }
<a name="l254"><span class="linenum"> 254</span></a>          return self::<a class="function" onClick="logFunction('handler_from_record')" href="../../../../_functions/handler_from_record.html" onMouseOver="funcPopup(event,'handler_from_record')">handler_from_record</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../../_variables/record.html">$record</a>);
<a name="l255"><span class="linenum"> 255</span></a>      }
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'is_enabled': ['is_enabled', 'Tools cannot be disabled. ', [['lib/classes/plugininfo','tool.php',39],['admin/tool/recyclebin/classes','category_bin.php',54],['admin/tool/log/classes/plugininfo','logstore.php',35],['admin/tool/recyclebin/classes','course_bin.php',54],['mod/assign/feedback/offline','locallib.php',380],['admin/tool/recyclebin/classes','base_bin.php',38],['lib','adminlib.php',1955],['search/classes','base.php',190],['lib','medialib.php',318],['lib','medialib.php',635],['lib','medialib.php',1268],['admin/tool/health','index.php',393],['lib/classes/plugininfo','mnetservice.php',33],['lib/classes/message/inbound','manager.php',37],['mod/assignment/classes/plugininfo','assignment.php',32],['competency/classes','api.php',49],['mod/assign','assignmentplugin.php',223],['lib/classes/plugininfo','orphaned.php',37],['search/tests/fixtures','mock_search_area.php',38],['tag/classes','area.php',106],['lib/classes/plugininfo','base.php',383],['mod/assign/feedback/editpdf','locallib.php',340],['tag/classes','tag.php',1269],['mod/assign/submission/comments','locallib.php',172],['lib','completionlib.php',269]], 276],
'set_validateaddress': ['set_validateaddress', 'Set whether validation of the address is required. ', [['lib/classes/message/inbound','handler.php',133]], 1],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'remove_messageinbound_handler': ['remove_messageinbound_handler', 'Remove the specified handler. ', [['lib/classes/message/inbound','manager.php',147]], 1],
'get_handler': ['get_handler', 'Create a new SimplePie_Cache object ', [['lib/simplepie/library/SimplePie','Cache.php',74],['lib/simplepie/library/SimplePie','Enclosure.php',529],['lib/classes/message/inbound','manager.php',221],['lib/classes/message/inbound','address_manager.php',137]], 9],
'get_recordset': ['get_recordset', 'Get the recordset. ', [['mod/glossary/classes','entry_query_builder.php',305],['lib/dml','moodle_database.php',1162]], 92],
'record_from_handler': ['record_from_handler', 'Create a flat stdClass for the handler, appropriate for inserting into the database. ', [['lib/classes/message/inbound','manager.php',162]], 7],
'load_default_handlers_for_component': ['load_default_handlers_for_component', 'Load handler instances for all of the handlers defined in db/messageinbound_handlers.php for the specified component. ', [['lib/classes/message/inbound','manager.php',81]], 1],
'update_handlers_for_component': ['update_handlers_for_component', 'Update the database to create, update, and remove handlers. ', [['lib/classes/message/inbound','manager.php',62]], 11],
'get_component_directory': ['get_component_directory', 'Return exact absolute path to a plugin directory. ', [['lib','deprecatedlib.php',226],['lib/classes','component.php',1051]], 51],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'set_enabled': ['set_enabled', 'Set the enabled name. ', [['lib/classes/message/inbound','handler.php',168],['search/classes','base.php',207]], 3],
'handler_from_record': ['handler_from_record', 'Helper to fetch make the handler_from_record public for unit testing. ', [['message/tests','inbound_test.php',659],['lib/classes/message/inbound','manager.php',184]], 5],
'set_id': ['set_id', 'Setter for $id. ', [['lib/classes/task','adhoc_task.php',43],['lib/classes/message/inbound','handler.php',100],['blocks/rss_client/classes/output','item.php',140],['mnet','peer.php',253]], 26],
'set_defaultexpiration': ['set_defaultexpiration', 'Set the default validity for new keys. ', [['lib/classes/message/inbound','handler.php',178]], 1],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'create_missing_messageinbound_handlers_for_component': ['create_missing_messageinbound_handlers_for_component', 'Update the database to contain a list of handlers for a component, adding any handlers which do not exist in the database. ', [['lib/classes/message/inbound','manager.php',122]], 1],
'normalize_componentname': ['normalize_componentname', 'Normalize the component name. ', [['lib/classes','component.php',1000]], 25],
'set_component': ['set_component', 'Setter for $component. ', [['lib/classes/task','task_base.php',117],['grade/grading','lib.php',135],['lib/classes/message/inbound','handler.php',110],['comment','lib.php',272]], 9],
'get_handler_from_id': ['get_handler_from_id', 'Load the Inbound Message handler with a given ID ', [['lib/classes/message/inbound','manager.php',241]], 1],
'get_class': ['get_class', '', [], 305],
'strpos': ['strpos', '', [], 1604],
'file_exists': ['file_exists', '', [], 867],
'defined': ['defined', '', [], 4731],
'class_exists': ['class_exists', '', [], 279]};
CLASS_DATA={
'manager': ['manager', 'Search subsystem manager. ', [['search/classes','manager.php',31],['user/classes/output/myprofile','manager.php',28],['lib/classes/antivirus','manager.php',29],['lib/classes/event','manager.php',30],['lib/classes/task','manager.php',28],['admin/tool/messageinbound/classes','manager.php',29],['lib/classes/message/inbound','manager.php',29],['admin/tool/log/classes/log','manager.php',29],['lib/classes/log','manager.php',29],['lib/classes/session','manager.php',29],['lib/classes/message','manager.php',31]], 585],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 511]};
CONST_DATA={
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 215],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
