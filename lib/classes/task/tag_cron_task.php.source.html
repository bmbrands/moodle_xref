<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/classes/task/tag_cron_task.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='lib/classes/task';
filename='tag_cron_task.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/classes/task/</a> -> <a href="tag_cron_task.php.html">tag_cron_task.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="tag_cron_task.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="tag_cron_task.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * A scheduled task.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2013 onwards Martin Dougiamas  http://dougiamas.com</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  namespace core\task;
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  use core_tag_collection, core_tag_tag, core_tag_area, stdClass;
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment">/**</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * Simple task to run the tag cron.</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> */</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('tag_cron_task')" href="../../../_classes/tag_cron_task.html" onMouseOver="classPopup(event,'tag_cron_task')">tag_cron_task</a> extends scheduled_task {
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>      <span class="comment">/**</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment">     * Get a descriptive name for this task (shown to admins).</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment">     *</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">     * @return string</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     */</span>
<a name="l38"><span class="linenum">  38</span></a>      public function <a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>() {
<a name="l39"><span class="linenum">  39</span></a>          return <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('tasktagcron', 'admin');
<a name="l40"><span class="linenum">  40</span></a>      }
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>      <span class="comment">/**</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     * Do the job.</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     * Throw exceptions on errors (the job will be retried).</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">     */</span>
<a name="l46"><span class="linenum">  46</span></a>      public function <a class="function" onClick="logFunction('execute')" href="../../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>() {
<a name="l47"><span class="linenum">  47</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('usetags')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../_variables/usetags.html">usetags</a>)) {
<a name="l50"><span class="linenum">  50</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('compute_correlations')" href="../../../_functions/compute_correlations.html" onMouseOver="funcPopup(event,'compute_correlations')">compute_correlations</a>();
<a name="l51"><span class="linenum">  51</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('cleanup')" href="../../../_functions/cleanup.html" onMouseOver="funcPopup(event,'cleanup')">cleanup</a>();
<a name="l52"><span class="linenum">  52</span></a>          }
<a name="l53"><span class="linenum">  53</span></a>      }
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>      <span class="comment">/**</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     * Calculates and stores the correlated tags of all tags.</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">     *</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     * The correlations are stored in the 'tag_correlation' table.</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">     *</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">     * Two tags are correlated if they appear together a lot. Ex.: Users tagged with &quot;computers&quot;</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">     * will probably also be tagged with &quot;algorithms&quot;.</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">     *</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">     * The rationale for the 'tag_correlation' table is performance. It works as a cache</span>
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">     * for a potentially heavy load query done at the 'tag_instance' table. So, the</span>
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">     * 'tag_correlation' table stores redundant information derived from the 'tag_instance' table.</span>
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">     *</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     * @param int $mincorrelation Only tags with more than $mincorrelation correlations will be identified.</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     */</span>
<a name="l69"><span class="linenum">  69</span></a>      public function <a class="function" onClick="logFunction('compute_correlations')" href="../../../_functions/compute_correlations.html" onMouseOver="funcPopup(event,'compute_correlations')">compute_correlations</a>(<a class="var it2683" onMouseOver="hilite(2683)" onMouseOut="lolite()" onClick="logVariable('mincorrelation')" href="../../../_variables/mincorrelation.html">$mincorrelation</a> = 2) {
<a name="l70"><span class="linenum">  70</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">        // This mighty one line query fetches a row from the database for every</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">        // individual tag correlation. We then need to process the rows collecting</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">        // the correlations for each tag id.</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment">        // The fields used by this query are as follows:</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">        //   tagid         : This is the tag id, there should be at least $mincorrelation</span>
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">        //                   rows for each tag id.</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">        //   correlation   : This is the tag id that correlates to the above tagid field.</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">        //   correlationid : This is the id of the row in the tag_correlation table that</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">        //                   relates to the tagid field and will be NULL if there are no</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">        //                   existing correlations.</span>
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = 'SELECT pairs.tagid, pairs.correlation, pairs.ocurrences, co.id AS correlationid
<a name="l83"><span class="linenum">  83</span></a>                    FROM (
<a name="l84"><span class="linenum">  84</span></a>                             SELECT ta.tagid, tb.tagid AS correlation, <a class="phpfunction" onClick="logFunction('COUNT')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(*) AS ocurrences
<a name="l85"><span class="linenum">  85</span></a>                               FROM {tag_instance} ta
<a name="l86"><span class="linenum">  86</span></a>                               JOIN {tag} tga ON ta.tagid = tga.id
<a name="l87"><span class="linenum">  87</span></a>                               JOIN {tag_instance} tb <a class="function" onClick="logFunction('ON')" href="../../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (ta.itemtype = tb.itemtype AND ta.component = tb.component
<a name="l88"><span class="linenum">  88</span></a>                                  AND ta.itemid = tb.itemid AND ta.tagid &lt;&gt; tb.tagid)
<a name="l89"><span class="linenum">  89</span></a>                               JOIN {tag} tgb ON tb.tagid = tgb.id AND tgb.tagcollid = tga.tagcollid
<a name="l90"><span class="linenum">  90</span></a>                           GROUP BY ta.tagid, tb.tagid
<a name="l91"><span class="linenum">  91</span></a>                             HAVING <a class="phpfunction" onClick="logFunction('COUNT')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(*) &gt; :mincorrelation
<a name="l92"><span class="linenum">  92</span></a>                         ) pairs
<a name="l93"><span class="linenum">  93</span></a>               LEFT JOIN {tag_correlation} co ON co.tagid = pairs.tagid
<a name="l94"><span class="linenum">  94</span></a>                ORDER BY pairs.tagid ASC, pairs.ocurrences DESC, pairs.correlation ASC';
<a name="l95"><span class="linenum">  95</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>, array('mincorrelation' =&gt; <a class="var it2683" onMouseOver="hilite(2683)" onMouseOut="lolite()" onClick="logVariable('mincorrelation')" href="../../../_variables/mincorrelation.html">$mincorrelation</a>));
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">        // Set up an empty tag correlation object.</span>
<a name="l98"><span class="linenum">  98</span></a>          <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a> = new stdClass;
<a name="l99"><span class="linenum">  99</span></a>          <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('id')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a> = null;
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('tagid')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/tagid.html">tagid</a> = null;
<a name="l101"><span class="linenum"> 101</span></a>          <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('correlatedtags')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/correlatedtags.html">correlatedtags</a> = array();
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">        // We store each correlation id in this array so we can remove any correlations</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">        // that no longer exist.</span>
<a name="l105"><span class="linenum"> 105</span></a>          <a class="var it3787" onMouseOver="hilite(3787)" onMouseOut="lolite()" onClick="logVariable('correlations')" href="../../../_variables/correlations.html">$correlations</a> = array();
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">        // Iterate each row of the result set and build them into tag correlations.</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">        // We add all of a tag's correlations to $tagcorrelation-&gt;correlatedtags[]</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">        // then save the $tagcorrelation object.</span>
<a name="l110"><span class="linenum"> 110</span></a>          foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../../_variables/rs.html">$rs</a> as <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>) {
<a name="l111"><span class="linenum"> 111</span></a>              if (<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('tagid')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../../../_variables/tagid.html">tagid</a> != <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('tagid')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/tagid.html">tagid</a>) {
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">                // The tag id has changed so we have all of the correlations for this tag.</span>
<a name="l113"><span class="linenum"> 113</span></a>                  <a class="var it3788" onMouseOver="hilite(3788)" onMouseOut="lolite()" onClick="logVariable('tagcorrelationid')" href="../../../_variables/tagcorrelationid.html">$tagcorrelationid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_computed_correlation')" href="../../../_functions/process_computed_correlation.html" onMouseOver="funcPopup(event,'process_computed_correlation')">process_computed_correlation</a>(<a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>);
<a name="l114"><span class="linenum"> 114</span></a>                  if (<a class="var it3788" onMouseOver="hilite(3788)" onMouseOut="lolite()" onClick="logVariable('tagcorrelationid')" href="../../../_variables/tagcorrelationid.html">$tagcorrelationid</a>) {
<a name="l115"><span class="linenum"> 115</span></a>                      <a class="var it3787" onMouseOver="hilite(3787)" onMouseOut="lolite()" onClick="logVariable('correlations')" href="../../../_variables/correlations.html">$correlations</a>[] = <a class="var it3788" onMouseOver="hilite(3788)" onMouseOut="lolite()" onClick="logVariable('tagcorrelationid')" href="../../../_variables/tagcorrelationid.html">$tagcorrelationid</a>;
<a name="l116"><span class="linenum"> 116</span></a>                  }
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">                // Now we reset the tag correlation object so we can reuse it and set it</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">                // up for the current record.</span>
<a name="l119"><span class="linenum"> 119</span></a>                  <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a> = new stdClass;
<a name="l120"><span class="linenum"> 120</span></a>                  <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('id')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a> = <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('correlationid')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../../../_variables/correlationid.html">correlationid</a>;
<a name="l121"><span class="linenum"> 121</span></a>                  <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('tagid')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/tagid.html">tagid</a> = <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('tagid')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../../../_variables/tagid.html">tagid</a>;
<a name="l122"><span class="linenum"> 122</span></a>                  <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('correlatedtags')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/correlatedtags.html">correlatedtags</a> = array();
<a name="l123"><span class="linenum"> 123</span></a>              }
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">            // Save the correlation on the tag correlation object.</span>
<a name="l125"><span class="linenum"> 125</span></a>              <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('correlatedtags')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/correlatedtags.html">correlatedtags</a>[] = <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../../_variables/row.html">$row</a>-&gt;<a onClick="logVariable('correlation')" class="var it42924" onMouseOver="hilite(42924)" onMouseOut="lolite()" href="../../../_variables/correlation.html">correlation</a>;
<a name="l126"><span class="linenum"> 126</span></a>          }
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">        // Update the current correlation after the last record.</span>
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it3788" onMouseOver="hilite(3788)" onMouseOut="lolite()" onClick="logVariable('tagcorrelationid')" href="../../../_variables/tagcorrelationid.html">$tagcorrelationid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_computed_correlation')" href="../../../_functions/process_computed_correlation.html" onMouseOver="funcPopup(event,'process_computed_correlation')">process_computed_correlation</a>(<a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>);
<a name="l129"><span class="linenum"> 129</span></a>          if (<a class="var it3788" onMouseOver="hilite(3788)" onMouseOut="lolite()" onClick="logVariable('tagcorrelationid')" href="../../../_variables/tagcorrelationid.html">$tagcorrelationid</a>) {
<a name="l130"><span class="linenum"> 130</span></a>              <a class="var it3787" onMouseOver="hilite(3787)" onMouseOut="lolite()" onClick="logVariable('correlations')" href="../../../_variables/correlations.html">$correlations</a>[] = <a class="var it3788" onMouseOver="hilite(3788)" onMouseOut="lolite()" onClick="logVariable('tagcorrelationid')" href="../../../_variables/tagcorrelationid.html">$tagcorrelationid</a>;
<a name="l131"><span class="linenum"> 131</span></a>          }
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">        // Close the recordset.</span>
<a name="l134"><span class="linenum"> 134</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">        // Remove any correlations that weren't just identified.</span>
<a name="l137"><span class="linenum"> 137</span></a>          if (empty(<a class="var it3787" onMouseOver="hilite(3787)" onMouseOut="lolite()" onClick="logVariable('correlations')" href="../../../_variables/correlations.html">$correlations</a>)) {
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">            // There are no tag correlations.</span>
<a name="l139"><span class="linenum"> 139</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('tag_correlation');
<a name="l140"><span class="linenum"> 140</span></a>          } else {
<a name="l141"><span class="linenum"> 141</span></a>              <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it3787" onMouseOver="hilite(3787)" onMouseOut="lolite()" onClick="logVariable('correlations')" href="../../../_variables/correlations.html">$correlations</a>,
<a name="l142"><span class="linenum"> 142</span></a>                      <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../../../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'param0000', false);
<a name="l143"><span class="linenum"> 143</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('tag_correlation', 'id '.<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>);
<a name="l144"><span class="linenum"> 144</span></a>          }
<a name="l145"><span class="linenum"> 145</span></a>      }
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>      <span class="comment">/**</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">     * Clean up the tag tables, making sure all tagged object still exists.</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment">     *</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">     * This method is called from cron.</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment">     *</span>
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">     * This should normally not be necessary, but in case related tags are not deleted</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     * when the tagged record is removed, this should be done once in a while, perhaps</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     * on an occasional cron run.  On a site with lots of tags, this could become an</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     * expensive function to call.</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     */</span>
<a name="l157"><span class="linenum"> 157</span></a>      public function <a class="function" onClick="logFunction('cleanup')" href="../../../_functions/cleanup.html" onMouseOver="funcPopup(event,'cleanup')">cleanup</a>() {
<a name="l158"><span class="linenum"> 158</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">        // Get ids to delete from instances where the tag has been deleted. This should never happen apparently.</span>
<a name="l161"><span class="linenum"> 161</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = &quot;SELECT ti.id
<a name="l162"><span class="linenum"> 162</span></a>                    FROM {tag_instance} ti
<a name="l163"><span class="linenum"> 163</span></a>               LEFT JOIN {tag} t ON t.id = ti.tagid
<a name="l164"><span class="linenum"> 164</span></a>                   WHERE t.id IS null&quot;;
<a name="l165"><span class="linenum"> 165</span></a>          <a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('tagids')" href="../../../_variables/tagids.html">$tagids</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>);
<a name="l166"><span class="linenum"> 166</span></a>          <a class="var it3791" onMouseOver="hilite(3791)" onMouseOut="lolite()" onClick="logVariable('tagarray')" href="../../../_variables/tagarray.html">$tagarray</a> = array();
<a name="l167"><span class="linenum"> 167</span></a>          foreach (<a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('tagids')" href="../../../_variables/tagids.html">$tagids</a> as <a class="var it2128" onMouseOver="hilite(2128)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../../_variables/tagid.html">$tagid</a>) {
<a name="l168"><span class="linenum"> 168</span></a>              <a class="var it3791" onMouseOver="hilite(3791)" onMouseOut="lolite()" onClick="logVariable('tagarray')" href="../../../_variables/tagarray.html">$tagarray</a>[] = <a class="var it2128" onMouseOver="hilite(2128)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../../_variables/tagid.html">$tagid</a>-&gt;<a onClick="logVariable('id')" class="var it43704" onMouseOver="hilite(43704)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l169"><span class="linenum"> 169</span></a>          }
<a name="l170"><span class="linenum"> 170</span></a>  
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">        // Next get ids from instances that have an owner that has been deleted.</span>
<a name="l172"><span class="linenum"> 172</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = &quot;SELECT ti.id
<a name="l173"><span class="linenum"> 173</span></a>                    FROM {tag_instance} ti, {user} u
<a name="l174"><span class="linenum"> 174</span></a>                   WHERE ti.itemid = u.id
<a name="l175"><span class="linenum"> 175</span></a>                     AND ti.itemtype = 'user'
<a name="l176"><span class="linenum"> 176</span></a>                     AND ti.component = 'core'
<a name="l177"><span class="linenum"> 177</span></a>                     AND u.deleted = 1&quot;;
<a name="l178"><span class="linenum"> 178</span></a>          <a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('tagids')" href="../../../_variables/tagids.html">$tagids</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>);
<a name="l179"><span class="linenum"> 179</span></a>          foreach (<a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('tagids')" href="../../../_variables/tagids.html">$tagids</a> as <a class="var it2128" onMouseOver="hilite(2128)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../../_variables/tagid.html">$tagid</a>) {
<a name="l180"><span class="linenum"> 180</span></a>              <a class="var it3791" onMouseOver="hilite(3791)" onMouseOut="lolite()" onClick="logVariable('tagarray')" href="../../../_variables/tagarray.html">$tagarray</a>[] = <a class="var it2128" onMouseOver="hilite(2128)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../../_variables/tagid.html">$tagid</a>-&gt;<a onClick="logVariable('id')" class="var it43704" onMouseOver="hilite(43704)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l181"><span class="linenum"> 181</span></a>          }
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">        // Get the other itemtypes.</span>
<a name="l184"><span class="linenum"> 184</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = &quot;SELECT DISTINCT component, itemtype
<a name="l185"><span class="linenum"> 185</span></a>                    FROM {tag_instance}
<a name="l186"><span class="linenum"> 186</span></a>                   WHERE itemtype &lt;&gt; 'user' or component &lt;&gt; 'core'&quot;;
<a name="l187"><span class="linenum"> 187</span></a>          <a class="var it2312" onMouseOver="hilite(2312)" onMouseOut="lolite()" onClick="logVariable('tagareas')" href="../../../_variables/tagareas.html">$tagareas</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>);
<a name="l188"><span class="linenum"> 188</span></a>          foreach (<a class="var it2312" onMouseOver="hilite(2312)" onMouseOut="lolite()" onClick="logVariable('tagareas')" href="../../../_variables/tagareas.html">$tagareas</a> as <a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('tagarea')" href="../../../_variables/tagarea.html">$tagarea</a>) {
<a name="l189"><span class="linenum"> 189</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = 'SELECT ti.id
<a name="l190"><span class="linenum"> 190</span></a>                        FROM {tag_instance} ti
<a name="l191"><span class="linenum"> 191</span></a>                   LEFT JOIN {' . <a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('tagarea')" href="../../../_variables/tagarea.html">$tagarea</a>-&gt;<a onClick="logVariable('itemtype')" class="var it43705" onMouseOver="hilite(43705)" onMouseOut="lolite()" href="../../../_variables/itemtype.html">itemtype</a> . '} it ON it.id = ti.itemid
<a name="l192"><span class="linenum"> 192</span></a>                       WHERE it.id IS null
<a name="l193"><span class="linenum"> 193</span></a>                       AND ti.itemtype = ? AND ti.component = ?';
<a name="l194"><span class="linenum"> 194</span></a>              <a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('tagids')" href="../../../_variables/tagids.html">$tagids</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>, array(<a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('tagarea')" href="../../../_variables/tagarea.html">$tagarea</a>-&gt;<a onClick="logVariable('itemtype')" class="var it43705" onMouseOver="hilite(43705)" onMouseOut="lolite()" href="../../../_variables/itemtype.html">itemtype</a>, <a class="var it3792" onMouseOver="hilite(3792)" onMouseOut="lolite()" onClick="logVariable('tagarea')" href="../../../_variables/tagarea.html">$tagarea</a>-&gt;<a onClick="logVariable('component')" class="var it43705" onMouseOver="hilite(43705)" onMouseOut="lolite()" href="../../../_variables/component.html">component</a>));
<a name="l195"><span class="linenum"> 195</span></a>              foreach (<a class="var it2662" onMouseOver="hilite(2662)" onMouseOut="lolite()" onClick="logVariable('tagids')" href="../../../_variables/tagids.html">$tagids</a> as <a class="var it2128" onMouseOver="hilite(2128)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../../_variables/tagid.html">$tagid</a>) {
<a name="l196"><span class="linenum"> 196</span></a>                  <a class="var it3791" onMouseOver="hilite(3791)" onMouseOut="lolite()" onClick="logVariable('tagarray')" href="../../../_variables/tagarray.html">$tagarray</a>[] = <a class="var it2128" onMouseOver="hilite(2128)" onMouseOut="lolite()" onClick="logVariable('tagid')" href="../../../_variables/tagid.html">$tagid</a>-&gt;<a onClick="logVariable('id')" class="var it43704" onMouseOver="hilite(43704)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l197"><span class="linenum"> 197</span></a>              }
<a name="l198"><span class="linenum"> 198</span></a>          }
<a name="l199"><span class="linenum"> 199</span></a>  
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">        // Get instances for each of the ids to be deleted.</span>
<a name="l201"><span class="linenum"> 201</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3791" onMouseOver="hilite(3791)" onMouseOut="lolite()" onClick="logVariable('tagarray')" href="../../../_variables/tagarray.html">$tagarray</a>) &gt; 0) {
<a name="l202"><span class="linenum"> 202</span></a>              <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it3793" onMouseOver="hilite(3793)" onMouseOut="lolite()" onClick="logVariable('sqlin')" href="../../../_variables/sqlin.html">$sqlin</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it3791" onMouseOver="hilite(3791)" onMouseOut="lolite()" onClick="logVariable('tagarray')" href="../../../_variables/tagarray.html">$tagarray</a>);
<a name="l203"><span class="linenum"> 203</span></a>              <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = &quot;SELECT ti.*, COALESCE(t.name, 'deleted') AS name, COALESCE(t.rawname, 'deleted') AS rawname
<a name="l204"><span class="linenum"> 204</span></a>                        FROM {tag_instance} ti
<a name="l205"><span class="linenum"> 205</span></a>                   LEFT JOIN {tag} t ON t.id = ti.tagid
<a name="l206"><span class="linenum"> 206</span></a>                       WHERE ti.id <a class="var it3793" onMouseOver="hilite(3793)" onMouseOut="lolite()" onClick="logVariable('sqlin')" href="../../../_variables/sqlin.html">$sqlin</a>&quot;;
<a name="l207"><span class="linenum"> 207</span></a>              <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../../../_variables/instances.html">$instances</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>);
<a name="l208"><span class="linenum"> 208</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('bulk_delete_instances')" href="../../../_functions/bulk_delete_instances.html" onMouseOver="funcPopup(event,'bulk_delete_instances')">bulk_delete_instances</a>(<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../../../_variables/instances.html">$instances</a>);
<a name="l209"><span class="linenum"> 209</span></a>          }
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>          <a class="class" onClick="logClass('core_tag_collection')" href="../../../_classes/core_tag_collection.html" onMouseOver="classPopup(event,'core_tag_collection')">core_tag_collection</a>::<a class="function" onClick="logFunction('cleanup_unused_tags')" href="../../../_functions/cleanup_unused_tags.html" onMouseOver="funcPopup(event,'cleanup_unused_tags')">cleanup_unused_tags</a>();
<a name="l212"><span class="linenum"> 212</span></a>      }
<a name="l213"><span class="linenum"> 213</span></a>  
<a name="l214"><span class="linenum"> 214</span></a>      <span class="comment">/**</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">     * This function processes a tag correlation and makes changes in the database as required.</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">     *</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">     * The tag correlation object needs have both a tagid property and a correlatedtags property that is an array.</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">     *</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     * @param   stdClass $tagcorrelation</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     * @return  int/bool The id of the tag correlation that was just processed or false.</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">     */</span>
<a name="l222"><span class="linenum"> 222</span></a>      public function <a class="function" onClick="logFunction('process_computed_correlation')" href="../../../_functions/process_computed_correlation.html" onMouseOver="funcPopup(event,'process_computed_correlation')">process_computed_correlation</a>(stdClass <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>) {
<a name="l223"><span class="linenum"> 223</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l224"><span class="linenum"> 224</span></a>  
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment">        // You must provide a tagid and correlatedtags must be set and be an array.</span>
<a name="l226"><span class="linenum"> 226</span></a>          if (empty(<a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('tagid')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/tagid.html">tagid</a>) || !isset(<a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('correlatedtags')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/correlatedtags.html">correlatedtags</a>) ||
<a name="l227"><span class="linenum"> 227</span></a>                  !<a class="phpfunction" onClick="logFunction('is_array')" href="../../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('correlatedtags')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/correlatedtags.html">correlatedtags</a>)) {
<a name="l228"><span class="linenum"> 228</span></a>              return false;
<a name="l229"><span class="linenum"> 229</span></a>          }
<a name="l230"><span class="linenum"> 230</span></a>  
<a name="l231"><span class="linenum"> 231</span></a>          <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('correlatedtags')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/correlatedtags.html">correlatedtags</a> = <a class="function" onClick="logFunction('join')" href="../../../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(',', <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('correlatedtags')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/correlatedtags.html">correlatedtags</a>);
<a name="l232"><span class="linenum"> 232</span></a>          if (!empty(<a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('id')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>)) {
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">            // The tag correlation already exists so update it.</span>
<a name="l234"><span class="linenum"> 234</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('tag_correlation', <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>);
<a name="l235"><span class="linenum"> 235</span></a>          } else {
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">            // This is a new correlation to insert.</span>
<a name="l237"><span class="linenum"> 237</span></a>              <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('id')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('tag_correlation', <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>);
<a name="l238"><span class="linenum"> 238</span></a>          }
<a name="l239"><span class="linenum"> 239</span></a>          return <a class="var it2684" onMouseOver="hilite(2684)" onMouseOut="lolite()" onClick="logVariable('tagcorrelation')" href="../../../_variables/tagcorrelation.html">$tagcorrelation</a>-&gt;<a onClick="logVariable('id')" class="var it43703" onMouseOver="hilite(43703)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l240"><span class="linenum"> 240</span></a>      }
<a name="l241"><span class="linenum"> 241</span></a>  
<a name="l242"><span class="linenum"> 242</span></a>      <span class="comment">/**</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment">     * This function will delete numerous tag instances efficiently.</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment">     * This removes tag instances only. It doesn't check to see if it is the last use of a tag.</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">     *</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment">     * @param array $instances An array of tag instance objects with the addition of the tagname and tagrawname</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment">     *        (used for recording a delete event).</span>
<a name="l248"><span class="linenum"> 248</span></a>  <span class="comment">     */</span>
<a name="l249"><span class="linenum"> 249</span></a>      public function <a class="function" onClick="logFunction('bulk_delete_instances')" href="../../../_functions/bulk_delete_instances.html" onMouseOver="funcPopup(event,'bulk_delete_instances')">bulk_delete_instances</a>(<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../../../_variables/instances.html">$instances</a>) {
<a name="l250"><span class="linenum"> 250</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l251"><span class="linenum"> 251</span></a>  
<a name="l252"><span class="linenum"> 252</span></a>          <a class="var it3794" onMouseOver="hilite(3794)" onMouseOut="lolite()" onClick="logVariable('instanceids')" href="../../../_variables/instanceids.html">$instanceids</a> = array();
<a name="l253"><span class="linenum"> 253</span></a>          foreach (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../../../_variables/instances.html">$instances</a> as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>) {
<a name="l254"><span class="linenum"> 254</span></a>              <a class="var it3794" onMouseOver="hilite(3794)" onMouseOut="lolite()" onClick="logVariable('instanceids')" href="../../../_variables/instanceids.html">$instanceids</a>[] = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l255"><span class="linenum"> 255</span></a>          }
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">        // This is a multi db compatible method of creating the correct sql when using the 'IN' value.</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">        // $insql is the sql statement, $params are the id numbers.</span>
<a name="l259"><span class="linenum"> 259</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it1041" onMouseOver="hilite(1041)" onMouseOut="lolite()" onClick="logVariable('insql')" href="../../../_variables/insql.html">$insql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../../../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it3794" onMouseOver="hilite(3794)" onMouseOut="lolite()" onClick="logVariable('instanceids')" href="../../../_variables/instanceids.html">$instanceids</a>);
<a name="l260"><span class="linenum"> 260</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = 'id ' . <a class="var it1041" onMouseOver="hilite(1041)" onMouseOut="lolite()" onClick="logVariable('insql')" href="../../../_variables/insql.html">$insql</a>;
<a name="l261"><span class="linenum"> 261</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('tag_instance', <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>);
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment">        // Now go through and record each tag individually with the event system.</span>
<a name="l264"><span class="linenum"> 264</span></a>          foreach (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../../../_variables/instances.html">$instances</a> as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>) {
<a name="l265"><span class="linenum"> 265</span></a>  <span class="comment">            // Trigger tag removed event (i.e. The tag instance has been removed).</span>
<a name="l266"><span class="linenum"> 266</span></a>              \core\event\<a class="class" onClick="logClass('tag_removed')" href="../../../_classes/tag_removed.html" onMouseOver="classPopup(event,'tag_removed')">tag_removed</a>::<a class="function" onClick="logFunction('create_from_tag_instance')" href="../../../_functions/create_from_tag_instance.html" onMouseOver="funcPopup(event,'create_from_tag_instance')">create_from_tag_instance</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('name')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../../_variables/name.html">name</a>,
<a name="l267"><span class="linenum"> 267</span></a>                      <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('rawname')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../../../_variables/rawname.html">rawname</a>, true)-&gt;<a class="function" onClick="logFunction('trigger')" href="../../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l268"><span class="linenum"> 268</span></a>          }
<a name="l269"><span class="linenum"> 269</span></a>      }
<a name="l270"><span class="linenum"> 270</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'create_from_tag_instance': ['create_from_tag_instance', 'Creates an event from taginstance object ', [['lib/classes/event','tag_added.php',77],['lib/classes/event','tag_removed.php',77]], 7],
'bulk_delete_instances': ['bulk_delete_instances', 'This function will delete numerous tag instances efficiently. This removes tag instances only. It doesn\'t check to see if it is the last use of a tag. ', [['lib/classes/task','tag_cron_task.php',242]], 4],
'compute_correlations': ['compute_correlations', 'Calculates and stores the correlated tags of all tags. ', [['lib/classes/task','tag_cron_task.php',55]], 5],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as an moodle_recordset.  $sql must be a complete SQL query. Since this method is a little less readable, use of it should be restricted to code where it\'s possible there might be large datasets being returned.  For known small datasets use get_records_sql - it leads to simpler code. ', [['lib/dml','pdo_moodle_database.php',252],['lib/dml','oci_native_moodle_database.php',1106],['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','mssql_native_moodle_database.php',736],['lib/dml','mysqli_native_moodle_database.php',993],['lib/dml','sqlsrv_native_moodle_database.php',811],['lib/dml/tests','dml_test.php',5544]], 283],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'get_name': ['get_name', 'Return localised event name. ', [['lib/classes/event','competency_plan_unlinked.php',72],['admin/tool/langimport/classes/task','update_langpacks_task.php',35],['lib/simplepie/library/SimplePie','Author.php',106],['portfolio/download','lib.php',10],['backup/util/structure','restore_path_element.class.php',98],['lib/classes/message/inbound','private_files_handler.php',56],['lib/classes/event','grouping_group_assigned.php',48],['calendar/tests','calendartype_test_example.php',32],['lib/classes/event','enrol_instance_deleted.php',70],['report/log/classes/event','user_report_viewed.php',54],['lib/classes/task','blog_cron_task.php',31],['mod/quiz/classes/event','attempt_reviewed.php',53],['lib/classes/event','tag_unflagged.php',55],['lib/classes/task','send_new_user_passwords_task.php',31],['lib/classes/event','role_unassigned.php',53],['mod/assign/classes/event','grading_form_viewed.php',82],['question/classes/bank','edit_action_column.php',35],['admin/tool/log/store/standard/classes/task','cleanup_task.php',31],['mod/workshop/classes/event','submission_deleted.php',63],['mod/forum/classes/event','discussion_updated.php',65],['lib/classes/event','course_module_instance_list_viewed.php',75],['lib/classes/event','course_created.php',55],['lib/dml','pdo_moodle_database.php',113],['mod/assign/classes/event','extension_granted.php',77],['lib/classes/task','tag_cron_task.php',33],['enrol/imsenterprise/classes/task','cron_task.php',34],['lib/classes/event','course_deleted.php',56],['lib/classes/task','completion_daily_task.php',33],['mod/forum/classes/event','readtracking_enabled.php',64],['mod/wiki/classes/event','page_created.php',48],['lib/dml','oci_native_moodle_database.php',94],['lib/classes/event','competency_viewed.php',70],['mod/choice/classes/event','answer_updated.php',72],['lib/classes/event','search_indexed.php',47],['lib/classes/event','badge_criteria_updated.php',53],['question/classes/bank','question_type_column.php',26],['mod/wiki/classes/event','page_version_deleted.php',54],['lib/grade','grade_item.php',1384],['lib/classes/event','competency_user_competency_rated_in_plan.php',88],['lib/classes/event','webservice_token_sent.php',56],['mod/glossary/classes/event','entry_deleted.php',54],['admin/tool/messageinbound/classes/message/inbound','invalid_recipient_handler.php',60],['lib/classes/event','competency_template_viewed.php',63],['lib/classes/task','context_cleanup_task.php',32],['mod/assign/tests/fixtures','event_mod_assign_fixtures.php',62],['admin/tool/langimport/classes/event','langpack_removed.php',89],['mod/glossary/classes/event','category_deleted.php',46],['mod/forum/classes/message/inbound','reply_handler.php',51],['competency/classes','competency_rule.php',84],['mod/lti/classes/event','unknown_service_api_called.php',82],['lib/classes/event','badge_deleted.php',49],['mod/quiz/classes/event','user_override_updated.php',54],['lib/classes/event','message_contact_added.php',48],['lib/classes/event','cohort_member_added.php',49],['backup/util/ui','restore_ui.class.php',351],['lib/classes/event','blog_entry_updated.php',74],['mod/assign/classes/event','workflow_state_updated.php',88],['mod/forum/classes/event','assessable_uploaded.php',86],['mod/assign/classes/event','submission_created.php',57],['lib/classes/event','group_deleted.php',65],['lib/classes/event','role_allow_assign_updated.php',47],['mod/lesson/classes/event','highscore_added.php',59],['mod/forum/classes/event','discussion_pinned.php',55],['lib/classes/event','webservice_function_called.php',67],['lib/classes/event','competency_plan_reopened.php',75],['mod/lesson/classes/event','essay_attempt_viewed.php',48],['mod/wiki/classes/event','page_locks_deleted.php',54],['lib/classes/event','webservice_service_deleted.php',59],['mod/forum/classes/event','discussion_subscription_created.php',66],['admin/tool/log/store/database/tests/fixtures','event.php',31],['mod/workshop/classes/event','assessable_uploaded.php',93],['lib','csslib.php',2155],['lib','csslib.php',2283],['lib/classes/event','user_loggedout.php',54],['lib/classes/event','webservice_token_created.php',65],['lib/classes/event','tag_collection_updated.php',65],['competency/classes','competency_rule_all.php',84],['backup/util/settings','base_setting.class.php',145],['mod/data/classes/event','field_deleted.php',57],['mod/book/classes/event','chapter_created.php',79],['lib/classes/event','email_failed.php',56],['lib/classes/task','stats_cron_task.php',31],['mod/survey/classes/event','report_downloaded.php',55],['mod/workshop/classes/event','phase_switched.php',75],['lib/grade','grade_category.php',2300],['lib/grade','grade_scale.php',156],['lib/classes/event','course_reset_started.php',53],['mod/workshop/classes/event','assessment_evaluated.php',66],['lib/classes/event','blog_association_created.php',56],['backup/converter','convertlib.php',109],['report/outline/classes/event','activity_report_viewed.php',48],['lib/classes/task','legacy_plugin_cron_task.php',33],['lib/classes/event','competency_plan_updated.php',75],['mod/choice/classes/event','answer_submitted.php',72],['mod/lesson/classes/event','lesson_ended.php',49],['lib/classes/event','role_allow_switch_updated.php',47],['lib/classes/task','portfolio_cron_task.php',31],['lib/classes/event','competency_user_competency_rated_in_course.php',88],['question/classes/bank','question_text_row.php',35],['lib/classes/event','tag_created.php',75],['report/participation/classes/event','report_viewed.php',58],['lib/classes/event','role_capabilities_updated.php',51],['mod/survey/classes/event','response_submitted.php',53],['lib/classes/event','badge_archived.php',47],['mod/workshop/classes/event','assessment_reevaluated.php',76],['mod/assign/classes/event','submission_locked.php',78],['report/outline/classes/event','report_viewed.php',54],['lib/classes/event','user_deleted.php',57],['lib/classes/event','mnet_access_control_updated.php',57],['mod/lesson/classes/event','essay_assessed.php',78],['mod/book/tool/print/classes/event','book_printed.php',76],['lib/classes/event','grouping_deleted.php',72],['admin/tool/monitor/classes','rule.php',239],['lib/classes/event','course_viewed.php',75],['mod/forum/classes/event','user_report_viewed.php',65],['user/selector','lib.php',309],['mod/quiz/classes/event','attempt_summary_viewed.php',56],['lib/classes/event','webservice_service_user_added.php',59],['mod/forum/classes/event','discussion_unpinned.php',55],['lib/classes/event','grouping_group_unassigned.php',48],['lib/grade','grade_outcome.php',272],['mod/chat/classes/event','message_sent.php',59],['lib/classes/event','role_assigned.php',56],['mod/quiz/classes/question/bank','question_name_text_column.php',37],['question/classes/bank','modifier_name_column.php',27],['mod/glossary/classes/event','entry_viewed.php',48],['mod/data/classes/event','record_created.php',56],['lib/classes/event','course_category_deleted.php',59],['lib/dml','mariadb_native_moodle_database.php',41],['lib/classes/event','role_deleted.php',55],['lib/classes/task','question_cron_task.php',31],['portfolio/flickr','lib.php',41],['lib/classes/task','cache_cron_task.php',31],['mod/wiki/classes/event','page_version_viewed.php',54],['admin/tool/recyclebin/classes/event','category_bin_item_deleted.php',47],['admin/tool/log/store/standard/tests/fixtures','event.php',31],['mod/scorm/classes/event','status_submitted.php',46],['admin/tool/monitor/classes/event','rule_created.php',50],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',31],['question/classes/bank','checkbox_column.php',32],['lib/classes/event','competency_user_competency_plan_viewed.php',81],['mod/assign/feedback/offline','locallib.php',42],['admin/tool/messageinbound/classes/task','cleanup_task.php',38],['mod/workshop/classes/event','submission_updated.php',63],['lib/editor/atto/classes/task','autosave_cleanup_task.php',33],['mod/choice/classes/event','report_viewed.php',53],['mod/lesson/classes/event','group_override_deleted.php',54],['mod/wiki/classes/event','page_map_viewed.php',54],['admin/tool/log/store/legacy/tests/fixtures','event.php',31],['mod/lesson/classes/event','question_answered.php',54],['mod/choice/classes/event','report_downloaded.php',54],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',36],['backup/util/ui','backup_ui_setting.class.php',86],['lib/classes/event','competency_user_evidence_created.php',64],['lib/classes/event','course_module_completion_updated.php',54],['repository/coursefiles','lib.php',183],['lib/classes/event','note_updated.php',56],['lib/classes/event','note_created.php',56],['lib/classes/event','competency_framework_created.php',63],['lib/classes/event','course_resources_list_viewed.php',60],['lib/classes/event','tag_updated.php',58],['mod/forum/classes/event','subscribers_viewed.php',65],['mod/book/tool/exportimscp/classes/event','book_exported.php',76],['mod/quiz/classes/question/bank','add_action_column.php',45],['lib/classes/task','completion_regular_task.php',33],['lib/classes/event','user_enrolment_deleted.php',54],['grade/report/grader/classes/event','grade_report_viewed.php',39],['lib','enrollib.php',1076],['admin/tool/recyclebin/classes/event','course_bin_item_restored.php',47],['lib/classes/event','webservice_service_updated.php',59],['lib/editor/tinymce/classes','plugin.php',101],['mod/lesson/classes/event','group_override_created.php',55],['mod/scorm/classes/event','attempt_deleted.php',62],['lib/classes/event','competency_user_competency_review_request_cancelled.php',72],['lib/classes/event','webservice_service_created.php',65],['lib/classes/task','events_cron_task.php',31],['mod/wiki/classes/event','page_version_restored.php',54],['mod/forum/classes/event','discussion_deleted.php',66],['lib/classes/event','competency_framework_updated.php',73],['mod/lesson/classes/event','lesson_restarted.php',48],['mod/wiki/classes/event','page_updated.php',54],['mod/assign/classes/event','marker_updated.php',89],['lib','modinfolib.php',1270],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',38],['lib/classes/event','course_module_updated.php',57],['repository','lib.php',1834],['auth/cas/classes/task','sync_task.php',34],['lib/classes/event','competency_template_deleted.php',73],['mod/assign/classes/event','submission_confirmation_form_viewed.php',79],['lib/bennu','iCalendar_components.php',37],['report/questioninstances/classes/event','report_viewed.php',55],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',36],['lib/classes/event','message_contact_blocked.php',48],['lib/classes/event','competency_template_updated.php',75],['question/behaviour','behaviourbase.php',83],['grade/report/history/classes/event','grade_report_viewed.php',39],['lib/classes/event','badge_disabled.php',47],['mod/assign/classes/event','grading_table_viewed.php',79],['lib/classes/event','badge_enabled.php',47],['mod/lti','OAuth.php',122],['mod/lti','OAuth.php',149],['mod/lti','OAuth.php',173],['calendar/type/gregorian/classes','structure.php',29],['mod/quiz/classes/event','edit_page_viewed.php',53],['lib/simplepie/library/SimplePie','Credit.php',139],['mod/scorm/classes/event','tracks_viewed.php',64],['mod/wiki/classes/event','page_diff_viewed.php',55],['message/tests/fixtures','inbound_fixtures.php',41],['lib/classes/event','grouping_created.php',65],['lib/classes/event','calendar_event_deleted.php',58],['enrol/flatfile/classes/task','flatfile_sync_task.php',37],['lib/classes/event','group_updated.php',65],['lib/classes/task','registration_cron_task.php',31],['mod/book/classes/event','chapter_updated.php',79],['lib/classes/event','grade_deleted.php',94],['admin/tool/recyclebin/classes/event','course_bin_item_created.php',47],['lib/classes/event','user_loggedin.php',64],['lib/classes/task','check_for_updates_task.php',31],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',56],['mod/assign/submission/file','locallib.php',44],['mod/forum/classes/task','cron_task.php',30],['mod/forum/classes/event','subscription_created.php',65],['lib/classes/event','tag_collection_created.php',65],['grade/report/overview/classes/event','grade_report_viewed.php',48],['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',79],['mod/quiz/classes/event','group_override_updated.php',54],['lib/classes/event','competency_plan_created.php',63],['mod/glossary/classes/event','entry_disapproved.php',46],['lib/classes/task','send_failed_login_notifications_task.php',34],['enrol/lti/classes/task','sync_grades.php',36],['lib/classes/event','message_viewed.php',54],['portfolio/boxnet','lib.php',14],['lib/classes/event','comment_created.php',58],['question/classes/bank','preview_action_column.php',26],['lib/classes/event','course_content_deleted.php',54],['lib/dml','pgsql_native_moodle_database.php',87],['mod/feedback/classes/event','response_deleted.php',83],['lib/classes/event','competency_evidence_created.php',98],['lib/classes/event','comment_deleted.php',58],['lib/classes/event','competency_user_competency_review_requested.php',72],['mod/quiz/classes/event','attempt_abandoned.php',63],['mod/scorm/classes/event','user_report_viewed.php',62],['lib/dml','mssql_native_moodle_database.php',88],['mod/quiz/classes/event','attempt_becameoverdue.php',66],['mod/quiz/classes/event','group_override_created.php',55],['lib/dml','mysqli_native_moodle_database.php',352],['backup/util/ui','backup_ui.class.php',194],['mod/book/tool/print/classes/event','chapter_printed.php',79],['mod/data/classes/event','record_deleted.php',56],['competency/classes','competency_rule_points.php',185],['lib/classes/event','competency_user_competency_viewed.php',81],['lib/classes/event','dashboard_viewed.php',59],['mod/lesson/classes/event','question_viewed.php',54],['lib/classes/event','user_profile_viewed.php',56],['lib','medialib.php',345],['admin/tool/monitor/classes/task','clean_events.php',32],['mod/lesson/classes/event','user_override_deleted.php',53],['lib/classes/event','cohort_member_removed.php',50],['mod/lesson/classes/event','lesson_started.php',48],['mod/lesson/classes/event','page_updated.php',73],['mod/workshop/classes/event','submission_viewed.php',63],['question/classes/bank','question_name_column.php',28],['lib/classes/event','competency_deleted.php',87],['admin/tool/monitor/classes','subscription.php',132],['lib/classes/task','grade_cron_task.php',31],['mod/glossary/classes/event','entry_created.php',52],['lib/classes/task','file_temp_cleanup_task.php',31],['lib/classes/event','dashboard_reset.php',60],['backup/util/structure','base_atom.class.php',71],['portfolio/googledocs','lib.php',54],['mod/assign/feedback/comments','locallib.php',36],['mod/wiki/classes/event','page_history_viewed.php',48],['lib/classes/event','competency_plan_review_request_cancelled.php',75],['lib/classes/event','competency_plan_deleted.php',73],['mod/quiz/classes/event','attempt_viewed.php',54],['mod/data/classes/event','field_updated.php',57],['lib/classes/event','grouping_updated.php',65],['cache/classes','definition.php',621],['lib/classes/task','plagiarism_cron_task.php',31],['backup/converter/moodle1','lib.php',1033],['lib/classes/event','question_category_created.php',48],['grade/report/user/classes/event','grade_report_viewed.php',48],['lib/classes/event','user_login_failed.php',56],['mod/scorm/classes/event','report_viewed.php',63],['mod/chat/classes/event','sessions_viewed.php',65],['admin/tool/recyclebin/classes/event','course_bin_item_deleted.php',47],['mod/quiz/classes/event','user_override_deleted.php',53],['portfolio/mahara','lib.php',61],['mod/quiz/classes/event','attempt_submitted.php',63],['grade/report/outcomes/classes/event','grade_report_viewed.php',39],['mod/lesson/classes/event','group_override_updated.php',54],['mod/workshop/classes/event','submission_created.php',63],['mod/assign/classes/event','submission_updated.php',57],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',83],['lib/classes/event','competency_updated.php',70],['lib/classes/event','note_deleted.php',56],['mod/lesson/classes/event','page_moved.php',56],['lib/classes/event','course_completed.php',73],['lib/classes/event','tag_added.php',58],['lib/classes/event','competency_created.php',70],['mod/lesson/classes/event','highscores_viewed.php',51],['lib/classes/event','message_contact_unblocked.php',48],['lib/classes/event','user_enrolment_created.php',53],['lib/classes/task','search_index_task.php',35],['lib/classes/event','course_module_created.php',86],['lib/classes/event','webservice_service_user_removed.php',59],['report/log/classes/event','report_viewed.php',58],['mod/assign/submission/file/classes/event','assessable_uploaded.php',85],['lib/classes/event','group_member_added.php',78],['mod/forum/classes/event','discussion_viewed.php',60],['mod/assign/classes/event','submission_viewed.php',76],['mod/lti/classes/local/ltiservice','service_base.php',87],['enrol/lti/classes/task','sync_members.php',46],['mod/workshop/classes/event','submission_reassessed.php',77],['lib/classes/task','session_cleanup_task.php',31],['lib/tests','messageinbound_test.php',166],['lib/classes/task','backup_cleanup_task.php',31],['mod/workshop/classes/event','assessment_evaluations_reset.php',75],['mod/scorm/classes/event','scoreraw_submitted.php',46],['mod/assign/classes/event','statement_accepted.php',77],['mod/assign/classes/event','feedback_viewed.php',76],['lib/classes/task','delete_unconfirmed_users_task.php',31],['mod/forum/classes/event','discussion_moved.php',66],['lib/classes/event','competency_user_evidence_deleted.php',64],['mod/assign/classes/event','batch_set_workflow_state_viewed.php',79],['mod/lesson/classes/event','lesson_resumed.php',48],['lib/classes/task','badges_cron_task.php',31],['lib/classes/event','comments_viewed.php',51],['mod/data/classes/event','template_viewed.php',55],['mod/wiki/classes/event','page_deleted.php',54],['mod/quiz/classes/event','report_viewed.php',56],['mod/scorm/classes/event','sco_launched.php',64],['mod/glossary/classes/event','entry_updated.php',52],['mod/lesson/classes/event','user_override_created.php',53],['mod/glossary/classes/event','category_updated.php',46],['lib/classes/event','course_updated.php',58],['grade/report/singleview/classes/event','grade_report_viewed.php',39],['mod/feedback/classes/event','response_submitted.php',83],['lib/classes/event','blog_entry_deleted.php',53],['mod/book/classes/event','chapter_deleted.php',79],['report/completion/classes/event','report_viewed.php',49],['lib/classes/event','recent_activity_viewed.php',49],['mod/quiz/classes/event','question_manually_graded.php',55],['mod/assign/classes/event','submission_status_updated.php',79],['lib/classes/event','user_enrolment_updated.php',53],['lib/classes/event','tag_deleted.php',55],['report/completion/classes/event','user_report_viewed.php',49],['report/stats/classes/event','report_viewed.php',56],['lib/classes/event','calendar_event_created.php',58],['mod/assign/classes/event','submission_duplicated.php',77],['lib/classes/event','competency_framework_deleted.php',73],['lib/classes/event','course_section_updated.php',56],['lib/classes/event','message_sent.php',82],['lib/classes/event','calendar_subscription_deleted.php',56],['lib/classes/event','course_category_updated.php',51],['lib/classes/event','user_password_updated.php',70],['enrol/lti/ims-blti','OAuth.php',65],['enrol/lti/ims-blti','OAuth.php',92],['enrol/lti/ims-blti','OAuth.php',116],['mod/forum/classes/event','subscription_deleted.php',65],['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',79],['lib/classes/event','user_loggedinas.php',57],['lib/classes/event','competency_template_created.php',63],['lib/classes/event','user_created.php',48],['admin/tool/recyclebin/classes/event','category_bin_item_restored.php',47],['report/loglive/classes/event','report_viewed.php',48],['admin/tool/monitor/classes/event','subscription_created.php',50],['mod/book/classes/event','chapter_viewed.php',79],['lib/classes/event','badge_awarded.php',54],['lib/classes/event','calendar_subscription_created.php',57],['lib/classes/event','enrol_instance_created.php',69],['lib/classes/event','user_list_viewed.php',56],['lib/classes/task','calendar_cron_task.php',31],['mod/forum/classes/event','post_deleted.php',67],['mod/quiz/classes/event','group_override_deleted.php',54],['lib/classes/event','badge_created.php',47],['backup/util/plan','base_plan.class.php',50],['lib/classes/event','base.php',292],['lib/classes/event','competency_framework_viewed.php',69],['lib/classes/event','tag_collection_deleted.php',65],['lib/classes/event','group_member_removed.php',69],['lib/classes/event','grade_report_viewed.php',54],['lib/classes/event','calendar_event_updated.php',58],['mod/assign/submission/onlinetext','locallib.php',40],['lib/classes/event','user_updated.php',48],['mod/lesson/classes/event','page_created.php',54],['backup/util/ui','base_ui_stage.class.php',110],['mod/assign/classes/event','submission_form_viewed.php',82],['auth/ldap/classes/task','sync_task.php',34],['lib/classes/event','course_completion_updated.php',47],['lib/classes/event','competency_plan_review_started.php',75],['lib/classes/event','course_user_report_viewed.php',66],['mod/folder/classes/event','all_files_downloaded.php',60],['mod/workshop/classes/event','assessments_reset.php',74],['lib/tests/fixtures','task_fixtures.php',35],['lib/tests/fixtures','task_fixtures.php',44],['lib/tests/fixtures','task_fixtures.php',53],['mod/data/classes/event','template_updated.php',56],['mod/assign/classes/event','identities_revealed.php',75],['question/classes/bank','copy_action_column.php',35],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',35],['lib/classes/event','notes_viewed.php',49],['admin/tool/recyclebin/classes/event','category_bin_item_created.php',47],['lib/classes/event','competency_plan_viewed.php',63],['mod/data/classes/event','record_updated.php',56],['mod/assign/feedback/file','locallib.php',45],['lib/classes/event','competency_plan_unapproved.php',75],['mod/lesson/classes/event','content_page_viewed.php',48],['mod/assign/feedback/editpdf','locallib.php',43],['lib/dml','sqlsrv_native_moodle_database.php',108],['admin/tool/monitor/classes/event','subscription_deleted.php',50],['mod/assign/classes/event','assessable_submitted.php',109],['mod/quiz/classes/event','attempt_started.php',62],['lib/classes/task','create_contexts_task.php',31],['lib/classes/task','file_trash_cleanup_task.php',31],['lib/classes/event','competency_user_competency_rated.php',82],['mod/forum/classes/event','post_updated.php',67],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',37],['lib/classes/event','course_module_deleted.php',56],['mod/assign/submission/comments','locallib.php',39],['lib/classes/event','competency_plan_review_requested.php',75],['lib/classes/event','user_graded.php',96],['lib/classes/event','webservice_login_failed.php',71],['mod/forum/classes/event','post_created.php',67],['lib/classes/task','complete_plans_task.php',43],['mod/assign/classes/event','submission_status_viewed.php',81],['lib/classes/event','enrol_instance_updated.php',70],['lib/classes/task','messaging_cleanup_task.php',31],['portfolio/picasa','lib.php',33],['admin/tool/capability/classes/event','report_viewed.php',47],['grade/report/singleview/classes/local/ui','unique_name.php',38],['mod/data/classes/event','field_created.php',58],['mod/folder/classes/event','folder_updated.php',48],['lib/classes/event','badge_updated.php',47],['lib/tests/fixtures','event_fixtures.php',34],['lib/classes/task','cache_cleanup_task.php',31],['mod/survey/classes/event','report_viewed.php',55],['mod/quiz/classes/event','attempt_deleted.php',53],['mod/glossary/classes/event','entry_approved.php',46],['mod/wiki/classes/event','page_viewed.php',57],['lib/classes/log','reader.php',30],['lib/classes/task','password_reset_cleanup_task.php',31],['mod/forum/classes/event','readtracking_disabled.php',64],['admin/tool/langimport/classes/event','langpack_imported.php',80],['lib/classes/event','competency_plan_review_stopped.php',75],['admin/tool/langimport/classes/event','langpack_updated.php',80],['lib/classes/event','unknown_logged.php',43],['lib/classes/event','competency_user_competency_viewed_in_plan.php',85],['lib/classes/event','competency_user_competency_viewed_in_course.php',84],['lib/classes/task','search_optimize_task.php',38],['mod/glossary/classes/event','category_created.php',46],['lib/portfolio','plugin.php',120],['report/stats/classes/event','user_report_viewed.php',48],['lib/classes/event','dashboards_reset.php',59],['lib/classes/event','calendar_subscription_updated.php',57],['lib/classes/event','cohort_updated.php',49],['admin/tool/monitor/classes/event','rule_updated.php',50],['mod/lesson/classes/event','page_deleted.php',54],['lib/classes/event','course_section_deleted.php',57],['lib/classes/task','delete_incomplete_users_task.php',31],['lib/classes/task','automated_backup_task.php',31],['admin/tool/monitor/classes/event','subscription_criteria_met.php',55],['lib/classes/event','mnet_access_control_created.php',57],['admin/tool/messageinbound/classes/task','pickup_task.php',38],['mod/forum/classes/event','discussion_created.php',65],['question/classes/bank','creator_name_column.php',28],['lib/classes/event','blog_entries_viewed.php',62],['lib/classes/task','sync_plans_from_template_cohorts_task.php',41],['mod/quiz/classes/event','attempt_preview_started.php',54],['lib/classes/event','content_viewed.php',80],['lib/classes/event','competency_user_evidence_updated.php',64],['lib/dml/tests','dml_test.php',5530],['mod/assign/classes/event','submission_graded.php',78],['mod/assign/classes/event','all_submissions_downloaded.php',75],['lib/classes/event','course_restored.php',58],['lib/classes/event','group_created.php',65],['lib/classes/event','badge_criteria_deleted.php',52],['lib/classes/event','tag_flagged.php',55],['lib/classes/event','competency_plan_completed.php',75],['mod/lesson/classes/event','user_override_updated.php',54],['lib/classes/event','role_allow_override_updated.php',47],['mod/forum/classes/event','discussion_subscription_deleted.php',66],['lib/classes/event','cohort_deleted.php',49],['lib/classes/event','badge_criteria_created.php',52],['admin/tool/log/classes/helper','reader.php',41],['admin/tool/monitor/classes/task','check_subscriptions.php',50],['lib/classes/event','blog_entry_created.php',76],['mod/scorm/classes/event','interactions_viewed.php',63],['mod/workshop/classes/event','submission_assessed.php',76],['lib/classes/event','badge_duplicated.php',47],['backup/util/plan','base_step.class.php',49],['lib/classes/event','course_category_created.php',48],['lib/classes/event','cohort_created.php',49],['lib/classes/event','tag_removed.php',58],['lib/classes/event','competency_plan_approved.php',75],['mod/choice/classes/event','answer_deleted.php',56],['backup/util/ui','restore_ui_stage.class.php',75],['lib/classes/event','competency_user_competency_review_started.php',72],['lib/classes/event','course_reset_ended.php',53],['mod/quiz/classes/event','user_override_created.php',53],['mod/forum/classes/event','course_searched.php',66],['lib/classes/event','message_contact_removed.php',48],['admin/tool/monitor/classes/event','rule_deleted.php',50],['lib/classes/event','message_deleted.php',91],['mod/assign/classes/event','submission_unlocked.php',78],['lib/classes/event','competency_user_competency_review_stopped.php',72],['lib/classes/event','course_module_viewed.php',62],['backup/util/plan','base_task.class.php',58],['question/classes/bank','delete_action_column.php',36]], 469],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'execute': ['execute', 'Run langpack update ', [['admin/tool/langimport/classes/task','update_langpacks_task.php',44],['backup/converter/imscc1','lib.php',84],['lib/classes/task','blog_cron_task.php',40],['mod/workshop/allocation/scheduled','lib.php',128],['lib/classes/task','send_new_user_passwords_task.php',40],['admin/tool/log/store/standard/classes/task','cleanup_task.php',40],['lib/dml','pdo_moodle_database.php',227],['lib/classes/task','tag_cron_task.php',42],['enrol/imsenterprise/classes/task','cron_task.php',43],['lib/classes/task','completion_daily_task.php',42],['lib/google/src/Google/Http','Batch.php',61],['lib/dml','oci_native_moodle_database.php',1048],['lib/classes/task','context_cleanup_task.php',41],['backup/util/plan','backup_structure_step.class.php',50],['backup/util/ui','restore_ui.class.php',206],['webservice','lib.php',1319],['lib/classes/task','stats_cron_task.php',40],['lib/htmlpurifier/HTMLPurifier/Strategy','ValidateAttributes.php',16],['lib/htmlpurifier/HTMLPurifier/Strategy','RemoveForeignElements.php',20],['lib/classes/task','legacy_plugin_cron_task.php',42],['backup/moodle2','restore_activity_task.class.php',189],['lib/classes/task','portfolio_cron_task.php',40],['lib/google/src/Google/Http','REST.php',27],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',66],['backup/converter/imscc11','backuplib.php',42],['lib/classes/task','question_cron_task.php',40],['lib/classes/task','cache_cron_task.php',40],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',40],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',62],['admin/tool/messageinbound/classes/task','cleanup_task.php',47],['lib/adodb/drivers','adodb-pdo.inc.php',559],['lib/editor/atto/classes/task','autosave_cleanup_task.php',42],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',43],['lib/classes/task','completion_regular_task.php',42],['lib/adodb/drivers','adodb-oci8po.inc.php',54],['lib/classes/task','events_cron_task.php',40],['mod/workshop/allocation/random','lib.php',83],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',47],['auth/cas/classes/task','sync_task.php',43],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',43],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',62],['backup/util/helper','restore_decode_processor.class.php',73],['lib/behat','behat_base.php',840],['enrol/flatfile/classes/task','flatfile_sync_task.php',46],['lib/classes/task','registration_cron_task.php',40],['backup/moodle2','backup_section_task.class.php',97],['lib/classes/task','check_for_updates_task.php',40],['backup/util/plan/tests/fixtures','plan_fixtures.php',48],['backup/util/plan/tests/fixtures','plan_fixtures.php',56],['mod/forum/classes/task','cron_task.php',39],['lib/classes/task','send_failed_login_notifications_task.php',43],['enrol/lti/classes/task','sync_grades.php',45],['lib/dml','pgsql_native_moodle_database.php',665],['lib/htmlpurifier/HTMLPurifier/Strategy','Composite.php',21],['lib/classes/update','validator.php',117],['lib/google/src/Google','Client.php',574],['lib/dml','mssql_native_moodle_database.php',711],['mod/lti/service/profile/classes/local/resource','profile.php',76],['backup/util/plan','backup_plan.class.php',112],['lib/dml','mysqli_native_moodle_database.php',963],['backup/util/ui','backup_ui.class.php',122],['admin/tool/monitor/classes/task','clean_events.php',41],['backup/converter/moodle1','backuplib.php',10],['backup/converter/imscc11','lib.php',85],['lib/classes/task','grade_cron_task.php',40],['lib/classes/task','file_temp_cleanup_task.php',40],['backup/moodle2','restore_section_task.class.php',87],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',63],['filter/tex','latex.php',70],['lib/adodb','adodb.inc.php',1088],['lib/classes/task','plagiarism_cron_task.php',40],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',62],['backup/converter/moodle1','lib.php',142],['backup/util/plan','restore_structure_step.class.php',62],['lib/classes/task','search_index_task.php',44],['enrol/lti/classes/task','sync_members.php',55],['lib/classes/task','session_cleanup_task.php',40],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',61],['lib/classes/task','backup_cleanup_task.php',40],['lib/classes/task','delete_unconfirmed_users_task.php',40],['backup/converter/imscc1','backuplib.php',10],['lib/classes/task','badges_cron_task.php',40],['admin/tool/uploadcourse/classes','processor.php',174],['lib/classes/task','calendar_cron_task.php',40],['backup/util/plan','base_plan.class.php',158],['auth/ldap/classes/task','sync_task.php',43],['lib/adodb/drivers','adodb-oci8.inc.php',920],['backup/util/plan','restore_plan.class.php',159],['lib/tests/fixtures','task_fixtures.php',30],['lib/tests/fixtures','task_fixtures.php',39],['lib/tests/fixtures','task_fixtures.php',48],['lib/tests/fixtures','task_fixtures.php',57],['lib/dml','sqlsrv_native_moodle_database.php',795],['lib/classes/task','create_contexts_task.php',40],['lib/classes/task','file_trash_cleanup_task.php',40],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',46],['lib/classes/task','complete_plans_task.php',52],['lib/classes/task','messaging_cleanup_task.php',40],['backup/util/plan','backup_execution_step.class.php',25],['lib/classes/task','cache_cleanup_task.php',40],['backup/moodle2','backup_activity_task.class.php',211],['filter/tex','texdebug.php',287],['lib/classes/task','password_reset_cleanup_task.php',40],['lib/classes/task','search_optimize_task.php',47],['mod/assign','adminlib.php',342],['lib/classes/task','delete_incomplete_users_task.php',40],['lib/classes/task','automated_backup_task.php',40],['admin/tool/messageinbound/classes/task','pickup_task.php',47],['backup/util/plan','restore_execution_step.class.php',25],['lib/classes/task','sync_plans_from_template_cohorts_task.php',50],['admin/tool/monitor/classes','notification_task.php',39],['lib/dml/tests','dml_test.php',5543],['lib/htmlpurifier/HTMLPurifier/Strategy','FixNesting.php',41],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',60],['admin/tool/monitor/classes/task','check_subscriptions.php',60],['backup/util/interfaces','executable.class.php',32],['backup/util/plan','base_task.class.php',162]], 1058],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'cleanup_unused_tags': ['cleanup_unused_tags', 'Permanently deletes all non-standard tags that no longer have any instances pointing to them ', [['tag/classes','collection.php',322]], 2],
'process_computed_correlation': ['process_computed_correlation', 'This function processes a tag correlation and makes changes in the database as required. ', [['lib/classes/task','tag_cron_task.php',214]], 4],
'cleanup': ['cleanup', 'Clean up the tag tables, making sure all tagged object still exists. ', [['lib/classes/task','tag_cron_task.php',147],['backup/util/ui','restore_ui.class.php',230],['lib','filelib.php',3673],['cache/classes','dummystore.php',230],['lib','csvlib.class.php',277],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/table','editor_plugin_src.js',189],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/table','editor_plugin_src.js',786],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',76],['mod/assign/feedback/editpdf/fpdi','fpdi.php',681],['portfolio/mahara','lib.php',363],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',106],['mod/data','lib.php',2539],['mod/data','lib.php',2563],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',237],['cache/classes','store.php',270],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',70],['lib/portfolio','plugin.php',709],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',115]], 55],
'delete_records_select': ['delete_records_select', '', [['lib/dml','pdo_moodle_database.php',208],['lib/dml','oci_native_moodle_database.php',1495],['lib/dml','pgsql_native_moodle_database.php',1162],['lib/dml','mssql_native_moodle_database.php',1146],['lib/dml','mysqli_native_moodle_database.php',1477],['lib/dml','sqlsrv_native_moodle_database.php',1220],['lib/dml/tests','dml_test.php',5553]], 163],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'on': ['on', '', [['lib/requirejs','require.js',508],['lib/jquery','jquery-3.1.0.js',4809]], 3823],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'is_array': ['is_array', '', [], 1608],
'count': ['count', '', [], 4095]};
CLASS_DATA={
'tag_cron_task': ['tag_cron_task', 'Simple task to run the tag cron. ', [['lib/classes/task','tag_cron_task.php',28]], 5],
'tag_removed': ['tag_removed', 'Event class for when a tag has been removed from an item. ', [['lib/classes/event','tag_removed.php',29]], 5],
'core_tag_collection': ['core_tag_collection', 'Class to manage tag collections ', [['tag/classes','collection.php',27]], 79]};
CONST_DATA={
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 315]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
