<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/classes/filetypes.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='lib/classes';
filename='filetypes.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/classes/</a> -> <a href="filetypes.php.html">filetypes.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="filetypes.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="filetypes.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Class to manage the custom filetypes list that is stored in a config variable.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package core</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright 2014 The Open University</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/filelib.php');
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment">/**</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * Class to manage the custom filetypes list that is stored in a config variable.</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @copyright 2014 The Open University</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> */</span>
<a name="l35"><span class="linenum">  35</span></a>  abstract class core_filetypes {
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">    /** @var array Cached MIME types for current request */</span>
<a name="l37"><span class="linenum">  37</span></a>      protected static <a class="var it33521" onMouseOver="hilite(33521)" onMouseOut="lolite()" onClick="logVariable('cachedtypes')" href="../../_variables/cachedtypes.html">$cachedtypes</a>;
<a name="l38"><span class="linenum">  38</span></a>  
<a name="l39"><span class="linenum">  39</span></a>      <span class="comment">/**</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     * Gets default MIME types that are included as standard.</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     *</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     * Note: Use the function get_mimetypes_array to access this data including</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     * any customisations the user might have made.</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     *</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">     * @return array Default (pre-installed) MIME type information</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     */</span>
<a name="l47"><span class="linenum">  47</span></a>      protected static function <a class="function" onClick="logFunction('get_default_types')" href="../../_functions/get_default_types.html" onMouseOver="funcPopup(event,'get_default_types')">get_default_types</a>() {
<a name="l48"><span class="linenum">  48</span></a>          return array(
<a name="l49"><span class="linenum">  49</span></a>              'xxx' =&gt; array('type' =&gt; 'document/unknown', 'icon' =&gt; 'unknown'),
<a name="l50"><span class="linenum">  50</span></a>              '3gp' =&gt; array('type' =&gt; 'video/quicktime', 'icon' =&gt; 'quicktime', 'groups' =&gt; array('video'), 'string' =&gt; 'video'),
<a name="l51"><span class="linenum">  51</span></a>              '7z' =&gt; array('type' =&gt; 'application/x-7z-compressed', 'icon' =&gt; 'archive',
<a name="l52"><span class="linenum">  52</span></a>                      'groups' =&gt; array('archive'), 'string' =&gt; 'archive'),
<a name="l53"><span class="linenum">  53</span></a>              'aac' =&gt; array('type' =&gt; 'audio/aac', 'icon' =&gt; 'audio', 'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l54"><span class="linenum">  54</span></a>              'accdb' =&gt; array('type' =&gt; 'application/msaccess', 'icon' =&gt; 'base'),
<a name="l55"><span class="linenum">  55</span></a>              'ai' =&gt; array('type' =&gt; 'application/postscript', 'icon' =&gt; 'eps', 'groups' =&gt; array('image'), 'string' =&gt; 'image'),
<a name="l56"><span class="linenum">  56</span></a>              'aif' =&gt; array('type' =&gt; 'audio/x-aiff', 'icon' =&gt; 'audio', 'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l57"><span class="linenum">  57</span></a>              'aiff' =&gt; array('type' =&gt; 'audio/x-aiff', 'icon' =&gt; 'audio', 'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l58"><span class="linenum">  58</span></a>              'aifc' =&gt; array('type' =&gt; 'audio/x-aiff', 'icon' =&gt; 'audio', 'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l59"><span class="linenum">  59</span></a>              'applescript' =&gt; array('type' =&gt; 'text/plain', 'icon' =&gt; 'text'),
<a name="l60"><span class="linenum">  60</span></a>              'asc' =&gt; array('type' =&gt; 'text/plain', 'icon' =&gt; 'sourcecode'),
<a name="l61"><span class="linenum">  61</span></a>              'asm' =&gt; array('type' =&gt; 'text/plain', 'icon' =&gt; 'sourcecode'),
<a name="l62"><span class="linenum">  62</span></a>              'au' =&gt; array('type' =&gt; 'audio/au', 'icon' =&gt; 'audio', 'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l63"><span class="linenum">  63</span></a>              'avi' =&gt; array('type' =&gt; 'video/x-ms-wm', 'icon' =&gt; 'avi',
<a name="l64"><span class="linenum">  64</span></a>                      'groups' =&gt; array('video', 'web_video'), 'string' =&gt; 'video'),
<a name="l65"><span class="linenum">  65</span></a>              'bmp' =&gt; array('type' =&gt; 'image/bmp', 'icon' =&gt; 'bmp', 'groups' =&gt; array('image'), 'string' =&gt; 'image'),
<a name="l66"><span class="linenum">  66</span></a>              'c' =&gt; array('type' =&gt; 'text/plain', 'icon' =&gt; 'sourcecode'),
<a name="l67"><span class="linenum">  67</span></a>              'cct' =&gt; array('type' =&gt; 'shockwave/director', 'icon' =&gt; 'flash'),
<a name="l68"><span class="linenum">  68</span></a>              'cpp' =&gt; array('type' =&gt; 'text/plain', 'icon' =&gt; 'sourcecode'),
<a name="l69"><span class="linenum">  69</span></a>              'cs' =&gt; array('type' =&gt; 'application/x-csh', 'icon' =&gt; 'sourcecode'),
<a name="l70"><span class="linenum">  70</span></a>              'css' =&gt; array('type' =&gt; 'text/css', 'icon' =&gt; 'text', 'groups' =&gt; array('web_file')),
<a name="l71"><span class="linenum">  71</span></a>              'csv' =&gt; array('type' =&gt; 'text/csv', 'icon' =&gt; 'spreadsheet', 'groups' =&gt; array('spreadsheet')),
<a name="l72"><span class="linenum">  72</span></a>              'dv' =&gt; array('type' =&gt; 'video/x-dv', 'icon' =&gt; 'quicktime', 'groups' =&gt; array('video'), 'string' =&gt; 'video'),
<a name="l73"><span class="linenum">  73</span></a>              'dmg' =&gt; array('type' =&gt; 'application/octet-stream', 'icon' =&gt; 'unknown'),
<a name="l74"><span class="linenum">  74</span></a>  
<a name="l75"><span class="linenum">  75</span></a>              'doc' =&gt; array('type' =&gt; 'application/msword', 'icon' =&gt; 'document', 'groups' =&gt; array('document')),
<a name="l76"><span class="linenum">  76</span></a>              'bdoc' =&gt; array('type' =&gt; 'application/x-digidoc', 'icon' =&gt; 'document', 'groups' =&gt; array('archive')),
<a name="l77"><span class="linenum">  77</span></a>              'cdoc' =&gt; array('type' =&gt; 'application/x-digidoc', 'icon' =&gt; 'document', 'groups' =&gt; array('archive')),
<a name="l78"><span class="linenum">  78</span></a>              'ddoc' =&gt; array('type' =&gt; 'application/x-digidoc', 'icon' =&gt; 'document', 'groups' =&gt; array('archive')),
<a name="l79"><span class="linenum">  79</span></a>              'docx' =&gt; array('type' =&gt; 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
<a name="l80"><span class="linenum">  80</span></a>                      'icon' =&gt; 'document', 'groups' =&gt; array('document')),
<a name="l81"><span class="linenum">  81</span></a>              'docm' =&gt; array('type' =&gt; 'application/vnd.ms-word.document.macroEnabled.12', 'icon' =&gt; 'document'),
<a name="l82"><span class="linenum">  82</span></a>              'dotx' =&gt; array('type' =&gt; 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',
<a name="l83"><span class="linenum">  83</span></a>                      'icon' =&gt; 'document'),
<a name="l84"><span class="linenum">  84</span></a>              'dotm' =&gt; array('type' =&gt; 'application/vnd.ms-word.template.macroEnabled.12', 'icon' =&gt; 'document'),
<a name="l85"><span class="linenum">  85</span></a>  
<a name="l86"><span class="linenum">  86</span></a>              'dcr' =&gt; array('type' =&gt; 'application/x-director', 'icon' =&gt; 'flash'),
<a name="l87"><span class="linenum">  87</span></a>              'dif' =&gt; array('type' =&gt; 'video/x-dv', 'icon' =&gt; 'quicktime', 'groups' =&gt; array('video'), 'string' =&gt; 'video'),
<a name="l88"><span class="linenum">  88</span></a>              'dir' =&gt; array('type' =&gt; 'application/x-director', 'icon' =&gt; 'flash'),
<a name="l89"><span class="linenum">  89</span></a>              'dxr' =&gt; array('type' =&gt; 'application/x-director', 'icon' =&gt; 'flash'),
<a name="l90"><span class="linenum">  90</span></a>              'eps' =&gt; array('type' =&gt; 'application/postscript', 'icon' =&gt; 'eps'),
<a name="l91"><span class="linenum">  91</span></a>              'epub' =&gt; array('type' =&gt; 'application/epub+zip', 'icon' =&gt; 'epub', 'groups' =&gt; array('document')),
<a name="l92"><span class="linenum">  92</span></a>              'fdf' =&gt; array('type' =&gt; 'application/pdf', 'icon' =&gt; 'pdf'),
<a name="l93"><span class="linenum">  93</span></a>              'flv' =&gt; array('type' =&gt; 'video/x-flv', 'icon' =&gt; 'flash',
<a name="l94"><span class="linenum">  94</span></a>                      'groups' =&gt; array('video', 'web_video'), 'string' =&gt; 'video'),
<a name="l95"><span class="linenum">  95</span></a>              'f4v' =&gt; array('type' =&gt; 'video/mp4', 'icon' =&gt; 'flash', 'groups' =&gt; array('video', 'web_video'), 'string' =&gt; 'video'),
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>              'gallery' =&gt; array('type' =&gt; 'application/x-smarttech-notebook', 'icon' =&gt; 'archive'),
<a name="l98"><span class="linenum">  98</span></a>              'galleryitem' =&gt; array('type' =&gt; 'application/x-smarttech-notebook', 'icon' =&gt; 'archive'),
<a name="l99"><span class="linenum">  99</span></a>              'gallerycollection' =&gt; array('type' =&gt; 'application/x-smarttech-notebook', 'icon' =&gt; 'archive'),
<a name="l100"><span class="linenum"> 100</span></a>              'gif' =&gt; array('type' =&gt; 'image/gif', 'icon' =&gt; 'gif', 'groups' =&gt; array('image', 'web_image'), 'string' =&gt; 'image'),
<a name="l101"><span class="linenum"> 101</span></a>              'gtar' =&gt; array('type' =&gt; 'application/x-gtar', 'icon' =&gt; 'archive',
<a name="l102"><span class="linenum"> 102</span></a>                      'groups' =&gt; array('archive'), 'string' =&gt; 'archive'),
<a name="l103"><span class="linenum"> 103</span></a>              'tgz' =&gt; array('type' =&gt; 'application/g-zip', 'icon' =&gt; 'archive', 'groups' =&gt; array('archive'), 'string' =&gt; 'archive'),
<a name="l104"><span class="linenum"> 104</span></a>              'gz' =&gt; array('type' =&gt; 'application/g-zip', 'icon' =&gt; 'archive', 'groups' =&gt; array('archive'), 'string' =&gt; 'archive'),
<a name="l105"><span class="linenum"> 105</span></a>              'gzip' =&gt; array('type' =&gt; 'application/g-zip', 'icon' =&gt; 'archive',
<a name="l106"><span class="linenum"> 106</span></a>                      'groups' =&gt; array('archive'), 'string' =&gt; 'archive'),
<a name="l107"><span class="linenum"> 107</span></a>              'h' =&gt; array('type' =&gt; 'text/plain', 'icon' =&gt; 'sourcecode'),
<a name="l108"><span class="linenum"> 108</span></a>              'hpp' =&gt; array('type' =&gt; 'text/plain', 'icon' =&gt; 'sourcecode'),
<a name="l109"><span class="linenum"> 109</span></a>              'hqx' =&gt; array('type' =&gt; 'application/mac-binhex40', 'icon' =&gt; 'archive',
<a name="l110"><span class="linenum"> 110</span></a>                      'groups' =&gt; array('archive'), 'string' =&gt; 'archive'),
<a name="l111"><span class="linenum"> 111</span></a>              'htc' =&gt; array('type' =&gt; 'text/x-component', 'icon' =&gt; 'markup'),
<a name="l112"><span class="linenum"> 112</span></a>              'html' =&gt; array('type' =&gt; 'text/html', 'icon' =&gt; 'html', 'groups' =&gt; array('web_file')),
<a name="l113"><span class="linenum"> 113</span></a>              'xhtml' =&gt; array('type' =&gt; 'application/xhtml+xml', 'icon' =&gt; 'html', 'groups' =&gt; array('web_file')),
<a name="l114"><span class="linenum"> 114</span></a>              'htm' =&gt; array('type' =&gt; 'text/html', 'icon' =&gt; 'html', 'groups' =&gt; array('web_file')),
<a name="l115"><span class="linenum"> 115</span></a>              'ico' =&gt; array('type' =&gt; 'image/vnd.microsoft.icon', 'icon' =&gt; 'image',
<a name="l116"><span class="linenum"> 116</span></a>                      'groups' =&gt; array('image'), 'string' =&gt; 'image'),
<a name="l117"><span class="linenum"> 117</span></a>              'ics' =&gt; array('type' =&gt; 'text/calendar', 'icon' =&gt; 'text'),
<a name="l118"><span class="linenum"> 118</span></a>              'isf' =&gt; array('type' =&gt; 'application/inspiration', 'icon' =&gt; 'isf'),
<a name="l119"><span class="linenum"> 119</span></a>              'ist' =&gt; array('type' =&gt; 'application/inspiration.template', 'icon' =&gt; 'isf'),
<a name="l120"><span class="linenum"> 120</span></a>              'java' =&gt; array('type' =&gt; 'text/plain', 'icon' =&gt; 'sourcecode'),
<a name="l121"><span class="linenum"> 121</span></a>              'jar' =&gt; array('type' =&gt; 'application/java-archive', 'icon' =&gt; 'archive'),
<a name="l122"><span class="linenum"> 122</span></a>              'jcb' =&gt; array('type' =&gt; 'text/xml', 'icon' =&gt; 'markup'),
<a name="l123"><span class="linenum"> 123</span></a>              'jcl' =&gt; array('type' =&gt; 'text/xml', 'icon' =&gt; 'markup'),
<a name="l124"><span class="linenum"> 124</span></a>              'jcw' =&gt; array('type' =&gt; 'text/xml', 'icon' =&gt; 'markup'),
<a name="l125"><span class="linenum"> 125</span></a>              'jmt' =&gt; array('type' =&gt; 'text/xml', 'icon' =&gt; 'markup'),
<a name="l126"><span class="linenum"> 126</span></a>              'jmx' =&gt; array('type' =&gt; 'text/xml', 'icon' =&gt; 'markup'),
<a name="l127"><span class="linenum"> 127</span></a>              'jnlp' =&gt; array('type' =&gt; 'application/x-java-jnlp-file', 'icon' =&gt; 'markup'),
<a name="l128"><span class="linenum"> 128</span></a>              'jpe' =&gt; array('type' =&gt; 'image/jpeg', 'icon' =&gt; 'jpeg', 'groups' =&gt; array('image', 'web_image'), 'string' =&gt; 'image'),
<a name="l129"><span class="linenum"> 129</span></a>              'jpeg' =&gt; array('type' =&gt; 'image/jpeg', 'icon' =&gt; 'jpeg', 'groups' =&gt; array('image', 'web_image'), 'string' =&gt; 'image'),
<a name="l130"><span class="linenum"> 130</span></a>              'jpg' =&gt; array('type' =&gt; 'image/jpeg', 'icon' =&gt; 'jpeg', 'groups' =&gt; array('image', 'web_image'), 'string' =&gt; 'image'),
<a name="l131"><span class="linenum"> 131</span></a>              'jqz' =&gt; array('type' =&gt; 'text/xml', 'icon' =&gt; 'markup'),
<a name="l132"><span class="linenum"> 132</span></a>              'js' =&gt; array('type' =&gt; 'application/x-javascript', 'icon' =&gt; 'text', 'groups' =&gt; array('web_file')),
<a name="l133"><span class="linenum"> 133</span></a>              'latex' =&gt; array('type' =&gt; 'application/x-latex', 'icon' =&gt; 'text'),
<a name="l134"><span class="linenum"> 134</span></a>              'm' =&gt; array('type' =&gt; 'text/plain', 'icon' =&gt; 'sourcecode'),
<a name="l135"><span class="linenum"> 135</span></a>              'mbz' =&gt; array('type' =&gt; 'application/vnd.moodle.backup', 'icon' =&gt; 'moodle'),
<a name="l136"><span class="linenum"> 136</span></a>              'mdb' =&gt; array('type' =&gt; 'application/x-msaccess', 'icon' =&gt; 'base'),
<a name="l137"><span class="linenum"> 137</span></a>              'mht' =&gt; array('type' =&gt; 'message/rfc822', 'icon' =&gt; 'archive'),
<a name="l138"><span class="linenum"> 138</span></a>              'mhtml' =&gt; array('type' =&gt; 'message/rfc822', 'icon' =&gt; 'archive'),
<a name="l139"><span class="linenum"> 139</span></a>              'mov' =&gt; array('type' =&gt; 'video/quicktime', 'icon' =&gt; 'quicktime',
<a name="l140"><span class="linenum"> 140</span></a>                      'groups' =&gt; array('video', 'web_video'), 'string' =&gt; 'video'),
<a name="l141"><span class="linenum"> 141</span></a>              'movie' =&gt; array('type' =&gt; 'video/x-sgi-movie', 'icon' =&gt; 'quicktime', 'groups' =&gt; array('video'), 'string' =&gt; 'video'),
<a name="l142"><span class="linenum"> 142</span></a>              'mw' =&gt; array('type' =&gt; 'application/maple', 'icon' =&gt; 'math'),
<a name="l143"><span class="linenum"> 143</span></a>              'mws' =&gt; array('type' =&gt; 'application/maple', 'icon' =&gt; 'math'),
<a name="l144"><span class="linenum"> 144</span></a>              'm3u' =&gt; array('type' =&gt; 'audio/x-mpegurl', 'icon' =&gt; 'mp3', 'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l145"><span class="linenum"> 145</span></a>              'mp3' =&gt; array('type' =&gt; 'audio/mp3', 'icon' =&gt; 'mp3', 'groups' =&gt; array('audio', 'web_audio'), 'string' =&gt; 'audio'),
<a name="l146"><span class="linenum"> 146</span></a>              'mp4' =&gt; array('type' =&gt; 'video/mp4', 'icon' =&gt; 'mpeg', 'groups' =&gt; array('video', 'web_video'), 'string' =&gt; 'video'),
<a name="l147"><span class="linenum"> 147</span></a>              'm4v' =&gt; array('type' =&gt; 'video/mp4', 'icon' =&gt; 'mpeg', 'groups' =&gt; array('video', 'web_video'), 'string' =&gt; 'video'),
<a name="l148"><span class="linenum"> 148</span></a>              'm4a' =&gt; array('type' =&gt; 'audio/mp4', 'icon' =&gt; 'mp3', 'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l149"><span class="linenum"> 149</span></a>              'mpeg' =&gt; array('type' =&gt; 'video/mpeg', 'icon' =&gt; 'mpeg', 'groups' =&gt; array('video', 'web_video'), 'string' =&gt; 'video'),
<a name="l150"><span class="linenum"> 150</span></a>              'mpe' =&gt; array('type' =&gt; 'video/mpeg', 'icon' =&gt; 'mpeg', 'groups' =&gt; array('video', 'web_video'), 'string' =&gt; 'video'),
<a name="l151"><span class="linenum"> 151</span></a>              'mpg' =&gt; array('type' =&gt; 'video/mpeg', 'icon' =&gt; 'mpeg', 'groups' =&gt; array('video', 'web_video'), 'string' =&gt; 'video'),
<a name="l152"><span class="linenum"> 152</span></a>              'mpr' =&gt; array('type' =&gt; 'application/vnd.moodle.profiling', 'icon' =&gt; 'moodle'),
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>              'nbk' =&gt; array('type' =&gt; 'application/x-smarttech-notebook', 'icon' =&gt; 'archive'),
<a name="l155"><span class="linenum"> 155</span></a>              'notebook' =&gt; array('type' =&gt; 'application/x-smarttech-notebook', 'icon' =&gt; 'archive'),
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>              'odt' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.text', 'icon' =&gt; 'writer', 'groups' =&gt; array('document')),
<a name="l158"><span class="linenum"> 158</span></a>              'ott' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.text-template',
<a name="l159"><span class="linenum"> 159</span></a>                      'icon' =&gt; 'writer', 'groups' =&gt; array('document')),
<a name="l160"><span class="linenum"> 160</span></a>              'oth' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.text-web', 'icon' =&gt; 'oth', 'groups' =&gt; array('document')),
<a name="l161"><span class="linenum"> 161</span></a>              'odm' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.text-master', 'icon' =&gt; 'writer'),
<a name="l162"><span class="linenum"> 162</span></a>              'odg' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.graphics', 'icon' =&gt; 'draw'),
<a name="l163"><span class="linenum"> 163</span></a>              'otg' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.graphics-template', 'icon' =&gt; 'draw'),
<a name="l164"><span class="linenum"> 164</span></a>              'odp' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.presentation', 'icon' =&gt; 'impress'),
<a name="l165"><span class="linenum"> 165</span></a>              'otp' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.presentation-template', 'icon' =&gt; 'impress'),
<a name="l166"><span class="linenum"> 166</span></a>              'ods' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.spreadsheet',
<a name="l167"><span class="linenum"> 167</span></a>                      'icon' =&gt; 'calc', 'groups' =&gt; array('spreadsheet')),
<a name="l168"><span class="linenum"> 168</span></a>              'ots' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.spreadsheet-template',
<a name="l169"><span class="linenum"> 169</span></a>                      'icon' =&gt; 'calc', 'groups' =&gt; array('spreadsheet')),
<a name="l170"><span class="linenum"> 170</span></a>              'odc' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.chart', 'icon' =&gt; 'chart'),
<a name="l171"><span class="linenum"> 171</span></a>              'odf' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.formula', 'icon' =&gt; 'math'),
<a name="l172"><span class="linenum"> 172</span></a>              'odb' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.database', 'icon' =&gt; 'base'),
<a name="l173"><span class="linenum"> 173</span></a>              'odi' =&gt; array('type' =&gt; 'application/vnd.oasis.opendocument.image', 'icon' =&gt; 'draw'),
<a name="l174"><span class="linenum"> 174</span></a>              'oga' =&gt; array('type' =&gt; 'audio/ogg', 'icon' =&gt; 'audio', 'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l175"><span class="linenum"> 175</span></a>              'ogg' =&gt; array('type' =&gt; 'audio/ogg', 'icon' =&gt; 'audio', 'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l176"><span class="linenum"> 176</span></a>              'ogv' =&gt; array('type' =&gt; 'video/ogg', 'icon' =&gt; 'video', 'groups' =&gt; array('video'), 'string' =&gt; 'video'),
<a name="l177"><span class="linenum"> 177</span></a>  
<a name="l178"><span class="linenum"> 178</span></a>              'pct' =&gt; array('type' =&gt; 'image/pict', 'icon' =&gt; 'image', 'groups' =&gt; array('image'), 'string' =&gt; 'image'),
<a name="l179"><span class="linenum"> 179</span></a>              'pdf' =&gt; array('type' =&gt; 'application/pdf', 'icon' =&gt; 'pdf'),
<a name="l180"><span class="linenum"> 180</span></a>              'php' =&gt; array('type' =&gt; 'text/plain', 'icon' =&gt; 'sourcecode'),
<a name="l181"><span class="linenum"> 181</span></a>              'pic' =&gt; array('type' =&gt; 'image/pict', 'icon' =&gt; 'image', 'groups' =&gt; array('image'), 'string' =&gt; 'image'),
<a name="l182"><span class="linenum"> 182</span></a>              'pict' =&gt; array('type' =&gt; 'image/pict', 'icon' =&gt; 'image', 'groups' =&gt; array('image'), 'string' =&gt; 'image'),
<a name="l183"><span class="linenum"> 183</span></a>              'png' =&gt; array('type' =&gt; 'image/png', 'icon' =&gt; 'png', 'groups' =&gt; array('image', 'web_image'), 'string' =&gt; 'image'),
<a name="l184"><span class="linenum"> 184</span></a>              'pps' =&gt; array('type' =&gt; 'application/vnd.ms-powerpoint', 'icon' =&gt; 'powerpoint', 'groups' =&gt; array('presentation')),
<a name="l185"><span class="linenum"> 185</span></a>              'ppt' =&gt; array('type' =&gt; 'application/vnd.ms-powerpoint', 'icon' =&gt; 'powerpoint', 'groups' =&gt; array('presentation')),
<a name="l186"><span class="linenum"> 186</span></a>              'pptx' =&gt; array('type' =&gt; 'application/vnd.openxmlformats-officedocument.presentationml.presentation',
<a name="l187"><span class="linenum"> 187</span></a>                      'icon' =&gt; 'powerpoint'),
<a name="l188"><span class="linenum"> 188</span></a>              'pptm' =&gt; array('type' =&gt; 'application/vnd.ms-powerpoint.presentation.macroEnabled.12', 'icon' =&gt; 'powerpoint'),
<a name="l189"><span class="linenum"> 189</span></a>              'potx' =&gt; array('type' =&gt; 'application/vnd.openxmlformats-officedocument.presentationml.template',
<a name="l190"><span class="linenum"> 190</span></a>                      'icon' =&gt; 'powerpoint'),
<a name="l191"><span class="linenum"> 191</span></a>              'potm' =&gt; array('type' =&gt; 'application/vnd.ms-powerpoint.template.macroEnabled.12', 'icon' =&gt; 'powerpoint'),
<a name="l192"><span class="linenum"> 192</span></a>              'ppam' =&gt; array('type' =&gt; 'application/vnd.ms-powerpoint.addin.macroEnabled.12', 'icon' =&gt; 'powerpoint'),
<a name="l193"><span class="linenum"> 193</span></a>              'ppsx' =&gt; array('type' =&gt; 'application/vnd.openxmlformats-officedocument.presentationml.slideshow',
<a name="l194"><span class="linenum"> 194</span></a>                      'icon' =&gt; 'powerpoint'),
<a name="l195"><span class="linenum"> 195</span></a>              'ppsm' =&gt; array('type' =&gt; 'application/vnd.ms-powerpoint.slideshow.macroEnabled.12', 'icon' =&gt; 'powerpoint'),
<a name="l196"><span class="linenum"> 196</span></a>              'ps' =&gt; array('type' =&gt; 'application/postscript', 'icon' =&gt; 'pdf'),
<a name="l197"><span class="linenum"> 197</span></a>              'pub' =&gt; array('type' =&gt; 'application/x-mspublisher', 'icon' =&gt; 'publisher', 'groups' =&gt; array('presentation')),
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>              'qt' =&gt; array('type' =&gt; 'video/quicktime', 'icon' =&gt; 'quicktime',
<a name="l200"><span class="linenum"> 200</span></a>                      'groups' =&gt; array('video', 'web_video'), 'string' =&gt; 'video'),
<a name="l201"><span class="linenum"> 201</span></a>              'ra' =&gt; array('type' =&gt; 'audio/x-realaudio-plugin', 'icon' =&gt; 'audio',
<a name="l202"><span class="linenum"> 202</span></a>                      'groups' =&gt; array('audio', 'web_audio'), 'string' =&gt; 'audio'),
<a name="l203"><span class="linenum"> 203</span></a>              'ram' =&gt; array('type' =&gt; 'audio/x-pn-realaudio-plugin', 'icon' =&gt; 'audio',
<a name="l204"><span class="linenum"> 204</span></a>                      'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l205"><span class="linenum"> 205</span></a>              'rar' =&gt; array('type' =&gt; 'application/x-rar-compressed', 'icon' =&gt; 'archive',
<a name="l206"><span class="linenum"> 206</span></a>                      'groups' =&gt; array('archive'), 'string' =&gt; 'archive'),
<a name="l207"><span class="linenum"> 207</span></a>              'rhb' =&gt; array('type' =&gt; 'text/xml', 'icon' =&gt; 'markup'),
<a name="l208"><span class="linenum"> 208</span></a>              'rm' =&gt; array('type' =&gt; 'audio/x-pn-realaudio-plugin', 'icon' =&gt; 'audio',
<a name="l209"><span class="linenum"> 209</span></a>                      'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l210"><span class="linenum"> 210</span></a>              'rmvb' =&gt; array('type' =&gt; 'application/vnd.rn-realmedia-vbr', 'icon' =&gt; 'video',
<a name="l211"><span class="linenum"> 211</span></a>                      'groups' =&gt; array('video'), 'string' =&gt; 'video'),
<a name="l212"><span class="linenum"> 212</span></a>              'rtf' =&gt; array('type' =&gt; 'text/rtf', 'icon' =&gt; 'text', 'groups' =&gt; array('document')),
<a name="l213"><span class="linenum"> 213</span></a>              'rtx' =&gt; array('type' =&gt; 'text/richtext', 'icon' =&gt; 'text'),
<a name="l214"><span class="linenum"> 214</span></a>              'rv' =&gt; array('type' =&gt; 'audio/x-pn-realaudio-plugin', 'icon' =&gt; 'audio',
<a name="l215"><span class="linenum"> 215</span></a>                      'groups' =&gt; array('video'), 'string' =&gt; 'video'),
<a name="l216"><span class="linenum"> 216</span></a>              'sh' =&gt; array('type' =&gt; 'application/x-sh', 'icon' =&gt; 'sourcecode'),
<a name="l217"><span class="linenum"> 217</span></a>              'sit' =&gt; array('type' =&gt; 'application/x-stuffit', 'icon' =&gt; 'archive',
<a name="l218"><span class="linenum"> 218</span></a>                      'groups' =&gt; array('archive'), 'string' =&gt; 'archive'),
<a name="l219"><span class="linenum"> 219</span></a>              'smi' =&gt; array('type' =&gt; 'application/smil', 'icon' =&gt; 'text'),
<a name="l220"><span class="linenum"> 220</span></a>              'smil' =&gt; array('type' =&gt; 'application/smil', 'icon' =&gt; 'text'),
<a name="l221"><span class="linenum"> 221</span></a>              'sqt' =&gt; array('type' =&gt; 'text/xml', 'icon' =&gt; 'markup'),
<a name="l222"><span class="linenum"> 222</span></a>              'svg' =&gt; array('type' =&gt; 'image/svg+xml', 'icon' =&gt; 'image',
<a name="l223"><span class="linenum"> 223</span></a>                      'groups' =&gt; array('image', 'web_image'), 'string' =&gt; 'image'),
<a name="l224"><span class="linenum"> 224</span></a>              'svgz' =&gt; array('type' =&gt; 'image/svg+xml', 'icon' =&gt; 'image',
<a name="l225"><span class="linenum"> 225</span></a>                      'groups' =&gt; array('image', 'web_image'), 'string' =&gt; 'image'),
<a name="l226"><span class="linenum"> 226</span></a>              'swa' =&gt; array('type' =&gt; 'application/x-director', 'icon' =&gt; 'flash'),
<a name="l227"><span class="linenum"> 227</span></a>              'swf' =&gt; array('type' =&gt; 'application/x-shockwave-flash', 'icon' =&gt; 'flash', 'groups' =&gt; array('video', 'web_video')),
<a name="l228"><span class="linenum"> 228</span></a>              'swfl' =&gt; array('type' =&gt; 'application/x-shockwave-flash', 'icon' =&gt; 'flash', 'groups' =&gt; array('video', 'web_video')),
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>              'sxw' =&gt; array('type' =&gt; 'application/vnd.sun.xml.writer', 'icon' =&gt; 'writer'),
<a name="l231"><span class="linenum"> 231</span></a>              'stw' =&gt; array('type' =&gt; 'application/vnd.sun.xml.writer.template', 'icon' =&gt; 'writer'),
<a name="l232"><span class="linenum"> 232</span></a>              'sxc' =&gt; array('type' =&gt; 'application/vnd.sun.xml.calc', 'icon' =&gt; 'calc'),
<a name="l233"><span class="linenum"> 233</span></a>              'stc' =&gt; array('type' =&gt; 'application/vnd.sun.xml.calc.template', 'icon' =&gt; 'calc'),
<a name="l234"><span class="linenum"> 234</span></a>              'sxd' =&gt; array('type' =&gt; 'application/vnd.sun.xml.draw', 'icon' =&gt; 'draw'),
<a name="l235"><span class="linenum"> 235</span></a>              'std' =&gt; array('type' =&gt; 'application/vnd.sun.xml.draw.template', 'icon' =&gt; 'draw'),
<a name="l236"><span class="linenum"> 236</span></a>              'sxi' =&gt; array('type' =&gt; 'application/vnd.sun.xml.impress', 'icon' =&gt; 'impress'),
<a name="l237"><span class="linenum"> 237</span></a>              'sti' =&gt; array('type' =&gt; 'application/vnd.sun.xml.impress.template', 'icon' =&gt; 'impress'),
<a name="l238"><span class="linenum"> 238</span></a>              'sxg' =&gt; array('type' =&gt; 'application/vnd.sun.xml.writer.global', 'icon' =&gt; 'writer'),
<a name="l239"><span class="linenum"> 239</span></a>              'sxm' =&gt; array('type' =&gt; 'application/vnd.sun.xml.math', 'icon' =&gt; 'math'),
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>              'tar' =&gt; array('type' =&gt; 'application/x-tar', 'icon' =&gt; 'archive', 'groups' =&gt; array('archive'), 'string' =&gt; 'archive'),
<a name="l242"><span class="linenum"> 242</span></a>              'tif' =&gt; array('type' =&gt; 'image/tiff', 'icon' =&gt; 'tiff', 'groups' =&gt; array('image'), 'string' =&gt; 'image'),
<a name="l243"><span class="linenum"> 243</span></a>              'tiff' =&gt; array('type' =&gt; 'image/tiff', 'icon' =&gt; 'tiff', 'groups' =&gt; array('image'), 'string' =&gt; 'image'),
<a name="l244"><span class="linenum"> 244</span></a>              'tex' =&gt; array('type' =&gt; 'application/x-tex', 'icon' =&gt; 'text'),
<a name="l245"><span class="linenum"> 245</span></a>              'texi' =&gt; array('type' =&gt; 'application/x-texinfo', 'icon' =&gt; 'text'),
<a name="l246"><span class="linenum"> 246</span></a>              'texinfo' =&gt; array('type' =&gt; 'application/x-texinfo', 'icon' =&gt; 'text'),
<a name="l247"><span class="linenum"> 247</span></a>              'tsv' =&gt; array('type' =&gt; 'text/tab-separated-values', 'icon' =&gt; 'text'),
<a name="l248"><span class="linenum"> 248</span></a>              'txt' =&gt; array('type' =&gt; 'text/plain', 'icon' =&gt; 'text', 'defaulticon' =&gt; true),
<a name="l249"><span class="linenum"> 249</span></a>              'wav' =&gt; array('type' =&gt; 'audio/wav', 'icon' =&gt; 'wav', 'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l250"><span class="linenum"> 250</span></a>              'webm' =&gt; array('type' =&gt; 'video/webm', 'icon' =&gt; 'video', 'groups' =&gt; array('video'), 'string' =&gt; 'video'),
<a name="l251"><span class="linenum"> 251</span></a>              'wmv' =&gt; array('type' =&gt; 'video/x-ms-wmv', 'icon' =&gt; 'wmv', 'groups' =&gt; array('video'), 'string' =&gt; 'video'),
<a name="l252"><span class="linenum"> 252</span></a>              'asf' =&gt; array('type' =&gt; 'video/x-ms-asf', 'icon' =&gt; 'wmv', 'groups' =&gt; array('video'), 'string' =&gt; 'video'),
<a name="l253"><span class="linenum"> 253</span></a>              'wma' =&gt; array('type' =&gt; 'audio/x-ms-wma', 'icon' =&gt; 'audio', 'groups' =&gt; array('audio'), 'string' =&gt; 'audio'),
<a name="l254"><span class="linenum"> 254</span></a>  
<a name="l255"><span class="linenum"> 255</span></a>              'xbk' =&gt; array('type' =&gt; 'application/x-smarttech-notebook', 'icon' =&gt; 'archive'),
<a name="l256"><span class="linenum"> 256</span></a>              'xdp' =&gt; array('type' =&gt; 'application/pdf', 'icon' =&gt; 'pdf'),
<a name="l257"><span class="linenum"> 257</span></a>              'xfd' =&gt; array('type' =&gt; 'application/pdf', 'icon' =&gt; 'pdf'),
<a name="l258"><span class="linenum"> 258</span></a>              'xfdf' =&gt; array('type' =&gt; 'application/pdf', 'icon' =&gt; 'pdf'),
<a name="l259"><span class="linenum"> 259</span></a>  
<a name="l260"><span class="linenum"> 260</span></a>              'xls' =&gt; array('type' =&gt; 'application/vnd.ms-excel', 'icon' =&gt; 'spreadsheet', 'groups' =&gt; array('spreadsheet')),
<a name="l261"><span class="linenum"> 261</span></a>              'xlsx' =&gt; array('type' =&gt; 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'icon' =&gt; 'spreadsheet'),
<a name="l262"><span class="linenum"> 262</span></a>              'xlsm' =&gt; array('type' =&gt; 'application/vnd.ms-excel.sheet.macroEnabled.12',
<a name="l263"><span class="linenum"> 263</span></a>                      'icon' =&gt; 'spreadsheet', 'groups' =&gt; array('spreadsheet')),
<a name="l264"><span class="linenum"> 264</span></a>              'xltx' =&gt; array('type' =&gt; 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',
<a name="l265"><span class="linenum"> 265</span></a>                      'icon' =&gt; 'spreadsheet'),
<a name="l266"><span class="linenum"> 266</span></a>              'xltm' =&gt; array('type' =&gt; 'application/vnd.ms-excel.template.macroEnabled.12', 'icon' =&gt; 'spreadsheet'),
<a name="l267"><span class="linenum"> 267</span></a>              'xlsb' =&gt; array('type' =&gt; 'application/vnd.ms-excel.sheet.binary.macroEnabled.12', 'icon' =&gt; 'spreadsheet'),
<a name="l268"><span class="linenum"> 268</span></a>              'xlam' =&gt; array('type' =&gt; 'application/vnd.ms-excel.addin.macroEnabled.12', 'icon' =&gt; 'spreadsheet'),
<a name="l269"><span class="linenum"> 269</span></a>  
<a name="l270"><span class="linenum"> 270</span></a>              'xml' =&gt; array('type' =&gt; 'application/xml', 'icon' =&gt; 'markup'),
<a name="l271"><span class="linenum"> 271</span></a>              'xsl' =&gt; array('type' =&gt; 'text/xml', 'icon' =&gt; 'markup'),
<a name="l272"><span class="linenum"> 272</span></a>  
<a name="l273"><span class="linenum"> 273</span></a>              'zip' =&gt; array('type' =&gt; 'application/zip', 'icon' =&gt; 'archive', 'groups' =&gt; array('archive'), 'string' =&gt; 'archive')
<a name="l274"><span class="linenum"> 274</span></a>          );
<a name="l275"><span class="linenum"> 275</span></a>      }
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>      <span class="comment">/**</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">     * Gets all the current types.</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">     *</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">     * @return array Associative array from extension to array of data about type</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">     */</span>
<a name="l282"><span class="linenum"> 282</span></a>      public static function &amp;<a class="function" onClick="logFunction('get_types')" href="../../_functions/get_types.html" onMouseOver="funcPopup(event,'get_types')">get_types</a>() {
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">        // If it was already done in this request, use cache.</span>
<a name="l284"><span class="linenum"> 284</span></a>          if (self::<a class="var it33521" onMouseOver="hilite(33521)" onMouseOut="lolite()" onClick="logVariable('cachedtypes')" href="../../_variables/cachedtypes.html">$cachedtypes</a>) {
<a name="l285"><span class="linenum"> 285</span></a>              return self::<a class="var it33521" onMouseOver="hilite(33521)" onMouseOut="lolite()" onClick="logVariable('cachedtypes')" href="../../_variables/cachedtypes.html">$cachedtypes</a>;
<a name="l286"><span class="linenum"> 286</span></a>          }
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">        // Get defaults.</span>
<a name="l289"><span class="linenum"> 289</span></a>          <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a> = self::<a class="function" onClick="logFunction('get_default_types')" href="../../_functions/get_default_types.html" onMouseOver="funcPopup(event,'get_default_types')">get_default_types</a>();
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">        // If there are no custom types, just return.</span>
<a name="l292"><span class="linenum"> 292</span></a>          <a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../../_variables/custom.html">$custom</a> = self::<a class="function" onClick="logFunction('get_custom_types')" href="../../_functions/get_custom_types.html" onMouseOver="funcPopup(event,'get_custom_types')">get_custom_types</a>();
<a name="l293"><span class="linenum"> 293</span></a>          if (empty(<a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../../_variables/custom.html">$custom</a>)) {
<a name="l294"><span class="linenum"> 294</span></a>              return <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a>;
<a name="l295"><span class="linenum"> 295</span></a>          }
<a name="l296"><span class="linenum"> 296</span></a>  
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">        // Check value is an array.</span>
<a name="l298"><span class="linenum"> 298</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../../_variables/custom.html">$custom</a>)) {
<a name="l299"><span class="linenum"> 299</span></a>              <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Invalid <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('customfiletypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/customfiletypes.html">customfiletypes</a> (not array)', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l300"><span class="linenum"> 300</span></a>              return <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a>;
<a name="l301"><span class="linenum"> 301</span></a>          }
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>          foreach (<a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../../_variables/custom.html">$custom</a> as <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>) {
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">            // Each entry is a stdClass object similar to the array values above.</span>
<a name="l305"><span class="linenum"> 305</span></a>              if (empty(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('extension')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a>)) {
<a name="l306"><span class="linenum"> 306</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Invalid <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('customfiletypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/customfiletypes.html">customfiletypes</a> entry (extension field required)',
<a name="l307"><span class="linenum"> 307</span></a>                          <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l308"><span class="linenum"> 308</span></a>                  continue;
<a name="l309"><span class="linenum"> 309</span></a>              }
<a name="l310"><span class="linenum"> 310</span></a>  
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">            // To delete a standard entry, set 'deleted' to true.</span>
<a name="l312"><span class="linenum"> 312</span></a>              if (!empty(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('deleted')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/deleted.html">deleted</a>)) {
<a name="l313"><span class="linenum"> 313</span></a>                  unset(<a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a>[<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('extension')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a>]);
<a name="l314"><span class="linenum"> 314</span></a>                  continue;
<a name="l315"><span class="linenum"> 315</span></a>              }
<a name="l316"><span class="linenum"> 316</span></a>  
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">            // Check required fields.</span>
<a name="l318"><span class="linenum"> 318</span></a>              if (empty(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('type')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>) || empty(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('icon')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/icon.html">icon</a>)) {
<a name="l319"><span class="linenum"> 319</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Invalid <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('customfiletypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/customfiletypes.html">customfiletypes</a> entry ' . <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('extension')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a> .
<a name="l320"><span class="linenum"> 320</span></a>                          ' (type and icon fields required)', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l321"><span class="linenum"> 321</span></a>                  continue;
<a name="l322"><span class="linenum"> 322</span></a>              }
<a name="l323"><span class="linenum"> 323</span></a>  
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment">            // Build result array.</span>
<a name="l325"><span class="linenum"> 325</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = array('type' =&gt; <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('type')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>, 'icon' =&gt; <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('icon')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/icon.html">icon</a>);
<a name="l326"><span class="linenum"> 326</span></a>              if (!empty(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('groups')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/groups.html">groups</a>)) {
<a name="l327"><span class="linenum"> 327</span></a>                  if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('groups')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/groups.html">groups</a>)) {
<a name="l328"><span class="linenum"> 328</span></a>                      <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Invalid <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('customfiletypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/customfiletypes.html">customfiletypes</a> entry ' . <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('extension')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a> .
<a name="l329"><span class="linenum"> 329</span></a>                              ' (groups field not array)', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l330"><span class="linenum"> 330</span></a>                      continue;
<a name="l331"><span class="linenum"> 331</span></a>                  }
<a name="l332"><span class="linenum"> 332</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['groups'] = <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('groups')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/groups.html">groups</a>;
<a name="l333"><span class="linenum"> 333</span></a>              }
<a name="l334"><span class="linenum"> 334</span></a>              if (!empty(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('string')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/string.html">string</a>)) {
<a name="l335"><span class="linenum"> 335</span></a>                  if (!<a class="phpfunction" onClick="logFunction('is_string')" href="../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('string')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/string.html">string</a>)) {
<a name="l336"><span class="linenum"> 336</span></a>                      <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Invalid <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('customfiletypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/customfiletypes.html">customfiletypes</a> entry ' . <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('extension')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a> .
<a name="l337"><span class="linenum"> 337</span></a>                              ' (string field not string)', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l338"><span class="linenum"> 338</span></a>                      continue;
<a name="l339"><span class="linenum"> 339</span></a>                  }
<a name="l340"><span class="linenum"> 340</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['string'] = <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('string')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/string.html">string</a>;
<a name="l341"><span class="linenum"> 341</span></a>              }
<a name="l342"><span class="linenum"> 342</span></a>              if (!empty(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('defaulticon')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/defaulticon.html">defaulticon</a>)) {
<a name="l343"><span class="linenum"> 343</span></a>                  if (!<a class="phpfunction" onClick="logFunction('is_bool')" href="../../_functions/is_bool.html" onMouseOver="phpfuncPopup(event,'is_bool')">is_bool</a>(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('defaulticon')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/defaulticon.html">defaulticon</a>)) {
<a name="l344"><span class="linenum"> 344</span></a>                      <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Invalid <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('customfiletypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/customfiletypes.html">customfiletypes</a> entry ' . <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('extension')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a> .
<a name="l345"><span class="linenum"> 345</span></a>                              ' (defaulticon field not bool)', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l346"><span class="linenum"> 346</span></a>                      continue;
<a name="l347"><span class="linenum"> 347</span></a>                  }
<a name="l348"><span class="linenum"> 348</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['defaulticon'] = <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('defaulticon')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/defaulticon.html">defaulticon</a>;
<a name="l349"><span class="linenum"> 349</span></a>              }
<a name="l350"><span class="linenum"> 350</span></a>              if (!empty(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('customdescription')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/customdescription.html">customdescription</a>)) {
<a name="l351"><span class="linenum"> 351</span></a>                  if (!<a class="phpfunction" onClick="logFunction('is_string')" href="../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('customdescription')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/customdescription.html">customdescription</a>)) {
<a name="l352"><span class="linenum"> 352</span></a>                      <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('Invalid <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('customfiletypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/customfiletypes.html">customfiletypes</a> entry ' . <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('extension')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a> .
<a name="l353"><span class="linenum"> 353</span></a>                              ' (customdescription field not string)', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l354"><span class="linenum"> 354</span></a>                      continue;
<a name="l355"><span class="linenum"> 355</span></a>                  }
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment">                // As the name suggests, this field is used only for custom entries.</span>
<a name="l357"><span class="linenum"> 357</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['customdescription'] = <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('customdescription')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/customdescription.html">customdescription</a>;
<a name="l358"><span class="linenum"> 358</span></a>              }
<a name="l359"><span class="linenum"> 359</span></a>  
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">            // Track whether it is a custom filetype or a modified existing</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">            // filetype.</span>
<a name="l362"><span class="linenum"> 362</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('extension')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a>, <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a>)) {
<a name="l363"><span class="linenum"> 363</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['modified'] = true;
<a name="l364"><span class="linenum"> 364</span></a>              } else {
<a name="l365"><span class="linenum"> 365</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>['custom'] = true;
<a name="l366"><span class="linenum"> 366</span></a>              }
<a name="l367"><span class="linenum"> 367</span></a>  
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">            // Add result array to list.</span>
<a name="l369"><span class="linenum"> 369</span></a>              <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a>[<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('extension')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a>] = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l370"><span class="linenum"> 370</span></a>          }
<a name="l371"><span class="linenum"> 371</span></a>  
<a name="l372"><span class="linenum"> 372</span></a>          self::<a class="var it33521" onMouseOver="hilite(33521)" onMouseOut="lolite()" onClick="logVariable('cachedtypes')" href="../../_variables/cachedtypes.html">$cachedtypes</a> = <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a>;
<a name="l373"><span class="linenum"> 373</span></a>          return self::<a class="var it33521" onMouseOver="hilite(33521)" onMouseOut="lolite()" onClick="logVariable('cachedtypes')" href="../../_variables/cachedtypes.html">$cachedtypes</a>;
<a name="l374"><span class="linenum"> 374</span></a>      }
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>      <span class="comment">/**</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     * Gets custom types from config variable, after decoding the JSON if required.</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">     *</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     * @return array Array of custom types (empty array if none)</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     */</span>
<a name="l381"><span class="linenum"> 381</span></a>      protected static function <a class="function" onClick="logFunction('get_custom_types')" href="../../_functions/get_custom_types.html" onMouseOver="funcPopup(event,'get_custom_types')">get_custom_types</a>() {
<a name="l382"><span class="linenum"> 382</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l383"><span class="linenum"> 383</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('customfiletypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/customfiletypes.html">customfiletypes</a>)) {
<a name="l384"><span class="linenum"> 384</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('customfiletypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/customfiletypes.html">customfiletypes</a>)) {
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">                // You can define this as an array in config.php...</span>
<a name="l386"><span class="linenum"> 386</span></a>                  return <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('customfiletypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/customfiletypes.html">customfiletypes</a>;
<a name="l387"><span class="linenum"> 387</span></a>              } else {
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">                // Or as a JSON string in the config table.</span>
<a name="l389"><span class="linenum"> 389</span></a>                  return json_decode(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('customfiletypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/customfiletypes.html">customfiletypes</a>);
<a name="l390"><span class="linenum"> 390</span></a>              }
<a name="l391"><span class="linenum"> 391</span></a>          } else {
<a name="l392"><span class="linenum"> 392</span></a>              return array();
<a name="l393"><span class="linenum"> 393</span></a>          }
<a name="l394"><span class="linenum"> 394</span></a>      }
<a name="l395"><span class="linenum"> 395</span></a>  
<a name="l396"><span class="linenum"> 396</span></a>      <span class="comment">/**</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment">     * Sets the custom types into config variable, encoding into JSON.</span>
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment">     *</span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment">     * @param array $types Array of custom types</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment">     * @throws coding_exception If the custom types are fixed in config.php.</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">     */</span>
<a name="l402"><span class="linenum"> 402</span></a>      protected static function <a class="function" onClick="logFunction('set_custom_types')" href="../../_functions/set_custom_types.html" onMouseOver="funcPopup(event,'set_custom_types')">set_custom_types</a>(array <a class="var it2894" onMouseOver="hilite(2894)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>) {
<a name="l403"><span class="linenum"> 403</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l404"><span class="linenum"> 404</span></a>  <span class="comment">        // Check the setting hasn't been forced.</span>
<a name="l405"><span class="linenum"> 405</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('customfiletypes', <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('config_php_settings')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/config_php_settings.html">config_php_settings</a>)) {
<a name="l406"><span class="linenum"> 406</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Cannot set custom filetypes because they ' .
<a name="l407"><span class="linenum"> 407</span></a>                      'are defined in config.php');
<a name="l408"><span class="linenum"> 408</span></a>          }
<a name="l409"><span class="linenum"> 409</span></a>          if (empty(<a class="var it2894" onMouseOver="hilite(2894)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>)) {
<a name="l410"><span class="linenum"> 410</span></a>              <a class="function" onClick="logFunction('unset_config')" href="../../_functions/unset_config.html" onMouseOver="funcPopup(event,'unset_config')">unset_config</a>('customfiletypes');
<a name="l411"><span class="linenum"> 411</span></a>          } else {
<a name="l412"><span class="linenum"> 412</span></a>              <a class="function" onClick="logFunction('set_config')" href="../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('customfiletypes', <a class="function" onClick="logFunction('json_encode')" href="../../_functions/json_encode.html" onMouseOver="funcPopup(event,'json_encode')">json_encode</a>(<a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it2894" onMouseOver="hilite(2894)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../_variables/types.html">$types</a>)));
<a name="l413"><span class="linenum"> 413</span></a>          }
<a name="l414"><span class="linenum"> 414</span></a>  
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">        // Clear the cached type list.</span>
<a name="l416"><span class="linenum"> 416</span></a>          self::<a class="function" onClick="logFunction('reset_caches')" href="../../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>();
<a name="l417"><span class="linenum"> 417</span></a>      }
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>      <span class="comment">/**</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">     * Clears the type cache. This is not needed in normal use as the</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">     * set_custom_types function automatically clears the cache. Intended for</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">     * use in unit tests.</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">     */</span>
<a name="l424"><span class="linenum"> 424</span></a>      public static function <a class="function" onClick="logFunction('reset_caches')" href="../../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>() {
<a name="l425"><span class="linenum"> 425</span></a>          self::<a class="var it33521" onMouseOver="hilite(33521)" onMouseOut="lolite()" onClick="logVariable('cachedtypes')" href="../../_variables/cachedtypes.html">$cachedtypes</a> = null;
<a name="l426"><span class="linenum"> 426</span></a>      }
<a name="l427"><span class="linenum"> 427</span></a>  
<a name="l428"><span class="linenum"> 428</span></a>      <span class="comment">/**</span>
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">     * Gets the default types that have been deleted. Returns an array containing</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">     * the defaults of all those types.</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">     *</span>
<a name="l432"><span class="linenum"> 432</span></a>  <span class="comment">     * @return array Array (same format as get_mimetypes_array)</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">     */</span>
<a name="l434"><span class="linenum"> 434</span></a>      public static function <a class="function" onClick="logFunction('get_deleted_types')" href="../../_functions/get_deleted_types.html" onMouseOver="funcPopup(event,'get_deleted_types')">get_deleted_types</a>() {
<a name="l435"><span class="linenum"> 435</span></a>          <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../_variables/defaults.html">$defaults</a> = self::<a class="function" onClick="logFunction('get_default_types')" href="../../_functions/get_default_types.html" onMouseOver="funcPopup(event,'get_default_types')">get_default_types</a>();
<a name="l436"><span class="linenum"> 436</span></a>          <a class="var it2973" onMouseOver="hilite(2973)" onMouseOut="lolite()" onClick="logVariable('deleted')" href="../../_variables/deleted.html">$deleted</a> = array();
<a name="l437"><span class="linenum"> 437</span></a>          foreach (self::<a class="function" onClick="logFunction('get_custom_types')" href="../../_functions/get_custom_types.html" onMouseOver="funcPopup(event,'get_custom_types')">get_custom_types</a>() as <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>) {
<a name="l438"><span class="linenum"> 438</span></a>              if (!empty(<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('deleted')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/deleted.html">deleted</a>)) {
<a name="l439"><span class="linenum"> 439</span></a>                  <a class="var it2973" onMouseOver="hilite(2973)" onMouseOut="lolite()" onClick="logVariable('deleted')" href="../../_variables/deleted.html">$deleted</a>[<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('extension')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a>] = <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../_variables/defaults.html">$defaults</a>[<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('extension')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a>];
<a name="l440"><span class="linenum"> 440</span></a>              }
<a name="l441"><span class="linenum"> 441</span></a>          }
<a name="l442"><span class="linenum"> 442</span></a>          return <a class="var it2973" onMouseOver="hilite(2973)" onMouseOut="lolite()" onClick="logVariable('deleted')" href="../../_variables/deleted.html">$deleted</a>;
<a name="l443"><span class="linenum"> 443</span></a>      }
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>      <span class="comment">/**</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">     * Adds a new entry to the list of custom filetypes.</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">     *</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">     * @param string $extension File extension without dot, e.g. 'doc'</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">     * @param string $mimetype MIME type e.g. 'application/msword'</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">     * @param string $coreicon Core icon to use e.g. 'document'</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">     * @param array $groups Array of group strings that this type belongs to</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">     * @param string $corestring Custom lang string name in mimetypes.php</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">     * @param string $customdescription Custom description (plain text/multilang)</span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">     * @param bool $defaulticon True if this should be the default icon for the type</span>
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment">     * @throws coding_exception If the extension already exists, or otherwise invalid</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">     */</span>
<a name="l457"><span class="linenum"> 457</span></a>      public static function <a class="function" onClick="logFunction('add_type')" href="../../_functions/add_type.html" onMouseOver="funcPopup(event,'add_type')">add_type</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>, <a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a>, <a class="var it33525" onMouseOver="hilite(33525)" onMouseOut="lolite()" onClick="logVariable('coreicon')" href="../../_variables/coreicon.html">$coreicon</a>,
<a name="l458"><span class="linenum"> 458</span></a>              array <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = array(), <a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('corestring')" href="../../_variables/corestring.html">$corestring</a> = '', <a class="var it30024" onMouseOver="hilite(30024)" onMouseOut="lolite()" onClick="logVariable('customdescription')" href="../../_variables/customdescription.html">$customdescription</a> = '',
<a name="l459"><span class="linenum"> 459</span></a>              <a class="var it33524" onMouseOver="hilite(33524)" onMouseOut="lolite()" onClick="logVariable('defaulticon')" href="../../_variables/defaulticon.html">$defaulticon</a> = false) {
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">        // Check for blank extensions or incorrectly including the dot.</span>
<a name="l461"><span class="linenum"> 461</span></a>          <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a> = (string)<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>;
<a name="l462"><span class="linenum"> 462</span></a>          if (<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a> === '' || <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>[0] === '.') {
<a name="l463"><span class="linenum"> 463</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid extension .' . <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>);
<a name="l464"><span class="linenum"> 464</span></a>          }
<a name="l465"><span class="linenum"> 465</span></a>  
<a name="l466"><span class="linenum"> 466</span></a>  <span class="comment">        // Check extension not already used.</span>
<a name="l467"><span class="linenum"> 467</span></a>          <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l468"><span class="linenum"> 468</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>, <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a>)) {
<a name="l469"><span class="linenum"> 469</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Extension ' . <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a> . ' already exists');
<a name="l470"><span class="linenum"> 470</span></a>          }
<a name="l471"><span class="linenum"> 471</span></a>  
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">        // For default icon, check there isn't already something with default icon</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">        // set for that MIME type.</span>
<a name="l474"><span class="linenum"> 474</span></a>          if (<a class="var it33524" onMouseOver="hilite(33524)" onMouseOut="lolite()" onClick="logVariable('defaulticon')" href="../../_variables/defaulticon.html">$defaulticon</a>) {
<a name="l475"><span class="linenum"> 475</span></a>              foreach (<a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a> as <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l476"><span class="linenum"> 476</span></a>                  if (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>['type'] === <a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a> &amp;&amp; !empty(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>['defaulticon'])) {
<a name="l477"><span class="linenum"> 477</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('MIME type ' . <a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a> .
<a name="l478"><span class="linenum"> 478</span></a>                              ' already has a default icon set');
<a name="l479"><span class="linenum"> 479</span></a>                  }
<a name="l480"><span class="linenum"> 480</span></a>              }
<a name="l481"><span class="linenum"> 481</span></a>          }
<a name="l482"><span class="linenum"> 482</span></a>  
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment">        // Get existing custom filetype list.</span>
<a name="l484"><span class="linenum"> 484</span></a>          <a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a> = self::<a class="function" onClick="logFunction('get_custom_types')" href="../../_functions/get_custom_types.html" onMouseOver="funcPopup(event,'get_custom_types')">get_custom_types</a>();
<a name="l485"><span class="linenum"> 485</span></a>  
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment">        // Check if there's a 'deleted' entry for the extension, if so then get</span>
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">        // rid of it.</span>
<a name="l488"><span class="linenum"> 488</span></a>          foreach (<a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../../_variables/custom.html">$custom</a>) {
<a name="l489"><span class="linenum"> 489</span></a>              if (<a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../../_variables/custom.html">$custom</a>-&gt;<a onClick="logVariable('extension')" class="var it41881" onMouseOver="hilite(41881)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a> === <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>) {
<a name="l490"><span class="linenum"> 490</span></a>                  unset(<a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]);
<a name="l491"><span class="linenum"> 491</span></a>              }
<a name="l492"><span class="linenum"> 492</span></a>          }
<a name="l493"><span class="linenum"> 493</span></a>  
<a name="l494"><span class="linenum"> 494</span></a>  <span class="comment">        // Set up config record for new type.</span>
<a name="l495"><span class="linenum"> 495</span></a>          <a class="var it28556" onMouseOver="hilite(28556)" onMouseOut="lolite()" onClick="logVariable('newtype')" href="../../_variables/newtype.html">$newtype</a> = self::<a class="function" onClick="logFunction('create_config_record')" href="../../_functions/create_config_record.html" onMouseOver="funcPopup(event,'create_config_record')">create_config_record</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>, <a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a>, <a class="var it33525" onMouseOver="hilite(33525)" onMouseOut="lolite()" onClick="logVariable('coreicon')" href="../../_variables/coreicon.html">$coreicon</a>, <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>,
<a name="l496"><span class="linenum"> 496</span></a>                  <a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('corestring')" href="../../_variables/corestring.html">$corestring</a>, <a class="var it30024" onMouseOver="hilite(30024)" onMouseOut="lolite()" onClick="logVariable('customdescription')" href="../../_variables/customdescription.html">$customdescription</a>, <a class="var it33524" onMouseOver="hilite(33524)" onMouseOut="lolite()" onClick="logVariable('defaulticon')" href="../../_variables/defaulticon.html">$defaulticon</a>);
<a name="l497"><span class="linenum"> 497</span></a>  
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment">        // See if there's a default value with this extension.</span>
<a name="l499"><span class="linenum"> 499</span></a>          <a class="var it33527" onMouseOver="hilite(33527)" onMouseOut="lolite()" onClick="logVariable('needsadding')" href="../../_variables/needsadding.html">$needsadding</a> = true;
<a name="l500"><span class="linenum"> 500</span></a>          <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../_variables/defaults.html">$defaults</a> = self::<a class="function" onClick="logFunction('get_default_types')" href="../../_functions/get_default_types.html" onMouseOver="funcPopup(event,'get_default_types')">get_default_types</a>();
<a name="l501"><span class="linenum"> 501</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>, <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../_variables/defaults.html">$defaults</a>)) {
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment">            // If it has the same values, we don't need to add it.</span>
<a name="l503"><span class="linenum"> 503</span></a>              <a class="var it7377" onMouseOver="hilite(7377)" onMouseOut="lolite()" onClick="logVariable('defaultvalue')" href="../../_variables/defaultvalue.html">$defaultvalue</a> = <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../_variables/defaults.html">$defaults</a>[<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>];
<a name="l504"><span class="linenum"> 504</span></a>              <a class="var it1431" onMouseOver="hilite(1431)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a> = (array)<a class="var it28556" onMouseOver="hilite(28556)" onMouseOut="lolite()" onClick="logVariable('newtype')" href="../../_variables/newtype.html">$newtype</a>;
<a name="l505"><span class="linenum"> 505</span></a>              unset(<a class="var it1431" onMouseOver="hilite(1431)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>['extension']);
<a name="l506"><span class="linenum"> 506</span></a>              <a class="phpfunction" onClick="logFunction('ksort')" href="../../_functions/ksort.html" onMouseOver="phpfuncPopup(event,'ksort')">ksort</a>(<a class="var it7377" onMouseOver="hilite(7377)" onMouseOut="lolite()" onClick="logVariable('defaultvalue')" href="../../_variables/defaultvalue.html">$defaultvalue</a>);
<a name="l507"><span class="linenum"> 507</span></a>              <a class="phpfunction" onClick="logFunction('ksort')" href="../../_functions/ksort.html" onMouseOver="phpfuncPopup(event,'ksort')">ksort</a>(<a class="var it1431" onMouseOver="hilite(1431)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a>);
<a name="l508"><span class="linenum"> 508</span></a>              if (<a class="var it1431" onMouseOver="hilite(1431)" onMouseOut="lolite()" onClick="logVariable('modified')" href="../../_variables/modified.html">$modified</a> === <a class="var it7377" onMouseOver="hilite(7377)" onMouseOut="lolite()" onClick="logVariable('defaultvalue')" href="../../_variables/defaultvalue.html">$defaultvalue</a>) {
<a name="l509"><span class="linenum"> 509</span></a>                  <a class="var it33527" onMouseOver="hilite(33527)" onMouseOut="lolite()" onClick="logVariable('needsadding')" href="../../_variables/needsadding.html">$needsadding</a> = false;
<a name="l510"><span class="linenum"> 510</span></a>              }
<a name="l511"><span class="linenum"> 511</span></a>          }
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">        // Add to array and set in config.</span>
<a name="l514"><span class="linenum"> 514</span></a>          if (<a class="var it33527" onMouseOver="hilite(33527)" onMouseOut="lolite()" onClick="logVariable('needsadding')" href="../../_variables/needsadding.html">$needsadding</a>) {
<a name="l515"><span class="linenum"> 515</span></a>              <a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a>[] = <a class="var it28556" onMouseOver="hilite(28556)" onMouseOut="lolite()" onClick="logVariable('newtype')" href="../../_variables/newtype.html">$newtype</a>;
<a name="l516"><span class="linenum"> 516</span></a>          }
<a name="l517"><span class="linenum"> 517</span></a>          self::<a class="function" onClick="logFunction('set_custom_types')" href="../../_functions/set_custom_types.html" onMouseOver="funcPopup(event,'set_custom_types')">set_custom_types</a>(<a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a>);
<a name="l518"><span class="linenum"> 518</span></a>      }
<a name="l519"><span class="linenum"> 519</span></a>  
<a name="l520"><span class="linenum"> 520</span></a>      <span class="comment">/**</span>
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">     * Updates an entry in the list of filetypes in config.</span>
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">     *</span>
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment">     * @param string $extension File extension without dot, e.g. 'doc'</span>
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">     * @param string $newextension New file extension (same if not changing)</span>
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment">     * @param string $mimetype MIME type e.g. 'application/msword'</span>
<a name="l526"><span class="linenum"> 526</span></a>  <span class="comment">     * @param string $coreicon Core icon to use e.g. 'document'</span>
<a name="l527"><span class="linenum"> 527</span></a>  <span class="comment">     * @param array $groups Array of group strings that this type belongs to</span>
<a name="l528"><span class="linenum"> 528</span></a>  <span class="comment">     * @param string $corestring Custom lang string name in mimetypes.php</span>
<a name="l529"><span class="linenum"> 529</span></a>  <span class="comment">     * @param string $customdescription Custom description (plain text/multilang)</span>
<a name="l530"><span class="linenum"> 530</span></a>  <span class="comment">     * @param bool $defaulticon True if this should be the default icon for the type</span>
<a name="l531"><span class="linenum"> 531</span></a>  <span class="comment">     * @throws coding_exception If the new extension already exists, or otherwise invalid</span>
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment">     */</span>
<a name="l533"><span class="linenum"> 533</span></a>      public static function <a class="function" onClick="logFunction('update_type')" href="../../_functions/update_type.html" onMouseOver="funcPopup(event,'update_type')">update_type</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>, <a class="var it33528" onMouseOver="hilite(33528)" onMouseOut="lolite()" onClick="logVariable('newextension')" href="../../_variables/newextension.html">$newextension</a>, <a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a>, <a class="var it33525" onMouseOver="hilite(33525)" onMouseOut="lolite()" onClick="logVariable('coreicon')" href="../../_variables/coreicon.html">$coreicon</a>,
<a name="l534"><span class="linenum"> 534</span></a>              array <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = array(), <a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('corestring')" href="../../_variables/corestring.html">$corestring</a> = '', <a class="var it30024" onMouseOver="hilite(30024)" onMouseOut="lolite()" onClick="logVariable('customdescription')" href="../../_variables/customdescription.html">$customdescription</a> = '',
<a name="l535"><span class="linenum"> 535</span></a>              <a class="var it33524" onMouseOver="hilite(33524)" onMouseOut="lolite()" onClick="logVariable('defaulticon')" href="../../_variables/defaulticon.html">$defaulticon</a> = false) {
<a name="l536"><span class="linenum"> 536</span></a>  
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">        // Extension must exist.</span>
<a name="l538"><span class="linenum"> 538</span></a>          <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a> = (string)<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>;
<a name="l539"><span class="linenum"> 539</span></a>          <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l540"><span class="linenum"> 540</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>, <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a>)) {
<a name="l541"><span class="linenum"> 541</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Extension ' . <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a> . ' not found');
<a name="l542"><span class="linenum"> 542</span></a>          }
<a name="l543"><span class="linenum"> 543</span></a>  
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">        // If there's a new extension then this must not exist.</span>
<a name="l545"><span class="linenum"> 545</span></a>          <a class="var it33528" onMouseOver="hilite(33528)" onMouseOut="lolite()" onClick="logVariable('newextension')" href="../../_variables/newextension.html">$newextension</a> = (string)<a class="var it33528" onMouseOver="hilite(33528)" onMouseOut="lolite()" onClick="logVariable('newextension')" href="../../_variables/newextension.html">$newextension</a>;
<a name="l546"><span class="linenum"> 546</span></a>          if (<a class="var it33528" onMouseOver="hilite(33528)" onMouseOut="lolite()" onClick="logVariable('newextension')" href="../../_variables/newextension.html">$newextension</a> !== <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>) {
<a name="l547"><span class="linenum"> 547</span></a>              if (<a class="var it33528" onMouseOver="hilite(33528)" onMouseOut="lolite()" onClick="logVariable('newextension')" href="../../_variables/newextension.html">$newextension</a> === '' || <a class="var it33528" onMouseOver="hilite(33528)" onMouseOut="lolite()" onClick="logVariable('newextension')" href="../../_variables/newextension.html">$newextension</a>[0] === '.') {
<a name="l548"><span class="linenum"> 548</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Invalid extension .' . <a class="var it33528" onMouseOver="hilite(33528)" onMouseOut="lolite()" onClick="logVariable('newextension')" href="../../_variables/newextension.html">$newextension</a>);
<a name="l549"><span class="linenum"> 549</span></a>              }
<a name="l550"><span class="linenum"> 550</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it33528" onMouseOver="hilite(33528)" onMouseOut="lolite()" onClick="logVariable('newextension')" href="../../_variables/newextension.html">$newextension</a>, <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a>)) {
<a name="l551"><span class="linenum"> 551</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Extension ' . <a class="var it33528" onMouseOver="hilite(33528)" onMouseOut="lolite()" onClick="logVariable('newextension')" href="../../_variables/newextension.html">$newextension</a> . ' already exists');
<a name="l552"><span class="linenum"> 552</span></a>              }
<a name="l553"><span class="linenum"> 553</span></a>          }
<a name="l554"><span class="linenum"> 554</span></a>  
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">        // For default icon, check there isn't already something with default icon</span>
<a name="l556"><span class="linenum"> 556</span></a>  <span class="comment">        // set for that MIME type (unless it's this).</span>
<a name="l557"><span class="linenum"> 557</span></a>          if (<a class="var it33524" onMouseOver="hilite(33524)" onMouseOut="lolite()" onClick="logVariable('defaulticon')" href="../../_variables/defaulticon.html">$defaulticon</a>) {
<a name="l558"><span class="linenum"> 558</span></a>              foreach (<a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a> as <a class="var it3281" onMouseOver="hilite(3281)" onMouseOut="lolite()" onClick="logVariable('ext')" href="../../_variables/ext.html">$ext</a> =&gt; <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l559"><span class="linenum"> 559</span></a>                  if (<a class="var it3281" onMouseOver="hilite(3281)" onMouseOut="lolite()" onClick="logVariable('ext')" href="../../_variables/ext.html">$ext</a> !== <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a> &amp;&amp; <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>['type'] === <a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a> &amp;&amp;
<a name="l560"><span class="linenum"> 560</span></a>                          !empty(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>['defaulticon'])) {
<a name="l561"><span class="linenum"> 561</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('MIME type ' . <a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a> .
<a name="l562"><span class="linenum"> 562</span></a>                              ' already has a default icon set');
<a name="l563"><span class="linenum"> 563</span></a>                  }
<a name="l564"><span class="linenum"> 564</span></a>              }
<a name="l565"><span class="linenum"> 565</span></a>          }
<a name="l566"><span class="linenum"> 566</span></a>  
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment">        // Delete the old extension and then add the new one (may be same). This</span>
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">        // will correctly handle cases when a default type is involved.</span>
<a name="l569"><span class="linenum"> 569</span></a>          self::<a class="function" onClick="logFunction('delete_type')" href="../../_functions/delete_type.html" onMouseOver="funcPopup(event,'delete_type')">delete_type</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>);
<a name="l570"><span class="linenum"> 570</span></a>          self::<a class="function" onClick="logFunction('add_type')" href="../../_functions/add_type.html" onMouseOver="funcPopup(event,'add_type')">add_type</a>(<a class="var it33528" onMouseOver="hilite(33528)" onMouseOut="lolite()" onClick="logVariable('newextension')" href="../../_variables/newextension.html">$newextension</a>, <a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a>, <a class="var it33525" onMouseOver="hilite(33525)" onMouseOut="lolite()" onClick="logVariable('coreicon')" href="../../_variables/coreicon.html">$coreicon</a>, <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>, <a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('corestring')" href="../../_variables/corestring.html">$corestring</a>,
<a name="l571"><span class="linenum"> 571</span></a>                  <a class="var it30024" onMouseOver="hilite(30024)" onMouseOut="lolite()" onClick="logVariable('customdescription')" href="../../_variables/customdescription.html">$customdescription</a>, <a class="var it33524" onMouseOver="hilite(33524)" onMouseOut="lolite()" onClick="logVariable('defaulticon')" href="../../_variables/defaulticon.html">$defaulticon</a>);
<a name="l572"><span class="linenum"> 572</span></a>      }
<a name="l573"><span class="linenum"> 573</span></a>  
<a name="l574"><span class="linenum"> 574</span></a>      <span class="comment">/**</span>
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">     * Deletes a file type from the config list (or, for a standard one, marks it</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment">     * as deleted).</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment">     *</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment">     * @param string $extension File extension without dot, e.g. 'doc'</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment">     * @throws coding_exception If the extension does not exist, or otherwise invalid</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     */</span>
<a name="l581"><span class="linenum"> 581</span></a>      public static function <a class="function" onClick="logFunction('delete_type')" href="../../_functions/delete_type.html" onMouseOver="funcPopup(event,'delete_type')">delete_type</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>) {
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">        // Extension must exist.</span>
<a name="l583"><span class="linenum"> 583</span></a>          <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a> = <a class="function" onClick="logFunction('get_mimetypes_array')" href="../../_functions/get_mimetypes_array.html" onMouseOver="funcPopup(event,'get_mimetypes_array')">get_mimetypes_array</a>();
<a name="l584"><span class="linenum"> 584</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>, <a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a>)) {
<a name="l585"><span class="linenum"> 585</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Extension ' . <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a> . ' not found');
<a name="l586"><span class="linenum"> 586</span></a>          }
<a name="l587"><span class="linenum"> 587</span></a>  
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment">        // Get existing custom filetype list.</span>
<a name="l589"><span class="linenum"> 589</span></a>          <a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a> = self::<a class="function" onClick="logFunction('get_custom_types')" href="../../_functions/get_custom_types.html" onMouseOver="funcPopup(event,'get_custom_types')">get_custom_types</a>();
<a name="l590"><span class="linenum"> 590</span></a>  
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">        // Remove any entries for this extension.</span>
<a name="l592"><span class="linenum"> 592</span></a>          foreach (<a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../../_variables/custom.html">$custom</a>) {
<a name="l593"><span class="linenum"> 593</span></a>              if (<a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../../_variables/custom.html">$custom</a>-&gt;<a onClick="logVariable('extension')" class="var it41881" onMouseOver="hilite(41881)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a> === <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a> &amp;&amp; empty(<a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../../_variables/custom.html">$custom</a>-&gt;<a onClick="logVariable('deleted')" class="var it41881" onMouseOver="hilite(41881)" onMouseOut="lolite()" href="../../_variables/deleted.html">deleted</a>)) {
<a name="l594"><span class="linenum"> 594</span></a>                  unset(<a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]);
<a name="l595"><span class="linenum"> 595</span></a>              }
<a name="l596"><span class="linenum"> 596</span></a>          }
<a name="l597"><span class="linenum"> 597</span></a>  
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment">        // If it was a standard entry (doesn't have 'custom' set) then add a</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment">        // deleted marker.</span>
<a name="l600"><span class="linenum"> 600</span></a>          if (empty(<a class="var it5298" onMouseOver="hilite(5298)" onMouseOut="lolite()" onClick="logVariable('mimetypes')" href="../../_variables/mimetypes.html">$mimetypes</a>[<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>]['custom'])) {
<a name="l601"><span class="linenum"> 601</span></a>              <a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a>[] = (object)array('extension' =&gt; <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>, 'deleted' =&gt; true);
<a name="l602"><span class="linenum"> 602</span></a>          }
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">        // Save and reset cache.</span>
<a name="l605"><span class="linenum"> 605</span></a>          self::<a class="function" onClick="logFunction('set_custom_types')" href="../../_functions/set_custom_types.html" onMouseOver="funcPopup(event,'set_custom_types')">set_custom_types</a>(<a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a>);
<a name="l606"><span class="linenum"> 606</span></a>      }
<a name="l607"><span class="linenum"> 607</span></a>  
<a name="l608"><span class="linenum"> 608</span></a>      <span class="comment">/**</span>
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment">     * Reverts a file type to the default. May only be called on types that have</span>
<a name="l610"><span class="linenum"> 610</span></a>  <span class="comment">     * default values. This will undelete the type if necessary or set its values.</span>
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment">     * If the type is already at default values, does nothing.</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">     *</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">     * @param string $extension File extension without dot, e.g. 'doc'</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">     * @return bool True if anything was changed, false if it was already default</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">     * @throws coding_exception If the extension is not a default type.</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">     */</span>
<a name="l617"><span class="linenum"> 617</span></a>      public static function <a class="function" onClick="logFunction('revert_type_to_default')" href="../../_functions/revert_type_to_default.html" onMouseOver="funcPopup(event,'revert_type_to_default')">revert_type_to_default</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>) {
<a name="l618"><span class="linenum"> 618</span></a>          <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a> = (string)<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>;
<a name="l619"><span class="linenum"> 619</span></a>  
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment">        // Check it actually is a default type.</span>
<a name="l621"><span class="linenum"> 621</span></a>          <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../_variables/defaults.html">$defaults</a> = self::<a class="function" onClick="logFunction('get_default_types')" href="../../_functions/get_default_types.html" onMouseOver="funcPopup(event,'get_default_types')">get_default_types</a>();
<a name="l622"><span class="linenum"> 622</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>, <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../_variables/defaults.html">$defaults</a>)) {
<a name="l623"><span class="linenum"> 623</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Extension ' . <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a> . ' is not a default type');
<a name="l624"><span class="linenum"> 624</span></a>          }
<a name="l625"><span class="linenum"> 625</span></a>  
<a name="l626"><span class="linenum"> 626</span></a>  <span class="comment">        // Loop through all the custom settings.</span>
<a name="l627"><span class="linenum"> 627</span></a>          <a class="var it3069" onMouseOver="hilite(3069)" onMouseOut="lolite()" onClick="logVariable('changed')" href="../../_variables/changed.html">$changed</a> = false;
<a name="l628"><span class="linenum"> 628</span></a>          <a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a> = self::<a class="function" onClick="logFunction('get_custom_types')" href="../../_functions/get_custom_types.html" onMouseOver="funcPopup(event,'get_custom_types')">get_custom_types</a>();
<a name="l629"><span class="linenum"> 629</span></a>          foreach (<a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>) {
<a name="l630"><span class="linenum"> 630</span></a>              if (<a class="var it33523" onMouseOver="hilite(33523)" onMouseOut="lolite()" onClick="logVariable('customentry')" href="../../_variables/customentry.html">$customentry</a>-&gt;<a onClick="logVariable('extension')" class="var it41880" onMouseOver="hilite(41880)" onMouseOut="lolite()" href="../../_variables/extension.html">extension</a> === <a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>) {
<a name="l631"><span class="linenum"> 631</span></a>                  unset(<a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]);
<a name="l632"><span class="linenum"> 632</span></a>                  <a class="var it3069" onMouseOver="hilite(3069)" onMouseOut="lolite()" onClick="logVariable('changed')" href="../../_variables/changed.html">$changed</a> = true;
<a name="l633"><span class="linenum"> 633</span></a>              }
<a name="l634"><span class="linenum"> 634</span></a>          }
<a name="l635"><span class="linenum"> 635</span></a>  
<a name="l636"><span class="linenum"> 636</span></a>  <span class="comment">        // Save changes if any.</span>
<a name="l637"><span class="linenum"> 637</span></a>          if (<a class="var it3069" onMouseOver="hilite(3069)" onMouseOut="lolite()" onClick="logVariable('changed')" href="../../_variables/changed.html">$changed</a>) {
<a name="l638"><span class="linenum"> 638</span></a>              self::<a class="function" onClick="logFunction('set_custom_types')" href="../../_functions/set_custom_types.html" onMouseOver="funcPopup(event,'set_custom_types')">set_custom_types</a>(<a class="var it33526" onMouseOver="hilite(33526)" onMouseOut="lolite()" onClick="logVariable('customs')" href="../../_variables/customs.html">$customs</a>);
<a name="l639"><span class="linenum"> 639</span></a>          }
<a name="l640"><span class="linenum"> 640</span></a>          return <a class="var it3069" onMouseOver="hilite(3069)" onMouseOut="lolite()" onClick="logVariable('changed')" href="../../_variables/changed.html">$changed</a>;
<a name="l641"><span class="linenum"> 641</span></a>      }
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>      <span class="comment">/**</span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">     * Converts function parameters into a record for storing in the JSON value.</span>
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">     *</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">     * @param string $extension File extension without dot, e.g. 'doc'</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment">     * @param string $mimetype MIME type e.g. 'application/msword'</span>
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">     * @param string $coreicon Core icon to use e.g. 'document'</span>
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">     * @param array $groups Array of group strings that this type belongs to</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">     * @param string $corestring Custom lang string name in mimetypes.php</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">     * @param string $customdescription Custom description (plain text/multilang)</span>
<a name="l652"><span class="linenum"> 652</span></a>  <span class="comment">     * @param bool $defaulticon True if this should be the default icon for the type</span>
<a name="l653"><span class="linenum"> 653</span></a>  <span class="comment">     * @return stdClass Record matching the parameters</span>
<a name="l654"><span class="linenum"> 654</span></a>  <span class="comment">     */</span>
<a name="l655"><span class="linenum"> 655</span></a>      protected static function <a class="function" onClick="logFunction('create_config_record')" href="../../_functions/create_config_record.html" onMouseOver="funcPopup(event,'create_config_record')">create_config_record</a>(<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>, <a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a>,
<a name="l656"><span class="linenum"> 656</span></a>              <a class="var it33525" onMouseOver="hilite(33525)" onMouseOut="lolite()" onClick="logVariable('coreicon')" href="../../_variables/coreicon.html">$coreicon</a>, array <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>, <a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('corestring')" href="../../_variables/corestring.html">$corestring</a>, <a class="var it30024" onMouseOver="hilite(30024)" onMouseOut="lolite()" onClick="logVariable('customdescription')" href="../../_variables/customdescription.html">$customdescription</a>, <a class="var it33524" onMouseOver="hilite(33524)" onMouseOut="lolite()" onClick="logVariable('defaulticon')" href="../../_variables/defaulticon.html">$defaulticon</a>) {
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment">        // Construct new entry.</span>
<a name="l658"><span class="linenum"> 658</span></a>          <a class="var it9902" onMouseOver="hilite(9902)" onMouseOut="lolite()" onClick="logVariable('newentry')" href="../../_variables/newentry.html">$newentry</a> = (object)array('extension' =&gt; (string)<a class="var it473" onMouseOver="hilite(473)" onMouseOut="lolite()" onClick="logVariable('extension')" href="../../_variables/extension.html">$extension</a>, 'type' =&gt; (string)<a class="var it2542" onMouseOver="hilite(2542)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a>,
<a name="l659"><span class="linenum"> 659</span></a>                  'icon' =&gt; (string)<a class="var it33525" onMouseOver="hilite(33525)" onMouseOut="lolite()" onClick="logVariable('coreicon')" href="../../_variables/coreicon.html">$coreicon</a>);
<a name="l660"><span class="linenum"> 660</span></a>          if (<a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>) {
<a name="l661"><span class="linenum"> 661</span></a>              if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>)) {
<a name="l662"><span class="linenum"> 662</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Groups must be an array');
<a name="l663"><span class="linenum"> 663</span></a>              }
<a name="l664"><span class="linenum"> 664</span></a>              foreach (<a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> as <a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>) {
<a name="l665"><span class="linenum"> 665</span></a>                  if (!<a class="phpfunction" onClick="logFunction('is_string')" href="../../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>)) {
<a name="l666"><span class="linenum"> 666</span></a>                      throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Groups must be an array of strings');
<a name="l667"><span class="linenum"> 667</span></a>                  }
<a name="l668"><span class="linenum"> 668</span></a>              }
<a name="l669"><span class="linenum"> 669</span></a>              <a class="var it9902" onMouseOver="hilite(9902)" onMouseOut="lolite()" onClick="logVariable('newentry')" href="../../_variables/newentry.html">$newentry</a>-&gt;<a onClick="logVariable('groups')" class="var it41701" onMouseOver="hilite(41701)" onMouseOut="lolite()" href="../../_variables/groups.html">groups</a> = <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>;
<a name="l670"><span class="linenum"> 670</span></a>          }
<a name="l671"><span class="linenum"> 671</span></a>          if (<a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('corestring')" href="../../_variables/corestring.html">$corestring</a>) {
<a name="l672"><span class="linenum"> 672</span></a>              <a class="var it9902" onMouseOver="hilite(9902)" onMouseOut="lolite()" onClick="logVariable('newentry')" href="../../_variables/newentry.html">$newentry</a>-&gt;<a onClick="logVariable('string')" class="var it41701" onMouseOver="hilite(41701)" onMouseOut="lolite()" href="../../_variables/string.html">string</a> = (string)<a class="var it2231" onMouseOver="hilite(2231)" onMouseOut="lolite()" onClick="logVariable('corestring')" href="../../_variables/corestring.html">$corestring</a>;
<a name="l673"><span class="linenum"> 673</span></a>          }
<a name="l674"><span class="linenum"> 674</span></a>          if (<a class="var it30024" onMouseOver="hilite(30024)" onMouseOut="lolite()" onClick="logVariable('customdescription')" href="../../_variables/customdescription.html">$customdescription</a>) {
<a name="l675"><span class="linenum"> 675</span></a>              <a class="var it9902" onMouseOver="hilite(9902)" onMouseOut="lolite()" onClick="logVariable('newentry')" href="../../_variables/newentry.html">$newentry</a>-&gt;<a onClick="logVariable('customdescription')" class="var it41701" onMouseOver="hilite(41701)" onMouseOut="lolite()" href="../../_variables/customdescription.html">customdescription</a> = (string)<a class="var it30024" onMouseOver="hilite(30024)" onMouseOut="lolite()" onClick="logVariable('customdescription')" href="../../_variables/customdescription.html">$customdescription</a>;
<a name="l676"><span class="linenum"> 676</span></a>          }
<a name="l677"><span class="linenum"> 677</span></a>          if (<a class="var it33524" onMouseOver="hilite(33524)" onMouseOut="lolite()" onClick="logVariable('defaulticon')" href="../../_variables/defaulticon.html">$defaulticon</a>) {
<a name="l678"><span class="linenum"> 678</span></a>              <a class="var it9902" onMouseOver="hilite(9902)" onMouseOut="lolite()" onClick="logVariable('newentry')" href="../../_variables/newentry.html">$newentry</a>-&gt;<a onClick="logVariable('defaulticon')" class="var it41701" onMouseOver="hilite(41701)" onMouseOut="lolite()" href="../../_variables/defaulticon.html">defaulticon</a> = true;
<a name="l679"><span class="linenum"> 679</span></a>          }
<a name="l680"><span class="linenum"> 680</span></a>          return <a class="var it9902" onMouseOver="hilite(9902)" onMouseOut="lolite()" onClick="logVariable('newentry')" href="../../_variables/newentry.html">$newentry</a>;
<a name="l681"><span class="linenum"> 681</span></a>      }
<a name="l682"><span class="linenum"> 682</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'set_config': ['set_config', 'Set a configuration value for this plugin ', [['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515],['lib','moodlelib.php',1331],['lib','enrollib.php',1152],['lib/editor/tinymce/classes','plugin.php',84]], 985],
'get_custom_types': ['get_custom_types', 'Gets custom types from config variable, after decoding the JSON if required. ', [['lib/classes','filetypes.php',376]], 5],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',2854]], 853],
'get_default_types': ['get_default_types', 'Gets default MIME types that are included as standard. ', [['lib/classes','filetypes.php',39]], 4],
'get_types': ['get_types', 'Return all repository types ordered by sortorder field first repository type in returnedarray[0], second repository type in returnedarray[1], ... ', [['repository','lib.php',689],['lib/classes','filetypes.php',277],['lib','csslib.php',2087]], 8],
'update_type': ['update_type', 'Updates an entry in the list of filetypes in config. ', [['lib/classes','filetypes.php',520]], 13],
'get_mimetypes_array': ['get_mimetypes_array', 'Returns a list of information about file types based on extensions. ', [['lib','filelib.php',1354]], 26],
'create_config_record': ['create_config_record', 'Converts function parameters into a record for storing in the JSON value. ', [['lib/classes','filetypes.php',643]], 1],
'revert_type_to_default': ['revert_type_to_default', 'Reverts a file type to the default. May only be called on types that have default values. This will undelete the type if necessary or set its values. If the type is already at default values, does nothing. ', [['lib/classes','filetypes.php',608]], 6],
'unset_config': ['unset_config', 'Removes a key from global configuration. ', [['lib','moodlelib.php',1499]], 89],
'reset_caches': ['reset_caches', 'Reset any caches ', [['lib/classes/update','checker.php',74],['lib/dml','moodle_database.php',1019],['lib/classes','string_manager_standard.php',594],['lib/classes','text.php',108],['lib/classes','string_manager.php',127],['repository','lib.php',2686],['lib','accesslib.php',5098],['lib','accesslib.php',5994],['lib/classes','string_manager_install.php',245],['lib/classes','filetypes.php',419],['mod/glossary/classes/local','concept_cache.php',49],['lib/classes','plugin_manager.php',95],['lib','filterlib.php',93],['lib/classes/update','deployer.php',66]], 101],
'delete_type': ['delete_type', 'Deletes a file type from the config list (or, for a standard one, marks it as deleted). ', [['lib/classes','filetypes.php',574]], 9],
'set_custom_types': ['set_custom_types', 'Sets the custom types into config variable, encoding into JSON. ', [['lib/classes','filetypes.php',396]], 3],
'add_type': ['add_type', 'Adds a new entry to the list of custom filetypes. ', [['lib/classes','filetypes.php',445]], 13],
'json_encode': ['json_encode', 'encodes an arbitrary variable into JSON format ', [['lib/minify/lib','FirePHP.php',1124]], 247],
'get_deleted_types': ['get_deleted_types', 'Gets the default types that have been deleted. Returns an array containing the defaults of all those types. ', [['lib/classes','filetypes.php',428]], 1],
'is_array': ['is_array', '', [], 1820],
'array_key_exists': ['array_key_exists', '', [], 1539],
'is_string': ['is_string', '', [], 680],
'array_values': ['array_values', '', [], 283],
'ksort': ['ksort', '', [], 158],
'defined': ['defined', '', [], 4098],
'is_bool': ['is_bool', '', [], 177]};
CLASS_DATA={
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',214]], 867]};
CONST_DATA={
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 554],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
