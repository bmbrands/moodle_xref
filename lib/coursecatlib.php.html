<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of coursecatlib.php</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='coursecatlib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/lib/</a> -> <a href="coursecatlib.php.source.html">coursecatlib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="coursecatlib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../_stats.html">Project Stats</a>]</p>
<p><b>Contains class coursecat reponsible for course category operations</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2013 Marina Glancy</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>3087 lines (122 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>1 time</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 3 classes</h3>
<div class="inset">
<p><b>coursecat::</b> (77 methods):<br>
&nbsp;&nbsp;<a href="#__set">__set</a>()<br>
&nbsp;&nbsp;<a href="#__get">__get</a>()<br>
&nbsp;&nbsp;<a href="#__isset">__isset</a>()<br>
&nbsp;&nbsp;<a href="#__unset">__unset</a>()<br>
&nbsp;&nbsp;<a href="#getiterator">getIterator</a>()<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#get">get</a>()<br>
&nbsp;&nbsp;<a href="#get_many">get_many</a>()<br>
&nbsp;&nbsp;<a href="#get_default">get_default</a>()<br>
&nbsp;&nbsp;<a href="#restore">restore</a>()<br>
&nbsp;&nbsp;<a href="#create">create</a>()<br>
&nbsp;&nbsp;<a href="#update">update</a>()<br>
&nbsp;&nbsp;<a href="#is_uservisible">is_uservisible</a>()<br>
&nbsp;&nbsp;<a href="#get_db_record">get_db_record</a>()<br>
&nbsp;&nbsp;<a href="#get_tree">get_tree</a>()<br>
&nbsp;&nbsp;<a href="#count_all">count_all</a>()<br>
&nbsp;&nbsp;<a href="#get_records">get_records</a>()<br>
&nbsp;&nbsp;<a href="#preload_course_contacts">preload_course_contacts</a>()<br>
&nbsp;&nbsp;<a href="#ensure_users_enrolled">ensure_users_enrolled</a>()<br>
&nbsp;&nbsp;<a href="#get_course_records">get_course_records</a>()<br>
&nbsp;&nbsp;<a href="#get_not_visible_children_ids">get_not_visible_children_ids</a>()<br>
&nbsp;&nbsp;<a href="#sort_records">sort_records</a>()<br>
&nbsp;&nbsp;<a href="#get_children">get_children</a>()<br>
&nbsp;&nbsp;<a href="#has_manage_capability_on_any">has_manage_capability_on_any</a>()<br>
&nbsp;&nbsp;<a href="#has_capability_on_any">has_capability_on_any</a>()<br>
&nbsp;&nbsp;<a href="#can_resort_any">can_resort_any</a>()<br>
&nbsp;&nbsp;<a href="#can_change_parent_any">can_change_parent_any</a>()<br>
&nbsp;&nbsp;<a href="#get_children_count">get_children_count</a>()<br>
&nbsp;&nbsp;<a href="#has_children">has_children</a>()<br>
&nbsp;&nbsp;<a href="#has_courses">has_courses</a>()<br>
&nbsp;&nbsp;<a href="#search_courses">search_courses</a>()<br>
&nbsp;&nbsp;<a href="#search_courses_count">search_courses_count</a>()<br>
&nbsp;&nbsp;<a href="#get_courses">get_courses</a>()<br>
&nbsp;&nbsp;<a href="#get_courses_count">get_courses_count</a>()<br>
&nbsp;&nbsp;<a href="#can_delete">can_delete</a>()<br>
&nbsp;&nbsp;<a href="#can_delete_full">can_delete_full</a>()<br>
&nbsp;&nbsp;<a href="#delete_full">delete_full</a>()<br>
&nbsp;&nbsp;<a href="#move_content_targets_list">move_content_targets_list</a>()<br>
&nbsp;&nbsp;<a href="#can_move_content_to">can_move_content_to</a>()<br>
&nbsp;&nbsp;<a href="#delete_move">delete_move</a>()<br>
&nbsp;&nbsp;<a href="#can_change_parent">can_change_parent</a>()<br>
&nbsp;&nbsp;<a href="#change_parent_raw">change_parent_raw</a>()<br>
&nbsp;&nbsp;<a href="#change_parent">change_parent</a>()<br>
&nbsp;&nbsp;<a href="#hide_raw">hide_raw</a>()<br>
&nbsp;&nbsp;<a href="#hide">hide</a>()<br>
&nbsp;&nbsp;<a href="#show_raw">show_raw</a>()<br>
&nbsp;&nbsp;<a href="#show">show</a>()<br>
&nbsp;&nbsp;<a href="#get_formatted_name">get_formatted_name</a>()<br>
&nbsp;&nbsp;<a href="#get_parents">get_parents</a>()<br>
&nbsp;&nbsp;<a href="#make_categories_list">make_categories_list</a>()<br>
&nbsp;&nbsp;<a href="#prepare_to_cache">prepare_to_cache</a>()<br>
&nbsp;&nbsp;<a href="#wake_from_cache">wake_from_cache</a>()<br>
&nbsp;&nbsp;<a href="#can_create_top_level_category">can_create_top_level_category</a>()<br>
&nbsp;&nbsp;<a href="#get_context">get_context</a>()<br>
&nbsp;&nbsp;<a href="#has_manage_capability">has_manage_capability</a>()<br>
&nbsp;&nbsp;<a href="#parent_has_manage_capability">parent_has_manage_capability</a>()<br>
&nbsp;&nbsp;<a href="#can_create_subcategory">can_create_subcategory</a>()<br>
&nbsp;&nbsp;<a href="#can_resort_subcategories">can_resort_subcategories</a>()<br>
&nbsp;&nbsp;<a href="#can_resort_courses">can_resort_courses</a>()<br>
&nbsp;&nbsp;<a href="#can_change_sortorder">can_change_sortorder</a>()<br>
&nbsp;&nbsp;<a href="#can_create_course">can_create_course</a>()<br>
&nbsp;&nbsp;<a href="#can_edit">can_edit</a>()<br>
&nbsp;&nbsp;<a href="#can_review_roles">can_review_roles</a>()<br>
&nbsp;&nbsp;<a href="#can_review_permissions">can_review_permissions</a>()<br>
&nbsp;&nbsp;<a href="#can_review_cohorts">can_review_cohorts</a>()<br>
&nbsp;&nbsp;<a href="#can_review_filters">can_review_filters</a>()<br>
&nbsp;&nbsp;<a href="#can_change_visibility">can_change_visibility</a>()<br>
&nbsp;&nbsp;<a href="#can_move_courses_out_of">can_move_courses_out_of</a>()<br>
&nbsp;&nbsp;<a href="#can_move_courses_into">can_move_courses_into</a>()<br>
&nbsp;&nbsp;<a href="#can_restore_courses_into">can_restore_courses_into</a>()<br>
&nbsp;&nbsp;<a href="#resort_subcategories">resort_subcategories</a>()<br>
&nbsp;&nbsp;<a href="#resort_categories_cleanup">resort_categories_cleanup</a>()<br>
&nbsp;&nbsp;<a href="#resort_courses">resort_courses</a>()<br>
&nbsp;&nbsp;<a href="#change_sortorder_by_one">change_sortorder_by_one</a>()<br>
&nbsp;&nbsp;<a href="#get_parent_coursecat">get_parent_coursecat</a>()<br>
&nbsp;&nbsp;<a href="#can_request_course">can_request_course</a>()<br>
&nbsp;&nbsp;<a href="#can_approve_course_requests">can_approve_course_requests</a>()<br>
</p>
<p><b>course_in_list::</b> (23 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#has_summary">has_summary</a>()<br>
&nbsp;&nbsp;<a href="#has_course_contacts">has_course_contacts</a>()<br>
&nbsp;&nbsp;<a href="#get_course_contacts">get_course_contacts</a>()<br>
&nbsp;&nbsp;<a href="#has_course_overviewfiles">has_course_overviewfiles</a>()<br>
&nbsp;&nbsp;<a href="#get_course_overviewfiles">get_course_overviewfiles</a>()<br>
&nbsp;&nbsp;<a href="#__isset">__isset</a>()<br>
&nbsp;&nbsp;<a href="#__get">__get</a>()<br>
&nbsp;&nbsp;<a href="#__unset">__unset</a>()<br>
&nbsp;&nbsp;<a href="#__set">__set</a>()<br>
&nbsp;&nbsp;<a href="#getiterator">getIterator</a>()<br>
&nbsp;&nbsp;<a href="#get_formatted_name">get_formatted_name</a>()<br>
&nbsp;&nbsp;<a href="#get_formatted_fullname">get_formatted_fullname</a>()<br>
&nbsp;&nbsp;<a href="#get_formatted_shortname">get_formatted_shortname</a>()<br>
&nbsp;&nbsp;<a href="#can_access">can_access</a>()<br>
&nbsp;&nbsp;<a href="#can_edit">can_edit</a>()<br>
&nbsp;&nbsp;<a href="#can_change_visibility">can_change_visibility</a>()<br>
&nbsp;&nbsp;<a href="#get_context">get_context</a>()<br>
&nbsp;&nbsp;<a href="#is_uservisible">is_uservisible</a>()<br>
&nbsp;&nbsp;<a href="#can_review_enrolments">can_review_enrolments</a>()<br>
&nbsp;&nbsp;<a href="#can_delete">can_delete</a>()<br>
&nbsp;&nbsp;<a href="#can_backup">can_backup</a>()<br>
&nbsp;&nbsp;<a href="#can_restore">can_restore</a>()<br>
</p>
<p><b>coursecat_sortable_records::</b> (2 methods):<br>
&nbsp;&nbsp;<a href="#sort">sort</a>()<br>
&nbsp;&nbsp;<a href="#sort_by_many_fields">sort_by_many_fields</a>()<br>
</p>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="coursecat"><b>coursecat</b></a>&nbsp;&nbsp;- <a href="../_classes/coursecat.html"><small>X-Ref</small></a>
</p>
<b>Class to store, cache, render and manage course category<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__set" onClick="logFunction('__set', 'coursecatlib.php.source.html#l124')" href="coursecatlib.php.source.html#l124">__set</a>(<a href="../_variables/name.html">$name</a>, <a href="../_variables/value.html">$value</a>)&nbsp;&nbsp;
<a href="../_functions/__set.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Magic setter method, we do not want anybody to modify properties from the outside<BR>
</b><BR><b>param:</b> string $name<br>
<b>param:</b> mixed $value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__get" onClick="logFunction('__get', 'coursecatlib.php.source.html#l134')" href="coursecatlib.php.source.html#l134">__get</a>(<a href="../_variables/name.html">$name</a>)&nbsp;&nbsp;
<a href="../_functions/__get.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Magic method getter, redirects to read only values. Queries from DB the fields that were not cached<BR>
</b><BR><b>param:</b> string $name<br>
<b>return:</b> mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__isset" onClick="logFunction('__isset', 'coursecatlib.php.source.html#l158')" href="coursecatlib.php.source.html#l158">__isset</a>(<a href="../_variables/name.html">$name</a>)&nbsp;&nbsp;
<a href="../_functions/__isset.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Full support for isset on our magic read only properties.<BR>
</b><BR><b>param:</b> string $name<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__unset" onClick="logFunction('__unset', 'coursecatlib.php.source.html#l171')" href="coursecatlib.php.source.html#l171">__unset</a>(<a href="../_variables/name.html">$name</a>)&nbsp;&nbsp;
<a href="../_functions/__unset.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>All properties are read only, sorry.<BR>
</b><BR><b>param:</b> string $name<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="getiterator" onClick="logFunction('getiterator', 'coursecatlib.php.source.html#l180')" href="coursecatlib.php.source.html#l180">getIterator</a>()&nbsp;&nbsp;
<a href="../_functions/getiterator.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create an iterator because magic vars can't be seen by 'foreach'.<BR>
</b><BR>implementing method from interface IteratorAggregate<BR>
<BR>
<b>return:</b> ArrayIterator<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'coursecatlib.php.source.html#l197')" href="coursecatlib.php.source.html#l197">__construct</a>(stdClass <a href="../_variables/record.html">$record</a>, <a href="../_variables/fromcache.html">$fromcache</a> = false)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR>Constructor is protected, use coursecat::get($id) to retrieve category<BR>
<BR>
<b>param:</b> stdClass $record record from DB (may not contain all fields)<br>
<b>param:</b> bool $fromcache whether it is being restored from cache<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get" onClick="logFunction('get', 'coursecatlib.php.source.html#l215')" href="coursecatlib.php.source.html#l215">get</a>(<a href="../_variables/id.html">$id</a>, <a href="../_variables/strictness.html">$strictness</a> = MUST_EXIST, <a href="../_variables/alwaysreturnhidden.html">$alwaysreturnhidden</a> = false)&nbsp;&nbsp;
<a href="../_functions/get.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns coursecat object for requested category<BR>
</b><BR>If category is not visible to user it is treated as non existing<BR>
unless $alwaysreturnhidden is set to true<BR>
<BR>
If id is 0, the pseudo object for root category is returned (convenient<BR>
for calling other functions such as get_children())<BR>
<BR>
<b>param:</b> int $id category id<br>
<b>param:</b> int $strictness whether to throw an exception (MUST_EXIST) or<br>
<b>param:</b> bool $alwaysreturnhidden set to true if you want an object to be<br>
<b>return:</b> null|coursecat<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_many" onClick="logFunction('get_many', 'coursecatlib.php.source.html#l267')" href="coursecatlib.php.source.html#l267">get_many</a>(array <a href="../_variables/ids.html">$ids</a>)&nbsp;&nbsp;
<a href="../_functions/get_many.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Load many coursecat objects.<BR>
</b><BR><b>param:</b> array $ids An array of category ID's to load.<br>
<b>return:</b> coursecat[]<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_default" onClick="logFunction('get_default', 'coursecatlib.php.source.html#l297')" href="coursecatlib.php.source.html#l297">get_default</a>()&nbsp;&nbsp;
<a href="../_functions/get_default.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the first found category<BR>
</b><BR>Note that if there are no categories visible to the current user on the first level,<BR>
the invisible category may be returned<BR>
<BR>
<b>return:</b> coursecat<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="restore" onClick="logFunction('restore', 'coursecatlib.php.source.html#l316')" href="coursecatlib.php.source.html#l316">restore</a>()&nbsp;&nbsp;
<a href="../_functions/restore.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Restores the object after it has been externally modified in DB for example<BR>
during {@link fix_course_sortorder()}<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create" onClick="logFunction('create', 'coursecatlib.php.source.html#l328')" href="coursecatlib.php.source.html#l328">create</a>(<a href="../_variables/data.html">$data</a>, <a href="../_variables/editoroptions.html">$editoroptions</a> = null)&nbsp;&nbsp;
<a href="../_functions/create.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates a new category either from form data or from raw data<BR>
</b><BR>Please note that this function does not verify access control.<BR>
<BR>
Exception is thrown if name is missing or idnumber is duplicating another one in the system.<BR>
<BR>
Category visibility is inherited from parent unless $data-&gt;visible = 0 is specified<BR>
<BR>
<b>param:</b> array|stdClass $data<br>
<b>param:</b> array $editoroptions if specified, the data is considered to be<br>
<b>return:</b> coursecat<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update" onClick="logFunction('update', 'coursecatlib.php.source.html#l441')" href="coursecatlib.php.source.html#l441">update</a>(<a href="../_variables/data.html">$data</a>, <a href="../_variables/editoroptions.html">$editoroptions</a> = null)&nbsp;&nbsp;
<a href="../_functions/update.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Updates the record with either form data or raw data<BR>
</b><BR>Please note that this function does not verify access control.<BR>
<BR>
This function calls coursecat::change_parent_raw if field 'parent' is updated.<BR>
It also calls coursecat::hide_raw or coursecat::show_raw if 'visible' is updated.<BR>
Visibility is changed first and then parent is changed. This means that<BR>
if parent category is hidden, the current category will become hidden<BR>
too and it may overwrite whatever was set in field 'visible'.<BR>
<BR>
Note that fields 'path' and 'depth' can not be updated manually<BR>
Also coursecat::update() can not directly update the field 'sortoder'<BR>
<BR>
<b>param:</b> array|stdClass $data<br>
<b>param:</b> array $editoroptions if specified, the data is considered to be<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_uservisible" onClick="logFunction('is_uservisible', 'coursecatlib.php.source.html#l545')" href="coursecatlib.php.source.html#l545">is_uservisible</a>()&nbsp;&nbsp;
<a href="../_functions/is_uservisible.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if this course category is visible to current user<BR>
</b><BR>Please note that methods coursecat::get (without 3rd argumet),<BR>
coursecat::get_children(), etc. return only visible categories so it is<BR>
usually not needed to call this function outside of this class<BR>
<BR>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_db_record" onClick="logFunction('get_db_record', 'coursecatlib.php.source.html#l559')" href="coursecatlib.php.source.html#l559">get_db_record</a>()&nbsp;&nbsp;
<a href="../_functions/get_db_record.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the complete corresponding record from DB table course_categories<BR>
</b><BR>Mostly used in deprecated functions<BR>
<BR>
<b>return:</b> stdClass<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_tree" onClick="logFunction('get_tree', 'coursecatlib.php.source.html#l575')" href="coursecatlib.php.source.html#l575">get_tree</a>(<a href="../_variables/id.html">$id</a>)&nbsp;&nbsp;
<a href="../_functions/get_tree.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the entry from categories tree and makes sure the application-level tree cache is built<BR>
</b><BR>The following keys can be requested:<BR>
<BR>
'countall' - total number of categories in the system (always present)<BR>
0 - array of ids of top-level categories (always present)<BR>
'0i' - array of ids of top-level categories that have visible=0 (always present but may be empty array)<BR>
$id (int) - array of ids of categories that are direct children of category with id $id. If<BR>
category with id $id does not exist returns false. If category has no children returns empty array<BR>
$id.'i' - array of ids of children categories that have visible=0<BR>
<BR>
<b>param:</b> int|string $id<br>
<b>return:</b> mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="count_all" onClick="logFunction('count_all', 'coursecatlib.php.source.html#l644')" href="coursecatlib.php.source.html#l644">count_all</a>()&nbsp;&nbsp;
<a href="../_functions/count_all.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns number of ALL categories in the system regardless if<BR>
they are visible to current user or not<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_records" onClick="logFunction('get_records', 'coursecatlib.php.source.html#l654')" href="coursecatlib.php.source.html#l654">get_records</a>(<a href="../_variables/whereclause.html">$whereclause</a>, <a href="../_variables/params.html">$params</a>)&nbsp;&nbsp;
<a href="../_functions/get_records.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Retrieves number of records from course_categories table<BR>
</b><BR>Only cached fields are retrieved. Records are ready for preloading context<BR>
<BR>
<b>param:</b> string $whereclause<br>
<b>param:</b> array $params<br>
<b>return:</b> array array of stdClass objects<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="preload_course_contacts" onClick="logFunction('preload_course_contacts', 'coursecatlib.php.source.html#l676')" href="coursecatlib.php.source.html#l676">preload_course_contacts</a>(&amp;<a href="../_variables/courses.html">$courses</a>)&nbsp;&nbsp;
<a href="../_functions/preload_course_contacts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Given list of DB records from table course populates each record with list of users with course contact roles<BR>
</b><BR>This function fills the courses with raw information as {@link get_role_users()} would do.<BR>
See also {@link course_in_list::get_course_contacts()} for more readable return<BR>
<BR>
$courses[$i]-&gt;managers = array(<BR>
$roleassignmentid =&gt; $roleuser,<BR>
...<BR>
);<BR>
<BR>
where $roleuser is an stdClass with the following properties:<BR>
<BR>
$roleuser-&gt;raid - role assignment id<BR>
$roleuser-&gt;id - user id<BR>
$roleuser-&gt;username<BR>
$roleuser-&gt;firstname<BR>
$roleuser-&gt;lastname<BR>
$roleuser-&gt;rolecoursealias<BR>
$roleuser-&gt;rolename<BR>
$roleuser-&gt;sortorder - role sortorder<BR>
$roleuser-&gt;roleid<BR>
$roleuser-&gt;roleshortname<BR>
<BR>
<b>param:</b> array $courses<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="ensure_users_enrolled" onClick="logFunction('ensure_users_enrolled', 'coursecatlib.php.source.html#l798')" href="coursecatlib.php.source.html#l798">ensure_users_enrolled</a>(<a href="../_variables/courseusers.html">$courseusers</a>)&nbsp;&nbsp;
<a href="../_functions/ensure_users_enrolled.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Verify user enrollments for multiple course-user combinations<BR>
</b><BR><b>param:</b> array $courseusers array where keys are course ids and values are array<br>
<b>return:</b> array same structure as input array but values list only users from input<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_course_records" onClick="logFunction('get_course_records', 'coursecatlib.php.source.html#l853')" href="coursecatlib.php.source.html#l853">get_course_records</a>(<a href="../_variables/whereclause.html">$whereclause</a>, <a href="../_variables/params.html">$params</a>, <a href="../_variables/options.html">$options</a>, <a href="../_variables/checkvisibility.html">$checkvisibility</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_course_records.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Retrieves number of records from course table<BR>
</b><BR>Not all fields are retrieved. Records are ready for preloading context<BR>
<BR>
<b>param:</b> string $whereclause<br>
<b>param:</b> array $params<br>
<b>param:</b> array $options may indicate that summary and/or coursecontacts need to be retrieved<br>
<b>param:</b> bool $checkvisibility if true, capability 'moodle/course:viewhiddencourses' will be checked<br>
<b>return:</b> array array of stdClass objects<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_not_visible_children_ids" onClick="logFunction('get_not_visible_children_ids', 'coursecatlib.php.source.html#l907')" href="coursecatlib.php.source.html#l907">get_not_visible_children_ids</a>()&nbsp;&nbsp;
<a href="../_functions/get_not_visible_children_ids.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns array of ids of children categories that current user can not see<BR>
</b><BR>This data is cached in user session cache<BR>
<BR>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sort_records" onClick="logFunction('sort_records', 'coursecatlib.php.source.html#l943')" href="coursecatlib.php.source.html#l943">sort_records</a>(&amp;<a href="../_variables/records.html">$records</a>, <a href="../_variables/sortfields.html">$sortfields</a>)&nbsp;&nbsp;
<a href="../_functions/sort_records.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sorts list of records by several fields<BR>
</b><BR><b>param:</b> array $records array of stdClass objects<br>
<b>param:</b> array $sortfields assoc array where key is the field to sort and value is 1 for asc or -1 for desc<br>
<b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_children" onClick="logFunction('get_children', 'coursecatlib.php.source.html#l981')" href="coursecatlib.php.source.html#l981">get_children</a>(<a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/get_children.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns array of children categories visible to the current user<BR>
</b><BR><b>param:</b> array $options options for retrieving children<br>
<b>return:</b> coursecat[] Array of coursecat objects indexed by category id<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_manage_capability_on_any" onClick="logFunction('has_manage_capability_on_any', 'coursecatlib.php.source.html#l1069')" href="coursecatlib.php.source.html#l1069">has_manage_capability_on_any</a>()&nbsp;&nbsp;
<a href="../_functions/has_manage_capability_on_any.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user has the manage capability on any category.<BR>
</b><BR>This method uses the coursecat cache and an entry `has_manage_capability` to speed up<BR>
calls to this method.<BR>
<BR>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_capability_on_any" onClick="logFunction('has_capability_on_any', 'coursecatlib.php.source.html#l1081')" href="coursecatlib.php.source.html#l1081">has_capability_on_any</a>(<a href="../_variables/capabilities.html">$capabilities</a>)&nbsp;&nbsp;
<a href="../_functions/has_capability_on_any.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if the user has at least one of the given capabilities on any category.<BR>
</b><BR><b>param:</b> array|string $capabilities One or more capabilities to check. Check made is an OR.<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_resort_any" onClick="logFunction('can_resort_any', 'coursecatlib.php.source.html#l1149')" href="coursecatlib.php.source.html#l1149">can_resort_any</a>()&nbsp;&nbsp;
<a href="../_functions/can_resort_any.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user can resort any category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_change_parent_any" onClick="logFunction('can_change_parent_any', 'coursecatlib.php.source.html#l1157')" href="coursecatlib.php.source.html#l1157">can_change_parent_any</a>()&nbsp;&nbsp;
<a href="../_functions/can_change_parent_any.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user can change the parent of any category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_children_count" onClick="logFunction('get_children_count', 'coursecatlib.php.source.html#l1165')" href="coursecatlib.php.source.html#l1165">get_children_count</a>()&nbsp;&nbsp;
<a href="../_functions/get_children_count.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns number of subcategories visible to the current user<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_children" onClick="logFunction('has_children', 'coursecatlib.php.source.html#l1176')" href="coursecatlib.php.source.html#l1176">has_children</a>()&nbsp;&nbsp;
<a href="../_functions/has_children.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the category has ANY children, including those not visible to the user<BR>
</b><BR><b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_courses" onClick="logFunction('has_courses', 'coursecatlib.php.source.html#l1186')" href="coursecatlib.php.source.html#l1186">has_courses</a>()&nbsp;&nbsp;
<a href="../_functions/has_courses.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the category has courses in it (count does not include courses<BR>
in child categories)<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="search_courses" onClick="logFunction('search_courses', 'coursecatlib.php.source.html#l1198')" href="coursecatlib.php.source.html#l1198">search_courses</a>(<a href="../_variables/search.html">$search</a>, <a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/search_courses.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Searches courses<BR>
</b><BR>List of found course ids is cached for 10 minutes. Cache may be purged prior<BR>
to this when somebody edits courses or categories, however it is very<BR>
difficult to keep track of all possible changes that may affect list of courses.<BR>
<BR>
<b>param:</b> array $search contains search criterias, such as:<br>
<b>param:</b> array $options display options, same as in get_courses() except 'recursive' is ignored -<br>
<b>return:</b> course_in_list[]<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="search_courses_count" onClick="logFunction('search_courses_count', 'coursecatlib.php.source.html#l1304')" href="coursecatlib.php.source.html#l1304">search_courses_count</a>(<a href="../_variables/search.html">$search</a>, <a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/search_courses_count.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns number of courses in the search results<BR>
</b><BR>It is recommended to call this function after {@link coursecat::search_courses()}<BR>
and not before because only course ids are cached. Otherwise search_courses() may<BR>
perform extra DB queries.<BR>
<BR>
<b>param:</b> array $search search criteria, see method search_courses() for more details<br>
<b>param:</b> array $options display options. They do not affect the result but<br>
<b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_courses" onClick="logFunction('get_courses', 'coursecatlib.php.source.html#l1332')" href="coursecatlib.php.source.html#l1332">get_courses</a>(<a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/get_courses.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Retrieves the list of courses accessible by user<BR>
</b><BR>Not all information is cached, try to avoid calling this method<BR>
twice in the same request.<BR>
<BR>
The following fields are always retrieved:<BR>
- id, visible, fullname, shortname, idnumber, category, sortorder<BR>
<BR>
If you plan to use properties/methods course_in_list::$summary and/or<BR>
course_in_list::get_course_contacts()<BR>
you can preload this information using appropriate 'options'. Otherwise<BR>
they will be retrieved from DB on demand and it may end with bigger DB load.<BR>
<BR>
Note that method course_in_list::has_summary() will not perform additional<BR>
DB queries even if $options['summary'] is not specified<BR>
<BR>
List of found course ids is cached for 10 minutes. Cache may be purged prior<BR>
to this when somebody edits courses or categories, however it is very<BR>
difficult to keep track of all possible changes that may affect list of courses.<BR>
<BR>
<b>param:</b> array $options options for retrieving children<br>
<b>return:</b> course_in_list[]<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_courses_count" onClick="logFunction('get_courses_count', 'coursecatlib.php.source.html#l1455')" href="coursecatlib.php.source.html#l1455">get_courses_count</a>(<a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/get_courses_count.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns number of courses visible to the user<BR>
</b><BR><b>param:</b> array $options similar to get_courses() except some options do not affect<br>
<b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_delete" onClick="logFunction('can_delete', 'coursecatlib.php.source.html#l1478')" href="coursecatlib.php.source.html#l1478">can_delete</a>()&nbsp;&nbsp;
<a href="../_functions/can_delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user is able to delete this category.<BR>
</b><BR>Note if this category contains any courses this isn't a full check, it will need to be accompanied by a call to either<BR>
{@link coursecat::can_delete_full()} or {@link coursecat::can_move_content_to()} depending upon what the user wished to do.<BR>
<BR>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_delete_full" onClick="logFunction('can_delete_full', 'coursecatlib.php.source.html#l1493')" href="coursecatlib.php.source.html#l1493">can_delete_full</a>()&nbsp;&nbsp;
<a href="../_functions/can_delete_full.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if user can delete current category and all its contents<BR>
</b><BR>To be able to delete course category the user must have permission<BR>
'moodle/category:manage' in ALL child course categories AND<BR>
be able to delete all courses<BR>
<BR>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_full" onClick="logFunction('delete_full', 'coursecatlib.php.source.html#l1548')" href="coursecatlib.php.source.html#l1548">delete_full</a>(<a href="../_variables/showfeedback.html">$showfeedback</a> = true)&nbsp;&nbsp;
<a href="../_functions/delete_full.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Recursively delete category including all subcategories and courses<BR>
</b><BR>Function {@link coursecat::can_delete_full()} MUST be called prior<BR>
to calling this function because there is no capability check<BR>
inside this function<BR>
<BR>
<b>param:</b> boolean $showfeedback display some notices<br>
<b>return:</b> array return deleted courses<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="move_content_targets_list" onClick="logFunction('move_content_targets_list', 'coursecatlib.php.source.html#l1621')" href="coursecatlib.php.source.html#l1621">move_content_targets_list</a>()&nbsp;&nbsp;
<a href="../_functions/move_content_targets_list.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if user can delete this category and move content (courses, subcategories and questions)<BR>
to another category. If yes returns the array of possible target categories names<BR>
</b><BR>If user can not manage this category or it is completely empty - empty array will be returned<BR>
<BR>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_move_content_to" onClick="logFunction('can_move_content_to', 'coursecatlib.php.source.html#l1658')" href="coursecatlib.php.source.html#l1658">can_move_content_to</a>(<a href="../_variables/newcatid.html">$newcatid</a>)&nbsp;&nbsp;
<a href="../_functions/can_move_content_to.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if user has capability to move all category content to the new parent before<BR>
removing this category<BR>
</b><BR><b>param:</b> int $newcatid<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_move" onClick="logFunction('delete_move', 'coursecatlib.php.source.html#l1690')" href="coursecatlib.php.source.html#l1690">delete_move</a>(<a href="../_variables/newparentid.html">$newparentid</a>, <a href="../_variables/showfeedback.html">$showfeedback</a> = false)&nbsp;&nbsp;
<a href="../_functions/delete_move.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Deletes a category and moves all content (children, courses and questions) to the new parent<BR>
</b><BR>Note that this function does not check capabilities, {@link coursecat::can_move_content_to()}<BR>
must be called prior<BR>
<BR>
<b>param:</b> int $newparentid<br>
<b>param:</b> bool $showfeedback<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_change_parent" onClick="logFunction('can_change_parent', 'coursecatlib.php.source.html#l1782')" href="coursecatlib.php.source.html#l1782">can_change_parent</a>(<a href="../_variables/newparentcat.html">$newparentcat</a>)&nbsp;&nbsp;
<a href="../_functions/can_change_parent.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if user can move current category to the new parent<BR>
</b><BR>This checks if new parent category exists, user has manage cap there<BR>
and new parent is not a child of this category<BR>
<BR>
<b>param:</b> int|stdClass|coursecat $newparentcat<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="change_parent_raw" onClick="logFunction('change_parent_raw', 'coursecatlib.php.source.html#l1814')" href="coursecatlib.php.source.html#l1814">change_parent_raw</a>(coursecat <a href="../_variables/newparentcat.html">$newparentcat</a>)&nbsp;&nbsp;
<a href="../_functions/change_parent_raw.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Moves the category under another parent category. All associated contexts are moved as well<BR>
</b><BR>This is protected function, use change_parent() or update() from outside of this class<BR>
<BR>
<b>param:</b> coursecat $newparentcat<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="change_parent" onClick="logFunction('change_parent', 'coursecatlib.php.source.html#l1864')" href="coursecatlib.php.source.html#l1864">change_parent</a>(<a href="../_variables/newparentcat.html">$newparentcat</a>)&nbsp;&nbsp;
<a href="../_functions/change_parent.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Efficiently moves a category - NOTE that this can have<BR>
a huge impact access-control-wise...<BR>
</b><BR>Note that this function does not check capabilities.<BR>
<BR>
Example of usage:<BR>
$coursecat = coursecat::get($categoryid);<BR>
if ($coursecat-&gt;can_change_parent($newparentcatid)) {<BR>
$coursecat-&gt;change_parent($newparentcatid);<BR>
}<BR>
<BR>
This function does not update field course_categories.timemodified<BR>
If you want to update timemodified, use<BR>
$coursecat-&gt;update(array('parent' =&gt; $newparentcat));<BR>
<BR>
<b>param:</b> int|stdClass|coursecat $newparentcat<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hide_raw" onClick="logFunction('hide_raw', 'coursecatlib.php.source.html#l1904')" href="coursecatlib.php.source.html#l1904">hide_raw</a>(<a href="../_variables/visibleold.html">$visibleold</a> = 0)&nbsp;&nbsp;
<a href="../_functions/hide_raw.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Hide course category and child course and subcategories<BR>
</b><BR>If this category has changed the parent and is moved under hidden<BR>
category we will want to store it's current visibility state in<BR>
the field 'visibleold'. If admin clicked 'hide' for this particular<BR>
category, the field 'visibleold' should become 0.<BR>
<BR>
All subcategories and courses will have their current visibility in the field visibleold<BR>
<BR>
This is protected function, use hide() or update() from outside of this class<BR>
<BR>
<b>param:</b> int $visibleold value to set in field $visibleold for this category<br>
<b>return:</b> bool whether changes have been made and caches need to be purged afterwards<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="hide" onClick="logFunction('hide', 'coursecatlib.php.source.html#l1954')" href="coursecatlib.php.source.html#l1954">hide</a>()&nbsp;&nbsp;
<a href="../_functions/hide.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Hide course category and child course and subcategories<BR>
</b><BR>Note that there is no capability check inside this function<BR>
<BR>
This function does not update field course_categories.timemodified<BR>
If you want to update timemodified, use<BR>
$coursecat-&gt;update(array('visible' =&gt; 0));<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="show_raw" onClick="logFunction('show_raw', 'coursecatlib.php.source.html#l1976')" href="coursecatlib.php.source.html#l1976">show_raw</a>()&nbsp;&nbsp;
<a href="../_functions/show_raw.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Show course category and restores visibility for child course and subcategories<BR>
</b><BR>Note that there is no capability check inside this function<BR>
<BR>
This is protected function, use show() or update() from outside of this class<BR>
<BR>
<b>return:</b> bool whether changes have been made and caches need to be purged afterwards<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="show" onClick="logFunction('show', 'coursecatlib.php.source.html#l2013')" href="coursecatlib.php.source.html#l2013">show</a>()&nbsp;&nbsp;
<a href="../_functions/show.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Show course category and restores visibility for child course and subcategories<BR>
</b><BR>Note that there is no capability check inside this function<BR>
<BR>
This function does not update field course_categories.timemodified<BR>
If you want to update timemodified, use<BR>
$coursecat-&gt;update(array('visible' =&gt; 1));<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_formatted_name" onClick="logFunction('get_formatted_name', 'coursecatlib.php.source.html#l2035')" href="coursecatlib.php.source.html#l2035">get_formatted_name</a>(<a href="../_variables/options.html">$options</a> = array()&nbsp;&nbsp;
<a href="../_functions/get_formatted_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns name of the category formatted as a string<BR>
</b><BR><b>param:</b> array $options formatting options other than context<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_parents" onClick="logFunction('get_parents', 'coursecatlib.php.source.html#l2050')" href="coursecatlib.php.source.html#l2050">get_parents</a>()&nbsp;&nbsp;
<a href="../_functions/get_parents.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns ids of all parents of the category. Last element in the return array is the direct parent<BR>
</b><BR>For example, if you have a tree of categories like:<BR>
Miscellaneous (id = 1)<BR>
Subcategory (id = 2)<BR>
Sub-subcategory (id = 4)<BR>
Other category (id = 3)<BR>
<BR>
coursecat::get(1)-&gt;get_parents() == array()<BR>
coursecat::get(2)-&gt;get_parents() == array(1)<BR>
coursecat::get(4)-&gt;get_parents() == array(1, 2);<BR>
<BR>
Note that this method does not check if all parents are accessible by current user<BR>
<BR>
<b>return:</b> array of category ids<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="make_categories_list" onClick="logFunction('make_categories_list', 'coursecatlib.php.source.html#l2073')" href="coursecatlib.php.source.html#l2073">make_categories_list</a>(<a href="../_variables/requiredcapability.html">$requiredcapability</a> = '', <a href="../_variables/excludeid.html">$excludeid</a> = 0, <a href="../_variables/separator.html">$separator</a> = ' / ')&nbsp;&nbsp;
<a href="../_functions/make_categories_list.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function returns a nice list representing category tree<BR>
for display or to use in a form &lt;select&gt; element<BR>
</b><BR>List is cached for 10 minutes<BR>
<BR>
For example, if you have a tree of categories like:<BR>
Miscellaneous (id = 1)<BR>
Subcategory (id = 2)<BR>
Sub-subcategory (id = 4)<BR>
Other category (id = 3)<BR>
Then after calling this function you will have<BR>
array(1 =&gt; 'Miscellaneous',<BR>
2 =&gt; 'Miscellaneous / Subcategory',<BR>
4 =&gt; 'Miscellaneous / Subcategory / Sub-subcategory',<BR>
3 =&gt; 'Other category');<BR>
<BR>
If you specify $requiredcapability, then only categories where the current<BR>
user has that capability will be added to $list.<BR>
If you only have $requiredcapability in a child category, not the parent,<BR>
then the child catgegory will still be included.<BR>
<BR>
If you specify the option $excludeid, then that category, and all its children,<BR>
are omitted from the tree. This is useful when you are doing something like<BR>
moving categories, where you do not want to allow people to move a category<BR>
to be the child of itself.<BR>
<BR>
See also {@link make_categories_options()}<BR>
<BR>
<b>param:</b> string/array $requiredcapability if given, only categories where the current<br>
<b>param:</b> integer $excludeid Exclude this category and its children from the lists built.<br>
<b>param:</b> string $separator string to use as a separator between parent and child category. Default ' / '<br>
<b>return:</b> array of strings<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="prepare_to_cache" onClick="logFunction('prepare_to_cache', 'coursecatlib.php.source.html#l2196')" href="coursecatlib.php.source.html#l2196">prepare_to_cache</a>()&nbsp;&nbsp;
<a href="../_functions/prepare_to_cache.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prepares the object for caching. Works like the __sleep method.<BR>
</b><BR>implementing method from interface cacheable_object<BR>
<BR>
<b>return:</b> array ready to be cached<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="wake_from_cache" onClick="logFunction('wake_from_cache', 'coursecatlib.php.source.html#l2219')" href="coursecatlib.php.source.html#l2219">wake_from_cache</a>(<a href="../_variables/a.html">$a</a>)&nbsp;&nbsp;
<a href="../_functions/wake_from_cache.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Takes the data provided by prepare_to_cache and reinitialises an instance of the associated from it.<BR>
</b><BR>implementing method from interface cacheable_object<BR>
<BR>
<b>param:</b> array $a<br>
<b>return:</b> coursecat<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_create_top_level_category" onClick="logFunction('can_create_top_level_category', 'coursecatlib.php.source.html#l2247')" href="coursecatlib.php.source.html#l2247">can_create_top_level_category</a>()&nbsp;&nbsp;
<a href="../_functions/can_create_top_level_category.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user is able to create a top level category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context" onClick="logFunction('get_context', 'coursecatlib.php.source.html#l2255')" href="coursecatlib.php.source.html#l2255">get_context</a>()&nbsp;&nbsp;
<a href="../_functions/get_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the category context.<BR>
</b><BR><b>return:</b> context_coursecat<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_manage_capability" onClick="logFunction('has_manage_capability', 'coursecatlib.php.source.html#l2268')" href="coursecatlib.php.source.html#l2268">has_manage_capability</a>()&nbsp;&nbsp;
<a href="../_functions/has_manage_capability.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user is able to manage this category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="parent_has_manage_capability" onClick="logFunction('parent_has_manage_capability', 'coursecatlib.php.source.html#l2279')" href="coursecatlib.php.source.html#l2279">parent_has_manage_capability</a>()&nbsp;&nbsp;
<a href="../_functions/parent_has_manage_capability.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user has the manage capability on the parent category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_create_subcategory" onClick="logFunction('can_create_subcategory', 'coursecatlib.php.source.html#l2287')" href="coursecatlib.php.source.html#l2287">can_create_subcategory</a>()&nbsp;&nbsp;
<a href="../_functions/can_create_subcategory.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user can create subcategories of this category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_resort_subcategories" onClick="logFunction('can_resort_subcategories', 'coursecatlib.php.source.html#l2295')" href="coursecatlib.php.source.html#l2295">can_resort_subcategories</a>()&nbsp;&nbsp;
<a href="../_functions/can_resort_subcategories.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user can resort this categories sub categories and courses.<BR>
Must have manage capability and be able to see all subcategories.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_resort_courses" onClick="logFunction('can_resort_courses', 'coursecatlib.php.source.html#l2304')" href="coursecatlib.php.source.html#l2304">can_resort_courses</a>()&nbsp;&nbsp;
<a href="../_functions/can_resort_courses.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user can resort the courses within this category.<BR>
Must have manage capability and be able to see all courses.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_change_sortorder" onClick="logFunction('can_change_sortorder', 'coursecatlib.php.source.html#l2313')" href="coursecatlib.php.source.html#l2313">can_change_sortorder</a>()&nbsp;&nbsp;
<a href="../_functions/can_change_sortorder.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true of the user can change the sortorder of this category (resort in the parent category)<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_create_course" onClick="logFunction('can_create_course', 'coursecatlib.php.source.html#l2321')" href="coursecatlib.php.source.html#l2321">can_create_course</a>()&nbsp;&nbsp;
<a href="../_functions/can_create_course.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user can create a course within this category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_edit" onClick="logFunction('can_edit', 'coursecatlib.php.source.html#l2329')" href="coursecatlib.php.source.html#l2329">can_edit</a>()&nbsp;&nbsp;
<a href="../_functions/can_edit.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user can edit this categories settings.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_review_roles" onClick="logFunction('can_review_roles', 'coursecatlib.php.source.html#l2337')" href="coursecatlib.php.source.html#l2337">can_review_roles</a>()&nbsp;&nbsp;
<a href="../_functions/can_review_roles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user can review role assignments for this category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_review_permissions" onClick="logFunction('can_review_permissions', 'coursecatlib.php.source.html#l2345')" href="coursecatlib.php.source.html#l2345">can_review_permissions</a>()&nbsp;&nbsp;
<a href="../_functions/can_review_permissions.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user can review permissions for this category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_review_cohorts" onClick="logFunction('can_review_cohorts', 'coursecatlib.php.source.html#l2358')" href="coursecatlib.php.source.html#l2358">can_review_cohorts</a>()&nbsp;&nbsp;
<a href="../_functions/can_review_cohorts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user can review cohorts for this category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_review_filters" onClick="logFunction('can_review_filters', 'coursecatlib.php.source.html#l2366')" href="coursecatlib.php.source.html#l2366">can_review_filters</a>()&nbsp;&nbsp;
<a href="../_functions/can_review_filters.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user can review filter settings for this category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_change_visibility" onClick="logFunction('can_change_visibility', 'coursecatlib.php.source.html#l2375')" href="coursecatlib.php.source.html#l2375">can_change_visibility</a>()&nbsp;&nbsp;
<a href="../_functions/can_change_visibility.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user is able to change the visbility of this category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_move_courses_out_of" onClick="logFunction('can_move_courses_out_of', 'coursecatlib.php.source.html#l2383')" href="coursecatlib.php.source.html#l2383">can_move_courses_out_of</a>()&nbsp;&nbsp;
<a href="../_functions/can_move_courses_out_of.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user can move courses out of this category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_move_courses_into" onClick="logFunction('can_move_courses_into', 'coursecatlib.php.source.html#l2391')" href="coursecatlib.php.source.html#l2391">can_move_courses_into</a>()&nbsp;&nbsp;
<a href="../_functions/can_move_courses_into.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user can move courses into this category.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_restore_courses_into" onClick="logFunction('can_restore_courses_into', 'coursecatlib.php.source.html#l2399')" href="coursecatlib.php.source.html#l2399">can_restore_courses_into</a>()&nbsp;&nbsp;
<a href="../_functions/can_restore_courses_into.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user is able to restore a course into this category as a new course.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="resort_subcategories" onClick="logFunction('resort_subcategories', 'coursecatlib.php.source.html#l2407')" href="coursecatlib.php.source.html#l2407">resort_subcategories</a>(<a href="../_variables/field.html">$field</a>, <a href="../_variables/cleanup.html">$cleanup</a> = true)&nbsp;&nbsp;
<a href="../_functions/resort_subcategories.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Resorts the sub categories of this category by the given field.<BR>
</b><BR><b>param:</b> string $field One of name, idnumber or descending values of each (appended desc)<br>
<b>param:</b> bool $cleanup If true cleanup will be done, if false you will need to do it manually later.<br>
<b>return:</b> bool True on success.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="resort_categories_cleanup" onClick="logFunction('resort_categories_cleanup', 'coursecatlib.php.source.html#l2442')" href="coursecatlib.php.source.html#l2442">resort_categories_cleanup</a>(<a href="../_variables/includecourses.html">$includecourses</a> = false)&nbsp;&nbsp;
<a href="../_functions/resort_categories_cleanup.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Cleans things up after categories have been resorted.<BR>
</b><BR><b>param:</b> bool $includecourses If set to true we know courses have been resorted as well.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="resort_courses" onClick="logFunction('resort_courses', 'coursecatlib.php.source.html#l2455')" href="coursecatlib.php.source.html#l2455">resort_courses</a>(<a href="../_variables/field.html">$field</a>, <a href="../_variables/cleanup.html">$cleanup</a> = true)&nbsp;&nbsp;
<a href="../_functions/resort_courses.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Resort the courses within this category by the given field.<BR>
</b><BR><b>param:</b> string $field One of fullname, shortname, idnumber or descending values of each (appended desc)<br>
<b>param:</b> bool $cleanup<br>
<b>return:</b> bool True for success.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="change_sortorder_by_one" onClick="logFunction('change_sortorder_by_one', 'coursecatlib.php.source.html#l2525')" href="coursecatlib.php.source.html#l2525">change_sortorder_by_one</a>(<a href="../_variables/up.html">$up</a>)&nbsp;&nbsp;
<a href="../_functions/change_sortorder_by_one.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Changes the sort order of this categories parent shifting this category up or down one.<BR>
</b><BR><b>param:</b> bool $up If set to true the category is shifted up one spot, else its moved down.<br>
<b>return:</b> bool True on success, false otherwise.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_parent_coursecat" onClick="logFunction('get_parent_coursecat', 'coursecatlib.php.source.html#l2566')" href="coursecatlib.php.source.html#l2566">get_parent_coursecat</a>()&nbsp;&nbsp;
<a href="../_functions/get_parent_coursecat.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the parent coursecat object for this category.<BR>
</b><BR><b>return:</b> coursecat<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_request_course" onClick="logFunction('can_request_course', 'coursecatlib.php.source.html#l2576')" href="coursecatlib.php.source.html#l2576">can_request_course</a>()&nbsp;&nbsp;
<a href="../_functions/can_request_course.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user is able to request a new course be created.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_approve_course_requests" onClick="logFunction('can_approve_course_requests', 'coursecatlib.php.source.html#l2588')" href="coursecatlib.php.source.html#l2588">can_approve_course_requests</a>()&nbsp;&nbsp;
<a href="../_functions/can_approve_course_requests.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user can approve course requests.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="course_in_list"><b>course_in_list</b></a>&nbsp;&nbsp;- <a href="../_classes/course_in_list.html"><small>X-Ref</small></a>
</p>
<b>Class to store information about one course in a list of courses<BR>
</b><br>
Not all information may be retrieved when object is created but<BR>
it will be retrieved on demand when appropriate property or method is<BR>
called.<BR>
<BR>
Instances of this class are usually returned by functions<BR>
{@link coursecat::search_courses()}<BR>
and<BR>
{@link coursecat::get_courses()}<BR>
<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'coursecatlib.php.source.html#l2668')" href="coursecatlib.php.source.html#l2668">__construct</a>(stdClass <a href="../_variables/record.html">$record</a>)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates an instance of the class from record<BR>
</b><BR><b>param:</b> stdClass $record except fields from course table it may contain<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_summary" onClick="logFunction('has_summary', 'coursecatlib.php.source.html#l2684')" href="coursecatlib.php.source.html#l2684">has_summary</a>()&nbsp;&nbsp;
<a href="../_functions/has_summary.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Indicates if the course has non-empty summary field<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_course_contacts" onClick="logFunction('has_course_contacts', 'coursecatlib.php.source.html#l2700')" href="coursecatlib.php.source.html#l2700">has_course_contacts</a>()&nbsp;&nbsp;
<a href="../_functions/has_course_contacts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Indicates if the course have course contacts to display<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_course_contacts" onClick="logFunction('get_course_contacts', 'coursecatlib.php.source.html#l2713')" href="coursecatlib.php.source.html#l2713">get_course_contacts</a>()&nbsp;&nbsp;
<a href="../_functions/get_course_contacts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns list of course contacts (usually teachers) to display in course link<BR>
</b><BR>Roles to display are set up in $CFG-&gt;coursecontact<BR>
<BR>
The result is the list of users where user id is the key and the value<BR>
is an array with elements:<BR>
- 'user' - object containing basic user information<BR>
- 'role' - object containing basic role information (id, name, shortname, coursealias)<BR>
- 'rolename' =&gt; role_get_name($role, $context, ROLENAME_ALIAS)<BR>
- 'username' =&gt; fullname($user, $canviewfullnames)<BR>
<BR>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_course_overviewfiles" onClick="logFunction('has_course_overviewfiles', 'coursecatlib.php.source.html#l2769')" href="coursecatlib.php.source.html#l2769">has_course_overviewfiles</a>()&nbsp;&nbsp;
<a href="../_functions/has_course_overviewfiles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if course has any associated overview files<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_course_overviewfiles" onClick="logFunction('get_course_overviewfiles', 'coursecatlib.php.source.html#l2784')" href="coursecatlib.php.source.html#l2784">get_course_overviewfiles</a>()&nbsp;&nbsp;
<a href="../_functions/get_course_overviewfiles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns all course overview files<BR>
</b><BR><b>return:</b> array array of stored_file objects<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__isset" onClick="logFunction('__isset', 'coursecatlib.php.source.html#l2819')" href="coursecatlib.php.source.html#l2819">__isset</a>(<a href="../_variables/name.html">$name</a>)&nbsp;&nbsp;
<a href="../_functions/__isset.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Magic method to check if property is set<BR>
</b><BR><b>param:</b> string $name<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__get" onClick="logFunction('__get', 'coursecatlib.php.source.html#l2829')" href="coursecatlib.php.source.html#l2829">__get</a>(<a href="../_variables/name.html">$name</a>)&nbsp;&nbsp;
<a href="../_functions/__get.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Magic method to get a course property<BR>
</b><BR>Returns any field from table course (retrieves it from DB if it was not retrieved before)<BR>
<BR>
<b>param:</b> string $name<br>
<b>return:</b> mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__unset" onClick="logFunction('__unset', 'coursecatlib.php.source.html#l2856')" href="coursecatlib.php.source.html#l2856">__unset</a>(<a href="../_variables/name.html">$name</a>)&nbsp;&nbsp;
<a href="../_functions/__unset.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>All properties are read only, sorry.<BR>
</b><BR><b>param:</b> string $name<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__set" onClick="logFunction('__set', 'coursecatlib.php.source.html#l2865')" href="coursecatlib.php.source.html#l2865">__set</a>(<a href="../_variables/name.html">$name</a>, <a href="../_variables/value.html">$value</a>)&nbsp;&nbsp;
<a href="../_functions/__set.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Magic setter method, we do not want anybody to modify properties from the outside<BR>
</b><BR><b>param:</b> string $name<br>
<b>param:</b> mixed $value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="getiterator" onClick="logFunction('getiterator', 'coursecatlib.php.source.html#l2875')" href="coursecatlib.php.source.html#l2875">getIterator</a>()&nbsp;&nbsp;
<a href="../_functions/getiterator.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create an iterator because magic vars can't be seen by 'foreach'.<BR>
Exclude context fields<BR>
</b><BR>Implementing method from interface IteratorAggregate<BR>
<BR>
<b>return:</b> ArrayIterator<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_formatted_name" onClick="logFunction('get_formatted_name', 'coursecatlib.php.source.html#l2891')" href="coursecatlib.php.source.html#l2891">get_formatted_name</a>()&nbsp;&nbsp;
<a href="../_functions/get_formatted_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the name of this course as it should be displayed within a list.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_formatted_fullname" onClick="logFunction('get_formatted_fullname', 'coursecatlib.php.source.html#l2899')" href="coursecatlib.php.source.html#l2899">get_formatted_fullname</a>()&nbsp;&nbsp;
<a href="../_functions/get_formatted_fullname.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the formatted fullname for this course.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_formatted_shortname" onClick="logFunction('get_formatted_shortname', 'coursecatlib.php.source.html#l2907')" href="coursecatlib.php.source.html#l2907">get_formatted_shortname</a>()&nbsp;&nbsp;
<a href="../_functions/get_formatted_shortname.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the formatted shortname for this course.<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_access" onClick="logFunction('can_access', 'coursecatlib.php.source.html#l2915')" href="coursecatlib.php.source.html#l2915">can_access</a>()&nbsp;&nbsp;
<a href="../_functions/can_access.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user can access this course.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_edit" onClick="logFunction('can_edit', 'coursecatlib.php.source.html#l2926')" href="coursecatlib.php.source.html#l2926">can_edit</a>()&nbsp;&nbsp;
<a href="../_functions/can_edit.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user can edit this courses settings.<BR>
</b><BR>Note: this function does not check that the current user can access the course.<BR>
To do that please call require_login with the course, or if not possible call {@see course_in_list::can_access()}<BR>
<BR>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_change_visibility" onClick="logFunction('can_change_visibility', 'coursecatlib.php.source.html#l2938')" href="coursecatlib.php.source.html#l2938">can_change_visibility</a>()&nbsp;&nbsp;
<a href="../_functions/can_change_visibility.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user can change the visibility of this course.<BR>
</b><BR>Note: this function does not check that the current user can access the course.<BR>
To do that please call require_login with the course, or if not possible call {@see course_in_list::can_access()}<BR>
<BR>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context" onClick="logFunction('get_context', 'coursecatlib.php.source.html#l2951')" href="coursecatlib.php.source.html#l2951">get_context</a>()&nbsp;&nbsp;
<a href="../_functions/get_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the context for this course.<BR>
</b><BR><b>return:</b> context_course<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_uservisible" onClick="logFunction('is_uservisible', 'coursecatlib.php.source.html#l2959')" href="coursecatlib.php.source.html#l2959">is_uservisible</a>()&nbsp;&nbsp;
<a href="../_functions/is_uservisible.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if this course is visible to the current user.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_review_enrolments" onClick="logFunction('can_review_enrolments', 'coursecatlib.php.source.html#l2967')" href="coursecatlib.php.source.html#l2967">can_review_enrolments</a>()&nbsp;&nbsp;
<a href="../_functions/can_review_enrolments.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user can review enrolments for this course.<BR>
</b><BR>Note: this function does not check that the current user can access the course.<BR>
To do that please call require_login with the course, or if not possible call {@see course_in_list::can_access()}<BR>
<BR>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_delete" onClick="logFunction('can_delete', 'coursecatlib.php.source.html#l2979')" href="coursecatlib.php.source.html#l2979">can_delete</a>()&nbsp;&nbsp;
<a href="../_functions/can_delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user can delete this course.<BR>
</b><BR>Note: this function does not check that the current user can access the course.<BR>
To do that please call require_login with the course, or if not possible call {@see course_in_list::can_access()}<BR>
<BR>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_backup" onClick="logFunction('can_backup', 'coursecatlib.php.source.html#l2991')" href="coursecatlib.php.source.html#l2991">can_backup</a>()&nbsp;&nbsp;
<a href="../_functions/can_backup.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user can backup this course.<BR>
</b><BR>Note: this function does not check that the current user can access the course.<BR>
To do that please call require_login with the course, or if not possible call {@see course_in_list::can_access()}<BR>
<BR>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_restore" onClick="logFunction('can_restore', 'coursecatlib.php.source.html#l3003')" href="coursecatlib.php.source.html#l3003">can_restore</a>()&nbsp;&nbsp;
<a href="../_functions/can_restore.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the current user can restore this course.<BR>
</b><BR>Note: this function does not check that the current user can access the course.<BR>
To do that please call require_login with the course, or if not possible call {@see course_in_list::can_access()}<BR>
<BR>
<b>return:</b> bool<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="coursecat_sortable_records"><b>coursecat_sortable_records</b></a>&nbsp;&nbsp;- <a href="../_classes/coursecat_sortable_records.html"><small>X-Ref</small></a>
</p>
<b>An array of records that is sortable by many fields.<BR>
</b><br>
For more info on the ArrayObject class have a look at php.net.<BR>
<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sort" onClick="logFunction('sort', 'coursecatlib.php.source.html#l3035')" href="coursecatlib.php.source.html#l3035">sort</a>(array <a href="../_variables/records.html">$records</a>, array <a href="../_variables/fields.html">$fields</a>)&nbsp;&nbsp;
<a href="../_functions/sort.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sorts this array using the given fields.<BR>
</b><BR><b>param:</b> array $records<br>
<b>param:</b> array $fields<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sort_by_many_fields" onClick="logFunction('sort_by_many_fields', 'coursecatlib.php.source.html#l3049')" href="coursecatlib.php.source.html#l3049">sort_by_many_fields</a>(<a href="../_variables/a.html">$a</a>, <a href="../_variables/b.html">$b</a>)&nbsp;&nbsp;
<a href="../_functions/sort_by_many_fields.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sorts the two records based upon many fields.<BR>
</b><BR>This method should not be called itself, please call $sort instead.<BR>
It has been marked as access private as such.<BR>
<BR>
<b>param:</b> stdClass $a<br>
<b>param:</b> stdClass $b<br>
<b>return:</b> int<br>
</td></tr></table>

<br>
</div>
</div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
