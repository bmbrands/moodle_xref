<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of accesslib.php</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='accesslib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/lib/</a> -> <a href="accesslib.php.source.html">accesslib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="accesslib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../_stats.html">Project Stats</a>]</p>
<p><b>This file contains functions for managing user access &lt;b&gt;Public API vs internals&lt;/b&gt;</b></p>
<table>
<tr><td align="right">Copyright: </td><td>1999 onwards Martin Dougiamas  http://dougiamas.com</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>7556 lines (268 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>0 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 7 classes</h3>
<div class="inset">
<p><b>context_helper::</b> (17 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#reset_levels">reset_levels</a>()<br>
&nbsp;&nbsp;<a href="#init_levels">init_levels</a>()<br>
&nbsp;&nbsp;<a href="#get_class_for_level">get_class_for_level</a>()<br>
&nbsp;&nbsp;<a href="#get_all_levels">get_all_levels</a>()<br>
&nbsp;&nbsp;<a href="#cleanup_instances">cleanup_instances</a>()<br>
&nbsp;&nbsp;<a href="#create_instances">create_instances</a>()<br>
&nbsp;&nbsp;<a href="#build_all_paths">build_all_paths</a>()<br>
&nbsp;&nbsp;<a href="#reset_caches">reset_caches</a>()<br>
&nbsp;&nbsp;<a href="#get_preload_record_columns">get_preload_record_columns</a>()<br>
&nbsp;&nbsp;<a href="#get_preload_record_columns_sql">get_preload_record_columns_sql</a>()<br>
&nbsp;&nbsp;<a href="#preload_from_record">preload_from_record</a>()<br>
&nbsp;&nbsp;<a href="#preload_course">preload_course</a>()<br>
&nbsp;&nbsp;<a href="#delete_instance">delete_instance</a>()<br>
&nbsp;&nbsp;<a href="#get_level_name">get_level_name</a>()<br>
&nbsp;&nbsp;<a href="#get_url">get_url</a>()<br>
&nbsp;&nbsp;<a href="#get_capabilities">get_capabilities</a>()<br>
</p>
<p><b>context_system::</b> (10 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#get_level_name">get_level_name</a>()<br>
&nbsp;&nbsp;<a href="#get_context_name">get_context_name</a>()<br>
&nbsp;&nbsp;<a href="#get_url">get_url</a>()<br>
&nbsp;&nbsp;<a href="#get_capabilities">get_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#create_level_instances">create_level_instances</a>()<br>
&nbsp;&nbsp;<a href="#instance">instance</a>()<br>
&nbsp;&nbsp;<a href="#get_child_contexts">get_child_contexts</a>()<br>
&nbsp;&nbsp;<a href="#get_cleanup_sql">get_cleanup_sql</a>()<br>
&nbsp;&nbsp;<a href="#build_paths">build_paths</a>()<br>
</p>
<p><b>context_user::</b> (9 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#get_level_name">get_level_name</a>()<br>
&nbsp;&nbsp;<a href="#get_context_name">get_context_name</a>()<br>
&nbsp;&nbsp;<a href="#get_url">get_url</a>()<br>
&nbsp;&nbsp;<a href="#get_capabilities">get_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#instance">instance</a>()<br>
&nbsp;&nbsp;<a href="#create_level_instances">create_level_instances</a>()<br>
&nbsp;&nbsp;<a href="#get_cleanup_sql">get_cleanup_sql</a>()<br>
&nbsp;&nbsp;<a href="#build_paths">build_paths</a>()<br>
</p>
<p><b>context_coursecat::</b> (10 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#get_level_name">get_level_name</a>()<br>
&nbsp;&nbsp;<a href="#get_context_name">get_context_name</a>()<br>
&nbsp;&nbsp;<a href="#get_url">get_url</a>()<br>
&nbsp;&nbsp;<a href="#get_capabilities">get_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#instance">instance</a>()<br>
&nbsp;&nbsp;<a href="#get_child_contexts">get_child_contexts</a>()<br>
&nbsp;&nbsp;<a href="#create_level_instances">create_level_instances</a>()<br>
&nbsp;&nbsp;<a href="#get_cleanup_sql">get_cleanup_sql</a>()<br>
&nbsp;&nbsp;<a href="#build_paths">build_paths</a>()<br>
</p>
<p><b>context_course::</b> (10 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#get_level_name">get_level_name</a>()<br>
&nbsp;&nbsp;<a href="#get_context_name">get_context_name</a>()<br>
&nbsp;&nbsp;<a href="#get_url">get_url</a>()<br>
&nbsp;&nbsp;<a href="#get_capabilities">get_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#get_course_context">get_course_context</a>()<br>
&nbsp;&nbsp;<a href="#instance">instance</a>()<br>
&nbsp;&nbsp;<a href="#create_level_instances">create_level_instances</a>()<br>
&nbsp;&nbsp;<a href="#get_cleanup_sql">get_cleanup_sql</a>()<br>
&nbsp;&nbsp;<a href="#build_paths">build_paths</a>()<br>
</p>
<p><b>context_module::</b> (10 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#get_level_name">get_level_name</a>()<br>
&nbsp;&nbsp;<a href="#get_context_name">get_context_name</a>()<br>
&nbsp;&nbsp;<a href="#get_url">get_url</a>()<br>
&nbsp;&nbsp;<a href="#get_capabilities">get_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#get_course_context">get_course_context</a>()<br>
&nbsp;&nbsp;<a href="#instance">instance</a>()<br>
&nbsp;&nbsp;<a href="#create_level_instances">create_level_instances</a>()<br>
&nbsp;&nbsp;<a href="#get_cleanup_sql">get_cleanup_sql</a>()<br>
&nbsp;&nbsp;<a href="#build_paths">build_paths</a>()<br>
</p>
<p><b>context_block::</b> (14 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#get_level_name">get_level_name</a>()<br>
&nbsp;&nbsp;<a href="#get_context_name">get_context_name</a>()<br>
&nbsp;&nbsp;<a href="#get_url">get_url</a>()<br>
&nbsp;&nbsp;<a href="#get_capabilities">get_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#get_course_context">get_course_context</a>()<br>
&nbsp;&nbsp;<a href="#instance">instance</a>()<br>
&nbsp;&nbsp;<a href="#get_child_contexts">get_child_contexts</a>()<br>
&nbsp;&nbsp;<a href="#create_level_instances">create_level_instances</a>()<br>
&nbsp;&nbsp;<a href="#get_cleanup_sql">get_cleanup_sql</a>()<br>
&nbsp;&nbsp;<a href="#build_paths">build_paths</a>()<br>
&nbsp;&nbsp;<a href="#get_sorted_contexts">get_sorted_contexts</a>()<br>
&nbsp;&nbsp;<a href="#extract_suspended_users">extract_suspended_users</a>()<br>
&nbsp;&nbsp;<a href="#get_suspended_userids">get_suspended_userids</a>()<br>
</p>
</div>
<h3>Defines 14 functions</h3>
<div class="inset">
&nbsp;&nbsp;<a href="#accesslib_clear_all_caches_for_unit_testing">accesslib_clear_all_caches_for_unit_testing</a>()<br>
&nbsp;&nbsp;<a href="#accesslib_clear_all_caches">accesslib_clear_all_caches</a>()<br>
&nbsp;&nbsp;<a href="#get_role_access">get_role_access</a>()<br>
&nbsp;&nbsp;<a href="#get_guest_role">get_guest_role</a>()<br>
&nbsp;&nbsp;<a href="#has_capability">has_capability</a>()<br>
&nbsp;&nbsp;<a href="#has_any_capability">has_any_capability</a>()<br>
&nbsp;&nbsp;<a href="#has_all_capabilities">has_all_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#guess_if_creator_will_have_course_capability">guess_if_creator_will_have_course_capability</a>()<br>
&nbsp;&nbsp;<a href="#is_siteadmin">is_siteadmin</a>()<br>
&nbsp;&nbsp;<a href="#has_coursecontact_role">has_coursecontact_role</a>()<br>
&nbsp;&nbsp;<a href="#has_capability_in_accessdata">has_capability_in_accessdata</a>()<br>
&nbsp;&nbsp;<a href="#require_capability">require_capability</a>()<br>
&nbsp;&nbsp;<a href="#get_user_access_sitewide">get_user_access_sitewide</a>()<br>
&nbsp;&nbsp;<a href="#load_course_context">load_course_context</a>()<br>
&nbsp;&nbsp;<a href="#load_role_access_by_context">load_role_access_by_context</a>()<br>
&nbsp;&nbsp;<a href="#get_empty_accessdata">get_empty_accessdata</a>()<br>
&nbsp;&nbsp;<a href="#get_user_accessdata">get_user_accessdata</a>()<br>
&nbsp;&nbsp;<a href="#dedupe_user_access">dedupe_user_access</a>()<br>
&nbsp;&nbsp;<a href="#load_all_capabilities">load_all_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#reload_all_capabilities">reload_all_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#load_temp_course_role">load_temp_course_role</a>()<br>
&nbsp;&nbsp;<a href="#remove_temp_course_roles">remove_temp_course_roles</a>()<br>
&nbsp;&nbsp;<a href="#get_role_archetypes">get_role_archetypes</a>()<br>
&nbsp;&nbsp;<a href="#assign_legacy_capabilities">assign_legacy_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#is_safe_capability">is_safe_capability</a>()<br>
&nbsp;&nbsp;<a href="#get_local_override">get_local_override</a>()<br>
&nbsp;&nbsp;<a href="#get_context_info_array">get_context_info_array</a>()<br>
&nbsp;&nbsp;<a href="#create_role">create_role</a>()<br>
&nbsp;&nbsp;<a href="#delete_role">delete_role</a>()<br>
&nbsp;&nbsp;<a href="#assign_capability">assign_capability</a>()<br>
&nbsp;&nbsp;<a href="#unassign_capability">unassign_capability</a>()<br>
&nbsp;&nbsp;<a href="#get_roles_with_capability">get_roles_with_capability</a>()<br>
&nbsp;&nbsp;<a href="#role_assign">role_assign</a>()<br>
&nbsp;&nbsp;<a href="#role_unassign">role_unassign</a>()<br>
&nbsp;&nbsp;<a href="#role_unassign_all">role_unassign_all</a>()<br>
&nbsp;&nbsp;<a href="#isloggedin">isloggedin</a>()<br>
&nbsp;&nbsp;<a href="#isguestuser">isguestuser</a>()<br>
&nbsp;&nbsp;<a href="#is_guest">is_guest</a>()<br>
&nbsp;&nbsp;<a href="#is_viewing">is_viewing</a>()<br>
&nbsp;&nbsp;<a href="#is_enrolled">is_enrolled</a>()<br>
&nbsp;&nbsp;<a href="#can_access_course">can_access_course</a>()<br>
&nbsp;&nbsp;<a href="#get_enrolled_sql">get_enrolled_sql</a>()<br>
&nbsp;&nbsp;<a href="#get_enrolled_users">get_enrolled_users</a>()<br>
&nbsp;&nbsp;<a href="#count_enrolled_users">count_enrolled_users</a>()<br>
&nbsp;&nbsp;<a href="#load_capability_def">load_capability_def</a>()<br>
&nbsp;&nbsp;<a href="#get_cached_capabilities">get_cached_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#get_default_capabilities">get_default_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#get_default_role_archetype_allows">get_default_role_archetype_allows</a>()<br>
&nbsp;&nbsp;<a href="#reset_role_capabilities">reset_role_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#update_capabilities">update_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#capabilities_cleanup">capabilities_cleanup</a>()<br>
&nbsp;&nbsp;<a href="#get_all_risks">get_all_risks</a>()<br>
&nbsp;&nbsp;<a href="#get_capability_docs_link">get_capability_docs_link</a>()<br>
&nbsp;&nbsp;<a href="#role_context_capabilities">role_context_capabilities</a>()<br>
&nbsp;&nbsp;<a href="#get_context_info_list">get_context_info_list</a>()<br>
&nbsp;&nbsp;<a href="#is_inside_frontpage">is_inside_frontpage</a>()<br>
&nbsp;&nbsp;<a href="#get_capability_info">get_capability_info</a>()<br>
&nbsp;&nbsp;<a href="#get_capability_string">get_capability_string</a>()<br>
&nbsp;&nbsp;<a href="#get_component_string">get_component_string</a>()<br>
&nbsp;&nbsp;<a href="#get_profile_roles">get_profile_roles</a>()<br>
&nbsp;&nbsp;<a href="#get_roles_used_in_context">get_roles_used_in_context</a>()<br>
&nbsp;&nbsp;<a href="#get_user_roles_in_course">get_user_roles_in_course</a>()<br>
&nbsp;&nbsp;<a href="#user_can_assign">user_can_assign</a>()<br>
&nbsp;&nbsp;<a href="#get_all_roles">get_all_roles</a>()<br>
&nbsp;&nbsp;<a href="#get_archetype_roles">get_archetype_roles</a>()<br>
&nbsp;&nbsp;<a href="#get_user_roles">get_user_roles</a>()<br>
&nbsp;&nbsp;<a href="#get_user_roles_with_special">get_user_roles_with_special</a>()<br>
&nbsp;&nbsp;<a href="#allow_override">allow_override</a>()<br>
&nbsp;&nbsp;<a href="#allow_assign">allow_assign</a>()<br>
&nbsp;&nbsp;<a href="#allow_switch">allow_switch</a>()<br>
&nbsp;&nbsp;<a href="#get_assignable_roles">get_assignable_roles</a>()<br>
&nbsp;&nbsp;<a href="#get_switchable_roles">get_switchable_roles</a>()<br>
&nbsp;&nbsp;<a href="#get_overridable_roles">get_overridable_roles</a>()<br>
&nbsp;&nbsp;<a href="#get_default_enrol_roles">get_default_enrol_roles</a>()<br>
&nbsp;&nbsp;<a href="#get_role_contextlevels">get_role_contextlevels</a>()<br>
&nbsp;&nbsp;<a href="#get_roles_for_contextlevels">get_roles_for_contextlevels</a>()<br>
&nbsp;&nbsp;<a href="#get_default_contextlevels">get_default_contextlevels</a>()<br>
&nbsp;&nbsp;<a href="#set_role_contextlevels">set_role_contextlevels</a>()<br>
&nbsp;&nbsp;<a href="#get_users_by_capability">get_users_by_capability</a>()<br>
&nbsp;&nbsp;<a href="#sort_by_roleassignment_authority">sort_by_roleassignment_authority</a>()<br>
&nbsp;&nbsp;<a href="#get_role_users">get_role_users</a>()<br>
&nbsp;&nbsp;<a href="#count_role_users">count_role_users</a>()<br>
&nbsp;&nbsp;<a href="#get_user_capability_course">get_user_capability_course</a>()<br>
&nbsp;&nbsp;<a href="#get_roles_on_exact_context">get_roles_on_exact_context</a>()<br>
&nbsp;&nbsp;<a href="#role_switch">role_switch</a>()<br>
&nbsp;&nbsp;<a href="#is_role_switched">is_role_switched</a>()<br>
&nbsp;&nbsp;<a href="#get_roles_with_override_on_context">get_roles_with_override_on_context</a>()<br>
&nbsp;&nbsp;<a href="#get_capabilities_from_role_on_context">get_capabilities_from_role_on_context</a>()<br>
&nbsp;&nbsp;<a href="#get_roles_with_assignment_on_context">get_roles_with_assignment_on_context</a>()<br>
&nbsp;&nbsp;<a href="#get_users_from_role_on_context">get_users_from_role_on_context</a>()<br>
&nbsp;&nbsp;<a href="#user_has_role_assignment">user_has_role_assignment</a>()<br>
&nbsp;&nbsp;<a href="#role_get_name">role_get_name</a>()<br>
&nbsp;&nbsp;<a href="#role_get_description">role_get_description</a>()<br>
&nbsp;&nbsp;<a href="#role_get_names">role_get_names</a>()<br>
&nbsp;&nbsp;<a href="#role_fix_names">role_fix_names</a>()<br>
&nbsp;&nbsp;<a href="#component_level_changed">component_level_changed</a>()<br>
&nbsp;&nbsp;<a href="#fix_role_sortorder">fix_role_sortorder</a>()<br>
&nbsp;&nbsp;<a href="#switch_roles">switch_roles</a>()<br>
&nbsp;&nbsp;<a href="#role_cap_duplicate">role_cap_duplicate</a>()<br>
&nbsp;&nbsp;<a href="#get_roles_with_cap_in_context">get_roles_with_cap_in_context</a>()<br>
&nbsp;&nbsp;<a href="#get_roles_with_caps_in_context">get_roles_with_caps_in_context</a>()<br>
&nbsp;&nbsp;<a href="#get_role_names_with_caps_in_context">get_role_names_with_caps_in_context</a>()<br>
&nbsp;&nbsp;<a href="#prohibit_is_removable">prohibit_is_removable</a>()<br>
&nbsp;&nbsp;<a href="#role_change_permission">role_change_permission</a>()<br>
&nbsp;&nbsp;<a href="#reset_caches">reset_caches</a>()<br>
&nbsp;&nbsp;<a href="#cache_add">cache_add</a>()<br>
&nbsp;&nbsp;<a href="#cache_remove">cache_remove</a>()<br>
&nbsp;&nbsp;<a href="#cache_get">cache_get</a>()<br>
&nbsp;&nbsp;<a href="#cache_get_by_id">cache_get_by_id</a>()<br>
&nbsp;&nbsp;<a href="#preload_from_record">preload_from_record</a>()<br>
&nbsp;&nbsp;<a href="#__set">__set</a>()<br>
&nbsp;&nbsp;<a href="#__get">__get</a>()<br>
&nbsp;&nbsp;<a href="#__isset">__isset</a>()<br>
&nbsp;&nbsp;<a href="#__unset">__unset</a>()<br>
&nbsp;&nbsp;<a href="#getiterator">getIterator</a>()<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#create_instance_from_record">create_instance_from_record</a>()<br>
&nbsp;&nbsp;<a href="#merge_context_temp_table">merge_context_temp_table</a>()<br>
&nbsp;&nbsp;<a href="#instance_by_id">instance_by_id</a>()<br>
&nbsp;&nbsp;<a href="#update_moved">update_moved</a>()<br>
&nbsp;&nbsp;<a href="#reset_paths">reset_paths</a>()<br>
&nbsp;&nbsp;<a href="#delete_content">delete_content</a>()<br>
&nbsp;&nbsp;<a href="#delete">delete</a>()<br>
&nbsp;&nbsp;<a href="#insert_context_record">insert_context_record</a>()<br>
&nbsp;&nbsp;<a href="#get_context_name">get_context_name</a>()<br>
&nbsp;&nbsp;<a href="#get_child_contexts">get_child_contexts</a>()<br>
&nbsp;&nbsp;<a href="#get_parent_contexts">get_parent_contexts</a>()<br>
&nbsp;&nbsp;<a href="#get_parent_context_ids">get_parent_context_ids</a>()<br>
&nbsp;&nbsp;<a href="#get_parent_context">get_parent_context</a>()<br>
&nbsp;&nbsp;<a href="#get_course_context">get_course_context</a>()<br>
&nbsp;&nbsp;<a href="#get_cleanup_sql">get_cleanup_sql</a>()<br>
&nbsp;&nbsp;<a href="#build_paths">build_paths</a>()<br>
&nbsp;&nbsp;<a href="#create_level_instances">create_level_instances</a>()<br>
&nbsp;&nbsp;<a href="#reload_if_dirty">reload_if_dirty</a>()<br>
&nbsp;&nbsp;<a href="#mark_dirty">mark_dirty</a>()<br>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="context_helper"><b>context_helper</b></a>&nbsp;&nbsp;- <a href="../_classes/context_helper.html"><small>X-Ref</small></a>
</p>
<b>Context maintenance and helper methods.<BR>
</b><br>
This is &quot;extends context&quot; is a bloody hack that tires to work around the deficiencies<BR>
in the &quot;protected&quot; keyword in PHP, this helps us to hide all the internals of context<BR>
level implementation from the rest of code, the code completion returns what developers need.<BR>
<BR>
Thank you Tim Hunt for helping me with this nasty trick.<BR>
<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'accesslib.php.source.html#l5846')" href="accesslib.php.source.html#l5846">__construct</a>()&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Instance does not make sense here, only static use<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="reset_levels" onClick="logFunction('reset_levels', 'accesslib.php.source.html#l5852')" href="accesslib.php.source.html#l5852">reset_levels</a>()&nbsp;&nbsp;
<a href="../_functions/reset_levels.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Reset internal context levels array.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="init_levels" onClick="logFunction('init_levels', 'accesslib.php.source.html#l5859')" href="accesslib.php.source.html#l5859">init_levels</a>()&nbsp;&nbsp;
<a href="../_functions/init_levels.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Initialise context levels, call before using self::$alllevels.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_class_for_level" onClick="logFunction('get_class_for_level', 'accesslib.php.source.html#l5897')" href="accesslib.php.source.html#l5897">get_class_for_level</a>(<a href="../_variables/contextlevel.html">$contextlevel</a>)&nbsp;&nbsp;
<a href="../_functions/get_class_for_level.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns a class name of the context level class<BR>
</b><BR><b>param:</b> int $contextlevel (CONTEXT_SYSTEM, etc.)<br>
<b>return:</b> string class name of the context class<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_all_levels" onClick="logFunction('get_all_levels', 'accesslib.php.source.html#l5913')" href="accesslib.php.source.html#l5913">get_all_levels</a>()&nbsp;&nbsp;
<a href="../_functions/get_all_levels.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns a list of all context levels<BR>
</b><BR><b>return:</b> array int=&gt;string (level=&gt;level class name)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cleanup_instances" onClick="logFunction('cleanup_instances', 'accesslib.php.source.html#l5924')" href="accesslib.php.source.html#l5924">cleanup_instances</a>()&nbsp;&nbsp;
<a href="../_functions/cleanup_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Remove stale contexts that belonged to deleted instances.<BR>
Ideally all code should cleanup contexts properly, unfortunately accidents happen...<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_instances" onClick="logFunction('create_instances', 'accesslib.php.source.html#l5955')" href="accesslib.php.source.html#l5955">create_instances</a>(<a href="../_variables/contextlevel.html">$contextlevel</a> = null, <a href="../_variables/buildpaths.html">$buildpaths</a> = true)&nbsp;&nbsp;
<a href="../_functions/create_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create all context instances at the given level and above.<BR>
</b><BR><b>param:</b> int $contextlevel null means all levels<br>
<b>param:</b> bool $buildpaths<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="build_all_paths" onClick="logFunction('build_all_paths', 'accesslib.php.source.html#l5977')" href="accesslib.php.source.html#l5977">build_all_paths</a>(<a href="../_variables/force.html">$force</a> = false)&nbsp;&nbsp;
<a href="../_functions/build_all_paths.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Rebuild paths and depths in all context levels.<BR>
</b><BR><b>param:</b> bool $force false means add missing only<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="reset_caches" onClick="logFunction('reset_caches', 'accesslib.php.source.html#l5994')" href="accesslib.php.source.html#l5994">reset_caches</a>()&nbsp;&nbsp;
<a href="../_functions/reset_caches.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Resets the cache to remove all data.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_preload_record_columns" onClick="logFunction('get_preload_record_columns', 'accesslib.php.source.html#l6002')" href="accesslib.php.source.html#l6002">get_preload_record_columns</a>(<a href="../_variables/tablealias.html">$tablealias</a>)&nbsp;&nbsp;
<a href="../_functions/get_preload_record_columns.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns all fields necessary for context preloading from user $rec.<BR>
</b><BR>This helps with performance when dealing with hundreds of contexts.<BR>
<BR>
<b>param:</b> string $tablealias context table alias in the query<br>
<b>return:</b> array (table.column=&gt;alias, ...)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_preload_record_columns_sql" onClick="logFunction('get_preload_record_columns_sql', 'accesslib.php.source.html#l6015')" href="accesslib.php.source.html#l6015">get_preload_record_columns_sql</a>(<a href="../_variables/tablealias.html">$tablealias</a>)&nbsp;&nbsp;
<a href="../_functions/get_preload_record_columns_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns all fields necessary for context preloading from user $rec.<BR>
</b><BR>This helps with performance when dealing with hundreds of contexts.<BR>
<BR>
<b>param:</b> string $tablealias context table alias in the query<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="preload_from_record" onClick="logFunction('preload_from_record', 'accesslib.php.source.html#l6028')" href="accesslib.php.source.html#l6028">preload_from_record</a>(stdClass <a href="../_variables/rec.html">$rec</a>)&nbsp;&nbsp;
<a href="../_functions/preload_from_record.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Preloads context information from db record and strips the cached info.<BR>
</b><BR>The db request has to contain all columns from context_helper::get_preload_record_columns().<BR>
<BR>
<b>param:</b> stdClass $rec<br>
<b>return:</b> void (modifies $rec)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="preload_course" onClick="logFunction('preload_course', 'accesslib.php.source.html#l6041')" href="accesslib.php.source.html#l6041">preload_course</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/preload_course.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Preload all contexts instances from course.<BR>
</b><BR>To be used if you expect multiple queries for course activities...<BR>
<BR>
<b>param:</b> int $courseid<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_instance" onClick="logFunction('delete_instance', 'accesslib.php.source.html#l6060')" href="accesslib.php.source.html#l6060">delete_instance</a>(<a href="../_variables/contextlevel.html">$contextlevel</a>, <a href="../_variables/instanceid.html">$instanceid</a>)&nbsp;&nbsp;
<a href="../_functions/delete_instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete context instance<BR>
</b><BR><b>param:</b> int $contextlevel<br>
<b>param:</b> int $instanceid<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_level_name" onClick="logFunction('get_level_name', 'accesslib.php.source.html#l6080')" href="accesslib.php.source.html#l6080">get_level_name</a>(<a href="../_variables/contextlevel.html">$contextlevel</a>)&nbsp;&nbsp;
<a href="../_functions/get_level_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the name of specified context level<BR>
</b><BR><b>param:</b> int $contextlevel<br>
<b>return:</b> string name of the context level<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_url" onClick="logFunction('get_url', 'accesslib.php.source.html#l6092')" href="accesslib.php.source.html#l6092">get_url</a>()&nbsp;&nbsp;
<a href="../_functions/get_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>not used<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_capabilities" onClick="logFunction('get_capabilities', 'accesslib.php.source.html#l6098')" href="accesslib.php.source.html#l6098">get_capabilities</a>()&nbsp;&nbsp;
<a href="../_functions/get_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>not used<BR>
</b><BR></td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="context_system"><b>context_system</b></a>&nbsp;&nbsp;- <a href="../_classes/context_system.html"><small>X-Ref</small></a>
</p>
<b>System context class<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'accesslib.php.source.html#l6116')" href="accesslib.php.source.html#l6116">__construct</a>(stdClass <a href="../_variables/record.html">$record</a>)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Please use context_system::instance() if you need the instance of context.<BR>
</b><BR><b>param:</b> stdClass $record<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_level_name" onClick="logFunction('get_level_name', 'accesslib.php.source.html#l6128')" href="accesslib.php.source.html#l6128">get_level_name</a>()&nbsp;&nbsp;
<a href="../_functions/get_level_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context level name.<BR>
</b><BR><b>return:</b> string the human readable context level name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context_name" onClick="logFunction('get_context_name', 'accesslib.php.source.html#l6138')" href="accesslib.php.source.html#l6138">get_context_name</a>(<a href="../_variables/withprefix.html">$withprefix</a> = true, <a href="../_variables/short.html">$short</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_context_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context identifier.<BR>
</b><BR><b>param:</b> boolean $withprefix does not apply to system context<br>
<b>param:</b> boolean $short does not apply to system context<br>
<b>return:</b> string the human readable context name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_url" onClick="logFunction('get_url', 'accesslib.php.source.html#l6149')" href="accesslib.php.source.html#l6149">get_url</a>()&nbsp;&nbsp;
<a href="../_functions/get_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the most relevant URL for this context.<BR>
</b><BR><b>return:</b> moodle_url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_capabilities" onClick="logFunction('get_capabilities', 'accesslib.php.source.html#l6158')" href="accesslib.php.source.html#l6158">get_capabilities</a>()&nbsp;&nbsp;
<a href="../_functions/get_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns array of relevant context capability records.<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_level_instances" onClick="logFunction('create_level_instances', 'accesslib.php.source.html#l6175')" href="accesslib.php.source.html#l6175">create_level_instances</a>()&nbsp;&nbsp;
<a href="../_functions/create_level_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create missing context instances at system context<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="instance" onClick="logFunction('instance', 'accesslib.php.source.html#l6184')" href="accesslib.php.source.html#l6184">instance</a>(<a href="../_variables/instanceid.html">$instanceid</a> = 0, <a href="../_variables/strictness.html">$strictness</a> = MUST_EXIST, <a href="../_variables/cache.html">$cache</a> = true)&nbsp;&nbsp;
<a href="../_functions/instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns system context instance.<BR>
</b><BR><b>param:</b> int $instanceid<br>
<b>param:</b> int $strictness<br>
<b>param:</b> bool $cache<br>
<b>return:</b> context_system context instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_child_contexts" onClick="logFunction('get_child_contexts', 'accesslib.php.source.html#l6272')" href="accesslib.php.source.html#l6272">get_child_contexts</a>()&nbsp;&nbsp;
<a href="../_functions/get_child_contexts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns all site contexts except the system context, DO NOT call on production servers!!<BR>
</b><BR>Contexts are not cached.<BR>
<BR>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_cleanup_sql" onClick="logFunction('get_cleanup_sql', 'accesslib.php.source.html#l6299')" href="accesslib.php.source.html#l6299">get_cleanup_sql</a>()&nbsp;&nbsp;
<a href="../_functions/get_cleanup_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns sql necessary for purging of stale context instances.<BR>
</b><BR><b>return:</b> string cleanup SQL<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="build_paths" onClick="logFunction('build_paths', 'accesslib.php.source.html#l6315')" href="accesslib.php.source.html#l6315">build_paths</a>(<a href="../_variables/force.html">$force</a>)&nbsp;&nbsp;
<a href="../_functions/build_paths.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Rebuild context paths and depths at system context level.<BR>
</b><BR><b>param:</b> bool $force<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="context_user"><b>context_user</b></a>&nbsp;&nbsp;- <a href="../_classes/context_user.html"><small>X-Ref</small></a>
</p>
<b>User context class<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'accesslib.php.source.html#l6357')" href="accesslib.php.source.html#l6357">__construct</a>(stdClass <a href="../_variables/record.html">$record</a>)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Please use context_user::instance($userid) if you need the instance of context.<BR>
Alternatively if you know only the context id use context::instance_by_id($contextid)<BR>
</b><BR><b>param:</b> stdClass $record<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_level_name" onClick="logFunction('get_level_name', 'accesslib.php.source.html#l6370')" href="accesslib.php.source.html#l6370">get_level_name</a>()&nbsp;&nbsp;
<a href="../_functions/get_level_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context level name.<BR>
</b><BR><b>return:</b> string the human readable context level name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context_name" onClick="logFunction('get_context_name', 'accesslib.php.source.html#l6380')" href="accesslib.php.source.html#l6380">get_context_name</a>(<a href="../_variables/withprefix.html">$withprefix</a> = true, <a href="../_variables/short.html">$short</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_context_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context identifier.<BR>
</b><BR><b>param:</b> boolean $withprefix whether to prefix the name of the context with User<br>
<b>param:</b> boolean $short does not apply to user context<br>
<b>return:</b> string the human readable context name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_url" onClick="logFunction('get_url', 'accesslib.php.source.html#l6400')" href="accesslib.php.source.html#l6400">get_url</a>()&nbsp;&nbsp;
<a href="../_functions/get_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the most relevant URL for this context.<BR>
</b><BR><b>return:</b> moodle_url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_capabilities" onClick="logFunction('get_capabilities', 'accesslib.php.source.html#l6416')" href="accesslib.php.source.html#l6416">get_capabilities</a>()&nbsp;&nbsp;
<a href="../_functions/get_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns array of relevant context capability records.<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="instance" onClick="logFunction('instance', 'accesslib.php.source.html#l6436')" href="accesslib.php.source.html#l6436">instance</a>(<a href="../_variables/instanceid.html">$instanceid</a>, <a href="../_variables/strictness.html">$strictness</a> = MUST_EXIST)&nbsp;&nbsp;
<a href="../_functions/instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns user context instance.<BR>
</b><BR><b>param:</b> int $instanceid<br>
<b>param:</b> int $strictness<br>
<b>return:</b> context_user context instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_level_instances" onClick="logFunction('create_level_instances', 'accesslib.php.source.html#l6466')" href="accesslib.php.source.html#l6466">create_level_instances</a>()&nbsp;&nbsp;
<a href="../_functions/create_level_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create missing context instances at user context level<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_cleanup_sql" onClick="logFunction('get_cleanup_sql', 'accesslib.php.source.html#l6486')" href="accesslib.php.source.html#l6486">get_cleanup_sql</a>()&nbsp;&nbsp;
<a href="../_functions/get_cleanup_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns sql necessary for purging of stale context instances.<BR>
</b><BR><b>return:</b> string cleanup SQL<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="build_paths" onClick="logFunction('build_paths', 'accesslib.php.source.html#l6503')" href="accesslib.php.source.html#l6503">build_paths</a>(<a href="../_variables/force.html">$force</a>)&nbsp;&nbsp;
<a href="../_functions/build_paths.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Rebuild context paths and depths at user context level.<BR>
</b><BR><b>param:</b> bool $force<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="context_coursecat"><b>context_coursecat</b></a>&nbsp;&nbsp;- <a href="../_classes/context_coursecat.html"><small>X-Ref</small></a>
</p>
<b>Course category context class<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'accesslib.php.source.html#l6544')" href="accesslib.php.source.html#l6544">__construct</a>(stdClass <a href="../_variables/record.html">$record</a>)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Please use context_coursecat::instance($coursecatid) if you need the instance of context.<BR>
Alternatively if you know only the context id use context::instance_by_id($contextid)<BR>
</b><BR><b>param:</b> stdClass $record<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_level_name" onClick="logFunction('get_level_name', 'accesslib.php.source.html#l6557')" href="accesslib.php.source.html#l6557">get_level_name</a>()&nbsp;&nbsp;
<a href="../_functions/get_level_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context level name.<BR>
</b><BR><b>return:</b> string the human readable context level name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context_name" onClick="logFunction('get_context_name', 'accesslib.php.source.html#l6567')" href="accesslib.php.source.html#l6567">get_context_name</a>(<a href="../_variables/withprefix.html">$withprefix</a> = true, <a href="../_variables/short.html">$short</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_context_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context identifier.<BR>
</b><BR><b>param:</b> boolean $withprefix whether to prefix the name of the context with Category<br>
<b>param:</b> boolean $short does not apply to course categories<br>
<b>return:</b> string the human readable context name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_url" onClick="logFunction('get_url', 'accesslib.php.source.html#l6587')" href="accesslib.php.source.html#l6587">get_url</a>()&nbsp;&nbsp;
<a href="../_functions/get_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the most relevant URL for this context.<BR>
</b><BR><b>return:</b> moodle_url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_capabilities" onClick="logFunction('get_capabilities', 'accesslib.php.source.html#l6596')" href="accesslib.php.source.html#l6596">get_capabilities</a>()&nbsp;&nbsp;
<a href="../_functions/get_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns array of relevant context capability records.<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="instance" onClick="logFunction('instance', 'accesslib.php.source.html#l6614')" href="accesslib.php.source.html#l6614">instance</a>(<a href="../_variables/instanceid.html">$instanceid</a>, <a href="../_variables/strictness.html">$strictness</a> = MUST_EXIST)&nbsp;&nbsp;
<a href="../_functions/instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns course category context instance.<BR>
</b><BR><b>param:</b> int $instanceid<br>
<b>param:</b> int $strictness<br>
<b>return:</b> context_coursecat context instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_child_contexts" onClick="logFunction('get_child_contexts', 'accesslib.php.source.html#l6649')" href="accesslib.php.source.html#l6649">get_child_contexts</a>()&nbsp;&nbsp;
<a href="../_functions/get_child_contexts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns immediate child contexts of category and all subcategories,<BR>
children of subcategories and courses are not returned.<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_level_instances" onClick="logFunction('create_level_instances', 'accesslib.php.source.html#l6677')" href="accesslib.php.source.html#l6677">create_level_instances</a>()&nbsp;&nbsp;
<a href="../_functions/create_level_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create missing context instances at course category context level<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_cleanup_sql" onClick="logFunction('get_cleanup_sql', 'accesslib.php.source.html#l6696')" href="accesslib.php.source.html#l6696">get_cleanup_sql</a>()&nbsp;&nbsp;
<a href="../_functions/get_cleanup_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns sql necessary for purging of stale context instances.<BR>
</b><BR><b>return:</b> string cleanup SQL<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="build_paths" onClick="logFunction('build_paths', 'accesslib.php.source.html#l6713')" href="accesslib.php.source.html#l6713">build_paths</a>(<a href="../_variables/force.html">$force</a>)&nbsp;&nbsp;
<a href="../_functions/build_paths.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Rebuild context paths and depths at course category context level.<BR>
</b><BR><b>param:</b> bool $force<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="context_course"><b>context_course</b></a>&nbsp;&nbsp;- <a href="../_classes/context_course.html"><small>X-Ref</small></a>
</p>
<b>Course context class<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'accesslib.php.source.html#l6776')" href="accesslib.php.source.html#l6776">__construct</a>(stdClass <a href="../_variables/record.html">$record</a>)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Please use context_course::instance($courseid) if you need the instance of context.<BR>
Alternatively if you know only the context id use context::instance_by_id($contextid)<BR>
</b><BR><b>param:</b> stdClass $record<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_level_name" onClick="logFunction('get_level_name', 'accesslib.php.source.html#l6789')" href="accesslib.php.source.html#l6789">get_level_name</a>()&nbsp;&nbsp;
<a href="../_functions/get_level_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context level name.<BR>
</b><BR><b>return:</b> string the human readable context level name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context_name" onClick="logFunction('get_context_name', 'accesslib.php.source.html#l6799')" href="accesslib.php.source.html#l6799">get_context_name</a>(<a href="../_variables/withprefix.html">$withprefix</a> = true, <a href="../_variables/short.html">$short</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_context_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context identifier.<BR>
</b><BR><b>param:</b> boolean $withprefix whether to prefix the name of the context with Course<br>
<b>param:</b> boolean $short whether to use the short name of the thing.<br>
<b>return:</b> string the human readable context name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_url" onClick="logFunction('get_url', 'accesslib.php.source.html#l6827')" href="accesslib.php.source.html#l6827">get_url</a>()&nbsp;&nbsp;
<a href="../_functions/get_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the most relevant URL for this context.<BR>
</b><BR><b>return:</b> moodle_url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_capabilities" onClick="logFunction('get_capabilities', 'accesslib.php.source.html#l6840')" href="accesslib.php.source.html#l6840">get_capabilities</a>()&nbsp;&nbsp;
<a href="../_functions/get_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns array of relevant context capability records.<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_course_context" onClick="logFunction('get_course_context', 'accesslib.php.source.html#l6858')" href="accesslib.php.source.html#l6858">get_course_context</a>(<a href="../_variables/strict.html">$strict</a> = true)&nbsp;&nbsp;
<a href="../_functions/get_course_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is this context part of any course? If yes return course context.<BR>
</b><BR><b>param:</b> bool $strict true means throw exception if not found, false means return false if not found<br>
<b>return:</b> context_course context of the enclosing course, null if not found or exception<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="instance" onClick="logFunction('instance', 'accesslib.php.source.html#l6868')" href="accesslib.php.source.html#l6868">instance</a>(<a href="../_variables/instanceid.html">$instanceid</a>, <a href="../_variables/strictness.html">$strictness</a> = MUST_EXIST)&nbsp;&nbsp;
<a href="../_functions/instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns course context instance.<BR>
</b><BR><b>param:</b> int $instanceid<br>
<b>param:</b> int $strictness<br>
<b>return:</b> context_course context instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_level_instances" onClick="logFunction('create_level_instances', 'accesslib.php.source.html#l6903')" href="accesslib.php.source.html#l6903">create_level_instances</a>()&nbsp;&nbsp;
<a href="../_functions/create_level_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create missing context instances at course context level<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_cleanup_sql" onClick="logFunction('get_cleanup_sql', 'accesslib.php.source.html#l6922')" href="accesslib.php.source.html#l6922">get_cleanup_sql</a>()&nbsp;&nbsp;
<a href="../_functions/get_cleanup_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns sql necessary for purging of stale context instances.<BR>
</b><BR><b>return:</b> string cleanup SQL<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="build_paths" onClick="logFunction('build_paths', 'accesslib.php.source.html#l6939')" href="accesslib.php.source.html#l6939">build_paths</a>(<a href="../_variables/force.html">$force</a>)&nbsp;&nbsp;
<a href="../_functions/build_paths.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Rebuild context paths and depths at course context level.<BR>
</b><BR><b>param:</b> bool $force<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="context_module"><b>context_module</b></a>&nbsp;&nbsp;- <a href="../_classes/context_module.html"><small>X-Ref</small></a>
</p>
<b>Course module context class<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'accesslib.php.source.html#l6998')" href="accesslib.php.source.html#l6998">__construct</a>(stdClass <a href="../_variables/record.html">$record</a>)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Please use context_module::instance($cmid) if you need the instance of context.<BR>
Alternatively if you know only the context id use context::instance_by_id($contextid)<BR>
</b><BR><b>param:</b> stdClass $record<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_level_name" onClick="logFunction('get_level_name', 'accesslib.php.source.html#l7011')" href="accesslib.php.source.html#l7011">get_level_name</a>()&nbsp;&nbsp;
<a href="../_functions/get_level_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context level name.<BR>
</b><BR><b>return:</b> string the human readable context level name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context_name" onClick="logFunction('get_context_name', 'accesslib.php.source.html#l7021')" href="accesslib.php.source.html#l7021">get_context_name</a>(<a href="../_variables/withprefix.html">$withprefix</a> = true, <a href="../_variables/short.html">$short</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_context_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context identifier.<BR>
</b><BR><b>param:</b> boolean $withprefix whether to prefix the name of the context with the<br>
<b>param:</b> boolean $short does not apply to module context<br>
<b>return:</b> string the human readable context name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_url" onClick="logFunction('get_url', 'accesslib.php.source.html#l7047')" href="accesslib.php.source.html#l7047">get_url</a>()&nbsp;&nbsp;
<a href="../_functions/get_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the most relevant URL for this context.<BR>
</b><BR><b>return:</b> moodle_url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_capabilities" onClick="logFunction('get_capabilities', 'accesslib.php.source.html#l7065')" href="accesslib.php.source.html#l7065">get_capabilities</a>()&nbsp;&nbsp;
<a href="../_functions/get_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns array of relevant context capability records.<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_course_context" onClick="logFunction('get_course_context', 'accesslib.php.source.html#l7119')" href="accesslib.php.source.html#l7119">get_course_context</a>(<a href="../_variables/strict.html">$strict</a> = true)&nbsp;&nbsp;
<a href="../_functions/get_course_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is this context part of any course? If yes return course context.<BR>
</b><BR><b>param:</b> bool $strict true means throw exception if not found, false means return false if not found<br>
<b>return:</b> context_course context of the enclosing course, null if not found or exception<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="instance" onClick="logFunction('instance', 'accesslib.php.source.html#l7129')" href="accesslib.php.source.html#l7129">instance</a>(<a href="../_variables/instanceid.html">$instanceid</a>, <a href="../_variables/strictness.html">$strictness</a> = MUST_EXIST)&nbsp;&nbsp;
<a href="../_functions/instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns module context instance.<BR>
</b><BR><b>param:</b> int $instanceid<br>
<b>param:</b> int $strictness<br>
<b>return:</b> context_module context instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_level_instances" onClick="logFunction('create_level_instances', 'accesslib.php.source.html#l7160')" href="accesslib.php.source.html#l7160">create_level_instances</a>()&nbsp;&nbsp;
<a href="../_functions/create_level_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create missing context instances at module context level<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_cleanup_sql" onClick="logFunction('get_cleanup_sql', 'accesslib.php.source.html#l7179')" href="accesslib.php.source.html#l7179">get_cleanup_sql</a>()&nbsp;&nbsp;
<a href="../_functions/get_cleanup_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns sql necessary for purging of stale context instances.<BR>
</b><BR><b>return:</b> string cleanup SQL<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="build_paths" onClick="logFunction('build_paths', 'accesslib.php.source.html#l7196')" href="accesslib.php.source.html#l7196">build_paths</a>(<a href="../_variables/force.html">$force</a>)&nbsp;&nbsp;
<a href="../_functions/build_paths.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Rebuild context paths and depths at module context level.<BR>
</b><BR><b>param:</b> bool $force<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="context_block"><b>context_block</b></a>&nbsp;&nbsp;- <a href="../_classes/context_block.html"><small>X-Ref</small></a>
</p>
<b>Block context class<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'accesslib.php.source.html#l7240')" href="accesslib.php.source.html#l7240">__construct</a>(stdClass <a href="../_variables/record.html">$record</a>)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Please use context_block::instance($blockinstanceid) if you need the instance of context.<BR>
Alternatively if you know only the context id use context::instance_by_id($contextid)<BR>
</b><BR><b>param:</b> stdClass $record<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_level_name" onClick="logFunction('get_level_name', 'accesslib.php.source.html#l7253')" href="accesslib.php.source.html#l7253">get_level_name</a>()&nbsp;&nbsp;
<a href="../_functions/get_level_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context level name.<BR>
</b><BR><b>return:</b> string the human readable context level name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context_name" onClick="logFunction('get_context_name', 'accesslib.php.source.html#l7263')" href="accesslib.php.source.html#l7263">get_context_name</a>(<a href="../_variables/withprefix.html">$withprefix</a> = true, <a href="../_variables/short.html">$short</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_context_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context identifier.<BR>
</b><BR><b>param:</b> boolean $withprefix whether to prefix the name of the context with Block<br>
<b>param:</b> boolean $short does not apply to block context<br>
<b>return:</b> string the human readable context name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_url" onClick="logFunction('get_url', 'accesslib.php.source.html#l7290')" href="accesslib.php.source.html#l7290">get_url</a>()&nbsp;&nbsp;
<a href="../_functions/get_url.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the most relevant URL for this context.<BR>
</b><BR><b>return:</b> moodle_url<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_capabilities" onClick="logFunction('get_capabilities', 'accesslib.php.source.html#l7300')" href="accesslib.php.source.html#l7300">get_capabilities</a>()&nbsp;&nbsp;
<a href="../_functions/get_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns array of relevant context capability records.<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_course_context" onClick="logFunction('get_course_context', 'accesslib.php.source.html#l7330')" href="accesslib.php.source.html#l7330">get_course_context</a>(<a href="../_variables/strict.html">$strict</a> = true)&nbsp;&nbsp;
<a href="../_functions/get_course_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is this context part of any course? If yes return course context.<BR>
</b><BR><b>param:</b> bool $strict true means throw exception if not found, false means return false if not found<br>
<b>return:</b> context_course context of the enclosing course, null if not found or exception<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="instance" onClick="logFunction('instance', 'accesslib.php.source.html#l7341')" href="accesslib.php.source.html#l7341">instance</a>(<a href="../_variables/instanceid.html">$instanceid</a>, <a href="../_variables/strictness.html">$strictness</a> = MUST_EXIST)&nbsp;&nbsp;
<a href="../_functions/instance.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns block context instance.<BR>
</b><BR><b>param:</b> int $instanceid<br>
<b>param:</b> int $strictness<br>
<b>return:</b> context_block context instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_child_contexts" onClick="logFunction('get_child_contexts', 'accesslib.php.source.html#l7372')" href="accesslib.php.source.html#l7372">get_child_contexts</a>()&nbsp;&nbsp;
<a href="../_functions/get_child_contexts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Block do not have child contexts...<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_level_instances" onClick="logFunction('create_level_instances', 'accesslib.php.source.html#l7380')" href="accesslib.php.source.html#l7380">create_level_instances</a>()&nbsp;&nbsp;
<a href="../_functions/create_level_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create missing context instances at block context level<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_cleanup_sql" onClick="logFunction('get_cleanup_sql', 'accesslib.php.source.html#l7399')" href="accesslib.php.source.html#l7399">get_cleanup_sql</a>()&nbsp;&nbsp;
<a href="../_functions/get_cleanup_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns sql necessary for purging of stale context instances.<BR>
</b><BR><b>return:</b> string cleanup SQL<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="build_paths" onClick="logFunction('build_paths', 'accesslib.php.source.html#l7416')" href="accesslib.php.source.html#l7416">build_paths</a>(<a href="../_variables/force.html">$force</a>)&nbsp;&nbsp;
<a href="../_functions/build_paths.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Rebuild context paths and depths at block context level.<BR>
</b><BR><b>param:</b> bool $force<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_sorted_contexts" onClick="logFunction('get_sorted_contexts', 'accesslib.php.source.html#l7460')" href="accesslib.php.source.html#l7460">get_sorted_contexts</a>(<a href="../_variables/select.html">$select</a>, <a href="../_variables/params.html">$params</a> = array()&nbsp;&nbsp;
<a href="../_functions/get_sorted_contexts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Runs get_records select on context table and returns the result<BR>
Does get_records_select on the context table, and returns the results ordered<BR>
by contextlevel, and then the natural sort order within each level.<BR>
for the purpose of $select, you need to know that the context table has been<BR>
aliased to ctx, so for example, you can call get_sorted_contexts('ctx.depth = 3');<BR>
</b><BR><b>param:</b> string $select the contents of the WHERE clause. Remember to do ctx.fieldname.<br>
<b>param:</b> array $params any parameters required by $select.<br>
<b>return:</b> array the requested context records.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="extract_suspended_users" onClick="logFunction('extract_suspended_users', 'accesslib.php.source.html#l7492')" href="accesslib.php.source.html#l7492">extract_suspended_users</a>(<a href="../_variables/context.html">$context</a>, &amp;<a href="../_variables/users.html">$users</a>, <a href="../_variables/ignoreusers.html">$ignoreusers</a>=array()&nbsp;&nbsp;
<a href="../_functions/extract_suspended_users.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Given context and array of users, returns array of users whose enrolment status is suspended,<BR>
or enrolment has expired or has not started. Also removes those users from the given array<BR>
</b><BR><b>param:</b> context $context context in which suspended users should be extracted.<br>
<b>param:</b> array $users list of users.<br>
<b>param:</b> array $ignoreusers array of user ids to ignore, e.g. guest<br>
<b>return:</b> array list of suspended users.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_suspended_userids" onClick="logFunction('get_suspended_userids', 'accesslib.php.source.html#l7521')" href="accesslib.php.source.html#l7521">get_suspended_userids</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/usecache.html">$usecache</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_suspended_userids.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Given context and array of users, returns array of user ids whose enrolment status is suspended,<BR>
or enrolment has expired or not started.<BR>
</b><BR><b>param:</b> context $context context in which user enrolment is checked.<br>
<b>param:</b> bool $usecache Enable or disable (default) the request cache<br>
<b>return:</b> array list of suspended user id's.<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classtitle"><a name="functions"><b>Functions</b></a></div>
<div class="details-classinfo">
Functions that are not part of a class:<br><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="accesslib_clear_all_caches_for_unit_testing" onClick="logFunction('accesslib_clear_all_caches_for_unit_testing', 'accesslib.php.source.html#l208')" href="accesslib.php.source.html#l208">accesslib_clear_all_caches_for_unit_testing</a>()&nbsp;&nbsp;
<a href="../_functions/accesslib_clear_all_caches_for_unit_testing.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Clears accesslib's private caches. ONLY BE USED BY UNIT TESTS<BR>
</b><BR>This method should ONLY BE USED BY UNIT TESTS. It clears all of<BR>
accesslib's private caches. You need to do this before setting up test data,<BR>
and also at the end of the tests.<BR>
<BR>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="accesslib_clear_all_caches" onClick="logFunction('accesslib_clear_all_caches', 'accesslib.php.source.html#l229')" href="accesslib.php.source.html#l229">accesslib_clear_all_caches</a>(<a href="../_variables/resetcontexts.html">$resetcontexts</a>)&nbsp;&nbsp;
<a href="../_functions/accesslib_clear_all_caches.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Clears accesslib's private caches. ONLY BE USED FROM THIS LIBRARY FILE!<BR>
</b><BR>This reset does not touch global $USER.<BR>
<BR>
<b>param:</b> bool $resetcontexts<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_role_access" onClick="logFunction('get_role_access', 'accesslib.php.source.html#l251')" href="accesslib.php.source.html#l251">get_role_access</a>(<a href="../_variables/roleid.html">$roleid</a>)&nbsp;&nbsp;
<a href="../_functions/get_role_access.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets the accessdata for role &quot;sitewide&quot; (system down to course)<BR>
</b><BR><b>param:</b> int $roleid<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_guest_role" onClick="logFunction('get_guest_role', 'accesslib.php.source.html#l317')" href="accesslib.php.source.html#l317">get_guest_role</a>()&nbsp;&nbsp;
<a href="../_functions/get_guest_role.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the default guest role, this is used for guest account,<BR>
search engine spiders, etc.<BR>
</b><BR><b>return:</b> stdClass role record<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_capability" onClick="logFunction('has_capability', 'accesslib.php.source.html#l346')" href="accesslib.php.source.html#l346">has_capability</a>(<a href="../_variables/capability.html">$capability</a>, context <a href="../_variables/context.html">$context</a>, <a href="../_variables/user.html">$user</a> = null, <a href="../_variables/doanything.html">$doanything</a> = true)&nbsp;&nbsp;
<a href="../_functions/has_capability.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check whether a user has a particular capability in a given context.<BR>
</b><BR>For example:<BR>
$context = context_module::instance($cm-&gt;id);<BR>
has_capability('mod/forum:replypost', $context)<BR>
<BR>
By default checks the capabilities of the current user, but you can pass a<BR>
different userid. By default will return true for admin users, but you can override that with the fourth argument.<BR>
<BR>
Guest and not-logged-in users can never get any dangerous capability - that is any write capability<BR>
or capabilities with XSS, config or data loss risks.<BR>
<BR>
<b>param:</b> string $capability the name of the capability to check. For example mod/forum:view<br>
<b>param:</b> context $context the context to check the capability in. You normally get this with instance method of a context class.<br>
<b>param:</b> integer|stdClass $user A user id or object. By default (null) checks the permissions of the current user.<br>
<b>param:</b> boolean $doanything If false, ignores effect of admin role assignment<br>
<b>return:</b> boolean true if the user has this capability. Otherwise false.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_any_capability" onClick="logFunction('has_any_capability', 'accesslib.php.source.html#l498')" href="accesslib.php.source.html#l498">has_any_capability</a>(array <a href="../_variables/capabilities.html">$capabilities</a>, context <a href="../_variables/context.html">$context</a>, <a href="../_variables/user.html">$user</a> = null, <a href="../_variables/doanything.html">$doanything</a> = true)&nbsp;&nbsp;
<a href="../_functions/has_any_capability.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check if the user has any one of several capabilities from a list.<BR>
</b><BR>This is just a utility method that calls has_capability in a loop. Try to put<BR>
the capabilities that most users are likely to have first in the list for best<BR>
performance.<BR>
<BR>
<b>param:</b> array $capabilities an array of capability names.<br>
<b>param:</b> context $context the context to check the capability in. You normally get this with instance method of a context class.<br>
<b>param:</b> integer|stdClass $user A user id or object. By default (null) checks the permissions of the current user.<br>
<b>param:</b> boolean $doanything If false, ignore effect of admin role assignment<br>
<b>return:</b> boolean true if the user has any of these capabilities. Otherwise false.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_all_capabilities" onClick="logFunction('has_all_capabilities', 'accesslib.php.source.html#l523')" href="accesslib.php.source.html#l523">has_all_capabilities</a>(array <a href="../_variables/capabilities.html">$capabilities</a>, context <a href="../_variables/context.html">$context</a>, <a href="../_variables/user.html">$user</a> = null, <a href="../_variables/doanything.html">$doanything</a> = true)&nbsp;&nbsp;
<a href="../_functions/has_all_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check if the user has all the capabilities in a list.<BR>
</b><BR>This is just a utility method that calls has_capability in a loop. Try to put<BR>
the capabilities that fewest users are likely to have first in the list for best<BR>
performance.<BR>
<BR>
<b>param:</b> array $capabilities an array of capability names.<br>
<b>param:</b> context $context the context to check the capability in. You normally get this with instance method of a context class.<br>
<b>param:</b> integer|stdClass $user A user id or object. By default (null) checks the permissions of the current user.<br>
<b>param:</b> boolean $doanything If false, ignore effect of admin role assignment<br>
<b>return:</b> boolean true if the user has all of these capabilities. Otherwise false.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="guess_if_creator_will_have_course_capability" onClick="logFunction('guess_if_creator_will_have_course_capability', 'accesslib.php.source.html#l548')" href="accesslib.php.source.html#l548">guess_if_creator_will_have_course_capability</a>(<a href="../_variables/capability.html">$capability</a>, context <a href="../_variables/context.html">$context</a>, <a href="../_variables/user.html">$user</a> = null)&nbsp;&nbsp;
<a href="../_functions/guess_if_creator_will_have_course_capability.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is course creator going to have capability in a new course?<BR>
</b><BR>This is intended to be used in enrolment plugins before or during course creation,<BR>
do not use after the course is fully created.<BR>
<BR>
<b>param:</b> string $capability the name of the capability to check.<br>
<b>param:</b> context $context course or category context where is course going to be created<br>
<b>param:</b> integer|stdClass $user A user id or object. By default (null) checks the permissions of the current user.<br>
<b>return:</b> boolean true if the user will have this capability.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_siteadmin" onClick="logFunction('is_siteadmin', 'accesslib.php.source.html#l604')" href="accesslib.php.source.html#l604">is_siteadmin</a>(<a href="../_variables/user_or_id.html">$user_or_id</a> = null)&nbsp;&nbsp;
<a href="../_functions/is_siteadmin.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check if the user is an admin at the site level.<BR>
</b><BR>Please note that use of proper capabilities is always encouraged,<BR>
this function is supposed to be used from core or for temporary hacks.<BR>
<BR>
<b>param:</b> int|stdClass&nbsp;&nbsp;$user_or_id user id or user object<br>
<b>return:</b> bool true if user is one of the administrators, false otherwise<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_coursecontact_role" onClick="logFunction('has_coursecontact_role', 'accesslib.php.source.html#l648')" href="accesslib.php.source.html#l648">has_coursecontact_role</a>(<a href="../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../_functions/has_coursecontact_role.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if user has at least one role assign<BR>
of 'coursecontact' role (is potentially listed in some course descriptions).<BR>
</b><BR><b>param:</b> int $userid<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_capability_in_accessdata" onClick="logFunction('has_capability_in_accessdata', 'accesslib.php.source.html#l667')" href="accesslib.php.source.html#l667">has_capability_in_accessdata</a>(<a href="../_variables/capability.html">$capability</a>, context <a href="../_variables/context.html">$context</a>, array &amp;<a href="../_variables/accessdata.html">$accessdata</a>)&nbsp;&nbsp;
<a href="../_functions/has_capability_in_accessdata.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Does the user have a capability to do something?<BR>
</b><BR>Walk the accessdata array and return true/false.<BR>
Deals with prohibits, role switching, aggregating<BR>
capabilities, etc.<BR>
<BR>
The main feature of here is being FAST and with no<BR>
side effects.<BR>
<BR>
Notes:<BR>
<BR>
Switch Role merges with default role<BR>
------------------------------------<BR>
If you are a teacher in course X, you have at least<BR>
teacher-in-X + defaultloggedinuser-sitewide. So in the<BR>
course you'll have techer+defaultloggedinuser.<BR>
We try to mimic that in switchrole.<BR>
<BR>
Permission evaluation<BR>
---------------------<BR>
Originally there was an extremely complicated way<BR>
to determine the user access that dealt with<BR>
&quot;locality&quot; or role assignments and role overrides.<BR>
Now we simply evaluate access for each role separately<BR>
and then verify if user has at least one role with allow<BR>
and at the same time no role with prohibit.<BR>
<BR>
<b>param:</b> string $capability<br>
<b>param:</b> context $context<br>
<b>param:</b> array $accessdata<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="require_capability" onClick="logFunction('require_capability', 'accesslib.php.source.html#l764')" href="accesslib.php.source.html#l764">require_capability</a>(<a href="../_variables/capability.html">$capability</a>, context <a href="../_variables/context.html">$context</a>, <a href="../_variables/userid.html">$userid</a> = null, <a href="../_variables/doanything.html">$doanything</a> = true,<a href="../_variables/errormessage.html">$errormessage</a> = 'nopermissions', <a href="../_variables/stringfile.html">$stringfile</a> = '')&nbsp;&nbsp;
<a href="../_functions/require_capability.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>A convenience function that tests has_capability, and displays an error if<BR>
the user does not have that capability.<BR>
</b><BR>NOTE before Moodle 2.0, this function attempted to make an appropriate<BR>
require_login call before checking the capability. This is no longer the case.<BR>
You must call require_login (or one of its variants) if you want to check the<BR>
user is logged in, before you call this function.<BR>
<BR>
<b>param:</b> string $capability the name of the capability to check. For example mod/forum:view<br>
<b>param:</b> context $context the context to check the capability in. You normally get this with context_xxxx::instance().<br>
<b>param:</b> int $userid A user id. By default (null) checks the permissions of the current user.<br>
<b>param:</b> bool $doanything If false, ignore effect of admin role assignment<br>
<b>param:</b> string $errormessage The error string to to user. Defaults to 'nopermissions'.<br>
<b>param:</b> string $stringfile The language file to load the error string from. Defaults to 'error'.<br>
<b>return:</b> void terminates with an error if the user does not have the given capability.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_user_access_sitewide" onClick="logFunction('get_user_access_sitewide', 'accesslib.php.source.html#l790')" href="accesslib.php.source.html#l790">get_user_access_sitewide</a>(<a href="../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../_functions/get_user_access_sitewide.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return a nested array showing role assignments<BR>
all relevant role capabilities for the user at<BR>
site/course_category/course levels<BR>
</b><BR>We do _not_ delve deeper than courses because the number of<BR>
overrides at the module/block levels can be HUGE.<BR>
<BR>
[ra]&nbsp;&nbsp;&nbsp;=&gt; [/path][roleid]=roleid<BR>
[rdef] =&gt; [/path:roleid][capability]=permission<BR>
<BR>
<b>param:</b> int $userid - the id of the user<br>
<b>return:</b> array access info array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_course_context" onClick="logFunction('load_course_context', 'accesslib.php.source.html#l910')" href="accesslib.php.source.html#l910">load_course_context</a>(<a href="../_variables/userid.html">$userid</a>, context_course <a href="../_variables/coursecontext.html">$coursecontext</a>, &amp;<a href="../_variables/accessdata.html">$accessdata</a>)&nbsp;&nbsp;
<a href="../_functions/load_course_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Add to the access ctrl array the data needed by a user for a given course.<BR>
</b><BR>This function injects all course related access info into the accessdata array.<BR>
<BR>
<b>param:</b> int $userid the id of the user<br>
<b>param:</b> context_course $coursecontext course context<br>
<b>param:</b> array $accessdata accessdata array (modified)<br>
<b>return:</b> void modifies $accessdata parameter<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_role_access_by_context" onClick="logFunction('load_role_access_by_context', 'accesslib.php.source.html#l1028')" href="accesslib.php.source.html#l1028">load_role_access_by_context</a>(<a href="../_variables/roleid.html">$roleid</a>, context <a href="../_variables/context.html">$context</a>, &amp;<a href="../_variables/accessdata.html">$accessdata</a>)&nbsp;&nbsp;
<a href="../_functions/load_role_access_by_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Add to the access ctrl array the data needed by a role for a given context.<BR>
</b><BR>The data is added in the rdef key.<BR>
This role-centric function is useful for role_switching<BR>
and temporary course roles.<BR>
<BR>
<b>param:</b> int $roleid the id of the user<br>
<b>param:</b> context $context needs path!<br>
<b>param:</b> array $accessdata accessdata array (is modified)<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_empty_accessdata" onClick="logFunction('get_empty_accessdata', 'accesslib.php.source.html#l1086')" href="accesslib.php.source.html#l1086">get_empty_accessdata</a>()&nbsp;&nbsp;
<a href="../_functions/get_empty_accessdata.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns empty accessdata structure.<BR>
</b><BR><b>return:</b> array empt accessdata<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_user_accessdata" onClick="logFunction('get_user_accessdata', 'accesslib.php.source.html#l1105')" href="accesslib.php.source.html#l1105">get_user_accessdata</a>(<a href="../_variables/userid.html">$userid</a>, <a href="../_variables/preloadonly.html">$preloadonly</a>=false)&nbsp;&nbsp;
<a href="../_functions/get_user_accessdata.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get accessdata for a given user.<BR>
</b><BR><b>param:</b> int $userid<br>
<b>param:</b> bool $preloadonly true means do not return access array<br>
<b>return:</b> array accessdata<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="dedupe_user_access" onClick="logFunction('dedupe_user_access', 'accesslib.php.source.html#l1155')" href="accesslib.php.source.html#l1155">dedupe_user_access</a>()&nbsp;&nbsp;
<a href="../_functions/dedupe_user_access.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Try to minimise the size of $USER-&gt;access by eliminating duplicate override storage,<BR>
this function looks for contexts with the same overrides and shares them.<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_all_capabilities" onClick="logFunction('load_all_capabilities', 'accesslib.php.source.html#l1194')" href="accesslib.php.source.html#l1194">load_all_capabilities</a>()&nbsp;&nbsp;
<a href="../_functions/load_all_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>A convenience function to completely load all the capabilities<BR>
for the current user. It is called from has_capability() and functions change permissions.<BR>
</b><BR>Call it only _after_ you've setup $USER and called check_enrolment_plugins();<BR>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="reload_all_capabilities" onClick="logFunction('reload_all_capabilities', 'accesslib.php.source.html#l1230')" href="accesslib.php.source.html#l1230">reload_all_capabilities</a>()&nbsp;&nbsp;
<a href="../_functions/reload_all_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>A convenience function to completely reload all the capabilities<BR>
for the current user when roles have been updated in a relevant<BR>
context -- but PRESERVING switchroles and loginas.<BR>
This function resets all accesslib and context caches.<BR>
</b><BR>That is - completely transparent to the user.<BR>
<BR>
Note: reloads $USER-&gt;access completely.<BR>
<BR>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_temp_course_role" onClick="logFunction('load_temp_course_role', 'accesslib.php.source.html#l1266')" href="accesslib.php.source.html#l1266">load_temp_course_role</a>(context_course <a href="../_variables/coursecontext.html">$coursecontext</a>, <a href="../_variables/roleid.html">$roleid</a>)&nbsp;&nbsp;
<a href="../_functions/load_temp_course_role.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Adds a temp role to current USER-&gt;access array.<BR>
</b><BR>Useful for the &quot;temporary guest&quot; access we grant to logged-in users.<BR>
This is useful for enrol plugins only.<BR>
<BR>
<b>param:</b> context_course $coursecontext<br>
<b>param:</b> int $roleid<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="remove_temp_course_roles" onClick="logFunction('remove_temp_course_roles', 'accesslib.php.source.html#l1308')" href="accesslib.php.source.html#l1308">remove_temp_course_roles</a>(context_course <a href="../_variables/coursecontext.html">$coursecontext</a>)&nbsp;&nbsp;
<a href="../_functions/remove_temp_course_roles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Removes any extra guest roles from current USER-&gt;access array.<BR>
This is useful for enrol plugins only.<BR>
</b><BR><b>param:</b> context_course $coursecontext<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_role_archetypes" onClick="logFunction('get_role_archetypes', 'accesslib.php.source.html#l1340')" href="accesslib.php.source.html#l1340">get_role_archetypes</a>()&nbsp;&nbsp;
<a href="../_functions/get_role_archetypes.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns array of all role archetypes.<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="assign_legacy_capabilities" onClick="logFunction('assign_legacy_capabilities', 'accesslib.php.source.html#l1358')" href="accesslib.php.source.html#l1358">assign_legacy_capabilities</a>(<a href="../_variables/capability.html">$capability</a>, <a href="../_variables/legacyperms.html">$legacyperms</a>)&nbsp;&nbsp;
<a href="../_functions/assign_legacy_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Assign the defaults found in this capability definition to roles that have<BR>
the corresponding legacy capabilities assigned to them.<BR>
</b><BR><b>param:</b> string $capability<br>
<b>param:</b> array $legacyperms an array in the format (example):<br>
<b>return:</b> boolean success or failure.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_safe_capability" onClick="logFunction('is_safe_capability', 'accesslib.php.source.html#l1400')" href="accesslib.php.source.html#l1400">is_safe_capability</a>(<a href="../_variables/capability.html">$capability</a>)&nbsp;&nbsp;
<a href="../_functions/is_safe_capability.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Verify capability risks.<BR>
</b><BR><b>param:</b> stdClass $capability a capability - a row from the capabilities table.<br>
<b>return:</b> boolean whether this capability is safe - that is, whether people with the<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_local_override" onClick="logFunction('get_local_override', 'accesslib.php.source.html#l1411')" href="accesslib.php.source.html#l1411">get_local_override</a>(<a href="../_variables/roleid.html">$roleid</a>, <a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/capability.html">$capability</a>)&nbsp;&nbsp;
<a href="../_functions/get_local_override.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the local override (if any) for a given capability in a role in a context<BR>
</b><BR><b>param:</b> int $roleid<br>
<b>param:</b> int $contextid<br>
<b>param:</b> string $capability<br>
<b>return:</b> stdClass local capability override<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context_info_array" onClick="logFunction('get_context_info_array', 'accesslib.php.source.html#l1424')" href="accesslib.php.source.html#l1424">get_context_info_array</a>(<a href="../_variables/contextid.html">$contextid</a>)&nbsp;&nbsp;
<a href="../_functions/get_context_info_array.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns context instance plus related course and cm instances<BR>
</b><BR><b>param:</b> int $contextid<br>
<b>return:</b> array of ($context, $course, $cm)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_role" onClick="logFunction('create_role', 'accesslib.php.source.html#l1458')" href="accesslib.php.source.html#l1458">create_role</a>(<a href="../_variables/name.html">$name</a>, <a href="../_variables/shortname.html">$shortname</a>, <a href="../_variables/description.html">$description</a>, <a href="../_variables/archetype.html">$archetype</a> = '')&nbsp;&nbsp;
<a href="../_functions/create_role.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Function that creates a role<BR>
</b><BR><b>param:</b> string $name role name<br>
<b>param:</b> string $shortname role short name<br>
<b>param:</b> string $description role description<br>
<b>param:</b> string $archetype<br>
<b>return:</b> int id or dml_exception<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_role" onClick="logFunction('delete_role', 'accesslib.php.source.html#l1497')" href="accesslib.php.source.html#l1497">delete_role</a>(<a href="../_variables/roleid.html">$roleid</a>)&nbsp;&nbsp;
<a href="../_functions/delete_role.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Function that deletes a role and cleanups up after it<BR>
</b><BR><b>param:</b> int $roleid id of role to delete<br>
<b>return:</b> bool always true<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="assign_capability" onClick="logFunction('assign_capability', 'accesslib.php.source.html#l1543')" href="accesslib.php.source.html#l1543">assign_capability</a>(<a href="../_variables/capability.html">$capability</a>, <a href="../_variables/permission.html">$permission</a>, <a href="../_variables/roleid.html">$roleid</a>, <a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/overwrite.html">$overwrite</a> = false)&nbsp;&nbsp;
<a href="../_functions/assign_capability.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Function to write context specific overrides, or default capabilities.<BR>
</b><BR>NOTE: use $context-&gt;mark_dirty() after this<BR>
<BR>
<b>param:</b> string $capability string name<br>
<b>param:</b> int $permission CAP_ constants<br>
<b>param:</b> int $roleid role id<br>
<b>param:</b> int|context $contextid context id<br>
<b>param:</b> bool $overwrite<br>
<b>return:</b> bool always true or exception<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="unassign_capability" onClick="logFunction('unassign_capability', 'accesslib.php.source.html#l1594')" href="accesslib.php.source.html#l1594">unassign_capability</a>(<a href="../_variables/capability.html">$capability</a>, <a href="../_variables/roleid.html">$roleid</a>, <a href="../_variables/contextid.html">$contextid</a> = null)&nbsp;&nbsp;
<a href="../_functions/unassign_capability.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Unassign a capability from a role.<BR>
</b><BR>NOTE: use $context-&gt;mark_dirty() after this<BR>
<BR>
<b>param:</b> string $capability the name of the capability<br>
<b>param:</b> int $roleid the role id<br>
<b>param:</b> int|context $contextid null means all contexts<br>
<b>return:</b> boolean true or exception<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_roles_with_capability" onClick="logFunction('get_roles_with_capability', 'accesslib.php.source.html#l1621')" href="accesslib.php.source.html#l1621">get_roles_with_capability</a>(<a href="../_variables/capability.html">$capability</a>, <a href="../_variables/permission.html">$permission</a> = null, <a href="../_variables/context.html">$context</a> = null)&nbsp;&nbsp;
<a href="../_functions/get_roles_with_capability.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the roles that have a given capability assigned to it<BR>
</b><BR>This function does not resolve the actual permission of the capability.<BR>
It just checks for permissions and overrides.<BR>
Use get_roles_with_cap_in_context() if resolution is required.<BR>
<BR>
<b>param:</b> string $capability capability name (string)<br>
<b>param:</b> string $permission optional, the permission defined for this capability<br>
<b>param:</b> stdClass $context null means any<br>
<b>return:</b> array of role records<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="role_assign" onClick="logFunction('role_assign', 'accesslib.php.source.html#l1666')" href="accesslib.php.source.html#l1666">role_assign</a>(<a href="../_variables/roleid.html">$roleid</a>, <a href="../_variables/userid.html">$userid</a>, <a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/component.html">$component</a> = '', <a href="../_variables/itemid.html">$itemid</a> = 0, <a href="../_variables/timemodified.html">$timemodified</a> = '')&nbsp;&nbsp;
<a href="../_functions/role_assign.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function makes a role-assignment (a role for a user in a particular context)<BR>
</b><BR><b>param:</b> int $roleid the role of the id<br>
<b>param:</b> int $userid userid<br>
<b>param:</b> int|context $contextid id of the context<br>
<b>param:</b> string $component example 'enrol_ldap', defaults to '' which means manual assignment,<br>
<b>param:</b> int $itemid id of enrolment/auth plugin<br>
<b>param:</b> string $timemodified defaults to current time<br>
<b>return:</b> int new/existing id of the assignment<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="role_unassign" onClick="logFunction('role_unassign', 'accesslib.php.source.html#l1775')" href="accesslib.php.source.html#l1775">role_unassign</a>(<a href="../_variables/roleid.html">$roleid</a>, <a href="../_variables/userid.html">$userid</a>, <a href="../_variables/contextid.html">$contextid</a>, <a href="../_variables/component.html">$component</a> = '', <a href="../_variables/itemid.html">$itemid</a> = 0)&nbsp;&nbsp;
<a href="../_functions/role_unassign.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Removes one role assignment<BR>
</b><BR><b>param:</b> int $roleid<br>
<b>param:</b> int&nbsp;&nbsp;$userid<br>
<b>param:</b> int&nbsp;&nbsp;$contextid<br>
<b>param:</b> string $component<br>
<b>param:</b> int&nbsp;&nbsp;$itemid<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="role_unassign_all" onClick="logFunction('role_unassign_all', 'accesslib.php.source.html#l1805')" href="accesslib.php.source.html#l1805">role_unassign_all</a>(array <a href="../_variables/params.html">$params</a>, <a href="../_variables/subcontexts.html">$subcontexts</a> = false, <a href="../_variables/includemanual.html">$includemanual</a> = false)&nbsp;&nbsp;
<a href="../_functions/role_unassign_all.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Removes multiple role assignments, parameters may contain:<BR>
'roleid', 'userid', 'contextid', 'component', 'enrolid'.<BR>
</b><BR><b>param:</b> array $params role assignment parameters<br>
<b>param:</b> bool $subcontexts unassign in subcontexts too<br>
<b>param:</b> bool $includemanual include manual role assignments too<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="isloggedin" onClick="logFunction('isloggedin', 'accesslib.php.source.html#l1909')" href="accesslib.php.source.html#l1909">isloggedin</a>()&nbsp;&nbsp;
<a href="../_functions/isloggedin.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Determines if a user is currently logged in<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="isguestuser" onClick="logFunction('isguestuser', 'accesslib.php.source.html#l1922')" href="accesslib.php.source.html#l1922">isguestuser</a>(<a href="../_variables/user.html">$user</a> = null)&nbsp;&nbsp;
<a href="../_functions/isguestuser.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Determines if a user is logged in as real guest user with username 'guest'.<BR>
</b><BR><b>param:</b> int|object $user mixed user object or id, $USER if not specified<br>
<b>return:</b> bool true if user is the real guest user, false if not logged in or other user<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_guest" onClick="logFunction('is_guest', 'accesslib.php.source.html#l1964')" href="accesslib.php.source.html#l1964">is_guest</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/user.html">$user</a> = null)&nbsp;&nbsp;
<a href="../_functions/is_guest.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Does user have a (temporary or real) guest access to course?<BR>
</b><BR><b>param:</b> context $context<br>
<b>param:</b> stdClass|int $user<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_viewing" onClick="logFunction('is_viewing', 'accesslib.php.source.html#l2004')" href="accesslib.php.source.html#l2004">is_viewing</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/user.html">$user</a> = null, <a href="../_variables/withcapability.html">$withcapability</a> = '')&nbsp;&nbsp;
<a href="../_functions/is_viewing.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user has moodle/course:view capability in the course,<BR>
this is intended for admins, managers (aka small admins), inspectors, etc.<BR>
</b><BR><b>param:</b> context $context<br>
<b>param:</b> int|stdClass $user if null $USER is used<br>
<b>param:</b> string $withcapability extra capability name<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_enrolled" onClick="logFunction('is_enrolled', 'accesslib.php.source.html#l2037')" href="accesslib.php.source.html#l2037">is_enrolled</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/user.html">$user</a> = null, <a href="../_variables/withcapability.html">$withcapability</a> = '', <a href="../_variables/onlyactive.html">$onlyactive</a> = false)&nbsp;&nbsp;
<a href="../_functions/is_enrolled.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if user is enrolled (is participating) in course<BR>
this is intended for students and teachers.<BR>
</b><BR>Since 2.2 the result for active enrolments and current user are cached.<BR>
<BR>
<b>param:</b> context $context<br>
<b>param:</b> int|stdClass $user if null $USER is used, otherwise user object or id expected<br>
<b>param:</b> string $withcapability extra capability name<br>
<b>param:</b> bool $onlyactive consider only active enrolments in enabled plugins and time restrictions<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_access_course" onClick="logFunction('can_access_course', 'accesslib.php.source.html#l2129')" href="accesslib.php.source.html#l2129">can_access_course</a>(stdClass <a href="../_variables/course.html">$course</a>, <a href="../_variables/user.html">$user</a> = null, <a href="../_variables/withcapability.html">$withcapability</a> = '', <a href="../_variables/onlyactive.html">$onlyactive</a> = false)&nbsp;&nbsp;
<a href="../_functions/can_access_course.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if the user is able to access the course.<BR>
</b><BR>This function is in no way, shape, or form a substitute for require_login.<BR>
It should only be used in circumstances where it is not possible to call require_login<BR>
such as the navigation.<BR>
<BR>
This function checks many of the methods of access to a course such as the view<BR>
capability, enrollments, and guest access. It also makes use of the cache<BR>
generated by require_login for guest access.<BR>
<BR>
The flags within the $USER object that are used here should NEVER be used outside<BR>
of this function can_access_course and require_login. Doing so WILL break future<BR>
versions.<BR>
<BR>
<b>param:</b> stdClass $course record<br>
<b>param:</b> stdClass|int|null $user user record or id, current user if null<br>
<b>param:</b> string $withcapability Check for this capability as well.<br>
<b>param:</b> bool $onlyactive consider only active enrolments in enabled plugins and time restrictions<br>
<b>return:</b> boolean Returns true if the user is able to access the course<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_enrolled_sql" onClick="logFunction('get_enrolled_sql', 'accesslib.php.source.html#l2246')" href="accesslib.php.source.html#l2246">get_enrolled_sql</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/withcapability.html">$withcapability</a> = '', <a href="../_variables/groupid.html">$groupid</a> = 0, <a href="../_variables/onlyactive.html">$onlyactive</a> = false, <a href="../_variables/onlysuspended.html">$onlysuspended</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_enrolled_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns array with sql code and parameters returning all ids<BR>
of users enrolled into course.<BR>
</b><BR>This function is using 'eu[0-9]+_' prefix for table names and parameters.<BR>
<BR>
<b>param:</b> context $context<br>
<b>param:</b> string $withcapability<br>
<b>param:</b> int $groupid 0 means ignore groups, any other value limits the result by group id<br>
<b>param:</b> bool $onlyactive consider only active enrolments in enabled plugins and time restrictions<br>
<b>param:</b> bool $onlysuspended inverse of onlyactive, consider only suspended enrolments<br>
<b>return:</b> array list($sql, $params)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_enrolled_users" onClick="logFunction('get_enrolled_users', 'accesslib.php.source.html#l2438')" href="accesslib.php.source.html#l2438">get_enrolled_users</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/withcapability.html">$withcapability</a> = '', <a href="../_variables/groupid.html">$groupid</a> = 0, <a href="../_variables/userfields.html">$userfields</a> = 'u.*', <a href="../_variables/orderby.html">$orderby</a> = null,<a href="../_variables/limitfrom.html">$limitfrom</a> = 0, <a href="../_variables/limitnum.html">$limitnum</a> = 0, <a href="../_variables/onlyactive.html">$onlyactive</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_enrolled_users.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns list of users enrolled into course.<BR>
</b><BR><b>param:</b> context $context<br>
<b>param:</b> string $withcapability<br>
<b>param:</b> int $groupid 0 means ignore groups, any other value limits the result by group id<br>
<b>param:</b> string $userfields requested user record fields<br>
<b>param:</b> string $orderby<br>
<b>param:</b> int $limitfrom return a subset of records, starting at this point (optional, required if $limitnum is set).<br>
<b>param:</b> int $limitnum return a subset comprising this many records (optional, required if $limitfrom is set).<br>
<b>param:</b> bool $onlyactive consider only active enrolments in enabled plugins and time restrictions<br>
<b>return:</b> array of user records<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="count_enrolled_users" onClick="logFunction('count_enrolled_users', 'accesslib.php.source.html#l2475')" href="accesslib.php.source.html#l2475">count_enrolled_users</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/withcapability.html">$withcapability</a> = '', <a href="../_variables/groupid.html">$groupid</a> = 0, <a href="../_variables/onlyactive.html">$onlyactive</a> = false)&nbsp;&nbsp;
<a href="../_functions/count_enrolled_users.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Counts list of users enrolled into course (as per above function)<BR>
</b><BR><b>param:</b> context $context<br>
<b>param:</b> string $withcapability<br>
<b>param:</b> int $groupid 0 means ignore groups, any other value limits the result by group id<br>
<b>param:</b> bool $onlyactive consider only active enrolments in enabled plugins and time restrictions<br>
<b>return:</b> array of user records<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_capability_def" onClick="logFunction('load_capability_def', 'accesslib.php.source.html#l2499')" href="accesslib.php.source.html#l2499">load_capability_def</a>(<a href="../_variables/component.html">$component</a>)&nbsp;&nbsp;
<a href="../_functions/load_capability_def.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Loads the capability definitions for the component (from file).<BR>
</b><BR>Loads the capability definitions for the component (from file). If no<BR>
capabilities are defined for the component, we simply return an empty array.<BR>
<BR>
<b>param:</b> string $component full plugin name, examples: 'moodle', 'mod_forum'<br>
<b>return:</b> array array of capabilities<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_cached_capabilities" onClick="logFunction('get_cached_capabilities', 'accesslib.php.source.html#l2526')" href="accesslib.php.source.html#l2526">get_cached_capabilities</a>(<a href="../_variables/component.html">$component</a> = 'moodle')&nbsp;&nbsp;
<a href="../_functions/get_cached_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets the capabilities that have been cached in the database for this component.<BR>
</b><BR><b>param:</b> string $component - examples: 'moodle', 'mod_forum'<br>
<b>return:</b> array array of capabilities<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_default_capabilities" onClick="logFunction('get_default_capabilities', 'accesslib.php.source.html#l2538')" href="accesslib.php.source.html#l2538">get_default_capabilities</a>(<a href="../_variables/archetype.html">$archetype</a>)&nbsp;&nbsp;
<a href="../_functions/get_default_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns default capabilities for given role archetype.<BR>
</b><BR><b>param:</b> string $archetype role archetype<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_default_role_archetype_allows" onClick="logFunction('get_default_role_archetype_allows', 'accesslib.php.source.html#l2579')" href="accesslib.php.source.html#l2579">get_default_role_archetype_allows</a>(<a href="../_variables/type.html">$type</a>, <a href="../_variables/archetype.html">$archetype</a>)&nbsp;&nbsp;
<a href="../_functions/get_default_role_archetype_allows.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return default roles that can be assigned, overridden or switched<BR>
by give role archetype.<BR>
</b><BR><b>param:</b> string $type&nbsp;&nbsp;assign|override|switch<br>
<b>param:</b> string $archetype<br>
<b>return:</b> array of role ids<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="reset_role_capabilities" onClick="logFunction('reset_role_capabilities', 'accesslib.php.source.html#l2652')" href="accesslib.php.source.html#l2652">reset_role_capabilities</a>(<a href="../_variables/roleid.html">$roleid</a>)&nbsp;&nbsp;
<a href="../_functions/reset_role_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Reset role capabilities to default according to selected role archetype.<BR>
If no archetype selected, removes all capabilities.<BR>
</b><BR>This applies to capabilities that are assigned to the role (that you could<BR>
edit in the 'define roles' interface), and not to any capability overrides<BR>
in different locations.<BR>
<BR>
<b>param:</b> int $roleid ID of role to reset capabilities for<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_capabilities" onClick="logFunction('update_capabilities', 'accesslib.php.source.html#l2681')" href="accesslib.php.source.html#l2681">update_capabilities</a>(<a href="../_variables/component.html">$component</a> = 'moodle')&nbsp;&nbsp;
<a href="../_functions/update_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Updates the capabilities table with the component capability definitions.<BR>
If no parameters are given, the function updates the core moodle<BR>
capabilities.<BR>
</b><BR>Note that the absence of the db/access.php capabilities definition file<BR>
will cause any stored capabilities for the component to be removed from<BR>
the database.<BR>
<BR>
<b>param:</b> string $component examples: 'moodle', 'mod/forum', 'block/quiz_results'<br>
<b>return:</b> boolean true if success, exception in case of any problems<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="capabilities_cleanup" onClick="logFunction('capabilities_cleanup', 'accesslib.php.source.html#l2794')" href="accesslib.php.source.html#l2794">capabilities_cleanup</a>(<a href="../_variables/component.html">$component</a>, <a href="../_variables/newcapdef.html">$newcapdef</a> = null)&nbsp;&nbsp;
<a href="../_functions/capabilities_cleanup.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Deletes cached capabilities that are no longer needed by the component.<BR>
Also unassigns these capabilities from any roles that have them.<BR>
NOTE: this function is called from lib/db/upgrade.php<BR>
</b><BR><b>param:</b> string $component examples: 'moodle', 'mod_forum', 'block_quiz_results'<br>
<b>param:</b> array $newcapdef array of the new capability definitions that will be<br>
<b>return:</b> int number of deprecated capabilities that have been removed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_all_risks" onClick="logFunction('get_all_risks', 'accesslib.php.source.html#l2832')" href="accesslib.php.source.html#l2832">get_all_risks</a>()&nbsp;&nbsp;
<a href="../_functions/get_all_risks.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an array of all the known types of risk<BR>
The array keys can be used, for example as CSS class names, or in calls to<BR>
print_risk_icon. The values are the corresponding RISK_ constants.<BR>
</b><BR><b>return:</b> array all the known types of risk.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_capability_docs_link" onClick="logFunction('get_capability_docs_link', 'accesslib.php.source.html#l2850')" href="accesslib.php.source.html#l2850">get_capability_docs_link</a>(<a href="../_variables/capability.html">$capability</a>)&nbsp;&nbsp;
<a href="../_functions/get_capability_docs_link.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return a link to moodle docs for a given capability name<BR>
</b><BR><b>param:</b> stdClass $capability a capability - a row from the mdl_capabilities table.<br>
<b>return:</b> string the human-readable capability name as a link to Moodle Docs.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="role_context_capabilities" onClick="logFunction('role_context_capabilities', 'accesslib.php.source.html#l2861')" href="accesslib.php.source.html#l2861">role_context_capabilities</a>(<a href="../_variables/roleid.html">$roleid</a>, context <a href="../_variables/context.html">$context</a>, <a href="../_variables/cap.html">$cap</a> = '')&nbsp;&nbsp;
<a href="../_functions/role_context_capabilities.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function pulls out all the resolved capabilities (overrides and<BR>
defaults) of a role used in capability overrides in contexts at a given<BR>
context.<BR>
</b><BR><b>param:</b> int $roleid<br>
<b>param:</b> context $context<br>
<b>param:</b> string $cap capability, optional, defaults to ''<br>
<b>return:</b> array Array of capabilities<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context_info_list" onClick="logFunction('get_context_info_list', 'accesslib.php.source.html#l2907')" href="accesslib.php.source.html#l2907">get_context_info_list</a>(context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/get_context_info_list.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructs array with contextids as first parameter and context paths,<BR>
in both cases bottom top including self.<BR>
</b><BR><b>param:</b> context $context<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_inside_frontpage" onClick="logFunction('is_inside_frontpage', 'accesslib.php.source.html#l2926')" href="accesslib.php.source.html#l2926">is_inside_frontpage</a>(context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/is_inside_frontpage.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check if context is the front page context or a context inside it<BR>
</b><BR>Returns true if this context is the front page context, or a context inside it,<BR>
otherwise false.<BR>
<BR>
<b>param:</b> context $context a context object.<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_capability_info" onClick="logFunction('get_capability_info', 'accesslib.php.source.html#l2940')" href="accesslib.php.source.html#l2940">get_capability_info</a>(<a href="../_variables/capabilityname.html">$capabilityname</a>)&nbsp;&nbsp;
<a href="../_functions/get_capability_info.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns capability information (cached)<BR>
</b><BR><b>param:</b> string $capabilityname<br>
<b>return:</b> stdClass or null if capability not found<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_capability_string" onClick="logFunction('get_capability_string', 'accesslib.php.source.html#l2966')" href="accesslib.php.source.html#l2966">get_capability_string</a>(<a href="../_variables/capabilityname.html">$capabilityname</a>)&nbsp;&nbsp;
<a href="../_functions/get_capability_string.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the human-readable, translated version of the capability.<BR>
Basically a big switch statement.<BR>
</b><BR><b>param:</b> string $capabilityname e.g. mod/choice:readresponses<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_component_string" onClick="logFunction('get_component_string', 'accesslib.php.source.html#l3003')" href="accesslib.php.source.html#l3003">get_component_string</a>(<a href="../_variables/component.html">$component</a>, <a href="../_variables/contextlevel.html">$contextlevel</a>)&nbsp;&nbsp;
<a href="../_functions/get_component_string.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This gets the mod/block/course/core etc strings.<BR>
</b><BR><b>param:</b> string $component<br>
<b>param:</b> int $contextlevel<br>
<b>return:</b> string|bool String is success, false if failed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_profile_roles" onClick="logFunction('get_profile_roles', 'accesslib.php.source.html#l3051')" href="accesslib.php.source.html#l3051">get_profile_roles</a>(context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/get_profile_roles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets the list of roles assigned to this context and up (parents)<BR>
from the list of roles that are visible on user profile page<BR>
and participants page.<BR>
</b><BR><b>param:</b> context $context<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_roles_used_in_context" onClick="logFunction('get_roles_used_in_context', 'accesslib.php.source.html#l3087')" href="accesslib.php.source.html#l3087">get_roles_used_in_context</a>(context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/get_roles_used_in_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets the list of roles assigned to this context and up (parents)<BR>
</b><BR><b>param:</b> context $context<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_user_roles_in_course" onClick="logFunction('get_user_roles_in_course', 'accesslib.php.source.html#l3114')" href="accesslib.php.source.html#l3114">get_user_roles_in_course</a>(<a href="../_variables/userid.html">$userid</a>, <a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/get_user_roles_in_course.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function is used to print roles column in user profile page.<BR>
It is using the CFG-&gt;profileroles to limit the list to only interesting roles.<BR>
(The permission tab has full details of user role assignments.)<BR>
</b><BR><b>param:</b> int $userid<br>
<b>param:</b> int $courseid<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="user_can_assign" onClick="logFunction('user_can_assign', 'accesslib.php.source.html#l3170')" href="accesslib.php.source.html#l3170">user_can_assign</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/targetroleid.html">$targetroleid</a>)&nbsp;&nbsp;
<a href="../_functions/user_can_assign.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if a user can assign users to a particular role in this context<BR>
</b><BR><b>param:</b> context $context<br>
<b>param:</b> int $targetroleid - the id of the role you want to assign users to<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_all_roles" onClick="logFunction('get_all_roles', 'accesslib.php.source.html#l3203')" href="accesslib.php.source.html#l3203">get_all_roles</a>(context <a href="../_variables/context.html">$context</a> = null)&nbsp;&nbsp;
<a href="../_functions/get_all_roles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns all site roles in correct sort order.<BR>
</b><BR>Note: this method does not localise role names or descriptions,<BR>
use role_get_names() if you need role names.<BR>
<BR>
<b>param:</b> context $context optional context for course role name aliases<br>
<b>return:</b> array of role records with optional coursealias property<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_archetype_roles" onClick="logFunction('get_archetype_roles', 'accesslib.php.source.html#l3231')" href="accesslib.php.source.html#l3231">get_archetype_roles</a>(<a href="../_variables/archetype.html">$archetype</a>)&nbsp;&nbsp;
<a href="../_functions/get_archetype_roles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns roles of a specified archetype<BR>
</b><BR><b>param:</b> string $archetype<br>
<b>return:</b> array of full role records<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_user_roles" onClick="logFunction('get_user_roles', 'accesslib.php.source.html#l3242')" href="accesslib.php.source.html#l3242">get_user_roles</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/userid.html">$userid</a> = 0, <a href="../_variables/checkparentcontexts.html">$checkparentcontexts</a> = true, <a href="../_variables/order.html">$order</a> = 'c.contextlevel DESC, r.sortorder ASC')&nbsp;&nbsp;
<a href="../_functions/get_user_roles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets all the user roles assigned in this context, or higher contexts<BR>
this is mainly used when checking if a user can assign a role, or overriding a role<BR>
i.e. we need to know what this user holds, in order to verify against allow_assign and<BR>
allow_override tables<BR>
</b><BR><b>param:</b> context $context<br>
<b>param:</b> int $userid<br>
<b>param:</b> bool $checkparentcontexts defaults to true<br>
<b>param:</b> string $order defaults to 'c.contextlevel DESC, r.sortorder ASC'<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_user_roles_with_special" onClick="logFunction('get_user_roles_with_special', 'accesslib.php.source.html#l3286')" href="accesslib.php.source.html#l3286">get_user_roles_with_special</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/userid.html">$userid</a> = 0)&nbsp;&nbsp;
<a href="../_functions/get_user_roles_with_special.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Like get_user_roles, but adds in the authenticated user role, and the front<BR>
page roles, if applicable.<BR>
</b><BR><b>param:</b> context $context the context.<br>
<b>param:</b> int $userid optional. Defaults to $USER-&gt;id<br>
<b>return:</b> array of objects with fields -&gt;userid, -&gt;contextid and -&gt;roleid.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="allow_override" onClick="logFunction('allow_override', 'accesslib.php.source.html#l3333')" href="accesslib.php.source.html#l3333">allow_override</a>(<a href="../_variables/sroleid.html">$sroleid</a>, <a href="../_variables/troleid.html">$troleid</a>)&nbsp;&nbsp;
<a href="../_functions/allow_override.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates a record in the role_allow_override table<BR>
</b><BR><b>param:</b> int $sroleid source roleid<br>
<b>param:</b> int $troleid target roleid<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="allow_assign" onClick="logFunction('allow_assign', 'accesslib.php.source.html#l3349')" href="accesslib.php.source.html#l3349">allow_assign</a>(<a href="../_variables/fromroleid.html">$fromroleid</a>, <a href="../_variables/targetroleid.html">$targetroleid</a>)&nbsp;&nbsp;
<a href="../_functions/allow_assign.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates a record in the role_allow_assign table<BR>
</b><BR><b>param:</b> int $fromroleid source roleid<br>
<b>param:</b> int $targetroleid target roleid<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="allow_switch" onClick="logFunction('allow_switch', 'accesslib.php.source.html#l3365')" href="accesslib.php.source.html#l3365">allow_switch</a>(<a href="../_variables/fromroleid.html">$fromroleid</a>, <a href="../_variables/targetroleid.html">$targetroleid</a>)&nbsp;&nbsp;
<a href="../_functions/allow_switch.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates a record in the role_allow_switch table<BR>
</b><BR><b>param:</b> int $fromroleid source roleid<br>
<b>param:</b> int $targetroleid target roleid<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_assignable_roles" onClick="logFunction('get_assignable_roles', 'accesslib.php.source.html#l3381')" href="accesslib.php.source.html#l3381">get_assignable_roles</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/rolenamedisplay.html">$rolenamedisplay</a> = ROLENAME_ALIAS, <a href="../_variables/withusercounts.html">$withusercounts</a> = false, <a href="../_variables/user.html">$user</a> = null)&nbsp;&nbsp;
<a href="../_functions/get_assignable_roles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets a list of roles that this user can assign in this context<BR>
</b><BR><b>param:</b> context $context the context.<br>
<b>param:</b> int $rolenamedisplay the type of role name to display. One of the<br>
<b>param:</b> bool $withusercounts if true, count the number of users with each role.<br>
<b>param:</b> integer|object $user A user id or object. By default (null) checks the permissions of the current user.<br>
<b>return:</b> array if $withusercounts is false, then an array $roleid =&gt; $rolename.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_switchable_roles" onClick="logFunction('get_switchable_roles', 'accesslib.php.source.html#l3466')" href="accesslib.php.source.html#l3466">get_switchable_roles</a>(context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/get_switchable_roles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets a list of roles that this user can switch to in a context<BR>
</b><BR>Gets a list of roles that this user can switch to in a context, for the switchrole menu.<BR>
This function just process the contents of the role_allow_switch table. You also need to<BR>
test the moodle/role:switchroles to see if the user is allowed to switch in the first place.<BR>
<BR>
<b>param:</b> context $context a context.<br>
<b>return:</b> array an array $roleid =&gt; $rolename.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_overridable_roles" onClick="logFunction('get_overridable_roles', 'accesslib.php.source.html#l3516')" href="accesslib.php.source.html#l3516">get_overridable_roles</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/rolenamedisplay.html">$rolenamedisplay</a> = ROLENAME_ALIAS, <a href="../_variables/withcounts.html">$withcounts</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_overridable_roles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets a list of roles that this user can override in this context.<BR>
</b><BR><b>param:</b> context $context the context.<br>
<b>param:</b> int $rolenamedisplay the type of role name to display. One of the<br>
<b>param:</b> bool $withcounts if true, count the number of overrides that are set for each role.<br>
<b>return:</b> array if $withcounts is false, then an array $roleid =&gt; $rolename.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_default_enrol_roles" onClick="logFunction('get_default_enrol_roles', 'accesslib.php.source.html#l3595')" href="accesslib.php.source.html#l3595">get_default_enrol_roles</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/addroleid.html">$addroleid</a> = null)&nbsp;&nbsp;
<a href="../_functions/get_default_enrol_roles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create a role menu suitable for default role selection in enrol plugins.<BR>
</b><BR><b>param:</b> context $context<br>
<b>param:</b> int $addroleid current or default role - always added to list<br>
<b>return:</b> array roleid=&gt;localised role name<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_role_contextlevels" onClick="logFunction('get_role_contextlevels', 'accesslib.php.source.html#l3635')" href="accesslib.php.source.html#l3635">get_role_contextlevels</a>(<a href="../_variables/roleid.html">$roleid</a>)&nbsp;&nbsp;
<a href="../_functions/get_role_contextlevels.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return context levels where this role is assignable.<BR>
</b><BR><b>param:</b> integer $roleid the id of a role.<br>
<b>return:</b> array list of the context levels at which this role may be assigned.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_roles_for_contextlevels" onClick="logFunction('get_roles_for_contextlevels', 'accesslib.php.source.html#l3647')" href="accesslib.php.source.html#l3647">get_roles_for_contextlevels</a>(<a href="../_variables/contextlevel.html">$contextlevel</a>)&nbsp;&nbsp;
<a href="../_functions/get_roles_for_contextlevels.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return roles suitable for assignment at the specified context level.<BR>
</b><BR>NOTE: this function name looks like a typo, should be probably get_roles_for_contextlevel()<BR>
<BR>
<b>param:</b> integer $contextlevel a contextlevel.<br>
<b>return:</b> array list of role ids that are assignable at this context level.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_default_contextlevels" onClick="logFunction('get_default_contextlevels', 'accesslib.php.source.html#l3661')" href="accesslib.php.source.html#l3661">get_default_contextlevels</a>(<a href="../_variables/rolearchetype.html">$rolearchetype</a>)&nbsp;&nbsp;
<a href="../_functions/get_default_contextlevels.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns default context levels where roles can be assigned.<BR>
</b><BR><b>param:</b> string $rolearchetype one of the role archetypes - that is, one of the keys<br>
<b>return:</b> array list of the context levels at which this type of role may be assigned by default.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_role_contextlevels" onClick="logFunction('set_role_contextlevels', 'accesslib.php.source.html#l3686')" href="accesslib.php.source.html#l3686">set_role_contextlevels</a>(<a href="../_variables/roleid.html">$roleid</a>, array <a href="../_variables/contextlevels.html">$contextlevels</a>)&nbsp;&nbsp;
<a href="../_functions/set_role_contextlevels.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set the context levels at which a particular role can be assigned.<BR>
Throws exceptions in case of error.<BR>
</b><BR><b>param:</b> integer $roleid the id of a role.<br>
<b>param:</b> array $contextlevels the context levels at which this role should be assignable,<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_users_by_capability" onClick="logFunction('get_users_by_capability', 'accesslib.php.source.html#l3707')" href="accesslib.php.source.html#l3707">get_users_by_capability</a>(context <a href="../_variables/context.html">$context</a>, <a href="../_variables/capability.html">$capability</a>, <a href="../_variables/fields.html">$fields</a> = '', <a href="../_variables/sort.html">$sort</a> = '', <a href="../_variables/limitfrom.html">$limitfrom</a> = '', <a href="../_variables/limitnum.html">$limitnum</a> = '',<a href="../_variables/groups.html">$groups</a> = '', <a href="../_variables/exceptions.html">$exceptions</a> = '', <a href="../_variables/doanything_ignored.html">$doanything_ignored</a> = null, <a href="../_variables/view_ignored.html">$view_ignored</a> = null, <a href="../_variables/useviewallgroups.html">$useviewallgroups</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_users_by_capability.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Who has this capability in this context?<BR>
</b><BR>This can be a very expensive call - use sparingly and keep<BR>
the results if you are going to need them again soon.<BR>
<BR>
Note if $fields is empty this function attempts to get u.*<BR>
which can get rather large - and has a serious perf impact<BR>
on some DBs.<BR>
<BR>
<b>param:</b> context $context<br>
<b>param:</b> string|array $capability - capability name(s)<br>
<b>param:</b> string $fields - fields to be pulled. The user table is aliased to 'u'. u.id MUST be included.<br>
<b>param:</b> string $sort - the sort order. Default is lastaccess time.<br>
<b>param:</b> mixed $limitfrom - number of records to skip (offset)<br>
<b>param:</b> mixed $limitnum - number of records to fetch<br>
<b>param:</b> string|array $groups - single group or array of groups - only return<br>
<b>param:</b> string|array $exceptions - list of users to exclude, comma separated or array<br>
<b>param:</b> bool $doanything_ignored not used any more, admin accounts are never returned<br>
<b>param:</b> bool $view_ignored - use get_enrolled_sql() instead<br>
<b>param:</b> bool $useviewallgroups if $groups is set the return users who<br>
<b>return:</b> array of user records<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="sort_by_roleassignment_authority" onClick="logFunction('sort_by_roleassignment_authority', 'accesslib.php.source.html#l3987')" href="accesslib.php.source.html#l3987">sort_by_roleassignment_authority</a>(<a href="../_variables/users.html">$users</a>, context <a href="../_variables/context.html">$context</a>, <a href="../_variables/roles.html">$roles</a> = array()&nbsp;&nbsp;
<a href="../_functions/sort_by_roleassignment_authority.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Re-sort a users array based on a sorting policy<BR>
</b><BR>Will re-sort a $users results array (from get_users_by_capability(), usually)<BR>
based on a sorting policy. This is to support the odd practice of<BR>
sorting teachers by 'authority', where authority was &quot;lowest id of the role<BR>
assignment&quot;.<BR>
<BR>
Will execute 1 database query. Only suitable for small numbers of users, as it<BR>
uses an u.id IN() clause.<BR>
<BR>
Notes about the sorting criteria.<BR>
<BR>
As a default, we cannot rely on role.sortorder because then<BR>
admins/coursecreators will always win. That is why the sane<BR>
rule &quot;is locality matters most&quot;, with sortorder as 2nd<BR>
consideration.<BR>
<BR>
If you want role.sortorder, use the 'sortorder' policy, and<BR>
name explicitly what roles you want to cover. It's probably<BR>
a good idea to see what roles have the capabilities you want<BR>
(array_diff() them against roiles that have 'can-do-anything'<BR>
to weed out admin-ish roles. Or fetch a list of roles from<BR>
variables like $CFG-&gt;coursecontact .<BR>
<BR>
<b>param:</b> array $users Users array, keyed on userid<br>
<b>param:</b> context $context<br>
<b>param:</b> array $roles ids of the roles to include, optional<br>
<b>param:</b> string $sortpolicy defaults to locality, more about<br>
<b>return:</b> array sorted copy of the array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_role_users" onClick="logFunction('get_role_users', 'accesslib.php.source.html#l4068')" href="accesslib.php.source.html#l4068">get_role_users</a>(<a href="../_variables/roleid.html">$roleid</a>, context <a href="../_variables/context.html">$context</a>, <a href="../_variables/parent.html">$parent</a> = false, <a href="../_variables/fields.html">$fields</a> = '',<a href="../_variables/sort.html">$sort</a> = null, <a href="../_variables/all.html">$all</a> = true, <a href="../_variables/group.html">$group</a> = '',<a href="../_variables/limitfrom.html">$limitfrom</a> = '', <a href="../_variables/limitnum.html">$limitnum</a> = '', <a href="../_variables/extrawheretest.html">$extrawheretest</a> = '', <a href="../_variables/whereorsortparams.html">$whereorsortparams</a> = array()&nbsp;&nbsp;
<a href="../_functions/get_role_users.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets all the users assigned this role in this context or higher<BR>
</b><BR>Note that moodle is based on capabilities and it is usually better<BR>
to check permissions than to check role ids as the capabilities<BR>
system is more flexible. If you really need, you can to use this<BR>
function but consider has_capability() as a possible substitute.<BR>
<BR>
The caller function is responsible for including all the<BR>
$sort fields in $fields param.<BR>
<BR>
If $roleid is an array or is empty (all roles) you need to set $fields<BR>
(and $sort by extension) params according to it, as the first field<BR>
returned by the database should be unique (ra.id is the best candidate).<BR>
<BR>
<b>param:</b> int $roleid (can also be an array of ints!)<br>
<b>param:</b> context $context<br>
<b>param:</b> bool $parent if true, get list of users assigned in higher context too<br>
<b>param:</b> string $fields fields from user (u.) , role assignment (ra) or role (r.)<br>
<b>param:</b> string $sort sort from user (u.) , role assignment (ra.) or role (r.).<br>
<b>param:</b> bool $all true means all, false means limit to enrolled users<br>
<b>param:</b> string $group defaults to ''<br>
<b>param:</b> mixed $limitfrom defaults to ''<br>
<b>param:</b> mixed $limitnum defaults to ''<br>
<b>param:</b> string $extrawheretest defaults to ''<br>
<b>param:</b> array $whereorsortparams any paramter values used by $sort or $extrawheretest.<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="count_role_users" onClick="logFunction('count_role_users', 'accesslib.php.source.html#l4204')" href="accesslib.php.source.html#l4204">count_role_users</a>(<a href="../_variables/roleid.html">$roleid</a>, context <a href="../_variables/context.html">$context</a>, <a href="../_variables/parent.html">$parent</a> = false)&nbsp;&nbsp;
<a href="../_functions/count_role_users.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Counts all the users assigned this role in this context or higher<BR>
</b><BR><b>param:</b> int|array $roleid either int or an array of ints<br>
<b>param:</b> context $context<br>
<b>param:</b> bool $parent if true, get list of users assigned in higher context too<br>
<b>return:</b> int Returns the result count<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_user_capability_course" onClick="logFunction('get_user_capability_course', 'accesslib.php.source.html#l4245')" href="accesslib.php.source.html#l4245">get_user_capability_course</a>(<a href="../_variables/capability.html">$capability</a>, <a href="../_variables/userid.html">$userid</a> = null, <a href="../_variables/doanything.html">$doanything</a> = true, <a href="../_variables/fieldsexceptid.html">$fieldsexceptid</a> = '', <a href="../_variables/orderby.html">$orderby</a> = '')&nbsp;&nbsp;
<a href="../_functions/get_user_capability_course.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function gets the list of courses that this user has a particular capability in.<BR>
It is still not very efficient.<BR>
</b><BR><b>param:</b> string $capability Capability in question<br>
<b>param:</b> int $userid User ID or null for current user<br>
<b>param:</b> bool $doanything True if 'doanything' is permitted (default)<br>
<b>param:</b> string $fieldsexceptid Leave blank if you only need 'id' in the course records;<br>
<b>param:</b> string $orderby If set, use a comma-separated list of fields from course<br>
<b>return:</b> array|bool Array of courses, if none found false is returned.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_roles_on_exact_context" onClick="logFunction('get_roles_on_exact_context', 'accesslib.php.source.html#l4306')" href="accesslib.php.source.html#l4306">get_roles_on_exact_context</a>(context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/get_roles_on_exact_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function finds the roles assigned directly to this context only<BR>
i.e. no roles in parent contexts<BR>
</b><BR><b>param:</b> context $context<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="role_switch" onClick="logFunction('role_switch', 'accesslib.php.source.html#l4322')" href="accesslib.php.source.html#l4322">role_switch</a>(<a href="../_variables/roleid.html">$roleid</a>, context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/role_switch.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Switches the current user to another role for the current session and only<BR>
in the given context.<BR>
</b><BR>The caller *must* check<BR>
- that this op is allowed<BR>
- that the requested role can be switched to in this context (use get_switchable_roles)<BR>
- that the requested role is NOT $CFG-&gt;defaultuserroleid<BR>
<BR>
To &quot;unswitch&quot; pass 0 as the roleid.<BR>
<BR>
This function *will* modify $USER-&gt;access - beware<BR>
<BR>
<b>param:</b> integer $roleid the role to switch to.<br>
<b>param:</b> context $context the context in which to perform the switch.<br>
<b>return:</b> bool success or failure.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_role_switched" onClick="logFunction('is_role_switched', 'accesslib.php.source.html#l4385')" href="accesslib.php.source.html#l4385">is_role_switched</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/is_role_switched.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if the user has switched roles within the given course.<BR>
</b><BR>Note: You can only switch roles within the course, hence it takes a course id<BR>
rather than a context. On that note Petr volunteered to implement this across<BR>
all other contexts, all requests for this should be forwarded to him ;)<BR>
<BR>
<b>param:</b> int $courseid The id of the course to check<br>
<b>return:</b> bool True if the user has switched roles within the course.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_roles_with_override_on_context" onClick="logFunction('get_roles_with_override_on_context', 'accesslib.php.source.html#l4401')" href="accesslib.php.source.html#l4401">get_roles_with_override_on_context</a>(context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/get_roles_with_override_on_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get any role that has an override on exact context<BR>
</b><BR><b>param:</b> context $context The context to check<br>
<b>return:</b> array An array of roles<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_capabilities_from_role_on_context" onClick="logFunction('get_capabilities_from_role_on_context', 'accesslib.php.source.html#l4416')" href="accesslib.php.source.html#l4416">get_capabilities_from_role_on_context</a>(<a href="../_variables/role.html">$role</a>, context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/get_capabilities_from_role_on_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get all capabilities for this role on this context (overrides)<BR>
</b><BR><b>param:</b> stdClass $role<br>
<b>param:</b> context $context<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_roles_with_assignment_on_context" onClick="logFunction('get_roles_with_assignment_on_context', 'accesslib.php.source.html#l4432')" href="accesslib.php.source.html#l4432">get_roles_with_assignment_on_context</a>(context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/get_roles_with_assignment_on_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Find out which roles has assignment on this context<BR>
</b><BR><b>param:</b> context $context<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_users_from_role_on_context" onClick="logFunction('get_users_from_role_on_context', 'accesslib.php.source.html#l4448')" href="accesslib.php.source.html#l4448">get_users_from_role_on_context</a>(<a href="../_variables/role.html">$role</a>, context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/get_users_from_role_on_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Find all user assignment of users for this role, on this context<BR>
</b><BR><b>param:</b> stdClass $role<br>
<b>param:</b> context $context<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="user_has_role_assignment" onClick="logFunction('user_has_role_assignment', 'accesslib.php.source.html#l4464')" href="accesslib.php.source.html#l4464">user_has_role_assignment</a>(<a href="../_variables/userid.html">$userid</a>, <a href="../_variables/roleid.html">$roleid</a>, <a href="../_variables/contextid.html">$contextid</a> = 0)&nbsp;&nbsp;
<a href="../_functions/user_has_role_assignment.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Simple function returning a boolean true if user has roles<BR>
in context or parent contexts, otherwise false.<BR>
</b><BR><b>param:</b> int $userid<br>
<b>param:</b> int $roleid<br>
<b>param:</b> int $contextid empty means any context<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="role_get_name" onClick="logFunction('role_get_name', 'accesslib.php.source.html#l4497')" href="accesslib.php.source.html#l4497">role_get_name</a>(stdClass <a href="../_variables/role.html">$role</a>, <a href="../_variables/context.html">$context</a> = null, <a href="../_variables/rolenamedisplay.html">$rolenamedisplay</a> = ROLENAME_ALIAS)&nbsp;&nbsp;
<a href="../_functions/role_get_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get localised role name or alias if exists and format the text.<BR>
</b><BR><b>param:</b> stdClass $role role object<br>
<b>param:</b> context|bool $context empty means system context<br>
<b>param:</b> int $rolenamedisplay type of role name<br>
<b>return:</b> string localised role name or course role name alias<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="role_get_description" onClick="logFunction('role_get_description', 'accesslib.php.source.html#l4583')" href="accesslib.php.source.html#l4583">role_get_description</a>(stdClass <a href="../_variables/role.html">$role</a>)&nbsp;&nbsp;
<a href="../_functions/role_get_description.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns localised role description if available.<BR>
If the name is empty it tries to find the default role name using<BR>
hardcoded list of default role names or other methods in the future.<BR>
</b><BR><b>param:</b> stdClass $role<br>
<b>return:</b> string localised role name<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="role_get_names" onClick="logFunction('role_get_names', 'accesslib.php.source.html#l4609')" href="accesslib.php.source.html#l4609">role_get_names</a>(context <a href="../_variables/context.html">$context</a> = null, <a href="../_variables/rolenamedisplay.html">$rolenamedisplay</a> = ROLENAME_ALIAS, <a href="../_variables/returnmenu.html">$returnmenu</a> = null)&nbsp;&nbsp;
<a href="../_functions/role_get_names.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get all the localised role names for a context.<BR>
</b><BR>In new installs default roles have empty names, this function<BR>
add localised role names using current language pack.<BR>
<BR>
<b>param:</b> context $context the context, null means system context<br>
<b>param:</b> array of role objects with a -&gt;localname field containing the context-specific role name.<br>
<b>param:</b> int $rolenamedisplay<br>
<b>param:</b> bool $returnmenu true means id=&gt;localname, false means id=&gt;rolerecord<br>
<b>return:</b> array Array of context-specific role names, or role objects with a -&gt;localname field added.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="role_fix_names" onClick="logFunction('role_fix_names', 'accesslib.php.source.html#l4625')" href="accesslib.php.source.html#l4625">role_fix_names</a>(<a href="../_variables/roleoptions.html">$roleoptions</a>, context <a href="../_variables/context.html">$context</a> = null, <a href="../_variables/rolenamedisplay.html">$rolenamedisplay</a> = ROLENAME_ALIAS, <a href="../_variables/returnmenu.html">$returnmenu</a> = null)&nbsp;&nbsp;
<a href="../_functions/role_fix_names.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prepare list of roles for display, apply aliases and localise default role names.<BR>
</b><BR><b>param:</b> array $roleoptions array roleid =&gt; roleobject (with optional coursealias), strings are accepted for backwards compatibility only<br>
<b>param:</b> context $context the context, null means system context<br>
<b>param:</b> int $rolenamedisplay<br>
<b>param:</b> bool $returnmenu null means keep the same format as $roleoptions, true means id=&gt;localname, false means id=&gt;rolerecord<br>
<b>return:</b> array Array of context-specific role names, or role objects with a -&gt;localname field added.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="component_level_changed" onClick="logFunction('component_level_changed', 'accesslib.php.source.html#l4688')" href="accesslib.php.source.html#l4688">component_level_changed</a>(<a href="../_variables/cap.html">$cap</a>, <a href="../_variables/comp.html">$comp</a>, <a href="../_variables/contextlevel.html">$contextlevel</a>)&nbsp;&nbsp;
<a href="../_functions/component_level_changed.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Aids in detecting if a new line is required when reading a new capability<BR>
</b><BR>This function helps admin/roles/manage.php etc to detect if a new line should be printed<BR>
when we read in a new capability.<BR>
Most of the time, if the 2 components are different we should print a new line, (e.g. course system-&gt;rss client)<BR>
but when we are in grade, all reports/import/export capabilities should be together<BR>
<BR>
<b>param:</b> string $cap component string a<br>
<b>param:</b> string $comp component string b<br>
<b>param:</b> int $contextlevel<br>
<b>return:</b> bool whether 2 component are in different &quot;sections&quot;<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="fix_role_sortorder" onClick="logFunction('fix_role_sortorder', 'accesslib.php.source.html#l4726')" href="accesslib.php.source.html#l4726">fix_role_sortorder</a>(<a href="../_variables/allroles.html">$allroles</a>)&nbsp;&nbsp;
<a href="../_functions/fix_role_sortorder.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Fix the roles.sortorder field in the database, so it contains sequential integers,<BR>
and return an array of roleids in order.<BR>
</b><BR><b>param:</b> array $allroles array of roles, as returned by get_all_roles();<br>
<b>return:</b> array $role-&gt;sortorder =-&gt; $role-&gt;id with the keys in ascending order.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="switch_roles" onClick="logFunction('switch_roles', 'accesslib.php.source.html#l4752')" href="accesslib.php.source.html#l4752">switch_roles</a>(<a href="../_variables/first.html">$first</a>, <a href="../_variables/second.html">$second</a>)&nbsp;&nbsp;
<a href="../_functions/switch_roles.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Switch the sort order of two roles (used in admin/roles/manage.php).<BR>
</b><BR><b>param:</b> stdClass $first The first role. Actually, only -&gt;sortorder is used.<br>
<b>param:</b> stdClass $second The second role. Actually, only -&gt;sortorder is used.<br>
<b>return:</b> boolean success or failure<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="role_cap_duplicate" onClick="logFunction('role_cap_duplicate', 'accesslib.php.source.html#l4768')" href="accesslib.php.source.html#l4768">role_cap_duplicate</a>(<a href="../_variables/sourcerole.html">$sourcerole</a>, <a href="../_variables/targetrole.html">$targetrole</a>)&nbsp;&nbsp;
<a href="../_functions/role_cap_duplicate.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Duplicates all the base definitions of a role<BR>
</b><BR><b>param:</b> stdClass $sourcerole role to copy from<br>
<b>param:</b> int $targetrole id of role to copy to<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_roles_with_cap_in_context" onClick="logFunction('get_roles_with_cap_in_context', 'accesslib.php.source.html#l4790')" href="accesslib.php.source.html#l4790">get_roles_with_cap_in_context</a>(<a href="../_variables/context.html">$context</a>, <a href="../_variables/capability.html">$capability</a>)&nbsp;&nbsp;
<a href="../_functions/get_roles_with_cap_in_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns two lists, this can be used to find out if user has capability.<BR>
Having any needed role and no forbidden role in this context means<BR>
user has this capability in this context.<BR>
Use get_role_names_with_cap_in_context() if you need role names to display in the UI<BR>
</b><BR><b>param:</b> stdClass $context<br>
<b>param:</b> string $capability<br>
<b>return:</b> array($neededroles, $forbiddenroles)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_roles_with_caps_in_context" onClick="logFunction('get_roles_with_caps_in_context', 'accesslib.php.source.html#l4851')" href="accesslib.php.source.html#l4851">get_roles_with_caps_in_context</a>(<a href="../_variables/context.html">$context</a>, <a href="../_variables/capabilities.html">$capabilities</a>)&nbsp;&nbsp;
<a href="../_functions/get_roles_with_caps_in_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an array of role IDs that have ALL of the the supplied capabilities<BR>
Uses get_roles_with_cap_in_context(). Returns $allowed minus $forbidden<BR>
</b><BR><b>param:</b> stdClass $context<br>
<b>param:</b> array $capabilities An array of capabilities<br>
<b>return:</b> array of roles with all of the required capabilities<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_role_names_with_caps_in_context" onClick="logFunction('get_role_names_with_caps_in_context', 'accesslib.php.source.html#l4886')" href="accesslib.php.source.html#l4886">get_role_names_with_caps_in_context</a>(<a href="../_variables/context.html">$context</a>, <a href="../_variables/capabilities.html">$capabilities</a>)&nbsp;&nbsp;
<a href="../_functions/get_role_names_with_caps_in_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an array of role names that have ALL of the the supplied capabilities<BR>
Uses get_roles_with_caps_in_context(). Returns $allowed minus $forbidden<BR>
</b><BR><b>param:</b> stdClass $context<br>
<b>param:</b> array $capabilities An array of capabilities<br>
<b>return:</b> array of roles with all of the required capabilities<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="prohibit_is_removable" onClick="logFunction('prohibit_is_removable', 'accesslib.php.source.html#l4908')" href="accesslib.php.source.html#l4908">prohibit_is_removable</a>(<a href="../_variables/roleid.html">$roleid</a>, context <a href="../_variables/context.html">$context</a>, <a href="../_variables/capability.html">$capability</a>)&nbsp;&nbsp;
<a href="../_functions/prohibit_is_removable.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function verifies the prohibit comes from this context<BR>
and there are no more prohibits in parent contexts.<BR>
</b><BR><b>param:</b> int $roleid<br>
<b>param:</b> context $context<br>
<b>param:</b> string $capability name<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="role_change_permission" onClick="logFunction('role_change_permission', 'accesslib.php.source.html#l4944')" href="accesslib.php.source.html#l4944">role_change_permission</a>(<a href="../_variables/roleid.html">$roleid</a>, <a href="../_variables/context.html">$context</a>, <a href="../_variables/capname.html">$capname</a>, <a href="../_variables/permission.html">$permission</a>)&nbsp;&nbsp;
<a href="../_functions/role_change_permission.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>More user friendly role permission changing,<BR>
it should produce as few overrides as possible.<BR>
</b><BR><b>param:</b> int $roleid<br>
<b>param:</b> stdClass $context<br>
<b>param:</b> string $capname capability name<br>
<b>param:</b> int $permission<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="reset_caches" onClick="logFunction('reset_caches', 'accesslib.php.source.html#l5098')" href="accesslib.php.source.html#l5098">reset_caches</a>()&nbsp;&nbsp;
<a href="../_functions/reset_caches.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Resets the cache to remove all data.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cache_add" onClick="logFunction('cache_add', 'accesslib.php.source.html#l5111')" href="accesslib.php.source.html#l5111">cache_add</a>(context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/cache_add.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Adds a context to the cache. If the cache is full, discards a batch of<BR>
older entries.<BR>
</b><BR><b>param:</b> context $context New context to add<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cache_remove" onClick="logFunction('cache_remove', 'accesslib.php.source.html#l5148')" href="accesslib.php.source.html#l5148">cache_remove</a>(context <a href="../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../_functions/cache_remove.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Removes a context from the cache.<BR>
</b><BR><b>param:</b> context $context Context object to remove<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cache_get" onClick="logFunction('cache_get', 'accesslib.php.source.html#l5170')" href="accesslib.php.source.html#l5170">cache_get</a>(<a href="../_variables/contextlevel.html">$contextlevel</a>, <a href="../_variables/instance.html">$instance</a>)&nbsp;&nbsp;
<a href="../_functions/cache_get.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets a context from the cache.<BR>
</b><BR><b>param:</b> int $contextlevel Context level<br>
<b>param:</b> int $instance Instance ID<br>
<b>return:</b> context|bool Context or false if not in cache<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cache_get_by_id" onClick="logFunction('cache_get_by_id', 'accesslib.php.source.html#l5185')" href="accesslib.php.source.html#l5185">cache_get_by_id</a>(<a href="../_variables/id.html">$id</a>)&nbsp;&nbsp;
<a href="../_functions/cache_get_by_id.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets a context from the cache based on its id.<BR>
</b><BR><b>param:</b> int $id Context ID<br>
<b>return:</b> context|bool Context or false if not in cache<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="preload_from_record" onClick="logFunction('preload_from_record', 'accesslib.php.source.html#l5199')" href="accesslib.php.source.html#l5199">preload_from_record</a>(stdClass <a href="../_variables/rec.html">$rec</a>)&nbsp;&nbsp;
<a href="../_functions/preload_from_record.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Preloads context information from db record and strips the cached info.<BR>
</b><BR><b>param:</b> stdClass $rec<br>
<b>return:</b> void (modifies $rec)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__set" onClick="logFunction('__set', 'accesslib.php.source.html#l5226')" href="accesslib.php.source.html#l5226">__set</a>(<a href="../_variables/name.html">$name</a>, <a href="../_variables/value.html">$value</a>)&nbsp;&nbsp;
<a href="../_functions/__set.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Magic setter method, we do not want anybody to modify properties from the outside<BR>
</b><BR><b>param:</b> string $name<br>
<b>param:</b> mixed $value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__get" onClick="logFunction('__get', 'accesslib.php.source.html#l5235')" href="accesslib.php.source.html#l5235">__get</a>(<a href="../_variables/name.html">$name</a>)&nbsp;&nbsp;
<a href="../_functions/__get.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Magic method getter, redirects to read only values.<BR>
</b><BR><b>param:</b> string $name<br>
<b>return:</b> mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__isset" onClick="logFunction('__isset', 'accesslib.php.source.html#l5254')" href="accesslib.php.source.html#l5254">__isset</a>(<a href="../_variables/name.html">$name</a>)&nbsp;&nbsp;
<a href="../_functions/__isset.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Full support for isset on our magic read only properties.<BR>
</b><BR><b>param:</b> string $name<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__unset" onClick="logFunction('__unset', 'accesslib.php.source.html#l5272')" href="accesslib.php.source.html#l5272">__unset</a>(<a href="../_variables/name.html">$name</a>)&nbsp;&nbsp;
<a href="../_functions/__unset.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>ALl properties are read only, sorry.<BR>
</b><BR><b>param:</b> string $name<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="getiterator" onClick="logFunction('getiterator', 'accesslib.php.source.html#l5282')" href="accesslib.php.source.html#l5282">getIterator</a>()&nbsp;&nbsp;
<a href="../_functions/getiterator.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create an iterator because magic vars can't be seen by 'foreach'.<BR>
</b><BR>Now we can convert context object to array using convert_to_array(),<BR>
and feed it properly to json_encode().<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'accesslib.php.source.html#l5301')" href="accesslib.php.source.html#l5301">__construct</a>(stdClass <a href="../_variables/record.html">$record</a>)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor is protected so that devs are forced to<BR>
use context_xxx::instance() or context::instance_by_id().<BR>
</b><BR><b>param:</b> stdClass $record<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_instance_from_record" onClick="logFunction('create_instance_from_record', 'accesslib.php.source.html#l5315')" href="accesslib.php.source.html#l5315">create_instance_from_record</a>(stdClass <a href="../_variables/record.html">$record</a>)&nbsp;&nbsp;
<a href="../_functions/create_instance_from_record.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function is also used to work around 'protected' keyword problems in context_helper.<BR>
</b><BR><b>param:</b> stdClass $record<br>
<b>return:</b> context instance<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="merge_context_temp_table" onClick="logFunction('merge_context_temp_table', 'accesslib.php.source.html#l5334')" href="accesslib.php.source.html#l5334">merge_context_temp_table</a>()&nbsp;&nbsp;
<a href="../_functions/merge_context_temp_table.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Copy prepared new contexts from temp table to context table,<BR>
we do this in db specific way for perf reasons only.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="instance_by_id" onClick="logFunction('instance_by_id', 'accesslib.php.source.html#l5383')" href="accesslib.php.source.html#l5383">instance_by_id</a>(<a href="../_variables/id.html">$id</a>, <a href="../_variables/strictness.html">$strictness</a> = MUST_EXIST)&nbsp;&nbsp;
<a href="../_functions/instance_by_id.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get a context instance as an object, from a given context id.<BR>
</b><BR><b>param:</b> int $id context id<br>
<b>param:</b> int $strictness IGNORE_MISSING means compatible mode, false returned if record not found, debug message if more found;<br>
<b>return:</b> context|bool the context object or false if not found<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_moved" onClick="logFunction('update_moved', 'accesslib.php.source.html#l5419')" href="accesslib.php.source.html#l5419">update_moved</a>(context <a href="../_variables/newparent.html">$newparent</a>)&nbsp;&nbsp;
<a href="../_functions/update_moved.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Update context info after moving context in the tree structure.<BR>
</b><BR><b>param:</b> context $newparent<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="reset_paths" onClick="logFunction('reset_paths', 'accesslib.php.source.html#l5464')" href="accesslib.php.source.html#l5464">reset_paths</a>(<a href="../_variables/rebuild.html">$rebuild</a> = true)&nbsp;&nbsp;
<a href="../_functions/reset_paths.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Remove all context path info and optionally rebuild it.<BR>
</b><BR><b>param:</b> bool $rebuild<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_content" onClick="logFunction('delete_content', 'accesslib.php.source.html#l5492')" href="accesslib.php.source.html#l5492">delete_content</a>()&nbsp;&nbsp;
<a href="../_functions/delete_content.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete all data linked to content, do not delete the context record itself<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete" onClick="logFunction('delete', 'accesslib.php.source.html#l5529')" href="accesslib.php.source.html#l5529">delete</a>()&nbsp;&nbsp;
<a href="../_functions/delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete the context content and the context record itself<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="insert_context_record" onClick="logFunction('insert_context_record', 'accesslib.php.source.html#l5558')" href="accesslib.php.source.html#l5558">insert_context_record</a>(<a href="../_variables/contextlevel.html">$contextlevel</a>, <a href="../_variables/instanceid.html">$instanceid</a>, <a href="../_variables/parentpath.html">$parentpath</a>)&nbsp;&nbsp;
<a href="../_functions/insert_context_record.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Utility method for context creation<BR>
</b><BR><b>param:</b> int $contextlevel<br>
<b>param:</b> int $instanceid<br>
<b>param:</b> string $parentpath<br>
<b>return:</b> stdClass context record<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context_name" onClick="logFunction('get_context_name', 'accesslib.php.source.html#l5588')" href="accesslib.php.source.html#l5588">get_context_name</a>(<a href="../_variables/withprefix.html">$withprefix</a> = true, <a href="../_variables/short.html">$short</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_context_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns human readable context identifier.<BR>
</b><BR><b>param:</b> boolean $withprefix whether to prefix the name of the context with the<br>
<b>param:</b> boolean $short whether to use the short name of the thing. Only applies<br>
<b>return:</b> string the human readable context name.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_child_contexts" onClick="logFunction('get_child_contexts', 'accesslib.php.source.html#l5616')" href="accesslib.php.source.html#l5616">get_child_contexts</a>()&nbsp;&nbsp;
<a href="../_functions/get_child_contexts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Recursive function which, given a context, find all its children context ids.<BR>
</b><BR>For course category contexts it will return immediate children and all subcategory contexts.<BR>
It will NOT recurse into courses or subcategories categories.<BR>
If you want to do that, call it on the returned courses/categories.<BR>
<BR>
When called for a course context, it will return the modules and blocks<BR>
displayed in the course page and blocks displayed on the module pages.<BR>
<BR>
If called on a user/course/module context it _will_ populate the cache with the appropriate<BR>
contexts ;-)<BR>
<BR>
<b>return:</b> array Array of child records<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_parent_contexts" onClick="logFunction('get_parent_contexts', 'accesslib.php.source.html#l5653')" href="accesslib.php.source.html#l5653">get_parent_contexts</a>(<a href="../_variables/includeself.html">$includeself</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_parent_contexts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns parent contexts of this context in reversed order, i.e. parent first,<BR>
then grand parent, etc.<BR>
</b><BR><b>param:</b> bool $includeself tre means include self too<br>
<b>return:</b> array of context instances<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_parent_context_ids" onClick="logFunction('get_parent_context_ids', 'accesslib.php.source.html#l5674')" href="accesslib.php.source.html#l5674">get_parent_context_ids</a>(<a href="../_variables/includeself.html">$includeself</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_parent_context_ids.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns parent contexts of this context in reversed order, i.e. parent first,<BR>
then grand parent, etc.<BR>
</b><BR><b>param:</b> bool $includeself tre means include self too<br>
<b>return:</b> array of context ids<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_parent_context" onClick="logFunction('get_parent_context', 'accesslib.php.source.html#l5695')" href="accesslib.php.source.html#l5695">get_parent_context</a>()&nbsp;&nbsp;
<a href="../_functions/get_parent_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns parent context<BR>
</b><BR><b>return:</b> context<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_course_context" onClick="logFunction('get_course_context', 'accesslib.php.source.html#l5713')" href="accesslib.php.source.html#l5713">get_course_context</a>(<a href="../_variables/strict.html">$strict</a> = true)&nbsp;&nbsp;
<a href="../_functions/get_course_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Is this context part of any course? If yes return course context.<BR>
</b><BR><b>param:</b> bool $strict true means throw exception if not found, false means return false if not found<br>
<b>return:</b> context_course context of the enclosing course, null if not found or exception<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_cleanup_sql" onClick="logFunction('get_cleanup_sql', 'accesslib.php.source.html#l5727')" href="accesslib.php.source.html#l5727">get_cleanup_sql</a>()&nbsp;&nbsp;
<a href="../_functions/get_cleanup_sql.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns sql necessary for purging of stale context instances.<BR>
</b><BR><b>return:</b> string cleanup SQL<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="build_paths" onClick="logFunction('build_paths', 'accesslib.php.source.html#l5737')" href="accesslib.php.source.html#l5737">build_paths</a>(<a href="../_variables/force.html">$force</a>)&nbsp;&nbsp;
<a href="../_functions/build_paths.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Rebuild context paths and depths at context level.<BR>
</b><BR><b>param:</b> bool $force<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_level_instances" onClick="logFunction('create_level_instances', 'accesslib.php.source.html#l5748')" href="accesslib.php.source.html#l5748">create_level_instances</a>()&nbsp;&nbsp;
<a href="../_functions/create_level_instances.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create missing context instances at given level<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="reload_if_dirty" onClick="logFunction('reload_if_dirty', 'accesslib.php.source.html#l5758')" href="accesslib.php.source.html#l5758">reload_if_dirty</a>()&nbsp;&nbsp;
<a href="../_functions/reload_if_dirty.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Reset all cached permissions and definitions if the necessary.<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="mark_dirty" onClick="logFunction('mark_dirty', 'accesslib.php.source.html#l5792')" href="accesslib.php.source.html#l5792">mark_dirty</a>()&nbsp;&nbsp;
<a href="../_functions/mark_dirty.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Mark a context as dirty (with timestamp) so as to force reloading of the context.<BR>
</b><BR></td></tr></table>

<br>
</div></div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
