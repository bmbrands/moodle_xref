<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/blocklib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='blocklib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/</a> -> <a href="blocklib.php.html">blocklib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="blocklib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="blocklib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Block Class and Functions</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * This file defines the {@link block_manager} class,</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @package    core</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @subpackage block</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas  http://dougiamas.com</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> */</span>
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/**#@+</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * Default names for the block regions in the standard theme.</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> */</span>
<a name="l34"><span class="linenum">  34</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BLOCK_POS_LEFT')" href="../_constants/BLOCK_POS_LEFT.html" onMouseOver="constPopup(event,'BLOCK_POS_LEFT')">BLOCK_POS_LEFT</a>',  'side-pre');
<a name="l35"><span class="linenum">  35</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BLOCK_POS_RIGHT')" href="../_constants/BLOCK_POS_RIGHT.html" onMouseOver="constPopup(event,'BLOCK_POS_RIGHT')">BLOCK_POS_RIGHT</a>', 'side-post');
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">/**#@-*/</span>
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BUI_CONTEXTS_FRONTPAGE_ONLY')" href="../_constants/BUI_CONTEXTS_FRONTPAGE_ONLY.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_FRONTPAGE_ONLY')">BUI_CONTEXTS_FRONTPAGE_ONLY</a>', 0);
<a name="l39"><span class="linenum">  39</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BUI_CONTEXTS_FRONTPAGE_SUBS')" href="../_constants/BUI_CONTEXTS_FRONTPAGE_SUBS.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_FRONTPAGE_SUBS')">BUI_CONTEXTS_FRONTPAGE_SUBS</a>', 1);
<a name="l40"><span class="linenum">  40</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BUI_CONTEXTS_ENTIRE_SITE')" href="../_constants/BUI_CONTEXTS_ENTIRE_SITE.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_ENTIRE_SITE')">BUI_CONTEXTS_ENTIRE_SITE</a>', 2);
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BUI_CONTEXTS_CURRENT')" href="../_constants/BUI_CONTEXTS_CURRENT.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_CURRENT')">BUI_CONTEXTS_CURRENT</a>', 0);
<a name="l43"><span class="linenum">  43</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BUI_CONTEXTS_CURRENT_SUBS')" href="../_constants/BUI_CONTEXTS_CURRENT_SUBS.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_CURRENT_SUBS')">BUI_CONTEXTS_CURRENT_SUBS</a>', 1);
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">/**</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * Exception thrown when someone tried to do something with a block that does</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> * not exist on a page.</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> *</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment"> * @copyright 2009 Tim Hunt</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> * @since     Moodle 2.0</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> */</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('block_not_on_page_exception')" href="../_classes/block_not_on_page_exception.html" onMouseOver="classPopup(event,'block_not_on_page_exception')">block_not_on_page_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l54"><span class="linenum">  54</span></a>      <span class="comment">/**</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     * Constructor</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     * @param int $instanceid the block instance id of the block that was looked for.</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">     * @param object $page the current page.</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     */</span>
<a name="l59"><span class="linenum">  59</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>) {
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass;
<a name="l61"><span class="linenum">  61</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('instanceid')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> = <a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>;
<a name="l62"><span class="linenum">  62</span></a>          <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('url')" class="var it42992" onMouseOver="hilite(42992)" onMouseOut="lolite()" href="../_variables/url.html">url</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('url')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/url.html">url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l63"><span class="linenum">  63</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>('blockdoesnotexistonpage', '', <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('url')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/url.html">url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="var it70" onMouseOver="hilite(70)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l64"><span class="linenum">  64</span></a>      }
<a name="l65"><span class="linenum">  65</span></a>  }
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">/**</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * This class keeps track of the block that should appear on a moodle_page.</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> *</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> * The page to work with as passed to the constructor.</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment"> *</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment"> * @copyright 2009 Tim Hunt</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> * @since     Moodle 2.0</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment"> */</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('block_manager')" href="../_classes/block_manager.html" onMouseOver="classPopup(event,'block_manager')">block_manager</a> {
<a name="l77"><span class="linenum">  77</span></a>      <span class="comment">/**</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">     * The UI normally only shows block weights between -MAX_WEIGHT and MAX_WEIGHT,</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">     * although other weights are valid.</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">     */</span>
<a name="l81"><span class="linenum">  81</span></a>      const MAX_WEIGHT = 10;
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">/// Field declarations =========================================================</span>
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>      <span class="comment">/**</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">     * the moodle_page we are managing blocks for.</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">     * @var moodle_page</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">     */</span>
<a name="l89"><span class="linenum">  89</span></a>      protected <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>;
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">    /** @var array region name =&gt; 1.*/</span>
<a name="l92"><span class="linenum">  92</span></a>      protected <a class="var it8286" onMouseOver="hilite(8286)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../_variables/regions.html">$regions</a> = array();
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">    /** @var string the region where new blocks are added.*/</span>
<a name="l95"><span class="linenum">  95</span></a>      protected <a class="var it9160" onMouseOver="hilite(9160)" onMouseOut="lolite()" onClick="logVariable('defaultregion')" href="../_variables/defaultregion.html">$defaultregion</a> = null;
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">    /** @var array will be $DB-&gt;get_records('blocks') */</span>
<a name="l98"><span class="linenum">  98</span></a>      protected <a class="var it23171" onMouseOver="hilite(23171)" onMouseOut="lolite()" onClick="logVariable('allblocks')" href="../_variables/allblocks.html">$allblocks</a> = null;
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>      <span class="comment">/**</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">     * @var array blocks that this user can add to this page. Will be a subset</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">     * of $allblocks, but with array keys block-&gt;name. Access this via the</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">     * {@link get_addable_blocks()} method to ensure it is lazy-loaded.</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     */</span>
<a name="l105"><span class="linenum"> 105</span></a>      protected <a class="var it23172" onMouseOver="hilite(23172)" onMouseOut="lolite()" onClick="logVariable('addableblocks')" href="../_variables/addableblocks.html">$addableblocks</a> = null;
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>      <span class="comment">/**</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     * Will be an array region-name =&gt; array(db rows loaded in load_blocks);</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     * @var array</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">     */</span>
<a name="l111"><span class="linenum"> 111</span></a>      protected <a class="var it8301" onMouseOver="hilite(8301)" onMouseOut="lolite()" onClick="logVariable('birecordsbyregion')" href="../_variables/birecordsbyregion.html">$birecordsbyregion</a> = null;
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>      <span class="comment">/**</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">     * array region-name =&gt; array(block objects); populated as necessary by</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">     * the ensure_instances_exist method.</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     * @var array</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     */</span>
<a name="l118"><span class="linenum"> 118</span></a>      protected <a class="var it11606" onMouseOver="hilite(11606)" onMouseOut="lolite()" onClick="logVariable('blockinstances')" href="../_variables/blockinstances.html">$blockinstances</a> = array();
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>      <span class="comment">/**</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     * array region-name =&gt; array(block_contents objects) what actually needs to</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     * be displayed in each region.</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * @var array</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     */</span>
<a name="l125"><span class="linenum"> 125</span></a>      protected <a class="var it23173" onMouseOver="hilite(23173)" onMouseOut="lolite()" onClick="logVariable('visibleblockcontent')" href="../_variables/visibleblockcontent.html">$visibleblockcontent</a> = array();
<a name="l126"><span class="linenum"> 126</span></a>  
<a name="l127"><span class="linenum"> 127</span></a>      <span class="comment">/**</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">     * array region-name =&gt; array(block_contents objects) extra block-like things</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     * to be displayed in each region, before the real blocks.</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     * @var array</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">     */</span>
<a name="l132"><span class="linenum"> 132</span></a>      protected <a class="var it23174" onMouseOver="hilite(23174)" onMouseOut="lolite()" onClick="logVariable('extracontent')" href="../_variables/extracontent.html">$extracontent</a> = array();
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>      <span class="comment">/**</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">     * Used by the block move id, to track whether a block is currently being moved.</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">     *</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">     * When you click on the move icon of a block, first the page needs to reload with</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     * extra UI for choosing a new position for a particular block. In that situation</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     * this field holds the id of the block being moved.</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">     *</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">     * @var integer|null</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">     */</span>
<a name="l143"><span class="linenum"> 143</span></a>      protected <a class="var it23175" onMouseOver="hilite(23175)" onMouseOut="lolite()" onClick="logVariable('movingblock')" href="../_variables/movingblock.html">$movingblock</a> = null;
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>      <span class="comment">/**</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">     * Show only fake blocks</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     */</span>
<a name="l148"><span class="linenum"> 148</span></a>      protected <a class="var it23176" onMouseOver="hilite(23176)" onMouseOut="lolite()" onClick="logVariable('fakeblocksonly')" href="../_variables/fakeblocksonly.html">$fakeblocksonly</a> = false;
<a name="l149"><span class="linenum"> 149</span></a>  
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">/// Constructor ================================================================</span>
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>      <span class="comment">/**</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     * Constructor.</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     * @param object $page the moodle_page object object we are managing the blocks for,</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     * or a reasonable faxilimily. (See the comment at the top of this class</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     * and {@link http://en.wikipedia.org/wiki/Duck_typing})</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     */</span>
<a name="l158"><span class="linenum"> 158</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>) {
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>;
<a name="l160"><span class="linenum"> 160</span></a>      }
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">/// Getter methods =============================================================</span>
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>      <span class="comment">/**</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     * Get an array of all region names on this page where a block may appear</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">     *</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * @return array the internal names of the regions on this page where block may appear.</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     */</span>
<a name="l169"><span class="linenum"> 169</span></a>      public function <a class="function" onClick="logFunction('get_regions')" href="../_functions/get_regions.html" onMouseOver="funcPopup(event,'get_regions')">get_regions</a>() {
<a name="l170"><span class="linenum"> 170</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>)) {
<a name="l171"><span class="linenum"> 171</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('initialise_theme_and_output')" href="../_functions/initialise_theme_and_output.html" onMouseOver="funcPopup(event,'initialise_theme_and_output')">initialise_theme_and_output</a>();
<a name="l172"><span class="linenum"> 172</span></a>          }
<a name="l173"><span class="linenum"> 173</span></a>          return <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a>);
<a name="l174"><span class="linenum"> 174</span></a>      }
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>      <span class="comment">/**</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">     * Get the region name of the region blocks are added to by default</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">     *</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     * @return string the internal names of the region where new blocks are added</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     * by default, and where any blocks from an unrecognised region are shown.</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     * (Imagine that blocks were added with one theme selected, then you switched</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * to a theme with different block positions.)</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     */</span>
<a name="l184"><span class="linenum"> 184</span></a>      public function <a class="function" onClick="logFunction('get_default_region')" href="../_functions/get_default_region.html" onMouseOver="funcPopup(event,'get_default_region')">get_default_region</a>() {
<a name="l185"><span class="linenum"> 185</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('initialise_theme_and_output')" href="../_functions/initialise_theme_and_output.html" onMouseOver="funcPopup(event,'initialise_theme_and_output')">initialise_theme_and_output</a>();
<a name="l186"><span class="linenum"> 186</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>;
<a name="l187"><span class="linenum"> 187</span></a>      }
<a name="l188"><span class="linenum"> 188</span></a>  
<a name="l189"><span class="linenum"> 189</span></a>      <span class="comment">/**</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">     * The list of block types that may be added to this page.</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">     *</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">     * @return array block name =&gt; record from block table.</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">     */</span>
<a name="l194"><span class="linenum"> 194</span></a>      public function <a class="function" onClick="logFunction('get_addable_blocks')" href="../_functions/get_addable_blocks.html" onMouseOver="funcPopup(event,'get_addable_blocks')">get_addable_blocks</a>() {
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>();
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addableblocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/addableblocks.html">addableblocks</a>)) {
<a name="l198"><span class="linenum"> 198</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addableblocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/addableblocks.html">addableblocks</a>;
<a name="l199"><span class="linenum"> 199</span></a>          }
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">        // Lazy load.</span>
<a name="l202"><span class="linenum"> 202</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addableblocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/addableblocks.html">addableblocks</a> = array();
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>          <a class="var it23171" onMouseOver="hilite(23171)" onMouseOut="lolite()" onClick="logVariable('allblocks')" href="../_variables/allblocks.html">$allblocks</a> = <a class="function" onClick="logFunction('blocks_get_record')" href="../_functions/blocks_get_record.html" onMouseOver="funcPopup(event,'blocks_get_record')">blocks_get_record</a>();
<a name="l205"><span class="linenum"> 205</span></a>          if (empty(<a class="var it23171" onMouseOver="hilite(23171)" onMouseOut="lolite()" onClick="logVariable('allblocks')" href="../_variables/allblocks.html">$allblocks</a>)) {
<a name="l206"><span class="linenum"> 206</span></a>              return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addableblocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/addableblocks.html">addableblocks</a>;
<a name="l207"><span class="linenum"> 207</span></a>          }
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>          <a class="var it23177" onMouseOver="hilite(23177)" onMouseOut="lolite()" onClick="logVariable('unaddableblocks')" href="../_variables/unaddableblocks.html">$unaddableblocks</a> = self::<a class="function" onClick="logFunction('get_undeletable_block_types')" href="../_functions/get_undeletable_block_types.html" onMouseOver="funcPopup(event,'get_undeletable_block_types')">get_undeletable_block_types</a>();
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it23178" onMouseOver="hilite(23178)" onMouseOut="lolite()" onClick="logVariable('pageformat')" href="../_variables/pageformat.html">$pageformat</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype;
<a name="l211"><span class="linenum"> 211</span></a>          foreach(<a class="var it23171" onMouseOver="hilite(23171)" onMouseOut="lolite()" onClick="logVariable('allblocks')" href="../_variables/allblocks.html">$allblocks</a> as <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>) {
<a name="l212"><span class="linenum"> 212</span></a>              if (!<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a> = <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)) {
<a name="l213"><span class="linenum"> 213</span></a>                  continue;
<a name="l214"><span class="linenum"> 214</span></a>              }
<a name="l215"><span class="linenum"> 215</span></a>              if (<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('visible')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> &amp;&amp; !<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, <a class="var it23177" onMouseOver="hilite(23177)" onMouseOut="lolite()" onClick="logVariable('unaddableblocks')" href="../_variables/unaddableblocks.html">$unaddableblocks</a>) &amp;&amp;
<a name="l216"><span class="linenum"> 216</span></a>                      (<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a class="function" onClick="logFunction('instance_allow_multiple')" href="../_functions/instance_allow_multiple.html" onMouseOver="funcPopup(event,'instance_allow_multiple')">instance_allow_multiple</a>() || !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_block_present')" href="../_functions/is_block_present.html" onMouseOver="funcPopup(event,'is_block_present')">is_block_present</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)) &amp;&amp;
<a name="l217"><span class="linenum"> 217</span></a>                      <a class="function" onClick="logFunction('blocks_name_allowed_in_format')" href="../_functions/blocks_name_allowed_in_format.html" onMouseOver="funcPopup(event,'blocks_name_allowed_in_format')">blocks_name_allowed_in_format</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, <a class="var it23178" onMouseOver="hilite(23178)" onMouseOut="lolite()" onClick="logVariable('pageformat')" href="../_variables/pageformat.html">$pageformat</a>) &amp;&amp;
<a name="l218"><span class="linenum"> 218</span></a>                      <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a class="function" onClick="logFunction('user_can_addto')" href="../_functions/user_can_addto.html" onMouseOver="funcPopup(event,'user_can_addto')">user_can_addto</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>)) {
<a name="l219"><span class="linenum"> 219</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addableblocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/addableblocks.html">addableblocks</a>[<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>;
<a name="l220"><span class="linenum"> 220</span></a>              }
<a name="l221"><span class="linenum"> 221</span></a>          }
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addableblocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/addableblocks.html">addableblocks</a>;
<a name="l224"><span class="linenum"> 224</span></a>      }
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>      <span class="comment">/**</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">     * Given a block name, find out of any of them are currently present in the page</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment"></span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">     * @param string $blockname - the basic name of a block (eg &quot;navigation&quot;)</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">     * @return boolean - is there one of these blocks in the current page?</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment">     */</span>
<a name="l232"><span class="linenum"> 232</span></a>      public function <a class="function" onClick="logFunction('is_block_present')" href="../_functions/is_block_present.html" onMouseOver="funcPopup(event,'is_block_present')">is_block_present</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>) {
<a name="l233"><span class="linenum"> 233</span></a>          if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a>)) {
<a name="l234"><span class="linenum"> 234</span></a>              return false;
<a name="l235"><span class="linenum"> 235</span></a>          }
<a name="l236"><span class="linenum"> 236</span></a>  
<a name="l237"><span class="linenum"> 237</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a> as <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l238"><span class="linenum"> 238</span></a>              foreach (<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l239"><span class="linenum"> 239</span></a>                  if (empty(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockname)) {
<a name="l240"><span class="linenum"> 240</span></a>                      continue;
<a name="l241"><span class="linenum"> 241</span></a>                  }
<a name="l242"><span class="linenum"> 242</span></a>                  if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockname == <a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>) {
<a name="l243"><span class="linenum"> 243</span></a>                      return true;
<a name="l244"><span class="linenum"> 244</span></a>                  }
<a name="l245"><span class="linenum"> 245</span></a>              }
<a name="l246"><span class="linenum"> 246</span></a>          }
<a name="l247"><span class="linenum"> 247</span></a>          return false;
<a name="l248"><span class="linenum"> 248</span></a>      }
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>      <span class="comment">/**</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">     * Find out if a block type is known by the system</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">     *</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">     * @param string $blockname the name of the type of block.</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     * @param boolean $includeinvisible if false (default) only check 'visible' blocks, that is, blocks enabled by the admin.</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     * @return boolean true if this block in installed.</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">     */</span>
<a name="l257"><span class="linenum"> 257</span></a>      public function <a class="function" onClick="logFunction('is_known_block_type')" href="../_functions/is_known_block_type.html" onMouseOver="funcPopup(event,'is_known_block_type')">is_known_block_type</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it11610" onMouseOver="hilite(11610)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a> = false) {
<a name="l258"><span class="linenum"> 258</span></a>          <a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_installed_blocks')" href="../_functions/get_installed_blocks.html" onMouseOver="funcPopup(event,'get_installed_blocks')">get_installed_blocks</a>();
<a name="l259"><span class="linenum"> 259</span></a>          foreach (<a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> as <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>) {
<a name="l260"><span class="linenum"> 260</span></a>              if (<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a> == <a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a> &amp;&amp; (<a class="var it11610" onMouseOver="hilite(11610)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a> || <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('visible')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>)) {
<a name="l261"><span class="linenum"> 261</span></a>                  return true;
<a name="l262"><span class="linenum"> 262</span></a>              }
<a name="l263"><span class="linenum"> 263</span></a>          }
<a name="l264"><span class="linenum"> 264</span></a>          return false;
<a name="l265"><span class="linenum"> 265</span></a>      }
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>      <span class="comment">/**</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     * Find out if a region exists on a page</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">     *</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">     * @param string $region a region name</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">     * @return boolean true if this region exists on this page.</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     */</span>
<a name="l273"><span class="linenum"> 273</span></a>      public function <a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l274"><span class="linenum"> 274</span></a>          if (empty(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>)) {
<a name="l275"><span class="linenum"> 275</span></a>              return false;
<a name="l276"><span class="linenum"> 276</span></a>          }
<a name="l277"><span class="linenum"> 277</span></a>          return <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a>);
<a name="l278"><span class="linenum"> 278</span></a>      }
<a name="l279"><span class="linenum"> 279</span></a>  
<a name="l280"><span class="linenum"> 280</span></a>      <span class="comment">/**</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">     * Get an array of all blocks within a given region</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">     *</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">     * @param string $region a block region that exists on this page.</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">     * @return array of block instances.</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">     */</span>
<a name="l286"><span class="linenum"> 286</span></a>      public function <a class="function" onClick="logFunction('get_blocks_for_region')" href="../_functions/get_blocks_for_region.html" onMouseOver="funcPopup(event,'get_blocks_for_region')">get_blocks_for_region</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l287"><span class="linenum"> 287</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>();
<a name="l288"><span class="linenum"> 288</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_instances_exist')" href="../_functions/ensure_instances_exist.html" onMouseOver="funcPopup(event,'ensure_instances_exist')">ensure_instances_exist</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l289"><span class="linenum"> 289</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>];
<a name="l290"><span class="linenum"> 290</span></a>      }
<a name="l291"><span class="linenum"> 291</span></a>  
<a name="l292"><span class="linenum"> 292</span></a>      <span class="comment">/**</span>
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">     * Returns an array of block content objects that exist in a region</span>
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment">     *</span>
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">     * @param string $region a block region that exists on this page.</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment">     * @return array of block block_contents objects for all the blocks in a region.</span>
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment">     */</span>
<a name="l298"><span class="linenum"> 298</span></a>      public function <a class="function" onClick="logFunction('get_content_for_region')" href="../_functions/get_content_for_region.html" onMouseOver="funcPopup(event,'get_content_for_region')">get_content_for_region</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l299"><span class="linenum"> 299</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>();
<a name="l300"><span class="linenum"> 300</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_content_created')" href="../_functions/ensure_content_created.html" onMouseOver="funcPopup(event,'ensure_content_created')">ensure_content_created</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l301"><span class="linenum"> 301</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>];
<a name="l302"><span class="linenum"> 302</span></a>      }
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>      <span class="comment">/**</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">     * Helper method used by get_content_for_region.</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">     * @param string $region region name</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">     * @param float $weight weight. May be fractional, since you may want to move a block</span>
<a name="l308"><span class="linenum"> 308</span></a>  <span class="comment">     * between ones with weight 2 and 3, say ($weight would be 2.5).</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">     * @return string URL for moving block $this-&gt;movingblock to this position.</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">     */</span>
<a name="l311"><span class="linenum"> 311</span></a>      protected function <a class="function" onClick="logFunction('get_move_target_url')" href="../_functions/get_move_target_url.html" onMouseOver="funcPopup(event,'get_move_target_url')">get_move_target_url</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>) {
<a name="l312"><span class="linenum"> 312</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url, array('bui_moveid' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>,
<a name="l313"><span class="linenum"> 313</span></a>                  'bui_newregion' =&gt; <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, 'bui_newweight' =&gt; <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>, 'sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l314"><span class="linenum"> 314</span></a>      }
<a name="l315"><span class="linenum"> 315</span></a>  
<a name="l316"><span class="linenum"> 316</span></a>      <span class="comment">/**</span>
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">     * Determine whether a region contains anything. (Either any real blocks, or</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">     * the add new block UI.)</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">     *</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">     * (You may wonder why the $output parameter is required. Unfortunately,</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">     * because of the way that blocks work, the only reliable way to find out</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment">     * if a block will be visible is to get the content for output, and to</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment">     * get the content, you need a renderer. Fortunately, this is not a</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment">     * performance problem, because we cache the output that is generated, and</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">     * in almost every case where we call region_has_content, we are about to</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">     * output the blocks anyway, so we are not doing wasted effort.)</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">     *</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment">     * @param string $region a block region that exists on this page.</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">     * @param core_renderer $output a core_renderer. normally the global $OUTPUT.</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment">     * @return boolean Whether there is anything in this region.</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">     */</span>
<a name="l332"><span class="linenum"> 332</span></a>      public function <a class="function" onClick="logFunction('region_has_content')" href="../_functions/region_has_content.html" onMouseOver="funcPopup(event,'region_has_content')">region_has_content</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>)) {
<a name="l335"><span class="linenum"> 335</span></a>              return false;
<a name="l336"><span class="linenum"> 336</span></a>          }
<a name="l337"><span class="linenum"> 337</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>();
<a name="l338"><span class="linenum"> 338</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_content_created')" href="../_functions/ensure_content_created.html" onMouseOver="funcPopup(event,'ensure_content_created')">ensure_content_created</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">        // if ($this-&gt;page-&gt;user_is_editing() &amp;&amp; $this-&gt;page-&gt;user_can_edit_blocks()) {</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">        // Mark Nielsen's patch - part 1</span>
<a name="l341"><span class="linenum"> 341</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>() &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>() &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>) {
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment">            // If editing is on, we need all the block regions visible, for the</span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment">            // move blocks UI.</span>
<a name="l344"><span class="linenum"> 344</span></a>              return true;
<a name="l345"><span class="linenum"> 345</span></a>          }
<a name="l346"><span class="linenum"> 346</span></a>          return !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>]) || !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extracontent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/extracontent.html">extracontent</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>]);
<a name="l347"><span class="linenum"> 347</span></a>      }
<a name="l348"><span class="linenum"> 348</span></a>  
<a name="l349"><span class="linenum"> 349</span></a>      <span class="comment">/**</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">     * Get an array of all of the installed blocks.</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">     *</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">     * @return array contents of the block table.</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">     */</span>
<a name="l354"><span class="linenum"> 354</span></a>      public function <a class="function" onClick="logFunction('get_installed_blocks')" href="../_functions/get_installed_blocks.html" onMouseOver="funcPopup(event,'get_installed_blocks')">get_installed_blocks</a>() {
<a name="l355"><span class="linenum"> 355</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l356"><span class="linenum"> 356</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allblocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/allblocks.html">allblocks</a>)) {
<a name="l357"><span class="linenum"> 357</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allblocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/allblocks.html">allblocks</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('block');
<a name="l358"><span class="linenum"> 358</span></a>          }
<a name="l359"><span class="linenum"> 359</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allblocks')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/allblocks.html">allblocks</a>;
<a name="l360"><span class="linenum"> 360</span></a>      }
<a name="l361"><span class="linenum"> 361</span></a>  
<a name="l362"><span class="linenum"> 362</span></a>      <span class="comment">/**</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">     * @return array names of block types that cannot be added or deleted. E.g. array('navigation','settings').</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment">     */</span>
<a name="l365"><span class="linenum"> 365</span></a>      public static function <a class="function" onClick="logFunction('get_undeletable_block_types')" href="../_functions/get_undeletable_block_types.html" onMouseOver="funcPopup(event,'get_undeletable_block_types')">get_undeletable_block_types</a>() {
<a name="l366"><span class="linenum"> 366</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l367"><span class="linenum"> 367</span></a>  
<a name="l368"><span class="linenum"> 368</span></a>          if (!isset(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('undeletableblocktypes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/undeletableblocktypes.html">undeletableblocktypes</a>) || (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('undeletableblocktypes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/undeletableblocktypes.html">undeletableblocktypes</a>) &amp;&amp; !<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('undeletableblocktypes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/undeletableblocktypes.html">undeletableblocktypes</a>))) {
<a name="l369"><span class="linenum"> 369</span></a>              return array('navigation','settings');
<a name="l370"><span class="linenum"> 370</span></a>          } else if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('undeletableblocktypes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/undeletableblocktypes.html">undeletableblocktypes</a>)) {
<a name="l371"><span class="linenum"> 371</span></a>              return <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('undeletableblocktypes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/undeletableblocktypes.html">undeletableblocktypes</a>);
<a name="l372"><span class="linenum"> 372</span></a>          } else {
<a name="l373"><span class="linenum"> 373</span></a>              return <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('undeletableblocktypes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/undeletableblocktypes.html">undeletableblocktypes</a>;
<a name="l374"><span class="linenum"> 374</span></a>          }
<a name="l375"><span class="linenum"> 375</span></a>      }
<a name="l376"><span class="linenum"> 376</span></a>  
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">/// Setter methods =============================================================</span>
<a name="l378"><span class="linenum"> 378</span></a>  
<a name="l379"><span class="linenum"> 379</span></a>      <span class="comment">/**</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     * Add a region to a page</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     *</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     * @param string $region add a named region where blocks may appear on the current page.</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">     *      This is an internal name, like 'side-pre', not a string to display in the UI.</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">     * @param bool $custom True if this is a custom block region, being added by the page rather than the theme layout.</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">     */</span>
<a name="l386"><span class="linenum"> 386</span></a>      public function <a class="function" onClick="logFunction('add_region')" href="../_functions/add_region.html" onMouseOver="funcPopup(event,'add_region')">add_region</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it1271" onMouseOver="hilite(1271)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../_variables/custom.html">$custom</a> = true) {
<a name="l387"><span class="linenum"> 387</span></a>          global <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>;
<a name="l388"><span class="linenum"> 388</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_not_yet_loaded')" href="../_functions/check_not_yet_loaded.html" onMouseOver="funcPopup(event,'check_not_yet_loaded')">check_not_yet_loaded</a>();
<a name="l389"><span class="linenum"> 389</span></a>          if (<a class="var it1271" onMouseOver="hilite(1271)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../_variables/custom.html">$custom</a>) {
<a name="l390"><span class="linenum"> 390</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a>)) {
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">                // This here is EXACTLY why we should not be adding block regions into a page. It should</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">                // ALWAYS be done in a theme layout.</span>
<a name="l393"><span class="linenum"> 393</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('A custom region conflicts with a block region in the theme.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l394"><span class="linenum"> 394</span></a>              }
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment">            // We need to register this custom region against the page type being used.</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment">            // This allows us to check, when performing block actions, that unrecognised regions can be worked with.</span>
<a name="l397"><span class="linenum"> 397</span></a>              <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype;
<a name="l398"><span class="linenum"> 398</span></a>              if (!isset(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>)) {
<a name="l399"><span class="linenum"> 399</span></a>                  <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a> = array(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> =&gt; array(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>));
<a name="l400"><span class="linenum"> 400</span></a>              } else if (!isset(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>])) {
<a name="l401"><span class="linenum"> 401</span></a>                  <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>] = array(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l402"><span class="linenum"> 402</span></a>              } else if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>])) {
<a name="l403"><span class="linenum"> 403</span></a>                  <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>[<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>][] = <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>;
<a name="l404"><span class="linenum"> 404</span></a>              }
<a name="l405"><span class="linenum"> 405</span></a>          }
<a name="l406"><span class="linenum"> 406</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] = 1;
<a name="l407"><span class="linenum"> 407</span></a>      }
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>      <span class="comment">/**</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">     * Add an array of regions</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">     * @see add_region()</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">     *</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">     * @param array $regions this utility method calls add_region for each array element.</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">     */</span>
<a name="l415"><span class="linenum"> 415</span></a>      public function <a class="function" onClick="logFunction('add_regions')" href="../_functions/add_regions.html" onMouseOver="funcPopup(event,'add_regions')">add_regions</a>(<a class="var it8286" onMouseOver="hilite(8286)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../_variables/regions.html">$regions</a>, <a class="var it1271" onMouseOver="hilite(1271)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../_variables/custom.html">$custom</a> = true) {
<a name="l416"><span class="linenum"> 416</span></a>          foreach (<a class="var it8286" onMouseOver="hilite(8286)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../_variables/regions.html">$regions</a> as <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l417"><span class="linenum"> 417</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_region')" href="../_functions/add_region.html" onMouseOver="funcPopup(event,'add_region')">add_region</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it1271" onMouseOver="hilite(1271)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../_variables/custom.html">$custom</a>);
<a name="l418"><span class="linenum"> 418</span></a>          }
<a name="l419"><span class="linenum"> 419</span></a>      }
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>      <span class="comment">/**</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">     * Finds custom block regions associated with a page type and registers them with this block manager.</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">     *</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">     * @param string $pagetype</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">     */</span>
<a name="l426"><span class="linenum"> 426</span></a>      public function <a class="function" onClick="logFunction('add_custom_regions_for_pagetype')" href="../_functions/add_custom_regions_for_pagetype.html" onMouseOver="funcPopup(event,'add_custom_regions_for_pagetype')">add_custom_regions_for_pagetype</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>) {
<a name="l427"><span class="linenum"> 427</span></a>          global <a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>;
<a name="l428"><span class="linenum"> 428</span></a>          if (isset(<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>[<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>])) {
<a name="l429"><span class="linenum"> 429</span></a>              foreach (<a class="var it355" onMouseOver="hilite(355)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it42907" onMouseOver="hilite(42907)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>[<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>] as <a class="var it23180" onMouseOver="hilite(23180)" onMouseOut="lolite()" onClick="logVariable('customregion')" href="../_variables/customregion.html">$customregion</a>) {
<a name="l430"><span class="linenum"> 430</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_region')" href="../_functions/add_region.html" onMouseOver="funcPopup(event,'add_region')">add_region</a>(<a class="var it23180" onMouseOver="hilite(23180)" onMouseOut="lolite()" onClick="logVariable('customregion')" href="../_variables/customregion.html">$customregion</a>, false);
<a name="l431"><span class="linenum"> 431</span></a>              }
<a name="l432"><span class="linenum"> 432</span></a>          }
<a name="l433"><span class="linenum"> 433</span></a>      }
<a name="l434"><span class="linenum"> 434</span></a>  
<a name="l435"><span class="linenum"> 435</span></a>      <span class="comment">/**</span>
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">     * Set the default region for new blocks on the page</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">     *</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">     * @param string $defaultregion the internal names of the region where new</span>
<a name="l439"><span class="linenum"> 439</span></a>  <span class="comment">     * blocks should be added by default, and where any blocks from an</span>
<a name="l440"><span class="linenum"> 440</span></a>  <span class="comment">     * unrecognised region are shown.</span>
<a name="l441"><span class="linenum"> 441</span></a>  <span class="comment">     */</span>
<a name="l442"><span class="linenum"> 442</span></a>      public function <a class="function" onClick="logFunction('set_default_region')" href="../_functions/set_default_region.html" onMouseOver="funcPopup(event,'set_default_region')">set_default_region</a>(<a class="var it9160" onMouseOver="hilite(9160)" onMouseOut="lolite()" onClick="logVariable('defaultregion')" href="../_variables/defaultregion.html">$defaultregion</a>) {
<a name="l443"><span class="linenum"> 443</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_not_yet_loaded')" href="../_functions/check_not_yet_loaded.html" onMouseOver="funcPopup(event,'check_not_yet_loaded')">check_not_yet_loaded</a>();
<a name="l444"><span class="linenum"> 444</span></a>          if (<a class="var it9160" onMouseOver="hilite(9160)" onMouseOut="lolite()" onClick="logVariable('defaultregion')" href="../_variables/defaultregion.html">$defaultregion</a>) {
<a name="l445"><span class="linenum"> 445</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_region_is_known')" href="../_functions/check_region_is_known.html" onMouseOver="funcPopup(event,'check_region_is_known')">check_region_is_known</a>(<a class="var it9160" onMouseOver="hilite(9160)" onMouseOut="lolite()" onClick="logVariable('defaultregion')" href="../_variables/defaultregion.html">$defaultregion</a>);
<a name="l446"><span class="linenum"> 446</span></a>          }
<a name="l447"><span class="linenum"> 447</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a> = <a class="var it9160" onMouseOver="hilite(9160)" onMouseOut="lolite()" onClick="logVariable('defaultregion')" href="../_variables/defaultregion.html">$defaultregion</a>;
<a name="l448"><span class="linenum"> 448</span></a>      }
<a name="l449"><span class="linenum"> 449</span></a>  
<a name="l450"><span class="linenum"> 450</span></a>      <span class="comment">/**</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">     * Add something that looks like a block, but which isn't an actual block_instance,</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">     * to this page.</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">     *</span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment">     * @param block_contents $bc the content of the block-like thing.</span>
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment">     * @param string $region a block region that exists on this page.</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment">     */</span>
<a name="l457"><span class="linenum"> 457</span></a>      public function <a class="function" onClick="logFunction('add_fake_block')" href="../_functions/add_fake_block.html" onMouseOver="funcPopup(event,'add_fake_block')">add_fake_block</a>(<a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>, <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l458"><span class="linenum"> 458</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('initialise_theme_and_output')" href="../_functions/initialise_theme_and_output.html" onMouseOver="funcPopup(event,'initialise_theme_and_output')">initialise_theme_and_output</a>();
<a name="l459"><span class="linenum"> 459</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>)) {
<a name="l460"><span class="linenum"> 460</span></a>              <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_default_region')" href="../_functions/get_default_region.html" onMouseOver="funcPopup(event,'get_default_region')">get_default_region</a>();
<a name="l461"><span class="linenum"> 461</span></a>          }
<a name="l462"><span class="linenum"> 462</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>)) {
<a name="l463"><span class="linenum"> 463</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('block_manager has already prepared the blocks in region ' .
<a name="l464"><span class="linenum"> 464</span></a>                      <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> . 'for output. It is too late to add a fake block.');
<a name="l465"><span class="linenum"> 465</span></a>          }
<a name="l466"><span class="linenum"> 466</span></a>          if (!isset(<a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../_variables/attributes.html">attributes</a>['data-block'])) {
<a name="l467"><span class="linenum"> 467</span></a>              <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../_variables/attributes.html">attributes</a>['data-block'] = '_fake';
<a name="l468"><span class="linenum"> 468</span></a>          }
<a name="l469"><span class="linenum"> 469</span></a>          <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../_variables/attributes.html">attributes</a>['class'] .= ' block_fake';
<a name="l470"><span class="linenum"> 470</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extracontent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/extracontent.html">extracontent</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>][] = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>;
<a name="l471"><span class="linenum"> 471</span></a>      }
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>      <span class="comment">/**</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">     * Checks to see whether all of the blocks within the given region are docked</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">     *</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     * @see region_uses_dock</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     * @param string $region</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     * @return bool True if all of the blocks within that region are docked</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     */</span>
<a name="l480"><span class="linenum"> 480</span></a>      public function <a class="function" onClick="logFunction('region_completely_docked')" href="../_functions/region_completely_docked.html" onMouseOver="funcPopup(event,'region_completely_docked')">region_completely_docked</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l481"><span class="linenum"> 481</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">        // If theme doesn't allow docking or allowblockstodock is not set, then return.</span>
<a name="l483"><span class="linenum"> 483</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;theme-&gt;enable_dock || empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowblockstodock')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/allowblockstodock.html">allowblockstodock</a>)) {
<a name="l484"><span class="linenum"> 484</span></a>              return false;
<a name="l485"><span class="linenum"> 485</span></a>          }
<a name="l486"><span class="linenum"> 486</span></a>  
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment">        // Do not dock the region when the user attemps to move a block.</span>
<a name="l488"><span class="linenum"> 488</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>) {
<a name="l489"><span class="linenum"> 489</span></a>              return false;
<a name="l490"><span class="linenum"> 490</span></a>          }
<a name="l491"><span class="linenum"> 491</span></a>  
<a name="l492"><span class="linenum"> 492</span></a>  <span class="comment">        // Block regions should not be docked during editing when all the blocks are hidden.</span>
<a name="l493"><span class="linenum"> 493</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>() &amp;&amp; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l494"><span class="linenum"> 494</span></a>              return false;
<a name="l495"><span class="linenum"> 495</span></a>          }
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>();
<a name="l498"><span class="linenum"> 498</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_content_created')" href="../_functions/ensure_content_created.html" onMouseOver="funcPopup(event,'ensure_content_created')">ensure_content_created</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l499"><span class="linenum"> 499</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('region_has_content')" href="../_functions/region_has_content.html" onMouseOver="funcPopup(event,'region_has_content')">region_has_content</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>)) {
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment">            // If the region has no content then nothing is docked at all of course.</span>
<a name="l501"><span class="linenum"> 501</span></a>              return false;
<a name="l502"><span class="linenum"> 502</span></a>          }
<a name="l503"><span class="linenum"> 503</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l504"><span class="linenum"> 504</span></a>              if (!<a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('docked_block_instance_'.<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a>, 0)) {
<a name="l505"><span class="linenum"> 505</span></a>                  return false;
<a name="l506"><span class="linenum"> 506</span></a>              }
<a name="l507"><span class="linenum"> 507</span></a>          }
<a name="l508"><span class="linenum"> 508</span></a>          return true;
<a name="l509"><span class="linenum"> 509</span></a>      }
<a name="l510"><span class="linenum"> 510</span></a>  
<a name="l511"><span class="linenum"> 511</span></a>      <span class="comment">/**</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">     * Checks to see whether any of the blocks within the given regions are docked</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">     *</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">     * @see region_completely_docked</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">     * @param array|string $regions array of regions (or single region)</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">     * @return bool True if any of the blocks within that region are docked</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">     */</span>
<a name="l518"><span class="linenum"> 518</span></a>      public function <a class="function" onClick="logFunction('region_uses_dock')" href="../_functions/region_uses_dock.html" onMouseOver="funcPopup(event,'region_uses_dock')">region_uses_dock</a>(<a class="var it8286" onMouseOver="hilite(8286)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../_variables/regions.html">$regions</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l519"><span class="linenum"> 519</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;theme-&gt;enable_dock) {
<a name="l520"><span class="linenum"> 520</span></a>              return false;
<a name="l521"><span class="linenum"> 521</span></a>          }
<a name="l522"><span class="linenum"> 522</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>();
<a name="l523"><span class="linenum"> 523</span></a>          foreach((array)<a class="var it8286" onMouseOver="hilite(8286)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../_variables/regions.html">$regions</a> as <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l524"><span class="linenum"> 524</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_content_created')" href="../_functions/ensure_content_created.html" onMouseOver="funcPopup(event,'ensure_content_created')">ensure_content_created</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l525"><span class="linenum"> 525</span></a>              foreach(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l526"><span class="linenum"> 526</span></a>                  if(!empty(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('content')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/content.html">content</a>) &amp;&amp; <a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('docked_block_instance_'.<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a>, 0)) {
<a name="l527"><span class="linenum"> 527</span></a>                      return true;
<a name="l528"><span class="linenum"> 528</span></a>                  }
<a name="l529"><span class="linenum"> 529</span></a>              }
<a name="l530"><span class="linenum"> 530</span></a>          }
<a name="l531"><span class="linenum"> 531</span></a>          return false;
<a name="l532"><span class="linenum"> 532</span></a>      }
<a name="l533"><span class="linenum"> 533</span></a>  
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">/// Actions ====================================================================</span>
<a name="l535"><span class="linenum"> 535</span></a>  
<a name="l536"><span class="linenum"> 536</span></a>      <span class="comment">/**</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">     * This method actually loads the blocks for our page from the database.</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">     *</span>
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">     * @param boolean|null $includeinvisible</span>
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">     *      null (default) - load hidden blocks if $this-&gt;page-&gt;user_is_editing();</span>
<a name="l541"><span class="linenum"> 541</span></a>  <span class="comment">     *      true - load hidden blocks.</span>
<a name="l542"><span class="linenum"> 542</span></a>  <span class="comment">     *      false - don't load hidden blocks.</span>
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment">     */</span>
<a name="l544"><span class="linenum"> 544</span></a>      public function <a class="function" onClick="logFunction('load_blocks')" href="../_functions/load_blocks.html" onMouseOver="funcPopup(event,'load_blocks')">load_blocks</a>(<a class="var it11610" onMouseOver="hilite(11610)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a> = null) {
<a name="l545"><span class="linenum"> 545</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l546"><span class="linenum"> 546</span></a>  
<a name="l547"><span class="linenum"> 547</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>)) {
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">            // Already done.</span>
<a name="l549"><span class="linenum"> 549</span></a>              return;
<a name="l550"><span class="linenum"> 550</span></a>          }
<a name="l551"><span class="linenum"> 551</span></a>  
<a name="l552"><span class="linenum"> 552</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/version.html">version</a> &lt; 2009050619) {
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">            // Upgrade/install not complete. Don't try too show any blocks.</span>
<a name="l554"><span class="linenum"> 554</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a> = array();
<a name="l555"><span class="linenum"> 555</span></a>              return;
<a name="l556"><span class="linenum"> 556</span></a>          }
<a name="l557"><span class="linenum"> 557</span></a>  
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment">        // Ensure we have been initialised.</span>
<a name="l559"><span class="linenum"> 559</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>)) {
<a name="l560"><span class="linenum"> 560</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('initialise_theme_and_output')" href="../_functions/initialise_theme_and_output.html" onMouseOver="funcPopup(event,'initialise_theme_and_output')">initialise_theme_and_output</a>();
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">            // If there are still no block regions, then there are no blocks on this page.</span>
<a name="l562"><span class="linenum"> 562</span></a>              if (empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a>)) {
<a name="l563"><span class="linenum"> 563</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a> = array();
<a name="l564"><span class="linenum"> 564</span></a>                  return;
<a name="l565"><span class="linenum"> 565</span></a>              }
<a name="l566"><span class="linenum"> 566</span></a>          }
<a name="l567"><span class="linenum"> 567</span></a>  
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment">        // Check if we need to load normal blocks</span>
<a name="l569"><span class="linenum"> 569</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fakeblocksonly')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/fakeblocksonly.html">fakeblocksonly</a>) {
<a name="l570"><span class="linenum"> 570</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('prepare_per_region_arrays')" href="../_functions/prepare_per_region_arrays.html" onMouseOver="funcPopup(event,'prepare_per_region_arrays')">prepare_per_region_arrays</a>();
<a name="l571"><span class="linenum"> 571</span></a>              return;
<a name="l572"><span class="linenum"> 572</span></a>          }
<a name="l573"><span class="linenum"> 573</span></a>  
<a name="l574"><span class="linenum"> 574</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it11610" onMouseOver="hilite(11610)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a>)) {
<a name="l575"><span class="linenum"> 575</span></a>              <a class="var it11610" onMouseOver="hilite(11610)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>();
<a name="l576"><span class="linenum"> 576</span></a>          }
<a name="l577"><span class="linenum"> 577</span></a>          if (<a class="var it11610" onMouseOver="hilite(11610)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a>) {
<a name="l578"><span class="linenum"> 578</span></a>              <a class="var it23182" onMouseOver="hilite(23182)" onMouseOut="lolite()" onClick="logVariable('visiblecheck')" href="../_variables/visiblecheck.html">$visiblecheck</a> = '';
<a name="l579"><span class="linenum"> 579</span></a>          } else {
<a name="l580"><span class="linenum"> 580</span></a>              <a class="var it23182" onMouseOver="hilite(23182)" onMouseOut="lolite()" onClick="logVariable('visiblecheck')" href="../_variables/visiblecheck.html">$visiblecheck</a> = 'AND (bp.visible = 1 OR bp.visible IS NULL)';
<a name="l581"><span class="linenum"> 581</span></a>          }
<a name="l582"><span class="linenum"> 582</span></a>  
<a name="l583"><span class="linenum"> 583</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context;
<a name="l584"><span class="linenum"> 584</span></a>          <a class="var it23183" onMouseOver="hilite(23183)" onMouseOut="lolite()" onClick="logVariable('contexttest')" href="../_variables/contexttest.html">$contexttest</a> = 'bi.parentcontextid IN (:contextid2, :contextid3)';
<a name="l585"><span class="linenum"> 585</span></a>          <a class="var it15442" onMouseOver="hilite(15442)" onMouseOut="lolite()" onClick="logVariable('parentcontextparams')" href="../_variables/parentcontextparams.html">$parentcontextparams</a> = array();
<a name="l586"><span class="linenum"> 586</span></a>          <a class="var it15440" onMouseOver="hilite(15440)" onMouseOut="lolite()" onClick="logVariable('parentcontextids')" href="../_variables/parentcontextids.html">$parentcontextids</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_parent_context_ids')" href="../_functions/get_parent_context_ids.html" onMouseOver="funcPopup(event,'get_parent_context_ids')">get_parent_context_ids</a>();
<a name="l587"><span class="linenum"> 587</span></a>          if (<a class="var it15440" onMouseOver="hilite(15440)" onMouseOut="lolite()" onClick="logVariable('parentcontextids')" href="../_variables/parentcontextids.html">$parentcontextids</a>) {
<a name="l588"><span class="linenum"> 588</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it23184" onMouseOver="hilite(23184)" onMouseOut="lolite()" onClick="logVariable('parentcontexttest')" href="../_variables/parentcontexttest.html">$parentcontexttest</a>, <a class="var it15442" onMouseOver="hilite(15442)" onMouseOut="lolite()" onClick="logVariable('parentcontextparams')" href="../_variables/parentcontextparams.html">$parentcontextparams</a>) =
<a name="l589"><span class="linenum"> 589</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it15440" onMouseOver="hilite(15440)" onMouseOut="lolite()" onClick="logVariable('parentcontextids')" href="../_variables/parentcontextids.html">$parentcontextids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'parentcontext');
<a name="l590"><span class="linenum"> 590</span></a>              <a class="var it23183" onMouseOver="hilite(23183)" onMouseOut="lolite()" onClick="logVariable('contexttest')" href="../_variables/contexttest.html">$contexttest</a> = &quot;(<a class="var it23183" onMouseOver="hilite(23183)" onMouseOut="lolite()" onClick="logVariable('contexttest')" href="../_variables/contexttest.html">$contexttest</a> <a class="function" onClick="logFunction('OR')" href="../_functions/or.html" onMouseOver="funcPopup(event,'or')">OR</a> (bi.showinsubcontexts = 1 AND bi.parentcontextid <a class="var it23184" onMouseOver="hilite(23184)" onMouseOut="lolite()" onClick="logVariable('parentcontexttest')" href="../_variables/parentcontexttest.html">$parentcontexttest</a>))&quot;;
<a name="l591"><span class="linenum"> 591</span></a>          }
<a name="l592"><span class="linenum"> 592</span></a>  
<a name="l593"><span class="linenum"> 593</span></a>          <a class="var it15443" onMouseOver="hilite(15443)" onMouseOut="lolite()" onClick="logVariable('pagetypepatterns')" href="../_variables/pagetypepatterns.html">$pagetypepatterns</a> = <a class="function" onClick="logFunction('matching_page_type_patterns')" href="../_functions/matching_page_type_patterns.html" onMouseOver="funcPopup(event,'matching_page_type_patterns')">matching_page_type_patterns</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype);
<a name="l594"><span class="linenum"> 594</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it23185" onMouseOver="hilite(23185)" onMouseOut="lolite()" onClick="logVariable('pagetypepatterntest')" href="../_variables/pagetypepatterntest.html">$pagetypepatterntest</a>, <a class="var it15446" onMouseOver="hilite(15446)" onMouseOut="lolite()" onClick="logVariable('pagetypepatternparams')" href="../_variables/pagetypepatternparams.html">$pagetypepatternparams</a>) =
<a name="l595"><span class="linenum"> 595</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it15443" onMouseOver="hilite(15443)" onMouseOut="lolite()" onClick="logVariable('pagetypepatterns')" href="../_variables/pagetypepatterns.html">$pagetypepatterns</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'pagetypepatterntest');
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>          <a class="var it8683" onMouseOver="hilite(8683)" onMouseOut="lolite()" onClick="logVariable('ccselect')" href="../_variables/ccselect.html">$ccselect</a> = ', ' . <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l598"><span class="linenum"> 598</span></a>          <a class="var it8684" onMouseOver="hilite(8684)" onMouseOut="lolite()" onClick="logVariable('ccjoin')" href="../_variables/ccjoin.html">$ccjoin</a> = &quot;LEFT JOIN {context} ctx <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (ctx.instanceid = bi.id AND ctx.contextlevel = :contextlevel)&quot;;
<a name="l599"><span class="linenum"> 599</span></a>  
<a name="l600"><span class="linenum"> 600</span></a>          <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l601"><span class="linenum"> 601</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l602"><span class="linenum"> 602</span></a>              'contextlevel' =&gt; <a class="constant" onClick="logConstant('CONTEXT_BLOCK')" href="../_constants/CONTEXT_BLOCK.html" onMouseOver="constPopup(event,'CONTEXT_BLOCK')">CONTEXT_BLOCK</a>,
<a name="l603"><span class="linenum"> 603</span></a>              'subpage1' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage,
<a name="l604"><span class="linenum"> 604</span></a>              'subpage2' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage,
<a name="l605"><span class="linenum"> 605</span></a>              'contextid1' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l606"><span class="linenum"> 606</span></a>              'contextid2' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l607"><span class="linenum"> 607</span></a>              'contextid3' =&gt; <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>-&gt;<a onClick="logVariable('id')" class="var it42913" onMouseOver="hilite(42913)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l608"><span class="linenum"> 608</span></a>              'pagetype' =&gt; <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype,
<a name="l609"><span class="linenum"> 609</span></a>          );
<a name="l610"><span class="linenum"> 610</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage === '') {
<a name="l611"><span class="linenum"> 611</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['subpage1'] = '';
<a name="l612"><span class="linenum"> 612</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['subpage2'] = '';
<a name="l613"><span class="linenum"> 613</span></a>          }
<a name="l614"><span class="linenum"> 614</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT
<a name="l615"><span class="linenum"> 615</span></a>                      bi.id,
<a name="l616"><span class="linenum"> 616</span></a>                      bp.id AS blockpositionid,
<a name="l617"><span class="linenum"> 617</span></a>                      bi.blockname,
<a name="l618"><span class="linenum"> 618</span></a>                      bi.parentcontextid,
<a name="l619"><span class="linenum"> 619</span></a>                      bi.showinsubcontexts,
<a name="l620"><span class="linenum"> 620</span></a>                      bi.pagetypepattern,
<a name="l621"><span class="linenum"> 621</span></a>                      bi.subpagepattern,
<a name="l622"><span class="linenum"> 622</span></a>                      bi.defaultregion,
<a name="l623"><span class="linenum"> 623</span></a>                      bi.defaultweight,
<a name="l624"><span class="linenum"> 624</span></a>                      COALESCE(bp.visible, 1) AS visible,
<a name="l625"><span class="linenum"> 625</span></a>                      COALESCE(bp.region, bi.defaultregion) AS region,
<a name="l626"><span class="linenum"> 626</span></a>                      COALESCE(bp.weight, bi.defaultweight) AS weight,
<a name="l627"><span class="linenum"> 627</span></a>                      bi.configdata
<a name="l628"><span class="linenum"> 628</span></a>                      <a class="var it8683" onMouseOver="hilite(8683)" onMouseOut="lolite()" onClick="logVariable('ccselect')" href="../_variables/ccselect.html">$ccselect</a>
<a name="l629"><span class="linenum"> 629</span></a>  
<a name="l630"><span class="linenum"> 630</span></a>                  FROM {block_instances} bi
<a name="l631"><span class="linenum"> 631</span></a>                  JOIN {block} b ON bi.blockname = b.name
<a name="l632"><span class="linenum"> 632</span></a>                  LEFT JOIN {block_positions} bp ON bp.blockinstanceid = bi.id
<a name="l633"><span class="linenum"> 633</span></a>                                                    AND bp.contextid = :contextid1
<a name="l634"><span class="linenum"> 634</span></a>                                                    AND bp.pagetype = :pagetype
<a name="l635"><span class="linenum"> 635</span></a>                                                    AND bp.subpage = :subpage1
<a name="l636"><span class="linenum"> 636</span></a>                  <a class="var it8684" onMouseOver="hilite(8684)" onMouseOut="lolite()" onClick="logVariable('ccjoin')" href="../_variables/ccjoin.html">$ccjoin</a>
<a name="l637"><span class="linenum"> 637</span></a>  
<a name="l638"><span class="linenum"> 638</span></a>                  WHERE
<a name="l639"><span class="linenum"> 639</span></a>                  <a class="var it23183" onMouseOver="hilite(23183)" onMouseOut="lolite()" onClick="logVariable('contexttest')" href="../_variables/contexttest.html">$contexttest</a>
<a name="l640"><span class="linenum"> 640</span></a>                  AND bi.pagetypepattern <a class="var it23185" onMouseOver="hilite(23185)" onMouseOut="lolite()" onClick="logVariable('pagetypepatterntest')" href="../_variables/pagetypepatterntest.html">$pagetypepatterntest</a>
<a name="l641"><span class="linenum"> 641</span></a>                  AND (bi.subpagepattern IS NULL OR bi.subpagepattern = :subpage2)
<a name="l642"><span class="linenum"> 642</span></a>                  <a class="var it23182" onMouseOver="hilite(23182)" onMouseOut="lolite()" onClick="logVariable('visiblecheck')" href="../_variables/visiblecheck.html">$visiblecheck</a>
<a name="l643"><span class="linenum"> 643</span></a>                  AND b.visible = 1
<a name="l644"><span class="linenum"> 644</span></a>  
<a name="l645"><span class="linenum"> 645</span></a>                  ORDER BY
<a name="l646"><span class="linenum"> 646</span></a>                      COALESCE(bp.region, bi.defaultregion),
<a name="l647"><span class="linenum"> 647</span></a>                      COALESCE(bp.weight, bi.defaultweight),
<a name="l648"><span class="linenum"> 648</span></a>                      bi.id&quot;;
<a name="l649"><span class="linenum"> 649</span></a>          <a class="var it11606" onMouseOver="hilite(11606)" onMouseOut="lolite()" onClick="logVariable('blockinstances')" href="../_variables/blockinstances.html">$blockinstances</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> + <a class="var it15442" onMouseOver="hilite(15442)" onMouseOut="lolite()" onClick="logVariable('parentcontextparams')" href="../_variables/parentcontextparams.html">$parentcontextparams</a> + <a class="var it15446" onMouseOver="hilite(15446)" onMouseOut="lolite()" onClick="logVariable('pagetypepatternparams')" href="../_variables/pagetypepatternparams.html">$pagetypepatternparams</a>);
<a name="l650"><span class="linenum"> 650</span></a>  
<a name="l651"><span class="linenum"> 651</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('prepare_per_region_arrays')" href="../_functions/prepare_per_region_arrays.html" onMouseOver="funcPopup(event,'prepare_per_region_arrays')">prepare_per_region_arrays</a>();
<a name="l652"><span class="linenum"> 652</span></a>          <a class="var it4076" onMouseOver="hilite(4076)" onMouseOut="lolite()" onClick="logVariable('unknown')" href="../_variables/unknown.html">$unknown</a> = array();
<a name="l653"><span class="linenum"> 653</span></a>          foreach (<a class="var it11606" onMouseOver="hilite(11606)" onMouseOut="lolite()" onClick="logVariable('blockinstances')" href="../_variables/blockinstances.html">$blockinstances</a> as <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>) {
<a name="l654"><span class="linenum"> 654</span></a>              <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>);
<a name="l655"><span class="linenum"> 655</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('region')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/region.html">region</a>)) {
<a name="l656"><span class="linenum"> 656</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>[<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('region')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/region.html">region</a>][] = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>;
<a name="l657"><span class="linenum"> 657</span></a>              } else {
<a name="l658"><span class="linenum"> 658</span></a>                  <a class="var it4076" onMouseOver="hilite(4076)" onMouseOut="lolite()" onClick="logVariable('unknown')" href="../_variables/unknown.html">$unknown</a>[] = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>;
<a name="l659"><span class="linenum"> 659</span></a>              }
<a name="l660"><span class="linenum"> 660</span></a>          }
<a name="l661"><span class="linenum"> 661</span></a>  
<a name="l662"><span class="linenum"> 662</span></a>  <span class="comment">        // Pages don't necessarily have a defaultregion. The  one time this can</span>
<a name="l663"><span class="linenum"> 663</span></a>  <span class="comment">        // happen is when there are no theme block regions, but the script itself</span>
<a name="l664"><span class="linenum"> 664</span></a>  <span class="comment">        // has a block region in the main content area.</span>
<a name="l665"><span class="linenum"> 665</span></a>          if (!empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>)) {
<a name="l666"><span class="linenum"> 666</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>] =
<a name="l667"><span class="linenum"> 667</span></a>                      <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>[<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>], <a class="var it4076" onMouseOver="hilite(4076)" onMouseOut="lolite()" onClick="logVariable('unknown')" href="../_variables/unknown.html">$unknown</a>);
<a name="l668"><span class="linenum"> 668</span></a>          }
<a name="l669"><span class="linenum"> 669</span></a>      }
<a name="l670"><span class="linenum"> 670</span></a>  
<a name="l671"><span class="linenum"> 671</span></a>      <span class="comment">/**</span>
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment">     * Add a block to the current page, or related pages. The block is added to</span>
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">     * context $this-&gt;page-&gt;contextid. If $pagetypepattern $subpagepattern</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment">     *</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">     * @param string $blockname The type of block to add.</span>
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment">     * @param string $region the block region on this page to add the block to.</span>
<a name="l677"><span class="linenum"> 677</span></a>  <span class="comment">     * @param integer $weight determines the order where this block appears in the region.</span>
<a name="l678"><span class="linenum"> 678</span></a>  <span class="comment">     * @param boolean $showinsubcontexts whether this block appears in subcontexts, or just the current context.</span>
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment">     * @param string|null $pagetypepattern which page types this block should appear on. Defaults to just the current page type.</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment">     * @param string|null $subpagepattern which subpage this block should appear on. NULL = any (the default), otherwise only the specified subpage.</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment">     */</span>
<a name="l682"><span class="linenum"> 682</span></a>      public function <a class="function" onClick="logFunction('add_block')" href="../_functions/add_block.html" onMouseOver="funcPopup(event,'add_block')">add_block</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>, <a class="var it15448" onMouseOver="hilite(15448)" onMouseOut="lolite()" onClick="logVariable('showinsubcontexts')" href="../_variables/showinsubcontexts.html">$showinsubcontexts</a>, <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = NULL, <a class="var it11608" onMouseOver="hilite(11608)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a> = NULL) {
<a name="l683"><span class="linenum"> 683</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment">        // Allow invisible blocks because this is used when adding default page blocks, which</span>
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment">        // might include invisible ones if the user makes some default blocks invisible</span>
<a name="l686"><span class="linenum"> 686</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_known_block_type')" href="../_functions/check_known_block_type.html" onMouseOver="funcPopup(event,'check_known_block_type')">check_known_block_type</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, true);
<a name="l687"><span class="linenum"> 687</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_region_is_known')" href="../_functions/check_region_is_known.html" onMouseOver="funcPopup(event,'check_region_is_known')">check_region_is_known</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l688"><span class="linenum"> 688</span></a>  
<a name="l689"><span class="linenum"> 689</span></a>          if (empty(<a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>)) {
<a name="l690"><span class="linenum"> 690</span></a>              <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype;
<a name="l691"><span class="linenum"> 691</span></a>          }
<a name="l692"><span class="linenum"> 692</span></a>  
<a name="l693"><span class="linenum"> 693</span></a>          <a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a> = new stdClass;
<a name="l694"><span class="linenum"> 694</span></a>          <a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('blockname')" class="var it44195" onMouseOver="hilite(44195)" onMouseOut="lolite()" href="../_variables/blockname.html">blockname</a> = <a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>;
<a name="l695"><span class="linenum"> 695</span></a>          <a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('parentcontextid')" class="var it44195" onMouseOver="hilite(44195)" onMouseOut="lolite()" href="../_variables/parentcontextid.html">parentcontextid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;id;
<a name="l696"><span class="linenum"> 696</span></a>          <a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it44195" onMouseOver="hilite(44195)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = !empty(<a class="var it15448" onMouseOver="hilite(15448)" onMouseOut="lolite()" onClick="logVariable('showinsubcontexts')" href="../_variables/showinsubcontexts.html">$showinsubcontexts</a>);
<a name="l697"><span class="linenum"> 697</span></a>          <a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it44195" onMouseOver="hilite(44195)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a> = <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>;
<a name="l698"><span class="linenum"> 698</span></a>          <a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('subpagepattern')" class="var it44195" onMouseOver="hilite(44195)" onMouseOut="lolite()" href="../_variables/subpagepattern.html">subpagepattern</a> = <a class="var it11608" onMouseOver="hilite(11608)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a>;
<a name="l699"><span class="linenum"> 699</span></a>          <a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it44195" onMouseOver="hilite(44195)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a> = <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>;
<a name="l700"><span class="linenum"> 700</span></a>          <a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('defaultweight')" class="var it44195" onMouseOver="hilite(44195)" onMouseOut="lolite()" href="../_variables/defaultweight.html">defaultweight</a> = <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>;
<a name="l701"><span class="linenum"> 701</span></a>          <a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('configdata')" class="var it44195" onMouseOver="hilite(44195)" onMouseOut="lolite()" href="../_variables/configdata.html">configdata</a> = '';
<a name="l702"><span class="linenum"> 702</span></a>          <a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('id')" class="var it44195" onMouseOver="hilite(44195)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('block_instances', <a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>);
<a name="l703"><span class="linenum"> 703</span></a>  
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment">        // Ensure the block context is created.</span>
<a name="l705"><span class="linenum"> 705</span></a>          <a class="class" onClick="logClass('context_block')" href="../_classes/context_block.html" onMouseOver="classPopup(event,'context_block')">context_block</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('id')" class="var it44195" onMouseOver="hilite(44195)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l706"><span class="linenum"> 706</span></a>  
<a name="l707"><span class="linenum"> 707</span></a>  <span class="comment">        // If the new instance was created, allow it to do additional setup</span>
<a name="l708"><span class="linenum"> 708</span></a>          if (<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it23186" onMouseOver="hilite(23186)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>)) {
<a name="l709"><span class="linenum"> 709</span></a>              <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('instance_create')" href="../_functions/instance_create.html" onMouseOver="funcPopup(event,'instance_create')">instance_create</a>();
<a name="l710"><span class="linenum"> 710</span></a>          }
<a name="l711"><span class="linenum"> 711</span></a>      }
<a name="l712"><span class="linenum"> 712</span></a>  
<a name="l713"><span class="linenum"> 713</span></a>      public function <a class="function" onClick="logFunction('add_block_at_end_of_default_region')" href="../_functions/add_block_at_end_of_default_region.html" onMouseOver="funcPopup(event,'add_block_at_end_of_default_region')">add_block_at_end_of_default_region</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>) {
<a name="l714"><span class="linenum"> 714</span></a>          <a class="var it23187" onMouseOver="hilite(23187)" onMouseOut="lolite()" onClick="logVariable('defaulregion')" href="../_variables/defaulregion.html">$defaulregion</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_default_region')" href="../_functions/get_default_region.html" onMouseOver="funcPopup(event,'get_default_region')">get_default_region</a>();
<a name="l715"><span class="linenum"> 715</span></a>  
<a name="l716"><span class="linenum"> 716</span></a>          <a class="var it23188" onMouseOver="hilite(23188)" onMouseOut="lolite()" onClick="logVariable('lastcurrentblock')" href="../_variables/lastcurrentblock.html">$lastcurrentblock</a> = <a class="phpfunction" onClick="logFunction('end')" href="../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>[<a class="var it23187" onMouseOver="hilite(23187)" onMouseOut="lolite()" onClick="logVariable('defaulregion')" href="../_variables/defaulregion.html">$defaulregion</a>]);
<a name="l717"><span class="linenum"> 717</span></a>          if (<a class="var it23188" onMouseOver="hilite(23188)" onMouseOut="lolite()" onClick="logVariable('lastcurrentblock')" href="../_variables/lastcurrentblock.html">$lastcurrentblock</a>) {
<a name="l718"><span class="linenum"> 718</span></a>              <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> = <a class="var it23188" onMouseOver="hilite(23188)" onMouseOut="lolite()" onClick="logVariable('lastcurrentblock')" href="../_variables/lastcurrentblock.html">$lastcurrentblock</a>-&gt;<a onClick="logVariable('weight')" class="var it44213" onMouseOver="hilite(44213)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> + 1;
<a name="l719"><span class="linenum"> 719</span></a>          } else {
<a name="l720"><span class="linenum"> 720</span></a>              <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> = 0;
<a name="l721"><span class="linenum"> 721</span></a>          }
<a name="l722"><span class="linenum"> 722</span></a>  
<a name="l723"><span class="linenum"> 723</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage) {
<a name="l724"><span class="linenum"> 724</span></a>              <a class="var it3738" onMouseOver="hilite(3738)" onMouseOut="lolite()" onClick="logVariable('subpage')" href="../_variables/subpage.html">$subpage</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage;
<a name="l725"><span class="linenum"> 725</span></a>          } else {
<a name="l726"><span class="linenum"> 726</span></a>              <a class="var it3738" onMouseOver="hilite(3738)" onMouseOut="lolite()" onClick="logVariable('subpage')" href="../_variables/subpage.html">$subpage</a> = null;
<a name="l727"><span class="linenum"> 727</span></a>          }
<a name="l728"><span class="linenum"> 728</span></a>  
<a name="l729"><span class="linenum"> 729</span></a>  <span class="comment">        // Special case. Course view page type include the course format, but we</span>
<a name="l730"><span class="linenum"> 730</span></a>  <span class="comment">        // want to add the block non-format-specifically.</span>
<a name="l731"><span class="linenum"> 731</span></a>          <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype;
<a name="l732"><span class="linenum"> 732</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>, 'course-view') === 0) {
<a name="l733"><span class="linenum"> 733</span></a>              <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = 'course-view-*';
<a name="l734"><span class="linenum"> 734</span></a>          }
<a name="l735"><span class="linenum"> 735</span></a>  
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment">        // We should end using this for ALL the blocks, making always the 1st option</span>
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment">        // the default one to be used. Until then, this is one hack to avoid the</span>
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment">        // 'pagetypewarning' message on blocks initial edition (MDL-27829) caused by</span>
<a name="l739"><span class="linenum"> 739</span></a>  <span class="comment">        // non-existing $pagetypepattern set. This way at least we guarantee one &quot;valid&quot;</span>
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">        // (the FIRST $pagetypepattern will be set)</span>
<a name="l741"><span class="linenum"> 741</span></a>  
<a name="l742"><span class="linenum"> 742</span></a>  <span class="comment">        // We are applying it to all blocks created in mod pages for now and only if the</span>
<a name="l743"><span class="linenum"> 743</span></a>  <span class="comment">        // default pagetype is not one of the available options</span>
<a name="l744"><span class="linenum"> 744</span></a>          if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/^mod-.*-/', <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>)) {
<a name="l745"><span class="linenum"> 745</span></a>              <a class="var it23189" onMouseOver="hilite(23189)" onMouseOut="lolite()" onClick="logVariable('pagetypelist')" href="../_variables/pagetypelist.html">$pagetypelist</a> = <a class="function" onClick="logFunction('generate_page_type_patterns')" href="../_functions/generate_page_type_patterns.html" onMouseOver="funcPopup(event,'generate_page_type_patterns')">generate_page_type_patterns</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype, null, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context);
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment">            // Only go for the first if the pagetype is not a valid option</span>
<a name="l747"><span class="linenum"> 747</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it23189" onMouseOver="hilite(23189)" onMouseOut="lolite()" onClick="logVariable('pagetypelist')" href="../_variables/pagetypelist.html">$pagetypelist</a>) &amp;&amp; !<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>, <a class="var it23189" onMouseOver="hilite(23189)" onMouseOut="lolite()" onClick="logVariable('pagetypelist')" href="../_variables/pagetypelist.html">$pagetypelist</a>)) {
<a name="l748"><span class="linenum"> 748</span></a>                  <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a>(<a class="var it23189" onMouseOver="hilite(23189)" onMouseOut="lolite()" onClick="logVariable('pagetypelist')" href="../_variables/pagetypelist.html">$pagetypelist</a>);
<a name="l749"><span class="linenum"> 749</span></a>              }
<a name="l750"><span class="linenum"> 750</span></a>          }
<a name="l751"><span class="linenum"> 751</span></a>  <span class="comment">        // Surely other pages like course-report will need this too, they just are not important</span>
<a name="l752"><span class="linenum"> 752</span></a>  <span class="comment">        // enough now. This will be decided in the coming days. (MDL-27829, MDL-28150)</span>
<a name="l753"><span class="linenum"> 753</span></a>  
<a name="l754"><span class="linenum"> 754</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_block')" href="../_functions/add_block.html" onMouseOver="funcPopup(event,'add_block')">add_block</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it23187" onMouseOver="hilite(23187)" onMouseOut="lolite()" onClick="logVariable('defaulregion')" href="../_variables/defaulregion.html">$defaulregion</a>, <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>, false, <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>, <a class="var it3738" onMouseOver="hilite(3738)" onMouseOut="lolite()" onClick="logVariable('subpage')" href="../_variables/subpage.html">$subpage</a>);
<a name="l755"><span class="linenum"> 755</span></a>      }
<a name="l756"><span class="linenum"> 756</span></a>  
<a name="l757"><span class="linenum"> 757</span></a>      <span class="comment">/**</span>
<a name="l758"><span class="linenum"> 758</span></a>  <span class="comment">     * Convenience method, calls add_block repeatedly for all the blocks in $blocks. Optionally, a starting weight</span>
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">     * can be used to decide the starting point that blocks are added in the region, the weight is passed to {@link add_block}</span>
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment">     * and incremented by the position of the block in the $blocks array</span>
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment">     *</span>
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment">     * @param array $blocks array with array keys the region names, and values an array of block names.</span>
<a name="l763"><span class="linenum"> 763</span></a>  <span class="comment">     * @param string $pagetypepattern optional. Passed to {@link add_block()}</span>
<a name="l764"><span class="linenum"> 764</span></a>  <span class="comment">     * @param string $subpagepattern optional. Passed to {@link add_block()}</span>
<a name="l765"><span class="linenum"> 765</span></a>  <span class="comment">     * @param boolean $showinsubcontexts optional. Passed to {@link add_block()}</span>
<a name="l766"><span class="linenum"> 766</span></a>  <span class="comment">     * @param integer $weight optional. Determines the starting point that the blocks are added in the region.</span>
<a name="l767"><span class="linenum"> 767</span></a>  <span class="comment">     */</span>
<a name="l768"><span class="linenum"> 768</span></a>      public function <a class="function" onClick="logFunction('add_blocks')" href="../_functions/add_blocks.html" onMouseOver="funcPopup(event,'add_blocks')">add_blocks</a>(<a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>, <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = NULL, <a class="var it11608" onMouseOver="hilite(11608)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a> = NULL, <a class="var it15448" onMouseOver="hilite(15448)" onMouseOut="lolite()" onClick="logVariable('showinsubcontexts')" href="../_variables/showinsubcontexts.html">$showinsubcontexts</a>=false, <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>=0) {
<a name="l769"><span class="linenum"> 769</span></a>          <a class="var it23190" onMouseOver="hilite(23190)" onMouseOut="lolite()" onClick="logVariable('initialweight')" href="../_variables/initialweight.html">$initialweight</a> = <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>;
<a name="l770"><span class="linenum"> 770</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_regions')" href="../_functions/add_regions.html" onMouseOver="funcPopup(event,'add_regions')">add_regions</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>), false);
<a name="l771"><span class="linenum"> 771</span></a>          foreach (<a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> as <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> =&gt; <a class="var it23191" onMouseOver="hilite(23191)" onMouseOut="lolite()" onClick="logVariable('regionblocks')" href="../_variables/regionblocks.html">$regionblocks</a>) {
<a name="l772"><span class="linenum"> 772</span></a>              foreach (<a class="var it23191" onMouseOver="hilite(23191)" onMouseOut="lolite()" onClick="logVariable('regionblocks')" href="../_variables/regionblocks.html">$regionblocks</a> as <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> =&gt; <a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>) {
<a name="l773"><span class="linenum"> 773</span></a>                  <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> = <a class="var it23190" onMouseOver="hilite(23190)" onMouseOut="lolite()" onClick="logVariable('initialweight')" href="../_variables/initialweight.html">$initialweight</a> + <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a>;
<a name="l774"><span class="linenum"> 774</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_block')" href="../_functions/add_block.html" onMouseOver="funcPopup(event,'add_block')">add_block</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>, <a class="var it15448" onMouseOver="hilite(15448)" onMouseOut="lolite()" onClick="logVariable('showinsubcontexts')" href="../_variables/showinsubcontexts.html">$showinsubcontexts</a>, <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>, <a class="var it11608" onMouseOver="hilite(11608)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a>);
<a name="l775"><span class="linenum"> 775</span></a>              }
<a name="l776"><span class="linenum"> 776</span></a>          }
<a name="l777"><span class="linenum"> 777</span></a>      }
<a name="l778"><span class="linenum"> 778</span></a>  
<a name="l779"><span class="linenum"> 779</span></a>      <span class="comment">/**</span>
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment">     * Move a block to a new position on this page.</span>
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment">     *</span>
<a name="l782"><span class="linenum"> 782</span></a>  <span class="comment">     * If this block cannot appear on any other pages, then we change defaultposition/weight</span>
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment">     * in the block_instances table. Otherwise we just set the position on this page.</span>
<a name="l784"><span class="linenum"> 784</span></a>  <span class="comment">     *</span>
<a name="l785"><span class="linenum"> 785</span></a>  <span class="comment">     * @param $blockinstanceid the block instance id.</span>
<a name="l786"><span class="linenum"> 786</span></a>  <span class="comment">     * @param $newregion the new region name.</span>
<a name="l787"><span class="linenum"> 787</span></a>  <span class="comment">     * @param $newweight the new weight.</span>
<a name="l788"><span class="linenum"> 788</span></a>  <span class="comment">     */</span>
<a name="l789"><span class="linenum"> 789</span></a>      public function <a class="function" onClick="logFunction('reposition_block')" href="../_functions/reposition_block.html" onMouseOver="funcPopup(event,'reposition_block')">reposition_block</a>(<a class="var it15453" onMouseOver="hilite(15453)" onMouseOut="lolite()" onClick="logVariable('blockinstanceid')" href="../_variables/blockinstanceid.html">$blockinstanceid</a>, <a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>, <a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>) {
<a name="l790"><span class="linenum"> 790</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l791"><span class="linenum"> 791</span></a>  
<a name="l792"><span class="linenum"> 792</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_region_is_known')" href="../_functions/check_region_is_known.html" onMouseOver="funcPopup(event,'check_region_is_known')">check_region_is_known</a>(<a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>);
<a name="l793"><span class="linenum"> 793</span></a>          <a class="var it2538" onMouseOver="hilite(2538)" onMouseOut="lolite()" onClick="logVariable('inst')" href="../_variables/inst.html">$inst</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_instance')" href="../_functions/find_instance.html" onMouseOver="funcPopup(event,'find_instance')">find_instance</a>(<a class="var it15453" onMouseOver="hilite(15453)" onMouseOut="lolite()" onClick="logVariable('blockinstanceid')" href="../_variables/blockinstanceid.html">$blockinstanceid</a>);
<a name="l794"><span class="linenum"> 794</span></a>  
<a name="l795"><span class="linenum"> 795</span></a>          <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a> = <a class="var it2538" onMouseOver="hilite(2538)" onMouseOut="lolite()" onClick="logVariable('inst')" href="../_variables/inst.html">$inst</a>-&gt;<a onClick="logVariable('instance')" class="var it43429" onMouseOver="hilite(43429)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>;
<a name="l796"><span class="linenum"> 796</span></a>          if (<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> == <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('defaultweight')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/defaultweight.html">defaultweight</a> &amp;&amp; <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('region')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/region.html">region</a> == <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a> &amp;&amp;
<a name="l797"><span class="linenum"> 797</span></a>                  !<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a>, '*') === false &amp;&amp;
<a name="l798"><span class="linenum"> 798</span></a>                  (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage || <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('subpagepattern')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/subpagepattern.html">subpagepattern</a>)) {
<a name="l799"><span class="linenum"> 799</span></a>  
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment">            // Set default position</span>
<a name="l801"><span class="linenum"> 801</span></a>              <a class="var it23194" onMouseOver="hilite(23194)" onMouseOut="lolite()" onClick="logVariable('newbi')" href="../_variables/newbi.html">$newbi</a> = new stdClass;
<a name="l802"><span class="linenum"> 802</span></a>              <a class="var it23194" onMouseOver="hilite(23194)" onMouseOut="lolite()" onClick="logVariable('newbi')" href="../_variables/newbi.html">$newbi</a>-&gt;<a onClick="logVariable('id')" class="var it44214" onMouseOver="hilite(44214)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('id')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l803"><span class="linenum"> 803</span></a>              <a class="var it23194" onMouseOver="hilite(23194)" onMouseOut="lolite()" onClick="logVariable('newbi')" href="../_variables/newbi.html">$newbi</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it44214" onMouseOver="hilite(44214)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a> = <a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>;
<a name="l804"><span class="linenum"> 804</span></a>              <a class="var it23194" onMouseOver="hilite(23194)" onMouseOut="lolite()" onClick="logVariable('newbi')" href="../_variables/newbi.html">$newbi</a>-&gt;<a onClick="logVariable('defaultweight')" class="var it44214" onMouseOver="hilite(44214)" onMouseOut="lolite()" href="../_variables/defaultweight.html">defaultweight</a> = <a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>;
<a name="l805"><span class="linenum"> 805</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('block_instances', <a class="var it23194" onMouseOver="hilite(23194)" onMouseOut="lolite()" onClick="logVariable('newbi')" href="../_variables/newbi.html">$newbi</a>);
<a name="l806"><span class="linenum"> 806</span></a>  
<a name="l807"><span class="linenum"> 807</span></a>              if (<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('blockpositionid')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/blockpositionid.html">blockpositionid</a>) {
<a name="l808"><span class="linenum"> 808</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a> = new stdClass;
<a name="l809"><span class="linenum"> 809</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('id')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('blockpositionid')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/blockpositionid.html">blockpositionid</a>;
<a name="l810"><span class="linenum"> 810</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('region')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/region.html">region</a> = <a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>;
<a name="l811"><span class="linenum"> 811</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('weight')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> = <a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>;
<a name="l812"><span class="linenum"> 812</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('block_positions', <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>);
<a name="l813"><span class="linenum"> 813</span></a>              }
<a name="l814"><span class="linenum"> 814</span></a>  
<a name="l815"><span class="linenum"> 815</span></a>          } else {
<a name="l816"><span class="linenum"> 816</span></a>  <span class="comment">            // Just set position on this page.</span>
<a name="l817"><span class="linenum"> 817</span></a>              <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a> = new stdClass;
<a name="l818"><span class="linenum"> 818</span></a>              <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('region')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/region.html">region</a> = <a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>;
<a name="l819"><span class="linenum"> 819</span></a>              <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('weight')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> = <a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>;
<a name="l820"><span class="linenum"> 820</span></a>  
<a name="l821"><span class="linenum"> 821</span></a>              if (<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('blockpositionid')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/blockpositionid.html">blockpositionid</a>) {
<a name="l822"><span class="linenum"> 822</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('id')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('blockpositionid')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/blockpositionid.html">blockpositionid</a>;
<a name="l823"><span class="linenum"> 823</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('block_positions', <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>);
<a name="l824"><span class="linenum"> 824</span></a>  
<a name="l825"><span class="linenum"> 825</span></a>              } else {
<a name="l826"><span class="linenum"> 826</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a> = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('id')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l827"><span class="linenum"> 827</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('contextid')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;id;
<a name="l828"><span class="linenum"> 828</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('pagetype')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype;
<a name="l829"><span class="linenum"> 829</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage) {
<a name="l830"><span class="linenum"> 830</span></a>                      <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('subpage')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage;
<a name="l831"><span class="linenum"> 831</span></a>                  } else {
<a name="l832"><span class="linenum"> 832</span></a>                      <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('subpage')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a> = '';
<a name="l833"><span class="linenum"> 833</span></a>                  }
<a name="l834"><span class="linenum"> 834</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('visible')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('visible')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>;
<a name="l835"><span class="linenum"> 835</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('block_positions', <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>);
<a name="l836"><span class="linenum"> 836</span></a>              }
<a name="l837"><span class="linenum"> 837</span></a>          }
<a name="l838"><span class="linenum"> 838</span></a>      }
<a name="l839"><span class="linenum"> 839</span></a>  
<a name="l840"><span class="linenum"> 840</span></a>      <span class="comment">/**</span>
<a name="l841"><span class="linenum"> 841</span></a>  <span class="comment">     * Find a given block by its instance id</span>
<a name="l842"><span class="linenum"> 842</span></a>  <span class="comment">     *</span>
<a name="l843"><span class="linenum"> 843</span></a>  <span class="comment">     * @param integer $instanceid</span>
<a name="l844"><span class="linenum"> 844</span></a>  <span class="comment">     * @return block_base</span>
<a name="l845"><span class="linenum"> 845</span></a>  <span class="comment">     */</span>
<a name="l846"><span class="linenum"> 846</span></a>      public function <a class="function" onClick="logFunction('find_instance')" href="../_functions/find_instance.html" onMouseOver="funcPopup(event,'find_instance')">find_instance</a>(<a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>) {
<a name="l847"><span class="linenum"> 847</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a> as <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> =&gt; <a class="var it2687" onMouseOver="hilite(2687)" onMouseOut="lolite()" onClick="logVariable('notused')" href="../_variables/notused.html">$notused</a>) {
<a name="l848"><span class="linenum"> 848</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_instances_exist')" href="../_functions/ensure_instances_exist.html" onMouseOver="funcPopup(event,'ensure_instances_exist')">ensure_instances_exist</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l849"><span class="linenum"> 849</span></a>              foreach(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l850"><span class="linenum"> 850</span></a>                  if (<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id == <a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>) {
<a name="l851"><span class="linenum"> 851</span></a>                      return <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>;
<a name="l852"><span class="linenum"> 852</span></a>                  }
<a name="l853"><span class="linenum"> 853</span></a>              }
<a name="l854"><span class="linenum"> 854</span></a>          }
<a name="l855"><span class="linenum"> 855</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('block_not_on_page_exception')" href="../_classes/block_not_on_page_exception.html" onMouseOver="classPopup(event,'block_not_on_page_exception')">block_not_on_page_exception</a>(<a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>);
<a name="l856"><span class="linenum"> 856</span></a>      }
<a name="l857"><span class="linenum"> 857</span></a>  
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">/// Inner workings =============================================================</span>
<a name="l859"><span class="linenum"> 859</span></a>  
<a name="l860"><span class="linenum"> 860</span></a>      <span class="comment">/**</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">     * Check whether the page blocks have been loaded yet</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment">     *</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment">     * @return void Throws coding exception if already loaded</span>
<a name="l864"><span class="linenum"> 864</span></a>  <span class="comment">     */</span>
<a name="l865"><span class="linenum"> 865</span></a>      protected function <a class="function" onClick="logFunction('check_not_yet_loaded')" href="../_functions/check_not_yet_loaded.html" onMouseOver="funcPopup(event,'check_not_yet_loaded')">check_not_yet_loaded</a>() {
<a name="l866"><span class="linenum"> 866</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>)) {
<a name="l867"><span class="linenum"> 867</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('block_manager has already loaded the blocks, to it is too late to change things that might affect which blocks are visible.');
<a name="l868"><span class="linenum"> 868</span></a>          }
<a name="l869"><span class="linenum"> 869</span></a>      }
<a name="l870"><span class="linenum"> 870</span></a>  
<a name="l871"><span class="linenum"> 871</span></a>      <span class="comment">/**</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">     * Check whether the page blocks have been loaded yet</span>
<a name="l873"><span class="linenum"> 873</span></a>  <span class="comment">     *</span>
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment">     * Nearly identical to the above function {@link check_not_yet_loaded()} except different message</span>
<a name="l875"><span class="linenum"> 875</span></a>  <span class="comment">     *</span>
<a name="l876"><span class="linenum"> 876</span></a>  <span class="comment">     * @return void Throws coding exception if already loaded</span>
<a name="l877"><span class="linenum"> 877</span></a>  <span class="comment">     */</span>
<a name="l878"><span class="linenum"> 878</span></a>      protected function <a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>() {
<a name="l879"><span class="linenum"> 879</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>)) {
<a name="l880"><span class="linenum"> 880</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('block_manager has not yet loaded the blocks, to it is too soon to request the information you asked for.');
<a name="l881"><span class="linenum"> 881</span></a>          }
<a name="l882"><span class="linenum"> 882</span></a>      }
<a name="l883"><span class="linenum"> 883</span></a>  
<a name="l884"><span class="linenum"> 884</span></a>      <span class="comment">/**</span>
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">     * Check if a block type is known and usable</span>
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">     *</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment">     * @param string $blockname The block type name to search for</span>
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment">     * @param bool $includeinvisible Include disabled block types in the initial pass</span>
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment">     * @return void Coding Exception thrown if unknown or not enabled</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment">     */</span>
<a name="l891"><span class="linenum"> 891</span></a>      protected function <a class="function" onClick="logFunction('check_known_block_type')" href="../_functions/check_known_block_type.html" onMouseOver="funcPopup(event,'check_known_block_type')">check_known_block_type</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it11610" onMouseOver="hilite(11610)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a> = false) {
<a name="l892"><span class="linenum"> 892</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_block_type')" href="../_functions/is_known_block_type.html" onMouseOver="funcPopup(event,'is_known_block_type')">is_known_block_type</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it11610" onMouseOver="hilite(11610)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a>)) {
<a name="l893"><span class="linenum"> 893</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_block_type')" href="../_functions/is_known_block_type.html" onMouseOver="funcPopup(event,'is_known_block_type')">is_known_block_type</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, true)) {
<a name="l894"><span class="linenum"> 894</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unknown block type ' . <a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>);
<a name="l895"><span class="linenum"> 895</span></a>              } else {
<a name="l896"><span class="linenum"> 896</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Block type ' . <a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a> . ' has been disabled by the administrator.');
<a name="l897"><span class="linenum"> 897</span></a>              }
<a name="l898"><span class="linenum"> 898</span></a>          }
<a name="l899"><span class="linenum"> 899</span></a>      }
<a name="l900"><span class="linenum"> 900</span></a>  
<a name="l901"><span class="linenum"> 901</span></a>      <span class="comment">/**</span>
<a name="l902"><span class="linenum"> 902</span></a>  <span class="comment">     * Check if a region is known by its name</span>
<a name="l903"><span class="linenum"> 903</span></a>  <span class="comment">     *</span>
<a name="l904"><span class="linenum"> 904</span></a>  <span class="comment">     * @param string $region</span>
<a name="l905"><span class="linenum"> 905</span></a>  <span class="comment">     * @return void Coding Exception thrown if the region is not known</span>
<a name="l906"><span class="linenum"> 906</span></a>  <span class="comment">     */</span>
<a name="l907"><span class="linenum"> 907</span></a>      protected function <a class="function" onClick="logFunction('check_region_is_known')" href="../_functions/check_region_is_known.html" onMouseOver="funcPopup(event,'check_region_is_known')">check_region_is_known</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l908"><span class="linenum"> 908</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>)) {
<a name="l909"><span class="linenum"> 909</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Trying to reference an unknown block region ' . <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l910"><span class="linenum"> 910</span></a>          }
<a name="l911"><span class="linenum"> 911</span></a>      }
<a name="l912"><span class="linenum"> 912</span></a>  
<a name="l913"><span class="linenum"> 913</span></a>      <span class="comment">/**</span>
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment">     * Returns an array of region names as keys and nested arrays for values</span>
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">     *</span>
<a name="l916"><span class="linenum"> 916</span></a>  <span class="comment">     * @return array an array where the array keys are the region names, and the array</span>
<a name="l917"><span class="linenum"> 917</span></a>  <span class="comment">     * values are empty arrays.</span>
<a name="l918"><span class="linenum"> 918</span></a>  <span class="comment">     */</span>
<a name="l919"><span class="linenum"> 919</span></a>      protected function <a class="function" onClick="logFunction('prepare_per_region_arrays')" href="../_functions/prepare_per_region_arrays.html" onMouseOver="funcPopup(event,'prepare_per_region_arrays')">prepare_per_region_arrays</a>() {
<a name="l920"><span class="linenum"> 920</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = array();
<a name="l921"><span class="linenum"> 921</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a> as <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> =&gt; <a class="var it2687" onMouseOver="hilite(2687)" onMouseOut="lolite()" onClick="logVariable('notused')" href="../_variables/notused.html">$notused</a>) {
<a name="l922"><span class="linenum"> 922</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] = array();
<a name="l923"><span class="linenum"> 923</span></a>          }
<a name="l924"><span class="linenum"> 924</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l925"><span class="linenum"> 925</span></a>      }
<a name="l926"><span class="linenum"> 926</span></a>  
<a name="l927"><span class="linenum"> 927</span></a>      <span class="comment">/**</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment">     * Create a set of new block instance from a record array</span>
<a name="l929"><span class="linenum"> 929</span></a>  <span class="comment">     *</span>
<a name="l930"><span class="linenum"> 930</span></a>  <span class="comment">     * @param array $birecords An array of block instance records</span>
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment">     * @return array An array of instantiated block_instance objects</span>
<a name="l932"><span class="linenum"> 932</span></a>  <span class="comment">     */</span>
<a name="l933"><span class="linenum"> 933</span></a>      protected function <a class="function" onClick="logFunction('create_block_instances')" href="../_functions/create_block_instances.html" onMouseOver="funcPopup(event,'create_block_instances')">create_block_instances</a>(<a class="var it23195" onMouseOver="hilite(23195)" onMouseOut="lolite()" onClick="logVariable('birecords')" href="../_variables/birecords.html">$birecords</a>) {
<a name="l934"><span class="linenum"> 934</span></a>          <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a> = array();
<a name="l935"><span class="linenum"> 935</span></a>          foreach (<a class="var it23195" onMouseOver="hilite(23195)" onMouseOut="lolite()" onClick="logVariable('birecords')" href="../_variables/birecords.html">$birecords</a> as <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l936"><span class="linenum"> 936</span></a>              if (<a class="var it23196" onMouseOver="hilite(23196)" onMouseOut="lolite()" onClick="logVariable('blockobject')" href="../_variables/blockobject.html">$blockobject</a> = <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('blockname')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../_variables/blockname.html">blockname</a>, <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>)) {
<a name="l937"><span class="linenum"> 937</span></a>                  <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>[] = <a class="var it23196" onMouseOver="hilite(23196)" onMouseOut="lolite()" onClick="logVariable('blockobject')" href="../_variables/blockobject.html">$blockobject</a>;
<a name="l938"><span class="linenum"> 938</span></a>              }
<a name="l939"><span class="linenum"> 939</span></a>          }
<a name="l940"><span class="linenum"> 940</span></a>          return <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>;
<a name="l941"><span class="linenum"> 941</span></a>      }
<a name="l942"><span class="linenum"> 942</span></a>  
<a name="l943"><span class="linenum"> 943</span></a>      <span class="comment">/**</span>
<a name="l944"><span class="linenum"> 944</span></a>  <span class="comment">     * Create all the block instances for all the blocks that were loaded by</span>
<a name="l945"><span class="linenum"> 945</span></a>  <span class="comment">     * load_blocks. This is used, for example, to ensure that all blocks get a</span>
<a name="l946"><span class="linenum"> 946</span></a>  <span class="comment">     * chance to initialise themselves via the {@link block_base::specialize()}</span>
<a name="l947"><span class="linenum"> 947</span></a>  <span class="comment">     * method, before any output is done.</span>
<a name="l948"><span class="linenum"> 948</span></a>  <span class="comment">     */</span>
<a name="l949"><span class="linenum"> 949</span></a>      public function <a class="function" onClick="logFunction('create_all_block_instances')" href="../_functions/create_all_block_instances.html" onMouseOver="funcPopup(event,'create_all_block_instances')">create_all_block_instances</a>() {
<a name="l950"><span class="linenum"> 950</span></a>          foreach (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_regions')" href="../_functions/get_regions.html" onMouseOver="funcPopup(event,'get_regions')">get_regions</a>() as <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l951"><span class="linenum"> 951</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_instances_exist')" href="../_functions/ensure_instances_exist.html" onMouseOver="funcPopup(event,'ensure_instances_exist')">ensure_instances_exist</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l952"><span class="linenum"> 952</span></a>          }
<a name="l953"><span class="linenum"> 953</span></a>      }
<a name="l954"><span class="linenum"> 954</span></a>  
<a name="l955"><span class="linenum"> 955</span></a>      <span class="comment">/**</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment">     * Return an array of content objects from a set of block instances</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment">     *</span>
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment">     * @param array $instances An array of block instances</span>
<a name="l959"><span class="linenum"> 959</span></a>  <span class="comment">     * @param renderer_base The renderer to use.</span>
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment">     * @param string $region the region name.</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment">     * @return array An array of block_content (and possibly block_move_target) objects.</span>
<a name="l962"><span class="linenum"> 962</span></a>  <span class="comment">     */</span>
<a name="l963"><span class="linenum"> 963</span></a>      protected function <a class="function" onClick="logFunction('create_block_contents')" href="../_functions/create_block_contents.html" onMouseOver="funcPopup(event,'create_block_contents')">create_block_contents</a>(<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>, <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l964"><span class="linenum"> 964</span></a>          <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a> = array();
<a name="l965"><span class="linenum"> 965</span></a>  
<a name="l966"><span class="linenum"> 966</span></a>          <a class="var it3744" onMouseOver="hilite(3744)" onMouseOut="lolite()" onClick="logVariable('lastweight')" href="../_variables/lastweight.html">$lastweight</a> = 0;
<a name="l967"><span class="linenum"> 967</span></a>          <a class="var it3745" onMouseOver="hilite(3745)" onMouseOut="lolite()" onClick="logVariable('lastblock')" href="../_variables/lastblock.html">$lastblock</a> = 0;
<a name="l968"><span class="linenum"> 968</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>) {
<a name="l969"><span class="linenum"> 969</span></a>              <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('first')" href="../_variables/first.html">$first</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>);
<a name="l970"><span class="linenum"> 970</span></a>              if (<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('first')" href="../_variables/first.html">$first</a>) {
<a name="l971"><span class="linenum"> 971</span></a>                  <a class="var it3744" onMouseOver="hilite(3744)" onMouseOut="lolite()" onClick="logVariable('lastweight')" href="../_variables/lastweight.html">$lastweight</a> = <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('first')" href="../_variables/first.html">$first</a>-&gt;<a onClick="logVariable('instance')" class="var it43288" onMouseOver="hilite(43288)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;weight - 2;
<a name="l972"><span class="linenum"> 972</span></a>              }
<a name="l973"><span class="linenum"> 973</span></a>          }
<a name="l974"><span class="linenum"> 974</span></a>  
<a name="l975"><span class="linenum"> 975</span></a>          foreach (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l976"><span class="linenum"> 976</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get_content_for_output')" href="../_functions/get_content_for_output.html" onMouseOver="funcPopup(event,'get_content_for_output')">get_content_for_output</a>(<a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l977"><span class="linenum"> 977</span></a>              if (empty(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>)) {
<a name="l978"><span class="linenum"> 978</span></a>                  continue;
<a name="l979"><span class="linenum"> 979</span></a>              }
<a name="l980"><span class="linenum"> 980</span></a>  
<a name="l981"><span class="linenum"> 981</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a> &amp;&amp; <a class="var it3744" onMouseOver="hilite(3744)" onMouseOut="lolite()" onClick="logVariable('lastweight')" href="../_variables/lastweight.html">$lastweight</a> != <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;weight &amp;&amp;
<a name="l982"><span class="linenum"> 982</span></a>                      <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it43077" onMouseOver="hilite(43077)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a> &amp;&amp; <a class="var it3745" onMouseOver="hilite(3745)" onMouseOut="lolite()" onClick="logVariable('lastblock')" href="../_variables/lastblock.html">$lastblock</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>) {
<a name="l983"><span class="linenum"> 983</span></a>                  <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('block_move_target')" href="../_classes/block_move_target.html" onMouseOver="classPopup(event,'block_move_target')">block_move_target</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_move_target_url')" href="../_functions/get_move_target_url.html" onMouseOver="funcPopup(event,'get_move_target_url')">get_move_target_url</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, (<a class="var it3744" onMouseOver="hilite(3744)" onMouseOut="lolite()" onClick="logVariable('lastweight')" href="../_variables/lastweight.html">$lastweight</a> + <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;weight)/2));
<a name="l984"><span class="linenum"> 984</span></a>              }
<a name="l985"><span class="linenum"> 985</span></a>  
<a name="l986"><span class="linenum"> 986</span></a>              if (<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it43077" onMouseOver="hilite(43077)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a> == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>) {
<a name="l987"><span class="linenum"> 987</span></a>                  <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>-&gt;<a class="function" onClick="logFunction('add_class')" href="../_functions/add_class.html" onMouseOver="funcPopup(event,'add_class')">add_class</a>('beingmoved');
<a name="l988"><span class="linenum"> 988</span></a>                  <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('annotation')" class="var it43077" onMouseOver="hilite(43077)" onMouseOut="lolite()" href="../_variables/annotation.html">annotation</a> .= <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('movingthisblockcancel', 'block',
<a name="l989"><span class="linenum"> 989</span></a>                          <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cancel')));
<a name="l990"><span class="linenum"> 990</span></a>              }
<a name="l991"><span class="linenum"> 991</span></a>  
<a name="l992"><span class="linenum"> 992</span></a>              <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>[] = <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>;
<a name="l993"><span class="linenum"> 993</span></a>              <a class="var it3744" onMouseOver="hilite(3744)" onMouseOut="lolite()" onClick="logVariable('lastweight')" href="../_variables/lastweight.html">$lastweight</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;weight;
<a name="l994"><span class="linenum"> 994</span></a>              <a class="var it3745" onMouseOver="hilite(3745)" onMouseOut="lolite()" onClick="logVariable('lastblock')" href="../_variables/lastblock.html">$lastblock</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id;
<a name="l995"><span class="linenum"> 995</span></a>          }
<a name="l996"><span class="linenum"> 996</span></a>  
<a name="l997"><span class="linenum"> 997</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a> &amp;&amp; <a class="var it3745" onMouseOver="hilite(3745)" onMouseOut="lolite()" onClick="logVariable('lastblock')" href="../_variables/lastblock.html">$lastblock</a> != <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>) {
<a name="l998"><span class="linenum"> 998</span></a>              <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('block_move_target')" href="../_classes/block_move_target.html" onMouseOver="classPopup(event,'block_move_target')">block_move_target</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_move_target_url')" href="../_functions/get_move_target_url.html" onMouseOver="funcPopup(event,'get_move_target_url')">get_move_target_url</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it3744" onMouseOver="hilite(3744)" onMouseOut="lolite()" onClick="logVariable('lastweight')" href="../_variables/lastweight.html">$lastweight</a> + 1));
<a name="l999"><span class="linenum"> 999</span></a>          }
<a name="l1000"><span class="linenum">1000</span></a>          return <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>;
<a name="l1001"><span class="linenum">1001</span></a>      }
<a name="l1002"><span class="linenum">1002</span></a>  
<a name="l1003"><span class="linenum">1003</span></a>      <span class="comment">/**</span>
<a name="l1004"><span class="linenum">1004</span></a>  <span class="comment">     * Ensure block instances exist for a given region</span>
<a name="l1005"><span class="linenum">1005</span></a>  <span class="comment">     *</span>
<a name="l1006"><span class="linenum">1006</span></a>  <span class="comment">     * @param string $region Check for bi's with the instance with this name</span>
<a name="l1007"><span class="linenum">1007</span></a>  <span class="comment">     */</span>
<a name="l1008"><span class="linenum">1008</span></a>      protected function <a class="function" onClick="logFunction('ensure_instances_exist')" href="../_functions/ensure_instances_exist.html" onMouseOver="funcPopup(event,'ensure_instances_exist')">ensure_instances_exist</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l1009"><span class="linenum">1009</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_region_is_known')" href="../_functions/check_region_is_known.html" onMouseOver="funcPopup(event,'check_region_is_known')">check_region_is_known</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l1010"><span class="linenum">1010</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a>)) {
<a name="l1011"><span class="linenum">1011</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] =
<a name="l1012"><span class="linenum">1012</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create_block_instances')" href="../_functions/create_block_instances.html" onMouseOver="funcPopup(event,'create_block_instances')">create_block_instances</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>]);
<a name="l1013"><span class="linenum">1013</span></a>          }
<a name="l1014"><span class="linenum">1014</span></a>      }
<a name="l1015"><span class="linenum">1015</span></a>  
<a name="l1016"><span class="linenum">1016</span></a>      <span class="comment">/**</span>
<a name="l1017"><span class="linenum">1017</span></a>  <span class="comment">     * Ensure that there is some content within the given region</span>
<a name="l1018"><span class="linenum">1018</span></a>  <span class="comment">     *</span>
<a name="l1019"><span class="linenum">1019</span></a>  <span class="comment">     * @param string $region The name of the region to check</span>
<a name="l1020"><span class="linenum">1020</span></a>  <span class="comment">     */</span>
<a name="l1021"><span class="linenum">1021</span></a>      public function <a class="function" onClick="logFunction('ensure_content_created')" href="../_functions/ensure_content_created.html" onMouseOver="funcPopup(event,'ensure_content_created')">ensure_content_created</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l1022"><span class="linenum">1022</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_instances_exist')" href="../_functions/ensure_instances_exist.html" onMouseOver="funcPopup(event,'ensure_instances_exist')">ensure_instances_exist</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l1023"><span class="linenum">1023</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>)) {
<a name="l1024"><span class="linenum">1024</span></a>              <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a> = array();
<a name="l1025"><span class="linenum">1025</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extracontent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/extracontent.html">extracontent</a>)) {
<a name="l1026"><span class="linenum">1026</span></a>                  <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extracontent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/extracontent.html">extracontent</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>];
<a name="l1027"><span class="linenum">1027</span></a>              }
<a name="l1028"><span class="linenum">1028</span></a>              <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create_block_contents')" href="../_functions/create_block_contents.html" onMouseOver="funcPopup(event,'create_block_contents')">create_block_contents</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>], <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>, <a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>));
<a name="l1029"><span class="linenum">1029</span></a>              if (<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> == <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>) {
<a name="l1030"><span class="linenum">1030</span></a>                  <a class="var it23197" onMouseOver="hilite(23197)" onMouseOut="lolite()" onClick="logVariable('addblockui')" href="../_variables/addblockui.html">$addblockui</a> = <a class="function" onClick="logFunction('block_add_block_ui')" href="../_functions/block_add_block_ui.html" onMouseOver="funcPopup(event,'block_add_block_ui')">block_add_block_ui</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l1031"><span class="linenum">1031</span></a>                  if (<a class="var it23197" onMouseOver="hilite(23197)" onMouseOut="lolite()" onClick="logVariable('addblockui')" href="../_variables/addblockui.html">$addblockui</a>) {
<a name="l1032"><span class="linenum">1032</span></a>                      <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a>[] = <a class="var it23197" onMouseOver="hilite(23197)" onMouseOut="lolite()" onClick="logVariable('addblockui')" href="../_variables/addblockui.html">$addblockui</a>;
<a name="l1033"><span class="linenum">1033</span></a>                  }
<a name="l1034"><span class="linenum">1034</span></a>              }
<a name="l1035"><span class="linenum">1035</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>[<a class="var it5484" onMouseOver="hilite(5484)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] = <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a>;
<a name="l1036"><span class="linenum">1036</span></a>          }
<a name="l1037"><span class="linenum">1037</span></a>      }
<a name="l1038"><span class="linenum">1038</span></a>  
<a name="l1039"><span class="linenum">1039</span></a>  <span class="comment">/// Process actions from the URL ===============================================</span>
<a name="l1040"><span class="linenum">1040</span></a>  
<a name="l1041"><span class="linenum">1041</span></a>      <span class="comment">/**</span>
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment">     * Get the appropriate list of editing icons for a block. This is used</span>
<a name="l1043"><span class="linenum">1043</span></a>  <span class="comment">     * to set {@link block_contents::$controls} in {@link block_base::get_contents_for_output()}.</span>
<a name="l1044"><span class="linenum">1044</span></a>  <span class="comment">     *</span>
<a name="l1045"><span class="linenum">1045</span></a>  <span class="comment">     * @param $output The core_renderer to use when generating the output. (Need to get icon paths.)</span>
<a name="l1046"><span class="linenum">1046</span></a>  <span class="comment">     * @return an array in the format for {@link block_contents::$controls}</span>
<a name="l1047"><span class="linenum">1047</span></a>  <span class="comment">     */</span>
<a name="l1048"><span class="linenum">1048</span></a>      public function <a class="function" onClick="logFunction('edit_controls')" href="../_functions/edit_controls.html" onMouseOver="funcPopup(event,'edit_controls')">edit_controls</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>) {
<a name="l1049"><span class="linenum">1049</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1050"><span class="linenum">1050</span></a>  
<a name="l1051"><span class="linenum">1051</span></a>          <a class="var it19609" onMouseOver="hilite(19609)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a> = array();
<a name="l1052"><span class="linenum">1052</span></a>          <a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false, array('sesskey'=&gt; <a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l1053"><span class="linenum">1053</span></a>          <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a> = <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('title')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/title.html">title</a>;
<a name="l1054"><span class="linenum">1054</span></a>          if (empty(<a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>)) {
<a name="l1055"><span class="linenum">1055</span></a>              <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a> = <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('arialabel')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/arialabel.html">arialabel</a>;
<a name="l1056"><span class="linenum">1056</span></a>          }
<a name="l1057"><span class="linenum">1057</span></a>  
<a name="l1058"><span class="linenum">1058</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l1059"><span class="linenum">1059</span></a>  <span class="comment">            // Move icon.</span>
<a name="l1060"><span class="linenum">1060</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('moveblock', 'block', <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1061"><span class="linenum">1061</span></a>              <a class="var it19609" onMouseOver="hilite(19609)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_primary')" href="../_classes/action_menu_link_primary.html" onMouseOver="classPopup(event,'action_menu_link_primary')">action_menu_link_primary</a>(
<a name="l1062"><span class="linenum">1062</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>, array('bui_moveid' =&gt; <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id)),
<a name="l1063"><span class="linenum">1063</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/move', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l1064"><span class="linenum">1064</span></a>                  <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>,
<a name="l1065"><span class="linenum">1065</span></a>                  array('class' =&gt; 'editing_move')
<a name="l1066"><span class="linenum">1066</span></a>              );
<a name="l1067"><span class="linenum">1067</span></a>  
<a name="l1068"><span class="linenum">1068</span></a>          }
<a name="l1069"><span class="linenum">1069</span></a>  
<a name="l1070"><span class="linenum">1070</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>() || <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('user_can_edit')" href="../_functions/user_can_edit.html" onMouseOver="funcPopup(event,'user_can_edit')">user_can_edit</a>()) {
<a name="l1071"><span class="linenum">1071</span></a>  <span class="comment">            // Edit config icon - always show - needed for positioning UI.</span>
<a name="l1072"><span class="linenum">1072</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('configureblock', 'block', <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1073"><span class="linenum">1073</span></a>              <a class="var it19609" onMouseOver="hilite(19609)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l1074"><span class="linenum">1074</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>, array('bui_editid' =&gt; <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id)),
<a name="l1075"><span class="linenum">1075</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/edit', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l1076"><span class="linenum">1076</span></a>                  <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>,
<a name="l1077"><span class="linenum">1077</span></a>                  array('class' =&gt; 'editing_edit')
<a name="l1078"><span class="linenum">1078</span></a>              );
<a name="l1079"><span class="linenum">1079</span></a>  
<a name="l1080"><span class="linenum">1080</span></a>          }
<a name="l1081"><span class="linenum">1081</span></a>  
<a name="l1082"><span class="linenum">1082</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>() &amp;&amp; <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('instance_can_be_hidden')" href="../_functions/instance_can_be_hidden.html" onMouseOver="funcPopup(event,'instance_can_be_hidden')">instance_can_be_hidden</a>()) {
<a name="l1083"><span class="linenum">1083</span></a>  <span class="comment">            // Show/hide icon.</span>
<a name="l1084"><span class="linenum">1084</span></a>              if (<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;visible) {
<a name="l1085"><span class="linenum">1085</span></a>                  <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('hideblock', 'block', <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1086"><span class="linenum">1086</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>, array('bui_hideid' =&gt; <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id));
<a name="l1087"><span class="linenum">1087</span></a>                  <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/hide', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; ''));
<a name="l1088"><span class="linenum">1088</span></a>                  <a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a> = array('class' =&gt; 'editing_hide');
<a name="l1089"><span class="linenum">1089</span></a>              } else {
<a name="l1090"><span class="linenum">1090</span></a>                  <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('showblock', 'block', <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1091"><span class="linenum">1091</span></a>                  <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>, array('bui_showid' =&gt; <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id));
<a name="l1092"><span class="linenum">1092</span></a>                  <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/show', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; ''));
<a name="l1093"><span class="linenum">1093</span></a>                  <a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a> = array('class' =&gt; 'editing_show');
<a name="l1094"><span class="linenum">1094</span></a>              }
<a name="l1095"><span class="linenum">1095</span></a>              <a class="var it19609" onMouseOver="hilite(19609)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>, <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, <a class="var it493" onMouseOver="hilite(493)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>);
<a name="l1096"><span class="linenum">1096</span></a>          }
<a name="l1097"><span class="linenum">1097</span></a>  
<a name="l1098"><span class="linenum">1098</span></a>  <span class="comment">        // Display either &quot;Assign roles&quot; or &quot;Permissions&quot; or &quot;Change permissions&quot; icon (whichever first is available).</span>
<a name="l1099"><span class="linenum">1099</span></a>          <a class="var it23199" onMouseOver="hilite(23199)" onMouseOut="lolite()" onClick="logVariable('rolesurl')" href="../_variables/rolesurl.html">$rolesurl</a> = null;
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>          if (<a class="function" onClick="logFunction('get_assignable_roles')" href="../_functions/get_assignable_roles.html" onMouseOver="funcPopup(event,'get_assignable_roles')">get_assignable_roles</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('context')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/context.html">context</a>, <a class="constant" onClick="logConstant('ROLENAME_SHORT')" href="../_constants/ROLENAME_SHORT.html" onMouseOver="constPopup(event,'ROLENAME_SHORT')">ROLENAME_SHORT</a>)) {
<a name="l1102"><span class="linenum">1102</span></a>              <a class="var it23199" onMouseOver="hilite(23199)" onMouseOut="lolite()" onClick="logVariable('rolesurl')" href="../_variables/rolesurl.html">$rolesurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/roles/assign.php.html">/admin/roles/assign.php</a>', array('contextid' =&gt; <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('context')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id));
<a name="l1103"><span class="linenum">1103</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('assignrolesinblock', 'block', <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1104"><span class="linenum">1104</span></a>              <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = 'i/assignroles';
<a name="l1105"><span class="linenum">1105</span></a>          } else if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/role:review', <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('context')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/context.html">context</a>) or <a class="function" onClick="logFunction('get_overridable_roles')" href="../_functions/get_overridable_roles.html" onMouseOver="funcPopup(event,'get_overridable_roles')">get_overridable_roles</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('context')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/context.html">context</a>)) {
<a name="l1106"><span class="linenum">1106</span></a>              <a class="var it23199" onMouseOver="hilite(23199)" onMouseOut="lolite()" onClick="logVariable('rolesurl')" href="../_variables/rolesurl.html">$rolesurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/roles/permissions.php.html">/admin/roles/permissions.php</a>', array('contextid' =&gt; <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('context')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id));
<a name="l1107"><span class="linenum">1107</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('permissions', 'role');
<a name="l1108"><span class="linenum">1108</span></a>              <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = 'i/permissions';
<a name="l1109"><span class="linenum">1109</span></a>          } else if (<a class="function" onClick="logFunction('has_any_capability')" href="../_functions/has_any_capability.html" onMouseOver="funcPopup(event,'has_any_capability')">has_any_capability</a>(array('moodle/role:safeoverride', 'moodle/role:override', 'moodle/role:assign'), <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('context')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/context.html">context</a>)) {
<a name="l1110"><span class="linenum">1110</span></a>              <a class="var it23199" onMouseOver="hilite(23199)" onMouseOut="lolite()" onClick="logVariable('rolesurl')" href="../_variables/rolesurl.html">$rolesurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/roles/check.php.html">/admin/roles/check.php</a>', array('contextid' =&gt; <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('context')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id));
<a name="l1111"><span class="linenum">1111</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('checkpermissions', 'role');
<a name="l1112"><span class="linenum">1112</span></a>              <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = 'i/checkpermissions';
<a name="l1113"><span class="linenum">1113</span></a>          }
<a name="l1114"><span class="linenum">1114</span></a>  
<a name="l1115"><span class="linenum">1115</span></a>          if (<a class="var it23199" onMouseOver="hilite(23199)" onMouseOut="lolite()" onClick="logVariable('rolesurl')" href="../_variables/rolesurl.html">$rolesurl</a>) {
<a name="l1116"><span class="linenum">1116</span></a>  <span class="comment">            // TODO: please note it is sloppy to pass urls through page parameters!!</span>
<a name="l1117"><span class="linenum">1117</span></a>  <span class="comment">            //      it is shortened because some web servers (e.g. IIS by default) give</span>
<a name="l1118"><span class="linenum">1118</span></a>  <span class="comment">            //      a 'security' error if you try to pass a full URL as a GET parameter in another URL.</span>
<a name="l1119"><span class="linenum">1119</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l1120"><span class="linenum">1120</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . '/', '', <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>);
<a name="l1121"><span class="linenum">1121</span></a>              <a class="var it23199" onMouseOver="hilite(23199)" onMouseOut="lolite()" onClick="logVariable('rolesurl')" href="../_variables/rolesurl.html">$rolesurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('returnurl', <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>);
<a name="l1122"><span class="linenum">1122</span></a>  
<a name="l1123"><span class="linenum">1123</span></a>              <a class="var it19609" onMouseOver="hilite(19609)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l1124"><span class="linenum">1124</span></a>                  <a class="var it23199" onMouseOver="hilite(23199)" onMouseOut="lolite()" onClick="logVariable('rolesurl')" href="../_variables/rolesurl.html">$rolesurl</a>,
<a name="l1125"><span class="linenum">1125</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>(<a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>, <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l1126"><span class="linenum">1126</span></a>                  <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>,
<a name="l1127"><span class="linenum">1127</span></a>                  array('class' =&gt; 'editing_roles')
<a name="l1128"><span class="linenum">1128</span></a>              );
<a name="l1129"><span class="linenum">1129</span></a>          }
<a name="l1130"><span class="linenum">1130</span></a>  
<a name="l1131"><span class="linenum">1131</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('user_can_delete_block')" href="../_functions/user_can_delete_block.html" onMouseOver="funcPopup(event,'user_can_delete_block')">user_can_delete_block</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>)) {
<a name="l1132"><span class="linenum">1132</span></a>  <span class="comment">            // Delete icon.</span>
<a name="l1133"><span class="linenum">1133</span></a>              <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('deleteblock', 'block', <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1134"><span class="linenum">1134</span></a>              <a class="var it19609" onMouseOver="hilite(19609)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l1135"><span class="linenum">1135</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>, array('bui_deleteid' =&gt; <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id)),
<a name="l1136"><span class="linenum">1136</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/delete', <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l1137"><span class="linenum">1137</span></a>                  <a class="var it163" onMouseOver="hilite(163)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>,
<a name="l1138"><span class="linenum">1138</span></a>                  array('class' =&gt; 'editing_delete')
<a name="l1139"><span class="linenum">1139</span></a>              );
<a name="l1140"><span class="linenum">1140</span></a>          }
<a name="l1141"><span class="linenum">1141</span></a>  
<a name="l1142"><span class="linenum">1142</span></a>          return <a class="var it19609" onMouseOver="hilite(19609)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a>;
<a name="l1143"><span class="linenum">1143</span></a>      }
<a name="l1144"><span class="linenum">1144</span></a>  
<a name="l1145"><span class="linenum">1145</span></a>      <span class="comment">/**</span>
<a name="l1146"><span class="linenum">1146</span></a>  <span class="comment">     * @param block_base $block a block that appears on this page.</span>
<a name="l1147"><span class="linenum">1147</span></a>  <span class="comment">     * @return boolean boolean whether the currently logged in user is allowed to delete this block.</span>
<a name="l1148"><span class="linenum">1148</span></a>  <span class="comment">     */</span>
<a name="l1149"><span class="linenum">1149</span></a>      protected function <a class="function" onClick="logFunction('user_can_delete_block')" href="../_functions/user_can_delete_block.html" onMouseOver="funcPopup(event,'user_can_delete_block')">user_can_delete_block</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>) {
<a name="l1150"><span class="linenum">1150</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>() &amp;&amp; <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('user_can_edit')" href="../_functions/user_can_edit.html" onMouseOver="funcPopup(event,'user_can_edit')">user_can_edit</a>() &amp;&amp;
<a name="l1151"><span class="linenum">1151</span></a>                  <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('user_can_addto')" href="../_functions/user_can_addto.html" onMouseOver="funcPopup(event,'user_can_addto')">user_can_addto</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>) &amp;&amp;
<a name="l1152"><span class="linenum">1152</span></a>                  !<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockname, self::<a class="function" onClick="logFunction('get_undeletable_block_types')" href="../_functions/get_undeletable_block_types.html" onMouseOver="funcPopup(event,'get_undeletable_block_types')">get_undeletable_block_types</a>());
<a name="l1153"><span class="linenum">1153</span></a>      }
<a name="l1154"><span class="linenum">1154</span></a>  
<a name="l1155"><span class="linenum">1155</span></a>      <span class="comment">/**</span>
<a name="l1156"><span class="linenum">1156</span></a>  <span class="comment">     * Process any block actions that were specified in the URL.</span>
<a name="l1157"><span class="linenum">1157</span></a>  <span class="comment">     *</span>
<a name="l1158"><span class="linenum">1158</span></a>  <span class="comment">     * @return boolean true if anything was done. False if not.</span>
<a name="l1159"><span class="linenum">1159</span></a>  <span class="comment">     */</span>
<a name="l1160"><span class="linenum">1160</span></a>      public function <a class="function" onClick="logFunction('process_url_actions')" href="../_functions/process_url_actions.html" onMouseOver="funcPopup(event,'process_url_actions')">process_url_actions</a>() {
<a name="l1161"><span class="linenum">1161</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>()) {
<a name="l1162"><span class="linenum">1162</span></a>              return false;
<a name="l1163"><span class="linenum">1163</span></a>          }
<a name="l1164"><span class="linenum">1164</span></a>          return <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_url_add')" href="../_functions/process_url_add.html" onMouseOver="funcPopup(event,'process_url_add')">process_url_add</a>() || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_url_delete')" href="../_functions/process_url_delete.html" onMouseOver="funcPopup(event,'process_url_delete')">process_url_delete</a>() ||
<a name="l1165"><span class="linenum">1165</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_url_show_hide')" href="../_functions/process_url_show_hide.html" onMouseOver="funcPopup(event,'process_url_show_hide')">process_url_show_hide</a>() || <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_url_edit')" href="../_functions/process_url_edit.html" onMouseOver="funcPopup(event,'process_url_edit')">process_url_edit</a>() ||
<a name="l1166"><span class="linenum">1166</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_url_move')" href="../_functions/process_url_move.html" onMouseOver="funcPopup(event,'process_url_move')">process_url_move</a>();
<a name="l1167"><span class="linenum">1167</span></a>      }
<a name="l1168"><span class="linenum">1168</span></a>  
<a name="l1169"><span class="linenum">1169</span></a>      <span class="comment">/**</span>
<a name="l1170"><span class="linenum">1170</span></a>  <span class="comment">     * Handle adding a block.</span>
<a name="l1171"><span class="linenum">1171</span></a>  <span class="comment">     * @return boolean true if anything was done. False if not.</span>
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment">     */</span>
<a name="l1173"><span class="linenum">1173</span></a>      public function <a class="function" onClick="logFunction('process_url_add')" href="../_functions/process_url_add.html" onMouseOver="funcPopup(event,'process_url_add')">process_url_add</a>() {
<a name="l1174"><span class="linenum">1174</span></a>          <a class="var it8290" onMouseOver="hilite(8290)" onMouseOut="lolite()" onClick="logVariable('blocktype')" href="../_variables/blocktype.html">$blocktype</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_addblock', null, <a class="constant" onClick="logConstant('PARAM_PLUGIN')" href="../_constants/PARAM_PLUGIN.html" onMouseOver="constPopup(event,'PARAM_PLUGIN')">PARAM_PLUGIN</a>);
<a name="l1175"><span class="linenum">1175</span></a>          if (!<a class="var it8290" onMouseOver="hilite(8290)" onMouseOut="lolite()" onClick="logVariable('blocktype')" href="../_variables/blocktype.html">$blocktype</a>) {
<a name="l1176"><span class="linenum">1176</span></a>              return false;
<a name="l1177"><span class="linenum">1177</span></a>          }
<a name="l1178"><span class="linenum">1178</span></a>  
<a name="l1179"><span class="linenum">1179</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l1180"><span class="linenum">1180</span></a>  
<a name="l1181"><span class="linenum">1181</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l1182"><span class="linenum">1182</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('nopermissions', '', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addblock'));
<a name="l1183"><span class="linenum">1183</span></a>          }
<a name="l1184"><span class="linenum">1184</span></a>  
<a name="l1185"><span class="linenum">1185</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it8290" onMouseOver="hilite(8290)" onMouseOut="lolite()" onClick="logVariable('blocktype')" href="../_variables/blocktype.html">$blocktype</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_addable_blocks')" href="../_functions/get_addable_blocks.html" onMouseOver="funcPopup(event,'get_addable_blocks')">get_addable_blocks</a>())) {
<a name="l1186"><span class="linenum">1186</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('cannotaddthisblocktype', '', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="var it8290" onMouseOver="hilite(8290)" onMouseOut="lolite()" onClick="logVariable('blocktype')" href="../_variables/blocktype.html">$blocktype</a>);
<a name="l1187"><span class="linenum">1187</span></a>          }
<a name="l1188"><span class="linenum">1188</span></a>  
<a name="l1189"><span class="linenum">1189</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_block_at_end_of_default_region')" href="../_functions/add_block_at_end_of_default_region.html" onMouseOver="funcPopup(event,'add_block_at_end_of_default_region')">add_block_at_end_of_default_region</a>(<a class="var it8290" onMouseOver="hilite(8290)" onMouseOut="lolite()" onClick="logVariable('blocktype')" href="../_variables/blocktype.html">$blocktype</a>);
<a name="l1190"><span class="linenum">1190</span></a>  
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment">        // If the page URL was a guess, it will contain the bui_... param, so we must make sure it is not there.</span>
<a name="l1192"><span class="linenum">1192</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_addblock');
<a name="l1193"><span class="linenum">1193</span></a>  
<a name="l1194"><span class="linenum">1194</span></a>          return true;
<a name="l1195"><span class="linenum">1195</span></a>      }
<a name="l1196"><span class="linenum">1196</span></a>  
<a name="l1197"><span class="linenum">1197</span></a>      <span class="comment">/**</span>
<a name="l1198"><span class="linenum">1198</span></a>  <span class="comment">     * Handle deleting a block.</span>
<a name="l1199"><span class="linenum">1199</span></a>  <span class="comment">     * @return boolean true if anything was done. False if not.</span>
<a name="l1200"><span class="linenum">1200</span></a>  <span class="comment">     */</span>
<a name="l1201"><span class="linenum">1201</span></a>      public function <a class="function" onClick="logFunction('process_url_delete')" href="../_functions/process_url_delete.html" onMouseOver="funcPopup(event,'process_url_delete')">process_url_delete</a>() {
<a name="l1202"><span class="linenum">1202</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1203"><span class="linenum">1203</span></a>  
<a name="l1204"><span class="linenum">1204</span></a>          <a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_deleteid', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l1205"><span class="linenum">1205</span></a>          <a class="var it23200" onMouseOver="hilite(23200)" onMouseOut="lolite()" onClick="logVariable('confirmdelete')" href="../_variables/confirmdelete.html">$confirmdelete</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_confirm', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l1206"><span class="linenum">1206</span></a>  
<a name="l1207"><span class="linenum">1207</span></a>          if (!<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>) {
<a name="l1208"><span class="linenum">1208</span></a>              return false;
<a name="l1209"><span class="linenum">1209</span></a>          }
<a name="l1210"><span class="linenum">1210</span></a>  
<a name="l1211"><span class="linenum">1211</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l1212"><span class="linenum">1212</span></a>          <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;blocks-&gt;<a class="function" onClick="logFunction('find_instance')" href="../_functions/find_instance.html" onMouseOver="funcPopup(event,'find_instance')">find_instance</a>(<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>);
<a name="l1213"><span class="linenum">1213</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('user_can_delete_block')" href="../_functions/user_can_delete_block.html" onMouseOver="funcPopup(event,'user_can_delete_block')">user_can_delete_block</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>)) {
<a name="l1214"><span class="linenum">1214</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('nopermissions', '', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteablock'));
<a name="l1215"><span class="linenum">1215</span></a>          }
<a name="l1216"><span class="linenum">1216</span></a>  
<a name="l1217"><span class="linenum">1217</span></a>          if (!<a class="var it23200" onMouseOver="hilite(23200)" onMouseOut="lolite()" onClick="logVariable('confirmdelete')" href="../_variables/confirmdelete.html">$confirmdelete</a>) {
<a name="l1218"><span class="linenum">1218</span></a>              <a class="var it23201" onMouseOver="hilite(23201)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a>();
<a name="l1219"><span class="linenum">1219</span></a>              <a class="var it23201" onMouseOver="hilite(23201)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('admin');
<a name="l1220"><span class="linenum">1220</span></a>              <a class="var it23201" onMouseOver="hilite(23201)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('set_course')" href="../_functions/set_course.html" onMouseOver="funcPopup(event,'set_course')">set_course</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course);
<a name="l1221"><span class="linenum">1221</span></a>              <a class="var it23201" onMouseOver="hilite(23201)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context);
<a name="l1222"><span class="linenum">1222</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm) {
<a name="l1223"><span class="linenum">1223</span></a>                  <a class="var it23201" onMouseOver="hilite(23201)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('set_cm')" href="../_functions/set_cm.html" onMouseOver="funcPopup(event,'set_cm')">set_cm</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm);
<a name="l1224"><span class="linenum">1224</span></a>              }
<a name="l1225"><span class="linenum">1225</span></a>  
<a name="l1226"><span class="linenum">1226</span></a>              <a class="var it23202" onMouseOver="hilite(23202)" onMouseOut="lolite()" onClick="logVariable('deleteurlbase')" href="../_variables/deleteurlbase.html">$deleteurlbase</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . '/', '/', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out_omit_querystring')" href="../_functions/out_omit_querystring.html" onMouseOver="funcPopup(event,'out_omit_querystring')">out_omit_querystring</a>());
<a name="l1227"><span class="linenum">1227</span></a>              <a class="var it23203" onMouseOver="hilite(23203)" onMouseOut="lolite()" onClick="logVariable('deleteurlparams')" href="../_variables/deleteurlparams.html">$deleteurlparams</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('params')" href="../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>();
<a name="l1228"><span class="linenum">1228</span></a>              <a class="var it23201" onMouseOver="hilite(23201)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>(<a class="var it23202" onMouseOver="hilite(23202)" onMouseOut="lolite()" onClick="logVariable('deleteurlbase')" href="../_variables/deleteurlbase.html">$deleteurlbase</a>, <a class="var it23203" onMouseOver="hilite(23203)" onMouseOut="lolite()" onClick="logVariable('deleteurlparams')" href="../_variables/deleteurlparams.html">$deleteurlparams</a>);
<a name="l1229"><span class="linenum">1229</span></a>              <a class="var it23201" onMouseOver="hilite(23201)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('set_block_actions_done')" href="../_functions/set_block_actions_done.html" onMouseOver="funcPopup(event,'set_block_actions_done')">set_block_actions_done</a>();
<a name="l1230"><span class="linenum">1230</span></a>  <span class="comment">            // At this point we are either going to redirect, or display the form, so</span>
<a name="l1231"><span class="linenum">1231</span></a>  <span class="comment">            // overwrite global $PAGE ready for this. (Formslib refers to it.)</span>
<a name="l1232"><span class="linenum">1232</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a> = <a class="var it23201" onMouseOver="hilite(23201)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>;
<a name="l1233"><span class="linenum">1233</span></a>  <span class="comment">            //some functions like MoodleQuickForm::addHelpButton use $OUTPUT so we need to replace that too</span>
<a name="l1234"><span class="linenum">1234</span></a>              <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it23201" onMouseOver="hilite(23201)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core');
<a name="l1235"><span class="linenum">1235</span></a>              <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a> = <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l1236"><span class="linenum">1236</span></a>  
<a name="l1237"><span class="linenum">1237</span></a>              <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('site')" href="../_variables/site.html">$site</a> = <a class="function" onClick="logFunction('get_site')" href="../_functions/get_site.html" onMouseOver="funcPopup(event,'get_site')">get_site</a>();
<a name="l1238"><span class="linenum">1238</span></a>              <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a> = <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>();
<a name="l1239"><span class="linenum">1239</span></a>              <a class="var it11424" onMouseOver="hilite(11424)" onMouseOut="lolite()" onClick="logVariable('strdeletecheck')" href="../_variables/strdeletecheck.html">$strdeletecheck</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deletecheck', 'block', <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1240"><span class="linenum">1240</span></a>              <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteblockcheck', 'block', <a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1241"><span class="linenum">1241</span></a>  
<a name="l1242"><span class="linenum">1242</span></a>  <span class="comment">            // If the block is being shown in sub contexts display a warning.</span>
<a name="l1243"><span class="linenum">1243</span></a>              if (<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;showinsubcontexts == 1) {
<a name="l1244"><span class="linenum">1244</span></a>                  <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;parentcontextid);
<a name="l1245"><span class="linenum">1245</span></a>                  <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1246"><span class="linenum">1246</span></a>                  <a class="var it23204" onMouseOver="hilite(23204)" onMouseOut="lolite()" onClick="logVariable('messagestring')" href="../_variables/messagestring.html">$messagestring</a> = new stdClass();
<a name="l1247"><span class="linenum">1247</span></a>                  <a class="var it23204" onMouseOver="hilite(23204)" onMouseOut="lolite()" onClick="logVariable('messagestring')" href="../_variables/messagestring.html">$messagestring</a>-&gt;<a onClick="logVariable('location')" class="var it44216" onMouseOver="hilite(44216)" onMouseOut="lolite()" href="../_variables/location.html">location</a> = <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>();
<a name="l1248"><span class="linenum">1248</span></a>  
<a name="l1249"><span class="linenum">1249</span></a>  <span class="comment">                // Checking for blocks that may have visibility on the front page and pages added on that.</span>
<a name="l1250"><span class="linenum">1250</span></a>                  if (<a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('id')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>-&gt;<a onClick="logVariable('id')" class="var it42913" onMouseOver="hilite(42913)" onMouseOut="lolite()" href="../_variables/id.html">id</a> &amp;&amp; <a class="function" onClick="logFunction('is_inside_frontpage')" href="../_functions/is_inside_frontpage.html" onMouseOver="funcPopup(event,'is_inside_frontpage')">is_inside_frontpage</a>(<a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>)) {
<a name="l1251"><span class="linenum">1251</span></a>                      <a class="var it23204" onMouseOver="hilite(23204)" onMouseOut="lolite()" onClick="logVariable('messagestring')" href="../_variables/messagestring.html">$messagestring</a>-&gt;<a onClick="logVariable('pagetype')" class="var it44216" onMouseOver="hilite(44216)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('showonfrontpageandsubs', 'block');
<a name="l1252"><span class="linenum">1252</span></a>                  } else {
<a name="l1253"><span class="linenum">1253</span></a>                      <a class="var it23205" onMouseOver="hilite(23205)" onMouseOut="lolite()" onClick="logVariable('pagetypes')" href="../_variables/pagetypes.html">$pagetypes</a> = <a class="function" onClick="logFunction('generate_page_type_patterns')" href="../_functions/generate_page_type_patterns.html" onMouseOver="funcPopup(event,'generate_page_type_patterns')">generate_page_type_patterns</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>);
<a name="l1254"><span class="linenum">1254</span></a>                      <a class="var it23204" onMouseOver="hilite(23204)" onMouseOut="lolite()" onClick="logVariable('messagestring')" href="../_variables/messagestring.html">$messagestring</a>-&gt;<a onClick="logVariable('pagetype')" class="var it44216" onMouseOver="hilite(44216)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> = <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;pagetypepattern;
<a name="l1255"><span class="linenum">1255</span></a>                      if (isset(<a class="var it23205" onMouseOver="hilite(23205)" onMouseOut="lolite()" onClick="logVariable('pagetypes')" href="../_variables/pagetypes.html">$pagetypes</a>[<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;pagetypepattern])) {
<a name="l1256"><span class="linenum">1256</span></a>                          <a class="var it23204" onMouseOver="hilite(23204)" onMouseOut="lolite()" onClick="logVariable('messagestring')" href="../_variables/messagestring.html">$messagestring</a>-&gt;<a onClick="logVariable('pagetype')" class="var it44216" onMouseOver="hilite(44216)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> = <a class="var it23205" onMouseOver="hilite(23205)" onMouseOut="lolite()" onClick="logVariable('pagetypes')" href="../_variables/pagetypes.html">$pagetypes</a>[<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;pagetypepattern];
<a name="l1257"><span class="linenum">1257</span></a>                      }
<a name="l1258"><span class="linenum">1258</span></a>                  }
<a name="l1259"><span class="linenum">1259</span></a>  
<a name="l1260"><span class="linenum">1260</span></a>                  <a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteblockwarning', 'block', <a class="var it23204" onMouseOver="hilite(23204)" onMouseOut="lolite()" onClick="logVariable('messagestring')" href="../_variables/messagestring.html">$messagestring</a>);
<a name="l1261"><span class="linenum">1261</span></a>              }
<a name="l1262"><span class="linenum">1262</span></a>  
<a name="l1263"><span class="linenum">1263</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it11424" onMouseOver="hilite(11424)" onMouseOut="lolite()" onClick="logVariable('strdeletecheck')" href="../_variables/strdeletecheck.html">$strdeletecheck</a>);
<a name="l1264"><span class="linenum">1264</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it23198" onMouseOver="hilite(23198)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a> . ': ' . <a class="var it11424" onMouseOver="hilite(11424)" onMouseOut="lolite()" onClick="logVariable('strdeletecheck')" href="../_variables/strdeletecheck.html">$strdeletecheck</a>);
<a name="l1265"><span class="linenum">1265</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('site')" href="../_variables/site.html">$site</a>-&gt;<a onClick="logVariable('fullname')" class="var it42988" onMouseOver="hilite(42988)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>);
<a name="l1266"><span class="linenum">1266</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l1267"><span class="linenum">1267</span></a>              <a class="var it6070" onMouseOver="hilite(6070)" onMouseOut="lolite()" onClick="logVariable('confirmurl')" href="../_variables/confirmurl.html">$confirmurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it23201" onMouseOver="hilite(23201)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a onClick="logVariable('url')" class="var it44217" onMouseOver="hilite(44217)" onMouseOut="lolite()" href="../_variables/url.html">url</a>, array('sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>(), 'bui_deleteid' =&gt; <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id, 'bui_confirm' =&gt; 1));
<a name="l1268"><span class="linenum">1268</span></a>              <a class="var it5237" onMouseOver="hilite(5237)" onMouseOut="lolite()" onClick="logVariable('cancelurl')" href="../_variables/cancelurl.html">$cancelurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it23201" onMouseOver="hilite(23201)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a onClick="logVariable('url')" class="var it44217" onMouseOver="hilite(44217)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l1269"><span class="linenum">1269</span></a>              <a class="var it10644" onMouseOver="hilite(10644)" onMouseOut="lolite()" onClick="logVariable('yesbutton')" href="../_variables/yesbutton.html">$yesbutton</a> = <span class="keyword">new </span><a class="class" onClick="logClass('single_button')" href="../_classes/single_button.html" onMouseOver="classPopup(event,'single_button')">single_button</a>(<a class="var it6070" onMouseOver="hilite(6070)" onMouseOut="lolite()" onClick="logVariable('confirmurl')" href="../_variables/confirmurl.html">$confirmurl</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('yes'));
<a name="l1270"><span class="linenum">1270</span></a>              <a class="var it10645" onMouseOver="hilite(10645)" onMouseOut="lolite()" onClick="logVariable('nobutton')" href="../_variables/nobutton.html">$nobutton</a> = <span class="keyword">new </span><a class="class" onClick="logClass('single_button')" href="../_classes/single_button.html" onMouseOver="classPopup(event,'single_button')">single_button</a>(<a class="var it5237" onMouseOver="hilite(5237)" onMouseOut="lolite()" onClick="logVariable('cancelurl')" href="../_variables/cancelurl.html">$cancelurl</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('no'));
<a name="l1271"><span class="linenum">1271</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('confirm')" href="../_functions/confirm.html" onMouseOver="funcPopup(event,'confirm')">confirm</a>(<a class="var it276" onMouseOver="hilite(276)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it10644" onMouseOver="hilite(10644)" onMouseOut="lolite()" onClick="logVariable('yesbutton')" href="../_variables/yesbutton.html">$yesbutton</a>, <a class="var it10645" onMouseOver="hilite(10645)" onMouseOut="lolite()" onClick="logVariable('nobutton')" href="../_variables/nobutton.html">$nobutton</a>);
<a name="l1272"><span class="linenum">1272</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l1273"><span class="linenum">1273</span></a>  <span class="comment">            // Make sure that nothing else happens after we have displayed this form.</span>
<a name="l1274"><span class="linenum">1274</span></a>              exit;
<a name="l1275"><span class="linenum">1275</span></a>          } else {
<a name="l1276"><span class="linenum">1276</span></a>              <a class="function" onClick="logFunction('blocks_delete_instance')" href="../_functions/blocks_delete_instance.html" onMouseOver="funcPopup(event,'blocks_delete_instance')">blocks_delete_instance</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>);
<a name="l1277"><span class="linenum">1277</span></a>  <span class="comment">            // bui_deleteid and bui_confirm should not be in the PAGE url.</span>
<a name="l1278"><span class="linenum">1278</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_deleteid');
<a name="l1279"><span class="linenum">1279</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_confirm');
<a name="l1280"><span class="linenum">1280</span></a>              return true;
<a name="l1281"><span class="linenum">1281</span></a>          }
<a name="l1282"><span class="linenum">1282</span></a>      }
<a name="l1283"><span class="linenum">1283</span></a>  
<a name="l1284"><span class="linenum">1284</span></a>      <span class="comment">/**</span>
<a name="l1285"><span class="linenum">1285</span></a>  <span class="comment">     * Handle showing or hiding a block.</span>
<a name="l1286"><span class="linenum">1286</span></a>  <span class="comment">     * @return boolean true if anything was done. False if not.</span>
<a name="l1287"><span class="linenum">1287</span></a>  <span class="comment">     */</span>
<a name="l1288"><span class="linenum">1288</span></a>      public function <a class="function" onClick="logFunction('process_url_show_hide')" href="../_functions/process_url_show_hide.html" onMouseOver="funcPopup(event,'process_url_show_hide')">process_url_show_hide</a>() {
<a name="l1289"><span class="linenum">1289</span></a>          if (<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_hideid', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>)) {
<a name="l1290"><span class="linenum">1290</span></a>              <a class="var it23206" onMouseOver="hilite(23206)" onMouseOut="lolite()" onClick="logVariable('newvisibility')" href="../_variables/newvisibility.html">$newvisibility</a> = 0;
<a name="l1291"><span class="linenum">1291</span></a>          } else if (<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_showid', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>)) {
<a name="l1292"><span class="linenum">1292</span></a>              <a class="var it23206" onMouseOver="hilite(23206)" onMouseOut="lolite()" onClick="logVariable('newvisibility')" href="../_variables/newvisibility.html">$newvisibility</a> = 1;
<a name="l1293"><span class="linenum">1293</span></a>          } else {
<a name="l1294"><span class="linenum">1294</span></a>              return false;
<a name="l1295"><span class="linenum">1295</span></a>          }
<a name="l1296"><span class="linenum">1296</span></a>  
<a name="l1297"><span class="linenum">1297</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l1298"><span class="linenum">1298</span></a>  
<a name="l1299"><span class="linenum">1299</span></a>          <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;blocks-&gt;<a class="function" onClick="logFunction('find_instance')" href="../_functions/find_instance.html" onMouseOver="funcPopup(event,'find_instance')">find_instance</a>(<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>);
<a name="l1300"><span class="linenum">1300</span></a>  
<a name="l1301"><span class="linenum">1301</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l1302"><span class="linenum">1302</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('nopermissions', '', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('hideshowblocks'));
<a name="l1303"><span class="linenum">1303</span></a>          } else if (!<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('instance_can_be_hidden')" href="../_functions/instance_can_be_hidden.html" onMouseOver="funcPopup(event,'instance_can_be_hidden')">instance_can_be_hidden</a>()) {
<a name="l1304"><span class="linenum">1304</span></a>              return false;
<a name="l1305"><span class="linenum">1305</span></a>          }
<a name="l1306"><span class="linenum">1306</span></a>  
<a name="l1307"><span class="linenum">1307</span></a>          <a class="function" onClick="logFunction('blocks_set_visibility')" href="../_functions/blocks_set_visibility.html" onMouseOver="funcPopup(event,'blocks_set_visibility')">blocks_set_visibility</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>, <a class="var it23206" onMouseOver="hilite(23206)" onMouseOut="lolite()" onClick="logVariable('newvisibility')" href="../_variables/newvisibility.html">$newvisibility</a>);
<a name="l1308"><span class="linenum">1308</span></a>  
<a name="l1309"><span class="linenum">1309</span></a>  <span class="comment">        // If the page URL was a guses, it will contain the bui_... param, so we must make sure it is not there.</span>
<a name="l1310"><span class="linenum">1310</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_hideid');
<a name="l1311"><span class="linenum">1311</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_showid');
<a name="l1312"><span class="linenum">1312</span></a>  
<a name="l1313"><span class="linenum">1313</span></a>          return true;
<a name="l1314"><span class="linenum">1314</span></a>      }
<a name="l1315"><span class="linenum">1315</span></a>  
<a name="l1316"><span class="linenum">1316</span></a>      <span class="comment">/**</span>
<a name="l1317"><span class="linenum">1317</span></a>  <span class="comment">     * Handle showing/processing the submission from the block editing form.</span>
<a name="l1318"><span class="linenum">1318</span></a>  <span class="comment">     * @return boolean true if the form was submitted and the new config saved. Does not</span>
<a name="l1319"><span class="linenum">1319</span></a>  <span class="comment">     *      return if the editing form was displayed. False otherwise.</span>
<a name="l1320"><span class="linenum">1320</span></a>  <span class="comment">     */</span>
<a name="l1321"><span class="linenum">1321</span></a>      public function <a class="function" onClick="logFunction('process_url_edit')" href="../_functions/process_url_edit.html" onMouseOver="funcPopup(event,'process_url_edit')">process_url_edit</a>() {
<a name="l1322"><span class="linenum">1322</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1323"><span class="linenum">1323</span></a>  
<a name="l1324"><span class="linenum">1324</span></a>          <a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_editid', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l1325"><span class="linenum">1325</span></a>          if (!<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>) {
<a name="l1326"><span class="linenum">1326</span></a>              return false;
<a name="l1327"><span class="linenum">1327</span></a>          }
<a name="l1328"><span class="linenum">1328</span></a>  
<a name="l1329"><span class="linenum">1329</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l1330"><span class="linenum">1330</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../blocks/edit_form.php.html">/blocks/edit_form.php</a>');
<a name="l1331"><span class="linenum">1331</span></a>  
<a name="l1332"><span class="linenum">1332</span></a>          <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_instance')" href="../_functions/find_instance.html" onMouseOver="funcPopup(event,'find_instance')">find_instance</a>(<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>);
<a name="l1333"><span class="linenum">1333</span></a>  
<a name="l1334"><span class="linenum">1334</span></a>          if (!<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('user_can_edit')" href="../_functions/user_can_edit.html" onMouseOver="funcPopup(event,'user_can_edit')">user_can_edit</a>() &amp;&amp; !<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l1335"><span class="linenum">1335</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('nopermissions', '', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editblock'));
<a name="l1336"><span class="linenum">1336</span></a>          }
<a name="l1337"><span class="linenum">1337</span></a>  
<a name="l1338"><span class="linenum">1338</span></a>          <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a>();
<a name="l1339"><span class="linenum">1339</span></a>          <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('admin');
<a name="l1340"><span class="linenum">1340</span></a>          <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_course')" href="../_functions/set_course.html" onMouseOver="funcPopup(event,'set_course')">set_course</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course);
<a name="l1341"><span class="linenum">1341</span></a>  <span class="comment">        //$editpage-&gt;set_context($block-&gt;context);</span>
<a name="l1342"><span class="linenum">1342</span></a>          <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context);
<a name="l1343"><span class="linenum">1343</span></a>          if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm) {
<a name="l1344"><span class="linenum">1344</span></a>              <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_cm')" href="../_functions/set_cm.html" onMouseOver="funcPopup(event,'set_cm')">set_cm</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm);
<a name="l1345"><span class="linenum">1345</span></a>          }
<a name="l1346"><span class="linenum">1346</span></a>          <a class="var it17949" onMouseOver="hilite(17949)" onMouseOut="lolite()" onClick="logVariable('editurlbase')" href="../_variables/editurlbase.html">$editurlbase</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . '/', '/', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out_omit_querystring')" href="../_functions/out_omit_querystring.html" onMouseOver="funcPopup(event,'out_omit_querystring')">out_omit_querystring</a>());
<a name="l1347"><span class="linenum">1347</span></a>          <a class="var it23208" onMouseOver="hilite(23208)" onMouseOut="lolite()" onClick="logVariable('editurlparams')" href="../_variables/editurlparams.html">$editurlparams</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('params')" href="../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>();
<a name="l1348"><span class="linenum">1348</span></a>          <a class="var it23208" onMouseOver="hilite(23208)" onMouseOut="lolite()" onClick="logVariable('editurlparams')" href="../_variables/editurlparams.html">$editurlparams</a>['bui_editid'] = <a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>;
<a name="l1349"><span class="linenum">1349</span></a>          <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>(<a class="var it17949" onMouseOver="hilite(17949)" onMouseOut="lolite()" onClick="logVariable('editurlbase')" href="../_variables/editurlbase.html">$editurlbase</a>, <a class="var it23208" onMouseOver="hilite(23208)" onMouseOut="lolite()" onClick="logVariable('editurlparams')" href="../_variables/editurlparams.html">$editurlparams</a>);
<a name="l1350"><span class="linenum">1350</span></a>          <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_block_actions_done')" href="../_functions/set_block_actions_done.html" onMouseOver="funcPopup(event,'set_block_actions_done')">set_block_actions_done</a>();
<a name="l1351"><span class="linenum">1351</span></a>  <span class="comment">        // At this point we are either going to redirect, or display the form, so</span>
<a name="l1352"><span class="linenum">1352</span></a>  <span class="comment">        // overwrite global $PAGE ready for this. (Formslib refers to it.)</span>
<a name="l1353"><span class="linenum">1353</span></a>          <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a> = <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>;
<a name="l1354"><span class="linenum">1354</span></a>  <span class="comment">        //some functions like MoodleQuickForm::addHelpButton use $OUTPUT so we need to replace that to</span>
<a name="l1355"><span class="linenum">1355</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core');
<a name="l1356"><span class="linenum">1356</span></a>          <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a> = <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l1357"><span class="linenum">1357</span></a>  
<a name="l1358"><span class="linenum">1358</span></a>          <a class="var it23209" onMouseOver="hilite(23209)" onMouseOut="lolite()" onClick="logVariable('formfile')" href="../_variables/formfile.html">$formfile</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/blocks/' . <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="phpfunction" onClick="logFunction('name')" href="../_functions/name.html" onMouseOver="phpfuncPopup(event,'name')">name</a>() . '/edit_form.php';
<a name="l1359"><span class="linenum">1359</span></a>          if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it23209" onMouseOver="hilite(23209)" onMouseOut="lolite()" onClick="logVariable('formfile')" href="../_variables/formfile.html">$formfile</a>)) {
<a name="l1360"><span class="linenum">1360</span></a>              require_once(<a class="var it23209" onMouseOver="hilite(23209)" onMouseOut="lolite()" onClick="logVariable('formfile')" href="../_variables/formfile.html">$formfile</a>);
<a name="l1361"><span class="linenum">1361</span></a>              <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_' . <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="phpfunction" onClick="logFunction('name')" href="../_functions/name.html" onMouseOver="phpfuncPopup(event,'name')">name</a>() . '_edit_form';
<a name="l1362"><span class="linenum">1362</span></a>              if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>)) {
<a name="l1363"><span class="linenum">1363</span></a>                  <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_edit_form';
<a name="l1364"><span class="linenum">1364</span></a>              }
<a name="l1365"><span class="linenum">1365</span></a>          } else {
<a name="l1366"><span class="linenum">1366</span></a>              <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_edit_form';
<a name="l1367"><span class="linenum">1367</span></a>          }
<a name="l1368"><span class="linenum">1368</span></a>  
<a name="l1369"><span class="linenum">1369</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a> = new <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>(<a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a onClick="logVariable('url')" class="var it44218" onMouseOver="hilite(44218)" onMouseOut="lolite()" href="../_variables/url.html">url</a>, <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>, <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>);
<a name="l1370"><span class="linenum">1370</span></a>          <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="../_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>);
<a name="l1371"><span class="linenum">1371</span></a>  
<a name="l1372"><span class="linenum">1372</span></a>          if (<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('is_cancelled')" href="../_functions/is_cancelled.html" onMouseOver="funcPopup(event,'is_cancelled')">is_cancelled</a>()) {
<a name="l1373"><span class="linenum">1373</span></a>              <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url);
<a name="l1374"><span class="linenum">1374</span></a>  
<a name="l1375"><span class="linenum">1375</span></a>          } else if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l1376"><span class="linenum">1376</span></a>              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a> = new stdClass;
<a name="l1377"><span class="linenum">1377</span></a>              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('id')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id;
<a name="l1378"><span class="linenum">1378</span></a>  
<a name="l1379"><span class="linenum">1379</span></a>  <span class="comment">            // This may get overwritten by the special case handling below.</span>
<a name="l1380"><span class="linenum">1380</span></a>              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_pagetypepattern')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_pagetypepattern.html">bui_pagetypepattern</a>;
<a name="l1381"><span class="linenum">1381</span></a>              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = (bool) <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_contexts')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_contexts.html">bui_contexts</a>;
<a name="l1382"><span class="linenum">1382</span></a>              if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_subpagepattern')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_subpagepattern.html">bui_subpagepattern</a>) || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_subpagepattern')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_subpagepattern.html">bui_subpagepattern</a> == '%@NULL@%') {
<a name="l1383"><span class="linenum">1383</span></a>                  <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('subpagepattern')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/subpagepattern.html">subpagepattern</a> = null;
<a name="l1384"><span class="linenum">1384</span></a>              } else {
<a name="l1385"><span class="linenum">1385</span></a>                  <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('subpagepattern')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/subpagepattern.html">subpagepattern</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_subpagepattern')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_subpagepattern.html">bui_subpagepattern</a>;
<a name="l1386"><span class="linenum">1386</span></a>              }
<a name="l1387"><span class="linenum">1387</span></a>  
<a name="l1388"><span class="linenum">1388</span></a>              <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1389"><span class="linenum">1389</span></a>              <a class="var it15764" onMouseOver="hilite(15764)" onMouseOut="lolite()" onClick="logVariable('frontpagecontext')" href="../_variables/frontpagecontext.html">$frontpagecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>);
<a name="l1390"><span class="linenum">1390</span></a>              <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_parentcontextid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_parentcontextid.html">bui_parentcontextid</a>);
<a name="l1391"><span class="linenum">1391</span></a>  
<a name="l1392"><span class="linenum">1392</span></a>  <span class="comment">            // Updating stickiness and contexts.  See MDL-21375 for details.</span>
<a name="l1393"><span class="linenum">1393</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:manageblocks', <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>)) { // Check permissions in destination
<a name="l1394"><span class="linenum">1394</span></a>  
<a name="l1395"><span class="linenum">1395</span></a>  <span class="comment">                // Explicitly set the default context</span>
<a name="l1396"><span class="linenum">1396</span></a>                  <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('parentcontextid')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/parentcontextid.html">parentcontextid</a> = <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('id')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1397"><span class="linenum">1397</span></a>  
<a name="l1398"><span class="linenum">1398</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_editingatfrontpage')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_editingatfrontpage.html">bui_editingatfrontpage</a>) {   // The block is being edited on the front page
<a name="l1399"><span class="linenum">1399</span></a>  
<a name="l1400"><span class="linenum">1400</span></a>  <span class="comment">                    // The interface here is a special case because the pagetype pattern is</span>
<a name="l1401"><span class="linenum">1401</span></a>  <span class="comment">                    // totally derived from the context menu.  Here are the excpetions.   MDL-30340</span>
<a name="l1402"><span class="linenum">1402</span></a>  
<a name="l1403"><span class="linenum">1403</span></a>                      switch (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_contexts')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_contexts.html">bui_contexts</a>) {
<a name="l1404"><span class="linenum">1404</span></a>                          case <a class="constant" onClick="logConstant('BUI_CONTEXTS_ENTIRE_SITE')" href="../_constants/BUI_CONTEXTS_ENTIRE_SITE.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_ENTIRE_SITE')">BUI_CONTEXTS_ENTIRE_SITE</a>:
<a name="l1405"><span class="linenum">1405</span></a>  <span class="comment">                            // The user wants to show the block across the entire site</span>
<a name="l1406"><span class="linenum">1406</span></a>                              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('parentcontextid')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/parentcontextid.html">parentcontextid</a> = <a class="var it221" onMouseOver="hilite(221)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>-&gt;<a onClick="logVariable('id')" class="var it42913" onMouseOver="hilite(42913)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1407"><span class="linenum">1407</span></a>                              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = true;
<a name="l1408"><span class="linenum">1408</span></a>                              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a>  = '*';
<a name="l1409"><span class="linenum">1409</span></a>                              break;
<a name="l1410"><span class="linenum">1410</span></a>                          case <a class="constant" onClick="logConstant('BUI_CONTEXTS_FRONTPAGE_SUBS')" href="../_constants/BUI_CONTEXTS_FRONTPAGE_SUBS.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_FRONTPAGE_SUBS')">BUI_CONTEXTS_FRONTPAGE_SUBS</a>:
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment">                            // The user wants the block shown on the front page and all subcontexts</span>
<a name="l1412"><span class="linenum">1412</span></a>                              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('parentcontextid')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/parentcontextid.html">parentcontextid</a> = <a class="var it15764" onMouseOver="hilite(15764)" onMouseOut="lolite()" onClick="logVariable('frontpagecontext')" href="../_variables/frontpagecontext.html">$frontpagecontext</a>-&gt;<a onClick="logVariable('id')" class="var it44185" onMouseOver="hilite(44185)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1413"><span class="linenum">1413</span></a>                              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = true;
<a name="l1414"><span class="linenum">1414</span></a>                              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a>  = '*';
<a name="l1415"><span class="linenum">1415</span></a>                              break;
<a name="l1416"><span class="linenum">1416</span></a>                          case <a class="constant" onClick="logConstant('BUI_CONTEXTS_FRONTPAGE_ONLY')" href="../_constants/BUI_CONTEXTS_FRONTPAGE_ONLY.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_FRONTPAGE_ONLY')">BUI_CONTEXTS_FRONTPAGE_ONLY</a>:
<a name="l1417"><span class="linenum">1417</span></a>  <span class="comment">                            // The user want to show the front page on the frontpage only</span>
<a name="l1418"><span class="linenum">1418</span></a>                              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('parentcontextid')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/parentcontextid.html">parentcontextid</a> = <a class="var it15764" onMouseOver="hilite(15764)" onMouseOut="lolite()" onClick="logVariable('frontpagecontext')" href="../_variables/frontpagecontext.html">$frontpagecontext</a>-&gt;<a onClick="logVariable('id')" class="var it44185" onMouseOver="hilite(44185)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1419"><span class="linenum">1419</span></a>                              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = false;
<a name="l1420"><span class="linenum">1420</span></a>                              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a>  = 'site-index';
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment">                            // This is the only relevant page type anyway but we'll set it explicitly just</span>
<a name="l1422"><span class="linenum">1422</span></a>  <span class="comment">                            // in case the front page grows site-index-* subpages of its own later</span>
<a name="l1423"><span class="linenum">1423</span></a>                              break;
<a name="l1424"><span class="linenum">1424</span></a>                      }
<a name="l1425"><span class="linenum">1425</span></a>                  }
<a name="l1426"><span class="linenum">1426</span></a>              }
<a name="l1427"><span class="linenum">1427</span></a>  
<a name="l1428"><span class="linenum">1428</span></a>              <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a>);
<a name="l1429"><span class="linenum">1429</span></a>  <span class="comment">            // hacks for some contexts</span>
<a name="l1430"><span class="linenum">1430</span></a>              if ((<a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) &amp;&amp; (<a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>)) {
<a name="l1431"><span class="linenum">1431</span></a>  <span class="comment">                // For course context</span>
<a name="l1432"><span class="linenum">1432</span></a>  <span class="comment">                // is page type pattern is mod-*, change showinsubcontext to 1</span>
<a name="l1433"><span class="linenum">1433</span></a>                  if (<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[0] == 'mod' || <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a> == '*') {
<a name="l1434"><span class="linenum">1434</span></a>                      <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = 1;
<a name="l1435"><span class="linenum">1435</span></a>                  } else {
<a name="l1436"><span class="linenum">1436</span></a>                      <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = 0;
<a name="l1437"><span class="linenum">1437</span></a>                  }
<a name="l1438"><span class="linenum">1438</span></a>              } else  if (<a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a>) {
<a name="l1439"><span class="linenum">1439</span></a>  <span class="comment">                // for user context</span>
<a name="l1440"><span class="linenum">1440</span></a>  <span class="comment">                // subpagepattern should be null</span>
<a name="l1441"><span class="linenum">1441</span></a>                  if (<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[0] == 'user' or <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[0] == 'my') {
<a name="l1442"><span class="linenum">1442</span></a>  <span class="comment">                    // we don't need subpagepattern in usercontext</span>
<a name="l1443"><span class="linenum">1443</span></a>                      <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('subpagepattern')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/subpagepattern.html">subpagepattern</a> = null;
<a name="l1444"><span class="linenum">1444</span></a>                  }
<a name="l1445"><span class="linenum">1445</span></a>              }
<a name="l1446"><span class="linenum">1446</span></a>  
<a name="l1447"><span class="linenum">1447</span></a>              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_defaultregion')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_defaultregion.html">bui_defaultregion</a>;
<a name="l1448"><span class="linenum">1448</span></a>              <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('defaultweight')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/defaultweight.html">defaultweight</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_defaultweight')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_defaultweight.html">bui_defaultweight</a>;
<a name="l1449"><span class="linenum">1449</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('block_instances', <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>);
<a name="l1450"><span class="linenum">1450</span></a>  
<a name="l1451"><span class="linenum">1451</span></a>              if (!empty(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('config')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/config.html">config</a>)) {
<a name="l1452"><span class="linenum">1452</span></a>                  <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('config')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/config.html">config</a>);
<a name="l1453"><span class="linenum">1453</span></a>              } else {
<a name="l1454"><span class="linenum">1454</span></a>                  <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a> = new stdClass;
<a name="l1455"><span class="linenum">1455</span></a>              }
<a name="l1456"><span class="linenum">1456</span></a>              foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> as <a class="var it23217" onMouseOver="hilite(23217)" onMouseOut="lolite()" onClick="logVariable('configfield')" href="../_variables/configfield.html">$configfield</a> =&gt; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l1457"><span class="linenum">1457</span></a>                  if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it23217" onMouseOver="hilite(23217)" onMouseOut="lolite()" onClick="logVariable('configfield')" href="../_variables/configfield.html">$configfield</a>, 'config_') !== 0) {
<a name="l1458"><span class="linenum">1458</span></a>                      continue;
<a name="l1459"><span class="linenum">1459</span></a>                  }
<a name="l1460"><span class="linenum">1460</span></a>                  <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it23217" onMouseOver="hilite(23217)" onMouseOut="lolite()" onClick="logVariable('configfield')" href="../_variables/configfield.html">$configfield</a>, 7);
<a name="l1461"><span class="linenum">1461</span></a>                  <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> = <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l1462"><span class="linenum">1462</span></a>              }
<a name="l1463"><span class="linenum">1463</span></a>              <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('instance_config_save')" href="../_functions/instance_config_save.html" onMouseOver="funcPopup(event,'instance_config_save')">instance_config_save</a>(<a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>);
<a name="l1464"><span class="linenum">1464</span></a>  
<a name="l1465"><span class="linenum">1465</span></a>              <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a> = new stdClass;
<a name="l1466"><span class="linenum">1466</span></a>              <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('visible')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_visible.html">bui_visible</a>;
<a name="l1467"><span class="linenum">1467</span></a>              <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('region')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/region.html">region</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_region')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_region.html">bui_region</a>;
<a name="l1468"><span class="linenum">1468</span></a>              <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('weight')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_weight')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_weight.html">bui_weight</a>;
<a name="l1469"><span class="linenum">1469</span></a>              <a class="var it23221" onMouseOver="hilite(23221)" onMouseOut="lolite()" onClick="logVariable('needbprecord')" href="../_variables/needbprecord.html">$needbprecord</a> = !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_visible')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_visible.html">bui_visible</a> || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_region')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_region.html">bui_region</a> != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_defaultregion')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_defaultregion.html">bui_defaultregion</a> ||
<a name="l1470"><span class="linenum">1470</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_weight')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_weight.html">bui_weight</a> != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_defaultweight')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../_variables/bui_defaultweight.html">bui_defaultweight</a>;
<a name="l1471"><span class="linenum">1471</span></a>  
<a name="l1472"><span class="linenum">1472</span></a>              if (<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockpositionid &amp;&amp; !<a class="var it23221" onMouseOver="hilite(23221)" onMouseOut="lolite()" onClick="logVariable('needbprecord')" href="../_variables/needbprecord.html">$needbprecord</a>) {
<a name="l1473"><span class="linenum">1473</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('block_positions', array('id' =&gt; <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockpositionid));
<a name="l1474"><span class="linenum">1474</span></a>  
<a name="l1475"><span class="linenum">1475</span></a>              } else if (<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockpositionid &amp;&amp; <a class="var it23221" onMouseOver="hilite(23221)" onMouseOut="lolite()" onClick="logVariable('needbprecord')" href="../_variables/needbprecord.html">$needbprecord</a>) {
<a name="l1476"><span class="linenum">1476</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('id')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockpositionid;
<a name="l1477"><span class="linenum">1477</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('block_positions', <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>);
<a name="l1478"><span class="linenum">1478</span></a>  
<a name="l1479"><span class="linenum">1479</span></a>              } else if (<a class="var it23221" onMouseOver="hilite(23221)" onMouseOut="lolite()" onClick="logVariable('needbprecord')" href="../_variables/needbprecord.html">$needbprecord</a>) {
<a name="l1480"><span class="linenum">1480</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a> = <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id;
<a name="l1481"><span class="linenum">1481</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('contextid')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;id;
<a name="l1482"><span class="linenum">1482</span></a>                  <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('pagetype')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype;
<a name="l1483"><span class="linenum">1483</span></a>                  if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage) {
<a name="l1484"><span class="linenum">1484</span></a>                      <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('subpage')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage;
<a name="l1485"><span class="linenum">1485</span></a>                  } else {
<a name="l1486"><span class="linenum">1486</span></a>                      <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('subpage')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a> = '';
<a name="l1487"><span class="linenum">1487</span></a>                  }
<a name="l1488"><span class="linenum">1488</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('block_positions', <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>);
<a name="l1489"><span class="linenum">1489</span></a>              }
<a name="l1490"><span class="linenum">1490</span></a>  
<a name="l1491"><span class="linenum">1491</span></a>              <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url);
<a name="l1492"><span class="linenum">1492</span></a>  
<a name="l1493"><span class="linenum">1493</span></a>          } else {
<a name="l1494"><span class="linenum">1494</span></a>              <a class="var it9615" onMouseOver="hilite(9615)" onMouseOut="lolite()" onClick="logVariable('strheading')" href="../_variables/strheading.html">$strheading</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('blockconfiga', 'moodle', <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>());
<a name="l1495"><span class="linenum">1495</span></a>              <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it9615" onMouseOver="hilite(9615)" onMouseOut="lolite()" onClick="logVariable('strheading')" href="../_variables/strheading.html">$strheading</a>);
<a name="l1496"><span class="linenum">1496</span></a>              <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it9615" onMouseOver="hilite(9615)" onMouseOut="lolite()" onClick="logVariable('strheading')" href="../_variables/strheading.html">$strheading</a>);
<a name="l1497"><span class="linenum">1497</span></a>              <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype);
<a name="l1498"><span class="linenum">1498</span></a>              if (<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[0] == 'tag' &amp;&amp; !empty(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage)) {
<a name="l1499"><span class="linenum">1499</span></a>  <span class="comment">                // better navbar for tag pages</span>
<a name="l1500"><span class="linenum">1500</span></a>                  <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a onClick="logVariable('navbar')" class="var it44218" onMouseOver="hilite(44218)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('tags'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/tag/'));
<a name="l1501"><span class="linenum">1501</span></a>                  <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a> = <a class="class" onClick="logClass('core_tag_tag')" href="../_classes/core_tag_tag.html" onMouseOver="classPopup(event,'core_tag_tag')">core_tag_tag</a>::<a class="function" onClick="logFunction('get')" href="../_functions/get.html" onMouseOver="funcPopup(event,'get')">get</a>(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage);
<a name="l1502"><span class="linenum">1502</span></a>  <span class="comment">                // tag search page doesn't have subpageid</span>
<a name="l1503"><span class="linenum">1503</span></a>                  if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>) {
<a name="l1504"><span class="linenum">1504</span></a>                      <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a onClick="logVariable('navbar')" class="var it44218" onMouseOver="hilite(44218)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>-&gt;<a class="function" onClick="logFunction('get_display_name')" href="../_functions/get_display_name.html" onMouseOver="funcPopup(event,'get_display_name')">get_display_name</a>(), <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>-&gt;<a class="function" onClick="logFunction('get_view_url')" href="../_functions/get_view_url.html" onMouseOver="funcPopup(event,'get_view_url')">get_view_url</a>());
<a name="l1505"><span class="linenum">1505</span></a>                  }
<a name="l1506"><span class="linenum">1506</span></a>              }
<a name="l1507"><span class="linenum">1507</span></a>              <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a onClick="logVariable('navbar')" class="var it44218" onMouseOver="hilite(44218)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>());
<a name="l1508"><span class="linenum">1508</span></a>              <a class="var it23207" onMouseOver="hilite(23207)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a onClick="logVariable('navbar')" class="var it44218" onMouseOver="hilite(44218)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('configuration'));
<a name="l1509"><span class="linenum">1509</span></a>              echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l1510"><span class="linenum">1510</span></a>              echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="var it9615" onMouseOver="hilite(9615)" onMouseOut="lolite()" onClick="logVariable('strheading')" href="../_variables/strheading.html">$strheading</a>, 2);
<a name="l1511"><span class="linenum">1511</span></a>              <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('display')" href="../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>();
<a name="l1512"><span class="linenum">1512</span></a>              echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l1513"><span class="linenum">1513</span></a>              exit;
<a name="l1514"><span class="linenum">1514</span></a>          }
<a name="l1515"><span class="linenum">1515</span></a>      }
<a name="l1516"><span class="linenum">1516</span></a>  
<a name="l1517"><span class="linenum">1517</span></a>      <span class="comment">/**</span>
<a name="l1518"><span class="linenum">1518</span></a>  <span class="comment">     * Handle showing/processing the submission from the block editing form.</span>
<a name="l1519"><span class="linenum">1519</span></a>  <span class="comment">     * @return boolean true if the form was submitted and the new config saved. Does not</span>
<a name="l1520"><span class="linenum">1520</span></a>  <span class="comment">     *      return if the editing form was displayed. False otherwise.</span>
<a name="l1521"><span class="linenum">1521</span></a>  <span class="comment">     */</span>
<a name="l1522"><span class="linenum">1522</span></a>      public function <a class="function" onClick="logFunction('process_url_move')" href="../_functions/process_url_move.html" onMouseOver="funcPopup(event,'process_url_move')">process_url_move</a>() {
<a name="l1523"><span class="linenum">1523</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l1524"><span class="linenum">1524</span></a>  
<a name="l1525"><span class="linenum">1525</span></a>          <a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_moveid', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l1526"><span class="linenum">1526</span></a>          if (!<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>) {
<a name="l1527"><span class="linenum">1527</span></a>              return false;
<a name="l1528"><span class="linenum">1528</span></a>          }
<a name="l1529"><span class="linenum">1529</span></a>  
<a name="l1530"><span class="linenum">1530</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l1531"><span class="linenum">1531</span></a>  
<a name="l1532"><span class="linenum">1532</span></a>          <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_instance')" href="../_functions/find_instance.html" onMouseOver="funcPopup(event,'find_instance')">find_instance</a>(<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>);
<a name="l1533"><span class="linenum">1533</span></a>  
<a name="l1534"><span class="linenum">1534</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l1535"><span class="linenum">1535</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('nopermissions', '', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editblock'));
<a name="l1536"><span class="linenum">1536</span></a>          }
<a name="l1537"><span class="linenum">1537</span></a>  
<a name="l1538"><span class="linenum">1538</span></a>          <a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_newregion', '', <a class="constant" onClick="logConstant('PARAM_ALPHANUMEXT')" href="../_constants/PARAM_ALPHANUMEXT.html" onMouseOver="constPopup(event,'PARAM_ALPHANUMEXT')">PARAM_ALPHANUMEXT</a>);
<a name="l1539"><span class="linenum">1539</span></a>          <a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_newweight', null, <a class="constant" onClick="logConstant('PARAM_FLOAT')" href="../_constants/PARAM_FLOAT.html" onMouseOver="constPopup(event,'PARAM_FLOAT')">PARAM_FLOAT</a>);
<a name="l1540"><span class="linenum">1540</span></a>          if (!<a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a> || <a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>)) {
<a name="l1541"><span class="linenum">1541</span></a>  <span class="comment">            // Don't have a valid target position yet, must be just starting the move.</span>
<a name="l1542"><span class="linenum">1542</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a> = <a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>;
<a name="l1543"><span class="linenum">1543</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_moveid');
<a name="l1544"><span class="linenum">1544</span></a>              return false;
<a name="l1545"><span class="linenum">1545</span></a>          }
<a name="l1546"><span class="linenum">1546</span></a>  
<a name="l1547"><span class="linenum">1547</span></a>          if (!<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>)) {
<a name="l1548"><span class="linenum">1548</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('unknownblockregion', '', <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url, <a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>);
<a name="l1549"><span class="linenum">1549</span></a>          }
<a name="l1550"><span class="linenum">1550</span></a>  
<a name="l1551"><span class="linenum">1551</span></a>  <span class="comment">        // Move this block. This may involve moving other nearby blocks.</span>
<a name="l1552"><span class="linenum">1552</span></a>          <a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>[<a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>];
<a name="l1553"><span class="linenum">1553</span></a>  
<a name="l1554"><span class="linenum">1554</span></a>          <a class="var it23222" onMouseOver="hilite(23222)" onMouseOut="lolite()" onClick="logVariable('maxweight')" href="../_variables/maxweight.html">$maxweight</a> = self::MAX_WEIGHT;
<a name="l1555"><span class="linenum">1555</span></a>          <a class="var it23223" onMouseOver="hilite(23223)" onMouseOut="lolite()" onClick="logVariable('minweight')" href="../_variables/minweight.html">$minweight</a> = -self::MAX_WEIGHT;
<a name="l1556"><span class="linenum">1556</span></a>  
<a name="l1557"><span class="linenum">1557</span></a>  <span class="comment">        // Initialise the used weights and spareweights array with the default values</span>
<a name="l1558"><span class="linenum">1558</span></a>          <a class="var it23224" onMouseOver="hilite(23224)" onMouseOut="lolite()" onClick="logVariable('spareweights')" href="../_variables/spareweights.html">$spareweights</a> = array();
<a name="l1559"><span class="linenum">1559</span></a>          <a class="var it9928" onMouseOver="hilite(9928)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a> = array();
<a name="l1560"><span class="linenum">1560</span></a>          for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = <a class="var it23223" onMouseOver="hilite(23223)" onMouseOut="lolite()" onClick="logVariable('minweight')" href="../_variables/minweight.html">$minweight</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt;= <a class="var it23222" onMouseOver="hilite(23222)" onMouseOut="lolite()" onClick="logVariable('maxweight')" href="../_variables/maxweight.html">$maxweight</a>; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++) {
<a name="l1561"><span class="linenum">1561</span></a>              <a class="var it23224" onMouseOver="hilite(23224)" onMouseOut="lolite()" onClick="logVariable('spareweights')" href="../_variables/spareweights.html">$spareweights</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>] = <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>;
<a name="l1562"><span class="linenum">1562</span></a>              <a class="var it9928" onMouseOver="hilite(9928)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>] = array();
<a name="l1563"><span class="linenum">1563</span></a>          }
<a name="l1564"><span class="linenum">1564</span></a>  
<a name="l1565"><span class="linenum">1565</span></a>  <span class="comment">        // Check each block and sort out where we have used weights</span>
<a name="l1566"><span class="linenum">1566</span></a>          foreach (<a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> as <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>) {
<a name="l1567"><span class="linenum">1567</span></a>              if (<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> &gt; <a class="var it23222" onMouseOver="hilite(23222)" onMouseOut="lolite()" onClick="logVariable('maxweight')" href="../_variables/maxweight.html">$maxweight</a>) {
<a name="l1568"><span class="linenum">1568</span></a>  <span class="comment">                // If this statement is true then the blocks weight is more than the</span>
<a name="l1569"><span class="linenum">1569</span></a>  <span class="comment">                // current maximum. To ensure that we can get the best block position</span>
<a name="l1570"><span class="linenum">1570</span></a>  <span class="comment">                // we will initialise elements within the usedweights and spareweights</span>
<a name="l1571"><span class="linenum">1571</span></a>  <span class="comment">                // arrays between the blocks weight (which will then be the new max) and</span>
<a name="l1572"><span class="linenum">1572</span></a>  <span class="comment">                // the current max</span>
<a name="l1573"><span class="linenum">1573</span></a>                  <a class="var it23225" onMouseOver="hilite(23225)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a> = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a>;
<a name="l1574"><span class="linenum">1574</span></a>                  while (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it23225" onMouseOver="hilite(23225)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>, <a class="var it9928" onMouseOver="hilite(9928)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>)) {
<a name="l1575"><span class="linenum">1575</span></a>                      <a class="var it9928" onMouseOver="hilite(9928)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it23225" onMouseOver="hilite(23225)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>] = array();
<a name="l1576"><span class="linenum">1576</span></a>                      <a class="var it23224" onMouseOver="hilite(23224)" onMouseOut="lolite()" onClick="logVariable('spareweights')" href="../_variables/spareweights.html">$spareweights</a>[<a class="var it23225" onMouseOver="hilite(23225)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>] = <a class="var it23225" onMouseOver="hilite(23225)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>;
<a name="l1577"><span class="linenum">1577</span></a>                      <a class="var it23225" onMouseOver="hilite(23225)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>--;
<a name="l1578"><span class="linenum">1578</span></a>                  }
<a name="l1579"><span class="linenum">1579</span></a>                  <a class="var it23222" onMouseOver="hilite(23222)" onMouseOut="lolite()" onClick="logVariable('maxweight')" href="../_variables/maxweight.html">$maxweight</a> = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a>;
<a name="l1580"><span class="linenum">1580</span></a>              } else if (<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> &lt; <a class="var it23223" onMouseOver="hilite(23223)" onMouseOut="lolite()" onClick="logVariable('minweight')" href="../_variables/minweight.html">$minweight</a>) {
<a name="l1581"><span class="linenum">1581</span></a>  <span class="comment">                // As above except this time the blocks weight is LESS than the</span>
<a name="l1582"><span class="linenum">1582</span></a>  <span class="comment">                // the current minimum, so we will initialise the array from the</span>
<a name="l1583"><span class="linenum">1583</span></a>  <span class="comment">                // blocks weight (new minimum) to the current minimum</span>
<a name="l1584"><span class="linenum">1584</span></a>                  <a class="var it23225" onMouseOver="hilite(23225)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a> = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a>;
<a name="l1585"><span class="linenum">1585</span></a>                  while (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it23225" onMouseOver="hilite(23225)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>, <a class="var it9928" onMouseOver="hilite(9928)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>)) {
<a name="l1586"><span class="linenum">1586</span></a>                      <a class="var it9928" onMouseOver="hilite(9928)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it23225" onMouseOver="hilite(23225)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>] = array();
<a name="l1587"><span class="linenum">1587</span></a>                      <a class="var it23224" onMouseOver="hilite(23224)" onMouseOut="lolite()" onClick="logVariable('spareweights')" href="../_variables/spareweights.html">$spareweights</a>[<a class="var it23225" onMouseOver="hilite(23225)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>] = <a class="var it23225" onMouseOver="hilite(23225)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>;
<a name="l1588"><span class="linenum">1588</span></a>                      <a class="var it23225" onMouseOver="hilite(23225)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>++;
<a name="l1589"><span class="linenum">1589</span></a>                  }
<a name="l1590"><span class="linenum">1590</span></a>                  <a class="var it23223" onMouseOver="hilite(23223)" onMouseOut="lolite()" onClick="logVariable('minweight')" href="../_variables/minweight.html">$minweight</a> = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a>;
<a name="l1591"><span class="linenum">1591</span></a>              }
<a name="l1592"><span class="linenum">1592</span></a>              if (<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('id')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id) {
<a name="l1593"><span class="linenum">1593</span></a>                  unset(<a class="var it23224" onMouseOver="hilite(23224)" onMouseOut="lolite()" onClick="logVariable('spareweights')" href="../_variables/spareweights.html">$spareweights</a>[<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a>]);
<a name="l1594"><span class="linenum">1594</span></a>                  <a class="var it9928" onMouseOver="hilite(9928)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a>][] = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('id')" class="var it44197" onMouseOver="hilite(44197)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1595"><span class="linenum">1595</span></a>              }
<a name="l1596"><span class="linenum">1596</span></a>          }
<a name="l1597"><span class="linenum">1597</span></a>  
<a name="l1598"><span class="linenum">1598</span></a>  <span class="comment">        // First we find the nearest gap in the list of weights.</span>
<a name="l1599"><span class="linenum">1599</span></a>          <a class="var it23226" onMouseOver="hilite(23226)" onMouseOut="lolite()" onClick="logVariable('bestdistance')" href="../_variables/bestdistance.html">$bestdistance</a> = <a class="phpfunction" onClick="logFunction('max')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="phpfunction" onClick="logFunction('abs')" href="../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> - self::MAX_WEIGHT), <a class="phpfunction" onClick="logFunction('abs')" href="../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> + self::MAX_WEIGHT)) + 1;
<a name="l1600"><span class="linenum">1600</span></a>          <a class="var it23227" onMouseOver="hilite(23227)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a> = null;
<a name="l1601"><span class="linenum">1601</span></a>          foreach (<a class="var it23224" onMouseOver="hilite(23224)" onMouseOut="lolite()" onClick="logVariable('spareweights')" href="../_variables/spareweights.html">$spareweights</a> as <a class="var it23228" onMouseOver="hilite(23228)" onMouseOut="lolite()" onClick="logVariable('spareweight')" href="../_variables/spareweight.html">$spareweight</a>) {
<a name="l1602"><span class="linenum">1602</span></a>              if (<a class="phpfunction" onClick="logFunction('abs')" href="../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> - <a class="var it23228" onMouseOver="hilite(23228)" onMouseOut="lolite()" onClick="logVariable('spareweight')" href="../_variables/spareweight.html">$spareweight</a>) &lt; <a class="var it23226" onMouseOver="hilite(23226)" onMouseOut="lolite()" onClick="logVariable('bestdistance')" href="../_variables/bestdistance.html">$bestdistance</a>) {
<a name="l1603"><span class="linenum">1603</span></a>                  <a class="var it23226" onMouseOver="hilite(23226)" onMouseOut="lolite()" onClick="logVariable('bestdistance')" href="../_variables/bestdistance.html">$bestdistance</a> = <a class="phpfunction" onClick="logFunction('abs')" href="../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> - <a class="var it23228" onMouseOver="hilite(23228)" onMouseOut="lolite()" onClick="logVariable('spareweight')" href="../_variables/spareweight.html">$spareweight</a>);
<a name="l1604"><span class="linenum">1604</span></a>                  <a class="var it23227" onMouseOver="hilite(23227)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a> = <a class="var it23228" onMouseOver="hilite(23228)" onMouseOut="lolite()" onClick="logVariable('spareweight')" href="../_variables/spareweight.html">$spareweight</a>;
<a name="l1605"><span class="linenum">1605</span></a>              }
<a name="l1606"><span class="linenum">1606</span></a>          }
<a name="l1607"><span class="linenum">1607</span></a>  
<a name="l1608"><span class="linenum">1608</span></a>  <span class="comment">        // If there is no gap, we have to go outside -self::MAX_WEIGHT .. self::MAX_WEIGHT.</span>
<a name="l1609"><span class="linenum">1609</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it23227" onMouseOver="hilite(23227)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a>)) {
<a name="l1610"><span class="linenum">1610</span></a>              <a class="var it23227" onMouseOver="hilite(23227)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a> = self::MAX_WEIGHT + 1;
<a name="l1611"><span class="linenum">1611</span></a>              while (!empty(<a class="var it9928" onMouseOver="hilite(9928)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it23227" onMouseOver="hilite(23227)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a>])) {
<a name="l1612"><span class="linenum">1612</span></a>                  <a class="var it23227" onMouseOver="hilite(23227)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a>++;
<a name="l1613"><span class="linenum">1613</span></a>              }
<a name="l1614"><span class="linenum">1614</span></a>          }
<a name="l1615"><span class="linenum">1615</span></a>  
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment">        // Now we know the gap we are aiming for, so move all the blocks along.</span>
<a name="l1617"><span class="linenum">1617</span></a>          if (<a class="var it23227" onMouseOver="hilite(23227)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a> &lt; <a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>) {
<a name="l1618"><span class="linenum">1618</span></a>              <a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>(<a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>);
<a name="l1619"><span class="linenum">1619</span></a>              for (<a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> = <a class="var it23227" onMouseOver="hilite(23227)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a> + 1; <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> &lt;= <a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>; <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>++) {
<a name="l1620"><span class="linenum">1620</span></a>                  if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>, <a class="var it9928" onMouseOver="hilite(9928)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>)) {
<a name="l1621"><span class="linenum">1621</span></a>                      foreach (<a class="var it9928" onMouseOver="hilite(9928)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>] as <a class="var it23229" onMouseOver="hilite(23229)" onMouseOut="lolite()" onClick="logVariable('biid')" href="../_variables/biid.html">$biid</a>) {
<a name="l1622"><span class="linenum">1622</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('reposition_block')" href="../_functions/reposition_block.html" onMouseOver="funcPopup(event,'reposition_block')">reposition_block</a>(<a class="var it23229" onMouseOver="hilite(23229)" onMouseOut="lolite()" onClick="logVariable('biid')" href="../_variables/biid.html">$biid</a>, <a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>, <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> - 1);
<a name="l1623"><span class="linenum">1623</span></a>                      }
<a name="l1624"><span class="linenum">1624</span></a>                  }
<a name="l1625"><span class="linenum">1625</span></a>              }
<a name="l1626"><span class="linenum">1626</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('reposition_block')" href="../_functions/reposition_block.html" onMouseOver="funcPopup(event,'reposition_block')">reposition_block</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id, <a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>, <a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>);
<a name="l1627"><span class="linenum">1627</span></a>          } else {
<a name="l1628"><span class="linenum">1628</span></a>              <a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> = <a class="phpfunction" onClick="logFunction('ceil')" href="../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>(<a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>);
<a name="l1629"><span class="linenum">1629</span></a>              for (<a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> = <a class="var it23227" onMouseOver="hilite(23227)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a> - 1; <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> &gt;= <a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>; <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>--) {
<a name="l1630"><span class="linenum">1630</span></a>                  if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>, <a class="var it9928" onMouseOver="hilite(9928)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>)) {
<a name="l1631"><span class="linenum">1631</span></a>                      foreach (<a class="var it9928" onMouseOver="hilite(9928)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>] as <a class="var it23229" onMouseOver="hilite(23229)" onMouseOut="lolite()" onClick="logVariable('biid')" href="../_variables/biid.html">$biid</a>) {
<a name="l1632"><span class="linenum">1632</span></a>                          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('reposition_block')" href="../_functions/reposition_block.html" onMouseOver="funcPopup(event,'reposition_block')">reposition_block</a>(<a class="var it23229" onMouseOver="hilite(23229)" onMouseOut="lolite()" onClick="logVariable('biid')" href="../_variables/biid.html">$biid</a>, <a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>, <a class="var it3278" onMouseOver="hilite(3278)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> + 1);
<a name="l1633"><span class="linenum">1633</span></a>                      }
<a name="l1634"><span class="linenum">1634</span></a>                  }
<a name="l1635"><span class="linenum">1635</span></a>              }
<a name="l1636"><span class="linenum">1636</span></a>              <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('reposition_block')" href="../_functions/reposition_block.html" onMouseOver="funcPopup(event,'reposition_block')">reposition_block</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id, <a class="var it23192" onMouseOver="hilite(23192)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>, <a class="var it23193" onMouseOver="hilite(23193)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>);
<a name="l1637"><span class="linenum">1637</span></a>          }
<a name="l1638"><span class="linenum">1638</span></a>  
<a name="l1639"><span class="linenum">1639</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_moveid');
<a name="l1640"><span class="linenum">1640</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_newregion');
<a name="l1641"><span class="linenum">1641</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_newweight');
<a name="l1642"><span class="linenum">1642</span></a>          return true;
<a name="l1643"><span class="linenum">1643</span></a>      }
<a name="l1644"><span class="linenum">1644</span></a>  
<a name="l1645"><span class="linenum">1645</span></a>      <span class="comment">/**</span>
<a name="l1646"><span class="linenum">1646</span></a>  <span class="comment">     * Turns the display of normal blocks either on or off.</span>
<a name="l1647"><span class="linenum">1647</span></a>  <span class="comment">     *</span>
<a name="l1648"><span class="linenum">1648</span></a>  <span class="comment">     * @param bool $setting</span>
<a name="l1649"><span class="linenum">1649</span></a>  <span class="comment">     */</span>
<a name="l1650"><span class="linenum">1650</span></a>      public function <a class="function" onClick="logFunction('show_only_fake_blocks')" href="../_functions/show_only_fake_blocks.html" onMouseOver="funcPopup(event,'show_only_fake_blocks')">show_only_fake_blocks</a>(<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a> = true) {
<a name="l1651"><span class="linenum">1651</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fakeblocksonly')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../_variables/fakeblocksonly.html">fakeblocksonly</a> = <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a>;
<a name="l1652"><span class="linenum">1652</span></a>      }
<a name="l1653"><span class="linenum">1653</span></a>  }
<a name="l1654"><span class="linenum">1654</span></a>  
<a name="l1655"><span class="linenum">1655</span></a>  <span class="comment">/// Helper functions for working with block classes ============================</span>
<a name="l1656"><span class="linenum">1656</span></a>  
<a name="l1657"><span class="linenum">1657</span></a>  <span class="comment">/**</span>
<a name="l1658"><span class="linenum">1658</span></a>  <span class="comment"> * Call a class method (one that does not require a block instance) on a block class.</span>
<a name="l1659"><span class="linenum">1659</span></a>  <span class="comment"> *</span>
<a name="l1660"><span class="linenum">1660</span></a>  <span class="comment"> * @param string $blockname the name of the block.</span>
<a name="l1661"><span class="linenum">1661</span></a>  <span class="comment"> * @param string $method the method name.</span>
<a name="l1662"><span class="linenum">1662</span></a>  <span class="comment"> * @param array $param parameters to pass to the method.</span>
<a name="l1663"><span class="linenum">1663</span></a>  <span class="comment"> * @return mixed whatever the method returns.</span>
<a name="l1664"><span class="linenum">1664</span></a>  <span class="comment"> */</span>
<a name="l1665"><span class="linenum">1665</span></a>  function <a class="function" onClick="logFunction('block_method_result')" href="../_functions/block_method_result.html" onMouseOver="funcPopup(event,'block_method_result')">block_method_result</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>, <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a> = NULL) {
<a name="l1666"><span class="linenum">1666</span></a>      if(!<a class="function" onClick="logFunction('block_load_class')" href="../_functions/block_load_class.html" onMouseOver="funcPopup(event,'block_load_class')">block_load_class</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>)) {
<a name="l1667"><span class="linenum">1667</span></a>          return NULL;
<a name="l1668"><span class="linenum">1668</span></a>      }
<a name="l1669"><span class="linenum">1669</span></a>      return <a class="phpfunction" onClick="logFunction('call_user_func')" href="../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(array('block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it532" onMouseOver="hilite(532)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>), <a class="var it334" onMouseOver="hilite(334)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>);
<a name="l1670"><span class="linenum">1670</span></a>  }
<a name="l1671"><span class="linenum">1671</span></a>  
<a name="l1672"><span class="linenum">1672</span></a>  <span class="comment">/**</span>
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment"> * Creates a new instance of the specified block class.</span>
<a name="l1674"><span class="linenum">1674</span></a>  <span class="comment"> *</span>
<a name="l1675"><span class="linenum">1675</span></a>  <span class="comment"> * @param string $blockname the name of the block.</span>
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment"> * @param $instance block_instances DB table row (optional).</span>
<a name="l1677"><span class="linenum">1677</span></a>  <span class="comment"> * @param moodle_page $page the page this block is appearing on.</span>
<a name="l1678"><span class="linenum">1678</span></a>  <span class="comment"> * @return block_base the requested block instance.</span>
<a name="l1679"><span class="linenum">1679</span></a>  <span class="comment"> */</span>
<a name="l1680"><span class="linenum">1680</span></a>  function <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> = NULL, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = NULL) {
<a name="l1681"><span class="linenum">1681</span></a>      if(!<a class="function" onClick="logFunction('block_load_class')" href="../_functions/block_load_class.html" onMouseOver="funcPopup(event,'block_load_class')">block_load_class</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>)) {
<a name="l1682"><span class="linenum">1682</span></a>          return false;
<a name="l1683"><span class="linenum">1683</span></a>      }
<a name="l1684"><span class="linenum">1684</span></a>      <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>;
<a name="l1685"><span class="linenum">1685</span></a>      <a class="var it8628" onMouseOver="hilite(8628)" onMouseOut="lolite()" onClick="logVariable('retval')" href="../_variables/retval.html">$retval</a> = new <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>;
<a name="l1686"><span class="linenum">1686</span></a>      if(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> !== NULL) {
<a name="l1687"><span class="linenum">1687</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>)) {
<a name="l1688"><span class="linenum">1688</span></a>              global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l1689"><span class="linenum">1689</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l1690"><span class="linenum">1690</span></a>          }
<a name="l1691"><span class="linenum">1691</span></a>          <a class="var it8628" onMouseOver="hilite(8628)" onMouseOut="lolite()" onClick="logVariable('retval')" href="../_variables/retval.html">$retval</a>-&gt;<a class="function" onClick="logFunction('_load_instance')" href="../_functions/_load_instance.html" onMouseOver="funcPopup(event,'_load_instance')">_load_instance</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>);
<a name="l1692"><span class="linenum">1692</span></a>      }
<a name="l1693"><span class="linenum">1693</span></a>      return <a class="var it8628" onMouseOver="hilite(8628)" onMouseOut="lolite()" onClick="logVariable('retval')" href="../_variables/retval.html">$retval</a>;
<a name="l1694"><span class="linenum">1694</span></a>  }
<a name="l1695"><span class="linenum">1695</span></a>  
<a name="l1696"><span class="linenum">1696</span></a>  <span class="comment">/**</span>
<a name="l1697"><span class="linenum">1697</span></a>  <span class="comment"> * Load the block class for a particular type of block.</span>
<a name="l1698"><span class="linenum">1698</span></a>  <span class="comment"> *</span>
<a name="l1699"><span class="linenum">1699</span></a>  <span class="comment"> * @param string $blockname the name of the block.</span>
<a name="l1700"><span class="linenum">1700</span></a>  <span class="comment"> * @return boolean success or failure.</span>
<a name="l1701"><span class="linenum">1701</span></a>  <span class="comment"> */</span>
<a name="l1702"><span class="linenum">1702</span></a>  function <a class="function" onClick="logFunction('block_load_class')" href="../_functions/block_load_class.html" onMouseOver="funcPopup(event,'block_load_class')">block_load_class</a>(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>) {
<a name="l1703"><span class="linenum">1703</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1704"><span class="linenum">1704</span></a>  
<a name="l1705"><span class="linenum">1705</span></a>      if(empty(<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>)) {
<a name="l1706"><span class="linenum">1706</span></a>          return false;
<a name="l1707"><span class="linenum">1707</span></a>      }
<a name="l1708"><span class="linenum">1708</span></a>  
<a name="l1709"><span class="linenum">1709</span></a>      <a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>;
<a name="l1710"><span class="linenum">1710</span></a>  
<a name="l1711"><span class="linenum">1711</span></a>      if(<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>)) {
<a name="l1712"><span class="linenum">1712</span></a>          return true;
<a name="l1713"><span class="linenum">1713</span></a>      }
<a name="l1714"><span class="linenum">1714</span></a>  
<a name="l1715"><span class="linenum">1715</span></a>      <a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('blockpath')" href="../_variables/blockpath.html">$blockpath</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'/blocks/'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'/block_'.<a class="var it2351" onMouseOver="hilite(2351)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'.php';
<a name="l1716"><span class="linenum">1716</span></a>  
<a name="l1717"><span class="linenum">1717</span></a>      if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('blockpath')" href="../_variables/blockpath.html">$blockpath</a>)) {
<a name="l1718"><span class="linenum">1718</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../blocks/moodleblock.class.php.html">/blocks/moodleblock.class.php</a>');
<a name="l1719"><span class="linenum">1719</span></a>          include_once(<a class="var it23230" onMouseOver="hilite(23230)" onMouseOut="lolite()" onClick="logVariable('blockpath')" href="../_variables/blockpath.html">$blockpath</a>);
<a name="l1720"><span class="linenum">1720</span></a>      }else{
<a name="l1721"><span class="linenum">1721</span></a>  <span class="comment">        //debugging(&quot;$blockname code does not exist in $blockpath&quot;, DEBUG_DEVELOPER);</span>
<a name="l1722"><span class="linenum">1722</span></a>          return false;
<a name="l1723"><span class="linenum">1723</span></a>      }
<a name="l1724"><span class="linenum">1724</span></a>  
<a name="l1725"><span class="linenum">1725</span></a>      return <a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it202" onMouseOver="hilite(202)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>);
<a name="l1726"><span class="linenum">1726</span></a>  }
<a name="l1727"><span class="linenum">1727</span></a>  
<a name="l1728"><span class="linenum">1728</span></a>  <span class="comment">/**</span>
<a name="l1729"><span class="linenum">1729</span></a>  <span class="comment"> * Given a specific page type, return all the page type patterns that might</span>
<a name="l1730"><span class="linenum">1730</span></a>  <span class="comment"> * match it.</span>
<a name="l1731"><span class="linenum">1731</span></a>  <span class="comment"> *</span>
<a name="l1732"><span class="linenum">1732</span></a>  <span class="comment"> * @param string $pagetype for example 'course-view-weeks' or 'mod-quiz-view'.</span>
<a name="l1733"><span class="linenum">1733</span></a>  <span class="comment"> * @return array an array of all the page type patterns that might match this page type.</span>
<a name="l1734"><span class="linenum">1734</span></a>  <span class="comment"> */</span>
<a name="l1735"><span class="linenum">1735</span></a>  function <a class="function" onClick="logFunction('matching_page_type_patterns')" href="../_functions/matching_page_type_patterns.html" onMouseOver="funcPopup(event,'matching_page_type_patterns')">matching_page_type_patterns</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>) {
<a name="l1736"><span class="linenum">1736</span></a>      <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = array(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1737"><span class="linenum">1737</span></a>      <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1738"><span class="linenum">1738</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>) == 3 &amp;&amp; <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[0] == 'mod') {
<a name="l1739"><span class="linenum">1739</span></a>          if (<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[2] == 'view') {
<a name="l1740"><span class="linenum">1740</span></a>              <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>[] = 'mod-*-view';
<a name="l1741"><span class="linenum">1741</span></a>          } else if (<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[2] == 'index') {
<a name="l1742"><span class="linenum">1742</span></a>              <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>[] = 'mod-*-index';
<a name="l1743"><span class="linenum">1743</span></a>          }
<a name="l1744"><span class="linenum">1744</span></a>      }
<a name="l1745"><span class="linenum">1745</span></a>      while (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>) &gt; 0) {
<a name="l1746"><span class="linenum">1746</span></a>          <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>[] = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('-', <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>) . '-*';
<a name="l1747"><span class="linenum">1747</span></a>          <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>);
<a name="l1748"><span class="linenum">1748</span></a>      }
<a name="l1749"><span class="linenum">1749</span></a>      <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>[] = '*';
<a name="l1750"><span class="linenum">1750</span></a>      return <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>;
<a name="l1751"><span class="linenum">1751</span></a>  }
<a name="l1752"><span class="linenum">1752</span></a>  
<a name="l1753"><span class="linenum">1753</span></a>  <span class="comment">/**</span>
<a name="l1754"><span class="linenum">1754</span></a>  <span class="comment"> * Give an specific pattern, return all the page type patterns that would also match it.</span>
<a name="l1755"><span class="linenum">1755</span></a>  <span class="comment"> *</span>
<a name="l1756"><span class="linenum">1756</span></a>  <span class="comment"> * @param  string $pattern the pattern, e.g. 'mod-forum-*' or 'mod-quiz-view'.</span>
<a name="l1757"><span class="linenum">1757</span></a>  <span class="comment"> * @return array of all the page type patterns matching.</span>
<a name="l1758"><span class="linenum">1758</span></a>  <span class="comment"> */</span>
<a name="l1759"><span class="linenum">1759</span></a>  function <a class="function" onClick="logFunction('matching_page_type_patterns_from_pattern')" href="../_functions/matching_page_type_patterns_from_pattern.html" onMouseOver="funcPopup(event,'matching_page_type_patterns_from_pattern')">matching_page_type_patterns_from_pattern</a>(<a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>) {
<a name="l1760"><span class="linenum">1760</span></a>      <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = array(<a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>);
<a name="l1761"><span class="linenum">1761</span></a>      if (<a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a> === '*') {
<a name="l1762"><span class="linenum">1762</span></a>          return <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>;
<a name="l1763"><span class="linenum">1763</span></a>      }
<a name="l1764"><span class="linenum">1764</span></a>  
<a name="l1765"><span class="linenum">1765</span></a>  <span class="comment">    // Only keep the part before the star because we will append -* to all the bits.</span>
<a name="l1766"><span class="linenum">1766</span></a>      <a class="var it23231" onMouseOver="hilite(23231)" onMouseOut="lolite()" onClick="logVariable('star')" href="../_variables/star.html">$star</a> = <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>, '-*');
<a name="l1767"><span class="linenum">1767</span></a>      if (<a class="var it23231" onMouseOver="hilite(23231)" onMouseOut="lolite()" onClick="logVariable('star')" href="../_variables/star.html">$star</a> !== false) {
<a name="l1768"><span class="linenum">1768</span></a>          <a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>, 0, <a class="var it23231" onMouseOver="hilite(23231)" onMouseOut="lolite()" onClick="logVariable('star')" href="../_variables/star.html">$star</a>);
<a name="l1769"><span class="linenum">1769</span></a>      }
<a name="l1770"><span class="linenum">1770</span></a>  
<a name="l1771"><span class="linenum">1771</span></a>      <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>, <a class="function" onClick="logFunction('matching_page_type_patterns')" href="../_functions/matching_page_type_patterns.html" onMouseOver="funcPopup(event,'matching_page_type_patterns')">matching_page_type_patterns</a>(<a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>));
<a name="l1772"><span class="linenum">1772</span></a>      <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>);
<a name="l1773"><span class="linenum">1773</span></a>  
<a name="l1774"><span class="linenum">1774</span></a>      return <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>;
<a name="l1775"><span class="linenum">1775</span></a>  }
<a name="l1776"><span class="linenum">1776</span></a>  
<a name="l1777"><span class="linenum">1777</span></a>  <span class="comment">/**</span>
<a name="l1778"><span class="linenum">1778</span></a>  <span class="comment"> * Given a specific page type, parent context and currect context, return all the page type patterns</span>
<a name="l1779"><span class="linenum">1779</span></a>  <span class="comment"> * that might be used by this block.</span>
<a name="l1780"><span class="linenum">1780</span></a>  <span class="comment"> *</span>
<a name="l1781"><span class="linenum">1781</span></a>  <span class="comment"> * @param string $pagetype for example 'course-view-weeks' or 'mod-quiz-view'.</span>
<a name="l1782"><span class="linenum">1782</span></a>  <span class="comment"> * @param stdClass $parentcontext Block's parent context</span>
<a name="l1783"><span class="linenum">1783</span></a>  <span class="comment"> * @param stdClass $currentcontext Current context of block</span>
<a name="l1784"><span class="linenum">1784</span></a>  <span class="comment"> * @return array an array of all the page type patterns that might match this page type.</span>
<a name="l1785"><span class="linenum">1785</span></a>  <span class="comment"> */</span>
<a name="l1786"><span class="linenum">1786</span></a>  function <a class="function" onClick="logFunction('generate_page_type_patterns')" href="../_functions/generate_page_type_patterns.html" onMouseOver="funcPopup(event,'generate_page_type_patterns')">generate_page_type_patterns</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = null, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a> = null) {
<a name="l1787"><span class="linenum">1787</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>; <span class="comment">// Required for includes bellow.</span>
<a name="l1788"><span class="linenum">1788</span></a>  
<a name="l1789"><span class="linenum">1789</span></a>      <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1790"><span class="linenum">1790</span></a>  
<a name="l1791"><span class="linenum">1791</span></a>      <a class="var it23232" onMouseOver="hilite(23232)" onMouseOut="lolite()" onClick="logVariable('core')" href="../_variables/core.html">$core</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_core_subsystems')" href="../_functions/get_core_subsystems.html" onMouseOver="funcPopup(event,'get_core_subsystems')">get_core_subsystems</a>();
<a name="l1792"><span class="linenum">1792</span></a>      <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_types')" href="../_functions/get_plugin_types.html" onMouseOver="funcPopup(event,'get_plugin_types')">get_plugin_types</a>();
<a name="l1793"><span class="linenum">1793</span></a>  
<a name="l1794"><span class="linenum">1794</span></a>  <span class="comment">    //progressively strip pieces off the page type looking for a match</span>
<a name="l1795"><span class="linenum">1795</span></a>      <a class="var it470" onMouseOver="hilite(470)" onMouseOut="lolite()" onClick="logVariable('componentarray')" href="../_variables/componentarray.html">$componentarray</a> = null;
<a name="l1796"><span class="linenum">1796</span></a>      for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>); <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &gt; 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>--) {
<a name="l1797"><span class="linenum">1797</span></a>          <a class="var it23233" onMouseOver="hilite(23233)" onMouseOut="lolite()" onClick="logVariable('possiblecomponentarray')" href="../_variables/possiblecomponentarray.html">$possiblecomponentarray</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>, 0, <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>);
<a name="l1798"><span class="linenum">1798</span></a>          <a class="var it23234" onMouseOver="hilite(23234)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('', <a class="var it23233" onMouseOver="hilite(23233)" onMouseOut="lolite()" onClick="logVariable('possiblecomponentarray')" href="../_variables/possiblecomponentarray.html">$possiblecomponentarray</a>);
<a name="l1799"><span class="linenum">1799</span></a>  
<a name="l1800"><span class="linenum">1800</span></a>  <span class="comment">        // Check to see if the component is a core component</span>
<a name="l1801"><span class="linenum">1801</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it23234" onMouseOver="hilite(23234)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>, <a class="var it23232" onMouseOver="hilite(23232)" onMouseOut="lolite()" onClick="logVariable('core')" href="../_variables/core.html">$core</a>) &amp;&amp; !empty(<a class="var it23232" onMouseOver="hilite(23232)" onMouseOut="lolite()" onClick="logVariable('core')" href="../_variables/core.html">$core</a>[<a class="var it23234" onMouseOver="hilite(23234)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>])) {
<a name="l1802"><span class="linenum">1802</span></a>              <a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a> = <a class="var it23232" onMouseOver="hilite(23232)" onMouseOut="lolite()" onClick="logVariable('core')" href="../_variables/core.html">$core</a>[<a class="var it23234" onMouseOver="hilite(23234)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>].'/lib.php';
<a name="l1803"><span class="linenum">1803</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>)) {
<a name="l1804"><span class="linenum">1804</span></a>                  require_once(<a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>);
<a name="l1805"><span class="linenum">1805</span></a>                  <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it23234" onMouseOver="hilite(23234)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>.'_page_type_list';
<a name="l1806"><span class="linenum">1806</span></a>                  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)) {
<a name="l1807"><span class="linenum">1807</span></a>                      if (<a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>)) {
<a name="l1808"><span class="linenum">1808</span></a>                          break;
<a name="l1809"><span class="linenum">1809</span></a>                      }
<a name="l1810"><span class="linenum">1810</span></a>                  }
<a name="l1811"><span class="linenum">1811</span></a>              }
<a name="l1812"><span class="linenum">1812</span></a>          }
<a name="l1813"><span class="linenum">1813</span></a>  
<a name="l1814"><span class="linenum">1814</span></a>  <span class="comment">        //check the plugin directory and look for a callback</span>
<a name="l1815"><span class="linenum">1815</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it23234" onMouseOver="hilite(23234)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>, <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>) &amp;&amp; !empty(<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>[<a class="var it23234" onMouseOver="hilite(23234)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>])) {
<a name="l1816"><span class="linenum">1816</span></a>  
<a name="l1817"><span class="linenum">1817</span></a>  <span class="comment">            //We've found a plugin type. Look for a plugin name by getting the next section of page type</span>
<a name="l1818"><span class="linenum">1818</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>) &gt; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>) {
<a name="l1819"><span class="linenum">1819</span></a>                  <a class="var it2767" onMouseOver="hilite(2767)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a> = <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>];
<a name="l1820"><span class="linenum">1820</span></a>                  <a class="var it6532" onMouseOver="hilite(6532)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../_variables/directory.html">$directory</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_directory')" href="../_functions/get_plugin_directory.html" onMouseOver="funcPopup(event,'get_plugin_directory')">get_plugin_directory</a>(<a class="var it23234" onMouseOver="hilite(23234)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>, <a class="var it2767" onMouseOver="hilite(2767)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>);
<a name="l1821"><span class="linenum">1821</span></a>                  if (!empty(<a class="var it6532" onMouseOver="hilite(6532)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../_variables/directory.html">$directory</a>)){
<a name="l1822"><span class="linenum">1822</span></a>                      <a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a> = <a class="var it6532" onMouseOver="hilite(6532)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../_variables/directory.html">$directory</a>.'/lib.php';
<a name="l1823"><span class="linenum">1823</span></a>                      if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>)) {
<a name="l1824"><span class="linenum">1824</span></a>                          require_once(<a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>);
<a name="l1825"><span class="linenum">1825</span></a>                          <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it23234" onMouseOver="hilite(23234)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>.'_'.<a class="var it2767" onMouseOver="hilite(2767)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>.'_page_type_list';
<a name="l1826"><span class="linenum">1826</span></a>                          if (!<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)) {
<a name="l1827"><span class="linenum">1827</span></a>                              <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it2767" onMouseOver="hilite(2767)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>.'_page_type_list';
<a name="l1828"><span class="linenum">1828</span></a>                          }
<a name="l1829"><span class="linenum">1829</span></a>                          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)) {
<a name="l1830"><span class="linenum">1830</span></a>                              if (<a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>)) {
<a name="l1831"><span class="linenum">1831</span></a>                                  break;
<a name="l1832"><span class="linenum">1832</span></a>                              }
<a name="l1833"><span class="linenum">1833</span></a>                          }
<a name="l1834"><span class="linenum">1834</span></a>                      }
<a name="l1835"><span class="linenum">1835</span></a>                  }
<a name="l1836"><span class="linenum">1836</span></a>              }
<a name="l1837"><span class="linenum">1837</span></a>  
<a name="l1838"><span class="linenum">1838</span></a>  <span class="comment">            //we'll only get to here if we still don't have any patterns</span>
<a name="l1839"><span class="linenum">1839</span></a>  <span class="comment">            //the plugin type may have a callback</span>
<a name="l1840"><span class="linenum">1840</span></a>              <a class="var it6532" onMouseOver="hilite(6532)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../_variables/directory.html">$directory</a> = <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>[<a class="var it23234" onMouseOver="hilite(23234)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>];
<a name="l1841"><span class="linenum">1841</span></a>              <a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a> = <a class="var it6532" onMouseOver="hilite(6532)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../_variables/directory.html">$directory</a>.'/lib.php';
<a name="l1842"><span class="linenum">1842</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>)) {
<a name="l1843"><span class="linenum">1843</span></a>                  require_once(<a class="var it5388" onMouseOver="hilite(5388)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>);
<a name="l1844"><span class="linenum">1844</span></a>                  <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it23234" onMouseOver="hilite(23234)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>.'_page_type_list';
<a name="l1845"><span class="linenum">1845</span></a>                  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)) {
<a name="l1846"><span class="linenum">1846</span></a>                      if (<a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = <a class="var it307" onMouseOver="hilite(307)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>)) {
<a name="l1847"><span class="linenum">1847</span></a>                          break;
<a name="l1848"><span class="linenum">1848</span></a>                      }
<a name="l1849"><span class="linenum">1849</span></a>                  }
<a name="l1850"><span class="linenum">1850</span></a>              }
<a name="l1851"><span class="linenum">1851</span></a>          }
<a name="l1852"><span class="linenum">1852</span></a>      }
<a name="l1853"><span class="linenum">1853</span></a>  
<a name="l1854"><span class="linenum">1854</span></a>      if (empty(<a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>)) {
<a name="l1855"><span class="linenum">1855</span></a>          <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = <a class="function" onClick="logFunction('default_page_type_list')" href="../_functions/default_page_type_list.html" onMouseOver="funcPopup(event,'default_page_type_list')">default_page_type_list</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>);
<a name="l1856"><span class="linenum">1856</span></a>      }
<a name="l1857"><span class="linenum">1857</span></a>  
<a name="l1858"><span class="linenum">1858</span></a>  <span class="comment">    // Ensure that the * pattern is always available if editing block 'at distance', so</span>
<a name="l1859"><span class="linenum">1859</span></a>  <span class="comment">    // we always can 'bring back' it to the original context. MDL-30340</span>
<a name="l1860"><span class="linenum">1860</span></a>      if ((!isset(<a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>) or !isset(<a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>) or <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>-&gt;<a onClick="logVariable('id')" class="var it44219" onMouseOver="hilite(44219)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('id')" class="var it42919" onMouseOver="hilite(42919)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) &amp;&amp; !isset(<a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>['*'])) {
<a name="l1861"><span class="linenum">1861</span></a>  <span class="comment">        // TODO: We could change the string here, showing its 'bring back' meaning</span>
<a name="l1862"><span class="linenum">1862</span></a>          <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>['*'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-x', 'pagetype');
<a name="l1863"><span class="linenum">1863</span></a>      }
<a name="l1864"><span class="linenum">1864</span></a>  
<a name="l1865"><span class="linenum">1865</span></a>      return <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>;
<a name="l1866"><span class="linenum">1866</span></a>  }
<a name="l1867"><span class="linenum">1867</span></a>  
<a name="l1868"><span class="linenum">1868</span></a>  <span class="comment">/**</span>
<a name="l1869"><span class="linenum">1869</span></a>  <span class="comment"> * Generates a default page type list when a more appropriate callback cannot be decided upon.</span>
<a name="l1870"><span class="linenum">1870</span></a>  <span class="comment"> *</span>
<a name="l1871"><span class="linenum">1871</span></a>  <span class="comment"> * @param string $pagetype</span>
<a name="l1872"><span class="linenum">1872</span></a>  <span class="comment"> * @param stdClass $parentcontext</span>
<a name="l1873"><span class="linenum">1873</span></a>  <span class="comment"> * @param stdClass $currentcontext</span>
<a name="l1874"><span class="linenum">1874</span></a>  <span class="comment"> * @return array</span>
<a name="l1875"><span class="linenum">1875</span></a>  <span class="comment"> */</span>
<a name="l1876"><span class="linenum">1876</span></a>  function <a class="function" onClick="logFunction('default_page_type_list')" href="../_functions/default_page_type_list.html" onMouseOver="funcPopup(event,'default_page_type_list')">default_page_type_list</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = null, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a> = null) {
<a name="l1877"><span class="linenum">1877</span></a>  <span class="comment">    // Generate page type patterns based on current page type if</span>
<a name="l1878"><span class="linenum">1878</span></a>  <span class="comment">    // callbacks haven't been defined</span>
<a name="l1879"><span class="linenum">1879</span></a>      <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = array(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a> =&gt; <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1880"><span class="linenum">1880</span></a>      <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1881"><span class="linenum">1881</span></a>      while (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>) &gt; 0) {
<a name="l1882"><span class="linenum">1882</span></a>          <a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('-', <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>) . '-*';
<a name="l1883"><span class="linenum">1883</span></a>          <a class="var it23235" onMouseOver="hilite(23235)" onMouseOut="lolite()" onClick="logVariable('pagetypestringname')" href="../_variables/pagetypestringname.html">$pagetypestringname</a> = 'page-'.<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('*', 'x', <a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>);
<a name="l1884"><span class="linenum">1884</span></a>  <span class="comment">        // guessing page type description</span>
<a name="l1885"><span class="linenum">1885</span></a>          if (<a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>(<a class="var it23235" onMouseOver="hilite(23235)" onMouseOut="lolite()" onClick="logVariable('pagetypestringname')" href="../_variables/pagetypestringname.html">$pagetypestringname</a>, 'pagetype')) {
<a name="l1886"><span class="linenum">1886</span></a>              <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>[<a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it23235" onMouseOver="hilite(23235)" onMouseOut="lolite()" onClick="logVariable('pagetypestringname')" href="../_variables/pagetypestringname.html">$pagetypestringname</a>, 'pagetype');
<a name="l1887"><span class="linenum">1887</span></a>          } else {
<a name="l1888"><span class="linenum">1888</span></a>              <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>[<a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>] = <a class="var it1833" onMouseOver="hilite(1833)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>;
<a name="l1889"><span class="linenum">1889</span></a>          }
<a name="l1890"><span class="linenum">1890</span></a>          <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>);
<a name="l1891"><span class="linenum">1891</span></a>      }
<a name="l1892"><span class="linenum">1892</span></a>      <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>['*'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-x', 'pagetype');
<a name="l1893"><span class="linenum">1893</span></a>      return <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>;
<a name="l1894"><span class="linenum">1894</span></a>  }
<a name="l1895"><span class="linenum">1895</span></a>  
<a name="l1896"><span class="linenum">1896</span></a>  <span class="comment">/**</span>
<a name="l1897"><span class="linenum">1897</span></a>  <span class="comment"> * Generates the page type list for the my moodle page</span>
<a name="l1898"><span class="linenum">1898</span></a>  <span class="comment"> *</span>
<a name="l1899"><span class="linenum">1899</span></a>  <span class="comment"> * @param string $pagetype</span>
<a name="l1900"><span class="linenum">1900</span></a>  <span class="comment"> * @param stdClass $parentcontext</span>
<a name="l1901"><span class="linenum">1901</span></a>  <span class="comment"> * @param stdClass $currentcontext</span>
<a name="l1902"><span class="linenum">1902</span></a>  <span class="comment"> * @return array</span>
<a name="l1903"><span class="linenum">1903</span></a>  <span class="comment"> */</span>
<a name="l1904"><span class="linenum">1904</span></a>  function <a class="function" onClick="logFunction('my_page_type_list')" href="../_functions/my_page_type_list.html" onMouseOver="funcPopup(event,'my_page_type_list')">my_page_type_list</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = null, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a> = null) {
<a name="l1905"><span class="linenum">1905</span></a>      return array('my-index' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-my-index', 'pagetype'));
<a name="l1906"><span class="linenum">1906</span></a>  }
<a name="l1907"><span class="linenum">1907</span></a>  
<a name="l1908"><span class="linenum">1908</span></a>  <span class="comment">/**</span>
<a name="l1909"><span class="linenum">1909</span></a>  <span class="comment"> * Generates the page type list for a module by either locating and using the modules callback</span>
<a name="l1910"><span class="linenum">1910</span></a>  <span class="comment"> * or by generating a default list.</span>
<a name="l1911"><span class="linenum">1911</span></a>  <span class="comment"> *</span>
<a name="l1912"><span class="linenum">1912</span></a>  <span class="comment"> * @param string $pagetype</span>
<a name="l1913"><span class="linenum">1913</span></a>  <span class="comment"> * @param stdClass $parentcontext</span>
<a name="l1914"><span class="linenum">1914</span></a>  <span class="comment"> * @param stdClass $currentcontext</span>
<a name="l1915"><span class="linenum">1915</span></a>  <span class="comment"> * @return array</span>
<a name="l1916"><span class="linenum">1916</span></a>  <span class="comment"> */</span>
<a name="l1917"><span class="linenum">1917</span></a>  function <a class="function" onClick="logFunction('mod_page_type_list')" href="../_functions/mod_page_type_list.html" onMouseOver="funcPopup(event,'mod_page_type_list')">mod_page_type_list</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = null, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a> = null) {
<a name="l1918"><span class="linenum">1918</span></a>      <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = plugin_page_type_list(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>);
<a name="l1919"><span class="linenum">1919</span></a>      if (empty(<a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>)) {
<a name="l1920"><span class="linenum">1920</span></a>  <span class="comment">        // if modules don't have callbacks</span>
<a name="l1921"><span class="linenum">1921</span></a>  <span class="comment">        // generate two default page type patterns for modules only</span>
<a name="l1922"><span class="linenum">1922</span></a>          <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1923"><span class="linenum">1923</span></a>          <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = array(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a> =&gt; <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1924"><span class="linenum">1924</span></a>          if (<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[2] == 'view') {
<a name="l1925"><span class="linenum">1925</span></a>              <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>['mod-*-view'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-x-view', 'pagetype');
<a name="l1926"><span class="linenum">1926</span></a>          } else if (<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[2] == 'index') {
<a name="l1927"><span class="linenum">1927</span></a>              <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>['mod-*-index'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-x-index', 'pagetype');
<a name="l1928"><span class="linenum">1928</span></a>          }
<a name="l1929"><span class="linenum">1929</span></a>      }
<a name="l1930"><span class="linenum">1930</span></a>      return <a class="var it13842" onMouseOver="hilite(13842)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>;
<a name="l1931"><span class="linenum">1931</span></a>  }
<a name="l1932"><span class="linenum">1932</span></a>  <span class="comment">/// Functions update the blocks if required by the request parameters ==========</span>
<a name="l1933"><span class="linenum">1933</span></a>  
<a name="l1934"><span class="linenum">1934</span></a>  <span class="comment">/**</span>
<a name="l1935"><span class="linenum">1935</span></a>  <span class="comment"> * Return a {@link block_contents} representing the add a new block UI, if</span>
<a name="l1936"><span class="linenum">1936</span></a>  <span class="comment"> * this user is allowed to see it.</span>
<a name="l1937"><span class="linenum">1937</span></a>  <span class="comment"> *</span>
<a name="l1938"><span class="linenum">1938</span></a>  <span class="comment"> * @return block_contents an appropriate block_contents, or null if the user</span>
<a name="l1939"><span class="linenum">1939</span></a>  <span class="comment"> * cannot add any blocks here.</span>
<a name="l1940"><span class="linenum">1940</span></a>  <span class="comment"> */</span>
<a name="l1941"><span class="linenum">1941</span></a>  function <a class="function" onClick="logFunction('block_add_block_ui')" href="../_functions/block_add_block_ui.html" onMouseOver="funcPopup(event,'block_add_block_ui')">block_add_block_ui</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l1942"><span class="linenum">1942</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1943"><span class="linenum">1943</span></a>      if (!<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>() || !<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l1944"><span class="linenum">1944</span></a>          return null;
<a name="l1945"><span class="linenum">1945</span></a>      }
<a name="l1946"><span class="linenum">1946</span></a>  
<a name="l1947"><span class="linenum">1947</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a> = <span class="keyword">new </span><a class="class" onClick="logClass('block_contents')" href="../_classes/block_contents.html" onMouseOver="classPopup(event,'block_contents')">block_contents</a>();
<a name="l1948"><span class="linenum">1948</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('title')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../_variables/title.html">title</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addblock');
<a name="l1949"><span class="linenum">1949</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('add_class')" href="../_functions/add_class.html" onMouseOver="funcPopup(event,'add_class')">add_class</a>('block_adminblock');
<a name="l1950"><span class="linenum">1950</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../_variables/attributes.html">attributes</a>['data-block'] = 'adminblock';
<a name="l1951"><span class="linenum">1951</span></a>  
<a name="l1952"><span class="linenum">1952</span></a>      <a class="var it23236" onMouseOver="hilite(23236)" onMouseOut="lolite()" onClick="logVariable('missingblocks')" href="../_variables/missingblocks.html">$missingblocks</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('get_addable_blocks')" href="../_functions/get_addable_blocks.html" onMouseOver="funcPopup(event,'get_addable_blocks')">get_addable_blocks</a>();
<a name="l1953"><span class="linenum">1953</span></a>      if (empty(<a class="var it23236" onMouseOver="hilite(23236)" onMouseOut="lolite()" onClick="logVariable('missingblocks')" href="../_variables/missingblocks.html">$missingblocks</a>)) {
<a name="l1954"><span class="linenum">1954</span></a>          <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('content')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../_variables/content.html">content</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('noblockstoaddhere');
<a name="l1955"><span class="linenum">1955</span></a>          return <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>;
<a name="l1956"><span class="linenum">1956</span></a>      }
<a name="l1957"><span class="linenum">1957</span></a>  
<a name="l1958"><span class="linenum">1958</span></a>      <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a> = array();
<a name="l1959"><span class="linenum">1959</span></a>      foreach (<a class="var it23236" onMouseOver="hilite(23236)" onMouseOut="lolite()" onClick="logVariable('missingblocks')" href="../_variables/missingblocks.html">$missingblocks</a> as <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>) {
<a name="l1960"><span class="linenum">1960</span></a>          <a class="var it23196" onMouseOver="hilite(23196)" onMouseOut="lolite()" onClick="logVariable('blockobject')" href="../_variables/blockobject.html">$blockobject</a> = <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l1961"><span class="linenum">1961</span></a>          if (<a class="var it23196" onMouseOver="hilite(23196)" onMouseOut="lolite()" onClick="logVariable('blockobject')" href="../_variables/blockobject.html">$blockobject</a> !== false &amp;&amp; <a class="var it23196" onMouseOver="hilite(23196)" onMouseOut="lolite()" onClick="logVariable('blockobject')" href="../_variables/blockobject.html">$blockobject</a>-&gt;<a class="function" onClick="logFunction('user_can_addto')" href="../_functions/user_can_addto.html" onMouseOver="funcPopup(event,'user_can_addto')">user_can_addto</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>)) {
<a name="l1962"><span class="linenum">1962</span></a>              <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>[<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it42983" onMouseOver="hilite(42983)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="var it23196" onMouseOver="hilite(23196)" onMouseOut="lolite()" onClick="logVariable('blockobject')" href="../_variables/blockobject.html">$blockobject</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>();
<a name="l1963"><span class="linenum">1963</span></a>          }
<a name="l1964"><span class="linenum">1964</span></a>      }
<a name="l1965"><span class="linenum">1965</span></a>      <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="phpfunction" onClick="logFunction('asort')" href="../_functions/asort.html" onMouseOver="phpfuncPopup(event,'asort')">asort</a>(<a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>);
<a name="l1966"><span class="linenum">1966</span></a>  
<a name="l1967"><span class="linenum">1967</span></a>      <a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('url')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/url.html">url</a>, array('sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l1968"><span class="linenum">1968</span></a>      <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = <span class="keyword">new </span><a class="class" onClick="logClass('single_select')" href="../_classes/single_select.html" onMouseOver="classPopup(event,'single_select')">single_select</a>(<a class="var it771" onMouseOver="hilite(771)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>, 'bui_addblock', <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>, null, array(''=&gt;<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('adddots')), 'add_block');
<a name="l1969"><span class="linenum">1969</span></a>      <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>-&gt;<a class="function" onClick="logFunction('set_label')" href="../_functions/set_label.html" onMouseOver="funcPopup(event,'set_label')">set_label</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addblock'), array('class'=&gt;'accesshide'));
<a name="l1970"><span class="linenum">1970</span></a>      <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('content')" class="var it44012" onMouseOver="hilite(44012)" onMouseOut="lolite()" href="../_variables/content.html">content</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('render')" href="../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>);
<a name="l1971"><span class="linenum">1971</span></a>      return <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>;
<a name="l1972"><span class="linenum">1972</span></a>  }
<a name="l1973"><span class="linenum">1973</span></a>  
<a name="l1974"><span class="linenum">1974</span></a>  <span class="comment">/**</span>
<a name="l1975"><span class="linenum">1975</span></a>  <span class="comment"> * Actually delete from the database any blocks that are currently on this page,</span>
<a name="l1976"><span class="linenum">1976</span></a>  <span class="comment"> * but which should not be there according to blocks_name_allowed_in_format.</span>
<a name="l1977"><span class="linenum">1977</span></a>  <span class="comment"> *</span>
<a name="l1978"><span class="linenum">1978</span></a>  <span class="comment"> * @todo Write/Fix this function. Currently returns immediately</span>
<a name="l1979"><span class="linenum">1979</span></a>  <span class="comment"> * @param $course</span>
<a name="l1980"><span class="linenum">1980</span></a>  <span class="comment"> */</span>
<a name="l1981"><span class="linenum">1981</span></a>  function <a class="function" onClick="logFunction('blocks_remove_inappropriate')" href="../_functions/blocks_remove_inappropriate.html" onMouseOver="funcPopup(event,'blocks_remove_inappropriate')">blocks_remove_inappropriate</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1982"><span class="linenum">1982</span></a>  <span class="comment">    // TODO</span>
<a name="l1983"><span class="linenum">1983</span></a>      return;
<a name="l1984"><span class="linenum">1984</span></a>      <span class="comment">/*</span>
<a name="l1985"><span class="linenum">1985</span></a>  <span class="comment">    $blockmanager = blocks_get_by_page($page);</span>
<a name="l1986"><span class="linenum">1986</span></a>  <span class="comment"></span>
<a name="l1987"><span class="linenum">1987</span></a>  <span class="comment">    if (empty($blockmanager)) {</span>
<a name="l1988"><span class="linenum">1988</span></a>  <span class="comment">        return;</span>
<a name="l1989"><span class="linenum">1989</span></a>  <span class="comment">    }</span>
<a name="l1990"><span class="linenum">1990</span></a>  <span class="comment"></span>
<a name="l1991"><span class="linenum">1991</span></a>  <span class="comment">    if (($pageformat = $page-&gt;pagetype) == NULL) {</span>
<a name="l1992"><span class="linenum">1992</span></a>  <span class="comment">        return;</span>
<a name="l1993"><span class="linenum">1993</span></a>  <span class="comment">    }</span>
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment"></span>
<a name="l1995"><span class="linenum">1995</span></a>  <span class="comment">    foreach($blockmanager as $region) {</span>
<a name="l1996"><span class="linenum">1996</span></a>  <span class="comment">        foreach($region as $instance) {</span>
<a name="l1997"><span class="linenum">1997</span></a>  <span class="comment">            $block = blocks_get_record($instance-&gt;blockid);</span>
<a name="l1998"><span class="linenum">1998</span></a>  <span class="comment">            if(!blocks_name_allowed_in_format($block-&gt;name, $pageformat)) {</span>
<a name="l1999"><span class="linenum">1999</span></a>  <span class="comment">               blocks_delete_instance($instance-&gt;instance);</span>
<a name="l2000"><span class="linenum">2000</span></a>  <span class="comment">            }</span>
<a name="l2001"><span class="linenum">2001</span></a>  <span class="comment">        }</span>
<a name="l2002"><span class="linenum">2002</span></a>  <span class="comment">    }*/</span>
<a name="l2003"><span class="linenum">2003</span></a>  }
<a name="l2004"><span class="linenum">2004</span></a>  
<a name="l2005"><span class="linenum">2005</span></a>  <span class="comment">/**</span>
<a name="l2006"><span class="linenum">2006</span></a>  <span class="comment"> * Check that a given name is in a permittable format</span>
<a name="l2007"><span class="linenum">2007</span></a>  <span class="comment"> *</span>
<a name="l2008"><span class="linenum">2008</span></a>  <span class="comment"> * @param string $name</span>
<a name="l2009"><span class="linenum">2009</span></a>  <span class="comment"> * @param string $pageformat</span>
<a name="l2010"><span class="linenum">2010</span></a>  <span class="comment"> * @return bool</span>
<a name="l2011"><span class="linenum">2011</span></a>  <span class="comment"> */</span>
<a name="l2012"><span class="linenum">2012</span></a>  function <a class="function" onClick="logFunction('blocks_name_allowed_in_format')" href="../_functions/blocks_name_allowed_in_format.html" onMouseOver="funcPopup(event,'blocks_name_allowed_in_format')">blocks_name_allowed_in_format</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it23178" onMouseOver="hilite(23178)" onMouseOut="lolite()" onClick="logVariable('pageformat')" href="../_variables/pageformat.html">$pageformat</a>) {
<a name="l2013"><span class="linenum">2013</span></a>      <a class="var it8836" onMouseOver="hilite(8836)" onMouseOut="lolite()" onClick="logVariable('accept')" href="../_variables/accept.html">$accept</a> = NULL;
<a name="l2014"><span class="linenum">2014</span></a>      <a class="var it10256" onMouseOver="hilite(10256)" onMouseOut="lolite()" onClick="logVariable('maxdepth')" href="../_variables/maxdepth.html">$maxdepth</a> = -1;
<a name="l2015"><span class="linenum">2015</span></a>      if (!<a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a> = <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>)) {
<a name="l2016"><span class="linenum">2016</span></a>          return false;
<a name="l2017"><span class="linenum">2017</span></a>      }
<a name="l2018"><span class="linenum">2018</span></a>  
<a name="l2019"><span class="linenum">2019</span></a>      <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a> = <a class="var it15438" onMouseOver="hilite(15438)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a class="function" onClick="logFunction('applicable_formats')" href="../_functions/applicable_formats.html" onMouseOver="funcPopup(event,'applicable_formats')">applicable_formats</a>();
<a name="l2020"><span class="linenum">2020</span></a>      if (!<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>) {
<a name="l2021"><span class="linenum">2021</span></a>          <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a> = array();
<a name="l2022"><span class="linenum">2022</span></a>      }
<a name="l2023"><span class="linenum">2023</span></a>      foreach (<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a> as <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> =&gt; <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>) {
<a name="l2024"><span class="linenum">2024</span></a>          <a class="var it23237" onMouseOver="hilite(23237)" onMouseOut="lolite()" onClick="logVariable('formatregex')" href="../_variables/formatregex.html">$formatregex</a> = '/^'.<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('*', '[^-]*', <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>).'.*$/';
<a name="l2025"><span class="linenum">2025</span></a>          <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = <a class="phpfunction" onClick="logFunction('substr_count')" href="../_functions/substr_count.html" onMouseOver="phpfuncPopup(event,'substr_count')">substr_count</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>, '-');
<a name="l2026"><span class="linenum">2026</span></a>          if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(<a class="var it23237" onMouseOver="hilite(23237)" onMouseOut="lolite()" onClick="logVariable('formatregex')" href="../_variables/formatregex.html">$formatregex</a>, <a class="var it23178" onMouseOver="hilite(23178)" onMouseOut="lolite()" onClick="logVariable('pageformat')" href="../_variables/pageformat.html">$pageformat</a>) &amp;&amp; <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> &gt; <a class="var it10256" onMouseOver="hilite(10256)" onMouseOut="lolite()" onClick="logVariable('maxdepth')" href="../_variables/maxdepth.html">$maxdepth</a>) {
<a name="l2027"><span class="linenum">2027</span></a>              <a class="var it10256" onMouseOver="hilite(10256)" onMouseOut="lolite()" onClick="logVariable('maxdepth')" href="../_variables/maxdepth.html">$maxdepth</a> = <a class="var it1466" onMouseOver="hilite(1466)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>;
<a name="l2028"><span class="linenum">2028</span></a>              <a class="var it8836" onMouseOver="hilite(8836)" onMouseOut="lolite()" onClick="logVariable('accept')" href="../_variables/accept.html">$accept</a> = <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>;
<a name="l2029"><span class="linenum">2029</span></a>          }
<a name="l2030"><span class="linenum">2030</span></a>      }
<a name="l2031"><span class="linenum">2031</span></a>      if (<a class="var it8836" onMouseOver="hilite(8836)" onMouseOut="lolite()" onClick="logVariable('accept')" href="../_variables/accept.html">$accept</a> === NULL) {
<a name="l2032"><span class="linenum">2032</span></a>          <a class="var it8836" onMouseOver="hilite(8836)" onMouseOut="lolite()" onClick="logVariable('accept')" href="../_variables/accept.html">$accept</a> = !empty(<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>['all']);
<a name="l2033"><span class="linenum">2033</span></a>      }
<a name="l2034"><span class="linenum">2034</span></a>      return <a class="var it8836" onMouseOver="hilite(8836)" onMouseOut="lolite()" onClick="logVariable('accept')" href="../_variables/accept.html">$accept</a>;
<a name="l2035"><span class="linenum">2035</span></a>  }
<a name="l2036"><span class="linenum">2036</span></a>  
<a name="l2037"><span class="linenum">2037</span></a>  <span class="comment">/**</span>
<a name="l2038"><span class="linenum">2038</span></a>  <span class="comment"> * Delete a block, and associated data.</span>
<a name="l2039"><span class="linenum">2039</span></a>  <span class="comment"> *</span>
<a name="l2040"><span class="linenum">2040</span></a>  <span class="comment"> * @param object $instance a row from the block_instances table</span>
<a name="l2041"><span class="linenum">2041</span></a>  <span class="comment"> * @param bool $nolongerused legacy parameter. Not used, but kept for backwards compatibility.</span>
<a name="l2042"><span class="linenum">2042</span></a>  <span class="comment"> * @param bool $skipblockstables for internal use only. Makes @see blocks_delete_all_for_context() more efficient.</span>
<a name="l2043"><span class="linenum">2043</span></a>  <span class="comment"> */</span>
<a name="l2044"><span class="linenum">2044</span></a>  function <a class="function" onClick="logFunction('blocks_delete_instance')" href="../_functions/blocks_delete_instance.html" onMouseOver="funcPopup(event,'blocks_delete_instance')">blocks_delete_instance</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>, <a class="var it12937" onMouseOver="hilite(12937)" onMouseOut="lolite()" onClick="logVariable('nolongerused')" href="../_variables/nolongerused.html">$nolongerused</a> = false, <a class="var it23238" onMouseOver="hilite(23238)" onMouseOut="lolite()" onClick="logVariable('skipblockstables')" href="../_variables/skipblockstables.html">$skipblockstables</a> = false) {
<a name="l2045"><span class="linenum">2045</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2046"><span class="linenum">2046</span></a>  
<a name="l2047"><span class="linenum">2047</span></a>  <span class="comment">    // Allow plugins to use this block before we completely delete it.</span>
<a name="l2048"><span class="linenum">2048</span></a>      if (<a class="var it10064" onMouseOver="hilite(10064)" onMouseOut="lolite()" onClick="logVariable('pluginsfunction')" href="../_variables/pluginsfunction.html">$pluginsfunction</a> = <a class="function" onClick="logFunction('get_plugins_with_function')" href="../_functions/get_plugins_with_function.html" onMouseOver="funcPopup(event,'get_plugins_with_function')">get_plugins_with_function</a>('pre_block_delete')) {
<a name="l2049"><span class="linenum">2049</span></a>          foreach (<a class="var it10064" onMouseOver="hilite(10064)" onMouseOut="lolite()" onClick="logVariable('pluginsfunction')" href="../_variables/pluginsfunction.html">$pluginsfunction</a> as <a class="var it2536" onMouseOver="hilite(2536)" onMouseOut="lolite()" onClick="logVariable('plugintype')" href="../_variables/plugintype.html">$plugintype</a> =&gt; <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>) {
<a name="l2050"><span class="linenum">2050</span></a>              foreach (<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a> as <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('pluginfunction')" href="../_variables/pluginfunction.html">$pluginfunction</a>) {
<a name="l2051"><span class="linenum">2051</span></a>                  <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('pluginfunction')" href="../_variables/pluginfunction.html">$pluginfunction</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>);
<a name="l2052"><span class="linenum">2052</span></a>              }
<a name="l2053"><span class="linenum">2053</span></a>          }
<a name="l2054"><span class="linenum">2054</span></a>      }
<a name="l2055"><span class="linenum">2055</span></a>  
<a name="l2056"><span class="linenum">2056</span></a>      if (<a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('blockname')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/blockname.html">blockname</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>)) {
<a name="l2057"><span class="linenum">2057</span></a>          <a class="var it921" onMouseOver="hilite(921)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('instance_delete')" href="../_functions/instance_delete.html" onMouseOver="funcPopup(event,'instance_delete')">instance_delete</a>();
<a name="l2058"><span class="linenum">2058</span></a>      }
<a name="l2059"><span class="linenum">2059</span></a>      <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('delete_instance')" href="../_functions/delete_instance.html" onMouseOver="funcPopup(event,'delete_instance')">delete_instance</a>(<a class="constant" onClick="logConstant('CONTEXT_BLOCK')" href="../_constants/CONTEXT_BLOCK.html" onMouseOver="constPopup(event,'CONTEXT_BLOCK')">CONTEXT_BLOCK</a>, <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2060"><span class="linenum">2060</span></a>  
<a name="l2061"><span class="linenum">2061</span></a>      if (!<a class="var it23238" onMouseOver="hilite(23238)" onMouseOut="lolite()" onClick="logVariable('skipblockstables')" href="../_variables/skipblockstables.html">$skipblockstables</a>) {
<a name="l2062"><span class="linenum">2062</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('block_positions', array('blockinstanceid' =&gt; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2063"><span class="linenum">2063</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('block_instances', array('id' =&gt; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2064"><span class="linenum">2064</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('user_preferences', 'name', array('block'.<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/id.html">id</a>.'hidden','docked_block_instance_'.<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2065"><span class="linenum">2065</span></a>      }
<a name="l2066"><span class="linenum">2066</span></a>  }
<a name="l2067"><span class="linenum">2067</span></a>  
<a name="l2068"><span class="linenum">2068</span></a>  <span class="comment">/**</span>
<a name="l2069"><span class="linenum">2069</span></a>  <span class="comment"> * Delete multiple blocks at once.</span>
<a name="l2070"><span class="linenum">2070</span></a>  <span class="comment"> *</span>
<a name="l2071"><span class="linenum">2071</span></a>  <span class="comment"> * @param array $instanceids A list of block instance ID.</span>
<a name="l2072"><span class="linenum">2072</span></a>  <span class="comment"> */</span>
<a name="l2073"><span class="linenum">2073</span></a>  function <a class="function" onClick="logFunction('blocks_delete_instances')" href="../_functions/blocks_delete_instances.html" onMouseOver="funcPopup(event,'blocks_delete_instances')">blocks_delete_instances</a>(<a class="var it3794" onMouseOver="hilite(3794)" onMouseOut="lolite()" onClick="logVariable('instanceids')" href="../_variables/instanceids.html">$instanceids</a>) {
<a name="l2074"><span class="linenum">2074</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2075"><span class="linenum">2075</span></a>  
<a name="l2076"><span class="linenum">2076</span></a>      <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a> = 1000;
<a name="l2077"><span class="linenum">2077</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it3794" onMouseOver="hilite(3794)" onMouseOut="lolite()" onClick="logVariable('instanceids')" href="../_variables/instanceids.html">$instanceids</a>);
<a name="l2078"><span class="linenum">2078</span></a>      <a class="var it1931" onMouseOver="hilite(1931)" onMouseOut="lolite()" onClick="logVariable('chunks')" href="../_variables/chunks.html">$chunks</a> = [<a class="var it3794" onMouseOver="hilite(3794)" onMouseOut="lolite()" onClick="logVariable('instanceids')" href="../_variables/instanceids.html">$instanceids</a>];
<a name="l2079"><span class="linenum">2079</span></a>      if (<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../_variables/count.html">$count</a> &gt; <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>) {
<a name="l2080"><span class="linenum">2080</span></a>          <a class="var it1931" onMouseOver="hilite(1931)" onMouseOut="lolite()" onClick="logVariable('chunks')" href="../_variables/chunks.html">$chunks</a> = <a class="phpfunction" onClick="logFunction('array_chunk')" href="../_functions/array_chunk.html" onMouseOver="phpfuncPopup(event,'array_chunk')">array_chunk</a>(<a class="var it3794" onMouseOver="hilite(3794)" onMouseOut="lolite()" onClick="logVariable('instanceids')" href="../_variables/instanceids.html">$instanceids</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../_variables/limit.html">$limit</a>);
<a name="l2081"><span class="linenum">2081</span></a>      }
<a name="l2082"><span class="linenum">2082</span></a>  
<a name="l2083"><span class="linenum">2083</span></a>  <span class="comment">    // Perform deletion for each chunk.</span>
<a name="l2084"><span class="linenum">2084</span></a>      foreach (<a class="var it1931" onMouseOver="hilite(1931)" onMouseOut="lolite()" onClick="logVariable('chunks')" href="../_variables/chunks.html">$chunks</a> as <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../_variables/chunk.html">$chunk</a>) {
<a name="l2085"><span class="linenum">2085</span></a>          <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_list')" href="../_functions/get_recordset_list.html" onMouseOver="funcPopup(event,'get_recordset_list')">get_recordset_list</a>('block_instances', 'id', <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../_variables/chunk.html">$chunk</a>);
<a name="l2086"><span class="linenum">2086</span></a>          foreach (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l2087"><span class="linenum">2087</span></a>              <a class="function" onClick="logFunction('blocks_delete_instance')" href="../_functions/blocks_delete_instance.html" onMouseOver="funcPopup(event,'blocks_delete_instance')">blocks_delete_instance</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>, false, true);
<a name="l2088"><span class="linenum">2088</span></a>          }
<a name="l2089"><span class="linenum">2089</span></a>          <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2090"><span class="linenum">2090</span></a>  
<a name="l2091"><span class="linenum">2091</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('block_positions', 'blockinstanceid', <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../_variables/chunk.html">$chunk</a>);
<a name="l2092"><span class="linenum">2092</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('block_instances', 'id', <a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../_variables/chunk.html">$chunk</a>);
<a name="l2093"><span class="linenum">2093</span></a>  
<a name="l2094"><span class="linenum">2094</span></a>          <a class="var it4779" onMouseOver="hilite(4779)" onMouseOut="lolite()" onClick="logVariable('preferences')" href="../_variables/preferences.html">$preferences</a> = array();
<a name="l2095"><span class="linenum">2095</span></a>          foreach (<a class="var it1932" onMouseOver="hilite(1932)" onMouseOut="lolite()" onClick="logVariable('chunk')" href="../_variables/chunk.html">$chunk</a> as <a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>) {
<a name="l2096"><span class="linenum">2096</span></a>              <a class="var it4779" onMouseOver="hilite(4779)" onMouseOut="lolite()" onClick="logVariable('preferences')" href="../_variables/preferences.html">$preferences</a>[] = 'block' . <a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a> . 'hidden';
<a name="l2097"><span class="linenum">2097</span></a>              <a class="var it4779" onMouseOver="hilite(4779)" onMouseOut="lolite()" onClick="logVariable('preferences')" href="../_variables/preferences.html">$preferences</a>[] = 'docked_block_instance_' . <a class="var it1184" onMouseOver="hilite(1184)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>;
<a name="l2098"><span class="linenum">2098</span></a>          }
<a name="l2099"><span class="linenum">2099</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('user_preferences', 'name', <a class="var it4779" onMouseOver="hilite(4779)" onMouseOut="lolite()" onClick="logVariable('preferences')" href="../_variables/preferences.html">$preferences</a>);
<a name="l2100"><span class="linenum">2100</span></a>      }
<a name="l2101"><span class="linenum">2101</span></a>  }
<a name="l2102"><span class="linenum">2102</span></a>  
<a name="l2103"><span class="linenum">2103</span></a>  <span class="comment">/**</span>
<a name="l2104"><span class="linenum">2104</span></a>  <span class="comment"> * Delete all the blocks that belong to a particular context.</span>
<a name="l2105"><span class="linenum">2105</span></a>  <span class="comment"> *</span>
<a name="l2106"><span class="linenum">2106</span></a>  <span class="comment"> * @param int $contextid the context id.</span>
<a name="l2107"><span class="linenum">2107</span></a>  <span class="comment"> */</span>
<a name="l2108"><span class="linenum">2108</span></a>  function <a class="function" onClick="logFunction('blocks_delete_all_for_context')" href="../_functions/blocks_delete_all_for_context.html" onMouseOver="funcPopup(event,'blocks_delete_all_for_context')">blocks_delete_all_for_context</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>) {
<a name="l2109"><span class="linenum">2109</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2110"><span class="linenum">2110</span></a>      <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset')" href="../_functions/get_recordset.html" onMouseOver="funcPopup(event,'get_recordset')">get_recordset</a>('block_instances', array('parentcontextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l2111"><span class="linenum">2111</span></a>      foreach (<a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l2112"><span class="linenum">2112</span></a>          <a class="function" onClick="logFunction('blocks_delete_instance')" href="../_functions/blocks_delete_instance.html" onMouseOver="funcPopup(event,'blocks_delete_instance')">blocks_delete_instance</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>, true);
<a name="l2113"><span class="linenum">2113</span></a>      }
<a name="l2114"><span class="linenum">2114</span></a>      <a class="var it1025" onMouseOver="hilite(1025)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2115"><span class="linenum">2115</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('block_instances', array('parentcontextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l2116"><span class="linenum">2116</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('block_positions', array('contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l2117"><span class="linenum">2117</span></a>  }
<a name="l2118"><span class="linenum">2118</span></a>  
<a name="l2119"><span class="linenum">2119</span></a>  <span class="comment">/**</span>
<a name="l2120"><span class="linenum">2120</span></a>  <span class="comment"> * Set a block to be visible or hidden on a particular page.</span>
<a name="l2121"><span class="linenum">2121</span></a>  <span class="comment"> *</span>
<a name="l2122"><span class="linenum">2122</span></a>  <span class="comment"> * @param object $instance a row from the block_instances, preferably LEFT JOINed with the</span>
<a name="l2123"><span class="linenum">2123</span></a>  <span class="comment"> *      block_positions table as return by block_manager.</span>
<a name="l2124"><span class="linenum">2124</span></a>  <span class="comment"> * @param moodle_page $page the back to set the visibility with respect to.</span>
<a name="l2125"><span class="linenum">2125</span></a>  <span class="comment"> * @param integer $newvisibility 1 for visible, 0 for hidden.</span>
<a name="l2126"><span class="linenum">2126</span></a>  <span class="comment"> */</span>
<a name="l2127"><span class="linenum">2127</span></a>  function <a class="function" onClick="logFunction('blocks_set_visibility')" href="../_functions/blocks_set_visibility.html" onMouseOver="funcPopup(event,'blocks_set_visibility')">blocks_set_visibility</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it23206" onMouseOver="hilite(23206)" onMouseOut="lolite()" onClick="logVariable('newvisibility')" href="../_variables/newvisibility.html">$newvisibility</a>) {
<a name="l2128"><span class="linenum">2128</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2129"><span class="linenum">2129</span></a>      if (!empty(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('blockpositionid')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/blockpositionid.html">blockpositionid</a>)) {
<a name="l2130"><span class="linenum">2130</span></a>  <span class="comment">        // Already have local information on this page.</span>
<a name="l2131"><span class="linenum">2131</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('block_positions', 'visible', <a class="var it23206" onMouseOver="hilite(23206)" onMouseOut="lolite()" onClick="logVariable('newvisibility')" href="../_variables/newvisibility.html">$newvisibility</a>, array('id' =&gt; <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('blockpositionid')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/blockpositionid.html">blockpositionid</a>));
<a name="l2132"><span class="linenum">2132</span></a>          return;
<a name="l2133"><span class="linenum">2133</span></a>      }
<a name="l2134"><span class="linenum">2134</span></a>  
<a name="l2135"><span class="linenum">2135</span></a>  <span class="comment">    // Create a new block_positions record.</span>
<a name="l2136"><span class="linenum">2136</span></a>      <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a> = new stdClass;
<a name="l2137"><span class="linenum">2137</span></a>      <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2138"><span class="linenum">2138</span></a>      <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('contextid')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('context')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id;
<a name="l2139"><span class="linenum">2139</span></a>      <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('pagetype')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('pagetype')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a>;
<a name="l2140"><span class="linenum">2140</span></a>      if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('subpage')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a>) {
<a name="l2141"><span class="linenum">2141</span></a>          <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('subpage')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('subpage')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a>;
<a name="l2142"><span class="linenum">2142</span></a>      }
<a name="l2143"><span class="linenum">2143</span></a>      <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('visible')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = <a class="var it23206" onMouseOver="hilite(23206)" onMouseOut="lolite()" onClick="logVariable('newvisibility')" href="../_variables/newvisibility.html">$newvisibility</a>;
<a name="l2144"><span class="linenum">2144</span></a>      <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('region')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/region.html">region</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>;
<a name="l2145"><span class="linenum">2145</span></a>      <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('weight')" class="var it44215" onMouseOver="hilite(44215)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> = <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('defaultweight')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/defaultweight.html">defaultweight</a>;
<a name="l2146"><span class="linenum">2146</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('block_positions', <a class="var it2746" onMouseOver="hilite(2746)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>);
<a name="l2147"><span class="linenum">2147</span></a>  }
<a name="l2148"><span class="linenum">2148</span></a>  
<a name="l2149"><span class="linenum">2149</span></a>  <span class="comment">/**</span>
<a name="l2150"><span class="linenum">2150</span></a>  <span class="comment"> * Get the block record for a particular blockid - that is, a particular type os block.</span>
<a name="l2151"><span class="linenum">2151</span></a>  <span class="comment"> *</span>
<a name="l2152"><span class="linenum">2152</span></a>  <span class="comment"> * @param $int blockid block type id. If null, an array of all block types is returned.</span>
<a name="l2153"><span class="linenum">2153</span></a>  <span class="comment"> * @param bool $notusedanymore No longer used.</span>
<a name="l2154"><span class="linenum">2154</span></a>  <span class="comment"> * @return array|object row from block table, or all rows.</span>
<a name="l2155"><span class="linenum">2155</span></a>  <span class="comment"> */</span>
<a name="l2156"><span class="linenum">2156</span></a>  function <a class="function" onClick="logFunction('blocks_get_record')" href="../_functions/blocks_get_record.html" onMouseOver="funcPopup(event,'blocks_get_record')">blocks_get_record</a>(<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> = NULL, <a class="var it23239" onMouseOver="hilite(23239)" onMouseOut="lolite()" onClick="logVariable('notusedanymore')" href="../_variables/notusedanymore.html">$notusedanymore</a> = false) {
<a name="l2157"><span class="linenum">2157</span></a>      global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l2158"><span class="linenum">2158</span></a>      <a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('blocks')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('get_installed_blocks')" href="../_functions/get_installed_blocks.html" onMouseOver="funcPopup(event,'get_installed_blocks')">get_installed_blocks</a>();
<a name="l2159"><span class="linenum">2159</span></a>      if (<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> === NULL) {
<a name="l2160"><span class="linenum">2160</span></a>          return <a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>;
<a name="l2161"><span class="linenum">2161</span></a>      } else if (isset(<a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>[<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>])) {
<a name="l2162"><span class="linenum">2162</span></a>          return <a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>[<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>];
<a name="l2163"><span class="linenum">2163</span></a>      } else {
<a name="l2164"><span class="linenum">2164</span></a>          return false;
<a name="l2165"><span class="linenum">2165</span></a>      }
<a name="l2166"><span class="linenum">2166</span></a>  }
<a name="l2167"><span class="linenum">2167</span></a>  
<a name="l2168"><span class="linenum">2168</span></a>  <span class="comment">/**</span>
<a name="l2169"><span class="linenum">2169</span></a>  <span class="comment"> * Find a given block by its blockid within a provide array</span>
<a name="l2170"><span class="linenum">2170</span></a>  <span class="comment"> *</span>
<a name="l2171"><span class="linenum">2171</span></a>  <span class="comment"> * @param int $blockid</span>
<a name="l2172"><span class="linenum">2172</span></a>  <span class="comment"> * @param array $blocksarray</span>
<a name="l2173"><span class="linenum">2173</span></a>  <span class="comment"> * @return bool|object Instance if found else false</span>
<a name="l2174"><span class="linenum">2174</span></a>  <span class="comment"> */</span>
<a name="l2175"><span class="linenum">2175</span></a>  function <a class="function" onClick="logFunction('blocks_find_block')" href="../_functions/blocks_find_block.html" onMouseOver="funcPopup(event,'blocks_find_block')">blocks_find_block</a>(<a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>, <a class="var it23240" onMouseOver="hilite(23240)" onMouseOut="lolite()" onClick="logVariable('blocksarray')" href="../_variables/blocksarray.html">$blocksarray</a>) {
<a name="l2176"><span class="linenum">2176</span></a>      if (empty(<a class="var it23240" onMouseOver="hilite(23240)" onMouseOut="lolite()" onClick="logVariable('blocksarray')" href="../_variables/blocksarray.html">$blocksarray</a>)) {
<a name="l2177"><span class="linenum">2177</span></a>          return false;
<a name="l2178"><span class="linenum">2178</span></a>      }
<a name="l2179"><span class="linenum">2179</span></a>      foreach(<a class="var it23240" onMouseOver="hilite(23240)" onMouseOut="lolite()" onClick="logVariable('blocksarray')" href="../_variables/blocksarray.html">$blocksarray</a> as <a class="var it23241" onMouseOver="hilite(23241)" onMouseOut="lolite()" onClick="logVariable('blockgroup')" href="../_variables/blockgroup.html">$blockgroup</a>) {
<a name="l2180"><span class="linenum">2180</span></a>          if (empty(<a class="var it23241" onMouseOver="hilite(23241)" onMouseOut="lolite()" onClick="logVariable('blockgroup')" href="../_variables/blockgroup.html">$blockgroup</a>)) {
<a name="l2181"><span class="linenum">2181</span></a>              continue;
<a name="l2182"><span class="linenum">2182</span></a>          }
<a name="l2183"><span class="linenum">2183</span></a>          foreach(<a class="var it23241" onMouseOver="hilite(23241)" onMouseOut="lolite()" onClick="logVariable('blockgroup')" href="../_variables/blockgroup.html">$blockgroup</a> as <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l2184"><span class="linenum">2184</span></a>              if(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('blockid')" class="var it43004" onMouseOver="hilite(43004)" onMouseOut="lolite()" href="../_variables/blockid.html">blockid</a> == <a class="var it2350" onMouseOver="hilite(2350)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>) {
<a name="l2185"><span class="linenum">2185</span></a>                  return <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>;
<a name="l2186"><span class="linenum">2186</span></a>              }
<a name="l2187"><span class="linenum">2187</span></a>          }
<a name="l2188"><span class="linenum">2188</span></a>      }
<a name="l2189"><span class="linenum">2189</span></a>      return false;
<a name="l2190"><span class="linenum">2190</span></a>  }
<a name="l2191"><span class="linenum">2191</span></a>  
<a name="l2192"><span class="linenum">2192</span></a>  <span class="comment">// Functions for programatically adding default blocks to pages ================</span>
<a name="l2193"><span class="linenum">2193</span></a>  
<a name="l2194"><span class="linenum">2194</span></a>   <span class="comment">/**</span>
<a name="l2195"><span class="linenum">2195</span></a>  <span class="comment">  * Parse a list of default blocks. See config-dist for a description of the format.</span>
<a name="l2196"><span class="linenum">2196</span></a>  <span class="comment">  *</span>
<a name="l2197"><span class="linenum">2197</span></a>  <span class="comment">  * @param string $blocksstr Determines the starting point that the blocks are added in the region.</span>
<a name="l2198"><span class="linenum">2198</span></a>  <span class="comment">  * @return array the parsed list of default blocks</span>
<a name="l2199"><span class="linenum">2199</span></a>  <span class="comment">  */</span>
<a name="l2200"><span class="linenum">2200</span></a>  function <a class="function" onClick="logFunction('blocks_parse_default_blocks_list')" href="../_functions/blocks_parse_default_blocks_list.html" onMouseOver="funcPopup(event,'blocks_parse_default_blocks_list')">blocks_parse_default_blocks_list</a>(<a class="var it23242" onMouseOver="hilite(23242)" onMouseOut="lolite()" onClick="logVariable('blocksstr')" href="../_variables/blocksstr.html">$blocksstr</a>) {
<a name="l2201"><span class="linenum">2201</span></a>      <a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> = array();
<a name="l2202"><span class="linenum">2202</span></a>      <a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(':', <a class="var it23242" onMouseOver="hilite(23242)" onMouseOut="lolite()" onClick="logVariable('blocksstr')" href="../_variables/blocksstr.html">$blocksstr</a>);
<a name="l2203"><span class="linenum">2203</span></a>      if (!empty(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>)) {
<a name="l2204"><span class="linenum">2204</span></a>          <a class="var it23243" onMouseOver="hilite(23243)" onMouseOut="lolite()" onClick="logVariable('leftbits')" href="../_variables/leftbits.html">$leftbits</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>));
<a name="l2205"><span class="linenum">2205</span></a>          if (<a class="var it23243" onMouseOver="hilite(23243)" onMouseOut="lolite()" onClick="logVariable('leftbits')" href="../_variables/leftbits.html">$leftbits</a> != '') {
<a name="l2206"><span class="linenum">2206</span></a>              <a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>[<a class="constant" onClick="logConstant('BLOCK_POS_LEFT')" href="../_constants/BLOCK_POS_LEFT.html" onMouseOver="constPopup(event,'BLOCK_POS_LEFT')">BLOCK_POS_LEFT</a>] = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it23243" onMouseOver="hilite(23243)" onMouseOut="lolite()" onClick="logVariable('leftbits')" href="../_variables/leftbits.html">$leftbits</a>);
<a name="l2207"><span class="linenum">2207</span></a>          }
<a name="l2208"><span class="linenum">2208</span></a>      }
<a name="l2209"><span class="linenum">2209</span></a>      if (!empty(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>)) {
<a name="l2210"><span class="linenum">2210</span></a>          <a class="var it23244" onMouseOver="hilite(23244)" onMouseOut="lolite()" onClick="logVariable('rightbits')" href="../_variables/rightbits.html">$rightbits</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it1926" onMouseOver="hilite(1926)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>));
<a name="l2211"><span class="linenum">2211</span></a>          if (<a class="var it23244" onMouseOver="hilite(23244)" onMouseOut="lolite()" onClick="logVariable('rightbits')" href="../_variables/rightbits.html">$rightbits</a> != '') {
<a name="l2212"><span class="linenum">2212</span></a>              <a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>[<a class="constant" onClick="logConstant('BLOCK_POS_RIGHT')" href="../_constants/BLOCK_POS_RIGHT.html" onMouseOver="constPopup(event,'BLOCK_POS_RIGHT')">BLOCK_POS_RIGHT</a>] = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it23244" onMouseOver="hilite(23244)" onMouseOut="lolite()" onClick="logVariable('rightbits')" href="../_variables/rightbits.html">$rightbits</a>);
<a name="l2213"><span class="linenum">2213</span></a>          }
<a name="l2214"><span class="linenum">2214</span></a>      }
<a name="l2215"><span class="linenum">2215</span></a>      return <a class="var it3742" onMouseOver="hilite(3742)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>;
<a name="l2216"><span class="linenum">2216</span></a>  }
<a name="l2217"><span class="linenum">2217</span></a>  
<a name="l2218"><span class="linenum">2218</span></a>  <span class="comment">/**</span>
<a name="l2219"><span class="linenum">2219</span></a>  <span class="comment"> * @return array the blocks that should be added to the site course by default.</span>
<a name="l2220"><span class="linenum">2220</span></a>  <span class="comment"> */</span>
<a name="l2221"><span class="linenum">2221</span></a>  function <a class="function" onClick="logFunction('blocks_get_default_site_course_blocks')" href="../_functions/blocks_get_default_site_course_blocks.html" onMouseOver="funcPopup(event,'blocks_get_default_site_course_blocks')">blocks_get_default_site_course_blocks</a>() {
<a name="l2222"><span class="linenum">2222</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2223"><span class="linenum">2223</span></a>  
<a name="l2224"><span class="linenum">2224</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultblocks_site')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/defaultblocks_site.html">defaultblocks_site</a>)) {
<a name="l2225"><span class="linenum">2225</span></a>          return <a class="function" onClick="logFunction('blocks_parse_default_blocks_list')" href="../_functions/blocks_parse_default_blocks_list.html" onMouseOver="funcPopup(event,'blocks_parse_default_blocks_list')">blocks_parse_default_blocks_list</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultblocks_site')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/defaultblocks_site.html">defaultblocks_site</a>);
<a name="l2226"><span class="linenum">2226</span></a>      } else {
<a name="l2227"><span class="linenum">2227</span></a>          return array(
<a name="l2228"><span class="linenum">2228</span></a>              <a class="constant" onClick="logConstant('BLOCK_POS_LEFT')" href="../_constants/BLOCK_POS_LEFT.html" onMouseOver="constPopup(event,'BLOCK_POS_LEFT')">BLOCK_POS_LEFT</a> =&gt; array('site_main_menu'),
<a name="l2229"><span class="linenum">2229</span></a>              <a class="constant" onClick="logConstant('BLOCK_POS_RIGHT')" href="../_constants/BLOCK_POS_RIGHT.html" onMouseOver="constPopup(event,'BLOCK_POS_RIGHT')">BLOCK_POS_RIGHT</a> =&gt; array('course_summary', 'calendar_month')
<a name="l2230"><span class="linenum">2230</span></a>          );
<a name="l2231"><span class="linenum">2231</span></a>      }
<a name="l2232"><span class="linenum">2232</span></a>  }
<a name="l2233"><span class="linenum">2233</span></a>  
<a name="l2234"><span class="linenum">2234</span></a>  <span class="comment">/**</span>
<a name="l2235"><span class="linenum">2235</span></a>  <span class="comment"> * Add the default blocks to a course.</span>
<a name="l2236"><span class="linenum">2236</span></a>  <span class="comment"> *</span>
<a name="l2237"><span class="linenum">2237</span></a>  <span class="comment"> * @param object $course a course object.</span>
<a name="l2238"><span class="linenum">2238</span></a>  <span class="comment"> */</span>
<a name="l2239"><span class="linenum">2239</span></a>  function <a class="function" onClick="logFunction('blocks_add_default_course_blocks')" href="../_functions/blocks_add_default_course_blocks.html" onMouseOver="funcPopup(event,'blocks_add_default_course_blocks')">blocks_add_default_course_blocks</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l2240"><span class="linenum">2240</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2241"><span class="linenum">2241</span></a>  
<a name="l2242"><span class="linenum">2242</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultblocks_override')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/defaultblocks_override.html">defaultblocks_override</a>)) {
<a name="l2243"><span class="linenum">2243</span></a>          <a class="var it3274" onMouseOver="hilite(3274)" onMouseOut="lolite()" onClick="logVariable('blocknames')" href="../_variables/blocknames.html">$blocknames</a> = <a class="function" onClick="logFunction('blocks_parse_default_blocks_list')" href="../_functions/blocks_parse_default_blocks_list.html" onMouseOver="funcPopup(event,'blocks_parse_default_blocks_list')">blocks_parse_default_blocks_list</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultblocks_override')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/defaultblocks_override.html">defaultblocks_override</a>);
<a name="l2244"><span class="linenum">2244</span></a>  
<a name="l2245"><span class="linenum">2245</span></a>      } else if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l2246"><span class="linenum">2246</span></a>          <a class="var it3274" onMouseOver="hilite(3274)" onMouseOut="lolite()" onClick="logVariable('blocknames')" href="../_variables/blocknames.html">$blocknames</a> = <a class="function" onClick="logFunction('blocks_get_default_site_course_blocks')" href="../_functions/blocks_get_default_site_course_blocks.html" onMouseOver="funcPopup(event,'blocks_get_default_site_course_blocks')">blocks_get_default_site_course_blocks</a>();
<a name="l2247"><span class="linenum">2247</span></a>  
<a name="l2248"><span class="linenum">2248</span></a>      } else if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;{'defaultblocks_' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/format.html">format</a>})) {
<a name="l2249"><span class="linenum">2249</span></a>          <a class="var it3274" onMouseOver="hilite(3274)" onMouseOut="lolite()" onClick="logVariable('blocknames')" href="../_variables/blocknames.html">$blocknames</a> = <a class="function" onClick="logFunction('blocks_parse_default_blocks_list')" href="../_functions/blocks_parse_default_blocks_list.html" onMouseOver="funcPopup(event,'blocks_parse_default_blocks_list')">blocks_parse_default_blocks_list</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;{'defaultblocks_' . <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/format.html">format</a>});
<a name="l2250"><span class="linenum">2250</span></a>  
<a name="l2251"><span class="linenum">2251</span></a>      } else {
<a name="l2252"><span class="linenum">2252</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>. '<a class="filename" href="../course/lib.php.html">/course/lib.php</a>');
<a name="l2253"><span class="linenum">2253</span></a>          <a class="var it3274" onMouseOver="hilite(3274)" onMouseOut="lolite()" onClick="logVariable('blocknames')" href="../_variables/blocknames.html">$blocknames</a> = <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)-&gt;<a class="function" onClick="logFunction('get_default_blocks')" href="../_functions/get_default_blocks.html" onMouseOver="funcPopup(event,'get_default_blocks')">get_default_blocks</a>();
<a name="l2254"><span class="linenum">2254</span></a>  
<a name="l2255"><span class="linenum">2255</span></a>      }
<a name="l2256"><span class="linenum">2256</span></a>  
<a name="l2257"><span class="linenum">2257</span></a>      if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l2258"><span class="linenum">2258</span></a>          <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = 'site-index';
<a name="l2259"><span class="linenum">2259</span></a>      } else {
<a name="l2260"><span class="linenum">2260</span></a>          <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = 'course-view-*';
<a name="l2261"><span class="linenum">2261</span></a>      }
<a name="l2262"><span class="linenum">2262</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a>();
<a name="l2263"><span class="linenum">2263</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('set_course')" href="../_functions/set_course.html" onMouseOver="funcPopup(event,'set_course')">set_course</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2264"><span class="linenum">2264</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_blocks')" href="../_functions/add_blocks.html" onMouseOver="funcPopup(event,'add_blocks')">add_blocks</a>(<a class="var it3274" onMouseOver="hilite(3274)" onMouseOut="lolite()" onClick="logVariable('blocknames')" href="../_variables/blocknames.html">$blocknames</a>, <a class="var it15444" onMouseOver="hilite(15444)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>);
<a name="l2265"><span class="linenum">2265</span></a>  }
<a name="l2266"><span class="linenum">2266</span></a>  
<a name="l2267"><span class="linenum">2267</span></a>  <span class="comment">/**</span>
<a name="l2268"><span class="linenum">2268</span></a>  <span class="comment"> * Add the default system-context blocks. E.g. the admin tree.</span>
<a name="l2269"><span class="linenum">2269</span></a>  <span class="comment"> */</span>
<a name="l2270"><span class="linenum">2270</span></a>  function <a class="function" onClick="logFunction('blocks_add_default_system_blocks')" href="../_functions/blocks_add_default_system_blocks.html" onMouseOver="funcPopup(event,'blocks_add_default_system_blocks')">blocks_add_default_system_blocks</a>() {
<a name="l2271"><span class="linenum">2271</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2272"><span class="linenum">2272</span></a>  
<a name="l2273"><span class="linenum">2273</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a>();
<a name="l2274"><span class="linenum">2274</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l2275"><span class="linenum">2275</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_blocks')" href="../_functions/add_blocks.html" onMouseOver="funcPopup(event,'add_blocks')">add_blocks</a>(array(<a class="constant" onClick="logConstant('BLOCK_POS_LEFT')" href="../_constants/BLOCK_POS_LEFT.html" onMouseOver="constPopup(event,'BLOCK_POS_LEFT')">BLOCK_POS_LEFT</a> =&gt; array('navigation', 'settings')), '*', null, true);
<a name="l2276"><span class="linenum">2276</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_blocks')" href="../_functions/add_blocks.html" onMouseOver="funcPopup(event,'add_blocks')">add_blocks</a>(array(<a class="constant" onClick="logConstant('BLOCK_POS_LEFT')" href="../_constants/BLOCK_POS_LEFT.html" onMouseOver="constPopup(event,'BLOCK_POS_LEFT')">BLOCK_POS_LEFT</a> =&gt; array('admin_bookmarks')), 'admin-*', null, null, 2);
<a name="l2277"><span class="linenum">2277</span></a>  
<a name="l2278"><span class="linenum">2278</span></a>      if (<a class="var it23247" onMouseOver="hilite(23247)" onMouseOut="lolite()" onClick="logVariable('defaultmypage')" href="../_variables/defaultmypage.html">$defaultmypage</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('my_pages', array('userid' =&gt; null, 'name' =&gt; '__default', 'private' =&gt; 1))) {
<a name="l2279"><span class="linenum">2279</span></a>          <a class="var it11608" onMouseOver="hilite(11608)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a> = <a class="var it23247" onMouseOver="hilite(23247)" onMouseOut="lolite()" onClick="logVariable('defaultmypage')" href="../_variables/defaultmypage.html">$defaultmypage</a>-&gt;<a onClick="logVariable('id')" class="var it44220" onMouseOver="hilite(44220)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2280"><span class="linenum">2280</span></a>      } else {
<a name="l2281"><span class="linenum">2281</span></a>          <a class="var it11608" onMouseOver="hilite(11608)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a> = null;
<a name="l2282"><span class="linenum">2282</span></a>      }
<a name="l2283"><span class="linenum">2283</span></a>  
<a name="l2284"><span class="linenum">2284</span></a>      <a class="var it23248" onMouseOver="hilite(23248)" onMouseOut="lolite()" onClick="logVariable('newblocks')" href="../_variables/newblocks.html">$newblocks</a> = array('private_files', 'online_users', 'badges', 'calendar_month', 'calendar_upcoming');
<a name="l2285"><span class="linenum">2285</span></a>      <a class="var it999" onMouseOver="hilite(999)" onMouseOut="lolite()" onClick="logVariable('newcontent')" href="../_variables/newcontent.html">$newcontent</a> = array('lp', 'course_overview');
<a name="l2286"><span class="linenum">2286</span></a>      <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it42985" onMouseOver="hilite(42985)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_blocks')" href="../_functions/add_blocks.html" onMouseOver="funcPopup(event,'add_blocks')">add_blocks</a>(array(<a class="constant" onClick="logConstant('BLOCK_POS_RIGHT')" href="../_constants/BLOCK_POS_RIGHT.html" onMouseOver="constPopup(event,'BLOCK_POS_RIGHT')">BLOCK_POS_RIGHT</a> =&gt; <a class="var it23248" onMouseOver="hilite(23248)" onMouseOut="lolite()" onClick="logVariable('newblocks')" href="../_variables/newblocks.html">$newblocks</a>, 'content' =&gt; <a class="var it999" onMouseOver="hilite(999)" onMouseOut="lolite()" onClick="logVariable('newcontent')" href="../_variables/newcontent.html">$newcontent</a>), 'my-index', <a class="var it11608" onMouseOver="hilite(11608)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a>);
<a name="l2287"><span class="linenum">2287</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'blocks_name_allowed_in_format': ['blocks_name_allowed_in_format', 'Check that a given name is in a permittable format ', [['lib','blocklib.php',2005]], 1],
'instance_config_save': ['instance_config_save', 'Serialize and store config data ', [['blocks/html','block_html.php',86],['blocks/quiz_results','block_quiz_results.php',48],['blocks','moodleblock.class.php',472],['blocks/activity_results','block_activity_results.php',110]], 5],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'user_is_editing': ['user_is_editing', 'Should the current user see this page in editing mode. That is, are they allowed to edit this page, and are they currently in editing mode. ', [['lib','pagelib.php',855]], 52],
'ensure_instances_exist': ['ensure_instances_exist', 'Ensure block instances exist for a given region ', [['lib','blocklib.php',1003]], 4],
'instance_delete': ['instance_delete', '', [['blocks/html','block_html.php',100],['blocks','moodleblock.class.php',506]], 1],
'add_block_at_end_of_default_region': ['add_block_at_end_of_default_region', '', [['lib','blocklib.php',713]], 1],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 370],
'add_block': ['add_block', 'Add a block to the current page, or related pages. The block is added to context $this->page->contextid. If $pagetypepattern $subpagepattern ', [['lib','blocklib.php',671]], 14],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'matching_page_type_patterns_from_pattern': ['matching_page_type_patterns_from_pattern', 'Give an specific pattern, return all the page type patterns that would also match it. ', [['lib','blocklib.php',1753]], 13],
'render': ['render', 'Renders this element ', [['lib/classes/output','inplace_editable.php',238],['lib/adodb','adodb-pager.inc.php',241],['lib/phpexcel/PHPExcel','Chart.php',656],['lib','formslib.php',948],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/fullscreen','fullscreen.htm',82],['lib','outputrenderers.php',170],['lib','outputrenderers.php',302],['question/behaviour','behaviourbase.php',97],['lib/htmlpurifier/HTMLPurifier/Printer','HTMLDefinition.php',15],['lib/htmlpurifier/HTMLPurifier/Printer','CSSDefinition.php',14],['filter/tex','latex.php',88],['lib','portfoliolib.php',241],['mod/quiz/classes/question/bank','custom_view.php',133],['lib/mustache/src/Mustache','Engine.php',204],['question/engine/tests','helpers.php',797],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',85],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',235],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',298],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',391],['lib/mustache/src/Mustache','Template.php',57],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',790],['question/engine','questionattempt.php',814],['lib/mustache/src/Mustache','LambdaHelper.php',39]], 942],
'process_url_actions': ['process_url_actions', 'Process any block actions that were specified in the URL. ', [['lib','blocklib.php',1155]], 1],
'blocks_find_block': ['blocks_find_block', 'Find a given block by its blockid within a provide array ', [['lib','blocklib.php',2168]], 0],
'add_class': ['add_class', 'Adds a CSS class to this action link object ', [['lib','outputcomponents.php',1040],['lib','outputcomponents.php',1787],['lib','outputcomponents.php',2596],['lib','navigationlib.php',458]], 33],
'get_installed_blocks': ['get_installed_blocks', 'Get an array of all of the installed blocks. ', [['lib','blocklib.php',349]], 2],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'blocks_add_default_course_blocks': ['blocks_add_default_course_blocks', 'Add the default blocks to a course. ', [['lib','blocklib.php',2234]], 2],
'heading': ['heading', 'Outputs a heading ', [['lib','outputrenderers.php',3072],['lib','outputrenderers.php',4364],['lib','outputrenderers.php',4552],['grade/report/singleview/classes/local/screen','screen.php',197],['grade/report/singleview/classes/local/screen','user.php',264],['grade/report/singleview/classes/local/screen','grade.php',283]], 796],
'initialise_theme_and_output': ['initialise_theme_and_output', 'Method for use by Moodle core to set up the theme. Do not use this in your own code. ', [['lib','pagelib.php',1512]], 9],
'require_sesskey': ['require_sesskey', 'Check the session key using {@link confirm_sesskey()}, and cause a fatal error if it does not match. ', [['lib','sessionlib.php',79]], 229],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'user_can_addto': ['user_can_addto', 'Allows the block class to have a say in the user\'s ability to create new instances of this block. The framework has first say in whether this will be allowed (e.g., no adding allowed unless in edit mode) but if the framework does allow it, the block can still decide to refuse. This function has access to the complete page object, the creation related to which is being determined. ', [['blocks','moodleblock.class.php',538],['blocks/community','block_community.php',32]], 4],
'create_block_contents': ['create_block_contents', 'Return an array of content objects from a set of block instances ', [['lib','blocklib.php',955]], 1],
'instance_by_id': ['instance_by_id', 'Get a context instance as an object, from a given context id. ', [['lib','accesslib.php',5434]], 235],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'matching_page_type_patterns': ['matching_page_type_patterns', 'Given a specific page type, return all the page type patterns that might match it. ', [['lib','blocklib.php',1728]], 6],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'blocks_get_record': ['blocks_get_record', 'Get the block record for a particular blockid - that is, a particular type os block. ', [['lib','blocklib.php',2149]], 1],
'blocks_remove_inappropriate': ['blocks_remove_inappropriate', 'Actually delete from the database any blocks that are currently on this page, but which should not be there according to blocks_name_allowed_in_format. ', [['lib','blocklib.php',1974]], 1],
'blocks_delete_instance': ['blocks_delete_instance', 'Delete a block, and associated data. ', [['lib','blocklib.php',2037]], 6],
'set_context': ['set_context', 'Sets the context the manager operates on ', [['grade/grading','lib.php',116],['lib','pagelib.php',970],['mod/assign','locallib.php',274],['lib/portfolio','caller.php',568]], 278],
'get_blocks_for_region': ['get_blocks_for_region', 'Get an array of all blocks within a given region ', [['lib','blocklib.php',280]], 13],
'add_custom_regions_for_pagetype': ['add_custom_regions_for_pagetype', 'Finds custom block regions associated with a page type and registers them with this block manager. ', [['lib','blocklib.php',421]], 1],
'set_course': ['set_course', 'Set the current course. This sets both $PAGE->course and $COURSE. It also sets the right theme and locale. ', [['lib','pagelib.php',922],['mod/assign','locallib.php',283]], 55],
'my_page_type_list': ['my_page_type_list', 'Generates the page type list for the my moodle page ', [['lib','blocklib.php',1896]], 0],
'process_url_add': ['process_url_add', 'Handle adding a block. ', [['lib','blocklib.php',1169]], 1],
'mod_page_type_list': ['mod_page_type_list', 'Generates the page type list for a module by either locating and using the modules callback or by generating a default list. ', [['lib','blocklib.php',1908]], 0],
'get_move_target_url': ['get_move_target_url', 'Helper method used by get_content_for_region. ', [['lib','blocklib.php',304]], 2],
'out': ['out', 'Returns the selector for use in a CSS rule ', [['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['mod/feedback/classes','responses_table.php',332],['lib','moodlelib.php',9729],['lib','weblib.php',545],['lib','tablelib.php',1594],['report/loglive/classes','table_log_ajax.php',37]], 626],
'get_user_preferences': ['get_user_preferences', 'Used to fetch user preference(s) ', [['lib','moodlelib.php',1974],['user','externallib.php',1381]], 188],
'set_data': ['set_data', '', [['mod/scorm','mod_form.php',456],['mod/feedback/item/multichoicerated','multichoicerated_form.php',84],['backup/util/structure','restore_path_element.class.php',95],['course','moodleform_mod.php',458],['blocks/html','edit_form.php',53],['question/type','edit_question_form.php',450],['question/type/random','edit_random_form.php',68],['lib','formslib.php',456],['question/type/missingtype','edit_missingtype_form.php',52],['badges','edit_form.php',137],['blocks','edit_form.php',255],['course','editsection_form.php',88],['admin/tool/filetypes','edit_form.php',83],['question','category_form.php',73],['lib/classes/message/inbound','address_manager.php',146],['question/type/multianswer','edit_multianswer_form.php',262],['cache','forms.php',242],['question/type/calculated','datasetitems_form.php',360],['mod/feedback/item/multichoice','multichoice_form.php',79]], 235],
'set_title': ['set_title', 'Sets the title for the node ', [['lib','outputcomponents.php',2820],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_basiclti.php',57],['lib','pagelib.php',1157],['blocks/rss_client/classes/output','channel_image.php',110],['blocks/rss_client/classes/output','item.php',182],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['backup/cc/cc_lib','cc_page.php',38],['lib/classes','chart_base.php',222],['blocks/rss_client/classes/output','feed.php',113],['backup/cc/cc_lib','cc_metadata.php',225],['mod/wiki','pagelib.php',215],['backup/cc/cc_lib','cc_forum.php',39]], 460],
'get': ['get', 'Retrieves a variable reference from the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',36],['cache/stores/static','lib.php',220],['cache','disabledlib.php',55],['search/classes','document.php',299],['lib/lessphp','Cache.php',27],['lib/google/src/Google/Service','DataTransfer.php',162],['lib/google/src/Google/Service','DataTransfer.php',208],['lib/minify/lib','JSMinPlus.php',1827],['lib/google/src/Google/Service','AdSense.php',1076],['lib/google/src/Google/Service','AdSense.php',1155],['lib/google/src/Google/Service','AdSense.php',1303],['lib/google/src/Google/Service','AdSense.php',1519],['lib/google/src/Google/Service','AdSense.php',1631],['lib/google/src/Google/Service','AdSense.php',1773],['lib/google/src/Google/Service','AdSense.php',2047],['lib/google/src/Google/Service','Replicapool.php',420],['lib/google/src/Google/Service','Replicapool.php',575],['lib/google/src/Google/Service','Tasks.php',323],['lib/google/src/Google/Service','Tasks.php',442],['lib/google/src/Google/Service','Partners.php',362],['lib/google/src/Google/Service','AndroidPublisher.php',1247],['lib/google/src/Google/Service','AndroidPublisher.php',1349],['lib/google/src/Google/Service','AndroidPublisher.php',1510],['lib/google/src/Google/Service','AndroidPublisher.php',1573],['lib/google/src/Google/Service','AndroidPublisher.php',1796],['lib/google/src/Google/Service','AndroidPublisher.php',1884],['lib/google/src/Google/Service','AndroidPublisher.php',1948],['lib/google/src/Google/Service','AndroidPublisher.php',2098],['lib/google/src/Google/Service','AndroidPublisher.php',2223],['lib/google/src/Google/Service','AndroidPublisher.php',2293],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',146],['lib/google/src/Google/Service','YouTubeReporting.php',273],['lib/google/src/Google/Service','YouTubeReporting.php',326],['lib/google/src/Google/Service','Reseller.php',295],['lib/google/src/Google/Service','Reseller.php',458],['lib/google/src/Google/Cache','Memcache.php',74],['lib','filelib.php',3382],['lib','filelib.php',3630],['lib/google/src/Google/Service','Computeaccounts.php',432],['lib/google/src/Google/Service','Computeaccounts.php',512],['lib/google/src/Google/Service','Computeaccounts.php',683],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',64],['lib/google/src/Google/Service','MapsEngine.php',1530],['lib/google/src/Google/Service','MapsEngine.php',1709],['lib/google/src/Google/Service','MapsEngine.php',2006],['lib/google/src/Google/Service','MapsEngine.php',2268],['lib/google/src/Google/Service','MapsEngine.php',2360],['lib/google/src/Google/Service','MapsEngine.php',2666],['lib/google/src/Google/Service','MapsEngine.php',2927],['lib/google/src/Google/Service','MapsEngine.php',3118],['lib/google/src/Google/Cache','File.php',47],['cache/classes','dummystore.php',141],['lib/google/src/Google/Service','Dns.php',307],['lib/google/src/Google/Service','Dns.php',393],['lib/google/src/Google/Service','Dns.php',444],['cache/classes','loaders.php',278],['cache/classes','loaders.php',1422],['cache/classes','loaders.php',1731],['lib/google/src/Google/Service','Appengine.php',320],['lib/google/src/Google/Service','Appengine.php',368],['lib/google/src/Google/Service','Appengine.php',472],['lib/google/src/Google/Service','Appengine.php',525],['lib/google/src/Google/Service','Urlshortener.php',109],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',74],['lib/google/src/Google/Service','AdExchangeBuyer.php',759],['lib/google/src/Google/Service','AdExchangeBuyer.php',829],['lib/google/src/Google/Service','AdExchangeBuyer.php',870],['lib/google/src/Google/Service','AdExchangeBuyer.php',952],['lib/google/src/Google/Service','AdExchangeBuyer.php',1041],['lib/google/src/Google/Service','AdExchangeBuyer.php',1111],['lib/google/src/Google/Service','AdExchangeBuyer.php',1251],['lib/google/src/Google/Service','AdExchangeBuyer.php',1293],['lib/google/src/Google/Service','AdExchangeBuyer.php',1417],['lib/google/src/Google/Service','AdExchangeBuyer.php',1471],['lib/google/src/Google/Service','AdExchangeBuyer.php',1576],['lib/google/src/Google/Service','Books.php',1456],['lib/google/src/Google/Service','Books.php',1625],['lib/google/src/Google/Service','Books.php',1677],['lib/google/src/Google/Service','Books.php',1752],['lib/google/src/Google/Service','Books.php',2086],['lib/google/src/Google/Service','Books.php',2205],['lib/google/src/Google/Service','Books.php',2262],['lib/google/src/Google/Service','Books.php',2345],['lib/google/src/Google/Service','Books.php',2418],['lib/google/src/Google/Service','Books.php',2450],['lib/google/src/Google/Service','Oauth2.php',165],['lib/google/src/Google/Service','Oauth2.php',202],['lib/google/src/Google/Service','Analytics.php',1988],['lib/google/src/Google/Service','Analytics.php',2037],['lib/google/src/Google/Service','Analytics.php',2084],['lib/google/src/Google/Service','Analytics.php',2308],['lib/google/src/Google/Service','Analytics.php',2422],['lib/google/src/Google/Service','Analytics.php',2550],['lib/google/src/Google/Service','Analytics.php',2670],['lib/google/src/Google/Service','Analytics.php',2763],['lib/google/src/Google/Service','Analytics.php',2889],['lib/google/src/Google/Service','Analytics.php',3108],['lib/google/src/Google/Service','Analytics.php',3245],['lib/google/src/Google/Service','Analytics.php',3336],['lib/google/src/Google/Service','Analytics.php',3422],['lib/google/src/Google/Service','Analytics.php',3533],['lib/google/src/Google/Service','Coordinate.php',509],['lib/google/src/Google/Service','Coordinate.php',689],['lib','oauthlib.php',302],['lib/horde/framework/Horde/Support','ConsistentHash.php',69],['lib/google/src/Google/Service','DeploymentManager.php',468],['lib/google/src/Google/Service','DeploymentManager.php',632],['lib/google/src/Google/Service','DeploymentManager.php',693],['lib/google/src/Google/Service','DeploymentManager.php',752],['lib/google/src/Google/Service','Blogger.php',945],['lib/google/src/Google/Service','Blogger.php',976],['lib/google/src/Google/Service','Blogger.php',1080],['lib/google/src/Google/Service','Blogger.php',1199],['lib/google/src/Google/Service','Blogger.php',1241],['lib/google/src/Google/Service','Blogger.php',1382],['lib/google/src/Google/Service','Blogger.php',1465],['lib/google/src/Google/Service','Blogger.php',1686],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',981],['lib/editor/tinymce/tiny_mce/3.5.11','tiny_mce_src.js',16595],['question/engine','states.php',116],['lib/google/src/Google/Service','Dataflow.php',292],['lib/horde/framework/Horde','Variables.php',135],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',58],['competency/classes','persistent.php',86],['lib/google/src/Google/Service','CloudUserAccounts.php',542],['lib/google/src/Google/Service','CloudUserAccounts.php',643],['lib/google/src/Google/Service','CloudUserAccounts.php',908],['lib/google/src/Google/Service','Cloudresourcemanager.php',248],['lib/google/src/Google/Service','Cloudresourcemanager.php',427],['lib/editor/tinymce/classes','plugin.php',447],['lib/simplepie/library/SimplePie/Parse','Date.php',567],['lib/google/src/Google/Service','TagManager.php',950],['lib/google/src/Google/Service','TagManager.php',1036],['lib/google/src/Google/Service','TagManager.php',1128],['lib/google/src/Google/Service','TagManager.php',1280],['lib/google/src/Google/Service','TagManager.php',1373],['lib/google/src/Google/Service','TagManager.php',1467],['lib/google/src/Google/Service','TagManager.php',1561],['lib/google/src/Google/Service','TagManager.php',1711],['mod/lesson','locallib.php',3248],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',163],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',34],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',68],['lib/google/src/Google/Service','Replicapoolupdater.php',338],['lib/google/src/Google/Service','Replicapoolupdater.php',489],['lib/google/src/Google/Service','Bigquery.php',552],['lib/google/src/Google/Service','Bigquery.php',668],['lib/google/src/Google/Service','Bigquery.php',879],['lib/google/src/Google/Service','ShoppingContent.php',1066],['lib/google/src/Google/Service','ShoppingContent.php',1183],['lib/google/src/Google/Service','ShoppingContent.php',1283],['lib/google/src/Google/Service','ShoppingContent.php',1346],['lib/google/src/Google/Service','ShoppingContent.php',1464],['lib/google/src/Google/Service','ShoppingContent.php',1578],['lib/google/src/Google/Service','ShoppingContent.php',1773],['lib/google/src/Google/Service','ShoppingContent.php',1986],['lib/google/src/Google/Service','ShoppingContent.php',2063],['lib/google/src/Google/Service','Webmasters.php',371],['lib/google/src/Google/Service','Webmasters.php',464],['lib/google/src/Google/Service','Webmasters.php',540],['lib','navigationlib.php',384],['lib','navigationlib.php',836],['lib','navigationlib.php',2704],['lib','navigationlib.php',3139],['lib/google/src/Google/Service','Clouddebugger.php',399],['lib/htmlpurifier/HTMLPurifier','Config.php',161],['lib/portfolio','exporter.php',134],['lib/google/src/Google/Service','Container.php',329],['lib/google/src/Google/Service','Container.php',396],['backup/cc/cc_lib/gral_lib','cssparser.php',147],['lib/horde/framework/Horde/Support','Array.php',30],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',46],['lib/google/src/Google/Service','Storage.php',1059],['lib/google/src/Google/Service','Storage.php',1175],['lib/google/src/Google/Service','Storage.php',1349],['lib/google/src/Google/Service','Storage.php',1476],['lib/google/src/Google/Service','Storage.php',1709],['cache/stores/memcache','lib.php',312],['lib/google/src/Google/Service','Genomics.php',660],['lib/google/src/Google/Service','Genomics.php',749],['lib/google/src/Google/Service','Genomics.php',918],['lib/google/src/Google/Service','Genomics.php',1007],['lib/google/src/Google/Service','Genomics.php',1185],['lib/google/src/Google/Service','Genomics.php',1268],['lib/google/src/Google/Service','Genomics.php',1340],['lib/google/src/Google/Service','Genomics.php',1475],['lib/google/src/Google/Service','Games.php',1220],['lib/google/src/Google/Service','Games.php',1339],['lib/google/src/Google/Service','Games.php',1441],['lib/google/src/Google/Service','Games.php',1699],['lib/google/src/Google/Service','Games.php',1806],['lib/google/src/Google/Service','Games.php',1948],['lib/google/src/Google/Service','Games.php',2082],['lib/google/src/Google/Service','Licensing.php',239],['lib/google/src/Google/Service','Fitness.php',417],['lib/google/src/Google/Service','Fitness.php',543],['lib/google/src/Google/Service','Reports.php',375],['lib/google/src/Google/Service','Reports.php',409],['lib/google/src/Google/Service','Gmail.php',779],['lib/google/src/Google/Service','Gmail.php',937],['lib/google/src/Google/Service','Gmail.php',1030],['lib/google/src/Google/Service','Gmail.php',1206],['lib/google/src/Google/Service','Gmail.php',1250],['lib/google/src/Google/Service','Taskqueue.php',264],['lib/google/src/Google/Service','Taskqueue.php',308],['lib/mustache/src/Mustache','HelperCollection.php',81],['cache/classes','interfaces.php',41],['lib/google/src/Google/Service','Doubleclicksearch.php',257],['lib/google/src/Google/Service','Doubleclicksearch.php',381],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',105],['lib/google/src/Google/Service','Autoscaler.php',331],['lib/google/src/Google/Service','Autoscaler.php',445],['lib/google/src/Google/Service','AdExchangeSeller.php',444],['lib/google/src/Google/Service','AdExchangeSeller.php',552],['lib/google/src/Google/Service','AdExchangeSeller.php',666],['lib/horde/framework/Horde/Imap/Client','Cache.php',88],['lib/google/src/Google/Service','Prediction.php',276],['lib/behat/classes','behat_context_helper.php',63],['lib/google/src/Google/Service','SiteVerification.php',152],['lib/google/src/Google/Service','Drive.php',1333],['lib/google/src/Google/Service','Drive.php',1369],['lib/google/src/Google/Service','Drive.php',1422],['lib/google/src/Google/Service','Drive.php',1536],['lib/google/src/Google/Service','Drive.php',1617],['lib/google/src/Google/Service','Drive.php',1792],['lib/google/src/Google/Service','Drive.php',2054],['lib/google/src/Google/Service','Drive.php',2124],['lib/google/src/Google/Service','Drive.php',2256],['lib/google/src/Google/Service','Drive.php',2350],['lib/google/src/Google/Service','Drive.php',2418],['lib/google/src/Google/Service','Drive.php',2537],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',79],['lib/google/src/Google/Service','Proximitybeacon.php',348],['lib/google/src/Google/Service','Groupssettings.php',108],['lib/google/src/Google/Service','Directory.php',1698],['lib/google/src/Google/Service','Directory.php',1766],['lib/google/src/Google/Service','Directory.php',1860],['lib/google/src/Google/Service','Directory.php',1930],['lib/google/src/Google/Service','Directory.php',2003],['lib/google/src/Google/Service','Directory.php',2072],['lib/google/src/Google/Service','Directory.php',2238],['lib/google/src/Google/Service','Directory.php',2365],['lib/google/src/Google/Service','Directory.php',2435],['lib/google/src/Google/Service','Directory.php',2531],['lib/google/src/Google/Service','Directory.php',2666],['lib/google/src/Google/Service','Directory.php',2745],['lib/google/src/Google/Service','Directory.php',2850],['lib/google/src/Google/Service','Directory.php',2954],['lib/google/src/Google/Service','Directory.php',3012],['lib/google/src/Google/Service','Directory.php',3287],['lib/google/src/Google/Service','Fusiontables.php',659],['lib/google/src/Google/Service','Fusiontables.php',826],['lib/google/src/Google/Service','Fusiontables.php',950],['lib/google/src/Google/Service','Fusiontables.php',1141],['lib/google/src/Google/Service','Fusiontables.php',1202],['lib/google/src/Google/Service','AdSenseHost.php',645],['lib/google/src/Google/Service','AdSenseHost.php',686],['lib/google/src/Google/Service','AdSenseHost.php',751],['lib/google/src/Google/Service','AdSenseHost.php',918],['lib/google/src/Google/Service','AdSenseHost.php',1026],['lib/google/src/Google/Service','Plus.php',343],['lib/google/src/Google/Service','Plus.php',418],['lib/google/src/Google/Service','Plus.php',525],['lib/google/src/Google/Service','Mirror.php',438],['lib/google/src/Google/Service','Mirror.php',523],['lib/google/src/Google/Service','Mirror.php',563],['lib/google/src/Google/Service','Mirror.php',674],['lib/google/src/Google/Service','Mirror.php',786],['lib/google/src/Google/Service','AndroidEnterprise.php',1002],['lib/google/src/Google/Service','AndroidEnterprise.php',1109],['lib/google/src/Google/Service','AndroidEnterprise.php',1196],['lib/google/src/Google/Service','AndroidEnterprise.php',1312],['lib/google/src/Google/Service','AndroidEnterprise.php',1432],['lib/google/src/Google/Service','AndroidEnterprise.php',1524],['lib/google/src/Google/Service','AndroidEnterprise.php',1616],['lib/google/src/Google/Service','AndroidEnterprise.php',1705],['lib/google/src/Google/Service','AndroidEnterprise.php',1777],['lib/google/src/Google/Service','AndroidEnterprise.php',1879],['lib/htmlpurifier/HTMLPurifier','DoctypeRegistry.php',76],['lib/testing/classes','nasty_strings.php',73],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',52],['lib/google/src/Google/Service','Playmoviespartner.php',411],['lib/google/src/Google/Service','Playmoviespartner.php',475],['lib/google/src/Google/Service','Playmoviespartner.php',580],['lib','coursecatlib.php',212],['lib/google/src/Google/Service','Cloudtrace.php',217],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',7],['tag/classes','tag.php',190],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',65],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Null.php',27],['competency/classes','url.php',55],['lib/portfolio','caller.php',170],['lib/portfolio','caller.php',538],['lib/google/src/Google/Service','Calendar.php',919],['lib/google/src/Google/Service','Calendar.php',1086],['lib/google/src/Google/Service','Calendar.php',1285],['lib/google/src/Google/Service','Calendar.php',1387],['lib/google/src/Google/Service','Calendar.php',1431],['lib/google/src/Google/Service','Calendar.php',1873],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',78],['cache/stores/session','lib.php',225],['lib/google/src/Google/Service','Cloudbilling.php',162],['lib/google/src/Google/Service','PlusDomains.php',468],['lib/google/src/Google/Service','PlusDomains.php',593],['lib/google/src/Google/Service','PlusDomains.php',719],['lib/google/src/Google/Service','PlusDomains.php',813],['lib/google/src/Google/Service','Storagetransfer.php',248],['lib/google/src/Google/Service','Storagetransfer.php',295],['lib/google/src/Google/Service','Storagetransfer.php',396],['cache/stores/mongodb','lib.php',252],['lib/google/src/Google/Cache','Null.php',36],['lib/google/src/Google/Service','GamesConfiguration.php',265],['lib/google/src/Google/Service','GamesConfiguration.php',404],['cache/stores/file','lib.php',330],['cache/stores/memcached','lib.php',319],['lib/google/src/Google/Service','AppState.php',171],['lib/google/src/Google/Service','Resourceviews.php',354],['lib/google/src/Google/Service','Resourceviews.php',439],['lib/portfolio','plugin.php',631],['lib/google/src/Google/Service','Classroom.php',484],['lib/google/src/Google/Service','Classroom.php',724],['lib/google/src/Google/Service','Classroom.php',830],['lib/google/src/Google/Service','Classroom.php',951],['lib/google/src/Google/Service','Classroom.php',1010],['lib/google/src/Google/Service','SQLAdmin.php',804],['lib/google/src/Google/Service','SQLAdmin.php',874],['lib/google/src/Google/Service','SQLAdmin.php',1076],['lib/google/src/Google/Service','SQLAdmin.php',1298],['lib/google/src/Google/Service','SQLAdmin.php',1387],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',67],['lib/google/src/Google/Service','Compute.php',4037],['lib/google/src/Google/Service','Compute.php',4166],['lib/google/src/Google/Service','Compute.php',4299],['lib/google/src/Google/Service','Compute.php',4460],['lib/google/src/Google/Service','Compute.php',4590],['lib/google/src/Google/Service','Compute.php',4686],['lib/google/src/Google/Service','Compute.php',4845],['lib/google/src/Google/Service','Compute.php',4957],['lib/google/src/Google/Service','Compute.php',5048],['lib/google/src/Google/Service','Compute.php',5188],['lib/google/src/Google/Service','Compute.php',5264],['lib/google/src/Google/Service','Compute.php',5394],['lib/google/src/Google/Service','Compute.php',5542],['lib/google/src/Google/Service','Compute.php',5726],['lib/google/src/Google/Service','Compute.php',6001],['lib/google/src/Google/Service','Compute.php',6171],['lib/google/src/Google/Service','Compute.php',6369],['lib/google/src/Google/Service','Compute.php',6595],['lib/google/src/Google/Service','Compute.php',6655],['lib/google/src/Google/Service','Compute.php',6732],['lib/google/src/Google/Service','Compute.php',6808],['lib/google/src/Google/Service','Compute.php',6914],['lib/google/src/Google/Service','Compute.php',6977],['lib/google/src/Google/Service','Compute.php',7052],['lib/google/src/Google/Service','Compute.php',7148],['lib/google/src/Google/Service','Compute.php',7223],['lib/google/src/Google/Service','Compute.php',7315],['lib/google/src/Google/Service','Compute.php',7425],['lib/google/src/Google/Service','Compute.php',7586],['lib/google/src/Google/Service','Compute.php',7750],['lib/google/src/Google/Service','Compute.php',7955],['lib/google/src/Google/Service','Compute.php',8050],['lib/google/src/Google/Service','Compute.php',8226],['lib/google/src/Google/Service','Compute.php',8321],['lib/google/src/Google/Service','Compute.php',8384],['lib/google/src/Google/Service','Pubsub.php',255],['lib/google/src/Google/Service','Pubsub.php',394],['lib/google/src/Google/Cache','Apc.php',52],['lib/google/src/Google/Service','Dfareporting.php',4559],['lib/google/src/Google/Service','Dfareporting.php',4587],['lib/google/src/Google/Service','Dfareporting.php',4629],['lib/google/src/Google/Service','Dfareporting.php',4671],['lib/google/src/Google/Service','Dfareporting.php',4779],['lib/google/src/Google/Service','Dfareporting.php',4867],['lib/google/src/Google/Service','Dfareporting.php',5014],['lib/google/src/Google/Service','Dfareporting.php',5117],['lib/google/src/Google/Service','Dfareporting.php',5308],['lib/google/src/Google/Service','Dfareporting.php',5427],['lib/google/src/Google/Service','Dfareporting.php',5525],['lib/google/src/Google/Service','Dfareporting.php',5580],['lib/google/src/Google/Service','Dfareporting.php',5683],['lib/google/src/Google/Service','Dfareporting.php',5769],['lib/google/src/Google/Service','Dfareporting.php',5891],['lib/google/src/Google/Service','Dfareporting.php',5997],['lib/google/src/Google/Service','Dfareporting.php',6105],['lib/google/src/Google/Service','Dfareporting.php',6255],['lib/google/src/Google/Service','Dfareporting.php',6314],['lib/google/src/Google/Service','Dfareporting.php',6411],['lib/google/src/Google/Service','Dfareporting.php',6529],['lib/google/src/Google/Service','Dfareporting.php',6609],['lib/google/src/Google/Service','Dfareporting.php',6746],['lib/google/src/Google/Service','Dfareporting.php',6862],['lib/google/src/Google/Service','Dfareporting.php',6940],['lib/google/src/Google/Service','Dfareporting.php',7011],['lib/google/src/Google/Service','Dfareporting.php',7131],['lib/google/src/Google/Service','Dfareporting.php',7172],['lib/google/src/Google/Service','Dfareporting.php',7214],['lib/google/src/Google/Service','Dfareporting.php',7256],['lib/google/src/Google/Service','Dfareporting.php',7320],['lib/google/src/Google/Service','Dfareporting.php',7378],['lib/google/src/Google/Service','Dfareporting.php',7517],['lib/google/src/Google/Service','Dfareporting.php',7640],['lib/google/src/Google/Service','Dfareporting.php',7771],['lib/google/src/Google/Service','Dfareporting.php',7812],['lib/google/src/Google/Service','Dfareporting.php',7853],['lib/google/src/Google/Service','Dfareporting.php',7935],['lib/google/src/Google/Service','Dfareporting.php',7995],['lib/google/src/Google/Service','Dfareporting.php',8116],['lib/google/src/Google/Service','Dfareporting.php',8258],['lib/google/src/Google/Service','Dfareporting.php',8307],['lib/google/src/Google/Service','Dfareporting.php',8421],['lib/google/src/Google/Service','Dfareporting.php',8482],['lib/google/src/Google/Service','Dfareporting.php',8584],['lib/google/src/Google/Service','Dfareporting.php',8643],['lib/google/src/Google/Service','Dfareporting.php',8682],['lib/google/src/Google/Service','Dfareporting.php',8724],['lib/google/src/Google/Service','Dfareporting.php',8782],['lib/google/src/Google/Service','Manager.php',259],['lib/google/src/Google/Service','Manager.php',338],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',108],['lib','webdavlib.php',264]], 21532],
'region_has_content': ['region_has_content', 'Determine whether a region contains anything. (Either any real blocks, or the add new block UI.) ', [['lib','blocklib.php',316]], 13],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'process_url_move': ['process_url_move', 'Handle showing/processing the submission from the block editing form. ', [['lib','blocklib.php',1517]], 2],
'delete_instance': ['delete_instance', 'Delete all data related to a given workshop module instance ', [['mod/workshop/eval','lib.php',59],['mod/workshop/allocation/scheduled','lib.php',200],['mod/workshop/eval/best','lib.php',125],['mod/workshop/form','lib.php',118],['lib','enrollib.php',1849],['mod/workshop/allocation/random','lib.php',243],['mod/assign/submission/file','locallib.php',447],['mod/workshop/form/rubric','lib.php',405],['mod/assign/feedback/comments','locallib.php',485],['mod/workshop/form/comments','lib.php',360],['mod/workshop/allocation/manual','lib.php',349],['lib','accesslib.php',6111],['mod/assign','assignmentplugin.php',525],['mod/workshop/allocation','lib.php',62],['mod/assign','locallib.php',715],['mod/workshop/form/accumulative','lib.php',375],['mod/workshop/form/numerrors','lib.php',394],['mod/assign/submission/onlinetext','locallib.php',550],['mod/assign/feedback/file','locallib.php',320],['mod/assign/feedback/editpdf','locallib.php',324],['tag/classes','tag.php',473],['enrol/lti','lib.php',145]], 37],
'get_parent_context_ids': ['get_parent_context_ids', 'Returns parent contexts of this context in reversed order, i.e. parent first, then grand parent, etc. ', [['lib','accesslib.php',5725]], 55],
'block_method_result': ['block_method_result', 'Call a class method (one that does not require a block instance) on a block class. ', [['lib','blocklib.php',1657]], 1],
'get_undeletable_block_types': ['get_undeletable_block_types', '', [['lib','blocklib.php',365]], 2],
'set_default_region': ['set_default_region', 'Set the default region for new blocks on the page ', [['lib','blocklib.php',435]], 5],
'has_any_capability': ['has_any_capability', 'Check if the user has any one of several capabilities from a list. ', [['lib','accesslib.php',496]], 100],
'string_exists': ['string_exists', 'Does the string actually exist? ', [['lib/classes','string_manager_install.php',64],['lib/classes','string_manager_standard.php',263],['lib/classes','string_manager.php',50]], 85],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as an moodle_recordset.  $sql must be a complete SQL query. Since this method is a little less readable, use of it should be restricted to code where it\'s possible there might be large datasets being returned.  For known small datasets use get_records_sql - it leads to simpler code. ', [['lib/dml','pdo_moodle_database.php',252],['lib/dml','oci_native_moodle_database.php',1106],['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','mssql_native_moodle_database.php',736],['lib/dml','mysqli_native_moodle_database.php',993],['lib/dml','sqlsrv_native_moodle_database.php',811],['lib/dml/tests','dml_test.php',5544]], 283],
'blocks_parse_default_blocks_list': ['blocks_parse_default_blocks_list', 'Parse a list of default blocks. See config-dist for a description of the format. ', [['lib','blocklib.php',2194]], 5],
'get_assignable_roles': ['get_assignable_roles', 'Gets a list of roles that this user can assign in this context ', [['lib','accesslib.php',3415],['enrol','locallib.php',600]], 48],
'blocks_get_default_site_course_blocks': ['blocks_get_default_site_course_blocks', '', [['lib','blocklib.php',2221]], 2],
'edit_controls': ['edit_controls', 'Get the appropriate list of editing icons for a block. This is used to set {@link block_contents::$controls} in {@link block_base::get_contents_for_output()}. ', [['lib','blocklib.php',1041]], 1],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1086]], 293],
'params': ['params', 'Add an array of params to the params for this url. ', [['lib','weblib.php',392],['question/classes/bank/search','condition.php',43],['question/classes/bank/search','category_condition.php',100]], 93],
'region_completely_docked': ['region_completely_docked', 'Checks to see whether all of the blocks within the given region are docked ', [['lib','blocklib.php',473]], 11],
'preload_from_record': ['preload_from_record', 'Preloads context information from db record and strips the cached info. ', [['lib','accesslib.php',5250],['lib','accesslib.php',6079]], 61],
'check_not_yet_loaded': ['check_not_yet_loaded', 'Check whether the page blocks have been loaded yet ', [['lib','blocklib.php',860]], 2],
'get_content_for_output': ['get_content_for_output', 'Return a block_contents object representing the full contents of this block. ', [['blocks','moodleblock.class.php',209]], 1],
'get_data': ['get_data', '', [['mod/scorm','mod_form.php',526],['mod/feedback/item/multichoicerated','multichoicerated_form.php',96],['backup/util/structure','restore_path_element.class.php',118],['admin/tool/uploaduser','user_form.php',399],['mod/feedback/item/textfield','textfield_form.php',58],['admin/tool/lp/classes/form','persistent.php',202],['grade/export','grade_export_form.php',206],['mod/feedback','mod_form.php',163],['message/tests','inbound_test.php',632],['mod/feedback/item/textarea','textarea_form.php',57],['mod/survey','mod_form.php',49],['lib/simplepie/library/SimplePie','Parser.php',263],['lib','formslib.php',606],['mod/feedback/item/numeric','numeric_form.php',60],['admin/tool/uploadcourse/classes','course.php',269],['mod/feedback/item','feedback_item_class.php',52],['mod/feedback/item','feedback_item_class.php',264],['admin/webservice','forms.php',299],['grade/grading/form','lib.php',841],['blocks/rss_client','editfeed.php',101],['mod/lesson','mod_form.php',417],['grade/grading/form/guide','edit_form.php',142],['course','editsection_form.php',105],['lib/classes/event','base.php',647],['grade/grading/form/rubric','edit_form.php',136],['mod/feedback/item','feedback_item_form_class.php',112],['admin/tool/filetypes','edit_form.php',97],['mod/forum','mod_form.php',270],['mod/scorm/report/graphs/classes','report.php',49],['lib/classes/message/inbound','address_manager.php',361],['mod/workshop','locallib.php',3990],['mod/glossary','mod_form.php',203],['mod/feedback/item/captcha','lib.php',67],['lib','completionlib.php',869],['mod/feedback/item/multichoice','multichoice_form.php',93],['mod/choice','mod_form.php',121]], 388],
'get_string_manager': ['get_string_manager', 'Returns current string_manager instance. ', [['lib','moodlelib.php',6678]], 163],
'instance_allow_multiple': ['instance_allow_multiple', '', [['blocks/blog_menu','block_blog_menu.php',36],['blocks/private_files','block_private_files.php',39],['blocks/admin_bookmarks','block_admin_bookmarks.php',49],['blocks/myprofile','block_myprofile.php',188],['blocks/mentees','block_mentees.php',39],['blocks/html','block_html.php',43],['blocks/tag_flickr','block_tag_flickr.php',42],['blocks/quiz_results','block_quiz_results.php',56],['blocks/settings','block_settings.php',54],['blocks/glossary_random','block_glossary_random.php',217],['blocks/blog_tags','block_blog_tags.php',36],['blocks','moodleblock.class.php',461],['blocks/navigation','block_navigation.php',63],['blocks/comments','block_comments.php',44],['blocks/badges','block_badges.php',39],['blocks/tag_youtube','block_tag_youtube.php',59],['blocks/tags','block_tags.php',30],['blocks/activity_results','block_activity_results.php',655],['blocks/rss_client','block_rss_client.php',152]], 2],
'set_block_actions_done': ['set_block_actions_done', 'Gets set when the block actions for the page have been processed. ', [['lib','pagelib.php',1944]], 2],
'get_display_name': ['get_display_name', 'Returns the formatted name of the item for the complete form or response view ', [['mod/feedback/item','feedback_item_class.php',149],['mod/feedback/item/label','lib.php',167],['tag/classes','tag.php',118],['mod/feedback/item/captcha','lib.php',101]], 18],
'is_inside_frontpage': ['is_inside_frontpage', 'Check if context is the front page context or a context inside it ', [['lib','accesslib.php',2947]], 4],
'check_known_block_type': ['check_known_block_type', 'Check if a block type is known and usable ', [['lib','blocklib.php',884]], 1],
'delete_records_list': ['delete_records_list', 'Delete the records from a table where one field match one list of values. ', [['lib/dml','moodle_database.php',1883]], 37],
'or': ['or', '', [['lib/tcpdf','LICENSE.TXT',69]], 556],
'is_block_present': ['is_block_present', 'Given a block name, find out of any of them are currently present in the page ', [['lib','blocklib.php',226]], 1],
'instance_can_be_hidden': ['instance_can_be_hidden', 'The settings block cannot be hidden by default as it is integral to the navigation of Moodle. ', [['blocks/settings','block_settings.php',62],['blocks','moodleblock.class.php',619],['blocks/navigation','block_navigation.php',87]], 2],
'__construct': ['__construct', '', [['lib/adodb/drivers','adodb-odbc_mssql.inc.php',50],['lib/adodb/drivers','adodb-odbc_mssql.inc.php',359],['question/classes/statistics/responses','analyser.php',69],['auth/radius','auth.php',38],['lib/xmldb','xmldb_file.php',43],['lib/lessphp/Tree/Mixin','Definition.php',18],['cache/stores/static','lib.php',127],['lib/classes/session','file.php',40],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['backup/util/ui','base_moodleform.class.php',68],['lib/simplepie/library/SimplePie','Author.php',81],['lib/filestorage','zip_archive.php',66],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/phpexcel/PHPExcel','HashTable.php',44],['mod/quiz/tests','repaginate_test.php',39],['lib/form','modvisible.php',43],['lib/phpexcel/PHPExcel/Worksheet','Row.php',44],['cache','disabledlib.php',44],['lib/phpexcel/PHPExcel/Worksheet','Dimension.php',58],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['question/type/ddwtos','question.php',61],['mnet/xmlrpc','client.php',25],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes','useragent.php',115],['lib/pear/HTML/QuickForm','advcheckbox.php',66],['lib/classes/update','checker_exception.php',37],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',53],['lib/jabber/XMPP','XMPP.php',101],['lib/form','radio.php',44],['lib/spout/src/Spout/Reader/XLSX/Helper','StyleHelper.php',45],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/phpexcel/PHPExcel/Style','Border.php',67],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['lib/adodb/drivers','adodb-oci8quercus.inc.php',31],['lib/adodb/drivers','adodb-oci8quercus.inc.php',45],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',29],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/phpexcel/PHPExcel','DocumentProperties.php',123],['lib/typo3','class.t3lib_cs.php',509],['mod/workshop/allocation/scheduled','lib.php',48],['lib/adodb/drivers','adodb-netezza.inc.php',53],['lib/adodb/drivers','adodb-netezza.inc.php',144],['mod/feedback/classes','complete_form.php',58],['search/classes','document.php',188],['webservice/rest','locallib.php',40],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign/feedback/editpdf/fpdi','fpdi_pdf_parser.php',57],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['backup/moodle2','backup_block_task.class.php',43],['lib/lessphp/Tree','Negative.php',14],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/pear/HTML/QuickForm','header.php',33],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','InMemoryStrategy.php',26],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',51],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',60],['lib/spout/src/Spout/Reader/ODS','Sheet.php',33],['question/type/calculated/tests','helper.php',205],['lib/adodb/drivers','adodb-odbtp.inc.php',38],['lib/adodb/drivers','adodb-odbtp.inc.php',673],['lib/adodb/drivers','adodb-odbtp.inc.php',796],['lib/adodb/drivers','adodb-odbtp.inc.php',806],['lib/adodb/drivers','adodb-odbtp.inc.php',816],['lib/adodb/drivers','adodb-odbtp.inc.php',826],['lib/adodb/drivers','adodb-odbtp.inc.php',836],['enrol/lti/ims-blti','blti.php',28],['backup/cc','cc2moodle.php',105],['mod/chat','locallib.php',181],['mod/chat','locallib.php',229],['user/filters','simpleselect.php',45],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',244],['lib/dml','pdo_moodle_database.php',42],['lib/adodb/drivers','adodb-sqlite3.inc.php',36],['lib/adodb/drivers','adodb-sqlite3.inc.php',350],['lib/pear/HTML/QuickForm','static.php',44],['competency/classes/external','comment_area_exporter.php',48],['lib/lessphp/Tree','Selector.php',31],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['auth/fc','fcFPP.php',33],['lib/xmldb','xmldb_key.php',43],['grade/grading/form/rubric','rubriceditor.php',56],['lib/google/src/Google/Service','Cloudlatencytest.php',40],['course','moodleform_mod.php',69],['auth/nntp','auth.php',35],['grade/report/grader','lib.php',111],['admin/tool/generator/classes','course_backend.php',116],['lib/minify/lib','FirePHP.php',189],['lib/adodb/drivers','adodb-sqlitepo.inc.php',38],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',66],['lib/lessphp/Tree','Rule.php',24],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/google/src/Google/Service','DataTransfer.php',44],['lib/google/src/Google/Http','Batch.php',42],['backup/util/structure','base_processor.class.php',49],['admin/tool/lpmigrate/classes','framework_mapper.php',50],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',46],['lib/lessphp/Tree','NameValue.php',22],['mod/quiz/classes','admin_review_setting.php',82],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['mod/quiz/report','attemptsreport_table.php',76],['blocks/lp/classes/output','summary.php',59],['lib/google/src/Google/IO','Stream.php',45],['lib/google/src/Google/Service','Freebase.php',38],['grade/tests','reportlib_test.php',36],['search/classes','manager.php',100],['question/behaviour/adaptive','behaviour.php',310],['admin/tool/lp/classes/form','framework_autocomplete.php',48],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['lib/google/src/Google/Task','Runner.php',76],['backup/util/settings/root','root_backup_setting.class.php',34],['lib','componentlib.class.php',179],['lib','componentlib.class.php',610],['lib','componentlib.class.php',834],['lib/google/src/Google/Service','AdSense.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['lib/spout/src/Spout/Reader/CSV','Sheet.php',24],['lib/filebrowser','file_info_context_system.php',37],['lib/grade','grade_item.php',260],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['auth/email','auth.php',34],['mod/wiki/editors','wikifiletable.php',40],['lib/google/src/Google/Service','Replicapool.php',51],['lib/dtl','database_exporter.php',55],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/phpexcel/PHPExcel/Writer','CSV.php',79],['lib/google/src/Google/Service','Tasks.php',44],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/minify/lib/Minify','Source.php',43],['lib/jabber/XMPP','Roster.php',48],['lib/lessphp/Tree','Element.php',19],['lib/classes','string_manager_install.php',43],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib/form','filemanager.php',54],['lib/form','filemanager.php',316],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['backup/util/ui','renderer.php',813],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',44],['question/classes/statistics/questions','calculator.php',66],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/google/src/Google/Service','Resource.php',62],['lib/form','autocomplete.php',56],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',60],['mod/lesson/classes','file_info.php',45],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['lib/google/src/Google/Service','Partners.php',43],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',635],['grade/edit/tree','lib.php',668],['grade/edit/tree','lib.php',834],['lib/simplepie/library/SimplePie','Cache.php',69],['mod/wiki/diff','difflib.php',277],['mod/wiki/diff','difflib.php',381],['mod/wiki/diff','difflib.php',478],['lib/pear/HTML/QuickForm','select.php',58],['lib/classes/output','mustache_javascript_helper.php',40],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/data','export_form.php',16],['lib/pear/HTML/QuickForm','autocomplete.php',67],['question/type/shortanswer','question.php',44],['lib/google/src/Google/Service','AndroidPublisher.php',52],['lib/google/src/Google/Verifier','Pem.php',31],['lib/classes/antivirus','scanner.php',41],['lib/phpexcel/PHPExcel/Reader','Excel5.php',414],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/classes/output','inplace_editable.php',107],['lib/adodb/drivers','adodb-informix.inc.php',37],['competency/classes','competency_rule.php',45],['lib/phpexcel/PHPExcel','RichText.php',37],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',59],['lib/pear/HTML/QuickForm','input.php',38],['repository/picasa','lib.php',41],['mod/feedback/classes','structure.php',48],['backup/util/plan','backup_structure_step.class.php',38],['question/classes/bank','random_question_loader.php',61],['mod/quiz/report/statistics/classes','calculated.php',43],['lib/horde/framework/Horde/Stream','String.php',27],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['mod/workshop/backup/moodle1','lib.php',308],['lib/google/src/Google/Service','YouTubeReporting.php',47],['grade/export/txt','grade_export_txt.php',27],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['mod/imscp','locallib.php',289],['lib/form','selectyesno.php',42],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['mod/lti/service/profile/classes/local/service','profile.php',41],['repository/flickr_public','lib.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['admin/tool/lp/classes/output','template_cohorts_table.php',53],['lib/simplepie/library','SimplePie.php',611],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/testing/generator','component_generator_base.php',45],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',175],['lib/classes','plugin_manager.php',91],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/xmldb','xmldb_field.php',84],['lib/adodb/drivers','adodb-ibase.inc.php',59],['lib/adodb/drivers','adodb-ibase.inc.php',764],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['admin/roles/classes','view_role_definition_table.php',28],['lib/google/src/Google/Cache','Memcache.php',44],['lib/pear/HTML/QuickForm','radio.php',48],['lib/filebrowser','file_info_context_coursecat.php',39],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',37],['mod/workshop/eval/best','lib.php',44],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',38],['grade/report','lib.php',156],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['availability/classes','info_module.php',40],['mod/book','locallib.php',414],['question/engine','datalib.php',68],['question/engine','datalib.php',1331],['question/engine','datalib.php',1632],['question/engine','datalib.php',1740],['question/engine','datalib.php',1870],['question/engine','datalib.php',1941],['webservice','lib.php',745],['webservice','lib.php',841],['lib/adodb/drivers','adodb-informix72.inc.php',59],['lib/adodb/drivers','adodb-informix72.inc.php',399],['lib/adodb','adodb-pager.inc.php',60],['user/classes/output/myprofile','category.php',68],['lib/lessphp/Visitor','extendFinder.php',15],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib','filelib.php',2720],['lib','filelib.php',3601],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','File.php',32],['report/competency/classes/output','report.php',56],['lib/google/src/Google/Service','Computeaccounts.php',49],['question/type','edit_question_form.php',96],['lib/filebrowser','file_info_context_user.php',39],['admin/tool/lp/classes/output','template_plans_page.php',37],['lib/phpexcel/PHPExcel','Style.php',93],['lib/minify/lib/Minify','HTML.php',49],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/form','password.php',44],['backup','backup.class.php',146],['mod/feedback/classes','course_select_form.php',39],['lib/google/src/Google/Auth','AppIdentity.php',39],['lib/adodb','adodb-active-record.inc.php',121],['lib/phpexcel/PHPExcel','Chart.php',169],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['admin/roles/classes','allow_switch_page.php',33],['lib/grade','grade_object.php',80],['lib/google/src/Google/IO','Exception.php',29],['auth/lti','auth.php',38],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier','HTMLPurifier.php',104],['admin/tool/lp/classes/output','user_competency_summary_in_plan.php',47],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/evalmath','evalmath.class.php',120],['lib/form','url.php',46],['lib/dml','pdo_moodle_recordset.php',41],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['backup/cc/cc_lib','xmlbase.php',52],['badges/lib','bakerlib.php',52],['lib/google/src/Google/Signer','P12.php',35],['availability/classes','info_section.php',40],['lib/form','static.php',47],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['lib/google/src/Google/Service','YouTubeAnalytics.php',56],['admin/roles/classes','check_capability_table.php',40],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/adodb/drivers','adodb-postgres64.inc.php',127],['lib/adodb/drivers','adodb-postgres64.inc.php',919],['backup/util/helper','restore_prechecks_helper.class.php',213],['user/profile','lib.php',59],['lib/google/src/Google/Service','Admin.php',40],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',62],['lib/google/src/Google/Service','MapsEngine.php',66],['lib','listlib.php',82],['lib','listlib.php',485],['lib/phpexcel/PHPExcel/Writer','HTML.php',128],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/simplepie/library/SimplePie','Source.php',61],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/google/src/Google/Cache','File.php',41],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['backup/util/ui','backup_moodleform.class.php',41],['availability/condition/grouping/classes','condition.php',46],['lib/classes/session','memcache.php',50],['cache/classes','dummystore.php',62],['badges/classes','assertion.php',49],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['availability/tests/fixtures','mock_condition.php',52],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['mod/quiz/report','attemptsreport_options.php',95],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',39],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/google/src/Google/Service','Dns.php',53],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['backup/moodle2','restore_block_task.class.php',45],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',54],['lib/form','recaptcha.php',48],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/phpexcel/PHPExcel/Chart','Legend.php',75],['lib/phpexcel/PHPExcel','WorksheetIterator.php',44],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1189],['cache/classes','loaders.php',1586],['lib/google/src/Google/Service','Appengine.php',44],['admin/tool/lp/classes/output','template_cohorts_page.php',37],['search/classes','engine.php',77],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/classes/progress','display.php',48],['lib/lessphp/Tree','Call.php',19],['course/format','lib.php',78],['question/type/calculated','datasetdefinitions_form.php',53],['lib/google/src/Google/Service','Translate.php',40],['enrol/database','settingslib.php',34],['lib/lessphp/Tree/Mixin','Call.php',14],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/tests','collator_test.php',310],['lib/google/src/Google/Auth','Simple.php',31],['backup/cc/cc_lib','cc_manifest.php',45],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['lib/phpmailer','moodle_phpmailer.php',47],['availability/tests/fixtures','mock_info.php',40],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['admin/tool/lp/classes/form','persistent.php',68],['lib/adodb/drivers','adodb-mysqlt.inc.php',32],['lib/adodb/drivers','adodb-mysqlt.inc.php',96],['webservice/tests','lib_test.php',213],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['filter','local_settings_form.php',33],['mod/quiz/accessrule','accessrulebase.php',52],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['mod/assign/feedback/editpdf/fpdi','pdf_parser.php',170],['lib/lessphp/Tree','Dimension.php',15],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/adodb/perf','perf-oci8.inc.php',203],['lib/phpexcel','PHPExcel.php',361],['backup/util/helper','restore_questions_parser_processor.class.php',42],['backup/moodle2','backup_plugin.class.php',44],['lib/classes/antivirus','scanner_exception.php',38],['webservice/xmlrpc','lib.php',43],['report/loglive/classes','renderable.php',73],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['lib/filebrowser','file_info.php',43],['lib/adodb/drivers','adodb-access.inc.php',34],['lib/adodb/drivers','adodb-access.inc.php',83],['mod/feedback/classes','responses_table.php',54],['lib/editor/tinymce','adminlib.php',36],['admin/tool/monitor/classes','rule.php',44],['lib/google/src/Google/Service','AdExchangeBuyer.php',55],['lib/filebrowser','virtual_root_file.php',45],['lib/phpexcel/PHPExcel/RichText','Run.php',35],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/google/src/Google/Service','CivicInfo.php',40],['mod/feedback/classes/output','summary.php',52],['lib/minify/lib/Minify','Build.php',77],['lib/adodb/drivers','adodb-ado_mssql.inc.php',146],['lib/adodb/drivers','adodb-odbc.inc.php',44],['lib/adodb/drivers','adodb-odbc.inc.php',611],['lib','moodlelib.php',9421],['lib','moodlelib.php',9632],['user/selector','lib.php',85],['user/selector','lib.php',674],['admin/tool/lp/classes/output','plan_page.php',49],['repository/dropbox','lib.php',49],['lib/horde/framework/Horde/Mime','Part.php',261],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','CachingStrategyFactory.php',56],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',777],['lib/google/src/Google/Service','Books.php',60],['lib/google/src/Google/Service','Oauth2.php',50],['admin/tool/log/classes/log','store.php',30],['admin/tool/recyclebin/classes','category_bin.php',45],['lib/phpexcel/PHPExcel/Style','Color.php',64],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',69],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['lib/classes/update','checker.php',50],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',243],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/phpexcel/PHPExcel/Chart','Title.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/adodb/drivers','adodb-text.inc.php',93],['lib/adodb/drivers','adodb-text.inc.php',379],['lib/phpexcel/PHPExcel','Calculation.php',2071],['lib/adodb/drivers','adodb-sqlite.inc.php',36],['lib/adodb/drivers','adodb-sqlite.inc.php',367],['lib/google/src/Google/Service','Analytics.php',77],['blocks/lp/classes/output','plans_to_review_page.php',48],['lib/google/src/Google/Service','Coordinate.php',48],['availability/condition/group/classes','condition.php',43],['lib/lessphp/Exception','Chunk.php',19],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['backup/cc/cc_lib','cc_resources.php',102],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['question/classes/statistics/questions','calculated.php',181],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/xmldb','xmldb_structure.php',40],['lib/ddl','sqlite_sql_generator.php',73],['lib/pear/HTML/QuickForm','Renderer.php',31],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['lib/pear/HTML/QuickForm','file.php',54],['lib/minify/lib/Minify/Cache','File.php',9],['lib/pear/HTML/QuickForm','xbutton.php',39],['lib/htmlpurifier','locallib.php',134],['admin/tool/recyclebin/classes','course_bin.php',45],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',174],['backup/util/helper','backup_helper.class.php',381],['lib/form','htmleditor.php',48],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['repository/skydrive','lib.php',42],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',260],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/horde/framework/Horde/Exception','Pear.php',22],['lib/portfolio','exceptions.php',50],['backup/moodle2','restore_plugin.class.php',43],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',177],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/minify/lib/Minify/JS','ClosureCompiler.php',101],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/form','dateselector.php',70],['lib/spout/src/Spout/Common/Helper','EncodingHelper.php',38],['report/competency/classes/output','user_course_navigation.php',51],['lib/adodb/drivers','adodb-postgres7.inc.php',98],['lib/adodb/drivers','adodb-postgres7.inc.php',311],['lib/adodb/drivers','adodb-postgres7.inc.php',342],['lib/lessphp/Tree','Alpha.php',13],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',46],['lib/tcpdf','tcpdf.php',1822],['lib/adodb/drivers','adodb-sybase.inc.php',47],['lib/adodb/drivers','adodb-sybase.inc.php',313],['lib/adodb/drivers','adodb-sybase.inc.php',394],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',44],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',136],['mod/lesson','editpage_form.php',41],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/horde/framework/Horde','Domhtml.php',53],['lib','formslib.php',142],['lib','formslib.php',1442],['lib','formslib.php',2653],['rating','lib.php',114],['rating','lib.php',1070],['lib/phpexcel/PHPExcel/Worksheet','Column.php',44],['lib/google/src/Google/Service','Script.php',67],['lib/adodb','adodb-xmlschema.inc.php',118],['lib/adodb','adodb-xmlschema.inc.php',245],['lib/adodb','adodb-xmlschema.inc.php',637],['lib/adodb','adodb-xmlschema.inc.php',781],['lib/adodb','adodb-xmlschema.inc.php',982],['lib/adodb','adodb-xmlschema.inc.php',1295],['lib/google/src/Google/Service','DeploymentManager.php',54],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',546],['mod/quiz','attemptlib.php',2337],['mod/quiz','attemptlib.php',2392],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib','boxlib.php',264],['lib/simplepie/library/SimplePie','Restriction.php',81],['admin/roles/classes','allow_assign_page.php',31],['lib/adodb/drivers','adodb-pdo.inc.php',90],['lib/adodb/drivers','adodb-pdo.inc.php',553],['lib/adodb/drivers','adodb-pdo.inc.php',630],['tag/classes/output','tagareacollection.php',40],['admin/tool/lp/classes','template_statistics.php',62],['lib','weblib.php',313],['lib','weblib.php',3183],['lib','weblib.php',3483],['lib','weblib.php',3518],['lib','weblib.php',3593],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/html2text','Html2Text.php',232],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/pear/HTML/QuickForm/Renderer','Array.php',143],['question/engine','lib.php',774],['question/engine','lib.php',1011],['question/engine','lib.php',1059],['lib/jabber/XMPP','XMLObj.php',76],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/editor/atto','adminlib.php',109],['lib/pear/HTML/QuickForm/Renderer','Tableless.php',116],['grade/report/history/classes/output','tablelog.php',72],['lib/google/src/Google/IO','Curl.php',38],['lib/editor/tinymce/plugins/spellchecker/classes/utils','Logger.php',31],['lib/pear/HTML/QuickForm','hiddenselect.php',41],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['lib/adodb/drivers','adodb-mysqlpo.inc.php',35],['lib/adodb/drivers','adodb-mysqlpo.inc.php',82],['lib/adodb/drivers','adodb-mysqlpo.inc.php',119],['lib/google/src/Google/Service','Blogger.php',50],['backup/util/xml/output','file_xml_output.class.php',37],['lib/form','tags.php',75],['admin/tool/installaddon/classes','installer.php',219],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['lib/simplepie/library/SimplePie','IRI.php',252],['comment','locallib.php',39],['question/engine','states.php',61],['lib/spout/src/Spout/Reader/XLSX/Helper','CellValueFormatter.php',52],['lib/google/src/Google/Service','Dataflow.php',45],['mod/data','locallib.php',66],['mod/data','locallib.php',433],['lib/horde/framework/Horde','Variables.php',60],['backup/util/ui','base_ui.class.php',84],['lib/simplepie/library/SimplePie','Registry.php',99],['cache/locks/file','lib.php',66],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/filebrowser','file_info_stored.php',51],['tag/classes/output','tagcollname.php',42],['competency/classes','persistent.php',54],['admin/tool/lp/classes/output','competency_plan_navigation.php',54],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',146],['lib/pear/HTML/QuickForm','textarea.php',48],['lib/lessphp','Visitor.php',14],['lib/google/src/Google/Service','CloudUserAccounts.php',52],['question/classes/bank','column_base.php',44],['lib/minify/lib/MrClay','Cli.php',74],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',589],['lib','outputcomponents.php',665],['lib','outputcomponents.php',783],['lib','outputcomponents.php',925],['lib','outputcomponents.php',1009],['lib','outputcomponents.php',2183],['lib','outputcomponents.php',2222],['lib','outputcomponents.php',2295],['lib','outputcomponents.php',2376],['lib','outputcomponents.php',2579],['lib','outputcomponents.php',2627],['lib','outputcomponents.php',2687],['lib','outputcomponents.php',2860],['lib','outputcomponents.php',3030],['lib','outputcomponents.php',3134],['lib','outputcomponents.php',3201],['lib','outputcomponents.php',3329],['lib','outputcomponents.php',3613],['lib','outputcomponents.php',3642],['lib','outputcomponents.php',3668],['lib','outputcomponents.php',3690],['lib','outputcomponents.php',3719],['lib','outputcomponents.php',3751],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/phpexcel/PHPExcel','Cell.php',114],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['repository/wikimedia','wikimedia.php',35],['lib/phpexcel/PHPExcel/Style','Fill.php',81],['lib/google/src/Google/Service','Cloudresourcemanager.php',42],['lib/editor/tinymce/classes','plugin.php',49],['mod/wiki/parser/markups','html.php',21],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/horde/framework/Horde/Support','Inflector.php',115],['question/type/gapselect','question.php',55],['lib/google/src/Google','Config.php',33],['badges/criteria','award_criteria_activity.php',45],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['course/format/topics','renderer.php',38],['lib/adodb/drivers','adodb-oci8po.inc.php',33],['lib/adodb/drivers','adodb-oci8po.inc.php',99],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/filestorage','tgz_packer.php',749],['lib/filestorage','tgz_packer.php',831],['tag/classes','index_builder.php',96],['lib/pear/HTML/QuickForm','reset.php',37],['lib/classes/lock','lock.php',55],['admin/roles/classes','assign_user_selector_base.php',40],['backup/util/output','output_controller.class.php',44],['question/type/randomsamatch','question.php',114],['lib/google/src/Google/Service','Customsearch.php',38],['lib/lessphp/Tree','Extend.php',28],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',215],['lib/google/src/Google/Service','TagManager.php',67],['question/type/gapselect/tests','edit_form_test.php',41],['mod/lesson','locallib.php',2004],['mod/lesson','locallib.php',2611],['backup/util/helper','restore_structure_parser_processor.class.php',41],['course','renderer.php',52],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib','modinfolib.php',429],['lib','modinfolib.php',1665],['lib','modinfolib.php',2492],['lib','tablelib.php',128],['lib','tablelib.php',1468],['lib','tablelib.php',1633],['lib','tablelib.php',1698],['user/filters','cohort.php',36],['user/filters','text.php',37],['lib','outputrenderers.php',120],['lib','outputrenderers.php',285],['lib','outputrenderers.php',408],['lib','outputrenderers.php',4578],['lib','outputrenderers.php',4831],['repository','lib.php',116],['repository','lib.php',533],['lib','adminlib.php',791],['lib','adminlib.php',1138],['lib','adminlib.php',1212],['lib','adminlib.php',1355],['lib','adminlib.php',1556],['lib','adminlib.php',1928],['lib','adminlib.php',2040],['lib','adminlib.php',2106],['lib','adminlib.php',2199],['lib','adminlib.php',2260],['lib','adminlib.php',2302],['lib','adminlib.php',2341],['lib','adminlib.php',2429],['lib','adminlib.php',2463],['lib','adminlib.php',2621],['lib','adminlib.php',2706],['lib','adminlib.php',2935],['lib','adminlib.php',3091],['lib','adminlib.php',3233],['lib','adminlib.php',3324],['lib','adminlib.php',3488],['lib','adminlib.php',3571],['lib','adminlib.php',3682],['lib','adminlib.php',3833],['lib','adminlib.php',4067],['lib','adminlib.php',4134],['lib','adminlib.php',4352],['lib','adminlib.php',4381],['lib','adminlib.php',4410],['lib','adminlib.php',4434],['lib','adminlib.php',4464],['lib','adminlib.php',4500],['lib','adminlib.php',4535],['lib','adminlib.php',4567],['lib','adminlib.php',4657],['lib','adminlib.php',4690],['lib','adminlib.php',4748],['lib','adminlib.php',4790],['lib','adminlib.php',4814],['lib','adminlib.php',4840],['lib','adminlib.php',4863],['lib','adminlib.php',4880],['lib','adminlib.php',4925],['lib','adminlib.php',4943],['lib','adminlib.php',5002],['lib','adminlib.php',5045],['lib','adminlib.php',5080],['lib','adminlib.php',5123],['lib','adminlib.php',5206],['lib','adminlib.php',5336],['lib','adminlib.php',5378],['lib','adminlib.php',5423],['lib','adminlib.php',5480],['lib','adminlib.php',5496],['lib','adminlib.php',5552],['lib','adminlib.php',5777],['lib','adminlib.php',5831],['lib','adminlib.php',5885],['lib','adminlib.php',5902],['lib','adminlib.php',5950],['lib','adminlib.php',5992],['lib','adminlib.php',6043],['lib','adminlib.php',6099],['lib','adminlib.php',6328],['lib','adminlib.php',6508],['lib','adminlib.php',6688],['lib','adminlib.php',6782],['lib','adminlib.php',6931],['lib','adminlib.php',7088],['lib','adminlib.php',7712],['lib','adminlib.php',8147],['lib','adminlib.php',8330],['lib','adminlib.php',8617],['lib','adminlib.php',8764],['lib','adminlib.php',8924],['lib','adminlib.php',9071],['lib','adminlib.php',9235],['lib','adminlib.php',9428],['lib','adminlib.php',9482],['lib','adminlib.php',9544],['lib','adminlib.php',9589],['lib','adminlib.php',9626],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',81],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['question/type/numerical','questiontype.php',507],['auth/mnet','auth.php',35],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['auth/imap','auth.php',35],['tag/classes/output','taglist.php',54],['lib','pdflib.php',161],['lib/phpexcel/PHPExcel/RichText','TextElement.php',35],['lib/dml','database_column_info.php',112],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['mod/wiki/editors','wikieditor.php',36],['lib/lessphp/SourceMap','Base64VLQ.php',67],['repository/s3','lib.php',44],['admin/tool/uploadcourse/classes','course.php',111],['lib/google/src/Google/Service','Replicapoolupdater.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',102],['mod/feedback/item','feedback_item_class.php',28],['lib/adodb/drivers','adodb-mssql_n.inc.php',245],['lib','badgeslib.php',133],['lib/pear/HTML/QuickForm','text.php',38],['lib/simplepie/library/SimplePie','Enclosure.php',219],['calendar/classes','rrule_manager.php',182],['auth/webservice','auth.php',35],['lib','outputrequirementslib.php',171],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib','questionlib.php',1261],['lib','questionlib.php',1505],['lib','uploadlib.php',40],['lib/spout/src/Spout/Writer/Common/Helper','ZipHelper.php',28],['lib/google/src/Google/Service','Cloudsearch.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/spout/src/Spout/Writer/Common','Sheet.php',39],['question/behaviour','behaviourbase.php',50],['blocks/rss_client/classes/output','footer.php',47],['lib/dtl','file_xml_database_importer.php',34],['admin/roles/classes','capability_table_with_risks.php',45],['lib/adodb/drivers','adodb-mssql.inc.php',110],['lib/adodb/drivers','adodb-mssql.inc.php',870],['lib/adodb/drivers','adodb-mssql.inc.php',1077],['lib/google/src/Google/Service','Bigquery.php',62],['lib/google/src/Google/Service','ShoppingContent.php',50],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['repository/equella','lib.php',42],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',199],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['cache/classes','helper.php',90],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/classes','chart_series.php',62],['lib/classes/dml','recordset_walk.php',64],['lib/google/src/Google/Service','Webmasters.php',47],['lib/tcpdf/include/barcodes','qrcode.php',631],['backup/moodle2','backup_settingslib.php',42],['backup/moodle2','backup_settingslib.php',138],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',40],['course/tests/fixtures','course_capability_assignment.php',60],['mod/forum/classes','subscriber_selector_base.php',53],['lib','blocklib.php',54],['lib','blocklib.php',152],['report/loglive/classes','table_log.php',50],['lib','navigationlib.php',147],['lib','navigationlib.php',1015],['lib','navigationlib.php',2825],['lib','navigationlib.php',3086],['lib','navigationlib.php',3412],['lib','navigationlib.php',3459],['lib','navigationlib.php',4888],['lib','navigationlib.php',5070],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',41],['grade/report/history/classes/output','user_button.php',40],['user/filters','courserole.php',34],['lib/phpexcel/PHPExcel','IOFactory.php',69],['lib/lessphp/Tree','Color.php',15],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',70],['lib/adodb/drivers','adodb-vfp.inc.php',72],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/google/src/Google/Service','Clouddebugger.php',50],['lib/horde/framework/Horde/Exception','NotFound.php',15],['admin/tool/lp/classes/output','user_competency_course_navigation.php',55],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib','mathslib.php',45],['lib/filestorage','tgz_extractor.php',119],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['filter/emoticon/tests','filter_test.php',68],['mnet/xmlrpc','xmlparser.php',15],['lib/spout/src/Spout/Reader/XLSX','Sheet.php',31],['admin/roles/classes','capability_table_base.php',51],['lib/simplepie/library/SimplePie','Item.php',82],['lib/form','selectgroups.php',57],['auth/shibboleth','auth.php',38],['admin/tool/langimport/classes','controller.php',48],['lib/form','warning.php',49],['lib/filestorage','stored_file.php',63],['grade/grading/form/guide','guideeditor.php',49],['lib/pear/HTML/QuickForm','group.php',80],['backup/moodle2','restore_subplugin.class.php',45],['grade/export','lib.php',60],['grade/export','lib.php',625],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',98],['backup/moodle2','backup_section_task.class.php',40],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib','flickrlib.php',53],['mod/assign/classes/output','grading_app.php',59],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['user/profile/field/menu','field.class.php',39],['lib/spout/src/Spout/Writer/Common/Internal','AbstractWorkbook.php',30],['lib/portfolio','exporter.php',113],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/horde/framework/Horde','Secret.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/classes/update','info.php',48],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/lessphp/Tree','Anonymous.php',21],['admin/tool/lp/classes','course_competencies_form_element.php',43],['lib/lessphp/Tree','Comment.php',17],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/adodb/drivers','adodb-mysql.inc.php',54],['lib/adodb/drivers','adodb-mysql.inc.php',717],['lib/adodb/drivers','adodb-mysql.inc.php',880],['enrol/ldap','lib.php',43],['mod/quiz/report/statistics','statistics_table.php',45],['lib/form','listing.php',68],['lib/google/src/Google/Service','Container.php',43],['mod/quiz','accessmanager.php',45],['lib/classes/message/inbound','processing_failed_exception.php',36],['blocks/online_users/classes','fetcher.php',45],['lib/pear/HTML/QuickForm','checkbox.php',48],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['lib/classes','chart_axis.php',65],['mod/glossary/classes','entry_query_builder.php',83],['mod/feedback/item/label','lib.php',26],['lib/adodb/drivers','adodb-mssqlnative.inc.php',131],['lib/adodb/drivers','adodb-mssqlnative.inc.php',847],['lib/adodb/drivers','adodb-mssqlnative.inc.php',1099],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['lib/form','editor.php',62],['lib','environmentlib.php',1258],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['mod/feedback/classes','templates_table.php',39],['tag/classes','manage_table.php',44],['lib/adodb/drivers','adodb-odbc_db2.inc.php',115],['lib/adodb/drivers','adodb-odbc_db2.inc.php',309],['backup/cc/cc_lib/gral_lib','cssparser.php',21],['lib/horde/framework/Horde/Support','Array.php',21],['lib/google/src/Google/Service','GroupsMigration.php',40],['admin/tool/lp/classes/output','user_evidence_list_page.php',61],['lib/google/src/Google/Service','Audit.php',39],['lib/simplepie/library/SimplePie','File.php',68],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['enrol/lti/classes','manage_table.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['question/type/ddimageortext','question.php',64],['question/type/ddimageortext','question.php',122],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',456],['lib/minify/lib','CSSmin.php',43],['lib/dml','moodle_temptables.php',51],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['blocks/rss_client/classes/output','block.php',47],['question/type/ddmarker','question.php',417],['question/type/ddmarker','question.php',469],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['admin/tool/lp/classes/output','user_competency_summary_in_course.php',51],['backup/util/helper','convert_helper.class.php',378],['lib/classes/update','validator.php',265],['lib/lessphp/Tree','Attribute.php',16],['admin/tool/generator/classes','backend.php',84],['backup/util/loggers','file_logger.class.php',35],['lib/adodb','adodb-exceptions.inc.php',30],['lib/google/src/Google','Client.php',70],['user/filters','profilefield.php',36],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['cache/tests/fixtures','lib.php',326],['mod/lti/service/profile/classes/local/resource','profile.php',43],['competency/classes','invalid_persistent_exception.php',38],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',63],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/dml','moodle_database.php',139],['search/classes','base.php',69],['admin/tool/lp/classes/output','competency_summary.php',54],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['mod/workshop/form/rubric','lib.php',105],['grade','lib.php',103],['grade','lib.php',927],['grade','lib.php',1089],['grade','lib.php',2053],['grade','lib.php',2213],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',35],['lib/google/src/Google/Service','Datastore.php',46],['admin/tool/lpmigrate/classes','framework_processor.php',98],['lib/dtl','database_importer.php',61],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['badges/lib','awardlib.php',55],['backup/util/helper','backup_array_iterator.class.php',39],['admin/tool/monitor/classes','subscription.php',43],['question/type/calculated','edit_calculated_form.php',51],['lib/spout/src/Spout/Reader/XLSX/Helper/SharedStringsCaching','FileBasedStrategy.php',57],['lib/form','datetimeselector.php',72],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['lib/classes','collator.php',58],['admin/tool/lp/classes','course_competency_statistics.php',48],['lib/google/src/Google/Service','Storage.php',57],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',28],['lib/lessphp/Tree','Paren.php',14],['mod/lti/classes','service_exception_handler.php',63],['lib/tcpdf/include/barcodes','pdf417.php',523],['mod/assign/feedback/offline','importgradeslib.php',66],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['question/engine/upgrade','upgradelib.php',283],['question/engine/upgrade','upgradelib.php',384],['question/type/numerical','question.php',323],['lib/pear/PEAR','Exception.php',107],['course/format','renderer.php',44],['lib/dml','oci_native_moodle_recordset.php',34],['question/behaviour','behaviourtypebase.php',133],['lib/pear/HTML','QuickForm.php',246],['lib/pear/HTML','QuickForm.php',1979],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['lib/google/src/Google/Auth','LoginTicket.php',37],['lib/adodb/drivers','adodb-csv.inc.php',41],['lib/adodb/drivers','adodb-csv.inc.php',196],['user/filters','yesno.php',33],['mod/wiki/parser','parser.php',98],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',87],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['admin/tool/lpmigrate/classes/form','migrate_framework.php',45],['backup/util/xml/parser/tests','parser_test.php',797],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['lib/tests','medialib_test.php',644],['lib/google/src/Google/Service','QPXExpress.php',39],['tag/classes/output','tagname.php',41],['lib/mustache/src/Mustache','Context.php',20],['lib/adodb/drivers','adodb-oracle.inc.php',32],['lib/adodb/drivers','adodb-oracle.inc.php',224],['backup/moodle2','restore_section_task.class.php',42],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['mod/forum/classes/output','forum_post.php',110],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['repository/googledocs','lib.php',65],['cache/stores/memcache','lib.php',120],['lib/filestorage','file_storage.php',78],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['lib/form','duration.php',55],['lib','outputlib.php',480],['lib','outputlib.php',2038],['filter/tex','latex.php',13],['backup/moodle2','backup_course_task.class.php',39],['lib/adodb','adodb.inc.php',310],['lib/adodb','adodb.inc.php',3035],['lib/adodb','adodb.inc.php',3160],['lib/adodb','adodb.inc.php',3242],['lib/adodb','adodb.inc.php',4353],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/google/src/Google/Logger','File.php',51],['admin/roles/classes','allow_role_page.php',37],['mod/quiz/report/overview','overview_table.php',41],['lib/lessphp/Tree','Keyword.php',17],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['question/type/ddmarker','questiontype.php',48],['mod/folder','renderer.php',159],['lib','portfoliolib.php',101],['tag/classes/output','tagcollsearchable.php',40],['webservice/soap/classes','wsdl.php',88],['lib/lessphp/Exception','Parser.php',30],['badges','renderer.php',973],['badges','renderer.php',1014],['badges','renderer.php',1078],['badges','renderer.php',1111],['badges','renderer.php',1137],['competency/classes/external','exporter.php',56],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['lib/google/src/Google/Service','Genomics.php',63],['lib/phpexcel/PHPExcel/Writer','PDF.php',38],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',125],['lib/google/src/Google/Service','Games.php',60],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',141],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/google/src/Google/Service','Licensing.php',40],['mod/workshop/form/comments','lib.php',99],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['lib/google/src/Google/Service','Fitness.php',58],['blocks/private_files','renderer.php',83],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',51],['enrol/flatfile','adminlib.php',35],['lib/xmldb','xmldb_object.php',55],['lib/google/src/Google/Service','Reports.php',47],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['auth/pam','auth.php',53],['lib/horde/framework/Horde','Stream.php',50],['comment','lib.php',100],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',53],['lib/google/src/Google/Service','Gmail.php',64],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/horde/framework/Horde/Mime','Related.php',32],['blocks','moodleblock.class.php',111],['lib/tcpdf','tcpdf_parser.php',92],['backup/util/plan','restore_structure_step.class.php',46],['blocks/rss_client/classes/output','channel_image.php',61],['lib/pear/HTML/QuickForm','hierselect.php',105],['question/type/numerical/tests','form_test.php',40],['badges/lib','backpacklib.php',40],['mod/workshop/allocation/manual','lib.php',51],['mod/quiz/report/responses','last_responses_table.php',39],['lib/simplepie','autoloader.php',62],['lib/spout/src/Spout/Common/Helper','StringHelper.php',21],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',121],['lib/pear/Crypt','CHAP.php',82],['lib/pear/Crypt','CHAP.php',170],['lib/pear/Crypt','CHAP.php',424],['lib/spout/src/Spout/Writer/Common/Helper','AbstractStyleHelper.php',22],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',63],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',77],['lib/simplepie/library/SimplePie','gzdecode.php',186],['mod/wiki','renderer.php',540],['lib/adodb','adodb-active-recordx.inc.php',138],['availability/classes','result.php',46],['lib','accesslib.php',5352],['lib','accesslib.php',5897],['lib','accesslib.php',6167],['lib','accesslib.php',6408],['lib','accesslib.php',6595],['lib','accesslib.php',6827],['lib','accesslib.php',7049],['lib','accesslib.php',7291],['lib/phpexcel/PHPExcel/Shared/OLE','PPS.php',110],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['auth/manual','auth.php',46],['question/engine/upgrade','behaviourconverters.php',78],['mod/wiki/diff','diff_nwiki.php',35],['mod/wiki/diff','diff_nwiki.php',50],['mod/wiki/diff','diff_nwiki.php',63],['mod/wiki/diff','diff_nwiki.php',76],['mod/wiki/diff','diff_nwiki.php',495],['mod/wiki/diff','diff_nwiki.php',640],['mod/wiki/diff','diff_nwiki.php',850],['mod/wiki/diff','diff_nwiki.php',901],['mod/wiki/diff','diff_nwiki.php',953],['lib/adodb/drivers','adodb-proxy.inc.php',28],['lib/classes/lock','file_lock_factory.php',57],['lib/google/src/Google/Auth','OAuth2.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['lib/filebrowser','file_info_context_module.php',47],['auth/none','auth.php',34],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/horde/framework/Horde/Text','Flowed.php',75],['admin/tool/log/store/legacy/classes/log','store.php',33],['lib/mustache/src/Mustache','HelperCollection.php',19],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['admin/tool/lp/classes/output','related_competencies.php',47],['mod/quiz/classes/question/bank','custom_view.php',44],['files','renderer.php',1083],['lib/form','text.php',47],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',398],['backup/cc','cc112moodle.php',59],['admin/tool/cohortroles/classes/output','cohort_role_assignments_table.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/google/src/Google/Service','Logging.php',39],['lib/lessphp/Tree','Expression.php',16],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/phpexcel/PHPExcel/Reader','HTML.php',118],['search/engine/solr/classes','schema.php',60],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['lib/adodb/drivers','adodb-ado5.inc.php',42],['lib/adodb/drivers','adodb-ado5.inc.php',380],['mod/assign/feedback/editpdf/classes','comment.php',58],['cache/classes','interfaces.php',473],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['repository/merlot','lib.php',37],['lib/adodb/drivers','adodb-firebird.inc.php',69],['backup/util/settings','backup_setting.class.php',43],['lib/adodb/drivers','adodb-fbsql.inc.php',28],['lib/adodb/drivers','adodb-fbsql.inc.php',167],['mnet/xmlrpc','serverlib.php',674],['webservice/soap','lib.php',45],['admin/tool/log/store/database/classes/log','store.php',47],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/form','passwordunmask.php',46],['lib/lessphp/Tree','Variable.php',20],['report/log/classes','renderable.php',96],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['question/classes/bank','view.php',70],['grade/report/singleview/classes/local/ui','range.php',38],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['admin/roles/classes','define_role_table_basic.php',31],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['blocks/rss_client','editfeed.php',36],['admin/tool/lpmigrate/classes/output','migrate_framework_results.php',55],['blocks/lp/classes/output','competencies_to_review_page.php',49],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',187],['mod/assign/feedback/file','renderable.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/adodb/drivers','adodb-db2.inc.php',66],['lib/adodb/drivers','adodb-db2.inc.php',731],['lib/adodb','adodb-xmlschema03.inc.php',136],['lib/adodb','adodb-xmlschema03.inc.php',270],['lib/adodb','adodb-xmlschema03.inc.php',678],['lib/adodb','adodb-xmlschema03.inc.php',823],['lib/adodb','adodb-xmlschema03.inc.php',1081],['lib/adodb','adodb-xmlschema03.inc.php',1399],['repository/youtube','lib.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',38],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/adodb/drivers','adodb-sybase_ase.inc.php',25],['lib/adodb/drivers','adodb-sybase_ase.inc.php',115],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/adodb','adodb-memcache.lib.inc.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',118],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',117],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['lib/spout/src/Spout/Common/Helper','FileSystemHelper.php',22],['lib/pear/HTML/QuickForm','button.php',37],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/mustache/src/Mustache','Engine.php',63],['lib/google/src/Google/Http','MediaFileUpload.php',75],['lib/phpexcel/PHPExcel','Worksheet.php',327],['mod/assign','gradingtable.php',68],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1196],['repository/webdav','lib.php',38],['tag/classes/output','tagisstandard.php',39],['lib/google/src/Google/Service','Appsactivity.php',52],['badges/criteria','award_criteria_course.php',47],['lib','searchlib.php',53],['lib','searchlib.php',95],['lib/lessphp/Output','Mapped.php',39],['availability/classes','tree.php',118],['lib/lessphp/Tree','Javascript.php',20],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/mustache/src/Mustache/Loader','InlineLoader.php',56],['repository/url','lib.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',293],['lib/lessphp/Tree','Ruleset.php',45],['tag/classes/output','tagindex.php',52],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/google/src/Google/Service','Prediction.php',51],['lib/classes/output','notification.php',101],['lib/lessphp/Tree','Unit.php',16],['backup/util/settings/course','course_backup_setting.class.php',25],['lib/spout/src/Spout/Writer','AbstractWriter.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib','dtllib.php',66],['mod/assign','assignmentplugin.php',50],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['backup/cc/cc_lib','cc_version11.php',57],['availability/condition/completion/classes','condition.php',48],['admin/roles/classes','allow_override_page.php',31],['mod/workshop/allocation','lib.php',103],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/spout/src/Spout/Reader/Wrapper','SimpleXMLElement.php',23],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/phpexcel/PHPExcel/Calculation','Function.php',64],['availability/classes','capability_checker.php',49],['lib/google/src/Google/Service','Drive.php',76],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',56],['lib','setuplib.php',67],['lib','setuplib.php',113],['lib','setuplib.php',165],['lib','setuplib.php',184],['lib','setuplib.php',199],['lib','setuplib.php',219],['lib','setuplib.php',249],['lib','setuplib.php',271],['lib','setuplib.php',287],['lib','setuplib.php',309],['lib','setuplib.php',328],['lib','setuplib.php',346],['lib/form','textarea.php',50],['webservice/soap','locallib.php',57],['availability/classes','info.php',55],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/spout/src/Spout/Reader/XLSX/Helper','SheetHelper.php',49],['filter/urltolink/tests','filter_test.php',209],['lib/simplepie/library/SimplePie','Category.php',81],['admin/tool/lp/classes/output','manage_competencies_page.php',65],['lib/markdown','Markdown.php',99],['mod/assign','locallib.php',160],['mod/assign','locallib.php',8131],['lib/adodb/drivers','adodb-ldap.inc.php',48],['lib/adodb/drivers','adodb-ldap.inc.php',297],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',32],['lib/editor/tinymce/plugins/spellchecker/classes/utils','JSON.php',373],['lib','odslib.class.php',42],['lib','odslib.class.php',124],['lib','odslib.class.php',422],['lib','odslib.class.php',827],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',36],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/lessphp/Tree','Quoted.php',20],['mod/lesson','mod_form.php',36],['blocks/rss_client/classes/output','item.php',89],['lib/google/src/Google/Service','IdentityToolkit.php',38],['lib/horde/framework/Horde/Stream','Temp.php',25],['tag/classes/output','tagflag.php',39],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['lib/behat/form_field','behat_form_field.php',59],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',93],['lib/spout/src/Spout/Reader/ODS/Helper','CellValueFormatter.php',42],['tag/classes','collections_table.php',36],['lib/google/src/Google/Service','Spectrum.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['admin/tool/lp/classes/output','user_competency_summary.php',49],['lib/phpexcel/PHPExcel','NamedRange.php',65],['lib/pear/HTML/QuickForm','image.php',36],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['lib/form','searchableselector.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',52],['lib/adodb/drivers','adodb-oci805.inc.php',51],['lib/google/src/Google','Service.php',28],['lib/google/src/Google/IO','Abstract.php',50],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',46],['lib/form','header.php',45],['question/type/randomsamatch/tests','helper.php',121],['mod/workshop/form/accumulative','lib.php',99],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',89],['lib/form','submit.php',41],['report/log/classes','table_log.php',45],['admin/roles/classes','admins_potential_selector.php',30],['question/classes/engine/variants','least_used_strategy.php',51],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['mod/data','lib.php',68],['mod/data','lib.php',2278],['mod/data','lib.php',2552],['mod/data','lib.php',2573],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['mod/scorm','renderer.php',129],['lib/phpunit/classes','advanced_testcase.php',45],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',41],['backup/cc/cc_lib','cc_version1.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['tag/classes','areas_table.php',36],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',125],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/google/src/Google/Service','Proximitybeacon.php',42],['lib/pear','PEAR.php',139],['lib/pear','PEAR.php',818],['competency/classes/external','persistent_exporter.php',42],['lib/google/src/Google/Service','Groupssettings.php',40],['lib/phpexcel/PHPExcel/Reader','CSV.php',87],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/google/src/Google/Service','Directory.php',134],['lib/google/src/Google/Service','Fusiontables.php',48],['question/type/missingtype','edit_missingtype_form.php',38],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/lessphp/Tree','Directive.php',20],['auth/ldap','auth.php',119],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',245],['availability/condition/date/classes','condition.php',52],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes','string_manager_standard.php',53],['repository/skydrive','microsoftliveapi.php',50],['user/filters','globalrole.php',35],['enrol/lti/ims-blti','OAuth.php',16],['enrol/lti/ims-blti','OAuth.php',32],['enrol/lti/ims-blti','OAuth.php',187],['enrol/lti/ims-blti','OAuth.php',451],['course/classes/output','course_module_name.php',46],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Mime','Mdn.php',35],['lib/pear/HTML/QuickForm','html.php',36],['repository/s3','S3.php',193],['repository/s3','S3.php',2018],['repository/s3','S3.php',2374],['lib/spout/src/Spout/Reader/XLSX/Helper','SharedStringsHelper.php',39],['question/classes/bank/search','hidden_condition.php',42],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/pear/HTML/QuickForm','element.php',73],['question/classes/statistics/responses','analysis_for_subpart.php',50],['admin/tool/log/classes','setting_managestores.php',30],['lib/google/src/Google/Service','Mirror.php',49],['lib/adodb/drivers','adodb-db2ora.inc.php',80],['lib/minify/lib/HTTP','Encoder.php',75],['mod/feedback/classes','completion.php',47],['admin/tool/uploadcourse/classes','processor.php',122],['lib/lessphp','Parser.php',78],['lib/adodb/drivers','adodb-sapdb.inc.php',36],['lib/adodb/drivers','adodb-sapdb.inc.php',179],['lib/ddl','sql_generator.php',175],['lib/google/src/Google/Service','AndroidEnterprise.php',51],['admin/tool/lp/classes/output','template_competencies_page.php',70],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['mod/assignment/backup/moodle1','lib.php',223],['blocks','edit_form.php',47],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['mod/quiz/report/statistics','statistics_question_table.php',49],['mod/workshop/form/numerrors','lib.php',102],['mod/quiz/classes','repaginate.php',49],['lib/classes/session','memcached.php',51],['lib/phpexcel/PHPExcel/Shared/OLE/PPS','Root.php',43],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',206],['mod/workshop','mod_form.php',43],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',48],['availability/condition/profile/classes','condition.php',73],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['auth/cas/CAS/CAS','Client.php',862],['lib/xhprof','xhprof_moodle.php',788],['lib/dtl','file_xml_database_exporter.php',36],['course','lib.php',3061],['lib/adodb/drivers','adodb-mssqlpo.inc.php',54],['lib/xmldb','xmldb_table.php',49],['lib/adodb/perf','perf-postgres.inc.php',92],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['question/type/ddmarker','shapes.php',40],['question/type/ddmarker','shapes.php',203],['question/type/ddmarker','shapes.php',267],['question/type/ddmarker','shapes.php',332],['question/type/ddmarker','shapes.php',470],['mod/lti/classes/local/ltiservice','response.php',58],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/pear/HTML','Common.php',79],['mod/glossary','locallib.php',481],['lib/adodb/perf','perf-mssqlnative.inc.php',70],['lib/adodb/perf','perf-mssql.inc.php',70],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['lib/classes/event','base.php',124],['lib/form','checkbox.php',46],['admin/roles/classes','permissions_table.php',38],['lib/pear/HTML/QuickForm','submit.php',37],['auth/fc','auth.php',37],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/minify/lib/Minify/Cache','Memcache.php',22],['lib/lessphp/Tree','Condition.php',18],['admin/tool/lp/classes/output','plans_page.php',59],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',52],['lib/phpexcel/PHPExcel','Comment.php',93],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/lessphp/Tree','Url.php',17],['mod/lesson','override_form.php',58],['lib/form','button.php',45],['admin/tool/lp/classes/output','manage_templates_page.php',56],['lib/google/src/Google/Service','Playmoviespartner.php',44],['backup/util/ui','base_ui_stage.class.php',67],['backup/cc/cc_lib','cc_converters.php',75],['lib/dtl','database_mover.php',33],['enrol','locallib.php',125],['enrol','locallib.php',1256],['enrol','locallib.php',1379],['enrol','locallib.php',1430],['enrol','locallib.php',1463],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['backup/moodle2','restore_course_task.class.php',41],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib','xmlize.php',31],['lib','googleapi.php',52],['lib','googleapi.php',243],['grade/report/singleview/classes/local/ui','element.php',47],['lib/html2text','lib.php',43],['user/filters','lib.php',52],['user/filters','lib.php',272],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/classes/lock','db_record_lock_factory.php',61],['lib/pear/HTML/QuickForm','link.php',47],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['lib/phpunit/classes','hint_resultprinter.php',37],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['auth/pop3','auth.php',35],['lib/adodb/drivers','adodb-oci8.inc.php',106],['lib/adodb/drivers','adodb-oci8.inc.php',1539],['lib/adodb/drivers','adodb-oci8.inc.php',1805],['lib/classes/session','database.php',52],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['question/classes/bank/search','category_condition.php',60],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',63],['lib/jabber/XMPP','Log.php',67],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/lessphp/Tree','Assignment.php',15],['lib/dtl','string_xml_database_importer.php',34],['admin/tool/lp/classes/output','manage_competency_frameworks_page.php',62],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['repository/recent','lib.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['admin/webservice','lib.php',38],['lib','coursecatlib.php',194],['lib','coursecatlib.php',2782],['lib/google/src/Google/Service','Cloudtrace.php',43],['lib','filterlib.php',73],['lib','filterlib.php',377],['lib','filterlib.php',456],['lib/classes/lock','lock_factory.php',39],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['enrol','renderer.php',426],['enrol','renderer.php',723],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['admin/tool/lp/classes','course_competency_rule_form_element.php',45],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/phpunit/classes','basic_testcase.php',39],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',49],['backup/util/dbops','backup_dbops.class.php',37],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/structure','backup_optigroup_element.class.php',51],['mod/quiz/report/grading','gradingsettings_form.php',44],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/form','hidden.php',44],['repository/filesystem','lib.php',48],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',409],['backup/util/helper','restore_log_rule.class.php',62],['tag/classes','tag.php',77],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/spout/src/Spout/Writer/Style','StyleBuilder.php',19],['lib/dml','sqlsrv_native_moodle_database.php',53],['user/filters','date.php',40],['auth/nologin','auth.php',35],['lib/google/src/Google','Model.php',35],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/adodb/drivers','adodb-mysqli.inc.php',66],['lib/adodb/drivers','adodb-mysqli.inc.php',887],['lib/adodb/drivers','adodb-mysqli.inc.php',1193],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/form','questioncategory.php',46],['lib/mustache/src/Mustache','Template.php',29],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/google/src/Google/Logger','Abstract.php',123],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel','ReferenceHelper.php',58],['lib/pear/HTML/QuickForm','password.php',37],['lib/dml','moodle_transaction.php',40],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['repository/flickr','lib.php',51],['lib/form','grading.php',57],['lib/classes/update','api.php',71],['backup/cc/cc_lib','cc_converter_lti.php',29],['backup/moodle2','backup_subplugin.class.php',44],['lib/portfolio','caller.php',67],['lib/classes/progress','display_if_slow.php',60],['lib/adodb/perf','perf-informix.inc.php',66],['lib/classes','chart_base.php',52],['lib/lessphp/Tree','Media.php',18],['lib/spout/src/Spout/Common/Escaper','XLSX.php',19],['grade/export/ods','grade_export_ods.php',24],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/google/src/Google/Service','Calendar.php',50],['lib/form','group.php',44],['lib/phpexcel/PHPExcel/Writer','OpenDocument.php',44],['lib/pear/HTML/QuickForm/Renderer','Object.php',75],['admin/tool/lp/classes/output','user_evidence_page.php',48],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['grade/export/xls','grade_export_xls.php',24],['lib/classes/output','mustache_pix_helper.php',43],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/google/src/Google/Auth','ComputeEngine.php',35],['cache/stores/session','lib.php',131],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['admin/tool/log/store/database/backup/moodle2','backup_logstore_database_nested_element.php',43],['user','renderer.php',220],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['availability/condition/grade/classes','condition.php',46],['lib/lessphp/Tree','RulesetCall.php',14],['blocks/rss_client/classes/output','feed.php',75],['lib/form','select.php',47],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/lessphp/Visitor','toCSS.php',13],['lib','outputfragmentrequirementslib.php',40],['backup/util/ui','restore_moodleform.class.php',34],['lib/google/src/Google/Service','Cloudbilling.php',43],['lib/google/src/Google/Service','PlusDomains.php',72],['lib','externallib.php',37],['lib','externallib.php',531],['lib','externallib.php',562],['lib','externallib.php',593],['lib','externallib.php',622],['lib','externallib.php',648],['lib','externallib.php',778],['lib','externallib.php',813],['lib','externallib.php',984],['lib','externallib.php',1177],['blog','locallib.php',71],['blog','locallib.php',564],['blog','locallib.php',847],['blog','locallib.php',892],['blog','locallib.php',965],['blog','locallib.php',1016],['blog','locallib.php',1041],['blog','locallib.php',1051],['blog','locallib.php',1063],['blog','locallib.php',1084],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',53],['auth/cas','auth.php',39],['lib','lexer.php',41],['lib','lexer.php',145],['lib','lexer.php',217],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/google/src/Google/Service','Exception.php',34],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['tag/classes/output','tagcloud.php',49],['lib/google/src/Google/Service','Storagetransfer.php',44],['user/filters','select.php',46],['cache/stores/mongodb','lib.php',116],['admin/tool/lp/classes/output','course_competencies_page.php',73],['lib/google/src/Google/Cache','Null.php',28],['lib','graphlib.php',1176],['lib/phpexcel/PHPExcel/Style','Protection.php',49],['lib/google/src/Google/Service','GamesConfiguration.php',42],['repository/dropbox','locallib.php',46],['lib/phpexcel/PHPExcel/Style','Alignment.php',100],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['cache/stores/file','lib.php',117],['tag/classes/output','tagareashowstandard.php',41],['question/type/multianswer','edit_multianswer_form.php',63],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',395],['mod/assign','renderable.php',531],['mod/assign','renderable.php',586],['mod/assign','renderable.php',670],['mod/assign','renderable.php',707],['mod/assign','renderable.php',747],['mod/assign','renderable.php',800],['mod/assign','renderable.php',854],['lib/form','selectwithlink.php',56],['backup/moodle2','backup_activity_task.class.php',45],['lib/phpmailer','class.phpmailer.php',633],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['auth/db','auth.php',36],['lib/lessphp/Tree','Value.php',14],['lib/form','course.php',62],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['cohort','locallib.php',37],['cohort','locallib.php',101],['badges/criteria','award_criteria.php',127],['lib/adodb/perf','perf-mysql.inc.php',86],['cache/stores/memcached','lib.php',133],['grade/report/singleview/classes/local/ui','empty_element.php',38],['lib/google/src/Google/Service','AppState.php',40],['lib/adodb/drivers','adodb-odbc_oracle.inc.php',107],['lib/pear/HTML/QuickForm/Renderer','Default.php',139],['tag/classes/output','tag.php',46],['question','previewlib.php',122],['backup/util/loggers','database_logger.class.php',40],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/phpexcel/PHPExcel/Reader','SYLK.php',67],['lib/form','submitlink.php',47],['backup/util/dbops','restore_dbops.class.php',1788],['lib/xmldb','xmldb_index.php',56],['question','category_class.php',58],['question','category_class.php',160],['lib/google/src/Google/Service','Webfonts.php',38],['webservice/xmlrpc','locallib.php',41],['admin/roles/classes','check_users_selector.php',38],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['user/profile/field/checkbox','field.class.php',33],['lib/form','cancel.php',47],['lib/google/src/Google/Service','Resourceviews.php',57],['lib/phpexcel/PHPExcel/Style','Font.php',100],['lib/portfolio','plugin.php',445],['calendar','lib.php',2003],['calendar','lib.php',2774],['mod/wiki','pagelib.php',93],['mod/wiki','pagelib.php',380],['mod/wiki','pagelib.php',981],['mod/wiki','pagelib.php',1190],['mod/wiki','pagelib.php',2194],['mod/wiki','pagelib.php',2422],['tag/classes/output','tagfeed.php',43],['tag/classes/output','tagareaenabled.php',38],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['mod/workshop','locallib.php',183],['mod/workshop','locallib.php',2976],['mod/workshop','locallib.php',3411],['mod/workshop','locallib.php',3647],['mod/workshop','locallib.php',3889],['mod/workshop','locallib.php',3975],['mod/workshop','locallib.php',4060],['mod/workshop','locallib.php',4079],['lib/form','advcheckbox.php',48],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['cohort/classes/output','cohortidnumber.php',37],['lib/adodb/drivers','adodb-ado.inc.php',42],['lib/adodb/drivers','adodb-ado.inc.php',346],['lib/form','filepicker.php',53],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/tests/fixtures','test_renderer_factory.php',41],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['grade/report/singleview','lib.php',69],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/google/src/Google/Logger','Psr.php',39],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['lib/lessphp/Tree','Import.php',30],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',37],['lib/google/src/Google/Service','Classroom.php',60],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',875],['admin/tool/lp/classes/external','competency_path_exporter.php',38],['cohort/classes/output','cohortname.php',37],['grade/report/overview','lib.php',76],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpunit/classes','arraydataset.php',45],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1532],['question/engine','questionattempt.php',1618],['question/engine','questionattempt.php',1703],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['webservice/rest','lib.php',47],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',79],['backup/util/xml/output','memory_xml_output.class.php',37],['repository/flickr_public','image.php',34],['mod/lti/classes/local/ltiservice','resource_base.php',62],['admin/tool/lp/classes/output','template_plans_table.php',53],['mod/quiz','mod_form.php',48],['lib/simplepie/library/SimplePie','Caption.php',98],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',30],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['backup/moodle2','backup_theme_plugin.class.php',61],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/phpexcel/PHPExcel','DocumentSecurity.php',65],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',45],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',49],['lib/lessphp/Tree','Operation.php',19],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',461],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1699],['backup/cc/cc_lib','cc_converter_folder.php',28],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/google/src/Google/Service','SQLAdmin.php',50],['lib/lessphp/Tree','DetachedRuleset.php',15],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['mod/quiz','override_form.php',58],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',97],['lib/adodb/perf','perf-db2.inc.php',61],['lib/phpexcel/PHPExcel/Style','Supervisor.php',44],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['lib/ddl','database_manager.php',48],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['admin/roles/classes','define_role_table_advanced.php',46],['lib/dml','oci_native_moodle_temptables.php',40],['lib/horde/framework/Horde/Stream','Existing.php',28],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['availability/classes','multiple_messages.php',56],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/pear/Net','GeoIP.php',323],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/form','modgrade.php',78],['admin/tool/log/store/database/backup/moodle2','restore_logstore_database_subplugin.class.php',40],['cache/classes','config.php',80],['lib/pear/HTML/QuickForm','hidden.php',37],['question/type/calculated','datasetitems_form.php',72],['lib/tests','navigationlib_test.php',554],['lib/tests','navigationlib_test.php',612],['lib/tests','navigationlib_test.php',639],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/tests','completionlib_test.php',882],['admin/tool/generator/classes','site_backend.php',58],['lib/jabber/XMPP','XMLStream.php',171],['lib/simplepie/library/SimplePie','Sanitize.php',75],['cache/classes','factory.php',149],['lib/minify/lib/Minify/Cache','WinCache.php',20],['user/classes/output/myprofile','node.php',82],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/adodb/drivers','adodb-borland_ibase.inc.php',83],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',44],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',262],['lib/classes/update','code_manager.php',57],['search/engine/solr/classes','engine.php',103],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/google/src/Google/Service','Compute.php',89],['lib/phpexcel/PHPExcel/Style','Borders.php',113],['lib','completionlib.php',243],['lib/google/src/Google/Service','Pubsub.php',44],['lib/adodb/drivers','adodb-ads.inc.php',69],['lib/adodb/drivers','adodb-ads.inc.php',657],['lib/markdown','MarkdownExtra.php',56],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/google/src/Google/Service','YouTube.php',75],['lib/lessphp','Functions.php',15],['auth/cas/CAS/CAS','AuthenticationException.php',53],['mod/quiz','locallib.php',1923],['competency/classes/external','stored_file_exporter.php',45],['user/filters','checkbox.php',51],['backup/moodle2','restore_settingslib.php',86],['backup/moodle2','restore_settingslib.php',149],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/pear/HTML/QuickForm','date.php',260],['lib/lessphp/SourceMap','Generator.php',82],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['mod/lti/service/memberships/classes/local/service','memberships.php',50],['lib/google/src/Google/Cache','Apc.php',37],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['lib/pear/Auth','RADIUS.php',120],['lib/pear/Auth','RADIUS.php',579],['lib/pear/Auth','RADIUS.php',672],['lib/pear/Auth','RADIUS.php',879],['lib/adodb/drivers','adodb-ado_access.inc.php',46],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',519],['lib/google/src/Google/Http','Request.php',58],['lib/google/src/Google/Service','Dfareporting.php',99],['lib/google/src/Google/Service','Manager.php',60],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/google/src/Google/Service','CloudMonitoring.php',45],['lib/editor/tinymce/plugins/spellchecker/classes','SpellChecker.php',11],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['lib','webdavlib.php',84],['lib/dml','pgsql_native_moodle_recordset.php',43],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/mustache/src/Mustache','LambdaHelper.php',25],['question/engine/upgrade/tests','helper.php',45],['admin/tool/uploadcourse/classes','tracker.php',72],['grade/report/user','lib.php',188],['lib/adodb/drivers','adodb-sqlanywhere.inc.php',156],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/adodb/drivers','adodb-db2oci.inc.php',220]], 1102],
'add_regions': ['add_regions', 'Add an array of regions ', [['lib','blocklib.php',409]], 5],
'get_addable_blocks': ['get_addable_blocks', 'The list of block types that may be added to this page. ', [['lib','blocklib.php',189]], 2],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'process_url_edit': ['process_url_edit', 'Handle showing/processing the submission from the block editing form. ', [['lib','blocklib.php',1316]], 1],
'is_known_region': ['is_known_region', 'Find out if a region exists on a page ', [['lib','blocklib.php',267]], 7],
'ensure_param_not_in_url': ['ensure_param_not_in_url', 'Make sure page URL does not contain the given URL parameter. ', [['lib','pagelib.php',1265]], 10],
'get_renderer': ['get_renderer', 'Returns instance of page renderer used by this plugin ', [['course/format','lib.php',905],['question/type/multichoice','question.php',156],['question/type/multichoice','question.php',278],['question/behaviour','behaviourbase.php',135],['question/type','questionbase.php',275],['lib','pagelib.php',802],['lib','outputlib.php',1828],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['mod/assign','locallib.php',2987],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49],['grade/grading/form/guide','lib.php',492]], 452],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'footer': ['footer', 'This method is used to render the page footer. It is automatically called by AddPage() and could be overwritten in your own inherited class. ', [['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1034],['lib','outputrenderers.php',4427],['lib','outputrenderers.php',4546],['mod/lesson','renderer.php',78]], 810],
'out_omit_querystring': ['out_omit_querystring', 'Returns url without parameters, everything before \'?\'. ', [['lib','weblib.php',605]], 27],
'reposition_block': ['reposition_block', 'Move a block to a new position on this page. ', [['lib','blocklib.php',779]], 4],
'default_page_type_list': ['default_page_type_list', 'Generates a default page type list when a more appropriate callback cannot be decided upon. ', [['lib','blocklib.php',1868]], 1],
'block_add_block_ui': ['block_add_block_ui', 'Return a {@link block_contents} representing the add a new block UI, if this user is allowed to see it. ', [['lib','blocklib.php',1934]], 1],
'course_get_format': ['course_get_format', 'Returns an instance of format class (extending format_base) for given course ', [['course/format','lib.php',27]], 99],
'get_view_url': ['get_view_url', 'The URL to use for the specified course (with section) ', [['course/format/weeks','lib.php',89],['course/format','lib.php',398],['course/format','lib.php',1124],['course/format','formatlegacy.php',72],['course/format/social','lib.php',38],['course/format/singleactivity','lib.php',39],['course/format/topics','lib.php',86],['tag/classes','tag.php',409]], 10],
'create_block_instances': ['create_block_instances', 'Create a set of new block instance from a record array ', [['lib','blocklib.php',927]], 1],
'user_can_delete_block': ['user_can_delete_block', '', [['lib','blocklib.php',1149]], 2],
'on': ['on', '', [['lib/requirejs','require.js',508],['lib/jquery','jquery-3.1.0.js',4809]], 3823],
'get_plugin_types': ['get_plugin_types', 'Lists all plugin types. ', [['lib','deprecatedlib.php',116],['lib/classes','plugin_manager.php',140],['lib/classes','component.php',786]], 60],
'user_can_edit': ['user_can_edit', 'Allows the block class to have a say in the user\'s ability to edit (i.e., configure) blocks of this type. The framework has first say in whether this will be allowed (e.g., no editing allowed unless in edit mode) but if the framework does allow it, the block can still decide to refuse. ', [['blocks','moodleblock.class.php',514],['blocks/community','block_community.php',41]], 7],
'block_instance': ['block_instance', 'Creates a new instance of the specified block class. ', [['lib','blocklib.php',1672]], 13],
'set_label': ['set_label', 'Sets the label. ', [['backup/util/ui','backup_ui_setting.class.php',143],['lib','outputcomponents.php',839],['lib','outputcomponents.php',961],['lib/classes','chart_axis.php',143],['backup/cc/cc_lib','cc_asssesment.php',378],['backup/cc/cc_lib','cc_asssesment.php',492],['backup/cc/cc_lib','cc_asssesment.php',1725]], 54],
'prepare_per_region_arrays': ['prepare_per_region_arrays', 'Returns an array of region names as keys and nested arrays for values ', [['lib','blocklib.php',913]], 2],
'show_only_fake_blocks': ['show_only_fake_blocks', 'Turns the display of normal blocks either on or off. ', [['lib','blocklib.php',1645]], 6],
'get_context_name': ['get_context_name', 'Returns human readable context identifier. ', [['lib','accesslib.php',5639],['lib','accesslib.php',6189],['lib','accesslib.php',6431],['lib','accesslib.php',6618],['lib','accesslib.php',6850],['lib','accesslib.php',7072],['lib','accesslib.php',7314]], 73],
'blocks_delete_instances': ['blocks_delete_instances', 'Delete multiple blocks at once. ', [['lib','blocklib.php',2068]], 2],
'confirm': ['confirm', 'Print a message along with button choices for Continue/Cancel ', [['lib','outputrenderers.php',1734]], 204],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1170]], 426],
'get_content_for_region': ['get_content_for_region', 'Returns an array of block content objects that exist in a region ', [['lib','blocklib.php',292]], 1],
'get_plugins_with_function': ['get_plugins_with_function', 'Get a list of all the plugins that define a certain API function in a certain file. ', [['lib','moodlelib.php',7249]], 18],
'process_url_delete': ['process_url_delete', 'Handle deleting a block. ', [['lib','blocklib.php',1197]], 1],
'user_can_edit_blocks': ['user_can_edit_blocks', 'Does the user have permission to edit blocks on this page. ', [['lib','pagelib.php',866]], 12],
'load_blocks': ['load_blocks', 'Load blocks using the system context, rather than the user\'s context. ', [['my','lib.php',193],['lib','blocklib.php',536]], 15],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'add_fake_block': ['add_fake_block', 'Add something that looks like a block, but which isn\'t an actual block_instance, to this page. ', [['lib','blocklib.php',450]], 8],
'add_blocks': ['add_blocks', 'Convenience method, calls add_block repeatedly for all the blocks in $blocks. Optionally, a starting weight can be used to decide the starting point that blocks are added in the region, the weight is passed to {@link add_block} and incremented by the position of the block in the $blocks array ', [['lib','blocklib.php',757]], 6],
'param': ['param', '', [['lib/adodb/drivers','adodb-postgres64.inc.php',609],['lib','weblib.php',453],['lib/adodb/drivers','adodb-oci8po.inc.php',39],['lib/adodb','adodb.inc.php',934],['lib/adodb/drivers','adodb-oci8.inc.php',1179],['lib/adodb/drivers','adodb-db2oci.inc.php',163]], 640],
'get_plugin_directory': ['get_plugin_directory', 'Returns the exact absolute path to plugin directory. ', [['lib','deprecatedlib.php',191],['lib/classes','component.php',938]], 22],
'blocks_add_default_system_blocks': ['blocks_add_default_system_blocks', 'Add the default system-context blocks. E.g. the admin tree. ', [['lib','blocklib.php',2267]], 1],
'_load_instance': ['_load_instance', 'Set up a particular instance of this class given data from the block_insances table and the current page. (See {@link block_manager::load_blocks()}.) ', [['blocks','moodleblock.class.php',411]], 1],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',609]], 2210],
'get_overridable_roles': ['get_overridable_roles', 'Gets a list of roles that this user can override in this context. ', [['lib','accesslib.php',3550]], 16],
'applicable_formats': ['applicable_formats', '', [['blocks/blog_menu','block_blog_menu.php',44],['blocks/course_overview','block_course_overview.php',109],['blocks/completionstatus','block_completionstatus.php',40],['blocks/private_files','block_private_files.php',35],['blocks/admin_bookmarks','block_admin_bookmarks.php',57],['blocks/myprofile','block_myprofile.php',215],['blocks/mentees','block_mentees.php',31],['blocks/html','block_html.php',35],['blocks/section_links','block_section_links.php',41],['blocks/lp','block_lp.php',36],['blocks/site_main_menu','block_site_main_menu.php',30],['blocks/social_activities','block_social_activities.php',30],['blocks/tag_flickr','block_tag_flickr.php',34],['blocks/mnet_hosts','block_mnet_hosts.php',34],['blocks/quiz_results','block_quiz_results.php',44],['blocks/settings','block_settings.php',72],['blocks/activity_modules','block_activity_modules.php',100],['blocks/blog_tags','block_blog_tags.php',44],['blocks/feedback','block_feedback.php',35],['blocks','moodleblock.class.php',352],['blocks/search_forums','block_search_forums.php',64],['blocks/navigation','block_navigation.php',71],['blocks/comments','block_comments.php',40],['blocks/badges','block_badges.php',51],['blocks/blog_recent','block_blog_recent.php',38],['blocks/selfcompletion','block_selfcompletion.php',41],['blocks/recent_activity','block_recent_activity.php',222],['blocks/tag_youtube','block_tag_youtube.php',39],['blocks/course_summary','block_course_summary.php',36],['blocks/tags','block_tags.php',34],['blocks/participants','block_participants.php',70],['blocks/login','block_login.php',30],['blocks/activity_results','block_activity_results.php',67],['blocks/rss_client','block_rss_client.php',40]], 3],
'blocks_set_visibility': ['blocks_set_visibility', 'Set a block to be visible or hidden on a particular page. ', [['lib','blocklib.php',2119]], 2],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'generate_page_type_patterns': ['generate_page_type_patterns', 'Given a specific page type, parent context and currect context, return all the page type patterns that might be used by this block. ', [['lib','blocklib.php',1777]], 3],
'get_preload_record_columns_sql': ['get_preload_record_columns_sql', 'Returns all fields necessary for context preloading from user $rec. ', [['lib','accesslib.php',6066]], 56],
'region_uses_dock': ['region_uses_dock', 'Checks to see whether any of the blocks within the given regions are docked ', [['lib','blocklib.php',511]], 0],
'blocks_delete_all_for_context': ['blocks_delete_all_for_context', 'Delete all the blocks that belong to a particular context. ', [['lib','blocklib.php',2103]], 3],
'process_url_show_hide': ['process_url_show_hide', 'Handle showing or hiding a block. ', [['lib','blocklib.php',1284]], 1],
'get_core_subsystems': ['get_core_subsystems', 'List all core subsystems and their location ', [['lib','deprecatedlib.php',74],['lib/classes','component.php',767]], 20],
'get_default_blocks': ['get_default_blocks', 'Returns the list of blocks to be automatically added for the newly created course ', [['course/format/weeks','lib.php',207],['course/format','lib.php',470],['course/format','lib.php',1136],['course/format','formatlegacy.php',226],['course/format/social','lib.php',65],['course/format/singleactivity','lib.php',124],['course/format/topics','lib.php',202]], 2],
'redirect': ['redirect', '', [['enrol/lti/ims-blti','blti.php',230],['lib','weblib.php',2659]], 999],
'get_recordset': ['get_recordset', 'Get the recordset. ', [['mod/glossary/classes','entry_query_builder.php',305],['lib/dml','moodle_database.php',1162]], 92],
'set_url': ['set_url', 'Convenience method handling moodle_urls. ', [['competency/classes','evidence.php',151],['lib','outputcomponents.php',2828],['backup/cc/cc_lib','cc_weblink.php',50],['lib','pagelib.php',1227],['blocks/rss_client/classes/output','channel_image.php',89],['backup/util/ui','restore_ui_components.php',141],['mod/wiki','pagelib.php',245],['mod/wiki','pagelib.php',333],['mod/wiki','pagelib.php',425],['mod/wiki','pagelib.php',696],['mod/wiki','pagelib.php',721],['mod/wiki','pagelib.php',835],['mod/wiki','pagelib.php',879],['mod/wiki','pagelib.php',1008],['mod/wiki','pagelib.php',1112],['mod/wiki','pagelib.php',1219],['mod/wiki','pagelib.php',1462],['mod/wiki','pagelib.php',1864],['mod/wiki','pagelib.php',1932],['mod/wiki','pagelib.php',2104],['mod/wiki','pagelib.php',2165],['mod/wiki','pagelib.php',2221],['mod/wiki','pagelib.php',2286],['mod/wiki','pagelib.php',2334],['mod/wiki','pagelib.php',2382],['mod/wiki','pagelib.php',2486]], 596],
'is_cancelled': ['is_cancelled', 'Returns true if the form was cancelled, false otherwise ', [['backup/util/ui','base_moodleform.class.php',330],['lib','formslib.php',589],['mod/feedback/item','feedback_item_class.php',43],['mod/feedback/item','feedback_item_class.php',258],['mod/feedback/item/captcha','lib.php',63]], 156],
'add_region': ['add_region', 'Add a region to a page ', [['lib','blocklib.php',379]], 18],
'create_all_block_instances': ['create_all_block_instances', 'Create all the block instances for all the blocks that were loaded by load_blocks. This is used, for example, to ensure that all blocks get a chance to initialise themselves via the {@link block_base::specialize()} method, before any output is done. ', [['lib','blocklib.php',943]], 1],
'get_recordset_list': ['get_recordset_list', 'Get a number of records as a moodle_recordset where one field match one list of values. ', [['lib/dml','moodle_database.php',1201]], 9],
'get_regions': ['get_regions', 'Get an array of all region names on this page where a block may appear ', [['lib','blocklib.php',164]], 16],
'get_site': ['get_site', 'Returns $course object of the top-level site. ', [['lib','datalib.php',547]], 77],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'find_instance': ['find_instance', 'Find a given block by its instance id ', [['lib','blocklib.php',840]], 5],
'check_region_is_known': ['check_region_is_known', 'Check if a region is known by its name ', [['lib','blocklib.php',901]], 4],
'check_is_loaded': ['check_is_loaded', 'Check whether the page blocks have been loaded yet ', [['lib','blocklib.php',871]], 6],
'get_default_region': ['get_default_region', 'Get the region name of the region blocks are added to by default ', [['lib','blocklib.php',176]], 6],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'ensure_content_created': ['ensure_content_created', 'Ensure that there is some content within the given region ', [['lib','blocklib.php',1016]], 5],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 641],
'instance_create': ['instance_create', 'Do any additional initialization you may need at the time a new block instance is created ', [['blocks','moodleblock.class.php',489]], 1],
'get_title': ['get_title', 'Return criteria title for display in reports ', [['completion/criteria','completion_criteria_course.php',120],['question/classes/bank','question_type_column.php',30],['lib/simplepie/library','SimplePie.php',1969],['completion/criteria','completion_criteria_date.php',106],['lib/simplepie/library/SimplePie','Source.php',104],['question/classes/bank','question_text_row.php',39],['question/classes/bank','modifier_name_column.php',31],['question/classes/bank','checkbox_column.php',36],['lib','outputcomponents.php',2764],['question/classes/bank','action_column_base.php',28],['lib/simplepie/library/SimplePie','Enclosure.php',860],['lib','navigationlib.php',582],['completion/criteria','completion_criteria_role.php',118],['lib/simplepie/library/SimplePie','Item.php',260],['question/classes/bank','question_name_column.php',32],['blocks','moodleblock.class.php',155],['blocks/rss_client/classes/output','channel_image.php',122],['blocks/rss_client/classes/output','item.php',194],['completion/criteria','completion_criteria_self.php',109],['completion/criteria','completion_criteria_grade.php',131],['completion/criteria','completion_criteria_unenrol.php',92],['lib','authlib.php',531],['enrol','locallib.php',1404],['lib/classes','chart_base.php',141],['blocks/rss_client/classes/output','feed.php',125],['badges/criteria','award_criteria.php',162],['completion/criteria','completion_criteria_activity.php',166],['question/classes/bank','creator_name_column.php',32],['enrol/manual','locallib.php',167],['enrol/manual','locallib.php',314],['completion/criteria','completion_criteria_duration.php',153]], 73],
'display': ['display', 'Displays the form ', [['backup/util/ui','base_moodleform.class.php',365],['mod/feedback/classes','complete_form.php',536],['lib/minify/lib/Minify/Cache','APC.php',79],['mod/lesson/pagetypes','numerical.php',50],['mod/scorm/report/interactions/classes','report.php',31],['mod/scorm/report/basic/classes','report.php',30],['backup/util/ui','restore_ui.class.php',375],['mod/scorm/report/objectives/classes','report.php',37],['mod/lesson/pagetypes','endofcluster.php',39],['mod/lesson/pagetypes','matching.php',50],['mod/feedback/classes','responses_table.php',344],['user/selector','lib.php',205],['lib/minify/lib/Minify/Cache','File.php',72],['lib','formslib.php',935],['backup/util/ui','base_ui.class.php',169],['mod/lesson/pagetypes','multichoice.php',87],['question/classes/bank','column_base.php',164],['cohort','upload_form.php',316],['mod/quiz/report/statistics','report.php',51],['admin/roles/classes','capability_table_with_risks.php',131],['mod/lesson/pagetypes','truefalse.php',50],['admin/roles/classes','capability_table_base.php',71],['mod/quiz/report/overview','report.php',42],['mod/feedback/classes','templates_table.php',62],['lib/minify/lib/Minify/Cache','ZendPlatform.php',84],['mod/lesson/pagetypes','endofbranch.php',39],['mod/scorm/classes','report.php',39],['backup/util/ui','import_extensions.php',154],['question/classes/bank','view.php',451],['backup/util/ui','backup_ui_stage.class.php',545],['backup/util/ui','backup_ui_stage.class.php',588],['mod/quiz/report/grading','report.php',51],['mod/lesson/pagetypes','shortanswer.php',50],['lib/pear/HTML','Common.php',438],['mod/lesson/pagetypes','essay.php',67],['lib/minify/lib/Minify/Cache','Memcache.php',85],['backup/util/ui','base_ui_stage.class.php',126],['mod/scorm/report/graphs/classes','report.php',127],['mod/lesson/pagetypes','branchtable.php',105],['repository/flickr_public','image.php',149],['admin/roles/classes','define_role_table_advanced.php',612],['mod/quiz/report/responses','report.php',51],['mod/lesson/pagetypes','cluster.php',39],['lib/minify/lib/Minify/Cache','WinCache.php',79],['lib/minify/lib/Minify/Cache','XCache.php',74],['course/format/singleactivity','renderer.php',36],['backup/util/ui','restore_ui_stage.class.php',355],['backup/util/ui','restore_ui_stage.class.php',497],['backup/util/ui','restore_ui_stage.class.php',1025],['backup/util/ui','restore_ui_stage.class.php',1112]], 320],
'block_load_class': ['block_load_class', 'Load the block class for a particular type of block. ', [['lib','blocklib.php',1696]], 2],
'is_known_block_type': ['is_known_block_type', 'Find out if a block type is known by the system ', [['lib','blocklib.php',250]], 2],
'set_cm': ['set_cm', 'The course module that this page belongs to (if it does belong to one). ', [['lib','pagelib.php',1002]], 33],
'max': ['max', '', [], 1266],
'abs': ['abs', '', [], 560],
'reset': ['reset', '', [], 1213],
'array_key_exists': ['array_key_exists', '', [], 1445],
'name': ['name', '', [], 118],
'is_string': ['is_string', '', [], 536],
'explode': ['explode', '', [], 1572],
'header': ['header', '', [], 1355],
'array_keys': ['array_keys', '', [], 1256],
'str_replace': ['str_replace', '', [], 1648],
'substr': ['substr', '', [], 2823],
'array_shift': ['array_shift', '', [], 700],
'link': ['link', '', [], 695],
'in_array': ['in_array', '', [], 1234],
'array_chunk': ['array_chunk', '', [], 14],
'preg_match': ['preg_match', '', [], 1286],
'end': ['end', '', [], 433],
'array_unique': ['array_unique', '', [], 171],
'is_null': ['is_null', '', [], 2003],
'call_user_func': ['call_user_func', '', [], 113],
'floor': ['floor', '', [], 514],
'is_readable': ['is_readable', '', [], 196],
'ceil': ['ceil', '', [], 236],
'substr_count': ['substr_count', '', [], 72],
'asort': ['asort', '', [], 114],
'key': ['key', '', [], 204],
'function_exists': ['function_exists', '', [], 419],
'is_array': ['is_array', '', [], 1608],
'defined': ['defined', '', [], 4731],
'strpos': ['strpos', '', [], 1604],
'array_pop': ['array_pop', '', [], 483],
'array_slice': ['array_slice', '', [], 165],
'implode': ['implode', '', [], 1281],
'trim': ['trim', '', [], 1948],
'array_merge': ['array_merge', '', [], 2944],
'define': ['define', '', [], 2373],
'file_exists': ['file_exists', '', [], 867],
'count': ['count', '', [], 4095],
'class_exists': ['class_exists', '', [], 279]};
CLASS_DATA={
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5875]], 203],
'block_manager': ['block_manager', 'This class keeps track of the block that should appear on a moodle_page. ', [['lib','blocklib.php',67]], 6],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'single_button': ['single_button', 'Data structure representing a simple form with only one button. ', [['lib','outputcomponents.php',604]], 121],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',239]], 1200],
'action_menu_link_primary': ['action_menu_link_primary', 'A primary action menu action ', [['lib','outputcomponents.php',3659]], 4],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'action_menu_link_secondary': ['action_menu_link_secondary', 'A secondary action menu action ', [['lib','outputcomponents.php',3681]], 47],
'core_collator': ['core_collator', 'A collator class with static methods that can be used for sorting. ', [['lib/classes','collator.php',28]], 152],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'core_tag_tag': ['core_tag_tag', 'Represents one tag and also contains lots of useful tag-related methods as static functions. ', [['tag/classes','tag.php',27]], 352],
'moodle_page': ['moodle_page', '$PAGE is a central store of information about the current page we are generating in response to the user\'s request. ', [['lib','pagelib.php',30]], 61],
'pix_icon': ['pix_icon', 'Data structure representing an icon. ', [['lib','outputcomponents.php',497]], 275],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 511],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'single_select': ['single_select', 'Simple form with just one select field that gets submitted automatically. ', [['lib','outputcomponents.php',697]], 50],
'lang_string': ['lang_string', 'The lang_string class ', [['lib','moodlelib.php',9551]], 1775],
'block_not_on_page_exception': ['block_not_on_page_exception', 'Exception thrown when someone tried to do something with a block that does not exist on a page. ', [['lib','blocklib.php',45]], 1],
'context_block': ['context_block', 'Block context class ', [['lib','accesslib.php',7281]], 30],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'block_contents': ['block_contents', 'This class represents how a block appears on a page. ', [['lib','outputcomponents.php',2469]], 15],
'block_move_target': ['block_move_target', 'This class represents a target for where a block can go when it is being moved. ', [['lib','outputcomponents.php',2607]], 2]};
CONST_DATA={
'BUI_CONTEXTS_FRONTPAGE_ONLY': ['BUI_CONTEXTS_FRONTPAGE_ONLY', '', [['lib','blocklib.php',38]], 3],
'BUI_CONTEXTS_ENTIRE_SITE': ['BUI_CONTEXTS_ENTIRE_SITE', '', [['lib','blocklib.php',40]], 5],
'ROLENAME_SHORT': ['ROLENAME_SHORT', '', [['lib','accesslib.php',182]], 21],
'PARAM_ALPHANUMEXT': ['PARAM_ALPHANUMEXT', '', [['lib','moodlelib.php',93]], 200],
'BUI_CONTEXTS_FRONTPAGE_SUBS': ['BUI_CONTEXTS_FRONTPAGE_SUBS', '', [['lib','blocklib.php',39]], 3],
'BUI_CONTEXTS_CURRENT_SUBS': ['BUI_CONTEXTS_CURRENT_SUBS', '', [['lib','blocklib.php',43]], 2],
'CONTEXT_USER': ['CONTEXT_USER', '', [['lib','accesslib.php',144]], 123],
'PARAM_PLUGIN': ['PARAM_PLUGIN', '', [['lib','moodlelib.php',324]], 104],
'BUI_CONTEXTS_CURRENT': ['BUI_CONTEXTS_CURRENT', '', [['lib','blocklib.php',42]], 4],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'CONTEXT_BLOCK': ['CONTEXT_BLOCK', '', [['lib','accesslib.php',156]], 96],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812],
'CONTEXT_COURSE': ['CONTEXT_COURSE', '', [['lib','accesslib.php',148]], 441],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 315],
'PARAM_FLOAT': ['PARAM_FLOAT', '', [['lib','moodlelib.php',146]], 103],
'BLOCK_POS_RIGHT': ['BLOCK_POS_RIGHT', '', [['lib','blocklib.php',35]], 18],
'BLOCK_POS_LEFT': ['BLOCK_POS_LEFT', '', [['lib','blocklib.php',34]], 10],
'SITEID': ['SITEID', '', [['admin/cli','install.php',219],['lib/db','install.php',87],['','install.php',242],['lib','setup.php',755]], 608]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
