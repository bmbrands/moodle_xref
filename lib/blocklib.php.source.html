<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/blocklib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='blocklib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/</a> -> <a href="blocklib.php.html">blocklib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="blocklib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="blocklib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Block Class and Functions</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * This file defines the {@link block_manager} class,</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> *</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @package    core</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @subpackage block</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas  http://dougiamas.com</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> */</span>
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/**#@+</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * Default names for the block regions in the standard theme.</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> */</span>
<a name="l34"><span class="linenum">  34</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BLOCK_POS_LEFT')" href="../_constants/BLOCK_POS_LEFT.html" onMouseOver="constPopup(event,'BLOCK_POS_LEFT')">BLOCK_POS_LEFT</a>',  'side-pre');
<a name="l35"><span class="linenum">  35</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BLOCK_POS_RIGHT')" href="../_constants/BLOCK_POS_RIGHT.html" onMouseOver="constPopup(event,'BLOCK_POS_RIGHT')">BLOCK_POS_RIGHT</a>', 'side-post');
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">/**#@-*/</span>
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BUI_CONTEXTS_FRONTPAGE_ONLY')" href="../_constants/BUI_CONTEXTS_FRONTPAGE_ONLY.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_FRONTPAGE_ONLY')">BUI_CONTEXTS_FRONTPAGE_ONLY</a>', 0);
<a name="l39"><span class="linenum">  39</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BUI_CONTEXTS_FRONTPAGE_SUBS')" href="../_constants/BUI_CONTEXTS_FRONTPAGE_SUBS.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_FRONTPAGE_SUBS')">BUI_CONTEXTS_FRONTPAGE_SUBS</a>', 1);
<a name="l40"><span class="linenum">  40</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BUI_CONTEXTS_ENTIRE_SITE')" href="../_constants/BUI_CONTEXTS_ENTIRE_SITE.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_ENTIRE_SITE')">BUI_CONTEXTS_ENTIRE_SITE</a>', 2);
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BUI_CONTEXTS_CURRENT')" href="../_constants/BUI_CONTEXTS_CURRENT.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_CURRENT')">BUI_CONTEXTS_CURRENT</a>', 0);
<a name="l43"><span class="linenum">  43</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('BUI_CONTEXTS_CURRENT_SUBS')" href="../_constants/BUI_CONTEXTS_CURRENT_SUBS.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_CURRENT_SUBS')">BUI_CONTEXTS_CURRENT_SUBS</a>', 1);
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">/**</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * Exception thrown when someone tried to do something with a block that does</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> * not exist on a page.</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment"> *</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment"> * @copyright 2009 Tim Hunt</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment"> * @since     Moodle 2.0</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment"> */</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('block_not_on_page_exception')" href="../_classes/block_not_on_page_exception.html" onMouseOver="classPopup(event,'block_not_on_page_exception')">block_not_on_page_exception</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a> {
<a name="l54"><span class="linenum">  54</span></a>      <span class="comment">/**</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     * Constructor</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">     * @param int $instanceid the block instance id of the block that was looked for.</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">     * @param object $page the current page.</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">     */</span>
<a name="l59"><span class="linenum">  59</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it1622" onMouseOver="hilite(1622)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>) {
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a> = new stdClass;
<a name="l61"><span class="linenum">  61</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> = <a class="var it1622" onMouseOver="hilite(1622)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>;
<a name="l62"><span class="linenum">  62</span></a>          <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('url')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../_variables/url.html">url</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('url')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../_variables/url.html">url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>();
<a name="l63"><span class="linenum">  63</span></a>          parent::<a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>('blockdoesnotexistonpage', '', <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('url')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../_variables/url.html">url</a>-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../_variables/a.html">$a</a>);
<a name="l64"><span class="linenum">  64</span></a>      }
<a name="l65"><span class="linenum">  65</span></a>  }
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">/**</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment"> * This class keeps track of the block that should appear on a moodle_page.</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment"> *</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment"> * The page to work with as passed to the constructor.</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment"> *</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment"> * @copyright 2009 Tim Hunt</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment"> * @since     Moodle 2.0</span>
<a name="l75"><span class="linenum">  75</span></a>  <span class="comment"> */</span>
<a name="l76"><span class="linenum">  76</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('block_manager')" href="../_classes/block_manager.html" onMouseOver="classPopup(event,'block_manager')">block_manager</a> {
<a name="l77"><span class="linenum">  77</span></a>      <span class="comment">/**</span>
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">     * The UI normally only shows block weights between -MAX_WEIGHT and MAX_WEIGHT,</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">     * although other weights are valid.</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">     */</span>
<a name="l81"><span class="linenum">  81</span></a>      const MAX_WEIGHT = 10;
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">/// Field declarations =========================================================</span>
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>      <span class="comment">/**</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">     * the moodle_page we are managing blocks for.</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">     * @var moodle_page</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">     */</span>
<a name="l89"><span class="linenum">  89</span></a>      protected <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>;
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>  <span class="comment">    /** @var array region name =&gt; 1.*/</span>
<a name="l92"><span class="linenum">  92</span></a>      protected <a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../_variables/regions.html">$regions</a> = array();
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">    /** @var string the region where new blocks are added.*/</span>
<a name="l95"><span class="linenum">  95</span></a>      protected <a class="var it17002" onMouseOver="hilite(17002)" onMouseOut="lolite()" onClick="logVariable('defaultregion')" href="../_variables/defaultregion.html">$defaultregion</a> = null;
<a name="l96"><span class="linenum">  96</span></a>  
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment">    /** @var array will be $DB-&gt;get_records('blocks') */</span>
<a name="l98"><span class="linenum">  98</span></a>      protected <a class="var it26660" onMouseOver="hilite(26660)" onMouseOut="lolite()" onClick="logVariable('allblocks')" href="../_variables/allblocks.html">$allblocks</a> = null;
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>      <span class="comment">/**</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">     * @var array blocks that this user can add to this page. Will be a subset</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">     * of $allblocks, but with array keys block-&gt;name. Access this via the</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">     * {@link get_addable_blocks()} method to ensure it is lazy-loaded.</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     */</span>
<a name="l105"><span class="linenum"> 105</span></a>      protected <a class="var it26661" onMouseOver="hilite(26661)" onMouseOut="lolite()" onClick="logVariable('addableblocks')" href="../_variables/addableblocks.html">$addableblocks</a> = null;
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>      <span class="comment">/**</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     * Will be an array region-name =&gt; array(db rows loaded in load_blocks);</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     * @var array</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">     */</span>
<a name="l111"><span class="linenum"> 111</span></a>      protected <a class="var it15003" onMouseOver="hilite(15003)" onMouseOut="lolite()" onClick="logVariable('birecordsbyregion')" href="../_variables/birecordsbyregion.html">$birecordsbyregion</a> = null;
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>      <span class="comment">/**</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment">     * array region-name =&gt; array(block objects); populated as necessary by</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment">     * the ensure_instances_exist method.</span>
<a name="l116"><span class="linenum"> 116</span></a>  <span class="comment">     * @var array</span>
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">     */</span>
<a name="l118"><span class="linenum"> 118</span></a>      protected <a class="var it26662" onMouseOver="hilite(26662)" onMouseOut="lolite()" onClick="logVariable('blockinstances')" href="../_variables/blockinstances.html">$blockinstances</a> = array();
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>      <span class="comment">/**</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     * array region-name =&gt; array(block_contents objects) what actually needs to</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     * be displayed in each region.</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * @var array</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     */</span>
<a name="l125"><span class="linenum"> 125</span></a>      protected <a class="var it26663" onMouseOver="hilite(26663)" onMouseOut="lolite()" onClick="logVariable('visibleblockcontent')" href="../_variables/visibleblockcontent.html">$visibleblockcontent</a> = array();
<a name="l126"><span class="linenum"> 126</span></a>  
<a name="l127"><span class="linenum"> 127</span></a>      <span class="comment">/**</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">     * array region-name =&gt; array(block_contents objects) extra block-like things</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     * to be displayed in each region, before the real blocks.</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment">     * @var array</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment">     */</span>
<a name="l132"><span class="linenum"> 132</span></a>      protected <a class="var it26664" onMouseOver="hilite(26664)" onMouseOut="lolite()" onClick="logVariable('extracontent')" href="../_variables/extracontent.html">$extracontent</a> = array();
<a name="l133"><span class="linenum"> 133</span></a>  
<a name="l134"><span class="linenum"> 134</span></a>      <span class="comment">/**</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">     * Used by the block move id, to track whether a block is currently being moved.</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">     *</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">     * When you click on the move icon of a block, first the page needs to reload with</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     * extra UI for choosing a new position for a particular block. In that situation</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     * this field holds the id of the block being moved.</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">     *</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">     * @var integer|null</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">     */</span>
<a name="l143"><span class="linenum"> 143</span></a>      protected <a class="var it26665" onMouseOver="hilite(26665)" onMouseOut="lolite()" onClick="logVariable('movingblock')" href="../_variables/movingblock.html">$movingblock</a> = null;
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>      <span class="comment">/**</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">     * Show only fake blocks</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">     */</span>
<a name="l148"><span class="linenum"> 148</span></a>      protected <a class="var it26666" onMouseOver="hilite(26666)" onMouseOut="lolite()" onClick="logVariable('fakeblocksonly')" href="../_variables/fakeblocksonly.html">$fakeblocksonly</a> = false;
<a name="l149"><span class="linenum"> 149</span></a>  
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">/// Constructor ================================================================</span>
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>      <span class="comment">/**</span>
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">     * Constructor.</span>
<a name="l154"><span class="linenum"> 154</span></a>  <span class="comment">     * @param object $page the moodle_page object object we are managing the blocks for,</span>
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">     * or a reasonable faxilimily. (See the comment at the top of this class</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment">     * and {@link http://en.wikipedia.org/wiki/Duck_typing})</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment">     */</span>
<a name="l158"><span class="linenum"> 158</span></a>      public function <a class="function" onClick="logFunction('__construct')" href="../_functions/__construct.html" onMouseOver="funcPopup(event,'__construct')">__construct</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>) {
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>;
<a name="l160"><span class="linenum"> 160</span></a>      }
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>  <span class="comment">/// Getter methods =============================================================</span>
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>      <span class="comment">/**</span>
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">     * Get an array of all region names on this page where a block may appear</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">     *</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment">     * @return array the internal names of the regions on this page where block may appear.</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment">     */</span>
<a name="l169"><span class="linenum"> 169</span></a>      public function <a class="function" onClick="logFunction('get_regions')" href="../_functions/get_regions.html" onMouseOver="funcPopup(event,'get_regions')">get_regions</a>() {
<a name="l170"><span class="linenum"> 170</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>)) {
<a name="l171"><span class="linenum"> 171</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('initialise_theme_and_output')" href="../_functions/initialise_theme_and_output.html" onMouseOver="funcPopup(event,'initialise_theme_and_output')">initialise_theme_and_output</a>();
<a name="l172"><span class="linenum"> 172</span></a>          }
<a name="l173"><span class="linenum"> 173</span></a>          return <a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a>);
<a name="l174"><span class="linenum"> 174</span></a>      }
<a name="l175"><span class="linenum"> 175</span></a>  
<a name="l176"><span class="linenum"> 176</span></a>      <span class="comment">/**</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment">     * Get the region name of the region blocks are added to by default</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment">     *</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">     * @return string the internal names of the region where new blocks are added</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment">     * by default, and where any blocks from an unrecognised region are shown.</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment">     * (Imagine that blocks were added with one theme selected, then you switched</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment">     * to a theme with different block positions.)</span>
<a name="l183"><span class="linenum"> 183</span></a>  <span class="comment">     */</span>
<a name="l184"><span class="linenum"> 184</span></a>      public function <a class="function" onClick="logFunction('get_default_region')" href="../_functions/get_default_region.html" onMouseOver="funcPopup(event,'get_default_region')">get_default_region</a>() {
<a name="l185"><span class="linenum"> 185</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('initialise_theme_and_output')" href="../_functions/initialise_theme_and_output.html" onMouseOver="funcPopup(event,'initialise_theme_and_output')">initialise_theme_and_output</a>();
<a name="l186"><span class="linenum"> 186</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>;
<a name="l187"><span class="linenum"> 187</span></a>      }
<a name="l188"><span class="linenum"> 188</span></a>  
<a name="l189"><span class="linenum"> 189</span></a>      <span class="comment">/**</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">     * The list of block types that may be added to this page.</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">     *</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">     * @return array block name =&gt; record from block table.</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">     */</span>
<a name="l194"><span class="linenum"> 194</span></a>      public function <a class="function" onClick="logFunction('get_addable_blocks')" href="../_functions/get_addable_blocks.html" onMouseOver="funcPopup(event,'get_addable_blocks')">get_addable_blocks</a>() {
<a name="l195"><span class="linenum"> 195</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>();
<a name="l196"><span class="linenum"> 196</span></a>  
<a name="l197"><span class="linenum"> 197</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addableblocks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addableblocks.html">addableblocks</a>)) {
<a name="l198"><span class="linenum"> 198</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addableblocks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addableblocks.html">addableblocks</a>;
<a name="l199"><span class="linenum"> 199</span></a>          }
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">        // Lazy load.</span>
<a name="l202"><span class="linenum"> 202</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addableblocks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addableblocks.html">addableblocks</a> = array();
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>          <a class="var it26660" onMouseOver="hilite(26660)" onMouseOut="lolite()" onClick="logVariable('allblocks')" href="../_variables/allblocks.html">$allblocks</a> = <a class="function" onClick="logFunction('blocks_get_record')" href="../_functions/blocks_get_record.html" onMouseOver="funcPopup(event,'blocks_get_record')">blocks_get_record</a>();
<a name="l205"><span class="linenum"> 205</span></a>          if (empty(<a class="var it26660" onMouseOver="hilite(26660)" onMouseOut="lolite()" onClick="logVariable('allblocks')" href="../_variables/allblocks.html">$allblocks</a>)) {
<a name="l206"><span class="linenum"> 206</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addableblocks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addableblocks.html">addableblocks</a>;
<a name="l207"><span class="linenum"> 207</span></a>          }
<a name="l208"><span class="linenum"> 208</span></a>  
<a name="l209"><span class="linenum"> 209</span></a>          <a class="var it26667" onMouseOver="hilite(26667)" onMouseOut="lolite()" onClick="logVariable('unaddableblocks')" href="../_variables/unaddableblocks.html">$unaddableblocks</a> = self::<a class="function" onClick="logFunction('get_undeletable_block_types')" href="../_functions/get_undeletable_block_types.html" onMouseOver="funcPopup(event,'get_undeletable_block_types')">get_undeletable_block_types</a>();
<a name="l210"><span class="linenum"> 210</span></a>          <a class="var it21610" onMouseOver="hilite(21610)" onMouseOut="lolite()" onClick="logVariable('pageformat')" href="../_variables/pageformat.html">$pageformat</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype;
<a name="l211"><span class="linenum"> 211</span></a>          foreach(<a class="var it26660" onMouseOver="hilite(26660)" onMouseOut="lolite()" onClick="logVariable('allblocks')" href="../_variables/allblocks.html">$allblocks</a> as <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>) {
<a name="l212"><span class="linenum"> 212</span></a>              if (!<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a> = <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)) {
<a name="l213"><span class="linenum"> 213</span></a>                  continue;
<a name="l214"><span class="linenum"> 214</span></a>              }
<a name="l215"><span class="linenum"> 215</span></a>              if (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('visible')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> &amp;&amp; !<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, <a class="var it26667" onMouseOver="hilite(26667)" onMouseOut="lolite()" onClick="logVariable('unaddableblocks')" href="../_variables/unaddableblocks.html">$unaddableblocks</a>) &amp;&amp;
<a name="l216"><span class="linenum"> 216</span></a>                      (<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a class="function" onClick="logFunction('instance_allow_multiple')" href="../_functions/instance_allow_multiple.html" onMouseOver="funcPopup(event,'instance_allow_multiple')">instance_allow_multiple</a>() || !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_block_present')" href="../_functions/is_block_present.html" onMouseOver="funcPopup(event,'is_block_present')">is_block_present</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>)) &amp;&amp;
<a name="l217"><span class="linenum"> 217</span></a>                      <a class="function" onClick="logFunction('blocks_name_allowed_in_format')" href="../_functions/blocks_name_allowed_in_format.html" onMouseOver="funcPopup(event,'blocks_name_allowed_in_format')">blocks_name_allowed_in_format</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, <a class="var it21610" onMouseOver="hilite(21610)" onMouseOut="lolite()" onClick="logVariable('pageformat')" href="../_variables/pageformat.html">$pageformat</a>) &amp;&amp;
<a name="l218"><span class="linenum"> 218</span></a>                      <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a class="function" onClick="logFunction('user_can_addto')" href="../_functions/user_can_addto.html" onMouseOver="funcPopup(event,'user_can_addto')">user_can_addto</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>)) {
<a name="l219"><span class="linenum"> 219</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addableblocks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addableblocks.html">addableblocks</a>[<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>;
<a name="l220"><span class="linenum"> 220</span></a>              }
<a name="l221"><span class="linenum"> 221</span></a>          }
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('addableblocks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/addableblocks.html">addableblocks</a>;
<a name="l224"><span class="linenum"> 224</span></a>      }
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>      <span class="comment">/**</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment">     * Given a block name, find out of any of them are currently present in the page</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment"></span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment">     * @param string $blockname - the basic name of a block (eg &quot;navigation&quot;)</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">     * @return boolean - is there one of these blocks in the current page?</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment">     */</span>
<a name="l232"><span class="linenum"> 232</span></a>      public function <a class="function" onClick="logFunction('is_block_present')" href="../_functions/is_block_present.html" onMouseOver="funcPopup(event,'is_block_present')">is_block_present</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>) {
<a name="l233"><span class="linenum"> 233</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a>)) {
<a name="l234"><span class="linenum"> 234</span></a>              return false;
<a name="l235"><span class="linenum"> 235</span></a>          }
<a name="l236"><span class="linenum"> 236</span></a>  
<a name="l237"><span class="linenum"> 237</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a> as <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l238"><span class="linenum"> 238</span></a>              foreach (<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> as <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l239"><span class="linenum"> 239</span></a>                  if (empty(<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockname)) {
<a name="l240"><span class="linenum"> 240</span></a>                      continue;
<a name="l241"><span class="linenum"> 241</span></a>                  }
<a name="l242"><span class="linenum"> 242</span></a>                  if (<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockname == <a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>) {
<a name="l243"><span class="linenum"> 243</span></a>                      return true;
<a name="l244"><span class="linenum"> 244</span></a>                  }
<a name="l245"><span class="linenum"> 245</span></a>              }
<a name="l246"><span class="linenum"> 246</span></a>          }
<a name="l247"><span class="linenum"> 247</span></a>          return false;
<a name="l248"><span class="linenum"> 248</span></a>      }
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>      <span class="comment">/**</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">     * Find out if a block type is known by the system</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">     *</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">     * @param string $blockname the name of the type of block.</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     * @param boolean $includeinvisible if false (default) only check 'visible' blocks, that is, blocks enabled by the admin.</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     * @return boolean true if this block in installed.</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment">     */</span>
<a name="l257"><span class="linenum"> 257</span></a>      public function <a class="function" onClick="logFunction('is_known_block_type')" href="../_functions/is_known_block_type.html" onMouseOver="funcPopup(event,'is_known_block_type')">is_known_block_type</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it7854" onMouseOver="hilite(7854)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a> = false) {
<a name="l258"><span class="linenum"> 258</span></a>          <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_installed_blocks')" href="../_functions/get_installed_blocks.html" onMouseOver="funcPopup(event,'get_installed_blocks')">get_installed_blocks</a>();
<a name="l259"><span class="linenum"> 259</span></a>          foreach (<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> as <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>) {
<a name="l260"><span class="linenum"> 260</span></a>              if (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a> == <a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a> &amp;&amp; (<a class="var it7854" onMouseOver="hilite(7854)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a> || <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('visible')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>)) {
<a name="l261"><span class="linenum"> 261</span></a>                  return true;
<a name="l262"><span class="linenum"> 262</span></a>              }
<a name="l263"><span class="linenum"> 263</span></a>          }
<a name="l264"><span class="linenum"> 264</span></a>          return false;
<a name="l265"><span class="linenum"> 265</span></a>      }
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>      <span class="comment">/**</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     * Find out if a region exists on a page</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">     *</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">     * @param string $region a region name</span>
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">     * @return boolean true if this region exists on this page.</span>
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">     */</span>
<a name="l273"><span class="linenum"> 273</span></a>      public function <a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l274"><span class="linenum"> 274</span></a>          return <a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a>);
<a name="l275"><span class="linenum"> 275</span></a>      }
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>      <span class="comment">/**</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">     * Get an array of all blocks within a given region</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">     *</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">     * @param string $region a block region that exists on this page.</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">     * @return array of block instances.</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">     */</span>
<a name="l283"><span class="linenum"> 283</span></a>      public function <a class="function" onClick="logFunction('get_blocks_for_region')" href="../_functions/get_blocks_for_region.html" onMouseOver="funcPopup(event,'get_blocks_for_region')">get_blocks_for_region</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l284"><span class="linenum"> 284</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>();
<a name="l285"><span class="linenum"> 285</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_instances_exist')" href="../_functions/ensure_instances_exist.html" onMouseOver="funcPopup(event,'ensure_instances_exist')">ensure_instances_exist</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l286"><span class="linenum"> 286</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>];
<a name="l287"><span class="linenum"> 287</span></a>      }
<a name="l288"><span class="linenum"> 288</span></a>  
<a name="l289"><span class="linenum"> 289</span></a>      <span class="comment">/**</span>
<a name="l290"><span class="linenum"> 290</span></a>  <span class="comment">     * Returns an array of block content objects that exist in a region</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">     *</span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">     * @param string $region a block region that exists on this page.</span>
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">     * @return array of block block_contents objects for all the blocks in a region.</span>
<a name="l294"><span class="linenum"> 294</span></a>  <span class="comment">     */</span>
<a name="l295"><span class="linenum"> 295</span></a>      public function <a class="function" onClick="logFunction('get_content_for_region')" href="../_functions/get_content_for_region.html" onMouseOver="funcPopup(event,'get_content_for_region')">get_content_for_region</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>();
<a name="l297"><span class="linenum"> 297</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_content_created')" href="../_functions/ensure_content_created.html" onMouseOver="funcPopup(event,'ensure_content_created')">ensure_content_created</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l298"><span class="linenum"> 298</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>];
<a name="l299"><span class="linenum"> 299</span></a>      }
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>      <span class="comment">/**</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">     * Helper method used by get_content_for_region.</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment">     * @param string $region region name</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">     * @param float $weight weight. May be fractional, since you may want to move a block</span>
<a name="l305"><span class="linenum"> 305</span></a>  <span class="comment">     * between ones with weight 2 and 3, say ($weight would be 2.5).</span>
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">     * @return string URL for moving block $this-&gt;movingblock to this position.</span>
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">     */</span>
<a name="l308"><span class="linenum"> 308</span></a>      protected function <a class="function" onClick="logFunction('get_move_target_url')" href="../_functions/get_move_target_url.html" onMouseOver="funcPopup(event,'get_move_target_url')">get_move_target_url</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>) {
<a name="l309"><span class="linenum"> 309</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url, array('bui_moveid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>,
<a name="l310"><span class="linenum"> 310</span></a>                  'bui_newregion' =&gt; <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, 'bui_newweight' =&gt; <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>, 'sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l311"><span class="linenum"> 311</span></a>      }
<a name="l312"><span class="linenum"> 312</span></a>  
<a name="l313"><span class="linenum"> 313</span></a>      <span class="comment">/**</span>
<a name="l314"><span class="linenum"> 314</span></a>  <span class="comment">     * Determine whether a region contains anything. (Either any real blocks, or</span>
<a name="l315"><span class="linenum"> 315</span></a>  <span class="comment">     * the add new block UI.)</span>
<a name="l316"><span class="linenum"> 316</span></a>  <span class="comment">     *</span>
<a name="l317"><span class="linenum"> 317</span></a>  <span class="comment">     * (You may wonder why the $output parameter is required. Unfortunately,</span>
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">     * because of the way that blocks work, the only reliable way to find out</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment">     * if a block will be visible is to get the content for output, and to</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">     * get the content, you need a renderer. Fortunately, this is not a</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment">     * performance problem, because we cache the output that is generated, and</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment">     * in almost every case where we call region_has_content, we are about to</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment">     * output the blocks anyway, so we are not doing wasted effort.)</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment">     *</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">     * @param string $region a block region that exists on this page.</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">     * @param core_renderer $output a core_renderer. normally the global $OUTPUT.</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="comment">     * @return boolean Whether there is anything in this region.</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment">     */</span>
<a name="l329"><span class="linenum"> 329</span></a>      public function <a class="function" onClick="logFunction('region_has_content')" href="../_functions/region_has_content.html" onMouseOver="funcPopup(event,'region_has_content')">region_has_content</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>)) {
<a name="l332"><span class="linenum"> 332</span></a>              return false;
<a name="l333"><span class="linenum"> 333</span></a>          }
<a name="l334"><span class="linenum"> 334</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>();
<a name="l335"><span class="linenum"> 335</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_content_created')" href="../_functions/ensure_content_created.html" onMouseOver="funcPopup(event,'ensure_content_created')">ensure_content_created</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment">        // if ($this-&gt;page-&gt;user_is_editing() &amp;&amp; $this-&gt;page-&gt;user_can_edit_blocks()) {</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment">        // Mark Nielsen's patch - part 1</span>
<a name="l338"><span class="linenum"> 338</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>() &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>() &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>) {
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment">            // If editing is on, we need all the block regions visible, for the</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment">            // move blocks UI.</span>
<a name="l341"><span class="linenum"> 341</span></a>              return true;
<a name="l342"><span class="linenum"> 342</span></a>          }
<a name="l343"><span class="linenum"> 343</span></a>          return !empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>]) || !empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extracontent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/extracontent.html">extracontent</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>]);
<a name="l344"><span class="linenum"> 344</span></a>      }
<a name="l345"><span class="linenum"> 345</span></a>  
<a name="l346"><span class="linenum"> 346</span></a>      <span class="comment">/**</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">     * Get an array of all of the installed blocks.</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">     *</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">     * @return array contents of the block table.</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">     */</span>
<a name="l351"><span class="linenum"> 351</span></a>      public function <a class="function" onClick="logFunction('get_installed_blocks')" href="../_functions/get_installed_blocks.html" onMouseOver="funcPopup(event,'get_installed_blocks')">get_installed_blocks</a>() {
<a name="l352"><span class="linenum"> 352</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l353"><span class="linenum"> 353</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allblocks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/allblocks.html">allblocks</a>)) {
<a name="l354"><span class="linenum"> 354</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allblocks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/allblocks.html">allblocks</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('block');
<a name="l355"><span class="linenum"> 355</span></a>          }
<a name="l356"><span class="linenum"> 356</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('allblocks')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/allblocks.html">allblocks</a>;
<a name="l357"><span class="linenum"> 357</span></a>      }
<a name="l358"><span class="linenum"> 358</span></a>  
<a name="l359"><span class="linenum"> 359</span></a>      <span class="comment">/**</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">     * @return array names of block types that cannot be added or deleted. E.g. array('navigation','settings').</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">     */</span>
<a name="l362"><span class="linenum"> 362</span></a>      public static function <a class="function" onClick="logFunction('get_undeletable_block_types')" href="../_functions/get_undeletable_block_types.html" onMouseOver="funcPopup(event,'get_undeletable_block_types')">get_undeletable_block_types</a>() {
<a name="l363"><span class="linenum"> 363</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l364"><span class="linenum"> 364</span></a>  
<a name="l365"><span class="linenum"> 365</span></a>          if (!isset(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('undeletableblocktypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/undeletableblocktypes.html">undeletableblocktypes</a>) || (!<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('undeletableblocktypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/undeletableblocktypes.html">undeletableblocktypes</a>) &amp;&amp; !<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('undeletableblocktypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/undeletableblocktypes.html">undeletableblocktypes</a>))) {
<a name="l366"><span class="linenum"> 366</span></a>              return array('navigation','settings');
<a name="l367"><span class="linenum"> 367</span></a>          } else if (<a class="phpfunction" onClick="logFunction('is_string')" href="../_functions/is_string.html" onMouseOver="phpfuncPopup(event,'is_string')">is_string</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('undeletableblocktypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/undeletableblocktypes.html">undeletableblocktypes</a>)) {
<a name="l368"><span class="linenum"> 368</span></a>              return <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('undeletableblocktypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/undeletableblocktypes.html">undeletableblocktypes</a>);
<a name="l369"><span class="linenum"> 369</span></a>          } else {
<a name="l370"><span class="linenum"> 370</span></a>              return <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('undeletableblocktypes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/undeletableblocktypes.html">undeletableblocktypes</a>;
<a name="l371"><span class="linenum"> 371</span></a>          }
<a name="l372"><span class="linenum"> 372</span></a>      }
<a name="l373"><span class="linenum"> 373</span></a>  
<a name="l374"><span class="linenum"> 374</span></a>  <span class="comment">/// Setter methods =============================================================</span>
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>      <span class="comment">/**</span>
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">     * Add a region to a page</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment">     *</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment">     * @param string $region add a named region where blocks may appear on the current page.</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment">     *      This is an internal name, like 'side-pre', not a string to display in the UI.</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     * @param bool $custom True if this is a custom block region, being added by the page rather than the theme layout.</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     */</span>
<a name="l383"><span class="linenum"> 383</span></a>      public function <a class="function" onClick="logFunction('add_region')" href="../_functions/add_region.html" onMouseOver="funcPopup(event,'add_region')">add_region</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../_variables/custom.html">$custom</a> = true) {
<a name="l384"><span class="linenum"> 384</span></a>          global <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>;
<a name="l385"><span class="linenum"> 385</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_not_yet_loaded')" href="../_functions/check_not_yet_loaded.html" onMouseOver="funcPopup(event,'check_not_yet_loaded')">check_not_yet_loaded</a>();
<a name="l386"><span class="linenum"> 386</span></a>          if (<a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../_variables/custom.html">$custom</a>) {
<a name="l387"><span class="linenum"> 387</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a>)) {
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment">                // This here is EXACTLY why we should not be adding block regions into a page. It should</span>
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment">                // ALWAYS be done in a theme layout.</span>
<a name="l390"><span class="linenum"> 390</span></a>                  <a class="function" onClick="logFunction('debugging')" href="../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('A custom region conflicts with a block region in the theme.', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l391"><span class="linenum"> 391</span></a>              }
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">            // We need to register this custom region against the page type being used.</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment">            // This allows us to check, when performing block actions, that unrecognised regions can be worked with.</span>
<a name="l394"><span class="linenum"> 394</span></a>              <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype;
<a name="l395"><span class="linenum"> 395</span></a>              if (!isset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>)) {
<a name="l396"><span class="linenum"> 396</span></a>                  <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a> = array(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a> =&gt; array(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>));
<a name="l397"><span class="linenum"> 397</span></a>              } else if (!isset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>])) {
<a name="l398"><span class="linenum"> 398</span></a>                  <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>] = array(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l399"><span class="linenum"> 399</span></a>              } else if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>])) {
<a name="l400"><span class="linenum"> 400</span></a>                  <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>[<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>][] = <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>;
<a name="l401"><span class="linenum"> 401</span></a>              }
<a name="l402"><span class="linenum"> 402</span></a>          }
<a name="l403"><span class="linenum"> 403</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] = 1;
<a name="l404"><span class="linenum"> 404</span></a>      }
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>      <span class="comment">/**</span>
<a name="l407"><span class="linenum"> 407</span></a>  <span class="comment">     * Add an array of regions</span>
<a name="l408"><span class="linenum"> 408</span></a>  <span class="comment">     * @see add_region()</span>
<a name="l409"><span class="linenum"> 409</span></a>  <span class="comment">     *</span>
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">     * @param array $regions this utility method calls add_region for each array element.</span>
<a name="l411"><span class="linenum"> 411</span></a>  <span class="comment">     */</span>
<a name="l412"><span class="linenum"> 412</span></a>      public function <a class="function" onClick="logFunction('add_regions')" href="../_functions/add_regions.html" onMouseOver="funcPopup(event,'add_regions')">add_regions</a>(<a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../_variables/regions.html">$regions</a>, <a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../_variables/custom.html">$custom</a> = true) {
<a name="l413"><span class="linenum"> 413</span></a>          foreach (<a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../_variables/regions.html">$regions</a> as <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l414"><span class="linenum"> 414</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_region')" href="../_functions/add_region.html" onMouseOver="funcPopup(event,'add_region')">add_region</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it4612" onMouseOver="hilite(4612)" onMouseOut="lolite()" onClick="logVariable('custom')" href="../_variables/custom.html">$custom</a>);
<a name="l415"><span class="linenum"> 415</span></a>          }
<a name="l416"><span class="linenum"> 416</span></a>      }
<a name="l417"><span class="linenum"> 417</span></a>  
<a name="l418"><span class="linenum"> 418</span></a>      <span class="comment">/**</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">     * Finds custom block regions associated with a page type and registers them with this block manager.</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">     *</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">     * @param string $pagetype</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">     */</span>
<a name="l423"><span class="linenum"> 423</span></a>      public function <a class="function" onClick="logFunction('add_custom_regions_for_pagetype')" href="../_functions/add_custom_regions_for_pagetype.html" onMouseOver="funcPopup(event,'add_custom_regions_for_pagetype')">add_custom_regions_for_pagetype</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>) {
<a name="l424"><span class="linenum"> 424</span></a>          global <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>;
<a name="l425"><span class="linenum"> 425</span></a>          if (isset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>[<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>])) {
<a name="l426"><span class="linenum"> 426</span></a>              foreach (<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('custom_block_regions')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../_variables/custom_block_regions.html">custom_block_regions</a>[<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>] as <a class="var it26670" onMouseOver="hilite(26670)" onMouseOut="lolite()" onClick="logVariable('customregion')" href="../_variables/customregion.html">$customregion</a>) {
<a name="l427"><span class="linenum"> 427</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_region')" href="../_functions/add_region.html" onMouseOver="funcPopup(event,'add_region')">add_region</a>(<a class="var it26670" onMouseOver="hilite(26670)" onMouseOut="lolite()" onClick="logVariable('customregion')" href="../_variables/customregion.html">$customregion</a>, false);
<a name="l428"><span class="linenum"> 428</span></a>              }
<a name="l429"><span class="linenum"> 429</span></a>          }
<a name="l430"><span class="linenum"> 430</span></a>      }
<a name="l431"><span class="linenum"> 431</span></a>  
<a name="l432"><span class="linenum"> 432</span></a>      <span class="comment">/**</span>
<a name="l433"><span class="linenum"> 433</span></a>  <span class="comment">     * Set the default region for new blocks on the page</span>
<a name="l434"><span class="linenum"> 434</span></a>  <span class="comment">     *</span>
<a name="l435"><span class="linenum"> 435</span></a>  <span class="comment">     * @param string $defaultregion the internal names of the region where new</span>
<a name="l436"><span class="linenum"> 436</span></a>  <span class="comment">     * blocks should be added by default, and where any blocks from an</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">     * unrecognised region are shown.</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">     */</span>
<a name="l439"><span class="linenum"> 439</span></a>      public function <a class="function" onClick="logFunction('set_default_region')" href="../_functions/set_default_region.html" onMouseOver="funcPopup(event,'set_default_region')">set_default_region</a>(<a class="var it17002" onMouseOver="hilite(17002)" onMouseOut="lolite()" onClick="logVariable('defaultregion')" href="../_variables/defaultregion.html">$defaultregion</a>) {
<a name="l440"><span class="linenum"> 440</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_not_yet_loaded')" href="../_functions/check_not_yet_loaded.html" onMouseOver="funcPopup(event,'check_not_yet_loaded')">check_not_yet_loaded</a>();
<a name="l441"><span class="linenum"> 441</span></a>          if (<a class="var it17002" onMouseOver="hilite(17002)" onMouseOut="lolite()" onClick="logVariable('defaultregion')" href="../_variables/defaultregion.html">$defaultregion</a>) {
<a name="l442"><span class="linenum"> 442</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_region_is_known')" href="../_functions/check_region_is_known.html" onMouseOver="funcPopup(event,'check_region_is_known')">check_region_is_known</a>(<a class="var it17002" onMouseOver="hilite(17002)" onMouseOut="lolite()" onClick="logVariable('defaultregion')" href="../_variables/defaultregion.html">$defaultregion</a>);
<a name="l443"><span class="linenum"> 443</span></a>          }
<a name="l444"><span class="linenum"> 444</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a> = <a class="var it17002" onMouseOver="hilite(17002)" onMouseOut="lolite()" onClick="logVariable('defaultregion')" href="../_variables/defaultregion.html">$defaultregion</a>;
<a name="l445"><span class="linenum"> 445</span></a>      }
<a name="l446"><span class="linenum"> 446</span></a>  
<a name="l447"><span class="linenum"> 447</span></a>      <span class="comment">/**</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">     * Add something that looks like a block, but which isn't an actual block_instance,</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">     * to this page.</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">     *</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">     * @param block_contents $bc the content of the block-like thing.</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment">     * @param string $region a block region that exists on this page.</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment">     */</span>
<a name="l454"><span class="linenum"> 454</span></a>      public function <a class="function" onClick="logFunction('add_fake_block')" href="../_functions/add_fake_block.html" onMouseOver="funcPopup(event,'add_fake_block')">add_fake_block</a>(<a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>, <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l455"><span class="linenum"> 455</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('initialise_theme_and_output')" href="../_functions/initialise_theme_and_output.html" onMouseOver="funcPopup(event,'initialise_theme_and_output')">initialise_theme_and_output</a>();
<a name="l456"><span class="linenum"> 456</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>)) {
<a name="l457"><span class="linenum"> 457</span></a>              <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_default_region')" href="../_functions/get_default_region.html" onMouseOver="funcPopup(event,'get_default_region')">get_default_region</a>();
<a name="l458"><span class="linenum"> 458</span></a>          }
<a name="l459"><span class="linenum"> 459</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>)) {
<a name="l460"><span class="linenum"> 460</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('block_manager has already prepared the blocks in region ' .
<a name="l461"><span class="linenum"> 461</span></a>                      <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> . 'for output. It is too late to add a fake block.');
<a name="l462"><span class="linenum"> 462</span></a>          }
<a name="l463"><span class="linenum"> 463</span></a>          if (!isset(<a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../_variables/attributes.html">attributes</a>['data-block'])) {
<a name="l464"><span class="linenum"> 464</span></a>              <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../_variables/attributes.html">attributes</a>['data-block'] = '_fake';
<a name="l465"><span class="linenum"> 465</span></a>          }
<a name="l466"><span class="linenum"> 466</span></a>          <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../_variables/attributes.html">attributes</a>['class'] .= ' block_fake';
<a name="l467"><span class="linenum"> 467</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extracontent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/extracontent.html">extracontent</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>][] = <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>;
<a name="l468"><span class="linenum"> 468</span></a>      }
<a name="l469"><span class="linenum"> 469</span></a>  
<a name="l470"><span class="linenum"> 470</span></a>      <span class="comment">/**</span>
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment">     * Checks to see whether all of the blocks within the given region are docked</span>
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">     *</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">     * @see region_uses_dock</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">     * @param string $region</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">     * @return bool True if all of the blocks within that region are docked</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     */</span>
<a name="l477"><span class="linenum"> 477</span></a>      public function <a class="function" onClick="logFunction('region_completely_docked')" href="../_functions/region_completely_docked.html" onMouseOver="funcPopup(event,'region_completely_docked')">region_completely_docked</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l478"><span class="linenum"> 478</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">        // If theme doesn't allow docking or allowblockstodock is not set, then return.</span>
<a name="l480"><span class="linenum"> 480</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;theme-&gt;enable_dock || empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowblockstodock')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/allowblockstodock.html">allowblockstodock</a>)) {
<a name="l481"><span class="linenum"> 481</span></a>              return false;
<a name="l482"><span class="linenum"> 482</span></a>          }
<a name="l483"><span class="linenum"> 483</span></a>  
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment">        // Do not dock the region when the user attemps to move a block.</span>
<a name="l485"><span class="linenum"> 485</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>) {
<a name="l486"><span class="linenum"> 486</span></a>              return false;
<a name="l487"><span class="linenum"> 487</span></a>          }
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment">        // Block regions should not be docked during editing when all the blocks are hidden.</span>
<a name="l490"><span class="linenum"> 490</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>() &amp;&amp; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l491"><span class="linenum"> 491</span></a>              return false;
<a name="l492"><span class="linenum"> 492</span></a>          }
<a name="l493"><span class="linenum"> 493</span></a>  
<a name="l494"><span class="linenum"> 494</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>();
<a name="l495"><span class="linenum"> 495</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_content_created')" href="../_functions/ensure_content_created.html" onMouseOver="funcPopup(event,'ensure_content_created')">ensure_content_created</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l496"><span class="linenum"> 496</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('region_has_content')" href="../_functions/region_has_content.html" onMouseOver="funcPopup(event,'region_has_content')">region_has_content</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>)) {
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">            // If the region has no content then nothing is docked at all of course.</span>
<a name="l498"><span class="linenum"> 498</span></a>              return false;
<a name="l499"><span class="linenum"> 499</span></a>          }
<a name="l500"><span class="linenum"> 500</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] as <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l501"><span class="linenum"> 501</span></a>              if (!<a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('docked_block_instance_'.<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a>, 0)) {
<a name="l502"><span class="linenum"> 502</span></a>                  return false;
<a name="l503"><span class="linenum"> 503</span></a>              }
<a name="l504"><span class="linenum"> 504</span></a>          }
<a name="l505"><span class="linenum"> 505</span></a>          return true;
<a name="l506"><span class="linenum"> 506</span></a>      }
<a name="l507"><span class="linenum"> 507</span></a>  
<a name="l508"><span class="linenum"> 508</span></a>      <span class="comment">/**</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">     * Checks to see whether any of the blocks within the given regions are docked</span>
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment">     *</span>
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment">     * @see region_completely_docked</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment">     * @param array|string $regions array of regions (or single region)</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">     * @return bool True if any of the blocks within that region are docked</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">     */</span>
<a name="l515"><span class="linenum"> 515</span></a>      public function <a class="function" onClick="logFunction('region_uses_dock')" href="../_functions/region_uses_dock.html" onMouseOver="funcPopup(event,'region_uses_dock')">region_uses_dock</a>(<a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../_variables/regions.html">$regions</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l516"><span class="linenum"> 516</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;theme-&gt;enable_dock) {
<a name="l517"><span class="linenum"> 517</span></a>              return false;
<a name="l518"><span class="linenum"> 518</span></a>          }
<a name="l519"><span class="linenum"> 519</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>();
<a name="l520"><span class="linenum"> 520</span></a>          foreach((array)<a class="var it1191" onMouseOver="hilite(1191)" onMouseOut="lolite()" onClick="logVariable('regions')" href="../_variables/regions.html">$regions</a> as <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l521"><span class="linenum"> 521</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_content_created')" href="../_functions/ensure_content_created.html" onMouseOver="funcPopup(event,'ensure_content_created')">ensure_content_created</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l522"><span class="linenum"> 522</span></a>              foreach(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] as <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l523"><span class="linenum"> 523</span></a>                  if(!empty(<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('content')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/content.html">content</a>) &amp;&amp; <a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('docked_block_instance_'.<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a>, 0)) {
<a name="l524"><span class="linenum"> 524</span></a>                      return true;
<a name="l525"><span class="linenum"> 525</span></a>                  }
<a name="l526"><span class="linenum"> 526</span></a>              }
<a name="l527"><span class="linenum"> 527</span></a>          }
<a name="l528"><span class="linenum"> 528</span></a>          return false;
<a name="l529"><span class="linenum"> 529</span></a>      }
<a name="l530"><span class="linenum"> 530</span></a>  
<a name="l531"><span class="linenum"> 531</span></a>  <span class="comment">/// Actions ====================================================================</span>
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>      <span class="comment">/**</span>
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">     * This method actually loads the blocks for our page from the database.</span>
<a name="l535"><span class="linenum"> 535</span></a>  <span class="comment">     *</span>
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">     * @param boolean|null $includeinvisible</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">     *      null (default) - load hidden blocks if $this-&gt;page-&gt;user_is_editing();</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">     *      true - load hidden blocks.</span>
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">     *      false - don't load hidden blocks.</span>
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">     */</span>
<a name="l541"><span class="linenum"> 541</span></a>      public function <a class="function" onClick="logFunction('load_blocks')" href="../_functions/load_blocks.html" onMouseOver="funcPopup(event,'load_blocks')">load_blocks</a>(<a class="var it7854" onMouseOver="hilite(7854)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a> = null) {
<a name="l542"><span class="linenum"> 542</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l543"><span class="linenum"> 543</span></a>  
<a name="l544"><span class="linenum"> 544</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>)) {
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment">            // Already done.</span>
<a name="l546"><span class="linenum"> 546</span></a>              return;
<a name="l547"><span class="linenum"> 547</span></a>          }
<a name="l548"><span class="linenum"> 548</span></a>  
<a name="l549"><span class="linenum"> 549</span></a>          if (<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('version')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/version.html">version</a> &lt; 2009050619) {
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">            // Upgrade/install not complete. Don't try too show any blocks.</span>
<a name="l551"><span class="linenum"> 551</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a> = array();
<a name="l552"><span class="linenum"> 552</span></a>              return;
<a name="l553"><span class="linenum"> 553</span></a>          }
<a name="l554"><span class="linenum"> 554</span></a>  
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">        // Ensure we have been initialised.</span>
<a name="l556"><span class="linenum"> 556</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>)) {
<a name="l557"><span class="linenum"> 557</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('initialise_theme_and_output')" href="../_functions/initialise_theme_and_output.html" onMouseOver="funcPopup(event,'initialise_theme_and_output')">initialise_theme_and_output</a>();
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment">            // If there are still no block regions, then there are no blocks on this page.</span>
<a name="l559"><span class="linenum"> 559</span></a>              if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a>)) {
<a name="l560"><span class="linenum"> 560</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a> = array();
<a name="l561"><span class="linenum"> 561</span></a>                  return;
<a name="l562"><span class="linenum"> 562</span></a>              }
<a name="l563"><span class="linenum"> 563</span></a>          }
<a name="l564"><span class="linenum"> 564</span></a>  
<a name="l565"><span class="linenum"> 565</span></a>  <span class="comment">        // Check if we need to load normal blocks</span>
<a name="l566"><span class="linenum"> 566</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fakeblocksonly')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/fakeblocksonly.html">fakeblocksonly</a>) {
<a name="l567"><span class="linenum"> 567</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('prepare_per_region_arrays')" href="../_functions/prepare_per_region_arrays.html" onMouseOver="funcPopup(event,'prepare_per_region_arrays')">prepare_per_region_arrays</a>();
<a name="l568"><span class="linenum"> 568</span></a>              return;
<a name="l569"><span class="linenum"> 569</span></a>          }
<a name="l570"><span class="linenum"> 570</span></a>  
<a name="l571"><span class="linenum"> 571</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it7854" onMouseOver="hilite(7854)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a>)) {
<a name="l572"><span class="linenum"> 572</span></a>              <a class="var it7854" onMouseOver="hilite(7854)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>();
<a name="l573"><span class="linenum"> 573</span></a>          }
<a name="l574"><span class="linenum"> 574</span></a>          if (<a class="var it7854" onMouseOver="hilite(7854)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a>) {
<a name="l575"><span class="linenum"> 575</span></a>              <a class="var it26671" onMouseOver="hilite(26671)" onMouseOut="lolite()" onClick="logVariable('visiblecheck')" href="../_variables/visiblecheck.html">$visiblecheck</a> = '';
<a name="l576"><span class="linenum"> 576</span></a>          } else {
<a name="l577"><span class="linenum"> 577</span></a>              <a class="var it26671" onMouseOver="hilite(26671)" onMouseOut="lolite()" onClick="logVariable('visiblecheck')" href="../_variables/visiblecheck.html">$visiblecheck</a> = 'AND (bp.visible = 1 OR bp.visible IS NULL)';
<a name="l578"><span class="linenum"> 578</span></a>          }
<a name="l579"><span class="linenum"> 579</span></a>  
<a name="l580"><span class="linenum"> 580</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context;
<a name="l581"><span class="linenum"> 581</span></a>          <a class="var it26672" onMouseOver="hilite(26672)" onMouseOut="lolite()" onClick="logVariable('contexttest')" href="../_variables/contexttest.html">$contexttest</a> = 'bi.parentcontextid = :contextid2';
<a name="l582"><span class="linenum"> 582</span></a>          <a class="var it26673" onMouseOver="hilite(26673)" onMouseOut="lolite()" onClick="logVariable('parentcontextparams')" href="../_variables/parentcontextparams.html">$parentcontextparams</a> = array();
<a name="l583"><span class="linenum"> 583</span></a>          <a class="var it26674" onMouseOver="hilite(26674)" onMouseOut="lolite()" onClick="logVariable('parentcontextids')" href="../_variables/parentcontextids.html">$parentcontextids</a> = <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a class="function" onClick="logFunction('get_parent_context_ids')" href="../_functions/get_parent_context_ids.html" onMouseOver="funcPopup(event,'get_parent_context_ids')">get_parent_context_ids</a>();
<a name="l584"><span class="linenum"> 584</span></a>          if (<a class="var it26674" onMouseOver="hilite(26674)" onMouseOut="lolite()" onClick="logVariable('parentcontextids')" href="../_variables/parentcontextids.html">$parentcontextids</a>) {
<a name="l585"><span class="linenum"> 585</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it26675" onMouseOver="hilite(26675)" onMouseOut="lolite()" onClick="logVariable('parentcontexttest')" href="../_variables/parentcontexttest.html">$parentcontexttest</a>, <a class="var it26673" onMouseOver="hilite(26673)" onMouseOut="lolite()" onClick="logVariable('parentcontextparams')" href="../_variables/parentcontextparams.html">$parentcontextparams</a>) =
<a name="l586"><span class="linenum"> 586</span></a>                      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it26674" onMouseOver="hilite(26674)" onMouseOut="lolite()" onClick="logVariable('parentcontextids')" href="../_variables/parentcontextids.html">$parentcontextids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'parentcontext');
<a name="l587"><span class="linenum"> 587</span></a>              <a class="var it26672" onMouseOver="hilite(26672)" onMouseOut="lolite()" onClick="logVariable('contexttest')" href="../_variables/contexttest.html">$contexttest</a> = &quot;(<a class="var it26672" onMouseOver="hilite(26672)" onMouseOut="lolite()" onClick="logVariable('contexttest')" href="../_variables/contexttest.html">$contexttest</a> <a class="function" onClick="logFunction('OR')" href="../_functions/or.html" onMouseOver="funcPopup(event,'or')">OR</a> (bi.showinsubcontexts = 1 AND bi.parentcontextid <a class="var it26675" onMouseOver="hilite(26675)" onMouseOut="lolite()" onClick="logVariable('parentcontexttest')" href="../_variables/parentcontexttest.html">$parentcontexttest</a>))&quot;;
<a name="l588"><span class="linenum"> 588</span></a>          }
<a name="l589"><span class="linenum"> 589</span></a>  
<a name="l590"><span class="linenum"> 590</span></a>          <a class="var it26676" onMouseOver="hilite(26676)" onMouseOut="lolite()" onClick="logVariable('pagetypepatterns')" href="../_variables/pagetypepatterns.html">$pagetypepatterns</a> = <a class="function" onClick="logFunction('matching_page_type_patterns')" href="../_functions/matching_page_type_patterns.html" onMouseOver="funcPopup(event,'matching_page_type_patterns')">matching_page_type_patterns</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype);
<a name="l591"><span class="linenum"> 591</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it26677" onMouseOver="hilite(26677)" onMouseOut="lolite()" onClick="logVariable('pagetypepatterntest')" href="../_variables/pagetypepatterntest.html">$pagetypepatterntest</a>, <a class="var it26678" onMouseOver="hilite(26678)" onMouseOut="lolite()" onClick="logVariable('pagetypepatternparams')" href="../_variables/pagetypepatternparams.html">$pagetypepatternparams</a>) =
<a name="l592"><span class="linenum"> 592</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it26676" onMouseOver="hilite(26676)" onMouseOut="lolite()" onClick="logVariable('pagetypepatterns')" href="../_variables/pagetypepatterns.html">$pagetypepatterns</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'pagetypepatterntest');
<a name="l593"><span class="linenum"> 593</span></a>  
<a name="l594"><span class="linenum"> 594</span></a>          <a class="var it7824" onMouseOver="hilite(7824)" onMouseOut="lolite()" onClick="logVariable('ccselect')" href="../_variables/ccselect.html">$ccselect</a> = ', ' . <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_preload_record_columns_sql')" href="../_functions/get_preload_record_columns_sql.html" onMouseOver="funcPopup(event,'get_preload_record_columns_sql')">get_preload_record_columns_sql</a>('ctx');
<a name="l595"><span class="linenum"> 595</span></a>          <a class="var it7825" onMouseOver="hilite(7825)" onMouseOut="lolite()" onClick="logVariable('ccjoin')" href="../_variables/ccjoin.html">$ccjoin</a> = &quot;LEFT JOIN {context} ctx <a class="function" onClick="logFunction('ON')" href="../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (ctx.instanceid = bi.id AND ctx.contextlevel = :contextlevel)&quot;;
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array(
<a name="l598"><span class="linenum"> 598</span></a>              'contextlevel' =&gt; <a class="constant" onClick="logConstant('CONTEXT_BLOCK')" href="../_constants/CONTEXT_BLOCK.html" onMouseOver="constPopup(event,'CONTEXT_BLOCK')">CONTEXT_BLOCK</a>,
<a name="l599"><span class="linenum"> 599</span></a>              'subpage1' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage,
<a name="l600"><span class="linenum"> 600</span></a>              'subpage2' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage,
<a name="l601"><span class="linenum"> 601</span></a>              'contextid1' =&gt; <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l602"><span class="linenum"> 602</span></a>              'contextid2' =&gt; <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l603"><span class="linenum"> 603</span></a>              'pagetype' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype,
<a name="l604"><span class="linenum"> 604</span></a>          );
<a name="l605"><span class="linenum"> 605</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage === '') {
<a name="l606"><span class="linenum"> 606</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['subpage1'] = '';
<a name="l607"><span class="linenum"> 607</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['subpage2'] = '';
<a name="l608"><span class="linenum"> 608</span></a>          }
<a name="l609"><span class="linenum"> 609</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a> = &quot;SELECT
<a name="l610"><span class="linenum"> 610</span></a>                      bi.id,
<a name="l611"><span class="linenum"> 611</span></a>                      bp.id AS blockpositionid,
<a name="l612"><span class="linenum"> 612</span></a>                      bi.blockname,
<a name="l613"><span class="linenum"> 613</span></a>                      bi.parentcontextid,
<a name="l614"><span class="linenum"> 614</span></a>                      bi.showinsubcontexts,
<a name="l615"><span class="linenum"> 615</span></a>                      bi.pagetypepattern,
<a name="l616"><span class="linenum"> 616</span></a>                      bi.subpagepattern,
<a name="l617"><span class="linenum"> 617</span></a>                      bi.defaultregion,
<a name="l618"><span class="linenum"> 618</span></a>                      bi.defaultweight,
<a name="l619"><span class="linenum"> 619</span></a>                      COALESCE(bp.visible, 1) AS visible,
<a name="l620"><span class="linenum"> 620</span></a>                      COALESCE(bp.region, bi.defaultregion) AS region,
<a name="l621"><span class="linenum"> 621</span></a>                      COALESCE(bp.weight, bi.defaultweight) AS weight,
<a name="l622"><span class="linenum"> 622</span></a>                      bi.configdata
<a name="l623"><span class="linenum"> 623</span></a>                      <a class="var it7824" onMouseOver="hilite(7824)" onMouseOut="lolite()" onClick="logVariable('ccselect')" href="../_variables/ccselect.html">$ccselect</a>
<a name="l624"><span class="linenum"> 624</span></a>  
<a name="l625"><span class="linenum"> 625</span></a>                  FROM {block_instances} bi
<a name="l626"><span class="linenum"> 626</span></a>                  JOIN {block} b ON bi.blockname = b.name
<a name="l627"><span class="linenum"> 627</span></a>                  LEFT JOIN {block_positions} bp ON bp.blockinstanceid = bi.id
<a name="l628"><span class="linenum"> 628</span></a>                                                    AND bp.contextid = :contextid1
<a name="l629"><span class="linenum"> 629</span></a>                                                    AND bp.pagetype = :pagetype
<a name="l630"><span class="linenum"> 630</span></a>                                                    AND bp.subpage = :subpage1
<a name="l631"><span class="linenum"> 631</span></a>                  <a class="var it7825" onMouseOver="hilite(7825)" onMouseOut="lolite()" onClick="logVariable('ccjoin')" href="../_variables/ccjoin.html">$ccjoin</a>
<a name="l632"><span class="linenum"> 632</span></a>  
<a name="l633"><span class="linenum"> 633</span></a>                  WHERE
<a name="l634"><span class="linenum"> 634</span></a>                  <a class="var it26672" onMouseOver="hilite(26672)" onMouseOut="lolite()" onClick="logVariable('contexttest')" href="../_variables/contexttest.html">$contexttest</a>
<a name="l635"><span class="linenum"> 635</span></a>                  AND bi.pagetypepattern <a class="var it26677" onMouseOver="hilite(26677)" onMouseOut="lolite()" onClick="logVariable('pagetypepatterntest')" href="../_variables/pagetypepatterntest.html">$pagetypepatterntest</a>
<a name="l636"><span class="linenum"> 636</span></a>                  AND (bi.subpagepattern IS NULL OR bi.subpagepattern = :subpage2)
<a name="l637"><span class="linenum"> 637</span></a>                  <a class="var it26671" onMouseOver="hilite(26671)" onMouseOut="lolite()" onClick="logVariable('visiblecheck')" href="../_variables/visiblecheck.html">$visiblecheck</a>
<a name="l638"><span class="linenum"> 638</span></a>                  AND b.visible = 1
<a name="l639"><span class="linenum"> 639</span></a>  
<a name="l640"><span class="linenum"> 640</span></a>                  ORDER BY
<a name="l641"><span class="linenum"> 641</span></a>                      COALESCE(bp.region, bi.defaultregion),
<a name="l642"><span class="linenum"> 642</span></a>                      COALESCE(bp.weight, bi.defaultweight),
<a name="l643"><span class="linenum"> 643</span></a>                      bi.id&quot;;
<a name="l644"><span class="linenum"> 644</span></a>          <a class="var it26662" onMouseOver="hilite(26662)" onMouseOut="lolite()" onClick="logVariable('blockinstances')" href="../_variables/blockinstances.html">$blockinstances</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> + <a class="var it26673" onMouseOver="hilite(26673)" onMouseOut="lolite()" onClick="logVariable('parentcontextparams')" href="../_variables/parentcontextparams.html">$parentcontextparams</a> + <a class="var it26678" onMouseOver="hilite(26678)" onMouseOut="lolite()" onClick="logVariable('pagetypepatternparams')" href="../_variables/pagetypepatternparams.html">$pagetypepatternparams</a>);
<a name="l645"><span class="linenum"> 645</span></a>  
<a name="l646"><span class="linenum"> 646</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('prepare_per_region_arrays')" href="../_functions/prepare_per_region_arrays.html" onMouseOver="funcPopup(event,'prepare_per_region_arrays')">prepare_per_region_arrays</a>();
<a name="l647"><span class="linenum"> 647</span></a>          <a class="var it26679" onMouseOver="hilite(26679)" onMouseOut="lolite()" onClick="logVariable('unknown')" href="../_variables/unknown.html">$unknown</a> = array();
<a name="l648"><span class="linenum"> 648</span></a>          foreach (<a class="var it26662" onMouseOver="hilite(26662)" onMouseOut="lolite()" onClick="logVariable('blockinstances')" href="../_variables/blockinstances.html">$blockinstances</a> as <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>) {
<a name="l649"><span class="linenum"> 649</span></a>              <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('preload_from_record')" href="../_functions/preload_from_record.html" onMouseOver="funcPopup(event,'preload_from_record')">preload_from_record</a>(<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>);
<a name="l650"><span class="linenum"> 650</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('region')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/region.html">region</a>)) {
<a name="l651"><span class="linenum"> 651</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>[<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('region')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/region.html">region</a>][] = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>;
<a name="l652"><span class="linenum"> 652</span></a>              } else {
<a name="l653"><span class="linenum"> 653</span></a>                  <a class="var it26679" onMouseOver="hilite(26679)" onMouseOut="lolite()" onClick="logVariable('unknown')" href="../_variables/unknown.html">$unknown</a>[] = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>;
<a name="l654"><span class="linenum"> 654</span></a>              }
<a name="l655"><span class="linenum"> 655</span></a>          }
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment">        // Pages don't necessarily have a defaultregion. The  one time this can</span>
<a name="l658"><span class="linenum"> 658</span></a>  <span class="comment">        // happen is when there are no theme block regions, but the script itself</span>
<a name="l659"><span class="linenum"> 659</span></a>  <span class="comment">        // has a block region in the main content area.</span>
<a name="l660"><span class="linenum"> 660</span></a>          if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>)) {
<a name="l661"><span class="linenum"> 661</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>] =
<a name="l662"><span class="linenum"> 662</span></a>                      <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>], <a class="var it26679" onMouseOver="hilite(26679)" onMouseOut="lolite()" onClick="logVariable('unknown')" href="../_variables/unknown.html">$unknown</a>);
<a name="l663"><span class="linenum"> 663</span></a>          }
<a name="l664"><span class="linenum"> 664</span></a>      }
<a name="l665"><span class="linenum"> 665</span></a>  
<a name="l666"><span class="linenum"> 666</span></a>      <span class="comment">/**</span>
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment">     * Add a block to the current page, or related pages. The block is added to</span>
<a name="l668"><span class="linenum"> 668</span></a>  <span class="comment">     * context $this-&gt;page-&gt;contextid. If $pagetypepattern $subpagepattern</span>
<a name="l669"><span class="linenum"> 669</span></a>  <span class="comment">     *</span>
<a name="l670"><span class="linenum"> 670</span></a>  <span class="comment">     * @param string $blockname The type of block to add.</span>
<a name="l671"><span class="linenum"> 671</span></a>  <span class="comment">     * @param string $region the block region on this page to add the block to.</span>
<a name="l672"><span class="linenum"> 672</span></a>  <span class="comment">     * @param integer $weight determines the order where this block appears in the region.</span>
<a name="l673"><span class="linenum"> 673</span></a>  <span class="comment">     * @param boolean $showinsubcontexts whether this block appears in subcontexts, or just the current context.</span>
<a name="l674"><span class="linenum"> 674</span></a>  <span class="comment">     * @param string|null $pagetypepattern which page types this block should appear on. Defaults to just the current page type.</span>
<a name="l675"><span class="linenum"> 675</span></a>  <span class="comment">     * @param string|null $subpagepattern which subpage this block should appear on. NULL = any (the default), otherwise only the specified subpage.</span>
<a name="l676"><span class="linenum"> 676</span></a>  <span class="comment">     */</span>
<a name="l677"><span class="linenum"> 677</span></a>      public function <a class="function" onClick="logFunction('add_block')" href="../_functions/add_block.html" onMouseOver="funcPopup(event,'add_block')">add_block</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>, <a class="var it26680" onMouseOver="hilite(26680)" onMouseOut="lolite()" onClick="logVariable('showinsubcontexts')" href="../_variables/showinsubcontexts.html">$showinsubcontexts</a>, <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = NULL, <a class="var it26682" onMouseOver="hilite(26682)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a> = NULL) {
<a name="l678"><span class="linenum"> 678</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment">        // Allow invisible blocks because this is used when adding default page blocks, which</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment">        // might include invisible ones if the user makes some default blocks invisible</span>
<a name="l681"><span class="linenum"> 681</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_known_block_type')" href="../_functions/check_known_block_type.html" onMouseOver="funcPopup(event,'check_known_block_type')">check_known_block_type</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, true);
<a name="l682"><span class="linenum"> 682</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_region_is_known')" href="../_functions/check_region_is_known.html" onMouseOver="funcPopup(event,'check_region_is_known')">check_region_is_known</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l683"><span class="linenum"> 683</span></a>  
<a name="l684"><span class="linenum"> 684</span></a>          if (empty(<a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>)) {
<a name="l685"><span class="linenum"> 685</span></a>              <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype;
<a name="l686"><span class="linenum"> 686</span></a>          }
<a name="l687"><span class="linenum"> 687</span></a>  
<a name="l688"><span class="linenum"> 688</span></a>          <a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a> = new stdClass;
<a name="l689"><span class="linenum"> 689</span></a>          <a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('blockname')" class="var it40989" onMouseOver="hilite(40989)" onMouseOut="lolite()" href="../_variables/blockname.html">blockname</a> = <a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>;
<a name="l690"><span class="linenum"> 690</span></a>          <a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('parentcontextid')" class="var it40989" onMouseOver="hilite(40989)" onMouseOut="lolite()" href="../_variables/parentcontextid.html">parentcontextid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;id;
<a name="l691"><span class="linenum"> 691</span></a>          <a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it40989" onMouseOver="hilite(40989)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = !empty(<a class="var it26680" onMouseOver="hilite(26680)" onMouseOut="lolite()" onClick="logVariable('showinsubcontexts')" href="../_variables/showinsubcontexts.html">$showinsubcontexts</a>);
<a name="l692"><span class="linenum"> 692</span></a>          <a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it40989" onMouseOver="hilite(40989)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a> = <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>;
<a name="l693"><span class="linenum"> 693</span></a>          <a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('subpagepattern')" class="var it40989" onMouseOver="hilite(40989)" onMouseOut="lolite()" href="../_variables/subpagepattern.html">subpagepattern</a> = <a class="var it26682" onMouseOver="hilite(26682)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a>;
<a name="l694"><span class="linenum"> 694</span></a>          <a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it40989" onMouseOver="hilite(40989)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a> = <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>;
<a name="l695"><span class="linenum"> 695</span></a>          <a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('defaultweight')" class="var it40989" onMouseOver="hilite(40989)" onMouseOut="lolite()" href="../_variables/defaultweight.html">defaultweight</a> = <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>;
<a name="l696"><span class="linenum"> 696</span></a>          <a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('configdata')" class="var it40989" onMouseOver="hilite(40989)" onMouseOut="lolite()" href="../_variables/configdata.html">configdata</a> = '';
<a name="l697"><span class="linenum"> 697</span></a>          <a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('id')" class="var it40989" onMouseOver="hilite(40989)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('block_instances', <a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>);
<a name="l698"><span class="linenum"> 698</span></a>  
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">        // Ensure the block context is created.</span>
<a name="l700"><span class="linenum"> 700</span></a>          <a class="class" onClick="logClass('context_block')" href="../_classes/context_block.html" onMouseOver="classPopup(event,'context_block')">context_block</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>-&gt;<a onClick="logVariable('id')" class="var it40989" onMouseOver="hilite(40989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l701"><span class="linenum"> 701</span></a>  
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">        // If the new instance was created, allow it to do additional setup</span>
<a name="l703"><span class="linenum"> 703</span></a>          if (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it26683" onMouseOver="hilite(26683)" onMouseOut="lolite()" onClick="logVariable('blockinstance')" href="../_variables/blockinstance.html">$blockinstance</a>)) {
<a name="l704"><span class="linenum"> 704</span></a>              <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('instance_create')" href="../_functions/instance_create.html" onMouseOver="funcPopup(event,'instance_create')">instance_create</a>();
<a name="l705"><span class="linenum"> 705</span></a>          }
<a name="l706"><span class="linenum"> 706</span></a>      }
<a name="l707"><span class="linenum"> 707</span></a>  
<a name="l708"><span class="linenum"> 708</span></a>      public function <a class="function" onClick="logFunction('add_block_at_end_of_default_region')" href="../_functions/add_block_at_end_of_default_region.html" onMouseOver="funcPopup(event,'add_block_at_end_of_default_region')">add_block_at_end_of_default_region</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>) {
<a name="l709"><span class="linenum"> 709</span></a>          <a class="var it26684" onMouseOver="hilite(26684)" onMouseOut="lolite()" onClick="logVariable('defaulregion')" href="../_variables/defaulregion.html">$defaulregion</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_default_region')" href="../_functions/get_default_region.html" onMouseOver="funcPopup(event,'get_default_region')">get_default_region</a>();
<a name="l710"><span class="linenum"> 710</span></a>  
<a name="l711"><span class="linenum"> 711</span></a>          <a class="var it26685" onMouseOver="hilite(26685)" onMouseOut="lolite()" onClick="logVariable('lastcurrentblock')" href="../_variables/lastcurrentblock.html">$lastcurrentblock</a> = <a class="phpfunction" onClick="logFunction('end')" href="../_functions/end.html" onMouseOver="phpfuncPopup(event,'end')">end</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>[<a class="var it26684" onMouseOver="hilite(26684)" onMouseOut="lolite()" onClick="logVariable('defaulregion')" href="../_variables/defaulregion.html">$defaulregion</a>]);
<a name="l712"><span class="linenum"> 712</span></a>          if (<a class="var it26685" onMouseOver="hilite(26685)" onMouseOut="lolite()" onClick="logVariable('lastcurrentblock')" href="../_variables/lastcurrentblock.html">$lastcurrentblock</a>) {
<a name="l713"><span class="linenum"> 713</span></a>              <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> = <a class="var it26685" onMouseOver="hilite(26685)" onMouseOut="lolite()" onClick="logVariable('lastcurrentblock')" href="../_variables/lastcurrentblock.html">$lastcurrentblock</a>-&gt;<a onClick="logVariable('weight')" class="var it41004" onMouseOver="hilite(41004)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> + 1;
<a name="l714"><span class="linenum"> 714</span></a>          } else {
<a name="l715"><span class="linenum"> 715</span></a>              <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> = 0;
<a name="l716"><span class="linenum"> 716</span></a>          }
<a name="l717"><span class="linenum"> 717</span></a>  
<a name="l718"><span class="linenum"> 718</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage) {
<a name="l719"><span class="linenum"> 719</span></a>              <a class="var it2669" onMouseOver="hilite(2669)" onMouseOut="lolite()" onClick="logVariable('subpage')" href="../_variables/subpage.html">$subpage</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage;
<a name="l720"><span class="linenum"> 720</span></a>          } else {
<a name="l721"><span class="linenum"> 721</span></a>              <a class="var it2669" onMouseOver="hilite(2669)" onMouseOut="lolite()" onClick="logVariable('subpage')" href="../_variables/subpage.html">$subpage</a> = null;
<a name="l722"><span class="linenum"> 722</span></a>          }
<a name="l723"><span class="linenum"> 723</span></a>  
<a name="l724"><span class="linenum"> 724</span></a>  <span class="comment">        // Special case. Course view page type include the course format, but we</span>
<a name="l725"><span class="linenum"> 725</span></a>  <span class="comment">        // want to add the block non-format-specifically.</span>
<a name="l726"><span class="linenum"> 726</span></a>          <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype;
<a name="l727"><span class="linenum"> 727</span></a>          if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>, 'course-view') === 0) {
<a name="l728"><span class="linenum"> 728</span></a>              <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = 'course-view-*';
<a name="l729"><span class="linenum"> 729</span></a>          }
<a name="l730"><span class="linenum"> 730</span></a>  
<a name="l731"><span class="linenum"> 731</span></a>  <span class="comment">        // We should end using this for ALL the blocks, making always the 1st option</span>
<a name="l732"><span class="linenum"> 732</span></a>  <span class="comment">        // the default one to be used. Until then, this is one hack to avoid the</span>
<a name="l733"><span class="linenum"> 733</span></a>  <span class="comment">        // 'pagetypewarning' message on blocks initial edition (MDL-27829) caused by</span>
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">        // non-existing $pagetypepattern set. This way at least we guarantee one &quot;valid&quot;</span>
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment">        // (the FIRST $pagetypepattern will be set)</span>
<a name="l736"><span class="linenum"> 736</span></a>  
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment">        // We are applying it to all blocks created in mod pages for now and only if the</span>
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment">        // default pagetype is not one of the available options</span>
<a name="l739"><span class="linenum"> 739</span></a>          if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>('/^mod-.*-/', <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>)) {
<a name="l740"><span class="linenum"> 740</span></a>              <a class="var it8353" onMouseOver="hilite(8353)" onMouseOut="lolite()" onClick="logVariable('pagetypelist')" href="../_variables/pagetypelist.html">$pagetypelist</a> = <a class="function" onClick="logFunction('generate_page_type_patterns')" href="../_functions/generate_page_type_patterns.html" onMouseOver="funcPopup(event,'generate_page_type_patterns')">generate_page_type_patterns</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype, null, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context);
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">            // Only go for the first if the pagetype is not a valid option</span>
<a name="l742"><span class="linenum"> 742</span></a>              if (<a class="phpfunction" onClick="logFunction('is_array')" href="../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it8353" onMouseOver="hilite(8353)" onMouseOut="lolite()" onClick="logVariable('pagetypelist')" href="../_variables/pagetypelist.html">$pagetypelist</a>) &amp;&amp; !<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>, <a class="var it8353" onMouseOver="hilite(8353)" onMouseOut="lolite()" onClick="logVariable('pagetypelist')" href="../_variables/pagetypelist.html">$pagetypelist</a>)) {
<a name="l743"><span class="linenum"> 743</span></a>                  <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = <a class="phpfunction" onClick="logFunction('key')" href="../_functions/key.html" onMouseOver="phpfuncPopup(event,'key')">key</a>(<a class="var it8353" onMouseOver="hilite(8353)" onMouseOut="lolite()" onClick="logVariable('pagetypelist')" href="../_variables/pagetypelist.html">$pagetypelist</a>);
<a name="l744"><span class="linenum"> 744</span></a>              }
<a name="l745"><span class="linenum"> 745</span></a>          }
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment">        // Surely other pages like course-report will need this too, they just are not important</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment">        // enough now. This will be decided in the coming days. (MDL-27829, MDL-28150)</span>
<a name="l748"><span class="linenum"> 748</span></a>  
<a name="l749"><span class="linenum"> 749</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_block')" href="../_functions/add_block.html" onMouseOver="funcPopup(event,'add_block')">add_block</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it26684" onMouseOver="hilite(26684)" onMouseOut="lolite()" onClick="logVariable('defaulregion')" href="../_variables/defaulregion.html">$defaulregion</a>, <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>, false, <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>, <a class="var it2669" onMouseOver="hilite(2669)" onMouseOut="lolite()" onClick="logVariable('subpage')" href="../_variables/subpage.html">$subpage</a>);
<a name="l750"><span class="linenum"> 750</span></a>      }
<a name="l751"><span class="linenum"> 751</span></a>  
<a name="l752"><span class="linenum"> 752</span></a>      <span class="comment">/**</span>
<a name="l753"><span class="linenum"> 753</span></a>  <span class="comment">     * Convenience method, calls add_block repeatedly for all the blocks in $blocks. Optionally, a starting weight</span>
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment">     * can be used to decide the starting point that blocks are added in the region, the weight is passed to {@link add_block}</span>
<a name="l755"><span class="linenum"> 755</span></a>  <span class="comment">     * and incremented by the position of the block in the $blocks array</span>
<a name="l756"><span class="linenum"> 756</span></a>  <span class="comment">     *</span>
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">     * @param array $blocks array with array keys the region names, and values an array of block names.</span>
<a name="l758"><span class="linenum"> 758</span></a>  <span class="comment">     * @param string $pagetypepattern optional. Passed to {@link add_block()}</span>
<a name="l759"><span class="linenum"> 759</span></a>  <span class="comment">     * @param string $subpagepattern optional. Passed to {@link add_block()}</span>
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment">     * @param boolean $showinsubcontexts optional. Passed to {@link add_block()}</span>
<a name="l761"><span class="linenum"> 761</span></a>  <span class="comment">     * @param integer $weight optional. Determines the starting point that the blocks are added in the region.</span>
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment">     */</span>
<a name="l763"><span class="linenum"> 763</span></a>      public function <a class="function" onClick="logFunction('add_blocks')" href="../_functions/add_blocks.html" onMouseOver="funcPopup(event,'add_blocks')">add_blocks</a>(<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>, <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = NULL, <a class="var it26682" onMouseOver="hilite(26682)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a> = NULL, <a class="var it26680" onMouseOver="hilite(26680)" onMouseOut="lolite()" onClick="logVariable('showinsubcontexts')" href="../_variables/showinsubcontexts.html">$showinsubcontexts</a>=false, <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>=0) {
<a name="l764"><span class="linenum"> 764</span></a>          <a class="var it26686" onMouseOver="hilite(26686)" onMouseOut="lolite()" onClick="logVariable('initialweight')" href="../_variables/initialweight.html">$initialweight</a> = <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>;
<a name="l765"><span class="linenum"> 765</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_regions')" href="../_functions/add_regions.html" onMouseOver="funcPopup(event,'add_regions')">add_regions</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>), false);
<a name="l766"><span class="linenum"> 766</span></a>          foreach (<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> as <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> =&gt; <a class="var it26687" onMouseOver="hilite(26687)" onMouseOut="lolite()" onClick="logVariable('regionblocks')" href="../_variables/regionblocks.html">$regionblocks</a>) {
<a name="l767"><span class="linenum"> 767</span></a>              foreach (<a class="var it26687" onMouseOver="hilite(26687)" onMouseOut="lolite()" onClick="logVariable('regionblocks')" href="../_variables/regionblocks.html">$regionblocks</a> as <a class="var it1331" onMouseOver="hilite(1331)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a> =&gt; <a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>) {
<a name="l768"><span class="linenum"> 768</span></a>                  <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> = <a class="var it26686" onMouseOver="hilite(26686)" onMouseOut="lolite()" onClick="logVariable('initialweight')" href="../_variables/initialweight.html">$initialweight</a> + <a class="var it1331" onMouseOver="hilite(1331)" onMouseOut="lolite()" onClick="logVariable('offset')" href="../_variables/offset.html">$offset</a>;
<a name="l769"><span class="linenum"> 769</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_block')" href="../_functions/add_block.html" onMouseOver="funcPopup(event,'add_block')">add_block</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>, <a class="var it26680" onMouseOver="hilite(26680)" onMouseOut="lolite()" onClick="logVariable('showinsubcontexts')" href="../_variables/showinsubcontexts.html">$showinsubcontexts</a>, <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>, <a class="var it26682" onMouseOver="hilite(26682)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a>);
<a name="l770"><span class="linenum"> 770</span></a>              }
<a name="l771"><span class="linenum"> 771</span></a>          }
<a name="l772"><span class="linenum"> 772</span></a>      }
<a name="l773"><span class="linenum"> 773</span></a>  
<a name="l774"><span class="linenum"> 774</span></a>      <span class="comment">/**</span>
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment">     * Move a block to a new position on this page.</span>
<a name="l776"><span class="linenum"> 776</span></a>  <span class="comment">     *</span>
<a name="l777"><span class="linenum"> 777</span></a>  <span class="comment">     * If this block cannot appear on any other pages, then we change defaultposition/weight</span>
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment">     * in the block_instances table. Otherwise we just set the position on this page.</span>
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">     *</span>
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment">     * @param $blockinstanceid the block instance id.</span>
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment">     * @param $newregion the new region name.</span>
<a name="l782"><span class="linenum"> 782</span></a>  <span class="comment">     * @param $newweight the new weight.</span>
<a name="l783"><span class="linenum"> 783</span></a>  <span class="comment">     */</span>
<a name="l784"><span class="linenum"> 784</span></a>      public function <a class="function" onClick="logFunction('reposition_block')" href="../_functions/reposition_block.html" onMouseOver="funcPopup(event,'reposition_block')">reposition_block</a>(<a class="var it3657" onMouseOver="hilite(3657)" onMouseOut="lolite()" onClick="logVariable('blockinstanceid')" href="../_variables/blockinstanceid.html">$blockinstanceid</a>, <a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>, <a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>) {
<a name="l785"><span class="linenum"> 785</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l786"><span class="linenum"> 786</span></a>  
<a name="l787"><span class="linenum"> 787</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_region_is_known')" href="../_functions/check_region_is_known.html" onMouseOver="funcPopup(event,'check_region_is_known')">check_region_is_known</a>(<a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>);
<a name="l788"><span class="linenum"> 788</span></a>          <a class="var it25261" onMouseOver="hilite(25261)" onMouseOut="lolite()" onClick="logVariable('inst')" href="../_variables/inst.html">$inst</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_instance')" href="../_functions/find_instance.html" onMouseOver="funcPopup(event,'find_instance')">find_instance</a>(<a class="var it3657" onMouseOver="hilite(3657)" onMouseOut="lolite()" onClick="logVariable('blockinstanceid')" href="../_variables/blockinstanceid.html">$blockinstanceid</a>);
<a name="l789"><span class="linenum"> 789</span></a>  
<a name="l790"><span class="linenum"> 790</span></a>          <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a> = <a class="var it25261" onMouseOver="hilite(25261)" onMouseOut="lolite()" onClick="logVariable('inst')" href="../_variables/inst.html">$inst</a>-&gt;<a onClick="logVariable('instance')" class="var it39481" onMouseOver="hilite(39481)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>;
<a name="l791"><span class="linenum"> 791</span></a>          if (<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> == <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('defaultweight')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/defaultweight.html">defaultweight</a> &amp;&amp; <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('region')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/region.html">region</a> == <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a> &amp;&amp;
<a name="l792"><span class="linenum"> 792</span></a>                  !<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a>, '*') === false &amp;&amp;
<a name="l793"><span class="linenum"> 793</span></a>                  (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage || <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('subpagepattern')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/subpagepattern.html">subpagepattern</a>)) {
<a name="l794"><span class="linenum"> 794</span></a>  
<a name="l795"><span class="linenum"> 795</span></a>  <span class="comment">            // Set default position</span>
<a name="l796"><span class="linenum"> 796</span></a>              <a class="var it26690" onMouseOver="hilite(26690)" onMouseOut="lolite()" onClick="logVariable('newbi')" href="../_variables/newbi.html">$newbi</a> = new stdClass;
<a name="l797"><span class="linenum"> 797</span></a>              <a class="var it26690" onMouseOver="hilite(26690)" onMouseOut="lolite()" onClick="logVariable('newbi')" href="../_variables/newbi.html">$newbi</a>-&gt;<a onClick="logVariable('id')" class="var it41005" onMouseOver="hilite(41005)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('id')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l798"><span class="linenum"> 798</span></a>              <a class="var it26690" onMouseOver="hilite(26690)" onMouseOut="lolite()" onClick="logVariable('newbi')" href="../_variables/newbi.html">$newbi</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it41005" onMouseOver="hilite(41005)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a> = <a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>;
<a name="l799"><span class="linenum"> 799</span></a>              <a class="var it26690" onMouseOver="hilite(26690)" onMouseOut="lolite()" onClick="logVariable('newbi')" href="../_variables/newbi.html">$newbi</a>-&gt;<a onClick="logVariable('defaultweight')" class="var it41005" onMouseOver="hilite(41005)" onMouseOut="lolite()" href="../_variables/defaultweight.html">defaultweight</a> = <a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>;
<a name="l800"><span class="linenum"> 800</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('block_instances', <a class="var it26690" onMouseOver="hilite(26690)" onMouseOut="lolite()" onClick="logVariable('newbi')" href="../_variables/newbi.html">$newbi</a>);
<a name="l801"><span class="linenum"> 801</span></a>  
<a name="l802"><span class="linenum"> 802</span></a>              if (<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('blockpositionid')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/blockpositionid.html">blockpositionid</a>) {
<a name="l803"><span class="linenum"> 803</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a> = new stdClass;
<a name="l804"><span class="linenum"> 804</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('id')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('blockpositionid')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/blockpositionid.html">blockpositionid</a>;
<a name="l805"><span class="linenum"> 805</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('region')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/region.html">region</a> = <a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>;
<a name="l806"><span class="linenum"> 806</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('weight')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> = <a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>;
<a name="l807"><span class="linenum"> 807</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('block_positions', <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>);
<a name="l808"><span class="linenum"> 808</span></a>              }
<a name="l809"><span class="linenum"> 809</span></a>  
<a name="l810"><span class="linenum"> 810</span></a>          } else {
<a name="l811"><span class="linenum"> 811</span></a>  <span class="comment">            // Just set position on this page.</span>
<a name="l812"><span class="linenum"> 812</span></a>              <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a> = new stdClass;
<a name="l813"><span class="linenum"> 813</span></a>              <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('region')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/region.html">region</a> = <a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>;
<a name="l814"><span class="linenum"> 814</span></a>              <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('weight')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> = <a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>;
<a name="l815"><span class="linenum"> 815</span></a>  
<a name="l816"><span class="linenum"> 816</span></a>              if (<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('blockpositionid')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/blockpositionid.html">blockpositionid</a>) {
<a name="l817"><span class="linenum"> 817</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('id')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('blockpositionid')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/blockpositionid.html">blockpositionid</a>;
<a name="l818"><span class="linenum"> 818</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('block_positions', <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>);
<a name="l819"><span class="linenum"> 819</span></a>  
<a name="l820"><span class="linenum"> 820</span></a>              } else {
<a name="l821"><span class="linenum"> 821</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a> = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('id')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l822"><span class="linenum"> 822</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('contextid')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;id;
<a name="l823"><span class="linenum"> 823</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('pagetype')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype;
<a name="l824"><span class="linenum"> 824</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage) {
<a name="l825"><span class="linenum"> 825</span></a>                      <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('subpage')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage;
<a name="l826"><span class="linenum"> 826</span></a>                  } else {
<a name="l827"><span class="linenum"> 827</span></a>                      <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('subpage')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a> = '';
<a name="l828"><span class="linenum"> 828</span></a>                  }
<a name="l829"><span class="linenum"> 829</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('visible')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('visible')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a>;
<a name="l830"><span class="linenum"> 830</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('block_positions', <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>);
<a name="l831"><span class="linenum"> 831</span></a>              }
<a name="l832"><span class="linenum"> 832</span></a>          }
<a name="l833"><span class="linenum"> 833</span></a>      }
<a name="l834"><span class="linenum"> 834</span></a>  
<a name="l835"><span class="linenum"> 835</span></a>      <span class="comment">/**</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment">     * Find a given block by its instance id</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment">     *</span>
<a name="l838"><span class="linenum"> 838</span></a>  <span class="comment">     * @param integer $instanceid</span>
<a name="l839"><span class="linenum"> 839</span></a>  <span class="comment">     * @return block_base</span>
<a name="l840"><span class="linenum"> 840</span></a>  <span class="comment">     */</span>
<a name="l841"><span class="linenum"> 841</span></a>      public function <a class="function" onClick="logFunction('find_instance')" href="../_functions/find_instance.html" onMouseOver="funcPopup(event,'find_instance')">find_instance</a>(<a class="var it1622" onMouseOver="hilite(1622)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>) {
<a name="l842"><span class="linenum"> 842</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a> as <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> =&gt; <a class="var it2596" onMouseOver="hilite(2596)" onMouseOut="lolite()" onClick="logVariable('notused')" href="../_variables/notused.html">$notused</a>) {
<a name="l843"><span class="linenum"> 843</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_instances_exist')" href="../_functions/ensure_instances_exist.html" onMouseOver="funcPopup(event,'ensure_instances_exist')">ensure_instances_exist</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l844"><span class="linenum"> 844</span></a>              foreach(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] as <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l845"><span class="linenum"> 845</span></a>                  if (<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id == <a class="var it1622" onMouseOver="hilite(1622)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>) {
<a name="l846"><span class="linenum"> 846</span></a>                      return <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>;
<a name="l847"><span class="linenum"> 847</span></a>                  }
<a name="l848"><span class="linenum"> 848</span></a>              }
<a name="l849"><span class="linenum"> 849</span></a>          }
<a name="l850"><span class="linenum"> 850</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('block_not_on_page_exception')" href="../_classes/block_not_on_page_exception.html" onMouseOver="classPopup(event,'block_not_on_page_exception')">block_not_on_page_exception</a>(<a class="var it1622" onMouseOver="hilite(1622)" onMouseOut="lolite()" onClick="logVariable('instanceid')" href="../_variables/instanceid.html">$instanceid</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>);
<a name="l851"><span class="linenum"> 851</span></a>      }
<a name="l852"><span class="linenum"> 852</span></a>  
<a name="l853"><span class="linenum"> 853</span></a>  <span class="comment">/// Inner workings =============================================================</span>
<a name="l854"><span class="linenum"> 854</span></a>  
<a name="l855"><span class="linenum"> 855</span></a>      <span class="comment">/**</span>
<a name="l856"><span class="linenum"> 856</span></a>  <span class="comment">     * Check whether the page blocks have been loaded yet</span>
<a name="l857"><span class="linenum"> 857</span></a>  <span class="comment">     *</span>
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">     * @return void Throws coding exception if already loaded</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">     */</span>
<a name="l860"><span class="linenum"> 860</span></a>      protected function <a class="function" onClick="logFunction('check_not_yet_loaded')" href="../_functions/check_not_yet_loaded.html" onMouseOver="funcPopup(event,'check_not_yet_loaded')">check_not_yet_loaded</a>() {
<a name="l861"><span class="linenum"> 861</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>)) {
<a name="l862"><span class="linenum"> 862</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('block_manager has already loaded the blocks, to it is too late to change things that might affect which blocks are visible.');
<a name="l863"><span class="linenum"> 863</span></a>          }
<a name="l864"><span class="linenum"> 864</span></a>      }
<a name="l865"><span class="linenum"> 865</span></a>  
<a name="l866"><span class="linenum"> 866</span></a>      <span class="comment">/**</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment">     * Check whether the page blocks have been loaded yet</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment">     *</span>
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment">     * Nearly identical to the above function {@link check_not_yet_loaded()} except different message</span>
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment">     *</span>
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment">     * @return void Throws coding exception if already loaded</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment">     */</span>
<a name="l873"><span class="linenum"> 873</span></a>      protected function <a class="function" onClick="logFunction('check_is_loaded')" href="../_functions/check_is_loaded.html" onMouseOver="funcPopup(event,'check_is_loaded')">check_is_loaded</a>() {
<a name="l874"><span class="linenum"> 874</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>)) {
<a name="l875"><span class="linenum"> 875</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('block_manager has not yet loaded the blocks, to it is too soon to request the information you asked for.');
<a name="l876"><span class="linenum"> 876</span></a>          }
<a name="l877"><span class="linenum"> 877</span></a>      }
<a name="l878"><span class="linenum"> 878</span></a>  
<a name="l879"><span class="linenum"> 879</span></a>      <span class="comment">/**</span>
<a name="l880"><span class="linenum"> 880</span></a>  <span class="comment">     * Check if a block type is known and usable</span>
<a name="l881"><span class="linenum"> 881</span></a>  <span class="comment">     *</span>
<a name="l882"><span class="linenum"> 882</span></a>  <span class="comment">     * @param string $blockname The block type name to search for</span>
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">     * @param bool $includeinvisible Include disabled block types in the initial pass</span>
<a name="l884"><span class="linenum"> 884</span></a>  <span class="comment">     * @return void Coding Exception thrown if unknown or not enabled</span>
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">     */</span>
<a name="l886"><span class="linenum"> 886</span></a>      protected function <a class="function" onClick="logFunction('check_known_block_type')" href="../_functions/check_known_block_type.html" onMouseOver="funcPopup(event,'check_known_block_type')">check_known_block_type</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it7854" onMouseOver="hilite(7854)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a> = false) {
<a name="l887"><span class="linenum"> 887</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_block_type')" href="../_functions/is_known_block_type.html" onMouseOver="funcPopup(event,'is_known_block_type')">is_known_block_type</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it7854" onMouseOver="hilite(7854)" onMouseOut="lolite()" onClick="logVariable('includeinvisible')" href="../_variables/includeinvisible.html">$includeinvisible</a>)) {
<a name="l888"><span class="linenum"> 888</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_block_type')" href="../_functions/is_known_block_type.html" onMouseOver="funcPopup(event,'is_known_block_type')">is_known_block_type</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, true)) {
<a name="l889"><span class="linenum"> 889</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unknown block type ' . <a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>);
<a name="l890"><span class="linenum"> 890</span></a>              } else {
<a name="l891"><span class="linenum"> 891</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Block type ' . <a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a> . ' has been disabled by the administrator.');
<a name="l892"><span class="linenum"> 892</span></a>              }
<a name="l893"><span class="linenum"> 893</span></a>          }
<a name="l894"><span class="linenum"> 894</span></a>      }
<a name="l895"><span class="linenum"> 895</span></a>  
<a name="l896"><span class="linenum"> 896</span></a>      <span class="comment">/**</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment">     * Check if a region is known by its name</span>
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment">     *</span>
<a name="l899"><span class="linenum"> 899</span></a>  <span class="comment">     * @param string $region</span>
<a name="l900"><span class="linenum"> 900</span></a>  <span class="comment">     * @return void Coding Exception thrown if the region is not known</span>
<a name="l901"><span class="linenum"> 901</span></a>  <span class="comment">     */</span>
<a name="l902"><span class="linenum"> 902</span></a>      protected function <a class="function" onClick="logFunction('check_region_is_known')" href="../_functions/check_region_is_known.html" onMouseOver="funcPopup(event,'check_region_is_known')">check_region_is_known</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l903"><span class="linenum"> 903</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>)) {
<a name="l904"><span class="linenum"> 904</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Trying to reference an unknown block region ' . <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l905"><span class="linenum"> 905</span></a>          }
<a name="l906"><span class="linenum"> 906</span></a>      }
<a name="l907"><span class="linenum"> 907</span></a>  
<a name="l908"><span class="linenum"> 908</span></a>      <span class="comment">/**</span>
<a name="l909"><span class="linenum"> 909</span></a>  <span class="comment">     * Returns an array of region names as keys and nested arrays for values</span>
<a name="l910"><span class="linenum"> 910</span></a>  <span class="comment">     *</span>
<a name="l911"><span class="linenum"> 911</span></a>  <span class="comment">     * @return array an array where the array keys are the region names, and the array</span>
<a name="l912"><span class="linenum"> 912</span></a>  <span class="comment">     * values are empty arrays.</span>
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">     */</span>
<a name="l914"><span class="linenum"> 914</span></a>      protected function <a class="function" onClick="logFunction('prepare_per_region_arrays')" href="../_functions/prepare_per_region_arrays.html" onMouseOver="funcPopup(event,'prepare_per_region_arrays')">prepare_per_region_arrays</a>() {
<a name="l915"><span class="linenum"> 915</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = array();
<a name="l916"><span class="linenum"> 916</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('regions')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/regions.html">regions</a> as <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> =&gt; <a class="var it2596" onMouseOver="hilite(2596)" onMouseOut="lolite()" onClick="logVariable('notused')" href="../_variables/notused.html">$notused</a>) {
<a name="l917"><span class="linenum"> 917</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] = array();
<a name="l918"><span class="linenum"> 918</span></a>          }
<a name="l919"><span class="linenum"> 919</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l920"><span class="linenum"> 920</span></a>      }
<a name="l921"><span class="linenum"> 921</span></a>  
<a name="l922"><span class="linenum"> 922</span></a>      <span class="comment">/**</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment">     * Create a set of new block instance from a record array</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment">     *</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment">     * @param array $birecords An array of block instance records</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment">     * @return array An array of instantiated block_instance objects</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment">     */</span>
<a name="l928"><span class="linenum"> 928</span></a>      protected function <a class="function" onClick="logFunction('create_block_instances')" href="../_functions/create_block_instances.html" onMouseOver="funcPopup(event,'create_block_instances')">create_block_instances</a>(<a class="var it26691" onMouseOver="hilite(26691)" onMouseOut="lolite()" onClick="logVariable('birecords')" href="../_variables/birecords.html">$birecords</a>) {
<a name="l929"><span class="linenum"> 929</span></a>          <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a> = array();
<a name="l930"><span class="linenum"> 930</span></a>          foreach (<a class="var it26691" onMouseOver="hilite(26691)" onMouseOut="lolite()" onClick="logVariable('birecords')" href="../_variables/birecords.html">$birecords</a> as <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>) {
<a name="l931"><span class="linenum"> 931</span></a>              if (<a class="var it26692" onMouseOver="hilite(26692)" onMouseOut="lolite()" onClick="logVariable('blockobject')" href="../_variables/blockobject.html">$blockobject</a> = <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('blockname')" class="var it39518" onMouseOver="hilite(39518)" onMouseOut="lolite()" href="../_variables/blockname.html">blockname</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../_variables/record.html">$record</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>)) {
<a name="l932"><span class="linenum"> 932</span></a>                  <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>[] = <a class="var it26692" onMouseOver="hilite(26692)" onMouseOut="lolite()" onClick="logVariable('blockobject')" href="../_variables/blockobject.html">$blockobject</a>;
<a name="l933"><span class="linenum"> 933</span></a>              }
<a name="l934"><span class="linenum"> 934</span></a>          }
<a name="l935"><span class="linenum"> 935</span></a>          return <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>;
<a name="l936"><span class="linenum"> 936</span></a>      }
<a name="l937"><span class="linenum"> 937</span></a>  
<a name="l938"><span class="linenum"> 938</span></a>      <span class="comment">/**</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment">     * Create all the block instances for all the blocks that were loaded by</span>
<a name="l940"><span class="linenum"> 940</span></a>  <span class="comment">     * load_blocks. This is used, for example, to ensure that all blocks get a</span>
<a name="l941"><span class="linenum"> 941</span></a>  <span class="comment">     * chance to initialise themselves via the {@link block_base::specialize()}</span>
<a name="l942"><span class="linenum"> 942</span></a>  <span class="comment">     * method, before any output is done.</span>
<a name="l943"><span class="linenum"> 943</span></a>  <span class="comment">     */</span>
<a name="l944"><span class="linenum"> 944</span></a>      public function <a class="function" onClick="logFunction('create_all_block_instances')" href="../_functions/create_all_block_instances.html" onMouseOver="funcPopup(event,'create_all_block_instances')">create_all_block_instances</a>() {
<a name="l945"><span class="linenum"> 945</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_regions')" href="../_functions/get_regions.html" onMouseOver="funcPopup(event,'get_regions')">get_regions</a>() as <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l946"><span class="linenum"> 946</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_instances_exist')" href="../_functions/ensure_instances_exist.html" onMouseOver="funcPopup(event,'ensure_instances_exist')">ensure_instances_exist</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l947"><span class="linenum"> 947</span></a>          }
<a name="l948"><span class="linenum"> 948</span></a>      }
<a name="l949"><span class="linenum"> 949</span></a>  
<a name="l950"><span class="linenum"> 950</span></a>      <span class="comment">/**</span>
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment">     * Return an array of content objects from a set of block instances</span>
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment">     *</span>
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment">     * @param array $instances An array of block instances</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment">     * @param renderer_base The renderer to use.</span>
<a name="l955"><span class="linenum"> 955</span></a>  <span class="comment">     * @param string $region the region name.</span>
<a name="l956"><span class="linenum"> 956</span></a>  <span class="comment">     * @return array An array of block_content (and possibly block_move_target) objects.</span>
<a name="l957"><span class="linenum"> 957</span></a>  <span class="comment">     */</span>
<a name="l958"><span class="linenum"> 958</span></a>      protected function <a class="function" onClick="logFunction('create_block_contents')" href="../_functions/create_block_contents.html" onMouseOver="funcPopup(event,'create_block_contents')">create_block_contents</a>(<a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>, <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l959"><span class="linenum"> 959</span></a>          <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a> = array();
<a name="l960"><span class="linenum"> 960</span></a>  
<a name="l961"><span class="linenum"> 961</span></a>          <a class="var it26693" onMouseOver="hilite(26693)" onMouseOut="lolite()" onClick="logVariable('lastweight')" href="../_variables/lastweight.html">$lastweight</a> = 0;
<a name="l962"><span class="linenum"> 962</span></a>          <a class="var it26694" onMouseOver="hilite(26694)" onMouseOut="lolite()" onClick="logVariable('lastblock')" href="../_variables/lastblock.html">$lastblock</a> = 0;
<a name="l963"><span class="linenum"> 963</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>) {
<a name="l964"><span class="linenum"> 964</span></a>              <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('first')" href="../_variables/first.html">$first</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>);
<a name="l965"><span class="linenum"> 965</span></a>              if (<a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('first')" href="../_variables/first.html">$first</a>) {
<a name="l966"><span class="linenum"> 966</span></a>                  <a class="var it26693" onMouseOver="hilite(26693)" onMouseOut="lolite()" onClick="logVariable('lastweight')" href="../_variables/lastweight.html">$lastweight</a> = <a class="var it389" onMouseOver="hilite(389)" onMouseOut="lolite()" onClick="logVariable('first')" href="../_variables/first.html">$first</a>-&gt;<a onClick="logVariable('instance')" class="var it40290" onMouseOver="hilite(40290)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;weight - 2;
<a name="l967"><span class="linenum"> 967</span></a>              }
<a name="l968"><span class="linenum"> 968</span></a>          }
<a name="l969"><span class="linenum"> 969</span></a>  
<a name="l970"><span class="linenum"> 970</span></a>          foreach (<a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> as <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l971"><span class="linenum"> 971</span></a>              <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a> = <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a class="function" onClick="logFunction('get_content_for_output')" href="../_functions/get_content_for_output.html" onMouseOver="funcPopup(event,'get_content_for_output')">get_content_for_output</a>(<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l972"><span class="linenum"> 972</span></a>              if (empty(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>)) {
<a name="l973"><span class="linenum"> 973</span></a>                  continue;
<a name="l974"><span class="linenum"> 974</span></a>              }
<a name="l975"><span class="linenum"> 975</span></a>  
<a name="l976"><span class="linenum"> 976</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a> &amp;&amp; <a class="var it26693" onMouseOver="hilite(26693)" onMouseOut="lolite()" onClick="logVariable('lastweight')" href="../_variables/lastweight.html">$lastweight</a> != <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;weight &amp;&amp;
<a name="l977"><span class="linenum"> 977</span></a>                      <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a> != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a> &amp;&amp; <a class="var it26694" onMouseOver="hilite(26694)" onMouseOut="lolite()" onClick="logVariable('lastblock')" href="../_variables/lastblock.html">$lastblock</a> != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>) {
<a name="l978"><span class="linenum"> 978</span></a>                  <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('block_move_target')" href="../_classes/block_move_target.html" onMouseOver="classPopup(event,'block_move_target')">block_move_target</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_move_target_url')" href="../_functions/get_move_target_url.html" onMouseOver="funcPopup(event,'get_move_target_url')">get_move_target_url</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, (<a class="var it26693" onMouseOver="hilite(26693)" onMouseOut="lolite()" onClick="logVariable('lastweight')" href="../_variables/lastweight.html">$lastweight</a> + <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;weight)/2));
<a name="l979"><span class="linenum"> 979</span></a>              }
<a name="l980"><span class="linenum"> 980</span></a>  
<a name="l981"><span class="linenum"> 981</span></a>              if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a> == <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>) {
<a name="l982"><span class="linenum"> 982</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>-&gt;<a class="function" onClick="logFunction('add_class')" href="../_functions/add_class.html" onMouseOver="funcPopup(event,'add_class')">add_class</a>('beingmoved');
<a name="l983"><span class="linenum"> 983</span></a>                  <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>-&gt;<a onClick="logVariable('annotation')" class="var it39617" onMouseOver="hilite(39617)" onMouseOut="lolite()" href="../_variables/annotation.html">annotation</a> .= <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('movingthisblockcancel', 'block',
<a name="l984"><span class="linenum"> 984</span></a>                          <a class="class" onClick="logClass('html_writer')" href="../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('cancel')));
<a name="l985"><span class="linenum"> 985</span></a>              }
<a name="l986"><span class="linenum"> 986</span></a>  
<a name="l987"><span class="linenum"> 987</span></a>              <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>[] = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('content')" href="../_variables/content.html">$content</a>;
<a name="l988"><span class="linenum"> 988</span></a>              <a class="var it26693" onMouseOver="hilite(26693)" onMouseOut="lolite()" onClick="logVariable('lastweight')" href="../_variables/lastweight.html">$lastweight</a> = <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;weight;
<a name="l989"><span class="linenum"> 989</span></a>              <a class="var it26694" onMouseOver="hilite(26694)" onMouseOut="lolite()" onClick="logVariable('lastblock')" href="../_variables/lastblock.html">$lastblock</a> = <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('instance')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id;
<a name="l990"><span class="linenum"> 990</span></a>          }
<a name="l991"><span class="linenum"> 991</span></a>  
<a name="l992"><span class="linenum"> 992</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a> &amp;&amp; <a class="var it26694" onMouseOver="hilite(26694)" onMouseOut="lolite()" onClick="logVariable('lastblock')" href="../_variables/lastblock.html">$lastblock</a> != <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a>) {
<a name="l993"><span class="linenum"> 993</span></a>              <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('block_move_target')" href="../_classes/block_move_target.html" onMouseOver="classPopup(event,'block_move_target')">block_move_target</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_move_target_url')" href="../_functions/get_move_target_url.html" onMouseOver="funcPopup(event,'get_move_target_url')">get_move_target_url</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it26693" onMouseOver="hilite(26693)" onMouseOut="lolite()" onClick="logVariable('lastweight')" href="../_variables/lastweight.html">$lastweight</a> + 1));
<a name="l994"><span class="linenum"> 994</span></a>          }
<a name="l995"><span class="linenum"> 995</span></a>          return <a class="var it594" onMouseOver="hilite(594)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>;
<a name="l996"><span class="linenum"> 996</span></a>      }
<a name="l997"><span class="linenum"> 997</span></a>  
<a name="l998"><span class="linenum"> 998</span></a>      <span class="comment">/**</span>
<a name="l999"><span class="linenum"> 999</span></a>  <span class="comment">     * Ensure block instances exist for a given region</span>
<a name="l1000"><span class="linenum">1000</span></a>  <span class="comment">     *</span>
<a name="l1001"><span class="linenum">1001</span></a>  <span class="comment">     * @param string $region Check for bi's with the instance with this name</span>
<a name="l1002"><span class="linenum">1002</span></a>  <span class="comment">     */</span>
<a name="l1003"><span class="linenum">1003</span></a>      protected function <a class="function" onClick="logFunction('ensure_instances_exist')" href="../_functions/ensure_instances_exist.html" onMouseOver="funcPopup(event,'ensure_instances_exist')">ensure_instances_exist</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>) {
<a name="l1004"><span class="linenum">1004</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('check_region_is_known')" href="../_functions/check_region_is_known.html" onMouseOver="funcPopup(event,'check_region_is_known')">check_region_is_known</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l1005"><span class="linenum">1005</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a>)) {
<a name="l1006"><span class="linenum">1006</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] =
<a name="l1007"><span class="linenum">1007</span></a>                      <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create_block_instances')" href="../_functions/create_block_instances.html" onMouseOver="funcPopup(event,'create_block_instances')">create_block_instances</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>]);
<a name="l1008"><span class="linenum">1008</span></a>          }
<a name="l1009"><span class="linenum">1009</span></a>      }
<a name="l1010"><span class="linenum">1010</span></a>  
<a name="l1011"><span class="linenum">1011</span></a>      <span class="comment">/**</span>
<a name="l1012"><span class="linenum">1012</span></a>  <span class="comment">     * Ensure that there is some content within the given region</span>
<a name="l1013"><span class="linenum">1013</span></a>  <span class="comment">     *</span>
<a name="l1014"><span class="linenum">1014</span></a>  <span class="comment">     * @param string $region The name of the region to check</span>
<a name="l1015"><span class="linenum">1015</span></a>  <span class="comment">     */</span>
<a name="l1016"><span class="linenum">1016</span></a>      public function <a class="function" onClick="logFunction('ensure_content_created')" href="../_functions/ensure_content_created.html" onMouseOver="funcPopup(event,'ensure_content_created')">ensure_content_created</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l1017"><span class="linenum">1017</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('ensure_instances_exist')" href="../_functions/ensure_instances_exist.html" onMouseOver="funcPopup(event,'ensure_instances_exist')">ensure_instances_exist</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>);
<a name="l1018"><span class="linenum">1018</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>)) {
<a name="l1019"><span class="linenum">1019</span></a>              <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a> = array();
<a name="l1020"><span class="linenum">1020</span></a>              if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extracontent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/extracontent.html">extracontent</a>)) {
<a name="l1021"><span class="linenum">1021</span></a>                  <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('extracontent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/extracontent.html">extracontent</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>];
<a name="l1022"><span class="linenum">1022</span></a>              }
<a name="l1023"><span class="linenum">1023</span></a>              <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('create_block_contents')" href="../_functions/create_block_contents.html" onMouseOver="funcPopup(event,'create_block_contents')">create_block_contents</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('blockinstances')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/blockinstances.html">blockinstances</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>], <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>, <a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>));
<a name="l1024"><span class="linenum">1024</span></a>              if (<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a> == <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>) {
<a name="l1025"><span class="linenum">1025</span></a>                  <a class="var it26695" onMouseOver="hilite(26695)" onMouseOut="lolite()" onClick="logVariable('addblockui')" href="../_variables/addblockui.html">$addblockui</a> = <a class="function" onClick="logFunction('block_add_block_ui')" href="../_functions/block_add_block_ui.html" onMouseOver="funcPopup(event,'block_add_block_ui')">block_add_block_ui</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>);
<a name="l1026"><span class="linenum">1026</span></a>                  if (<a class="var it26695" onMouseOver="hilite(26695)" onMouseOut="lolite()" onClick="logVariable('addblockui')" href="../_variables/addblockui.html">$addblockui</a>) {
<a name="l1027"><span class="linenum">1027</span></a>                      <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a>[] = <a class="var it26695" onMouseOver="hilite(26695)" onMouseOut="lolite()" onClick="logVariable('addblockui')" href="../_variables/addblockui.html">$addblockui</a>;
<a name="l1028"><span class="linenum">1028</span></a>                  }
<a name="l1029"><span class="linenum">1029</span></a>              }
<a name="l1030"><span class="linenum">1030</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('visibleblockcontent')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/visibleblockcontent.html">visibleblockcontent</a>[<a class="var it455" onMouseOver="hilite(455)" onMouseOut="lolite()" onClick="logVariable('region')" href="../_variables/region.html">$region</a>] = <a class="var it1144" onMouseOver="hilite(1144)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../_variables/contents.html">$contents</a>;
<a name="l1031"><span class="linenum">1031</span></a>          }
<a name="l1032"><span class="linenum">1032</span></a>      }
<a name="l1033"><span class="linenum">1033</span></a>  
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment">/// Process actions from the URL ===============================================</span>
<a name="l1035"><span class="linenum">1035</span></a>  
<a name="l1036"><span class="linenum">1036</span></a>      <span class="comment">/**</span>
<a name="l1037"><span class="linenum">1037</span></a>  <span class="comment">     * Get the appropriate list of editing icons for a block. This is used</span>
<a name="l1038"><span class="linenum">1038</span></a>  <span class="comment">     * to set {@link block_contents::$controls} in {@link block_base::get_contents_for_output()}.</span>
<a name="l1039"><span class="linenum">1039</span></a>  <span class="comment">     *</span>
<a name="l1040"><span class="linenum">1040</span></a>  <span class="comment">     * @param $output The core_renderer to use when generating the output. (Need to get icon paths.)</span>
<a name="l1041"><span class="linenum">1041</span></a>  <span class="comment">     * @return an array in the format for {@link block_contents::$controls}</span>
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment">     */</span>
<a name="l1043"><span class="linenum">1043</span></a>      public function <a class="function" onClick="logFunction('edit_controls')" href="../_functions/edit_controls.html" onMouseOver="funcPopup(event,'edit_controls')">edit_controls</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>) {
<a name="l1044"><span class="linenum">1044</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1045"><span class="linenum">1045</span></a>  
<a name="l1046"><span class="linenum">1046</span></a>          <a class="var it3659" onMouseOver="hilite(3659)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a> = array();
<a name="l1047"><span class="linenum">1047</span></a>          <a class="var it10778" onMouseOver="hilite(10778)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false, array('sesskey'=&gt; <a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l1048"><span class="linenum">1048</span></a>          <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('title')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/title.html">title</a>;
<a name="l1049"><span class="linenum">1049</span></a>          if (empty(<a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>)) {
<a name="l1050"><span class="linenum">1050</span></a>              <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('arialabel')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/arialabel.html">arialabel</a>;
<a name="l1051"><span class="linenum">1051</span></a>          }
<a name="l1052"><span class="linenum">1052</span></a>  
<a name="l1053"><span class="linenum">1053</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment">            // Move icon.</span>
<a name="l1055"><span class="linenum">1055</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('moveblock', 'block', <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1056"><span class="linenum">1056</span></a>              <a class="var it3659" onMouseOver="hilite(3659)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_primary')" href="../_classes/action_menu_link_primary.html" onMouseOver="classPopup(event,'action_menu_link_primary')">action_menu_link_primary</a>(
<a name="l1057"><span class="linenum">1057</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it10778" onMouseOver="hilite(10778)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>, array('bui_moveid' =&gt; <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id)),
<a name="l1058"><span class="linenum">1058</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/move', <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l1059"><span class="linenum">1059</span></a>                  <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>,
<a name="l1060"><span class="linenum">1060</span></a>                  array('class' =&gt; 'editing_move')
<a name="l1061"><span class="linenum">1061</span></a>              );
<a name="l1062"><span class="linenum">1062</span></a>  
<a name="l1063"><span class="linenum">1063</span></a>          }
<a name="l1064"><span class="linenum">1064</span></a>  
<a name="l1065"><span class="linenum">1065</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>() || <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('user_can_edit')" href="../_functions/user_can_edit.html" onMouseOver="funcPopup(event,'user_can_edit')">user_can_edit</a>()) {
<a name="l1066"><span class="linenum">1066</span></a>  <span class="comment">            // Edit config icon - always show - needed for positioning UI.</span>
<a name="l1067"><span class="linenum">1067</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('configureblock', 'block', <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1068"><span class="linenum">1068</span></a>              <a class="var it3659" onMouseOver="hilite(3659)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l1069"><span class="linenum">1069</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it10778" onMouseOver="hilite(10778)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>, array('bui_editid' =&gt; <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id)),
<a name="l1070"><span class="linenum">1070</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/edit', <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l1071"><span class="linenum">1071</span></a>                  <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>,
<a name="l1072"><span class="linenum">1072</span></a>                  array('class' =&gt; 'editing_edit')
<a name="l1073"><span class="linenum">1073</span></a>              );
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>          }
<a name="l1076"><span class="linenum">1076</span></a>  
<a name="l1077"><span class="linenum">1077</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>() &amp;&amp; <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('instance_can_be_hidden')" href="../_functions/instance_can_be_hidden.html" onMouseOver="funcPopup(event,'instance_can_be_hidden')">instance_can_be_hidden</a>()) {
<a name="l1078"><span class="linenum">1078</span></a>  <span class="comment">            // Show/hide icon.</span>
<a name="l1079"><span class="linenum">1079</span></a>              if (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;visible) {
<a name="l1080"><span class="linenum">1080</span></a>                  <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('hideblock', 'block', <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1081"><span class="linenum">1081</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it10778" onMouseOver="hilite(10778)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>, array('bui_hideid' =&gt; <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id));
<a name="l1082"><span class="linenum">1082</span></a>                  <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/hide', <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; ''));
<a name="l1083"><span class="linenum">1083</span></a>                  <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a> = array('class' =&gt; 'editing_hide');
<a name="l1084"><span class="linenum">1084</span></a>              } else {
<a name="l1085"><span class="linenum">1085</span></a>                  <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('showblock', 'block', <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1086"><span class="linenum">1086</span></a>                  <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it10778" onMouseOver="hilite(10778)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>, array('bui_showid' =&gt; <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id));
<a name="l1087"><span class="linenum">1087</span></a>                  <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a> = <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/show', <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; ''));
<a name="l1088"><span class="linenum">1088</span></a>                  <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a> = array('class' =&gt; 'editing_show');
<a name="l1089"><span class="linenum">1089</span></a>              }
<a name="l1090"><span class="linenum">1090</span></a>              <a class="var it3659" onMouseOver="hilite(3659)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it103" onMouseOver="hilite(103)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../_variables/icon.html">$icon</a>, <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('attributes')" href="../_variables/attributes.html">$attributes</a>);
<a name="l1091"><span class="linenum">1091</span></a>          }
<a name="l1092"><span class="linenum">1092</span></a>  
<a name="l1093"><span class="linenum">1093</span></a>  <span class="comment">        // Assign roles icon.</span>
<a name="l1094"><span class="linenum">1094</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype != 'my-index' &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/role:assign', <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('context')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/context.html">context</a>)) {
<a name="l1095"><span class="linenum">1095</span></a>  <span class="comment">            //TODO: please note it is sloppy to pass urls through page parameters!!</span>
<a name="l1096"><span class="linenum">1096</span></a>  <span class="comment">            //      it is shortened because some web servers (e.g. IIS by default) give</span>
<a name="l1097"><span class="linenum">1097</span></a>  <span class="comment">            //      a 'security' error if you try to pass a full URL as a GET parameter in another URL.</span>
<a name="l1098"><span class="linenum">1098</span></a>              <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(false);
<a name="l1099"><span class="linenum">1099</span></a>              <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . '/', '', <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>);
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>              <a class="var it26697" onMouseOver="hilite(26697)" onMouseOut="lolite()" onClick="logVariable('rolesurl')" href="../_variables/rolesurl.html">$rolesurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/roles/assign.php.html">/admin/roles/assign.php</a>', array('contextid'=&gt;<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('context')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id,
<a name="l1102"><span class="linenum">1102</span></a>                                                                           'returnurl'=&gt;<a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../_variables/return.html">$return</a>));
<a name="l1103"><span class="linenum">1103</span></a>  <span class="comment">            // Delete icon.</span>
<a name="l1104"><span class="linenum">1104</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('assignrolesinblock', 'block', <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1105"><span class="linenum">1105</span></a>              <a class="var it3659" onMouseOver="hilite(3659)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l1106"><span class="linenum">1106</span></a>                  <a class="var it26697" onMouseOver="hilite(26697)" onMouseOut="lolite()" onClick="logVariable('rolesurl')" href="../_variables/rolesurl.html">$rolesurl</a>,
<a name="l1107"><span class="linenum">1107</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/assignroles', <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l1108"><span class="linenum">1108</span></a>                  <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>,
<a name="l1109"><span class="linenum">1109</span></a>                  array('class' =&gt; 'editing_roles')
<a name="l1110"><span class="linenum">1110</span></a>              );
<a name="l1111"><span class="linenum">1111</span></a>          }
<a name="l1112"><span class="linenum">1112</span></a>  
<a name="l1113"><span class="linenum">1113</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('user_can_delete_block')" href="../_functions/user_can_delete_block.html" onMouseOver="funcPopup(event,'user_can_delete_block')">user_can_delete_block</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>)) {
<a name="l1114"><span class="linenum">1114</span></a>  <span class="comment">            // Delete icon.</span>
<a name="l1115"><span class="linenum">1115</span></a>              <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a> = <span class="keyword">new </span><a class="class" onClick="logClass('lang_string')" href="../_classes/lang_string.html" onMouseOver="classPopup(event,'lang_string')">lang_string</a>('deleteblock', 'block', <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1116"><span class="linenum">1116</span></a>              <a class="var it3659" onMouseOver="hilite(3659)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('action_menu_link_secondary')" href="../_classes/action_menu_link_secondary.html" onMouseOver="classPopup(event,'action_menu_link_secondary')">action_menu_link_secondary</a>(
<a name="l1117"><span class="linenum">1117</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it10778" onMouseOver="hilite(10778)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>, array('bui_deleteid' =&gt; <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id)),
<a name="l1118"><span class="linenum">1118</span></a>                  <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/delete', <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>, 'moodle', array('class' =&gt; 'iconsmall', 'title' =&gt; '')),
<a name="l1119"><span class="linenum">1119</span></a>                  <a class="var it332" onMouseOver="hilite(332)" onMouseOut="lolite()" onClick="logVariable('str')" href="../_variables/str.html">$str</a>,
<a name="l1120"><span class="linenum">1120</span></a>                  array('class' =&gt; 'editing_delete')
<a name="l1121"><span class="linenum">1121</span></a>              );
<a name="l1122"><span class="linenum">1122</span></a>          }
<a name="l1123"><span class="linenum">1123</span></a>  
<a name="l1124"><span class="linenum">1124</span></a>          return <a class="var it3659" onMouseOver="hilite(3659)" onMouseOut="lolite()" onClick="logVariable('controls')" href="../_variables/controls.html">$controls</a>;
<a name="l1125"><span class="linenum">1125</span></a>      }
<a name="l1126"><span class="linenum">1126</span></a>  
<a name="l1127"><span class="linenum">1127</span></a>      <span class="comment">/**</span>
<a name="l1128"><span class="linenum">1128</span></a>  <span class="comment">     * @param block_base $block a block that appears on this page.</span>
<a name="l1129"><span class="linenum">1129</span></a>  <span class="comment">     * @return boolean boolean whether the currently logged in user is allowed to delete this block.</span>
<a name="l1130"><span class="linenum">1130</span></a>  <span class="comment">     */</span>
<a name="l1131"><span class="linenum">1131</span></a>      protected function <a class="function" onClick="logFunction('user_can_delete_block')" href="../_functions/user_can_delete_block.html" onMouseOver="funcPopup(event,'user_can_delete_block')">user_can_delete_block</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>) {
<a name="l1132"><span class="linenum">1132</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>() &amp;&amp; <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('user_can_edit')" href="../_functions/user_can_edit.html" onMouseOver="funcPopup(event,'user_can_edit')">user_can_edit</a>() &amp;&amp;
<a name="l1133"><span class="linenum">1133</span></a>                  <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('user_can_addto')" href="../_functions/user_can_addto.html" onMouseOver="funcPopup(event,'user_can_addto')">user_can_addto</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>) &amp;&amp;
<a name="l1134"><span class="linenum">1134</span></a>                  !<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockname, self::<a class="function" onClick="logFunction('get_undeletable_block_types')" href="../_functions/get_undeletable_block_types.html" onMouseOver="funcPopup(event,'get_undeletable_block_types')">get_undeletable_block_types</a>());
<a name="l1135"><span class="linenum">1135</span></a>      }
<a name="l1136"><span class="linenum">1136</span></a>  
<a name="l1137"><span class="linenum">1137</span></a>      <span class="comment">/**</span>
<a name="l1138"><span class="linenum">1138</span></a>  <span class="comment">     * Process any block actions that were specified in the URL.</span>
<a name="l1139"><span class="linenum">1139</span></a>  <span class="comment">     *</span>
<a name="l1140"><span class="linenum">1140</span></a>  <span class="comment">     * @return boolean true if anything was done. False if not.</span>
<a name="l1141"><span class="linenum">1141</span></a>  <span class="comment">     */</span>
<a name="l1142"><span class="linenum">1142</span></a>      public function <a class="function" onClick="logFunction('process_url_actions')" href="../_functions/process_url_actions.html" onMouseOver="funcPopup(event,'process_url_actions')">process_url_actions</a>() {
<a name="l1143"><span class="linenum">1143</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>()) {
<a name="l1144"><span class="linenum">1144</span></a>              return false;
<a name="l1145"><span class="linenum">1145</span></a>          }
<a name="l1146"><span class="linenum">1146</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_url_add')" href="../_functions/process_url_add.html" onMouseOver="funcPopup(event,'process_url_add')">process_url_add</a>() || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_url_delete')" href="../_functions/process_url_delete.html" onMouseOver="funcPopup(event,'process_url_delete')">process_url_delete</a>() ||
<a name="l1147"><span class="linenum">1147</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_url_show_hide')" href="../_functions/process_url_show_hide.html" onMouseOver="funcPopup(event,'process_url_show_hide')">process_url_show_hide</a>() || <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_url_edit')" href="../_functions/process_url_edit.html" onMouseOver="funcPopup(event,'process_url_edit')">process_url_edit</a>() ||
<a name="l1148"><span class="linenum">1148</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('process_url_move')" href="../_functions/process_url_move.html" onMouseOver="funcPopup(event,'process_url_move')">process_url_move</a>();
<a name="l1149"><span class="linenum">1149</span></a>      }
<a name="l1150"><span class="linenum">1150</span></a>  
<a name="l1151"><span class="linenum">1151</span></a>      <span class="comment">/**</span>
<a name="l1152"><span class="linenum">1152</span></a>  <span class="comment">     * Handle adding a block.</span>
<a name="l1153"><span class="linenum">1153</span></a>  <span class="comment">     * @return boolean true if anything was done. False if not.</span>
<a name="l1154"><span class="linenum">1154</span></a>  <span class="comment">     */</span>
<a name="l1155"><span class="linenum">1155</span></a>      public function <a class="function" onClick="logFunction('process_url_add')" href="../_functions/process_url_add.html" onMouseOver="funcPopup(event,'process_url_add')">process_url_add</a>() {
<a name="l1156"><span class="linenum">1156</span></a>          <a class="var it14997" onMouseOver="hilite(14997)" onMouseOut="lolite()" onClick="logVariable('blocktype')" href="../_variables/blocktype.html">$blocktype</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_addblock', null, <a class="constant" onClick="logConstant('PARAM_PLUGIN')" href="../_constants/PARAM_PLUGIN.html" onMouseOver="constPopup(event,'PARAM_PLUGIN')">PARAM_PLUGIN</a>);
<a name="l1157"><span class="linenum">1157</span></a>          if (!<a class="var it14997" onMouseOver="hilite(14997)" onMouseOut="lolite()" onClick="logVariable('blocktype')" href="../_variables/blocktype.html">$blocktype</a>) {
<a name="l1158"><span class="linenum">1158</span></a>              return false;
<a name="l1159"><span class="linenum">1159</span></a>          }
<a name="l1160"><span class="linenum">1160</span></a>  
<a name="l1161"><span class="linenum">1161</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l1162"><span class="linenum">1162</span></a>  
<a name="l1163"><span class="linenum">1163</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l1164"><span class="linenum">1164</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('nopermissions', '', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addblock'));
<a name="l1165"><span class="linenum">1165</span></a>          }
<a name="l1166"><span class="linenum">1166</span></a>  
<a name="l1167"><span class="linenum">1167</span></a>          if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it14997" onMouseOver="hilite(14997)" onMouseOut="lolite()" onClick="logVariable('blocktype')" href="../_variables/blocktype.html">$blocktype</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_addable_blocks')" href="../_functions/get_addable_blocks.html" onMouseOver="funcPopup(event,'get_addable_blocks')">get_addable_blocks</a>())) {
<a name="l1168"><span class="linenum">1168</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('cannotaddthisblocktype', '', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="var it14997" onMouseOver="hilite(14997)" onMouseOut="lolite()" onClick="logVariable('blocktype')" href="../_variables/blocktype.html">$blocktype</a>);
<a name="l1169"><span class="linenum">1169</span></a>          }
<a name="l1170"><span class="linenum">1170</span></a>  
<a name="l1171"><span class="linenum">1171</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_block_at_end_of_default_region')" href="../_functions/add_block_at_end_of_default_region.html" onMouseOver="funcPopup(event,'add_block_at_end_of_default_region')">add_block_at_end_of_default_region</a>(<a class="var it14997" onMouseOver="hilite(14997)" onMouseOut="lolite()" onClick="logVariable('blocktype')" href="../_variables/blocktype.html">$blocktype</a>);
<a name="l1172"><span class="linenum">1172</span></a>  
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment">        // If the page URL was a guess, it will contain the bui_... param, so we must make sure it is not there.</span>
<a name="l1174"><span class="linenum">1174</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_addblock');
<a name="l1175"><span class="linenum">1175</span></a>  
<a name="l1176"><span class="linenum">1176</span></a>          return true;
<a name="l1177"><span class="linenum">1177</span></a>      }
<a name="l1178"><span class="linenum">1178</span></a>  
<a name="l1179"><span class="linenum">1179</span></a>      <span class="comment">/**</span>
<a name="l1180"><span class="linenum">1180</span></a>  <span class="comment">     * Handle deleting a block.</span>
<a name="l1181"><span class="linenum">1181</span></a>  <span class="comment">     * @return boolean true if anything was done. False if not.</span>
<a name="l1182"><span class="linenum">1182</span></a>  <span class="comment">     */</span>
<a name="l1183"><span class="linenum">1183</span></a>      public function <a class="function" onClick="logFunction('process_url_delete')" href="../_functions/process_url_delete.html" onMouseOver="funcPopup(event,'process_url_delete')">process_url_delete</a>() {
<a name="l1184"><span class="linenum">1184</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1185"><span class="linenum">1185</span></a>  
<a name="l1186"><span class="linenum">1186</span></a>          <a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_deleteid', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l1187"><span class="linenum">1187</span></a>          <a class="var it13277" onMouseOver="hilite(13277)" onMouseOut="lolite()" onClick="logVariable('confirmdelete')" href="../_variables/confirmdelete.html">$confirmdelete</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_confirm', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l1188"><span class="linenum">1188</span></a>  
<a name="l1189"><span class="linenum">1189</span></a>          if (!<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>) {
<a name="l1190"><span class="linenum">1190</span></a>              return false;
<a name="l1191"><span class="linenum">1191</span></a>          }
<a name="l1192"><span class="linenum">1192</span></a>  
<a name="l1193"><span class="linenum">1193</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l1194"><span class="linenum">1194</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;blocks-&gt;<a class="function" onClick="logFunction('find_instance')" href="../_functions/find_instance.html" onMouseOver="funcPopup(event,'find_instance')">find_instance</a>(<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>);
<a name="l1195"><span class="linenum">1195</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('user_can_delete_block')" href="../_functions/user_can_delete_block.html" onMouseOver="funcPopup(event,'user_can_delete_block')">user_can_delete_block</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>)) {
<a name="l1196"><span class="linenum">1196</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('nopermissions', '', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteablock'));
<a name="l1197"><span class="linenum">1197</span></a>          }
<a name="l1198"><span class="linenum">1198</span></a>  
<a name="l1199"><span class="linenum">1199</span></a>          if (!<a class="var it13277" onMouseOver="hilite(13277)" onMouseOut="lolite()" onClick="logVariable('confirmdelete')" href="../_variables/confirmdelete.html">$confirmdelete</a>) {
<a name="l1200"><span class="linenum">1200</span></a>              <a class="var it26698" onMouseOver="hilite(26698)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a>();
<a name="l1201"><span class="linenum">1201</span></a>              <a class="var it26698" onMouseOver="hilite(26698)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('admin');
<a name="l1202"><span class="linenum">1202</span></a>              <a class="var it26698" onMouseOver="hilite(26698)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('set_course')" href="../_functions/set_course.html" onMouseOver="funcPopup(event,'set_course')">set_course</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course);
<a name="l1203"><span class="linenum">1203</span></a>              <a class="var it26698" onMouseOver="hilite(26698)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context);
<a name="l1204"><span class="linenum">1204</span></a>              if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm) {
<a name="l1205"><span class="linenum">1205</span></a>                  <a class="var it26698" onMouseOver="hilite(26698)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('set_cm')" href="../_functions/set_cm.html" onMouseOver="funcPopup(event,'set_cm')">set_cm</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm);
<a name="l1206"><span class="linenum">1206</span></a>              }
<a name="l1207"><span class="linenum">1207</span></a>  
<a name="l1208"><span class="linenum">1208</span></a>              <a class="var it26699" onMouseOver="hilite(26699)" onMouseOut="lolite()" onClick="logVariable('deleteurlbase')" href="../_variables/deleteurlbase.html">$deleteurlbase</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . '/', '/', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out_omit_querystring')" href="../_functions/out_omit_querystring.html" onMouseOver="funcPopup(event,'out_omit_querystring')">out_omit_querystring</a>());
<a name="l1209"><span class="linenum">1209</span></a>              <a class="var it26700" onMouseOver="hilite(26700)" onMouseOut="lolite()" onClick="logVariable('deleteurlparams')" href="../_variables/deleteurlparams.html">$deleteurlparams</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('params')" href="../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>();
<a name="l1210"><span class="linenum">1210</span></a>              <a class="var it26698" onMouseOver="hilite(26698)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>(<a class="var it26699" onMouseOver="hilite(26699)" onMouseOut="lolite()" onClick="logVariable('deleteurlbase')" href="../_variables/deleteurlbase.html">$deleteurlbase</a>, <a class="var it26700" onMouseOver="hilite(26700)" onMouseOut="lolite()" onClick="logVariable('deleteurlparams')" href="../_variables/deleteurlparams.html">$deleteurlparams</a>);
<a name="l1211"><span class="linenum">1211</span></a>              <a class="var it26698" onMouseOver="hilite(26698)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('set_block_actions_done')" href="../_functions/set_block_actions_done.html" onMouseOver="funcPopup(event,'set_block_actions_done')">set_block_actions_done</a>();
<a name="l1212"><span class="linenum">1212</span></a>  <span class="comment">            // At this point we are either going to redirect, or display the form, so</span>
<a name="l1213"><span class="linenum">1213</span></a>  <span class="comment">            // overwrite global $PAGE ready for this. (Formslib refers to it.)</span>
<a name="l1214"><span class="linenum">1214</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a> = <a class="var it26698" onMouseOver="hilite(26698)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>;
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment">            //some functions like MoodleQuickForm::addHelpButton use $OUTPUT so we need to replace that too</span>
<a name="l1216"><span class="linenum">1216</span></a>              <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it26698" onMouseOver="hilite(26698)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core');
<a name="l1217"><span class="linenum">1217</span></a>              <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a> = <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l1218"><span class="linenum">1218</span></a>  
<a name="l1219"><span class="linenum">1219</span></a>              <a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('site')" href="../_variables/site.html">$site</a> = <a class="function" onClick="logFunction('get_site')" href="../_functions/get_site.html" onMouseOver="funcPopup(event,'get_site')">get_site</a>();
<a name="l1220"><span class="linenum">1220</span></a>              <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>();
<a name="l1221"><span class="linenum">1221</span></a>              <a class="var it11286" onMouseOver="hilite(11286)" onMouseOut="lolite()" onClick="logVariable('strdeletecheck')" href="../_variables/strdeletecheck.html">$strdeletecheck</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deletecheck', 'block', <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1222"><span class="linenum">1222</span></a>              <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteblockcheck', 'block', <a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a>);
<a name="l1223"><span class="linenum">1223</span></a>  
<a name="l1224"><span class="linenum">1224</span></a>  <span class="comment">            // If the block is being shown in sub contexts display a warning.</span>
<a name="l1225"><span class="linenum">1225</span></a>              if (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;showinsubcontexts == 1) {
<a name="l1226"><span class="linenum">1226</span></a>                  <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;parentcontextid);
<a name="l1227"><span class="linenum">1227</span></a>                  <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1228"><span class="linenum">1228</span></a>                  <a class="var it26701" onMouseOver="hilite(26701)" onMouseOut="lolite()" onClick="logVariable('messagestring')" href="../_variables/messagestring.html">$messagestring</a> = new stdClass();
<a name="l1229"><span class="linenum">1229</span></a>                  <a class="var it26701" onMouseOver="hilite(26701)" onMouseOut="lolite()" onClick="logVariable('messagestring')" href="../_variables/messagestring.html">$messagestring</a>-&gt;<a onClick="logVariable('location')" class="var it41007" onMouseOver="hilite(41007)" onMouseOut="lolite()" href="../_variables/location.html">location</a> = <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a class="function" onClick="logFunction('get_context_name')" href="../_functions/get_context_name.html" onMouseOver="funcPopup(event,'get_context_name')">get_context_name</a>();
<a name="l1230"><span class="linenum">1230</span></a>  
<a name="l1231"><span class="linenum">1231</span></a>  <span class="comment">                // Checking for blocks that may have visibility on the front page and pages added on that.</span>
<a name="l1232"><span class="linenum">1232</span></a>                  if (<a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39842" onMouseOver="hilite(39842)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39845" onMouseOver="hilite(39845)" onMouseOut="lolite()" href="../_variables/id.html">id</a> &amp;&amp; <a class="function" onClick="logFunction('is_inside_frontpage')" href="../_functions/is_inside_frontpage.html" onMouseOver="funcPopup(event,'is_inside_frontpage')">is_inside_frontpage</a>(<a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>)) {
<a name="l1233"><span class="linenum">1233</span></a>                      <a class="var it26701" onMouseOver="hilite(26701)" onMouseOut="lolite()" onClick="logVariable('messagestring')" href="../_variables/messagestring.html">$messagestring</a>-&gt;<a onClick="logVariable('pagetype')" class="var it41007" onMouseOver="hilite(41007)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('showonfrontpageandsubs', 'block');
<a name="l1234"><span class="linenum">1234</span></a>                  } else {
<a name="l1235"><span class="linenum">1235</span></a>                      <a class="var it10861" onMouseOver="hilite(10861)" onMouseOut="lolite()" onClick="logVariable('pagetypes')" href="../_variables/pagetypes.html">$pagetypes</a> = <a class="function" onClick="logFunction('generate_page_type_patterns')" href="../_functions/generate_page_type_patterns.html" onMouseOver="funcPopup(event,'generate_page_type_patterns')">generate_page_type_patterns</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>);
<a name="l1236"><span class="linenum">1236</span></a>                      <a class="var it26701" onMouseOver="hilite(26701)" onMouseOut="lolite()" onClick="logVariable('messagestring')" href="../_variables/messagestring.html">$messagestring</a>-&gt;<a onClick="logVariable('pagetype')" class="var it41007" onMouseOver="hilite(41007)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;pagetypepattern;
<a name="l1237"><span class="linenum">1237</span></a>                      if (isset(<a class="var it10861" onMouseOver="hilite(10861)" onMouseOut="lolite()" onClick="logVariable('pagetypes')" href="../_variables/pagetypes.html">$pagetypes</a>[<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;pagetypepattern])) {
<a name="l1238"><span class="linenum">1238</span></a>                          <a class="var it26701" onMouseOver="hilite(26701)" onMouseOut="lolite()" onClick="logVariable('messagestring')" href="../_variables/messagestring.html">$messagestring</a>-&gt;<a onClick="logVariable('pagetype')" class="var it41007" onMouseOver="hilite(41007)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> = <a class="var it10861" onMouseOver="hilite(10861)" onMouseOut="lolite()" onClick="logVariable('pagetypes')" href="../_variables/pagetypes.html">$pagetypes</a>[<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;pagetypepattern];
<a name="l1239"><span class="linenum">1239</span></a>                      }
<a name="l1240"><span class="linenum">1240</span></a>                  }
<a name="l1241"><span class="linenum">1241</span></a>  
<a name="l1242"><span class="linenum">1242</span></a>                  <a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteblockwarning', 'block', <a class="var it26701" onMouseOver="hilite(26701)" onMouseOut="lolite()" onClick="logVariable('messagestring')" href="../_variables/messagestring.html">$messagestring</a>);
<a name="l1243"><span class="linenum">1243</span></a>              }
<a name="l1244"><span class="linenum">1244</span></a>  
<a name="l1245"><span class="linenum">1245</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('navbar')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it11286" onMouseOver="hilite(11286)" onMouseOut="lolite()" onClick="logVariable('strdeletecheck')" href="../_variables/strdeletecheck.html">$strdeletecheck</a>);
<a name="l1246"><span class="linenum">1246</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it26696" onMouseOver="hilite(26696)" onMouseOut="lolite()" onClick="logVariable('blocktitle')" href="../_variables/blocktitle.html">$blocktitle</a> . ': ' . <a class="var it11286" onMouseOver="hilite(11286)" onMouseOut="lolite()" onClick="logVariable('strdeletecheck')" href="../_variables/strdeletecheck.html">$strdeletecheck</a>);
<a name="l1247"><span class="linenum">1247</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it427" onMouseOver="hilite(427)" onMouseOut="lolite()" onClick="logVariable('site')" href="../_variables/site.html">$site</a>-&gt;<a onClick="logVariable('fullname')" class="var it39527" onMouseOver="hilite(39527)" onMouseOut="lolite()" href="../_variables/fullname.html">fullname</a>);
<a name="l1248"><span class="linenum">1248</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l1249"><span class="linenum">1249</span></a>              <a class="var it16936" onMouseOver="hilite(16936)" onMouseOut="lolite()" onClick="logVariable('confirmurl')" href="../_variables/confirmurl.html">$confirmurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it26698" onMouseOver="hilite(26698)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a onClick="logVariable('url')" class="var it41008" onMouseOver="hilite(41008)" onMouseOut="lolite()" href="../_variables/url.html">url</a>, array('sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>(), 'bui_deleteid' =&gt; <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id, 'bui_confirm' =&gt; 1));
<a name="l1250"><span class="linenum">1250</span></a>              <a class="var it7244" onMouseOver="hilite(7244)" onMouseOut="lolite()" onClick="logVariable('cancelurl')" href="../_variables/cancelurl.html">$cancelurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it26698" onMouseOver="hilite(26698)" onMouseOut="lolite()" onClick="logVariable('deletepage')" href="../_variables/deletepage.html">$deletepage</a>-&gt;<a onClick="logVariable('url')" class="var it41008" onMouseOver="hilite(41008)" onMouseOut="lolite()" href="../_variables/url.html">url</a>);
<a name="l1251"><span class="linenum">1251</span></a>              <a class="var it2050" onMouseOver="hilite(2050)" onMouseOut="lolite()" onClick="logVariable('yesbutton')" href="../_variables/yesbutton.html">$yesbutton</a> = <span class="keyword">new </span><a class="class" onClick="logClass('single_button')" href="../_classes/single_button.html" onMouseOver="classPopup(event,'single_button')">single_button</a>(<a class="var it16936" onMouseOver="hilite(16936)" onMouseOut="lolite()" onClick="logVariable('confirmurl')" href="../_variables/confirmurl.html">$confirmurl</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('yes'));
<a name="l1252"><span class="linenum">1252</span></a>              <a class="var it2051" onMouseOver="hilite(2051)" onMouseOut="lolite()" onClick="logVariable('nobutton')" href="../_variables/nobutton.html">$nobutton</a> = <span class="keyword">new </span><a class="class" onClick="logClass('single_button')" href="../_classes/single_button.html" onMouseOver="classPopup(event,'single_button')">single_button</a>(<a class="var it7244" onMouseOver="hilite(7244)" onMouseOut="lolite()" onClick="logVariable('cancelurl')" href="../_variables/cancelurl.html">$cancelurl</a>, <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('no'));
<a name="l1253"><span class="linenum">1253</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('confirm')" href="../_functions/confirm.html" onMouseOver="funcPopup(event,'confirm')">confirm</a>(<a class="var it643" onMouseOver="hilite(643)" onMouseOut="lolite()" onClick="logVariable('message')" href="../_variables/message.html">$message</a>, <a class="var it2050" onMouseOver="hilite(2050)" onMouseOut="lolite()" onClick="logVariable('yesbutton')" href="../_variables/yesbutton.html">$yesbutton</a>, <a class="var it2051" onMouseOver="hilite(2051)" onMouseOut="lolite()" onClick="logVariable('nobutton')" href="../_variables/nobutton.html">$nobutton</a>);
<a name="l1254"><span class="linenum">1254</span></a>              echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l1255"><span class="linenum">1255</span></a>  <span class="comment">            // Make sure that nothing else happens after we have displayed this form.</span>
<a name="l1256"><span class="linenum">1256</span></a>              exit;
<a name="l1257"><span class="linenum">1257</span></a>          } else {
<a name="l1258"><span class="linenum">1258</span></a>              <a class="function" onClick="logFunction('blocks_delete_instance')" href="../_functions/blocks_delete_instance.html" onMouseOver="funcPopup(event,'blocks_delete_instance')">blocks_delete_instance</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>);
<a name="l1259"><span class="linenum">1259</span></a>  <span class="comment">            // bui_deleteid and bui_confirm should not be in the PAGE url.</span>
<a name="l1260"><span class="linenum">1260</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_deleteid');
<a name="l1261"><span class="linenum">1261</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_confirm');
<a name="l1262"><span class="linenum">1262</span></a>              return true;
<a name="l1263"><span class="linenum">1263</span></a>          }
<a name="l1264"><span class="linenum">1264</span></a>      }
<a name="l1265"><span class="linenum">1265</span></a>  
<a name="l1266"><span class="linenum">1266</span></a>      <span class="comment">/**</span>
<a name="l1267"><span class="linenum">1267</span></a>  <span class="comment">     * Handle showing or hiding a block.</span>
<a name="l1268"><span class="linenum">1268</span></a>  <span class="comment">     * @return boolean true if anything was done. False if not.</span>
<a name="l1269"><span class="linenum">1269</span></a>  <span class="comment">     */</span>
<a name="l1270"><span class="linenum">1270</span></a>      public function <a class="function" onClick="logFunction('process_url_show_hide')" href="../_functions/process_url_show_hide.html" onMouseOver="funcPopup(event,'process_url_show_hide')">process_url_show_hide</a>() {
<a name="l1271"><span class="linenum">1271</span></a>          if (<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_hideid', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>)) {
<a name="l1272"><span class="linenum">1272</span></a>              <a class="var it26702" onMouseOver="hilite(26702)" onMouseOut="lolite()" onClick="logVariable('newvisibility')" href="../_variables/newvisibility.html">$newvisibility</a> = 0;
<a name="l1273"><span class="linenum">1273</span></a>          } else if (<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_showid', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>)) {
<a name="l1274"><span class="linenum">1274</span></a>              <a class="var it26702" onMouseOver="hilite(26702)" onMouseOut="lolite()" onClick="logVariable('newvisibility')" href="../_variables/newvisibility.html">$newvisibility</a> = 1;
<a name="l1275"><span class="linenum">1275</span></a>          } else {
<a name="l1276"><span class="linenum">1276</span></a>              return false;
<a name="l1277"><span class="linenum">1277</span></a>          }
<a name="l1278"><span class="linenum">1278</span></a>  
<a name="l1279"><span class="linenum">1279</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l1280"><span class="linenum">1280</span></a>  
<a name="l1281"><span class="linenum">1281</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;blocks-&gt;<a class="function" onClick="logFunction('find_instance')" href="../_functions/find_instance.html" onMouseOver="funcPopup(event,'find_instance')">find_instance</a>(<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>);
<a name="l1282"><span class="linenum">1282</span></a>  
<a name="l1283"><span class="linenum">1283</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l1284"><span class="linenum">1284</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('nopermissions', '', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('hideshowblocks'));
<a name="l1285"><span class="linenum">1285</span></a>          } else if (!<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('instance_can_be_hidden')" href="../_functions/instance_can_be_hidden.html" onMouseOver="funcPopup(event,'instance_can_be_hidden')">instance_can_be_hidden</a>()) {
<a name="l1286"><span class="linenum">1286</span></a>              return false;
<a name="l1287"><span class="linenum">1287</span></a>          }
<a name="l1288"><span class="linenum">1288</span></a>  
<a name="l1289"><span class="linenum">1289</span></a>          <a class="function" onClick="logFunction('blocks_set_visibility')" href="../_functions/blocks_set_visibility.html" onMouseOver="funcPopup(event,'blocks_set_visibility')">blocks_set_visibility</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>, <a class="var it26702" onMouseOver="hilite(26702)" onMouseOut="lolite()" onClick="logVariable('newvisibility')" href="../_variables/newvisibility.html">$newvisibility</a>);
<a name="l1290"><span class="linenum">1290</span></a>  
<a name="l1291"><span class="linenum">1291</span></a>  <span class="comment">        // If the page URL was a guses, it will contain the bui_... param, so we must make sure it is not there.</span>
<a name="l1292"><span class="linenum">1292</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_hideid');
<a name="l1293"><span class="linenum">1293</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_showid');
<a name="l1294"><span class="linenum">1294</span></a>  
<a name="l1295"><span class="linenum">1295</span></a>          return true;
<a name="l1296"><span class="linenum">1296</span></a>      }
<a name="l1297"><span class="linenum">1297</span></a>  
<a name="l1298"><span class="linenum">1298</span></a>      <span class="comment">/**</span>
<a name="l1299"><span class="linenum">1299</span></a>  <span class="comment">     * Handle showing/processing the submission from the block editing form.</span>
<a name="l1300"><span class="linenum">1300</span></a>  <span class="comment">     * @return boolean true if the form was submitted and the new config saved. Does not</span>
<a name="l1301"><span class="linenum">1301</span></a>  <span class="comment">     *      return if the editing form was displayed. False otherwise.</span>
<a name="l1302"><span class="linenum">1302</span></a>  <span class="comment">     */</span>
<a name="l1303"><span class="linenum">1303</span></a>      public function <a class="function" onClick="logFunction('process_url_edit')" href="../_functions/process_url_edit.html" onMouseOver="funcPopup(event,'process_url_edit')">process_url_edit</a>() {
<a name="l1304"><span class="linenum">1304</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1305"><span class="linenum">1305</span></a>  
<a name="l1306"><span class="linenum">1306</span></a>          <a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_editid', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l1307"><span class="linenum">1307</span></a>          if (!<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>) {
<a name="l1308"><span class="linenum">1308</span></a>              return false;
<a name="l1309"><span class="linenum">1309</span></a>          }
<a name="l1310"><span class="linenum">1310</span></a>  
<a name="l1311"><span class="linenum">1311</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l1312"><span class="linenum">1312</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../blocks/edit_form.php.html">/blocks/edit_form.php</a>');
<a name="l1313"><span class="linenum">1313</span></a>  
<a name="l1314"><span class="linenum">1314</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_instance')" href="../_functions/find_instance.html" onMouseOver="funcPopup(event,'find_instance')">find_instance</a>(<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>);
<a name="l1315"><span class="linenum">1315</span></a>  
<a name="l1316"><span class="linenum">1316</span></a>          if (!<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('user_can_edit')" href="../_functions/user_can_edit.html" onMouseOver="funcPopup(event,'user_can_edit')">user_can_edit</a>() &amp;&amp; !<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l1317"><span class="linenum">1317</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('nopermissions', '', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editblock'));
<a name="l1318"><span class="linenum">1318</span></a>          }
<a name="l1319"><span class="linenum">1319</span></a>  
<a name="l1320"><span class="linenum">1320</span></a>          <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a>();
<a name="l1321"><span class="linenum">1321</span></a>          <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('admin');
<a name="l1322"><span class="linenum">1322</span></a>          <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_course')" href="../_functions/set_course.html" onMouseOver="funcPopup(event,'set_course')">set_course</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;course);
<a name="l1323"><span class="linenum">1323</span></a>  <span class="comment">        //$editpage-&gt;set_context($block-&gt;context);</span>
<a name="l1324"><span class="linenum">1324</span></a>          <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context);
<a name="l1325"><span class="linenum">1325</span></a>          if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm) {
<a name="l1326"><span class="linenum">1326</span></a>              <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_cm')" href="../_functions/set_cm.html" onMouseOver="funcPopup(event,'set_cm')">set_cm</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;cm);
<a name="l1327"><span class="linenum">1327</span></a>          }
<a name="l1328"><span class="linenum">1328</span></a>          <a class="var it26703" onMouseOver="hilite(26703)" onMouseOut="lolite()" onClick="logVariable('editurlbase')" href="../_variables/editurlbase.html">$editurlbase</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a> . '/', '/', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out_omit_querystring')" href="../_functions/out_omit_querystring.html" onMouseOver="funcPopup(event,'out_omit_querystring')">out_omit_querystring</a>());
<a name="l1329"><span class="linenum">1329</span></a>          <a class="var it26704" onMouseOver="hilite(26704)" onMouseOut="lolite()" onClick="logVariable('editurlparams')" href="../_variables/editurlparams.html">$editurlparams</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('params')" href="../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>();
<a name="l1330"><span class="linenum">1330</span></a>          <a class="var it26704" onMouseOver="hilite(26704)" onMouseOut="lolite()" onClick="logVariable('editurlparams')" href="../_variables/editurlparams.html">$editurlparams</a>['bui_editid'] = <a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>;
<a name="l1331"><span class="linenum">1331</span></a>          <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>(<a class="var it26703" onMouseOver="hilite(26703)" onMouseOut="lolite()" onClick="logVariable('editurlbase')" href="../_variables/editurlbase.html">$editurlbase</a>, <a class="var it26704" onMouseOver="hilite(26704)" onMouseOut="lolite()" onClick="logVariable('editurlparams')" href="../_variables/editurlparams.html">$editurlparams</a>);
<a name="l1332"><span class="linenum">1332</span></a>          <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_block_actions_done')" href="../_functions/set_block_actions_done.html" onMouseOver="funcPopup(event,'set_block_actions_done')">set_block_actions_done</a>();
<a name="l1333"><span class="linenum">1333</span></a>  <span class="comment">        // At this point we are either going to redirect, or display the form, so</span>
<a name="l1334"><span class="linenum">1334</span></a>  <span class="comment">        // overwrite global $PAGE ready for this. (Formslib refers to it.)</span>
<a name="l1335"><span class="linenum">1335</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a> = <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>;
<a name="l1336"><span class="linenum">1336</span></a>  <span class="comment">        //some functions like MoodleQuickForm::addHelpButton use $OUTPUT so we need to replace that to</span>
<a name="l1337"><span class="linenum">1337</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a> = <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('core');
<a name="l1338"><span class="linenum">1338</span></a>          <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a> = <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>;
<a name="l1339"><span class="linenum">1339</span></a>  
<a name="l1340"><span class="linenum">1340</span></a>          <a class="var it26705" onMouseOver="hilite(26705)" onMouseOut="lolite()" onClick="logVariable('formfile')" href="../_variables/formfile.html">$formfile</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '/blocks/' . <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="phpfunction" onClick="logFunction('name')" href="../_functions/name.html" onMouseOver="phpfuncPopup(event,'name')">name</a>() . '/edit_form.php';
<a name="l1341"><span class="linenum">1341</span></a>          if (<a class="phpfunction" onClick="logFunction('is_readable')" href="../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it26705" onMouseOver="hilite(26705)" onMouseOut="lolite()" onClick="logVariable('formfile')" href="../_variables/formfile.html">$formfile</a>)) {
<a name="l1342"><span class="linenum">1342</span></a>              require_once(<a class="var it26705" onMouseOver="hilite(26705)" onMouseOut="lolite()" onClick="logVariable('formfile')" href="../_variables/formfile.html">$formfile</a>);
<a name="l1343"><span class="linenum">1343</span></a>              <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_' . <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="phpfunction" onClick="logFunction('name')" href="../_functions/name.html" onMouseOver="phpfuncPopup(event,'name')">name</a>() . '_edit_form';
<a name="l1344"><span class="linenum">1344</span></a>              if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>)) {
<a name="l1345"><span class="linenum">1345</span></a>                  <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_edit_form';
<a name="l1346"><span class="linenum">1346</span></a>              }
<a name="l1347"><span class="linenum">1347</span></a>          } else {
<a name="l1348"><span class="linenum">1348</span></a>              <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_edit_form';
<a name="l1349"><span class="linenum">1349</span></a>          }
<a name="l1350"><span class="linenum">1350</span></a>  
<a name="l1351"><span class="linenum">1351</span></a>          <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a> = new <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>(<a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a onClick="logVariable('url')" class="var it41009" onMouseOver="hilite(41009)" onMouseOut="lolite()" href="../_variables/url.html">url</a>, <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>);
<a name="l1352"><span class="linenum">1352</span></a>          <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('set_data')" href="../_functions/set_data.html" onMouseOver="funcPopup(event,'set_data')">set_data</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>);
<a name="l1353"><span class="linenum">1353</span></a>  
<a name="l1354"><span class="linenum">1354</span></a>          if (<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('is_cancelled')" href="../_functions/is_cancelled.html" onMouseOver="funcPopup(event,'is_cancelled')">is_cancelled</a>()) {
<a name="l1355"><span class="linenum">1355</span></a>              <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url);
<a name="l1356"><span class="linenum">1356</span></a>  
<a name="l1357"><span class="linenum">1357</span></a>          } else if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> = <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('get_data')" href="../_functions/get_data.html" onMouseOver="funcPopup(event,'get_data')">get_data</a>()) {
<a name="l1358"><span class="linenum">1358</span></a>              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a> = new stdClass;
<a name="l1359"><span class="linenum">1359</span></a>              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('id')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id;
<a name="l1360"><span class="linenum">1360</span></a>  
<a name="l1361"><span class="linenum">1361</span></a>  <span class="comment">            // This may get overwritten by the special case handling below.</span>
<a name="l1362"><span class="linenum">1362</span></a>              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_pagetypepattern')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_pagetypepattern.html">bui_pagetypepattern</a>;
<a name="l1363"><span class="linenum">1363</span></a>              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = (bool) <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_contexts')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_contexts.html">bui_contexts</a>;
<a name="l1364"><span class="linenum">1364</span></a>              if (empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_subpagepattern')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_subpagepattern.html">bui_subpagepattern</a>) || <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_subpagepattern')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_subpagepattern.html">bui_subpagepattern</a> == '%@NULL@%') {
<a name="l1365"><span class="linenum">1365</span></a>                  <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('subpagepattern')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/subpagepattern.html">subpagepattern</a> = null;
<a name="l1366"><span class="linenum">1366</span></a>              } else {
<a name="l1367"><span class="linenum">1367</span></a>                  <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('subpagepattern')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/subpagepattern.html">subpagepattern</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_subpagepattern')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_subpagepattern.html">bui_subpagepattern</a>;
<a name="l1368"><span class="linenum">1368</span></a>              }
<a name="l1369"><span class="linenum">1369</span></a>  
<a name="l1370"><span class="linenum">1370</span></a>              <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1371"><span class="linenum">1371</span></a>              <a class="var it17355" onMouseOver="hilite(17355)" onMouseOut="lolite()" onClick="logVariable('frontpagecontext')" href="../_variables/frontpagecontext.html">$frontpagecontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>);
<a name="l1372"><span class="linenum">1372</span></a>              <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_parentcontextid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_parentcontextid.html">bui_parentcontextid</a>);
<a name="l1373"><span class="linenum">1373</span></a>  
<a name="l1374"><span class="linenum">1374</span></a>  <span class="comment">            // Updating stickiness and contexts.  See MDL-21375 for details.</span>
<a name="l1375"><span class="linenum">1375</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:manageblocks', <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>)) { // Check permissions in destination
<a name="l1376"><span class="linenum">1376</span></a>  
<a name="l1377"><span class="linenum">1377</span></a>  <span class="comment">                // Explicitly set the default context</span>
<a name="l1378"><span class="linenum">1378</span></a>                  <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('parentcontextid')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/parentcontextid.html">parentcontextid</a> = <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39842" onMouseOver="hilite(39842)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1379"><span class="linenum">1379</span></a>  
<a name="l1380"><span class="linenum">1380</span></a>                  if (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_editingatfrontpage')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_editingatfrontpage.html">bui_editingatfrontpage</a>) {   // The block is being edited on the front page
<a name="l1381"><span class="linenum">1381</span></a>  
<a name="l1382"><span class="linenum">1382</span></a>  <span class="comment">                    // The interface here is a special case because the pagetype pattern is</span>
<a name="l1383"><span class="linenum">1383</span></a>  <span class="comment">                    // totally derived from the context menu.  Here are the excpetions.   MDL-30340</span>
<a name="l1384"><span class="linenum">1384</span></a>  
<a name="l1385"><span class="linenum">1385</span></a>                      switch (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_contexts')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_contexts.html">bui_contexts</a>) {
<a name="l1386"><span class="linenum">1386</span></a>                          case <a class="constant" onClick="logConstant('BUI_CONTEXTS_ENTIRE_SITE')" href="../_constants/BUI_CONTEXTS_ENTIRE_SITE.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_ENTIRE_SITE')">BUI_CONTEXTS_ENTIRE_SITE</a>:
<a name="l1387"><span class="linenum">1387</span></a>  <span class="comment">                            // The user wants to show the block across the entire site</span>
<a name="l1388"><span class="linenum">1388</span></a>                              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('parentcontextid')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/parentcontextid.html">parentcontextid</a> = <a class="var it17" onMouseOver="hilite(17)" onMouseOut="lolite()" onClick="logVariable('systemcontext')" href="../_variables/systemcontext.html">$systemcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39845" onMouseOver="hilite(39845)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1389"><span class="linenum">1389</span></a>                              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = true;
<a name="l1390"><span class="linenum">1390</span></a>                              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a>  = '*';
<a name="l1391"><span class="linenum">1391</span></a>                              break;
<a name="l1392"><span class="linenum">1392</span></a>                          case <a class="constant" onClick="logConstant('BUI_CONTEXTS_FRONTPAGE_SUBS')" href="../_constants/BUI_CONTEXTS_FRONTPAGE_SUBS.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_FRONTPAGE_SUBS')">BUI_CONTEXTS_FRONTPAGE_SUBS</a>:
<a name="l1393"><span class="linenum">1393</span></a>  <span class="comment">                            // The user wants the block shown on the front page and all subcontexts</span>
<a name="l1394"><span class="linenum">1394</span></a>                              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('parentcontextid')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/parentcontextid.html">parentcontextid</a> = <a class="var it17355" onMouseOver="hilite(17355)" onMouseOut="lolite()" onClick="logVariable('frontpagecontext')" href="../_variables/frontpagecontext.html">$frontpagecontext</a>-&gt;<a onClick="logVariable('id')" class="var it40980" onMouseOver="hilite(40980)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1395"><span class="linenum">1395</span></a>                              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = true;
<a name="l1396"><span class="linenum">1396</span></a>                              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a>  = '*';
<a name="l1397"><span class="linenum">1397</span></a>                              break;
<a name="l1398"><span class="linenum">1398</span></a>                          case <a class="constant" onClick="logConstant('BUI_CONTEXTS_FRONTPAGE_ONLY')" href="../_constants/BUI_CONTEXTS_FRONTPAGE_ONLY.html" onMouseOver="constPopup(event,'BUI_CONTEXTS_FRONTPAGE_ONLY')">BUI_CONTEXTS_FRONTPAGE_ONLY</a>:
<a name="l1399"><span class="linenum">1399</span></a>  <span class="comment">                            // The user want to show the front page on the frontpage only</span>
<a name="l1400"><span class="linenum">1400</span></a>                              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('parentcontextid')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/parentcontextid.html">parentcontextid</a> = <a class="var it17355" onMouseOver="hilite(17355)" onMouseOut="lolite()" onClick="logVariable('frontpagecontext')" href="../_variables/frontpagecontext.html">$frontpagecontext</a>-&gt;<a onClick="logVariable('id')" class="var it40980" onMouseOver="hilite(40980)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1401"><span class="linenum">1401</span></a>                              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = false;
<a name="l1402"><span class="linenum">1402</span></a>                              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a>  = 'site-index';
<a name="l1403"><span class="linenum">1403</span></a>  <span class="comment">                            // This is the only relevant page type anyway but we'll set it explicitly just</span>
<a name="l1404"><span class="linenum">1404</span></a>  <span class="comment">                            // in case the front page grows site-index-* subpages of its own later</span>
<a name="l1405"><span class="linenum">1405</span></a>                              break;
<a name="l1406"><span class="linenum">1406</span></a>                      }
<a name="l1407"><span class="linenum">1407</span></a>                  }
<a name="l1408"><span class="linenum">1408</span></a>              }
<a name="l1409"><span class="linenum">1409</span></a>  
<a name="l1410"><span class="linenum">1410</span></a>              <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a>);
<a name="l1411"><span class="linenum">1411</span></a>  <span class="comment">            // hacks for some contexts</span>
<a name="l1412"><span class="linenum">1412</span></a>              if ((<a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39842" onMouseOver="hilite(39842)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>) &amp;&amp; (<a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39842" onMouseOver="hilite(39842)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>)) {
<a name="l1413"><span class="linenum">1413</span></a>  <span class="comment">                // For course context</span>
<a name="l1414"><span class="linenum">1414</span></a>  <span class="comment">                // is page type pattern is mod-*, change showinsubcontext to 1</span>
<a name="l1415"><span class="linenum">1415</span></a>                  if (<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[0] == 'mod' || <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('pagetypepattern')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/pagetypepattern.html">pagetypepattern</a> == '*') {
<a name="l1416"><span class="linenum">1416</span></a>                      <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = 1;
<a name="l1417"><span class="linenum">1417</span></a>                  } else {
<a name="l1418"><span class="linenum">1418</span></a>                      <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('showinsubcontexts')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/showinsubcontexts.html">showinsubcontexts</a> = 0;
<a name="l1419"><span class="linenum">1419</span></a>                  }
<a name="l1420"><span class="linenum">1420</span></a>              } else  if (<a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39842" onMouseOver="hilite(39842)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_USER')" href="../_constants/CONTEXT_USER.html" onMouseOver="constPopup(event,'CONTEXT_USER')">CONTEXT_USER</a>) {
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment">                // for user context</span>
<a name="l1422"><span class="linenum">1422</span></a>  <span class="comment">                // subpagepattern should be null</span>
<a name="l1423"><span class="linenum">1423</span></a>                  if (<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[0] == 'user' or <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[0] == 'my') {
<a name="l1424"><span class="linenum">1424</span></a>  <span class="comment">                    // we don't need subpagepattern in usercontext</span>
<a name="l1425"><span class="linenum">1425</span></a>                      <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('subpagepattern')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/subpagepattern.html">subpagepattern</a> = null;
<a name="l1426"><span class="linenum">1426</span></a>                  }
<a name="l1427"><span class="linenum">1427</span></a>              }
<a name="l1428"><span class="linenum">1428</span></a>  
<a name="l1429"><span class="linenum">1429</span></a>              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_defaultregion')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_defaultregion.html">bui_defaultregion</a>;
<a name="l1430"><span class="linenum">1430</span></a>              <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('defaultweight')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/defaultweight.html">defaultweight</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_defaultweight')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_defaultweight.html">bui_defaultweight</a>;
<a name="l1431"><span class="linenum">1431</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('block_instances', <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>);
<a name="l1432"><span class="linenum">1432</span></a>  
<a name="l1433"><span class="linenum">1433</span></a>              if (!empty(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('config')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/config.html">config</a>)) {
<a name="l1434"><span class="linenum">1434</span></a>                  <a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a> = <a class="function" onClick="logFunction('clone')" href="../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('config')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/config.html">config</a>);
<a name="l1435"><span class="linenum">1435</span></a>              } else {
<a name="l1436"><span class="linenum">1436</span></a>                  <a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a> = new stdClass;
<a name="l1437"><span class="linenum">1437</span></a>              }
<a name="l1438"><span class="linenum">1438</span></a>              foreach (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a> as <a class="var it20367" onMouseOver="hilite(20367)" onMouseOut="lolite()" onClick="logVariable('configfield')" href="../_variables/configfield.html">$configfield</a> =&gt; <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>) {
<a name="l1439"><span class="linenum">1439</span></a>                  if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it20367" onMouseOver="hilite(20367)" onMouseOut="lolite()" onClick="logVariable('configfield')" href="../_variables/configfield.html">$configfield</a>, 'config_') !== 0) {
<a name="l1440"><span class="linenum">1440</span></a>                      continue;
<a name="l1441"><span class="linenum">1441</span></a>                  }
<a name="l1442"><span class="linenum">1442</span></a>                  <a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it20367" onMouseOver="hilite(20367)" onMouseOut="lolite()" onClick="logVariable('configfield')" href="../_variables/configfield.html">$configfield</a>, 7);
<a name="l1443"><span class="linenum">1443</span></a>                  <a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>-&gt;<a class="var it1464" onMouseOver="hilite(1464)" onMouseOut="lolite()" onClick="logVariable('field')" href="../_variables/field.html">$field</a> = <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../_variables/value.html">$value</a>;
<a name="l1444"><span class="linenum">1444</span></a>              }
<a name="l1445"><span class="linenum">1445</span></a>              <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('instance_config_save')" href="../_functions/instance_config_save.html" onMouseOver="funcPopup(event,'instance_config_save')">instance_config_save</a>(<a class="var it1113" onMouseOver="hilite(1113)" onMouseOut="lolite()" onClick="logVariable('config')" href="../_variables/config.html">$config</a>);
<a name="l1446"><span class="linenum">1446</span></a>  
<a name="l1447"><span class="linenum">1447</span></a>              <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a> = new stdClass;
<a name="l1448"><span class="linenum">1448</span></a>              <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('visible')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_visible')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_visible.html">bui_visible</a>;
<a name="l1449"><span class="linenum">1449</span></a>              <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('region')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/region.html">region</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_region')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_region.html">bui_region</a>;
<a name="l1450"><span class="linenum">1450</span></a>              <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('weight')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_weight')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_weight.html">bui_weight</a>;
<a name="l1451"><span class="linenum">1451</span></a>              <a class="var it26714" onMouseOver="hilite(26714)" onMouseOut="lolite()" onClick="logVariable('needbprecord')" href="../_variables/needbprecord.html">$needbprecord</a> = !<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_visible')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_visible.html">bui_visible</a> || <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_region')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_region.html">bui_region</a> != <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_defaultregion')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_defaultregion.html">bui_defaultregion</a> ||
<a name="l1452"><span class="linenum">1452</span></a>                      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_weight')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_weight.html">bui_weight</a> != <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('bui_defaultweight')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../_variables/bui_defaultweight.html">bui_defaultweight</a>;
<a name="l1453"><span class="linenum">1453</span></a>  
<a name="l1454"><span class="linenum">1454</span></a>              if (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockpositionid &amp;&amp; !<a class="var it26714" onMouseOver="hilite(26714)" onMouseOut="lolite()" onClick="logVariable('needbprecord')" href="../_variables/needbprecord.html">$needbprecord</a>) {
<a name="l1455"><span class="linenum">1455</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('block_positions', array('id' =&gt; <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockpositionid));
<a name="l1456"><span class="linenum">1456</span></a>  
<a name="l1457"><span class="linenum">1457</span></a>              } else if (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockpositionid &amp;&amp; <a class="var it26714" onMouseOver="hilite(26714)" onMouseOut="lolite()" onClick="logVariable('needbprecord')" href="../_variables/needbprecord.html">$needbprecord</a>) {
<a name="l1458"><span class="linenum">1458</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('id')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;blockpositionid;
<a name="l1459"><span class="linenum">1459</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('block_positions', <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>);
<a name="l1460"><span class="linenum">1460</span></a>  
<a name="l1461"><span class="linenum">1461</span></a>              } else if (<a class="var it26714" onMouseOver="hilite(26714)" onMouseOut="lolite()" onClick="logVariable('needbprecord')" href="../_variables/needbprecord.html">$needbprecord</a>) {
<a name="l1462"><span class="linenum">1462</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a> = <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id;
<a name="l1463"><span class="linenum">1463</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('contextid')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;context-&gt;id;
<a name="l1464"><span class="linenum">1464</span></a>                  <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('pagetype')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype;
<a name="l1465"><span class="linenum">1465</span></a>                  if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage) {
<a name="l1466"><span class="linenum">1466</span></a>                      <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('subpage')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage;
<a name="l1467"><span class="linenum">1467</span></a>                  } else {
<a name="l1468"><span class="linenum">1468</span></a>                      <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('subpage')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a> = '';
<a name="l1469"><span class="linenum">1469</span></a>                  }
<a name="l1470"><span class="linenum">1470</span></a>                  <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('block_positions', <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>);
<a name="l1471"><span class="linenum">1471</span></a>              }
<a name="l1472"><span class="linenum">1472</span></a>  
<a name="l1473"><span class="linenum">1473</span></a>              <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url);
<a name="l1474"><span class="linenum">1474</span></a>  
<a name="l1475"><span class="linenum">1475</span></a>          } else {
<a name="l1476"><span class="linenum">1476</span></a>              <a class="var it9423" onMouseOver="hilite(9423)" onMouseOut="lolite()" onClick="logVariable('strheading')" href="../_variables/strheading.html">$strheading</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('blockconfiga', 'moodle', <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>());
<a name="l1477"><span class="linenum">1477</span></a>              <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it9423" onMouseOver="hilite(9423)" onMouseOut="lolite()" onClick="logVariable('strheading')" href="../_variables/strheading.html">$strheading</a>);
<a name="l1478"><span class="linenum">1478</span></a>              <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it9423" onMouseOver="hilite(9423)" onMouseOut="lolite()" onClick="logVariable('strheading')" href="../_variables/strheading.html">$strheading</a>);
<a name="l1479"><span class="linenum">1479</span></a>              <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;pagetype);
<a name="l1480"><span class="linenum">1480</span></a>              if (<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[0] == 'tag' &amp;&amp; !empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage)) {
<a name="l1481"><span class="linenum">1481</span></a>  <span class="comment">                // better navbar for tag pages</span>
<a name="l1482"><span class="linenum">1482</span></a>                  <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a onClick="logVariable('navbar')" class="var it41009" onMouseOver="hilite(41009)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('tags'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/tag/'));
<a name="l1483"><span class="linenum">1483</span></a>                  <a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a> = <a class="function" onClick="logFunction('tag_get')" href="../_functions/tag_get.html" onMouseOver="funcPopup(event,'tag_get')">tag_get</a>('id', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;subpage, '*');
<a name="l1484"><span class="linenum">1484</span></a>  <span class="comment">                // tag search page doesn't have subpageid</span>
<a name="l1485"><span class="linenum">1485</span></a>                  if (<a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>) {
<a name="l1486"><span class="linenum">1486</span></a>                      <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a onClick="logVariable('navbar')" class="var it41009" onMouseOver="hilite(41009)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('name')" class="var it41010" onMouseOver="hilite(41010)" onMouseOut="lolite()" href="../_variables/name.html">name</a>, <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../tag/index.php.html">/tag/index.php</a>', array('id'=&gt;<a class="var it255" onMouseOver="hilite(255)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../_variables/tag.html">$tag</a>-&gt;<a onClick="logVariable('id')" class="var it41010" onMouseOver="hilite(41010)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)));
<a name="l1487"><span class="linenum">1487</span></a>                  }
<a name="l1488"><span class="linenum">1488</span></a>              }
<a name="l1489"><span class="linenum">1489</span></a>              <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a onClick="logVariable('navbar')" class="var it41009" onMouseOver="hilite(41009)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>());
<a name="l1490"><span class="linenum">1490</span></a>              <a class="var it23975" onMouseOver="hilite(23975)" onMouseOut="lolite()" onClick="logVariable('editpage')" href="../_variables/editpage.html">$editpage</a>-&gt;<a onClick="logVariable('navbar')" class="var it41009" onMouseOver="hilite(41009)" onMouseOut="lolite()" href="../_variables/navbar.html">navbar</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('configuration'));
<a name="l1491"><span class="linenum">1491</span></a>              echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l1492"><span class="linenum">1492</span></a>              echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="var it9423" onMouseOver="hilite(9423)" onMouseOut="lolite()" onClick="logVariable('strheading')" href="../_variables/strheading.html">$strheading</a>, 2);
<a name="l1493"><span class="linenum">1493</span></a>              <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('display')" href="../_functions/display.html" onMouseOver="funcPopup(event,'display')">display</a>();
<a name="l1494"><span class="linenum">1494</span></a>              echo <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l1495"><span class="linenum">1495</span></a>              exit;
<a name="l1496"><span class="linenum">1496</span></a>          }
<a name="l1497"><span class="linenum">1497</span></a>      }
<a name="l1498"><span class="linenum">1498</span></a>  
<a name="l1499"><span class="linenum">1499</span></a>      <span class="comment">/**</span>
<a name="l1500"><span class="linenum">1500</span></a>  <span class="comment">     * Handle showing/processing the submission from the block editing form.</span>
<a name="l1501"><span class="linenum">1501</span></a>  <span class="comment">     * @return boolean true if the form was submitted and the new config saved. Does not</span>
<a name="l1502"><span class="linenum">1502</span></a>  <span class="comment">     *      return if the editing form was displayed. False otherwise.</span>
<a name="l1503"><span class="linenum">1503</span></a>  <span class="comment">     */</span>
<a name="l1504"><span class="linenum">1504</span></a>      public function <a class="function" onClick="logFunction('process_url_move')" href="../_functions/process_url_move.html" onMouseOver="funcPopup(event,'process_url_move')">process_url_move</a>() {
<a name="l1505"><span class="linenum">1505</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l1506"><span class="linenum">1506</span></a>  
<a name="l1507"><span class="linenum">1507</span></a>          <a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_moveid', null, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l1508"><span class="linenum">1508</span></a>          if (!<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>) {
<a name="l1509"><span class="linenum">1509</span></a>              return false;
<a name="l1510"><span class="linenum">1510</span></a>          }
<a name="l1511"><span class="linenum">1511</span></a>  
<a name="l1512"><span class="linenum">1512</span></a>          <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l1513"><span class="linenum">1513</span></a>  
<a name="l1514"><span class="linenum">1514</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('find_instance')" href="../_functions/find_instance.html" onMouseOver="funcPopup(event,'find_instance')">find_instance</a>(<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>);
<a name="l1515"><span class="linenum">1515</span></a>  
<a name="l1516"><span class="linenum">1516</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l1517"><span class="linenum">1517</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('nopermissions', '', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url-&gt;<a class="function" onClick="logFunction('out')" href="../_functions/out.html" onMouseOver="funcPopup(event,'out')">out</a>(), <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('editblock'));
<a name="l1518"><span class="linenum">1518</span></a>          }
<a name="l1519"><span class="linenum">1519</span></a>  
<a name="l1520"><span class="linenum">1520</span></a>          <a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_newregion', '', <a class="constant" onClick="logConstant('PARAM_ALPHANUMEXT')" href="../_constants/PARAM_ALPHANUMEXT.html" onMouseOver="constPopup(event,'PARAM_ALPHANUMEXT')">PARAM_ALPHANUMEXT</a>);
<a name="l1521"><span class="linenum">1521</span></a>          <a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('bui_newweight', null, <a class="constant" onClick="logConstant('PARAM_FLOAT')" href="../_constants/PARAM_FLOAT.html" onMouseOver="constPopup(event,'PARAM_FLOAT')">PARAM_FLOAT</a>);
<a name="l1522"><span class="linenum">1522</span></a>          if (!<a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a> || <a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>)) {
<a name="l1523"><span class="linenum">1523</span></a>  <span class="comment">            // Don't have a valid target position yet, must be just starting the move.</span>
<a name="l1524"><span class="linenum">1524</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('movingblock')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/movingblock.html">movingblock</a> = <a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>;
<a name="l1525"><span class="linenum">1525</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_moveid');
<a name="l1526"><span class="linenum">1526</span></a>              return false;
<a name="l1527"><span class="linenum">1527</span></a>          }
<a name="l1528"><span class="linenum">1528</span></a>  
<a name="l1529"><span class="linenum">1529</span></a>          if (!<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('is_known_region')" href="../_functions/is_known_region.html" onMouseOver="funcPopup(event,'is_known_region')">is_known_region</a>(<a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>)) {
<a name="l1530"><span class="linenum">1530</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('unknownblockregion', '', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;url, <a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>);
<a name="l1531"><span class="linenum">1531</span></a>          }
<a name="l1532"><span class="linenum">1532</span></a>  
<a name="l1533"><span class="linenum">1533</span></a>  <span class="comment">        // Move this block. This may involve moving other nearby blocks.</span>
<a name="l1534"><span class="linenum">1534</span></a>          <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('birecordsbyregion')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/birecordsbyregion.html">birecordsbyregion</a>[<a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>];
<a name="l1535"><span class="linenum">1535</span></a>  
<a name="l1536"><span class="linenum">1536</span></a>          <a class="var it26715" onMouseOver="hilite(26715)" onMouseOut="lolite()" onClick="logVariable('maxweight')" href="../_variables/maxweight.html">$maxweight</a> = self::MAX_WEIGHT;
<a name="l1537"><span class="linenum">1537</span></a>          <a class="var it26716" onMouseOver="hilite(26716)" onMouseOut="lolite()" onClick="logVariable('minweight')" href="../_variables/minweight.html">$minweight</a> = -self::MAX_WEIGHT;
<a name="l1538"><span class="linenum">1538</span></a>  
<a name="l1539"><span class="linenum">1539</span></a>  <span class="comment">        // Initialise the used weights and spareweights array with the default values</span>
<a name="l1540"><span class="linenum">1540</span></a>          <a class="var it26717" onMouseOver="hilite(26717)" onMouseOut="lolite()" onClick="logVariable('spareweights')" href="../_variables/spareweights.html">$spareweights</a> = array();
<a name="l1541"><span class="linenum">1541</span></a>          <a class="var it26718" onMouseOver="hilite(26718)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a> = array();
<a name="l1542"><span class="linenum">1542</span></a>          for (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = <a class="var it26716" onMouseOver="hilite(26716)" onMouseOut="lolite()" onClick="logVariable('minweight')" href="../_variables/minweight.html">$minweight</a>; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt;= <a class="var it26715" onMouseOver="hilite(26715)" onMouseOut="lolite()" onClick="logVariable('maxweight')" href="../_variables/maxweight.html">$maxweight</a>; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++) {
<a name="l1543"><span class="linenum">1543</span></a>              <a class="var it26717" onMouseOver="hilite(26717)" onMouseOut="lolite()" onClick="logVariable('spareweights')" href="../_variables/spareweights.html">$spareweights</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>] = <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>;
<a name="l1544"><span class="linenum">1544</span></a>              <a class="var it26718" onMouseOver="hilite(26718)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>] = array();
<a name="l1545"><span class="linenum">1545</span></a>          }
<a name="l1546"><span class="linenum">1546</span></a>  
<a name="l1547"><span class="linenum">1547</span></a>  <span class="comment">        // Check each block and sort out where we have used weights</span>
<a name="l1548"><span class="linenum">1548</span></a>          foreach (<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> as <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>) {
<a name="l1549"><span class="linenum">1549</span></a>              if (<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> &gt; <a class="var it26715" onMouseOver="hilite(26715)" onMouseOut="lolite()" onClick="logVariable('maxweight')" href="../_variables/maxweight.html">$maxweight</a>) {
<a name="l1550"><span class="linenum">1550</span></a>  <span class="comment">                // If this statement is true then the blocks weight is more than the</span>
<a name="l1551"><span class="linenum">1551</span></a>  <span class="comment">                // current maximum. To ensure that we can get the best block position</span>
<a name="l1552"><span class="linenum">1552</span></a>  <span class="comment">                // we will initialise elements within the usedweights and spareweights</span>
<a name="l1553"><span class="linenum">1553</span></a>  <span class="comment">                // arrays between the blocks weight (which will then be the new max) and</span>
<a name="l1554"><span class="linenum">1554</span></a>  <span class="comment">                // the current max</span>
<a name="l1555"><span class="linenum">1555</span></a>                  <a class="var it26719" onMouseOver="hilite(26719)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a> = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a>;
<a name="l1556"><span class="linenum">1556</span></a>                  while (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it26719" onMouseOver="hilite(26719)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>, <a class="var it26718" onMouseOver="hilite(26718)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>)) {
<a name="l1557"><span class="linenum">1557</span></a>                      <a class="var it26718" onMouseOver="hilite(26718)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it26719" onMouseOver="hilite(26719)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>] = array();
<a name="l1558"><span class="linenum">1558</span></a>                      <a class="var it26717" onMouseOver="hilite(26717)" onMouseOut="lolite()" onClick="logVariable('spareweights')" href="../_variables/spareweights.html">$spareweights</a>[<a class="var it26719" onMouseOver="hilite(26719)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>] = <a class="var it26719" onMouseOver="hilite(26719)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>;
<a name="l1559"><span class="linenum">1559</span></a>                      <a class="var it26719" onMouseOver="hilite(26719)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>--;
<a name="l1560"><span class="linenum">1560</span></a>                  }
<a name="l1561"><span class="linenum">1561</span></a>                  <a class="var it26715" onMouseOver="hilite(26715)" onMouseOut="lolite()" onClick="logVariable('maxweight')" href="../_variables/maxweight.html">$maxweight</a> = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a>;
<a name="l1562"><span class="linenum">1562</span></a>              } else if (<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> &lt; <a class="var it26716" onMouseOver="hilite(26716)" onMouseOut="lolite()" onClick="logVariable('minweight')" href="../_variables/minweight.html">$minweight</a>) {
<a name="l1563"><span class="linenum">1563</span></a>  <span class="comment">                // As above except this time the blocks weight is LESS than the</span>
<a name="l1564"><span class="linenum">1564</span></a>  <span class="comment">                // the current minimum, so we will initialise the array from the</span>
<a name="l1565"><span class="linenum">1565</span></a>  <span class="comment">                // blocks weight (new minimum) to the current minimum</span>
<a name="l1566"><span class="linenum">1566</span></a>                  <a class="var it26719" onMouseOver="hilite(26719)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a> = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a>;
<a name="l1567"><span class="linenum">1567</span></a>                  while (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it26719" onMouseOver="hilite(26719)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>, <a class="var it26718" onMouseOver="hilite(26718)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>)) {
<a name="l1568"><span class="linenum">1568</span></a>                      <a class="var it26718" onMouseOver="hilite(26718)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it26719" onMouseOver="hilite(26719)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>] = array();
<a name="l1569"><span class="linenum">1569</span></a>                      <a class="var it26717" onMouseOver="hilite(26717)" onMouseOut="lolite()" onClick="logVariable('spareweights')" href="../_variables/spareweights.html">$spareweights</a>[<a class="var it26719" onMouseOver="hilite(26719)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>] = <a class="var it26719" onMouseOver="hilite(26719)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>;
<a name="l1570"><span class="linenum">1570</span></a>                      <a class="var it26719" onMouseOver="hilite(26719)" onMouseOut="lolite()" onClick="logVariable('parseweight')" href="../_variables/parseweight.html">$parseweight</a>++;
<a name="l1571"><span class="linenum">1571</span></a>                  }
<a name="l1572"><span class="linenum">1572</span></a>                  <a class="var it26716" onMouseOver="hilite(26716)" onMouseOut="lolite()" onClick="logVariable('minweight')" href="../_variables/minweight.html">$minweight</a> = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a>;
<a name="l1573"><span class="linenum">1573</span></a>              }
<a name="l1574"><span class="linenum">1574</span></a>              if (<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('id')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id) {
<a name="l1575"><span class="linenum">1575</span></a>                  unset(<a class="var it26717" onMouseOver="hilite(26717)" onMouseOut="lolite()" onClick="logVariable('spareweights')" href="../_variables/spareweights.html">$spareweights</a>[<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a>]);
<a name="l1576"><span class="linenum">1576</span></a>                  <a class="var it26718" onMouseOver="hilite(26718)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('weight')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a>][] = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a onClick="logVariable('id')" class="var it40991" onMouseOver="hilite(40991)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l1577"><span class="linenum">1577</span></a>              }
<a name="l1578"><span class="linenum">1578</span></a>          }
<a name="l1579"><span class="linenum">1579</span></a>  
<a name="l1580"><span class="linenum">1580</span></a>  <span class="comment">        // First we find the nearest gap in the list of weights.</span>
<a name="l1581"><span class="linenum">1581</span></a>          <a class="var it26720" onMouseOver="hilite(26720)" onMouseOut="lolite()" onClick="logVariable('bestdistance')" href="../_variables/bestdistance.html">$bestdistance</a> = <a class="phpfunction" onClick="logFunction('max')" href="../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="phpfunction" onClick="logFunction('abs')" href="../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> - self::MAX_WEIGHT), <a class="phpfunction" onClick="logFunction('abs')" href="../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> + self::MAX_WEIGHT)) + 1;
<a name="l1582"><span class="linenum">1582</span></a>          <a class="var it26721" onMouseOver="hilite(26721)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a> = null;
<a name="l1583"><span class="linenum">1583</span></a>          foreach (<a class="var it26717" onMouseOver="hilite(26717)" onMouseOut="lolite()" onClick="logVariable('spareweights')" href="../_variables/spareweights.html">$spareweights</a> as <a class="var it26722" onMouseOver="hilite(26722)" onMouseOut="lolite()" onClick="logVariable('spareweight')" href="../_variables/spareweight.html">$spareweight</a>) {
<a name="l1584"><span class="linenum">1584</span></a>              if (<a class="phpfunction" onClick="logFunction('abs')" href="../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> - <a class="var it26722" onMouseOver="hilite(26722)" onMouseOut="lolite()" onClick="logVariable('spareweight')" href="../_variables/spareweight.html">$spareweight</a>) &lt; <a class="var it26720" onMouseOver="hilite(26720)" onMouseOut="lolite()" onClick="logVariable('bestdistance')" href="../_variables/bestdistance.html">$bestdistance</a>) {
<a name="l1585"><span class="linenum">1585</span></a>                  <a class="var it26720" onMouseOver="hilite(26720)" onMouseOut="lolite()" onClick="logVariable('bestdistance')" href="../_variables/bestdistance.html">$bestdistance</a> = <a class="phpfunction" onClick="logFunction('abs')" href="../_functions/abs.html" onMouseOver="phpfuncPopup(event,'abs')">abs</a>(<a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> - <a class="var it26722" onMouseOver="hilite(26722)" onMouseOut="lolite()" onClick="logVariable('spareweight')" href="../_variables/spareweight.html">$spareweight</a>);
<a name="l1586"><span class="linenum">1586</span></a>                  <a class="var it26721" onMouseOver="hilite(26721)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a> = <a class="var it26722" onMouseOver="hilite(26722)" onMouseOut="lolite()" onClick="logVariable('spareweight')" href="../_variables/spareweight.html">$spareweight</a>;
<a name="l1587"><span class="linenum">1587</span></a>              }
<a name="l1588"><span class="linenum">1588</span></a>          }
<a name="l1589"><span class="linenum">1589</span></a>  
<a name="l1590"><span class="linenum">1590</span></a>  <span class="comment">        // If there is no gap, we have to go outside -self::MAX_WEIGHT .. self::MAX_WEIGHT.</span>
<a name="l1591"><span class="linenum">1591</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it26721" onMouseOver="hilite(26721)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a>)) {
<a name="l1592"><span class="linenum">1592</span></a>              <a class="var it26721" onMouseOver="hilite(26721)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a> = self::MAX_WEIGHT + 1;
<a name="l1593"><span class="linenum">1593</span></a>              while (!empty(<a class="var it26718" onMouseOver="hilite(26718)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it26721" onMouseOver="hilite(26721)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a>])) {
<a name="l1594"><span class="linenum">1594</span></a>                  <a class="var it26721" onMouseOver="hilite(26721)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a>++;
<a name="l1595"><span class="linenum">1595</span></a>              }
<a name="l1596"><span class="linenum">1596</span></a>          }
<a name="l1597"><span class="linenum">1597</span></a>  
<a name="l1598"><span class="linenum">1598</span></a>  <span class="comment">        // Now we know the gap we are aiming for, so move all the blocks along.</span>
<a name="l1599"><span class="linenum">1599</span></a>          if (<a class="var it26721" onMouseOver="hilite(26721)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a> &lt; <a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>) {
<a name="l1600"><span class="linenum">1600</span></a>              <a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> = <a class="phpfunction" onClick="logFunction('floor')" href="../_functions/floor.html" onMouseOver="phpfuncPopup(event,'floor')">floor</a>(<a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>);
<a name="l1601"><span class="linenum">1601</span></a>              for (<a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> = <a class="var it26721" onMouseOver="hilite(26721)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a> + 1; <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> &lt;= <a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>; <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>++) {
<a name="l1602"><span class="linenum">1602</span></a>                  if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>, <a class="var it26718" onMouseOver="hilite(26718)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>)) {
<a name="l1603"><span class="linenum">1603</span></a>                      foreach (<a class="var it26718" onMouseOver="hilite(26718)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>] as <a class="var it26723" onMouseOver="hilite(26723)" onMouseOut="lolite()" onClick="logVariable('biid')" href="../_variables/biid.html">$biid</a>) {
<a name="l1604"><span class="linenum">1604</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('reposition_block')" href="../_functions/reposition_block.html" onMouseOver="funcPopup(event,'reposition_block')">reposition_block</a>(<a class="var it26723" onMouseOver="hilite(26723)" onMouseOut="lolite()" onClick="logVariable('biid')" href="../_variables/biid.html">$biid</a>, <a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>, <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> - 1);
<a name="l1605"><span class="linenum">1605</span></a>                      }
<a name="l1606"><span class="linenum">1606</span></a>                  }
<a name="l1607"><span class="linenum">1607</span></a>              }
<a name="l1608"><span class="linenum">1608</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('reposition_block')" href="../_functions/reposition_block.html" onMouseOver="funcPopup(event,'reposition_block')">reposition_block</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id, <a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>, <a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>);
<a name="l1609"><span class="linenum">1609</span></a>          } else {
<a name="l1610"><span class="linenum">1610</span></a>              <a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a> = <a class="phpfunction" onClick="logFunction('ceil')" href="../_functions/ceil.html" onMouseOver="phpfuncPopup(event,'ceil')">ceil</a>(<a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>);
<a name="l1611"><span class="linenum">1611</span></a>              for (<a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> = <a class="var it26721" onMouseOver="hilite(26721)" onMouseOut="lolite()" onClick="logVariable('bestgap')" href="../_variables/bestgap.html">$bestgap</a> - 1; <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> &gt;= <a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>; <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>--) {
<a name="l1612"><span class="linenum">1612</span></a>                  if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>, <a class="var it26718" onMouseOver="hilite(26718)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>)) {
<a name="l1613"><span class="linenum">1613</span></a>                      foreach (<a class="var it26718" onMouseOver="hilite(26718)" onMouseOut="lolite()" onClick="logVariable('usedweights')" href="../_variables/usedweights.html">$usedweights</a>[<a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a>] as <a class="var it26723" onMouseOver="hilite(26723)" onMouseOut="lolite()" onClick="logVariable('biid')" href="../_variables/biid.html">$biid</a>) {
<a name="l1614"><span class="linenum">1614</span></a>                          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('reposition_block')" href="../_functions/reposition_block.html" onMouseOver="funcPopup(event,'reposition_block')">reposition_block</a>(<a class="var it26723" onMouseOver="hilite(26723)" onMouseOut="lolite()" onClick="logVariable('biid')" href="../_variables/biid.html">$biid</a>, <a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>, <a class="var it5702" onMouseOver="hilite(5702)" onMouseOut="lolite()" onClick="logVariable('weight')" href="../_variables/weight.html">$weight</a> + 1);
<a name="l1615"><span class="linenum">1615</span></a>                      }
<a name="l1616"><span class="linenum">1616</span></a>                  }
<a name="l1617"><span class="linenum">1617</span></a>              }
<a name="l1618"><span class="linenum">1618</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('reposition_block')" href="../_functions/reposition_block.html" onMouseOver="funcPopup(event,'reposition_block')">reposition_block</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('instance')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>-&gt;id, <a class="var it26688" onMouseOver="hilite(26688)" onMouseOut="lolite()" onClick="logVariable('newregion')" href="../_variables/newregion.html">$newregion</a>, <a class="var it26689" onMouseOver="hilite(26689)" onMouseOut="lolite()" onClick="logVariable('newweight')" href="../_variables/newweight.html">$newweight</a>);
<a name="l1619"><span class="linenum">1619</span></a>          }
<a name="l1620"><span class="linenum">1620</span></a>  
<a name="l1621"><span class="linenum">1621</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_moveid');
<a name="l1622"><span class="linenum">1622</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_newregion');
<a name="l1623"><span class="linenum">1623</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('ensure_param_not_in_url')" href="../_functions/ensure_param_not_in_url.html" onMouseOver="funcPopup(event,'ensure_param_not_in_url')">ensure_param_not_in_url</a>('bui_newweight');
<a name="l1624"><span class="linenum">1624</span></a>          return true;
<a name="l1625"><span class="linenum">1625</span></a>      }
<a name="l1626"><span class="linenum">1626</span></a>  
<a name="l1627"><span class="linenum">1627</span></a>      <span class="comment">/**</span>
<a name="l1628"><span class="linenum">1628</span></a>  <span class="comment">     * Turns the display of normal blocks either on or off.</span>
<a name="l1629"><span class="linenum">1629</span></a>  <span class="comment">     *</span>
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment">     * @param bool $setting</span>
<a name="l1631"><span class="linenum">1631</span></a>  <span class="comment">     */</span>
<a name="l1632"><span class="linenum">1632</span></a>      public function <a class="function" onClick="logFunction('show_only_fake_blocks')" href="../_functions/show_only_fake_blocks.html" onMouseOver="funcPopup(event,'show_only_fake_blocks')">show_only_fake_blocks</a>(<a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a> = true) {
<a name="l1633"><span class="linenum">1633</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('fakeblocksonly')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../_variables/fakeblocksonly.html">fakeblocksonly</a> = <a class="var it564" onMouseOver="hilite(564)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../_variables/setting.html">$setting</a>;
<a name="l1634"><span class="linenum">1634</span></a>      }
<a name="l1635"><span class="linenum">1635</span></a>  }
<a name="l1636"><span class="linenum">1636</span></a>  
<a name="l1637"><span class="linenum">1637</span></a>  <span class="comment">/// Helper functions for working with block classes ============================</span>
<a name="l1638"><span class="linenum">1638</span></a>  
<a name="l1639"><span class="linenum">1639</span></a>  <span class="comment">/**</span>
<a name="l1640"><span class="linenum">1640</span></a>  <span class="comment"> * Call a class method (one that does not require a block instance) on a block class.</span>
<a name="l1641"><span class="linenum">1641</span></a>  <span class="comment"> *</span>
<a name="l1642"><span class="linenum">1642</span></a>  <span class="comment"> * @param string $blockname the name of the block.</span>
<a name="l1643"><span class="linenum">1643</span></a>  <span class="comment"> * @param string $method the method name.</span>
<a name="l1644"><span class="linenum">1644</span></a>  <span class="comment"> * @param array $param parameters to pass to the method.</span>
<a name="l1645"><span class="linenum">1645</span></a>  <span class="comment"> * @return mixed whatever the method returns.</span>
<a name="l1646"><span class="linenum">1646</span></a>  <span class="comment"> */</span>
<a name="l1647"><span class="linenum">1647</span></a>  function <a class="function" onClick="logFunction('block_method_result')" href="../_functions/block_method_result.html" onMouseOver="funcPopup(event,'block_method_result')">block_method_result</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>, <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a> = NULL) {
<a name="l1648"><span class="linenum">1648</span></a>      if(!<a class="function" onClick="logFunction('block_load_class')" href="../_functions/block_load_class.html" onMouseOver="funcPopup(event,'block_load_class')">block_load_class</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>)) {
<a name="l1649"><span class="linenum">1649</span></a>          return NULL;
<a name="l1650"><span class="linenum">1650</span></a>      }
<a name="l1651"><span class="linenum">1651</span></a>      return <a class="phpfunction" onClick="logFunction('call_user_func')" href="../_functions/call_user_func.html" onMouseOver="phpfuncPopup(event,'call_user_func')">call_user_func</a>(array('block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it625" onMouseOver="hilite(625)" onMouseOut="lolite()" onClick="logVariable('method')" href="../_variables/method.html">$method</a>), <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>);
<a name="l1652"><span class="linenum">1652</span></a>  }
<a name="l1653"><span class="linenum">1653</span></a>  
<a name="l1654"><span class="linenum">1654</span></a>  <span class="comment">/**</span>
<a name="l1655"><span class="linenum">1655</span></a>  <span class="comment"> * Creates a new instance of the specified block class.</span>
<a name="l1656"><span class="linenum">1656</span></a>  <span class="comment"> *</span>
<a name="l1657"><span class="linenum">1657</span></a>  <span class="comment"> * @param string $blockname the name of the block.</span>
<a name="l1658"><span class="linenum">1658</span></a>  <span class="comment"> * @param $instance block_instances DB table row (optional).</span>
<a name="l1659"><span class="linenum">1659</span></a>  <span class="comment"> * @param moodle_page $page the page this block is appearing on.</span>
<a name="l1660"><span class="linenum">1660</span></a>  <span class="comment"> * @return block_base the requested block instance.</span>
<a name="l1661"><span class="linenum">1661</span></a>  <span class="comment"> */</span>
<a name="l1662"><span class="linenum">1662</span></a>  function <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>, <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> = NULL, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = NULL) {
<a name="l1663"><span class="linenum">1663</span></a>      if(!<a class="function" onClick="logFunction('block_load_class')" href="../_functions/block_load_class.html" onMouseOver="funcPopup(event,'block_load_class')">block_load_class</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>)) {
<a name="l1664"><span class="linenum">1664</span></a>          return false;
<a name="l1665"><span class="linenum">1665</span></a>      }
<a name="l1666"><span class="linenum">1666</span></a>      <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>;
<a name="l1667"><span class="linenum">1667</span></a>      <a class="var it7133" onMouseOver="hilite(7133)" onMouseOut="lolite()" onClick="logVariable('retval')" href="../_variables/retval.html">$retval</a> = new <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>;
<a name="l1668"><span class="linenum">1668</span></a>      if(<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a> !== NULL) {
<a name="l1669"><span class="linenum">1669</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>)) {
<a name="l1670"><span class="linenum">1670</span></a>              global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l1671"><span class="linenum">1671</span></a>              <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l1672"><span class="linenum">1672</span></a>          }
<a name="l1673"><span class="linenum">1673</span></a>          <a class="var it7133" onMouseOver="hilite(7133)" onMouseOut="lolite()" onClick="logVariable('retval')" href="../_variables/retval.html">$retval</a>-&gt;<a class="function" onClick="logFunction('_load_instance')" href="../_functions/_load_instance.html" onMouseOver="funcPopup(event,'_load_instance')">_load_instance</a>(<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>);
<a name="l1674"><span class="linenum">1674</span></a>      }
<a name="l1675"><span class="linenum">1675</span></a>      return <a class="var it7133" onMouseOver="hilite(7133)" onMouseOut="lolite()" onClick="logVariable('retval')" href="../_variables/retval.html">$retval</a>;
<a name="l1676"><span class="linenum">1676</span></a>  }
<a name="l1677"><span class="linenum">1677</span></a>  
<a name="l1678"><span class="linenum">1678</span></a>  <span class="comment">/**</span>
<a name="l1679"><span class="linenum">1679</span></a>  <span class="comment"> * Load the block class for a particular type of block.</span>
<a name="l1680"><span class="linenum">1680</span></a>  <span class="comment"> *</span>
<a name="l1681"><span class="linenum">1681</span></a>  <span class="comment"> * @param string $blockname the name of the block.</span>
<a name="l1682"><span class="linenum">1682</span></a>  <span class="comment"> * @return boolean success or failure.</span>
<a name="l1683"><span class="linenum">1683</span></a>  <span class="comment"> */</span>
<a name="l1684"><span class="linenum">1684</span></a>  function <a class="function" onClick="logFunction('block_load_class')" href="../_functions/block_load_class.html" onMouseOver="funcPopup(event,'block_load_class')">block_load_class</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>) {
<a name="l1685"><span class="linenum">1685</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l1686"><span class="linenum">1686</span></a>  
<a name="l1687"><span class="linenum">1687</span></a>      if(empty(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>)) {
<a name="l1688"><span class="linenum">1688</span></a>          return false;
<a name="l1689"><span class="linenum">1689</span></a>      }
<a name="l1690"><span class="linenum">1690</span></a>  
<a name="l1691"><span class="linenum">1691</span></a>      <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a> = 'block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>;
<a name="l1692"><span class="linenum">1692</span></a>  
<a name="l1693"><span class="linenum">1693</span></a>      if(<a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>)) {
<a name="l1694"><span class="linenum">1694</span></a>          return true;
<a name="l1695"><span class="linenum">1695</span></a>      }
<a name="l1696"><span class="linenum">1696</span></a>  
<a name="l1697"><span class="linenum">1697</span></a>      <a class="var it26724" onMouseOver="hilite(26724)" onMouseOut="lolite()" onClick="logVariable('blockpath')" href="../_variables/blockpath.html">$blockpath</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'/blocks/'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'/block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../_variables/blockname.html">$blockname</a>.'.php';
<a name="l1698"><span class="linenum">1698</span></a>  
<a name="l1699"><span class="linenum">1699</span></a>      if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it26724" onMouseOver="hilite(26724)" onMouseOut="lolite()" onClick="logVariable('blockpath')" href="../_variables/blockpath.html">$blockpath</a>)) {
<a name="l1700"><span class="linenum">1700</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../blocks/moodleblock.class.php.html">/blocks/moodleblock.class.php</a>');
<a name="l1701"><span class="linenum">1701</span></a>          include_once(<a class="var it26724" onMouseOver="hilite(26724)" onMouseOut="lolite()" onClick="logVariable('blockpath')" href="../_variables/blockpath.html">$blockpath</a>);
<a name="l1702"><span class="linenum">1702</span></a>      }else{
<a name="l1703"><span class="linenum">1703</span></a>  <span class="comment">        //debugging(&quot;$blockname code does not exist in $blockpath&quot;, DEBUG_DEVELOPER);</span>
<a name="l1704"><span class="linenum">1704</span></a>          return false;
<a name="l1705"><span class="linenum">1705</span></a>      }
<a name="l1706"><span class="linenum">1706</span></a>  
<a name="l1707"><span class="linenum">1707</span></a>      return <a class="phpfunction" onClick="logFunction('class_exists')" href="../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../_variables/classname.html">$classname</a>);
<a name="l1708"><span class="linenum">1708</span></a>  }
<a name="l1709"><span class="linenum">1709</span></a>  
<a name="l1710"><span class="linenum">1710</span></a>  <span class="comment">/**</span>
<a name="l1711"><span class="linenum">1711</span></a>  <span class="comment"> * Given a specific page type, return all the page type patterns that might</span>
<a name="l1712"><span class="linenum">1712</span></a>  <span class="comment"> * match it.</span>
<a name="l1713"><span class="linenum">1713</span></a>  <span class="comment"> *</span>
<a name="l1714"><span class="linenum">1714</span></a>  <span class="comment"> * @param string $pagetype for example 'course-view-weeks' or 'mod-quiz-view'.</span>
<a name="l1715"><span class="linenum">1715</span></a>  <span class="comment"> * @return array an array of all the page type patterns that might match this page type.</span>
<a name="l1716"><span class="linenum">1716</span></a>  <span class="comment"> */</span>
<a name="l1717"><span class="linenum">1717</span></a>  function <a class="function" onClick="logFunction('matching_page_type_patterns')" href="../_functions/matching_page_type_patterns.html" onMouseOver="funcPopup(event,'matching_page_type_patterns')">matching_page_type_patterns</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>) {
<a name="l1718"><span class="linenum">1718</span></a>      <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = array(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1719"><span class="linenum">1719</span></a>      <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1720"><span class="linenum">1720</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>) == 3 &amp;&amp; <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[0] == 'mod') {
<a name="l1721"><span class="linenum">1721</span></a>          if (<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[2] == 'view') {
<a name="l1722"><span class="linenum">1722</span></a>              <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>[] = 'mod-*-view';
<a name="l1723"><span class="linenum">1723</span></a>          } else if (<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[2] == 'index') {
<a name="l1724"><span class="linenum">1724</span></a>              <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>[] = 'mod-*-index';
<a name="l1725"><span class="linenum">1725</span></a>          }
<a name="l1726"><span class="linenum">1726</span></a>      }
<a name="l1727"><span class="linenum">1727</span></a>      while (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>) &gt; 0) {
<a name="l1728"><span class="linenum">1728</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>[] = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('-', <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>) . '-*';
<a name="l1729"><span class="linenum">1729</span></a>          <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>);
<a name="l1730"><span class="linenum">1730</span></a>      }
<a name="l1731"><span class="linenum">1731</span></a>      <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>[] = '*';
<a name="l1732"><span class="linenum">1732</span></a>      return <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>;
<a name="l1733"><span class="linenum">1733</span></a>  }
<a name="l1734"><span class="linenum">1734</span></a>  
<a name="l1735"><span class="linenum">1735</span></a>  <span class="comment">/**</span>
<a name="l1736"><span class="linenum">1736</span></a>  <span class="comment"> * Give an specific pattern, return all the page type patterns that would also match it.</span>
<a name="l1737"><span class="linenum">1737</span></a>  <span class="comment"> *</span>
<a name="l1738"><span class="linenum">1738</span></a>  <span class="comment"> * @param  string $pattern the pattern, e.g. 'mod-forum-*' or 'mod-quiz-view'.</span>
<a name="l1739"><span class="linenum">1739</span></a>  <span class="comment"> * @return array of all the page type patterns matching.</span>
<a name="l1740"><span class="linenum">1740</span></a>  <span class="comment"> */</span>
<a name="l1741"><span class="linenum">1741</span></a>  function <a class="function" onClick="logFunction('matching_page_type_patterns_from_pattern')" href="../_functions/matching_page_type_patterns_from_pattern.html" onMouseOver="funcPopup(event,'matching_page_type_patterns_from_pattern')">matching_page_type_patterns_from_pattern</a>(<a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>) {
<a name="l1742"><span class="linenum">1742</span></a>      <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = array(<a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>);
<a name="l1743"><span class="linenum">1743</span></a>      if (<a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a> === '*') {
<a name="l1744"><span class="linenum">1744</span></a>          return <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>;
<a name="l1745"><span class="linenum">1745</span></a>      }
<a name="l1746"><span class="linenum">1746</span></a>  
<a name="l1747"><span class="linenum">1747</span></a>  <span class="comment">    // Only keep the part before the star because we will append -* to all the bits.</span>
<a name="l1748"><span class="linenum">1748</span></a>      <a class="var it26725" onMouseOver="hilite(26725)" onMouseOut="lolite()" onClick="logVariable('star')" href="../_variables/star.html">$star</a> = <a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>, '-*');
<a name="l1749"><span class="linenum">1749</span></a>      if (<a class="var it26725" onMouseOver="hilite(26725)" onMouseOut="lolite()" onClick="logVariable('star')" href="../_variables/star.html">$star</a> !== false) {
<a name="l1750"><span class="linenum">1750</span></a>          <a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>, 0, <a class="var it26725" onMouseOver="hilite(26725)" onMouseOut="lolite()" onClick="logVariable('star')" href="../_variables/star.html">$star</a>);
<a name="l1751"><span class="linenum">1751</span></a>      }
<a name="l1752"><span class="linenum">1752</span></a>  
<a name="l1753"><span class="linenum">1753</span></a>      <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>, <a class="function" onClick="logFunction('matching_page_type_patterns')" href="../_functions/matching_page_type_patterns.html" onMouseOver="funcPopup(event,'matching_page_type_patterns')">matching_page_type_patterns</a>(<a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>));
<a name="l1754"><span class="linenum">1754</span></a>      <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = <a class="phpfunction" onClick="logFunction('array_unique')" href="../_functions/array_unique.html" onMouseOver="phpfuncPopup(event,'array_unique')">array_unique</a>(<a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>);
<a name="l1755"><span class="linenum">1755</span></a>  
<a name="l1756"><span class="linenum">1756</span></a>      return <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>;
<a name="l1757"><span class="linenum">1757</span></a>  }
<a name="l1758"><span class="linenum">1758</span></a>  
<a name="l1759"><span class="linenum">1759</span></a>  <span class="comment">/**</span>
<a name="l1760"><span class="linenum">1760</span></a>  <span class="comment"> * Given a specific page type, parent context and currect context, return all the page type patterns</span>
<a name="l1761"><span class="linenum">1761</span></a>  <span class="comment"> * that might be used by this block.</span>
<a name="l1762"><span class="linenum">1762</span></a>  <span class="comment"> *</span>
<a name="l1763"><span class="linenum">1763</span></a>  <span class="comment"> * @param string $pagetype for example 'course-view-weeks' or 'mod-quiz-view'.</span>
<a name="l1764"><span class="linenum">1764</span></a>  <span class="comment"> * @param stdClass $parentcontext Block's parent context</span>
<a name="l1765"><span class="linenum">1765</span></a>  <span class="comment"> * @param stdClass $currentcontext Current context of block</span>
<a name="l1766"><span class="linenum">1766</span></a>  <span class="comment"> * @return array an array of all the page type patterns that might match this page type.</span>
<a name="l1767"><span class="linenum">1767</span></a>  <span class="comment"> */</span>
<a name="l1768"><span class="linenum">1768</span></a>  function <a class="function" onClick="logFunction('generate_page_type_patterns')" href="../_functions/generate_page_type_patterns.html" onMouseOver="funcPopup(event,'generate_page_type_patterns')">generate_page_type_patterns</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = null, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a> = null) {
<a name="l1769"><span class="linenum">1769</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>; <span class="comment">// Required for includes bellow.</span>
<a name="l1770"><span class="linenum">1770</span></a>  
<a name="l1771"><span class="linenum">1771</span></a>      <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1772"><span class="linenum">1772</span></a>  
<a name="l1773"><span class="linenum">1773</span></a>      <a class="var it26726" onMouseOver="hilite(26726)" onMouseOut="lolite()" onClick="logVariable('core')" href="../_variables/core.html">$core</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_core_subsystems')" href="../_functions/get_core_subsystems.html" onMouseOver="funcPopup(event,'get_core_subsystems')">get_core_subsystems</a>();
<a name="l1774"><span class="linenum">1774</span></a>      <a class="var it1127" onMouseOver="hilite(1127)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_types')" href="../_functions/get_plugin_types.html" onMouseOver="funcPopup(event,'get_plugin_types')">get_plugin_types</a>();
<a name="l1775"><span class="linenum">1775</span></a>  
<a name="l1776"><span class="linenum">1776</span></a>  <span class="comment">    //progressively strip pieces off the page type looking for a match</span>
<a name="l1777"><span class="linenum">1777</span></a>      <a class="var it23719" onMouseOver="hilite(23719)" onMouseOut="lolite()" onClick="logVariable('componentarray')" href="../_variables/componentarray.html">$componentarray</a> = null;
<a name="l1778"><span class="linenum">1778</span></a>      for (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>); <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &gt; 0; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>--) {
<a name="l1779"><span class="linenum">1779</span></a>          <a class="var it26727" onMouseOver="hilite(26727)" onMouseOut="lolite()" onClick="logVariable('possiblecomponentarray')" href="../_variables/possiblecomponentarray.html">$possiblecomponentarray</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>, 0, <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>);
<a name="l1780"><span class="linenum">1780</span></a>          <a class="var it26728" onMouseOver="hilite(26728)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('', <a class="var it26727" onMouseOver="hilite(26727)" onMouseOut="lolite()" onClick="logVariable('possiblecomponentarray')" href="../_variables/possiblecomponentarray.html">$possiblecomponentarray</a>);
<a name="l1781"><span class="linenum">1781</span></a>  
<a name="l1782"><span class="linenum">1782</span></a>  <span class="comment">        // Check to see if the component is a core component</span>
<a name="l1783"><span class="linenum">1783</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it26728" onMouseOver="hilite(26728)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>, <a class="var it26726" onMouseOver="hilite(26726)" onMouseOut="lolite()" onClick="logVariable('core')" href="../_variables/core.html">$core</a>) &amp;&amp; !empty(<a class="var it26726" onMouseOver="hilite(26726)" onMouseOut="lolite()" onClick="logVariable('core')" href="../_variables/core.html">$core</a>[<a class="var it26728" onMouseOver="hilite(26728)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>])) {
<a name="l1784"><span class="linenum">1784</span></a>              <a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a> = <a class="var it26726" onMouseOver="hilite(26726)" onMouseOut="lolite()" onClick="logVariable('core')" href="../_variables/core.html">$core</a>[<a class="var it26728" onMouseOver="hilite(26728)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>].'/lib.php';
<a name="l1785"><span class="linenum">1785</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>)) {
<a name="l1786"><span class="linenum">1786</span></a>                  require_once(<a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>);
<a name="l1787"><span class="linenum">1787</span></a>                  <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it26728" onMouseOver="hilite(26728)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>.'_page_type_list';
<a name="l1788"><span class="linenum">1788</span></a>                  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)) {
<a name="l1789"><span class="linenum">1789</span></a>                      if (<a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>)) {
<a name="l1790"><span class="linenum">1790</span></a>                          break;
<a name="l1791"><span class="linenum">1791</span></a>                      }
<a name="l1792"><span class="linenum">1792</span></a>                  }
<a name="l1793"><span class="linenum">1793</span></a>              }
<a name="l1794"><span class="linenum">1794</span></a>          }
<a name="l1795"><span class="linenum">1795</span></a>  
<a name="l1796"><span class="linenum">1796</span></a>  <span class="comment">        //check the plugin directory and look for a callback</span>
<a name="l1797"><span class="linenum">1797</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it26728" onMouseOver="hilite(26728)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>, <a class="var it1127" onMouseOver="hilite(1127)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>) &amp;&amp; !empty(<a class="var it1127" onMouseOver="hilite(1127)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>[<a class="var it26728" onMouseOver="hilite(26728)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>])) {
<a name="l1798"><span class="linenum">1798</span></a>  
<a name="l1799"><span class="linenum">1799</span></a>  <span class="comment">            //We've found a plugin type. Look for a plugin name by getting the next section of page type</span>
<a name="l1800"><span class="linenum">1800</span></a>              if (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>) &gt; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>) {
<a name="l1801"><span class="linenum">1801</span></a>                  <a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a> = <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>];
<a name="l1802"><span class="linenum">1802</span></a>                  <a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../_variables/directory.html">$directory</a> = <a class="class" onClick="logClass('core_component')" href="../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_plugin_directory')" href="../_functions/get_plugin_directory.html" onMouseOver="funcPopup(event,'get_plugin_directory')">get_plugin_directory</a>(<a class="var it26728" onMouseOver="hilite(26728)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>, <a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>);
<a name="l1803"><span class="linenum">1803</span></a>                  if (!empty(<a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../_variables/directory.html">$directory</a>)){
<a name="l1804"><span class="linenum">1804</span></a>                      <a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a> = <a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../_variables/directory.html">$directory</a>.'/lib.php';
<a name="l1805"><span class="linenum">1805</span></a>                      if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>)) {
<a name="l1806"><span class="linenum">1806</span></a>                          require_once(<a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>);
<a name="l1807"><span class="linenum">1807</span></a>                          <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it26728" onMouseOver="hilite(26728)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>.'_'.<a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>.'_page_type_list';
<a name="l1808"><span class="linenum">1808</span></a>                          if (!<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)) {
<a name="l1809"><span class="linenum">1809</span></a>                              <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it1844" onMouseOver="hilite(1844)" onMouseOut="lolite()" onClick="logVariable('pluginname')" href="../_variables/pluginname.html">$pluginname</a>.'_page_type_list';
<a name="l1810"><span class="linenum">1810</span></a>                          }
<a name="l1811"><span class="linenum">1811</span></a>                          if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)) {
<a name="l1812"><span class="linenum">1812</span></a>                              if (<a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>)) {
<a name="l1813"><span class="linenum">1813</span></a>                                  break;
<a name="l1814"><span class="linenum">1814</span></a>                              }
<a name="l1815"><span class="linenum">1815</span></a>                          }
<a name="l1816"><span class="linenum">1816</span></a>                      }
<a name="l1817"><span class="linenum">1817</span></a>                  }
<a name="l1818"><span class="linenum">1818</span></a>              }
<a name="l1819"><span class="linenum">1819</span></a>  
<a name="l1820"><span class="linenum">1820</span></a>  <span class="comment">            //we'll only get to here if we still don't have any patterns</span>
<a name="l1821"><span class="linenum">1821</span></a>  <span class="comment">            //the plugin type may have a callback</span>
<a name="l1822"><span class="linenum">1822</span></a>              <a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../_variables/directory.html">$directory</a> = <a class="var it1127" onMouseOver="hilite(1127)" onMouseOut="lolite()" onClick="logVariable('plugins')" href="../_variables/plugins.html">$plugins</a>[<a class="var it26728" onMouseOver="hilite(26728)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>];
<a name="l1823"><span class="linenum">1823</span></a>              <a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a> = <a class="var it3461" onMouseOver="hilite(3461)" onMouseOut="lolite()" onClick="logVariable('directory')" href="../_variables/directory.html">$directory</a>.'/lib.php';
<a name="l1824"><span class="linenum">1824</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>)) {
<a name="l1825"><span class="linenum">1825</span></a>                  require_once(<a class="var it1118" onMouseOver="hilite(1118)" onMouseOut="lolite()" onClick="logVariable('libfile')" href="../_variables/libfile.html">$libfile</a>);
<a name="l1826"><span class="linenum">1826</span></a>                  <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a> = <a class="var it26728" onMouseOver="hilite(26728)" onMouseOut="lolite()" onClick="logVariable('possiblecomponent')" href="../_variables/possiblecomponent.html">$possiblecomponent</a>.'_page_type_list';
<a name="l1827"><span class="linenum">1827</span></a>                  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>)) {
<a name="l1828"><span class="linenum">1828</span></a>                      if (<a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = <a class="var it412" onMouseOver="hilite(412)" onMouseOut="lolite()" onClick="logVariable('function')" href="../_variables/function.html">$function</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>)) {
<a name="l1829"><span class="linenum">1829</span></a>                          break;
<a name="l1830"><span class="linenum">1830</span></a>                      }
<a name="l1831"><span class="linenum">1831</span></a>                  }
<a name="l1832"><span class="linenum">1832</span></a>              }
<a name="l1833"><span class="linenum">1833</span></a>          }
<a name="l1834"><span class="linenum">1834</span></a>      }
<a name="l1835"><span class="linenum">1835</span></a>  
<a name="l1836"><span class="linenum">1836</span></a>      if (empty(<a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>)) {
<a name="l1837"><span class="linenum">1837</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = <a class="function" onClick="logFunction('default_page_type_list')" href="../_functions/default_page_type_list.html" onMouseOver="funcPopup(event,'default_page_type_list')">default_page_type_list</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>);
<a name="l1838"><span class="linenum">1838</span></a>      }
<a name="l1839"><span class="linenum">1839</span></a>  
<a name="l1840"><span class="linenum">1840</span></a>  <span class="comment">    // Ensure that the * pattern is always available if editing block 'at distance', so</span>
<a name="l1841"><span class="linenum">1841</span></a>  <span class="comment">    // we always can 'bring back' it to the original context. MDL-30340</span>
<a name="l1842"><span class="linenum">1842</span></a>      if ((!isset(<a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>) or !isset(<a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>) or <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>-&gt;<a onClick="logVariable('id')" class="var it40966" onMouseOver="hilite(40966)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>-&gt;<a onClick="logVariable('id')" class="var it39842" onMouseOver="hilite(39842)" onMouseOut="lolite()" href="../_variables/id.html">id</a>) &amp;&amp; !isset(<a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>['*'])) {
<a name="l1843"><span class="linenum">1843</span></a>  <span class="comment">        // TODO: We could change the string here, showing its 'bring back' meaning</span>
<a name="l1844"><span class="linenum">1844</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>['*'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-x', 'pagetype');
<a name="l1845"><span class="linenum">1845</span></a>      }
<a name="l1846"><span class="linenum">1846</span></a>  
<a name="l1847"><span class="linenum">1847</span></a>      return <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>;
<a name="l1848"><span class="linenum">1848</span></a>  }
<a name="l1849"><span class="linenum">1849</span></a>  
<a name="l1850"><span class="linenum">1850</span></a>  <span class="comment">/**</span>
<a name="l1851"><span class="linenum">1851</span></a>  <span class="comment"> * Generates a default page type list when a more appropriate callback cannot be decided upon.</span>
<a name="l1852"><span class="linenum">1852</span></a>  <span class="comment"> *</span>
<a name="l1853"><span class="linenum">1853</span></a>  <span class="comment"> * @param string $pagetype</span>
<a name="l1854"><span class="linenum">1854</span></a>  <span class="comment"> * @param stdClass $parentcontext</span>
<a name="l1855"><span class="linenum">1855</span></a>  <span class="comment"> * @param stdClass $currentcontext</span>
<a name="l1856"><span class="linenum">1856</span></a>  <span class="comment"> * @return array</span>
<a name="l1857"><span class="linenum">1857</span></a>  <span class="comment"> */</span>
<a name="l1858"><span class="linenum">1858</span></a>  function <a class="function" onClick="logFunction('default_page_type_list')" href="../_functions/default_page_type_list.html" onMouseOver="funcPopup(event,'default_page_type_list')">default_page_type_list</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = null, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a> = null) {
<a name="l1859"><span class="linenum">1859</span></a>  <span class="comment">    // Generate page type patterns based on current page type if</span>
<a name="l1860"><span class="linenum">1860</span></a>  <span class="comment">    // callbacks haven't been defined</span>
<a name="l1861"><span class="linenum">1861</span></a>      <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = array(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a> =&gt; <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1862"><span class="linenum">1862</span></a>      <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1863"><span class="linenum">1863</span></a>      while (<a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>) &gt; 0) {
<a name="l1864"><span class="linenum">1864</span></a>          <a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('-', <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>) . '-*';
<a name="l1865"><span class="linenum">1865</span></a>          <a class="var it20359" onMouseOver="hilite(20359)" onMouseOut="lolite()" onClick="logVariable('pagetypestringname')" href="../_variables/pagetypestringname.html">$pagetypestringname</a> = 'page-'.<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('*', 'x', <a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>);
<a name="l1866"><span class="linenum">1866</span></a>  <span class="comment">        // guessing page type description</span>
<a name="l1867"><span class="linenum">1867</span></a>          if (<a class="function" onClick="logFunction('get_string_manager')" href="../_functions/get_string_manager.html" onMouseOver="funcPopup(event,'get_string_manager')">get_string_manager</a>()-&gt;<a class="function" onClick="logFunction('string_exists')" href="../_functions/string_exists.html" onMouseOver="funcPopup(event,'string_exists')">string_exists</a>(<a class="var it20359" onMouseOver="hilite(20359)" onMouseOut="lolite()" onClick="logVariable('pagetypestringname')" href="../_variables/pagetypestringname.html">$pagetypestringname</a>, 'pagetype')) {
<a name="l1868"><span class="linenum">1868</span></a>              <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>[<a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it20359" onMouseOver="hilite(20359)" onMouseOut="lolite()" onClick="logVariable('pagetypestringname')" href="../_variables/pagetypestringname.html">$pagetypestringname</a>, 'pagetype');
<a name="l1869"><span class="linenum">1869</span></a>          } else {
<a name="l1870"><span class="linenum">1870</span></a>              <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>[<a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>] = <a class="var it1861" onMouseOver="hilite(1861)" onMouseOut="lolite()" onClick="logVariable('pattern')" href="../_variables/pattern.html">$pattern</a>;
<a name="l1871"><span class="linenum">1871</span></a>          }
<a name="l1872"><span class="linenum">1872</span></a>          <a class="phpfunction" onClick="logFunction('array_pop')" href="../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>);
<a name="l1873"><span class="linenum">1873</span></a>      }
<a name="l1874"><span class="linenum">1874</span></a>      <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>['*'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-x', 'pagetype');
<a name="l1875"><span class="linenum">1875</span></a>      return <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>;
<a name="l1876"><span class="linenum">1876</span></a>  }
<a name="l1877"><span class="linenum">1877</span></a>  
<a name="l1878"><span class="linenum">1878</span></a>  <span class="comment">/**</span>
<a name="l1879"><span class="linenum">1879</span></a>  <span class="comment"> * Generates the page type list for the my moodle page</span>
<a name="l1880"><span class="linenum">1880</span></a>  <span class="comment"> *</span>
<a name="l1881"><span class="linenum">1881</span></a>  <span class="comment"> * @param string $pagetype</span>
<a name="l1882"><span class="linenum">1882</span></a>  <span class="comment"> * @param stdClass $parentcontext</span>
<a name="l1883"><span class="linenum">1883</span></a>  <span class="comment"> * @param stdClass $currentcontext</span>
<a name="l1884"><span class="linenum">1884</span></a>  <span class="comment"> * @return array</span>
<a name="l1885"><span class="linenum">1885</span></a>  <span class="comment"> */</span>
<a name="l1886"><span class="linenum">1886</span></a>  function <a class="function" onClick="logFunction('my_page_type_list')" href="../_functions/my_page_type_list.html" onMouseOver="funcPopup(event,'my_page_type_list')">my_page_type_list</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = null, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a> = null) {
<a name="l1887"><span class="linenum">1887</span></a>      return array('my-index' =&gt; <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-my-index', 'pagetype'));
<a name="l1888"><span class="linenum">1888</span></a>  }
<a name="l1889"><span class="linenum">1889</span></a>  
<a name="l1890"><span class="linenum">1890</span></a>  <span class="comment">/**</span>
<a name="l1891"><span class="linenum">1891</span></a>  <span class="comment"> * Generates the page type list for a module by either locating and using the modules callback</span>
<a name="l1892"><span class="linenum">1892</span></a>  <span class="comment"> * or by generating a default list.</span>
<a name="l1893"><span class="linenum">1893</span></a>  <span class="comment"> *</span>
<a name="l1894"><span class="linenum">1894</span></a>  <span class="comment"> * @param string $pagetype</span>
<a name="l1895"><span class="linenum">1895</span></a>  <span class="comment"> * @param stdClass $parentcontext</span>
<a name="l1896"><span class="linenum">1896</span></a>  <span class="comment"> * @param stdClass $currentcontext</span>
<a name="l1897"><span class="linenum">1897</span></a>  <span class="comment"> * @return array</span>
<a name="l1898"><span class="linenum">1898</span></a>  <span class="comment"> */</span>
<a name="l1899"><span class="linenum">1899</span></a>  function <a class="function" onClick="logFunction('mod_page_type_list')" href="../_functions/mod_page_type_list.html" onMouseOver="funcPopup(event,'mod_page_type_list')">mod_page_type_list</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a> = null, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a> = null) {
<a name="l1900"><span class="linenum">1900</span></a>      <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = plugin_page_type_list(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../_variables/parentcontext.html">$parentcontext</a>, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../_variables/currentcontext.html">$currentcontext</a>);
<a name="l1901"><span class="linenum">1901</span></a>      if (empty(<a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>)) {
<a name="l1902"><span class="linenum">1902</span></a>  <span class="comment">        // if modules don't have callbacks</span>
<a name="l1903"><span class="linenum">1903</span></a>  <span class="comment">        // generate two default page type patterns for modules only</span>
<a name="l1904"><span class="linenum">1904</span></a>          <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1905"><span class="linenum">1905</span></a>          <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a> = array(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a> =&gt; <a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../_variables/pagetype.html">$pagetype</a>);
<a name="l1906"><span class="linenum">1906</span></a>          if (<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[2] == 'view') {
<a name="l1907"><span class="linenum">1907</span></a>              <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>['mod-*-view'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-x-view', 'pagetype');
<a name="l1908"><span class="linenum">1908</span></a>          } else if (<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>[2] == 'index') {
<a name="l1909"><span class="linenum">1909</span></a>              <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>['mod-*-index'] = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-x-index', 'pagetype');
<a name="l1910"><span class="linenum">1910</span></a>          }
<a name="l1911"><span class="linenum">1911</span></a>      }
<a name="l1912"><span class="linenum">1912</span></a>      return <a class="var it3772" onMouseOver="hilite(3772)" onMouseOut="lolite()" onClick="logVariable('patterns')" href="../_variables/patterns.html">$patterns</a>;
<a name="l1913"><span class="linenum">1913</span></a>  }
<a name="l1914"><span class="linenum">1914</span></a>  <span class="comment">/// Functions update the blocks if required by the request parameters ==========</span>
<a name="l1915"><span class="linenum">1915</span></a>  
<a name="l1916"><span class="linenum">1916</span></a>  <span class="comment">/**</span>
<a name="l1917"><span class="linenum">1917</span></a>  <span class="comment"> * Return a {@link block_contents} representing the add a new block UI, if</span>
<a name="l1918"><span class="linenum">1918</span></a>  <span class="comment"> * this user is allowed to see it.</span>
<a name="l1919"><span class="linenum">1919</span></a>  <span class="comment"> *</span>
<a name="l1920"><span class="linenum">1920</span></a>  <span class="comment"> * @return block_contents an appropriate block_contents, or null if the user</span>
<a name="l1921"><span class="linenum">1921</span></a>  <span class="comment"> * cannot add any blocks here.</span>
<a name="l1922"><span class="linenum">1922</span></a>  <span class="comment"> */</span>
<a name="l1923"><span class="linenum">1923</span></a>  function <a class="function" onClick="logFunction('block_add_block_ui')" href="../_functions/block_add_block_ui.html" onMouseOver="funcPopup(event,'block_add_block_ui')">block_add_block_ui</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../_variables/output.html">$output</a>) {
<a name="l1924"><span class="linenum">1924</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1925"><span class="linenum">1925</span></a>      if (!<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('user_is_editing')" href="../_functions/user_is_editing.html" onMouseOver="funcPopup(event,'user_is_editing')">user_is_editing</a>() || !<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('user_can_edit_blocks')" href="../_functions/user_can_edit_blocks.html" onMouseOver="funcPopup(event,'user_can_edit_blocks')">user_can_edit_blocks</a>()) {
<a name="l1926"><span class="linenum">1926</span></a>          return null;
<a name="l1927"><span class="linenum">1927</span></a>      }
<a name="l1928"><span class="linenum">1928</span></a>  
<a name="l1929"><span class="linenum">1929</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a> = <span class="keyword">new </span><a class="class" onClick="logClass('block_contents')" href="../_classes/block_contents.html" onMouseOver="classPopup(event,'block_contents')">block_contents</a>();
<a name="l1930"><span class="linenum">1930</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('title')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../_variables/title.html">title</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addblock');
<a name="l1931"><span class="linenum">1931</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('add_class')" href="../_functions/add_class.html" onMouseOver="funcPopup(event,'add_class')">add_class</a>('block_adminblock');
<a name="l1932"><span class="linenum">1932</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('attributes')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../_variables/attributes.html">attributes</a>['data-block'] = 'adminblock';
<a name="l1933"><span class="linenum">1933</span></a>  
<a name="l1934"><span class="linenum">1934</span></a>      <a class="var it26729" onMouseOver="hilite(26729)" onMouseOut="lolite()" onClick="logVariable('missingblocks')" href="../_variables/missingblocks.html">$missingblocks</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('get_addable_blocks')" href="../_functions/get_addable_blocks.html" onMouseOver="funcPopup(event,'get_addable_blocks')">get_addable_blocks</a>();
<a name="l1935"><span class="linenum">1935</span></a>      if (empty(<a class="var it26729" onMouseOver="hilite(26729)" onMouseOut="lolite()" onClick="logVariable('missingblocks')" href="../_variables/missingblocks.html">$missingblocks</a>)) {
<a name="l1936"><span class="linenum">1936</span></a>          <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('content')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../_variables/content.html">content</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('noblockstoaddhere');
<a name="l1937"><span class="linenum">1937</span></a>          return <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>;
<a name="l1938"><span class="linenum">1938</span></a>      }
<a name="l1939"><span class="linenum">1939</span></a>  
<a name="l1940"><span class="linenum">1940</span></a>      <a class="var it4415" onMouseOver="hilite(4415)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a> = array();
<a name="l1941"><span class="linenum">1941</span></a>      foreach (<a class="var it26729" onMouseOver="hilite(26729)" onMouseOut="lolite()" onClick="logVariable('missingblocks')" href="../_variables/missingblocks.html">$missingblocks</a> as <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>) {
<a name="l1942"><span class="linenum">1942</span></a>          <a class="var it26692" onMouseOver="hilite(26692)" onMouseOut="lolite()" onClick="logVariable('blockobject')" href="../_variables/blockobject.html">$blockobject</a> = <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>);
<a name="l1943"><span class="linenum">1943</span></a>          if (<a class="var it26692" onMouseOver="hilite(26692)" onMouseOut="lolite()" onClick="logVariable('blockobject')" href="../_variables/blockobject.html">$blockobject</a> !== false &amp;&amp; <a class="var it26692" onMouseOver="hilite(26692)" onMouseOut="lolite()" onClick="logVariable('blockobject')" href="../_variables/blockobject.html">$blockobject</a>-&gt;<a class="function" onClick="logFunction('user_can_addto')" href="../_functions/user_can_addto.html" onMouseOver="funcPopup(event,'user_can_addto')">user_can_addto</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>)) {
<a name="l1944"><span class="linenum">1944</span></a>              <a class="var it4415" onMouseOver="hilite(4415)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>[<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a onClick="logVariable('name')" class="var it39742" onMouseOver="hilite(39742)" onMouseOut="lolite()" href="../_variables/name.html">name</a>] = <a class="var it26692" onMouseOver="hilite(26692)" onMouseOut="lolite()" onClick="logVariable('blockobject')" href="../_variables/blockobject.html">$blockobject</a>-&gt;<a class="function" onClick="logFunction('get_title')" href="../_functions/get_title.html" onMouseOver="funcPopup(event,'get_title')">get_title</a>();
<a name="l1945"><span class="linenum">1945</span></a>          }
<a name="l1946"><span class="linenum">1946</span></a>      }
<a name="l1947"><span class="linenum">1947</span></a>      <a class="class" onClick="logClass('core_collator')" href="../_classes/core_collator.html" onMouseOver="classPopup(event,'core_collator')">core_collator</a>::<a class="phpfunction" onClick="logFunction('asort')" href="../_functions/asort.html" onMouseOver="phpfuncPopup(event,'asort')">asort</a>(<a class="var it4415" onMouseOver="hilite(4415)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>);
<a name="l1948"><span class="linenum">1948</span></a>  
<a name="l1949"><span class="linenum">1949</span></a>      <a class="var it10778" onMouseOver="hilite(10778)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('url')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../_variables/url.html">url</a>, array('sesskey'=&gt;<a class="function" onClick="logFunction('sesskey')" href="../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>()));
<a name="l1950"><span class="linenum">1950</span></a>      <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a> = <span class="keyword">new </span><a class="class" onClick="logClass('single_select')" href="../_classes/single_select.html" onMouseOver="classPopup(event,'single_select')">single_select</a>(<a class="var it10778" onMouseOver="hilite(10778)" onMouseOut="lolite()" onClick="logVariable('actionurl')" href="../_variables/actionurl.html">$actionurl</a>, 'bui_addblock', <a class="var it4415" onMouseOver="hilite(4415)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../_variables/menu.html">$menu</a>, null, array(''=&gt;<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('adddots')), 'add_block');
<a name="l1951"><span class="linenum">1951</span></a>      <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>-&gt;<a class="function" onClick="logFunction('set_label')" href="../_functions/set_label.html" onMouseOver="funcPopup(event,'set_label')">set_label</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addblock'), array('class'=&gt;'accesshide'));
<a name="l1952"><span class="linenum">1952</span></a>      <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>-&gt;<a onClick="logVariable('content')" class="var it39922" onMouseOver="hilite(39922)" onMouseOut="lolite()" href="../_variables/content.html">content</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('render')" href="../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../_variables/select.html">$select</a>);
<a name="l1953"><span class="linenum">1953</span></a>      return <a class="var it3656" onMouseOver="hilite(3656)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../_variables/bc.html">$bc</a>;
<a name="l1954"><span class="linenum">1954</span></a>  }
<a name="l1955"><span class="linenum">1955</span></a>  
<a name="l1956"><span class="linenum">1956</span></a>  <span class="comment">/**</span>
<a name="l1957"><span class="linenum">1957</span></a>  <span class="comment"> * Actually delete from the database any blocks that are currently on this page,</span>
<a name="l1958"><span class="linenum">1958</span></a>  <span class="comment"> * but which should not be there according to blocks_name_allowed_in_format.</span>
<a name="l1959"><span class="linenum">1959</span></a>  <span class="comment"> *</span>
<a name="l1960"><span class="linenum">1960</span></a>  <span class="comment"> * @todo Write/Fix this function. Currently returns immediately</span>
<a name="l1961"><span class="linenum">1961</span></a>  <span class="comment"> * @param $course</span>
<a name="l1962"><span class="linenum">1962</span></a>  <span class="comment"> */</span>
<a name="l1963"><span class="linenum">1963</span></a>  function <a class="function" onClick="logFunction('blocks_remove_inappropriate')" href="../_functions/blocks_remove_inappropriate.html" onMouseOver="funcPopup(event,'blocks_remove_inappropriate')">blocks_remove_inappropriate</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l1964"><span class="linenum">1964</span></a>  <span class="comment">    // TODO</span>
<a name="l1965"><span class="linenum">1965</span></a>      return;
<a name="l1966"><span class="linenum">1966</span></a>      <span class="comment">/*</span>
<a name="l1967"><span class="linenum">1967</span></a>  <span class="comment">    $blockmanager = blocks_get_by_page($page);</span>
<a name="l1968"><span class="linenum">1968</span></a>  <span class="comment"></span>
<a name="l1969"><span class="linenum">1969</span></a>  <span class="comment">    if (empty($blockmanager)) {</span>
<a name="l1970"><span class="linenum">1970</span></a>  <span class="comment">        return;</span>
<a name="l1971"><span class="linenum">1971</span></a>  <span class="comment">    }</span>
<a name="l1972"><span class="linenum">1972</span></a>  <span class="comment"></span>
<a name="l1973"><span class="linenum">1973</span></a>  <span class="comment">    if (($pageformat = $page-&gt;pagetype) == NULL) {</span>
<a name="l1974"><span class="linenum">1974</span></a>  <span class="comment">        return;</span>
<a name="l1975"><span class="linenum">1975</span></a>  <span class="comment">    }</span>
<a name="l1976"><span class="linenum">1976</span></a>  <span class="comment"></span>
<a name="l1977"><span class="linenum">1977</span></a>  <span class="comment">    foreach($blockmanager as $region) {</span>
<a name="l1978"><span class="linenum">1978</span></a>  <span class="comment">        foreach($region as $instance) {</span>
<a name="l1979"><span class="linenum">1979</span></a>  <span class="comment">            $block = blocks_get_record($instance-&gt;blockid);</span>
<a name="l1980"><span class="linenum">1980</span></a>  <span class="comment">            if(!blocks_name_allowed_in_format($block-&gt;name, $pageformat)) {</span>
<a name="l1981"><span class="linenum">1981</span></a>  <span class="comment">               blocks_delete_instance($instance-&gt;instance);</span>
<a name="l1982"><span class="linenum">1982</span></a>  <span class="comment">            }</span>
<a name="l1983"><span class="linenum">1983</span></a>  <span class="comment">        }</span>
<a name="l1984"><span class="linenum">1984</span></a>  <span class="comment">    }*/</span>
<a name="l1985"><span class="linenum">1985</span></a>  }
<a name="l1986"><span class="linenum">1986</span></a>  
<a name="l1987"><span class="linenum">1987</span></a>  <span class="comment">/**</span>
<a name="l1988"><span class="linenum">1988</span></a>  <span class="comment"> * Check that a given name is in a permittable format</span>
<a name="l1989"><span class="linenum">1989</span></a>  <span class="comment"> *</span>
<a name="l1990"><span class="linenum">1990</span></a>  <span class="comment"> * @param string $name</span>
<a name="l1991"><span class="linenum">1991</span></a>  <span class="comment"> * @param string $pageformat</span>
<a name="l1992"><span class="linenum">1992</span></a>  <span class="comment"> * @return bool</span>
<a name="l1993"><span class="linenum">1993</span></a>  <span class="comment"> */</span>
<a name="l1994"><span class="linenum">1994</span></a>  function <a class="function" onClick="logFunction('blocks_name_allowed_in_format')" href="../_functions/blocks_name_allowed_in_format.html" onMouseOver="funcPopup(event,'blocks_name_allowed_in_format')">blocks_name_allowed_in_format</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>, <a class="var it21610" onMouseOver="hilite(21610)" onMouseOut="lolite()" onClick="logVariable('pageformat')" href="../_variables/pageformat.html">$pageformat</a>) {
<a name="l1995"><span class="linenum">1995</span></a>      <a class="var it1666" onMouseOver="hilite(1666)" onMouseOut="lolite()" onClick="logVariable('accept')" href="../_variables/accept.html">$accept</a> = NULL;
<a name="l1996"><span class="linenum">1996</span></a>      <a class="var it18939" onMouseOver="hilite(18939)" onMouseOut="lolite()" onClick="logVariable('maxdepth')" href="../_variables/maxdepth.html">$maxdepth</a> = -1;
<a name="l1997"><span class="linenum">1997</span></a>      if (!<a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a> = <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../_variables/name.html">$name</a>)) {
<a name="l1998"><span class="linenum">1998</span></a>          return false;
<a name="l1999"><span class="linenum">1999</span></a>      }
<a name="l2000"><span class="linenum">2000</span></a>  
<a name="l2001"><span class="linenum">2001</span></a>      <a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a> = <a class="var it26668" onMouseOver="hilite(26668)" onMouseOut="lolite()" onClick="logVariable('bi')" href="../_variables/bi.html">$bi</a>-&gt;<a class="function" onClick="logFunction('applicable_formats')" href="../_functions/applicable_formats.html" onMouseOver="funcPopup(event,'applicable_formats')">applicable_formats</a>();
<a name="l2002"><span class="linenum">2002</span></a>      if (!<a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>) {
<a name="l2003"><span class="linenum">2003</span></a>          <a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a> = array();
<a name="l2004"><span class="linenum">2004</span></a>      }
<a name="l2005"><span class="linenum">2005</span></a>      foreach (<a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a> as <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a> =&gt; <a class="var it2730" onMouseOver="hilite(2730)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>) {
<a name="l2006"><span class="linenum">2006</span></a>          <a class="var it26730" onMouseOver="hilite(26730)" onMouseOut="lolite()" onClick="logVariable('formatregex')" href="../_variables/formatregex.html">$formatregex</a> = '/^'.<a class="phpfunction" onClick="logFunction('str_replace')" href="../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>('*', '[^-]*', <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>).'.*$/';
<a name="l2007"><span class="linenum">2007</span></a>          <a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> = <a class="phpfunction" onClick="logFunction('substr_count')" href="../_functions/substr_count.html" onMouseOver="phpfuncPopup(event,'substr_count')">substr_count</a>(<a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('format')" href="../_variables/format.html">$format</a>, '-');
<a name="l2008"><span class="linenum">2008</span></a>          if (<a class="phpfunction" onClick="logFunction('preg_match')" href="../_functions/preg_match.html" onMouseOver="phpfuncPopup(event,'preg_match')">preg_match</a>(<a class="var it26730" onMouseOver="hilite(26730)" onMouseOut="lolite()" onClick="logVariable('formatregex')" href="../_variables/formatregex.html">$formatregex</a>, <a class="var it21610" onMouseOver="hilite(21610)" onMouseOut="lolite()" onClick="logVariable('pageformat')" href="../_variables/pageformat.html">$pageformat</a>) &amp;&amp; <a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a> &gt; <a class="var it18939" onMouseOver="hilite(18939)" onMouseOut="lolite()" onClick="logVariable('maxdepth')" href="../_variables/maxdepth.html">$maxdepth</a>) {
<a name="l2009"><span class="linenum">2009</span></a>              <a class="var it18939" onMouseOver="hilite(18939)" onMouseOut="lolite()" onClick="logVariable('maxdepth')" href="../_variables/maxdepth.html">$maxdepth</a> = <a class="var it250" onMouseOver="hilite(250)" onMouseOut="lolite()" onClick="logVariable('depth')" href="../_variables/depth.html">$depth</a>;
<a name="l2010"><span class="linenum">2010</span></a>              <a class="var it1666" onMouseOver="hilite(1666)" onMouseOut="lolite()" onClick="logVariable('accept')" href="../_variables/accept.html">$accept</a> = <a class="var it2730" onMouseOver="hilite(2730)" onMouseOut="lolite()" onClick="logVariable('allowed')" href="../_variables/allowed.html">$allowed</a>;
<a name="l2011"><span class="linenum">2011</span></a>          }
<a name="l2012"><span class="linenum">2012</span></a>      }
<a name="l2013"><span class="linenum">2013</span></a>      if (<a class="var it1666" onMouseOver="hilite(1666)" onMouseOut="lolite()" onClick="logVariable('accept')" href="../_variables/accept.html">$accept</a> === NULL) {
<a name="l2014"><span class="linenum">2014</span></a>          <a class="var it1666" onMouseOver="hilite(1666)" onMouseOut="lolite()" onClick="logVariable('accept')" href="../_variables/accept.html">$accept</a> = !empty(<a class="var it2056" onMouseOver="hilite(2056)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../_variables/formats.html">$formats</a>['all']);
<a name="l2015"><span class="linenum">2015</span></a>      }
<a name="l2016"><span class="linenum">2016</span></a>      return <a class="var it1666" onMouseOver="hilite(1666)" onMouseOut="lolite()" onClick="logVariable('accept')" href="../_variables/accept.html">$accept</a>;
<a name="l2017"><span class="linenum">2017</span></a>  }
<a name="l2018"><span class="linenum">2018</span></a>  
<a name="l2019"><span class="linenum">2019</span></a>  <span class="comment">/**</span>
<a name="l2020"><span class="linenum">2020</span></a>  <span class="comment"> * Delete a block, and associated data.</span>
<a name="l2021"><span class="linenum">2021</span></a>  <span class="comment"> *</span>
<a name="l2022"><span class="linenum">2022</span></a>  <span class="comment"> * @param object $instance a row from the block_instances table</span>
<a name="l2023"><span class="linenum">2023</span></a>  <span class="comment"> * @param bool $nolongerused legacy parameter. Not used, but kept for backwards compatibility.</span>
<a name="l2024"><span class="linenum">2024</span></a>  <span class="comment"> * @param bool $skipblockstables for internal use only. Makes @see blocks_delete_all_for_context() more efficient.</span>
<a name="l2025"><span class="linenum">2025</span></a>  <span class="comment"> */</span>
<a name="l2026"><span class="linenum">2026</span></a>  function <a class="function" onClick="logFunction('blocks_delete_instance')" href="../_functions/blocks_delete_instance.html" onMouseOver="funcPopup(event,'blocks_delete_instance')">blocks_delete_instance</a>(<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>, <a class="var it3665" onMouseOver="hilite(3665)" onMouseOut="lolite()" onClick="logVariable('nolongerused')" href="../_variables/nolongerused.html">$nolongerused</a> = false, <a class="var it26731" onMouseOver="hilite(26731)" onMouseOut="lolite()" onClick="logVariable('skipblockstables')" href="../_variables/skipblockstables.html">$skipblockstables</a> = false) {
<a name="l2027"><span class="linenum">2027</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2028"><span class="linenum">2028</span></a>  
<a name="l2029"><span class="linenum">2029</span></a>      if (<a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a> = <a class="function" onClick="logFunction('block_instance')" href="../_functions/block_instance.html" onMouseOver="funcPopup(event,'block_instance')">block_instance</a>(<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('blockname')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/blockname.html">blockname</a>, <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>)) {
<a name="l2030"><span class="linenum">2030</span></a>          <a class="var it286" onMouseOver="hilite(286)" onMouseOut="lolite()" onClick="logVariable('block')" href="../_variables/block.html">$block</a>-&gt;<a class="function" onClick="logFunction('instance_delete')" href="../_functions/instance_delete.html" onMouseOver="funcPopup(event,'instance_delete')">instance_delete</a>();
<a name="l2031"><span class="linenum">2031</span></a>      }
<a name="l2032"><span class="linenum">2032</span></a>      <a class="class" onClick="logClass('context_helper')" href="../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('delete_instance')" href="../_functions/delete_instance.html" onMouseOver="funcPopup(event,'delete_instance')">delete_instance</a>(<a class="constant" onClick="logConstant('CONTEXT_BLOCK')" href="../_constants/CONTEXT_BLOCK.html" onMouseOver="constPopup(event,'CONTEXT_BLOCK')">CONTEXT_BLOCK</a>, <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l2033"><span class="linenum">2033</span></a>  
<a name="l2034"><span class="linenum">2034</span></a>      if (!<a class="var it26731" onMouseOver="hilite(26731)" onMouseOut="lolite()" onClick="logVariable('skipblockstables')" href="../_variables/skipblockstables.html">$skipblockstables</a>) {
<a name="l2035"><span class="linenum">2035</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('block_positions', array('blockinstanceid' =&gt; <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2036"><span class="linenum">2036</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('block_instances', array('id' =&gt; <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2037"><span class="linenum">2037</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_list')" href="../_functions/delete_records_list.html" onMouseOver="funcPopup(event,'delete_records_list')">delete_records_list</a>('user_preferences', 'name', array('block'.<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/id.html">id</a>.'hidden','docked_block_instance_'.<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/id.html">id</a>));
<a name="l2038"><span class="linenum">2038</span></a>      }
<a name="l2039"><span class="linenum">2039</span></a>  }
<a name="l2040"><span class="linenum">2040</span></a>  
<a name="l2041"><span class="linenum">2041</span></a>  <span class="comment">/**</span>
<a name="l2042"><span class="linenum">2042</span></a>  <span class="comment"> * Delete all the blocks that belong to a particular context.</span>
<a name="l2043"><span class="linenum">2043</span></a>  <span class="comment"> *</span>
<a name="l2044"><span class="linenum">2044</span></a>  <span class="comment"> * @param int $contextid the context id.</span>
<a name="l2045"><span class="linenum">2045</span></a>  <span class="comment"> */</span>
<a name="l2046"><span class="linenum">2046</span></a>  function <a class="function" onClick="logFunction('blocks_delete_all_for_context')" href="../_functions/blocks_delete_all_for_context.html" onMouseOver="funcPopup(event,'blocks_delete_all_for_context')">blocks_delete_all_for_context</a>(<a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>) {
<a name="l2047"><span class="linenum">2047</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2048"><span class="linenum">2048</span></a>      <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset')" href="../_functions/get_recordset.html" onMouseOver="funcPopup(event,'get_recordset')">get_recordset</a>('block_instances', array('parentcontextid' =&gt; <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l2049"><span class="linenum">2049</span></a>      foreach (<a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a> as <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l2050"><span class="linenum">2050</span></a>          <a class="function" onClick="logFunction('blocks_delete_instance')" href="../_functions/blocks_delete_instance.html" onMouseOver="funcPopup(event,'blocks_delete_instance')">blocks_delete_instance</a>(<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>, true);
<a name="l2051"><span class="linenum">2051</span></a>      }
<a name="l2052"><span class="linenum">2052</span></a>      <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../_variables/instances.html">$instances</a>-&gt;<a class="function" onClick="logFunction('close')" href="../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2053"><span class="linenum">2053</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('block_instances', array('parentcontextid' =&gt; <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l2054"><span class="linenum">2054</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('block_positions', array('contextid' =&gt; <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l2055"><span class="linenum">2055</span></a>  }
<a name="l2056"><span class="linenum">2056</span></a>  
<a name="l2057"><span class="linenum">2057</span></a>  <span class="comment">/**</span>
<a name="l2058"><span class="linenum">2058</span></a>  <span class="comment"> * Set a block to be visible or hidden on a particular page.</span>
<a name="l2059"><span class="linenum">2059</span></a>  <span class="comment"> *</span>
<a name="l2060"><span class="linenum">2060</span></a>  <span class="comment"> * @param object $instance a row from the block_instances, preferably LEFT JOINed with the</span>
<a name="l2061"><span class="linenum">2061</span></a>  <span class="comment"> *      block_positions table as return by block_manager.</span>
<a name="l2062"><span class="linenum">2062</span></a>  <span class="comment"> * @param moodle_page $page the back to set the visibility with respect to.</span>
<a name="l2063"><span class="linenum">2063</span></a>  <span class="comment"> * @param integer $newvisibility 1 for visible, 0 for hidden.</span>
<a name="l2064"><span class="linenum">2064</span></a>  <span class="comment"> */</span>
<a name="l2065"><span class="linenum">2065</span></a>  function <a class="function" onClick="logFunction('blocks_set_visibility')" href="../_functions/blocks_set_visibility.html" onMouseOver="funcPopup(event,'blocks_set_visibility')">blocks_set_visibility</a>(<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>, <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>, <a class="var it26702" onMouseOver="hilite(26702)" onMouseOut="lolite()" onClick="logVariable('newvisibility')" href="../_variables/newvisibility.html">$newvisibility</a>) {
<a name="l2066"><span class="linenum">2066</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2067"><span class="linenum">2067</span></a>      if (!empty(<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('blockpositionid')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/blockpositionid.html">blockpositionid</a>)) {
<a name="l2068"><span class="linenum">2068</span></a>  <span class="comment">        // Already have local information on this page.</span>
<a name="l2069"><span class="linenum">2069</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('block_positions', 'visible', <a class="var it26702" onMouseOver="hilite(26702)" onMouseOut="lolite()" onClick="logVariable('newvisibility')" href="../_variables/newvisibility.html">$newvisibility</a>, array('id' =&gt; <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('blockpositionid')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/blockpositionid.html">blockpositionid</a>));
<a name="l2070"><span class="linenum">2070</span></a>          return;
<a name="l2071"><span class="linenum">2071</span></a>      }
<a name="l2072"><span class="linenum">2072</span></a>  
<a name="l2073"><span class="linenum">2073</span></a>  <span class="comment">    // Create a new block_positions record.</span>
<a name="l2074"><span class="linenum">2074</span></a>      <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a> = new stdClass;
<a name="l2075"><span class="linenum">2075</span></a>      <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('blockinstanceid')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/blockinstanceid.html">blockinstanceid</a> = <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2076"><span class="linenum">2076</span></a>      <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('contextid')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('context')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../_variables/context.html">context</a>-&gt;id;
<a name="l2077"><span class="linenum">2077</span></a>      <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('pagetype')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('pagetype')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../_variables/pagetype.html">pagetype</a>;
<a name="l2078"><span class="linenum">2078</span></a>      if (<a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('subpage')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a>) {
<a name="l2079"><span class="linenum">2079</span></a>          <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('subpage')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a> = <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('subpage')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../_variables/subpage.html">subpage</a>;
<a name="l2080"><span class="linenum">2080</span></a>      }
<a name="l2081"><span class="linenum">2081</span></a>      <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('visible')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/visible.html">visible</a> = <a class="var it26702" onMouseOver="hilite(26702)" onMouseOut="lolite()" onClick="logVariable('newvisibility')" href="../_variables/newvisibility.html">$newvisibility</a>;
<a name="l2082"><span class="linenum">2082</span></a>      <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('region')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/region.html">region</a> = <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('defaultregion')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/defaultregion.html">defaultregion</a>;
<a name="l2083"><span class="linenum">2083</span></a>      <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>-&gt;<a onClick="logVariable('weight')" class="var it41006" onMouseOver="hilite(41006)" onMouseOut="lolite()" href="../_variables/weight.html">weight</a> = <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('defaultweight')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/defaultweight.html">defaultweight</a>;
<a name="l2084"><span class="linenum">2084</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('block_positions', <a class="var it8402" onMouseOver="hilite(8402)" onMouseOut="lolite()" onClick="logVariable('bp')" href="../_variables/bp.html">$bp</a>);
<a name="l2085"><span class="linenum">2085</span></a>  }
<a name="l2086"><span class="linenum">2086</span></a>  
<a name="l2087"><span class="linenum">2087</span></a>  <span class="comment">/**</span>
<a name="l2088"><span class="linenum">2088</span></a>  <span class="comment"> * Get the block record for a particular blockid - that is, a particular type os block.</span>
<a name="l2089"><span class="linenum">2089</span></a>  <span class="comment"> *</span>
<a name="l2090"><span class="linenum">2090</span></a>  <span class="comment"> * @param $int blockid block type id. If null, an array of all block types is returned.</span>
<a name="l2091"><span class="linenum">2091</span></a>  <span class="comment"> * @param bool $notusedanymore No longer used.</span>
<a name="l2092"><span class="linenum">2092</span></a>  <span class="comment"> * @return array|object row from block table, or all rows.</span>
<a name="l2093"><span class="linenum">2093</span></a>  <span class="comment"> */</span>
<a name="l2094"><span class="linenum">2094</span></a>  function <a class="function" onClick="logFunction('blocks_get_record')" href="../_functions/blocks_get_record.html" onMouseOver="funcPopup(event,'blocks_get_record')">blocks_get_record</a>(<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> = NULL, <a class="var it26732" onMouseOver="hilite(26732)" onMouseOut="lolite()" onClick="logVariable('notusedanymore')" href="../_variables/notusedanymore.html">$notusedanymore</a> = false) {
<a name="l2095"><span class="linenum">2095</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l2096"><span class="linenum">2096</span></a>      <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('blocks')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('get_installed_blocks')" href="../_functions/get_installed_blocks.html" onMouseOver="funcPopup(event,'get_installed_blocks')">get_installed_blocks</a>();
<a name="l2097"><span class="linenum">2097</span></a>      if (<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a> === NULL) {
<a name="l2098"><span class="linenum">2098</span></a>          return <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>;
<a name="l2099"><span class="linenum">2099</span></a>      } else if (isset(<a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>[<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>])) {
<a name="l2100"><span class="linenum">2100</span></a>          return <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>[<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>];
<a name="l2101"><span class="linenum">2101</span></a>      } else {
<a name="l2102"><span class="linenum">2102</span></a>          return false;
<a name="l2103"><span class="linenum">2103</span></a>      }
<a name="l2104"><span class="linenum">2104</span></a>  }
<a name="l2105"><span class="linenum">2105</span></a>  
<a name="l2106"><span class="linenum">2106</span></a>  <span class="comment">/**</span>
<a name="l2107"><span class="linenum">2107</span></a>  <span class="comment"> * Find a given block by its blockid within a provide array</span>
<a name="l2108"><span class="linenum">2108</span></a>  <span class="comment"> *</span>
<a name="l2109"><span class="linenum">2109</span></a>  <span class="comment"> * @param int $blockid</span>
<a name="l2110"><span class="linenum">2110</span></a>  <span class="comment"> * @param array $blocksarray</span>
<a name="l2111"><span class="linenum">2111</span></a>  <span class="comment"> * @return bool|object Instance if found else false</span>
<a name="l2112"><span class="linenum">2112</span></a>  <span class="comment"> */</span>
<a name="l2113"><span class="linenum">2113</span></a>  function <a class="function" onClick="logFunction('blocks_find_block')" href="../_functions/blocks_find_block.html" onMouseOver="funcPopup(event,'blocks_find_block')">blocks_find_block</a>(<a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>, <a class="var it26733" onMouseOver="hilite(26733)" onMouseOut="lolite()" onClick="logVariable('blocksarray')" href="../_variables/blocksarray.html">$blocksarray</a>) {
<a name="l2114"><span class="linenum">2114</span></a>      if (empty(<a class="var it26733" onMouseOver="hilite(26733)" onMouseOut="lolite()" onClick="logVariable('blocksarray')" href="../_variables/blocksarray.html">$blocksarray</a>)) {
<a name="l2115"><span class="linenum">2115</span></a>          return false;
<a name="l2116"><span class="linenum">2116</span></a>      }
<a name="l2117"><span class="linenum">2117</span></a>      foreach(<a class="var it26733" onMouseOver="hilite(26733)" onMouseOut="lolite()" onClick="logVariable('blocksarray')" href="../_variables/blocksarray.html">$blocksarray</a> as <a class="var it26734" onMouseOver="hilite(26734)" onMouseOut="lolite()" onClick="logVariable('blockgroup')" href="../_variables/blockgroup.html">$blockgroup</a>) {
<a name="l2118"><span class="linenum">2118</span></a>          if (empty(<a class="var it26734" onMouseOver="hilite(26734)" onMouseOut="lolite()" onClick="logVariable('blockgroup')" href="../_variables/blockgroup.html">$blockgroup</a>)) {
<a name="l2119"><span class="linenum">2119</span></a>              continue;
<a name="l2120"><span class="linenum">2120</span></a>          }
<a name="l2121"><span class="linenum">2121</span></a>          foreach(<a class="var it26734" onMouseOver="hilite(26734)" onMouseOut="lolite()" onClick="logVariable('blockgroup')" href="../_variables/blockgroup.html">$blockgroup</a> as <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>) {
<a name="l2122"><span class="linenum">2122</span></a>              if(<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('blockid')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../_variables/blockid.html">blockid</a> == <a class="var it8574" onMouseOver="hilite(8574)" onMouseOut="lolite()" onClick="logVariable('blockid')" href="../_variables/blockid.html">$blockid</a>) {
<a name="l2123"><span class="linenum">2123</span></a>                  return <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../_variables/instance.html">$instance</a>;
<a name="l2124"><span class="linenum">2124</span></a>              }
<a name="l2125"><span class="linenum">2125</span></a>          }
<a name="l2126"><span class="linenum">2126</span></a>      }
<a name="l2127"><span class="linenum">2127</span></a>      return false;
<a name="l2128"><span class="linenum">2128</span></a>  }
<a name="l2129"><span class="linenum">2129</span></a>  
<a name="l2130"><span class="linenum">2130</span></a>  <span class="comment">// Functions for programatically adding default blocks to pages ================</span>
<a name="l2131"><span class="linenum">2131</span></a>  
<a name="l2132"><span class="linenum">2132</span></a>   <span class="comment">/**</span>
<a name="l2133"><span class="linenum">2133</span></a>  <span class="comment">  * Parse a list of default blocks. See config-dist for a description of the format.</span>
<a name="l2134"><span class="linenum">2134</span></a>  <span class="comment">  *</span>
<a name="l2135"><span class="linenum">2135</span></a>  <span class="comment">  * @param string $blocksstr Determines the starting point that the blocks are added in the region.</span>
<a name="l2136"><span class="linenum">2136</span></a>  <span class="comment">  * @return array the parsed list of default blocks</span>
<a name="l2137"><span class="linenum">2137</span></a>  <span class="comment">  */</span>
<a name="l2138"><span class="linenum">2138</span></a>  function <a class="function" onClick="logFunction('blocks_parse_default_blocks_list')" href="../_functions/blocks_parse_default_blocks_list.html" onMouseOver="funcPopup(event,'blocks_parse_default_blocks_list')">blocks_parse_default_blocks_list</a>(<a class="var it26735" onMouseOver="hilite(26735)" onMouseOut="lolite()" onClick="logVariable('blocksstr')" href="../_variables/blocksstr.html">$blocksstr</a>) {
<a name="l2139"><span class="linenum">2139</span></a>      <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a> = array();
<a name="l2140"><span class="linenum">2140</span></a>      <a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(':', <a class="var it26735" onMouseOver="hilite(26735)" onMouseOut="lolite()" onClick="logVariable('blocksstr')" href="../_variables/blocksstr.html">$blocksstr</a>);
<a name="l2141"><span class="linenum">2141</span></a>      if (!empty(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>)) {
<a name="l2142"><span class="linenum">2142</span></a>          <a class="var it26736" onMouseOver="hilite(26736)" onMouseOut="lolite()" onClick="logVariable('leftbits')" href="../_variables/leftbits.html">$leftbits</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>));
<a name="l2143"><span class="linenum">2143</span></a>          if (<a class="var it26736" onMouseOver="hilite(26736)" onMouseOut="lolite()" onClick="logVariable('leftbits')" href="../_variables/leftbits.html">$leftbits</a> != '') {
<a name="l2144"><span class="linenum">2144</span></a>              <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>[<a class="constant" onClick="logConstant('BLOCK_POS_LEFT')" href="../_constants/BLOCK_POS_LEFT.html" onMouseOver="constPopup(event,'BLOCK_POS_LEFT')">BLOCK_POS_LEFT</a>] = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it26736" onMouseOver="hilite(26736)" onMouseOut="lolite()" onClick="logVariable('leftbits')" href="../_variables/leftbits.html">$leftbits</a>);
<a name="l2145"><span class="linenum">2145</span></a>          }
<a name="l2146"><span class="linenum">2146</span></a>      }
<a name="l2147"><span class="linenum">2147</span></a>      if (!empty(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>)) {
<a name="l2148"><span class="linenum">2148</span></a>          <a class="var it15948" onMouseOver="hilite(15948)" onMouseOut="lolite()" onClick="logVariable('rightbits')" href="../_variables/rightbits.html">$rightbits</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="phpfunction" onClick="logFunction('array_shift')" href="../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it4737" onMouseOver="hilite(4737)" onMouseOut="lolite()" onClick="logVariable('bits')" href="../_variables/bits.html">$bits</a>));
<a name="l2149"><span class="linenum">2149</span></a>          if (<a class="var it15948" onMouseOver="hilite(15948)" onMouseOut="lolite()" onClick="logVariable('rightbits')" href="../_variables/rightbits.html">$rightbits</a> != '') {
<a name="l2150"><span class="linenum">2150</span></a>              <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>[<a class="constant" onClick="logConstant('BLOCK_POS_RIGHT')" href="../_constants/BLOCK_POS_RIGHT.html" onMouseOver="constPopup(event,'BLOCK_POS_RIGHT')">BLOCK_POS_RIGHT</a>] = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it15948" onMouseOver="hilite(15948)" onMouseOut="lolite()" onClick="logVariable('rightbits')" href="../_variables/rightbits.html">$rightbits</a>);
<a name="l2151"><span class="linenum">2151</span></a>          }
<a name="l2152"><span class="linenum">2152</span></a>      }
<a name="l2153"><span class="linenum">2153</span></a>      return <a class="var it1264" onMouseOver="hilite(1264)" onMouseOut="lolite()" onClick="logVariable('blocks')" href="../_variables/blocks.html">$blocks</a>;
<a name="l2154"><span class="linenum">2154</span></a>  }
<a name="l2155"><span class="linenum">2155</span></a>  
<a name="l2156"><span class="linenum">2156</span></a>  <span class="comment">/**</span>
<a name="l2157"><span class="linenum">2157</span></a>  <span class="comment"> * @return array the blocks that should be added to the site course by default.</span>
<a name="l2158"><span class="linenum">2158</span></a>  <span class="comment"> */</span>
<a name="l2159"><span class="linenum">2159</span></a>  function <a class="function" onClick="logFunction('blocks_get_default_site_course_blocks')" href="../_functions/blocks_get_default_site_course_blocks.html" onMouseOver="funcPopup(event,'blocks_get_default_site_course_blocks')">blocks_get_default_site_course_blocks</a>() {
<a name="l2160"><span class="linenum">2160</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2161"><span class="linenum">2161</span></a>  
<a name="l2162"><span class="linenum">2162</span></a>      if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultblocks_site')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/defaultblocks_site.html">defaultblocks_site</a>)) {
<a name="l2163"><span class="linenum">2163</span></a>          return <a class="function" onClick="logFunction('blocks_parse_default_blocks_list')" href="../_functions/blocks_parse_default_blocks_list.html" onMouseOver="funcPopup(event,'blocks_parse_default_blocks_list')">blocks_parse_default_blocks_list</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultblocks_site')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/defaultblocks_site.html">defaultblocks_site</a>);
<a name="l2164"><span class="linenum">2164</span></a>      } else {
<a name="l2165"><span class="linenum">2165</span></a>          return array(
<a name="l2166"><span class="linenum">2166</span></a>              <a class="constant" onClick="logConstant('BLOCK_POS_LEFT')" href="../_constants/BLOCK_POS_LEFT.html" onMouseOver="constPopup(event,'BLOCK_POS_LEFT')">BLOCK_POS_LEFT</a> =&gt; array('site_main_menu'),
<a name="l2167"><span class="linenum">2167</span></a>              <a class="constant" onClick="logConstant('BLOCK_POS_RIGHT')" href="../_constants/BLOCK_POS_RIGHT.html" onMouseOver="constPopup(event,'BLOCK_POS_RIGHT')">BLOCK_POS_RIGHT</a> =&gt; array('course_summary', 'calendar_month')
<a name="l2168"><span class="linenum">2168</span></a>          );
<a name="l2169"><span class="linenum">2169</span></a>      }
<a name="l2170"><span class="linenum">2170</span></a>  }
<a name="l2171"><span class="linenum">2171</span></a>  
<a name="l2172"><span class="linenum">2172</span></a>  <span class="comment">/**</span>
<a name="l2173"><span class="linenum">2173</span></a>  <span class="comment"> * Add the default blocks to a course.</span>
<a name="l2174"><span class="linenum">2174</span></a>  <span class="comment"> *</span>
<a name="l2175"><span class="linenum">2175</span></a>  <span class="comment"> * @param object $course a course object.</span>
<a name="l2176"><span class="linenum">2176</span></a>  <span class="comment"> */</span>
<a name="l2177"><span class="linenum">2177</span></a>  function <a class="function" onClick="logFunction('blocks_add_default_course_blocks')" href="../_functions/blocks_add_default_course_blocks.html" onMouseOver="funcPopup(event,'blocks_add_default_course_blocks')">blocks_add_default_course_blocks</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>) {
<a name="l2178"><span class="linenum">2178</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l2179"><span class="linenum">2179</span></a>  
<a name="l2180"><span class="linenum">2180</span></a>      if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultblocks_override')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/defaultblocks_override.html">defaultblocks_override</a>)) {
<a name="l2181"><span class="linenum">2181</span></a>          <a class="var it26739" onMouseOver="hilite(26739)" onMouseOut="lolite()" onClick="logVariable('blocknames')" href="../_variables/blocknames.html">$blocknames</a> = <a class="function" onClick="logFunction('blocks_parse_default_blocks_list')" href="../_functions/blocks_parse_default_blocks_list.html" onMouseOver="funcPopup(event,'blocks_parse_default_blocks_list')">blocks_parse_default_blocks_list</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultblocks_override')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/defaultblocks_override.html">defaultblocks_override</a>);
<a name="l2182"><span class="linenum">2182</span></a>  
<a name="l2183"><span class="linenum">2183</span></a>      } else if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l2184"><span class="linenum">2184</span></a>          <a class="var it26739" onMouseOver="hilite(26739)" onMouseOut="lolite()" onClick="logVariable('blocknames')" href="../_variables/blocknames.html">$blocknames</a> = <a class="function" onClick="logFunction('blocks_get_default_site_course_blocks')" href="../_functions/blocks_get_default_site_course_blocks.html" onMouseOver="funcPopup(event,'blocks_get_default_site_course_blocks')">blocks_get_default_site_course_blocks</a>();
<a name="l2185"><span class="linenum">2185</span></a>  
<a name="l2186"><span class="linenum">2186</span></a>      } else if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;{'defaultblocks_' . <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/format.html">format</a>})) {
<a name="l2187"><span class="linenum">2187</span></a>          <a class="var it26739" onMouseOver="hilite(26739)" onMouseOut="lolite()" onClick="logVariable('blocknames')" href="../_variables/blocknames.html">$blocknames</a> = <a class="function" onClick="logFunction('blocks_parse_default_blocks_list')" href="../_functions/blocks_parse_default_blocks_list.html" onMouseOver="funcPopup(event,'blocks_parse_default_blocks_list')">blocks_parse_default_blocks_list</a>(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;{'defaultblocks_' . <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('format')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/format.html">format</a>});
<a name="l2188"><span class="linenum">2188</span></a>  
<a name="l2189"><span class="linenum">2189</span></a>      } else {
<a name="l2190"><span class="linenum">2190</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a>. '<a class="filename" href="../course/lib.php.html">/course/lib.php</a>');
<a name="l2191"><span class="linenum">2191</span></a>          <a class="var it26739" onMouseOver="hilite(26739)" onMouseOut="lolite()" onClick="logVariable('blocknames')" href="../_variables/blocknames.html">$blocknames</a> = <a class="function" onClick="logFunction('course_get_format')" href="../_functions/course_get_format.html" onMouseOver="funcPopup(event,'course_get_format')">course_get_format</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>)-&gt;<a class="function" onClick="logFunction('get_default_blocks')" href="../_functions/get_default_blocks.html" onMouseOver="funcPopup(event,'get_default_blocks')">get_default_blocks</a>();
<a name="l2192"><span class="linenum">2192</span></a>  
<a name="l2193"><span class="linenum">2193</span></a>      }
<a name="l2194"><span class="linenum">2194</span></a>  
<a name="l2195"><span class="linenum">2195</span></a>      if (<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l2196"><span class="linenum">2196</span></a>          <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = 'site-index';
<a name="l2197"><span class="linenum">2197</span></a>      } else {
<a name="l2198"><span class="linenum">2198</span></a>          <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a> = 'course-view-*';
<a name="l2199"><span class="linenum">2199</span></a>      }
<a name="l2200"><span class="linenum">2200</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a>();
<a name="l2201"><span class="linenum">2201</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('set_course')" href="../_functions/set_course.html" onMouseOver="funcPopup(event,'set_course')">set_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>);
<a name="l2202"><span class="linenum">2202</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_blocks')" href="../_functions/add_blocks.html" onMouseOver="funcPopup(event,'add_blocks')">add_blocks</a>(<a class="var it26739" onMouseOver="hilite(26739)" onMouseOut="lolite()" onClick="logVariable('blocknames')" href="../_variables/blocknames.html">$blocknames</a>, <a class="var it26681" onMouseOver="hilite(26681)" onMouseOut="lolite()" onClick="logVariable('pagetypepattern')" href="../_variables/pagetypepattern.html">$pagetypepattern</a>);
<a name="l2203"><span class="linenum">2203</span></a>  }
<a name="l2204"><span class="linenum">2204</span></a>  
<a name="l2205"><span class="linenum">2205</span></a>  <span class="comment">/**</span>
<a name="l2206"><span class="linenum">2206</span></a>  <span class="comment"> * Add the default system-context blocks. E.g. the admin tree.</span>
<a name="l2207"><span class="linenum">2207</span></a>  <span class="comment"> */</span>
<a name="l2208"><span class="linenum">2208</span></a>  function <a class="function" onClick="logFunction('blocks_add_default_system_blocks')" href="../_functions/blocks_add_default_system_blocks.html" onMouseOver="funcPopup(event,'blocks_add_default_system_blocks')">blocks_add_default_system_blocks</a>() {
<a name="l2209"><span class="linenum">2209</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l2210"><span class="linenum">2210</span></a>  
<a name="l2211"><span class="linenum">2211</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_page')" href="../_classes/moodle_page.html" onMouseOver="classPopup(event,'moodle_page')">moodle_page</a>();
<a name="l2212"><span class="linenum">2212</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l2213"><span class="linenum">2213</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_blocks')" href="../_functions/add_blocks.html" onMouseOver="funcPopup(event,'add_blocks')">add_blocks</a>(array(<a class="constant" onClick="logConstant('BLOCK_POS_LEFT')" href="../_constants/BLOCK_POS_LEFT.html" onMouseOver="constPopup(event,'BLOCK_POS_LEFT')">BLOCK_POS_LEFT</a> =&gt; array('navigation', 'settings')), '*', null, true);
<a name="l2214"><span class="linenum">2214</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_blocks')" href="../_functions/add_blocks.html" onMouseOver="funcPopup(event,'add_blocks')">add_blocks</a>(array(<a class="constant" onClick="logConstant('BLOCK_POS_LEFT')" href="../_constants/BLOCK_POS_LEFT.html" onMouseOver="constPopup(event,'BLOCK_POS_LEFT')">BLOCK_POS_LEFT</a> =&gt; array('admin_bookmarks')), 'admin-*', null, null, 2);
<a name="l2215"><span class="linenum">2215</span></a>  
<a name="l2216"><span class="linenum">2216</span></a>      if (<a class="var it26740" onMouseOver="hilite(26740)" onMouseOut="lolite()" onClick="logVariable('defaultmypage')" href="../_variables/defaultmypage.html">$defaultmypage</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('my_pages', array('userid' =&gt; null, 'name' =&gt; '__default', 'private' =&gt; 1))) {
<a name="l2217"><span class="linenum">2217</span></a>          <a class="var it26682" onMouseOver="hilite(26682)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a> = <a class="var it26740" onMouseOver="hilite(26740)" onMouseOut="lolite()" onClick="logVariable('defaultmypage')" href="../_variables/defaultmypage.html">$defaultmypage</a>-&gt;<a onClick="logVariable('id')" class="var it41011" onMouseOver="hilite(41011)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l2218"><span class="linenum">2218</span></a>      } else {
<a name="l2219"><span class="linenum">2219</span></a>          <a class="var it26682" onMouseOver="hilite(26682)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a> = null;
<a name="l2220"><span class="linenum">2220</span></a>      }
<a name="l2221"><span class="linenum">2221</span></a>  
<a name="l2222"><span class="linenum">2222</span></a>      <a class="var it26741" onMouseOver="hilite(26741)" onMouseOut="lolite()" onClick="logVariable('newblocks')" href="../_variables/newblocks.html">$newblocks</a> = array('private_files', 'online_users', 'badges', 'calendar_month', 'calendar_upcoming');
<a name="l2223"><span class="linenum">2223</span></a>      <a class="var it21593" onMouseOver="hilite(21593)" onMouseOut="lolite()" onClick="logVariable('newcontent')" href="../_variables/newcontent.html">$newcontent</a> = array('course_overview');
<a name="l2224"><span class="linenum">2224</span></a>      <a class="var it156" onMouseOver="hilite(156)" onMouseOut="lolite()" onClick="logVariable('page')" href="../_variables/page.html">$page</a>-&gt;<a onClick="logVariable('blocks')" class="var it39576" onMouseOver="hilite(39576)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_blocks')" href="../_functions/add_blocks.html" onMouseOver="funcPopup(event,'add_blocks')">add_blocks</a>(array(<a class="constant" onClick="logConstant('BLOCK_POS_RIGHT')" href="../_constants/BLOCK_POS_RIGHT.html" onMouseOver="constPopup(event,'BLOCK_POS_RIGHT')">BLOCK_POS_RIGHT</a> =&gt; <a class="var it26741" onMouseOver="hilite(26741)" onMouseOut="lolite()" onClick="logVariable('newblocks')" href="../_variables/newblocks.html">$newblocks</a>, 'content' =&gt; <a class="var it21593" onMouseOver="hilite(21593)" onMouseOut="lolite()" onClick="logVariable('newcontent')" href="../_variables/newcontent.html">$newcontent</a>), 'my-index', <a class="var it26682" onMouseOver="hilite(26682)" onMouseOut="lolite()" onClick="logVariable('subpagepattern')" href="../_variables/subpagepattern.html">$subpagepattern</a>);
<a name="l2225"><span class="linenum">2225</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_undeletable_block_types': ['get_undeletable_block_types', '', [['lib','blocklib.php',362]], 2],
'render': ['render', 'Render TeX string into gif/png ', [['filter/tex','latex.php',78],['lib/adodb','adodb-pager.inc.php',239],['lib/htmlpurifier/HTMLPurifier/Printer','CSSDefinition.php',14],['lib/mustache/src/Mustache','Engine.php',202],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',768],['lib/htmlpurifier/HTMLPurifier/Printer','HTMLDefinition.php',15],['lib','formslib.php',926],['question/engine/tests','helpers.php',797],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/fullscreen','fullscreen.htm',82],['lib','outputrenderers.php',167],['lib','outputrenderers.php',299],['mod/quiz/classes/question/bank','custom_view.php',133],['question/behaviour','behaviourbase.php',97],['lib/mustache/src/Mustache','Template.php',57],['question/engine','questionattempt.php',815],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',85],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',235],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',298],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',391],['lib','portfoliolib.php',241],['lib/phpexcel/PHPExcel','Chart.php',527],['lib/mustache/src/Mustache','LambdaHelper.php',36]], 757],
'instance_by_id': ['instance_by_id', 'Get a context instance as an object, from a given context id. ', [['lib','accesslib.php',5383]], 174],
'user_can_edit': ['user_can_edit', 'Allows the block class to have a say in the user\'s ability to edit (i.e., configure) blocks of this type. The framework has first say in whether this will be allowed (e.g., no editing allowed unless in edit mode) but if the framework does allow it, the block can still decide to refuse. ', [['blocks','moodleblock.class.php',521],['blocks/community','block_community.php',41]], 8],
'get_renderer': ['get_renderer', 'Get the renderer for a part of Moodle for this theme. ', [['lib','outputlib.php',1790],['mod/assign','locallib.php',2734],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['course/format','lib.php',889],['question/type/multichoice','question.php',137],['question/type/multichoice','question.php',259],['question/type','questionbase.php',275],['grade/grading/form/guide','lib.php',482],['question/behaviour','behaviourbase.php',135],['lib','pagelib.php',797],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49]], 339],
'is_known_block_type': ['is_known_block_type', 'Find out if a block type is known by the system ', [['lib','blocklib.php',250]], 2],
'region_has_content': ['region_has_content', 'Determine whether a region contains anything. (Either any real blocks, or the add new block UI.) ', [['lib','blocklib.php',313]], 13],
'user_can_addto': ['user_can_addto', 'Allows the block class to have a say in the user\'s ability to create new instances of this block. The framework has first say in whether this will be allowed (e.g., no adding allowed unless in edit mode) but if the framework does allow it, the block can still decide to refuse. This function has access to the complete page object, the creation related to which is being determined. ', [['blocks','moodleblock.class.php',545],['blocks/community','block_community.php',32]], 4],
'block_add_block_ui': ['block_add_block_ui', 'Return a {@link block_contents} representing the add a new block UI, if this user is allowed to see it. ', [['lib','blocklib.php',1916]], 1],
'delete_records_list': ['delete_records_list', 'Delete the records from a table where one field match one list of values. ', [['lib/dml','moodle_database.php',1834]], 36],
'create_all_block_instances': ['create_all_block_instances', 'Create all the block instances for all the blocks that were loaded by load_blocks. This is used, for example, to ensure that all blocks get a chance to initialise themselves via the {@link block_base::specialize()} method, before any output is done. ', [['lib','blocklib.php',938]], 1],
'on': ['on', '', [['lib/requirejs','require.js',506]], 3494],
'process_url_actions': ['process_url_actions', 'Process any block actions that were specified in the URL. ', [['lib','blocklib.php',1137]], 1],
'reposition_block': ['reposition_block', 'Move a block to a new position on this page. ', [['lib','blocklib.php',774]], 4],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',2854]], 853],
'set_url': ['set_url', 'Set the url specifics ', [['backup/cc/cc_lib','cc_weblink.php',50],['backup/util/ui','restore_ui_components.php',141],['mod/wiki','pagelib.php',246],['mod/wiki','pagelib.php',334],['mod/wiki','pagelib.php',421],['mod/wiki','pagelib.php',701],['mod/wiki','pagelib.php',726],['mod/wiki','pagelib.php',840],['mod/wiki','pagelib.php',884],['mod/wiki','pagelib.php',1013],['mod/wiki','pagelib.php',1117],['mod/wiki','pagelib.php',1224],['mod/wiki','pagelib.php',1467],['mod/wiki','pagelib.php',1869],['mod/wiki','pagelib.php',1937],['mod/wiki','pagelib.php',2111],['mod/wiki','pagelib.php',2172],['mod/wiki','pagelib.php',2228],['mod/wiki','pagelib.php',2293],['mod/wiki','pagelib.php',2341],['mod/wiki','pagelib.php',2389],['mod/wiki','pagelib.php',2493],['lib','outputcomponents.php',2823],['lib','pagelib.php',1198]], 574],
'add_blocks': ['add_blocks', 'Convenience method, calls add_block repeatedly for all the blocks in $blocks. Optionally, a starting weight can be used to decide the starting point that blocks are added in the region, the weight is passed to {@link add_block} and incremented by the position of the block in the $blocks array ', [['lib','blocklib.php',752]], 5],
'get_addable_blocks': ['get_addable_blocks', 'The list of block types that may be added to this page. ', [['lib','blocklib.php',189]], 2],
'get_core_subsystems': ['get_core_subsystems', 'List all core subsystems and their location ', [['lib/classes','component.php',752],['lib','deprecatedlib.php',391]], 19],
'find_instance': ['find_instance', 'Find a given block by its instance id ', [['lib','blocklib.php',835]], 5],
'load_blocks': ['load_blocks', 'This method actually loads the blocks for our page from the database. ', [['lib','blocklib.php',533],['my','lib.php',142]], 13],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1063]], 277],
'add_block_at_end_of_default_region': ['add_block_at_end_of_default_region', '', [['lib','blocklib.php',708]], 1],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 315],
'check_region_is_known': ['check_region_is_known', 'Check if a region is known by its name ', [['lib','blocklib.php',896]], 4],
'get_preload_record_columns_sql': ['get_preload_record_columns_sql', 'Returns all fields necessary for context preloading from user $rec. ', [['lib','accesslib.php',6015]], 54],
'set_default_region': ['set_default_region', 'Set the default region for new blocks on the page ', [['lib','blocklib.php',432]], 5],
'get_blocks_for_region': ['get_blocks_for_region', 'Get an array of all blocks within a given region ', [['lib','blocklib.php',277]], 11],
'blocks_name_allowed_in_format': ['blocks_name_allowed_in_format', 'Check that a given name is in a permittable format ', [['lib','blocklib.php',1987]], 1],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'is_cancelled': ['is_cancelled', '', [['mod/feedback/item/captcha','lib.php',72],['backup/util/ui','base_moodleform.class.php',330],['lib','formslib.php',567],['mod/feedback/item/multichoice','lib.php',83],['mod/feedback/item/textfield','lib.php',85],['mod/feedback/item/multichoicerated','lib.php',88],['mod/feedback/item/label','lib.php',95],['mod/feedback/item/textarea','lib.php',88],['mod/feedback/item/numeric','lib.php',101],['mod/feedback/item/info','lib.php',72],['mod/feedback/item','feedback_item_class.php',33],['mod/feedback/item','feedback_item_class.php',147]], 160],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'generate_page_type_patterns': ['generate_page_type_patterns', 'Given a specific page type, parent context and currect context, return all the page type patterns that might be used by this block. ', [['lib','blocklib.php',1759]], 3],
'get_installed_blocks': ['get_installed_blocks', 'Get an array of all of the installed blocks. ', [['lib','blocklib.php',346]], 2],
'get_recordset': ['get_recordset', 'Get a number of records as a moodle_recordset where all the given conditions met. ', [['lib/dml','moodle_database.php',1113]], 95],
'get_context_name': ['get_context_name', 'Returns human readable context identifier. ', [['lib','accesslib.php',5588],['lib','accesslib.php',6138],['lib','accesslib.php',6380],['lib','accesslib.php',6567],['lib','accesslib.php',6799],['lib','accesslib.php',7021],['lib','accesslib.php',7263]], 53],
'user_can_edit_blocks': ['user_can_edit_blocks', 'Does the user have permission to edit blocks on this page. ', [['lib','pagelib.php',838]], 12],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as a moodle_recordset using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','oci_native_moodle_database.php',1065],['lib/dml','sqlsrv_native_moodle_database.php',761],['lib/dml','mssql_native_moodle_database.php',687],['lib/dml','mysqli_native_moodle_database.php',985],['lib/dml/tests','dml_test.php',5423],['lib/dml','pdo_moodle_database.php',251]], 279],
'out_omit_querystring': ['out_omit_querystring', 'Returns url without parameters, everything before \'?\'. ', [['lib','weblib.php',575]], 24],
'add_regions': ['add_regions', 'Add an array of regions ', [['lib','blocklib.php',406]], 5],
'get_string_manager': ['get_string_manager', 'Returns current string_manager instance. ', [['lib','moodlelib.php',6481]], 147],
'add_region': ['add_region', 'Add a region to a page ', [['lib','blocklib.php',376]], 18],
'ensure_param_not_in_url': ['ensure_param_not_in_url', 'Make sure page URL does not contain the given URL parameter. ', [['lib','pagelib.php',1236]], 10],
'get_plugin_directory': ['get_plugin_directory', 'Returns the exact absolute path to plugin directory. ', [['lib/classes','component.php',890],['lib','deprecatedlib.php',508]], 21],
'delete_instance': ['delete_instance', 'The assignment has been deleted - remove the plugin specific data ', [['mod/assign','assignmentplugin.php',525],['mod/workshop/allocation/random','lib.php',243],['mod/assign/submission/file','locallib.php',447],['mod/assign/submission/onlinetext','locallib.php',538],['mod/workshop/form/accumulative','lib.php',375],['mod/workshop/form/rubric','lib.php',405],['mod/workshop/form/numerrors','lib.php',394],['lib','enrollib.php',1737],['mod/assign','locallib.php',677],['mod/workshop/form','lib.php',118],['mod/workshop/allocation/scheduled','lib.php',200],['mod/assign/feedback/editpdf','locallib.php',260],['mod/workshop/form/comments','lib.php',360],['mod/assign/feedback/file','locallib.php',256],['lib','accesslib.php',6060],['mod/workshop/eval','lib.php',59],['mod/workshop/allocation/manual','lib.php',349],['mod/assign/feedback/comments','locallib.php',458],['mod/workshop/eval/best','lib.php',125],['mod/workshop/allocation','lib.php',62]], 35],
'is_block_present': ['is_block_present', 'Given a block name, find out of any of them are currently present in the page ', [['lib','blocklib.php',226]], 1],
'blocks_remove_inappropriate': ['blocks_remove_inappropriate', 'Actually delete from the database any blocks that are currently on this page, but which should not be there according to blocks_name_allowed_in_format. ', [['lib','blocklib.php',1956]], 1],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'get_default_blocks': ['get_default_blocks', 'Returns the list of blocks to be automatically added for the newly created course ', [['course/format/weeks','lib.php',192],['course/format/topics','lib.php',183],['course/format','formatlegacy.php',226],['course/format/singleactivity','lib.php',124],['course/format/social','lib.php',65],['course/format','lib.php',454],['course/format','lib.php',1050]], 2],
'my_page_type_list': ['my_page_type_list', 'Generates the page type list for the my moodle page ', [['lib','blocklib.php',1878]], 0],
'set_course': ['set_course', 'Set the course data. ', [['mod/assign','locallib.php',255],['lib','pagelib.php',894]], 53],
'block_load_class': ['block_load_class', 'Load the block class for a particular type of block. ', [['lib','blocklib.php',1678]], 2],
'process_url_move': ['process_url_move', 'Handle showing/processing the submission from the block editing form. ', [['lib','blocklib.php',1499]], 2],
'set_field': ['set_field', 'Sets the custom profile field used for testing. ', [['availability/condition/profile/tests','condition_test.php',349],['lib/dml','moodle_database.php',1688]], 462],
'get_content_for_region': ['get_content_for_region', 'Returns an array of block content objects that exist in a region ', [['lib','blocklib.php',289]], 1],
'create_block_contents': ['create_block_contents', 'Return an array of content objects from a set of block instances ', [['lib','blocklib.php',950]], 1],
'blocks_set_visibility': ['blocks_set_visibility', 'Set a block to be visible or hidden on a particular page. ', [['lib','blocklib.php',2057]], 1],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'blocks_add_default_system_blocks': ['blocks_add_default_system_blocks', 'Add the default system-context blocks. E.g. the admin tree. ', [['lib','blocklib.php',2205]], 1],
'set_title': ['set_title', '', [['backup/cc/cc_lib','cc_basiclti.php',57],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_metadata.php',225],['backup/cc/cc_lib','cc_forum.php',39],['mod/wiki','pagelib.php',216],['lib','outputcomponents.php',2815],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['lib','pagelib.php',1128],['backup/cc/cc_lib','cc_page.php',38]], 445],
'get_parent_context_ids': ['get_parent_context_ids', 'Returns parent contexts of this context in reversed order, i.e. parent first, then grand parent, etc. ', [['lib','accesslib.php',5674]], 58],
'string_exists': ['string_exists', 'Does the string actually exist? ', [['lib/classes','string_manager_standard.php',263],['lib/classes','string_manager.php',50],['lib/classes','string_manager_install.php',64]], 76],
'process_url_show_hide': ['process_url_show_hide', 'Handle showing or hiding a block. ', [['lib','blocklib.php',1266]], 1],
'instance_allow_multiple': ['instance_allow_multiple', 'Are you going to allow multiple instances of each block? If yes, then it is assumed that the block WILL USE per-instance configuration ', [['blocks','moodleblock.class.php',468],['blocks/quiz_results','block_quiz_results.php',56],['blocks/mentees','block_mentees.php',39],['blocks/myprofile','block_myprofile.php',188],['blocks/navigation','block_navigation.php',63],['blocks/blog_tags','block_blog_tags.php',36],['blocks/private_files','block_private_files.php',39],['blocks/tag_youtube','block_tag_youtube.php',44],['blocks/badges','block_badges.php',39],['blocks/blog_menu','block_blog_menu.php',36],['blocks/activity_results','block_activity_results.php',646],['blocks/admin_bookmarks','block_admin_bookmarks.php',49],['blocks/glossary_random','block_glossary_random.php',162],['blocks/tags','block_tags.php',30],['blocks/html','block_html.php',43],['blocks/comments','block_comments.php',44],['blocks/settings','block_settings.php',54],['blocks/tag_flickr','block_tag_flickr.php',42],['blocks/rss_client','block_rss_client.php',111]], 2],
'get_title': ['get_title', 'Returns the class $title var value. ', [['blocks','moodleblock.class.php',155],['question/classes/bank','checkbox_column.php',36],['completion/criteria','completion_criteria_unenrol.php',92],['lib','authlib.php',510],['completion/criteria','completion_criteria_grade.php',129],['question/classes/bank','modifier_name_column.php',31],['completion/criteria','completion_criteria_activity.php',165],['completion/criteria','completion_criteria_course.php',120],['question/classes/bank','question_name_column.php',32],['question/classes/bank','question_text_row.php',39],['lib/simplepie/library/SimplePie','Enclosure.php',860],['lib/simplepie/library','SimplePie.php',1969],['question/classes/bank','action_column_base.php',28],['enrol','locallib.php',1388],['lib/simplepie/library/SimplePie','Item.php',260],['lib','outputcomponents.php',2759],['completion/criteria','completion_criteria_role.php',118],['badges/criteria','award_criteria.php',162],['completion/criteria','completion_criteria_date.php',106],['enrol/manual','locallib.php',167],['enrol/manual','locallib.php',312],['completion/criteria','completion_criteria_self.php',109],['lib/simplepie/library/SimplePie','Source.php',104],['lib','navigationlib.php',580],['question/classes/bank','creator_name_column.php',32],['completion/criteria','completion_criteria_duration.php',153],['question/classes/bank','question_type_column.php',30]], 71],
'or': ['or', '', [['lib/tcpdf','LICENSE.TXT',69]], 552],
'check_is_loaded': ['check_is_loaded', 'Check whether the page blocks have been loaded yet ', [['lib','blocklib.php',866]], 6],
'prepare_per_region_arrays': ['prepare_per_region_arrays', 'Returns an array of region names as keys and nested arrays for values ', [['lib','blocklib.php',908]], 2],
'blocks_delete_instance': ['blocks_delete_instance', 'Delete a block, and associated data. ', [['lib','blocklib.php',2019]], 8],
'ensure_content_created': ['ensure_content_created', 'Ensure that there is some content within the given region ', [['lib','blocklib.php',1011]], 5],
'get_default_region': ['get_default_region', 'Get the region name of the region blocks are added to by default ', [['lib','blocklib.php',176]], 6],
'user_can_delete_block': ['user_can_delete_block', '', [['lib','blocklib.php',1131]], 2],
'show_only_fake_blocks': ['show_only_fake_blocks', 'Turns the display of normal blocks either on or off. ', [['lib','blocklib.php',1627]], 6],
'course_get_format': ['course_get_format', 'Returns an instance of format class (extending format_base) for given course ', [['course/format','lib.php',27]], 88],
'process_url_edit': ['process_url_edit', 'Handle showing/processing the submission from the block editing form. ', [['lib','blocklib.php',1298]], 1],
'instance_can_be_hidden': ['instance_can_be_hidden', 'If overridden and set to false by the block it will not be hidable when editing is turned on. ', [['blocks','moodleblock.class.php',626],['blocks/navigation','block_navigation.php',87],['blocks/settings','block_settings.php',62]], 2],
'region_uses_dock': ['region_uses_dock', 'Checks to see whether any of the blocks within the given regions are docked ', [['lib','blocklib.php',508]], 0],
'get_regions': ['get_regions', 'Get an array of all region names on this page where a block may appear ', [['lib','blocklib.php',164]], 16],
'_load_instance': ['_load_instance', 'Set up a particular instance of this class given data from the block_insances table and the current page. (See {@link block_manager::load_blocks()}.) ', [['blocks','moodleblock.class.php',418]], 1],
'process_url_delete': ['process_url_delete', 'Handle deleting a block. ', [['lib','blocklib.php',1179]], 1],
'matching_page_type_patterns_from_pattern': ['matching_page_type_patterns_from_pattern', 'Give an specific pattern, return all the page type patterns that would also match it. ', [['lib','blocklib.php',1735]], 13],
'mod_page_type_list': ['mod_page_type_list', 'Generates the page type list for a module by either locating and using the modules callback or by generating a default list. ', [['lib','blocklib.php',1890]], 0],
'check_known_block_type': ['check_known_block_type', 'Check if a block type is known and usable ', [['lib','blocklib.php',879]], 1],
'require_sesskey': ['require_sesskey', 'Check the session key using {@link confirm_sesskey()}, and cause a fatal error if it does not match. ', [['lib','sessionlib.php',79]], 190],
'process_url_add': ['process_url_add', 'Handle adding a block. ', [['lib','blocklib.php',1151]], 1],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 631],
'display': ['display', '', [['mod/lesson/pagetypes','matching.php',50],['mod/lesson/pagetypes','cluster.php',39],['lib/minify/lib/Minify/Cache','XCache.php',74],['mod/quiz/report/grading','report.php',51],['question/classes/bank','view.php',451],['mod/scorm/report/objectives/classes','report.php',37],['backup/util/ui','base_ui.class.php',169],['lib/minify/lib/Minify/Cache','Memcache.php',85],['lib/minify/lib/Minify/Cache','APC.php',79],['mod/lesson/pagetypes','numerical.php',50],['mod/scorm/report/interactions/classes','report.php',31],['lib/pear/HTML','Common.php',428],['backup/util/ui','import_extensions.php',154],['mod/quiz/report/responses','report.php',51],['mod/quiz/report/statistics','report.php',51],['question/classes/bank','column_base.php',164],['backup/util/ui','restore_ui.class.php',373],['course/format/singleactivity','renderer.php',36],['mod/lesson/pagetypes','endofcluster.php',39],['user/selector','lib.php',205],['backup/util/ui','base_moodleform.class.php',365],['admin/roles/classes','capability_table_with_risks.php',132],['lib','formslib.php',913],['backup/util/ui','restore_ui_stage.class.php',355],['backup/util/ui','restore_ui_stage.class.php',497],['backup/util/ui','restore_ui_stage.class.php',1025],['backup/util/ui','restore_ui_stage.class.php',1112],['mod/lesson/pagetypes','truefalse.php',50],['repository/flickr_public','image.php',149],['mod/scorm/report/basic/classes','report.php',30],['admin/roles/classes','capability_table_base.php',71],['mod/lesson/pagetypes','endofbranch.php',39],['mod/lesson/pagetypes','essay.php',67],['mod/scorm/classes','report.php',39],['mod/quiz/report/overview','report.php',42],['backup/util/ui','backup_ui_stage.class.php',545],['backup/util/ui','backup_ui_stage.class.php',588],['lib/minify/lib/Minify/Cache','ZendPlatform.php',84],['mod/lesson/pagetypes','shortanswer.php',50],['cohort','upload_form.php',316],['mod/scorm/report/graphs/classes','report.php',36],['backup/util/ui','base_ui_stage.class.php',126],['mod/lesson/pagetypes','multichoice.php',87],['lib/minify/lib/Minify/Cache','File.php',72],['admin/roles/classes','define_role_table_advanced.php',603],['mod/lesson/pagetypes','branchtable.php',105]], 297],
'footer': ['footer', 'Returns the footer ', [['mod/lesson','renderer.php',78],['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1021],['lib','outputrenderers.php',4143],['lib','outputrenderers.php',4248]], 780],
'blocks_add_default_course_blocks': ['blocks_add_default_course_blocks', 'Add the default blocks to a course. ', [['lib','blocklib.php',2172]], 2],
'blocks_get_record': ['blocks_get_record', 'Get the block record for a particular blockid - that is, a particular type os block. ', [['lib','blocklib.php',2087]], 1],
'get_site': ['get_site', 'Returns $course object of the top-level site. ', [['lib','datalib.php',547]], 76],
'add': ['add', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',454],['blog','locallib.php',242],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['backup/cc','validator.php',51],['lib/google/src/Google/Http','Batch.php',47],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['lib/zend/Zend/Service/Simpy','WatchlistFilterSet.php',47],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/lessphp/Output','Mapped.php',50],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/google/src/Google/Service','Webmasters.php',375],['lib/horde/framework/Horde','Variables.php',297],['lib','outputcomponents.php',2700],['lib','outputcomponents.php',3375],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/zend/Zend','Date.php',1081],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['comment','lib.php',675],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',86],['lib/horde/framework/Horde','Stream.php',116],['backup/cc/cc_lib/gral_lib','cssparser.php',111],['lib/lessphp','Output.php',18],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib','adminlib.php',736],['lib','adminlib.php',895],['lib','adminlib.php',1447],['lib','csslib.php',1508],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib','navigationlib.php',302],['lib','navigationlib.php',758],['lib','navigationlib.php',3288],['lib','navigationlib.php',3542],['lib/phpexcel/PHPExcel','HashTable.php',85],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454]], 5988],
'instance_delete': ['instance_delete', 'Delete everything related to this instance if you have been using persistent storage other than the configdata field. ', [['blocks','moodleblock.class.php',513],['blocks/html','block_html.php',100]], 1],
'matching_page_type_patterns': ['matching_page_type_patterns', 'Given a specific page type, return all the page type patterns that might match it. ', [['lib','blocklib.php',1710]], 6],
'edit_controls': ['edit_controls', 'Get the appropriate list of editing icons for a block. This is used to set {@link block_contents::$controls} in {@link block_base::get_contents_for_output()}. ', [['lib','blocklib.php',1036]], 1],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'out': ['out', 'Returns the string ', [['lib','moodlelib.php',9451],['lib','weblib.php',547],['lib','tablelib.php',1526],['lib','csslib.php',1540],['lib','csslib.php',1698],['lib','csslib.php',2078],['lib','csslib.php',2162],['lib','csslib.php',2306],['lib','csslib.php',2495],['lib','csslib.php',3240],['report/loglive/classes','table_log_ajax.php',37]], 549],
'blocks_delete_all_for_context': ['blocks_delete_all_for_context', 'Delete all the blocks that belong to a particular context. ', [['lib','blocklib.php',2041]], 3],
'create_block_instances': ['create_block_instances', 'Create a set of new block instance from a record array ', [['lib','blocklib.php',922]], 1],
'initialise_theme_and_output': ['initialise_theme_and_output', 'Method for use by Moodle core to set up the theme. Do not use this in your own code. ', [['lib','pagelib.php',1483]], 9],
'is_known_region': ['is_known_region', 'Find out if a region exists on a page ', [['lib','blocklib.php',267]], 7],
'blocks_find_block': ['blocks_find_block', 'Find a given block by its blockid within a provide array ', [['lib','blocklib.php',2106]], 0],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',605]], 2167],
'blocks_get_default_site_course_blocks': ['blocks_get_default_site_course_blocks', '', [['lib','blocklib.php',2159]], 2],
'get_move_target_url': ['get_move_target_url', 'Helper method used by get_content_for_region. ', [['lib','blocklib.php',301]], 2],
'get_plugin_types': ['get_plugin_types', 'Get list of available plugin types together with their location. ', [['lib/classes','component.php',771],['lib','deprecatedlib.php',433],['lib/classes','plugin_manager.php',116]], 60],
'add_block': ['add_block', 'Add a block to the current page, or related pages. The block is added to context $this->page->contextid. If $pagetypepattern $subpagepattern ', [['lib','blocklib.php',666]], 14],
'applicable_formats': ['applicable_formats', 'Which page types this block may appear on. ', [['blocks','moodleblock.class.php',359],['blocks/login','block_login.php',30],['blocks/participants','block_participants.php',70],['blocks/feedback','block_feedback.php',36],['blocks/quiz_results','block_quiz_results.php',44],['blocks/mnet_hosts','block_mnet_hosts.php',34],['blocks/course_overview','block_course_overview.php',109],['blocks/mentees','block_mentees.php',31],['blocks/myprofile','block_myprofile.php',215],['blocks/social_activities','block_social_activities.php',30],['blocks/navigation','block_navigation.php',71],['blocks/site_main_menu','block_site_main_menu.php',30],['blocks/blog_tags','block_blog_tags.php',44],['blocks/private_files','block_private_files.php',35],['blocks/course_summary','block_course_summary.php',30],['blocks/tag_youtube','block_tag_youtube.php',33],['blocks/completionstatus','block_completionstatus.php',40],['blocks/badges','block_badges.php',51],['blocks/activity_modules','block_activity_modules.php',100],['blocks/search_forums','block_search_forums.php',64],['blocks/section_links','block_section_links.php',41],['blocks/blog_menu','block_blog_menu.php',44],['blocks/selfcompletion','block_selfcompletion.php',41],['blocks/activity_results','block_activity_results.php',58],['blocks/blog_recent','block_blog_recent.php',38],['blocks/admin_bookmarks','block_admin_bookmarks.php',57],['blocks/tags','block_tags.php',38],['blocks/recent_activity','block_recent_activity.php',222],['blocks/html','block_html.php',35],['blocks/comments','block_comments.php',40],['blocks/settings','block_settings.php',72],['blocks/tag_flickr','block_tag_flickr.php',34],['blocks/rss_client','block_rss_client.php',31]], 4],
'add_fake_block': ['add_fake_block', 'Add something that looks like a block, but which isn\'t an actual block_instance, to this page. ', [['lib','blocklib.php',447]], 8],
'preload_from_record': ['preload_from_record', 'Preloads context information from db record and strips the cached info. ', [['lib','accesslib.php',5199],['lib','accesslib.php',6028]], 57],
'__construct': ['__construct', 'Constructor ', [['lib/jabber/XMPP','Log.php',67],['lib/zend/Zend/Gdata/Books','VolumeFeed.php',41],['lib/markdown','MarkdownExtra.php',51],['lib/zend/Zend/Gdata/Books/Extension','BooksCategory.php',42],['lib/horde/framework/Horde/Support','Uuid.php',23],['lib/zend/Zend/Validate','Iban.php',106],['repository/wikimedia','wikimedia.php',35],['lib/lessphp/Tree','Operation.php',19],['lib/alfresco/Service','Version.php',38],['lib/filestorage','file_exceptions.php',36],['lib/filestorage','file_exceptions.php',57],['lib/filestorage','file_exceptions.php',89],['lib/filestorage','file_exceptions.php',108],['lib/filestorage','file_exceptions.php',129],['backup/moodle2','backup_activity_task.class.php',45],['lib/htmlpurifier/HTMLPurifier','AttrCollections.php',16],['lib/phpunit/classes','database_driver_testcase.php',55],['lib/google/src/Google/Service','Reseller.php',44],['lib/horde/framework/Horde/Imap/Client/Interaction/Command','Continuation.php',42],['lib/phpunit/classes','advanced_testcase.php',45],['lib/zend/Zend/Service/DeveloperGarden/Request','RequestAbstract.php',40],['lib','outputlib.php',447],['lib','outputlib.php',2000],['repository/filesystem','lib.php',48],['lib/zend/Zend/XmlRpc/Value','Nil.php',40],['lib/lessphp/Tree','NameValue.php',21],['lib/zend/Zend/Gdata/YouTube','UserProfileEntry.php',283],['lib/zend/Zend/Gdata/Gapps','EmailListRecipientEntry.php',69],['lib/simplepie/library/SimplePie','Restriction.php',81],['lib/filebrowser','file_info_context_course.php',39],['lib/filebrowser','file_info_context_course.php',492],['lib/filebrowser','file_info_context_course.php',596],['lib/filebrowser','file_info_context_course.php',745],['lib/minify/lib/MrClay/Cli','Arg.php',82],['lib/horde/framework/Horde/Crypt/Blowfish','Mcrypt.php',47],['lib/classes/update','checker.php',50],['lib/adodb','adodb-active-recordx.inc.php',131],['lib/phpexcel/PHPExcel','Calculation.php',1721],['lib/zend/Zend/Gdata/Photos/Extension','NumPhotos.php',50],['availability/classes','info_module.php',40],['lib/zend/Zend/Gdata/Geo/Extension','GmlPos.php',49],['lib/zend/Zend/Gdata/App/Extension','Link.php',49],['lib/zend/Zend/Gdata/Photos/Extension','Access.php',51],['lib/zend/Zend/Server/Reflection','Parameter.php',58],['lib/zend/Zend/Service/DeveloperGarden/Client','ClientAbstract.php',129],['lib/horde/framework/Horde/Imap/Client','DateTime.php',29],['lib/zend/Zend/Validate/Db','Abstract.php',79],['cache/locks/file','lib.php',66],['lib/phpexcel/PHPExcel/CachedObjectStorage','PHPTemp.php',180],['question/type/missingtype','edit_missingtype_form.php',38],['auth/cas/CAS/CAS','Client.php',862],['lib/horde/framework/Horde/Imap/Client/Data','Envelope.php',46],['lib/zend/Zend/Gdata/Books','VolumeQuery.php',46],['lib/minify/lib/Minify/Cache','XCache.php',22],['lib/zend/Zend/XmlRpc','Request.php',92],['lib/zend/Zend/Service/Delicious','Post.php',74],['lib/zend/Zend/Gdata/Extension','FeedLink.php',53],['lib/zend/Zend/Http/Client/Adapter','Socket.php',97],['lib/grade','grade_object.php',80],['lib/zend/Zend/Gdata/YouTube','ContactFeed.php',55],['backup/util/plan','base_plan.class.php',39],['backup/util/plan','base_plan.class.php',215],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',43],['lib/google/src/Google/Auth','LoginTicket.php',35],['lib/phpexcel/PHPExcel/Reader/Excel5','Escher.php',84],['lib/zend/Zend/Service/DeveloperGarden/SecurityTokenServer','Cache.php',59],['question/type/randomsamatch','question.php',114],['lib/zend/Zend/Service/WindowsAzure/Storage','SignedIdentifier.php',49],['lib/zend/Zend/Amf/Parse','OutputStream.php',40],['blocks','moodleblock.class.php',111],['lib/simplepie','autoloader.php',62],['mod/scorm','renderer.php',129],['lib/zend/Zend/Gdata/Extension','Who.php',64],['lib/zend/Zend/Gdata/Gapps','EmailListQuery.php',54],['lib/zend/Zend/Service/Simpy','LinkSet.php',47],['repository/flickr_public','lib.php',49],['lib/horde/framework/Horde/Imap/Client/Base','Debug.php',55],['lib/google/src/Google/Service','Replicapoolupdater.php',47],['admin/tool/generator/classes','site_backend.php',58],['mod/assign','assignmentplugin.php',50],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',45],['mod/lti/service/profile/classes/local/resource','profile.php',43],['lib/htmlpurifier/HTMLPurifier/AttrDef','Integer.php',36],['lib/horde/framework/Horde/Mail/Transport','Smtpmx.php',138],['backup/util/structure','base_optigroup.class.php',35],['backup/util/structure','base_optigroup.class.php',169],['lib/lessphp/Tree','Anonymous.php',21],['user','renderer.php',186],['lib/zend/Zend/Service/WindowsAzure','Storage.php',170],['lib/google/src/Google','Service.php',26],['lib/lessphp/Tree','Url.php',17],['webservice','lib.php',745],['webservice','lib.php',841],['webservice','lib.php',1120],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter/Column','Rule.php',270],['lib/zend/Zend/Gdata/YouTube/Extension','MediaContent.php',55],['lib/horde/framework/Horde/Support','Randomid.php',26],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','DenyElementDecorator.php',21],['lib/tests','completionlib_test.php',863],['lib/zend/Zend/Service/Amazon','Accessories.php',44],['lib/zend/Zend/Validate/Barcode','Code39ext.php',47],['mod/assign/feedback/editpdf/classes','comment.php',58],['lib/phpexcel/PHPExcel/Writer/PDF','mPDF.php',46],['backup/moodle2','backup_settingslib.php',42],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateListRequest.php',46],['lib/zend/Zend/XmlRpc/Value','Base64.php',40],['backup/util/structure','backup_structure_processor.class.php',45],['backup/util/structure','backup_structure_processor.class.php',133],['lib/zend/Zend/Service/WindowsAzure/Storage','Blob.php',117],['lib/lessphp','Parser.php',75],['lib/zend/Zend/Service/DeveloperGarden/Response/IpLocation','LocateIPResponse.php',47],['lib/zend/Zend/Gdata','Query.php',72],['lib/zend/Zend/Service/Technorati','TagResultSet.php',57],['lib/zend/Zend/Rest/Client','Result.php',42],['lib/lessphp/Tree','Call.php',19],['lib/zend/Zend/Server/Method','Callback.php',59],['lib/minify/lib/Minify/JS','ClosureCompiler.php',38],['mod/workshop/backup/moodle1','lib.php',308],['lib/zend/Zend/Gdata/YouTube','ActivityFeed.php',54],['admin/tool/log/store/database/classes/log','store.php',47],['lib/zend/Zend/Validate','Alpha.php',65],['lib/zend/Zend/Gdata','Gapps.php',109],['lib/zend/Zend/Service/Flickr','Result.php',174],['question/type/multianswer','edit_multianswer_form.php',58],['mod/assign/feedback/file','renderable.php',44],['lib/horde/framework/Horde','Secret.php',48],['lib/zend/Zend/Gdata/Photos/Extension','AlbumId.php',51],['lib/lessphp/SourceMap','Base64VLQ.php',67],['lib/lessphp/Tree/Mixin','Call.php',14],['auth/cas/CAS/CAS','GracefullTerminationException.php',48],['lib/google/src/Google/Service','Fusiontables.php',48],['grade/report/singleview','lib.php',69],['lib/classes/lock','lock.php',55],['grade/grading/form','lib.php',82],['grade/grading/form','lib.php',766],['blog','locallib.php',71],['blog','locallib.php',581],['blog','locallib.php',849],['blog','locallib.php',894],['blog','locallib.php',953],['blog','locallib.php',1004],['blog','locallib.php',1028],['blog','locallib.php',1038],['blog','locallib.php',1050],['blog','locallib.php',1071],['lib/zend/Zend/Gdata/Exif/Extension','Flash.php',49],['backup/cc/cc_lib','cc_general.php',38],['lib/phpexcel/PHPExcel/Shared/JAMA','Matrix.php',61],['admin/webservice','lib.php',38],['lib/zend/Zend/Validate/File','FilesSize.php',60],['lib/phpexcel/PHPExcel/Writer/PDF','DomPDF.php',46],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nstring.php',27],['repository/boxnet','lib.php',56],['lib/htmlpurifier/HTMLPurifier','Language.php',63],['lib/zend/Zend/Validate','Int.php',53],['lib/horde/framework/Horde/Mail/Transport','Smtphorde.php',62],['lib/zend/Zend/Soap','Server.php',146],['lib/zend/Zend/Gdata/Photos','PhotoEntry.php',215],['lib/zend/Zend/Service/Yahoo','LocalResult.php',111],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','GetAccountBalance.php',40],['badges/lib','backpacklib.php',40],['lib/zend/Zend/Service/Yahoo','Result.php',77],['lib/form','filemanager.php',306],['lib/lessphp/Tree','Condition.php',18],['lib/pear/PEAR','Exception.php',107],['lib/zend/Zend/Gdata/YouTube/Extension','Racy.php',45],['question/classes/bank','view.php',70],['lib/adodb','adodb.inc.php',2790],['lib/adodb','adodb.inc.php',2865],['lib/zend/Zend/Gdata/App/Extension','Text.php',45],['question/engine/upgrade/tests','helper.php',45],['lib/zend/Zend/Validate/Barcode','Ean5.php',47],['blocks/private_files','renderer.php',83],['backup/util/settings/section','section_backup_setting.class.php',25],['lib/classes','useragent.php',115],['lib/zend/Zend/Gdata/Photos/Extension','CommentCount.php',51],['lib/horde/framework/Horde/Imap/Client/Data/Format','String.php',38],['lib/zend/Zend/Gdata/Spreadsheets/Extension','ColCount.php',49],['lib/horde/framework/Horde/Translation/Handler','Gettext.php',34],['lib/portfolio','exceptions.php',50],['lib/zend/Zend/Gdata/Calendar/Extension','QuickAdd.php',45],['lib/xmldb','xmldb_object.php',55],['lib/zend/Zend/Service','SlideShare.php',283],['webservice/amf','introspector.php',52],['question/behaviour/adaptive','behaviour.php',310],['question/behaviour','behaviourtypebase.php',133],['admin/tool/assignmentupgrade','upgradableassignmentstable.php',49],['course','renderer.php',52],['lib/zend/Zend/Validate','Hostname.php',315],['lib/phpexcel/PHPExcel/CachedObjectStorage','Memcache.php',249],['lib/zend/Zend/Amf','Server.php',134],['enrol/imsenterprise','locallib.php',38],['enrol/imsenterprise','locallib.php',115],['lib/zend/Zend/Http','Cookie.php',98],['lib/lessphp/Tree','Extend.php',28],['lib/zend/Zend/Validate','Barcode.php',75],['lib/zend/Zend/XmlRpc/Value','BigInteger.php',47],['lib/google/src/Google/Service','DoubleClickBidManager.php',40],['lib/google/src/Google/Service','QPXExpress.php',39],['lib/zend/Zend/Server/Reflection/Function','Abstract.php',105],['lib/phpexcel/PHPExcel/Style','Color.php',72],['lib/zend/Zend/Validate/File','Hash.php',60],['backup/util/settings/root','root_backup_setting.class.php',34],['backup/cc/cc_lib','cc_converter_basiclti.php',29],['lib/zend/Zend/Gdata/Photos/Extension','QuotaCurrent.php',50],['lib/zend/Zend/Service/Nirvanix/Namespace','Base.php',76],['lib/horde/framework/Horde/Imap/Client/Fetch','Results.php',54],['lib/zend/Zend/Service/Technorati','DailyCountsResult.php',60],['lib/zend/Zend/Rest','Server.php',102],['lib/zend/Zend/Gdata/Photos','UserFeed.php',106],['lib/tcpdf/include/barcodes','pdf417.php',523],['lib/minify/lib/Minify/CSS','Compressor.php',51],['lib/zend/Zend/Gdata/YouTube/Extension','VideoId.php',44],['lib/google/src/Google/Service','Blogger.php',50],['mod/workshop/allocation/random','lib.php',52],['mod/workshop/allocation/random','lib.php',727],['lib/zend/Zend/Gdata/App/Extension','Published.php',43],['lib/google/src/Google/Service','Doubleclicksearch.php',43],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Nofollow.php',16],['lib/phpexcel/PHPExcel/Shared/trend','powerBestFitClass.php',129],['lib/zend/Zend/Gdata/Photos','AlbumEntry.php',193],['lib/zend/Zend/Gdata/Docs','DocumentListFeed.php',56],['lib/zend/Zend/Gdata/App/Extension','Icon.php',43],['lib/portfolio','plugin.php',445],['lib/zend/Zend/Gdata/Extension','OpenSearchItemsPerPage.php',44],['lib/horde/framework/Horde/Exception','LastError.php',16],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','ID.php',28],['lib/zend/Zend/Service/Yahoo','WebResult.php',83],['lib/horde/framework/Horde/Imap/Client/Interaction','Client.php',34],['lib/google/src/Google/Service','AdExchangeBuyer.php',46],['lib/dtl','file_xml_database_exporter.php',36],['backup/cc','validator.php',30],['backup/cc','validator.php',116],['backup/cc','validator.php',202],['backup/cc','validator.php',230],['backup/cc','validator.php',236],['backup/cc','validator.php',242],['backup/cc','validator.php',248],['backup/cc','validator.php',254],['backup/cc','validator.php',260],['lib/zend/Zend/Gdata/YouTube/Extension','Token.php',44],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooterDrawing.php',87],['lib/phpexcel/PHPExcel/Writer/PDF','tcPDF.php',47],['lib/xmldb','xmldb_field.php',84],['lib/phpexcel/PHPExcel/Writer','Excel2007.php',126],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceStatusRequest.php',65],['lib/google/src/Google/Service','Manager.php',57],['lib/zend/Zend/Service/Amazon','Offer.php',79],['lib/horde/framework/Horde/Imap/Client/Data/Format','Mailbox.php',35],['lib/zend/Zend/Gdata/App','FeedEntryParent.php',129],['lib/zend/Zend/Service/Technorati','KeyInfoResult.php',61],['lib/htmlpurifier/HTMLPurifier/TagTransform','Simple.php',19],['webservice/rest','lib.php',47],['lib/zend/Zend/Service/StrikeIron','Decorator.php',47],['lib/google/src/Google/Http','Batch.php',38],['lib/google/src/Google/Service','Reports.php',47],['auth/cas/CAS/CAS','OutOfSequenceBeforeAuthenticationCallException.php',47],['lib/zend/Zend/Gdata/Media/Extension','MediaKeywords.php',43],['repository/url','lib.php',46],['lib','xmlize.php',31],['mod/forum/classes','potential_subscriber_selector.php',47],['lib/filebrowser','file_info_context_system.php',37],['lib/zend/Zend/Service/Amazon','Abstract.php',74],['lib/zend/Zend/Server','Definition.php',43],['lib/minify/lib/Minify','ImportProcessor.php',48],['lib/zend/Zend/Amf/Util','BinaryStream.php',53],['lib/portfolio','exporter.php',113],['backup/cc/cc_lib','cc_converter_page.php',28],['lib/zend/Zend/Gdata/YouTube','SubscriptionFeed.php',55],['lib/alfresco/Service','SpacesStore.php',28],['repository/recent','lib.php',39],['lib/zend/Zend/Service/DeveloperGarden/IpLocation','IpAddress.php',59],['lib/zend/Zend/Validate','Regex.php',62],['lib/phpexcel/PHPExcel/Shared/trend','exponentialBestFitClass.php',135],['lib/phpexcel/PHPExcel','ReferenceHelper.php',65],['lib','webdavlib.php',84],['lib/htmlpurifier/HTMLPurifier/AttrTransform','TargetBlank.php',17],['auth/cas/CAS/CAS','AuthenticationException.php',53],['lib/zend/Zend/Gdata/Gapps','NicknameQuery.php',54],['lib/bennu','iCalendar_properties.php',28],['lib/bennu','iCalendar_properties.php',220],['lib/bennu','iCalendar_properties.php',238],['lib/bennu','iCalendar_properties.php',259],['lib/bennu','iCalendar_properties.php',275],['lib/bennu','iCalendar_properties.php',296],['lib/bennu','iCalendar_properties.php',343],['lib/bennu','iCalendar_properties.php',358],['lib/bennu','iCalendar_properties.php',376],['lib/bennu','iCalendar_properties.php',391],['lib/bennu','iCalendar_properties.php',406],['lib/bennu','iCalendar_properties.php',447],['lib/bennu','iCalendar_properties.php',462],['lib/bennu','iCalendar_properties.php',485],['lib/bennu','iCalendar_properties.php',509],['lib/bennu','iCalendar_properties.php',524],['lib/bennu','iCalendar_properties.php',555],['lib/bennu','iCalendar_properties.php',573],['lib/bennu','iCalendar_properties.php',594],['lib/bennu','iCalendar_properties.php',637],['lib/bennu','iCalendar_properties.php',680],['lib/bennu','iCalendar_properties.php',724],['lib/bennu','iCalendar_properties.php',747],['lib/bennu','iCalendar_properties.php',782],['lib/bennu','iCalendar_properties.php',808],['lib/bennu','iCalendar_properties.php',849],['lib/bennu','iCalendar_properties.php',864],['lib/bennu','iCalendar_properties.php',905],['lib/bennu','iCalendar_properties.php',938],['lib/bennu','iCalendar_properties.php',952],['lib/bennu','iCalendar_properties.php',965],['lib/bennu','iCalendar_properties.php',987],['lib/bennu','iCalendar_properties.php',1017],['lib/bennu','iCalendar_properties.php',1031],['lib/bennu','iCalendar_properties.php',1061],['lib/bennu','iCalendar_properties.php',1075],['lib/bennu','iCalendar_properties.php',1098],['lib/bennu','iCalendar_properties.php',1110],['lib/bennu','iCalendar_properties.php',1139],['lib/bennu','iCalendar_properties.php',1160],['lib/bennu','iCalendar_properties.php',1181],['lib/bennu','iCalendar_properties.php',1203],['lib/bennu','iCalendar_properties.php',1227],['lib/bennu','iCalendar_properties.php',1260],['lib/bennu','iCalendar_properties.php',1386],['lib/bennu','iCalendar_properties.php',1407],['lib/bennu','iCalendar_properties.php',1429],['lib/bennu','iCalendar_properties.php',1450],['lib/phpexcel/PHPExcel/Calculation','ExceptionHandler.php',36],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Mongo.php',78],['lib/horde/framework/Horde','Domhtml.php',53],['auth/cas/CAS/CAS','OutOfSequenceBeforeProxyException.php',48],['lib/simplepie/library/SimplePie/Parse','Date.php',536],['lib/google/src/Google/Service','Customsearch.php',38],['lib/zend/Zend/Gdata/App','MediaFileSource.php',54],['backup/util/plan','restore_step.class.php',32],['backup/util/plan','restore_step.class.php',104],['lib/lessphp/Tree','Comment.php',17],['availability/tests/fixtures','mock_info.php',40],['lib/htmlpurifier/HTMLPurifier/AttrTransform','EnumToCSS.php',34],['backup/util/ui','base_ui.class.php',84],['lib/phpexcel/PHPExcel','DocumentSecurity.php',73],['lib/htmlpurifier/HTMLPurifier/AttrDef/URI','Host.php',15],['backup/cc/cc_lib','cc_converter_lti.php',29],['lib/zend/Zend/Gdata/YouTube/Extension','Position.php',44],['lib/zend/Zend/Service/WindowsAzure/Credentials','CredentialsAbstract.php',77],['lib/zend/Zend/Soap','AutoDiscover.php',94],['lib/htmlpurifier/HTMLPurifier','URI.php',58],['lib/phpexcel/PHPExcel','IOFactory.php',77],['lib/zend/Zend/Gdata/App/Extension','Email.php',43],['lib/zend/Zend/Gdata/Media/Extension','MediaHash.php',45],['lib/zend/Zend/Gdata/App/Extension','Element.php',42],['lib/google/src/Google/Service','Gmail.php',55],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Multiple.php',33],['repository/dropbox','lib.php',49],['lib/minify/lib/Minify','Source.php',43],['backup/util/dbops','backup_dbops.class.php',37],['lib/google/src/Google/Service','Plus.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',28],['lib/google/src/Google/Service','Spectrum.php',38],['files','renderer.php',1080],['lib/zend/Zend/Validate/Barcode','Ean2.php',47],['course','lib.php',2932],['lib/horde/framework/Horde/Support','ConsistentHash.php',56],['lib/zend/Zend/Service/Simpy','Watchlist.php',89],['lib/phpexcel/PHPExcel','Style.php',101],['lib/zend/Zend/Gdata/YouTube/Extension','CountHint.php',44],['lib/minify/lib/Minify/Cache','Memcache.php',22],['auth/db','auth.php',36],['lib/zend/Zend/Gdata/Gapps','UserQuery.php',54],['admin/roles/classes','assign_user_selector_base.php',40],['lib/zend/Zend/Gdata/Exif/Extension','Model.php',49],['lib/zend/Zend/Gdata/YouTube','PlaylistListFeed.php',55],['lib/zend/Zend/Gdata/Docs','DocumentListEntry.php',42],['mod/quiz/tests','repaginate_test.php',39],['question/engine','questionusage.php',78],['question/engine','questionusage.php',973],['lib/simplepie/library/SimplePie/Cache','MySQL.php',80],['lib/zend/Zend/Service/Twitter','Search.php',70],['lib/zend/Zend/Server/Method','Parameter.php',59],['lib/phpunit/classes','basic_testcase.php',39],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobContainer.php',50],['lib/zend/Zend/Service/DeveloperGarden/Response/LocalSearch','LocalSearchResponse.php',50],['lib/horde/framework/Horde/Imap/Client','Ids.php',78],['mod/wiki/parser/markups','html.php',18],['lib/google/src/Google/Service','Mirror.php',49],['lib/classes/event','base.php',114],['lib/alfresco/Service','Repository.php',36],['lib/zend/Zend/Service/Technorati','CosmosResult.php',84],['backup/moodle2','backup_xml_transformer.class.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','RC4.php',42],['lib/zend/Zend/Service/Yahoo','PageDataResult.php',47],['lib/zend/Zend/Service/WindowsAzure/Storage','Table.php',99],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceTemplateRequest.php',60],['lib/phpexcel/PHPExcel/Shared/JAMA','EigenvalueDecomposition.php',775],['lib/tcpdf','tcpdf_parser.php',92],['lib/minify/lib/Minify/Cache','APC.php',19],['lib/zend/Zend/Gdata','MimeBodyString.php',49],['lib/phpexcel/PHPExcel/Reader','OOCalc.php',55],['lib/phpexcel/PHPExcel/Calculation','FormulaParser.php',92],['lib/google/src/Google/Http','MediaFileUpload.php',73],['lib/zend/Zend/XmlRpc/Client','ServerProxy.php',54],['lib','listlib.php',82],['lib','listlib.php',485],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Background.php',20],['lib/zend/Zend/Gdata/Health','ProfileFeed.php',49],['lib/google/src/Google/Service','Genomics.php',60],['lib/google/src/Google/Service','Urlshortener.php',40],['lib/zend/Zend/Server/Reflection','Method.php',51],['lib/tests','medialib_test.php',631],['lib/htmlpurifier/HTMLPurifier/ChildDef','Required.php',23],['lib/zend/Zend/Soap/Client','DotNet.php',43],['admin/roles/classes','allow_role_page.php',37],['backup/util/dbops','restore_dbops.class.php',1755],['lib/zend/Zend/Service/Yahoo','NewsResult.php',97],['backup/util/plan','restore_task.class.php',32],['backup/util/plan','restore_task.class.php',121],['webservice/rest','locallib.php',40],['lib/simplepie/library/SimplePie','Sanitize.php',75],['lib','uploadlib.php',40],['lib/zend/Zend/Gdata','Health.php',109],['lib','questionlib.php',1269],['lib','questionlib.php',1513],['lib/dml','oci_native_moodle_recordset.php',34],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveParticipantRequest.php',53],['lib/zend/Zend/XmlRpc/Value','String.php',38],['lib/zend/Zend/Gdata/Calendar/Extension','AccessLevel.php',45],['lib/ddl','database_manager.php',48],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CreateConferenceTemplateRequest.php',60],['backup/util/xml/parser','progressive_parser.class.php',79],['backup/util/xml/parser','progressive_parser.class.php',305],['backup/util/settings','base_setting.class.php',89],['backup/util/settings','base_setting.class.php',556],['lib/dtl','database_exporter.php',55],['mod/workshop/form/accumulative','lib.php',99],['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',182],['grade/report/singleview/classes/local/ui','bulk_insert.php',40],['lib/zend/Zend/Validate','Float.php',53],['lib/zend/Zend/Gdata/Gapps/Extension','EmailList.php',59],['cache/classes','interfaces.php',473],['lib/zend/Zend/Gdata/App/Extension','Edited.php',43],['lib/zend/Zend/Gdata/Gapps','UserEntry.php',103],['lib/lessphp/Tree','Element.php',19],['lib','moodlelib.php',9143],['lib','moodlelib.php',9354],['repository/picasa','lib.php',41],['webservice/soap','lib.php',42],['lib/zend/Zend/Gdata/Calendar','EventEntry.php',71],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Border.php',18],['lib/phpexcel/PHPExcel/Shared/trend','linearBestFitClass.php',98],['backup/cc/cc_lib','cc_assesment_essay.php',25],['lib/zend/Zend/Service/WindowsAzure/RetryPolicy','RetryN.php',56],['lib/dml','moodle_temptables.php',51],['lib/zend/Zend/Gdata/Media/Extension','MediaContent.php',116],['lib/zend/Zend/Gdata/Gapps','EmailListEntry.php',80],['admin/roles/classes','allow_assign_page.php',31],['lib/zend/Zend/Gdata','Books.php',80],['lib/zend/Zend/Amf/Value','MessageHeader.php',64],['lib/zend/Zend/Validate','GreaterThan.php',59],['lib/zend/Zend/Gdata/YouTube/Extension','PlaylistId.php',44],['calendar/classes','rrule_manager.php',182],['lib/phpexcel/PHPExcel/Worksheet','Drawing.php',45],['lib/zend/Zend/Service/ReCaptcha','Response.php',53],['lib/simplepie/library/SimplePie/HTTP','Parser.php',131],['lib/phpexcel/PHPExcel/Style','NumberFormat.php',106],['lib/zend/Zend/Amf/Value/Messaging','RemotingMessage.php',58],['lib/tcpdf','tcpdf.php',1822],['lib/zend/Zend/Gdata/YouTube/Extension','Username.php',44],['lib/zend/Zend/Gdata/Photos/Extension','Version.php',51],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Input.php',14],['lib/zend/Zend/Service/WindowsAzure/Storage','Batch.php',77],['lib/mustache/src/Mustache','Engine.php',61],['lib/xmldb','xmldb_structure.php',40],['lib/zend/Zend/Gdata/Photos','TagEntry.php',61],['webservice/amf','locallib.php',41],['webservice/amf','locallib.php',60],['lib/htmlpurifier/HTMLPurifier/ChildDef','Chameleon.php',36],['lib/horde/framework/Horde/Imap/Client','Base.php',153],['question/type/numerical/tests','form_test.php',40],['lib/google/src/Google/Service','IdentityToolkit.php',38],['comment','locallib.php',39],['lib/zend/Zend/Gdata/Extension','Comments.php',50],['lib/google/src/Google/Service','Resource.php',60],['lib/horde/framework/Horde/Imap/Client/Socket','Catenate.php',37],['lib/zend/Zend/Gdata/YouTube/Extension','Recorded.php',44],['lib/zend/Zend/Amf/Request','Http.php',46],['backup/util/settings','setting_dependency.class.php',68],['backup/util/settings','setting_dependency.class.php',175],['backup/util/settings','setting_dependency.class.php',328],['backup/util/settings','setting_dependency.class.php',439],['backup/util/settings','setting_dependency.class.php',465],['backup/util/settings','setting_dependency.class.php',491],['backup/util/settings','setting_dependency.class.php',556],['question/engine/upgrade','behaviourconverters.php',78],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantDetail.php',62],['repository/s3','lib.php',39],['lib/minify/lib/MrClay','Cli.php',74],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','AlphaValue.php',6],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',67],['lib/zend/Zend/Gdata/App','HttpException.php',51],['lib/zend/Zend/Soap/Client','Common.php',40],['lib/google/src/Google/Service','Dfareporting.php',45],['lib/lessphp/Output','Mapped.php',39],['lib/classes/output','notification.php',66],['lib/google/src/Google/Service','PlusDomains.php',72],['backup/util/plan','base_task.class.php',40],['backup/util/plan','base_task.class.php',277],['lib/editor/tinymce','adminlib.php',36],['lib/zend/Zend/Service/Amazon/Ec2','Exception.php',41],['lib/phpexcel/PHPExcel/Cell','Hyperlink.php',52],['lib/simplepie/library/SimplePie','Locator.php',68],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',846],['lib/xmldb','xmldb_key.php',43],['user/filters','checkbox.php',51],['lib/phpexcel/PHPExcel/Reader','SYLK.php',75],['question/type/numerical','questiontype.php',507],['backup/cc/cc_lib','cc_converter_url.php',29],['lib/zend/Zend/Gdata/App/Extension','Control.php',50],['lib/minify/lib','FirePHP.php',189],['lib/lessphp/Tree/Mixin','Definition.php',18],['lib/zend/Zend/Service/Yahoo','LocalResultSet.php',61],['lib','ddllib.php',80],['lib','ddllib.php',93],['lib','ddllib.php',107],['lib','ddllib.php',126],['lib','ddllib.php',140],['admin/tool/langimport/classes','controller.php',48],['lib/google/src/Google/Auth','AssertionCredentials.php',53],['lib/horde/framework/Horde/Stream','String.php',27],['lib','excellib.class.php',47],['lib','excellib.class.php',155],['lib','excellib.class.php',454],['lib/horde/framework/Horde/Stream','Temp.php',25],['lib/alfresco/Service','VersionHistory.php',34],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceSchedule.php',81],['mod/quiz/classes','repaginate.php',49],['lib/zend/Zend/Validate','Isbn.php',65],['lib/zend/Zend/Service/Amazon','Image.php',55],['backup/util/ui','restore_ui_components.php',81],['backup/util/ui','restore_ui_components.php',287],['backup/util/ui','restore_ui_components.php',382],['lib/classes/lock','db_record_lock_factory.php',61],['lib/horde/framework/Horde/Stream','TempString.php',40],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','InterchangeBuilder.php',15],['lib/htmlpurifier/HTMLPurifier/ChildDef','Empty.php',22],['lib/zend/Zend/Gdata/Spreadsheets/Extension','Cell.php',76],['question/type/calculated','question.php',188],['question/type/calculated','question.php',303],['lib/horde/framework/Horde/Text','Flowed.php',75],['lib/horde/framework/Horde/Imap/Client/Data/Format','Date.php',25],['lib/zend/Zend/Gdata/Gapps/Extension','Login.php',111],['mod/workshop/form/rubric','lib.php',105],['cohort','locallib.php',37],['cohort','locallib.php',101],['lib/zend/Zend/XmlRpc/Value','DateTime.php',53],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueMessage.php',52],['lib/htmlpurifier/HTMLPurifier','Queue.php',24],['lib/zend/Zend/Amf/Parse','Serializer.php',40],['lib/google/src/Google/Service','GroupsMigration.php',38],['lib/phpexcel/PHPExcel/Worksheet','PageSetup.php',277],['lib/zend/Zend/Gdata/Gapps','ServiceException.php',61],['lib/htmlpurifier/HTMLPurifier','AttrTypes.php',14],['lib/zend/Zend/XmlRpc','Fault.php',100],['lib/zend/Zend/Gdata','Photos.php',124],['question/type/calculated','datasetdefinitions_form.php',53],['lib/phpexcel/PHPExcel/Reader','Excel5.php',424],['question/type/shortanswer','question.php',43],['backup/util/structure','base_final_element.class.php',38],['backup/util/structure','base_final_element.class.php',239],['backup/util/structure','base_final_element.class.php',256],['lib/zend/Zend/Service','LiveDocx.php',67],['backup/util/plan','backup_plan.class.php',36],['backup/util/plan','backup_plan.class.php',130],['lib/google/src/Google/Auth','AppIdentity.php',38],['lib/zend/Zend/Gdata/Exif/Extension','FocalLength.php',49],['lib/zend/Zend/Gdata/App/Extension','Id.php',43],['lib/zend/Zend/Gdata/Books/Extension','PreviewLink.php',42],['mod/chat','locallib.php',179],['mod/chat','locallib.php',227],['lib/google/src/Google/Service','Licensing.php',38],['auth/cas/CAS/CAS/PGTStorage','File.php',105],['lib/zend/Zend/Server/Method','Definition.php',64],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetParticipantStatusRequest.php',53],['question/classes/bank','column_base.php',44],['lib/zend/Zend/XmlRpc/Server','Fault.php',67],['lib/zend/Zend/Amf/Value/Messaging','AcknowledgeMessage.php',40],['grade/report/singleview/classes/local/ui','range.php',38],['lib/zend/Zend/Gdata/Books/Extension','Viewability.php',45],['mod/book','locallib.php',405],['lib/zend/Zend/XmlRpc/Value','Array.php',39],['lib/zend/Zend/Service/Technorati','Result.php',63],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceTemplateRequest.php',46],['lib/zend/Zend/Gdata/Exif/Extension','Exposure.php',49],['lib/zend/Zend/Gdata/Exif','Feed.php',58],['question/type/randomsamatch/tests','helper.php',121],['lib/htmlpurifier/HTMLPurifier','PropertyListIterator.php',22],['question/engine/upgrade','logger.php',42],['question/engine/upgrade','logger.php',87],['lib/portfolio/formats/leap2a','lib.php',62],['lib/portfolio/formats/leap2a','lib.php',258],['lib/portfolio/formats/leap2a','lib.php',503],['lib/zend/Zend/Gdata/Spreadsheets','CellEntry.php',49],['lib/zend/Zend/Gdata/Photos/Extension','PhotoId.php',49],['lib/zend/Zend/Http/Response','Stream.php',120],['lib','modinfolib.php',429],['lib','modinfolib.php',1680],['lib','modinfolib.php',2516],['lib/dtl','database_importer.php',61],['lib/tcpdf','tcpdf_barcodes_2d.php',58],['lib/zend/Zend/Gdata/Exif/Extension','Iso.php',49],['lib/zend/Zend/Gdata/YouTube','VideoQuery.php',48],['lib/lessphp/Tree','Variable.php',20],['backup/moodle2','restore_activity_task.class.php',48],['lib/htmlpurifier/HTMLPurifier/AttrTransform','ImgSpace.php',24],['lib/google/src/Google/Signer','P12.php',33],['lib/lessphp/Tree','DetachedRuleset.php',15],['lib/zend/Zend/Gdata/YouTube','SubscriptionEntry.php',138],['lib/zend/Zend/Http/Client/Adapter','Test.php',81],['','mdeploy.php',120],['lib/ddl','sqlite_sql_generator.php',73],['lib/google/src/Google/Service','Drive.php',70],['mod/quiz/classes','admin_review_setting.php',82],['lib','pdflib.php',161],['lib/zend/Zend/Gdata/YouTube/Extension','Duration.php',45],['mod/quiz/report','attemptsreport_options.php',95],['lib/zend/Zend/Validate/File','Md5.php',60],['backup/util/helper','restore_questions_parser_processor.class.php',42],['lib/horde/framework/Horde/Imap/Client/Exception','SearchCharset.php',34],['lib/filebrowser','file_info_context_coursecat.php',39],['badges','renderer.php',972],['badges','renderer.php',1013],['badges','renderer.php',1077],['badges','renderer.php',1110],['badges','renderer.php',1136],['lib/horde/framework/Horde/Imap/Client','Socket.php',168],['lib/htmlpurifier/HTMLPurifier/ConfigSchema/Interchange','Id.php',17],['lib/zend/Zend/Gdata/Gapps/Extension','Nickname.php',59],['lib/zend/Zend/Gdata/YouTube/Extension','MediaRating.php',54],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',50],['mnet/xmlrpc','serverlib.php',674],['completion','data_object.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Filter.php',15],['lib/horde/framework/Horde/Support','StringStream.php',30],['lib/simplepie/library/SimplePie','gzdecode.php',186],['lib/jabber/XMPP','Roster.php',48],['lib/classes/dml','recordset_walk.php',64],['lib','dmllib.php',69],['lib','dmllib.php',84],['lib','dmllib.php',104],['lib','dmllib.php',129],['lib','dmllib.php',159],['lib','dmllib.php',187],['lib','dmllib.php',240],['lib','dmllib.php',270],['lib/phpexcel/PHPExcel/Worksheet','BaseDrawing.php',129],['lib/google/src/Google/Service','Books.php',57],['mod/assign/feedback/offline','importgradeslib.php',60],['lib/zend/Zend/Gdata','App.php',165],['lib/pear/Net','GeoIP.php',323],['lib/zend/Zend/Gdata/Photos/Extension','Name.php',50],['lib/google/src/Google/Service','AdExchangeSeller.php',53],['lib/zend/Zend/Gdata/Docs','Query.php',75],['lib/zend/Zend/Gdata/YouTube/Extension','Occupation.php',44],['lib/zend/Zend/Gdata/Exif/Extension','Time.php',49],['cache/tests/fixtures','lib.php',325],['lib/horde/framework/Horde/Mail/Rfc822','List.php',61],['lib/google/src/Google/Cache','Memcache.php',42],['lib/dml','sqlsrv_native_moodle_database.php',47],['backup/util/structure','backup_optigroup_element.class.php',51],['backup/cc/cc_lib','cc_converter_resource.php',28],['lib/simplepie/library/SimplePie','Caption.php',98],['mod/lti','OAuth.php',73],['mod/lti','OAuth.php',89],['mod/lti','OAuth.php',244],['mod/lti','OAuth.php',499],['lib/classes','collator.php',58],['lib/zend/Zend/Service/Delicious','PostList.php',56],['lib/classes/output','mustache_filesystem_loader.php',39],['lib/zend/Zend/Service/Amazon/Ec2','Abstract.php',91],['backup/util/xml/parser/processors','grouped_parser_processor.class.php',67],['mod/workshop/form/numerrors','lib.php',102],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateRequest.php',46],['report/log/classes','table_log.php',52],['lib/zend/Zend/Gdata/YouTube','CommentEntry.php',48],['lib/simplepie/library/SimplePie/Cache','Base.php',70],['lib/zend/Zend/Gdata/YouTube/Extension','Status.php',44],['lib/adodb','adodb-exceptions.inc.php',28],['backup/util/helper','backup_array_iterator.class.php',39],['lib/zend/Zend/Rest','Client.php',54],['lib/zend/Zend/Gdata/YouTube/Extension','Company.php',44],['question/classes/statistics/responses','analysis_for_class.php',68],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceTemplateParticipantRequest.php',53],['question/engine','lib.php',770],['question/engine','lib.php',1000],['question/engine','lib.php',1048],['lib/tcpdf','tcpdf_barcodes_1d.php',58],['lib/google/src/Google/Service','Bigquery.php',59],['backup/moodle2','restore_course_task.class.php',41],['lib/zend/Zend/Gdata/Media/Extension','MediaRestriction.php',54],['lib/htmlpurifier/HTMLPurifier','DefinitionCache.php',22],['lib/phpexcel/PHPExcel/Writer','CSV.php',86],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Hashtable.php',73],['cache','disabledlib.php',44],['lib/htmlpurifier/HTMLPurifier','PercentEncoder.php',20],['lib/mustache/src/Mustache/Exception','UnknownTemplateException.php',22],['webservice/xmlrpc','locallib.php',85],['lib/google/src/Google/Service','Freebase.php',38],['mod/lti/service/profile/classes/local/service','profile.php',41],['admin/tool/monitor/classes/output/managesubs','rules.php',56],['backup/util/settings','backup_setting.class.php',43],['grade/report/singleview/classes/local/ui','checkbox_attribute.php',42],['lib/alfresco/Service','ContentData.php',38],['enrol/ldap','lib.php',36],['lib/zend/Zend/Validate/File','MimeType.php',112],['lib/zend/Zend/Gdata/Gbase/Extension','BaseAttribute.php',47],['lib/zend/Zend/Gdata/Gapps','NicknameEntry.php',79],['lib/minify/lib/Minify','HTML.php',49],['lib/zend/Zend/Gdata/Extension','OriginalEvent.php',56],['lib/zend/Zend/Gdata/YouTube','InboxFeed.php',55],['lib/google/src/Google/Service','Groupssettings.php',40],['availability/classes','info.php',55],['lib/horde/framework/Horde/Mail/Rfc822','Group.php',45],['lib/tests','navigationlib_test.php',472],['lib/tests','navigationlib_test.php',530],['lib/tests','navigationlib_test.php',557],['lib/zend/Zend/Service/DeveloperGarden/Request/IpLocation','LocateIPRequest.php',58],['mod/quiz/report/statistics/classes','calculated.php',43],['grade/report/singleview/classes/local/ui','dropdown_attribute.php',49],['cache/stores/memcached','lib.php',107],['lib/zend/Zend/Validate','Between.php',89],['lib/zend/Zend/Gdata/Media/Extension','MediaGroup.php',183],['user/selector','lib.php',85],['user/selector','lib.php',674],['lib/google/src/Google/Service','YouTube.php',68],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Length.php',23],['lib/zend/Zend/Gdata','Exif.php',51],['backup/util/helper','backup_helper.class.php',380],['backup/util/plan','backup_step.class.php',32],['backup/util/plan','backup_step.class.php',55],['backup/util/helper','restore_inforef_parser_processor.class.php',37],['lib/phpexcel/PHPExcel/Cell','DataValidation.php',154],['lib/phpexcel/PHPExcel/CalcEngine','Logger.php',71],['lib/zend/Zend/Gdata','YouTube.php',192],['lib/zend/Zend/Gdata/Calendar/Extension','Link.php',48],['blocks','edit_form.php',47],['lib/dml','mssql_native_moodle_recordset.php',34],['mod/assign','locallib.php',149],['mod/assign','locallib.php',7411],['grade/report/user','lib.php',188],['lib/zend/Zend/Validate/Barcode','Code93ext.php',47],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','ChangeQuotaPool.php',47],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite3.php',294],['lib/horde/framework/Horde/Mail/Transport','Mail.php',53],['lib/zend/Zend/Gdata','Media.php',51],['lib/zend/Zend/Gdata/Gapps/Extension','Quota.php',59],['lib/zend/Zend/Amf/Value','ByteArray.php',38],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Bool.php',22],['lib/simplepie/library/SimplePie/Cache','File.php',82],['lib/behat/form_field','behat_form_field.php',59],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',47],['backup/moodle2','restore_subplugin.class.php',45],['lib/zend/Zend/Gdata/Spreadsheets','SpreadsheetFeed.php',54],['backup/util/structure','base_processor.class.php',49],['lib/zend/Zend/Gdata/Calendar/Extension','Timezone.php',45],['lib/zend/Zend/Validate','Ip.php',56],['lib/zend/Zend/Gdata/Extension','OpenSearchTotalResults.php',44],['badges/criteria','award_criteria_activity.php',45],['lib/zend/Zend/Service/Technorati','DailyCountsResultSet.php',67],['lib/zend/Zend/XmlRpc/Value','Collection.php',40],['lib/google/src/Google/Service','Coordinate.php',47],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','LinkTypes.php',21],['lib/classes/output','mustache_pix_helper.php',43],['lib/zend/Zend/Amf/Value','MessageBody.php',81],['user/classes/output/myprofile','node.php',82],['lib/htmlpurifier/HTMLPurifier','TokenFactory.php',43],['lib/zend/Zend','Registry.php',186],['lib/lessphp/Exception','Chunk.php',19],['lib/dtl','database_mover.php',33],['lib/zend/Zend/Http','CookieJar.php',106],['lib/zend/Zend/Gdata/Extension','Transparency.php',44],['lib/zend/Zend/Gdata/Media/Extension','MediaText.php',64],['lib/phpexcel/PHPExcel/RichText','TextElement.php',43],['lib/simplepie/library/SimplePie','Enclosure.php',219],['lib/google/src/Google/Service','Webmasters.php',46],['lib/lessphp/Tree','Value.php',14],['lib/simplepie/library','SimplePie.php',611],['lib/google/src/Google/Service','Autoscaler.php',46],['lib/zend/Zend/Gdata/App','CaptchaRequiredException.php',64],['lib/behat/features/bootstrap','behat_init_context.php',45],['lib/horde/framework/Horde/Imap/Client/Socket','ClientSort.php',37],['mod/folder','renderer.php',139],['lib/google/src/Google/Service','Webfonts.php',38],['lib/zend/Zend/Gdata/DublinCore/Extension','Description.php',44],['admin/roles/classes','admins_potential_selector.php',30],['lib/zend/Zend/Soap/Client','Local.php',52],['lib/horde/framework/Horde/Imap/Client/Interaction/Server','Tagged.php',36],['lib/lessphp/Tree','Negative.php',14],['mod/quiz','override_form.php',58],['lib/classes/session','file.php',40],['lib/google/src/Google/Auth','OAuth2.php',55],['admin/roles/classes','check_users_selector.php',38],['lib/phpexcel/PHPExcel/Reader/Excel2007','Theme.php',68],['mod/lti/classes/local/ltiservice','service_base.php',63],['lib/alfresco/Service','Store.php',31],['lib/google/src/Google/Service','Audit.php',39],['lib/zend/Zend/Gdata','Gbase.php',95],['mod/wiki','pagelib.php',94],['mod/wiki','pagelib.php',381],['mod/wiki','pagelib.php',986],['mod/wiki','pagelib.php',1195],['mod/wiki','pagelib.php',2201],['mod/wiki','pagelib.php',2429],['lib/simplepie/library/SimplePie/Decode/HTML','Entities.php',80],['calendar','lib.php',1968],['calendar','lib.php',2709],['lib/zend/Zend/Gdata/Photos','AlbumFeed.php',133],['lib/phpmailer','class.phpmailer.php',572],['lib/google/src/Google/Service','Datastore.php',46],['lib/google/src/Google/Service','YouTubeAnalytics.php',45],['lib/lessphp/Tree','Keyword.php',17],['lib/zend/Zend/Service/Amazon','Sqs.php',70],['backup/util/plan','backup_structure_step.class.php',38],['availability/condition/profile/classes','condition.php',73],['lib/simplepie/library/SimplePie','Rating.php',73],['lib/htmlpurifier/HTMLPurifier/AttrTransform','Length.php',19],['lib/horde/framework/Horde/Support','Backtrace.php',20],['lib/simplepie/library/SimplePie','Author.php',81],['report/loglive/classes','table_log.php',50],['lib','completionlib.php',243],['backup/cc/cc_lib','cc_converter_quiz.php',33],['lib/zend/Zend/Gdata/Exif/Extension','Make.php',49],['lib/dml','moodle_database.php',139],['lib/lessphp/Tree','Media.php',18],['lib/horde/framework/Horde/Imap/Client','Url.php',112],['lib/classes/update','info.php',48],['backup/moodle2','backup_subplugin.class.php',44],['backup/util/ui','base_moodleform.class.php',68],['lib/zend/Zend/Gdata/DublinCore/Extension','Creator.php',44],['lib/alfresco/Service','Association.php',28],['lib/zend/Zend/Gdata/Geo/Extension','GeoRssWhere.php',62],['auth/cas/CAS/CAS/PGTStorage','AbstractStorage.php',57],['lib/zend/Zend/Service','Twitter.php',125],['question/classes/statistics/responses','analysis_for_actual_response.php',70],['admin/tool/log/classes/log','store.php',30],['lib/phpexcel/PHPExcel','Comment.php',101],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CommitConferenceRequest.php',46],['filter','local_settings_form.php',33],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Composite.php',25],['backup/util/plan','base_step.class.php',35],['backup/util/plan','base_step.class.php',127],['badges/classes','assertion.php',49],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateParticipantRequest.php',67],['lib/phpexcel/PHPExcel','RichText.php',45],['lib/zend/Zend/Gdata/App','Base.php',111],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Db.php',38],['lib/filestorage','file_storage.php',57],['lib/adodb/drivers','adodb-postgres64.inc.php',125],['lib/adodb/drivers','adodb-postgres64.inc.php',904],['lib/phpexcel/PHPExcel/Chart','Title.php',53],['lib/zend/Zend/Mime','Part.php',51],['lib/phpexcel/PHPExcel','Worksheet.php',335],['lib/phpexcel/PHPExcel/Worksheet','MemoryDrawing.php',78],['lib/google/src/Google/Service','Pagespeedonline.php',39],['lib/zend/Zend/Gdata/DublinCore/Extension','Language.php',44],['lib/phpexcel/PHPExcel/Worksheet','SheetView.php',77],['lib/alfresco/Service/WebService','AlfrescoWebService.php',30],['admin/tool/monitor/classes/output/managerules','renderable.php',56],['lib/google/src/Google/Service','ShoppingContent.php',47],['backup/util/xml/parser/processors','selective_exact_parser_processor.class.php',35],['lib/zend/Zend/Gdata/Spreadsheets','ListQuery.php',57],['backup/moodle2','backup_format_plugin.class.php',40],['mod/workshop/allocation/scheduled','lib.php',48],['lib','outputfactories.php',120],['lib','outputfactories.php',367],['lib/zend/Zend/Gdata/Spreadsheets','ListEntry.php',62],['repository/merlot','lib.php',37],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',29],['mod/chat','chatd.php',78],['mod/chat','chatd.php',103],['lib/lessphp/Visitor','extendFinder.php',15],['lib/zend/Zend/Gdata/YouTube/Extension','MediaGroup.php',112],['mod/quiz/report/grading','gradingsettings_form.php',44],['lib/zend/Zend/Service/Simpy','Note.php',104],['lib/zend/Zend/Gdata/Photos/Extension','Rotation.php',51],['lib/phpexcel/PHPExcel/Worksheet','RowDimension.php',89],['lib/editor/tinymce/classes','plugin.php',49],['question/type/calculatedsimple','edit_calculatedsimple_form.php',72],['lib/zend/Zend/XmlRpc/Value','Integer.php',40],['lib/zend/Zend/Validate/File','Upload.php',74],['lib/phpexcel/PHPExcel/Shared/trend','polynomialBestFitClass.php',201],['admin/roles/classes','capability_table_with_risks.php',46],['lib/zend/Zend/Gdata/Extension','EntryLink.php',52],['question/type','questiontypebase.php',55],['question/type','questiontypebase.php',1442],['lib','outputrequirementslib.php',166],['lib/google/src/Google/Service','Appsactivity.php',49],['lib/horde/framework/Horde/Mail/Transport','Smtp.php',100],['lib/zend/Zend/Loader','Autoloader.php',446],['lib/horde/framework/Horde/Support','CombineStream.php',29],['lib/zend/Zend/Gdata','Docs.php',87],['lib/alfresco/Service/Logger','Logger.php',27],['lib/zend/Zend/Gdata/App/Extension','Logo.php',43],['lib/dml','pgsql_native_moodle_recordset.php',44],['backup/cc/cc_lib','cc_version11.php',57],['lib','weblib.php',315],['lib','weblib.php',3025],['lib','weblib.php',3325],['lib','weblib.php',3360],['lib','weblib.php',3435],['backup/cc/cc_lib','xmlbase.php',52],['backup/cc/cc_lib','cc_organization.php',47],['backup/cc/cc_lib','cc_organization.php',145],['mod/lesson','locallib.php',2007],['mod/lesson','locallib.php',2602],['lib/zend/Zend/Service/LiveDocx','MailMerge.php',61],['lib/phpexcel/PHPExcel/Worksheet/Drawing','Shadow.php',101],['lib/zend/Zend/Server/Reflection','ReturnValue.php',47],['lib/minify/lib/Minify','Build.php',77],['lib/horde/framework/Horde','Variables.php',60],['auth/cas/CAS/CAS','ProxyChain.php',48],['lib/phpexcel/PHPExcel','NamedRange.php',73],['lib/zend/Zend/Gdata/Extension','OpenSearchStartIndex.php',44],['lib/horde/framework/Horde/Imap/Client/Password','Xoauth2.php',44],['lib/zend/Zend/Service/Amazon','OfferSet.php',79],['grade/export/txt','grade_export_txt.php',27],['admin/roles/classes','allow_override_page.php',31],['lib/lessphp/Tree','Assignment.php',15],['lib/zend/Zend/Gdata/Books/Extension','ThumbnailLink.php',42],['lib/zend/Zend/Gdata/YouTube/Extension','Uploaded.php',44],['lib/zend/Zend/Gdata/Extension','AttendeeStatus.php',44],['lib/tcpdf/include/barcodes','qrcode.php',631],['lib/zend/Zend/Gdata/Photos/Extension','Weight.php',51],['enrol','locallib.php',125],['enrol','locallib.php',1240],['enrol','locallib.php',1363],['enrol','locallib.php',1414],['enrol','locallib.php',1447],['lib/lessphp/Visitor','toCSS.php',13],['question/classes/statistics/questions','calculator.php',66],['mod/forum','locallib.php',55],['mod/forum','locallib.php',419],['backup/util/helper','restore_prechecks_helper.class.php',213],['grade/edit/tree','lib.php',57],['grade/edit/tree','lib.php',605],['grade/edit/tree','lib.php',638],['grade/edit/tree','lib.php',804],['lib/zend/Zend/Gdata','Geo.php',56],['lib/zend/Zend/Gdata/Books','CollectionFeed.php',41],['lib/classes','string_manager_standard.php',53],['backup/util/loggers','base_logger.class.php',42],['backup/util/loggers','base_logger.class.php',163],['admin/tool/installaddon/classes','validator.php',223],['admin/tool/generator/classes','backend.php',84],['lib/zend/Zend/Service/WindowsAzure/Credentials','SharedAccessSignature.php',53],['lib/zend/Zend/Gdata/Spreadsheets/Extension','Custom.php',49],['availability/condition/completion/classes','condition.php',48],['question/classes/statistics/questions','calculated.php',181],['lib/lessphp/Tree','Javascript.php',20],['mod/quiz','locallib.php',1898],['lib/phpexcel/PHPExcel/Worksheet','ColumnDimension.php',89],['lib/phpexcel/PHPExcel/Reader','Excel2007.php',62],['lib/zend/Zend/Gdata/DublinCore/Extension','Date.php',45],['lib/mustache/src/Mustache/Cache','FilesystemCache.php',27],['lib/zend/Zend/Loader','PluginLoader.php',95],['lib/zend/Zend/Gdata/YouTube/Extension','Description.php',44],['lib/horde/framework/Horde/Imap/Client/Interaction','Command.php',72],['lib/zend/Zend/Gdata/App/Extension','Generator.php',45],['lib/zend/Zend/Gdata/DublinCore/Extension','Rights.php',44],['lib/phpexcel/PHPExcel/Style','Conditional.php',93],['repository/skydrive','lib.php',42],['lib/google/src/Google/Service','SQLAdmin.php',48],['lib/zend/Zend/Gdata/YouTube/Extension','NoEmbed.php',44],['lib/zend/Zend/Gdata/Exif/Extension','ImageUniqueId.php',49],['lib/simplepie/library/SimplePie','Item.php',82],['lib/phpexcel/PHPExcel/Writer/PDF','Core.php',214],['lib/zend/Zend/Validate/File','IsImage.php',53],['lib/zend/Zend/Date','Exception.php',39],['lib/zend/Zend/Amf/Adobe','Introspector.php',65],['lib/htmlpurifier/HTMLPurifier','URIParser.php',10],['lib/zend/Zend/Service','ReCaptcha.php',117],['lib/zend/Zend/Gdata/Health','ProfileEntry.php',61],['lib/zend/Zend/Server/Reflection','Prototype.php',45],['admin/roles/classes','allow_switch_page.php',33],['backup/util/helper','restore_logs_processor.class.php',45],['backup/util/helper','restore_logs_processor.class.php',140],['lib/google/src/Google/Service','Fitness.php',57],['filter/emoticon/tests','filter_test.php',68],['backup/util/helper','convert_helper.class.php',378],['backup/util/ui','restore_ui_stage.class.php',42],['backup/util/ui','restore_ui_stage.class.php',265],['backup/util/ui','restore_ui_stage.class.php',452],['backup/util/ui','restore_ui_stage.class.php',592],['backup/util/ui','restore_ui_stage.class.php',704],['backup/util/ui','restore_ui_stage.class.php',852],['backup/util/ui','restore_ui_stage.class.php',959],['backup/util/ui','restore_ui_stage.class.php',1100],['repository/webdav','lib.php',38],['repository/dropbox','locallib.php',46],['lib/lessphp/Exception','Parser.php',30],['lib/filestorage','tgz_packer.php',726],['lib/filestorage','tgz_packer.php',808],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','URI.php',15],['backup/converter/moodle1','lib.php',725],['backup/converter/moodle1','lib.php',865],['backup/converter/moodle1','lib.php',1145],['backup/converter/moodle1','lib.php',1190],['backup/converter/moodle1','lib.php',1480],['lib/classes/output','mustache_javascript_helper.php',40],['auth/cas/CAS/CAS/ProxiedService/Http','Abstract.php',58],['lib/zend/Zend/Gdata/YouTube/Extension','FirstName.php',44],['lib/zend/Zend/Service/WindowsAzure/Storage','Queue.php',83],['lib/horde/framework/Horde/Imap/Client/Data','Format.php',32],['lib/zend/Zend/Gdata/Media/Extension','MediaDescription.php',53],['lib/google/src/Google/Service','TagManager.php',66],['lib/zend/Zend/Server','Abstract.php',89],['cache/classes','config.php',80],['lib/htmlpurifier/HTMLPurifier','Generator.php',67],['lib','outputcomponents.php',80],['lib','outputcomponents.php',204],['lib','outputcomponents.php',469],['lib','outputcomponents.php',523],['lib','outputcomponents.php',579],['lib','outputcomponents.php',655],['lib','outputcomponents.php',773],['lib','outputcomponents.php',915],['lib','outputcomponents.php',999],['lib','outputcomponents.php',2178],['lib','outputcomponents.php',2217],['lib','outputcomponents.php',2290],['lib','outputcomponents.php',2371],['lib','outputcomponents.php',2574],['lib','outputcomponents.php',2622],['lib','outputcomponents.php',2682],['lib','outputcomponents.php',2855],['lib','outputcomponents.php',3025],['lib','outputcomponents.php',3129],['lib','outputcomponents.php',3196],['lib','outputcomponents.php',3324],['lib','outputcomponents.php',3608],['lib','outputcomponents.php',3637],['lib','outputcomponents.php',3663],['lib','outputcomponents.php',3685],['lib','outputcomponents.php',3714],['lib','outputcomponents.php',3746],['lib/zend/Zend/Validate/Barcode','Code25.php',53],['lib/zend/Zend/Gdata/YouTube','CommentFeed.php',53],['lib/dtl','string_xml_database_importer.php',34],['question/engine','questionattemptstep.php',97],['question/engine','questionattemptstep.php',608],['lib/htmlpurifier/HTMLPurifier/Node','Element.php',39],['lib/simplepie/library/SimplePie','Cache.php',69],['backup/util/ui','renderer.php',813],['grade/export/xls','grade_export_xls.php',24],['lib/google/src/Google/Service','Directory.php',110],['lib/zend/Zend/Gdata/YouTube/Extension','State.php',47],['lib/phpexcel/PHPExcel/Style','Alignment.php',97],['mod/quiz/report/statistics','statistics_table.php',45],['backup/util/structure','base_nested_element.class.php',44],['backup/util/structure','base_nested_element.class.php',258],['lib/zend/Zend/Gdata/DublinCore/Extension','Title.php',44],['lib/htmlpurifier/HTMLPurifier','Config.php',100],['lib/zend/Zend/Validate/Barcode','Code93.php',67],['lib/lessphp','Functions.php',15],['lib/adodb/drivers','adodb-postgres7.inc.php',78],['lib/adodb/drivers','adodb-postgres7.inc.php',273],['lib/adodb/drivers','adodb-postgres7.inc.php',304],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetRunningConferenceRequest.php',46],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceRequest.php',74],['lib/zend/Zend/Validate','EmailAddress.php',118],['mod/workshop','locallib.php',178],['mod/workshop','locallib.php',2801],['mod/workshop','locallib.php',3236],['mod/workshop','locallib.php',3472],['mod/workshop','locallib.php',3714],['mod/workshop','locallib.php',3800],['mod/workshop','locallib.php',3885],['mod/workshop','locallib.php',3904],['lib/zend/Zend/XmlRpc/Value','Struct.php',39],['lib/zend/Zend/Gdata/Books/Extension','Embeddability.php',45],['lib/horde/framework/Horde/Mime','Mdn.php',35],['cache/stores/static','lib.php',127],['lib','blocklib.php',54],['lib','blocklib.php',152],['lib/zend/Zend/Gdata/Books/Extension','Review.php',46],['lib','componentlib.class.php',597],['lib','componentlib.class.php',821],['lib/zend/Zend/Validate/Barcode','Code39.php',66],['lib/filebrowser','file_info_context_module.php',47],['lib/phpexcel/PHPExcel/Shared/JAMA','CholeskyDecomposition.php',42],['question/engine','states.php',61],['lib/jabber/XMPP','XMLStream.php',171],['lib/jabber/XMPP','XMPP.php',101],['lib/classes/lock','lock_factory.php',39],['lib/tests','collator_test.php',310],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportPop3.php',26],['course/format','lib.php',78],['lib/ddl','sql_generator.php',175],['lib/zend/Zend/XmlRpc/Generator','GeneratorAbstract.php',35],['mod/quiz','accessmanager.php',45],['lib/zend/Zend/Amf/Value','TraitsInfo.php',53],['admin/tool/monitor/classes/output/managesubs','subs.php',51],['lib/zend/Zend/Service/Nirvanix','Response.php',43],['lib','boxlib.php',293],['repository/flickr_public','image.php',34],['lib/google/src/Google/Service','AppState.php',40],['backup/util/structure','backup_nested_element.class.php',44],['lib/filestorage','zip_archive.php',66],['lib/google/src/Google/Service','Taskqueue.php',44],['lib/zend/Zend/Server/Method','Prototype.php',49],['lib/zend/Zend/Service/Technorati','Author.php',90],['mod/workshop/form/comments','lib.php',99],['lib/phpexcel/PHPExcel/RichText','Run.php',43],['lib/phpexcel/PHPExcel/Chart','DataSeriesValues.php',89],['lib/horde/framework/Horde/Imap/Client/Data','Acl.php',32],['lib/phpexcel/PHPExcel/Writer/Excel2007','WriterPart.php',69],['lib/zend/Zend/Service/Simpy','WatchlistFilter.php',48],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','RemoveConferenceRequest.php',46],['lib/zend/Zend/Gdata/Photos','UserEntry.php',131],['lib/mustache/src/Mustache/Loader','FilesystemLoader.php',33],['lib/zend/Zend/Gdata/Spreadsheets','ListFeed.php',54],['lib/phpexcel/PHPExcel','DocumentProperties.php',131],['lib/phpexcel/PHPExcel/Reader','Excel2003XML.php',62],['lib/lessphp/Tree','Paren.php',14],['lib/zend/Zend/Gdata/Photos/Extension','Thumbnail.php',50],['lib/horde/framework/Horde/Imap/Client','Mailbox.php',62],['admin/tool/customlang','locallib.php',44],['admin/tool/customlang','locallib.php',405],['admin/tool/customlang','locallib.php',471],['backup/util/xml/parser/processors','selective_like_parser_processor.class.php',35],['lib/filebrowser','file_info_context_user.php',39],['lib/google/src/Google/Service','CivicInfo.php',40],['lib/zend/Zend/Gdata/YouTube/Extension','Private.php',44],['lib/zend/Zend/Gdata/YouTube/Extension','Music.php',44],['backup/moodle2','restore_block_task.class.php',45],['lib/zend/Zend','Gdata.php',99],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Number.php',18],['lib/simplepie','moodle_simplepie.php',50],['lib/simplepie','moodle_simplepie.php',121],['lib/phpunit/classes','hint_resultprinter.php',37],['backup/util/plan','restore_plan.class.php',43],['backup/util/plan','restore_plan.class.php',203],['admin/roles/classes','capability_table_base.php',51],['lib/htmlpurifier/HTMLPurifier','Lexer.php',152],['lib/google/src/Google/Service','Container.php',44],['lib/zend/Zend/Service/Simpy','TagSet.php',47],['lib/phpexcel/PHPExcel/Chart','Legend.php',82],['question/type/calculated/tests','helper.php',205],['lib/phpexcel/PHPExcel/Reader','CSV.php',103],['availability/classes','result.php',46],['lib/zend/Zend/XmlRpc/Value','Double.php',40],['backup/util/helper','restore_users_parser_processor.class.php',43],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','ValidatorAtom.php',31],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',462],['lib/htmlpurifier/HTMLPurifier/Lexer','PH5P.php',1700],['lib/horde/framework/Horde/Mime','Related.php',32],['report/log/classes','renderable.php',93],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',59],['lib/phpexcel/PHPExcel/Style','Font.php',108],['lib/htmlpurifier/HTMLPurifier/ChildDef','Table.php',57],['backup/util/settings/activity','activity_backup_setting.class.php',25],['lib/mustache/src/Mustache/Exception','UnknownHelperException.php',22],['course/tests/fixtures','course_capability_assignment.php',60],['lib/zend/Zend/Service/Amazon','ResultSet.php',68],['lib/zend/Zend/Validate','Callback.php',69],['lib/zend/Zend/Gdata/Books','CollectionEntry.php',41],['lib/zend/Zend/Gdata/DublinCore/Extension','Publisher.php',44],['lib/zend/Zend/Gdata/Spreadsheets','WorksheetEntry.php',56],['badges/lib','bakerlib.php',52],['backup/util/xml','xml_writer.class.php',57],['backup/util/xml','xml_writer.class.php',284],['lib/portfolio','caller.php',67],['lib/zend/Zend/Validate/File','Sha1.php',60],['lib/htmlpurifier/HTMLPurifier/Strategy','Core.php',8],['lib/zend/Zend/Gdata/Media','Feed.php',58],['lib/zend/Zend/Gdata/YouTube/Extension','LastName.php',44],['mod/data','locallib.php',64],['mod/data','locallib.php',431],['lib/zend/Zend/Gdata/App/Extension','Content.php',44],['lib/classes/update','checker_exception.php',37],['backup/cc/cc_lib','cc_manifest.php',45],['lib','odslib.class.php',42],['lib','odslib.class.php',121],['lib','odslib.class.php',419],['lib','odslib.class.php',824],['lib/zend/Zend/Gdata/Books/Extension','AnnotationLink.php',42],['lib/zend/Zend/Gdata/Calendar/Extension','Color.php',46],['backup/util/helper','restore_structure_parser_processor.class.php',41],['admin/tool/log/store/standard/classes/log','store.php',37],['lib/horde/framework/Horde/Imap/Client/Mailbox','List.php',46],['lib/alfresco/Service','Session.php',39],['grade/report/singleview/classes/local/ui','empty_element.php',38],['enrol/database','settingslib.php',34],['lib/phpexcel/PHPExcel/Worksheet/AutoFilter','Column.php',125],['lib/google/src/Google/Service','AndroidPublisher.php',51],['lib/zend/Zend/Service','StrikeIron.php',43],['lib/zend/Zend/Gdata/Books/Extension','InfoLink.php',41],['lib/lessphp/SourceMap','Generator.php',82],['filter/urltolink/tests','filter_test.php',209],['lib/horde/framework/Horde/Socket','Client.php',52],['lib/zend/Zend/Service/Amazon','Item.php',112],['repository','lib.php',116],['repository','lib.php',533],['admin/roles/classes','define_role_table_basic.php',31],['lib/phpexcel/PHPExcel','WorksheetIterator.php',54],['lib/zend/Zend/Gdata/Photos/Extension','NumPhotosRemaining.php',50],['mod/quiz','attemptlib.php',41],['mod/quiz','attemptlib.php',82],['mod/quiz','attemptlib.php',505],['mod/quiz','attemptlib.php',2058],['mod/quiz','attemptlib.php',2113],['lib/zend/Zend/Server/Reflection','Node.php',51],['lib/zend/Zend/Gdata/Media/Extension','MediaTitle.php',49],['lib/zend/Zend','Date.php',123],['lib/zend/Zend','Mime.php',290],['lib','accesslib.php',5301],['lib','accesslib.php',5846],['lib','accesslib.php',6116],['lib','accesslib.php',6357],['lib','accesslib.php',6544],['lib','accesslib.php',6776],['lib','accesslib.php',6998],['lib','accesslib.php',7240],['question/engine/tests','helpers.php',582],['question/engine/tests','helpers.php',594],['question/engine/tests','helpers.php',608],['question/engine/tests','helpers.php',623],['question/engine/tests','helpers.php',637],['question/engine/tests','helpers.php',652],['question/engine/tests','helpers.php',665],['question/engine/tests','helpers.php',676],['question/engine/tests','helpers.php',1180],['lib/zend/Zend/Validate','Ccnum.php',62],['lib/zend/Zend/Gdata/Extension','EventStatus.php',44],['lib/google/src/Google/Verifier','Pem.php',29],['lib/zend/Zend/Service/Technorati','BlogInfoResult.php',74],['admin/tool/log/classes','setting_managestores.php',30],['lib','outputactions.php',60],['lib','outputactions.php',91],['lib','outputactions.php',148],['backup/cc/cc_lib','cc_assesment_truefalse.php',27],['backup/util/ui','restore_moodleform.class.php',34],['grade/report/singleview/classes/local/ui','element.php',47],['mod/quiz/report','attemptsreport_table.php',76],['lib/lessphp/Tree','Attribute.php',16],['lib/phpexcel/PHPExcel/Style','Supervisor.php',52],['lib/zend/Zend/Gdata/Media/Extension','MediaCategory.php',50],['lib/google/src/Google/Service','AdSenseHost.php',49],['lib/zend/Zend/Gdata/Photos/Extension','Checksum.php',51],['lib/lessphp/Tree','Expression.php',16],['mod/workshop','fileinfolib.php',43],['mod/workshop','fileinfolib.php',198],['course/format','renderer.php',44],['lib/zend/Zend/XmlRpc/Value','Boolean.php',40],['blocks/rss_client','editfeed.php',36],['lib/phpexcel/PHPExcel/Worksheet','Protection.php',157],['question/type/numerical','question.php',321],['auth/cas/CAS/CAS/ProxiedService','Imap.php',51],['lib/typo3','class.t3lib_cs.php',509],['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',110],['lib/zend/Zend/Gdata/Health','ProfileListEntry.php',49],['lib/htmlpurifier/HTMLPurifier/Filter','ExtractStyleBlocks.php',57],['cache/stores/memcache','lib.php',120],['lib/htmlpurifier/HTMLPurifier/AttrDef','Switch.php',29],['lib/zend/Zend/Gdata/Calendar/Extension','WebContent.php',47],['lib/zend/Zend/Gdata/Photos/Extension','Id.php',50],['lib/google/src/Google/Service','Games.php',60],['lib/zend/Zend/Validate/File','Size.php',92],['lib/classes/lock','file_lock_factory.php',57],['lib/htmlpurifier/HTMLPurifier/AttrTransform','SafeParam.php',27],['lib/phpexcel/PHPExcel/Reader','Gnumeric.php',64],['lib','filelib.php',2700],['lib','filelib.php',3560],['lib/classes/session','database.php',52],['lib/zend/Zend/Gdata/YouTube/Extension','Movies.php',44],['grade','lib.php',103],['grade','lib.php',785],['availability/condition/grouping/classes','condition.php',46],['lib/zend/Zend/Service/Technorati','SearchResult.php',84],['lib/dml','mysqli_native_moodle_recordset.php',42],['lib/zend/Zend/XmlRpc','Server.php',186],['mod/assign/feedback/editpdf/classes','annotation.php',66],['lib/htmlpurifier/HTMLPurifier/ConfigSchema','Validator.php',30],['lib/htmlpurifier','HTMLPurifier.php',104],['lib/zend/Zend/Gdata/Media/Extension','MediaPlayer.php',59],['lib/phpexcel/PHPExcel','Cell.php',122],['lib/phpexcel/PHPExcel/CachedObjectStorage','APC.php',248],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Percentage.php',18],['lib','oauthlib.php',65],['lib','oauthlib.php',409],['backup/util/helper','restore_log_rule.class.php',62],['lib/phpexcel/PHPExcel/Calculation','FormulaToken.php',108],['lib/zend/Zend/Server/Reflection','Class.php',66],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','Font.php',22],['mnet/service/enrol','locallib.php',48],['mnet/service/enrol','locallib.php',466],['mnet/service/enrol','locallib.php',537],['repository/flickr','lib.php',51],['lib','csvlib.class.php',64],['lib','csvlib.class.php',398],['lib/google/src/Google/Service','MapsEngine.php',66],['lib/xhprof/xhprof_lib/utils','xhprof_runs.php',87],['lib/filestorage','tgz_extractor.php',119],['lib/zend/Zend/Soap','Client.php',142],['lib/zend/Zend/Gdata/Calendar/Extension','Hidden.php',45],['cache/classes','factory.php',149],['lib/zend/Zend/Gdata/Media/Extension','MediaCredit.php',54],['course','dnduploadlib.php',109],['course','dnduploadlib.php',407],['mod/lti/classes/local/ltiservice','resource_base.php',62],['lib/zend/Zend/Http','Response.php',132],['lib/horde/framework/Horde/Imap/Client','Exception.php',247],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceListRequest.php',63],['backup/util/ui','backup_moodleform.class.php',41],['lib/phpexcel/PHPExcel/Chart','Layout.php',143],['comment','lib.php',100],['lib/phpexcel','PHPExcel.php',354],['grade/export/ods','grade_export_ods.php',24],['auth/cas/CAS/CAS','ProxyTicketException.php',46],['lib/minify/lib','JSMinPlus.php',193],['lib/minify/lib','JSMinPlus.php',726],['lib/minify/lib','JSMinPlus.php',1638],['lib/minify/lib','JSMinPlus.php',1656],['lib/minify/lib','JSMinPlus.php',1748],['lib/zend/Zend/Gdata/YouTube/Extension','Location.php',44],['lib/lessphp/Tree','Dimension.php',15],['lib/phpexcel/PHPExcel/Worksheet','Row.php',54],['lib/phpexcel/PHPExcel/Writer','HTML.php',135],['lib/zend/Zend/Service/Technorati','TagsResultSet.php',41],['backup/moodle2','backup_theme_plugin.class.php',61],['lib/zend/Zend/Gdata','Extension.php',43],['lib/htmlpurifier/HTMLPurifier/ChildDef','Custom.php',36],['lib/google/src/Google/Service','SiteVerification.php',43],['lib/htmlpurifier/HTMLPurifier/Token','Text.php',34],['mod/forum/classes','subscriber_selector_base.php',53],['lib/zend/Zend','Auth.php',45],['lib/phpexcel/PHPExcel/Style','Borders.php',121],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','CreateConferenceRequest.php',67],['lib/zend/Zend/Gdata/Calendar','ListFeed.php',54],['lib/zend/Zend/Gdata/Extension','Visibility.php',44],['webservice/xmlrpc','lib.php',42],['lib/phpexcel/PHPExcel/CachedObjectStorage','CacheBase.php',76],['lib/zend/Zend/Gdata/App','MediaEntry.php',57],['lib/horde/framework/Horde/Mime','Part.php',261],['backup/util/ui','backup_ui_stage.class.php',43],['backup/util/ui','backup_ui_stage.class.php',79],['backup/util/ui','backup_ui_stage.class.php',234],['backup/util/ui','backup_ui_stage.class.php',387],['backup/util/ui','backup_ui_stage.class.php',516],['backup/util/ui','backup_ui_stage.class.php',575],['question/classes/engine/variants','least_used_strategy.php',51],['lib/horde/framework/Horde/Support','Array.php',21],['lib/zend/Zend/Gdata/YouTube/Extension','Statistics.php',93],['lib/zend/Zend/Gdata/Photos/Extension','BytesUsed.php',50],['lib','tablelib.php',127],['lib','tablelib.php',1400],['lib','tablelib.php',1723],['lib/zend/Zend/Gdata/App/Extension','Uri.php',43],['backup/util/plan','backup_task.class.php',32],['backup/util/plan','backup_task.class.php',56],['lib/zend/Zend/Gdata/Media/Extension','MediaCopyright.php',53],['lib/zend/Zend/Gdata/DublinCore/Extension','Identifier.php',44],['backup/util/xml/parser/processors','findpaths_parser_processor.class.php',35],['lib/zend/Zend/Gdata/Gbase','Feed.php',49],['availability/condition/date/classes','condition.php',52],['backup/util/helper','restore_moodlexml_parser_processor.class.php',38],['admin/tool/generator/classes','course_backend.php',116],['lib/google/src/Google/Service','Prediction.php',51],['cache/stores/session','lib.php',131],['cache/classes','dummystore.php',62],['lib/zend/Zend/XmlRpc/Server','System.php',39],['lib/zend/Zend/Service/WindowsAzure/Storage','TableInstance.php',50],['backup/util/settings/course','course_backup_setting.class.php',25],['mod/quiz/classes/question','qubaids_for_users_attempts.php',37],['mod/lesson','override_form.php',58],['lib/zend/Zend/Service/Simpy','WatchlistSet.php',47],['lib/google/src/Google/Service','Compute.php',78],['badges/criteria','award_criteria.php',127],['lib/zend/Zend/Gdata/Calendar/Extension','Selected.php',45],['lib/minify/lib/Minify/Cache','ZendPlatform.php',23],['lib/zend/Zend/Validate','PostCode.php',65],['lib/dml','oci_native_moodle_temptables.php',40],['lib/zend/Zend/Gdata/Photos/Extension','CommentingEnabled.php',51],['lib/simplepie/library/SimplePie','Category.php',81],['auth/cas/CAS/CAS','CookieJar.php',46],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',45],['backup/util/ui','backup_ui_setting.class.php',70],['backup/util/ui','backup_ui_setting.class.php',200],['backup/util/ui','backup_ui_setting.class.php',398],['backup/util/ui','backup_ui_setting.class.php',504],['backup/util/ui','backup_ui_setting.class.php',583],['user/classes/output/myprofile','category.php',68],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',47],['mod/wiki/parser','parser.php',98],['backup/converter','convertlib.php',52],['backup/converter','convertlib.php',277],['repository/googledocs','lib.php',65],['lib/htmlpurifier/HTMLPurifier','Doctype.php',48],['lib/zend/Zend/Validate/File','Extension.php',71],['mod/imscp','locallib.php',289],['lib/classes/session','memcache.php',50],['lib/horde/framework/Horde/Imap/Client','Cache.php',53],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ImportantDecorator.php',21],['lib/zend/Zend/Service','Simpy.php',53],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',91],['lib/zend/Zend/Gdata/Gapps','EmailListRecipientQuery.php',54],['lib/zend/Zend/Gdata/YouTube','PlaylistVideoEntry.php',55],['lib/zend/Zend/Gdata/Photos','CommentEntry.php',85],['lib/horde/framework/Horde/Exception','PermissionDenied.php',15],['lib/zend/Zend/Gdata/YouTube','InboxEntry.php',92],['lib/jabber/XMPP','XMPP_Old.php',45],['lib/horde/framework/Horde/Imap/Client/Data/Format','Nil.php',27],['backup/cc/cc_lib','cc_converter_label.php',28],['lib/phpexcel/PHPExcel/Style','Border.php',75],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','GetConferenceTemplateParticipantRequest.php',53],['enrol/manual','locallib.php',37],['enrol/manual','locallib.php',102],['admin/tool/assignmentupgrade','locallib.php',50],['admin/tool/assignmentupgrade','locallib.php',93],['lib/zend/Zend/Gdata/Exif/Extension','Distance.php',49],['lib/phpexcel/PHPExcel/Writer','PDF.php',46],['lib/zend/Zend/Gdata/Photos/Extension','Size.php',50],['lib/google/src/Google/Service','CloudMonitoring.php',42],['backup/util/xml/output','memory_xml_output.class.php',37],['lib/horde/framework/Horde/Imap/Client/Data','Thread.php',41],['lib/simplepie/library/SimplePie','Credit.php',81],['lib/zend/Zend/Service','Delicious.php',112],['lib/bennu','iCalendar_components.php',21],['lib/bennu','iCalendar_components.php',333],['lib/bennu','iCalendar_components.php',355],['lib/bennu','iCalendar_components.php',433],['lib/bennu','iCalendar_components.php',513],['lib/bennu','iCalendar_components.php',551],['lib/bennu','iCalendar_components.php',602],['lib/bennu','iCalendar_components.php',659],['lib/bennu','iCalendar_components.php',679],['lib','outputrenderers.php',117],['lib','outputrenderers.php',282],['lib','outputrenderers.php',405],['lib','outputrenderers.php',4280],['lib','outputrenderers.php',4533],['lib/zend/Zend/Service/Amazon','ListmaniaList.php',44],['lib/zend/Zend/Service','Flickr.php',54],['backup/util/helper','restore_decode_rule.class.php',47],['backup/util/helper','restore_decode_rule.class.php',192],['lib/mustache/src/Mustache/Exception','UnknownFilterException.php',22],['lib/google/src/Google/Logger','File.php',49],['backup','backup.class.php',146],['lib/zend/Zend/Gdata/App/Extension','Updated.php',43],['lib/zend/Zend/Gdata/YouTube','PlaylistVideoFeed.php',55],['auth/cas/CAS/CAS/PGTStorage','Db.php',122],['lib/phpexcel/PHPExcel/Chart','DataSeries.php',137],['lib/zend/Zend/Gdata/Geo','Feed.php',51],['lib/phpexcel/PHPExcel/Shared/trend','logarithmicBestFitClass.php',107],['backup/util/loggers','file_logger.class.php',35],['admin/roles/classes','admins_existing_selector.php',30],['lib/phpexcel/PHPExcel/Shared/JAMA','LUDecomposition.php',57],['lib/zend/Zend/Gdata/Extension','Reminder.php',48],['course/format/topics','renderer.php',38],['mod/lesson/classes','file_info.php',45],['question/type/calculatedmulti','edit_calculatedmulti_form.php',47],['lib/phpexcel/PHPExcel/Worksheet','AutoFilter.php',62],['lib/minify/lib/HTTP','Encoder.php',75],['lib/zend/Zend/Gdata/App/Extension','Name.php',43],['lib/google/src/Google/Service','Calendar.php',50],['question/type','questionbase.php',124],['question/type','questionbase.php',438],['question/type','questionbase.php',531],['question/type','questionbase.php',750],['question/type','questionbase.php',835],['question/type','questionbase.php',868],['question/type','questionbase.php',914],['question/type','questionbase.php',1013],['lib/dml','database_column_info.php',137],['lib/zend/Zend/Gdata/YouTube/Extension','Gender.php',44],['lib/zend/Zend/Service','Yahoo.php',49],['lib/zend/Zend/Service/Amazon','SimilarProduct.php',44],['lib/mustache/src/Mustache/Exception','SyntaxException.php',23],['lib/htmlpurifier/HTMLPurifier','URIDefinition.php',21],['lib/horde/framework/Horde','Stream.php',50],['lib/google/src/Google/Service','Analytics.php',76],['lib/horde/framework/Horde/Mail/Transport','Mock.php',76],['lib/xmldb','xmldb_file.php',43],['lib/zend/Zend/Gdata/YouTube','PlaylistListEntry.php',97],['lib/zend/Zend/Service/Amazon/Ec2','Response.php',78],['lib/zend/Zend/Soap/Wsdl/Strategy','Composite.php',60],['lib/google/src/Google/Service','Tasks.php',44],['lib/zend/Zend/XmlRpc','Response.php',68],['lib/horde/framework/Horde/Exception','NotFound.php',15],['lib/horde/framework/Horde/Mail/Rfc822','Address.php',66],['lib/zend/Zend/Gdata/Books','VolumeEntry.php',131],['question','previewlib.php',122],['mod/wiki','renderer.php',537],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',62],['mod/assign','renderable.php',41],['mod/assign','renderable.php',71],['mod/assign','renderable.php',103],['mod/assign','renderable.php',139],['mod/assign','renderable.php',191],['mod/assign','renderable.php',242],['mod/assign','renderable.php',291],['mod/assign','renderable.php',393],['mod/assign','renderable.php',517],['mod/assign','renderable.php',576],['mod/assign','renderable.php',613],['mod/assign','renderable.php',653],['mod/assign','renderable.php',706],['mod/assign','renderable.php',760],['lib/mustache/src/Mustache','Autoloader.php',19],['lib/zend/Zend/Service/DeveloperGarden/Request/SmsValidation','Invalidate.php',46],['lib/zend/Zend/Service/Yahoo','ImageResult.php',97],['lib/phpexcel/PHPExcel/Worksheet','HeaderFooter.php',183],['mod/quiz/classes/question/bank','custom_view.php',44],['lib/htmlpurifier/HTMLPurifier/Token','Tag.php',33],['lib/zend/Zend/Amf/Adobe','Auth.php',56],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','FontFamily.php',11],['auth/cas/CAS/CAS','TypeMismatchException.php',43],['grade/report/singleview/classes/local/screen','screen.php',67],['lib/zend/Zend/Amf/Parse','Deserializer.php',45],['lib/zend/Zend/Service/Delicious','SimplePost.php',56],['lib/zend/Zend/Service/Technorati','ResultSet.php',112],['cache/classes','loaders.php',196],['cache/classes','loaders.php',1211],['cache/classes','loaders.php',1606],['lib/zend/Zend/Gdata/Gbase','Entry.php',62],['lib/zend/Zend/Validate','Identical.php',64],['lib/horde/framework/Horde/Mail/Transport','Sendmail.php',65],['cache/stores/mongodb','lib.php',116],['mod/quiz/report/statistics/classes','calculator.php',39],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','FrameTarget.php',19],['lib/zend/Zend/Gdata/App/Extension','Draft.php',44],['enrol/ldap','settingslib.php',32],['enrol/ldap','settingslib.php',90],['enrol/ldap','settingslib.php',204],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ConferenceDetail.php',54],['lib/zend/Zend/Service/Yahoo','InlinkDataResult.php',47],['lib/lessphp/Tree','UnicodeDescriptor.php',14],['lib/lessphp/Tree','Directive.php',20],['lib/zend/Zend/Service/Yahoo','VideoResult.php',118],['question/type/calculated','edit_calculated_form.php',51],['lib/classes','string_manager_install.php',43],['lib/google/src/Google/Service','GamesManagement.php',50],['lib/google/src/Google/Logger','Psr.php',37],['grade/report/history/classes/output','user_button.php',40],['lib','externallib.php',129],['lib','externallib.php',426],['lib','externallib.php',457],['lib','externallib.php',488],['lib','externallib.php',517],['lib','externallib.php',649],['lib','externallib.php',684],['lib','externallib.php',782],['backup/util/ui','base_ui_stage.class.php',67],['lib/zend/Zend/Validate','CreditCard.php',136],['lib/zend/Zend/Gdata/Spreadsheets','CellQuery.php',57],['lib/htmlpurifier/HTMLPurifier/AttrDef','Clone.php',18],['mod/quiz/accessrule','accessrulebase.php',52],['lib/mustache/src/Mustache','Context.php',20],['lib/zend/Zend/Service/DeveloperGarden/Request/VoiceButler','CallStatus.php',46],['lib/zend/Zend/Gdata/Spreadsheets','CellFeed.php',78],['backup/util/xml/parser/processors','progressive_parser_processor.class.php',57],['lib/lessphp/Tree','Color.php',15],['lib/zend/Zend/Service/StrikeIron','Base.php',56],['lib/zend/Zend/Gdata/Exif/Extension','FStop.php',49],['lib/htmlpurifier/HTMLPurifier/AttrTransform','BoolToCSS.php',24],['lib/horde/framework/Horde/Imap/Client/Ids','Map.php',44],['lib/zend/Zend/Service/Simpy','Tag.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','Enum.php',30],['cache/classes','helper.php',90],['lib/zend/Zend/Soap','Wsdl.php',73],['lib/htmlpurifier/HTMLPurifier/Lexer','DOMLex.php',35],['lib/zend/Zend/Validate/Barcode','Code25interleaved.php',53],['webservice/soap','locallib.php',162],['lib/lessphp/Tree','Quoted.php',20],['lib/simplepie/library/SimplePie/Cache','Memcache.php',81],['lib/zend/Zend/Gdata/YouTube','ActivityEntry.php',88],['backup/controller','restore_controller.class.php',63],['backup/controller','restore_controller.class.php',517],['lib/zend/Zend/Service','Audioscrobbler.php',65],['lib/zend/Zend/Service/Flickr','ResultSet.php',82],['lib/mustache/src/Mustache/Logger','StreamLogger.php',44],['lib/zend/Zend/XmlRpc/Request','Stdin.php',47],['lib/zend/Zend/Service/DeveloperGarden/Request/SmsValidation','Validate.php',63],['mod/glossary','locallib.php',481],['lib/google/src/Google/Logger','Abstract.php',121],['lib/horde/framework/Horde/Support','Guid.php',24],['lib/zend/Zend/Http/Client/Adapter','Curl.php',92],['lib/google/src/Google/Service','Oauth2.php',50],['lib/phpmailer','moodle_phpmailer.php',47],['lib/zend/Zend/Validate/Barcode','Intelligentmail.php',47],['repository/skydrive','microsoftliveapi.php',50],['mod/workshop/allocation/manual','lib.php',51],['lib/zend/Zend/Validate/File','Exists.php',62],['lib/xhprof','xhprof_moodle.php',788],['question/classes/bank/search','category_condition.php',60],['lib/markdown','Markdown.php',96],['grade/report/grader','lib.php',104],['lib/zend/Zend/Gdata/YouTube/Extension','Control.php',48],['lib/zend/Zend/Validate','StringLength.php',79],['question/behaviour','behaviourbase.php',50],['backup/cc/cc_lib','cc_converter_forum.php',29],['lib/zend/Zend/Gdata/Photos/Extension','Nickname.php',50],['lib/zend/Zend/Gdata/Exif/Extension','Tags.php',169],['lib/zend/Zend/Uri','Http.php',108],['lib/zend/Zend/Gdata/YouTube/Extension','Hometown.php',44],['cache/stores/file','lib.php',117],['lib/zend/Zend/Service','Amazon.php',75],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',12],['lib/zend/Zend/Gdata/Media/Extension','MediaThumbnail.php',64],['lib/zend/Zend/Service/Yahoo','Image.php',56],['lib/zend/Zend/Gdata','Feed.php',87],['lib/google/src/Google/Service','Storage.php',54],['backup/cc/cc_lib','cc_asssesment.php',290],['backup/cc/cc_lib','cc_asssesment.php',345],['backup/cc/cc_lib','cc_asssesment.php',364],['backup/cc/cc_lib','cc_asssesment.php',415],['backup/cc/cc_lib','cc_asssesment.php',476],['backup/cc/cc_lib','cc_asssesment.php',486],['backup/cc/cc_lib','cc_asssesment.php',561],['backup/cc/cc_lib','cc_asssesment.php',585],['backup/cc/cc_lib','cc_asssesment.php',635],['backup/cc/cc_lib','cc_asssesment.php',668],['backup/cc/cc_lib','cc_asssesment.php',693],['backup/cc/cc_lib','cc_asssesment.php',788],['backup/cc/cc_lib','cc_asssesment.php',814],['backup/cc/cc_lib','cc_asssesment.php',838],['backup/cc/cc_lib','cc_asssesment.php',965],['backup/cc/cc_lib','cc_asssesment.php',971],['backup/cc/cc_lib','cc_asssesment.php',986],['backup/cc/cc_lib','cc_asssesment.php',1003],['backup/cc/cc_lib','cc_asssesment.php',1017],['backup/cc/cc_lib','cc_asssesment.php',1045],['backup/cc/cc_lib','cc_asssesment.php',1186],['backup/cc/cc_lib','cc_asssesment.php',1263],['backup/cc/cc_lib','cc_asssesment.php',1317],['backup/cc/cc_lib','cc_asssesment.php',1389],['backup/cc/cc_lib','cc_asssesment.php',1451],['backup/cc/cc_lib','cc_asssesment.php',1558],['backup/cc/cc_lib','cc_asssesment.php',1620],['backup/cc/cc_lib','cc_asssesment.php',1648],['backup/cc/cc_lib','cc_asssesment.php',1716],['backup/cc/cc_lib','cc_asssesment.php',2155],['backup/cc/cc_lib','cc_asssesment.php',2264],['backup/cc/cc_lib','cc_asssesment.php',2469],['admin/tool/uploadcourse/classes','course.php',111],['lib/zend/Zend/Gdata/Extension','Where.php',52],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','ListStyle.php',20],['lib/zend/Zend/Service/Amazon','S3.php',102],['lib/horde/framework/Horde/Stream','Existing.php',28],['backup/util/output','output_controller.class.php',44],['backup/cc/cc_lib','cc_version1.php',57],['question/classes/statistics/responses','analysis_for_question.php',58],['lib/zend/Zend/Service/Simpy','Link.php',104],['backup/converter/moodle1','handlerlib.php',120],['backup/converter/moodle1','handlerlib.php',1710],['backup/converter/moodle1','handlerlib.php',1902],['backup/converter/moodle1','handlerlib.php',2155],['cache','lib.php',66],['cache','lib.php',109],['cache','lib.php',138],['cache','lib.php',183],['lib/zend/Zend/Gdata','Calendar.php',77],['lib/zend/Zend/Validate','Date.php',71],['backup/util/structure','base_atom.class.php',41],['backup/util/structure','base_atom.class.php',114],['backup/util/structure','base_atom.class.php',135],['backup/util/structure','base_atom.class.php',156],['lib/xmldb','xmldb_table.php',49],['lib/htmlpurifier/HTMLPurifier','Encoder.php',10],['backup/cc','cc112moodle.php',59],['lib/zend/Zend/XmlRpc/Client','ServerIntrospection.php',43],['lib/zend/Zend/Gdata/Photos','PhotoFeed.php',147],['backup/controller','backup_controller.class.php',68],['backup/controller','backup_controller.class.php',407],['lib','adminlib.php',792],['lib','adminlib.php',1139],['lib','adminlib.php',1213],['lib','adminlib.php',1356],['lib','adminlib.php',1553],['lib','adminlib.php',1925],['lib','adminlib.php',2037],['lib','adminlib.php',2103],['lib','adminlib.php',2204],['lib','adminlib.php',2246],['lib','adminlib.php',2284],['lib','adminlib.php',2372],['lib','adminlib.php',2406],['lib','adminlib.php',2563],['lib','adminlib.php',2648],['lib','adminlib.php',2877],['lib','adminlib.php',3033],['lib','adminlib.php',3175],['lib','adminlib.php',3266],['lib','adminlib.php',3430],['lib','adminlib.php',3510],['lib','adminlib.php',3621],['lib','adminlib.php',3772],['lib','adminlib.php',4001],['lib','adminlib.php',4068],['lib','adminlib.php',4286],['lib','adminlib.php',4315],['lib','adminlib.php',4344],['lib','adminlib.php',4368],['lib','adminlib.php',4398],['lib','adminlib.php',4434],['lib','adminlib.php',4469],['lib','adminlib.php',4501],['lib','adminlib.php',4591],['lib','adminlib.php',4624],['lib','adminlib.php',4680],['lib','adminlib.php',4704],['lib','adminlib.php',4730],['lib','adminlib.php',4753],['lib','adminlib.php',4770],['lib','adminlib.php',4815],['lib','adminlib.php',4878],['lib','adminlib.php',4913],['lib','adminlib.php',4956],['lib','adminlib.php',5039],['lib','adminlib.php',5169],['lib','adminlib.php',5211],['lib','adminlib.php',5256],['lib','adminlib.php',5313],['lib','adminlib.php',5329],['lib','adminlib.php',5385],['lib','adminlib.php',5610],['lib','adminlib.php',5664],['lib','adminlib.php',5718],['lib','adminlib.php',5735],['lib','adminlib.php',5783],['lib','adminlib.php',5825],['lib','adminlib.php',5876],['lib','adminlib.php',5932],['lib','adminlib.php',6161],['lib','adminlib.php',6341],['lib','adminlib.php',6435],['lib','adminlib.php',6582],['lib','adminlib.php',7206],['lib','adminlib.php',7658],['lib','adminlib.php',7841],['lib','adminlib.php',8128],['lib','adminlib.php',8275],['lib','adminlib.php',8435],['lib','adminlib.php',8582],['lib','adminlib.php',8746],['lib','adminlib.php',8939],['lib','adminlib.php',8993],['lib','adminlib.php',9055],['lib','adminlib.php',9100],['mod/workshop/eval/best','lib.php',44],['lib/zend/Zend/Gdata/Calendar','EventQuery.php',91],['lib/zend/Zend/Service/Technorati','TagResult.php',94],['lib/google/src/Google/Cache','Null.php',26],['enrol/flatfile','adminlib.php',35],['lib/phpexcel/PHPExcel/Chart','PlotArea.php',52],['mod/quiz/report/statistics','statistics_question_table.php',49],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','AddConferenceTemplateParticipantRequest.php',53],['mod/data','lib.php',66],['mod/data','lib.php',2164],['mod/data','lib.php',2438],['mod/data','lib.php',2459],['question/classes/statistics/questions','calculated_for_subquestion.php',57],['lib/horde/framework/Horde/Crypt/Blowfish','Base.php',56],['lib/classes/session','memcached.php',51],['lib/google/src/Google/IO','Abstract.php',37],['availability/classes','info_section.php',40],['lib/zend/Zend/Gdata/YouTube/Extension','Books.php',44],['lib/phpexcel/PHPExcel/Shared/JAMA','QRDecomposition.php',48],['lib/filestorage','stored_file.php',63],['grade/report/history/classes/output','tablelog.php',72],['lib/classes','plugin_manager.php',71],['lib/google/src/Google','Model.php',32],['lib/zend/Zend/Gdata/YouTube/Extension','Relationship.php',44],['lib/horde/framework/Horde/Crypt','Blowfish.php',54],['lib/filebrowser','virtual_root_file.php',45],['auth/cas/CAS/CAS','OutOfSequenceBeforeClientException.php',47],['availability/condition/grade/classes','condition.php',46],['lib/phpexcel/PHPExcel/CachedObjectStorage','DiscISAM.php',188],['admin/roles/classes','check_capability_table.php',40],['lib/zend/Zend/Gdata/Media','Entry.php',60],['lib/zend/Zend/Gdata','MimeFile.php',43],['admin/tool/xmldb/actions','XMLDBAction.class.php',56],['backup/cc/cc_lib','cc_resources.php',102],['lib/zend/Zend/Loader/Autoloader','Resource.php',62],['lib/phpexcel/PHPExcel/Worksheet','PageMargins.php',80],['backup/util/xml/parser/processors','simplified_parser_processor.class.php',46],['lib/simplepie/library/SimplePie','IRI.php',252],['lib/htmlpurifier/HTMLPurifier','ContentSets.php',33],['lib/htmlpurifier/HTMLPurifier','HTMLModuleManager.php',68],['lib/htmlpurifier/HTMLPurifier/Token','Comment.php',19],['lib/zend/Zend/Gdata/Calendar/Extension','SendEventNotifications.php',44],['lib/zend/Zend/Service/WindowsAzure/Storage','TableEntity.php',66],['lib/zend/Zend/Service/DeveloperGarden/Request/LocalSearch','LocalSearchRequest.php',60],['mod/quiz/report/overview','overview_table.php',41],['lib/zend/Zend/Gdata/Photos/Extension','Client.php',51],['backup/cc/cc_lib','cc_converters.php',75],['lib/google/src/Google/Service','AdSense.php',68],['lib/zend/Zend/Gdata','Entry.php',48],['lib','filterlib.php',74],['lib','filterlib.php',382],['lib/lessphp/Tree','Alpha.php',13],['lib/zend/Zend/Gdata','DublinCore.php',51],['lib/horde/framework/Horde/Support','Stack.php',18],['lib/lessphp/Tree','Selector.php',31],['lib/zend/Zend/Service','Nirvanix.php',47],['lib/dtl','file_xml_database_importer.php',34],['mod/workshop','mod_form.php',44],['lib/zend/Zend/Service/Technorati','CosmosResultSet.php',73],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',39],['lib/zend/Zend/Gdata/YouTube/Extension','Age.php',44],['repository/s3','S3.php',176],['repository/s3','S3.php',1994],['repository/s3','S3.php',2346],['lib/lessphp/Tree','Ruleset.php',45],['lib/zend/Zend/Service/Simpy','NoteSet.php',47],['backup/util/xml/output','xml_output.class.php',52],['backup/util/xml/output','xml_output.class.php',158],['lib/google/src/Google/Service','Pubsub.php',44],['lib/alfresco/Service','Node.php',51],['lib/zend/Zend/Service','Technorati.php',79],['lib/horde/framework/Horde/Imap/Client/Data','BaseSubject.php',39],['admin/tool/monitor/classes','subscription.php',43],['lib/zend/Zend/Gdata/App/Extension','Person.php',61],['backup/moodle2','backup_course_task.class.php',39],['grade/report/singleview/classes/local/ui','text_attribute.php',42],['lib/dml','sqlsrv_native_moodle_recordset.php',40],['lib/zend/Zend/Gdata/YouTube','ContactEntry.php',61],['lib/zend/Zend/Gdata/Extension','AttendeeType.php',44],['lib/htmlpurifier/HTMLPurifier/AttrDef/HTML','Pixels.php',17],['mod/assignment/backup/moodle1','lib.php',223],['lib/zend/Zend/Gdata/Health/Extension','Ccr.php',43],['lib/horde/framework/Horde/Mail/Rfc822','Identification.php',34],['mod/quiz','mod_form.php',48],['backup/util/structure','restore_path_element.class.php',47],['backup/util/structure','restore_path_element.class.php',128],['lib/zend/Zend/Gdata/Calendar','EventFeed.php',55],['lib/zend/Zend/Gdata/Spreadsheets','DocumentQuery.php',57],['availability/tests/fixtures','mock_condition.php',52],['lib/lessphp','Visitor.php',14],['mod/assign/feedback/editpdf/classes','widget.php',53],['lib/minify/lib/Minify/Cache','File.php',9],['lib/zend/Zend/Gdata/Exif','Entry.php',64],['grade/tests','reportlib_test.php',36],['mod/workshop/allocation','lib.php',103],['lib/zend/Zend/Service/WindowsAzure/Storage','BlobInstance.php',57],['lib/zend/Zend/Gdata/Photos/Extension','User.php',50],['admin/tool/uploadcourse/classes','tracker.php',72],['lib/zend/Zend/Service/Technorati','GetInfoResult.php',52],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',61],['lib/zend/Zend/Gdata/YouTube/Extension','Hobbies.php',44],['lib/mustache/src/Mustache/Loader','ArrayLoader.php',31],['lib/zend/Zend/Gdata/Photos/Extension','Width.php',50],['admin/roles/classes','view_role_definition_table.php',28],['lib/phpunit/classes','arraydataset.php',45],['lib/horde/framework/Horde/Imap/Client/Data','Sync.php',133],['lib/zend/Zend','Exception.php',34],['backup/util/xml/parser/tests','parser_test.php',797],['lib/zend/Zend/Validate/File','ImageSize.php',113],['lib/zend/Zend/Validate','Alnum.php',65],['lib/zend/Zend/Service/Flickr','Image.php',62],['lib/phpexcel/PHPExcel/Calculation','Function.php',71],['lib/horde/framework/Horde/Support','Inflector.php',115],['lib/horde/framework/Horde/Exception','Pear.php',22],['question/classes/bank','random_question_loader.php',61],['lib/phpexcel/PHPExcel/Reader','HTML.php',104],['lib/mustache/src/Mustache/Loader','InlineLoader.php',57],['lib/zend/Zend/Gdata/Photos/Extension','QuotaLimit.php',51],['admin/tool/uploadcourse/classes','processor.php',122],['lib/zend/Zend/Gdata/Spreadsheets','WorksheetFeed.php',40],['lib/lessphp/Tree','Rule.php',24],['lib/zend/Zend/Service/Amazon','EditorialReview.php',44],['lib/zend/Zend/Service/ReCaptcha','MailHide.php',86],['lib/htmlpurifier/HTMLPurifier/AttrTransform','NameSync.php',11],['lib/classes/progress','display_if_slow.php',60],['availability/condition/group/classes','condition.php',43],['lib/zend/Zend/Gdata/Photos/Extension','Location.php',50],['backup/moodle2','restore_settingslib.php',125],['lib/filebrowser','file_info.php',43],['repository/equella','lib.php',42],['lib/zend/Zend/Http','Client.php',242],['lib/alfresco/Service','ChildAssociation.php',30],['lib/zend/Zend/Gdata/DublinCore/Extension','Subject.php',44],['lib/zend/Zend/Gdata/App/Extension','Category.php',46],['badges/lib','awardlib.php',55],['admin/roles/classes','override_permissions_table_advanced.php',31],['lib/mustache/src/Mustache','Template.php',29],['backup/util/helper','restore_roles_parser_processor.class.php',39],['lib','csslib.php',1501],['lib','csslib.php',1587],['lib','csslib.php',2068],['lib','csslib.php',2136],['lib','csslib.php',2242],['lib/zend/Zend/Service/WindowsAzure/Storage','QueueInstance.php',49],['mod/lti/service/toolproxy/classes/local/service','toolproxy.php',41],['admin/roles/classes','define_role_table_advanced.php',46],['backup/moodle2','restore_section_task.class.php',42],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',44],['lib/google/src/Google','Client.php',71],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',69],['backup/moodle2','restore_plugin.class.php',43],['lib/simplepie/library/SimplePie','Registry.php',99],['backup/cc','cc2moodle.php',105],['lib/classes/lock','postgres_lock_factory.php',81],['lib/phpexcel/PHPExcel/Shared','XMLWriter.php',56],['lib/htmlpurifier/HTMLPurifier','Length.php',41],['lib/zend/Zend/Validate/File','Count.php',92],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',54],['lib/editor/atto','adminlib.php',109],['lib/google/src/Google/Service','Admin.php',40],['lib/dml','moodle_transaction.php',40],['backup/util/plan','restore_structure_step.class.php',46],['question/engine','questionattempt.php',166],['question/engine','questionattempt.php',1513],['question/engine','questionattempt.php',1599],['question/engine','questionattempt.php',1684],['lib/zend/Zend/Service/Technorati','Weblog.php',152],['lib/zend/Zend/Service/DeveloperGarden/ConferenceCall','ParticipantStatus.php',48],['lib/htmlpurifier/HTMLPurifier/AttrDef','URI.php',23],['backup/util/helper','restore_decode_content.class.php',50],['backup/util/helper','restore_decode_content.class.php',125],['lib/google/src/Google/Cache','File.php',39],['lib/google/src/Google/Http','Request.php',55],['backup/moodle2','backup_block_task.class.php',43],['lib/simplepie/library/SimplePie','Source.php',61],['lib/google/src/Google/Service','Translate.php',40],['availability/classes','capability_checker.php',49],['lib','navigationlib.php',145],['lib','navigationlib.php',1012],['lib','navigationlib.php',2814],['lib','navigationlib.php',3075],['lib','navigationlib.php',3409],['lib','navigationlib.php',4775],['lib','navigationlib.php',4956],['lib/zend/Zend/Gdata/YouTube/Extension','MediaCredit.php',64],['lib/dml','pdo_moodle_database.php',42],['lib/zend/Zend/Gdata/YouTube/Extension','ReleaseDate.php',44],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',40],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',221],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','NewParticipantRequest.php',53],['lib/zend/Zend/Gdata/Spreadsheets/Extension','RowCount.php',49],['lib/zend/Zend/Validate/File','IsCompressed.php',53],['lib/zend/Zend/Gdata/Photos/Extension','MaxPhotosPerAlbum.php',51],['lib/zend/Zend/Gdata/Extension','When.php',52],['question/classes/bank/search','hidden_condition.php',42],['report/loglive/classes','renderable.php',73],['mod/lti/classes/local/ltiservice','response.php',58],['lib/zend/Zend/Gdata/Extension','Recurrence.php',43],['lib/zend/Zend/Gdata/Books/Extension','BooksLink.php',41],['backup/util/loggers','database_logger.class.php',40],['lib/phpexcel/PHPExcel/CachedObjectStorage','Wincache.php',250],['lib/phpexcel/PHPExcel','HashTable.php',52],['lib/horde/framework/Horde/Imap/Client/Namespace','List.php',34],['lib/htmlpurifier/HTMLPurifier','Zipper.php',25],['lib/classes/update','deployer.php',42],['lib/zend/Zend/Gdata/YouTube','VideoFeed.php',53],['lib/zend/Zend/Service/DeveloperGarden/Request/BaseUserService','GetQuotaInformation.php',40],['lib/minify/lib','CSSmin.php',43],['lib/zend/Zend/Validate/File','Crc32.php',60],['mod/feedback/item','feedback_item_class.php',20],['question/engine/upgrade','upgradelib.php',280],['question/engine/upgrade','upgradelib.php',381],['lib/simplepie/library/SimplePie','Copyright.php',73],['lib/zend/Zend/Gdata/Spreadsheets','SpreadsheetEntry.php',43],['lib/google/src/Google/Service','Dns.php',50],['lib/zend/Zend/Gdata/Gapps','Query.php',57],['lib/zend/Zend/Gdata/YouTube/Extension','School.php',44],['lib/mustache/src/Mustache','HelperCollection.php',19],['mod/assign','gradingtable.php',68],['backup/util/xml/output','file_xml_output.class.php',37],['lib','upgradelib.php',45],['lib','upgradelib.php',61],['lib','upgradelib.php',76],['lib','upgradelib.php',94],['lib','upgradelib.php',111],['lib/zend/Zend/Service','Akismet.php',77],['lib','googleapi.php',52],['lib','googleapi.php',243],['lib/zend/Zend/Service/Yahoo','ResultSet.php',84],['lib/classes/message/inbound','processing_failed_exception.php',36],['lib','portfoliolib.php',101],['lib/lessphp/Tree','Import.php',30],['lib/phpexcel/PHPExcel/Shared/JAMA','SingularValueDecomposition.php',53],['lib/tests/fixtures','test_renderer_factory.php',41],['mod/lesson','editpage_form.php',41],['grade/report','lib.php',156],['lib/zend/Zend/XmlRpc/Request','Http.php',53],['lib/filebrowser','file_info_stored.php',51],['lib/phpexcel/PHPExcel/Style','Protection.php',57],['lib/google/src/Google','Config.php',30],['lib/horde/framework/Horde/Imap/Client/Exception','ServerResponse.php',44],['lib/zend/Zend/Validate','LessThan.php',58],['grade/export','lib.php',60],['lib/zend/Zend/Gdata/YouTube/Extension','PlaylistTitle.php',44],['availability/classes','tree.php',118],['lib/htmlpurifier/HTMLPurifier/Node','Text.php',35],['question/classes/statistics/responses','analysis_for_subpart.php',50],['lib/zend/Zend/Validate','InArray.php',65],['lib/htmlpurifier/HTMLPurifier/AttrDef/CSS','BackgroundPosition.php',57],['lib/zend/Zend/Gdata/Photos/Extension','Height.php',50],['lib/zend/Zend/Gdata/Gapps','Error.php',76],['backup/util/helper','restore_decode_processor.class.php',47],['backup/util/helper','restore_decode_processor.class.php',182],['lib/phpexcel/PHPExcel','Chart.php',150],['lib/google/src/Google/Service','Replicapool.php',48],['lib/zend/Zend/Gdata/Media/Extension','MediaRating.php',49],['lib/zend/Zend/Gdata/YouTube','VideoEntry.php',175],['admin/tool/installaddon/classes','pluginfo_client.php',68],['admin/tool/installaddon/classes','pluginfo_client.php',206],['lib/google/src/Google/Service','Resourceviews.php',54],['admin/tool/log/store/legacy/classes/log','store.php',33],['backup/moodle2','backup_section_task.class.php',40],['lib/phpexcel/PHPExcel/Worksheet','CellIterator.php',68],['question/type/tests','question_first_matching_answer_grading_strategy_test.php',40],['repository/youtube','lib.php',40],['lib/tcpdf/include/barcodes','datamatrix.php',229],['lib/testing/generator','component_generator_base.php',45],['lib/zend/Zend/Gdata/DublinCore/Extension','Format.php',44],['lib','badgeslib.php',133],['admin/tool/installaddon/classes','installer.php',488],['admin/tool/installaddon/classes','installer.php',745],['lib/zend/Zend/XmlRpc','Client.php',122],['lib/mustache/src/Mustache','LambdaHelper.php',24],['admin/roles/classes','permissions_table.php',38],['lib/jabber/XMPP','XMLObj.php',76],['lib','coursecatlib.php',197],['lib','coursecatlib.php',2668],['question/type','edit_question_form.php',96],['lib/zend/Zend/Gdata','MediaMimeStream.php',80],['mod/quiz/report/responses','last_responses_table.php',39],['lib/zend/Zend/Gdata/Photos/Extension','Timestamp.php',51],['lib','setuplib.php',106],['lib','setuplib.php',158],['lib','setuplib.php',174],['lib','setuplib.php',194],['lib','setuplib.php',224],['lib','setuplib.php',246],['lib','setuplib.php',262],['lib','setuplib.php',284],['lib','setuplib.php',303],['lib','setuplib.php',321],['lib/google/src/Google/Cache','Apc.php',35],['mod/lti/service/toolsettings/classes/local/service','toolsettings.php',41],['lib/htmlpurifier/HTMLPurifier','ErrorCollector.php',57],['lib/lessphp/Tree','Unit.php',16],['lib/zend/Zend/Service/DeveloperGarden/Request/VoiceButler','TearDownCall.php',46],['lib/minify/lib/HTTP','ConditionalGet.php',109],['lib/phpexcel/PHPExcel/CachedObjectStorage','SQLite.php',261],['lib/htmlpurifier/HTMLPurifier','Printer.php',21],['lib/zend/Zend/Service/Amazon','CustomerReview.php',69],['lib/zend/Zend/Gdata/YouTube/Extension','QueryString.php',44],['lib/zend/Zend/Gdata/Gapps/Extension','Name.php',65],['mod/assign','adminlib.php',41],['mod/assign','adminlib.php',102],['lib/lessphp/Tree','RulesetCall.php',14],['lib/zend/Zend/Gdata/Extension','Rating.php',49],['repository/alfresco','lib.php',42],['lib/zend/Zend/Service/Technorati','SearchResultSet.php',49],['lib/zend/Zend/Gdata/Photos','UserQuery.php',71],['enrol','renderer.php',426],['enrol','renderer.php',728],['badges/criteria','award_criteria_course.php',47],['lib/zend/Zend/Gdata/Extension','RecurrenceException.php',56],['lib/phpexcel/PHPExcel/Style','Fill.php',89],['lib/zend/Zend/Service/Technorati','TagsResult.php',60],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',60],['lib/google/src/Google/Service','Exception.php',12],['lib/zend/Zend/Gdata','Spreadsheets.php',115],['lib/xmldb','xmldb_index.php',56],['question/classes/statistics/responses','analyser.php',69],['lib/htmlpurifier/HTMLPurifier/Node','Comment.php',19],['lib/zend/Zend/Gdata/Photos/Extension','Position.php',50],['lib/google/src/Google/Auth','Simple.php',32],['lib/zend/Zend/Gdata/Geo/Extension','GmlPoint.php',62],['lib/horde/framework/Horde/Crypt/Blowfish/Php','Base.php',318],['lib/horde/framework/Horde/Imap/Client/Cache','Backend.php',33],['lib/zend/Zend/Rest','Route.php',71],['lib/zend/Zend/Service/DeveloperGarden/Request/ConferenceCall','UpdateConferenceTemplateParticipantRequest.php',60],['question','category_class.php',58],['lib/classes/progress','display.php',48],['lib/horde/framework/Horde/Imap/Client/Exception','NoSupportExtension.php',33],['lib/zend/Zend/Gdata/App/Extension','Rights.php',43],['lib/adodb','adodb-active-record.inc.php',113],['lib/horde/framework/Horde/Exception','Wrapped.php',16],['lib/zend/Zend/Validate','NotEmpty.php',77],['question/type/calculated','datasetitems_form.php',72],['lib/horde/framework/Horde/Support','ObjectStub.php',29],['lib/dml','pdo_moodle_recordset.php',41],['backup/cc/cc_lib','cc_converter_folder.php',28],['lib/horde/framework/Horde/Mime','Mail.php',93],['lib/zend/Zend/Gdata/Calendar','ListEntry.php',85],['admin/tool/monitor/classes','rule.php',44],['backup/cc/cc_lib','cc_utils.php',313],['backup/cc/cc_lib','cc_utils.php',381],['backup/cc/cc_lib','cc_utils.php',437],['lib/horde/framework/Horde/Imap/Client/Auth','DigestMD5.php',69],['lib/zend/Zend/Gdata/Geo','Entry.php',55],['lib/zend/Zend/Gdata/YouTube/Extension','Link.php',48],['lib','flickrlib.php',53],['lib/zend/Zend/Gdata/YouTube/Extension','AboutMe.php',44],['lib/zend/Zend/Service/DeveloperGarden','Credential.php',54],['grade/report/overview','lib.php',76],['lib/simplepie/library/SimplePie','File.php',68],['backup/moodle2','backup_plugin.class.php',44],['lib/zend/Zend/Gdata/Extension','ExtendedProperty.php',46],['backup/cc/cc_lib','cc_assesment_sfib.php',27],['rating','lib.php',114],['rating','lib.php',1070],['lib','dtllib.php',66],['lib/horde/framework/Horde/Imap/Client/Cache/Backend','Cache.php',68],['lib/mustache/src/Mustache/Loader','CascadingLoader.php',20],['question/engine','datalib.php',68],['question/engine','datalib.php',1330],['question/engine','datalib.php',1631],['question/engine','datalib.php',1739],['question/engine','datalib.php',1869],['question/engine','datalib.php',1940],['lib/phpexcel/PHPExcel/Shared/trend','bestFitClass.php',405]], 1047],
'set_block_actions_done': ['set_block_actions_done', 'Gets set when the block actions for the page have been processed. ', [['lib','pagelib.php',1887]], 2],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'get_data': ['get_data', '', [['mod/feedback/item/captcha','lib.php',76],['grade/grading/form/guide','edit_form.php',142],['grade/grading/form','lib.php',841],['grade/grading/form/rubric','edit_form.php',136],['mod/feedback/item/multichoicerated','multichoicerated_form.php',93],['mod/scorm','mod_form.php',514],['lib/classes/event','base.php',564],['mod/feedback','mod_form.php',163],['mod/feedback/item/multichoice','multichoice_form.php',93],['grade/export','grade_export_form.php',206],['lib/simplepie/library/SimplePie','Parser.php',263],['lib','completionlib.php',882],['lib','formslib.php',584],['mod/workshop','locallib.php',3815],['mod/glossary','mod_form.php',203],['mod/feedback/item/textfield','textfield_form.php',57],['blocks/rss_client','editfeed.php',101],['admin/tool/filetypes','edit_form.php',97],['mod/lesson','mod_form.php',383],['admin/tool/uploaduser','user_form.php',394],['admin/webservice','forms.php',299],['mod/feedback/item/numeric','numeric_form.php',60],['mod/feedback/item/multichoice','lib.php',87],['mod/choice','mod_form.php',128],['mod/feedback/item/textarea','textarea_form.php',57],['mod/forum','mod_form.php',270],['mod/feedback/item/textfield','lib.php',89],['mod/feedback/item/multichoicerated','lib.php',92],['admin/tool/uploadcourse/classes','course.php',269],['mod/feedback/item/label','lib.php',99],['mod/feedback/item/textarea','lib.php',92],['backup/util/structure','restore_path_element.class.php',118],['mod/feedback/item/numeric','lib.php',105],['mod/feedback/item/info','lib.php',76],['mod/feedback/item','feedback_item_class.php',37],['mod/feedback/item','feedback_item_class.php',149],['lib/classes/message/inbound','address_manager.php',361],['course','editsection_form.php',96],['message/tests','inbound_test.php',632]], 364],
'is_inside_frontpage': ['is_inside_frontpage', 'Check if context is the front page context or a context inside it ', [['lib','accesslib.php',2926]], 4],
'set_cm': ['set_cm', 'The course module that this page belongs to (if it does belong to one). ', [['lib','pagelib.php',979]], 36],
'instance_config_save': ['instance_config_save', 'Serialize and store config data ', [['blocks','moodleblock.class.php',479],['blocks/quiz_results','block_quiz_results.php',48],['blocks/activity_results','block_activity_results.php',101],['blocks/html','block_html.php',86]], 5],
'get_content_for_output': ['get_content_for_output', 'Return a block_contents object representing the full contents of this block. ', [['blocks','moodleblock.class.php',209]], 1],
'instance_create': ['instance_create', 'Do any additional initialization you may need at the time a new block instance is created ', [['blocks','moodleblock.class.php',496]], 1],
'tag_get': ['tag_get', 'Simple function to just return a single tag object when you know the name or something ', [['tag','lib.php',309]], 14],
'set_data': ['set_data', '', [['question/type/missingtype','edit_missingtype_form.php',52],['question/type/multianswer','edit_multianswer_form.php',256],['mod/feedback/item/multichoicerated','multichoicerated_form.php',81],['mod/scorm','mod_form.php',444],['question','category_form.php',73],['course','moodleform_mod.php',338],['mod/feedback/item/multichoice','multichoice_form.php',79],['blocks','edit_form.php',255],['badges','edit_form.php',137],['lib','formslib.php',434],['blocks/html','edit_form.php',53],['admin/tool/filetypes','edit_form.php',83],['question/type/random','edit_random_form.php',68],['cache','forms.php',232],['backup/util/structure','restore_path_element.class.php',95],['lib/classes/message/inbound','address_manager.php',146],['course','editsection_form.php',79],['question/type','edit_question_form.php',449],['question/type/calculated','datasetitems_form.php',360]], 234],
'heading': ['heading', 'Get the heading for this page. ', [['grade/report/singleview/classes/local/screen','grade.php',283],['grade/report/singleview/classes/local/screen','user.php',281],['lib','outputrenderers.php',2957],['lib','outputrenderers.php',4080],['lib','outputrenderers.php',4254],['grade/report/singleview/classes/local/screen','screen.php',197]], 763],
'block_instance': ['block_instance', 'Creates a new instance of the specified block class. ', [['lib','blocklib.php',1654]], 13],
'get_user_preferences': ['get_user_preferences', 'Used to fetch user preference(s) ', [['lib','moodlelib.php',1969]], 177],
'ensure_instances_exist': ['ensure_instances_exist', 'Ensure block instances exist for a given region ', [['lib','blocklib.php',998]], 4],
'blocks_parse_default_blocks_list': ['blocks_parse_default_blocks_list', 'Parse a list of default blocks. See config-dist for a description of the format. ', [['lib','blocklib.php',2132]], 5],
'set_label': ['set_label', 'Sets select\'s label ', [['lib','outputcomponents.php',829],['lib','outputcomponents.php',951],['backup/util/ui','backup_ui_setting.class.php',143],['backup/cc/cc_lib','cc_asssesment.php',378],['backup/cc/cc_lib','cc_asssesment.php',492],['backup/cc/cc_lib','cc_asssesment.php',1725]], 46],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pgsql_native_moodle_database.php',1137],['lib/dml','oci_native_moodle_database.php',1355],['lib/dml','sqlsrv_native_moodle_database.php',1081],['lib/dml','mssql_native_moodle_database.php',1003],['lib/dml','mysqli_native_moodle_database.php',1397],['lib/dml/tests','dml_test.php',5430],['lib/dml','pdo_moodle_database.php',460]], 565],
'add_class': ['add_class', 'Adds a CSS class to this action link object ', [['lib','outputcomponents.php',1030],['lib','outputcomponents.php',1782],['lib','outputcomponents.php',2591],['lib','navigationlib.php',456]], 33],
'close': ['close', 'Close the connection to the server ', [['lib/zend/Zend/Http/Client/Adapter','Socket.php',486],['lib/tests','completionlib_test.php',888],['lib/adodb','adodb.inc.php',2164],['lib/adodb','adodb.inc.php',2844],['lib/adodb','adodb.inc.php',3536],['lib','webdavlib.php',176],['admin/tool/uploaduser','locallib.php',149],['lib/dml','oci_native_moodle_recordset.php',80],['lib/tcpdf','tcpdf.php',2943],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['lib','excellib.class.php',93],['lib/zend/Zend/Http/Client/Adapter','Test.php',187],['lib/classes/dml','recordset_walk.php',153],['mod/assign/feedback/offline','importgradeslib.php',178],['lib/pear/Net','GeoIP.php',556],['backup/util/helper','backup_array_iterator.class.php',63],['lib/zend/Zend/Gdata/App','LoggingHttpClientAdapterSocket.php',109],['lib/zend/Zend/Http/Client/Adapter','Proxy.php',266],['lib/dml','mssql_native_moodle_recordset.php',87],['lib/pear/Auth','RADIUS.php',542],['lib/pear/Auth','RADIUS.php',703],['lib/pear/Auth','RADIUS.php',824],['lib/phpmailer','class.smtp.php',507],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',80],['lib/phpunit/classes','event_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Interface.php',73],['lib/dml','pgsql_native_moodle_recordset.php',104],['auth/fc','fcFPP.php',72],['lib/filestorage','zip_archive.php',183],['lib','odslib.class.php',71],['lib/horde/framework/Horde/Socket','Client.php',135],['question/engine/tests','helpers.php',1225],['grade','lib.php',323],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib','csvlib.class.php',256],['lib/google/src/Google/Logger','File.php',130],['lib/horde/framework/Horde','Stream.php',585],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpunit/classes','message_sink.php',39],['lib/zend/Zend/Http/Client/Adapter','Curl.php',460],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/zend/Zend/Service/WindowsAzure','SessionHandler.php',109],['backup/util/helper','backup_null_iterator.class.php',53],['grade/export','lib.php',662],['lib/dml','pdo_moodle_recordset.php',79]], 1036],
'redirect': ['redirect', 'Redirect the browser ', [['','mdeploy.php',1474],['lib','weblib.php',2514]], 948],
'region_completely_docked': ['region_completely_docked', 'Checks to see whether all of the blocks within the given region are docked ', [['lib','blocklib.php',470]], 11],
'set_context': ['set_context', 'Set the context. ', [['mod/assign','locallib.php',246],['lib/portfolio','caller.php',568],['grade/grading','lib.php',116],['lib','pagelib.php',942]], 254],
'block_method_result': ['block_method_result', 'Call a class method (one that does not require a block instance) on a block class. ', [['lib','blocklib.php',1639]], 1],
'check_not_yet_loaded': ['check_not_yet_loaded', 'Check whether the page blocks have been loaded yet ', [['lib','blocklib.php',855]], 2],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1583],['lib/dml','moodle_database.php',678]], 375],
'add_custom_regions_for_pagetype': ['add_custom_regions_for_pagetype', 'Finds custom block regions associated with a page type and registers them with this block manager. ', [['lib','blocklib.php',418]], 1],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','moodle_database.php',1815],['lib/dml','sqlite3_pdo_moodle_database.php',337]], 778],
'params': ['params', 'Return parameters to be bound to the above WHERE clause fragment. ', [['question/classes/bank/search','condition.php',43],['lib','weblib.php',394],['question/classes/bank/search','category_condition.php',100]], 89],
'user_is_editing': ['user_is_editing', 'Should the current user see this page in editing mode. That is, are they allowed to edit this page, and are they currently in editing mode. ', [['lib','pagelib.php',827]], 52],
'confirm': ['confirm', 'Print a message along with button choices for Continue/Cancel ', [['lib','outputrenderers.php',1697]], 167],
'default_page_type_list': ['default_page_type_list', 'Generates a default page type list when a more appropriate callback cannot be decided upon. ', [['lib','blocklib.php',1850]], 1],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1141]], 419],
'is_readable': ['is_readable', '', [], 207],
'floor': ['floor', '', [], 467],
'explode': ['explode', '', [], 1599],
'is_array': ['is_array', '', [], 1820],
'key': ['key', '', [], 198],
'count': ['count', '', [], 3984],
'trim': ['trim', '', [], 1889],
'class_exists': ['class_exists', '', [], 273],
'name': ['name', '', [], 100],
'in_array': ['in_array', '', [], 1173],
'array_shift': ['array_shift', '', [], 607],
'array_pop': ['array_pop', '', [], 438],
'implode': ['implode', '', [], 1259],
'array_slice': ['array_slice', '', [], 169],
'array_key_exists': ['array_key_exists', '', [], 1539],
'substr': ['substr', '', [], 2883],
'substr_count': ['substr_count', '', [], 78],
'str_replace': ['str_replace', '', [], 1667],
'is_null': ['is_null', '', [], 1992],
'file_exists': ['file_exists', '', [], 873],
'array_keys': ['array_keys', '', [], 1152],
'array_unique': ['array_unique', '', [], 173],
'asort': ['asort', '', [], 109],
'array_merge': ['array_merge', '', [], 2320],
'is_string': ['is_string', '', [], 680],
'abs': ['abs', '', [], 551],
'call_user_func': ['call_user_func', '', [], 126],
'define': ['define', '', [], 2170],
'max': ['max', '', [], 1096],
'strpos': ['strpos', '', [], 1623],
'defined': ['defined', '', [], 4098],
'preg_match': ['preg_match', '', [], 1317],
'end': ['end', '', [], 432],
'ceil': ['ceil', '', [], 213],
'function_exists': ['function_exists', '', [], 443],
'reset': ['reset', '', [], 1070],
'link': ['link', '', [], 635],
'header': ['header', '', [], 1294]};
CLASS_DATA={
'action_menu_link_secondary': ['action_menu_link_secondary', 'A secondary action menu action ', [['lib','outputcomponents.php',3676]], 42],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6106]], 929],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',214]], 867],
'block_not_on_page_exception': ['block_not_on_page_exception', 'Exception thrown when someone tried to do something with a block that does not exist on a page. ', [['lib','blocklib.php',45]], 1],
'core_collator': ['core_collator', 'A collator class with static methods that can be used for sorting. ', [['lib/classes','collator.php',28]], 130],
'block_manager': ['block_manager', 'This class keeps track of the block that should appear on a moodle_page. ', [['lib','blocklib.php',67]], 6],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'moodle_page': ['moodle_page', '$PAGE is a central store of information about the current page we are generating in response to the user\'s request. ', [['lib','pagelib.php',30]], 54],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6766]], 1197],
'single_button': ['single_button', 'Data structure representing a simple form with only one button. ', [['lib','outputcomponents.php',594]], 113],
'block_contents': ['block_contents', 'This class represents how a block appears on a page. ', [['lib','outputcomponents.php',2464]], 15],
'block_move_target': ['block_move_target', 'This class represents a target for where a block can go when it is being moved. ', [['lib','outputcomponents.php',2602]], 2],
'action_menu_link_primary': ['action_menu_link_primary', 'A primary action menu action ', [['lib','outputcomponents.php',3654]], 4],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1052]], 4832],
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',68]], 478],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 485],
'pix_icon': ['pix_icon', 'Data structure representing an icon. ', [['lib','outputcomponents.php',497]], 247],
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5824]], 210],
'lang_string': ['lang_string', 'The lang_string class ', [['lib','moodlelib.php',9273]], 1548],
'context_block': ['context_block', 'Block context class ', [['lib','accesslib.php',7230]], 26],
'single_select': ['single_select', 'Simple form with just one select field that gets submitted automatically. ', [['lib','outputcomponents.php',687]], 49]};
CONST_DATA={
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 2948],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 554],
'BUI_CONTEXTS_FRONTPAGE_ONLY': ['BUI_CONTEXTS_FRONTPAGE_ONLY', '', [['lib','blocklib.php',38]], 3],
'PARAM_FLOAT': ['PARAM_FLOAT', '', [['lib','moodlelib.php',146]], 93],
'BUI_CONTEXTS_CURRENT_SUBS': ['BUI_CONTEXTS_CURRENT_SUBS', '', [['lib','blocklib.php',43]], 2],
'BUI_CONTEXTS_FRONTPAGE_SUBS': ['BUI_CONTEXTS_FRONTPAGE_SUBS', '', [['lib','blocklib.php',39]], 3],
'SITEID': ['SITEID', '', [['admin/cli','install.php',217],['','install.php',244],['lib/db','install.php',87],['lib','setup.php',748]], 612],
'CONTEXT_BLOCK': ['CONTEXT_BLOCK', '', [['lib','accesslib.php',156]], 99],
'BLOCK_POS_RIGHT': ['BLOCK_POS_RIGHT', '', [['lib','blocklib.php',35]], 18],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 271],
'PARAM_ALPHANUMEXT': ['PARAM_ALPHANUMEXT', '', [['lib','moodlelib.php',93]], 165],
'PARAM_PLUGIN': ['PARAM_PLUGIN', '', [['lib','moodlelib.php',324]], 118],
'BUI_CONTEXTS_ENTIRE_SITE': ['BUI_CONTEXTS_ENTIRE_SITE', '', [['lib','blocklib.php',40]], 5],
'BUI_CONTEXTS_CURRENT': ['BUI_CONTEXTS_CURRENT', '', [['lib','blocklib.php',42]], 4],
'CONTEXT_COURSE': ['CONTEXT_COURSE', '', [['lib','accesslib.php',148]], 422],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532],
'BLOCK_POS_LEFT': ['BLOCK_POS_LEFT', '', [['lib','blocklib.php',34]], 10],
'CONTEXT_USER': ['CONTEXT_USER', '', [['lib','accesslib.php',144]], 95]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
