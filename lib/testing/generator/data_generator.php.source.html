<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /lib/testing/generator/data_generator.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='lib/testing/generator';
filename='data_generator.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/lib/testing/generator/</a> -> <a href="data_generator.php.html">data_generator.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="data_generator.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="data_generator.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Data generator.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    core</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @category   test</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  2012 Petr Skoda {@link http://skodak.org}</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment">/**</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * Data generator class for unit tests and other tools that need to create fake test sites.</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> *</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @package    core</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @category   test</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @copyright  2012 Petr Skoda {@link http://skodak.org}</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> */</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('testing_data_generator')" href="../../../_classes/testing_data_generator.html" onMouseOver="classPopup(event,'testing_data_generator')">testing_data_generator</a> {
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">    /** @var int The number of grade categories created */</span>
<a name="l38"><span class="linenum">  38</span></a>      protected <a class="var it3883" onMouseOver="hilite(3883)" onMouseOut="lolite()" onClick="logVariable('gradecategorycounter')" href="../../../_variables/gradecategorycounter.html">$gradecategorycounter</a> = 0;
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">    /** @var int The number of grade items created */</span>
<a name="l40"><span class="linenum">  40</span></a>      protected <a class="var it3884" onMouseOver="hilite(3884)" onMouseOut="lolite()" onClick="logVariable('gradeitemcounter')" href="../../../_variables/gradeitemcounter.html">$gradeitemcounter</a> = 0;
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">    /** @var int The number of grade outcomes created */</span>
<a name="l42"><span class="linenum">  42</span></a>      protected <a class="var it3885" onMouseOver="hilite(3885)" onMouseOut="lolite()" onClick="logVariable('gradeoutcomecounter')" href="../../../_variables/gradeoutcomecounter.html">$gradeoutcomecounter</a> = 0;
<a name="l43"><span class="linenum">  43</span></a>      protected <a class="var it3886" onMouseOver="hilite(3886)" onMouseOut="lolite()" onClick="logVariable('usercounter')" href="../../../_variables/usercounter.html">$usercounter</a> = 0;
<a name="l44"><span class="linenum">  44</span></a>      protected <a class="var it2242" onMouseOver="hilite(2242)" onMouseOut="lolite()" onClick="logVariable('categorycount')" href="../../../_variables/categorycount.html">$categorycount</a> = 0;
<a name="l45"><span class="linenum">  45</span></a>      protected <a class="var it3887" onMouseOver="hilite(3887)" onMouseOut="lolite()" onClick="logVariable('cohortcount')" href="../../../_variables/cohortcount.html">$cohortcount</a> = 0;
<a name="l46"><span class="linenum">  46</span></a>      protected <a class="var it3888" onMouseOver="hilite(3888)" onMouseOut="lolite()" onClick="logVariable('coursecount')" href="../../../_variables/coursecount.html">$coursecount</a> = 0;
<a name="l47"><span class="linenum">  47</span></a>      protected <a class="var it3889" onMouseOver="hilite(3889)" onMouseOut="lolite()" onClick="logVariable('scalecount')" href="../../../_variables/scalecount.html">$scalecount</a> = 0;
<a name="l48"><span class="linenum">  48</span></a>      protected <a class="var it3890" onMouseOver="hilite(3890)" onMouseOut="lolite()" onClick="logVariable('groupcount')" href="../../../_variables/groupcount.html">$groupcount</a> = 0;
<a name="l49"><span class="linenum">  49</span></a>      protected <a class="var it3891" onMouseOver="hilite(3891)" onMouseOut="lolite()" onClick="logVariable('groupingcount')" href="../../../_variables/groupingcount.html">$groupingcount</a> = 0;
<a name="l50"><span class="linenum">  50</span></a>      protected <a class="var it3892" onMouseOver="hilite(3892)" onMouseOut="lolite()" onClick="logVariable('rolecount')" href="../../../_variables/rolecount.html">$rolecount</a> = 0;
<a name="l51"><span class="linenum">  51</span></a>      protected <a class="var it3893" onMouseOver="hilite(3893)" onMouseOut="lolite()" onClick="logVariable('tagcount')" href="../../../_variables/tagcount.html">$tagcount</a> = 0;
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">    /** @var array list of plugin generators */</span>
<a name="l54"><span class="linenum">  54</span></a>      protected <a class="var it3894" onMouseOver="hilite(3894)" onMouseOut="lolite()" onClick="logVariable('generators')" href="../../../_variables/generators.html">$generators</a> = array();
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">    /** @var array lis of common last names */</span>
<a name="l57"><span class="linenum">  57</span></a>      public <a class="var it3895" onMouseOver="hilite(3895)" onMouseOut="lolite()" onClick="logVariable('lastnames')" href="../../../_variables/lastnames.html">$lastnames</a> = array(
<a name="l58"><span class="linenum">  58</span></a>          'Smith', 'Johnson', 'Williams', 'Brown', 'Jones', 'Miller', 'Davis', 'García', 'Rodríguez', 'Wilson',
<a name="l59"><span class="linenum">  59</span></a>          'Müller', 'Schmidt', 'Schneider', 'Fischer', 'Meyer', 'Weber', 'Schulz', 'Wagner', 'Becker', 'Hoffmann',
<a name="l60"><span class="linenum">  60</span></a>          'Novák', 'Svoboda', 'Novotný', 'Dvořák', 'Černý', 'Procházková', 'Kučerová', 'Veselá', 'Horáková', 'Němcová',
<a name="l61"><span class="linenum">  61</span></a>          'Смирнов', 'Иванов', 'Кузнецов', 'Соколов', 'Попов', 'Лебедева', 'Козлова', 'Новикова', 'Морозова', 'Петрова',
<a name="l62"><span class="linenum">  62</span></a>          '王', '李', '张', '刘', '陈', '楊', '黃', '趙', '吳', '周',
<a name="l63"><span class="linenum">  63</span></a>          '佐藤', '鈴木', '高橋', '田中', '渡辺', '伊藤', '山本', '中村', '小林', '斎藤',
<a name="l64"><span class="linenum">  64</span></a>      );
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>  <span class="comment">    /** @var array lis of common first names */</span>
<a name="l67"><span class="linenum">  67</span></a>      public <a class="var it3896" onMouseOver="hilite(3896)" onMouseOut="lolite()" onClick="logVariable('firstnames')" href="../../../_variables/firstnames.html">$firstnames</a> = array(
<a name="l68"><span class="linenum">  68</span></a>          'Jacob', 'Ethan', 'Michael', 'Jayden', 'William', 'Isabella', 'Sophia', 'Emma', 'Olivia', 'Ava',
<a name="l69"><span class="linenum">  69</span></a>          'Lukas', 'Leon', 'Luca', 'Timm', 'Paul', 'Leonie', 'Leah', 'Lena', 'Hanna', 'Laura',
<a name="l70"><span class="linenum">  70</span></a>          'Jakub', 'Jan', 'Tomáš', 'Lukáš', 'Matěj', 'Tereza', 'Eliška', 'Anna', 'Adéla', 'Karolína',
<a name="l71"><span class="linenum">  71</span></a>          'Даниил', 'Максим', 'Артем', 'Иван', 'Александр', 'София', 'Анастасия', 'Дарья', 'Мария', 'Полина',
<a name="l72"><span class="linenum">  72</span></a>          '伟', '伟', '芳', '伟', '秀英', '秀英', '娜', '秀英', '伟', '敏',
<a name="l73"><span class="linenum">  73</span></a>          '翔', '大翔', '拓海', '翔太', '颯太', '陽菜', 'さくら', '美咲', '葵', '美羽',
<a name="l74"><span class="linenum">  74</span></a>      );
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>      public <a class="var it3897" onMouseOver="hilite(3897)" onMouseOut="lolite()" onClick="logVariable('loremipsum')" href="../../../_variables/loremipsum.html">$loremipsum</a> = &lt;&lt;&lt;EOD
<a name="l77"><span class="linenum">  77</span></a>  Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Nulla non arcu lacinia neque faucibus fringilla. Vivamus porttitor turpis ac leo. Integer in sapien. Nullam eget nisl. Aliquam erat volutpat. Cras elementum. Mauris suscipit, ligula sit amet pharetra semper, nibh ante cursus purus, vel sagittis velit mauris vel metus. Integer malesuada. Nullam lectus justo, vulputate eget mollis sed, tempor sed magna. Mauris elementum mauris vitae tortor. Aliquam erat volutpat.
<a name="l78"><span class="linenum">  78</span></a>  Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Pellentesque ipsum. Cras pede libero, dapibus nec, pretium sit amet, tempor quis. Aliquam ante. Proin in tellus sit amet nibh dignissim sagittis. Vivamus porttitor turpis ac leo. Duis bibendum, lectus ut viverra rhoncus, dolor nunc faucibus libero, eget facilisis enim ipsum id lacus. In sem justo, commodo ut, suscipit at, pharetra vitae, orci. Aliquam erat volutpat. Nulla est.
<a name="l79"><span class="linenum">  79</span></a>  Vivamus luctus egestas leo. Aenean fermentum risus id tortor. Mauris dictum facilisis augue. Aliquam erat volutpat. Aliquam ornare wisi eu metus. Aliquam id dolor. Duis condimentum augue id magna semper rutrum. Donec iaculis gravida nulla. Pellentesque ipsum. Etiam dictum tincidunt diam. Quisque tincidunt scelerisque libero. Etiam egestas wisi a erat.
<a name="l80"><span class="linenum">  80</span></a>  Integer lacinia. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Mauris tincidunt sem sed arcu. Nullam feugiat, turpis at pulvinar vulputate, erat libero tristique tellus, nec bibendum odio risus sit amet ante. Aliquam id dolor. Maecenas sollicitudin. Et harum quidem rerum facilis est et expedita distinctio. Mauris suscipit, ligula sit amet pharetra semper, nibh ante cursus purus, vel sagittis velit mauris vel metus. Nullam dapibus fermentum ipsum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Pellentesque sapien. Duis risus. Mauris elementum mauris vitae tortor. Suspendisse nisl. Integer rutrum, orci vestibulum ullamcorper ultricies, lacus quam ultricies odio, vitae placerat pede sem sit amet enim.
<a name="l81"><span class="linenum">  81</span></a>  In laoreet, magna id viverra tincidunt, sem odio bibendum justo, vel imperdiet sapien wisi sed libero. Proin pede metus, vulputate nec, fermentum fringilla, vehicula vitae, justo. Nullam justo enim, consectetuer nec, ullamcorper ac, vestibulum in, elit. Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur? Maecenas lorem. Etiam posuere lacus quis dolor. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos hymenaeos. Curabitur ligula sapien, pulvinar a vestibulum quis, facilisis vel sapien. Nam sed tellus id magna elementum tincidunt. Suspendisse nisl. Vivamus luctus egestas leo. Nulla non arcu lacinia neque faucibus fringilla. Etiam dui sem, fermentum vitae, sagittis id, malesuada in, quam. Etiam dictum tincidunt diam. Etiam commodo dui eget wisi. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Proin pede metus, vulputate nec, fermentum fringilla, vehicula vitae, justo. Duis ante orci, molestie vitae vehicula venenatis, tincidunt ac pede. Pellentesque sapien.
<a name="l82"><span class="linenum">  82</span></a>  EOD;
<a name="l83"><span class="linenum">  83</span></a>  
<a name="l84"><span class="linenum">  84</span></a>      <span class="comment">/**</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">     * To be called from data reset code only,</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">     * do not use in tests.</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">     * @return void</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">     */</span>
<a name="l89"><span class="linenum">  89</span></a>      public function <a class="function" onClick="logFunction('reset')" href="../../../_functions/reset.html" onMouseOver="funcPopup(event,'reset')">reset</a>() {
<a name="l90"><span class="linenum">  90</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('usercounter')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/usercounter.html">usercounter</a> = 0;
<a name="l91"><span class="linenum">  91</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('categorycount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/categorycount.html">categorycount</a> = 0;
<a name="l92"><span class="linenum">  92</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursecount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/coursecount.html">coursecount</a> = 0;
<a name="l93"><span class="linenum">  93</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scalecount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/scalecount.html">scalecount</a> = 0;
<a name="l94"><span class="linenum">  94</span></a>  
<a name="l95"><span class="linenum">  95</span></a>          foreach (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('generators')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/generators.html">generators</a> as <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../../../_variables/generator.html">$generator</a>) {
<a name="l96"><span class="linenum">  96</span></a>              <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../../../_variables/generator.html">$generator</a>-&gt;<a class="phpfunction" onClick="logFunction('reset')" href="../../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>();
<a name="l97"><span class="linenum">  97</span></a>          }
<a name="l98"><span class="linenum">  98</span></a>      }
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>      <span class="comment">/**</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment">     * Return generator for given plugin or component.</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment">     * @param string $component the component name, e.g. 'mod_forum' or 'core_question'.</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment">     * @return component_generator_base or rather an instance of the appropriate subclass.</span>
<a name="l104"><span class="linenum"> 104</span></a>  <span class="comment">     */</span>
<a name="l105"><span class="linenum"> 105</span></a>      public function <a class="function" onClick="logFunction('get_plugin_generator')" href="../../../_functions/get_plugin_generator.html" onMouseOver="funcPopup(event,'get_plugin_generator')">get_plugin_generator</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a>) {
<a name="l106"><span class="linenum"> 106</span></a>          <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../../_variables/plugin.html">$plugin</a>) = <a class="class" onClick="logClass('core_component')" href="../../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('normalize_component')" href="../../../_functions/normalize_component.html" onMouseOver="funcPopup(event,'normalize_component')">normalize_component</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a>);
<a name="l107"><span class="linenum"> 107</span></a>          <a class="var it3898" onMouseOver="hilite(3898)" onMouseOut="lolite()" onClick="logVariable('cleancomponent')" href="../../../_variables/cleancomponent.html">$cleancomponent</a> = <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> . '_' . <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../../_variables/plugin.html">$plugin</a>;
<a name="l108"><span class="linenum"> 108</span></a>          if (<a class="var it3898" onMouseOver="hilite(3898)" onMouseOut="lolite()" onClick="logVariable('cleancomponent')" href="../../../_variables/cleancomponent.html">$cleancomponent</a> != <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a>) {
<a name="l109"><span class="linenum"> 109</span></a>              <a class="function" onClick="logFunction('debugging')" href="../../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>(&quot;Please specify the component you want a generator for as &quot; .
<a name="l110"><span class="linenum"> 110</span></a>                      &quot;{<a class="var it3898" onMouseOver="hilite(3898)" onMouseOut="lolite()" onClick="logVariable('cleancomponent')" href="../../../_variables/cleancomponent.html">$cleancomponent</a>}, not {<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a>}.&quot;, <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l111"><span class="linenum"> 111</span></a>              <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a> = <a class="var it3898" onMouseOver="hilite(3898)" onMouseOut="lolite()" onClick="logVariable('cleancomponent')" href="../../../_variables/cleancomponent.html">$cleancomponent</a>;
<a name="l112"><span class="linenum"> 112</span></a>          }
<a name="l113"><span class="linenum"> 113</span></a>  
<a name="l114"><span class="linenum"> 114</span></a>          if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('generators')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/generators.html">generators</a>[<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a>])) {
<a name="l115"><span class="linenum"> 115</span></a>              return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('generators')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/generators.html">generators</a>[<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a>];
<a name="l116"><span class="linenum"> 116</span></a>          }
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>          <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../../_variables/dir.html">$dir</a> = <a class="class" onClick="logClass('core_component')" href="../../../_classes/core_component.html" onMouseOver="classPopup(event,'core_component')">core_component</a>::<a class="function" onClick="logFunction('get_component_directory')" href="../../../_functions/get_component_directory.html" onMouseOver="funcPopup(event,'get_component_directory')">get_component_directory</a>(<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a>);
<a name="l119"><span class="linenum"> 119</span></a>          <a class="var it3899" onMouseOver="hilite(3899)" onMouseOut="lolite()" onClick="logVariable('lib')" href="../../../_variables/lib.html">$lib</a> = <a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../../_variables/dir.html">$dir</a> . '/tests/generator/lib.php';
<a name="l120"><span class="linenum"> 120</span></a>          if (!<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../../_variables/dir.html">$dir</a> || !<a class="phpfunction" onClick="logFunction('is_readable')" href="../../../_functions/is_readable.html" onMouseOver="phpfuncPopup(event,'is_readable')">is_readable</a>(<a class="var it3899" onMouseOver="hilite(3899)" onMouseOut="lolite()" onClick="logVariable('lib')" href="../../../_variables/lib.html">$lib</a>)) {
<a name="l121"><span class="linenum"> 121</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(&quot;Component {<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a>} does not support &quot; .
<a name="l122"><span class="linenum"> 122</span></a>                      &quot;generators yet. Missing tests/generator/lib.php.&quot;);
<a name="l123"><span class="linenum"> 123</span></a>          }
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>          include_once(<a class="var it3899" onMouseOver="hilite(3899)" onMouseOut="lolite()" onClick="logVariable('lib')" href="../../../_variables/lib.html">$lib</a>);
<a name="l126"><span class="linenum"> 126</span></a>          <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a> = <a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a> . '_generator';
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>          if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a>)) {
<a name="l129"><span class="linenum"> 129</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>(&quot;Component {<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a>} does not support &quot; .
<a name="l130"><span class="linenum"> 130</span></a>                      &quot;data generators yet. Class {<a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a>} not found.&quot;);
<a name="l131"><span class="linenum"> 131</span></a>          }
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('generators')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/generators.html">generators</a>[<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a>] = new <a class="var it143" onMouseOver="hilite(143)" onMouseOut="lolite()" onClick="logVariable('classname')" href="../../../_variables/classname.html">$classname</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>);
<a name="l134"><span class="linenum"> 134</span></a>          return <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('generators')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/generators.html">generators</a>[<a class="var it547" onMouseOver="hilite(547)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../../_variables/component.html">$component</a>];
<a name="l135"><span class="linenum"> 135</span></a>      }
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>      <span class="comment">/**</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     * Create a test user</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">     * @param array $options</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">     * @return stdClass user record</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">     */</span>
<a name="l143"><span class="linenum"> 143</span></a>      public function <a class="function" onClick="logFunction('create_user')" href="../../../_functions/create_user.html" onMouseOver="funcPopup(event,'create_user')">create_user</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>=null, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>=null) {
<a name="l144"><span class="linenum"> 144</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('usercounter')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/usercounter.html">usercounter</a>++;
<a name="l147"><span class="linenum"> 147</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('usercounter')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/usercounter.html">usercounter</a>;
<a name="l148"><span class="linenum"> 148</span></a>  
<a name="l149"><span class="linenum"> 149</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['auth'])) {
<a name="l152"><span class="linenum"> 152</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['auth'] = 'manual';
<a name="l153"><span class="linenum"> 153</span></a>          }
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['firstname']) and !isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['lastname'])) {
<a name="l156"><span class="linenum"> 156</span></a>              <a class="var it3900" onMouseOver="hilite(3900)" onMouseOut="lolite()" onClick="logVariable('country')" href="../../../_variables/country.html">$country</a> = <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, 5);
<a name="l157"><span class="linenum"> 157</span></a>              <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('firstname')" href="../../../_variables/firstname.html">$firstname</a> = <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, 4);
<a name="l158"><span class="linenum"> 158</span></a>              <a class="var it3902" onMouseOver="hilite(3902)" onMouseOut="lolite()" onClick="logVariable('lastname')" href="../../../_variables/lastname.html">$lastname</a> = <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, 4);
<a name="l159"><span class="linenum"> 159</span></a>              <a class="var it3903" onMouseOver="hilite(3903)" onMouseOut="lolite()" onClick="logVariable('female')" href="../../../_variables/female.html">$female</a> = <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, 1);
<a name="l160"><span class="linenum"> 160</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['firstname'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('firstnames')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/firstnames.html">firstnames</a>[(<a class="var it3900" onMouseOver="hilite(3900)" onMouseOut="lolite()" onClick="logVariable('country')" href="../../../_variables/country.html">$country</a>*10) + <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('firstname')" href="../../../_variables/firstname.html">$firstname</a> + (<a class="var it3903" onMouseOver="hilite(3903)" onMouseOut="lolite()" onClick="logVariable('female')" href="../../../_variables/female.html">$female</a>*5)];
<a name="l161"><span class="linenum"> 161</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['lastname'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastnames')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/lastnames.html">lastnames</a>[(<a class="var it3900" onMouseOver="hilite(3900)" onMouseOut="lolite()" onClick="logVariable('country')" href="../../../_variables/country.html">$country</a>*10) + <a class="var it3902" onMouseOver="hilite(3902)" onMouseOut="lolite()" onClick="logVariable('lastname')" href="../../../_variables/lastname.html">$lastname</a> + (<a class="var it3903" onMouseOver="hilite(3903)" onMouseOut="lolite()" onClick="logVariable('female')" href="../../../_variables/female.html">$female</a>*5)];
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>          } else if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['firstname'])) {
<a name="l164"><span class="linenum"> 164</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['firstname'] = 'Firstname'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>          } else if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['lastname'])) {
<a name="l167"><span class="linenum"> 167</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['lastname'] = 'Lastname'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l168"><span class="linenum"> 168</span></a>          }
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['firstnamephonetic'])) {
<a name="l171"><span class="linenum"> 171</span></a>              <a class="var it3904" onMouseOver="hilite(3904)" onMouseOut="lolite()" onClick="logVariable('firstnamephonetic')" href="../../../_variables/firstnamephonetic.html">$firstnamephonetic</a> = <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, 59);
<a name="l172"><span class="linenum"> 172</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['firstnamephonetic'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('firstnames')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/firstnames.html">firstnames</a>[<a class="var it3904" onMouseOver="hilite(3904)" onMouseOut="lolite()" onClick="logVariable('firstnamephonetic')" href="../../../_variables/firstnamephonetic.html">$firstnamephonetic</a>];
<a name="l173"><span class="linenum"> 173</span></a>          }
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['lastnamephonetic'])) {
<a name="l176"><span class="linenum"> 176</span></a>              <a class="var it3905" onMouseOver="hilite(3905)" onMouseOut="lolite()" onClick="logVariable('lastnamephonetic')" href="../../../_variables/lastnamephonetic.html">$lastnamephonetic</a> = <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, 59);
<a name="l177"><span class="linenum"> 177</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['lastnamephonetic'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('lastnames')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/lastnames.html">lastnames</a>[<a class="var it3905" onMouseOver="hilite(3905)" onMouseOut="lolite()" onClick="logVariable('lastnamephonetic')" href="../../../_variables/lastnamephonetic.html">$lastnamephonetic</a>];
<a name="l178"><span class="linenum"> 178</span></a>          }
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['middlename'])) {
<a name="l181"><span class="linenum"> 181</span></a>              <a class="var it3906" onMouseOver="hilite(3906)" onMouseOut="lolite()" onClick="logVariable('middlename')" href="../../../_variables/middlename.html">$middlename</a> = <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, 59);
<a name="l182"><span class="linenum"> 182</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['middlename'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('firstnames')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/firstnames.html">firstnames</a>[<a class="var it3906" onMouseOver="hilite(3906)" onMouseOut="lolite()" onClick="logVariable('middlename')" href="../../../_variables/middlename.html">$middlename</a>];
<a name="l183"><span class="linenum"> 183</span></a>          }
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['alternatename'])) {
<a name="l186"><span class="linenum"> 186</span></a>              <a class="var it3907" onMouseOver="hilite(3907)" onMouseOut="lolite()" onClick="logVariable('alternatename')" href="../../../_variables/alternatename.html">$alternatename</a> = <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, 59);
<a name="l187"><span class="linenum"> 187</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['alternatename'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('firstnames')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/firstnames.html">firstnames</a>[<a class="var it3907" onMouseOver="hilite(3907)" onMouseOut="lolite()" onClick="logVariable('alternatename')" href="../../../_variables/alternatename.html">$alternatename</a>];
<a name="l188"><span class="linenum"> 188</span></a>          }
<a name="l189"><span class="linenum"> 189</span></a>  
<a name="l190"><span class="linenum"> 190</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['idnumber'])) {
<a name="l191"><span class="linenum"> 191</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['idnumber'] = '';
<a name="l192"><span class="linenum"> 192</span></a>          }
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['mnethostid'])) {
<a name="l195"><span class="linenum"> 195</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['mnethostid'] = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('mnet_localhost_id')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/mnet_localhost_id.html">mnet_localhost_id</a>;
<a name="l196"><span class="linenum"> 196</span></a>          }
<a name="l197"><span class="linenum"> 197</span></a>  
<a name="l198"><span class="linenum"> 198</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['username'])) {
<a name="l199"><span class="linenum"> 199</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['username'] = 'username'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l200"><span class="linenum"> 200</span></a>              <a class="var it84" onMouseOver="hilite(84)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../../_variables/j.html">$j</a> = 2;
<a name="l201"><span class="linenum"> 201</span></a>              while (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('user', array('username'=&gt;<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['username'], 'mnethostid'=&gt;<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['mnethostid']))) {
<a name="l202"><span class="linenum"> 202</span></a>                  <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['username'] = 'username'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>.'_'.<a class="var it84" onMouseOver="hilite(84)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../../_variables/j.html">$j</a>;
<a name="l203"><span class="linenum"> 203</span></a>                  <a class="var it84" onMouseOver="hilite(84)" onMouseOut="lolite()" onClick="logVariable('j')" href="../../../_variables/j.html">$j</a>++;
<a name="l204"><span class="linenum"> 204</span></a>              }
<a name="l205"><span class="linenum"> 205</span></a>          }
<a name="l206"><span class="linenum"> 206</span></a>  
<a name="l207"><span class="linenum"> 207</span></a>          if (isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['password'])) {
<a name="l208"><span class="linenum"> 208</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['password'] = <a class="function" onClick="logFunction('hash_internal_user_password')" href="../../../_functions/hash_internal_user_password.html" onMouseOver="funcPopup(event,'hash_internal_user_password')">hash_internal_user_password</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['password']);
<a name="l209"><span class="linenum"> 209</span></a>          } else {
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">            // The auth plugin may not fully support this,</span>
<a name="l211"><span class="linenum"> 211</span></a>  <span class="comment">            // but it is still better/faster than hashing random stuff.</span>
<a name="l212"><span class="linenum"> 212</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['password'] = <a class="constant" onClick="logConstant('AUTH_PASSWORD_NOT_CACHED')" href="../../../_constants/AUTH_PASSWORD_NOT_CACHED.html" onMouseOver="constPopup(event,'AUTH_PASSWORD_NOT_CACHED')">AUTH_PASSWORD_NOT_CACHED</a>;
<a name="l213"><span class="linenum"> 213</span></a>          }
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['email'])) {
<a name="l216"><span class="linenum"> 216</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['email'] = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['username'].'@example.com';
<a name="l217"><span class="linenum"> 217</span></a>          }
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['confirmed'])) {
<a name="l220"><span class="linenum"> 220</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['confirmed'] = 1;
<a name="l221"><span class="linenum"> 221</span></a>          }
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['lang'])) {
<a name="l224"><span class="linenum"> 224</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['lang'] = 'en';
<a name="l225"><span class="linenum"> 225</span></a>          }
<a name="l226"><span class="linenum"> 226</span></a>  
<a name="l227"><span class="linenum"> 227</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['maildisplay'])) {
<a name="l228"><span class="linenum"> 228</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['maildisplay'] = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultpreference_maildisplay')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/defaultpreference_maildisplay.html">defaultpreference_maildisplay</a>;
<a name="l229"><span class="linenum"> 229</span></a>          }
<a name="l230"><span class="linenum"> 230</span></a>  
<a name="l231"><span class="linenum"> 231</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['mailformat'])) {
<a name="l232"><span class="linenum"> 232</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['mailformat'] = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultpreference_mailformat')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/defaultpreference_mailformat.html">defaultpreference_mailformat</a>;
<a name="l233"><span class="linenum"> 233</span></a>          }
<a name="l234"><span class="linenum"> 234</span></a>  
<a name="l235"><span class="linenum"> 235</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['maildigest'])) {
<a name="l236"><span class="linenum"> 236</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['maildigest'] = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultpreference_maildigest')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/defaultpreference_maildigest.html">defaultpreference_maildigest</a>;
<a name="l237"><span class="linenum"> 237</span></a>          }
<a name="l238"><span class="linenum"> 238</span></a>  
<a name="l239"><span class="linenum"> 239</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['autosubscribe'])) {
<a name="l240"><span class="linenum"> 240</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['autosubscribe'] = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultpreference_autosubscribe')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/defaultpreference_autosubscribe.html">defaultpreference_autosubscribe</a>;
<a name="l241"><span class="linenum"> 241</span></a>          }
<a name="l242"><span class="linenum"> 242</span></a>  
<a name="l243"><span class="linenum"> 243</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['trackforums'])) {
<a name="l244"><span class="linenum"> 244</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['trackforums'] = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaultpreference_trackforums')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/defaultpreference_trackforums.html">defaultpreference_trackforums</a>;
<a name="l245"><span class="linenum"> 245</span></a>          }
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['deleted'])) {
<a name="l248"><span class="linenum"> 248</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['deleted'] = 0;
<a name="l249"><span class="linenum"> 249</span></a>          }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['timecreated'])) {
<a name="l252"><span class="linenum"> 252</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['timecreated'] = <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l253"><span class="linenum"> 253</span></a>          }
<a name="l254"><span class="linenum"> 254</span></a>  
<a name="l255"><span class="linenum"> 255</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['timemodified'] = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['timecreated'];
<a name="l256"><span class="linenum"> 256</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['lastip'] = '0.0.0.0';
<a name="l257"><span class="linenum"> 257</span></a>  
<a name="l258"><span class="linenum"> 258</span></a>          if (<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['deleted']) {
<a name="l259"><span class="linenum"> 259</span></a>              <a class="var it3913" onMouseOver="hilite(3913)" onMouseOut="lolite()" onClick="logVariable('delname')" href="../../../_variables/delname.html">$delname</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['email'].'.'.<a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l260"><span class="linenum"> 260</span></a>              while (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('user', array('username'=&gt;<a class="var it3913" onMouseOver="hilite(3913)" onMouseOut="lolite()" onClick="logVariable('delname')" href="../../../_variables/delname.html">$delname</a>))) {
<a name="l261"><span class="linenum"> 261</span></a>                  <a class="var it3913" onMouseOver="hilite(3913)" onMouseOut="lolite()" onClick="logVariable('delname')" href="../../../_variables/delname.html">$delname</a>++;
<a name="l262"><span class="linenum"> 262</span></a>              }
<a name="l263"><span class="linenum"> 263</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['idnumber'] = '';
<a name="l264"><span class="linenum"> 264</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['email']    = md5(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['username']);
<a name="l265"><span class="linenum"> 265</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['username'] = <a class="var it3913" onMouseOver="hilite(3913)" onMouseOut="lolite()" onClick="logVariable('delname')" href="../../../_variables/delname.html">$delname</a>;
<a name="l266"><span class="linenum"> 266</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['picture']  = 0;
<a name="l267"><span class="linenum"> 267</span></a>          }
<a name="l268"><span class="linenum"> 268</span></a>  
<a name="l269"><span class="linenum"> 269</span></a>          <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('user', <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>);
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>          if (!<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['deleted']) {
<a name="l272"><span class="linenum"> 272</span></a>              <a class="class" onClick="logClass('context_user')" href="../../../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>);
<a name="l273"><span class="linenum"> 273</span></a>          }
<a name="l274"><span class="linenum"> 274</span></a>  
<a name="l275"><span class="linenum"> 275</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l276"><span class="linenum"> 276</span></a>      }
<a name="l277"><span class="linenum"> 277</span></a>  
<a name="l278"><span class="linenum"> 278</span></a>      <span class="comment">/**</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment">     * Create a test course category</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment">     * @param array $options</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">     * @return coursecat course category record</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">     */</span>
<a name="l284"><span class="linenum"> 284</span></a>      public function <a class="function" onClick="logFunction('create_category')" href="../../../_functions/create_category.html" onMouseOver="funcPopup(event,'create_category')">create_category</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>=null, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>=null) {
<a name="l285"><span class="linenum"> 285</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l286"><span class="linenum"> 286</span></a>          require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/libdir.html">libdir</a>/coursecatlib.php&quot;);
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('categorycount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/categorycount.html">categorycount</a>++;
<a name="l289"><span class="linenum"> 289</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('categorycount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/categorycount.html">categorycount</a>;
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l292"><span class="linenum"> 292</span></a>  
<a name="l293"><span class="linenum"> 293</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'])) {
<a name="l294"><span class="linenum"> 294</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'] = 'Course category '.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l295"><span class="linenum"> 295</span></a>          }
<a name="l296"><span class="linenum"> 296</span></a>  
<a name="l297"><span class="linenum"> 297</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'])) {
<a name="l298"><span class="linenum"> 298</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'] = &quot;Test course category <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>\n<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loremipsum')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/loremipsum.html">loremipsum</a>&quot;;
<a name="l299"><span class="linenum"> 299</span></a>          }
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['idnumber'])) {
<a name="l302"><span class="linenum"> 302</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['idnumber'] = '';
<a name="l303"><span class="linenum"> 303</span></a>          }
<a name="l304"><span class="linenum"> 304</span></a>  
<a name="l305"><span class="linenum"> 305</span></a>          return <a class="class" onClick="logClass('coursecat')" href="../../../_classes/coursecat.html" onMouseOver="classPopup(event,'coursecat')">coursecat</a>::<a class="function" onClick="logFunction('create')" href="../../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>);
<a name="l306"><span class="linenum"> 306</span></a>      }
<a name="l307"><span class="linenum"> 307</span></a>  
<a name="l308"><span class="linenum"> 308</span></a>      <span class="comment">/**</span>
<a name="l309"><span class="linenum"> 309</span></a>  <span class="comment">     * Create test cohort.</span>
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">     * @param array $options</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">     * @return stdClass cohort record</span>
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment">     */</span>
<a name="l314"><span class="linenum"> 314</span></a>      public function <a class="function" onClick="logFunction('create_cohort')" href="../../../_functions/create_cohort.html" onMouseOver="funcPopup(event,'create_cohort')">create_cohort</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>=null, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>=null) {
<a name="l315"><span class="linenum"> 315</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l316"><span class="linenum"> 316</span></a>          require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a>/cohort/lib.php&quot;);
<a name="l317"><span class="linenum"> 317</span></a>  
<a name="l318"><span class="linenum"> 318</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cohortcount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/cohortcount.html">cohortcount</a>++;
<a name="l319"><span class="linenum"> 319</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('cohortcount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/cohortcount.html">cohortcount</a>;
<a name="l320"><span class="linenum"> 320</span></a>  
<a name="l321"><span class="linenum"> 321</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l322"><span class="linenum"> 322</span></a>  
<a name="l323"><span class="linenum"> 323</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['contextid'])) {
<a name="l324"><span class="linenum"> 324</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['contextid'] = <a class="class" onClick="logClass('context_system')" href="../../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>()-&gt;id;
<a name="l325"><span class="linenum"> 325</span></a>          }
<a name="l326"><span class="linenum"> 326</span></a>  
<a name="l327"><span class="linenum"> 327</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'])) {
<a name="l328"><span class="linenum"> 328</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'] = 'Cohort '.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l329"><span class="linenum"> 329</span></a>          }
<a name="l330"><span class="linenum"> 330</span></a>  
<a name="l331"><span class="linenum"> 331</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['idnumber'])) {
<a name="l332"><span class="linenum"> 332</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['idnumber'] = '';
<a name="l333"><span class="linenum"> 333</span></a>          }
<a name="l334"><span class="linenum"> 334</span></a>  
<a name="l335"><span class="linenum"> 335</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'])) {
<a name="l336"><span class="linenum"> 336</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'] = &quot;Test cohort <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>\n<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loremipsum')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/loremipsum.html">loremipsum</a>&quot;;
<a name="l337"><span class="linenum"> 337</span></a>          }
<a name="l338"><span class="linenum"> 338</span></a>  
<a name="l339"><span class="linenum"> 339</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['descriptionformat'])) {
<a name="l340"><span class="linenum"> 340</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['descriptionformat'] = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l341"><span class="linenum"> 341</span></a>          }
<a name="l342"><span class="linenum"> 342</span></a>  
<a name="l343"><span class="linenum"> 343</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['visible'])) {
<a name="l344"><span class="linenum"> 344</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['visible'] = 1;
<a name="l345"><span class="linenum"> 345</span></a>          }
<a name="l346"><span class="linenum"> 346</span></a>  
<a name="l347"><span class="linenum"> 347</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['component'])) {
<a name="l348"><span class="linenum"> 348</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['component'] = '';
<a name="l349"><span class="linenum"> 349</span></a>          }
<a name="l350"><span class="linenum"> 350</span></a>  
<a name="l351"><span class="linenum"> 351</span></a>          <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a> = <a class="function" onClick="logFunction('cohort_add_cohort')" href="../../../_functions/cohort_add_cohort.html" onMouseOver="funcPopup(event,'cohort_add_cohort')">cohort_add_cohort</a>((object)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>);
<a name="l352"><span class="linenum"> 352</span></a>  
<a name="l353"><span class="linenum"> 353</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('cohort', array('id'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l354"><span class="linenum"> 354</span></a>      }
<a name="l355"><span class="linenum"> 355</span></a>  
<a name="l356"><span class="linenum"> 356</span></a>      <span class="comment">/**</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment">     * Create a test course</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">     * @param array $options with keys:</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">     *      'createsections'=&gt;bool precreate all sections</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">     * @return stdClass course record</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">     */</span>
<a name="l363"><span class="linenum"> 363</span></a>      public function <a class="function" onClick="logFunction('create_course')" href="../../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>=null, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>=null) {
<a name="l364"><span class="linenum"> 364</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l365"><span class="linenum"> 365</span></a>          require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a>/course/lib.php&quot;);
<a name="l366"><span class="linenum"> 366</span></a>  
<a name="l367"><span class="linenum"> 367</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursecount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/coursecount.html">coursecount</a>++;
<a name="l368"><span class="linenum"> 368</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('coursecount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/coursecount.html">coursecount</a>;
<a name="l369"><span class="linenum"> 369</span></a>  
<a name="l370"><span class="linenum"> 370</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l371"><span class="linenum"> 371</span></a>  
<a name="l372"><span class="linenum"> 372</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['fullname'])) {
<a name="l373"><span class="linenum"> 373</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['fullname'] = 'Test course '.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l374"><span class="linenum"> 374</span></a>          }
<a name="l375"><span class="linenum"> 375</span></a>  
<a name="l376"><span class="linenum"> 376</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['shortname'])) {
<a name="l377"><span class="linenum"> 377</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['shortname'] = 'tc_'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l378"><span class="linenum"> 378</span></a>          }
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['idnumber'])) {
<a name="l381"><span class="linenum"> 381</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['idnumber'] = '';
<a name="l382"><span class="linenum"> 382</span></a>          }
<a name="l383"><span class="linenum"> 383</span></a>  
<a name="l384"><span class="linenum"> 384</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['format'])) {
<a name="l385"><span class="linenum"> 385</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['format'] = 'topics';
<a name="l386"><span class="linenum"> 386</span></a>          }
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['newsitems'])) {
<a name="l389"><span class="linenum"> 389</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['newsitems'] = 0;
<a name="l390"><span class="linenum"> 390</span></a>          }
<a name="l391"><span class="linenum"> 391</span></a>  
<a name="l392"><span class="linenum"> 392</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['numsections'])) {
<a name="l393"><span class="linenum"> 393</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['numsections'] = 5;
<a name="l394"><span class="linenum"> 394</span></a>          }
<a name="l395"><span class="linenum"> 395</span></a>  
<a name="l396"><span class="linenum"> 396</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['summary'])) {
<a name="l397"><span class="linenum"> 397</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['summary'] = &quot;Test course <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>\n<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loremipsum')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/loremipsum.html">loremipsum</a>&quot;;
<a name="l398"><span class="linenum"> 398</span></a>          }
<a name="l399"><span class="linenum"> 399</span></a>  
<a name="l400"><span class="linenum"> 400</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['summaryformat'])) {
<a name="l401"><span class="linenum"> 401</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['summaryformat'] = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l402"><span class="linenum"> 402</span></a>          }
<a name="l403"><span class="linenum"> 403</span></a>  
<a name="l404"><span class="linenum"> 404</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['category'])) {
<a name="l405"><span class="linenum"> 405</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['category'] = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field_select')" href="../../../_functions/get_field_select.html" onMouseOver="funcPopup(event,'get_field_select')">get_field_select</a>('course_categories', &quot;<a class="phpfunction" onClick="logFunction('MIN')" href="../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">MIN</a>(id)&quot;, &quot;parent=0&quot;);
<a name="l406"><span class="linenum"> 406</span></a>          }
<a name="l407"><span class="linenum"> 407</span></a>  
<a name="l408"><span class="linenum"> 408</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a> = <a class="function" onClick="logFunction('create_course')" href="../../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>((object)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>);
<a name="l409"><span class="linenum"> 409</span></a>          <a class="class" onClick="logClass('context_course')" href="../../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l410"><span class="linenum"> 410</span></a>          if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>['createsections'])) {
<a name="l411"><span class="linenum"> 411</span></a>              if (isset(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('numsections')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../../_variables/numsections.html">numsections</a>)) {
<a name="l412"><span class="linenum"> 412</span></a>                  <a class="function" onClick="logFunction('course_create_sections_if_missing')" href="../../../_functions/course_create_sections_if_missing.html" onMouseOver="funcPopup(event,'course_create_sections_if_missing')">course_create_sections_if_missing</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="phpfunction" onClick="logFunction('range')" href="../../../_functions/range.html" onMouseOver="phpfuncPopup(event,'range')">range</a>(0, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('numsections')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../../_variables/numsections.html">numsections</a>));
<a name="l413"><span class="linenum"> 413</span></a>              } else {
<a name="l414"><span class="linenum"> 414</span></a>                  <a class="function" onClick="logFunction('course_create_sections_if_missing')" href="../../../_functions/course_create_sections_if_missing.html" onMouseOver="funcPopup(event,'course_create_sections_if_missing')">course_create_sections_if_missing</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, 0);
<a name="l415"><span class="linenum"> 415</span></a>              }
<a name="l416"><span class="linenum"> 416</span></a>          }
<a name="l417"><span class="linenum"> 417</span></a>  
<a name="l418"><span class="linenum"> 418</span></a>          return <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>;
<a name="l419"><span class="linenum"> 419</span></a>      }
<a name="l420"><span class="linenum"> 420</span></a>  
<a name="l421"><span class="linenum"> 421</span></a>      <span class="comment">/**</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">     * Create course section if does not exist yet</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">     * @param array|stdClass $record must contain 'course' and 'section' attributes</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">     * @param array|null $options</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">     * @return stdClass</span>
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l427"><span class="linenum"> 427</span></a>  <span class="comment">     */</span>
<a name="l428"><span class="linenum"> 428</span></a>      public function <a class="function" onClick="logFunction('create_course_section')" href="../../../_functions/create_course_section.html" onMouseOver="funcPopup(event,'create_course_section')">create_course_section</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = null, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a> = null) {
<a name="l429"><span class="linenum"> 429</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l430"><span class="linenum"> 430</span></a>  
<a name="l431"><span class="linenum"> 431</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l432"><span class="linenum"> 432</span></a>  
<a name="l433"><span class="linenum"> 433</span></a>          if (empty(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['course'])) {
<a name="l434"><span class="linenum"> 434</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('course must be present in <a class="class" onClick="logClass('testing_data_generator')" href="../../../_classes/testing_data_generator.html" onMouseOver="classPopup(event,'testing_data_generator')">testing_data_generator</a>::<a class="function" onClick="logFunction('create_course_section')" href="../../../_functions/create_course_section.html" onMouseOver="funcPopup(event,'create_course_section')">create_course_section</a>() <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>');
<a name="l435"><span class="linenum"> 435</span></a>          }
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['section'])) {
<a name="l438"><span class="linenum"> 438</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('section must be present in <a class="class" onClick="logClass('testing_data_generator')" href="../../../_classes/testing_data_generator.html" onMouseOver="classPopup(event,'testing_data_generator')">testing_data_generator</a>::<a class="function" onClick="logFunction('create_course_section')" href="../../../_functions/create_course_section.html" onMouseOver="funcPopup(event,'create_course_section')">create_course_section</a>() <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>');
<a name="l439"><span class="linenum"> 439</span></a>          }
<a name="l440"><span class="linenum"> 440</span></a>  
<a name="l441"><span class="linenum"> 441</span></a>          <a class="function" onClick="logFunction('course_create_sections_if_missing')" href="../../../_functions/course_create_sections_if_missing.html" onMouseOver="funcPopup(event,'course_create_sections_if_missing')">course_create_sections_if_missing</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['course'], <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['section']);
<a name="l442"><span class="linenum"> 442</span></a>          return <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['course'])-&gt;<a class="function" onClick="logFunction('get_section_info')" href="../../../_functions/get_section_info.html" onMouseOver="funcPopup(event,'get_section_info')">get_section_info</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['section']);
<a name="l443"><span class="linenum"> 443</span></a>      }
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>      <span class="comment">/**</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">     * Create a test block</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">     * @param string $blockname</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">     * @param array $options</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">     * @return stdClass block instance record</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">     */</span>
<a name="l452"><span class="linenum"> 452</span></a>      public function <a class="function" onClick="logFunction('create_block')" href="../../../_functions/create_block.html" onMouseOver="funcPopup(event,'create_block')">create_block</a>(<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../../../_variables/blockname.html">$blockname</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>=null, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>=null) {
<a name="l453"><span class="linenum"> 453</span></a>          <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../../../_variables/generator.html">$generator</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_plugin_generator')" href="../../../_functions/get_plugin_generator.html" onMouseOver="funcPopup(event,'get_plugin_generator')">get_plugin_generator</a>('block_'.<a class="var it3915" onMouseOver="hilite(3915)" onMouseOut="lolite()" onClick="logVariable('blockname')" href="../../../_variables/blockname.html">$blockname</a>);
<a name="l454"><span class="linenum"> 454</span></a>          return <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../../../_variables/generator.html">$generator</a>-&gt;<a class="function" onClick="logFunction('create_instance')" href="../../../_functions/create_instance.html" onMouseOver="funcPopup(event,'create_instance')">create_instance</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>);
<a name="l455"><span class="linenum"> 455</span></a>      }
<a name="l456"><span class="linenum"> 456</span></a>  
<a name="l457"><span class="linenum"> 457</span></a>      <span class="comment">/**</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment">     * Create a test module</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment">     * @param string $modulename</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">     * @param array $options</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">     * @return stdClass activity record</span>
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">     */</span>
<a name="l464"><span class="linenum"> 464</span></a>      public function <a class="function" onClick="logFunction('create_module')" href="../../../_functions/create_module.html" onMouseOver="funcPopup(event,'create_module')">create_module</a>(<a class="var it557" onMouseOver="hilite(557)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../../_variables/modulename.html">$modulename</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>=null, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>=null) {
<a name="l465"><span class="linenum"> 465</span></a>          <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../../../_variables/generator.html">$generator</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_plugin_generator')" href="../../../_functions/get_plugin_generator.html" onMouseOver="funcPopup(event,'get_plugin_generator')">get_plugin_generator</a>('mod_'.<a class="var it557" onMouseOver="hilite(557)" onMouseOut="lolite()" onClick="logVariable('modulename')" href="../../../_variables/modulename.html">$modulename</a>);
<a name="l466"><span class="linenum"> 466</span></a>          return <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../../../_variables/generator.html">$generator</a>-&gt;<a class="function" onClick="logFunction('create_instance')" href="../../../_functions/create_instance.html" onMouseOver="funcPopup(event,'create_instance')">create_instance</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>);
<a name="l467"><span class="linenum"> 467</span></a>      }
<a name="l468"><span class="linenum"> 468</span></a>  
<a name="l469"><span class="linenum"> 469</span></a>      <span class="comment">/**</span>
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment">     * Create a test group for the specified course</span>
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment">     *</span>
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment">     * $record should be either an array or a stdClass containing infomation about the group to create.</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment">     * At the very least it needs to contain courseid.</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment">     * Default values are added for name, description, and descriptionformat if they are not present.</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">     *</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     * This function calls groups_create_group() to create the group within the database.</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     * @see groups_create_group</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     * @return stdClass group record</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">     */</span>
<a name="l481"><span class="linenum"> 481</span></a>      public function <a class="function" onClick="logFunction('create_group')" href="../../../_functions/create_group.html" onMouseOver="funcPopup(event,'create_group')">create_group</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>) {
<a name="l482"><span class="linenum"> 482</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l483"><span class="linenum"> 483</span></a>  
<a name="l484"><span class="linenum"> 484</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../../group/lib.php.html">/group/lib.php</a>');
<a name="l485"><span class="linenum"> 485</span></a>  
<a name="l486"><span class="linenum"> 486</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('groupcount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/groupcount.html">groupcount</a>++;
<a name="l487"><span class="linenum"> 487</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('groupcount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/groupcount.html">groupcount</a>;
<a name="l488"><span class="linenum"> 488</span></a>  
<a name="l489"><span class="linenum"> 489</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l490"><span class="linenum"> 490</span></a>  
<a name="l491"><span class="linenum"> 491</span></a>          if (empty(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['courseid'])) {
<a name="l492"><span class="linenum"> 492</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('courseid must be present in <a class="class" onClick="logClass('testing_data_generator')" href="../../../_classes/testing_data_generator.html" onMouseOver="classPopup(event,'testing_data_generator')">testing_data_generator</a>::<a class="function" onClick="logFunction('create_group')" href="../../../_functions/create_group.html" onMouseOver="funcPopup(event,'create_group')">create_group</a>() <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>');
<a name="l493"><span class="linenum"> 493</span></a>          }
<a name="l494"><span class="linenum"> 494</span></a>  
<a name="l495"><span class="linenum"> 495</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'])) {
<a name="l496"><span class="linenum"> 496</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'] = 'group-' . <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l497"><span class="linenum"> 497</span></a>          }
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'])) {
<a name="l500"><span class="linenum"> 500</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'] = &quot;Test Group <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>\n{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loremipsum')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/loremipsum.html">loremipsum</a>}&quot;;
<a name="l501"><span class="linenum"> 501</span></a>          }
<a name="l502"><span class="linenum"> 502</span></a>  
<a name="l503"><span class="linenum"> 503</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['descriptionformat'])) {
<a name="l504"><span class="linenum"> 504</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['descriptionformat'] = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l505"><span class="linenum"> 505</span></a>          }
<a name="l506"><span class="linenum"> 506</span></a>  
<a name="l507"><span class="linenum"> 507</span></a>          <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a> = <a class="function" onClick="logFunction('groups_create_group')" href="../../../_functions/groups_create_group.html" onMouseOver="funcPopup(event,'groups_create_group')">groups_create_group</a>((object)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>);
<a name="l508"><span class="linenum"> 508</span></a>  
<a name="l509"><span class="linenum"> 509</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('groups', array('id'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>));
<a name="l510"><span class="linenum"> 510</span></a>      }
<a name="l511"><span class="linenum"> 511</span></a>  
<a name="l512"><span class="linenum"> 512</span></a>      <span class="comment">/**</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">     * Create a test group member</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment">     * @return boolean</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment">     */</span>
<a name="l518"><span class="linenum"> 518</span></a>      public function <a class="function" onClick="logFunction('create_group_member')" href="../../../_functions/create_group_member.html" onMouseOver="funcPopup(event,'create_group_member')">create_group_member</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>) {
<a name="l519"><span class="linenum"> 519</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l520"><span class="linenum"> 520</span></a>  
<a name="l521"><span class="linenum"> 521</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../../group/lib.php.html">/group/lib.php</a>');
<a name="l522"><span class="linenum"> 522</span></a>  
<a name="l523"><span class="linenum"> 523</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l524"><span class="linenum"> 524</span></a>  
<a name="l525"><span class="linenum"> 525</span></a>          if (empty(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['userid'])) {
<a name="l526"><span class="linenum"> 526</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('user must be present in testing_util::<a class="function" onClick="logFunction('create_group_member')" href="../../../_functions/create_group_member.html" onMouseOver="funcPopup(event,'create_group_member')">create_group_member</a>() <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>');
<a name="l527"><span class="linenum"> 527</span></a>          }
<a name="l528"><span class="linenum"> 528</span></a>  
<a name="l529"><span class="linenum"> 529</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['groupid'])) {
<a name="l530"><span class="linenum"> 530</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('group must be present in testing_util::<a class="function" onClick="logFunction('create_group_member')" href="../../../_functions/create_group_member.html" onMouseOver="funcPopup(event,'create_group_member')">create_group_member</a>() <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>');
<a name="l531"><span class="linenum"> 531</span></a>          }
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['component'])) {
<a name="l534"><span class="linenum"> 534</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['component'] = null;
<a name="l535"><span class="linenum"> 535</span></a>          }
<a name="l536"><span class="linenum"> 536</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['itemid'])) {
<a name="l537"><span class="linenum"> 537</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['itemid'] = 0;
<a name="l538"><span class="linenum"> 538</span></a>          }
<a name="l539"><span class="linenum"> 539</span></a>  
<a name="l540"><span class="linenum"> 540</span></a>          return <a class="function" onClick="logFunction('groups_add_member')" href="../../../_functions/groups_add_member.html" onMouseOver="funcPopup(event,'groups_add_member')">groups_add_member</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['groupid'], <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['userid'], <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['component'], <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['itemid']);
<a name="l541"><span class="linenum"> 541</span></a>      }
<a name="l542"><span class="linenum"> 542</span></a>  
<a name="l543"><span class="linenum"> 543</span></a>      <span class="comment">/**</span>
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment">     * Create a test grouping for the specified course</span>
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment">     *</span>
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">     * $record should be either an array or a stdClass containing infomation about the grouping to create.</span>
<a name="l547"><span class="linenum"> 547</span></a>  <span class="comment">     * At the very least it needs to contain courseid.</span>
<a name="l548"><span class="linenum"> 548</span></a>  <span class="comment">     * Default values are added for name, description, and descriptionformat if they are not present.</span>
<a name="l549"><span class="linenum"> 549</span></a>  <span class="comment">     *</span>
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">     * This function calls groups_create_grouping() to create the grouping within the database.</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment">     * @see groups_create_grouping</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l553"><span class="linenum"> 553</span></a>  <span class="comment">     * @return stdClass grouping record</span>
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">     */</span>
<a name="l555"><span class="linenum"> 555</span></a>      public function <a class="function" onClick="logFunction('create_grouping')" href="../../../_functions/create_grouping.html" onMouseOver="funcPopup(event,'create_grouping')">create_grouping</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>) {
<a name="l556"><span class="linenum"> 556</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l557"><span class="linenum"> 557</span></a>  
<a name="l558"><span class="linenum"> 558</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../../group/lib.php.html">/group/lib.php</a>');
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('groupingcount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/groupingcount.html">groupingcount</a>++;
<a name="l561"><span class="linenum"> 561</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('groupingcount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/groupingcount.html">groupingcount</a>;
<a name="l562"><span class="linenum"> 562</span></a>  
<a name="l563"><span class="linenum"> 563</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l564"><span class="linenum"> 564</span></a>  
<a name="l565"><span class="linenum"> 565</span></a>          if (empty(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['courseid'])) {
<a name="l566"><span class="linenum"> 566</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('courseid must be present in <a class="class" onClick="logClass('testing_data_generator')" href="../../../_classes/testing_data_generator.html" onMouseOver="classPopup(event,'testing_data_generator')">testing_data_generator</a>::<a class="function" onClick="logFunction('create_grouping')" href="../../../_functions/create_grouping.html" onMouseOver="funcPopup(event,'create_grouping')">create_grouping</a>() <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>');
<a name="l567"><span class="linenum"> 567</span></a>          }
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'])) {
<a name="l570"><span class="linenum"> 570</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'] = 'grouping-' . <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l571"><span class="linenum"> 571</span></a>          }
<a name="l572"><span class="linenum"> 572</span></a>  
<a name="l573"><span class="linenum"> 573</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'])) {
<a name="l574"><span class="linenum"> 574</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'] = &quot;Test Grouping <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>\n{<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('loremipsum')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/loremipsum.html">loremipsum</a>}&quot;;
<a name="l575"><span class="linenum"> 575</span></a>          }
<a name="l576"><span class="linenum"> 576</span></a>  
<a name="l577"><span class="linenum"> 577</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['descriptionformat'])) {
<a name="l578"><span class="linenum"> 578</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['descriptionformat'] = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l579"><span class="linenum"> 579</span></a>          }
<a name="l580"><span class="linenum"> 580</span></a>  
<a name="l581"><span class="linenum"> 581</span></a>          <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a> = <a class="function" onClick="logFunction('groups_create_grouping')" href="../../../_functions/groups_create_grouping.html" onMouseOver="funcPopup(event,'groups_create_grouping')">groups_create_grouping</a>((object)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>);
<a name="l582"><span class="linenum"> 582</span></a>  
<a name="l583"><span class="linenum"> 583</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('groupings', array('id'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>));
<a name="l584"><span class="linenum"> 584</span></a>      }
<a name="l585"><span class="linenum"> 585</span></a>  
<a name="l586"><span class="linenum"> 586</span></a>      <span class="comment">/**</span>
<a name="l587"><span class="linenum"> 587</span></a>  <span class="comment">     * Create a test grouping group</span>
<a name="l588"><span class="linenum"> 588</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment">     * @throws coding_exception</span>
<a name="l590"><span class="linenum"> 590</span></a>  <span class="comment">     * @return boolean</span>
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment">     */</span>
<a name="l592"><span class="linenum"> 592</span></a>      public function <a class="function" onClick="logFunction('create_grouping_group')" href="../../../_functions/create_grouping_group.html" onMouseOver="funcPopup(event,'create_grouping_group')">create_grouping_group</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>) {
<a name="l593"><span class="linenum"> 593</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l594"><span class="linenum"> 594</span></a>  
<a name="l595"><span class="linenum"> 595</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../../group/lib.php.html">/group/lib.php</a>');
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l598"><span class="linenum"> 598</span></a>  
<a name="l599"><span class="linenum"> 599</span></a>          if (empty(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['groupingid'])) {
<a name="l600"><span class="linenum"> 600</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('grouping must be present in testing::<a class="function" onClick="logFunction('create_grouping_group')" href="../../../_functions/create_grouping_group.html" onMouseOver="funcPopup(event,'create_grouping_group')">create_grouping_group</a>() <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>');
<a name="l601"><span class="linenum"> 601</span></a>          }
<a name="l602"><span class="linenum"> 602</span></a>  
<a name="l603"><span class="linenum"> 603</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['groupid'])) {
<a name="l604"><span class="linenum"> 604</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('group must be present in testing_util::<a class="function" onClick="logFunction('create_grouping_group')" href="../../../_functions/create_grouping_group.html" onMouseOver="funcPopup(event,'create_grouping_group')">create_grouping_group</a>() <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>');
<a name="l605"><span class="linenum"> 605</span></a>          }
<a name="l606"><span class="linenum"> 606</span></a>  
<a name="l607"><span class="linenum"> 607</span></a>          return <a class="function" onClick="logFunction('groups_assign_grouping')" href="../../../_functions/groups_assign_grouping.html" onMouseOver="funcPopup(event,'groups_assign_grouping')">groups_assign_grouping</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['groupingid'], <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['groupid']);
<a name="l608"><span class="linenum"> 608</span></a>      }
<a name="l609"><span class="linenum"> 609</span></a>  
<a name="l610"><span class="linenum"> 610</span></a>      <span class="comment">/**</span>
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment">     * Create an instance of a repository.</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment">     *</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment">     * @param string type of repository to create an instance for.</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment">     * @param array|stdClass $record data to use to up set the instance.</span>
<a name="l615"><span class="linenum"> 615</span></a>  <span class="comment">     * @param array $options options</span>
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">     * @return stdClass repository instance record</span>
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment">     * @since Moodle 2.5.1</span>
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment">     */</span>
<a name="l619"><span class="linenum"> 619</span></a>      public function <a class="function" onClick="logFunction('create_repository')" href="../../../_functions/create_repository.html" onMouseOver="funcPopup(event,'create_repository')">create_repository</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>=null, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a> = null) {
<a name="l620"><span class="linenum"> 620</span></a>          <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../../../_variables/generator.html">$generator</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_plugin_generator')" href="../../../_functions/get_plugin_generator.html" onMouseOver="funcPopup(event,'get_plugin_generator')">get_plugin_generator</a>('repository_'.<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>);
<a name="l621"><span class="linenum"> 621</span></a>          return <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../../../_variables/generator.html">$generator</a>-&gt;<a class="function" onClick="logFunction('create_instance')" href="../../../_functions/create_instance.html" onMouseOver="funcPopup(event,'create_instance')">create_instance</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>);
<a name="l622"><span class="linenum"> 622</span></a>      }
<a name="l623"><span class="linenum"> 623</span></a>  
<a name="l624"><span class="linenum"> 624</span></a>      <span class="comment">/**</span>
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment">     * Create an instance of a repository.</span>
<a name="l626"><span class="linenum"> 626</span></a>  <span class="comment">     *</span>
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment">     * @param string type of repository to create an instance for.</span>
<a name="l628"><span class="linenum"> 628</span></a>  <span class="comment">     * @param array|stdClass $record data to use to up set the instance.</span>
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">     * @param array $options options</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">     * @return repository_type object</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">     * @since Moodle 2.5.1</span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment">     */</span>
<a name="l633"><span class="linenum"> 633</span></a>      public function <a class="function" onClick="logFunction('create_repository_type')" href="../../../_functions/create_repository_type.html" onMouseOver="funcPopup(event,'create_repository_type')">create_repository_type</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>=null, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a> = null) {
<a name="l634"><span class="linenum"> 634</span></a>          <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../../../_variables/generator.html">$generator</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_plugin_generator')" href="../../../_functions/get_plugin_generator.html" onMouseOver="funcPopup(event,'get_plugin_generator')">get_plugin_generator</a>('repository_'.<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>);
<a name="l635"><span class="linenum"> 635</span></a>          return <a class="var it1064" onMouseOver="hilite(1064)" onMouseOut="lolite()" onClick="logVariable('generator')" href="../../../_variables/generator.html">$generator</a>-&gt;<a class="function" onClick="logFunction('create_type')" href="../../../_functions/create_type.html" onMouseOver="funcPopup(event,'create_type')">create_type</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>);
<a name="l636"><span class="linenum"> 636</span></a>      }
<a name="l637"><span class="linenum"> 637</span></a>  
<a name="l638"><span class="linenum"> 638</span></a>  
<a name="l639"><span class="linenum"> 639</span></a>      <span class="comment">/**</span>
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment">     * Create a test scale</span>
<a name="l641"><span class="linenum"> 641</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l642"><span class="linenum"> 642</span></a>  <span class="comment">     * @param array $options</span>
<a name="l643"><span class="linenum"> 643</span></a>  <span class="comment">     * @return stdClass block instance record</span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">     */</span>
<a name="l645"><span class="linenum"> 645</span></a>      public function <a class="function" onClick="logFunction('create_scale')" href="../../../_functions/create_scale.html" onMouseOver="funcPopup(event,'create_scale')">create_scale</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>=null, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>=null) {
<a name="l646"><span class="linenum"> 646</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l647"><span class="linenum"> 647</span></a>  
<a name="l648"><span class="linenum"> 648</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scalecount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/scalecount.html">scalecount</a>++;
<a name="l649"><span class="linenum"> 649</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('scalecount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/scalecount.html">scalecount</a>;
<a name="l650"><span class="linenum"> 650</span></a>  
<a name="l651"><span class="linenum"> 651</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l652"><span class="linenum"> 652</span></a>  
<a name="l653"><span class="linenum"> 653</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'])) {
<a name="l654"><span class="linenum"> 654</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'] = 'Test scale '.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l655"><span class="linenum"> 655</span></a>          }
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['scale'])) {
<a name="l658"><span class="linenum"> 658</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['scale'] = 'A,B,C,D,F';
<a name="l659"><span class="linenum"> 659</span></a>          }
<a name="l660"><span class="linenum"> 660</span></a>  
<a name="l661"><span class="linenum"> 661</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['courseid'])) {
<a name="l662"><span class="linenum"> 662</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['courseid'] = 0;
<a name="l663"><span class="linenum"> 663</span></a>          }
<a name="l664"><span class="linenum"> 664</span></a>  
<a name="l665"><span class="linenum"> 665</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['userid'])) {
<a name="l666"><span class="linenum"> 666</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['userid'] = 0;
<a name="l667"><span class="linenum"> 667</span></a>          }
<a name="l668"><span class="linenum"> 668</span></a>  
<a name="l669"><span class="linenum"> 669</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'])) {
<a name="l670"><span class="linenum"> 670</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'] = 'Test scale description '.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l671"><span class="linenum"> 671</span></a>          }
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['descriptionformat'])) {
<a name="l674"><span class="linenum"> 674</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['descriptionformat'] = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l675"><span class="linenum"> 675</span></a>          }
<a name="l676"><span class="linenum"> 676</span></a>  
<a name="l677"><span class="linenum"> 677</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['timemodified'] = <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l678"><span class="linenum"> 678</span></a>  
<a name="l679"><span class="linenum"> 679</span></a>          if (isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['id'])) {
<a name="l680"><span class="linenum"> 680</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('import_record')" href="../../../_functions/import_record.html" onMouseOver="funcPopup(event,'import_record')">import_record</a>('scale', <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>);
<a name="l681"><span class="linenum"> 681</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../../../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>()-&gt;<a class="function" onClick="logFunction('reset_sequence')" href="../../../_functions/reset_sequence.html" onMouseOver="funcPopup(event,'reset_sequence')">reset_sequence</a>('scale');
<a name="l682"><span class="linenum"> 682</span></a>              <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a> = <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['id'];
<a name="l683"><span class="linenum"> 683</span></a>          } else {
<a name="l684"><span class="linenum"> 684</span></a>              <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('scale', <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>);
<a name="l685"><span class="linenum"> 685</span></a>          }
<a name="l686"><span class="linenum"> 686</span></a>  
<a name="l687"><span class="linenum"> 687</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('scale', array('id'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l688"><span class="linenum"> 688</span></a>      }
<a name="l689"><span class="linenum"> 689</span></a>  
<a name="l690"><span class="linenum"> 690</span></a>      <span class="comment">/**</span>
<a name="l691"><span class="linenum"> 691</span></a>  <span class="comment">     * Creates a new role in the system.</span>
<a name="l692"><span class="linenum"> 692</span></a>  <span class="comment">     *</span>
<a name="l693"><span class="linenum"> 693</span></a>  <span class="comment">     * You can fill $record with the role 'name',</span>
<a name="l694"><span class="linenum"> 694</span></a>  <span class="comment">     * 'shortname', 'description' and 'archetype'.</span>
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment">     *</span>
<a name="l696"><span class="linenum"> 696</span></a>  <span class="comment">     * If an archetype is specified it's capabilities,</span>
<a name="l697"><span class="linenum"> 697</span></a>  <span class="comment">     * context where the role can be assigned and</span>
<a name="l698"><span class="linenum"> 698</span></a>  <span class="comment">     * all other properties are copied from the archetype;</span>
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">     * if no archetype is specified it will create an</span>
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment">     * empty role.</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment">     *</span>
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l703"><span class="linenum"> 703</span></a>  <span class="comment">     * @return int The new role id</span>
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment">     */</span>
<a name="l705"><span class="linenum"> 705</span></a>      public function <a class="function" onClick="logFunction('create_role')" href="../../../_functions/create_role.html" onMouseOver="funcPopup(event,'create_role')">create_role</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>=null) {
<a name="l706"><span class="linenum"> 706</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l707"><span class="linenum"> 707</span></a>  
<a name="l708"><span class="linenum"> 708</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rolecount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/rolecount.html">rolecount</a>++;
<a name="l709"><span class="linenum"> 709</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('rolecount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/rolecount.html">rolecount</a>;
<a name="l710"><span class="linenum"> 710</span></a>  
<a name="l711"><span class="linenum"> 711</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l712"><span class="linenum"> 712</span></a>  
<a name="l713"><span class="linenum"> 713</span></a>          if (empty(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['shortname'])) {
<a name="l714"><span class="linenum"> 714</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['shortname'] = 'role-' . <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l715"><span class="linenum"> 715</span></a>          }
<a name="l716"><span class="linenum"> 716</span></a>  
<a name="l717"><span class="linenum"> 717</span></a>          if (empty(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'])) {
<a name="l718"><span class="linenum"> 718</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'] = 'Test role ' . <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l719"><span class="linenum"> 719</span></a>          }
<a name="l720"><span class="linenum"> 720</span></a>  
<a name="l721"><span class="linenum"> 721</span></a>          if (empty(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'])) {
<a name="l722"><span class="linenum"> 722</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'] = 'Test role ' . <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> . ' description';
<a name="l723"><span class="linenum"> 723</span></a>          }
<a name="l724"><span class="linenum"> 724</span></a>  
<a name="l725"><span class="linenum"> 725</span></a>          if (empty(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['archetype'])) {
<a name="l726"><span class="linenum"> 726</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['archetype'] = '';
<a name="l727"><span class="linenum"> 727</span></a>          } else {
<a name="l728"><span class="linenum"> 728</span></a>              <a class="var it3916" onMouseOver="hilite(3916)" onMouseOut="lolite()" onClick="logVariable('archetypes')" href="../../../_variables/archetypes.html">$archetypes</a> = <a class="function" onClick="logFunction('get_role_archetypes')" href="../../../_functions/get_role_archetypes.html" onMouseOver="funcPopup(event,'get_role_archetypes')">get_role_archetypes</a>();
<a name="l729"><span class="linenum"> 729</span></a>              if (empty(<a class="var it3916" onMouseOver="hilite(3916)" onMouseOut="lolite()" onClick="logVariable('archetypes')" href="../../../_variables/archetypes.html">$archetypes</a>[<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['archetype']])) {
<a name="l730"><span class="linenum"> 730</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('\'role\' requires the field \'archetype\' to specify a ' .
<a name="l731"><span class="linenum"> 731</span></a>                      'valid archetype shortname (editingteacher, student...)');
<a name="l732"><span class="linenum"> 732</span></a>              }
<a name="l733"><span class="linenum"> 733</span></a>          }
<a name="l734"><span class="linenum"> 734</span></a>  
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment">        // Creates the role.</span>
<a name="l736"><span class="linenum"> 736</span></a>          if (!<a class="var it3917" onMouseOver="hilite(3917)" onMouseOut="lolite()" onClick="logVariable('newroleid')" href="../../../_variables/newroleid.html">$newroleid</a> = <a class="function" onClick="logFunction('create_role')" href="../../../_functions/create_role.html" onMouseOver="funcPopup(event,'create_role')">create_role</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'], <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['shortname'], <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'], <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['archetype'])) {
<a name="l737"><span class="linenum"> 737</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('There was an error creating \'' . <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['shortname'] . '\' role');
<a name="l738"><span class="linenum"> 738</span></a>          }
<a name="l739"><span class="linenum"> 739</span></a>  
<a name="l740"><span class="linenum"> 740</span></a>  <span class="comment">        // If no archetype was specified we allow it to be added to all contexts,</span>
<a name="l741"><span class="linenum"> 741</span></a>  <span class="comment">        // otherwise we allow it in the archetype contexts.</span>
<a name="l742"><span class="linenum"> 742</span></a>          if (!<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['archetype']) {
<a name="l743"><span class="linenum"> 743</span></a>              <a class="var it3918" onMouseOver="hilite(3918)" onMouseOut="lolite()" onClick="logVariable('contextlevels')" href="../../../_variables/contextlevels.html">$contextlevels</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="class" onClick="logClass('context_helper')" href="../../../_classes/context_helper.html" onMouseOver="classPopup(event,'context_helper')">context_helper</a>::<a class="function" onClick="logFunction('get_all_levels')" href="../../../_functions/get_all_levels.html" onMouseOver="funcPopup(event,'get_all_levels')">get_all_levels</a>());
<a name="l744"><span class="linenum"> 744</span></a>          } else {
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment">            // Copying from the archetype default rol.</span>
<a name="l746"><span class="linenum"> 746</span></a>              <a class="var it3919" onMouseOver="hilite(3919)" onMouseOut="lolite()" onClick="logVariable('archetyperoleid')" href="../../../_variables/archetyperoleid.html">$archetyperoleid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>(
<a name="l747"><span class="linenum"> 747</span></a>                  'role',
<a name="l748"><span class="linenum"> 748</span></a>                  'id',
<a name="l749"><span class="linenum"> 749</span></a>                  array('shortname' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['archetype'], 'archetype' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['archetype'])
<a name="l750"><span class="linenum"> 750</span></a>              );
<a name="l751"><span class="linenum"> 751</span></a>              <a class="var it3918" onMouseOver="hilite(3918)" onMouseOut="lolite()" onClick="logVariable('contextlevels')" href="../../../_variables/contextlevels.html">$contextlevels</a> = <a class="function" onClick="logFunction('get_role_contextlevels')" href="../../../_functions/get_role_contextlevels.html" onMouseOver="funcPopup(event,'get_role_contextlevels')">get_role_contextlevels</a>(<a class="var it3919" onMouseOver="hilite(3919)" onMouseOut="lolite()" onClick="logVariable('archetyperoleid')" href="../../../_variables/archetyperoleid.html">$archetyperoleid</a>);
<a name="l752"><span class="linenum"> 752</span></a>          }
<a name="l753"><span class="linenum"> 753</span></a>          <a class="function" onClick="logFunction('set_role_contextlevels')" href="../../../_functions/set_role_contextlevels.html" onMouseOver="funcPopup(event,'set_role_contextlevels')">set_role_contextlevels</a>(<a class="var it3917" onMouseOver="hilite(3917)" onMouseOut="lolite()" onClick="logVariable('newroleid')" href="../../../_variables/newroleid.html">$newroleid</a>, <a class="var it3918" onMouseOver="hilite(3918)" onMouseOut="lolite()" onClick="logVariable('contextlevels')" href="../../../_variables/contextlevels.html">$contextlevels</a>);
<a name="l754"><span class="linenum"> 754</span></a>  
<a name="l755"><span class="linenum"> 755</span></a>          if (<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['archetype']) {
<a name="l756"><span class="linenum"> 756</span></a>  
<a name="l757"><span class="linenum"> 757</span></a>  <span class="comment">            // We copy all the roles the archetype can assign, override and switch to.</span>
<a name="l758"><span class="linenum"> 758</span></a>              if (<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['archetype']) {
<a name="l759"><span class="linenum"> 759</span></a>                  <a class="var it2894" onMouseOver="hilite(2894)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../../_variables/types.html">$types</a> = array('assign', 'override', 'switch');
<a name="l760"><span class="linenum"> 760</span></a>                  foreach (<a class="var it2894" onMouseOver="hilite(2894)" onMouseOut="lolite()" onClick="logVariable('types')" href="../../../_variables/types.html">$types</a> as <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>) {
<a name="l761"><span class="linenum"> 761</span></a>                      <a class="var it3920" onMouseOver="hilite(3920)" onMouseOut="lolite()" onClick="logVariable('rolestocopy')" href="../../../_variables/rolestocopy.html">$rolestocopy</a> = <a class="function" onClick="logFunction('get_default_role_archetype_allows')" href="../../../_functions/get_default_role_archetype_allows.html" onMouseOver="funcPopup(event,'get_default_role_archetype_allows')">get_default_role_archetype_allows</a>(<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['archetype']);
<a name="l762"><span class="linenum"> 762</span></a>                      foreach (<a class="var it3920" onMouseOver="hilite(3920)" onMouseOut="lolite()" onClick="logVariable('rolestocopy')" href="../../../_variables/rolestocopy.html">$rolestocopy</a> as <a class="var it3921" onMouseOver="hilite(3921)" onMouseOut="lolite()" onClick="logVariable('tocopy')" href="../../../_variables/tocopy.html">$tocopy</a>) {
<a name="l763"><span class="linenum"> 763</span></a>                          <a class="var it3922" onMouseOver="hilite(3922)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../../../_variables/functionname.html">$functionname</a> = 'allow_' . <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>;
<a name="l764"><span class="linenum"> 764</span></a>                          <a class="var it3922" onMouseOver="hilite(3922)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../../../_variables/functionname.html">$functionname</a>(<a class="var it3917" onMouseOver="hilite(3917)" onMouseOut="lolite()" onClick="logVariable('newroleid')" href="../../../_variables/newroleid.html">$newroleid</a>, <a class="var it3921" onMouseOver="hilite(3921)" onMouseOut="lolite()" onClick="logVariable('tocopy')" href="../../../_variables/tocopy.html">$tocopy</a>);
<a name="l765"><span class="linenum"> 765</span></a>                      }
<a name="l766"><span class="linenum"> 766</span></a>                  }
<a name="l767"><span class="linenum"> 767</span></a>              }
<a name="l768"><span class="linenum"> 768</span></a>  
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment">            // Copying the archetype capabilities.</span>
<a name="l770"><span class="linenum"> 770</span></a>              <a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('sourcerole')" href="../../../_variables/sourcerole.html">$sourcerole</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('role', array('id' =&gt; <a class="var it3919" onMouseOver="hilite(3919)" onMouseOut="lolite()" onClick="logVariable('archetyperoleid')" href="../../../_variables/archetyperoleid.html">$archetyperoleid</a>));
<a name="l771"><span class="linenum"> 771</span></a>              <a class="function" onClick="logFunction('role_cap_duplicate')" href="../../../_functions/role_cap_duplicate.html" onMouseOver="funcPopup(event,'role_cap_duplicate')">role_cap_duplicate</a>(<a class="var it3923" onMouseOver="hilite(3923)" onMouseOut="lolite()" onClick="logVariable('sourcerole')" href="../../../_variables/sourcerole.html">$sourcerole</a>, <a class="var it3917" onMouseOver="hilite(3917)" onMouseOut="lolite()" onClick="logVariable('newroleid')" href="../../../_variables/newroleid.html">$newroleid</a>);
<a name="l772"><span class="linenum"> 772</span></a>          }
<a name="l773"><span class="linenum"> 773</span></a>  
<a name="l774"><span class="linenum"> 774</span></a>          return <a class="var it3917" onMouseOver="hilite(3917)" onMouseOut="lolite()" onClick="logVariable('newroleid')" href="../../../_variables/newroleid.html">$newroleid</a>;
<a name="l775"><span class="linenum"> 775</span></a>      }
<a name="l776"><span class="linenum"> 776</span></a>  
<a name="l777"><span class="linenum"> 777</span></a>      <span class="comment">/**</span>
<a name="l778"><span class="linenum"> 778</span></a>  <span class="comment">     * Create a tag.</span>
<a name="l779"><span class="linenum"> 779</span></a>  <span class="comment">     *</span>
<a name="l780"><span class="linenum"> 780</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l781"><span class="linenum"> 781</span></a>  <span class="comment">     * @return stdClass the tag record</span>
<a name="l782"><span class="linenum"> 782</span></a>  <span class="comment">     */</span>
<a name="l783"><span class="linenum"> 783</span></a>      public function <a class="function" onClick="logFunction('create_tag')" href="../../../_functions/create_tag.html" onMouseOver="funcPopup(event,'create_tag')">create_tag</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = null) {
<a name="l784"><span class="linenum"> 784</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../_variables/USER.html">$USER</a>;
<a name="l785"><span class="linenum"> 785</span></a>  
<a name="l786"><span class="linenum"> 786</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tagcount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/tagcount.html">tagcount</a>++;
<a name="l787"><span class="linenum"> 787</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('tagcount')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/tagcount.html">tagcount</a>;
<a name="l788"><span class="linenum"> 788</span></a>  
<a name="l789"><span class="linenum"> 789</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array) <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l790"><span class="linenum"> 790</span></a>  
<a name="l791"><span class="linenum"> 791</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['userid'])) {
<a name="l792"><span class="linenum"> 792</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['userid'] = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l793"><span class="linenum"> 793</span></a>          }
<a name="l794"><span class="linenum"> 794</span></a>  
<a name="l795"><span class="linenum"> 795</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'])) {
<a name="l796"><span class="linenum"> 796</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['name'] = 'Tag name ' . <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l797"><span class="linenum"> 797</span></a>          }
<a name="l798"><span class="linenum"> 798</span></a>  
<a name="l799"><span class="linenum"> 799</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['rawname'])) {
<a name="l800"><span class="linenum"> 800</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['rawname'] = 'Raw tag name ' . <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l801"><span class="linenum"> 801</span></a>          }
<a name="l802"><span class="linenum"> 802</span></a>  
<a name="l803"><span class="linenum"> 803</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['tagtype'])) {
<a name="l804"><span class="linenum"> 804</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['tagtype'] = 'default';
<a name="l805"><span class="linenum"> 805</span></a>          }
<a name="l806"><span class="linenum"> 806</span></a>  
<a name="l807"><span class="linenum"> 807</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'])) {
<a name="l808"><span class="linenum"> 808</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['description'] = 'Tag description';
<a name="l809"><span class="linenum"> 809</span></a>          }
<a name="l810"><span class="linenum"> 810</span></a>  
<a name="l811"><span class="linenum"> 811</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['descriptionformat'])) {
<a name="l812"><span class="linenum"> 812</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['descriptionformat'] = <a class="constant" onClick="logConstant('FORMAT_MOODLE')" href="../../../_constants/FORMAT_MOODLE.html" onMouseOver="constPopup(event,'FORMAT_MOODLE')">FORMAT_MOODLE</a>;
<a name="l813"><span class="linenum"> 813</span></a>          }
<a name="l814"><span class="linenum"> 814</span></a>  
<a name="l815"><span class="linenum"> 815</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['flag'])) {
<a name="l816"><span class="linenum"> 816</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['flag'] = 0;
<a name="l817"><span class="linenum"> 817</span></a>          }
<a name="l818"><span class="linenum"> 818</span></a>  
<a name="l819"><span class="linenum"> 819</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['timemodified'])) {
<a name="l820"><span class="linenum"> 820</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['timemodified'] = <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l821"><span class="linenum"> 821</span></a>          }
<a name="l822"><span class="linenum"> 822</span></a>  
<a name="l823"><span class="linenum"> 823</span></a>          <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('tag', <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>);
<a name="l824"><span class="linenum"> 824</span></a>  
<a name="l825"><span class="linenum"> 825</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('tag', array('id' =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l826"><span class="linenum"> 826</span></a>      }
<a name="l827"><span class="linenum"> 827</span></a>  
<a name="l828"><span class="linenum"> 828</span></a>      <span class="comment">/**</span>
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment">     * Helper method which combines $defaults with the values specified in $record.</span>
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment">     * If $record is an object, it is converted to an array.</span>
<a name="l831"><span class="linenum"> 831</span></a>  <span class="comment">     * Then, for each key that is in $defaults, but not in $record, the value</span>
<a name="l832"><span class="linenum"> 832</span></a>  <span class="comment">     * from $defaults is copied.</span>
<a name="l833"><span class="linenum"> 833</span></a>  <span class="comment">     * @param array $defaults the default value for each field with</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment">     * @return array updated $record.</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment">     */</span>
<a name="l837"><span class="linenum"> 837</span></a>      public function <a class="function" onClick="logFunction('combine_defaults_and_record')" href="../../../_functions/combine_defaults_and_record.html" onMouseOver="funcPopup(event,'combine_defaults_and_record')">combine_defaults_and_record</a>(array <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../../_variables/defaults.html">$defaults</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>) {
<a name="l838"><span class="linenum"> 838</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array) <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l839"><span class="linenum"> 839</span></a>  
<a name="l840"><span class="linenum"> 840</span></a>          foreach (<a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../../_variables/defaults.html">$defaults</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a> =&gt; <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../../_variables/defaults.html">$defaults</a>) {
<a name="l841"><span class="linenum"> 841</span></a>              if (!<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>)) {
<a name="l842"><span class="linenum"> 842</span></a>                  <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../../_variables/key.html">$key</a>] = <a class="var it2243" onMouseOver="hilite(2243)" onMouseOut="lolite()" onClick="logVariable('defaults')" href="../../../_variables/defaults.html">$defaults</a>;
<a name="l843"><span class="linenum"> 843</span></a>              }
<a name="l844"><span class="linenum"> 844</span></a>          }
<a name="l845"><span class="linenum"> 845</span></a>          return <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l846"><span class="linenum"> 846</span></a>      }
<a name="l847"><span class="linenum"> 847</span></a>  
<a name="l848"><span class="linenum"> 848</span></a>      <span class="comment">/**</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment">     * Simplified enrolment of user to course using default options.</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment">     *</span>
<a name="l851"><span class="linenum"> 851</span></a>  <span class="comment">     * It is strongly recommended to use only this method for 'manual' and 'self' plugins only!!!</span>
<a name="l852"><span class="linenum"> 852</span></a>  <span class="comment">     *</span>
<a name="l853"><span class="linenum"> 853</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l854"><span class="linenum"> 854</span></a>  <span class="comment">     * @param int $courseid</span>
<a name="l855"><span class="linenum"> 855</span></a>  <span class="comment">     * @param int $roleid optional role id, use only with manual plugin</span>
<a name="l856"><span class="linenum"> 856</span></a>  <span class="comment">     * @param string $enrol name of enrol plugin,</span>
<a name="l857"><span class="linenum"> 857</span></a>  <span class="comment">     *     there must be exactly one instance in course,</span>
<a name="l858"><span class="linenum"> 858</span></a>  <span class="comment">     *     it must support enrol_user() method.</span>
<a name="l859"><span class="linenum"> 859</span></a>  <span class="comment">     * @param int $timestart (optional) 0 means unknown</span>
<a name="l860"><span class="linenum"> 860</span></a>  <span class="comment">     * @param int $timeend (optional) 0 means forever</span>
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">     * @param int $status (optional) default to ENROL_USER_ACTIVE for new enrolments</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment">     * @return bool success</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment">     */</span>
<a name="l864"><span class="linenum"> 864</span></a>      public function <a class="function" onClick="logFunction('enrol_user')" href="../../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../../_variables/roleid.html">$roleid</a> = null, <a class="var it529" onMouseOver="hilite(529)" onMouseOut="lolite()" onClick="logVariable('enrol')" href="../../../_variables/enrol.html">$enrol</a> = 'manual', <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../../_variables/timestart.html">$timestart</a> = 0, <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('timeend')" href="../../../_variables/timeend.html">$timeend</a> = 0, <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a> = null) {
<a name="l865"><span class="linenum"> 865</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l866"><span class="linenum"> 866</span></a>  
<a name="l867"><span class="linenum"> 867</span></a>          if (!<a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../../_variables/plugin.html">$plugin</a> = <a class="function" onClick="logFunction('enrol_get_plugin')" href="../../../_functions/enrol_get_plugin.html" onMouseOver="funcPopup(event,'enrol_get_plugin')">enrol_get_plugin</a>(<a class="var it529" onMouseOver="hilite(529)" onMouseOut="lolite()" onClick="logVariable('enrol')" href="../../../_variables/enrol.html">$enrol</a>)) {
<a name="l868"><span class="linenum"> 868</span></a>              return false;
<a name="l869"><span class="linenum"> 869</span></a>          }
<a name="l870"><span class="linenum"> 870</span></a>  
<a name="l871"><span class="linenum"> 871</span></a>          <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../../../_variables/instances.html">$instances</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('enrol', array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>, 'enrol'=&gt;<a class="var it529" onMouseOver="hilite(529)" onMouseOut="lolite()" onClick="logVariable('enrol')" href="../../../_variables/enrol.html">$enrol</a>));
<a name="l872"><span class="linenum"> 872</span></a>          if (<a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../../../_variables/instances.html">$instances</a>) != 1) {
<a name="l873"><span class="linenum"> 873</span></a>              return false;
<a name="l874"><span class="linenum"> 874</span></a>          }
<a name="l875"><span class="linenum"> 875</span></a>          <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../../../_variables/instances.html">$instances</a>);
<a name="l876"><span class="linenum"> 876</span></a>  
<a name="l877"><span class="linenum"> 877</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../../_variables/roleid.html">$roleid</a>) and <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('roleid')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../../../_variables/roleid.html">roleid</a>) {
<a name="l878"><span class="linenum"> 878</span></a>              <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../../_variables/roleid.html">$roleid</a> = <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('roleid')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../../../_variables/roleid.html">roleid</a>;
<a name="l879"><span class="linenum"> 879</span></a>          }
<a name="l880"><span class="linenum"> 880</span></a>  
<a name="l881"><span class="linenum"> 881</span></a>          <a class="var it130" onMouseOver="hilite(130)" onMouseOut="lolite()" onClick="logVariable('plugin')" href="../../../_variables/plugin.html">$plugin</a>-&gt;<a class="function" onClick="logFunction('enrol_user')" href="../../../_functions/enrol_user.html" onMouseOver="funcPopup(event,'enrol_user')">enrol_user</a>(<a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>, <a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../../_variables/roleid.html">$roleid</a>, <a class="var it347" onMouseOver="hilite(347)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../../_variables/timestart.html">$timestart</a>, <a class="var it382" onMouseOver="hilite(382)" onMouseOut="lolite()" onClick="logVariable('timeend')" href="../../../_variables/timeend.html">$timeend</a>, <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../../_variables/status.html">$status</a>);
<a name="l882"><span class="linenum"> 882</span></a>          return true;
<a name="l883"><span class="linenum"> 883</span></a>      }
<a name="l884"><span class="linenum"> 884</span></a>  
<a name="l885"><span class="linenum"> 885</span></a>      <span class="comment">/**</span>
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">     * Assigns the specified role to a user in the context.</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment">     *</span>
<a name="l888"><span class="linenum"> 888</span></a>  <span class="comment">     * @param int $roleid</span>
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment">     * @param int $userid</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment">     * @param int $contextid Defaults to the system context</span>
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment">     * @return int new/existing id of the assignment</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment">     */</span>
<a name="l893"><span class="linenum"> 893</span></a>      public function <a class="function" onClick="logFunction('role_assign')" href="../../../_functions/role_assign.html" onMouseOver="funcPopup(event,'role_assign')">role_assign</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../../_variables/roleid.html">$roleid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>, <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../../_variables/contextid.html">$contextid</a> = false) {
<a name="l894"><span class="linenum"> 894</span></a>  
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment">        // Default to the system context.</span>
<a name="l896"><span class="linenum"> 896</span></a>          if (!<a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../../_variables/contextid.html">$contextid</a>) {
<a name="l897"><span class="linenum"> 897</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l898"><span class="linenum"> 898</span></a>              <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../../_variables/contextid.html">$contextid</a> = <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l899"><span class="linenum"> 899</span></a>          }
<a name="l900"><span class="linenum"> 900</span></a>  
<a name="l901"><span class="linenum"> 901</span></a>          if (empty(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../../_variables/roleid.html">$roleid</a>)) {
<a name="l902"><span class="linenum"> 902</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('roleid must be present in <a class="class" onClick="logClass('testing_data_generator')" href="../../../_classes/testing_data_generator.html" onMouseOver="classPopup(event,'testing_data_generator')">testing_data_generator</a>::<a class="function" onClick="logFunction('role_assign')" href="../../../_functions/role_assign.html" onMouseOver="funcPopup(event,'role_assign')">role_assign</a>() arguments');
<a name="l903"><span class="linenum"> 903</span></a>          }
<a name="l904"><span class="linenum"> 904</span></a>  
<a name="l905"><span class="linenum"> 905</span></a>          if (empty(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>)) {
<a name="l906"><span class="linenum"> 906</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('userid must be present in <a class="class" onClick="logClass('testing_data_generator')" href="../../../_classes/testing_data_generator.html" onMouseOver="classPopup(event,'testing_data_generator')">testing_data_generator</a>::<a class="function" onClick="logFunction('role_assign')" href="../../../_functions/role_assign.html" onMouseOver="funcPopup(event,'role_assign')">role_assign</a>() arguments');
<a name="l907"><span class="linenum"> 907</span></a>          }
<a name="l908"><span class="linenum"> 908</span></a>  
<a name="l909"><span class="linenum"> 909</span></a>          return <a class="function" onClick="logFunction('role_assign')" href="../../../_functions/role_assign.html" onMouseOver="funcPopup(event,'role_assign')">role_assign</a>(<a class="var it395" onMouseOver="hilite(395)" onMouseOut="lolite()" onClick="logVariable('roleid')" href="../../../_variables/roleid.html">$roleid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../../_variables/userid.html">$userid</a>, <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../../_variables/contextid.html">$contextid</a>);
<a name="l910"><span class="linenum"> 910</span></a>      }
<a name="l911"><span class="linenum"> 911</span></a>  
<a name="l912"><span class="linenum"> 912</span></a>      <span class="comment">/**</span>
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">     * Create a grade_category.</span>
<a name="l914"><span class="linenum"> 914</span></a>  <span class="comment">     *</span>
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l916"><span class="linenum"> 916</span></a>  <span class="comment">     * @return stdClass the grade category record</span>
<a name="l917"><span class="linenum"> 917</span></a>  <span class="comment">     */</span>
<a name="l918"><span class="linenum"> 918</span></a>      public function <a class="function" onClick="logFunction('create_grade_category')" href="../../../_functions/create_grade_category.html" onMouseOver="funcPopup(event,'create_grade_category')">create_grade_category</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = null) {
<a name="l919"><span class="linenum"> 919</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l920"><span class="linenum"> 920</span></a>  
<a name="l921"><span class="linenum"> 921</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradecategorycounter')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/gradecategorycounter.html">gradecategorycounter</a>++;
<a name="l922"><span class="linenum"> 922</span></a>  
<a name="l923"><span class="linenum"> 923</span></a>          <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = (array)<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>;
<a name="l924"><span class="linenum"> 924</span></a>  
<a name="l925"><span class="linenum"> 925</span></a>          if (empty(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['courseid'])) {
<a name="l926"><span class="linenum"> 926</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('courseid must be present in testing::<a class="function" onClick="logFunction('create_grade_category')" href="../../../_functions/create_grade_category.html" onMouseOver="funcPopup(event,'create_grade_category')">create_grade_category</a>() <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>');
<a name="l927"><span class="linenum"> 927</span></a>          }
<a name="l928"><span class="linenum"> 928</span></a>  
<a name="l929"><span class="linenum"> 929</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['fullname'])) {
<a name="l930"><span class="linenum"> 930</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['fullname'] = 'Grade category ' . <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradecategorycounter')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/gradecategorycounter.html">gradecategorycounter</a>;
<a name="l931"><span class="linenum"> 931</span></a>          }
<a name="l932"><span class="linenum"> 932</span></a>  
<a name="l933"><span class="linenum"> 933</span></a>  <span class="comment">        // For gradelib classes.</span>
<a name="l934"><span class="linenum"> 934</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l935"><span class="linenum"> 935</span></a>  <span class="comment">        // Create new grading category in this course.</span>
<a name="l936"><span class="linenum"> 936</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../../_variables/gradecategory.html">$gradecategory</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_category')" href="../../../_classes/grade_category.html" onMouseOver="classPopup(event,'grade_category')">grade_category</a>(array('courseid' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['courseid']), false);
<a name="l937"><span class="linenum"> 937</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a class="function" onClick="logFunction('apply_default_settings')" href="../../../_functions/apply_default_settings.html" onMouseOver="funcPopup(event,'apply_default_settings')">apply_default_settings</a>();
<a name="l938"><span class="linenum"> 938</span></a>          <a class="class" onClick="logClass('grade_category')" href="../../../_classes/grade_category.html" onMouseOver="classPopup(event,'grade_category')">grade_category</a>::<a class="function" onClick="logFunction('set_properties')" href="../../../_functions/set_properties.html" onMouseOver="funcPopup(event,'set_properties')">set_properties</a>(<a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../../_variables/gradecategory.html">$gradecategory</a>, <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>);
<a name="l939"><span class="linenum"> 939</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a class="function" onClick="logFunction('apply_forced_settings')" href="../../../_functions/apply_forced_settings.html" onMouseOver="funcPopup(event,'apply_forced_settings')">apply_forced_settings</a>();
<a name="l940"><span class="linenum"> 940</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l941"><span class="linenum"> 941</span></a>  
<a name="l942"><span class="linenum"> 942</span></a>  <span class="comment">        // This creates a default grade item for the category</span>
<a name="l943"><span class="linenum"> 943</span></a>          <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../_variables/gradeitem.html">$gradeitem</a> = <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a class="function" onClick="logFunction('load_grade_item')" href="../../../_functions/load_grade_item.html" onMouseOver="funcPopup(event,'load_grade_item')">load_grade_item</a>();
<a name="l944"><span class="linenum"> 944</span></a>  
<a name="l945"><span class="linenum"> 945</span></a>          <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a class="function" onClick="logFunction('update_from_db')" href="../../../_functions/update_from_db.html" onMouseOver="funcPopup(event,'update_from_db')">update_from_db</a>();
<a name="l946"><span class="linenum"> 946</span></a>          return <a class="var it3924" onMouseOver="hilite(3924)" onMouseOut="lolite()" onClick="logVariable('gradecategory')" href="../../../_variables/gradecategory.html">$gradecategory</a>-&gt;<a class="function" onClick="logFunction('get_record_data')" href="../../../_functions/get_record_data.html" onMouseOver="funcPopup(event,'get_record_data')">get_record_data</a>();
<a name="l947"><span class="linenum"> 947</span></a>      }
<a name="l948"><span class="linenum"> 948</span></a>  
<a name="l949"><span class="linenum"> 949</span></a>      <span class="comment">/**</span>
<a name="l950"><span class="linenum"> 950</span></a>  <span class="comment">     * Create a grade_item.</span>
<a name="l951"><span class="linenum"> 951</span></a>  <span class="comment">     *</span>
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l953"><span class="linenum"> 953</span></a>  <span class="comment">     * @return stdClass the grade item record</span>
<a name="l954"><span class="linenum"> 954</span></a>  <span class="comment">     */</span>
<a name="l955"><span class="linenum"> 955</span></a>      public function <a class="function" onClick="logFunction('create_grade_item')" href="../../../_functions/create_grade_item.html" onMouseOver="funcPopup(event,'create_grade_item')">create_grade_item</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = null) {
<a name="l956"><span class="linenum"> 956</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l957"><span class="linenum"> 957</span></a>          require_once(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/libdir.html">libdir</a>/gradelib.php&quot;);
<a name="l958"><span class="linenum"> 958</span></a>  
<a name="l959"><span class="linenum"> 959</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradeitemcounter')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/gradeitemcounter.html">gradeitemcounter</a>++;
<a name="l960"><span class="linenum"> 960</span></a>  
<a name="l961"><span class="linenum"> 961</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['itemtype'])) {
<a name="l962"><span class="linenum"> 962</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['itemtype'] = 'manual';
<a name="l963"><span class="linenum"> 963</span></a>          }
<a name="l964"><span class="linenum"> 964</span></a>  
<a name="l965"><span class="linenum"> 965</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['itemname'])) {
<a name="l966"><span class="linenum"> 966</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['itemname'] = 'Grade item ' . <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradeitemcounter')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/gradeitemcounter.html">gradeitemcounter</a>;
<a name="l967"><span class="linenum"> 967</span></a>          }
<a name="l968"><span class="linenum"> 968</span></a>  
<a name="l969"><span class="linenum"> 969</span></a>          if (isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['outcomeid'])) {
<a name="l970"><span class="linenum"> 970</span></a>              <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../../_variables/outcome.html">$outcome</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_outcome')" href="../../../_classes/grade_outcome.html" onMouseOver="classPopup(event,'grade_outcome')">grade_outcome</a>(array('id' =&gt; <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['outcomeid']));
<a name="l971"><span class="linenum"> 971</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['scaleid'] = <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('outcome')" href="../../../_variables/outcome.html">$outcome</a>-&gt;<a onClick="logVariable('scaleid')" class="var it39893" onMouseOver="hilite(39893)" onMouseOut="lolite()" href="../../../_variables/scaleid.html">scaleid</a>;
<a name="l972"><span class="linenum"> 972</span></a>          }
<a name="l973"><span class="linenum"> 973</span></a>          if (isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['scaleid'])) {
<a name="l974"><span class="linenum"> 974</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['gradetype'] = <a class="constant" onClick="logConstant('GRADE_TYPE_SCALE')" href="../../../_constants/GRADE_TYPE_SCALE.html" onMouseOver="constPopup(event,'GRADE_TYPE_SCALE')">GRADE_TYPE_SCALE</a>;
<a name="l975"><span class="linenum"> 975</span></a>          } else if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['gradetype'])) {
<a name="l976"><span class="linenum"> 976</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['gradetype'] = <a class="constant" onClick="logConstant('GRADE_TYPE_VALUE')" href="../../../_constants/GRADE_TYPE_VALUE.html" onMouseOver="constPopup(event,'GRADE_TYPE_VALUE')">GRADE_TYPE_VALUE</a>;
<a name="l977"><span class="linenum"> 977</span></a>          }
<a name="l978"><span class="linenum"> 978</span></a>  
<a name="l979"><span class="linenum"> 979</span></a>  <span class="comment">        // Create new grade item in this course.</span>
<a name="l980"><span class="linenum"> 980</span></a>          <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../_variables/gradeitem.html">$gradeitem</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_item')" href="../../../_classes/grade_item.html" onMouseOver="classPopup(event,'grade_item')">grade_item</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>, false);
<a name="l981"><span class="linenum"> 981</span></a>          <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l982"><span class="linenum"> 982</span></a>  
<a name="l983"><span class="linenum"> 983</span></a>          <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('update_from_db')" href="../../../_functions/update_from_db.html" onMouseOver="funcPopup(event,'update_from_db')">update_from_db</a>();
<a name="l984"><span class="linenum"> 984</span></a>          return <a class="var it3925" onMouseOver="hilite(3925)" onMouseOut="lolite()" onClick="logVariable('gradeitem')" href="../../../_variables/gradeitem.html">$gradeitem</a>-&gt;<a class="function" onClick="logFunction('get_record_data')" href="../../../_functions/get_record_data.html" onMouseOver="funcPopup(event,'get_record_data')">get_record_data</a>();
<a name="l985"><span class="linenum"> 985</span></a>      }
<a name="l986"><span class="linenum"> 986</span></a>  
<a name="l987"><span class="linenum"> 987</span></a>      <span class="comment">/**</span>
<a name="l988"><span class="linenum"> 988</span></a>  <span class="comment">     * Create a grade_outcome.</span>
<a name="l989"><span class="linenum"> 989</span></a>  <span class="comment">     *</span>
<a name="l990"><span class="linenum"> 990</span></a>  <span class="comment">     * @param array|stdClass $record</span>
<a name="l991"><span class="linenum"> 991</span></a>  <span class="comment">     * @return stdClass the grade outcome record</span>
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment">     */</span>
<a name="l993"><span class="linenum"> 993</span></a>      public function <a class="function" onClick="logFunction('create_grade_outcome')" href="../../../_functions/create_grade_outcome.html" onMouseOver="funcPopup(event,'create_grade_outcome')">create_grade_outcome</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a> = null) {
<a name="l994"><span class="linenum"> 994</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l995"><span class="linenum"> 995</span></a>  
<a name="l996"><span class="linenum"> 996</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradeoutcomecounter')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/gradeoutcomecounter.html">gradeoutcomecounter</a>++;
<a name="l997"><span class="linenum"> 997</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('gradeoutcomecounter')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/gradeoutcomecounter.html">gradeoutcomecounter</a>;
<a name="l998"><span class="linenum"> 998</span></a>  
<a name="l999"><span class="linenum"> 999</span></a>          if (!isset(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['fullname'])) {
<a name="l1000"><span class="linenum">1000</span></a>              <a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>['fullname'] = 'Grade outcome ' . <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>;
<a name="l1001"><span class="linenum">1001</span></a>          }
<a name="l1002"><span class="linenum">1002</span></a>  
<a name="l1003"><span class="linenum">1003</span></a>  <span class="comment">        // For gradelib classes.</span>
<a name="l1004"><span class="linenum">1004</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/libdir.html">libdir</a> . '/gradelib.php');
<a name="l1005"><span class="linenum">1005</span></a>  <span class="comment">        // Create new grading outcome in this course.</span>
<a name="l1006"><span class="linenum">1006</span></a>          <a class="var it3928" onMouseOver="hilite(3928)" onMouseOut="lolite()" onClick="logVariable('gradeoutcome')" href="../../../_variables/gradeoutcome.html">$gradeoutcome</a> = <span class="keyword">new </span><a class="class" onClick="logClass('grade_outcome')" href="../../../_classes/grade_outcome.html" onMouseOver="classPopup(event,'grade_outcome')">grade_outcome</a>(<a class="var it534" onMouseOver="hilite(534)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../../_variables/record.html">$record</a>, false);
<a name="l1007"><span class="linenum">1007</span></a>          <a class="var it3928" onMouseOver="hilite(3928)" onMouseOut="lolite()" onClick="logVariable('gradeoutcome')" href="../../../_variables/gradeoutcome.html">$gradeoutcome</a>-&gt;<a class="function" onClick="logFunction('insert')" href="../../../_functions/insert.html" onMouseOver="funcPopup(event,'insert')">insert</a>();
<a name="l1008"><span class="linenum">1008</span></a>  
<a name="l1009"><span class="linenum">1009</span></a>          <a class="var it3928" onMouseOver="hilite(3928)" onMouseOut="lolite()" onClick="logVariable('gradeoutcome')" href="../../../_variables/gradeoutcome.html">$gradeoutcome</a>-&gt;<a class="function" onClick="logFunction('update_from_db')" href="../../../_functions/update_from_db.html" onMouseOver="funcPopup(event,'update_from_db')">update_from_db</a>();
<a name="l1010"><span class="linenum">1010</span></a>          return <a class="var it3928" onMouseOver="hilite(3928)" onMouseOut="lolite()" onClick="logVariable('gradeoutcome')" href="../../../_variables/gradeoutcome.html">$gradeoutcome</a>-&gt;<a class="function" onClick="logFunction('get_record_data')" href="../../../_functions/get_record_data.html" onMouseOver="funcPopup(event,'get_record_data')">get_record_data</a>();
<a name="l1011"><span class="linenum">1011</span></a>      }
<a name="l1012"><span class="linenum">1012</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'create_block': ['create_block', 'Create a test block ', [['lib/testing/generator','data_generator.php',445]], 14],
'reset_sequence': ['reset_sequence', 'Reset a sequence to the id field of a table. ', [['lib/ddl','database_manager.php',102]], 12],
'create_tag': ['create_tag', 'Create a tag. ', [['lib/testing/generator','data_generator.php',777]], 19],
'get_record_data': ['get_record_data', 'Returns object with fields and values that are defined in database ', [['lib/grade','grade_object.php',305],['completion','data_object.php',296]], 20],
'create_category': ['create_category', 'Create a test course category ', [['lib/testing/generator','data_generator.php',278],['mod/glossary/tests/generator','lib.php',86]], 148],
'create_repository_type': ['create_repository_type', 'Create an instance of a repository. ', [['lib/testing/generator','data_generator.php',624]], 13],
'create_user': ['create_user', 'Create a test user ', [['lib/testing/generator','data_generator.php',137]], 821],
'hash_internal_user_password': ['hash_internal_user_password', 'Calculate hash for a plain text password. ', [['lib','moodlelib.php',4394]], 12],
'get_plugin_generator': ['get_plugin_generator', 'Return generator for given plugin or component. ', [['lib/testing/generator','data_generator.php',100]], 338],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',2854]], 853],
'get_component_directory': ['get_component_directory', 'Return exact absolute path to a plugin directory. ', [['lib/classes','component.php',1003],['lib','deprecatedlib.php',543]], 44],
'import_record': ['import_record', 'Import a record into a table, id field is required. Safety checks are NOT carried out. Lobs are supported. ', [['lib/dml','pgsql_native_moodle_database.php',1046],['lib/dml','oci_native_moodle_database.php',1285],['lib/dml','sqlsrv_native_moodle_database.php',1014],['lib/dml','mssql_native_moodle_database.php',933],['lib/dml','mysqli_native_moodle_database.php',1331],['lib/dml/tests','dml_test.php',5428],['lib/dml','pdo_moodle_database.php',576]], 24],
'create_grouping': ['create_grouping', 'Create a test grouping for the specified course ', [['lib/testing/generator','data_generator.php',543]], 44],
'create_grade_category': ['create_grade_category', 'Create a grade_category. ', [['lib/testing/generator','data_generator.php',912],['grade/tests','report_graderlib_test.php',233]], 8],
'role_assign': ['role_assign', 'Assigns the specified role to a user in the context. ', [['lib/testing/generator','data_generator.php',885],['lib','accesslib.php',1666],['enrol','externallib.php',1008]], 172],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'groups_assign_grouping': ['groups_assign_grouping', 'Assigns group into grouping ', [['group','lib.php',818]], 33],
'create_course_section': ['create_course_section', 'Create course section if does not exist yet ', [['lib/testing/generator','data_generator.php',421]], 3],
'get_section_info': ['get_section_info', 'Gets data about specific numbered section. ', [['lib','modinfolib.php',311]], 67],
'create_grade_outcome': ['create_grade_outcome', 'Create a grade_outcome. ', [['lib/testing/generator','data_generator.php',987]], 1],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'update_from_db': ['update_from_db', 'Using this object\'s id field, fetches the matching record in the DB, and looks at each variable in turn. If the DB has different data, the db\'s data is used to update the object. This is different from the update() function, which acts on the DB record based on the object. ', [['lib/grade','grade_object.php',364],['completion','data_object.php',342]], 8],
'course_create_sections_if_missing': ['course_create_sections_if_missing', 'Creates missing course section(s) and rebuilds course cache ', [['course','lib.php',1434]], 16],
'create_cohort': ['create_cohort', 'Create test cohort. ', [['lib/testing/generator','data_generator.php',308]], 54],
'create_group_member': ['create_group_member', 'Create a test group member ', [['lib/testing/generator','data_generator.php',512]], 32],
'cohort_add_cohort': ['cohort_add_cohort', 'Add new cohort. ', [['cohort','lib.php',34]], 12],
'create_grade_item': ['create_grade_item', 'Create a grade_item. ', [['lib/testing/generator','data_generator.php',949]], 0],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'load_grade_item': ['load_grade_item', 'Loads the grade_item object referenced by $this->itemid and saves it as $this->grade_item for easy access ', [['lib/grade','grade_grade.php',219],['lib/grade','grade_category.php',2051]], 52],
'record_exists': ['record_exists', 'Test whether a record exists in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1768]], 735],
'get_role_contextlevels': ['get_role_contextlevels', 'Return context levels where this role is assignable. ', [['lib','accesslib.php',3635]], 5],
'enrol_user': ['enrol_user', 'Enrol remote user to our course ', [['enrol/mnet','enrol.php',115],['lib/testing/generator','data_generator.php',848],['enrol/guest','lib.php',54],['lib','enrollib.php',1269],['enrol/flatfile','lib.php',144]], 472],
'set_properties': ['set_properties', 'Given an associated array or object, cycles through each key/variable and assigns the value to the corresponding variable in this object. ', [['lib/grade','grade_object.php',388],['completion','data_object.php',366],['lib/grade','grade_category.php',2364]], 29],
'get_role_archetypes': ['get_role_archetypes', 'Returns array of all role archetypes. ', [['lib','accesslib.php',1340]], 14],
'reset': ['reset', '', [['question/tests/generator','lib.php',34],['lib/testing/generator','data_generator.php',84],['lib/lessphp','Parser.php',89],['mod/book/tests/generator','lib.php',43],['lib/testing/generator','repository_generator.php',45],['backup/cc','validator.php',64],['mod/survey/tests/generator','lib.php',38],['lib/lessphp/Tree','DefaultFunc.php',31],['mod/assign/feedback/editpdf/fpdi','pdf_context.php',51],['lib/testing/generator','module_generator.php',45],['lib/zend/Zend/Http','CookieJar.php',393],['lib/phpmailer','class.smtp.php',700],['notes/tests/generator','lib.php',43],['lib/htmlpurifier/HTMLPurifier','PropertyList.php',71],['lib/tests/fixtures','event_fixtures.php',69],['mod/forum/tests/generator','lib.php',54],['lib/jabber/XMPP','XMLStream.php',730],['lib/horde/framework/Horde/Imap/Client/Base','Mailbox.php',167],['lib/testing/generator','block_generator.php',42],['mod/glossary/tests/generator','lib.php',48],['mod/chat/tests/generator','lib.php',43],['cache/classes','factory.php',156],['mod/lesson/tests/generator','lib.php',43],['lib/google/src/Google/Service','Compute.php',4205],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',54],['mod/wiki/tests/generator','lib.php',43],['lib/google/src/Google/Service','GamesManagement.php',349],['lib/google/src/Google/Service','GamesManagement.php',470],['lib/google/src/Google/Service','GamesManagement.php',607],['lib/google/src/Google/Service','GamesManagement.php',691],['lib/google/src/Google/Service','GamesManagement.php',731],['lib/google/src/Google/Service','GamesManagement.php',818],['admin/tool/uploadcourse/classes','course.php',864],['admin/tool/uploadcourse/classes','processor.php',362],['lib/jabber/XMPP','BOSH.php',158],['lib/mustache/src/Mustache','Tokenizer.php',220],['lib/testing/generator','component_generator_base.php',53],['lib/adodb','adodb-active-record.inc.php',715],['backup/cc/cc_lib','cc_utils.php',417],['backup/cc/cc_lib','cc_utils.php',458]], 1070],
'groups_add_member': ['groups_add_member', 'Adds a specified user to a group ', [['group','lib.php',31]], 76],
'create_repository': ['create_repository', 'Create an instance of a repository. ', [['lib/testing/generator','data_generator.php',610]], 23],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',2001]], 277],
'create_group': ['create_group', 'Create a test group for the specified course ', [['lib/testing/generator','data_generator.php',469]], 102],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'create': ['create', 'Creates a new 2048 bit RSA key pair and returns a unique ID that can be used to reference this key pair when launching new instances. ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',39],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',271],['repository/filesystem','lib.php',283],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',39],['lib/google/src/Google/Service','Gmail.php',670],['lib/google/src/Google/Service','Gmail.php',827],['course','lib.php',2874],['lib/classes/event','base.php',139],['lib/google/src/Google/Service','Genomics.php',618],['lib/google/src/Google/Service','Genomics.php',717],['lib/google/src/Google/Service','Genomics.php',850],['lib/google/src/Google/Service','Genomics.php',1313],['lib','modinfolib.php',1747],['calendar','lib.php',2651],['lib/zend/Zend/Service/Amazon','Sqs.php',82],['lib','weblib.php',3048],['mod/lesson','locallib.php',1013],['mod/lesson','locallib.php',2166],['mod/lesson','locallib.php',3203],['lib/google/src/Google/Service','Fitness.php',340],['lib/google/src/Google/Service','TagManager.php',1034],['lib/google/src/Google/Service','TagManager.php',1124],['lib/google/src/Google/Service','TagManager.php',1217],['lib/google/src/Google/Service','TagManager.php',1310],['lib/google/src/Google/Service','TagManager.php',1403],['lib/google/src/Google/Service','TagManager.php',1497],['lib/google/src/Google/Service','TagManager.php',1591],['lib/google/src/Google/Service','TagManager.php',1742],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Container.php',314],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['repository','lib.php',206],['repository','lib.php',1960],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',555],['lib/google/src/Google/Service','Games.php',1648],['lib/google/src/Google/Service','Games.php',2012],['lib/google/src/Google/Service','MapsEngine.php',1676],['lib/google/src/Google/Service','MapsEngine.php',1976],['lib/google/src/Google/Service','MapsEngine.php',2252],['lib/google/src/Google/Service','MapsEngine.php',2329],['lib/google/src/Google/Service','MapsEngine.php',2897],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Pubsub.php',219],['lib/google/src/Google/Service','Pubsub.php',364],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/simplepie/library/SimplePie','Registry.php',153],['lib','navigationlib.php',266],['lib/google/src/Google/Service','Dns.php',282],['lib/google/src/Google/Service','Dns.php',355],['lib','coursecatlib.php',328],['mod/quiz/classes','structure.php',65]], 3074],
'get_manager': ['get_manager', 'Returns the sql generator used for db manipulation. Used mostly in upgrade.php scripts. ', [['lib/dml','moodle_database.php',1030]], 273],
'combine_defaults_and_record': ['combine_defaults_and_record', 'Helper method which combines $defaults with the values specified in $record. If $record is an object, it is converted to an array. Then, for each key that is in $defaults, but not in $record, the value from $defaults is copied. ', [['lib/testing/generator','data_generator.php',828]], 2],
'create_instance': ['create_instance', 'Create new block instance ', [['blocks/online_users/tests/generator','lib.php',39],['grade/grading/form','lib.php',493],['mod/book/tests/generator','lib.php',53],['mod/imscp/tests/generator','lib.php',38],['mod/feedback/tests/generator','lib.php',38],['lib/portfolio','plugin.php',412],['lib/testing/generator','repository_generator.php',106],['mod/scorm/tests/generator','lib.php',38],['mod/survey/tests/generator','lib.php',49],['mod/page/tests/generator','lib.php',39],['mod/assignment/tests/generator','lib.php',39],['mod/quiz/tests/generator','lib.php',28],['mod/workshop/tests/generator','lib.php',38],['mod/assign/tests','base_test.php',200],['mod/url/tests/generator','lib.php',38],['lib/testing/generator','module_generator.php',210],['notes/tests/generator','lib.php',52],['mod/forum/tests/generator','lib.php',67],['mod/glossary/tests/generator','lib.php',59],['mod/chat/tests/generator','lib.php',53],['mod/lesson/tests/generator','lib.php',53],['mod/wiki/tests/generator','lib.php',53],['mod/data/tests/generator','lib.php',39],['mod/choice/tests/generator','lib.php',38],['mod/folder/tests/generator','lib.php',38],['mod/lti/tests/generator','lib.php',40],['mod/assign/tests/generator','lib.php',29],['mod/resource/tests/generator','lib.php',37]], 290],
'get_default_role_archetype_allows': ['get_default_role_archetype_allows', 'Return default roles that can be assigned, overridden or switched by give role archetype. ', [['lib','accesslib.php',2579]], 14],
'create_course': ['create_course', 'Create a test course ', [['lib/testing/generator','data_generator.php',356],['course','lib.php',2535],['enrol/ldap','lib.php',950],['admin/tool/generator/classes','course_backend.php',246]], 861],
'apply_default_settings': ['apply_default_settings', 'Applies default settings on this category ', [['lib/grade','grade_category.php',2450]], 4],
'insert': ['insert', 'Creates a customer resource if one does not already exist. (customers.insert) ', [['lib/google/src/Google/Service','Reseller.php',309],['lib/google/src/Google/Service','Reseller.php',473],['lib/adodb','adodb-active-recordx.inc.php',899],['lib/grade','grade_object.php',325],['lib/google/src/Google/Service','Replicapoolupdater.php',294],['lib/google/src/Google/Service','Fusiontables.php',674],['lib/google/src/Google/Service','Fusiontables.php',838],['lib/google/src/Google/Service','Fusiontables.php',1012],['lib/google/src/Google/Service','Fusiontables.php',1217],['lib/google/src/Google/Service','Blogger.php',1243],['lib/google/src/Google/Service','Blogger.php',1493],['lib/google/src/Google/Service','Doubleclicksearch.php',285],['lib/google/src/Google/Service','AdExchangeBuyer.php',476],['lib/google/src/Google/Service','AdExchangeBuyer.php',635],['lib/google/src/Google/Service','Manager.php',271],['lib/google/src/Google/Service','Manager.php',349],['lib/grade','grade_item.php',385],['lib/google/src/Google/Service','Gmail.php',993],['lib/google/src/Google/Service','Plus.php',475],['lib/google/src/Google/Service','Mirror.php',393],['lib/google/src/Google/Service','Mirror.php',451],['lib/google/src/Google/Service','Mirror.php',605],['lib/google/src/Google/Service','Mirror.php',687],['lib/google/src/Google/Service','Mirror.php',801],['lib/google/src/Google/Service','Urlshortener.php',124],['lib/google/src/Google/Service','Dfareporting.php',499],['lib/google/src/Google/Service','PlusDomains.php',481],['lib/google/src/Google/Service','PlusDomains.php',606],['lib/google/src/Google/Service','PlusDomains.php',732],['lib/google/src/Google/Service','PlusDomains.php',781],['lib/google/src/Google/Service','GroupsMigration.php',85],['lib/google/src/Google/Service','Licensing.php',253],['lib/google/src/Google/Service','Drive.php',1491],['lib/google/src/Google/Service','Drive.php',1568],['lib/google/src/Google/Service','Drive.php',1727],['lib/google/src/Google/Service','Drive.php',1961],['lib/google/src/Google/Service','Drive.php',2045],['lib/google/src/Google/Service','Drive.php',2164],['lib/google/src/Google/Service','Drive.php',2328],['completion','data_object.php',316],['lib/google/src/Google/Service','Books.php',1835],['lib/google/src/Google/Service','Bigquery.php',548],['lib/google/src/Google/Service','Bigquery.php',672],['lib/google/src/Google/Service','Bigquery.php',856],['lib/google/src/Google/Service','YouTube.php',1323],['lib/google/src/Google/Service','YouTube.php',1423],['lib/google/src/Google/Service','YouTube.php',1498],['lib/google/src/Google/Service','YouTube.php',2025],['lib/google/src/Google/Service','YouTube.php',2323],['lib/google/src/Google/Service','YouTube.php',2525],['lib/google/src/Google/Service','YouTube.php',2685],['lib/google/src/Google/Service','YouTube.php',3013],['lib/google/src/Google/Service','YouTube.php',3254],['lib/google/src/Google/Service','Coordinate.php',491],['lib/google/src/Google/Service','Autoscaler.php',346],['lib/google/src/Google/Service','ShoppingContent.php',582],['lib/google/src/Google/Service','ShoppingContent.php',764],['lib/google/src/Google/Service','ShoppingContent.php',1000],['lib/google/src/Google/Service','SQLAdmin.php',698],['lib/google/src/Google/Service','SQLAdmin.php',959],['lib/google/src/Google/Service','Directory.php',1504],['lib/google/src/Google/Service','Directory.php',1601],['lib/google/src/Google/Service','Directory.php',1671],['lib/google/src/Google/Service','Directory.php',1964],['lib/google/src/Google/Service','Directory.php',2071],['lib/google/src/Google/Service','Directory.php',2239],['lib/google/src/Google/Service','Directory.php',2419],['lib/google/src/Google/Service','Taskqueue.php',323],['lib/google/src/Google/Service','AndroidPublisher.php',1211],['lib/google/src/Google/Service','AndroidPublisher.php',2002],['lib/google/src/Google/Service','AdSenseHost.php',786],['lib/google/src/Google/Service','AdSenseHost.php',1041],['lib/google/src/Google/Service','AdSenseHost.php',1182],['lib/google/src/Google/Service','MapsEngine.php',2780],['lib/google/src/Google/Service','MapsEngine.php',3184],['lib/grade','grade_grade.php',928],['lib/google/src/Google/Service','SiteVerification.php',180],['lib/google/src/Google/Service','Prediction.php',290],['lib/google/src/Google/Service','Compute.php',2844],['lib/google/src/Google/Service','Compute.php',2944],['lib/google/src/Google/Service','Compute.php',3171],['lib/google/src/Google/Service','Compute.php',3255],['lib/google/src/Google/Service','Compute.php',3393],['lib/google/src/Google/Service','Compute.php',3493],['lib/google/src/Google/Service','Compute.php',3573],['lib/google/src/Google/Service','Compute.php',3757],['lib/google/src/Google/Service','Compute.php',3891],['lib/google/src/Google/Service','Compute.php',3973],['lib/google/src/Google/Service','Compute.php',4165],['lib/google/src/Google/Service','Compute.php',4436],['lib/google/src/Google/Service','Compute.php',4690],['lib/google/src/Google/Service','Compute.php',4838],['lib/google/src/Google/Service','Compute.php',4959],['lib/google/src/Google/Service','Compute.php',5120],['lib/google/src/Google/Service','Compute.php',5259],['lib/google/src/Google/Service','Calendar.php',915],['lib/google/src/Google/Service','Calendar.php',1067],['lib/google/src/Google/Service','Calendar.php',1255],['lib/google/src/Google/Service','Calendar.php',1422],['lib/google/src/Google/Service','Analytics.php',2082],['lib/google/src/Google/Service','Analytics.php',2326],['lib/google/src/Google/Service','Analytics.php',2444],['lib/google/src/Google/Service','Analytics.php',2539],['lib/google/src/Google/Service','Analytics.php',2666],['lib/google/src/Google/Service','Analytics.php',2776],['lib/google/src/Google/Service','Analytics.php',2883],['lib/google/src/Google/Service','Analytics.php',3022],['lib/google/src/Google/Service','Analytics.php',3216],['lib/google/src/Google/Service','Analytics.php',3323],['lib/google/src/Google/Service','Analytics.php',3421],['lib/google/src/Google/Service','Tasks.php',336],['lib/google/src/Google/Service','Tasks.php',456],['lib/grade','grade_category.php',318],['lib/google/src/Google/Service','Storage.php',980],['lib/google/src/Google/Service','Storage.php',1100],['lib/google/src/Google/Service','Storage.php',1262],['lib/google/src/Google/Service','Storage.php',1392],['lib/google/src/Google/Service','Storage.php',1619],['lib/grade','grade_scale.php',111],['lib/google/src/Google/Service','Admin.php',87],['lib/google/src/Google/Service','Replicapool.php',434],['lib/google/src/Google/Service','Resourceviews.php',471],['lib/adodb','adodb-active-record.inc.php',742],['lib/grade','grade_outcome.php',120]], 459],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'normalize_component': ['normalize_component', 'Normalize the component name using the "frankenstyle" rules. ', [['lib/classes','component.php',968],['lib','deprecatedlib.php',528]], 85],
'groups_create_group': ['groups_create_group', 'Add a new group ', [['group','lib.php',221]], 21],
'set_role_contextlevels': ['set_role_contextlevels', 'Set the context levels at which a particular role can be assigned. Throws exceptions in case of error. ', [['lib','accesslib.php',3686]], 13],
'groups_create_grouping': ['groups_create_grouping', 'Add a new grouping ', [['group','lib.php',284]], 8],
'apply_forced_settings': ['apply_forced_settings', 'Applies forced settings on this category ', [['lib/grade','grade_category.php',2470]], 14],
'create_scale': ['create_scale', 'Create a test scale ', [['lib/testing/generator','data_generator.php',639]], 13],
'enrol_get_plugin': ['enrol_get_plugin', 'Returns instance of enrol plugin ', [['lib','enrollib.php',111]], 144],
'get_all_levels': ['get_all_levels', 'Returns a list of all context levels ', [['lib','accesslib.php',5913]], 10],
'create_grouping_group': ['create_grouping_group', 'Create a test grouping group ', [['lib/testing/generator','data_generator.php',586]], 13],
'get_field_select': ['get_field_select', 'Get a single field value from a table record which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1514]], 44],
'role_cap_duplicate': ['role_cap_duplicate', 'Duplicates all the base definitions of a role ', [['lib','accesslib.php',4768]], 1],
'create_role': ['create_role', 'Creates a new role in the system. ', [['lib/testing/generator','data_generator.php',690],['lib','accesslib.php',1458]], 38],
'create_type': ['create_type', 'Create the type of repository. ', [['lib/testing/generator','repository_generator.php',152]], 1],
'create_module': ['create_module', 'Create a test module ', [['lib/testing/generator','data_generator.php',457],['course','lib.php',3390]], 530],
'get_field': ['get_field', 'Get the right field name to fetch a stat for these attempts that is calculated for more than one $whichattempts (count or avg). ', [['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1497],['user/filters','lib.php',124],['lib/behat','behat_field_manager.php',243]], 485],
'is_readable': ['is_readable', '', [], 207],
'count': ['count', '', [], 3984],
'class_exists': ['class_exists', '', [], 273],
'time': ['time', '', [], 1768],
'array_key_exists': ['array_key_exists', '', [], 1539],
'is_null': ['is_null', '', [], 1992],
'array_keys': ['array_keys', '', [], 1152],
'range': ['range', '', [], 73],
'defined': ['defined', '', [], 4098],
'reset': ['reset', '', [], 1070],
'rand': ['rand', '', [], 107],
'min': ['min', '', [], 754]};
CLASS_DATA={
'grade_outcome': ['grade_outcome', 'Class representing a grade outcome. ', [['lib/grade','grade_outcome.php',30]], 39],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6106]], 929],
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',214]], 867],
'grade_item': ['grade_item', 'Class representing a grade item. ', [['lib/grade','grade_item.php',29]], 206],
'testing_data_generator': ['testing_data_generator', 'Data generator class for unit tests and other tools that need to create fake test sites. ', [['lib/testing/generator','data_generator.php',28]], 7],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6766]], 1197],
'context_user': ['context_user', 'User context class ', [['lib','accesslib.php',6347]], 288],
'coursecat': ['coursecat', 'Class to store, cache, render and manage course category ', [['lib','coursecatlib.php',28]], 262],
'core_component': ['core_component', 'Collection of components related methods. ', [['lib/classes','component.php',41]], 485],
'context_helper': ['context_helper', 'Context maintenance and helper methods. ', [['lib','accesslib.php',5824]], 210],
'grade_category': ['grade_category', 'grade_category is an object mapped to DB table {prefix}grade_categories ', [['lib/grade','grade_category.php',29]], 144]};
CONST_DATA={
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 554],
'FORMAT_MOODLE': ['FORMAT_MOODLE', '', [['lib','weblib.php',42]], 378],
'AUTH_PASSWORD_NOT_CACHED': ['AUTH_PASSWORD_NOT_CACHED', '', [['lib','moodlelib.php',517]], 14],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1252],
'GRADE_TYPE_SCALE': ['GRADE_TYPE_SCALE', '', [['lib/grade','constants.php',90]], 63],
'GRADE_TYPE_VALUE': ['GRADE_TYPE_VALUE', '', [['lib/grade','constants.php',85]], 71],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
