<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of badgeslib.php</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='lib';
filename='badgeslib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/lib/</a> -> <a href="badgeslib.php.source.html">badgeslib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="badgeslib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../_stats.html">Project Stats</a>]</p>
<p><b>Contains classes, functions and constants used in badges.</b></p>
<table>
<tr><td align="right">Author: </td><td>Yuliya Bozhko <<a href="mailto:yuliya.bozhko@totaralms.com">yuliya.bozhko@totaralms.com</a>></td></tr>
<tr><td align="right">Copyright: </td><td>2012 onwards Totara Learning Solutions Ltd {@link <a href="http://www.totaralms.com/}" target="_blank">http://www.totaralms.com/}</a></td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>1235 lines (42 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>3 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 1 class</h3>
<div class="inset">
<p><b>badge::</b> (39 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#get_context">get_context</a>()<br>
&nbsp;&nbsp;<a href="#get_aggregation_methods">get_aggregation_methods</a>()<br>
&nbsp;&nbsp;<a href="#get_accepted_criteria">get_accepted_criteria</a>()<br>
&nbsp;&nbsp;<a href="#save">save</a>()<br>
&nbsp;&nbsp;<a href="#make_clone">make_clone</a>()<br>
&nbsp;&nbsp;<a href="#is_active">is_active</a>()<br>
&nbsp;&nbsp;<a href="#get_status_name">get_status_name</a>()<br>
&nbsp;&nbsp;<a href="#set_status">set_status</a>()<br>
&nbsp;&nbsp;<a href="#is_locked">is_locked</a>()<br>
&nbsp;&nbsp;<a href="#has_awards">has_awards</a>()<br>
&nbsp;&nbsp;<a href="#get_awards">get_awards</a>()<br>
&nbsp;&nbsp;<a href="#is_issued">is_issued</a>()<br>
&nbsp;&nbsp;<a href="#issue">issue</a>()<br>
&nbsp;&nbsp;<a href="#review_all_criteria">review_all_criteria</a>()<br>
&nbsp;&nbsp;<a href="#get_criteria_completions">get_criteria_completions</a>()<br>
&nbsp;&nbsp;<a href="#has_criteria">has_criteria</a>()<br>
&nbsp;&nbsp;<a href="#get_criteria">get_criteria</a>()<br>
&nbsp;&nbsp;<a href="#get_aggregation_method">get_aggregation_method</a>()<br>
&nbsp;&nbsp;<a href="#can_expire">can_expire</a>()<br>
&nbsp;&nbsp;<a href="#calculate_expiry">calculate_expiry</a>()<br>
&nbsp;&nbsp;<a href="#has_manual_award_criteria">has_manual_award_criteria</a>()<br>
&nbsp;&nbsp;<a href="#delete">delete</a>()<br>
&nbsp;&nbsp;<a href="#badges_notify_badge_award">badges_notify_badge_award</a>()<br>
&nbsp;&nbsp;<a href="#badges_calculate_message_schedule">badges_calculate_message_schedule</a>()<br>
&nbsp;&nbsp;<a href="#badge_message_from_template">badge_message_from_template</a>()<br>
&nbsp;&nbsp;<a href="#badges_get_badges">badges_get_badges</a>()<br>
&nbsp;&nbsp;<a href="#badges_get_user_badges">badges_get_user_badges</a>()<br>
&nbsp;&nbsp;<a href="#badges_add_course_navigation">badges_add_course_navigation</a>()<br>
&nbsp;&nbsp;<a href="#badges_award_handle_manual_criteria_review">badges_award_handle_manual_criteria_review</a>()<br>
&nbsp;&nbsp;<a href="#badges_process_badge_image">badges_process_badge_image</a>()<br>
&nbsp;&nbsp;<a href="#print_badge_image">print_badge_image</a>()<br>
&nbsp;&nbsp;<a href="#badges_bake">badges_bake</a>()<br>
&nbsp;&nbsp;<a href="#get_backpack_settings">get_backpack_settings</a>()<br>
&nbsp;&nbsp;<a href="#badges_download">badges_download</a>()<br>
&nbsp;&nbsp;<a href="#badges_check_backpack_accessibility">badges_check_backpack_accessibility</a>()<br>
&nbsp;&nbsp;<a href="#badges_user_has_backpack">badges_user_has_backpack</a>()<br>
&nbsp;&nbsp;<a href="#badges_handle_course_deletion">badges_handle_course_deletion</a>()<br>
&nbsp;&nbsp;<a href="#badges_setup_backpack_js">badges_setup_backpack_js</a>()<br>
</p>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="badge"><b>badge</b></a>&nbsp;&nbsp;- <a href="../_classes/badge.html"><small>X-Ref</small></a>
</p>
<b>Class that represents badge.<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'badgeslib.php.source.html#l133')" href="badgeslib.php.source.html#l133">__construct</a>(<a href="../_variables/badgeid.html">$badgeid</a>)&nbsp;&nbsp;
<a href="../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructs with badge details.<BR>
</b><BR><b>param:</b> int $badgeid badge ID.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_context" onClick="logFunction('get_context', 'badgeslib.php.source.html#l157')" href="badgeslib.php.source.html#l157">get_context</a>()&nbsp;&nbsp;
<a href="../_functions/get_context.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Use to get context instance of a badge.<BR>
</b><BR><b>return:</b> context instance.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_aggregation_methods" onClick="logFunction('get_aggregation_methods', 'badgeslib.php.source.html#l171')" href="badgeslib.php.source.html#l171">get_aggregation_methods</a>()&nbsp;&nbsp;
<a href="../_functions/get_aggregation_methods.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return array of aggregation methods<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_accepted_criteria" onClick="logFunction('get_accepted_criteria', 'badgeslib.php.source.html#l182')" href="badgeslib.php.source.html#l182">get_accepted_criteria</a>()&nbsp;&nbsp;
<a href="../_functions/get_accepted_criteria.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return array of accepted criteria types for this badge<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="save" onClick="logFunction('save', 'badgeslib.php.source.html#l208')" href="badgeslib.php.source.html#l208">save</a>()&nbsp;&nbsp;
<a href="../_functions/save.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Save/update badge information in 'badge' table only.<BR>
Cannot be used for updating awards and criteria settings.<BR>
</b><BR><b>return:</b> bool Returns true on success.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="make_clone" onClick="logFunction('make_clone', 'badgeslib.php.source.html#l232')" href="badgeslib.php.source.html#l232">make_clone</a>()&nbsp;&nbsp;
<a href="../_functions/make_clone.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates and saves a clone of badge with all its properties.<BR>
Clone is not active by default and has 'Copy of' attached to its name.<BR>
</b><BR><b>return:</b> int ID of new badge.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_active" onClick="logFunction('is_active', 'badgeslib.php.source.html#l284')" href="badgeslib.php.source.html#l284">is_active</a>()&nbsp;&nbsp;
<a href="../_functions/is_active.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if badges is active.<BR>
Used in badge award.<BR>
</b><BR><b>return:</b> bool A status indicating badge is active<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_status_name" onClick="logFunction('get_status_name', 'badgeslib.php.source.html#l298')" href="badgeslib.php.source.html#l298">get_status_name</a>()&nbsp;&nbsp;
<a href="../_functions/get_status_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Use to get the name of badge status.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_status" onClick="logFunction('set_status', 'badgeslib.php.source.html#l306')" href="badgeslib.php.source.html#l306">set_status</a>(<a href="../_variables/status.html">$status</a> = 0)&nbsp;&nbsp;
<a href="../_functions/set_status.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Use to set badge status.<BR>
Only active badges can be earned/awarded/issued.<BR>
</b><BR><b>param:</b> int $status Status from BADGE_STATUS constants<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_locked" onClick="logFunction('is_locked', 'badgeslib.php.source.html#l317')" href="badgeslib.php.source.html#l317">is_locked</a>()&nbsp;&nbsp;
<a href="../_functions/is_locked.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if badges is locked.<BR>
Used in badge award and editing.<BR>
</b><BR><b>return:</b> bool A status indicating badge is locked<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_awards" onClick="logFunction('has_awards', 'badgeslib.php.source.html#l331')" href="badgeslib.php.source.html#l331">has_awards</a>()&nbsp;&nbsp;
<a href="../_functions/has_awards.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if badge has been awarded to users.<BR>
Used in badge editing.<BR>
</b><BR><b>return:</b> bool A status indicating badge has been awarded at least once<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_awards" onClick="logFunction('get_awards', 'badgeslib.php.source.html#l346')" href="badgeslib.php.source.html#l346">get_awards</a>()&nbsp;&nbsp;
<a href="../_functions/get_awards.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets list of users who have earned an instance of this badge.<BR>
</b><BR><b>return:</b> array An array of objects with information about badge awards.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_issued" onClick="logFunction('is_issued', 'badgeslib.php.source.html#l363')" href="badgeslib.php.source.html#l363">is_issued</a>(<a href="../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../_functions/is_issued.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Indicates whether badge has already been issued to a user.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="issue" onClick="logFunction('issue', 'badgeslib.php.source.html#l372')" href="badgeslib.php.source.html#l372">issue</a>(<a href="../_variables/userid.html">$userid</a>, <a href="../_variables/nobake.html">$nobake</a> = false)&nbsp;&nbsp;
<a href="../_functions/issue.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Issue a badge to user.<BR>
</b><BR><b>param:</b> int $userid User who earned the badge<br>
<b>param:</b> bool $nobake Not baking actual badges (for testing purposes)<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="review_all_criteria" onClick="logFunction('review_all_criteria', 'badgeslib.php.source.html#l434')" href="badgeslib.php.source.html#l434">review_all_criteria</a>()&nbsp;&nbsp;
<a href="../_functions/review_all_criteria.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Reviews all badge criteria and checks if badge can be instantly awarded.<BR>
</b><BR><b>return:</b> int Number of awards<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_criteria_completions" onClick="logFunction('get_criteria_completions', 'badgeslib.php.source.html#l510')" href="badgeslib.php.source.html#l510">get_criteria_completions</a>(<a href="../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../_functions/get_criteria_completions.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets an array of completed criteria from 'badge_criteria_met' table.<BR>
</b><BR><b>param:</b> int $userid Completions for a user<br>
<b>return:</b> array Records of criteria completions<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_criteria" onClick="logFunction('has_criteria', 'badgeslib.php.source.html#l528')" href="badgeslib.php.source.html#l528">has_criteria</a>()&nbsp;&nbsp;
<a href="../_functions/has_criteria.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if badges has award criteria set up.<BR>
</b><BR><b>return:</b> bool A status indicating badge has at least one criterion<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_criteria" onClick="logFunction('get_criteria', 'badgeslib.php.source.html#l540')" href="badgeslib.php.source.html#l540">get_criteria</a>()&nbsp;&nbsp;
<a href="../_functions/get_criteria.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns badge award criteria<BR>
</b><BR><b>return:</b> array An array of badge criteria<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_aggregation_method" onClick="logFunction('get_aggregation_method', 'badgeslib.php.source.html#l558')" href="badgeslib.php.source.html#l558">get_aggregation_method</a>(<a href="../_variables/criteriatype.html">$criteriatype</a> = 0)&nbsp;&nbsp;
<a href="../_functions/get_aggregation_method.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get aggregation method for badge criteria<BR>
</b><BR><b>param:</b> int $criteriatype If none supplied, get overall aggregation method (optional)<br>
<b>return:</b> int One of BADGE_CRITERIA_AGGREGATION_ALL or BADGE_CRITERIA_AGGREGATION_ANY<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="can_expire" onClick="logFunction('can_expire', 'badgeslib.php.source.html#l576')" href="badgeslib.php.source.html#l576">can_expire</a>()&nbsp;&nbsp;
<a href="../_functions/can_expire.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if badge has expiry period or date set up.<BR>
</b><BR><b>return:</b> bool A status indicating badge can expire<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="calculate_expiry" onClick="logFunction('calculate_expiry', 'badgeslib.php.source.html#l588')" href="badgeslib.php.source.html#l588">calculate_expiry</a>(<a href="../_variables/timestamp.html">$timestamp</a>)&nbsp;&nbsp;
<a href="../_functions/calculate_expiry.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Calculates badge expiry date based on either expirydate or expiryperiod.<BR>
</b><BR><b>param:</b> int $timestamp Time of badge issue<br>
<b>return:</b> int A timestamp<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_manual_award_criteria" onClick="logFunction('has_manual_award_criteria', 'badgeslib.php.source.html#l606')" href="badgeslib.php.source.html#l606">has_manual_award_criteria</a>()&nbsp;&nbsp;
<a href="../_functions/has_manual_award_criteria.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if badge has manual award criteria set.<BR>
</b><BR><b>return:</b> bool A status indicating badge can be awarded manually<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete" onClick="logFunction('delete', 'badgeslib.php.source.html#l620')" href="badgeslib.php.source.html#l620">delete</a>(<a href="../_variables/archive.html">$archive</a> = true)&nbsp;&nbsp;
<a href="../_functions/delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Fully deletes the badge or marks it as archived.<BR>
</b><BR><b>param:</b> $archive bool Achive a badge without actual deleting of any data.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_notify_badge_award" onClick="logFunction('badges_notify_badge_award', 'badgeslib.php.source.html#l660')" href="badgeslib.php.source.html#l660">badges_notify_badge_award</a>(badge <a href="../_variables/badge.html">$badge</a>, <a href="../_variables/userid.html">$userid</a>, <a href="../_variables/issued.html">$issued</a>, <a href="../_variables/filepathhash.html">$filepathhash</a>)&nbsp;&nbsp;
<a href="../_functions/badges_notify_badge_award.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sends notifications to users about awarded badges.<BR>
</b><BR><b>param:</b> badge $badge Badge that was issued<br>
<b>param:</b> int $userid Recipient ID<br>
<b>param:</b> string $issued Unique hash of an issued badge<br>
<b>param:</b> string $filepathhash File path hash of an issued badge for attachments<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_calculate_message_schedule" onClick="logFunction('badges_calculate_message_schedule', 'badgeslib.php.source.html#l745')" href="badgeslib.php.source.html#l745">badges_calculate_message_schedule</a>(<a href="../_variables/schedule.html">$schedule</a>)&nbsp;&nbsp;
<a href="../_functions/badges_calculate_message_schedule.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Caclulates date for the next message digest to badge creators.<BR>
</b><BR><b>param:</b> in $schedule Type of message schedule BADGE_MESSAGE_DAILY|BADGE_MESSAGE_WEEKLY|BADGE_MESSAGE_MONTHLY.<br>
<b>return:</b> int Timestamp for next cron<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badge_message_from_template" onClick="logFunction('badge_message_from_template', 'badgeslib.php.source.html#l769')" href="badgeslib.php.source.html#l769">badge_message_from_template</a>(<a href="../_variables/message.html">$message</a>, <a href="../_variables/params.html">$params</a>)&nbsp;&nbsp;
<a href="../_functions/badge_message_from_template.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Replaces variables in a message template and returns text ready to be emailed to a user.<BR>
</b><BR><b>param:</b> string $message Message body.<br>
<b>return:</b> string Message with replaced values<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_get_badges" onClick="logFunction('badges_get_badges', 'badgeslib.php.source.html#l784')" href="badgeslib.php.source.html#l784">badges_get_badges</a>(<a href="../_variables/type.html">$type</a>, <a href="../_variables/courseid.html">$courseid</a> = 0, <a href="../_variables/sort.html">$sort</a> = '', <a href="../_variables/dir.html">$dir</a> = '', <a href="../_variables/page.html">$page</a> = 0, <a href="../_variables/perpage.html">$perpage</a> = BADGE_PERPAGE, <a href="../_variables/user.html">$user</a> = 0)&nbsp;&nbsp;
<a href="../_functions/badges_get_badges.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get all badges.<BR>
</b><BR><b>param:</b> int Type of badges to return<br>
<b>param:</b> int Course ID for course badges<br>
<b>param:</b> string $sort An SQL field to sort by<br>
<b>param:</b> string $dir The sort direction ASC|DESC<br>
<b>param:</b> int $page The page or records to return<br>
<b>param:</b> int $perpage The number of records to return per page<br>
<b>param:</b> int $user User specific search<br>
<b>return:</b> array $badge Array of records matching criteria<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_get_user_badges" onClick="logFunction('badges_get_user_badges', 'badgeslib.php.source.html#l842')" href="badgeslib.php.source.html#l842">badges_get_user_badges</a>(<a href="../_variables/userid.html">$userid</a>, <a href="../_variables/courseid.html">$courseid</a> = 0, <a href="../_variables/page.html">$page</a> = 0, <a href="../_variables/perpage.html">$perpage</a> = 0, <a href="../_variables/search.html">$search</a> = '', <a href="../_variables/onlypublic.html">$onlypublic</a> = false)&nbsp;&nbsp;
<a href="../_functions/badges_get_user_badges.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get badges for a specific user.<BR>
</b><BR><b>param:</b> int $userid User ID<br>
<b>param:</b> int $courseid Badges earned by a user in a specific course<br>
<b>param:</b> int $page The page or records to return<br>
<b>param:</b> int $perpage The number of records to return per page<br>
<b>param:</b> string $search A simple string to search for<br>
<b>param:</b> bool $onlypublic Return only public badges<br>
<b>return:</b> array of badges ordered by decreasing date of issue<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_add_course_navigation" onClick="logFunction('badges_add_course_navigation', 'badgeslib.php.source.html#l893')" href="badgeslib.php.source.html#l893">badges_add_course_navigation</a>(navigation_node <a href="../_variables/coursenode.html">$coursenode</a>, stdClass <a href="../_variables/course.html">$course</a>)&nbsp;&nbsp;
<a href="../_functions/badges_add_course_navigation.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Extends the course administration navigation with the Badges page<BR>
</b><BR><b>param:</b> navigation_node $coursenode<br>
<b>param:</b> object $course<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_award_handle_manual_criteria_review" onClick="logFunction('badges_award_handle_manual_criteria_review', 'badgeslib.php.source.html#l931')" href="badgeslib.php.source.html#l931">badges_award_handle_manual_criteria_review</a>(stdClass <a href="../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../_functions/badges_award_handle_manual_criteria_review.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Triggered when badge is manually awarded.<BR>
</b><BR><b>param:</b> object&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_process_badge_image" onClick="logFunction('badges_process_badge_image', 'badgeslib.php.source.html#l958')" href="badgeslib.php.source.html#l958">badges_process_badge_image</a>(badge <a href="../_variables/badge.html">$badge</a>, <a href="../_variables/iconfile.html">$iconfile</a>)&nbsp;&nbsp;
<a href="../_functions/badges_process_badge_image.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Process badge image from form data<BR>
</b><BR><b>param:</b> badge $badge Badge object<br>
<b>param:</b> string $iconfile Original file<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="print_badge_image" onClick="logFunction('print_badge_image', 'badgeslib.php.source.html#l979')" href="badgeslib.php.source.html#l979">print_badge_image</a>(badge <a href="../_variables/badge.html">$badge</a>, stdClass <a href="../_variables/context.html">$context</a>, <a href="../_variables/size.html">$size</a> = 'small')&nbsp;&nbsp;
<a href="../_functions/print_badge_image.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Print badge image.<BR>
</b><BR><b>param:</b> badge $badge Badge object<br>
<b>param:</b> stdClass $context<br>
<b>param:</b> string $size<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_bake" onClick="logFunction('badges_bake', 'badgeslib.php.source.html#l997')" href="badgeslib.php.source.html#l997">badges_bake</a>(<a href="../_variables/hash.html">$hash</a>, <a href="../_variables/badgeid.html">$badgeid</a>, <a href="../_variables/userid.html">$userid</a> = 0, <a href="../_variables/pathhash.html">$pathhash</a> = false)&nbsp;&nbsp;
<a href="../_functions/badges_bake.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Bake issued badge.<BR>
</b><BR><b>param:</b> string $hash Unique hash of an issued badge.<br>
<b>param:</b> int $badgeid ID of the original badge.<br>
<b>param:</b> int $userid ID of badge recipient (optional).<br>
<b>param:</b> boolean $pathhash Return file pathhash instead of image url (optional).<br>
<b>return:</b> string|url Returns either new file path hash or new file URL<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_backpack_settings" onClick="logFunction('get_backpack_settings', 'badgeslib.php.source.html#l1056')" href="badgeslib.php.source.html#l1056">get_backpack_settings</a>(<a href="../_variables/userid.html">$userid</a>, <a href="../_variables/refresh.html">$refresh</a> = false)&nbsp;&nbsp;
<a href="../_functions/get_backpack_settings.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns external backpack settings and badges from this backpack.<BR>
</b><BR>This function first checks if badges for the user are cached and<BR>
tries to retrieve them from the cache. Otherwise, badges are obtained<BR>
through curl request to the backpack.<BR>
<BR>
<b>param:</b> int $userid Backpack user ID.<br>
<b>param:</b> boolean $refresh Refresh badges collection in cache.<br>
<b>return:</b> null|object Returns null is there is no backpack or object with backpack settings.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_download" onClick="logFunction('badges_download', 'badgeslib.php.source.html#l1109')" href="badgeslib.php.source.html#l1109">badges_download</a>(<a href="../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../_functions/badges_download.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Download all user badges in zip archive.<BR>
</b><BR><b>param:</b> int $userid ID of badge owner.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_check_backpack_accessibility" onClick="logFunction('badges_check_backpack_accessibility', 'badgeslib.php.source.html#l1143')" href="badgeslib.php.source.html#l1143">badges_check_backpack_accessibility</a>()&nbsp;&nbsp;
<a href="../_functions/badges_check_backpack_accessibility.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if badges can be pushed to external backpack.<BR>
</b><BR><b>return:</b> string Code of backpack accessibility status.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_user_has_backpack" onClick="logFunction('badges_user_has_backpack', 'badgeslib.php.source.html#l1180')" href="badgeslib.php.source.html#l1180">badges_user_has_backpack</a>(<a href="../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../_functions/badges_user_has_backpack.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks if user has external backpack connected.<BR>
</b><BR><b>param:</b> int $userid ID of a user.<br>
<b>return:</b> bool True|False whether backpack connection exists.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_handle_course_deletion" onClick="logFunction('badges_handle_course_deletion', 'badgeslib.php.source.html#l1191')" href="badgeslib.php.source.html#l1191">badges_handle_course_deletion</a>(<a href="../_variables/courseid.html">$courseid</a>)&nbsp;&nbsp;
<a href="../_functions/badges_handle_course_deletion.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handles what happens to the course badges when a course is deleted.<BR>
</b><BR><b>param:</b> int $courseid course ID.<br>
<b>return:</b> void.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="badges_setup_backpack_js" onClick="logFunction('badges_setup_backpack_js', 'badgeslib.php.source.html#l1221')" href="badgeslib.php.source.html#l1221">badges_setup_backpack_js</a>()&nbsp;&nbsp;
<a href="../_functions/badges_setup_backpack_js.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Loads JS files required for backpack support.<BR>
</b><BR><b>return:</b> void<br>
</td></tr></table>

<br>
</div>
</div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
