<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /my/index.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='my';
filename='index.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/my/</a> -> <a href="index.php.html">index.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="index.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="index.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * My Moodle -- a user's personal dashboard</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * - each user can currently have their own page (cloned from system and then customised)</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * - only the user can see their own dashboard</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * - users can add any blocks they want</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * - the administrators can define a default site dashboard for users who have</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> *   not created their own dashboard</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> *</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * This script implements the user's view of the dashboard, and allows editing</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * of the dashboard.</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> *</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @package    moodlecore</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @subpackage my</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @copyright  2010 Remote-Learner.net</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @author     Hubert Chathi &lt;hubert@remote-learner.net&gt;</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @author     Olav Jordan &lt;olav.jordan@remote-learner.net&gt;</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> */</span>
<a name="l37"><span class="linenum">  37</span></a>  
<a name="l38"><span class="linenum">  38</span></a>  require_once(<a class="phpfunction" onClick="logFunction('dirname')" href="../_functions/dirname.html" onMouseOver="phpfuncPopup(event,'dirname')">dirname</a>(__FILE__) . '/../config.php');
<a name="l39"><span class="linenum">  39</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../my/lib.php.html">/my/lib.php</a>');
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>  <a class="function" onClick="logFunction('redirect_if_major_upgrade_required')" href="../_functions/redirect_if_major_upgrade_required.html" onMouseOver="funcPopup(event,'redirect_if_major_upgrade_required')">redirect_if_major_upgrade_required</a>();
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">// TODO Add sesskey check to edit</span>
<a name="l44"><span class="linenum">  44</span></a>  <a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a>   = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('edit', null, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);    <span class="comment">// Turn editing on and off</span>
<a name="l45"><span class="linenum">  45</span></a>  <a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('reset')" href="../_variables/reset.html">$reset</a>  = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('reset', null, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>  <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>();
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>  <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('hassiteconfig')" href="../_variables/hassiteconfig.html">$hassiteconfig</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:config', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l50"><span class="linenum">  50</span></a>  if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('hassiteconfig')" href="../_variables/hassiteconfig.html">$hassiteconfig</a> &amp;&amp; <a class="function" onClick="logFunction('moodle_needs_upgrading')" href="../_functions/moodle_needs_upgrading.html" onMouseOver="funcPopup(event,'moodle_needs_upgrading')">moodle_needs_upgrading</a>()) {
<a name="l51"><span class="linenum">  51</span></a>      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>'));
<a name="l52"><span class="linenum">  52</span></a>  }
<a name="l53"><span class="linenum">  53</span></a>  
<a name="l54"><span class="linenum">  54</span></a>  <a class="var it21080" onMouseOver="hilite(21080)" onMouseOut="lolite()" onClick="logVariable('strmymoodle')" href="../_variables/strmymoodle.html">$strmymoodle</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('myhome');
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>  if (<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {  // Force them to see system default, no editing allowed
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">    // If guests are not allowed my moodle, send them to front page.</span>
<a name="l58"><span class="linenum">  58</span></a>      if (empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowguestmymoodle')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/allowguestmymoodle.html">allowguestmymoodle</a>)) {
<a name="l59"><span class="linenum">  59</span></a>          <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/', array('redirect' =&gt; 0)));
<a name="l60"><span class="linenum">  60</span></a>      }
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>      <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = null;
<a name="l63"><span class="linenum">  63</span></a>      <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = <a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> = 0;  <span class="comment">// Just in case</span>
<a name="l64"><span class="linenum">  64</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l65"><span class="linenum">  65</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_blocks_editing_capability')" href="../_functions/set_blocks_editing_capability.html" onMouseOver="funcPopup(event,'set_blocks_editing_capability')">set_blocks_editing_capability</a>('moodle/my:configsyspages');  <span class="comment">// unlikely :)</span>
<a name="l66"><span class="linenum">  66</span></a>      <a class="var it295" onMouseOver="hilite(295)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a> = &quot;<a class="var it1063" onMouseOver="hilite(1063)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('shortname')" class="var it39635" onMouseOver="hilite(39635)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>: <a class="var it21080" onMouseOver="hilite(21080)" onMouseOut="lolite()" onClick="logVariable('strmymoodle')" href="../_variables/strmymoodle.html">$strmymoodle</a> (GUEST)&quot;;
<a name="l67"><span class="linenum">  67</span></a>      <a class="var it6327" onMouseOver="hilite(6327)" onMouseOut="lolite()" onClick="logVariable('pagetitle')" href="../_variables/pagetitle.html">$pagetitle</a> = <a class="var it295" onMouseOver="hilite(295)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a>;
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>  } else {        // We are trying to view or edit our own My Moodle page
<a name="l70"><span class="linenum">  70</span></a>      <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;  <span class="comment">// Owner of the page</span>
<a name="l71"><span class="linenum">  71</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l72"><span class="linenum">  72</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_blocks_editing_capability')" href="../_functions/set_blocks_editing_capability.html" onMouseOver="funcPopup(event,'set_blocks_editing_capability')">set_blocks_editing_capability</a>('moodle/my:manageblocks');
<a name="l73"><span class="linenum">  73</span></a>      <a class="var it295" onMouseOver="hilite(295)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>);
<a name="l74"><span class="linenum">  74</span></a>      <a class="var it6327" onMouseOver="hilite(6327)" onMouseOut="lolite()" onClick="logVariable('pagetitle')" href="../_variables/pagetitle.html">$pagetitle</a> = <a class="var it21080" onMouseOver="hilite(21080)" onMouseOut="lolite()" onClick="logVariable('strmymoodle')" href="../_variables/strmymoodle.html">$strmymoodle</a>;
<a name="l75"><span class="linenum">  75</span></a>  }
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">// Get the My Moodle page info.  Should always return something unless the database is broken.</span>
<a name="l78"><span class="linenum">  78</span></a>  if (!<a class="var it8740" onMouseOver="hilite(8740)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a> = <a class="function" onClick="logFunction('my_get_page')" href="../_functions/my_get_page.html" onMouseOver="funcPopup(event,'my_get_page')">my_get_page</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="constant" onClick="logConstant('MY_PAGE_PRIVATE')" href="../_constants/MY_PAGE_PRIVATE.html" onMouseOver="constPopup(event,'MY_PAGE_PRIVATE')">MY_PAGE_PRIVATE</a>)) {
<a name="l79"><span class="linenum">  79</span></a>      <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('mymoodlesetup');
<a name="l80"><span class="linenum">  80</span></a>  }
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">// Start setting up the page</span>
<a name="l83"><span class="linenum">  83</span></a>  <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l84"><span class="linenum">  84</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l85"><span class="linenum">  85</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>('<a class="filename" href="../my/index.php.html">/my/index.php</a>', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l86"><span class="linenum">  86</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('mydashboard');
<a name="l87"><span class="linenum">  87</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagetype')" href="../_functions/set_pagetype.html" onMouseOver="funcPopup(event,'set_pagetype')">set_pagetype</a>('my-index');
<a name="l88"><span class="linenum">  88</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('blocks')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_region')" href="../_functions/add_region.html" onMouseOver="funcPopup(event,'add_region')">add_region</a>('content');
<a name="l89"><span class="linenum">  89</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_subpage')" href="../_functions/set_subpage.html" onMouseOver="funcPopup(event,'set_subpage')">set_subpage</a>(<a class="var it8740" onMouseOver="hilite(8740)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a>-&gt;<a onClick="logVariable('id')" class="var it39685" onMouseOver="hilite(39685)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l90"><span class="linenum">  90</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it6327" onMouseOver="hilite(6327)" onMouseOut="lolite()" onClick="logVariable('pagetitle')" href="../_variables/pagetitle.html">$pagetitle</a>);
<a name="l91"><span class="linenum">  91</span></a>  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it295" onMouseOver="hilite(295)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a>);
<a name="l92"><span class="linenum">  92</span></a>  
<a name="l93"><span class="linenum">  93</span></a>  if (!<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {   // Skip default home page for guests
<a name="l94"><span class="linenum">  94</span></a>      if (<a class="function" onClick="logFunction('get_home_page')" href="../_functions/get_home_page.html" onMouseOver="funcPopup(event,'get_home_page')">get_home_page</a>() != <a class="constant" onClick="logConstant('HOMEPAGE_MY')" href="../_constants/HOMEPAGE_MY.html" onMouseOver="constPopup(event,'HOMEPAGE_MY')">HOMEPAGE_MY</a>) {
<a name="l95"><span class="linenum">  95</span></a>          if (<a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('setdefaulthome', false, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>)) {
<a name="l96"><span class="linenum">  96</span></a>              <a class="function" onClick="logFunction('set_user_preference')" href="../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('user_home_page_preference', <a class="constant" onClick="logConstant('HOMEPAGE_MY')" href="../_constants/HOMEPAGE_MY.html" onMouseOver="constPopup(event,'HOMEPAGE_MY')">HOMEPAGE_MY</a>);
<a name="l97"><span class="linenum">  97</span></a>          } else if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaulthomepage')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/defaulthomepage.html">defaulthomepage</a>) &amp;&amp; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaulthomepage')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/defaulthomepage.html">defaulthomepage</a> == <a class="constant" onClick="logConstant('HOMEPAGE_USER')" href="../_constants/HOMEPAGE_USER.html" onMouseOver="constPopup(event,'HOMEPAGE_USER')">HOMEPAGE_USER</a>) {
<a name="l98"><span class="linenum">  98</span></a>              <a class="var it21082" onMouseOver="hilite(21082)" onMouseOut="lolite()" onClick="logVariable('frontpagenode')" href="../_variables/frontpagenode.html">$frontpagenode</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('settingsnav')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/settingsnav.html">settingsnav</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('frontpagesettings'), null, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING, null);
<a name="l99"><span class="linenum">  99</span></a>              <a class="var it21082" onMouseOver="hilite(21082)" onMouseOut="lolite()" onClick="logVariable('frontpagenode')" href="../_variables/frontpagenode.html">$frontpagenode</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l100"><span class="linenum"> 100</span></a>              <a class="var it21082" onMouseOver="hilite(21082)" onMouseOut="lolite()" onClick="logVariable('frontpagenode')" href="../_variables/frontpagenode.html">$frontpagenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('makethismyhome'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/my/', array('setdefaulthome' =&gt; true)),
<a name="l101"><span class="linenum"> 101</span></a>                      <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l102"><span class="linenum"> 102</span></a>          }
<a name="l103"><span class="linenum"> 103</span></a>      }
<a name="l104"><span class="linenum"> 104</span></a>  }
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">// Toggle the editing state and switches</span>
<a name="l107"><span class="linenum"> 107</span></a>  if (<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('user_allowed_editing')" href="../_functions/user_allowed_editing.html" onMouseOver="funcPopup(event,'user_allowed_editing')">user_allowed_editing</a>()) {
<a name="l108"><span class="linenum"> 108</span></a>      if (<a class="var it1022" onMouseOver="hilite(1022)" onMouseOut="lolite()" onClick="logVariable('reset')" href="../_variables/reset.html">$reset</a> !== null) {
<a name="l109"><span class="linenum"> 109</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>)) {
<a name="l110"><span class="linenum"> 110</span></a>              <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l111"><span class="linenum"> 111</span></a>              if(!<a class="var it8740" onMouseOver="hilite(8740)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a> = <a class="function" onClick="logFunction('my_reset_page')" href="../_functions/my_reset_page.html" onMouseOver="funcPopup(event,'my_reset_page')">my_reset_page</a>(<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="constant" onClick="logConstant('MY_PAGE_PRIVATE')" href="../_constants/MY_PAGE_PRIVATE.html" onMouseOver="constPopup(event,'MY_PAGE_PRIVATE')">MY_PAGE_PRIVATE</a>)){
<a name="l112"><span class="linenum"> 112</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('reseterror', 'my');
<a name="l113"><span class="linenum"> 113</span></a>              }
<a name="l114"><span class="linenum"> 114</span></a>              <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/my'));
<a name="l115"><span class="linenum"> 115</span></a>          }
<a name="l116"><span class="linenum"> 116</span></a>      } else if (<a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> !== null) {             // Editing state was specified
<a name="l117"><span class="linenum"> 117</span></a>          <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = <a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a>;       <span class="comment">// Change editing state</span>
<a name="l118"><span class="linenum"> 118</span></a>      } else {                          // Editing state is in session
<a name="l119"><span class="linenum"> 119</span></a>          if (<a class="var it8740" onMouseOver="hilite(8740)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a>-&gt;<a onClick="logVariable('userid')" class="var it39685" onMouseOver="hilite(39685)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>) {   // It's a page we can edit, so load from session
<a name="l120"><span class="linenum"> 120</span></a>              if (!empty(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a>)) {
<a name="l121"><span class="linenum"> 121</span></a>                  <a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> = 1;
<a name="l122"><span class="linenum"> 122</span></a>              } else {
<a name="l123"><span class="linenum"> 123</span></a>                  <a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> = 0;
<a name="l124"><span class="linenum"> 124</span></a>              }
<a name="l125"><span class="linenum"> 125</span></a>          } else {
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">            // For the page to display properly with the user context header the page blocks need to</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">            // be copied over to the user context.</span>
<a name="l128"><span class="linenum"> 128</span></a>              if (!<a class="var it8740" onMouseOver="hilite(8740)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a> = <a class="function" onClick="logFunction('my_copy_page')" href="../_functions/my_copy_page.html" onMouseOver="funcPopup(event,'my_copy_page')">my_copy_page</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('MY_PAGE_PRIVATE')" href="../_constants/MY_PAGE_PRIVATE.html" onMouseOver="constPopup(event,'MY_PAGE_PRIVATE')">MY_PAGE_PRIVATE</a>)) {
<a name="l129"><span class="linenum"> 129</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('mymoodlesetup');
<a name="l130"><span class="linenum"> 130</span></a>              }
<a name="l131"><span class="linenum"> 131</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l132"><span class="linenum"> 132</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l133"><span class="linenum"> 133</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_subpage')" href="../_functions/set_subpage.html" onMouseOver="funcPopup(event,'set_subpage')">set_subpage</a>(<a class="var it8740" onMouseOver="hilite(8740)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a>-&gt;<a onClick="logVariable('id')" class="var it39685" onMouseOver="hilite(39685)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">            // It's a system page and they are not allowed to edit system pages</span>
<a name="l135"><span class="linenum"> 135</span></a>              <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = <a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> = 0;          <span class="comment">// Disable editing completely, just to be safe</span>
<a name="l136"><span class="linenum"> 136</span></a>          }
<a name="l137"><span class="linenum"> 137</span></a>      }
<a name="l138"><span class="linenum"> 138</span></a>  
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">    // Add button for editing page</span>
<a name="l140"><span class="linenum"> 140</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('edit' =&gt; !<a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a>);
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>      <a class="var it21083" onMouseOver="hilite(21083)" onMouseOut="lolite()" onClick="logVariable('resetbutton')" href="../_variables/resetbutton.html">$resetbutton</a> = '';
<a name="l143"><span class="linenum"> 143</span></a>      <a class="var it21084" onMouseOver="hilite(21084)" onMouseOut="lolite()" onClick="logVariable('resetstring')" href="../_variables/resetstring.html">$resetstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetpage', 'my');
<a name="l144"><span class="linenum"> 144</span></a>      <a class="var it21085" onMouseOver="hilite(21085)" onMouseOut="lolite()" onClick="logVariable('reseturl')" href="../_variables/reseturl.html">$reseturl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/my/index.php&quot;, array('edit' =&gt; 1, 'reset' =&gt; 1));
<a name="l145"><span class="linenum"> 145</span></a>  
<a name="l146"><span class="linenum"> 146</span></a>      if (!<a class="var it8740" onMouseOver="hilite(8740)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a>-&gt;<a onClick="logVariable('userid')" class="var it39685" onMouseOver="hilite(39685)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>) {
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">        // viewing a system page -- let the user customise it</span>
<a name="l148"><span class="linenum"> 148</span></a>          <a class="var it21086" onMouseOver="hilite(21086)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('updatemymoodleon');
<a name="l149"><span class="linenum"> 149</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['edit'] = 1;
<a name="l150"><span class="linenum"> 150</span></a>      } else if (empty(<a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a>)) {
<a name="l151"><span class="linenum"> 151</span></a>          <a class="var it21086" onMouseOver="hilite(21086)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('updatemymoodleon');
<a name="l152"><span class="linenum"> 152</span></a>      } else {
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it21086" onMouseOver="hilite(21086)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('updatemymoodleoff');
<a name="l154"><span class="linenum"> 154</span></a>          <a class="var it21083" onMouseOver="hilite(21083)" onMouseOut="lolite()" onClick="logVariable('resetbutton')" href="../_variables/resetbutton.html">$resetbutton</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<a class="var it21085" onMouseOver="hilite(21085)" onMouseOut="lolite()" onClick="logVariable('reseturl')" href="../_variables/reseturl.html">$reseturl</a>, <a class="var it21084" onMouseOver="hilite(21084)" onMouseOut="lolite()" onClick="logVariable('resetstring')" href="../_variables/resetstring.html">$resetstring</a>);
<a name="l155"><span class="linenum"> 155</span></a>      }
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/my/index.php&quot;, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l158"><span class="linenum"> 158</span></a>      <a class="var it742" onMouseOver="hilite(742)" onMouseOut="lolite()" onClick="logVariable('button')" href="../_variables/button.html">$button</a> = <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it21086" onMouseOver="hilite(21086)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a>);
<a name="l159"><span class="linenum"> 159</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_button')" href="../_functions/set_button.html" onMouseOver="funcPopup(event,'set_button')">set_button</a>(<a class="var it21083" onMouseOver="hilite(21083)" onMouseOut="lolite()" onClick="logVariable('resetbutton')" href="../_variables/resetbutton.html">$resetbutton</a> . <a class="var it742" onMouseOver="hilite(742)" onMouseOut="lolite()" onClick="logVariable('button')" href="../_variables/button.html">$button</a>);
<a name="l160"><span class="linenum"> 160</span></a>  
<a name="l161"><span class="linenum"> 161</span></a>  } else {
<a name="l162"><span class="linenum"> 162</span></a>      <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = <a class="var it4263" onMouseOver="hilite(4263)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> = 0;
<a name="l163"><span class="linenum"> 163</span></a>  }
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l166"><span class="linenum"> 166</span></a>  
<a name="l167"><span class="linenum"> 167</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('custom_block_region')" href="../_functions/custom_block_region.html" onMouseOver="funcPopup(event,'custom_block_region')">custom_block_region</a>('content');
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>  echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'set_blocks_editing_capability': ['set_blocks_editing_capability', 'Set the capability that allows users to edit blocks on this page. ', [['lib','pagelib.php',1292]], 14],
'my_reset_page': ['my_reset_page', '', [['my','lib.php',115]], 2],
'set_url': ['set_url', 'Set the url specifics ', [['backup/cc/cc_lib','cc_weblink.php',50],['backup/util/ui','restore_ui_components.php',141],['mod/wiki','pagelib.php',246],['mod/wiki','pagelib.php',334],['mod/wiki','pagelib.php',421],['mod/wiki','pagelib.php',701],['mod/wiki','pagelib.php',726],['mod/wiki','pagelib.php',840],['mod/wiki','pagelib.php',884],['mod/wiki','pagelib.php',1013],['mod/wiki','pagelib.php',1117],['mod/wiki','pagelib.php',1224],['mod/wiki','pagelib.php',1467],['mod/wiki','pagelib.php',1869],['mod/wiki','pagelib.php',1937],['mod/wiki','pagelib.php',2111],['mod/wiki','pagelib.php',2172],['mod/wiki','pagelib.php',2228],['mod/wiki','pagelib.php',2293],['mod/wiki','pagelib.php',2341],['mod/wiki','pagelib.php',2389],['mod/wiki','pagelib.php',2493],['lib','outputcomponents.php',2823],['lib','pagelib.php',1198]], 574],
'set_button': ['set_button', 'Specify a fragment of HTML that goes where the \'Turn editing on\' button normally goes. ', [['lib','pagelib.php',1283]], 26],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1063]], 277],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3234],['mod/assign','locallib.php',3440]], 532],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2444]], 635],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'add_region': ['add_region', 'Add a region to a page ', [['lib','blocklib.php',376]], 18],
'custom_block_region': ['custom_block_region', 'Renders a custom block region. ', [['lib','outputrenderers.php',3718]], 4],
'set_title': ['set_title', '', [['backup/cc/cc_lib','cc_basiclti.php',57],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_metadata.php',225],['backup/cc/cc_lib','cc_forum.php',39],['mod/wiki','pagelib.php',216],['lib','outputcomponents.php',2815],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['lib','pagelib.php',1128],['backup/cc/cc_lib','cc_page.php',38]], 445],
'user_allowed_editing': ['user_allowed_editing', 'Does the user have permission to see this page in editing mode. ', [['lib','pagelib.php',846]], 21],
'require_sesskey': ['require_sesskey', 'Check the session key using {@link confirm_sesskey()}, and cause a fatal error if it does not match. ', [['lib','sessionlib.php',79]], 190],
'footer': ['footer', 'Returns the footer ', [['mod/lesson','renderer.php',78],['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1021],['lib','outputrenderers.php',4143],['lib','outputrenderers.php',4248]], 780],
'moodle_needs_upgrading': ['moodle_needs_upgrading', 'Determine if moodle installation requires update. ', [['lib','moodlelib.php',7268]], 7],
'add': ['add', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',454],['blog','locallib.php',242],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['backup/cc','validator.php',51],['lib/google/src/Google/Http','Batch.php',47],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['lib/zend/Zend/Service/Simpy','WatchlistFilterSet.php',47],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/lessphp/Output','Mapped.php',50],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/google/src/Google/Service','Webmasters.php',375],['lib/horde/framework/Horde','Variables.php',297],['lib','outputcomponents.php',2700],['lib','outputcomponents.php',3375],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/zend/Zend','Date.php',1081],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['comment','lib.php',675],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',86],['lib/horde/framework/Horde','Stream.php',116],['backup/cc/cc_lib/gral_lib','cssparser.php',111],['lib/lessphp','Output.php',18],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib','adminlib.php',736],['lib','adminlib.php',895],['lib','adminlib.php',1447],['lib','csslib.php',1508],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib','navigationlib.php',302],['lib','navigationlib.php',758],['lib','navigationlib.php',3288],['lib','navigationlib.php',3542],['lib/phpexcel/PHPExcel','HashTable.php',85],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454]], 5988],
'my_get_page': ['my_get_page', '', [['my','lib.php',39]], 5],
'set_user_preference': ['set_user_preference', 'Sets a preference for the specified user. ', [['lib','moodlelib.php',1822]], 163],
'get_home_page': ['get_home_page', 'Gets the homepage to use for the current user ', [['lib','moodlelib.php',9236]], 6],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',605]], 2167],
'redirect_if_major_upgrade_required': ['redirect_if_major_upgrade_required', 'Check whether a major upgrade is needed. That is defined as an upgrade that changes something really fundamental in the database, so nothing can possibly work until the database has been updated, and that is defined by the hard-coded version number in this function. ', [['lib','setuplib.php',1318]], 3],
'force_open': ['force_open', 'Forces this node to be open and at the same time forces open all parents until the root node. ', [['lib','navigationlib.php',443]], 16],
'my_copy_page': ['my_copy_page', '', [['my','lib.php',58]], 2],
'isguestuser': ['isguestuser', 'Determines if a user is logged in as real guest user with username \'guest\'. ', [['lib','accesslib.php',1922]], 237],
'set_subpage': ['set_subpage', 'If context->id and pagetype are not enough to uniquely identify this page, then you can set a subpage id as well. For example, the tags page sets ', [['lib','pagelib.php',1089]], 13],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'redirect': ['redirect', 'Redirect the browser ', [['','mdeploy.php',1474],['lib','weblib.php',2514]], 948],
'set_context': ['set_context', 'Set the context. ', [['mod/assign','locallib.php',246],['lib/portfolio','caller.php',568],['grade/grading','lib.php',116],['lib','pagelib.php',942]], 254],
'set_pagetype': ['set_pagetype', 'Sets the pagetype to use for this page. ', [['lib','pagelib.php',1048]], 34],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',449]], 1560],
'single_button': ['single_button', 'Returns a form with a single button. ', [['lib','outputrenderers.php',1735]], 298],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1141]], 419],
'dirname': ['dirname', '', [], 1071],
'is_null': ['is_null', '', [], 1992],
'header': ['header', '', [], 1294]};
CLASS_DATA={
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6106]], 929],
'navigation_node': ['navigation_node', 'This class is used to represent a node in a navigation tree ', [['lib','navigationlib.php',34]], 338],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'context_user': ['context_user', 'User context class ', [['lib','accesslib.php',6347]], 288]};
CONST_DATA={
'HOMEPAGE_USER': ['HOMEPAGE_USER', '', [['lib','moodlelib.php',482]], 4],
'HOMEPAGE_MY': ['HOMEPAGE_MY', '', [['lib','moodlelib.php',478]], 14],
'MY_PAGE_PRIVATE': ['MY_PAGE_PRIVATE', '', [['my','lib.php',31]], 8],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 502]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
