<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /my/index.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='my';
filename='index.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/my/</a> -> <a href="index.php.html">index.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="index.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="index.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * My Moodle -- a user's personal dashboard</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * - each user can currently have their own page (cloned from system and then customised)</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * - only the user can see their own dashboard</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * - users can add any blocks they want</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * - the administrators can define a default site dashboard for users who have</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> *   not created their own dashboard</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> *</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * This script implements the user's view of the dashboard, and allows editing</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> * of the dashboard.</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> *</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * @package    moodlecore</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * @subpackage my</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * @copyright  2010 Remote-Learner.net</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @author     Hubert Chathi &lt;hubert@remote-learner.net&gt;</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @author     Olav Jordan &lt;olav.jordan@remote-learner.net&gt;</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> */</span>
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>  require_once(__DIR__ . '/../config.php');
<a name="l38"><span class="linenum">  38</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../my/lib.php.html">/my/lib.php</a>');
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>  <a class="function" onClick="logFunction('redirect_if_major_upgrade_required')" href="../_functions/redirect_if_major_upgrade_required.html" onMouseOver="funcPopup(event,'redirect_if_major_upgrade_required')">redirect_if_major_upgrade_required</a>();
<a name="l41"><span class="linenum">  41</span></a>  
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">// TODO Add sesskey check to edit</span>
<a name="l43"><span class="linenum">  43</span></a>  <a class="var it417" onMouseOver="hilite(417)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a>   = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('edit', null, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);    <span class="comment">// Turn editing on and off</span>
<a name="l44"><span class="linenum">  44</span></a>  <a class="var it2084" onMouseOver="hilite(2084)" onMouseOut="lolite()" onClick="logVariable('reset')" href="../_variables/reset.html">$reset</a>  = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('reset', null, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>);
<a name="l45"><span class="linenum">  45</span></a>  
<a name="l46"><span class="linenum">  46</span></a>  <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>();
<a name="l47"><span class="linenum">  47</span></a>  
<a name="l48"><span class="linenum">  48</span></a>  <a class="var it2523" onMouseOver="hilite(2523)" onMouseOut="lolite()" onClick="logVariable('hassiteconfig')" href="../_variables/hassiteconfig.html">$hassiteconfig</a> = <a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:config', <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>());
<a name="l49"><span class="linenum">  49</span></a>  if (<a class="var it2523" onMouseOver="hilite(2523)" onMouseOut="lolite()" onClick="logVariable('hassiteconfig')" href="../_variables/hassiteconfig.html">$hassiteconfig</a> &amp;&amp; <a class="function" onClick="logFunction('moodle_needs_upgrading')" href="../_functions/moodle_needs_upgrading.html" onMouseOver="funcPopup(event,'moodle_needs_upgrading')">moodle_needs_upgrading</a>()) {
<a name="l50"><span class="linenum">  50</span></a>      <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../admin/index.php.html">/admin/index.php</a>'));
<a name="l51"><span class="linenum">  51</span></a>  }
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>  <a class="var it19509" onMouseOver="hilite(19509)" onMouseOut="lolite()" onClick="logVariable('strmymoodle')" href="../_variables/strmymoodle.html">$strmymoodle</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('myhome');
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>  if (<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {  // Force them to see system default, no editing allowed
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">    // If guests are not allowed my moodle, send them to front page.</span>
<a name="l57"><span class="linenum">  57</span></a>      if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowguestmymoodle')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/allowguestmymoodle.html">allowguestmymoodle</a>)) {
<a name="l58"><span class="linenum">  58</span></a>          <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/', array('redirect' =&gt; 0)));
<a name="l59"><span class="linenum">  59</span></a>      }
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>      <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = null;
<a name="l62"><span class="linenum">  62</span></a>      <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = <a class="var it417" onMouseOver="hilite(417)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> = 0;  <span class="comment">// Just in case</span>
<a name="l63"><span class="linenum">  63</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l64"><span class="linenum">  64</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_blocks_editing_capability')" href="../_functions/set_blocks_editing_capability.html" onMouseOver="funcPopup(event,'set_blocks_editing_capability')">set_blocks_editing_capability</a>('moodle/my:configsyspages');  <span class="comment">// unlikely :)</span>
<a name="l65"><span class="linenum">  65</span></a>      <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a> = &quot;<a class="var it940" onMouseOver="hilite(940)" onMouseOut="lolite()" onClick="logVariable('SITE')" href="../_variables/SITE.html">$SITE</a>-&gt;<a onClick="logVariable('shortname')" class="var it43008" onMouseOver="hilite(43008)" onMouseOut="lolite()" href="../_variables/shortname.html">shortname</a>: <a class="var it19509" onMouseOver="hilite(19509)" onMouseOut="lolite()" onClick="logVariable('strmymoodle')" href="../_variables/strmymoodle.html">$strmymoodle</a> (GUEST)&quot;;
<a name="l66"><span class="linenum">  66</span></a>      <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('pagetitle')" href="../_variables/pagetitle.html">$pagetitle</a> = <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a>;
<a name="l67"><span class="linenum">  67</span></a>  
<a name="l68"><span class="linenum">  68</span></a>  } else {        // We are trying to view or edit our own My Moodle page
<a name="l69"><span class="linenum">  69</span></a>      <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;  <span class="comment">// Owner of the page</span>
<a name="l70"><span class="linenum">  70</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l71"><span class="linenum">  71</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_blocks_editing_capability')" href="../_functions/set_blocks_editing_capability.html" onMouseOver="funcPopup(event,'set_blocks_editing_capability')">set_blocks_editing_capability</a>('moodle/my:manageblocks');
<a name="l72"><span class="linenum">  72</span></a>      <a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a> = <a class="function" onClick="logFunction('fullname')" href="../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>);
<a name="l73"><span class="linenum">  73</span></a>      <a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('pagetitle')" href="../_variables/pagetitle.html">$pagetitle</a> = <a class="var it19509" onMouseOver="hilite(19509)" onMouseOut="lolite()" onClick="logVariable('strmymoodle')" href="../_variables/strmymoodle.html">$strmymoodle</a>;
<a name="l74"><span class="linenum">  74</span></a>  }
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">// Get the My Moodle page info.  Should always return something unless the database is broken.</span>
<a name="l77"><span class="linenum">  77</span></a>  if (!<a class="var it10055" onMouseOver="hilite(10055)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a> = <a class="function" onClick="logFunction('my_get_page')" href="../_functions/my_get_page.html" onMouseOver="funcPopup(event,'my_get_page')">my_get_page</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="constant" onClick="logConstant('MY_PAGE_PRIVATE')" href="../_constants/MY_PAGE_PRIVATE.html" onMouseOver="constPopup(event,'MY_PAGE_PRIVATE')">MY_PAGE_PRIVATE</a>)) {
<a name="l78"><span class="linenum">  78</span></a>      <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('mymoodlesetup');
<a name="l79"><span class="linenum">  79</span></a>  }
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">// Start setting up the page</span>
<a name="l82"><span class="linenum">  82</span></a>  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array();
<a name="l83"><span class="linenum">  83</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l84"><span class="linenum">  84</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_url')" href="../_functions/set_url.html" onMouseOver="funcPopup(event,'set_url')">set_url</a>('<a class="filename" href="../my/index.php.html">/my/index.php</a>', <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l85"><span class="linenum">  85</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('mydashboard');
<a name="l86"><span class="linenum">  86</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagetype')" href="../_functions/set_pagetype.html" onMouseOver="funcPopup(event,'set_pagetype')">set_pagetype</a>('my-index');
<a name="l87"><span class="linenum">  87</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('blocks')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/blocks.html">blocks</a>-&gt;<a class="function" onClick="logFunction('add_region')" href="../_functions/add_region.html" onMouseOver="funcPopup(event,'add_region')">add_region</a>('content');
<a name="l88"><span class="linenum">  88</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_subpage')" href="../_functions/set_subpage.html" onMouseOver="funcPopup(event,'set_subpage')">set_subpage</a>(<a class="var it10055" onMouseOver="hilite(10055)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a>-&gt;<a onClick="logVariable('id')" class="var it43538" onMouseOver="hilite(43538)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l89"><span class="linenum">  89</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_title')" href="../_functions/set_title.html" onMouseOver="funcPopup(event,'set_title')">set_title</a>(<a class="var it230" onMouseOver="hilite(230)" onMouseOut="lolite()" onClick="logVariable('pagetitle')" href="../_variables/pagetitle.html">$pagetitle</a>);
<a name="l90"><span class="linenum">  90</span></a>  <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_heading')" href="../_functions/set_heading.html" onMouseOver="funcPopup(event,'set_heading')">set_heading</a>(<a class="var it907" onMouseOver="hilite(907)" onMouseOut="lolite()" onClick="logVariable('header')" href="../_variables/header.html">$header</a>);
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>  if (!<a class="function" onClick="logFunction('isguestuser')" href="../_functions/isguestuser.html" onMouseOver="funcPopup(event,'isguestuser')">isguestuser</a>()) {   // Skip default home page for guests
<a name="l93"><span class="linenum">  93</span></a>      if (<a class="function" onClick="logFunction('get_home_page')" href="../_functions/get_home_page.html" onMouseOver="funcPopup(event,'get_home_page')">get_home_page</a>() != <a class="constant" onClick="logConstant('HOMEPAGE_MY')" href="../_constants/HOMEPAGE_MY.html" onMouseOver="constPopup(event,'HOMEPAGE_MY')">HOMEPAGE_MY</a>) {
<a name="l94"><span class="linenum">  94</span></a>          if (<a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('setdefaulthome', false, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>)) {
<a name="l95"><span class="linenum">  95</span></a>              <a class="function" onClick="logFunction('set_user_preference')" href="../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('user_home_page_preference', <a class="constant" onClick="logConstant('HOMEPAGE_MY')" href="../_constants/HOMEPAGE_MY.html" onMouseOver="constPopup(event,'HOMEPAGE_MY')">HOMEPAGE_MY</a>);
<a name="l96"><span class="linenum">  96</span></a>          } else if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaulthomepage')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/defaulthomepage.html">defaulthomepage</a>) &amp;&amp; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('defaulthomepage')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/defaulthomepage.html">defaulthomepage</a> == <a class="constant" onClick="logConstant('HOMEPAGE_USER')" href="../_constants/HOMEPAGE_USER.html" onMouseOver="constPopup(event,'HOMEPAGE_USER')">HOMEPAGE_USER</a>) {
<a name="l97"><span class="linenum">  97</span></a>              <a class="var it19511" onMouseOver="hilite(19511)" onMouseOut="lolite()" onClick="logVariable('frontpagenode')" href="../_variables/frontpagenode.html">$frontpagenode</a> = <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('settingsnav')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../_variables/settingsnav.html">settingsnav</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('frontpagesettings'), null, <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING, null);
<a name="l98"><span class="linenum">  98</span></a>              <a class="var it19511" onMouseOver="hilite(19511)" onMouseOut="lolite()" onClick="logVariable('frontpagenode')" href="../_variables/frontpagenode.html">$frontpagenode</a>-&gt;<a class="function" onClick="logFunction('force_open')" href="../_functions/force_open.html" onMouseOver="funcPopup(event,'force_open')">force_open</a>();
<a name="l99"><span class="linenum">  99</span></a>              <a class="var it19511" onMouseOver="hilite(19511)" onMouseOut="lolite()" onClick="logVariable('frontpagenode')" href="../_variables/frontpagenode.html">$frontpagenode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('makethismyhome'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/my/', array('setdefaulthome' =&gt; true)),
<a name="l100"><span class="linenum"> 100</span></a>                      <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::TYPE_SETTING);
<a name="l101"><span class="linenum"> 101</span></a>          }
<a name="l102"><span class="linenum"> 102</span></a>      }
<a name="l103"><span class="linenum"> 103</span></a>  }
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">// Toggle the editing state and switches</span>
<a name="l106"><span class="linenum"> 106</span></a>  if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('forcedefaultmymoodle')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/forcedefaultmymoodle.html">forcedefaultmymoodle</a>) &amp;&amp; <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('user_allowed_editing')" href="../_functions/user_allowed_editing.html" onMouseOver="funcPopup(event,'user_allowed_editing')">user_allowed_editing</a>()) {
<a name="l107"><span class="linenum"> 107</span></a>      if (<a class="var it2084" onMouseOver="hilite(2084)" onMouseOut="lolite()" onClick="logVariable('reset')" href="../_variables/reset.html">$reset</a> !== null) {
<a name="l108"><span class="linenum"> 108</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>)) {
<a name="l109"><span class="linenum"> 109</span></a>              <a class="function" onClick="logFunction('require_sesskey')" href="../_functions/require_sesskey.html" onMouseOver="funcPopup(event,'require_sesskey')">require_sesskey</a>();
<a name="l110"><span class="linenum"> 110</span></a>              if (!<a class="var it10055" onMouseOver="hilite(10055)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a> = <a class="function" onClick="logFunction('my_reset_page')" href="../_functions/my_reset_page.html" onMouseOver="funcPopup(event,'my_reset_page')">my_reset_page</a>(<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="constant" onClick="logConstant('MY_PAGE_PRIVATE')" href="../_constants/MY_PAGE_PRIVATE.html" onMouseOver="constPopup(event,'MY_PAGE_PRIVATE')">MY_PAGE_PRIVATE</a>)) {
<a name="l111"><span class="linenum"> 111</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('reseterror', 'my');
<a name="l112"><span class="linenum"> 112</span></a>              }
<a name="l113"><span class="linenum"> 113</span></a>              <a class="function" onClick="logFunction('redirect')" href="../_functions/redirect.html" onMouseOver="funcPopup(event,'redirect')">redirect</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('/my'));
<a name="l114"><span class="linenum"> 114</span></a>          }
<a name="l115"><span class="linenum"> 115</span></a>      } else if (<a class="var it417" onMouseOver="hilite(417)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> !== null) {             // Editing state was specified
<a name="l116"><span class="linenum"> 116</span></a>          <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = <a class="var it417" onMouseOver="hilite(417)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a>;       <span class="comment">// Change editing state</span>
<a name="l117"><span class="linenum"> 117</span></a>      } else {                          // Editing state is in session
<a name="l118"><span class="linenum"> 118</span></a>          if (<a class="var it10055" onMouseOver="hilite(10055)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a>-&gt;<a onClick="logVariable('userid')" class="var it43538" onMouseOver="hilite(43538)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>) {   // It's a page we can edit, so load from session
<a name="l119"><span class="linenum"> 119</span></a>              if (!empty(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a>)) {
<a name="l120"><span class="linenum"> 120</span></a>                  <a class="var it417" onMouseOver="hilite(417)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> = 1;
<a name="l121"><span class="linenum"> 121</span></a>              } else {
<a name="l122"><span class="linenum"> 122</span></a>                  <a class="var it417" onMouseOver="hilite(417)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> = 0;
<a name="l123"><span class="linenum"> 123</span></a>              }
<a name="l124"><span class="linenum"> 124</span></a>          } else {
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">            // For the page to display properly with the user context header the page blocks need to</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">            // be copied over to the user context.</span>
<a name="l127"><span class="linenum"> 127</span></a>              if (!<a class="var it10055" onMouseOver="hilite(10055)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a> = <a class="function" onClick="logFunction('my_copy_page')" href="../_functions/my_copy_page.html" onMouseOver="funcPopup(event,'my_copy_page')">my_copy_page</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('MY_PAGE_PRIVATE')" href="../_constants/MY_PAGE_PRIVATE.html" onMouseOver="constPopup(event,'MY_PAGE_PRIVATE')">MY_PAGE_PRIVATE</a>)) {
<a name="l128"><span class="linenum"> 128</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('mymoodlesetup');
<a name="l129"><span class="linenum"> 129</span></a>              }
<a name="l130"><span class="linenum"> 130</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_user')" href="../_classes/context_user.html" onMouseOver="classPopup(event,'context_user')">context_user</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l131"><span class="linenum"> 131</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_context')" href="../_functions/set_context.html" onMouseOver="funcPopup(event,'set_context')">set_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l132"><span class="linenum"> 132</span></a>              <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_subpage')" href="../_functions/set_subpage.html" onMouseOver="funcPopup(event,'set_subpage')">set_subpage</a>(<a class="var it10055" onMouseOver="hilite(10055)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a>-&gt;<a onClick="logVariable('id')" class="var it43538" onMouseOver="hilite(43538)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">            // It's a system page and they are not allowed to edit system pages</span>
<a name="l134"><span class="linenum"> 134</span></a>              <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = <a class="var it417" onMouseOver="hilite(417)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> = 0;          <span class="comment">// Disable editing completely, just to be safe</span>
<a name="l135"><span class="linenum"> 135</span></a>          }
<a name="l136"><span class="linenum"> 136</span></a>      }
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">    // Add button for editing page</span>
<a name="l139"><span class="linenum"> 139</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = array('edit' =&gt; !<a class="var it417" onMouseOver="hilite(417)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a>);
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>      <a class="var it19512" onMouseOver="hilite(19512)" onMouseOut="lolite()" onClick="logVariable('resetbutton')" href="../_variables/resetbutton.html">$resetbutton</a> = '';
<a name="l142"><span class="linenum"> 142</span></a>      <a class="var it19513" onMouseOver="hilite(19513)" onMouseOut="lolite()" onClick="logVariable('resetstring')" href="../_variables/resetstring.html">$resetstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetpage', 'my');
<a name="l143"><span class="linenum"> 143</span></a>      <a class="var it19514" onMouseOver="hilite(19514)" onMouseOut="lolite()" onClick="logVariable('reseturl')" href="../_variables/reseturl.html">$reseturl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/my/index.php&quot;, array('edit' =&gt; 1, 'reset' =&gt; 1));
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>      if (!<a class="var it10055" onMouseOver="hilite(10055)" onMouseOut="lolite()" onClick="logVariable('currentpage')" href="../_variables/currentpage.html">$currentpage</a>-&gt;<a onClick="logVariable('userid')" class="var it43538" onMouseOver="hilite(43538)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>) {
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">        // viewing a system page -- let the user customise it</span>
<a name="l147"><span class="linenum"> 147</span></a>          <a class="var it19515" onMouseOver="hilite(19515)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('updatemymoodleon');
<a name="l148"><span class="linenum"> 148</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['edit'] = 1;
<a name="l149"><span class="linenum"> 149</span></a>      } else if (empty(<a class="var it417" onMouseOver="hilite(417)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a>)) {
<a name="l150"><span class="linenum"> 150</span></a>          <a class="var it19515" onMouseOver="hilite(19515)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('updatemymoodleon');
<a name="l151"><span class="linenum"> 151</span></a>      } else {
<a name="l152"><span class="linenum"> 152</span></a>          <a class="var it19515" onMouseOver="hilite(19515)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('updatemymoodleoff');
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it19512" onMouseOver="hilite(19512)" onMouseOut="lolite()" onClick="logVariable('resetbutton')" href="../_variables/resetbutton.html">$resetbutton</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<a class="var it19514" onMouseOver="hilite(19514)" onMouseOut="lolite()" onClick="logVariable('reseturl')" href="../_variables/reseturl.html">$reseturl</a>, <a class="var it19513" onMouseOver="hilite(19513)" onMouseOut="lolite()" onClick="logVariable('resetstring')" href="../_variables/resetstring.html">$resetstring</a>);
<a name="l154"><span class="linenum"> 154</span></a>      }
<a name="l155"><span class="linenum"> 155</span></a>  
<a name="l156"><span class="linenum"> 156</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/wwwroot.html">wwwroot</a>/my/index.php&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l157"><span class="linenum"> 157</span></a>      <a class="var it2196" onMouseOver="hilite(2196)" onMouseOut="lolite()" onClick="logVariable('button')" href="../_variables/button.html">$button</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it19515" onMouseOver="hilite(19515)" onMouseOut="lolite()" onClick="logVariable('editstring')" href="../_variables/editstring.html">$editstring</a>);
<a name="l158"><span class="linenum"> 158</span></a>      <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_button')" href="../_functions/set_button.html" onMouseOver="funcPopup(event,'set_button')">set_button</a>(<a class="var it19512" onMouseOver="hilite(19512)" onMouseOut="lolite()" onClick="logVariable('resetbutton')" href="../_variables/resetbutton.html">$resetbutton</a> . <a class="var it2196" onMouseOver="hilite(2196)" onMouseOut="lolite()" onClick="logVariable('button')" href="../_variables/button.html">$button</a>);
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>  } else {
<a name="l161"><span class="linenum"> 161</span></a>      <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('editing')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/editing.html">editing</a> = <a class="var it417" onMouseOver="hilite(417)" onMouseOut="lolite()" onClick="logVariable('edit')" href="../_variables/edit.html">$edit</a> = 0;
<a name="l162"><span class="linenum"> 162</span></a>  }
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="phpfunction" onClick="logFunction('header')" href="../_functions/header.html" onMouseOver="phpfuncPopup(event,'header')">header</a>();
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('custom_block_region')" href="../_functions/custom_block_region.html" onMouseOver="funcPopup(event,'custom_block_region')">custom_block_region</a>('content');
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>  echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('footer')" href="../_functions/footer.html" onMouseOver="funcPopup(event,'footer')">footer</a>();
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">// Trigger dashboard has been viewed event.</span>
<a name="l171"><span class="linenum"> 171</span></a>  <a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../_variables/eventparams.html">$eventparams</a> = array('context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l172"><span class="linenum"> 172</span></a>  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a> = \core\event\<a class="class" onClick="logClass('dashboard_viewed')" href="../_classes/dashboard_viewed.html" onMouseOver="classPopup(event,'dashboard_viewed')">dashboard_viewed</a>::<a class="function" onClick="logFunction('create')" href="../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it3033" onMouseOver="hilite(3033)" onMouseOut="lolite()" onClick="logVariable('eventparams')" href="../_variables/eventparams.html">$eventparams</a>);
<a name="l173"><span class="linenum"> 173</span></a>  <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2449]], 636],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'redirect_if_major_upgrade_required': ['redirect_if_major_upgrade_required', 'Check whether a major upgrade is needed. That is defined as an upgrade that changes something really fundamental in the database, so nothing can possibly work until the database has been updated, and that is defined by the hard-coded version number in this function. ', [['lib','setuplib.php',1382]], 3],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'set_blocks_editing_capability': ['set_blocks_editing_capability', 'Set the capability that allows users to edit blocks on this page. ', [['lib','pagelib.php',1321]], 14],
'set_user_preference': ['set_user_preference', 'Sets a preference for the specified user. ', [['lib','moodlelib.php',1827]], 172],
'set_context': ['set_context', 'Sets the context the manager operates on ', [['grade/grading','lib.php',116],['lib','pagelib.php',970],['mod/assign','locallib.php',274],['lib/portfolio','caller.php',568]], 278],
'require_sesskey': ['require_sesskey', 'Check the session key using {@link confirm_sesskey()}, and cause a fatal error if it does not match. ', [['lib','sessionlib.php',79]], 229],
'single_button': ['single_button', 'Returns a form with a single button. ', [['lib','outputrenderers.php',1772]], 316],
'my_get_page': ['my_get_page', '', [['my','lib.php',39]], 5],
'set_button': ['set_button', 'Specify a fragment of HTML that goes where the \'Turn editing on\' button normally goes. ', [['lib','pagelib.php',1312]], 29],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1086]], 293],
'moodle_needs_upgrading': ['moodle_needs_upgrading', 'Determine if moodle installation requires update. ', [['lib','moodlelib.php',7561]], 8],
'set_title': ['set_title', 'Sets the title for the node ', [['lib','outputcomponents.php',2820],['backup/cc/cc_lib','cc_weblink.php',41],['backup/cc/cc_lib','cc_basiclti.php',57],['lib','pagelib.php',1157],['blocks/rss_client/classes/output','channel_image.php',110],['blocks/rss_client/classes/output','item.php',182],['backup/cc/cc_lib','cc_asssesment.php',595],['backup/cc/cc_lib','cc_asssesment.php',843],['backup/cc/cc_lib','cc_asssesment.php',1060],['backup/cc/cc_lib','cc_asssesment.php',1829],['backup/cc/cc_lib','cc_page.php',38],['lib/classes','chart_base.php',222],['blocks/rss_client/classes/output','feed.php',113],['backup/cc/cc_lib','cc_metadata.php',225],['mod/wiki','pagelib.php',215],['backup/cc/cc_lib','cc_forum.php',39]], 460],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'force_open': ['force_open', 'Forces this node to be open and at the same time forces open all parents until the root node. ', [['lib','navigationlib.php',445]], 16],
'custom_block_region': ['custom_block_region', 'Renders a custom block region. ', [['lib','outputrenderers.php',3925]], 4],
'get_home_page': ['get_home_page', 'Gets the homepage to use for the current user ', [['lib','moodlelib.php',9514]], 7],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',481]], 1488],
'set_subpage': ['set_subpage', 'If context->id and pagetype are not enough to uniquely identify this page, then you can set a subpage id as well. For example, the tags page sets ', [['lib','pagelib.php',1118]], 13],
'footer': ['footer', 'This method is used to render the page footer. It is automatically called by AddPage() and could be overwritten in your own inherited class. ', [['lib/tcpdf','tcpdf.php',3464],['lib','outputrenderers.php',1034],['lib','outputrenderers.php',4427],['lib','outputrenderers.php',4546],['mod/lesson','renderer.php',78]], 810],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'user_allowed_editing': ['user_allowed_editing', 'Does the user have permission to see this page in editing mode. ', [['lib','pagelib.php',874]], 21],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',609]], 2210],
'set_heading': ['set_heading', 'Sets the heading to use for the page. This is normally used as the main heading at the top of the content. ', [['lib','pagelib.php',1170]], 426],
'my_reset_page': ['my_reset_page', '', [['my','lib.php',115]], 3],
'set_url': ['set_url', 'Convenience method handling moodle_urls. ', [['competency/classes','evidence.php',151],['lib','outputcomponents.php',2828],['backup/cc/cc_lib','cc_weblink.php',50],['lib','pagelib.php',1227],['blocks/rss_client/classes/output','channel_image.php',89],['backup/util/ui','restore_ui_components.php',141],['mod/wiki','pagelib.php',245],['mod/wiki','pagelib.php',333],['mod/wiki','pagelib.php',425],['mod/wiki','pagelib.php',696],['mod/wiki','pagelib.php',721],['mod/wiki','pagelib.php',835],['mod/wiki','pagelib.php',879],['mod/wiki','pagelib.php',1008],['mod/wiki','pagelib.php',1112],['mod/wiki','pagelib.php',1219],['mod/wiki','pagelib.php',1462],['mod/wiki','pagelib.php',1864],['mod/wiki','pagelib.php',1932],['mod/wiki','pagelib.php',2104],['mod/wiki','pagelib.php',2165],['mod/wiki','pagelib.php',2221],['mod/wiki','pagelib.php',2286],['mod/wiki','pagelib.php',2334],['mod/wiki','pagelib.php',2382],['mod/wiki','pagelib.php',2486]], 596],
'redirect': ['redirect', '', [['enrol/lti/ims-blti','blti.php',230],['lib','weblib.php',2659]], 999],
'add_region': ['add_region', 'Add a region to a page ', [['lib','blocklib.php',379]], 18],
'my_copy_page': ['my_copy_page', '', [['my','lib.php',58]], 2],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3249],['mod/assign','locallib.php',3915]], 546],
'set_pagetype': ['set_pagetype', 'Sets the pagetype to use for this page. ', [['lib','pagelib.php',1071]], 34],
'isguestuser': ['isguestuser', 'Determines if a user is logged in as real guest user with username \'guest\'. ', [['lib','accesslib.php',1923]], 260],
'is_null': ['is_null', '', [], 2003],
'header': ['header', '', [], 1355]};
CLASS_DATA={
'context_user': ['context_user', 'User context class ', [['lib','accesslib.php',6398]], 414],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'navigation_node': ['navigation_node', 'This class is used to represent a node in a navigation tree ', [['lib','navigationlib.php',34]], 348],
'dashboard_viewed': ['dashboard_viewed', 'Dashboard viewed event class. ', [['lib/classes/event','dashboard_viewed.php',28]], 2],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088]};
CONST_DATA={
'HOMEPAGE_USER': ['HOMEPAGE_USER', '', [['lib','moodlelib.php',486]], 5],
'MY_PAGE_PRIVATE': ['MY_PAGE_PRIVATE', '', [['my','lib.php',31]], 10],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 802],
'HOMEPAGE_MY': ['HOMEPAGE_MY', '', [['lib','moodlelib.php',482]], 15]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
