<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /backup/util/dbops/backup_controller_dbops.class.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='backup/util/dbops';
filename='backup_controller_dbops.class.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/backup/util/dbops/</a> -> <a href="backup_controller_dbops.class.php.html">backup_controller_dbops.class.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="backup_controller_dbops.class.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="backup_controller_dbops.class.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * @package    moodlecore</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @subpackage backup-dbops</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2010 onwards Eloy Lafuente (stronk7) {@link http://stronk7.com}</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment">/**</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * Non instantiable helper class providing DB support to the @backup_controller</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> *</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * This class contains various static methods available for all the DB operations</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * performed by the backup_controller class</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> *</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * TODO: Finish phpdocs</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> */</span>
<a name="l33"><span class="linenum">  33</span></a>  abstract class backup_controller_dbops extends backup_dbops {
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>      <span class="comment">/**</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">     * @var string Backup id for cached backup_includes_files result.</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     */</span>
<a name="l38"><span class="linenum">  38</span></a>      protected static <a class="var it16634" onMouseOver="hilite(16634)" onMouseOut="lolite()" onClick="logVariable('includesfilescachebackupid')" href="../../../_variables/includesfilescachebackupid.html">$includesfilescachebackupid</a>;
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>      <span class="comment">/**</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     * @var int Cached backup_includes_files result</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     */</span>
<a name="l43"><span class="linenum">  43</span></a>      protected static <a class="var it16635" onMouseOver="hilite(16635)" onMouseOut="lolite()" onClick="logVariable('includesfilescache')" href="../../../_variables/includesfilescache.html">$includesfilescache</a>;
<a name="l44"><span class="linenum">  44</span></a>  
<a name="l45"><span class="linenum">  45</span></a>      <span class="comment">/**</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     * Send one backup controller to DB</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">     *</span>
<a name="l48"><span class="linenum">  48</span></a>  <span class="comment">     * @param backup_controller $controller controller to send to DB</span>
<a name="l49"><span class="linenum">  49</span></a>  <span class="comment">     * @param string $checksum hash of the controller to be checked</span>
<a name="l50"><span class="linenum">  50</span></a>  <span class="comment">     * @param bool $includeobj to decide if the object itself must be updated (true) or no (false)</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     * @param bool $cleanobj to decide if the object itself must be cleaned (true) or no (false)</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     * @return int id of the controller record in the DB</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">     * @throws backup_controller_exception|backup_dbops_exception</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     */</span>
<a name="l55"><span class="linenum">  55</span></a>      public static function <a class="function" onClick="logFunction('save_controller')" href="../../../_functions/save_controller.html" onMouseOver="funcPopup(event,'save_controller')">save_controller</a>(<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>, <a class="var it12198" onMouseOver="hilite(12198)" onMouseOut="lolite()" onClick="logVariable('checksum')" href="../../../_variables/checksum.html">$checksum</a>, <a class="var it16636" onMouseOver="hilite(16636)" onMouseOut="lolite()" onClick="logVariable('includeobj')" href="../../../_variables/includeobj.html">$includeobj</a> = true, <a class="var it16637" onMouseOver="hilite(16637)" onMouseOut="lolite()" onClick="logVariable('cleanobj')" href="../../../_variables/cleanobj.html">$cleanobj</a> = false) {
<a name="l56"><span class="linenum">  56</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">        // Check we are going to save one backup_controller</span>
<a name="l58"><span class="linenum">  58</span></a>          if (! <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a> instanceof backup_controller) {
<a name="l59"><span class="linenum">  59</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_controller_exception')" href="../../../_classes/backup_controller_exception.html" onMouseOver="classPopup(event,'backup_controller_exception')">backup_controller_exception</a>('backup_controller_expected');
<a name="l60"><span class="linenum">  60</span></a>          }
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">        // Check checksum is ok. Only if we are including object info. Sounds silly but it isn't ;-).</span>
<a name="l62"><span class="linenum">  62</span></a>          if (<a class="var it16636" onMouseOver="hilite(16636)" onMouseOut="lolite()" onClick="logVariable('includeobj')" href="../../../_variables/includeobj.html">$includeobj</a> and !<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('is_checksum_correct')" href="../../../_functions/is_checksum_correct.html" onMouseOver="funcPopup(event,'is_checksum_correct')">is_checksum_correct</a>(<a class="var it12198" onMouseOver="hilite(12198)" onMouseOut="lolite()" onClick="logVariable('checksum')" href="../../../_variables/checksum.html">$checksum</a>)) {
<a name="l63"><span class="linenum">  63</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_dbops_exception')" href="../../../_classes/backup_dbops_exception.html" onMouseOver="classPopup(event,'backup_dbops_exception')">backup_dbops_exception</a>('backup_controller_dbops_saving_checksum_mismatch');
<a name="l64"><span class="linenum">  64</span></a>          }
<a name="l65"><span class="linenum">  65</span></a>  <span class="comment">        // Cannot request to $includeobj and $cleanobj at the same time.</span>
<a name="l66"><span class="linenum">  66</span></a>          if (<a class="var it16636" onMouseOver="hilite(16636)" onMouseOut="lolite()" onClick="logVariable('includeobj')" href="../../../_variables/includeobj.html">$includeobj</a> and <a class="var it16637" onMouseOver="hilite(16637)" onMouseOut="lolite()" onClick="logVariable('cleanobj')" href="../../../_variables/cleanobj.html">$cleanobj</a>) {
<a name="l67"><span class="linenum">  67</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_dbops_exception')" href="../../../_classes/backup_dbops_exception.html" onMouseOver="classPopup(event,'backup_dbops_exception')">backup_dbops_exception</a>('backup_controller_dbops_saving_cannot_include_and_delete');
<a name="l68"><span class="linenum">  68</span></a>          }
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">        // Get all the columns</span>
<a name="l70"><span class="linenum">  70</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a> = new stdclass();
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('backupid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/backupid.html">backupid</a>     = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_backupid')" href="../../../_functions/get_backupid.html" onMouseOver="funcPopup(event,'get_backupid')">get_backupid</a>();
<a name="l72"><span class="linenum">  72</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('operation')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/operation.html">operation</a>    = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_operation')" href="../../../_functions/get_operation.html" onMouseOver="funcPopup(event,'get_operation')">get_operation</a>();
<a name="l73"><span class="linenum">  73</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('type')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/type.html">type</a>         = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>();
<a name="l74"><span class="linenum">  74</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('itemid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/itemid.html">itemid</a>       = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_id')" href="../../../_functions/get_id.html" onMouseOver="funcPopup(event,'get_id')">get_id</a>();
<a name="l75"><span class="linenum">  75</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('format')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/format.html">format</a>       = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_format')" href="../../../_functions/get_format.html" onMouseOver="funcPopup(event,'get_format')">get_format</a>();
<a name="l76"><span class="linenum">  76</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('interactive')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/interactive.html">interactive</a>  = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_interactive')" href="../../../_functions/get_interactive.html" onMouseOver="funcPopup(event,'get_interactive')">get_interactive</a>();
<a name="l77"><span class="linenum">  77</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('purpose')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/purpose.html">purpose</a>      = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_mode')" href="../../../_functions/get_mode.html" onMouseOver="funcPopup(event,'get_mode')">get_mode</a>();
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('userid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/userid.html">userid</a>       = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_userid')" href="../../../_functions/get_userid.html" onMouseOver="funcPopup(event,'get_userid')">get_userid</a>();
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('status')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>       = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_status')" href="../../../_functions/get_status.html" onMouseOver="funcPopup(event,'get_status')">get_status</a>();
<a name="l80"><span class="linenum">  80</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('execution')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/execution.html">execution</a>    = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_execution')" href="../../../_functions/get_execution.html" onMouseOver="funcPopup(event,'get_execution')">get_execution</a>();
<a name="l81"><span class="linenum">  81</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('executiontime')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/executiontime.html">executiontime</a>= <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_executiontime')" href="../../../_functions/get_executiontime.html" onMouseOver="funcPopup(event,'get_executiontime')">get_executiontime</a>();
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('checksum')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/checksum.html">checksum</a>     = <a class="var it12198" onMouseOver="hilite(12198)" onMouseOut="lolite()" onClick="logVariable('checksum')" href="../../../_variables/checksum.html">$checksum</a>;
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">        // Serialize information</span>
<a name="l84"><span class="linenum">  84</span></a>          if (<a class="var it16636" onMouseOver="hilite(16636)" onMouseOut="lolite()" onClick="logVariable('includeobj')" href="../../../_variables/includeobj.html">$includeobj</a>) {
<a name="l85"><span class="linenum">  85</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('controller')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/controller.html">controller</a> = <a class="phpfunction" onClick="logFunction('base64_encode')" href="../../../_functions/base64_encode.html" onMouseOver="phpfuncPopup(event,'base64_encode')">base64_encode</a>(<a class="phpfunction" onClick="logFunction('serialize')" href="../../../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>));
<a name="l86"><span class="linenum">  86</span></a>          } else if (<a class="var it16637" onMouseOver="hilite(16637)" onMouseOut="lolite()" onClick="logVariable('cleanobj')" href="../../../_variables/cleanobj.html">$cleanobj</a>) {
<a name="l87"><span class="linenum">  87</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('controller')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/controller.html">controller</a> = '';
<a name="l88"><span class="linenum">  88</span></a>          }
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">        // Send it to DB</span>
<a name="l90"><span class="linenum">  90</span></a>          if (<a class="var it16640" onMouseOver="hilite(16640)" onMouseOut="lolite()" onClick="logVariable('recexists')" href="../../../_variables/recexists.html">$recexists</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('backup_controllers', array('backupid' =&gt; <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('backupid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/backupid.html">backupid</a>))) {
<a name="l91"><span class="linenum">  91</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('id')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a> = <a class="var it16640" onMouseOver="hilite(16640)" onMouseOut="lolite()" onClick="logVariable('recexists')" href="../../../_variables/recexists.html">$recexists</a>-&gt;<a onClick="logVariable('id')" class="var it45162" onMouseOver="hilite(45162)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l92"><span class="linenum">  92</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l93"><span class="linenum">  93</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('backup_controllers', <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>);
<a name="l94"><span class="linenum">  94</span></a>          } else {
<a name="l95"><span class="linenum">  95</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l96"><span class="linenum">  96</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/timemodified.html">timemodified</a> = 0;
<a name="l97"><span class="linenum">  97</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('id')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('backup_controllers', <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>);
<a name="l98"><span class="linenum">  98</span></a>          }
<a name="l99"><span class="linenum">  99</span></a>          return <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('id')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l100"><span class="linenum"> 100</span></a>      }
<a name="l101"><span class="linenum"> 101</span></a>  
<a name="l102"><span class="linenum"> 102</span></a>      public static function <a class="function" onClick="logFunction('load_controller')" href="../../../_functions/load_controller.html" onMouseOver="funcPopup(event,'load_controller')">load_controller</a>(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>) {
<a name="l103"><span class="linenum"> 103</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l104"><span class="linenum"> 104</span></a>          if (! <a class="var it16641" onMouseOver="hilite(16641)" onMouseOut="lolite()" onClick="logVariable('controllerrec')" href="../../../_variables/controllerrec.html">$controllerrec</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('backup_controllers', array('backupid' =&gt; <a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>))) {
<a name="l105"><span class="linenum"> 105</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_dbops_exception')" href="../../../_classes/backup_dbops_exception.html" onMouseOver="classPopup(event,'backup_dbops_exception')">backup_dbops_exception</a>('backup_controller_dbops_nonexisting');
<a name="l106"><span class="linenum"> 106</span></a>          }
<a name="l107"><span class="linenum"> 107</span></a>          <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a> = <a class="phpfunction" onClick="logFunction('unserialize')" href="../../../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="phpfunction" onClick="logFunction('base64_decode')" href="../../../_functions/base64_decode.html" onMouseOver="phpfuncPopup(event,'base64_decode')">base64_decode</a>(<a class="var it16641" onMouseOver="hilite(16641)" onMouseOut="lolite()" onClick="logVariable('controllerrec')" href="../../../_variables/controllerrec.html">$controllerrec</a>-&gt;<a onClick="logVariable('controller')" class="var it45163" onMouseOver="hilite(45163)" onMouseOut="lolite()" href="../../../_variables/controller.html">controller</a>));
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">        // Check checksum is ok. Sounds silly but it isn't ;-)</span>
<a name="l109"><span class="linenum"> 109</span></a>          if (!<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('is_checksum_correct')" href="../../../_functions/is_checksum_correct.html" onMouseOver="funcPopup(event,'is_checksum_correct')">is_checksum_correct</a>(<a class="var it16641" onMouseOver="hilite(16641)" onMouseOut="lolite()" onClick="logVariable('controllerrec')" href="../../../_variables/controllerrec.html">$controllerrec</a>-&gt;<a onClick="logVariable('checksum')" class="var it45163" onMouseOver="hilite(45163)" onMouseOut="lolite()" href="../../../_variables/checksum.html">checksum</a>)) {
<a name="l110"><span class="linenum"> 110</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_dbops_exception')" href="../../../_classes/backup_dbops_exception.html" onMouseOver="classPopup(event,'backup_dbops_exception')">backup_dbops_exception</a>('backup_controller_dbops_loading_checksum_mismatch');
<a name="l111"><span class="linenum"> 111</span></a>          }
<a name="l112"><span class="linenum"> 112</span></a>          return <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>;
<a name="l113"><span class="linenum"> 113</span></a>      }
<a name="l114"><span class="linenum"> 114</span></a>  
<a name="l115"><span class="linenum"> 115</span></a>      public static function <a class="function" onClick="logFunction('create_backup_ids_temp_table')" href="../../../_functions/create_backup_ids_temp_table.html" onMouseOver="funcPopup(event,'create_backup_ids_temp_table')">create_backup_ids_temp_table</a>(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>) {
<a name="l116"><span class="linenum"> 116</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l117"><span class="linenum"> 117</span></a>          <a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('dbman')" href="../../../_variables/dbman.html">$dbman</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../../../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>(); <span class="comment">// We are going to use database_manager services</span>
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('xmldb_table')" href="../../../_classes/xmldb_table.html" onMouseOver="classPopup(event,'xmldb_table')">xmldb_table</a>('backup_ids_temp');
<a name="l120"><span class="linenum"> 120</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('id', <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a>, '10', null, <a class="constant" onClick="logConstant('XMLDB_NOTNULL')" href="../../../_constants/XMLDB_NOTNULL.html" onMouseOver="constPopup(event,'XMLDB_NOTNULL')">XMLDB_NOTNULL</a>, <a class="constant" onClick="logConstant('XMLDB_SEQUENCE')" href="../../../_constants/XMLDB_SEQUENCE.html" onMouseOver="constPopup(event,'XMLDB_SEQUENCE')">XMLDB_SEQUENCE</a>, null);
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">        // Set default backupid (not needed but this enforce any missing backupid). That's hackery in action!</span>
<a name="l122"><span class="linenum"> 122</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('backupid', <a class="constant" onClick="logConstant('XMLDB_TYPE_CHAR')" href="../../../_constants/XMLDB_TYPE_CHAR.html" onMouseOver="constPopup(event,'XMLDB_TYPE_CHAR')">XMLDB_TYPE_CHAR</a>, 32, null, <a class="constant" onClick="logConstant('XMLDB_NOTNULL')" href="../../../_constants/XMLDB_NOTNULL.html" onMouseOver="constPopup(event,'XMLDB_NOTNULL')">XMLDB_NOTNULL</a>, null, <a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>);
<a name="l123"><span class="linenum"> 123</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('itemname', <a class="constant" onClick="logConstant('XMLDB_TYPE_CHAR')" href="../../../_constants/XMLDB_TYPE_CHAR.html" onMouseOver="constPopup(event,'XMLDB_TYPE_CHAR')">XMLDB_TYPE_CHAR</a>, 160, null, <a class="constant" onClick="logConstant('XMLDB_NOTNULL')" href="../../../_constants/XMLDB_NOTNULL.html" onMouseOver="constPopup(event,'XMLDB_NOTNULL')">XMLDB_NOTNULL</a>, null, null);
<a name="l124"><span class="linenum"> 124</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('itemid', <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a>, 10, null, <a class="constant" onClick="logConstant('XMLDB_NOTNULL')" href="../../../_constants/XMLDB_NOTNULL.html" onMouseOver="constPopup(event,'XMLDB_NOTNULL')">XMLDB_NOTNULL</a>, null, null);
<a name="l125"><span class="linenum"> 125</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('newitemid', <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a>, 10, null, <a class="constant" onClick="logConstant('XMLDB_NOTNULL')" href="../../../_constants/XMLDB_NOTNULL.html" onMouseOver="constPopup(event,'XMLDB_NOTNULL')">XMLDB_NOTNULL</a>, null, '0');
<a name="l126"><span class="linenum"> 126</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('parentitemid', <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a>, 10, null, null, null, null);
<a name="l127"><span class="linenum"> 127</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('info', <a class="constant" onClick="logConstant('XMLDB_TYPE_TEXT')" href="../../../_constants/XMLDB_TYPE_TEXT.html" onMouseOver="constPopup(event,'XMLDB_TYPE_TEXT')">XMLDB_TYPE_TEXT</a>, null, null, null, null, null);
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_key')" href="../../../_functions/add_key.html" onMouseOver="funcPopup(event,'add_key')">add_key</a>('primary', <a class="constant" onClick="logConstant('XMLDB_KEY_PRIMARY')" href="../../../_constants/XMLDB_KEY_PRIMARY.html" onMouseOver="constPopup(event,'XMLDB_KEY_PRIMARY')">XMLDB_KEY_PRIMARY</a>, array('id'));
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_key')" href="../../../_functions/add_key.html" onMouseOver="funcPopup(event,'add_key')">add_key</a>('backupid_itemname_itemid_uk', <a class="constant" onClick="logConstant('XMLDB_KEY_UNIQUE')" href="../../../_constants/XMLDB_KEY_UNIQUE.html" onMouseOver="constPopup(event,'XMLDB_KEY_UNIQUE')">XMLDB_KEY_UNIQUE</a>, array('backupid','itemname','itemid'));
<a name="l130"><span class="linenum"> 130</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_index')" href="../../../_functions/add_index.html" onMouseOver="funcPopup(event,'add_index')">add_index</a>('backupid_parentitemid_ix', <a class="constant" onClick="logConstant('XMLDB_INDEX_NOTUNIQUE')" href="../../../_constants/XMLDB_INDEX_NOTUNIQUE.html" onMouseOver="constPopup(event,'XMLDB_INDEX_NOTUNIQUE')">XMLDB_INDEX_NOTUNIQUE</a>, array('backupid','itemname','parentitemid'));
<a name="l131"><span class="linenum"> 131</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_index')" href="../../../_functions/add_index.html" onMouseOver="funcPopup(event,'add_index')">add_index</a>('backupid_itemname_newitemid_ix', <a class="constant" onClick="logConstant('XMLDB_INDEX_NOTUNIQUE')" href="../../../_constants/XMLDB_INDEX_NOTUNIQUE.html" onMouseOver="constPopup(event,'XMLDB_INDEX_NOTUNIQUE')">XMLDB_INDEX_NOTUNIQUE</a>, array('backupid','itemname','newitemid'));
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('dbman')" href="../../../_variables/dbman.html">$dbman</a>-&gt;<a class="function" onClick="logFunction('create_temp_table')" href="../../../_functions/create_temp_table.html" onMouseOver="funcPopup(event,'create_temp_table')">create_temp_table</a>(<a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>); <span class="comment">// And create it</span>
<a name="l134"><span class="linenum"> 134</span></a>  
<a name="l135"><span class="linenum"> 135</span></a>      }
<a name="l136"><span class="linenum"> 136</span></a>  
<a name="l137"><span class="linenum"> 137</span></a>      public static function <a class="function" onClick="logFunction('create_backup_files_temp_table')" href="../../../_functions/create_backup_files_temp_table.html" onMouseOver="funcPopup(event,'create_backup_files_temp_table')">create_backup_files_temp_table</a>(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>) {
<a name="l138"><span class="linenum"> 138</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l139"><span class="linenum"> 139</span></a>          <a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('dbman')" href="../../../_variables/dbman.html">$dbman</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../../../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>(); <span class="comment">// We are going to use database_manager services</span>
<a name="l140"><span class="linenum"> 140</span></a>  
<a name="l141"><span class="linenum"> 141</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('xmldb_table')" href="../../../_classes/xmldb_table.html" onMouseOver="classPopup(event,'xmldb_table')">xmldb_table</a>('backup_files_temp');
<a name="l142"><span class="linenum"> 142</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('id', <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a>, '10', null, <a class="constant" onClick="logConstant('XMLDB_NOTNULL')" href="../../../_constants/XMLDB_NOTNULL.html" onMouseOver="constPopup(event,'XMLDB_NOTNULL')">XMLDB_NOTNULL</a>, <a class="constant" onClick="logConstant('XMLDB_SEQUENCE')" href="../../../_constants/XMLDB_SEQUENCE.html" onMouseOver="constPopup(event,'XMLDB_SEQUENCE')">XMLDB_SEQUENCE</a>, null);
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment">        // Set default backupid (not needed but this enforce any missing backupid). That's hackery in action!</span>
<a name="l144"><span class="linenum"> 144</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('backupid', <a class="constant" onClick="logConstant('XMLDB_TYPE_CHAR')" href="../../../_constants/XMLDB_TYPE_CHAR.html" onMouseOver="constPopup(event,'XMLDB_TYPE_CHAR')">XMLDB_TYPE_CHAR</a>, 32, null, <a class="constant" onClick="logConstant('XMLDB_NOTNULL')" href="../../../_constants/XMLDB_NOTNULL.html" onMouseOver="constPopup(event,'XMLDB_NOTNULL')">XMLDB_NOTNULL</a>, null, <a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>);
<a name="l145"><span class="linenum"> 145</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('contextid', <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a>, 10, null, <a class="constant" onClick="logConstant('XMLDB_NOTNULL')" href="../../../_constants/XMLDB_NOTNULL.html" onMouseOver="constPopup(event,'XMLDB_NOTNULL')">XMLDB_NOTNULL</a>, null, null);
<a name="l146"><span class="linenum"> 146</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('component', <a class="constant" onClick="logConstant('XMLDB_TYPE_CHAR')" href="../../../_constants/XMLDB_TYPE_CHAR.html" onMouseOver="constPopup(event,'XMLDB_TYPE_CHAR')">XMLDB_TYPE_CHAR</a>, 100, null, <a class="constant" onClick="logConstant('XMLDB_NOTNULL')" href="../../../_constants/XMLDB_NOTNULL.html" onMouseOver="constPopup(event,'XMLDB_NOTNULL')">XMLDB_NOTNULL</a>, null, null);
<a name="l147"><span class="linenum"> 147</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('filearea', <a class="constant" onClick="logConstant('XMLDB_TYPE_CHAR')" href="../../../_constants/XMLDB_TYPE_CHAR.html" onMouseOver="constPopup(event,'XMLDB_TYPE_CHAR')">XMLDB_TYPE_CHAR</a>, 50, null, <a class="constant" onClick="logConstant('XMLDB_NOTNULL')" href="../../../_constants/XMLDB_NOTNULL.html" onMouseOver="constPopup(event,'XMLDB_NOTNULL')">XMLDB_NOTNULL</a>, null, null);
<a name="l148"><span class="linenum"> 148</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('itemid', <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a>, 10, null, <a class="constant" onClick="logConstant('XMLDB_NOTNULL')" href="../../../_constants/XMLDB_NOTNULL.html" onMouseOver="constPopup(event,'XMLDB_NOTNULL')">XMLDB_NOTNULL</a>, null, null);
<a name="l149"><span class="linenum"> 149</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('info', <a class="constant" onClick="logConstant('XMLDB_TYPE_TEXT')" href="../../../_constants/XMLDB_TYPE_TEXT.html" onMouseOver="constPopup(event,'XMLDB_TYPE_TEXT')">XMLDB_TYPE_TEXT</a>, null, null, null, null, null);
<a name="l150"><span class="linenum"> 150</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('newcontextid', <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a>, 10, null, null, null, null);
<a name="l151"><span class="linenum"> 151</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('newitemid', <a class="constant" onClick="logConstant('XMLDB_TYPE_INTEGER')" href="../../../_constants/XMLDB_TYPE_INTEGER.html" onMouseOver="constPopup(event,'XMLDB_TYPE_INTEGER')">XMLDB_TYPE_INTEGER</a>, 10, null, null, null, null);
<a name="l152"><span class="linenum"> 152</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_key')" href="../../../_functions/add_key.html" onMouseOver="funcPopup(event,'add_key')">add_key</a>('primary', <a class="constant" onClick="logConstant('XMLDB_KEY_PRIMARY')" href="../../../_constants/XMLDB_KEY_PRIMARY.html" onMouseOver="constPopup(event,'XMLDB_KEY_PRIMARY')">XMLDB_KEY_PRIMARY</a>, array('id'));
<a name="l153"><span class="linenum"> 153</span></a>          <a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>-&gt;<a class="function" onClick="logFunction('add_index')" href="../../../_functions/add_index.html" onMouseOver="funcPopup(event,'add_index')">add_index</a>('backupid_contextid_component_filearea_itemid_ix', <a class="constant" onClick="logConstant('XMLDB_INDEX_NOTUNIQUE')" href="../../../_constants/XMLDB_INDEX_NOTUNIQUE.html" onMouseOver="constPopup(event,'XMLDB_INDEX_NOTUNIQUE')">XMLDB_INDEX_NOTUNIQUE</a>, array('backupid','contextid','component','filearea','itemid'));
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>          <a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('dbman')" href="../../../_variables/dbman.html">$dbman</a>-&gt;<a class="function" onClick="logFunction('create_temp_table')" href="../../../_functions/create_temp_table.html" onMouseOver="funcPopup(event,'create_temp_table')">create_temp_table</a>(<a class="var it8627" onMouseOver="hilite(8627)" onMouseOut="lolite()" onClick="logVariable('xmldb_table')" href="../../../_variables/xmldb_table.html">$xmldb_table</a>); <span class="comment">// And create it</span>
<a name="l156"><span class="linenum"> 156</span></a>      }
<a name="l157"><span class="linenum"> 157</span></a>  
<a name="l158"><span class="linenum"> 158</span></a>      public static function <a class="function" onClick="logFunction('drop_backup_ids_temp_table')" href="../../../_functions/drop_backup_ids_temp_table.html" onMouseOver="funcPopup(event,'drop_backup_ids_temp_table')">drop_backup_ids_temp_table</a>(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>) {
<a name="l159"><span class="linenum"> 159</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l160"><span class="linenum"> 160</span></a>          <a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('dbman')" href="../../../_variables/dbman.html">$dbman</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../../../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>(); <span class="comment">// We are going to use database_manager services</span>
<a name="l161"><span class="linenum"> 161</span></a>  
<a name="l162"><span class="linenum"> 162</span></a>          <a class="var it16642" onMouseOver="hilite(16642)" onMouseOut="lolite()" onClick="logVariable('targettablename')" href="../../../_variables/targettablename.html">$targettablename</a> = 'backup_ids_temp';
<a name="l163"><span class="linenum"> 163</span></a>          if (<a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('dbman')" href="../../../_variables/dbman.html">$dbman</a>-&gt;<a class="function" onClick="logFunction('table_exists')" href="../../../_functions/table_exists.html" onMouseOver="funcPopup(event,'table_exists')">table_exists</a>(<a class="var it16642" onMouseOver="hilite(16642)" onMouseOut="lolite()" onClick="logVariable('targettablename')" href="../../../_variables/targettablename.html">$targettablename</a>)) {
<a name="l164"><span class="linenum"> 164</span></a>              <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('xmldb_table')" href="../../../_classes/xmldb_table.html" onMouseOver="classPopup(event,'xmldb_table')">xmldb_table</a>(<a class="var it16642" onMouseOver="hilite(16642)" onMouseOut="lolite()" onClick="logVariable('targettablename')" href="../../../_variables/targettablename.html">$targettablename</a>);
<a name="l165"><span class="linenum"> 165</span></a>              <a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('dbman')" href="../../../_variables/dbman.html">$dbman</a>-&gt;<a class="function" onClick="logFunction('drop_table')" href="../../../_functions/drop_table.html" onMouseOver="funcPopup(event,'drop_table')">drop_table</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a>); <span class="comment">// And drop it</span>
<a name="l166"><span class="linenum"> 166</span></a>          }
<a name="l167"><span class="linenum"> 167</span></a>      }
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>      <span class="comment">/**</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">     * Decode the info field from backup_ids_temp or backup_files_temp.</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">     *</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     * @param mixed $info The info field data to decode, may be an object or a simple integer.</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     * @return mixed The decoded information.  For simple types it returns, for complex ones we decode.</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment">     */</span>
<a name="l175"><span class="linenum"> 175</span></a>      public static function <a class="function" onClick="logFunction('decode_backup_temp_info')" href="../../../_functions/decode_backup_temp_info.html" onMouseOver="funcPopup(event,'decode_backup_temp_info')">decode_backup_temp_info</a>(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a>) {
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment">        // We encode all data except null.</span>
<a name="l177"><span class="linenum"> 177</span></a>          if (<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a> != null) {
<a name="l178"><span class="linenum"> 178</span></a>              return <a class="phpfunction" onClick="logFunction('unserialize')" href="../../../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="phpfunction" onClick="logFunction('gzuncompress')" href="../../../_functions/gzuncompress.html" onMouseOver="phpfuncPopup(event,'gzuncompress')">gzuncompress</a>(<a class="phpfunction" onClick="logFunction('base64_decode')" href="../../../_functions/base64_decode.html" onMouseOver="phpfuncPopup(event,'base64_decode')">base64_decode</a>(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a>)));
<a name="l179"><span class="linenum"> 179</span></a>          }
<a name="l180"><span class="linenum"> 180</span></a>          return <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a>;
<a name="l181"><span class="linenum"> 181</span></a>      }
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>      <span class="comment">/**</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">     * Encode the info field for backup_ids_temp or backup_files_temp.</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">     *</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">     * @param mixed $info string The info field data to encode.</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">     * @return string An encoded string of data or null if the input is null.</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">     */</span>
<a name="l189"><span class="linenum"> 189</span></a>      public static function <a class="function" onClick="logFunction('encode_backup_temp_info')" href="../../../_functions/encode_backup_temp_info.html" onMouseOver="funcPopup(event,'encode_backup_temp_info')">encode_backup_temp_info</a>(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a>) {
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">        // We encode if there is any information to keep the translations simpler.</span>
<a name="l191"><span class="linenum"> 191</span></a>          if (<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a> != null) {
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">            // We compress if possible. It reduces db, network and memory storage. The saving is greater than CPU compression cost.</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">            // Compression level 1 is chosen has it produces good compression with the smallest possible overhead, see MDL-40618.</span>
<a name="l194"><span class="linenum"> 194</span></a>              return <a class="phpfunction" onClick="logFunction('base64_encode')" href="../../../_functions/base64_encode.html" onMouseOver="phpfuncPopup(event,'base64_encode')">base64_encode</a>(<a class="phpfunction" onClick="logFunction('gzcompress')" href="../../../_functions/gzcompress.html" onMouseOver="phpfuncPopup(event,'gzcompress')">gzcompress</a>(<a class="phpfunction" onClick="logFunction('serialize')" href="../../../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a>), 1));
<a name="l195"><span class="linenum"> 195</span></a>          }
<a name="l196"><span class="linenum"> 196</span></a>          return <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a>;
<a name="l197"><span class="linenum"> 197</span></a>      }
<a name="l198"><span class="linenum"> 198</span></a>  
<a name="l199"><span class="linenum"> 199</span></a>      <span class="comment">/**</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">     * Given one type and id from controller, return the corresponding courseid</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">     */</span>
<a name="l202"><span class="linenum"> 202</span></a>      public static function <a class="function" onClick="logFunction('get_courseid_from_type_id')" href="../../../_functions/get_courseid_from_type_id.html" onMouseOver="funcPopup(event,'get_courseid_from_type_id')">get_courseid_from_type_id</a>(<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>) {
<a name="l203"><span class="linenum"> 203</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l204"><span class="linenum"> 204</span></a>          if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> == backup::TYPE_1COURSE) {
<a name="l205"><span class="linenum"> 205</span></a>              return <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>; <span class="comment">// id is the course id</span>
<a name="l206"><span class="linenum"> 206</span></a>  
<a name="l207"><span class="linenum"> 207</span></a>          } else if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> == backup::TYPE_1SECTION) {
<a name="l208"><span class="linenum"> 208</span></a>              if (! <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('course_sections', 'course', array('id' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>))) {
<a name="l209"><span class="linenum"> 209</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_dbops_exception')" href="../../../_classes/backup_dbops_exception.html" onMouseOver="classPopup(event,'backup_dbops_exception')">backup_dbops_exception</a>('course_not_found_for_section', <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>);
<a name="l210"><span class="linenum"> 210</span></a>              }
<a name="l211"><span class="linenum"> 211</span></a>              return <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>;
<a name="l212"><span class="linenum"> 212</span></a>          } else if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> == backup::TYPE_1ACTIVITY) {
<a name="l213"><span class="linenum"> 213</span></a>              if (! <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('course_modules', 'course', array('id' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>))) {
<a name="l214"><span class="linenum"> 214</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_dbops_exception')" href="../../../_classes/backup_dbops_exception.html" onMouseOver="classPopup(event,'backup_dbops_exception')">backup_dbops_exception</a>('course_not_found_for_moduleid', <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>);
<a name="l215"><span class="linenum"> 215</span></a>              }
<a name="l216"><span class="linenum"> 216</span></a>              return <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>;
<a name="l217"><span class="linenum"> 217</span></a>          }
<a name="l218"><span class="linenum"> 218</span></a>      }
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>      <span class="comment">/**</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">     * Given one activity task, return the activity information and related settings</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">     * Used by get_moodle_backup_information()</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">     */</span>
<a name="l224"><span class="linenum"> 224</span></a>      private static function <a class="function" onClick="logFunction('get_activity_backup_information')" href="../../../_functions/get_activity_backup_information.html" onMouseOver="funcPopup(event,'get_activity_backup_information')">get_activity_backup_information</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>) {
<a name="l225"><span class="linenum"> 225</span></a>  
<a name="l226"><span class="linenum"> 226</span></a>          <a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a> = array(
<a name="l227"><span class="linenum"> 227</span></a>              'moduleid'   =&gt; <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_moduleid')" href="../../../_functions/get_moduleid.html" onMouseOver="funcPopup(event,'get_moduleid')">get_moduleid</a>(),
<a name="l228"><span class="linenum"> 228</span></a>              'sectionid'  =&gt; <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_sectionid')" href="../../../_functions/get_sectionid.html" onMouseOver="funcPopup(event,'get_sectionid')">get_sectionid</a>(),
<a name="l229"><span class="linenum"> 229</span></a>              'modulename' =&gt; <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_modulename')" href="../../../_functions/get_modulename.html" onMouseOver="funcPopup(event,'get_modulename')">get_modulename</a>(),
<a name="l230"><span class="linenum"> 230</span></a>              'title'      =&gt; <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(),
<a name="l231"><span class="linenum"> 231</span></a>              'directory'  =&gt; 'activities/' . <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_modulename')" href="../../../_functions/get_modulename.html" onMouseOver="funcPopup(event,'get_modulename')">get_modulename</a>() . '_' . <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_moduleid')" href="../../../_functions/get_moduleid.html" onMouseOver="funcPopup(event,'get_moduleid')">get_moduleid</a>());
<a name="l232"><span class="linenum"> 232</span></a>  
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment">        // Now get activity settings</span>
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment">        // Calculate prefix to find valid settings</span>
<a name="l235"><span class="linenum"> 235</span></a>          <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a> = <a class="phpfunction" onClick="logFunction('basename')" href="../../../_functions/basename.html" onMouseOver="phpfuncPopup(event,'basename')">basename</a>(<a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>['directory']);
<a name="l236"><span class="linenum"> 236</span></a>          <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a> = array();
<a name="l237"><span class="linenum"> 237</span></a>          foreach (<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_settings')" href="../../../_functions/get_settings.html" onMouseOver="funcPopup(event,'get_settings')">get_settings</a>() as <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>) {
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">            // Discard ones without valid prefix</span>
<a name="l239"><span class="linenum"> 239</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(), <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>) !== 0) {
<a name="l240"><span class="linenum"> 240</span></a>                  continue;
<a name="l241"><span class="linenum"> 241</span></a>              }
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment">            // Validate level is correct (activity)</span>
<a name="l243"><span class="linenum"> 243</span></a>              if (<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_level')" href="../../../_functions/get_level.html" onMouseOver="funcPopup(event,'get_level')">get_level</a>() != backup_setting::ACTIVITY_LEVEL) {
<a name="l244"><span class="linenum"> 244</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_controller_exception')" href="../../../_classes/backup_controller_exception.html" onMouseOver="classPopup(event,'backup_controller_exception')">backup_controller_exception</a>('setting_not_activity_level', <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>);
<a name="l245"><span class="linenum"> 245</span></a>              }
<a name="l246"><span class="linenum"> 246</span></a>              <a class="var it16645" onMouseOver="hilite(16645)" onMouseOut="lolite()" onClick="logVariable('settinginfo')" href="../../../_variables/settinginfo.html">$settinginfo</a> = array(
<a name="l247"><span class="linenum"> 247</span></a>                  'level'    =&gt; 'activity',
<a name="l248"><span class="linenum"> 248</span></a>                  'activity' =&gt; <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>,
<a name="l249"><span class="linenum"> 249</span></a>                  'name'     =&gt; <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(),
<a name="l250"><span class="linenum"> 250</span></a>                  'value'    =&gt; <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_value')" href="../../../_functions/get_value.html" onMouseOver="funcPopup(event,'get_value')">get_value</a>());
<a name="l251"><span class="linenum"> 251</span></a>              <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>[<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>()] = (object)<a class="var it16645" onMouseOver="hilite(16645)" onMouseOut="lolite()" onClick="logVariable('settinginfo')" href="../../../_variables/settinginfo.html">$settinginfo</a>;
<a name="l252"><span class="linenum"> 252</span></a>          }
<a name="l253"><span class="linenum"> 253</span></a>          return array(<a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>, <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>);
<a name="l254"><span class="linenum"> 254</span></a>      }
<a name="l255"><span class="linenum"> 255</span></a>  
<a name="l256"><span class="linenum"> 256</span></a>      <span class="comment">/**</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">     * Given one section task, return the section information and related settings</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">     * Used by get_moodle_backup_information()</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">     */</span>
<a name="l260"><span class="linenum"> 260</span></a>      private static function <a class="function" onClick="logFunction('get_section_backup_information')" href="../../../_functions/get_section_backup_information.html" onMouseOver="funcPopup(event,'get_section_backup_information')">get_section_backup_information</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>) {
<a name="l261"><span class="linenum"> 261</span></a>  
<a name="l262"><span class="linenum"> 262</span></a>          <a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a> = array(
<a name="l263"><span class="linenum"> 263</span></a>              'sectionid'  =&gt; <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_sectionid')" href="../../../_functions/get_sectionid.html" onMouseOver="funcPopup(event,'get_sectionid')">get_sectionid</a>(),
<a name="l264"><span class="linenum"> 264</span></a>              'title'      =&gt; <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(),
<a name="l265"><span class="linenum"> 265</span></a>              'directory'  =&gt; 'sections/' . 'section_' . <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_sectionid')" href="../../../_functions/get_sectionid.html" onMouseOver="funcPopup(event,'get_sectionid')">get_sectionid</a>());
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">        // Now get section settings</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">        // Calculate prefix to find valid settings</span>
<a name="l269"><span class="linenum"> 269</span></a>          <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a> = <a class="phpfunction" onClick="logFunction('basename')" href="../../../_functions/basename.html" onMouseOver="phpfuncPopup(event,'basename')">basename</a>(<a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>['directory']);
<a name="l270"><span class="linenum"> 270</span></a>          <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a> = array();
<a name="l271"><span class="linenum"> 271</span></a>          foreach (<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_settings')" href="../../../_functions/get_settings.html" onMouseOver="funcPopup(event,'get_settings')">get_settings</a>() as <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>) {
<a name="l272"><span class="linenum"> 272</span></a>  <span class="comment">            // Discard ones without valid prefix</span>
<a name="l273"><span class="linenum"> 273</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(), <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>) !== 0) {
<a name="l274"><span class="linenum"> 274</span></a>                  continue;
<a name="l275"><span class="linenum"> 275</span></a>              }
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">            // Validate level is correct (section)</span>
<a name="l277"><span class="linenum"> 277</span></a>              if (<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_level')" href="../../../_functions/get_level.html" onMouseOver="funcPopup(event,'get_level')">get_level</a>() != backup_setting::SECTION_LEVEL) {
<a name="l278"><span class="linenum"> 278</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_controller_exception')" href="../../../_classes/backup_controller_exception.html" onMouseOver="classPopup(event,'backup_controller_exception')">backup_controller_exception</a>('setting_not_section_level', <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>);
<a name="l279"><span class="linenum"> 279</span></a>              }
<a name="l280"><span class="linenum"> 280</span></a>              <a class="var it16645" onMouseOver="hilite(16645)" onMouseOut="lolite()" onClick="logVariable('settinginfo')" href="../../../_variables/settinginfo.html">$settinginfo</a> = array(
<a name="l281"><span class="linenum"> 281</span></a>                  'level'    =&gt; 'section',
<a name="l282"><span class="linenum"> 282</span></a>                  'section'  =&gt; <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>,
<a name="l283"><span class="linenum"> 283</span></a>                  'name'     =&gt; <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(),
<a name="l284"><span class="linenum"> 284</span></a>                  'value'    =&gt; <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_value')" href="../../../_functions/get_value.html" onMouseOver="funcPopup(event,'get_value')">get_value</a>());
<a name="l285"><span class="linenum"> 285</span></a>              <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>[<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>()] = (object)<a class="var it16645" onMouseOver="hilite(16645)" onMouseOut="lolite()" onClick="logVariable('settinginfo')" href="../../../_variables/settinginfo.html">$settinginfo</a>;
<a name="l286"><span class="linenum"> 286</span></a>          }
<a name="l287"><span class="linenum"> 287</span></a>          return array(<a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>, <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>);
<a name="l288"><span class="linenum"> 288</span></a>      }
<a name="l289"><span class="linenum"> 289</span></a>  
<a name="l290"><span class="linenum"> 290</span></a>      <span class="comment">/**</span>
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">     * Given one course task, return the course information and related settings</span>
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">     * Used by get_moodle_backup_information()</span>
<a name="l293"><span class="linenum"> 293</span></a>  <span class="comment">     */</span>
<a name="l294"><span class="linenum"> 294</span></a>      private static function <a class="function" onClick="logFunction('get_course_backup_information')" href="../../../_functions/get_course_backup_information.html" onMouseOver="funcPopup(event,'get_course_backup_information')">get_course_backup_information</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>) {
<a name="l295"><span class="linenum"> 295</span></a>  
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a> = array(
<a name="l297"><span class="linenum"> 297</span></a>              'courseid'   =&gt; <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_courseid')" href="../../../_functions/get_courseid.html" onMouseOver="funcPopup(event,'get_courseid')">get_courseid</a>(),
<a name="l298"><span class="linenum"> 298</span></a>              'title'      =&gt; <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(),
<a name="l299"><span class="linenum"> 299</span></a>              'directory'  =&gt; 'course');
<a name="l300"><span class="linenum"> 300</span></a>  
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment">        // Now get course settings</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">        // Calculate prefix to find valid settings</span>
<a name="l303"><span class="linenum"> 303</span></a>          <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a> = <a class="phpfunction" onClick="logFunction('basename')" href="../../../_functions/basename.html" onMouseOver="phpfuncPopup(event,'basename')">basename</a>(<a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>['directory']);
<a name="l304"><span class="linenum"> 304</span></a>          <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a> = array();
<a name="l305"><span class="linenum"> 305</span></a>          foreach (<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_settings')" href="../../../_functions/get_settings.html" onMouseOver="funcPopup(event,'get_settings')">get_settings</a>() as <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>) {
<a name="l306"><span class="linenum"> 306</span></a>  <span class="comment">            // Discard ones without valid prefix</span>
<a name="l307"><span class="linenum"> 307</span></a>              if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(), <a class="var it416" onMouseOver="hilite(416)" onMouseOut="lolite()" onClick="logVariable('prefix')" href="../../../_variables/prefix.html">$prefix</a>) !== 0) {
<a name="l308"><span class="linenum"> 308</span></a>                  continue;
<a name="l309"><span class="linenum"> 309</span></a>              }
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">            // Validate level is correct (course)</span>
<a name="l311"><span class="linenum"> 311</span></a>              if (<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_level')" href="../../../_functions/get_level.html" onMouseOver="funcPopup(event,'get_level')">get_level</a>() != backup_setting::COURSE_LEVEL) {
<a name="l312"><span class="linenum"> 312</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_controller_exception')" href="../../../_classes/backup_controller_exception.html" onMouseOver="classPopup(event,'backup_controller_exception')">backup_controller_exception</a>('setting_not_course_level', <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>);
<a name="l313"><span class="linenum"> 313</span></a>              }
<a name="l314"><span class="linenum"> 314</span></a>              <a class="var it16645" onMouseOver="hilite(16645)" onMouseOut="lolite()" onClick="logVariable('settinginfo')" href="../../../_variables/settinginfo.html">$settinginfo</a> = array(
<a name="l315"><span class="linenum"> 315</span></a>                  'level'    =&gt; 'course',
<a name="l316"><span class="linenum"> 316</span></a>                  'name'     =&gt; <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(),
<a name="l317"><span class="linenum"> 317</span></a>                  'value'    =&gt; <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_value')" href="../../../_functions/get_value.html" onMouseOver="funcPopup(event,'get_value')">get_value</a>());
<a name="l318"><span class="linenum"> 318</span></a>              <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>[<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>()] = (object)<a class="var it16645" onMouseOver="hilite(16645)" onMouseOut="lolite()" onClick="logVariable('settinginfo')" href="../../../_variables/settinginfo.html">$settinginfo</a>;
<a name="l319"><span class="linenum"> 319</span></a>          }
<a name="l320"><span class="linenum"> 320</span></a>          return array(<a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>, <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>);
<a name="l321"><span class="linenum"> 321</span></a>      }
<a name="l322"><span class="linenum"> 322</span></a>  
<a name="l323"><span class="linenum"> 323</span></a>      <span class="comment">/**</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment">     * Given one root task, return the course information and related settings</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment">     * Used by get_moodle_backup_information()</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment">     */</span>
<a name="l327"><span class="linenum"> 327</span></a>      private static function <a class="function" onClick="logFunction('get_root_backup_information')" href="../../../_functions/get_root_backup_information.html" onMouseOver="funcPopup(event,'get_root_backup_information')">get_root_backup_information</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>) {
<a name="l328"><span class="linenum"> 328</span></a>  
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">        // Now get root settings</span>
<a name="l330"><span class="linenum"> 330</span></a>          <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a> = array();
<a name="l331"><span class="linenum"> 331</span></a>          foreach (<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_settings')" href="../../../_functions/get_settings.html" onMouseOver="funcPopup(event,'get_settings')">get_settings</a>() as <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>) {
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">            // Validate level is correct (root)</span>
<a name="l333"><span class="linenum"> 333</span></a>              if (<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_level')" href="../../../_functions/get_level.html" onMouseOver="funcPopup(event,'get_level')">get_level</a>() != backup_setting::ROOT_LEVEL) {
<a name="l334"><span class="linenum"> 334</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_controller_exception')" href="../../../_classes/backup_controller_exception.html" onMouseOver="classPopup(event,'backup_controller_exception')">backup_controller_exception</a>('setting_not_root_level', <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>);
<a name="l335"><span class="linenum"> 335</span></a>              }
<a name="l336"><span class="linenum"> 336</span></a>              <a class="var it16645" onMouseOver="hilite(16645)" onMouseOut="lolite()" onClick="logVariable('settinginfo')" href="../../../_variables/settinginfo.html">$settinginfo</a> = array(
<a name="l337"><span class="linenum"> 337</span></a>                  'level'    =&gt; 'root',
<a name="l338"><span class="linenum"> 338</span></a>                  'name'     =&gt; <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>(),
<a name="l339"><span class="linenum"> 339</span></a>                  'value'    =&gt; <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_value')" href="../../../_functions/get_value.html" onMouseOver="funcPopup(event,'get_value')">get_value</a>());
<a name="l340"><span class="linenum"> 340</span></a>              <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>[<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_name')" href="../../../_functions/get_name.html" onMouseOver="funcPopup(event,'get_name')">get_name</a>()] = (object)<a class="var it16645" onMouseOver="hilite(16645)" onMouseOut="lolite()" onClick="logVariable('settinginfo')" href="../../../_variables/settinginfo.html">$settinginfo</a>;
<a name="l341"><span class="linenum"> 341</span></a>          }
<a name="l342"><span class="linenum"> 342</span></a>          return array(null, <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>);
<a name="l343"><span class="linenum"> 343</span></a>      }
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>      <span class="comment">/**</span>
<a name="l346"><span class="linenum"> 346</span></a>  <span class="comment">     * Get details information for main moodle_backup.xml file, extracting it from</span>
<a name="l347"><span class="linenum"> 347</span></a>  <span class="comment">     * the specified controller.</span>
<a name="l348"><span class="linenum"> 348</span></a>  <span class="comment">     *</span>
<a name="l349"><span class="linenum"> 349</span></a>  <span class="comment">     * If you specify the progress monitor, this will start a new progress section</span>
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">     * to track progress in processing (in case this task takes a long time).</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment">     *</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment">     * @param string $backupid Backup ID</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment">     * @param \core\progress\base $progress Optional progress monitor</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment">     */</span>
<a name="l355"><span class="linenum"> 355</span></a>      public static function <a class="function" onClick="logFunction('get_moodle_backup_information')" href="../../../_functions/get_moodle_backup_information.html" onMouseOver="funcPopup(event,'get_moodle_backup_information')">get_moodle_backup_information</a>(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>,
<a name="l356"><span class="linenum"> 356</span></a>              \core\progress\base <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('progress')" href="../../../_variables/progress.html">$progress</a> = null) {
<a name="l357"><span class="linenum"> 357</span></a>  
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">        // Start tracking progress if required (for load_controller).</span>
<a name="l359"><span class="linenum"> 359</span></a>          if (<a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('progress')" href="../../../_variables/progress.html">$progress</a>) {
<a name="l360"><span class="linenum"> 360</span></a>              <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('progress')" href="../../../_variables/progress.html">$progress</a>-&gt;<a class="function" onClick="logFunction('start_progress')" href="../../../_functions/start_progress.html" onMouseOver="funcPopup(event,'start_progress')">start_progress</a>('get_moodle_backup_information', 2);
<a name="l361"><span class="linenum"> 361</span></a>          }
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>          <a class="var it16646" onMouseOver="hilite(16646)" onMouseOut="lolite()" onClick="logVariable('detailsinfo')" href="../../../_variables/detailsinfo.html">$detailsinfo</a> = array(); <span class="comment">// Information details</span>
<a name="l364"><span class="linenum"> 364</span></a>          <a class="var it16647" onMouseOver="hilite(16647)" onMouseOut="lolite()" onClick="logVariable('contentsinfo')" href="../../../_variables/contentsinfo.html">$contentsinfo</a>= array(); <span class="comment">// Information about backup contents</span>
<a name="l365"><span class="linenum"> 365</span></a>          <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>= array(); <span class="comment">// Information about backup settings</span>
<a name="l366"><span class="linenum"> 366</span></a>          <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a> = self::<a class="function" onClick="logFunction('load_controller')" href="../../../_functions/load_controller.html" onMouseOver="funcPopup(event,'load_controller')">load_controller</a>(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>); <span class="comment">// Load controller</span>
<a name="l367"><span class="linenum"> 367</span></a>  
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">        // Note that we have loaded controller.</span>
<a name="l369"><span class="linenum"> 369</span></a>          if (<a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('progress')" href="../../../_variables/progress.html">$progress</a>) {
<a name="l370"><span class="linenum"> 370</span></a>              <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('progress')" href="../../../_variables/progress.html">$progress</a>-&gt;<a class="function" onClick="logFunction('progress')" href="../../../_functions/progress.html" onMouseOver="funcPopup(event,'progress')">progress</a>(1);
<a name="l371"><span class="linenum"> 371</span></a>          }
<a name="l372"><span class="linenum"> 372</span></a>  
<a name="l373"><span class="linenum"> 373</span></a>  <span class="comment">        // Details info</span>
<a name="l374"><span class="linenum"> 374</span></a>          <a class="var it16646" onMouseOver="hilite(16646)" onMouseOut="lolite()" onClick="logVariable('detailsinfo')" href="../../../_variables/detailsinfo.html">$detailsinfo</a>['id'] = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_id')" href="../../../_functions/get_id.html" onMouseOver="funcPopup(event,'get_id')">get_id</a>();
<a name="l375"><span class="linenum"> 375</span></a>          <a class="var it16646" onMouseOver="hilite(16646)" onMouseOut="lolite()" onClick="logVariable('detailsinfo')" href="../../../_variables/detailsinfo.html">$detailsinfo</a>['backup_id'] = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_backupid')" href="../../../_functions/get_backupid.html" onMouseOver="funcPopup(event,'get_backupid')">get_backupid</a>();
<a name="l376"><span class="linenum"> 376</span></a>          <a class="var it16646" onMouseOver="hilite(16646)" onMouseOut="lolite()" onClick="logVariable('detailsinfo')" href="../../../_variables/detailsinfo.html">$detailsinfo</a>['type'] = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>();
<a name="l377"><span class="linenum"> 377</span></a>          <a class="var it16646" onMouseOver="hilite(16646)" onMouseOut="lolite()" onClick="logVariable('detailsinfo')" href="../../../_variables/detailsinfo.html">$detailsinfo</a>['format'] = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_format')" href="../../../_functions/get_format.html" onMouseOver="funcPopup(event,'get_format')">get_format</a>();
<a name="l378"><span class="linenum"> 378</span></a>          <a class="var it16646" onMouseOver="hilite(16646)" onMouseOut="lolite()" onClick="logVariable('detailsinfo')" href="../../../_variables/detailsinfo.html">$detailsinfo</a>['interactive'] = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_interactive')" href="../../../_functions/get_interactive.html" onMouseOver="funcPopup(event,'get_interactive')">get_interactive</a>();
<a name="l379"><span class="linenum"> 379</span></a>          <a class="var it16646" onMouseOver="hilite(16646)" onMouseOut="lolite()" onClick="logVariable('detailsinfo')" href="../../../_variables/detailsinfo.html">$detailsinfo</a>['mode'] = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_mode')" href="../../../_functions/get_mode.html" onMouseOver="funcPopup(event,'get_mode')">get_mode</a>();
<a name="l380"><span class="linenum"> 380</span></a>          <a class="var it16646" onMouseOver="hilite(16646)" onMouseOut="lolite()" onClick="logVariable('detailsinfo')" href="../../../_variables/detailsinfo.html">$detailsinfo</a>['execution'] = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_execution')" href="../../../_functions/get_execution.html" onMouseOver="funcPopup(event,'get_execution')">get_execution</a>();
<a name="l381"><span class="linenum"> 381</span></a>          <a class="var it16646" onMouseOver="hilite(16646)" onMouseOut="lolite()" onClick="logVariable('detailsinfo')" href="../../../_variables/detailsinfo.html">$detailsinfo</a>['executiontime'] = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_executiontime')" href="../../../_functions/get_executiontime.html" onMouseOver="funcPopup(event,'get_executiontime')">get_executiontime</a>();
<a name="l382"><span class="linenum"> 382</span></a>          <a class="var it16646" onMouseOver="hilite(16646)" onMouseOut="lolite()" onClick="logVariable('detailsinfo')" href="../../../_variables/detailsinfo.html">$detailsinfo</a>['userid'] = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_userid')" href="../../../_functions/get_userid.html" onMouseOver="funcPopup(event,'get_userid')">get_userid</a>();
<a name="l383"><span class="linenum"> 383</span></a>          <a class="var it16646" onMouseOver="hilite(16646)" onMouseOut="lolite()" onClick="logVariable('detailsinfo')" href="../../../_variables/detailsinfo.html">$detailsinfo</a>['courseid'] = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_courseid')" href="../../../_functions/get_courseid.html" onMouseOver="funcPopup(event,'get_courseid')">get_courseid</a>();
<a name="l384"><span class="linenum"> 384</span></a>  
<a name="l385"><span class="linenum"> 385</span></a>  
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">        // Init content placeholders</span>
<a name="l387"><span class="linenum"> 387</span></a>          <a class="var it16647" onMouseOver="hilite(16647)" onMouseOut="lolite()" onClick="logVariable('contentsinfo')" href="../../../_variables/contentsinfo.html">$contentsinfo</a>['activities'] = array();
<a name="l388"><span class="linenum"> 388</span></a>          <a class="var it16647" onMouseOver="hilite(16647)" onMouseOut="lolite()" onClick="logVariable('contentsinfo')" href="../../../_variables/contentsinfo.html">$contentsinfo</a>['sections']   = array();
<a name="l389"><span class="linenum"> 389</span></a>          <a class="var it16647" onMouseOver="hilite(16647)" onMouseOut="lolite()" onClick="logVariable('contentsinfo')" href="../../../_variables/contentsinfo.html">$contentsinfo</a>['course']     = array();
<a name="l390"><span class="linenum"> 390</span></a>  
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment">        // Get tasks and start nested progress.</span>
<a name="l392"><span class="linenum"> 392</span></a>          <a class="var it110" onMouseOver="hilite(110)" onMouseOut="lolite()" onClick="logVariable('tasks')" href="../../../_variables/tasks.html">$tasks</a> = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_plan')" href="../../../_functions/get_plan.html" onMouseOver="funcPopup(event,'get_plan')">get_plan</a>()-&gt;<a class="function" onClick="logFunction('get_tasks')" href="../../../_functions/get_tasks.html" onMouseOver="funcPopup(event,'get_tasks')">get_tasks</a>();
<a name="l393"><span class="linenum"> 393</span></a>          if (<a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('progress')" href="../../../_variables/progress.html">$progress</a>) {
<a name="l394"><span class="linenum"> 394</span></a>              <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('progress')" href="../../../_variables/progress.html">$progress</a>-&gt;<a class="function" onClick="logFunction('start_progress')" href="../../../_functions/start_progress.html" onMouseOver="funcPopup(event,'start_progress')">start_progress</a>('get_moodle_backup_information', <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it110" onMouseOver="hilite(110)" onMouseOut="lolite()" onClick="logVariable('tasks')" href="../../../_variables/tasks.html">$tasks</a>));
<a name="l395"><span class="linenum"> 395</span></a>              <a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('done')" href="../../../_variables/done.html">$done</a> = 1;
<a name="l396"><span class="linenum"> 396</span></a>          }
<a name="l397"><span class="linenum"> 397</span></a>  
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment">        // Contents info (extract information from tasks)</span>
<a name="l399"><span class="linenum"> 399</span></a>          foreach (<a class="var it110" onMouseOver="hilite(110)" onMouseOut="lolite()" onClick="logVariable('tasks')" href="../../../_variables/tasks.html">$tasks</a> as <a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>) {
<a name="l400"><span class="linenum"> 400</span></a>  
<a name="l401"><span class="linenum"> 401</span></a>              if (<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a> instanceof backup_activity_task) { // Activity task
<a name="l402"><span class="linenum"> 402</span></a>  
<a name="l403"><span class="linenum"> 403</span></a>                  if (<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_setting_value')" href="../../../_functions/get_setting_value.html" onMouseOver="funcPopup(event,'get_setting_value')">get_setting_value</a>('included')) { // Only return info about included activities
<a name="l404"><span class="linenum"> 404</span></a>                      <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>, <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../../_variables/settings.html">$settings</a>) = self::<a class="function" onClick="logFunction('get_activity_backup_information')" href="../../../_functions/get_activity_backup_information.html" onMouseOver="funcPopup(event,'get_activity_backup_information')">get_activity_backup_information</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>);
<a name="l405"><span class="linenum"> 405</span></a>                      <a class="var it16647" onMouseOver="hilite(16647)" onMouseOut="lolite()" onClick="logVariable('contentsinfo')" href="../../../_variables/contentsinfo.html">$contentsinfo</a>['activities'][] = <a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>;
<a name="l406"><span class="linenum"> 406</span></a>                      <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>, <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../../_variables/settings.html">$settings</a>);
<a name="l407"><span class="linenum"> 407</span></a>                  }
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>              } else if (<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a> instanceof backup_section_task) { // Section task
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>                  if (<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>-&gt;<a class="function" onClick="logFunction('get_setting_value')" href="../../../_functions/get_setting_value.html" onMouseOver="funcPopup(event,'get_setting_value')">get_setting_value</a>('included')) { // Only return info about included sections
<a name="l412"><span class="linenum"> 412</span></a>                      <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>, <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../../_variables/settings.html">$settings</a>) = self::<a class="function" onClick="logFunction('get_section_backup_information')" href="../../../_functions/get_section_backup_information.html" onMouseOver="funcPopup(event,'get_section_backup_information')">get_section_backup_information</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>);
<a name="l413"><span class="linenum"> 413</span></a>                      <a class="var it16647" onMouseOver="hilite(16647)" onMouseOut="lolite()" onClick="logVariable('contentsinfo')" href="../../../_variables/contentsinfo.html">$contentsinfo</a>['sections'][] = <a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>;
<a name="l414"><span class="linenum"> 414</span></a>                      <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>, <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../../_variables/settings.html">$settings</a>);
<a name="l415"><span class="linenum"> 415</span></a>                  }
<a name="l416"><span class="linenum"> 416</span></a>  
<a name="l417"><span class="linenum"> 417</span></a>              } else if (<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a> instanceof backup_course_task) { // Course task
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>                  <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>, <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../../_variables/settings.html">$settings</a>) = self::<a class="function" onClick="logFunction('get_course_backup_information')" href="../../../_functions/get_course_backup_information.html" onMouseOver="funcPopup(event,'get_course_backup_information')">get_course_backup_information</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>);
<a name="l420"><span class="linenum"> 420</span></a>                  <a class="var it16647" onMouseOver="hilite(16647)" onMouseOut="lolite()" onClick="logVariable('contentsinfo')" href="../../../_variables/contentsinfo.html">$contentsinfo</a>['course'][] = <a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>;
<a name="l421"><span class="linenum"> 421</span></a>                  <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>, <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../../_variables/settings.html">$settings</a>);
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>              } else if (<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a> instanceof backup_root_task) { // Root task
<a name="l424"><span class="linenum"> 424</span></a>  
<a name="l425"><span class="linenum"> 425</span></a>                  <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it16643" onMouseOver="hilite(16643)" onMouseOut="lolite()" onClick="logVariable('contentinfo')" href="../../../_variables/contentinfo.html">$contentinfo</a>, <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../../_variables/settings.html">$settings</a>) = self::<a class="function" onClick="logFunction('get_root_backup_information')" href="../../../_functions/get_root_backup_information.html" onMouseOver="funcPopup(event,'get_root_backup_information')">get_root_backup_information</a>(<a class="var it720" onMouseOver="hilite(720)" onMouseOut="lolite()" onClick="logVariable('task')" href="../../../_variables/task.html">$task</a>);
<a name="l426"><span class="linenum"> 426</span></a>                  <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>, <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../../_variables/settings.html">$settings</a>);
<a name="l427"><span class="linenum"> 427</span></a>              }
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>  <span class="comment">            // Report task handled.</span>
<a name="l430"><span class="linenum"> 430</span></a>              if (<a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('progress')" href="../../../_variables/progress.html">$progress</a>) {
<a name="l431"><span class="linenum"> 431</span></a>                  <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('progress')" href="../../../_variables/progress.html">$progress</a>-&gt;<a class="function" onClick="logFunction('progress')" href="../../../_functions/progress.html" onMouseOver="funcPopup(event,'progress')">progress</a>(<a class="var it552" onMouseOver="hilite(552)" onMouseOut="lolite()" onClick="logVariable('done')" href="../../../_variables/done.html">$done</a>++);
<a name="l432"><span class="linenum"> 432</span></a>              }
<a name="l433"><span class="linenum"> 433</span></a>          }
<a name="l434"><span class="linenum"> 434</span></a>  
<a name="l435"><span class="linenum"> 435</span></a>          <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('destroy')" href="../../../_functions/destroy.html" onMouseOver="funcPopup(event,'destroy')">destroy</a>(); <span class="comment">// Always need to destroy controller to handle circular references</span>
<a name="l436"><span class="linenum"> 436</span></a>  
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">        // Finish progress reporting.</span>
<a name="l438"><span class="linenum"> 438</span></a>          if (<a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('progress')" href="../../../_variables/progress.html">$progress</a>) {
<a name="l439"><span class="linenum"> 439</span></a>              <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('progress')" href="../../../_variables/progress.html">$progress</a>-&gt;<a class="function" onClick="logFunction('end_progress')" href="../../../_functions/end_progress.html" onMouseOver="funcPopup(event,'end_progress')">end_progress</a>();
<a name="l440"><span class="linenum"> 440</span></a>              <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('progress')" href="../../../_variables/progress.html">$progress</a>-&gt;<a class="function" onClick="logFunction('end_progress')" href="../../../_functions/end_progress.html" onMouseOver="funcPopup(event,'end_progress')">end_progress</a>();
<a name="l441"><span class="linenum"> 441</span></a>          }
<a name="l442"><span class="linenum"> 442</span></a>  
<a name="l443"><span class="linenum"> 443</span></a>          return array(array((object)<a class="var it16646" onMouseOver="hilite(16646)" onMouseOut="lolite()" onClick="logVariable('detailsinfo')" href="../../../_variables/detailsinfo.html">$detailsinfo</a>), <a class="var it16647" onMouseOver="hilite(16647)" onMouseOut="lolite()" onClick="logVariable('contentsinfo')" href="../../../_variables/contentsinfo.html">$contentsinfo</a>, <a class="var it16644" onMouseOver="hilite(16644)" onMouseOut="lolite()" onClick="logVariable('settingsinfo')" href="../../../_variables/settingsinfo.html">$settingsinfo</a>);
<a name="l444"><span class="linenum"> 444</span></a>      }
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>      <span class="comment">/**</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">     * Update CFG-&gt;backup_version and CFG-&gt;backup_release if change in</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">     * version is detected.</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">     */</span>
<a name="l450"><span class="linenum"> 450</span></a>      public static function <a class="function" onClick="logFunction('apply_version_and_release')" href="../../../_functions/apply_version_and_release.html" onMouseOver="funcPopup(event,'apply_version_and_release')">apply_version_and_release</a>() {
<a name="l451"><span class="linenum"> 451</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l452"><span class="linenum"> 452</span></a>  
<a name="l453"><span class="linenum"> 453</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('backup_version')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../_variables/backup_version.html">backup_version</a> &lt; backup::VERSION) {
<a name="l454"><span class="linenum"> 454</span></a>              <a class="function" onClick="logFunction('set_config')" href="../../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('backup_version', backup::VERSION);
<a name="l455"><span class="linenum"> 455</span></a>              <a class="function" onClick="logFunction('set_config')" href="../../../_functions/set_config.html" onMouseOver="funcPopup(event,'set_config')">set_config</a>('backup_release', backup::RELEASE);
<a name="l456"><span class="linenum"> 456</span></a>          }
<a name="l457"><span class="linenum"> 457</span></a>      }
<a name="l458"><span class="linenum"> 458</span></a>  
<a name="l459"><span class="linenum"> 459</span></a>      <span class="comment">/**</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">     * Given the backupid, detect if the backup includes &quot;mnet&quot; remote users or no</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">     */</span>
<a name="l462"><span class="linenum"> 462</span></a>      public static function <a class="function" onClick="logFunction('backup_includes_mnet_remote_users')" href="../../../_functions/backup_includes_mnet_remote_users.html" onMouseOver="funcPopup(event,'backup_includes_mnet_remote_users')">backup_includes_mnet_remote_users</a>(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>) {
<a name="l463"><span class="linenum"> 463</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l464"><span class="linenum"> 464</span></a>  
<a name="l465"><span class="linenum"> 465</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(*)
<a name="l466"><span class="linenum"> 466</span></a>                    FROM {backup_ids_temp} b
<a name="l467"><span class="linenum"> 467</span></a>                    JOIN {user} u ON u.id = b.itemid
<a name="l468"><span class="linenum"> 468</span></a>                   WHERE b.backupid = ?
<a name="l469"><span class="linenum"> 469</span></a>                     AND b.itemname = 'userfinal'
<a name="l470"><span class="linenum"> 470</span></a>                     AND u.mnethostid != ?&quot;;
<a name="l471"><span class="linenum"> 471</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>, array(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('mnet_localhost_id')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../_variables/mnet_localhost_id.html">mnet_localhost_id</a>));
<a name="l472"><span class="linenum"> 472</span></a>          return (int)(bool)<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a>;
<a name="l473"><span class="linenum"> 473</span></a>      }
<a name="l474"><span class="linenum"> 474</span></a>  
<a name="l475"><span class="linenum"> 475</span></a>      <span class="comment">/**</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     * Given the backupid, determine whether this backup should include</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     * files from the moodle file storage system.</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     *</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     * @param string $backupid The ID of the backup.</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">     * @return int Indicates whether files should be included in backups.</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">     */</span>
<a name="l482"><span class="linenum"> 482</span></a>      public static function <a class="function" onClick="logFunction('backup_includes_files')" href="../../../_functions/backup_includes_files.html" onMouseOver="funcPopup(event,'backup_includes_files')">backup_includes_files</a>(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>) {
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment">        // This function is called repeatedly in a backup with many files.</span>
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment">        // Loading the controller is a nontrivial operation (in a large test</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment">        // backup it took 0.3 seconds), so we do a temporary cache of it within</span>
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment">        // this request.</span>
<a name="l487"><span class="linenum"> 487</span></a>          if (self::<a class="var it16634" onMouseOver="hilite(16634)" onMouseOut="lolite()" onClick="logVariable('includesfilescachebackupid')" href="../../../_variables/includesfilescachebackupid.html">$includesfilescachebackupid</a> === <a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>) {
<a name="l488"><span class="linenum"> 488</span></a>              return self::<a class="var it16635" onMouseOver="hilite(16635)" onMouseOut="lolite()" onClick="logVariable('includesfilescache')" href="../../../_variables/includesfilescache.html">$includesfilescache</a>;
<a name="l489"><span class="linenum"> 489</span></a>          }
<a name="l490"><span class="linenum"> 490</span></a>  
<a name="l491"><span class="linenum"> 491</span></a>  <span class="comment">        // Load controller, get value, then destroy controller and return result.</span>
<a name="l492"><span class="linenum"> 492</span></a>          self::<a class="var it16634" onMouseOver="hilite(16634)" onMouseOut="lolite()" onClick="logVariable('includesfilescachebackupid')" href="../../../_variables/includesfilescachebackupid.html">$includesfilescachebackupid</a> = <a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>;
<a name="l493"><span class="linenum"> 493</span></a>          <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a> = self::<a class="function" onClick="logFunction('load_controller')" href="../../../_functions/load_controller.html" onMouseOver="funcPopup(event,'load_controller')">load_controller</a>(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>);
<a name="l494"><span class="linenum"> 494</span></a>          self::<a class="var it16635" onMouseOver="hilite(16635)" onMouseOut="lolite()" onClick="logVariable('includesfilescache')" href="../../../_variables/includesfilescache.html">$includesfilescache</a> = <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('get_include_files')" href="../../../_functions/get_include_files.html" onMouseOver="funcPopup(event,'get_include_files')">get_include_files</a>();
<a name="l495"><span class="linenum"> 495</span></a>          <a class="var it2075" onMouseOver="hilite(2075)" onMouseOut="lolite()" onClick="logVariable('bc')" href="../../../_variables/bc.html">$bc</a>-&gt;<a class="function" onClick="logFunction('destroy')" href="../../../_functions/destroy.html" onMouseOver="funcPopup(event,'destroy')">destroy</a>();
<a name="l496"><span class="linenum"> 496</span></a>          return self::<a class="var it16635" onMouseOver="hilite(16635)" onMouseOut="lolite()" onClick="logVariable('includesfilescache')" href="../../../_variables/includesfilescache.html">$includesfilescache</a>;
<a name="l497"><span class="linenum"> 497</span></a>      }
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>      <span class="comment">/**</span>
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment">     * Given the backupid, detect if the backup contains references to external contents</span>
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment">     *</span>
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment">     * @copyright 2012 Dongsheng Cai {@link http://dongsheng.org}</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">     * @return int</span>
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment">     */</span>
<a name="l505"><span class="linenum"> 505</span></a>      public static function <a class="function" onClick="logFunction('backup_includes_file_references')" href="../../../_functions/backup_includes_file_references.html" onMouseOver="funcPopup(event,'backup_includes_file_references')">backup_includes_file_references</a>(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>) {
<a name="l506"><span class="linenum"> 506</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l507"><span class="linenum"> 507</span></a>  
<a name="l508"><span class="linenum"> 508</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(r.repositoryid)
<a name="l509"><span class="linenum"> 509</span></a>                    FROM {files} f
<a name="l510"><span class="linenum"> 510</span></a>                    LEFT JOIN {files_reference} r
<a name="l511"><span class="linenum"> 511</span></a>                         ON r.id = f.referencefileid
<a name="l512"><span class="linenum"> 512</span></a>                    JOIN {backup_ids_temp} bi
<a name="l513"><span class="linenum"> 513</span></a>                         ON f.id = bi.itemid
<a name="l514"><span class="linenum"> 514</span></a>                   WHERE bi.backupid = ?
<a name="l515"><span class="linenum"> 515</span></a>                         AND bi.itemname = 'filefinal'&quot;;
<a name="l516"><span class="linenum"> 516</span></a>          <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>, array(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>));
<a name="l517"><span class="linenum"> 517</span></a>          return (int)(bool)<a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a>;
<a name="l518"><span class="linenum"> 518</span></a>      }
<a name="l519"><span class="linenum"> 519</span></a>  
<a name="l520"><span class="linenum"> 520</span></a>      <span class="comment">/**</span>
<a name="l521"><span class="linenum"> 521</span></a>  <span class="comment">     * Given the courseid, return some course related information we want to transport</span>
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">     *</span>
<a name="l523"><span class="linenum"> 523</span></a>  <span class="comment">     * @param int $course the id of the course this backup belongs to</span>
<a name="l524"><span class="linenum"> 524</span></a>  <span class="comment">     */</span>
<a name="l525"><span class="linenum"> 525</span></a>      public static function <a class="function" onClick="logFunction('backup_get_original_course_info')" href="../../../_functions/backup_get_original_course_info.html" onMouseOver="funcPopup(event,'backup_get_original_course_info')">backup_get_original_course_info</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>) {
<a name="l526"><span class="linenum"> 526</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l527"><span class="linenum"> 527</span></a>          return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>), 'fullname, shortname, startdate, format');
<a name="l528"><span class="linenum"> 528</span></a>      }
<a name="l529"><span class="linenum"> 529</span></a>  
<a name="l530"><span class="linenum"> 530</span></a>      <span class="comment">/**</span>
<a name="l531"><span class="linenum"> 531</span></a>  <span class="comment">     * Sets the default values for the settings in a backup operation</span>
<a name="l532"><span class="linenum"> 532</span></a>  <span class="comment">     *</span>
<a name="l533"><span class="linenum"> 533</span></a>  <span class="comment">     * Based on the mode of the backup it will delegate the process to</span>
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">     * other methods like {@link apply_general_config_defaults} ...</span>
<a name="l535"><span class="linenum"> 535</span></a>  <span class="comment">     * to get proper defaults loaded</span>
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">     *</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment">     * @param backup_controller $controller</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment">     */</span>
<a name="l539"><span class="linenum"> 539</span></a>      public static function <a class="function" onClick="logFunction('apply_config_defaults')" href="../../../_functions/apply_config_defaults.html" onMouseOver="funcPopup(event,'apply_config_defaults')">apply_config_defaults</a>(backup_controller <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>) {
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment">        // Based on the mode of the backup (general, automated, import, hub...)</span>
<a name="l541"><span class="linenum"> 541</span></a>  <span class="comment">        // decide the action to perform to get defaults loaded</span>
<a name="l542"><span class="linenum"> 542</span></a>          <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a> = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_mode')" href="../../../_functions/get_mode.html" onMouseOver="funcPopup(event,'get_mode')">get_mode</a>();
<a name="l543"><span class="linenum"> 543</span></a>  
<a name="l544"><span class="linenum"> 544</span></a>          switch (<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../../_variables/mode.html">$mode</a>) {
<a name="l545"><span class="linenum"> 545</span></a>              case backup::MODE_GENERAL:
<a name="l546"><span class="linenum"> 546</span></a>  <span class="comment">                // Load the general defaults</span>
<a name="l547"><span class="linenum"> 547</span></a>                  self::<a class="function" onClick="logFunction('apply_general_config_defaults')" href="../../../_functions/apply_general_config_defaults.html" onMouseOver="funcPopup(event,'apply_general_config_defaults')">apply_general_config_defaults</a>(<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>);
<a name="l548"><span class="linenum"> 548</span></a>                  break;
<a name="l549"><span class="linenum"> 549</span></a>              case backup::MODE_AUTOMATED:
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">                // Load the automated defaults.</span>
<a name="l551"><span class="linenum"> 551</span></a>                  self::<a class="function" onClick="logFunction('apply_auto_config_defaults')" href="../../../_functions/apply_auto_config_defaults.html" onMouseOver="funcPopup(event,'apply_auto_config_defaults')">apply_auto_config_defaults</a>(<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>);
<a name="l552"><span class="linenum"> 552</span></a>                  break;
<a name="l553"><span class="linenum"> 553</span></a>              default:
<a name="l554"><span class="linenum"> 554</span></a>  <span class="comment">                // Nothing to do for other modes (IMPORT/HUB...). Some day we</span>
<a name="l555"><span class="linenum"> 555</span></a>  <span class="comment">                // can define defaults (admin UI...) for them if we want to</span>
<a name="l556"><span class="linenum"> 556</span></a>          }
<a name="l557"><span class="linenum"> 557</span></a>      }
<a name="l558"><span class="linenum"> 558</span></a>  
<a name="l559"><span class="linenum"> 559</span></a>      <span class="comment">/**</span>
<a name="l560"><span class="linenum"> 560</span></a>  <span class="comment">     * Sets the controller settings default values from the automated backup config.</span>
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">     *</span>
<a name="l562"><span class="linenum"> 562</span></a>  <span class="comment">     * @param backup_controller $controller</span>
<a name="l563"><span class="linenum"> 563</span></a>  <span class="comment">     */</span>
<a name="l564"><span class="linenum"> 564</span></a>      private static function <a class="function" onClick="logFunction('apply_auto_config_defaults')" href="../../../_functions/apply_auto_config_defaults.html" onMouseOver="funcPopup(event,'apply_auto_config_defaults')">apply_auto_config_defaults</a>(backup_controller <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>) {
<a name="l565"><span class="linenum"> 565</span></a>          <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../../_variables/settings.html">$settings</a> = array(
<a name="l566"><span class="linenum"> 566</span></a>  <span class="comment">            // Config name                   =&gt; Setting name.</span>
<a name="l567"><span class="linenum"> 567</span></a>              'backup_auto_users'              =&gt; 'users',
<a name="l568"><span class="linenum"> 568</span></a>              'backup_auto_role_assignments'   =&gt; 'role_assignments',
<a name="l569"><span class="linenum"> 569</span></a>              'backup_auto_activities'         =&gt; 'activities',
<a name="l570"><span class="linenum"> 570</span></a>              'backup_auto_blocks'             =&gt; 'blocks',
<a name="l571"><span class="linenum"> 571</span></a>              'backup_auto_filters'            =&gt; 'filters',
<a name="l572"><span class="linenum"> 572</span></a>              'backup_auto_comments'           =&gt; 'comments',
<a name="l573"><span class="linenum"> 573</span></a>              'backup_auto_badges'             =&gt; 'badges',
<a name="l574"><span class="linenum"> 574</span></a>              'backup_auto_userscompletion'    =&gt; 'userscompletion',
<a name="l575"><span class="linenum"> 575</span></a>              'backup_auto_logs'               =&gt; 'logs',
<a name="l576"><span class="linenum"> 576</span></a>              'backup_auto_histories'          =&gt; 'grade_histories',
<a name="l577"><span class="linenum"> 577</span></a>              'backup_auto_questionbank'       =&gt; 'questionbank',
<a name="l578"><span class="linenum"> 578</span></a>              'backup_auto_groups'             =&gt; 'groups'
<a name="l579"><span class="linenum"> 579</span></a>          );
<a name="l580"><span class="linenum"> 580</span></a>          <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('plan')" href="../../../_variables/plan.html">$plan</a> = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_plan')" href="../../../_functions/get_plan.html" onMouseOver="funcPopup(event,'get_plan')">get_plan</a>();
<a name="l581"><span class="linenum"> 581</span></a>          foreach (<a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../../_variables/settings.html">$settings</a> as <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../_variables/config.html">$config</a> =&gt; <a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('settingname')" href="../../../_variables/settingname.html">$settingname</a>) {
<a name="l582"><span class="linenum"> 582</span></a>              <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('get_config')" href="../../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('backup', <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../_variables/config.html">$config</a>);
<a name="l583"><span class="linenum"> 583</span></a>              if (<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> === false) {
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">                // The setting is not set.</span>
<a name="l585"><span class="linenum"> 585</span></a>                  <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="phpfunction" onClick="logFunction('log')" href="../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Could not find a value for the config ' . <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../_variables/config.html">$config</a>, BACKUP::LOG_DEBUG);
<a name="l586"><span class="linenum"> 586</span></a>                  continue;
<a name="l587"><span class="linenum"> 587</span></a>              }
<a name="l588"><span class="linenum"> 588</span></a>              if (<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('plan')" href="../../../_variables/plan.html">$plan</a>-&gt;<a class="function" onClick="logFunction('setting_exists')" href="../../../_functions/setting_exists.html" onMouseOver="funcPopup(event,'setting_exists')">setting_exists</a>(<a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('settingname')" href="../../../_variables/settingname.html">$settingname</a>)) {
<a name="l589"><span class="linenum"> 589</span></a>                  <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a> = <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('plan')" href="../../../_variables/plan.html">$plan</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>(<a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('settingname')" href="../../../_variables/settingname.html">$settingname</a>);
<a name="l590"><span class="linenum"> 590</span></a>                  <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('set_value')" href="../../../_functions/set_value.html" onMouseOver="funcPopup(event,'set_value')">set_value</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>);
<a name="l591"><span class="linenum"> 591</span></a>              } else {
<a name="l592"><span class="linenum"> 592</span></a>                  <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="phpfunction" onClick="logFunction('log')" href="../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Unknown setting: ' . <a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('settingname')" href="../../../_variables/settingname.html">$settingname</a>, BACKUP::LOG_DEBUG);
<a name="l593"><span class="linenum"> 593</span></a>              }
<a name="l594"><span class="linenum"> 594</span></a>          }
<a name="l595"><span class="linenum"> 595</span></a>      }
<a name="l596"><span class="linenum"> 596</span></a>  
<a name="l597"><span class="linenum"> 597</span></a>      <span class="comment">/**</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment">     * Sets the controller settings default values from the backup config.</span>
<a name="l599"><span class="linenum"> 599</span></a>  <span class="comment">     *</span>
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment">     * @param backup_controller $controller</span>
<a name="l601"><span class="linenum"> 601</span></a>  <span class="comment">     */</span>
<a name="l602"><span class="linenum"> 602</span></a>      private static function <a class="function" onClick="logFunction('apply_general_config_defaults')" href="../../../_functions/apply_general_config_defaults.html" onMouseOver="funcPopup(event,'apply_general_config_defaults')">apply_general_config_defaults</a>(backup_controller <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>) {
<a name="l603"><span class="linenum"> 603</span></a>          <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../../_variables/settings.html">$settings</a> = array(
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">            // Config name                      =&gt; Setting name</span>
<a name="l605"><span class="linenum"> 605</span></a>              'backup_general_users'              =&gt; 'users',
<a name="l606"><span class="linenum"> 606</span></a>              'backup_general_anonymize'          =&gt; 'anonymize',
<a name="l607"><span class="linenum"> 607</span></a>              'backup_general_role_assignments'   =&gt; 'role_assignments',
<a name="l608"><span class="linenum"> 608</span></a>              'backup_general_activities'         =&gt; 'activities',
<a name="l609"><span class="linenum"> 609</span></a>              'backup_general_blocks'             =&gt; 'blocks',
<a name="l610"><span class="linenum"> 610</span></a>              'backup_general_filters'            =&gt; 'filters',
<a name="l611"><span class="linenum"> 611</span></a>              'backup_general_comments'           =&gt; 'comments',
<a name="l612"><span class="linenum"> 612</span></a>              'backup_general_badges'             =&gt; 'badges',
<a name="l613"><span class="linenum"> 613</span></a>              'backup_general_userscompletion'    =&gt; 'userscompletion',
<a name="l614"><span class="linenum"> 614</span></a>              'backup_general_logs'               =&gt; 'logs',
<a name="l615"><span class="linenum"> 615</span></a>              'backup_general_histories'          =&gt; 'grade_histories',
<a name="l616"><span class="linenum"> 616</span></a>              'backup_general_questionbank'       =&gt; 'questionbank',
<a name="l617"><span class="linenum"> 617</span></a>              'backup_general_groups'             =&gt; 'groups'
<a name="l618"><span class="linenum"> 618</span></a>          );
<a name="l619"><span class="linenum"> 619</span></a>          <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('plan')" href="../../../_variables/plan.html">$plan</a> = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_plan')" href="../../../_functions/get_plan.html" onMouseOver="funcPopup(event,'get_plan')">get_plan</a>();
<a name="l620"><span class="linenum"> 620</span></a>          foreach (<a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../../_variables/settings.html">$settings</a> as <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../_variables/config.html">$config</a>=&gt;<a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('settingname')" href="../../../_variables/settingname.html">$settingname</a>) {
<a name="l621"><span class="linenum"> 621</span></a>              <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('get_config')" href="../../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('backup', <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../_variables/config.html">$config</a>);
<a name="l622"><span class="linenum"> 622</span></a>              if (<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> === false) {
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">                // Ignore this because the config has not been set. get_config</span>
<a name="l624"><span class="linenum"> 624</span></a>  <span class="comment">                // returns false if a setting doesn't exist, '0' is returned when</span>
<a name="l625"><span class="linenum"> 625</span></a>  <span class="comment">                // the configuration is set to false.</span>
<a name="l626"><span class="linenum"> 626</span></a>                  <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="phpfunction" onClick="logFunction('log')" href="../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Could not find a value for the config ' . <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../_variables/config.html">$config</a>, BACKUP::LOG_DEBUG);
<a name="l627"><span class="linenum"> 627</span></a>                  continue;
<a name="l628"><span class="linenum"> 628</span></a>              }
<a name="l629"><span class="linenum"> 629</span></a>              <a class="var it982" onMouseOver="hilite(982)" onMouseOut="lolite()" onClick="logVariable('locked')" href="../../../_variables/locked.html">$locked</a> = (<a class="function" onClick="logFunction('get_config')" href="../../../_functions/get_config.html" onMouseOver="funcPopup(event,'get_config')">get_config</a>('backup', <a class="var it199" onMouseOver="hilite(199)" onMouseOut="lolite()" onClick="logVariable('config')" href="../../../_variables/config.html">$config</a>.'_locked') == true);
<a name="l630"><span class="linenum"> 630</span></a>              if (<a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('plan')" href="../../../_variables/plan.html">$plan</a>-&gt;<a class="function" onClick="logFunction('setting_exists')" href="../../../_functions/setting_exists.html" onMouseOver="funcPopup(event,'setting_exists')">setting_exists</a>(<a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('settingname')" href="../../../_variables/settingname.html">$settingname</a>)) {
<a name="l631"><span class="linenum"> 631</span></a>                  <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a> = <a class="var it164" onMouseOver="hilite(164)" onMouseOut="lolite()" onClick="logVariable('plan')" href="../../../_variables/plan.html">$plan</a>-&gt;<a class="function" onClick="logFunction('get_setting')" href="../../../_functions/get_setting.html" onMouseOver="funcPopup(event,'get_setting')">get_setting</a>(<a class="var it9397" onMouseOver="hilite(9397)" onMouseOut="lolite()" onClick="logVariable('settingname')" href="../../../_variables/settingname.html">$settingname</a>);
<a name="l632"><span class="linenum"> 632</span></a>                  if (<a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('get_value')" href="../../../_functions/get_value.html" onMouseOver="funcPopup(event,'get_value')">get_value</a>() != <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> || 1==1) {
<a name="l633"><span class="linenum"> 633</span></a>                      <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('set_value')" href="../../../_functions/set_value.html" onMouseOver="funcPopup(event,'set_value')">set_value</a>(<a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>);
<a name="l634"><span class="linenum"> 634</span></a>                      if (<a class="var it982" onMouseOver="hilite(982)" onMouseOut="lolite()" onClick="logVariable('locked')" href="../../../_variables/locked.html">$locked</a>) {
<a name="l635"><span class="linenum"> 635</span></a>                          <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>-&gt;<a class="function" onClick="logFunction('set_status')" href="../../../_functions/set_status.html" onMouseOver="funcPopup(event,'set_status')">set_status</a>(base_setting::LOCKED_BY_CONFIG);
<a name="l636"><span class="linenum"> 636</span></a>                      }
<a name="l637"><span class="linenum"> 637</span></a>                  }
<a name="l638"><span class="linenum"> 638</span></a>              } else {
<a name="l639"><span class="linenum"> 639</span></a>                  <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="phpfunction" onClick="logFunction('log')" href="../../../_functions/log.html" onMouseOver="phpfuncPopup(event,'log')">log</a>('Unknown setting: ' . <a class="var it719" onMouseOver="hilite(719)" onMouseOut="lolite()" onClick="logVariable('setting')" href="../../../_variables/setting.html">$setting</a>, BACKUP::LOG_DEBUG);
<a name="l640"><span class="linenum"> 640</span></a>              }
<a name="l641"><span class="linenum"> 641</span></a>          }
<a name="l642"><span class="linenum"> 642</span></a>      }
<a name="l643"><span class="linenum"> 643</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'set_config': ['set_config', 'Set a key in global configuration ', [['lib','moodlelib.php',1336],['lib','enrollib.php',1153],['lib/editor/tinymce/classes','plugin.php',84],['mod/assign','assignmentplugin.php',314],['lib/portfolio','plugin.php',515]], 1119],
'get_courseid': ['get_courseid', 'Id of the current course (for site feedbacks only) ', [['mod/feedback/classes','structure.php',80],['course/format','lib.php',222],['mod/quiz','attemptlib.php',175],['mod/quiz','attemptlib.php',717],['backup/util/plan','backup_plan.class.php',78],['comment','lib.php',1002],['mod/quiz/classes','structure.php',228],['question/classes/bank','view.php',217],['backup/util/plan','restore_plan.class.php',81],['backup/controller','backup_controller.class.php',267],['backup/util/plan','base_step.class.php',105],['backup/controller','restore_controller.class.php',269],['backup/util/plan','base_task.class.php',109]], 244],
'get_moduleid': ['get_moduleid', '', [['backup/moodle2','backup_block_task.class.php',88],['backup/moodle2','restore_activity_task.class.php',99],['backup/moodle2','backup_activity_task.class.php',75]], 16],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'set_value': ['set_value', 'Sets the value for the style ', [['lib','csslib.php',2253],['backup/util/settings','base_setting.class.php',161],['backup/moodle2','backup_custom_fields.php',41],['backup/moodle2','backup_custom_fields.php',66],['backup/moodle2','backup_custom_fields.php',90],['lib/bennu','iCalendar_properties.php',87],['lib/bennu','iCalendar_properties.php',429],['lib/bennu','iCalendar_properties.php',1369],['backup/util/ui','backup_ui_setting.class.php',549],['lib/behat/form_field','behat_form_checkbox.php',40],['lib/behat/form_field','behat_form_radio.php',65],['lib/behat/form_field','behat_form_availability.php',40],['lib/behat/form_field','behat_form_editor.php',43],['backup/util/structure','base_atom.class.php',79],['lib/behat/form_field','behat_form_filemanager.php',92],['backup/cc/cc_lib','cc_metadata_file.php',35],['lib/behat/form_field','behat_form_field.php',71],['lib/behat/form_field','behat_form_select.php',40],['backup/cc/cc_lib','cc_metadata_resource.php',37],['backup/util/structure','base_nested_element.class.php',197],['lib/behat/form_field','behat_form_autocomplete.php',40],['lib/behat/form_field','behat_form_text.php',40],['backup/util/structure/tests/fixtures','structure_fixtures.php',84],['backup/util/structure/tests/fixtures','structure_fixtures.php',93],['backup/util/structure/tests/fixtures','structure_fixtures.php',102]], 93],
'add_field': ['add_field', 'Add a field to select. ', [['mod/glossary/classes','entry_query_builder.php',99],['lib/xmldb','xmldb_table.php',766],['lib/ddl','database_manager.php',522]], 775],
'get_status': ['get_status', '', [['backup/util/settings','base_setting.class.php',157],['completion/criteria','completion_criteria_date.php',134],['lib/filebrowser','file_info.php',348],['lib/filebrowser','virtual_root_file.php',281],['lib/filebrowser','file_info_stored.php',321],['lib/filestorage','stored_file.php',777],['completion/criteria','completion_criteria.php',249],['completion','completion_criteria_completion.php',158],['grade/grading/form','lib.php',863],['mod/workshop/allocation','lib.php',128],['completion/criteria','completion_criteria_grade.php',162],['lib/classes/plugininfo','base.php',344],['backup/controller','backup_controller.class.php',287],['completion/criteria','completion_criteria_duration.php',180],['backup/controller','restore_controller.class.php',297]], 180],
'get_execution': ['get_execution', '', [['backup/controller','backup_controller.class.php',291],['backup/controller','restore_controller.class.php',301]], 3],
'get_value': ['get_value', 'Read value ', [['lib/simplepie/library/SimplePie/XML/Declaration','Parser.php',172],['lib/simplepie/library/SimplePie','Rating.php',113],['grade/report/singleview/classes/local/ui','unique_value.php',37],['lib','csslib.php',2292],['backup/util/settings','base_setting.class.php',149],['lib/bennu','iCalendar_properties.php',105],['lib/simplepie/library/SimplePie','Restriction.php',139],['backup/util/ui','backup_ui_setting.class.php',118],['lib/behat/form_field','behat_form_checkbox.php',78],['lib/behat/form_field','behat_form_radio.php',52],['grade/report/singleview/classes/local/ui','finalgrade.php',42],['backup/util/structure','base_atom.class.php',75],['lib/behat/form_field','behat_form_filemanager.php',57],['lib/behat/form_field','behat_form_field.php',85],['lib/behat/form_field','behat_form_select.php',98],['backup/util/structure','base_nested_element.class.php',193],['grade/report/singleview/classes/local/ui','feedback.php',41],['lib/behat/form_field','behat_form_text.php',50]], 168],
'load_controller': ['load_controller', 'Loads the restore controller if we are tracking one ', [['backup/util/ui','restore_ui.class.php',272],['backup/util/dbops','backup_controller_dbops.class.php',102],['backup/util/ui','base_ui.class.php',258],['backup/util/ui','backup_ui.class.php',141],['backup/controller','backup_controller.class.php',345],['backup/util/dbops','restore_controller_dbops.class.php',92],['backup/controller','restore_controller.class.php',423]], 19],
'get_sectionid': ['get_sectionid', '', [['backup/moodle2','backup_section_task.class.php',56],['backup/moodle2','restore_section_task.class.php',67],['backup/moodle2','backup_activity_task.class.php',82]], 6],
'get_id': ['get_id', 'Getter for $id. ', [['lib/classes/task','adhoc_task.php',51],['backup/converter','convertlib.php',100],['lib/filebrowser','virtual_root_file.php',290],['lib','adminlib.php',1719],['admin/tool/uploadcourse/classes','course.php',335],['lib/simplepie/library/SimplePie','Item.php',199],['lib/filestorage','stored_file.php',786],['cache/classes','definition.php',613],['grade/grading/form','lib.php',854],['question/engine','questionusage.php',120],['mod/lti/classes/local/ltiservice','service_base.php',76],['blocks/rss_client/classes/output','item.php',152],['backup/controller','backup_controller.class.php',263],['question/engine','questionattemptstep.php',136],['mod/lti/classes/local/ltiservice','resource_base.php',81]], 2250],
'apply_auto_config_defaults': ['apply_auto_config_defaults', 'Sets the controller settings default values from the automated backup config. ', [['backup/util/dbops','backup_controller_dbops.class.php',559]], 1],
'start_progress': ['start_progress', 'Marks the start of an operation that will display progress. ', [['lib/classes/progress','base.php',77]], 85],
'get_level': ['get_level', 'Get the competency level. ', [['competency/classes','competency.php',241],['backup/util/structure','base_optigroup.class.php',52],['backup/util/structure','base_final_element.class.php',168],['lib','environmentlib.php',1520],['backup/util/settings','backup_setting.class.php',55],['backup/util/loggers','base_logger.class.php',70],['backup/util/structure','backup_optigroup_element.class.php',101]], 66],
'get_include_files': ['get_include_files', 'Returns the current value of the include_files setting. This setting is intended to ensure that files are not included in generated backups. ', [['backup/controller','backup_controller.class.php',248]], 4],
'set_status': ['set_status', '', [['backup/util/settings','base_setting.class.php',201],['lib','badgeslib.php',315],['mod/workshop/allocation','lib.php',113],['backup/controller','backup_controller.class.php',178],['backup/controller','restore_controller.class.php',190]], 137],
'setting_exists': ['setting_exists', 'Wrapper over @get_setting() that returns if the requested setting exists or no ', [['backup/util/plan','base_plan.class.php',128],['backup/util/plan','base_step.class.php',91],['backup/util/plan','base_task.class.php',101]], 9],
'get_activity_backup_information': ['get_activity_backup_information', 'Given one activity task, return the activity information and related settings Used by get_moodle_backup_information() ', [['backup/util/dbops','backup_controller_dbops.class.php',220]], 1],
'get_type': ['get_type', 'Get the type of the feed ', [['lib/simplepie/library','SimplePie.php',1624],['lib/simplepie/library/SimplePie','Restriction.php',122],['backup/util/ui','backup_ui_setting.class.php',102],['backup/util/ui','base_ui.class.php',294],['mod/lesson','locallib.php',2394],['lib/simplepie/library/SimplePie','Enclosure.php',877],['lib/classes','chart_series.php',127],['grade/report/singleview/classes/local/ui','bulk_insert.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',79],['backup/util/plan','backup_plan.class.php',70],['availability/classes','condition.php',102],['mod/assign','assignmentplugin.php',153],['backup/controller','backup_controller.class.php',244],['lib/classes','chart_base.php',150],['mod/workshop','locallib.php',3936],['mod/lti/classes/local/ltiservice','resource_base.php',114],['lib/simplepie/library/SimplePie','Caption.php',193],['backup/controller','restore_controller.class.php',261]], 90],
'backup_includes_file_references': ['backup_includes_file_references', 'Given the backupid, detect if the backup contains references to external contents ', [['backup/util/dbops','backup_controller_dbops.class.php',499]], 2],
'backup_includes_files': ['backup_includes_files', 'Given the backupid, determine whether this backup should include files from the moodle file storage system. ', [['backup/util/dbops','backup_controller_dbops.class.php',475]], 5],
'apply_general_config_defaults': ['apply_general_config_defaults', 'Sets the controller settings default values from the backup config. ', [['backup/util/dbops','backup_controller_dbops.class.php',597]], 1],
'drop_backup_ids_temp_table': ['drop_backup_ids_temp_table', '', [['backup/util/dbops','backup_controller_dbops.class.php',158]], 5],
'get_setting': ['get_setting', '', [['mod/quiz/classes','admin_review_setting.php',135],['backup/moodle2','restore_activity_task.class.php',206],['lib/editor/tinymce','adminlib.php',41],['lib/editor/atto','adminlib.php',117],['backup/util/ui','base_ui.class.php',316],['lib','adminlib.php',2051],['lib','adminlib.php',2126],['lib','adminlib.php',2636],['lib','adminlib.php',2758],['lib','adminlib.php',2875],['lib','adminlib.php',2990],['lib','adminlib.php',3103],['lib','adminlib.php',3246],['lib','adminlib.php',3401],['lib','adminlib.php',3639],['lib','adminlib.php',3713],['lib','adminlib.php',3746],['lib','adminlib.php',3870],['lib','adminlib.php',3950],['lib','adminlib.php',3994],['lib','adminlib.php',4075],['lib','adminlib.php',4145],['lib','adminlib.php',4578],['lib','adminlib.php',5219],['lib','adminlib.php',5560],['lib','adminlib.php',6107],['lib','adminlib.php',6336],['lib','adminlib.php',6516],['lib','adminlib.php',6696],['lib','adminlib.php',6790],['lib','adminlib.php',6939],['lib','adminlib.php',7721],['lib','adminlib.php',8031],['lib','adminlib.php',8155],['lib','adminlib.php',8339],['lib','adminlib.php',8625],['lib','adminlib.php',8772],['lib','adminlib.php',8931],['lib','adminlib.php',9108],['lib','adminlib.php',9248],['lib','adminlib.php',9491],['lib','adminlib.php',9634],['backup/moodle2','backup_section_task.class.php',112],['backup/util/settings','setting_dependency.class.php',131],['backup/moodle2','restore_section_task.class.php',102],['admin/tool/log/classes','setting_managestores.php',38],['backup/util/plan','base_plan.class.php',111],['enrol/ldap','settingslib.php',102],['backup/cc/cc_lib','cc_asssesment.php',208],['backup/moodle2','backup_activity_task.class.php',227],['backup/util/plan','base_step.class.php',84],['backup/util/plan','base_task.class.php',81]], 76],
'save_controller': ['save_controller', 'Send one backup controller to DB ', [['backup/util/dbops','backup_controller_dbops.class.php',45],['backup/util/ui','base_ui.class.php',147],['backup/controller/tests','controller_test.php',177],['backup/controller','backup_controller.class.php',329],['backup/util/dbops','restore_controller_dbops.class.php',35],['backup/controller','restore_controller.class.php',407]], 18],
'add_key': ['add_key', 'This function will add one new key to the table with all its attributes defined ', [['lib/xmldb','xmldb_table.php',787],['lib/ddl','database_manager.php',739]], 207],
'get_section_backup_information': ['get_section_backup_information', 'Given one section task, return the section information and related settings Used by get_moodle_backup_information() ', [['backup/util/dbops','backup_controller_dbops.class.php',256]], 1],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'apply_config_defaults': ['apply_config_defaults', 'Sets the default values for the settings in a backup operation ', [['backup/util/dbops','backup_controller_dbops.class.php',530]], 1],
'get_root_backup_information': ['get_root_backup_information', 'Given one root task, return the course information and related settings Used by get_moodle_backup_information() ', [['backup/util/dbops','backup_controller_dbops.class.php',323]], 1],
'is_checksum_correct': ['is_checksum_correct', '', [['backup/util/settings','backup_setting.class.php',113],['backup/util/loggers','base_logger.class.php',107],['backup/util/interfaces','checksumable.class.php',44],['backup/util/plan','base_plan.class.php',142],['backup/controller','backup_controller.class.php',236],['backup/controller','restore_controller.class.php',249],['backup/util/plan','base_task.class.php',216]], 10],
'get_manager': ['get_manager', 'Returns the sql generator used for db manipulation. Used mostly in upgrade.php scripts. ', [['lib/dml','moodle_database.php',1080]], 229],
'get_tasks': ['get_tasks', 'Gets all backup tasks from the controller ', [['backup/util/ui','base_ui.class.php',183],['backup/util/plan','base_plan.class.php',78]], 21],
'get_backupid': ['get_backupid', '', [['backup/util/plan','backup_task.class.php',42],['backup/util/plan','backup_plan.class.php',66],['backup/util/ui','backup_ui.class.php',114],['backup/util/ui','backup_ui_stage.class.php',53],['backup/controller','backup_controller.class.php',240],['backup/util/plan','backup_step.class.php',42]], 68],
'get_moodle_backup_information': ['get_moodle_backup_information', 'Get details information for main moodle_backup.xml file, extracting it from the specified controller. ', [['backup/util/dbops','backup_controller_dbops.class.php',345]], 3],
'backup_get_original_course_info': ['backup_get_original_course_info', 'Given the courseid, return some course related information we want to transport ', [['backup/util/dbops','backup_controller_dbops.class.php',520]], 1],
'get_format': ['get_format', 'Returns the format name used by this course ', [['course/format','lib.php',213],['backup/util/ui','base_ui.class.php',287],['question/format/xml','format.php',1028],['backup/controller','backup_controller.class.php',271],['mod/workshop','locallib.php',4044],['backup/controller','restore_controller.class.php',273]], 47],
'end_progress': ['end_progress', 'Marks the end of an operation that will display progress. ', [['lib/classes/progress','base.php',129]], 73],
'get_config': ['get_config', 'Config get method. ', [['lib/classes/antivirus','scanner.php',54],['competency/classes','competency_rule.php',59],['question/engine','bank.php',109],['admin/tool/log/classes/helper','store.php',63],['lib','moodlelib.php',1409],['lib','enrollib.php',1142],['lib/editor/tinymce/classes','plugin.php',73],['competency/classes','competency_rule_points.php',43],['search/classes','base.php',169],['mod/assign','assignmentplugin.php',345],['lib/portfolio','plugin.php',546]], 934],
'apply_version_and_release': ['apply_version_and_release', 'Update CFG->backup_version and CFG->backup_release if change in version is detected. ', [['backup/util/dbops','backup_controller_dbops.class.php',446]], 2],
'backup_includes_mnet_remote_users': ['backup_includes_mnet_remote_users', 'Given the backupid, detect if the backup includes "mnet" remote users or no ', [['backup/util/dbops','backup_controller_dbops.class.php',459]], 1],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'create_backup_files_temp_table': ['create_backup_files_temp_table', '', [['backup/util/dbops','backup_controller_dbops.class.php',137]], 1],
'get_course_backup_information': ['get_course_backup_information', 'Given one course task, return the course information and related settings Used by get_moodle_backup_information() ', [['backup/util/dbops','backup_controller_dbops.class.php',290]], 1],
'progress': ['progress', 'Called during a file processing operation that reports progress. ', [['lib/filestorage','file_progress.php',35],['lib/filestorage/tests','tgz_packer_test.php',458],['lib/classes/progress','base.php',157],['backup/moodle2','backup_stepslib.php',1945],['lib/filestorage/tests','zip_packer_test.php',622],['backup/util/ui','restore_ui_stage.class.php',334]], 110],
'get_settings': ['get_settings', 'Get the default setting for file submission plugin ', [['mod/assign/submission/file','locallib.php',63],['mod/assign/feedback/comments','locallib.php',230],['mod/assign','assignmentplugin.php',90],['backup/util/plan','base_plan.class.php',107],['mod/assign/submission/onlinetext','locallib.php',61],['backup/util/plan','base_step.class.php',77],['backup/util/plan','base_task.class.php',66]], 30],
'create_backup_ids_temp_table': ['create_backup_ids_temp_table', '', [['backup/util/dbops','backup_controller_dbops.class.php',115]], 5],
'get_setting_value': ['get_setting_value', 'Returns the value of one (task/plan) setting ', [['backup/moodle2','backup_plugin.class.php',68],['backup/moodle2','restore_plugin.class.php',230],['backup/util/ui','base_ui.class.php',330],['backup/moodle2','restore_subplugin.class.php',169],['backup/moodle2','backup_subplugin.class.php',68],['backup/util/plan','base_step.class.php',98],['backup/util/plan','base_task.class.php',105]], 142],
'get_name': ['get_name', 'Return localised event name. ', [['lib/classes/event','competency_plan_unlinked.php',72],['admin/tool/langimport/classes/task','update_langpacks_task.php',35],['lib/simplepie/library/SimplePie','Author.php',106],['portfolio/download','lib.php',10],['backup/util/structure','restore_path_element.class.php',98],['lib/classes/message/inbound','private_files_handler.php',56],['lib/classes/event','grouping_group_assigned.php',48],['calendar/tests','calendartype_test_example.php',32],['lib/classes/event','enrol_instance_deleted.php',70],['report/log/classes/event','user_report_viewed.php',54],['lib/classes/task','blog_cron_task.php',31],['mod/quiz/classes/event','attempt_reviewed.php',53],['lib/classes/event','tag_unflagged.php',55],['lib/classes/task','send_new_user_passwords_task.php',31],['lib/classes/event','role_unassigned.php',53],['mod/assign/classes/event','grading_form_viewed.php',82],['question/classes/bank','edit_action_column.php',35],['admin/tool/log/store/standard/classes/task','cleanup_task.php',31],['mod/workshop/classes/event','submission_deleted.php',63],['mod/forum/classes/event','discussion_updated.php',65],['lib/classes/event','course_module_instance_list_viewed.php',75],['lib/classes/event','course_created.php',55],['lib/dml','pdo_moodle_database.php',113],['mod/assign/classes/event','extension_granted.php',77],['lib/classes/task','tag_cron_task.php',33],['enrol/imsenterprise/classes/task','cron_task.php',34],['lib/classes/event','course_deleted.php',56],['lib/classes/task','completion_daily_task.php',33],['mod/forum/classes/event','readtracking_enabled.php',64],['mod/wiki/classes/event','page_created.php',48],['lib/dml','oci_native_moodle_database.php',94],['lib/classes/event','competency_viewed.php',70],['mod/choice/classes/event','answer_updated.php',72],['lib/classes/event','search_indexed.php',47],['lib/classes/event','badge_criteria_updated.php',53],['question/classes/bank','question_type_column.php',26],['mod/wiki/classes/event','page_version_deleted.php',54],['lib/grade','grade_item.php',1384],['lib/classes/event','competency_user_competency_rated_in_plan.php',88],['lib/classes/event','webservice_token_sent.php',56],['mod/glossary/classes/event','entry_deleted.php',54],['admin/tool/messageinbound/classes/message/inbound','invalid_recipient_handler.php',60],['lib/classes/event','competency_template_viewed.php',63],['lib/classes/task','context_cleanup_task.php',32],['mod/assign/tests/fixtures','event_mod_assign_fixtures.php',62],['admin/tool/langimport/classes/event','langpack_removed.php',89],['mod/glossary/classes/event','category_deleted.php',46],['mod/forum/classes/message/inbound','reply_handler.php',51],['competency/classes','competency_rule.php',84],['mod/lti/classes/event','unknown_service_api_called.php',82],['lib/classes/event','badge_deleted.php',49],['mod/quiz/classes/event','user_override_updated.php',54],['lib/classes/event','message_contact_added.php',48],['lib/classes/event','cohort_member_added.php',49],['backup/util/ui','restore_ui.class.php',351],['lib/classes/event','blog_entry_updated.php',74],['mod/assign/classes/event','workflow_state_updated.php',88],['mod/forum/classes/event','assessable_uploaded.php',86],['mod/assign/classes/event','submission_created.php',57],['lib/classes/event','group_deleted.php',65],['lib/classes/event','role_allow_assign_updated.php',47],['mod/lesson/classes/event','highscore_added.php',59],['mod/forum/classes/event','discussion_pinned.php',55],['lib/classes/event','webservice_function_called.php',67],['lib/classes/event','competency_plan_reopened.php',75],['mod/lesson/classes/event','essay_attempt_viewed.php',48],['mod/wiki/classes/event','page_locks_deleted.php',54],['lib/classes/event','webservice_service_deleted.php',59],['mod/forum/classes/event','discussion_subscription_created.php',66],['admin/tool/log/store/database/tests/fixtures','event.php',31],['mod/workshop/classes/event','assessable_uploaded.php',93],['lib','csslib.php',2155],['lib','csslib.php',2283],['lib/classes/event','user_loggedout.php',54],['lib/classes/event','webservice_token_created.php',65],['lib/classes/event','tag_collection_updated.php',65],['competency/classes','competency_rule_all.php',84],['backup/util/settings','base_setting.class.php',145],['mod/data/classes/event','field_deleted.php',57],['mod/book/classes/event','chapter_created.php',79],['lib/classes/event','email_failed.php',56],['lib/classes/task','stats_cron_task.php',31],['mod/survey/classes/event','report_downloaded.php',55],['mod/workshop/classes/event','phase_switched.php',75],['lib/grade','grade_category.php',2300],['lib/grade','grade_scale.php',156],['lib/classes/event','course_reset_started.php',53],['mod/workshop/classes/event','assessment_evaluated.php',66],['lib/classes/event','blog_association_created.php',56],['backup/converter','convertlib.php',109],['report/outline/classes/event','activity_report_viewed.php',48],['lib/classes/task','legacy_plugin_cron_task.php',33],['lib/classes/event','competency_plan_updated.php',75],['mod/choice/classes/event','answer_submitted.php',72],['mod/lesson/classes/event','lesson_ended.php',49],['lib/classes/event','role_allow_switch_updated.php',47],['lib/classes/task','portfolio_cron_task.php',31],['lib/classes/event','competency_user_competency_rated_in_course.php',88],['question/classes/bank','question_text_row.php',35],['lib/classes/event','tag_created.php',75],['report/participation/classes/event','report_viewed.php',58],['lib/classes/event','role_capabilities_updated.php',51],['mod/survey/classes/event','response_submitted.php',53],['lib/classes/event','badge_archived.php',47],['mod/workshop/classes/event','assessment_reevaluated.php',76],['mod/assign/classes/event','submission_locked.php',78],['report/outline/classes/event','report_viewed.php',54],['lib/classes/event','user_deleted.php',57],['lib/classes/event','mnet_access_control_updated.php',57],['mod/lesson/classes/event','essay_assessed.php',78],['mod/book/tool/print/classes/event','book_printed.php',76],['lib/classes/event','grouping_deleted.php',72],['admin/tool/monitor/classes','rule.php',239],['lib/classes/event','course_viewed.php',75],['mod/forum/classes/event','user_report_viewed.php',65],['user/selector','lib.php',309],['mod/quiz/classes/event','attempt_summary_viewed.php',56],['lib/classes/event','webservice_service_user_added.php',59],['mod/forum/classes/event','discussion_unpinned.php',55],['lib/classes/event','grouping_group_unassigned.php',48],['lib/grade','grade_outcome.php',272],['mod/chat/classes/event','message_sent.php',59],['lib/classes/event','role_assigned.php',56],['mod/quiz/classes/question/bank','question_name_text_column.php',37],['question/classes/bank','modifier_name_column.php',27],['mod/glossary/classes/event','entry_viewed.php',48],['mod/data/classes/event','record_created.php',56],['lib/classes/event','course_category_deleted.php',59],['lib/dml','mariadb_native_moodle_database.php',41],['lib/classes/event','role_deleted.php',55],['lib/classes/task','question_cron_task.php',31],['portfolio/flickr','lib.php',41],['lib/classes/task','cache_cron_task.php',31],['mod/wiki/classes/event','page_version_viewed.php',54],['admin/tool/recyclebin/classes/event','category_bin_item_deleted.php',47],['admin/tool/log/store/standard/tests/fixtures','event.php',31],['mod/scorm/classes/event','status_submitted.php',46],['admin/tool/monitor/classes/event','rule_created.php',50],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',31],['question/classes/bank','checkbox_column.php',32],['lib/classes/event','competency_user_competency_plan_viewed.php',81],['mod/assign/feedback/offline','locallib.php',42],['admin/tool/messageinbound/classes/task','cleanup_task.php',38],['mod/workshop/classes/event','submission_updated.php',63],['lib/editor/atto/classes/task','autosave_cleanup_task.php',33],['mod/choice/classes/event','report_viewed.php',53],['mod/lesson/classes/event','group_override_deleted.php',54],['mod/wiki/classes/event','page_map_viewed.php',54],['admin/tool/log/store/legacy/tests/fixtures','event.php',31],['mod/lesson/classes/event','question_answered.php',54],['mod/choice/classes/event','report_downloaded.php',54],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',36],['backup/util/ui','backup_ui_setting.class.php',86],['lib/classes/event','competency_user_evidence_created.php',64],['lib/classes/event','course_module_completion_updated.php',54],['repository/coursefiles','lib.php',183],['lib/classes/event','note_updated.php',56],['lib/classes/event','note_created.php',56],['lib/classes/event','competency_framework_created.php',63],['lib/classes/event','course_resources_list_viewed.php',60],['lib/classes/event','tag_updated.php',58],['mod/forum/classes/event','subscribers_viewed.php',65],['mod/book/tool/exportimscp/classes/event','book_exported.php',76],['mod/quiz/classes/question/bank','add_action_column.php',45],['lib/classes/task','completion_regular_task.php',33],['lib/classes/event','user_enrolment_deleted.php',54],['grade/report/grader/classes/event','grade_report_viewed.php',39],['lib','enrollib.php',1076],['admin/tool/recyclebin/classes/event','course_bin_item_restored.php',47],['lib/classes/event','webservice_service_updated.php',59],['lib/editor/tinymce/classes','plugin.php',101],['mod/lesson/classes/event','group_override_created.php',55],['mod/scorm/classes/event','attempt_deleted.php',62],['lib/classes/event','competency_user_competency_review_request_cancelled.php',72],['lib/classes/event','webservice_service_created.php',65],['lib/classes/task','events_cron_task.php',31],['mod/wiki/classes/event','page_version_restored.php',54],['mod/forum/classes/event','discussion_deleted.php',66],['lib/classes/event','competency_framework_updated.php',73],['mod/lesson/classes/event','lesson_restarted.php',48],['mod/wiki/classes/event','page_updated.php',54],['mod/assign/classes/event','marker_updated.php',89],['lib','modinfolib.php',1270],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',38],['lib/classes/event','course_module_updated.php',57],['repository','lib.php',1834],['auth/cas/classes/task','sync_task.php',34],['lib/classes/event','competency_template_deleted.php',73],['mod/assign/classes/event','submission_confirmation_form_viewed.php',79],['lib/bennu','iCalendar_components.php',37],['report/questioninstances/classes/event','report_viewed.php',55],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',36],['lib/classes/event','message_contact_blocked.php',48],['lib/classes/event','competency_template_updated.php',75],['question/behaviour','behaviourbase.php',83],['grade/report/history/classes/event','grade_report_viewed.php',39],['lib/classes/event','badge_disabled.php',47],['mod/assign/classes/event','grading_table_viewed.php',79],['lib/classes/event','badge_enabled.php',47],['mod/lti','OAuth.php',122],['mod/lti','OAuth.php',149],['mod/lti','OAuth.php',173],['calendar/type/gregorian/classes','structure.php',29],['mod/quiz/classes/event','edit_page_viewed.php',53],['lib/simplepie/library/SimplePie','Credit.php',139],['mod/scorm/classes/event','tracks_viewed.php',64],['mod/wiki/classes/event','page_diff_viewed.php',55],['message/tests/fixtures','inbound_fixtures.php',41],['lib/classes/event','grouping_created.php',65],['lib/classes/event','calendar_event_deleted.php',58],['enrol/flatfile/classes/task','flatfile_sync_task.php',37],['lib/classes/event','group_updated.php',65],['lib/classes/task','registration_cron_task.php',31],['mod/book/classes/event','chapter_updated.php',79],['lib/classes/event','grade_deleted.php',94],['admin/tool/recyclebin/classes/event','course_bin_item_created.php',47],['lib/classes/event','user_loggedin.php',64],['lib/classes/task','check_for_updates_task.php',31],['grade/report/singleview/classes/local/ui','grade_attribute_format.php',56],['mod/assign/submission/file','locallib.php',44],['mod/forum/classes/task','cron_task.php',30],['mod/forum/classes/event','subscription_created.php',65],['lib/classes/event','tag_collection_created.php',65],['grade/report/overview/classes/event','grade_report_viewed.php',48],['mod/assign/classes/event','batch_set_marker_allocation_viewed.php',79],['mod/quiz/classes/event','group_override_updated.php',54],['lib/classes/event','competency_plan_created.php',63],['mod/glossary/classes/event','entry_disapproved.php',46],['lib/classes/task','send_failed_login_notifications_task.php',34],['enrol/lti/classes/task','sync_grades.php',36],['lib/classes/event','message_viewed.php',54],['portfolio/boxnet','lib.php',14],['lib/classes/event','comment_created.php',58],['question/classes/bank','preview_action_column.php',26],['lib/classes/event','course_content_deleted.php',54],['lib/dml','pgsql_native_moodle_database.php',87],['mod/feedback/classes/event','response_deleted.php',83],['lib/classes/event','competency_evidence_created.php',98],['lib/classes/event','comment_deleted.php',58],['lib/classes/event','competency_user_competency_review_requested.php',72],['mod/quiz/classes/event','attempt_abandoned.php',63],['mod/scorm/classes/event','user_report_viewed.php',62],['lib/dml','mssql_native_moodle_database.php',88],['mod/quiz/classes/event','attempt_becameoverdue.php',66],['mod/quiz/classes/event','group_override_created.php',55],['lib/dml','mysqli_native_moodle_database.php',352],['backup/util/ui','backup_ui.class.php',194],['mod/book/tool/print/classes/event','chapter_printed.php',79],['mod/data/classes/event','record_deleted.php',56],['competency/classes','competency_rule_points.php',185],['lib/classes/event','competency_user_competency_viewed.php',81],['lib/classes/event','dashboard_viewed.php',59],['mod/lesson/classes/event','question_viewed.php',54],['lib/classes/event','user_profile_viewed.php',56],['lib','medialib.php',345],['admin/tool/monitor/classes/task','clean_events.php',32],['mod/lesson/classes/event','user_override_deleted.php',53],['lib/classes/event','cohort_member_removed.php',50],['mod/lesson/classes/event','lesson_started.php',48],['mod/lesson/classes/event','page_updated.php',73],['mod/workshop/classes/event','submission_viewed.php',63],['question/classes/bank','question_name_column.php',28],['lib/classes/event','competency_deleted.php',87],['admin/tool/monitor/classes','subscription.php',132],['lib/classes/task','grade_cron_task.php',31],['mod/glossary/classes/event','entry_created.php',52],['lib/classes/task','file_temp_cleanup_task.php',31],['lib/classes/event','dashboard_reset.php',60],['backup/util/structure','base_atom.class.php',71],['portfolio/googledocs','lib.php',54],['mod/assign/feedback/comments','locallib.php',36],['mod/wiki/classes/event','page_history_viewed.php',48],['lib/classes/event','competency_plan_review_request_cancelled.php',75],['lib/classes/event','competency_plan_deleted.php',73],['mod/quiz/classes/event','attempt_viewed.php',54],['mod/data/classes/event','field_updated.php',57],['lib/classes/event','grouping_updated.php',65],['cache/classes','definition.php',621],['lib/classes/task','plagiarism_cron_task.php',31],['backup/converter/moodle1','lib.php',1033],['lib/classes/event','question_category_created.php',48],['grade/report/user/classes/event','grade_report_viewed.php',48],['lib/classes/event','user_login_failed.php',56],['mod/scorm/classes/event','report_viewed.php',63],['mod/chat/classes/event','sessions_viewed.php',65],['admin/tool/recyclebin/classes/event','course_bin_item_deleted.php',47],['mod/quiz/classes/event','user_override_deleted.php',53],['portfolio/mahara','lib.php',61],['mod/quiz/classes/event','attempt_submitted.php',63],['grade/report/outcomes/classes/event','grade_report_viewed.php',39],['mod/lesson/classes/event','group_override_updated.php',54],['mod/workshop/classes/event','submission_created.php',63],['mod/assign/classes/event','submission_updated.php',57],['mod/assign/submission/onlinetext/classes/event','assessable_uploaded.php',83],['lib/classes/event','competency_updated.php',70],['lib/classes/event','note_deleted.php',56],['mod/lesson/classes/event','page_moved.php',56],['lib/classes/event','course_completed.php',73],['lib/classes/event','tag_added.php',58],['lib/classes/event','competency_created.php',70],['mod/lesson/classes/event','highscores_viewed.php',51],['lib/classes/event','message_contact_unblocked.php',48],['lib/classes/event','user_enrolment_created.php',53],['lib/classes/task','search_index_task.php',35],['lib/classes/event','course_module_created.php',86],['lib/classes/event','webservice_service_user_removed.php',59],['report/log/classes/event','report_viewed.php',58],['mod/assign/submission/file/classes/event','assessable_uploaded.php',85],['lib/classes/event','group_member_added.php',78],['mod/forum/classes/event','discussion_viewed.php',60],['mod/assign/classes/event','submission_viewed.php',76],['mod/lti/classes/local/ltiservice','service_base.php',87],['enrol/lti/classes/task','sync_members.php',46],['mod/workshop/classes/event','submission_reassessed.php',77],['lib/classes/task','session_cleanup_task.php',31],['lib/tests','messageinbound_test.php',166],['lib/classes/task','backup_cleanup_task.php',31],['mod/workshop/classes/event','assessment_evaluations_reset.php',75],['mod/scorm/classes/event','scoreraw_submitted.php',46],['mod/assign/classes/event','statement_accepted.php',77],['mod/assign/classes/event','feedback_viewed.php',76],['lib/classes/task','delete_unconfirmed_users_task.php',31],['mod/forum/classes/event','discussion_moved.php',66],['lib/classes/event','competency_user_evidence_deleted.php',64],['mod/assign/classes/event','batch_set_workflow_state_viewed.php',79],['mod/lesson/classes/event','lesson_resumed.php',48],['lib/classes/task','badges_cron_task.php',31],['lib/classes/event','comments_viewed.php',51],['mod/data/classes/event','template_viewed.php',55],['mod/wiki/classes/event','page_deleted.php',54],['mod/quiz/classes/event','report_viewed.php',56],['mod/scorm/classes/event','sco_launched.php',64],['mod/glossary/classes/event','entry_updated.php',52],['mod/lesson/classes/event','user_override_created.php',53],['mod/glossary/classes/event','category_updated.php',46],['lib/classes/event','course_updated.php',58],['grade/report/singleview/classes/event','grade_report_viewed.php',39],['mod/feedback/classes/event','response_submitted.php',83],['lib/classes/event','blog_entry_deleted.php',53],['mod/book/classes/event','chapter_deleted.php',79],['report/completion/classes/event','report_viewed.php',49],['lib/classes/event','recent_activity_viewed.php',49],['mod/quiz/classes/event','question_manually_graded.php',55],['mod/assign/classes/event','submission_status_updated.php',79],['lib/classes/event','user_enrolment_updated.php',53],['lib/classes/event','tag_deleted.php',55],['report/completion/classes/event','user_report_viewed.php',49],['report/stats/classes/event','report_viewed.php',56],['lib/classes/event','calendar_event_created.php',58],['mod/assign/classes/event','submission_duplicated.php',77],['lib/classes/event','competency_framework_deleted.php',73],['lib/classes/event','course_section_updated.php',56],['lib/classes/event','message_sent.php',82],['lib/classes/event','calendar_subscription_deleted.php',56],['lib/classes/event','course_category_updated.php',51],['lib/classes/event','user_password_updated.php',70],['enrol/lti/ims-blti','OAuth.php',65],['enrol/lti/ims-blti','OAuth.php',92],['enrol/lti/ims-blti','OAuth.php',116],['mod/forum/classes/event','subscription_deleted.php',65],['mod/assign/classes/event','reveal_identities_confirmation_page_viewed.php',79],['lib/classes/event','user_loggedinas.php',57],['lib/classes/event','competency_template_created.php',63],['lib/classes/event','user_created.php',48],['admin/tool/recyclebin/classes/event','category_bin_item_restored.php',47],['report/loglive/classes/event','report_viewed.php',48],['admin/tool/monitor/classes/event','subscription_created.php',50],['mod/book/classes/event','chapter_viewed.php',79],['lib/classes/event','badge_awarded.php',54],['lib/classes/event','calendar_subscription_created.php',57],['lib/classes/event','enrol_instance_created.php',69],['lib/classes/event','user_list_viewed.php',56],['lib/classes/task','calendar_cron_task.php',31],['mod/forum/classes/event','post_deleted.php',67],['mod/quiz/classes/event','group_override_deleted.php',54],['lib/classes/event','badge_created.php',47],['backup/util/plan','base_plan.class.php',50],['lib/classes/event','base.php',292],['lib/classes/event','competency_framework_viewed.php',69],['lib/classes/event','tag_collection_deleted.php',65],['lib/classes/event','group_member_removed.php',69],['lib/classes/event','grade_report_viewed.php',54],['lib/classes/event','calendar_event_updated.php',58],['mod/assign/submission/onlinetext','locallib.php',40],['lib/classes/event','user_updated.php',48],['mod/lesson/classes/event','page_created.php',54],['backup/util/ui','base_ui_stage.class.php',110],['mod/assign/classes/event','submission_form_viewed.php',82],['auth/ldap/classes/task','sync_task.php',34],['lib/classes/event','course_completion_updated.php',47],['lib/classes/event','competency_plan_review_started.php',75],['lib/classes/event','course_user_report_viewed.php',66],['mod/folder/classes/event','all_files_downloaded.php',60],['mod/workshop/classes/event','assessments_reset.php',74],['lib/tests/fixtures','task_fixtures.php',35],['lib/tests/fixtures','task_fixtures.php',44],['lib/tests/fixtures','task_fixtures.php',53],['mod/data/classes/event','template_updated.php',56],['mod/assign/classes/event','identities_revealed.php',75],['question/classes/bank','copy_action_column.php',35],['admin/tool/log/store/legacy/classes/event','legacy_logged.php',35],['lib/classes/event','notes_viewed.php',49],['admin/tool/recyclebin/classes/event','category_bin_item_created.php',47],['lib/classes/event','competency_plan_viewed.php',63],['mod/data/classes/event','record_updated.php',56],['mod/assign/feedback/file','locallib.php',45],['lib/classes/event','competency_plan_unapproved.php',75],['mod/lesson/classes/event','content_page_viewed.php',48],['mod/assign/feedback/editpdf','locallib.php',43],['lib/dml','sqlsrv_native_moodle_database.php',108],['admin/tool/monitor/classes/event','subscription_deleted.php',50],['mod/assign/classes/event','assessable_submitted.php',109],['mod/quiz/classes/event','attempt_started.php',62],['lib/classes/task','create_contexts_task.php',31],['lib/classes/task','file_trash_cleanup_task.php',31],['lib/classes/event','competency_user_competency_rated.php',82],['mod/forum/classes/event','post_updated.php',67],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',37],['lib/classes/event','course_module_deleted.php',56],['mod/assign/submission/comments','locallib.php',39],['lib/classes/event','competency_plan_review_requested.php',75],['lib/classes/event','user_graded.php',96],['lib/classes/event','webservice_login_failed.php',71],['mod/forum/classes/event','post_created.php',67],['lib/classes/task','complete_plans_task.php',43],['mod/assign/classes/event','submission_status_viewed.php',81],['lib/classes/event','enrol_instance_updated.php',70],['lib/classes/task','messaging_cleanup_task.php',31],['portfolio/picasa','lib.php',33],['admin/tool/capability/classes/event','report_viewed.php',47],['grade/report/singleview/classes/local/ui','unique_name.php',38],['mod/data/classes/event','field_created.php',58],['mod/folder/classes/event','folder_updated.php',48],['lib/classes/event','badge_updated.php',47],['lib/tests/fixtures','event_fixtures.php',34],['lib/classes/task','cache_cleanup_task.php',31],['mod/survey/classes/event','report_viewed.php',55],['mod/quiz/classes/event','attempt_deleted.php',53],['mod/glossary/classes/event','entry_approved.php',46],['mod/wiki/classes/event','page_viewed.php',57],['lib/classes/log','reader.php',30],['lib/classes/task','password_reset_cleanup_task.php',31],['mod/forum/classes/event','readtracking_disabled.php',64],['admin/tool/langimport/classes/event','langpack_imported.php',80],['lib/classes/event','competency_plan_review_stopped.php',75],['admin/tool/langimport/classes/event','langpack_updated.php',80],['lib/classes/event','unknown_logged.php',43],['lib/classes/event','competency_user_competency_viewed_in_plan.php',85],['lib/classes/event','competency_user_competency_viewed_in_course.php',84],['lib/classes/task','search_optimize_task.php',38],['mod/glossary/classes/event','category_created.php',46],['lib/portfolio','plugin.php',120],['report/stats/classes/event','user_report_viewed.php',48],['lib/classes/event','dashboards_reset.php',59],['lib/classes/event','calendar_subscription_updated.php',57],['lib/classes/event','cohort_updated.php',49],['admin/tool/monitor/classes/event','rule_updated.php',50],['mod/lesson/classes/event','page_deleted.php',54],['lib/classes/event','course_section_deleted.php',57],['lib/classes/task','delete_incomplete_users_task.php',31],['lib/classes/task','automated_backup_task.php',31],['admin/tool/monitor/classes/event','subscription_criteria_met.php',55],['lib/classes/event','mnet_access_control_created.php',57],['admin/tool/messageinbound/classes/task','pickup_task.php',38],['mod/forum/classes/event','discussion_created.php',65],['question/classes/bank','creator_name_column.php',28],['lib/classes/event','blog_entries_viewed.php',62],['lib/classes/task','sync_plans_from_template_cohorts_task.php',41],['mod/quiz/classes/event','attempt_preview_started.php',54],['lib/classes/event','content_viewed.php',80],['lib/classes/event','competency_user_evidence_updated.php',64],['lib/dml/tests','dml_test.php',5530],['mod/assign/classes/event','submission_graded.php',78],['mod/assign/classes/event','all_submissions_downloaded.php',75],['lib/classes/event','course_restored.php',58],['lib/classes/event','group_created.php',65],['lib/classes/event','badge_criteria_deleted.php',52],['lib/classes/event','tag_flagged.php',55],['lib/classes/event','competency_plan_completed.php',75],['mod/lesson/classes/event','user_override_updated.php',54],['lib/classes/event','role_allow_override_updated.php',47],['mod/forum/classes/event','discussion_subscription_deleted.php',66],['lib/classes/event','cohort_deleted.php',49],['lib/classes/event','badge_criteria_created.php',52],['admin/tool/log/classes/helper','reader.php',41],['admin/tool/monitor/classes/task','check_subscriptions.php',50],['lib/classes/event','blog_entry_created.php',76],['mod/scorm/classes/event','interactions_viewed.php',63],['mod/workshop/classes/event','submission_assessed.php',76],['lib/classes/event','badge_duplicated.php',47],['backup/util/plan','base_step.class.php',49],['lib/classes/event','course_category_created.php',48],['lib/classes/event','cohort_created.php',49],['lib/classes/event','tag_removed.php',58],['lib/classes/event','competency_plan_approved.php',75],['mod/choice/classes/event','answer_deleted.php',56],['backup/util/ui','restore_ui_stage.class.php',75],['lib/classes/event','competency_user_competency_review_started.php',72],['lib/classes/event','course_reset_ended.php',53],['mod/quiz/classes/event','user_override_created.php',53],['mod/forum/classes/event','course_searched.php',66],['lib/classes/event','message_contact_removed.php',48],['admin/tool/monitor/classes/event','rule_deleted.php',50],['lib/classes/event','message_deleted.php',91],['mod/assign/classes/event','submission_unlocked.php',78],['lib/classes/event','competency_user_competency_review_stopped.php',72],['lib/classes/event','course_module_viewed.php',62],['backup/util/plan','base_task.class.php',58],['question/classes/bank','delete_action_column.php',36]], 469],
'drop_table': ['drop_table', 'This function will drop the table passed as argument and all the associated objects (keys, indexes, constraints, sequences, triggers) will be dropped too. ', [['lib/ddl','database_manager.php',315]], 60],
'decode_backup_temp_info': ['decode_backup_temp_info', 'Decode the info field from backup_ids_temp or backup_files_temp. ', [['backup/util/dbops','backup_controller_dbops.class.php',169]], 15],
'get_userid': ['get_userid', 'Returns user ID ', [['lib/filebrowser','virtual_root_file.php',236],['mod/quiz','attemptlib.php',804],['lib/filestorage','stored_file.php',708],['mod/data','lib.php',2585],['backup/util/plan','restore_task.class.php',54],['backup/util/plan','restore_plan.class.php',115],['backup/controller','backup_controller.class.php',283],['backup/controller','restore_controller.class.php',285]], 220],
'get_courseid_from_type_id': ['get_courseid_from_type_id', 'Given one type and id from controller, return the corresponding courseid ', [['backup/util/dbops','backup_controller_dbops.class.php',199]], 1],
'get_operation': ['get_operation', '', [['backup/controller','backup_controller.class.php',259],['backup/controller','restore_controller.class.php',265]], 4],
'get_interactive': ['get_interactive', '', [['backup/controller','backup_controller.class.php',275],['backup/controller','restore_controller.class.php',277]], 3],
'destroy': ['destroy', 'Destroys a variable in the context. ', [['lib/htmlpurifier/HTMLPurifier','Context.php',57],['backup/util/settings','base_setting.class.php',125],['backup/converter','convertlib.php',255],['lib/adodb','adodb-xmlschema.inc.php',156],['lib/adodb','adodb-xmlschema.inc.php',2190],['backup/util/ui','backup_ui_setting.class.php',78],['backup/util/ui','base_ui.class.php',97],['backup/util/structure','base_final_element.class.php',53],['backup/util/plan','backup_plan.class.php',51],['backup/util/settings','setting_dependency.class.php',81],['backup/util/loggers','base_logger.class.php',74],['lib/adodb','adodb-xmlschema03.inc.php',174],['lib/adodb','adodb-xmlschema03.inc.php',2372],['backup/util/plan','base_plan.class.php',192],['backup/util/plan','restore_plan.class.php',62],['backup/controller','backup_controller.class.php',146],['backup/util/structure','base_nested_element.class.php',62],['repository/flickr_public','image.php',65],['backup/util/plan','base_step.class.php',60],['backup/util/ui','restore_ui_stage.class.php',208],['backup/controller','restore_controller.class.php',158],['backup/util/plan','base_task.class.php',199]], 504],
'add_index': ['add_index', 'This function will add one new index to the table with all its attributes defined ', [['lib/xmldb','xmldb_table.php',802],['lib/ddl','database_manager.php',802]], 92],
'table_exists': ['table_exists', 'Given one xmldb_table, checks if it exists in DB (true/false). ', [['lib/ddl','sql_generator.php',215],['lib/ddl','database_manager.php',90]], 131],
'count_records_sql': ['count_records_sql', 'Get the result of a SQL SELECT COUNT(...) query. ', [['lib/dml','moodle_database.php',1796]], 155],
'get_mode': ['get_mode', 'Current feedback mode, see constants on the top of this class ', [['mod/feedback/classes','complete_form.php',226],['backup/util/plan','backup_plan.class.php',74],['mod/assignment/backup/moodle2','restore_assignment_activity_task.class.php',113],['cache/classes','definition.php',634],['backup/util/plan','restore_plan.class.php',85],['backup/controller','backup_controller.class.php',279],['backup/controller','restore_controller.class.php',281]], 36],
'get_executiontime': ['get_executiontime', '', [['backup/controller','backup_controller.class.php',295],['backup/controller','restore_controller.class.php',305]], 3],
'get_plan': ['get_plan', '', [['backup/controller','backup_controller.class.php',302],['backup/controller','restore_controller.class.php',309]], 50],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'create_temp_table': ['create_temp_table', 'This function will create the temporary table passed as argument with all its fields/keys/indexes/sequences, everything based in the XMLDB object ', [['lib/ddl','database_manager.php',447]], 12],
'encode_backup_temp_info': ['encode_backup_temp_info', 'Encode the info field for backup_ids_temp or backup_files_temp. ', [['backup/util/dbops','backup_controller_dbops.class.php',183]], 4],
'get_field': ['get_field', 'Gets an instance of the form field. ', [['lib/behat','behat_field_manager.php',248],['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1546],['user/filters','lib.php',124]], 536],
'get_modulename': ['get_modulename', '', [['backup/moodle2','backup_block_task.class.php',92],['lib/testing/generator','module_generator.php',54],['backup/moodle2','restore_activity_task.class.php',95],['backup/util/plan/tests/fixtures','plan_fixtures.php',85],['backup/util/plan/tests/fixtures','plan_fixtures.php',110],['backup/moodle2','backup_activity_task.class.php',89]], 26],
'base64_decode': ['base64_decode', '', [], 92],
'unserialize': ['unserialize', '', [], 192],
'gzcompress': ['gzcompress', '', [], 17],
'serialize': ['serialize', '', [], 282],
'basename': ['basename', '', [], 153],
'log': ['log', '', [], 2031],
'gzuncompress': ['gzuncompress', '', [], 6],
'array_merge': ['array_merge', '', [], 2944],
'base64_encode': ['base64_encode', '', [], 134],
'strpos': ['strpos', '', [], 1604],
'count': ['count', '', [], 4095],
'time': ['time', '', [], 1959]};
CLASS_DATA={
'backup_controller_exception': ['backup_controller_exception', '', [['backup/controller','backup_controller.class.php',407]], 22],
'xmldb_table': ['xmldb_table', '', [['lib/xmldb','xmldb_table.php',29]], 230],
'backup_dbops_exception': ['backup_dbops_exception', '', [['backup/util/dbops','backup_dbops.class.php',35]], 8]};
CONST_DATA={
'XMLDB_TYPE_TEXT': ['XMLDB_TYPE_TEXT', '', [['lib/xmldb','xmldb_constants.php',52]], 107],
'XMLDB_TYPE_INTEGER': ['XMLDB_TYPE_INTEGER', '', [['lib/xmldb','xmldb_constants.php',44]], 583],
'XMLDB_KEY_UNIQUE': ['XMLDB_KEY_UNIQUE', '', [['lib/xmldb','xmldb_constants.php',66]], 31],
'XMLDB_TYPE_CHAR': ['XMLDB_TYPE_CHAR', '', [['lib/xmldb','xmldb_constants.php',50]], 181],
'XMLDB_SEQUENCE': ['XMLDB_SEQUENCE', '', [['lib/xmldb','xmldb_constants.php',80]], 167],
'XMLDB_INDEX_NOTUNIQUE': ['XMLDB_INDEX_NOTUNIQUE', '', [['lib/xmldb','xmldb_constants.php',84]], 72],
'XMLDB_KEY_PRIMARY': ['XMLDB_KEY_PRIMARY', '', [['lib/xmldb','xmldb_constants.php',64]], 189],
'XMLDB_NOTNULL': ['XMLDB_NOTNULL', '', [['lib/xmldb','xmldb_constants.php',78]], 573]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
