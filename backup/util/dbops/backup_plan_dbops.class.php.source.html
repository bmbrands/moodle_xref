<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /backup/util/dbops/backup_plan_dbops.class.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='backup/util/dbops';
filename='backup_plan_dbops.class.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/backup/util/dbops/</a> -> <a href="backup_plan_dbops.class.php.html">backup_plan_dbops.class.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="backup_plan_dbops.class.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="backup_plan_dbops.class.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * @package    moodlecore</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @subpackage backup-dbops</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2010 onwards Eloy Lafuente (stronk7) {@link http://stronk7.com}</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment">/**</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * Non instantiable helper class providing DB support to the @backup_plan class</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> *</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * This class contains various static methods available for all the DB operations</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * performed by the @backup_plan (and builder) classes</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> *</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * TODO: Finish phpdocs</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> */</span>
<a name="l33"><span class="linenum">  33</span></a>  abstract class backup_plan_dbops extends backup_dbops {
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>      <span class="comment">/**</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">     * Given one course module id, return one array with all the block intances that belong to it</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     */</span>
<a name="l38"><span class="linenum">  38</span></a>      public static function <a class="function" onClick="logFunction('get_blockids_from_moduleid')" href="../../../_functions/get_blockids_from_moduleid.html" onMouseOver="funcPopup(event,'get_blockids_from_moduleid')">get_blockids_from_moduleid</a>(<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('moduleid')" href="../../../_variables/moduleid.html">$moduleid</a>) {
<a name="l39"><span class="linenum">  39</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">        // Get the context of the module</span>
<a name="l42"><span class="linenum">  42</span></a>          <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../../_variables/contextid.html">$contextid</a> = <a class="class" onClick="logClass('context_module')" href="../../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('moduleid')" href="../../../_variables/moduleid.html">$moduleid</a>)-&gt;id;
<a name="l43"><span class="linenum">  43</span></a>  
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">        // Get all the block instances which parentcontextid is the module contextid</span>
<a name="l45"><span class="linenum">  45</span></a>          <a class="var it5167" onMouseOver="hilite(5167)" onMouseOut="lolite()" onClick="logVariable('blockids')" href="../../../_variables/blockids.html">$blockids</a> = array();
<a name="l46"><span class="linenum">  46</span></a>          <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../../../_variables/instances.html">$instances</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('block_instances', array('parentcontextid' =&gt; <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../../_variables/contextid.html">$contextid</a>), '', 'id');
<a name="l47"><span class="linenum">  47</span></a>          foreach (<a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../../../_variables/instances.html">$instances</a> as <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>) {
<a name="l48"><span class="linenum">  48</span></a>              <a class="var it5167" onMouseOver="hilite(5167)" onMouseOut="lolite()" onClick="logVariable('blockids')" href="../../../_variables/blockids.html">$blockids</a>[] = <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l49"><span class="linenum">  49</span></a>          }
<a name="l50"><span class="linenum">  50</span></a>          return <a class="var it5167" onMouseOver="hilite(5167)" onMouseOut="lolite()" onClick="logVariable('blockids')" href="../../../_variables/blockids.html">$blockids</a>;
<a name="l51"><span class="linenum">  51</span></a>      }
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>      <span class="comment">/**</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">     * Given one course id, return one array with all the block intances that belong to it</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">     */</span>
<a name="l56"><span class="linenum">  56</span></a>      public static function <a class="function" onClick="logFunction('get_blockids_from_courseid')" href="../../../_functions/get_blockids_from_courseid.html" onMouseOver="funcPopup(event,'get_blockids_from_courseid')">get_blockids_from_courseid</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>) {
<a name="l57"><span class="linenum">  57</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">        // Get the context of the course</span>
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../../_variables/contextid.html">$contextid</a> = <a class="class" onClick="logClass('context_course')" href="../../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>)-&gt;id;
<a name="l61"><span class="linenum">  61</span></a>  
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">        // Get all the block instances which parentcontextid is the course contextid</span>
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it5167" onMouseOver="hilite(5167)" onMouseOut="lolite()" onClick="logVariable('blockids')" href="../../../_variables/blockids.html">$blockids</a> = array();
<a name="l64"><span class="linenum">  64</span></a>          <a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../../../_variables/instances.html">$instances</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('block_instances', array('parentcontextid' =&gt; <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../../_variables/contextid.html">$contextid</a>), '', 'id');
<a name="l65"><span class="linenum">  65</span></a>          foreach (<a class="var it1238" onMouseOver="hilite(1238)" onMouseOut="lolite()" onClick="logVariable('instances')" href="../../../_variables/instances.html">$instances</a> as <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>) {
<a name="l66"><span class="linenum">  66</span></a>              <a class="var it5167" onMouseOver="hilite(5167)" onMouseOut="lolite()" onClick="logVariable('blockids')" href="../../../_variables/blockids.html">$blockids</a>[] = <a class="var it528" onMouseOver="hilite(528)" onMouseOut="lolite()" onClick="logVariable('instance')" href="../../../_variables/instance.html">$instance</a>-&gt;<a onClick="logVariable('id')" class="var it39530" onMouseOver="hilite(39530)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l67"><span class="linenum">  67</span></a>          }
<a name="l68"><span class="linenum">  68</span></a>          return <a class="var it5167" onMouseOver="hilite(5167)" onMouseOut="lolite()" onClick="logVariable('blockids')" href="../../../_variables/blockids.html">$blockids</a>;
<a name="l69"><span class="linenum">  69</span></a>      }
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>      <span class="comment">/**</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">     * Given one section id, return one array with all the course modules that belong to it</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     */</span>
<a name="l74"><span class="linenum">  74</span></a>      public static function <a class="function" onClick="logFunction('get_modules_from_sectionid')" href="../../../_functions/get_modules_from_sectionid.html" onMouseOver="funcPopup(event,'get_modules_from_sectionid')">get_modules_from_sectionid</a>(<a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../../../_variables/sectionid.html">$sectionid</a>) {
<a name="l75"><span class="linenum">  75</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">        // Get the course and sequence of the section</span>
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it5168" onMouseOver="hilite(5168)" onMouseOut="lolite()" onClick="logVariable('secrec')" href="../../../_variables/secrec.html">$secrec</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_sections', array('id' =&gt; <a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../../../_variables/sectionid.html">$sectionid</a>), 'course, sequence');
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a> = <a class="var it5168" onMouseOver="hilite(5168)" onMouseOut="lolite()" onClick="logVariable('secrec')" href="../../../_variables/secrec.html">$secrec</a>-&gt;<a onClick="logVariable('course')" class="var it41367" onMouseOver="hilite(41367)" onMouseOut="lolite()" href="../../../_variables/course.html">course</a>;
<a name="l80"><span class="linenum">  80</span></a>          <a class="var it1741" onMouseOver="hilite(1741)" onMouseOut="lolite()" onClick="logVariable('sequence')" href="../../../_variables/sequence.html">$sequence</a> = <a class="var it5168" onMouseOver="hilite(5168)" onMouseOut="lolite()" onClick="logVariable('secrec')" href="../../../_variables/secrec.html">$secrec</a>-&gt;<a onClick="logVariable('sequence')" class="var it41367" onMouseOver="hilite(41367)" onMouseOut="lolite()" href="../../../_variables/sequence.html">sequence</a>;
<a name="l81"><span class="linenum">  81</span></a>  
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment">        // Get the section-&gt;sequence contents (it roots the activities order)</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment">        // Get all course modules belonging to requested section</span>
<a name="l84"><span class="linenum">  84</span></a>          <a class="var it5169" onMouseOver="hilite(5169)" onMouseOut="lolite()" onClick="logVariable('modulesarr')" href="../../../_variables/modulesarr.html">$modulesarr</a> = array();
<a name="l85"><span class="linenum">  85</span></a>          <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../../../_variables/modules.html">$modules</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;
<a name="l86"><span class="linenum">  86</span></a>              SELECT cm.id, m.name AS modname
<a name="l87"><span class="linenum">  87</span></a>                FROM {course_modules} cm
<a name="l88"><span class="linenum">  88</span></a>                JOIN {modules} m ON m.id = cm.module
<a name="l89"><span class="linenum">  89</span></a>               WHERE cm.course = ?
<a name="l90"><span class="linenum">  90</span></a>                 AND cm.section = ?&quot;, array(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>, <a class="var it556" onMouseOver="hilite(556)" onMouseOut="lolite()" onClick="logVariable('sectionid')" href="../../../_variables/sectionid.html">$sectionid</a>));
<a name="l91"><span class="linenum">  91</span></a>          foreach (<a class="phpfunction" onClick="logFunction('explode')" href="../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it1741" onMouseOver="hilite(1741)" onMouseOut="lolite()" onClick="logVariable('sequence')" href="../../../_variables/sequence.html">$sequence</a>) as <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('moduleid')" href="../../../_variables/moduleid.html">$moduleid</a>) {
<a name="l92"><span class="linenum">  92</span></a>              if (isset(<a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../../../_variables/modules.html">$modules</a>[<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('moduleid')" href="../../../_variables/moduleid.html">$moduleid</a>])) {
<a name="l93"><span class="linenum">  93</span></a>                  <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../../_variables/module.html">$module</a> = array('id' =&gt; <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../../../_variables/modules.html">$modules</a>[<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('moduleid')" href="../../../_variables/moduleid.html">$moduleid</a>]-&gt;id, 'modname' =&gt; <a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../../../_variables/modules.html">$modules</a>[<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('moduleid')" href="../../../_variables/moduleid.html">$moduleid</a>]-&gt;modname);
<a name="l94"><span class="linenum">  94</span></a>                  <a class="var it5169" onMouseOver="hilite(5169)" onMouseOut="lolite()" onClick="logVariable('modulesarr')" href="../../../_variables/modulesarr.html">$modulesarr</a>[] = (object)<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../../_variables/module.html">$module</a>;
<a name="l95"><span class="linenum">  95</span></a>                  unset(<a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../../../_variables/modules.html">$modules</a>[<a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('moduleid')" href="../../../_variables/moduleid.html">$moduleid</a>]);
<a name="l96"><span class="linenum">  96</span></a>              }
<a name="l97"><span class="linenum">  97</span></a>          }
<a name="l98"><span class="linenum">  98</span></a>          if (!empty(<a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../../../_variables/modules.html">$modules</a>)) { // This shouldn't happen, but one borked sequence can lead to it. Add the rest
<a name="l99"><span class="linenum">  99</span></a>              foreach (<a class="var it610" onMouseOver="hilite(610)" onMouseOut="lolite()" onClick="logVariable('modules')" href="../../../_variables/modules.html">$modules</a> as <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../../_variables/module.html">$module</a>) {
<a name="l100"><span class="linenum"> 100</span></a>                  <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../../_variables/module.html">$module</a> = array('id' =&gt; <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('id')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>, 'modname' =&gt; <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('modname')" class="var it39455" onMouseOver="hilite(39455)" onMouseOut="lolite()" href="../../../_variables/modname.html">modname</a>);
<a name="l101"><span class="linenum"> 101</span></a>                  <a class="var it5169" onMouseOver="hilite(5169)" onMouseOut="lolite()" onClick="logVariable('modulesarr')" href="../../../_variables/modulesarr.html">$modulesarr</a>[] = (object)<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../../_variables/module.html">$module</a>;
<a name="l102"><span class="linenum"> 102</span></a>              }
<a name="l103"><span class="linenum"> 103</span></a>          }
<a name="l104"><span class="linenum"> 104</span></a>          return <a class="var it5169" onMouseOver="hilite(5169)" onMouseOut="lolite()" onClick="logVariable('modulesarr')" href="../../../_variables/modulesarr.html">$modulesarr</a>;
<a name="l105"><span class="linenum"> 105</span></a>      }
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>      <span class="comment">/**</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">     * Given one course id, return one array with all the course_sections belonging to it</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">     */</span>
<a name="l110"><span class="linenum"> 110</span></a>      public static function <a class="function" onClick="logFunction('get_sections_from_courseid')" href="../../../_functions/get_sections_from_courseid.html" onMouseOver="funcPopup(event,'get_sections_from_courseid')">get_sections_from_courseid</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>) {
<a name="l111"><span class="linenum"> 111</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l112"><span class="linenum"> 112</span></a>  
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment">        // Get all sections belonging to requested course</span>
<a name="l114"><span class="linenum"> 114</span></a>          <a class="var it5170" onMouseOver="hilite(5170)" onMouseOut="lolite()" onClick="logVariable('sectionsarr')" href="../../../_variables/sectionsarr.html">$sectionsarr</a> = array();
<a name="l115"><span class="linenum"> 115</span></a>          <a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../../../_variables/sections.html">$sections</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('course_sections', array('course' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>), 'section');
<a name="l116"><span class="linenum"> 116</span></a>          foreach (<a class="var it5171" onMouseOver="hilite(5171)" onMouseOut="lolite()" onClick="logVariable('sections')" href="../../../_variables/sections.html">$sections</a> as <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../../../_variables/section.html">$section</a>) {
<a name="l117"><span class="linenum"> 117</span></a>              <a class="var it5170" onMouseOver="hilite(5170)" onMouseOut="lolite()" onClick="logVariable('sectionsarr')" href="../../../_variables/sectionsarr.html">$sectionsarr</a>[] = <a class="var it15" onMouseOver="hilite(15)" onMouseOut="lolite()" onClick="logVariable('section')" href="../../../_variables/section.html">$section</a>-&gt;<a onClick="logVariable('id')" class="var it39560" onMouseOver="hilite(39560)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l118"><span class="linenum"> 118</span></a>          }
<a name="l119"><span class="linenum"> 119</span></a>          return <a class="var it5170" onMouseOver="hilite(5170)" onMouseOut="lolite()" onClick="logVariable('sectionsarr')" href="../../../_variables/sectionsarr.html">$sectionsarr</a>;
<a name="l120"><span class="linenum"> 120</span></a>      }
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>      <span class="comment">/**</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * Given one course id, return its format in DB</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     */</span>
<a name="l125"><span class="linenum"> 125</span></a>      public static function <a class="function" onClick="logFunction('get_courseformat_from_courseid')" href="../../../_functions/get_courseformat_from_courseid.html" onMouseOver="funcPopup(event,'get_courseformat_from_courseid')">get_courseformat_from_courseid</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>) {
<a name="l126"><span class="linenum"> 126</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('course', 'format', array('id' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>));
<a name="l129"><span class="linenum"> 129</span></a>      }
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>      <span class="comment">/**</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">     * Given a course id, returns its theme. This can either be the course</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">     * theme or (if not specified in course) the category, site theme.</span>
<a name="l134"><span class="linenum"> 134</span></a>  <span class="comment">     *</span>
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">     * User, session, and inherited-from-mnet themes cannot have backed-up</span>
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">     * per course data. This is course-related data so it must be in a course</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">     * theme specified as part of the course structure</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment">     * @param int $courseid</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">     * @return string Name of course theme</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment">     * @see moodle_page#resolve_theme()</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment">     */</span>
<a name="l142"><span class="linenum"> 142</span></a>      public static function <a class="function" onClick="logFunction('get_theme_from_courseid')" href="../../../_functions/get_theme_from_courseid.html" onMouseOver="funcPopup(event,'get_theme_from_courseid')">get_theme_from_courseid</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>) {
<a name="l143"><span class="linenum"> 143</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">        // Course theme first</span>
<a name="l146"><span class="linenum"> 146</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowcoursethemes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/allowcoursethemes.html">allowcoursethemes</a>)) {
<a name="l147"><span class="linenum"> 147</span></a>              <a class="var it1114" onMouseOver="hilite(1114)" onMouseOut="lolite()" onClick="logVariable('theme')" href="../../../_variables/theme.html">$theme</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('course', 'theme', array('id' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>));
<a name="l148"><span class="linenum"> 148</span></a>              if (<a class="var it1114" onMouseOver="hilite(1114)" onMouseOut="lolite()" onClick="logVariable('theme')" href="../../../_variables/theme.html">$theme</a>) {
<a name="l149"><span class="linenum"> 149</span></a>                  return <a class="var it1114" onMouseOver="hilite(1114)" onMouseOut="lolite()" onClick="logVariable('theme')" href="../../../_variables/theme.html">$theme</a>;
<a name="l150"><span class="linenum"> 150</span></a>              }
<a name="l151"><span class="linenum"> 151</span></a>          }
<a name="l152"><span class="linenum"> 152</span></a>  
<a name="l153"><span class="linenum"> 153</span></a>  <span class="comment">        // Category themes in reverse order</span>
<a name="l154"><span class="linenum"> 154</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('allowcategorythemes')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/allowcategorythemes.html">allowcategorythemes</a>)) {
<a name="l155"><span class="linenum"> 155</span></a>              <a class="var it5174" onMouseOver="hilite(5174)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../../../_variables/catid.html">$catid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('course', 'category', array('id' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>));
<a name="l156"><span class="linenum"> 156</span></a>              while(<a class="var it5174" onMouseOver="hilite(5174)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../../../_variables/catid.html">$catid</a>) {
<a name="l157"><span class="linenum"> 157</span></a>                  <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../../_variables/category.html">$category</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_categories', array('id'=&gt;<a class="var it5174" onMouseOver="hilite(5174)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../../../_variables/catid.html">$catid</a>),
<a name="l158"><span class="linenum"> 158</span></a>                          'theme,parent', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l159"><span class="linenum"> 159</span></a>                  if (<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('theme')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../../../_variables/theme.html">theme</a>) {
<a name="l160"><span class="linenum"> 160</span></a>                      return <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('theme')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../../../_variables/theme.html">theme</a>;
<a name="l161"><span class="linenum"> 161</span></a>                  }
<a name="l162"><span class="linenum"> 162</span></a>                  <a class="var it5174" onMouseOver="hilite(5174)" onMouseOut="lolite()" onClick="logVariable('catid')" href="../../../_variables/catid.html">$catid</a> = <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('parent')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../../../_variables/parent.html">parent</a>;
<a name="l163"><span class="linenum"> 163</span></a>              }
<a name="l164"><span class="linenum"> 164</span></a>          }
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">        // Finally use site theme</span>
<a name="l167"><span class="linenum"> 167</span></a>          return <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('theme')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/theme.html">theme</a>;
<a name="l168"><span class="linenum"> 168</span></a>      }
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>      <span class="comment">/**</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">     * Return the wwwroot of the $CFG-&gt;mnet_localhost_id host</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">     * caching it along the request</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment">     */</span>
<a name="l174"><span class="linenum"> 174</span></a>      public static function <a class="function" onClick="logFunction('get_mnet_localhost_wwwroot')" href="../../../_functions/get_mnet_localhost_wwwroot.html" onMouseOver="funcPopup(event,'get_mnet_localhost_wwwroot')">get_mnet_localhost_wwwroot</a>() {
<a name="l175"><span class="linenum"> 175</span></a>          global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>          static <a class="var it67" onMouseOver="hilite(67)" onMouseOut="lolite()" onClick="logVariable('wwwroot')" href="../../../_variables/wwwroot.html">$wwwroot</a> = null;
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it67" onMouseOver="hilite(67)" onMouseOut="lolite()" onClick="logVariable('wwwroot')" href="../../../_variables/wwwroot.html">$wwwroot</a>)) {
<a name="l180"><span class="linenum"> 180</span></a>              <a class="var it67" onMouseOver="hilite(67)" onMouseOut="lolite()" onClick="logVariable('wwwroot')" href="../../../_variables/wwwroot.html">$wwwroot</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('mnet_host', 'wwwroot', array('id' =&gt; <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('mnet_localhost_id')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/mnet_localhost_id.html">mnet_localhost_id</a>));
<a name="l181"><span class="linenum"> 181</span></a>          }
<a name="l182"><span class="linenum"> 182</span></a>          return <a class="var it67" onMouseOver="hilite(67)" onMouseOut="lolite()" onClick="logVariable('wwwroot')" href="../../../_variables/wwwroot.html">$wwwroot</a>;
<a name="l183"><span class="linenum"> 183</span></a>      }
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>      <span class="comment">/**</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">    * Returns the default backup filename, based in passed params.</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">    *</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">    * Default format is (see MDL-22145)</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment">    * backup word - format - type - name - date - info . mbz</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment">    * where name is variable (course shortname, section name/id, activity modulename + cmid)</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment">    * and info can be (nu = no user info, an = anonymized). The last param $useidasname,</span>
<a name="l192"><span class="linenum"> 192</span></a>  <span class="comment">    * defaulting to false, allows to replace the course shortname by the course id (used</span>
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">    * by automated backups, to avoid non-ascii chars in OS filesystem)</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">    *</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">    * @param string $format One of backup::FORMAT_</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">    * @param string $type One of backup::TYPE_</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">    * @param int $courseid/$sectionid/$cmid</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">    * @param bool $users Should be true is users were included in the backup</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">    * @param bool $anonymised Should be true is user information was anonymized.</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">    * @param bool $useidonly only use the ID in the file name</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment">    * @return string The filename to use</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">    */</span>
<a name="l203"><span class="linenum"> 203</span></a>      public static function <a class="function" onClick="logFunction('get_default_backup_filename')" href="../../../_functions/get_default_backup_filename.html" onMouseOver="funcPopup(event,'get_default_backup_filename')">get_default_backup_filename</a>(<a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>, <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>, <a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../../_variables/users.html">$users</a>, <a class="var it5175" onMouseOver="hilite(5175)" onMouseOut="lolite()" onClick="logVariable('anonymised')" href="../../../_variables/anonymised.html">$anonymised</a>, <a class="var it5176" onMouseOver="hilite(5176)" onMouseOut="lolite()" onClick="logVariable('useidonly')" href="../../../_variables/useidonly.html">$useidonly</a> = false) {
<a name="l204"><span class="linenum"> 204</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l205"><span class="linenum"> 205</span></a>  
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">        // Calculate backup word</span>
<a name="l207"><span class="linenum"> 207</span></a>          <a class="var it5177" onMouseOver="hilite(5177)" onMouseOut="lolite()" onClick="logVariable('backupword')" href="../../../_variables/backupword.html">$backupword</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(' ', '_', <a class="class" onClick="logClass('core_text')" href="../../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('backupfilename')));
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it5177" onMouseOver="hilite(5177)" onMouseOut="lolite()" onClick="logVariable('backupword')" href="../../../_variables/backupword.html">$backupword</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="function" onClick="logFunction('clean_filename')" href="../../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it5177" onMouseOver="hilite(5177)" onMouseOut="lolite()" onClick="logVariable('backupword')" href="../../../_variables/backupword.html">$backupword</a>), '_');
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">        // Not $useidonly, lets fetch the name</span>
<a name="l211"><span class="linenum"> 211</span></a>          <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a> = '';
<a name="l212"><span class="linenum"> 212</span></a>          if (!<a class="var it5176" onMouseOver="hilite(5176)" onMouseOut="lolite()" onClick="logVariable('useidonly')" href="../../../_variables/useidonly.html">$useidonly</a>) {
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">            // Calculate proper name element (based on type)</span>
<a name="l214"><span class="linenum"> 214</span></a>              switch (<a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a>) {
<a name="l215"><span class="linenum"> 215</span></a>                  case backup::TYPE_1COURSE:
<a name="l216"><span class="linenum"> 216</span></a>                      <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('course', 'shortname', array('id' =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>));
<a name="l217"><span class="linenum"> 217</span></a>                      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>);
<a name="l218"><span class="linenum"> 218</span></a>                      <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a> = <a class="function" onClick="logFunction('format_string')" href="../../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a>, true, array('context' =&gt; <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../../_variables/context.html">$context</a>));
<a name="l219"><span class="linenum"> 219</span></a>                      break;
<a name="l220"><span class="linenum"> 220</span></a>                  case backup::TYPE_1SECTION:
<a name="l221"><span class="linenum"> 221</span></a>                      if (!<a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('course_sections', 'name', array('id' =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>))) {
<a name="l222"><span class="linenum"> 222</span></a>                          <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('course_sections', 'section', array('id' =&gt; <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>));
<a name="l223"><span class="linenum"> 223</span></a>                      }
<a name="l224"><span class="linenum"> 224</span></a>                      break;
<a name="l225"><span class="linenum"> 225</span></a>                  case backup::TYPE_1ACTIVITY:
<a name="l226"><span class="linenum"> 226</span></a>                      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_id')" href="../../../_functions/get_coursemodule_from_id.html" onMouseOver="funcPopup(event,'get_coursemodule_from_id')">get_coursemodule_from_id</a>(null, <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>);
<a name="l227"><span class="linenum"> 227</span></a>                      <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../../_variables/modname.html">modname</a> . <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>;
<a name="l228"><span class="linenum"> 228</span></a>                      break;
<a name="l229"><span class="linenum"> 229</span></a>              }
<a name="l230"><span class="linenum"> 230</span></a>              <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(' ', '_', <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a>);
<a name="l231"><span class="linenum"> 231</span></a>              <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a> = <a class="class" onClick="logClass('core_text')" href="../../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="function" onClick="logFunction('clean_filename')" href="../../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a>), '_'));
<a name="l232"><span class="linenum"> 232</span></a>          }
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment">        // The name will always contain the ID, but we append the course short name if requested.</span>
<a name="l235"><span class="linenum"> 235</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a> = <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../_variables/id.html">$id</a>;
<a name="l236"><span class="linenum"> 236</span></a>          if (!<a class="var it5176" onMouseOver="hilite(5176)" onMouseOut="lolite()" onClick="logVariable('useidonly')" href="../../../_variables/useidonly.html">$useidonly</a> &amp;&amp; <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a> != '') {
<a name="l237"><span class="linenum"> 237</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a> .= '-' . <a class="var it1256" onMouseOver="hilite(1256)" onMouseOut="lolite()" onClick="logVariable('shortname')" href="../../../_variables/shortname.html">$shortname</a>;
<a name="l238"><span class="linenum"> 238</span></a>          }
<a name="l239"><span class="linenum"> 239</span></a>  
<a name="l240"><span class="linenum"> 240</span></a>  <span class="comment">        // Calculate date</span>
<a name="l241"><span class="linenum"> 241</span></a>          <a class="var it5178" onMouseOver="hilite(5178)" onMouseOut="lolite()" onClick="logVariable('backupdateformat')" href="../../../_variables/backupdateformat.html">$backupdateformat</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(' ', '_', <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('backupnameformat', 'langconfig'));
<a name="l242"><span class="linenum"> 242</span></a>          <a class="var it1284" onMouseOver="hilite(1284)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a> = <a class="function" onClick="logFunction('userdate')" href="../../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>(), <a class="var it5178" onMouseOver="hilite(5178)" onMouseOut="lolite()" onClick="logVariable('backupdateformat')" href="../../../_variables/backupdateformat.html">$backupdateformat</a>, 99, false);
<a name="l243"><span class="linenum"> 243</span></a>          <a class="var it1284" onMouseOver="hilite(1284)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a> = <a class="class" onClick="logClass('core_text')" href="../../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="function" onClick="logFunction('clean_filename')" href="../../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="var it1284" onMouseOver="hilite(1284)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a>), '_'));
<a name="l244"><span class="linenum"> 244</span></a>  
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment">        // Calculate info</span>
<a name="l246"><span class="linenum"> 246</span></a>          <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a> = '';
<a name="l247"><span class="linenum"> 247</span></a>          if (!<a class="var it572" onMouseOver="hilite(572)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../../_variables/users.html">$users</a>) {
<a name="l248"><span class="linenum"> 248</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a> = '-nu';
<a name="l249"><span class="linenum"> 249</span></a>          } else if (<a class="var it5175" onMouseOver="hilite(5175)" onMouseOut="lolite()" onClick="logVariable('anonymised')" href="../../../_variables/anonymised.html">$anonymised</a>) {
<a name="l250"><span class="linenum"> 250</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a> = '-an';
<a name="l251"><span class="linenum"> 251</span></a>          }
<a name="l252"><span class="linenum"> 252</span></a>  
<a name="l253"><span class="linenum"> 253</span></a>          return <a class="var it5177" onMouseOver="hilite(5177)" onMouseOut="lolite()" onClick="logVariable('backupword')" href="../../../_variables/backupword.html">$backupword</a> . '-' . <a class="var it456" onMouseOver="hilite(456)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../../_variables/format.html">$format</a> . '-' . <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../../_variables/type.html">$type</a> . '-' .
<a name="l254"><span class="linenum"> 254</span></a>                 <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../../_variables/name.html">$name</a> . '-' . <a class="var it1284" onMouseOver="hilite(1284)" onMouseOut="lolite()" onClick="logVariable('date')" href="../../../_variables/date.html">$date</a> . <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../../_variables/info.html">$info</a> . '.mbz';
<a name="l255"><span class="linenum"> 255</span></a>      }
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>      <span class="comment">/**</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment">    * Returns a flag indicating the need to backup gradebook elements like calculated grade items and category visibility</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment">    * If all activity related grade items are being backed up we can also backup calculated grade items and categories</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment">    */</span>
<a name="l261"><span class="linenum"> 261</span></a>      public static function <a class="function" onClick="logFunction('require_gradebook_backup')" href="../../../_functions/require_gradebook_backup.html" onMouseOver="funcPopup(event,'require_gradebook_backup')">require_gradebook_backup</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>, <a class="var it5050" onMouseOver="hilite(5050)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>) {
<a name="l262"><span class="linenum"> 262</span></a>          global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('count')" href="../../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(id)
<a name="l265"><span class="linenum"> 265</span></a>                    FROM {grade_items}
<a name="l266"><span class="linenum"> 266</span></a>                   WHERE courseid=:courseid
<a name="l267"><span class="linenum"> 267</span></a>                     AND itemtype = 'mod'
<a name="l268"><span class="linenum"> 268</span></a>                     AND id NOT IN (
<a name="l269"><span class="linenum"> 269</span></a>                         SELECT bi.itemid
<a name="l270"><span class="linenum"> 270</span></a>                           FROM {backup_ids_temp} bi
<a name="l271"><span class="linenum"> 271</span></a>                          WHERE bi.itemname = 'grade_itemfinal'
<a name="l272"><span class="linenum"> 272</span></a>                            AND bi.backupid = :backupid)&quot;;
<a name="l273"><span class="linenum"> 273</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a> = array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../../_variables/courseid.html">$courseid</a>, 'backupid'=&gt;<a class="var it5050" onMouseOver="hilite(5050)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>);
<a name="l274"><span class="linenum"> 274</span></a>  
<a name="l275"><span class="linenum"> 275</span></a>  
<a name="l276"><span class="linenum"> 276</span></a>          <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../_variables/params.html">$params</a>);
<a name="l277"><span class="linenum"> 277</span></a>  
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment">        //if there are 0 activity grade items not already included in the backup</span>
<a name="l279"><span class="linenum"> 279</span></a>          return <a class="var it441" onMouseOver="hilite(441)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../../_variables/count.html">$count</a> == 0;
<a name="l280"><span class="linenum"> 280</span></a>      }
<a name="l281"><span class="linenum"> 281</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'clean_filename': ['clean_filename', 'Cleans a given filename by removing suspicious or troublesome characters ', [['lib','moodlelib.php',6378]], 61],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1318]], 854],
'require_gradebook_backup': ['require_gradebook_backup', 'Returns a flag indicating the need to backup gradebook elements like calculated grade items and category visibility If all activity related grade items are being backed up we can also backup calculated grade items and categories ', [['backup/util/dbops','backup_plan_dbops.class.php',257]], 2],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'userdate': ['userdate', 'Also in ADORecordSet. ', [['lib/adodb','adodb.inc.php',2607],['lib/adodb','adodb.inc.php',3271],['lib','moodlelib.php',2150]], 496],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'get_default_backup_filename': ['get_default_backup_filename', 'Returns the default backup filename, based in passed params. ', [['backup/util/dbops','backup_plan_dbops.class.php',185]], 7],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'count_records_sql': ['count_records_sql', 'Get the result of a SQL SELECT COUNT(...) query. ', [['lib/dml','moodle_database.php',1747]], 132],
'get_courseformat_from_courseid': ['get_courseformat_from_courseid', 'Given one course id, return its format in DB ', [['backup/util/dbops','backup_plan_dbops.class.php',122]], 1],
'get_blockids_from_courseid': ['get_blockids_from_courseid', 'Given one course id, return one array with all the block intances that belong to it ', [['backup/util/dbops','backup_plan_dbops.class.php',53]], 1],
'get_blockids_from_moduleid': ['get_blockids_from_moduleid', 'Given one course module id, return one array with all the block intances that belong to it ', [['backup/util/dbops','backup_plan_dbops.class.php',35]], 1],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'get_theme_from_courseid': ['get_theme_from_courseid', 'Given a course id, returns its theme. This can either be the course theme or (if not specified in course) the category, site theme. ', [['backup/util/dbops','backup_plan_dbops.class.php',131]], 1],
'get_mnet_localhost_wwwroot': ['get_mnet_localhost_wwwroot', 'Return the wwwroot of the $CFG->mnet_localhost_id host caching it along the request ', [['backup/util/dbops','backup_plan_dbops.class.php',170]], 1],
'get_sections_from_courseid': ['get_sections_from_courseid', 'Given one course id, return one array with all the course_sections belonging to it ', [['backup/util/dbops','backup_plan_dbops.class.php',107]], 1],
'get_modules_from_sectionid': ['get_modules_from_sectionid', 'Given one section id, return one array with all the course modules that belong to it ', [['backup/util/dbops','backup_plan_dbops.class.php',71]], 1],
'get_coursemodule_from_id': ['get_coursemodule_from_id', 'Given an id of a course module, finds the coursemodule description ', [['lib','datalib.php',1269]], 212],
'get_field': ['get_field', 'Get the right field name to fetch a stat for these attempts that is calculated for more than one $whichattempts (count or avg). ', [['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1497],['user/filters','lib.php',124],['lib/behat','behat_field_manager.php',243]], 485],
'explode': ['explode', '', [], 1599],
'count': ['count', '', [], 3984],
'trim': ['trim', '', [], 1889],
'time': ['time', '', [], 1768],
'strtolower': ['strtolower', '', [], 922],
'str_replace': ['str_replace', '', [], 1667],
'is_null': ['is_null', '', [], 1992]};
CLASS_DATA={
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6766]], 1197],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',6988]], 942],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 512]};
CONST_DATA={
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1252]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
