<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /backup/util/dbops/restore_controller_dbops.class.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='backup/util/dbops';
filename='restore_controller_dbops.class.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/backup/util/dbops/</a> -> <a href="restore_controller_dbops.class.php.html">restore_controller_dbops.class.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="restore_controller_dbops.class.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="restore_controller_dbops.class.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * @package    moodlecore</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @subpackage backup-dbops</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @copyright  2010 onwards Eloy Lafuente (stronk7) {@link http://stronk7.com}</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> */</span>
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment">/**</span>
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment"> * Non instantiable helper class providing DB support to the @restore_controller</span>
<a name="l27"><span class="linenum">  27</span></a>  <span class="comment"> *</span>
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment"> * This class contains various static methods available for all the DB operations</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * performed by the restore_controller class</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> *</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * TODO: Finish phpdocs</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> */</span>
<a name="l33"><span class="linenum">  33</span></a>  abstract class restore_controller_dbops extends restore_dbops {
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>      <span class="comment">/**</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment">     * Send one restore controller to DB</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment">     *</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">     * @param restore_controller $controller controller to send to DB</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">     * @param string $checksum hash of the controller to be checked</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     * @param bool $includeobj to decide if the object itself must be updated (true) or no (false)</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     * @param bool $cleanobj to decide if the object itself must be cleaned (true) or no (false)</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     * @return int id of the controller record in the DB</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     * @throws backup_controller_exception|restore_dbops_exception</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     */</span>
<a name="l45"><span class="linenum">  45</span></a>      public static function <a class="function" onClick="logFunction('save_controller')" href="../../../_functions/save_controller.html" onMouseOver="funcPopup(event,'save_controller')">save_controller</a>(<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>, <a class="var it12198" onMouseOver="hilite(12198)" onMouseOut="lolite()" onClick="logVariable('checksum')" href="../../../_variables/checksum.html">$checksum</a>, <a class="var it16636" onMouseOver="hilite(16636)" onMouseOut="lolite()" onClick="logVariable('includeobj')" href="../../../_variables/includeobj.html">$includeobj</a> = true, <a class="var it16637" onMouseOver="hilite(16637)" onMouseOut="lolite()" onClick="logVariable('cleanobj')" href="../../../_variables/cleanobj.html">$cleanobj</a> = false) {
<a name="l46"><span class="linenum">  46</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">        // Check we are going to save one backup_controller</span>
<a name="l48"><span class="linenum">  48</span></a>          if (! <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a> instanceof restore_controller) {
<a name="l49"><span class="linenum">  49</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_controller_exception')" href="../../../_classes/backup_controller_exception.html" onMouseOver="classPopup(event,'backup_controller_exception')">backup_controller_exception</a>('restore_controller_expected');
<a name="l50"><span class="linenum">  50</span></a>          }
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">        // Check checksum is ok. Only if we are including object info. Sounds silly but it isn't ;-).</span>
<a name="l52"><span class="linenum">  52</span></a>          if (<a class="var it16636" onMouseOver="hilite(16636)" onMouseOut="lolite()" onClick="logVariable('includeobj')" href="../../../_variables/includeobj.html">$includeobj</a> and !<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('is_checksum_correct')" href="../../../_functions/is_checksum_correct.html" onMouseOver="funcPopup(event,'is_checksum_correct')">is_checksum_correct</a>(<a class="var it12198" onMouseOver="hilite(12198)" onMouseOut="lolite()" onClick="logVariable('checksum')" href="../../../_variables/checksum.html">$checksum</a>)) {
<a name="l53"><span class="linenum">  53</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('restore_dbops_exception')" href="../../../_classes/restore_dbops_exception.html" onMouseOver="classPopup(event,'restore_dbops_exception')">restore_dbops_exception</a>('restore_controller_dbops_saving_checksum_mismatch');
<a name="l54"><span class="linenum">  54</span></a>          }
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">        // Cannot request to $includeobj and $cleanobj at the same time.</span>
<a name="l56"><span class="linenum">  56</span></a>          if (<a class="var it16636" onMouseOver="hilite(16636)" onMouseOut="lolite()" onClick="logVariable('includeobj')" href="../../../_variables/includeobj.html">$includeobj</a> and <a class="var it16637" onMouseOver="hilite(16637)" onMouseOut="lolite()" onClick="logVariable('cleanobj')" href="../../../_variables/cleanobj.html">$cleanobj</a>) {
<a name="l57"><span class="linenum">  57</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('restore_dbops_exception')" href="../../../_classes/restore_dbops_exception.html" onMouseOver="classPopup(event,'restore_dbops_exception')">restore_dbops_exception</a>('restore_controller_dbops_saving_cannot_include_and_delete');
<a name="l58"><span class="linenum">  58</span></a>          }
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">        // Get all the columns</span>
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a> = new stdclass();
<a name="l61"><span class="linenum">  61</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('backupid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/backupid.html">backupid</a>     = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_restoreid')" href="../../../_functions/get_restoreid.html" onMouseOver="funcPopup(event,'get_restoreid')">get_restoreid</a>();
<a name="l62"><span class="linenum">  62</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('operation')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/operation.html">operation</a>    = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_operation')" href="../../../_functions/get_operation.html" onMouseOver="funcPopup(event,'get_operation')">get_operation</a>();
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('type')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/type.html">type</a>         = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_type')" href="../../../_functions/get_type.html" onMouseOver="funcPopup(event,'get_type')">get_type</a>();
<a name="l64"><span class="linenum">  64</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('itemid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/itemid.html">itemid</a>       = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_courseid')" href="../../../_functions/get_courseid.html" onMouseOver="funcPopup(event,'get_courseid')">get_courseid</a>();
<a name="l65"><span class="linenum">  65</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('format')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/format.html">format</a>       = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_format')" href="../../../_functions/get_format.html" onMouseOver="funcPopup(event,'get_format')">get_format</a>();
<a name="l66"><span class="linenum">  66</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('interactive')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/interactive.html">interactive</a>  = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_interactive')" href="../../../_functions/get_interactive.html" onMouseOver="funcPopup(event,'get_interactive')">get_interactive</a>();
<a name="l67"><span class="linenum">  67</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('purpose')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/purpose.html">purpose</a>      = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_mode')" href="../../../_functions/get_mode.html" onMouseOver="funcPopup(event,'get_mode')">get_mode</a>();
<a name="l68"><span class="linenum">  68</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('userid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/userid.html">userid</a>       = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_userid')" href="../../../_functions/get_userid.html" onMouseOver="funcPopup(event,'get_userid')">get_userid</a>();
<a name="l69"><span class="linenum">  69</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('status')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/status.html">status</a>       = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_status')" href="../../../_functions/get_status.html" onMouseOver="funcPopup(event,'get_status')">get_status</a>();
<a name="l70"><span class="linenum">  70</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('execution')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/execution.html">execution</a>    = <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_execution')" href="../../../_functions/get_execution.html" onMouseOver="funcPopup(event,'get_execution')">get_execution</a>();
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('executiontime')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/executiontime.html">executiontime</a>= <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('get_executiontime')" href="../../../_functions/get_executiontime.html" onMouseOver="funcPopup(event,'get_executiontime')">get_executiontime</a>();
<a name="l72"><span class="linenum">  72</span></a>          <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('checksum')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/checksum.html">checksum</a>     = <a class="var it12198" onMouseOver="hilite(12198)" onMouseOut="lolite()" onClick="logVariable('checksum')" href="../../../_variables/checksum.html">$checksum</a>;
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">        // Serialize information</span>
<a name="l74"><span class="linenum">  74</span></a>          if (<a class="var it16636" onMouseOver="hilite(16636)" onMouseOut="lolite()" onClick="logVariable('includeobj')" href="../../../_variables/includeobj.html">$includeobj</a>) {
<a name="l75"><span class="linenum">  75</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('controller')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/controller.html">controller</a> = <a class="phpfunction" onClick="logFunction('base64_encode')" href="../../../_functions/base64_encode.html" onMouseOver="phpfuncPopup(event,'base64_encode')">base64_encode</a>(<a class="phpfunction" onClick="logFunction('serialize')" href="../../../_functions/serialize.html" onMouseOver="phpfuncPopup(event,'serialize')">serialize</a>(<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>));
<a name="l76"><span class="linenum">  76</span></a>          } else if (<a class="var it16637" onMouseOver="hilite(16637)" onMouseOut="lolite()" onClick="logVariable('cleanobj')" href="../../../_variables/cleanobj.html">$cleanobj</a>) {
<a name="l77"><span class="linenum">  77</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('controller')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/controller.html">controller</a> = '';
<a name="l78"><span class="linenum">  78</span></a>          }
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment">        // Send it to DB</span>
<a name="l80"><span class="linenum">  80</span></a>          if (<a class="var it16640" onMouseOver="hilite(16640)" onMouseOut="lolite()" onClick="logVariable('recexists')" href="../../../_variables/recexists.html">$recexists</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('backup_controllers', array('backupid' =&gt; <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('backupid')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/backupid.html">backupid</a>))) {
<a name="l81"><span class="linenum">  81</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('id')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a> = <a class="var it16640" onMouseOver="hilite(16640)" onMouseOut="lolite()" onClick="logVariable('recexists')" href="../../../_variables/recexists.html">$recexists</a>-&gt;<a onClick="logVariable('id')" class="var it45162" onMouseOver="hilite(45162)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l82"><span class="linenum">  82</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l83"><span class="linenum">  83</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('backup_controllers', <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>);
<a name="l84"><span class="linenum">  84</span></a>          } else {
<a name="l85"><span class="linenum">  85</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/timecreated.html">timecreated</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l86"><span class="linenum">  86</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/timemodified.html">timemodified</a> = 0;
<a name="l87"><span class="linenum">  87</span></a>              <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('id')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('backup_controllers', <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>);
<a name="l88"><span class="linenum">  88</span></a>          }
<a name="l89"><span class="linenum">  89</span></a>          return <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('id')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l90"><span class="linenum">  90</span></a>      }
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>      public static function <a class="function" onClick="logFunction('load_controller')" href="../../../_functions/load_controller.html" onMouseOver="funcPopup(event,'load_controller')">load_controller</a>(<a class="var it3716" onMouseOver="hilite(3716)" onMouseOut="lolite()" onClick="logVariable('restoreid')" href="../../../_variables/restoreid.html">$restoreid</a>) {
<a name="l93"><span class="linenum">  93</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l94"><span class="linenum">  94</span></a>          if (! <a class="var it16641" onMouseOver="hilite(16641)" onMouseOut="lolite()" onClick="logVariable('controllerrec')" href="../../../_variables/controllerrec.html">$controllerrec</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('backup_controllers', array('backupid' =&gt; <a class="var it3716" onMouseOver="hilite(3716)" onMouseOut="lolite()" onClick="logVariable('restoreid')" href="../../../_variables/restoreid.html">$restoreid</a>))) {
<a name="l95"><span class="linenum">  95</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_dbops_exception')" href="../../../_classes/backup_dbops_exception.html" onMouseOver="classPopup(event,'backup_dbops_exception')">backup_dbops_exception</a>('restore_controller_dbops_nonexisting');
<a name="l96"><span class="linenum">  96</span></a>          }
<a name="l97"><span class="linenum">  97</span></a>          <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a> = <a class="phpfunction" onClick="logFunction('unserialize')" href="../../../_functions/unserialize.html" onMouseOver="phpfuncPopup(event,'unserialize')">unserialize</a>(<a class="phpfunction" onClick="logFunction('base64_decode')" href="../../../_functions/base64_decode.html" onMouseOver="phpfuncPopup(event,'base64_decode')">base64_decode</a>(<a class="var it16641" onMouseOver="hilite(16641)" onMouseOut="lolite()" onClick="logVariable('controllerrec')" href="../../../_variables/controllerrec.html">$controllerrec</a>-&gt;<a onClick="logVariable('controller')" class="var it45163" onMouseOver="hilite(45163)" onMouseOut="lolite()" href="../../../_variables/controller.html">controller</a>));
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment">        // Check checksum is ok. Sounds silly but it isn't ;-)</span>
<a name="l99"><span class="linenum">  99</span></a>          if (!<a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>-&gt;<a class="function" onClick="logFunction('is_checksum_correct')" href="../../../_functions/is_checksum_correct.html" onMouseOver="funcPopup(event,'is_checksum_correct')">is_checksum_correct</a>(<a class="var it16641" onMouseOver="hilite(16641)" onMouseOut="lolite()" onClick="logVariable('controllerrec')" href="../../../_variables/controllerrec.html">$controllerrec</a>-&gt;<a onClick="logVariable('checksum')" class="var it45163" onMouseOver="hilite(45163)" onMouseOut="lolite()" href="../../../_variables/checksum.html">checksum</a>)) {
<a name="l100"><span class="linenum"> 100</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('backup_dbops_exception')" href="../../../_classes/backup_dbops_exception.html" onMouseOver="classPopup(event,'backup_dbops_exception')">backup_dbops_exception</a>('restore_controller_dbops_loading_checksum_mismatch');
<a name="l101"><span class="linenum"> 101</span></a>          }
<a name="l102"><span class="linenum"> 102</span></a>          return <a class="var it585" onMouseOver="hilite(585)" onMouseOut="lolite()" onClick="logVariable('controller')" href="../../../_variables/controller.html">$controller</a>;
<a name="l103"><span class="linenum"> 103</span></a>      }
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>      public static function <a class="function" onClick="logFunction('create_restore_temp_tables')" href="../../../_functions/create_restore_temp_tables.html" onMouseOver="funcPopup(event,'create_restore_temp_tables')">create_restore_temp_tables</a>(<a class="var it3716" onMouseOver="hilite(3716)" onMouseOut="lolite()" onClick="logVariable('restoreid')" href="../../../_variables/restoreid.html">$restoreid</a>) {
<a name="l106"><span class="linenum"> 106</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l107"><span class="linenum"> 107</span></a>          <a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('dbman')" href="../../../_variables/dbman.html">$dbman</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../../../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>(); <span class="comment">// We are going to use database_manager services</span>
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>          if (<a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('dbman')" href="../../../_variables/dbman.html">$dbman</a>-&gt;<a class="function" onClick="logFunction('table_exists')" href="../../../_functions/table_exists.html" onMouseOver="funcPopup(event,'table_exists')">table_exists</a>('backup_ids_temp')) { // Table exists, from restore prechecks
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">            // TODO: Improve this by inserting/selecting some record to see there is restoreid match</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">            // TODO: If not match, exception, table corresponds to another backup/restore operation</span>
<a name="l112"><span class="linenum"> 112</span></a>              return true;
<a name="l113"><span class="linenum"> 113</span></a>          }
<a name="l114"><span class="linenum"> 114</span></a>          backup_controller_dbops::<a class="function" onClick="logFunction('create_backup_ids_temp_table')" href="../../../_functions/create_backup_ids_temp_table.html" onMouseOver="funcPopup(event,'create_backup_ids_temp_table')">create_backup_ids_temp_table</a>(<a class="var it3716" onMouseOver="hilite(3716)" onMouseOut="lolite()" onClick="logVariable('restoreid')" href="../../../_variables/restoreid.html">$restoreid</a>);
<a name="l115"><span class="linenum"> 115</span></a>          backup_controller_dbops::<a class="function" onClick="logFunction('create_backup_files_temp_table')" href="../../../_functions/create_backup_files_temp_table.html" onMouseOver="funcPopup(event,'create_backup_files_temp_table')">create_backup_files_temp_table</a>(<a class="var it3716" onMouseOver="hilite(3716)" onMouseOut="lolite()" onClick="logVariable('restoreid')" href="../../../_variables/restoreid.html">$restoreid</a>);
<a name="l116"><span class="linenum"> 116</span></a>          return false;
<a name="l117"><span class="linenum"> 117</span></a>      }
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>      public static function <a class="function" onClick="logFunction('drop_restore_temp_tables')" href="../../../_functions/drop_restore_temp_tables.html" onMouseOver="funcPopup(event,'drop_restore_temp_tables')">drop_restore_temp_tables</a>(<a class="var it3495" onMouseOver="hilite(3495)" onMouseOut="lolite()" onClick="logVariable('backupid')" href="../../../_variables/backupid.html">$backupid</a>) {
<a name="l120"><span class="linenum"> 120</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l121"><span class="linenum"> 121</span></a>          <a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('dbman')" href="../../../_variables/dbman.html">$dbman</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_manager')" href="../../../_functions/get_manager.html" onMouseOver="funcPopup(event,'get_manager')">get_manager</a>(); <span class="comment">// We are going to use database_manager services</span>
<a name="l122"><span class="linenum"> 122</span></a>  
<a name="l123"><span class="linenum"> 123</span></a>          <a class="var it40030" onMouseOver="hilite(40030)" onMouseOut="lolite()" onClick="logVariable('targettablenames')" href="../../../_variables/targettablenames.html">$targettablenames</a> = array('backup_ids_temp', 'backup_files_temp');
<a name="l124"><span class="linenum"> 124</span></a>          foreach (<a class="var it40030" onMouseOver="hilite(40030)" onMouseOut="lolite()" onClick="logVariable('targettablenames')" href="../../../_variables/targettablenames.html">$targettablenames</a> as <a class="var it16642" onMouseOver="hilite(16642)" onMouseOut="lolite()" onClick="logVariable('targettablename')" href="../../../_variables/targettablename.html">$targettablename</a>) {
<a name="l125"><span class="linenum"> 125</span></a>              <a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a> = <span class="keyword">new </span><a class="class" onClick="logClass('xmldb_table')" href="../../../_classes/xmldb_table.html" onMouseOver="classPopup(event,'xmldb_table')">xmldb_table</a>(<a class="var it16642" onMouseOver="hilite(16642)" onMouseOut="lolite()" onClick="logVariable('targettablename')" href="../../../_variables/targettablename.html">$targettablename</a>);
<a name="l126"><span class="linenum"> 126</span></a>              <a class="var it826" onMouseOver="hilite(826)" onMouseOut="lolite()" onClick="logVariable('dbman')" href="../../../_variables/dbman.html">$dbman</a>-&gt;<a class="function" onClick="logFunction('drop_table')" href="../../../_functions/drop_table.html" onMouseOver="funcPopup(event,'drop_table')">drop_table</a>(<a class="var it61" onMouseOver="hilite(61)" onMouseOut="lolite()" onClick="logVariable('table')" href="../../../_variables/table.html">$table</a>); <span class="comment">// And drop it</span>
<a name="l127"><span class="linenum"> 127</span></a>          }
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">        // Invalidate the backup_ids caches.</span>
<a name="l129"><span class="linenum"> 129</span></a>          restore_dbops::<a class="function" onClick="logFunction('reset_backup_ids_cached')" href="../../../_functions/reset_backup_ids_cached.html" onMouseOver="funcPopup(event,'reset_backup_ids_cached')">reset_backup_ids_cached</a>();
<a name="l130"><span class="linenum"> 130</span></a>      }
<a name="l131"><span class="linenum"> 131</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'is_checksum_correct': ['is_checksum_correct', '', [['backup/util/settings','backup_setting.class.php',113],['backup/util/loggers','base_logger.class.php',107],['backup/util/interfaces','checksumable.class.php',44],['backup/util/plan','base_plan.class.php',142],['backup/controller','backup_controller.class.php',236],['backup/controller','restore_controller.class.php',249],['backup/util/plan','base_task.class.php',216]], 10],
'get_manager': ['get_manager', 'Returns the sql generator used for db manipulation. Used mostly in upgrade.php scripts. ', [['lib/dml','moodle_database.php',1080]], 229],
'get_status': ['get_status', '', [['backup/util/settings','base_setting.class.php',157],['completion/criteria','completion_criteria_date.php',134],['lib/filebrowser','file_info.php',348],['lib/filebrowser','virtual_root_file.php',281],['lib/filebrowser','file_info_stored.php',321],['lib/filestorage','stored_file.php',777],['completion/criteria','completion_criteria.php',249],['completion','completion_criteria_completion.php',158],['grade/grading/form','lib.php',863],['mod/workshop/allocation','lib.php',128],['completion/criteria','completion_criteria_grade.php',162],['lib/classes/plugininfo','base.php',344],['backup/controller','backup_controller.class.php',287],['completion/criteria','completion_criteria_duration.php',180],['backup/controller','restore_controller.class.php',297]], 180],
'get_execution': ['get_execution', '', [['backup/controller','backup_controller.class.php',291],['backup/controller','restore_controller.class.php',301]], 3],
'load_controller': ['load_controller', 'Loads the restore controller if we are tracking one ', [['backup/util/ui','restore_ui.class.php',272],['backup/util/dbops','backup_controller_dbops.class.php',102],['backup/util/ui','base_ui.class.php',258],['backup/util/ui','backup_ui.class.php',141],['backup/controller','backup_controller.class.php',345],['backup/util/dbops','restore_controller_dbops.class.php',92],['backup/controller','restore_controller.class.php',423]], 19],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'reset_backup_ids_cached': ['reset_backup_ids_cached', 'Reset the ids caches completely ', [['backup/util/dbops','restore_dbops.class.php',332]], 1],
'get_courseid': ['get_courseid', 'Id of the current course (for site feedbacks only) ', [['mod/feedback/classes','structure.php',80],['course/format','lib.php',222],['mod/quiz','attemptlib.php',175],['mod/quiz','attemptlib.php',717],['backup/util/plan','backup_plan.class.php',78],['comment','lib.php',1002],['mod/quiz/classes','structure.php',228],['question/classes/bank','view.php',217],['backup/util/plan','restore_plan.class.php',81],['backup/controller','backup_controller.class.php',267],['backup/util/plan','base_step.class.php',105],['backup/controller','restore_controller.class.php',269],['backup/util/plan','base_task.class.php',109]], 244],
'drop_restore_temp_tables': ['drop_restore_temp_tables', '', [['backup/util/dbops','restore_controller_dbops.class.php',119]], 4],
'create_restore_temp_tables': ['create_restore_temp_tables', '', [['backup/util/dbops','restore_controller_dbops.class.php',105]], 5],
'get_type': ['get_type', 'Get the type of the feed ', [['lib/simplepie/library','SimplePie.php',1624],['lib/simplepie/library/SimplePie','Restriction.php',122],['backup/util/ui','backup_ui_setting.class.php',102],['backup/util/ui','base_ui.class.php',294],['mod/lesson','locallib.php',2394],['lib/simplepie/library/SimplePie','Enclosure.php',877],['lib/classes','chart_series.php',127],['grade/report/singleview/classes/local/ui','bulk_insert.php',62],['lib/simplepie/library/SimplePie/Content/Type','Sniffer.php',79],['backup/util/plan','backup_plan.class.php',70],['availability/classes','condition.php',102],['mod/assign','assignmentplugin.php',153],['backup/controller','backup_controller.class.php',244],['lib/classes','chart_base.php',150],['mod/workshop','locallib.php',3936],['mod/lti/classes/local/ltiservice','resource_base.php',114],['lib/simplepie/library/SimplePie','Caption.php',193],['backup/controller','restore_controller.class.php',261]], 90],
'save_controller': ['save_controller', 'Send one backup controller to DB ', [['backup/util/dbops','backup_controller_dbops.class.php',45],['backup/util/ui','base_ui.class.php',147],['backup/controller/tests','controller_test.php',177],['backup/controller','backup_controller.class.php',329],['backup/util/dbops','restore_controller_dbops.class.php',35],['backup/controller','restore_controller.class.php',407]], 18],
'drop_table': ['drop_table', 'This function will drop the table passed as argument and all the associated objects (keys, indexes, constraints, sequences, triggers) will be dropped too. ', [['lib/ddl','database_manager.php',315]], 60],
'get_interactive': ['get_interactive', '', [['backup/controller','backup_controller.class.php',275],['backup/controller','restore_controller.class.php',277]], 3],
'get_operation': ['get_operation', '', [['backup/controller','backup_controller.class.php',259],['backup/controller','restore_controller.class.php',265]], 4],
'get_userid': ['get_userid', 'Returns user ID ', [['lib/filebrowser','virtual_root_file.php',236],['mod/quiz','attemptlib.php',804],['lib/filestorage','stored_file.php',708],['mod/data','lib.php',2585],['backup/util/plan','restore_task.class.php',54],['backup/util/plan','restore_plan.class.php',115],['backup/controller','backup_controller.class.php',283],['backup/controller','restore_controller.class.php',285]], 220],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'table_exists': ['table_exists', 'Given one xmldb_table, checks if it exists in DB (true/false). ', [['lib/ddl','sql_generator.php',215],['lib/ddl','database_manager.php',90]], 131],
'get_executiontime': ['get_executiontime', '', [['backup/controller','backup_controller.class.php',295],['backup/controller','restore_controller.class.php',305]], 3],
'get_mode': ['get_mode', 'Current feedback mode, see constants on the top of this class ', [['mod/feedback/classes','complete_form.php',226],['backup/util/plan','backup_plan.class.php',74],['mod/assignment/backup/moodle2','restore_assignment_activity_task.class.php',113],['cache/classes','definition.php',634],['backup/util/plan','restore_plan.class.php',85],['backup/controller','backup_controller.class.php',279],['backup/controller','restore_controller.class.php',281]], 36],
'get_restoreid': ['get_restoreid', 'Gets the restore id from the controller ', [['backup/util/ui','restore_ui.class.php',167],['backup/moodle2','restore_plugin.class.php',162],['backup/moodle2','restore_subplugin.class.php',94],['backup/util/plan','restore_task.class.php',42],['backup/util/plan','restore_plan.class.php',77],['backup/util/plan','restore_step.class.php',42],['backup/util/ui','restore_ui_stage.class.php',51],['backup/controller','restore_controller.class.php',257]], 87],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'create_backup_files_temp_table': ['create_backup_files_temp_table', '', [['backup/util/dbops','backup_controller_dbops.class.php',137]], 1],
'get_format': ['get_format', 'Returns the format name used by this course ', [['course/format','lib.php',213],['backup/util/ui','base_ui.class.php',287],['question/format/xml','format.php',1028],['backup/controller','backup_controller.class.php',271],['mod/workshop','locallib.php',4044],['backup/controller','restore_controller.class.php',273]], 47],
'create_backup_ids_temp_table': ['create_backup_ids_temp_table', '', [['backup/util/dbops','backup_controller_dbops.class.php',115]], 5],
'base64_encode': ['base64_encode', '', [], 134],
'time': ['time', '', [], 1959],
'serialize': ['serialize', '', [], 282],
'base64_decode': ['base64_decode', '', [], 92],
'unserialize': ['unserialize', '', [], 192]};
CLASS_DATA={
'xmldb_table': ['xmldb_table', '', [['lib/xmldb','xmldb_table.php',29]], 230],
'backup_dbops_exception': ['backup_dbops_exception', '', [['backup/util/dbops','backup_dbops.class.php',35]], 8],
'backup_controller_exception': ['backup_controller_exception', '', [['backup/controller','backup_controller.class.php',407]], 22],
'restore_dbops_exception': ['restore_dbops_exception', '', [['backup/util/dbops','restore_dbops.class.php',1786]], 7]};
CONST_DATA={
};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
