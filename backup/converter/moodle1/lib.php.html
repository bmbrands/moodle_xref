<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of lib.php</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='backup/converter/moodle1';
filename='lib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/backup/converter/moodle1/</a> -> <a href="lib.php.source.html">lib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="lib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../../../_stats.html">Project Stats</a>]</p>
<p><b>Provides classes used by the moodle1 converter</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2011 Mark Nielsen <<a href="mailto:mark@moodlerooms.com">mark@moodlerooms.com</a>></td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>1561 lines (55 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>1 time</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 10 classes</h3>
<div class="inset">
<p><b>moodle1_converter::</b> (24 methods):<br>
&nbsp;&nbsp;<a href="#log">log</a>()<br>
&nbsp;&nbsp;<a href="#detect_format">detect_format</a>()<br>
&nbsp;&nbsp;<a href="#init">init</a>()<br>
&nbsp;&nbsp;<a href="#execute">execute</a>()<br>
&nbsp;&nbsp;<a href="#register_handler">register_handler</a>()<br>
&nbsp;&nbsp;<a href="#grouped_parent_exists">grouped_parent_exists</a>()<br>
&nbsp;&nbsp;<a href="#process_chunk">process_chunk</a>()<br>
&nbsp;&nbsp;<a href="#path_start_reached">path_start_reached</a>()<br>
&nbsp;&nbsp;<a href="#path_end_reached">path_end_reached</a>()<br>
&nbsp;&nbsp;<a href="#create_stash_storage">create_stash_storage</a>()<br>
&nbsp;&nbsp;<a href="#drop_stash_storage">drop_stash_storage</a>()<br>
&nbsp;&nbsp;<a href="#set_stash">set_stash</a>()<br>
&nbsp;&nbsp;<a href="#get_stash">get_stash</a>()<br>
&nbsp;&nbsp;<a href="#get_stash_or_default">get_stash_or_default</a>()<br>
&nbsp;&nbsp;<a href="#get_stash_names">get_stash_names</a>()<br>
&nbsp;&nbsp;<a href="#get_stash_itemids">get_stash_itemids</a>()<br>
&nbsp;&nbsp;<a href="#get_contextid">get_contextid</a>()<br>
&nbsp;&nbsp;<a href="#get_nextid">get_nextid</a>()<br>
&nbsp;&nbsp;<a href="#get_file_manager">get_file_manager</a>()<br>
&nbsp;&nbsp;<a href="#get_inforef_manager">get_inforef_manager</a>()<br>
&nbsp;&nbsp;<a href="#migrate_referenced_files">migrate_referenced_files</a>()<br>
&nbsp;&nbsp;<a href="#find_referenced_files">find_referenced_files</a>()<br>
&nbsp;&nbsp;<a href="#rewrite_filephp_usage">rewrite_filephp_usage</a>()<br>
&nbsp;&nbsp;<a href="#description">description</a>()<br>
</p>
<p><b>moodle1_convert_exception::</b> (0 methods):<br>
</p>
<p><b>moodle1_convert_storage_exception::</b> (0 methods):<br>
</p>
<p><b>moodle1_convert_empty_storage_exception::</b> (0 methods):<br>
</p>
<p><b>moodle1_parser_processor::</b> (5 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#process_cdata">process_cdata</a>()<br>
&nbsp;&nbsp;<a href="#dispatch_chunk">dispatch_chunk</a>()<br>
&nbsp;&nbsp;<a href="#notify_path_start">notify_path_start</a>()<br>
&nbsp;&nbsp;<a href="#notify_path_end">notify_path_end</a>()<br>
</p>
<p><b>moodle1_xml_transformer::</b> (1 method):<br>
&nbsp;&nbsp;<a href="#process">process</a>()<br>
</p>
<p><b>convert_path::</b> (20 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#set_processing_object">set_processing_object</a>()<br>
&nbsp;&nbsp;<a href="#set_processing_method">set_processing_method</a>()<br>
&nbsp;&nbsp;<a href="#set_start_method">set_start_method</a>()<br>
&nbsp;&nbsp;<a href="#set_end_method">set_end_method</a>()<br>
&nbsp;&nbsp;<a href="#set_tags">set_tags</a>()<br>
&nbsp;&nbsp;<a href="#set_dropped_fields">set_dropped_fields</a>()<br>
&nbsp;&nbsp;<a href="#set_renamed_fields">set_renamed_fields</a>()<br>
&nbsp;&nbsp;<a href="#set_new_fields">set_new_fields</a>()<br>
&nbsp;&nbsp;<a href="#apply_recipes">apply_recipes</a>()<br>
&nbsp;&nbsp;<a href="#get_name">get_name</a>()<br>
&nbsp;&nbsp;<a href="#get_path">get_path</a>()<br>
&nbsp;&nbsp;<a href="#is_grouped">is_grouped</a>()<br>
&nbsp;&nbsp;<a href="#get_processing_object">get_processing_object</a>()<br>
&nbsp;&nbsp;<a href="#get_processing_method">get_processing_method</a>()<br>
&nbsp;&nbsp;<a href="#get_start_method">get_start_method</a>()<br>
&nbsp;&nbsp;<a href="#get_end_method">get_end_method</a>()<br>
&nbsp;&nbsp;<a href="#get_tags">get_tags</a>()<br>
&nbsp;&nbsp;<a href="#validate_name">validate_name</a>()<br>
&nbsp;&nbsp;<a href="#validate_pobject">validate_pobject</a>()<br>
</p>
<p><b>convert_path_exception::</b> (1 method):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
</p>
<p><b>moodle1_file_manager::</b> (9 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#migrate_file">migrate_file</a>()<br>
&nbsp;&nbsp;<a href="#migrate_directory">migrate_directory</a>()<br>
&nbsp;&nbsp;<a href="#get_fileids">get_fileids</a>()<br>
&nbsp;&nbsp;<a href="#reset_fileids">reset_fileids</a>()<br>
&nbsp;&nbsp;<a href="#log">log</a>()<br>
&nbsp;&nbsp;<a href="#make_file_record">make_file_record</a>()<br>
&nbsp;&nbsp;<a href="#add_file_to_pool">add_file_to_pool</a>()<br>
&nbsp;&nbsp;<a href="#stash_file">stash_file</a>()<br>
</p>
<p><b>moodle1_inforef_manager::</b> (5 methods):<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#add_ref">add_ref</a>()<br>
&nbsp;&nbsp;<a href="#add_refs">add_refs</a>()<br>
&nbsp;&nbsp;<a href="#write_refs">write_refs</a>()<br>
&nbsp;&nbsp;<a href="#validate_item">validate_item</a>()<br>
</p>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="moodle1_converter"><b>moodle1_converter</b></a>&nbsp;&nbsp;- <a href="../../../_classes/moodle1_converter.html"><small>X-Ref</small></a>
</p>
<b>Converter of Moodle 1.9 backup into Moodle 2.x format<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="log" onClick="logFunction('log', 'lib.php.source.html#l69')" href="lib.php.source.html#l69">log</a>(<a href="../../../_variables/message.html">$message</a>, <a href="../../../_variables/level.html">$level</a>, <a href="../../../_variables/a.html">$a</a> = null, <a href="../../../_variables/depth.html">$depth</a> = null, <a href="../../../_variables/display.html">$display</a> = false)&nbsp;&nbsp;
<a href="../../../_functions/log.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Log a message<BR>
</b><BR><b>param:</b> string $message message text<br>
<b>param:</b> int $level message level {@example backup::LOG_WARNING}<br>
<b>param:</b> null|mixed $a additional information<br>
<b>param:</b> null|int $depth the message depth<br>
<b>param:</b> bool $display whether the message should be sent to the output, too<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="detect_format" onClick="logFunction('detect_format', 'lib.php.source.html#l83')" href="lib.php.source.html#l83">detect_format</a>(<a href="../../../_variables/tempdir.html">$tempdir</a>)&nbsp;&nbsp;
<a href="../../../_functions/detect_format.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Detects the Moodle 1.9 format of the backup directory<BR>
</b><BR><b>param:</b> string $tempdir the name of the backup directory<br>
<b>return:</b> null|string backup::FORMAT_MOODLE1 if the Moodle 1.9 is detected, null otherwise<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="init" onClick="logFunction('init', 'lib.php.source.html#l111')" href="lib.php.source.html#l111">init</a>()&nbsp;&nbsp;
<a href="../../../_functions/init.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Initialize the instance if needed, called by the constructor<BR>
</b><BR>Here we create objects we need before the execution.<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="execute" onClick="logFunction('execute', 'lib.php.source.html#l142')" href="lib.php.source.html#l142">execute</a>()&nbsp;&nbsp;
<a href="../../../_functions/execute.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Converts the contents of the tempdir into the target format in the workdir<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="register_handler" onClick="logFunction('register_handler', 'lib.php.source.html#l157')" href="lib.php.source.html#l157">register_handler</a>(moodle1_handler <a href="../../../_variables/handler.html">$handler</a>, array <a href="../../../_variables/elements.html">$elements</a>)&nbsp;&nbsp;
<a href="../../../_functions/register_handler.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Register a handler for the given path elements<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="grouped_parent_exists" onClick="logFunction('grouped_parent_exists', 'lib.php.source.html#l205')" href="lib.php.source.html#l205">grouped_parent_exists</a>(<a href="../../../_variables/pelement.html">$pelement</a>, <a href="../../../_variables/elements.html">$elements</a>)&nbsp;&nbsp;
<a href="../../../_functions/grouped_parent_exists.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Helper method used by {@link self::register_handler()}<BR>
</b><BR><b>param:</b> convert_path $pelement path element<br>
<b>param:</b> array of convert_path instances<br>
<b>return:</b> bool true if grouped parent was found, false otherwise<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_chunk" onClick="logFunction('process_chunk', 'lib.php.source.html#l229')" href="lib.php.source.html#l229">process_chunk</a>(<a href="../../../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../../../_functions/process_chunk.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Process the data obtained from the XML parser processor<BR>
</b><BR>This methods receives one chunk of information from the XML parser<BR>
processor and dispatches it, following the naming rules.<BR>
We are expanding the modules and blocks paths here to include the plugin's name.<BR>
<BR>
<b>param:</b> array $data<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="path_start_reached" onClick="logFunction('path_start_reached', 'lib.php.source.html#l323')" href="lib.php.source.html#l323">path_start_reached</a>(<a href="../../../_variables/path.html">$path</a>)&nbsp;&nbsp;
<a href="../../../_functions/path_start_reached.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Executes operations required at the start of a watched path<BR>
</b><BR>For MOD and BLOCK paths, this is supported only for the sub-paths, not the root<BR>
module/block element. For the illustration:<BR>
<BR>
You CAN'T attach on_xxx_start() listener to a path like<BR>
/MOODLE_BACKUP/COURSE/MODULES/MOD/WORKSHOP because the &lt;MOD&gt; must<BR>
be processed first in {@link self::process_chunk()} where $this-&gt;currentmod<BR>
is set.<BR>
<BR>
You CAN attach some on_xxx_start() listener to a path like<BR>
/MOODLE_BACKUP/COURSE/MODULES/MOD/WORKSHOP/SUBMISSIONS because it is<BR>
a sub-path under &lt;MOD&gt; and we have $this-&gt;currentmod already set when the<BR>
&lt;SUBMISSIONS&gt; is reached.<BR>
<BR>
<b>param:</b> string $path in the original file<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="path_end_reached" onClick="logFunction('path_end_reached', 'lib.php.source.html#l380')" href="lib.php.source.html#l380">path_end_reached</a>(<a href="../../../_variables/path.html">$path</a>)&nbsp;&nbsp;
<a href="../../../_functions/path_end_reached.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Executes operations required at the end of a watched path<BR>
</b><BR><b>param:</b> string $path in the original file<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_stash_storage" onClick="logFunction('create_stash_storage', 'lib.php.source.html#l417')" href="lib.php.source.html#l417">create_stash_storage</a>()&nbsp;&nbsp;
<a href="../../../_functions/create_stash_storage.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates the temporary storage for stashed data<BR>
</b><BR>This implementation uses backup_ids_temp table.<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="drop_stash_storage" onClick="logFunction('drop_stash_storage', 'lib.php.source.html#l426')" href="lib.php.source.html#l426">drop_stash_storage</a>()&nbsp;&nbsp;
<a href="../../../_functions/drop_stash_storage.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Drops the temporary storage of stashed data<BR>
</b><BR>This implementation uses backup_ids_temp table.<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_stash" onClick="logFunction('set_stash', 'lib.php.source.html#l435')" href="lib.php.source.html#l435">set_stash</a>(<a href="../../../_variables/stashname.html">$stashname</a>, <a href="../../../_variables/info.html">$info</a>, <a href="../../../_variables/itemid.html">$itemid</a> = 0)&nbsp;&nbsp;
<a href="../../../_functions/set_stash.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Stores some information for later processing<BR>
</b><BR>This implementation uses backup_ids_temp table to store data. Make<BR>
sure that the $stashname + $itemid combo is unique.<BR>
<BR>
<b>param:</b> string $stashname name of the stash<br>
<b>param:</b> mixed $info information to stash<br>
<b>param:</b> int $itemid optional id for multiple infos within the same stashname<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_stash" onClick="logFunction('get_stash', 'lib.php.source.html#l454')" href="lib.php.source.html#l454">get_stash</a>(<a href="../../../_variables/stashname.html">$stashname</a>, <a href="../../../_variables/itemid.html">$itemid</a> = 0)&nbsp;&nbsp;
<a href="../../../_functions/get_stash.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Restores a given stash stored previously by {@link self::set_stash()}<BR>
</b><BR><b>param:</b> string $stashname name of the stash<br>
<b>param:</b> int $itemid optional id for multiple infos within the same stashname<br>
<b>return:</b> mixed stashed data<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_stash_or_default" onClick="logFunction('get_stash_or_default', 'lib.php.source.html#l476')" href="lib.php.source.html#l476">get_stash_or_default</a>(<a href="../../../_variables/stashname.html">$stashname</a>, <a href="../../../_variables/itemid.html">$itemid</a> = 0, <a href="../../../_variables/default.html">$default</a> = null)&nbsp;&nbsp;
<a href="../../../_functions/get_stash_or_default.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Restores a given stash or returns the given default if there is no such stash<BR>
</b><BR><b>param:</b> string $stashname name of the stash<br>
<b>param:</b> int $itemid optional id for multiple infos within the same stashname<br>
<b>param:</b> mixed $default information to return if the info has not been stashed previously<br>
<b>return:</b> mixed stashed data or the default value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_stash_names" onClick="logFunction('get_stash_names', 'lib.php.source.html#l492')" href="lib.php.source.html#l492">get_stash_names</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_stash_names.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the list of existing stashes<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_stash_itemids" onClick="logFunction('get_stash_itemids', 'lib.php.source.html#l507')" href="lib.php.source.html#l507">get_stash_itemids</a>(<a href="../../../_variables/stashname.html">$stashname</a>)&nbsp;&nbsp;
<a href="../../../_functions/get_stash_itemids.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the list of stashed $itemids in the given stash<BR>
</b><BR><b>param:</b> string $stashname<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_contextid" onClick="logFunction('get_contextid', 'lib.php.source.html#l524')" href="lib.php.source.html#l524">get_contextid</a>(<a href="../../../_variables/level.html">$level</a>, <a href="../../../_variables/instance.html">$instance</a> = 0)&nbsp;&nbsp;
<a href="../../../_functions/get_contextid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Generates an artificial context id<BR>
</b><BR>Moodle 1.9 backups do not contain any context information. But we need them<BR>
in Moodle 2.x format so here we generate fictive context id for every given<BR>
context level + instance combo.<BR>
<BR>
CONTEXT_SYSTEM and CONTEXT_COURSE ignore the $instance as they represent a<BR>
single system or the course being restored.<BR>
<BR>
<b>param:</b> int $level the context level, like CONTEXT_COURSE or CONTEXT_MODULE<br>
<b>param:</b> int $instance the instance id, for example $course-&gt;id for courses or $cm-&gt;id for activity modules<br>
<b>return:</b> int the context id<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_nextid" onClick="logFunction('get_nextid', 'lib.php.source.html#l560')" href="lib.php.source.html#l560">get_nextid</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_nextid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Simple autoincrement generator<BR>
</b><BR><b>return:</b> int the next number in a row of numbers<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_file_manager" onClick="logFunction('get_file_manager', 'lib.php.source.html#l569')" href="lib.php.source.html#l569">get_file_manager</a>(<a href="../../../_variables/contextid.html">$contextid</a> = null, <a href="../../../_variables/component.html">$component</a> = null, <a href="../../../_variables/filearea.html">$filearea</a> = null, <a href="../../../_variables/itemid.html">$itemid</a> = 0, <a href="../../../_variables/userid.html">$userid</a> = null)&nbsp;&nbsp;
<a href="../../../_functions/get_file_manager.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates and returns new instance of the file manager<BR>
</b><BR><b>param:</b> int $contextid the default context id of the files being migrated<br>
<b>param:</b> string $component the default component name of the files being migrated<br>
<b>param:</b> string $filearea the default file area of the files being migrated<br>
<b>param:</b> int $itemid the default item id of the files being migrated<br>
<b>param:</b> int $userid initial user id of the files being migrated<br>
<b>return:</b> moodle1_file_manager<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_inforef_manager" onClick="logFunction('get_inforef_manager', 'lib.php.source.html#l583')" href="lib.php.source.html#l583">get_inforef_manager</a>(<a href="../../../_variables/name.html">$name</a>, <a href="../../../_variables/id.html">$id</a> = 0)&nbsp;&nbsp;
<a href="../../../_functions/get_inforef_manager.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates and returns new instance of the inforef manager<BR>
</b><BR><b>param:</b> string $name the name of the annotator (like course, section, activity, block)<br>
<b>param:</b> int $id the id of the annotator if required<br>
<b>return:</b> moodle1_inforef_manager<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="migrate_referenced_files" onClick="logFunction('migrate_referenced_files', 'lib.php.source.html#l595')" href="lib.php.source.html#l595">migrate_referenced_files</a>(<a href="../../../_variables/text.html">$text</a>, moodle1_file_manager <a href="../../../_variables/fileman.html">$fileman</a>)&nbsp;&nbsp;
<a href="../../../_functions/migrate_referenced_files.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Migrates all course files referenced from the hypertext using the given filemanager<BR>
</b><BR>This is typically used to convert images embedded into the intro fields.<BR>
<BR>
<b>param:</b> string $text hypertext containing $@FILEPHP@$ referenced<br>
<b>param:</b> moodle1_file_manager $fileman file manager to use for the file migration<br>
<b>return:</b> string the original $text with $@FILEPHP@$ references replaced with the new @@PLUGINFILE@@<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="find_referenced_files" onClick="logFunction('find_referenced_files', 'lib.php.source.html#l622')" href="lib.php.source.html#l622">find_referenced_files</a>(<a href="../../../_variables/text.html">$text</a>)&nbsp;&nbsp;
<a href="../../../_functions/find_referenced_files.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Detects all links to file.php encoded via $@FILEPHP@$ and returns the files to migrate<BR>
</b><BR><b>param:</b> string $text<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="rewrite_filephp_usage" onClick="logFunction('rewrite_filephp_usage', 'lib.php.source.html#l656')" href="lib.php.source.html#l656">rewrite_filephp_usage</a>(<a href="../../../_variables/text.html">$text</a>, array <a href="../../../_variables/files.html">$files</a>)&nbsp;&nbsp;
<a href="../../../_functions/rewrite_filephp_usage.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Given the list of migrated files, rewrites references to them from $@FILEPHP@$ form to the @@PLUGINFILE@@ one<BR>
</b><BR><b>param:</b> string $text<br>
<b>param:</b> array $files<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="description" onClick="logFunction('description', 'lib.php.source.html#l685')" href="lib.php.source.html#l685">description</a>()&nbsp;&nbsp;
<a href="../../../_functions/description.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR></td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="moodle1_convert_exception"><b>moodle1_convert_exception</b></a>&nbsp;&nbsp;- <a href="../../../_classes/moodle1_convert_exception.html"><small>X-Ref</small></a>
</p>
<b>Exception thrown by this converter<BR>
</b><br>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="moodle1_convert_storage_exception"><b>moodle1_convert_storage_exception</b></a>&nbsp;&nbsp;- <a href="../../../_classes/moodle1_convert_storage_exception.html"><small>X-Ref</small></a>
</p>
<b>Exception thrown by the temporary storage subsystem of moodle1_converter<BR>
</b><br>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="moodle1_convert_empty_storage_exception"><b>moodle1_convert_empty_storage_exception</b></a>&nbsp;&nbsp;- <a href="../../../_classes/moodle1_convert_empty_storage_exception.html"><small>X-Ref</small></a>
</p>
<b>Exception thrown by the temporary storage subsystem of moodle1_converter<BR>
</b><br>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="moodle1_parser_processor"><b>moodle1_parser_processor</b></a>&nbsp;&nbsp;- <a href="../../../_classes/moodle1_parser_processor.html"><small>X-Ref</small></a>
</p>
<b>XML parser processor used for processing parsed moodle.xml<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'lib.php.source.html#l725')" href="lib.php.source.html#l725">__construct</a>(moodle1_converter <a href="../../../_variables/converter.html">$converter</a>)&nbsp;&nbsp;
<a href="../../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><i>No description</i></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process_cdata" onClick="logFunction('process_cdata', 'lib.php.source.html#l730')" href="lib.php.source.html#l730">process_cdata</a>(<a href="../../../_variables/cdata.html">$cdata</a>)&nbsp;&nbsp;
<a href="../../../_functions/process_cdata.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Provides NULL decoding<BR>
</b><BR>Note that we do not decode $@FILEPHP@$ and friends here as we are going to write them<BR>
back immediately into another XML file.<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="dispatch_chunk" onClick="logFunction('dispatch_chunk', 'lib.php.source.html#l745')" href="lib.php.source.html#l745">dispatch_chunk</a>(<a href="../../../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../../../_functions/dispatch_chunk.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Dispatches the data chunk to the converter class<BR>
</b><BR><b>param:</b> array $data the chunk of parsed data<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="notify_path_start" onClick="logFunction('notify_path_start', 'lib.php.source.html#l754')" href="lib.php.source.html#l754">notify_path_start</a>(<a href="../../../_variables/path.html">$path</a>)&nbsp;&nbsp;
<a href="../../../_functions/notify_path_start.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Informs the converter at the start of a watched path<BR>
</b><BR><b>param:</b> string $path<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="notify_path_end" onClick="logFunction('notify_path_end', 'lib.php.source.html#l763')" href="lib.php.source.html#l763">notify_path_end</a>(<a href="../../../_variables/path.html">$path</a>)&nbsp;&nbsp;
<a href="../../../_functions/notify_path_end.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Informs the converter at the end of a watched path<BR>
</b><BR><b>param:</b> string $path<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="moodle1_xml_transformer"><b>moodle1_xml_transformer</b></a>&nbsp;&nbsp;- <a href="../../../_classes/moodle1_xml_transformer.html"><small>X-Ref</small></a>
</p>
<b>XML transformer that modifies the content of the files being written during the conversion<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="process" onClick="logFunction('process', 'lib.php.source.html#l781')" href="lib.php.source.html#l781">process</a>(<a href="../../../_variables/content.html">$content</a>)&nbsp;&nbsp;
<a href="../../../_functions/process.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Modify the content before it is writter to a file<BR>
</b><BR><b>param:</b> string|mixed $content<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="convert_path"><b>convert_path</b></a>&nbsp;&nbsp;- <a href="../../../_classes/convert_path.html"><small>X-Ref</small></a>
</p>
<b>Class representing a path to be converted from XML file<BR>
</b><br>
This was created as a copy of {@link restore_path_element} and should be refactored<BR>
probably.<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'lib.php.source.html#l865')" href="lib.php.source.html#l865">__construct</a>(<a href="../../../_variables/name.html">$name</a>, <a href="../../../_variables/path.html">$path</a>, array <a href="../../../_variables/recipe.html">$recipe</a> = array()&nbsp;&nbsp;
<a href="../../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR>The optional recipe array can have three keys, and for each key, the value is another array.<BR>
- newfields&nbsp;&nbsp;&nbsp;&nbsp;=&gt; array fieldname =&gt; defaultvalue indicates fields that have been added to the table,<BR>
and so should be added to the XML.<BR>
- dropfields&nbsp;&nbsp;&nbsp;=&gt; array fieldname&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indicates fieldsthat have been dropped from the table,<BR>
and so can be dropped from the XML.<BR>
- renamefields =&gt; array oldname =&gt; newname&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indicates fieldsthat have been renamed in the table,<BR>
and so should be renamed in the XML.<BR>
{@line moodle1_course_outline_handler} is a good example that uses all of these.<BR>
<BR>
<b>param:</b> string $name name of the element<br>
<b>param:</b> string $path path of the element<br>
<b>param:</b> array $recipe basic description of the structure conversion<br>
<b>param:</b> bool $grouped to gather information in grouped mode or no<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_processing_object" onClick="logFunction('set_processing_object', 'lib.php.source.html#l910')" href="lib.php.source.html#l910">set_processing_object</a>(<a href="../../../_variables/pobject.html">$pobject</a>)&nbsp;&nbsp;
<a href="../../../_functions/set_processing_object.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Validates and sets the given processing object<BR>
</b><BR><b>param:</b> object $pobject processing object, must provide a method to be called<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_processing_method" onClick="logFunction('set_processing_method', 'lib.php.source.html#l920')" href="lib.php.source.html#l920">set_processing_method</a>(<a href="../../../_variables/pmethod.html">$pmethod</a>)&nbsp;&nbsp;
<a href="../../../_functions/set_processing_method.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets the name of the processing method<BR>
</b><BR><b>param:</b> string $pmethod<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_start_method" onClick="logFunction('set_start_method', 'lib.php.source.html#l929')" href="lib.php.source.html#l929">set_start_method</a>(<a href="../../../_variables/smethod.html">$smethod</a>)&nbsp;&nbsp;
<a href="../../../_functions/set_start_method.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets the name of the path start event listener<BR>
</b><BR><b>param:</b> string $smethod<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_end_method" onClick="logFunction('set_end_method', 'lib.php.source.html#l938')" href="lib.php.source.html#l938">set_end_method</a>(<a href="../../../_variables/emethod.html">$emethod</a>)&nbsp;&nbsp;
<a href="../../../_functions/set_end_method.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets the name of the path end event listener<BR>
</b><BR><b>param:</b> string $emethod<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_tags" onClick="logFunction('set_tags', 'lib.php.source.html#l947')" href="lib.php.source.html#l947">set_tags</a>(<a href="../../../_variables/tags.html">$tags</a>)&nbsp;&nbsp;
<a href="../../../_functions/set_tags.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets the element tags<BR>
</b><BR><b>param:</b> array $tags<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_dropped_fields" onClick="logFunction('set_dropped_fields', 'lib.php.source.html#l956')" href="lib.php.source.html#l956">set_dropped_fields</a>(array <a href="../../../_variables/fields.html">$fields</a>)&nbsp;&nbsp;
<a href="../../../_functions/set_dropped_fields.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets the list of deprecated fields to drop<BR>
</b><BR><b>param:</b> array $fields<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_renamed_fields" onClick="logFunction('set_renamed_fields', 'lib.php.source.html#l965')" href="lib.php.source.html#l965">set_renamed_fields</a>(array <a href="../../../_variables/fields.html">$fields</a>)&nbsp;&nbsp;
<a href="../../../_functions/set_renamed_fields.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets the required new names of the current fields<BR>
</b><BR><b>param:</b> array $fields (string)$currentname =&gt; (string)$newname<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set_new_fields" onClick="logFunction('set_new_fields', 'lib.php.source.html#l974')" href="lib.php.source.html#l974">set_new_fields</a>(array <a href="../../../_variables/fields.html">$fields</a>)&nbsp;&nbsp;
<a href="../../../_functions/set_new_fields.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets the new fields and their values<BR>
</b><BR><b>param:</b> array $fields (string)$field =&gt; (mixed)value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="apply_recipes" onClick="logFunction('apply_recipes', 'lib.php.source.html#l983')" href="lib.php.source.html#l983">apply_recipes</a>(array <a href="../../../_variables/data.html">$data</a>)&nbsp;&nbsp;
<a href="../../../_functions/apply_recipes.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Cooks the parsed tags data by applying known recipes<BR>
</b><BR>Recipes are used for common trivial operations like adding new fields<BR>
or renaming fields. The handler's processing method receives cooked<BR>
data.<BR>
<BR>
<b>param:</b> array $data the contents of the element<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_name" onClick="logFunction('get_name', 'lib.php.source.html#l1033')" href="lib.php.source.html#l1033">get_name</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> string the element given name<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_path" onClick="logFunction('get_path', 'lib.php.source.html#l1040')" href="lib.php.source.html#l1040">get_path</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_path.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> string the path to the element<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_grouped" onClick="logFunction('is_grouped', 'lib.php.source.html#l1047')" href="lib.php.source.html#l1047">is_grouped</a>()&nbsp;&nbsp;
<a href="../../../_functions/is_grouped.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> bool flag to define if this element will get child ones grouped or no<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_processing_object" onClick="logFunction('get_processing_object', 'lib.php.source.html#l1054')" href="lib.php.source.html#l1054">get_processing_object</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_processing_object.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> object the processing object providing the processing method<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_processing_method" onClick="logFunction('get_processing_method', 'lib.php.source.html#l1061')" href="lib.php.source.html#l1061">get_processing_method</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_processing_method.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> string the name of the method to call to process the element<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_start_method" onClick="logFunction('get_start_method', 'lib.php.source.html#l1068')" href="lib.php.source.html#l1068">get_start_method</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_start_method.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> string the name of the path start event listener<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_end_method" onClick="logFunction('get_end_method', 'lib.php.source.html#l1075')" href="lib.php.source.html#l1075">get_end_method</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_end_method.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> string the name of the path end event listener<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_tags" onClick="logFunction('get_tags', 'lib.php.source.html#l1082')" href="lib.php.source.html#l1082">get_tags</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_tags.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>return:</b> mixed the element data<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="validate_name" onClick="logFunction('validate_name', 'lib.php.source.html#l1089')" href="lib.php.source.html#l1089">validate_name</a>(<a href="../../../_variables/name.html">$name</a>)&nbsp;&nbsp;
<a href="../../../_functions/validate_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Makes sure the given name is a valid element name<BR>
</b><BR>Note it may look as if we used exceptions for code flow control here. That's not the case<BR>
as we actually validate the code, not the user data. And the code is supposed to be<BR>
correct.<BR>
<BR>
<b>param:</b> string @name the element given name<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="validate_pobject" onClick="logFunction('validate_pobject', 'lib.php.source.html#l1113')" href="lib.php.source.html#l1113">validate_pobject</a>(<a href="../../../_variables/pobject.html">$pobject</a>)&nbsp;&nbsp;
<a href="../../../_functions/validate_pobject.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Makes sure that the given object is a valid processing object<BR>
</b><BR>The processing object must be an object providing at least element's processing method<BR>
or path-reached-end event listener or path-reached-start listener method.<BR>
<BR>
Note it may look as if we used exceptions for code flow control here. That's not the case<BR>
as we actually validate the code, not the user data. And the code is supposed to be<BR>
correct.<BR>
<BR>
<b>param:</b> object $pobject<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="convert_path_exception"><b>convert_path_exception</b></a>&nbsp;&nbsp;- <a href="../../../_classes/convert_path_exception.html"><small>X-Ref</small></a>
</p>
<b>Exception being thrown by {@link convert_path} methods<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'lib.php.source.html#l1145')" href="lib.php.source.html#l1145">__construct</a>(<a href="../../../_variables/errorcode.html">$errorcode</a>, <a href="../../../_variables/a.html">$a</a> = null, <a href="../../../_variables/debuginfo.html">$debuginfo</a> = null)&nbsp;&nbsp;
<a href="../../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor<BR>
</b><BR><b>param:</b> string $errorcode key for the corresponding error string<br>
<b>param:</b> mixed $a extra words and phrases that might be required by the error string<br>
<b>param:</b> string $debuginfo optional debugging information<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="moodle1_file_manager"><b>moodle1_file_manager</b></a>&nbsp;&nbsp;- <a href="../../../_classes/moodle1_file_manager.html"><small>X-Ref</small></a>
</p>
<b>The class responsible for files migration<BR>
</b><br>
The files in Moodle 1.9 backup are stored in moddata, user_files, group_files,<BR>
course_files and site_files folders.<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'lib.php.source.html#l1190')" href="lib.php.source.html#l1190">__construct</a>(moodle1_converter <a href="../../../_variables/converter.html">$converter</a>, <a href="../../../_variables/contextid.html">$contextid</a> = null, <a href="../../../_variables/component.html">$component</a> = null, <a href="../../../_variables/filearea.html">$filearea</a> = null, <a href="../../../_variables/itemid.html">$itemid</a> = 0, <a href="../../../_variables/userid.html">$userid</a> = null)&nbsp;&nbsp;
<a href="../../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor optionally accepting some default values for the migrated files<BR>
</b><BR><b>param:</b> moodle1_converter $converter the converter instance we serve to<br>
<b>param:</b> int $contextid initial context id of the files being migrated<br>
<b>param:</b> string $component initial component name of the files being migrated<br>
<b>param:</b> string $filearea initial file area of the files being migrated<br>
<b>param:</b> int $itemid initial item id of the files being migrated<br>
<b>param:</b> int $userid initial user id of the files being migrated<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="migrate_file" onClick="logFunction('migrate_file', 'lib.php.source.html#l1212')" href="lib.php.source.html#l1212">migrate_file</a>(<a href="../../../_variables/sourcepath.html">$sourcepath</a>, <a href="../../../_variables/filepath.html">$filepath</a> = '/', <a href="../../../_variables/filename.html">$filename</a> = null, <a href="../../../_variables/sortorder.html">$sortorder</a> = 0, <a href="../../../_variables/timecreated.html">$timecreated</a> = null, <a href="../../../_variables/timemodified.html">$timemodified</a> = null)&nbsp;&nbsp;
<a href="../../../_functions/migrate_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Migrates one given file stored on disk<BR>
</b><BR><b>param:</b> string $sourcepath the path to the source local file within the backup archive {@example 'moddata/foobar/file.ext'}<br>
<b>param:</b> string $filepath the file path of the migrated file, defaults to the root directory '/' {@example '/sub/dir/'}<br>
<b>param:</b> string $filename the name of the migrated file, defaults to the same as the source file has<br>
<b>param:</b> int $sortorder the sortorder of the file (main files have sortorder set to 1)<br>
<b>param:</b> int $timecreated override the timestamp of when the migrated file should appear as created<br>
<b>param:</b> int $timemodified override the timestamp of when the migrated file should appear as modified<br>
<b>return:</b> int id of the migrated file<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="migrate_directory" onClick="logFunction('migrate_directory', 'lib.php.source.html#l1285')" href="lib.php.source.html#l1285">migrate_directory</a>(<a href="../../../_variables/rootpath.html">$rootpath</a>, <a href="../../../_variables/relpath.html">$relpath</a>='/')&nbsp;&nbsp;
<a href="../../../_functions/migrate_directory.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Migrates all files in the given directory<BR>
</b><BR><b>param:</b> string $rootpath path within the backup archive to the root directory containing the files {@example 'course_files'}<br>
<b>param:</b> string $relpath relative path used during the recursion - do not provide when calling this!<br>
<b>return:</b> array ids of the migrated files, empty array if the $rootpath not found<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_fileids" onClick="logFunction('get_fileids', 'lib.php.source.html#l1342')" href="lib.php.source.html#l1342">get_fileids</a>()&nbsp;&nbsp;
<a href="../../../_functions/get_fileids.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the list of all file ids migrated by this instance so far<BR>
</b><BR><b>return:</b> array of int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="reset_fileids" onClick="logFunction('reset_fileids', 'lib.php.source.html#l1351')" href="lib.php.source.html#l1351">reset_fileids</a>()&nbsp;&nbsp;
<a href="../../../_functions/reset_fileids.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Explicitly clear the list of file ids migrated by this instance so far<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="log" onClick="logFunction('log', 'lib.php.source.html#l1358')" href="lib.php.source.html#l1358">log</a>(<a href="../../../_variables/message.html">$message</a>, <a href="../../../_variables/level.html">$level</a>, <a href="../../../_variables/a.html">$a</a> = null, <a href="../../../_variables/depth.html">$depth</a> = null, <a href="../../../_variables/display.html">$display</a> = false)&nbsp;&nbsp;
<a href="../../../_functions/log.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Log a message using the converter's logging mechanism<BR>
</b><BR><b>param:</b> string $message message text<br>
<b>param:</b> int $level message level {@example backup::LOG_WARNING}<br>
<b>param:</b> null|mixed $a additional information<br>
<b>param:</b> null|int $depth the message depth<br>
<b>param:</b> bool $display whether the message should be sent to the output, too<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="make_file_record" onClick="logFunction('make_file_record', 'lib.php.source.html#l1373')" href="lib.php.source.html#l1373">make_file_record</a>(array <a href="../../../_variables/fileinfo.html">$fileinfo</a>)&nbsp;&nbsp;
<a href="../../../_functions/make_file_record.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Prepares a fake record from the files table<BR>
</b><BR><b>param:</b> array $fileinfo explicit file data<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_file_to_pool" onClick="logFunction('add_file_to_pool', 'lib.php.source.html#l1409')" href="lib.php.source.html#l1409">add_file_to_pool</a>(<a href="../../../_variables/pathname.html">$pathname</a>)&nbsp;&nbsp;
<a href="../../../_functions/add_file_to_pool.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Copies the given file to the pool directory<BR>
</b><BR>Returns an array containing SHA1 hash of the file contents, the file size<BR>
and a flag indicating whether the file was actually added to the pool or whether<BR>
it was already there.<BR>
<BR>
<b>param:</b> string $pathname the full path to the file<br>
<b>return:</b> array with keys (string)contenthash, (int)filesize, (bool)newfile<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="stash_file" onClick="logFunction('stash_file', 'lib.php.source.html#l1454')" href="lib.php.source.html#l1454">stash_file</a>(array <a href="../../../_variables/filerecord.html">$filerecord</a>)&nbsp;&nbsp;
<a href="../../../_functions/stash_file.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Stashes the file record into 'files' stash and adds the record id to list of migrated files<BR>
</b><BR><b>param:</b> array $filerecord<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="moodle1_inforef_manager"><b>moodle1_inforef_manager</b></a>&nbsp;&nbsp;- <a href="../../../_classes/moodle1_inforef_manager.html"><small>X-Ref</small></a>
</p>
<b>Helper class that handles ids annotations for inforef.xml files<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'lib.php.source.html#l1480')" href="lib.php.source.html#l1480">__construct</a>(moodle1_converter <a href="../../../_variables/converter.html">$converter</a>, <a href="../../../_variables/name.html">$name</a>, <a href="../../../_variables/id.html">$id</a> = 0)&nbsp;&nbsp;
<a href="../../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates new instance of the manager for the given annotator<BR>
</b><BR>The identification of the annotator we serve to may be important in the future<BR>
when we move the actual storage of the references from memory to a persistent storage.<BR>
<BR>
<b>param:</b> moodle1_converter $converter<br>
<b>param:</b> string $name the name of the annotator (like course, section, activity, block)<br>
<b>param:</b> int $id the id of the annotator if required<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_ref" onClick="logFunction('add_ref', 'lib.php.source.html#l1495')" href="lib.php.source.html#l1495">add_ref</a>(<a href="../../../_variables/item.html">$item</a>, <a href="../../../_variables/id.html">$id</a>)&nbsp;&nbsp;
<a href="../../../_functions/add_ref.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Adds a reference<BR>
</b><BR><b>param:</b> string $item the name of referenced item (like user, file, scale, outcome or grade_item)<br>
<b>param:</b> int $id the value of the reference<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_refs" onClick="logFunction('add_refs', 'lib.php.source.html#l1506')" href="lib.php.source.html#l1506">add_refs</a>(<a href="../../../_variables/item.html">$item</a>, array <a href="../../../_variables/ids.html">$ids</a>)&nbsp;&nbsp;
<a href="../../../_functions/add_refs.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Adds a bulk of references<BR>
</b><BR><b>param:</b> string $item the name of referenced item (like user, file, scale, outcome or grade_item)<br>
<b>param:</b> array $ids the list of referenced ids<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="write_refs" onClick="logFunction('write_refs', 'lib.php.source.html#l1519')" href="lib.php.source.html#l1519">write_refs</a>(xml_writer <a href="../../../_variables/xmlwriter.html">$xmlwriter</a>)&nbsp;&nbsp;
<a href="../../../_functions/write_refs.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Writes the current references using a given opened xml writer<BR>
</b><BR><b>param:</b> xml_writer $xmlwriter<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="validate_item" onClick="logFunction('validate_item', 'lib.php.source.html#l1536')" href="lib.php.source.html#l1536">validate_item</a>(<a href="../../../_variables/item.html">$item</a>)&nbsp;&nbsp;
<a href="../../../_functions/validate_item.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Makes sure that the given name is a valid citizen of inforef.xml file<BR>
</b><BR><b>param:</b> string $item the name of reference (like user, file, scale, outcome or grade_item)<br>
</td></tr></table>

<br>
</div>
</div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
