<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /question/type/match/backup/moodle2/restore_qtype_match_plugin.class.php source</title>
    <link rel="stylesheet" href="../../../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../../../';
subdir='question/type/match/backup/moodle2';
filename='restore_qtype_match_plugin.class.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/question/type/match/backup/moodle2/</a> -> <a href="restore_qtype_match_plugin.class.php.html">restore_qtype_match_plugin.class.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="restore_qtype_match_plugin.class.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="restore_qtype_match_plugin.class.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * @package    moodlecore</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * @subpackage backup-moodle2</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @copyright  2010 onwards Eloy Lafuente (stronk7) {@link http://stronk7.com}</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> */</span>
<a name="l23"><span class="linenum">  23</span></a>  
<a name="l24"><span class="linenum">  24</span></a>  
<a name="l25"><span class="linenum">  25</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment">/**</span>
<a name="l29"><span class="linenum">  29</span></a>  <span class="comment"> * Restore plugin class that provides the necessary information</span>
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment"> * needed to restore one match qtype plugin.</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> *</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * @copyright  2010 onwards Eloy Lafuente (stronk7) {@link http://stronk7.com}</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> */</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('restore_qtype_match_plugin')" href="../../../../../_classes/restore_qtype_match_plugin.html" onMouseOver="classPopup(event,'restore_qtype_match_plugin')">restore_qtype_match_plugin</a> extends restore_qtype_plugin {
<a name="l36"><span class="linenum">  36</span></a>  
<a name="l37"><span class="linenum">  37</span></a>      <span class="comment">/**</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment">     * A simple answer, questiontext to id cache for a match answers.</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment">     * @var array</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment">     */</span>
<a name="l41"><span class="linenum">  41</span></a>      private <a class="var it39188" onMouseOver="hilite(39188)" onMouseOut="lolite()" onClick="logVariable('questionsubcache')" href="../../../../../_variables/questionsubcache.html">$questionsubcache</a> = array();
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>      <span class="comment">/**</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     * The id of the current question in the questionsubcache.</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">     * @var int</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     */</span>
<a name="l47"><span class="linenum">  47</span></a>      private <a class="var it39189" onMouseOver="hilite(39189)" onMouseOut="lolite()" onClick="logVariable('questionsubcacheid')" href="../../../../../_variables/questionsubcacheid.html">$questionsubcacheid</a> = null;
<a name="l48"><span class="linenum">  48</span></a>  
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>      <span class="comment">/**</span>
<a name="l51"><span class="linenum">  51</span></a>  <span class="comment">     * Returns the paths to be handled by the plugin at question level.</span>
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">     */</span>
<a name="l53"><span class="linenum">  53</span></a>      protected function <a class="function" onClick="logFunction('define_question_plugin_structure')" href="../../../../../_functions/define_question_plugin_structure.html" onMouseOver="funcPopup(event,'define_question_plugin_structure')">define_question_plugin_structure</a>() {
<a name="l54"><span class="linenum">  54</span></a>  
<a name="l55"><span class="linenum">  55</span></a>          <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('paths')" href="../../../../../_variables/paths.html">$paths</a> = array();
<a name="l56"><span class="linenum">  56</span></a>  
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">        // Add own qtype stuff.</span>
<a name="l58"><span class="linenum">  58</span></a>          <a class="var it2518" onMouseOver="hilite(2518)" onMouseOut="lolite()" onClick="logVariable('elename')" href="../../../../../_variables/elename.html">$elename</a> = 'matchoptions';
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">        // We used get_recommended_name() so this works.</span>
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it2519" onMouseOver="hilite(2519)" onMouseOut="lolite()" onClick="logVariable('elepath')" href="../../../../../_variables/elepath.html">$elepath</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_pathfor')" href="../../../../../_functions/get_pathfor.html" onMouseOver="funcPopup(event,'get_pathfor')">get_pathfor</a>('/matchoptions');
<a name="l61"><span class="linenum">  61</span></a>          <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('paths')" href="../../../../../_variables/paths.html">$paths</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('restore_path_element')" href="../../../../../_classes/restore_path_element.html" onMouseOver="classPopup(event,'restore_path_element')">restore_path_element</a>(<a class="var it2518" onMouseOver="hilite(2518)" onMouseOut="lolite()" onClick="logVariable('elename')" href="../../../../../_variables/elename.html">$elename</a>, <a class="var it2519" onMouseOver="hilite(2519)" onMouseOut="lolite()" onClick="logVariable('elepath')" href="../../../../../_variables/elepath.html">$elepath</a>);
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it2518" onMouseOver="hilite(2518)" onMouseOut="lolite()" onClick="logVariable('elename')" href="../../../../../_variables/elename.html">$elename</a> = 'match';
<a name="l64"><span class="linenum">  64</span></a>  <span class="comment">        // We used get_recommended_name() so this works.</span>
<a name="l65"><span class="linenum">  65</span></a>          <a class="var it2519" onMouseOver="hilite(2519)" onMouseOut="lolite()" onClick="logVariable('elepath')" href="../../../../../_variables/elepath.html">$elepath</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_pathfor')" href="../../../../../_functions/get_pathfor.html" onMouseOver="funcPopup(event,'get_pathfor')">get_pathfor</a>('/matches/match');
<a name="l66"><span class="linenum">  66</span></a>          <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('paths')" href="../../../../../_variables/paths.html">$paths</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('restore_path_element')" href="../../../../../_classes/restore_path_element.html" onMouseOver="classPopup(event,'restore_path_element')">restore_path_element</a>(<a class="var it2518" onMouseOver="hilite(2518)" onMouseOut="lolite()" onClick="logVariable('elename')" href="../../../../../_variables/elename.html">$elename</a>, <a class="var it2519" onMouseOver="hilite(2519)" onMouseOut="lolite()" onClick="logVariable('elepath')" href="../../../../../_variables/elepath.html">$elepath</a>);
<a name="l67"><span class="linenum">  67</span></a>  
<a name="l68"><span class="linenum">  68</span></a>          return <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('paths')" href="../../../../../_variables/paths.html">$paths</a>;
<a name="l69"><span class="linenum">  69</span></a>      }
<a name="l70"><span class="linenum">  70</span></a>  
<a name="l71"><span class="linenum">  71</span></a>      <span class="comment">/**</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">     * Process the qtype/matchoptions element</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     */</span>
<a name="l74"><span class="linenum">  74</span></a>      public function <a class="function" onClick="logFunction('process_matchoptions')" href="../../../../../_functions/process_matchoptions.html" onMouseOver="funcPopup(event,'process_matchoptions')">process_matchoptions</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>) {
<a name="l75"><span class="linenum">  75</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../../_variables/DB.html">$DB</a>;
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a> = (object)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>;
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('oldid')" href="../../../../../_variables/oldid.html">$oldid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/id.html">id</a>;
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">        // Detect if the question is created or mapped.</span>
<a name="l81"><span class="linenum">  81</span></a>          <a class="var it8593" onMouseOver="hilite(8593)" onMouseOut="lolite()" onClick="logVariable('oldquestionid')" href="../../../../../_variables/oldquestionid.html">$oldquestionid</a>   = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_old_parentid')" href="../../../../../_functions/get_old_parentid.html" onMouseOver="funcPopup(event,'get_old_parentid')">get_old_parentid</a>('question');
<a name="l82"><span class="linenum">  82</span></a>          <a class="var it8594" onMouseOver="hilite(8594)" onMouseOut="lolite()" onClick="logVariable('newquestionid')" href="../../../../../_variables/newquestionid.html">$newquestionid</a>   = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_new_parentid')" href="../../../../../_functions/get_new_parentid.html" onMouseOver="funcPopup(event,'get_new_parentid')">get_new_parentid</a>('question');
<a name="l83"><span class="linenum">  83</span></a>          <a class="var it8595" onMouseOver="hilite(8595)" onMouseOut="lolite()" onClick="logVariable('questioncreated')" href="../../../../../_variables/questioncreated.html">$questioncreated</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mappingid')" href="../../../../../_functions/get_mappingid.html" onMouseOver="funcPopup(event,'get_mappingid')">get_mappingid</a>('question_created', <a class="var it8593" onMouseOver="hilite(8593)" onMouseOut="lolite()" onClick="logVariable('oldquestionid')" href="../../../../../_variables/oldquestionid.html">$oldquestionid</a>) ? true : false;
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">        // If the question has been created by restore, we need to create its qtype_match_options too.</span>
<a name="l86"><span class="linenum">  86</span></a>          if (<a class="var it8595" onMouseOver="hilite(8595)" onMouseOut="lolite()" onClick="logVariable('questioncreated')" href="../../../../../_variables/questioncreated.html">$questioncreated</a>) {
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">            // Fill in some field that were added in 2.1, and so which may be missing</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">            // from backups made in older versions of Moodle.</span>
<a name="l89"><span class="linenum">  89</span></a>              if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('correctfeedback')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/correctfeedback.html">correctfeedback</a>)) {
<a name="l90"><span class="linenum">  90</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('correctfeedback')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/correctfeedback.html">correctfeedback</a> = '';
<a name="l91"><span class="linenum">  91</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('correctfeedbackformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/correctfeedbackformat.html">correctfeedbackformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../../../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l92"><span class="linenum">  92</span></a>              }
<a name="l93"><span class="linenum">  93</span></a>              if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('partiallycorrectfeedback')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/partiallycorrectfeedback.html">partiallycorrectfeedback</a>)) {
<a name="l94"><span class="linenum">  94</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('partiallycorrectfeedback')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/partiallycorrectfeedback.html">partiallycorrectfeedback</a> = '';
<a name="l95"><span class="linenum">  95</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('partiallycorrectfeedbackformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/partiallycorrectfeedbackformat.html">partiallycorrectfeedbackformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../../../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l96"><span class="linenum">  96</span></a>              }
<a name="l97"><span class="linenum">  97</span></a>              if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('incorrectfeedback')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/incorrectfeedback.html">incorrectfeedback</a>)) {
<a name="l98"><span class="linenum">  98</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('incorrectfeedback')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/incorrectfeedback.html">incorrectfeedback</a> = '';
<a name="l99"><span class="linenum">  99</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('incorrectfeedbackformat')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/incorrectfeedbackformat.html">incorrectfeedbackformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../../../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l100"><span class="linenum"> 100</span></a>              }
<a name="l101"><span class="linenum"> 101</span></a>              if (!isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('shownumcorrect')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/shownumcorrect.html">shownumcorrect</a>)) {
<a name="l102"><span class="linenum"> 102</span></a>                  <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('shownumcorrect')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/shownumcorrect.html">shownumcorrect</a> = 0;
<a name="l103"><span class="linenum"> 103</span></a>              }
<a name="l104"><span class="linenum"> 104</span></a>  
<a name="l105"><span class="linenum"> 105</span></a>  <span class="comment">            // Adjust some columns.</span>
<a name="l106"><span class="linenum"> 106</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('questionid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/questionid.html">questionid</a> = <a class="var it8594" onMouseOver="hilite(8594)" onMouseOut="lolite()" onClick="logVariable('newquestionid')" href="../../../../../_variables/newquestionid.html">$newquestionid</a>;
<a name="l107"><span class="linenum"> 107</span></a>  
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment">            // It is possible for old backup files to contain unique key violations.</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment">            // We need to check to avoid that.</span>
<a name="l110"><span class="linenum"> 110</span></a>              if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../../../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('qtype_match_options', array('questionid' =&gt; <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('questionid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/questionid.html">questionid</a>))) {
<a name="l111"><span class="linenum"> 111</span></a>                  <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../../../../_variables/newitemid.html">$newitemid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('qtype_match_options', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>);
<a name="l112"><span class="linenum"> 112</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_mapping')" href="../../../../../_functions/set_mapping.html" onMouseOver="funcPopup(event,'set_mapping')">set_mapping</a>('qtype_match_options', <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('oldid')" href="../../../../../_variables/oldid.html">$oldid</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../../../../_variables/newitemid.html">$newitemid</a>);
<a name="l113"><span class="linenum"> 113</span></a>              }
<a name="l114"><span class="linenum"> 114</span></a>          }
<a name="l115"><span class="linenum"> 115</span></a>      }
<a name="l116"><span class="linenum"> 116</span></a>  
<a name="l117"><span class="linenum"> 117</span></a>      <span class="comment">/**</span>
<a name="l118"><span class="linenum"> 118</span></a>  <span class="comment">     * Process the qtype/matches/match element</span>
<a name="l119"><span class="linenum"> 119</span></a>  <span class="comment">     */</span>
<a name="l120"><span class="linenum"> 120</span></a>      public function <a class="function" onClick="logFunction('process_match')" href="../../../../../_functions/process_match.html" onMouseOver="funcPopup(event,'process_match')">process_match</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>) {
<a name="l121"><span class="linenum"> 121</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../../_variables/DB.html">$DB</a>;
<a name="l122"><span class="linenum"> 122</span></a>  
<a name="l123"><span class="linenum"> 123</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a> = (object)<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>;
<a name="l124"><span class="linenum"> 124</span></a>          <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('oldid')" href="../../../../../_variables/oldid.html">$oldid</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/id.html">id</a>;
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">        // Detect if the question is created or mapped.</span>
<a name="l127"><span class="linenum"> 127</span></a>          <a class="var it8593" onMouseOver="hilite(8593)" onMouseOut="lolite()" onClick="logVariable('oldquestionid')" href="../../../../../_variables/oldquestionid.html">$oldquestionid</a>   = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_old_parentid')" href="../../../../../_functions/get_old_parentid.html" onMouseOver="funcPopup(event,'get_old_parentid')">get_old_parentid</a>('question');
<a name="l128"><span class="linenum"> 128</span></a>          <a class="var it8594" onMouseOver="hilite(8594)" onMouseOut="lolite()" onClick="logVariable('newquestionid')" href="../../../../../_variables/newquestionid.html">$newquestionid</a>   = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_new_parentid')" href="../../../../../_functions/get_new_parentid.html" onMouseOver="funcPopup(event,'get_new_parentid')">get_new_parentid</a>('question');
<a name="l129"><span class="linenum"> 129</span></a>          <a class="var it8595" onMouseOver="hilite(8595)" onMouseOut="lolite()" onClick="logVariable('questioncreated')" href="../../../../../_variables/questioncreated.html">$questioncreated</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mappingid')" href="../../../../../_functions/get_mappingid.html" onMouseOver="funcPopup(event,'get_mappingid')">get_mappingid</a>('question_created', <a class="var it8593" onMouseOver="hilite(8593)" onMouseOut="lolite()" onClick="logVariable('oldquestionid')" href="../../../../../_variables/oldquestionid.html">$oldquestionid</a>) ? true : false;
<a name="l130"><span class="linenum"> 130</span></a>  
<a name="l131"><span class="linenum"> 131</span></a>          if (<a class="var it8595" onMouseOver="hilite(8595)" onMouseOut="lolite()" onClick="logVariable('questioncreated')" href="../../../../../_variables/questioncreated.html">$questioncreated</a>) {
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment">            // If the question has been created by restore, we need to create its</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">            // qtype_match_subquestions too.</span>
<a name="l134"><span class="linenum"> 134</span></a>  
<a name="l135"><span class="linenum"> 135</span></a>  <span class="comment">            // Adjust some columns.</span>
<a name="l136"><span class="linenum"> 136</span></a>              <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('questionid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/questionid.html">questionid</a> = <a class="var it8594" onMouseOver="hilite(8594)" onMouseOut="lolite()" onClick="logVariable('newquestionid')" href="../../../../../_variables/newquestionid.html">$newquestionid</a>;
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment">            // Insert record.</span>
<a name="l138"><span class="linenum"> 138</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../../../../_variables/newitemid.html">$newitemid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('qtype_match_subquestions', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>);
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">            // Create mapping (there are files and states based on this).</span>
<a name="l140"><span class="linenum"> 140</span></a>              if (isset(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('code')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/code.html">code</a>)) {
<a name="l141"><span class="linenum"> 141</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_mapping')" href="../../../../../_functions/set_mapping.html" onMouseOver="funcPopup(event,'set_mapping')">set_mapping</a>('qtype_match_subquestion_codes', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('code')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/code.html">code</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../../../../_variables/newitemid.html">$newitemid</a>);
<a name="l142"><span class="linenum"> 142</span></a>              }
<a name="l143"><span class="linenum"> 143</span></a>  
<a name="l144"><span class="linenum"> 144</span></a>          } else {
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">            // Match questions require mapping of qtype_match_subquestions, because</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment">            // they are used by question_states-&gt;answer.</span>
<a name="l147"><span class="linenum"> 147</span></a>  
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment">            // Have we cached the current question?</span>
<a name="l149"><span class="linenum"> 149</span></a>              if (<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('questionsubcacheid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/questionsubcacheid.html">questionsubcacheid</a> !== <a class="var it8594" onMouseOver="hilite(8594)" onMouseOut="lolite()" onClick="logVariable('newquestionid')" href="../../../../../_variables/newquestionid.html">$newquestionid</a>) {
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment">                // The question changed, purge and start again!</span>
<a name="l151"><span class="linenum"> 151</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('questionsubcache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/questionsubcache.html">questionsubcache</a> = array();
<a name="l152"><span class="linenum"> 152</span></a>  
<a name="l153"><span class="linenum"> 153</span></a>                  <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../../../../_variables/params.html">$params</a> = array('question' =&gt; <a class="var it8594" onMouseOver="hilite(8594)" onMouseOut="lolite()" onClick="logVariable('newquestionid')" href="../../../../../_variables/newquestionid.html">$newquestionid</a>);
<a name="l154"><span class="linenum"> 154</span></a>                  <a class="var it39190" onMouseOver="hilite(39190)" onMouseOut="lolite()" onClick="logVariable('potentialsubs')" href="../../../../../_variables/potentialsubs.html">$potentialsubs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../../../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('qtype_match_subquestions',
<a name="l155"><span class="linenum"> 155</span></a>                      array('questionid' =&gt; <a class="var it8594" onMouseOver="hilite(8594)" onMouseOut="lolite()" onClick="logVariable('newquestionid')" href="../../../../../_variables/newquestionid.html">$newquestionid</a>), '', 'id, questiontext, answertext');
<a name="l156"><span class="linenum"> 156</span></a>  
<a name="l157"><span class="linenum"> 157</span></a>                  <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('questionsubcacheid')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/questionsubcacheid.html">questionsubcacheid</a> = <a class="var it8594" onMouseOver="hilite(8594)" onMouseOut="lolite()" onClick="logVariable('newquestionid')" href="../../../../../_variables/newquestionid.html">$newquestionid</a>;
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment">                // Cache all cleaned answers and questiontext.</span>
<a name="l159"><span class="linenum"> 159</span></a>                  foreach (<a class="var it39190" onMouseOver="hilite(39190)" onMouseOut="lolite()" onClick="logVariable('potentialsubs')" href="../../../../../_variables/potentialsubs.html">$potentialsubs</a> as <a class="var it39191" onMouseOver="hilite(39191)" onMouseOut="lolite()" onClick="logVariable('potentialsub')" href="../../../../../_variables/potentialsub.html">$potentialsub</a>) {
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment">                    // Clean in the same way than {@link xml_writer::xml_safe_utf8()}.</span>
<a name="l161"><span class="linenum"> 161</span></a>                      <a class="var it39192" onMouseOver="hilite(39192)" onMouseOut="lolite()" onClick="logVariable('cleanquestion')" href="../../../../../_variables/cleanquestion.html">$cleanquestion</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/[\x-\x8\xb-\xc\xe-\x1f\x7f]/is',
<a name="l162"><span class="linenum"> 162</span></a>                              '', <a class="var it39191" onMouseOver="hilite(39191)" onMouseOut="lolite()" onClick="logVariable('potentialsub')" href="../../../../../_variables/potentialsub.html">$potentialsub</a>-&gt;<a onClick="logVariable('questiontext')" class="var it45571" onMouseOver="hilite(45571)" onMouseOut="lolite()" href="../../../../../_variables/questiontext.html">questiontext</a>); <span class="comment">// Clean CTRL chars.</span>
<a name="l163"><span class="linenum"> 163</span></a>                      <a class="var it39192" onMouseOver="hilite(39192)" onMouseOut="lolite()" onClick="logVariable('cleanquestion')" href="../../../../../_variables/cleanquestion.html">$cleanquestion</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/\r\n|\r/&quot;, &quot;\n&quot;, <a class="var it39192" onMouseOver="hilite(39192)" onMouseOut="lolite()" onClick="logVariable('cleanquestion')" href="../../../../../_variables/cleanquestion.html">$cleanquestion</a>); <span class="comment">// Normalize line ending.</span>
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>                      <a class="var it39193" onMouseOver="hilite(39193)" onMouseOut="lolite()" onClick="logVariable('cleananswer')" href="../../../../../_variables/cleananswer.html">$cleananswer</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>('/[\x-\x8\xb-\xc\xe-\x1f\x7f]/is',
<a name="l166"><span class="linenum"> 166</span></a>                              '', <a class="var it39191" onMouseOver="hilite(39191)" onMouseOut="lolite()" onClick="logVariable('potentialsub')" href="../../../../../_variables/potentialsub.html">$potentialsub</a>-&gt;<a onClick="logVariable('answertext')" class="var it45571" onMouseOver="hilite(45571)" onMouseOut="lolite()" href="../../../../../_variables/answertext.html">answertext</a>); <span class="comment">// Clean CTRL chars.</span>
<a name="l167"><span class="linenum"> 167</span></a>                      <a class="var it39193" onMouseOver="hilite(39193)" onMouseOut="lolite()" onClick="logVariable('cleananswer')" href="../../../../../_variables/cleananswer.html">$cleananswer</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../../../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/\r\n|\r/&quot;, &quot;\n&quot;, <a class="var it39193" onMouseOver="hilite(39193)" onMouseOut="lolite()" onClick="logVariable('cleananswer')" href="../../../../../_variables/cleananswer.html">$cleananswer</a>); <span class="comment">// Normalize line ending.</span>
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>                      <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('questionsubcache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/questionsubcache.html">questionsubcache</a>[<a class="var it39192" onMouseOver="hilite(39192)" onMouseOut="lolite()" onClick="logVariable('cleanquestion')" href="../../../../../_variables/cleanquestion.html">$cleanquestion</a>][<a class="var it39193" onMouseOver="hilite(39193)" onMouseOut="lolite()" onClick="logVariable('cleananswer')" href="../../../../../_variables/cleananswer.html">$cleananswer</a>] = <a class="var it39191" onMouseOver="hilite(39191)" onMouseOut="lolite()" onClick="logVariable('potentialsub')" href="../../../../../_variables/potentialsub.html">$potentialsub</a>-&gt;<a onClick="logVariable('id')" class="var it45571" onMouseOver="hilite(45571)" onMouseOut="lolite()" href="../../../../../_variables/id.html">id</a>;
<a name="l170"><span class="linenum"> 170</span></a>                  }
<a name="l171"><span class="linenum"> 171</span></a>              }
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>              if (!isset(<a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('questionsubcache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/questionsubcache.html">questionsubcache</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('questiontext')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/questiontext.html">questiontext</a>][<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('answertext')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/answertext.html">answertext</a>])) {
<a name="l174"><span class="linenum"> 174</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('restore_step_exception')" href="../../../../../_classes/restore_step_exception.html" onMouseOver="classPopup(event,'restore_step_exception')">restore_step_exception</a>('error_qtype_match_subquestion_missing_in_db', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>);
<a name="l175"><span class="linenum"> 175</span></a>              }
<a name="l176"><span class="linenum"> 176</span></a>              <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../../../../_variables/newitemid.html">$newitemid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('questionsubcache')" class="var it42912" onMouseOver="hilite(42912)" onMouseOut="lolite()" href="../../../../../_variables/questionsubcache.html">questionsubcache</a>[<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('questiontext')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/questiontext.html">questiontext</a>][<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../../../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('answertext')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../../../../_variables/answertext.html">answertext</a>];
<a name="l177"><span class="linenum"> 177</span></a>          }
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment">        // Found one. Let's create the mapping.</span>
<a name="l180"><span class="linenum"> 180</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('set_mapping')" href="../../../../../_functions/set_mapping.html" onMouseOver="funcPopup(event,'set_mapping')">set_mapping</a>('qtype_match_subquestions', <a class="var it6" onMouseOver="hilite(6)" onMouseOut="lolite()" onClick="logVariable('oldid')" href="../../../../../_variables/oldid.html">$oldid</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('newitemid')" href="../../../../../_variables/newitemid.html">$newitemid</a>);
<a name="l181"><span class="linenum"> 181</span></a>      }
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>      public function <a class="function" onClick="logFunction('recode_response')" href="../../../../../_functions/recode_response.html" onMouseOver="funcPopup(event,'recode_response')">recode_response</a>(<a class="var it530" onMouseOver="hilite(530)" onMouseOut="lolite()" onClick="logVariable('questionid')" href="../../../../../_variables/questionid.html">$questionid</a>, <a class="var it9203" onMouseOver="hilite(9203)" onMouseOut="lolite()" onClick="logVariable('sequencenumber')" href="../../../../../_variables/sequencenumber.html">$sequencenumber</a>, array <a class="var it187" onMouseOver="hilite(187)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../../_variables/response.html">$response</a>) {
<a name="l184"><span class="linenum"> 184</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../../../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('_stemorder', <a class="var it187" onMouseOver="hilite(187)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../../_variables/response.html">$response</a>)) {
<a name="l185"><span class="linenum"> 185</span></a>              <a class="var it187" onMouseOver="hilite(187)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../../_variables/response.html">$response</a>['_stemorder'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('recode_match_sub_order')" href="../../../../../_functions/recode_match_sub_order.html" onMouseOver="funcPopup(event,'recode_match_sub_order')">recode_match_sub_order</a>(<a class="var it187" onMouseOver="hilite(187)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../../_variables/response.html">$response</a>['_stemorder']);
<a name="l186"><span class="linenum"> 186</span></a>          }
<a name="l187"><span class="linenum"> 187</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../../../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>('_choiceorder', <a class="var it187" onMouseOver="hilite(187)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../../_variables/response.html">$response</a>)) {
<a name="l188"><span class="linenum"> 188</span></a>              <a class="var it187" onMouseOver="hilite(187)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../../_variables/response.html">$response</a>['_choiceorder'] = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('recode_match_sub_order')" href="../../../../../_functions/recode_match_sub_order.html" onMouseOver="funcPopup(event,'recode_match_sub_order')">recode_match_sub_order</a>(<a class="var it187" onMouseOver="hilite(187)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../../_variables/response.html">$response</a>['_choiceorder']);
<a name="l189"><span class="linenum"> 189</span></a>          }
<a name="l190"><span class="linenum"> 190</span></a>          return <a class="var it187" onMouseOver="hilite(187)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../../../_variables/response.html">$response</a>;
<a name="l191"><span class="linenum"> 191</span></a>      }
<a name="l192"><span class="linenum"> 192</span></a>  
<a name="l193"><span class="linenum"> 193</span></a>      <span class="comment">/**</span>
<a name="l194"><span class="linenum"> 194</span></a>  <span class="comment">     * Given one question_states record, return the answer</span>
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">     * recoded pointing to all the restored stuff for match questions.</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment">     *</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment">     * answer is one comma separated list of hypen separated pairs</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment">     * containing question_match_sub-&gt;id and question_match_sub-&gt;code, which</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment">     * has been remapped to be qtype_match_subquestions-&gt;id, since code no longer exists.</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">     */</span>
<a name="l201"><span class="linenum"> 201</span></a>      public function <a class="function" onClick="logFunction('recode_legacy_state_answer')" href="../../../../../_functions/recode_legacy_state_answer.html" onMouseOver="funcPopup(event,'recode_legacy_state_answer')">recode_legacy_state_answer</a>(<a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../../../../../_variables/state.html">$state</a>) {
<a name="l202"><span class="linenum"> 202</span></a>          <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../../../_variables/answer.html">$answer</a> = <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../../../../../_variables/state.html">$state</a>-&gt;<a onClick="logVariable('answer')" class="var it43230" onMouseOver="hilite(43230)" onMouseOut="lolite()" href="../../../../../_variables/answer.html">answer</a>;
<a name="l203"><span class="linenum"> 203</span></a>          <a class="var it12270" onMouseOver="hilite(12270)" onMouseOut="lolite()" onClick="logVariable('resultarr')" href="../../../../../_variables/resultarr.html">$resultarr</a> = array();
<a name="l204"><span class="linenum"> 204</span></a>          foreach (<a class="phpfunction" onClick="logFunction('explode')" href="../../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it2951" onMouseOver="hilite(2951)" onMouseOut="lolite()" onClick="logVariable('answer')" href="../../../../../_variables/answer.html">$answer</a>) as <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('pair')" href="../../../../../_variables/pair.html">$pair</a>) {
<a name="l205"><span class="linenum"> 205</span></a>              <a class="var it12271" onMouseOver="hilite(12271)" onMouseOut="lolite()" onClick="logVariable('pairarr')" href="../../../../../_variables/pairarr.html">$pairarr</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('-', <a class="var it413" onMouseOver="hilite(413)" onMouseOut="lolite()" onClick="logVariable('pair')" href="../../../../../_variables/pair.html">$pair</a>);
<a name="l206"><span class="linenum"> 206</span></a>              <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../../../_variables/id.html">$id</a> = <a class="var it12271" onMouseOver="hilite(12271)" onMouseOut="lolite()" onClick="logVariable('pairarr')" href="../../../../../_variables/pairarr.html">$pairarr</a>[0];
<a name="l207"><span class="linenum"> 207</span></a>              <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../../_variables/code.html">$code</a> = <a class="var it12271" onMouseOver="hilite(12271)" onMouseOut="lolite()" onClick="logVariable('pairarr')" href="../../../../../_variables/pairarr.html">$pairarr</a>[1];
<a name="l208"><span class="linenum"> 208</span></a>              <a class="var it3717" onMouseOver="hilite(3717)" onMouseOut="lolite()" onClick="logVariable('newid')" href="../../../../../_variables/newid.html">$newid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mappingid')" href="../../../../../_functions/get_mappingid.html" onMouseOver="funcPopup(event,'get_mappingid')">get_mappingid</a>('qtype_match_subquestions', <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../../../_variables/id.html">$id</a>);
<a name="l209"><span class="linenum"> 209</span></a>              if (<a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../../_variables/code.html">$code</a>) {
<a name="l210"><span class="linenum"> 210</span></a>                  <a class="var it39194" onMouseOver="hilite(39194)" onMouseOut="lolite()" onClick="logVariable('newcode')" href="../../../../../_variables/newcode.html">$newcode</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mappingid')" href="../../../../../_functions/get_mappingid.html" onMouseOver="funcPopup(event,'get_mappingid')">get_mappingid</a>('qtype_match_subquestion_codes', <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../../_variables/code.html">$code</a>);
<a name="l211"><span class="linenum"> 211</span></a>              } else {
<a name="l212"><span class="linenum"> 212</span></a>                  <a class="var it39194" onMouseOver="hilite(39194)" onMouseOut="lolite()" onClick="logVariable('newcode')" href="../../../../../_variables/newcode.html">$newcode</a> = <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../../../../_variables/code.html">$code</a>;
<a name="l213"><span class="linenum"> 213</span></a>              }
<a name="l214"><span class="linenum"> 214</span></a>              <a class="var it12270" onMouseOver="hilite(12270)" onMouseOut="lolite()" onClick="logVariable('resultarr')" href="../../../../../_variables/resultarr.html">$resultarr</a>[] = <a class="var it3717" onMouseOver="hilite(3717)" onMouseOut="lolite()" onClick="logVariable('newid')" href="../../../../../_variables/newid.html">$newid</a> . '-' . <a class="var it39194" onMouseOver="hilite(39194)" onMouseOut="lolite()" onClick="logVariable('newcode')" href="../../../../../_variables/newcode.html">$newcode</a>;
<a name="l215"><span class="linenum"> 215</span></a>          }
<a name="l216"><span class="linenum"> 216</span></a>          return <a class="phpfunction" onClick="logFunction('implode')" href="../../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it12270" onMouseOver="hilite(12270)" onMouseOut="lolite()" onClick="logVariable('resultarr')" href="../../../../../_variables/resultarr.html">$resultarr</a>);
<a name="l217"><span class="linenum"> 217</span></a>      }
<a name="l218"><span class="linenum"> 218</span></a>  
<a name="l219"><span class="linenum"> 219</span></a>      <span class="comment">/**</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     * Recode the choice order as stored in the response.</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">     * @param string $order the original order.</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">     * @return string the recoded order.</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">     */</span>
<a name="l224"><span class="linenum"> 224</span></a>      protected function <a class="function" onClick="logFunction('recode_match_sub_order')" href="../../../../../_functions/recode_match_sub_order.html" onMouseOver="funcPopup(event,'recode_match_sub_order')">recode_match_sub_order</a>(<a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../../../../_variables/order.html">$order</a>) {
<a name="l225"><span class="linenum"> 225</span></a>          <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../../../../../_variables/neworder.html">$neworder</a> = array();
<a name="l226"><span class="linenum"> 226</span></a>          foreach (<a class="phpfunction" onClick="logFunction('explode')" href="../../../../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../../../../_variables/order.html">$order</a>) as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../../../_variables/id.html">$id</a>) {
<a name="l227"><span class="linenum"> 227</span></a>              if (<a class="var it3717" onMouseOver="hilite(3717)" onMouseOut="lolite()" onClick="logVariable('newid')" href="../../../../../_variables/newid.html">$newid</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('get_mappingid')" href="../../../../../_functions/get_mappingid.html" onMouseOver="funcPopup(event,'get_mappingid')">get_mappingid</a>('qtype_match_subquestions', <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../../../../_variables/id.html">$id</a>)) {
<a name="l228"><span class="linenum"> 228</span></a>                  <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../../../../../_variables/neworder.html">$neworder</a>[] = <a class="var it3717" onMouseOver="hilite(3717)" onMouseOut="lolite()" onClick="logVariable('newid')" href="../../../../../_variables/newid.html">$newid</a>;
<a name="l229"><span class="linenum"> 229</span></a>              }
<a name="l230"><span class="linenum"> 230</span></a>          }
<a name="l231"><span class="linenum"> 231</span></a>          return <a class="phpfunction" onClick="logFunction('implode')" href="../../../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../../../../../_variables/neworder.html">$neworder</a>);
<a name="l232"><span class="linenum"> 232</span></a>      }
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>      <span class="comment">/**</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment">     * Return the contents of this qtype to be processed by the links decoder.</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment">     */</span>
<a name="l237"><span class="linenum"> 237</span></a>      public static function <a class="function" onClick="logFunction('define_decode_contents')" href="../../../../../_functions/define_decode_contents.html" onMouseOver="funcPopup(event,'define_decode_contents')">define_decode_contents</a>() {
<a name="l238"><span class="linenum"> 238</span></a>  
<a name="l239"><span class="linenum"> 239</span></a>          <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../../../../_variables/contents.html">$contents</a> = array();
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>          <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../../../../_variables/contents.html">$contents</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('restore_decode_content')" href="../../../../../_classes/restore_decode_content.html" onMouseOver="classPopup(event,'restore_decode_content')">restore_decode_content</a>('qtype_match_subquestions',
<a name="l242"><span class="linenum"> 242</span></a>                  array('questiontext'), 'qtype_match_subquestions');
<a name="l243"><span class="linenum"> 243</span></a>  
<a name="l244"><span class="linenum"> 244</span></a>          <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../../../../_variables/fields.html">$fields</a> = array('correctfeedback', 'partiallycorrectfeedback', 'incorrectfeedback');
<a name="l245"><span class="linenum"> 245</span></a>          <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../../../../_variables/contents.html">$contents</a>[] = <span class="keyword">new </span><a class="class" onClick="logClass('restore_decode_content')" href="../../../../../_classes/restore_decode_content.html" onMouseOver="classPopup(event,'restore_decode_content')">restore_decode_content</a>('qtype_match_options', <a class="var it89" onMouseOver="hilite(89)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../../../../_variables/fields.html">$fields</a>, 'qtype_match_options');
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>          return <a class="var it271" onMouseOver="hilite(271)" onMouseOut="lolite()" onClick="logVariable('contents')" href="../../../../../_variables/contents.html">$contents</a>;
<a name="l248"><span class="linenum"> 248</span></a>      }
<a name="l249"><span class="linenum"> 249</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_new_parentid': ['get_new_parentid', 'Returns the latest (parent) new id mapped by one pathelement ', [['backup/moodle2','restore_plugin.class.php',189],['backup/moodle2','restore_subplugin.class.php',121],['backup/util/plan','restore_structure_step.class.php',196]], 148],
'get_mappingid': ['get_mappingid', 'Return the new id of a mapping for the given itemname ', [['backup/moodle2','restore_plugin.class.php',196],['backup/moodle2','restore_subplugin.class.php',128],['backup/util/plan','restore_structure_step.class.php',203]], 224],
'process_matchoptions': ['process_matchoptions', 'Process the qtype/matchoptions element ', [['question/type/match/backup/moodle2','restore_qtype_match_plugin.class.php',71]], 0],
'define_question_plugin_structure': ['define_question_plugin_structure', 'Returns the qtype information to attach to question element ', [['question/type/essay/backup/moodle2','backup_qtype_essay_plugin.class.php',36],['question/type/ddwtos/backup/moodle2','restore_qtype_ddwtos_plugin.class.php',37],['question/type/ddwtos/backup/moodle2','backup_qtype_ddwtos_plugin.class.php',37],['question/type/ddimageortext/backup/moodle2','restore_qtype_ddimageortext_plugin.class.php',42],['question/type/multianswer/backup/moodle2','restore_qtype_multianswer_plugin.class.php',37],['question/type/shortanswer/backup/moodle2','backup_qtype_shortanswer_plugin.class.php',36],['question/type/ddmarker/backup/moodle2','restore_qtype_ddmarker_plugin.class.php',44],['question/type/numerical/backup/moodle2','restore_qtype_numerical_plugin.class.php',37],['question/type/random/backup/moodle2','restore_qtype_random_plugin.class.php',37],['question/type/match/backup/moodle2','backup_qtype_match_plugin.class.php',36],['question/type/randomsamatch/backup/moodle2','backup_qtype_randomsamatch_plugin.class.php',36],['question/type/gapselect/backup/moodle2','restore_qtype_gapselect_plugin.class.php',36],['question/type/multichoice/backup/moodle2','backup_qtype_multichoice_plugin.class.php',36],['question/type/randomsamatch/backup/moodle2','restore_qtype_randomsamatch_plugin.class.php',37],['question/type/multianswer/backup/moodle2','backup_qtype_multianswer_plugin.class.php',36],['question/type/shortanswer/backup/moodle2','restore_qtype_shortanswer_plugin.class.php',37],['question/type/truefalse/backup/moodle2','restore_qtype_truefalse_plugin.class.php',37],['question/type/truefalse/backup/moodle2','backup_qtype_truefalse_plugin.class.php',36],['question/type/ddimageortext/backup/moodle2','backup_qtype_ddimageortext_plugin.class.php',43],['question/type/calculated/backup/moodle2','restore_qtype_calculated_plugin.class.php',37],['question/type/ddmarker/backup/moodle2','backup_qtype_ddmarker_plugin.class.php',43],['question/type/gapselect/backup/moodle2','backup_qtype_gapselect_plugin.class.php',36],['question/type/essay/backup/moodle2','restore_qtype_essay_plugin.class.php',37],['question/type/match/backup/moodle2','restore_qtype_match_plugin.class.php',50],['question/type/calculated/backup/moodle2','backup_qtype_calculated_plugin.class.php',36],['question/type/numerical/backup/moodle2','backup_qtype_numerical_plugin.class.php',36],['question/type/multichoice/backup/moodle2','restore_qtype_multichoice_plugin.class.php',37]], 0],
'process_match': ['process_match', 'Process the qtype/matches/match element ', [['question/type/match/backup/moodle2','restore_qtype_match_plugin.class.php',117]], 0],
'recode_match_sub_order': ['recode_match_sub_order', 'Recode the choice order as stored in the response. ', [['question/type/match/backup/moodle2','restore_qtype_match_plugin.class.php',219]], 2],
'set_mapping': ['set_mapping', 'To send ids pairs to backup_ids_table and to store them into paths ', [['backup/moodle2','restore_plugin.class.php',169],['backup/moodle2','restore_subplugin.class.php',101],['backup/util/plan','restore_structure_step.class.php',158]], 131],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'get_old_parentid': ['get_old_parentid', 'Returns the latest (parent) old id mapped by one pathelement ', [['backup/moodle2','restore_plugin.class.php',182],['backup/moodle2','restore_subplugin.class.php',114],['backup/util/plan','restore_structure_step.class.php',189]], 32],
'recode_response': ['recode_response', 'Do any re-coding necessary in the student response. ', [['backup/moodle2','restore_qtype_plugin.class.php',344],['question/type/multianswer/backup/moodle2','restore_qtype_multianswer_plugin.class.php',139],['question/type/match/backup/moodle2','restore_qtype_match_plugin.class.php',183],['question/type/calculatedmulti/backup/moodle2','restore_qtype_calculatedmulti_plugin.class.php',40],['question/type/multichoice/backup/moodle2','restore_qtype_multichoice_plugin.class.php',84]], 1],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'get_pathfor': ['get_pathfor', 'Simple helper function that returns the base (prefix) of the path for the restore_path_element Useful if we used get_recommended_name() in backup. It\'s not mandatory to use it but recommended ;-) ', [['backup/moodle2','restore_plugin.class.php',251],['backup/moodle2','restore_subplugin.class.php',190]], 63],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'define_decode_contents': ['define_decode_contents', '', [['blocks/quiz_results/backup/moodle2','restore_quiz_results_block_task.class.php',106],['question/type/ddwtos/backup/moodle2','restore_qtype_ddwtos_plugin.class.php',84],['backup/moodle2','restore_default_block_task.class.php',53],['mod/folder/backup/moodle2','restore_folder_activity_task.class.php',50],['mod/feedback/backup/moodle2','restore_feedback_activity_task.class.php',49],['backup/moodle2','restore_activity_task.class.php',246],['question/type/ddimageortext/backup/moodle2','restore_qtype_ddimageortext_plugin.class.php',152],['mod/quiz/backup/moodle2','restore_quiz_activity_task.class.php',54],['mod/assign/backup/moodle2','restore_assign_activity_task.class.php',53],['backup/moodle2','restore_block_task.class.php',156],['question/type/ddmarker/backup/moodle2','restore_qtype_ddmarker_plugin.class.php',154],['blocks/html/backup/moodle2','restore_html_block_task.class.php',46],['mod/url/backup/moodle2','restore_url_activity_task.class.php',50],['mod/imscp/backup/moodle2','restore_imscp_activity_task.class.php',53],['mod/page/backup/moodle2','restore_page_activity_task.class.php',50],['mod/resource/backup/moodle2','restore_resource_activity_task.class.php',50],['mod/assignment/backup/moodle2','restore_assignment_activity_task.class.php',50],['mod/data/backup/moodle2','restore_data_activity_task.class.php',50],['question/type/gapselect/backup/moodle2','restore_qtype_gapselect_plugin.class.php',84],['blocks/activity_results/backup/moodle2','restore_activity_results_block_task.class.php',100],['backup/moodle2','restore_section_task.class.php',127],['mod/lesson/backup/moodle2','restore_lesson_activity_task.class.php',50],['blocks/rss_client/backup/moodle2','restore_rss_client_block_task.class.php',50],['mod/glossary/backup/moodle2','restore_glossary_activity_task.class.php',50],['blocks/tags/backup/moodle2','restore_tags_block_task.class.php',81],['question/type/randomsamatch/backup/moodle2','restore_qtype_randomsamatch_plugin.class.php',121],['blocks/glossary_random/backup/moodle2','restore_glossary_random_block_task.class.php',88],['mod/lti/backup/moodle2','restore_lti_activity_task.class.php',73],['mod/chat/backup/moodle2','restore_chat_activity_task.class.php',49],['mod/workshop/backup/moodle2','restore_workshop_activity_task.class.php',49],['mod/choice/backup/moodle2','restore_choice_activity_task.class.php',50],['mod/scorm/backup/moodle2','restore_scorm_activity_task.class.php',49],['backup/moodle2','restore_course_task.class.php',122],['mod/wiki/backup/moodle2','restore_wiki_activity_task.class.php',50],['mod/label/backup/moodle2','restore_label_activity_task.class.php',50],['question/type/essay/backup/moodle2','restore_qtype_essay_plugin.class.php',81],['question/type/match/backup/moodle2','restore_qtype_match_plugin.class.php',234],['mod/survey/backup/moodle2','restore_survey_activity_task.class.php',50],['mod/forum/backup/moodle2','restore_forum_activity_task.class.php',50],['mod/book/backup/moodle2','restore_book_activity_task.class.php',50],['question/type/multichoice/backup/moodle2','restore_qtype_multichoice_plugin.class.php',150]], 2],
'recode_legacy_state_answer': ['recode_legacy_state_answer', 'Decode legacy question_states.answer for this qtype. Used when restoring 2.0 attempt data. ', [['backup/moodle2','restore_qtype_plugin.class.php',355],['question/type/multianswer/backup/moodle2','restore_qtype_multianswer_plugin.class.php',165],['question/type/random/backup/moodle2','restore_qtype_random_plugin.class.php',63],['question/type/randomsamatch/backup/moodle2','restore_qtype_randomsamatch_plugin.class.php',100],['question/type/truefalse/backup/moodle2','restore_qtype_truefalse_plugin.class.php',82],['question/type/match/backup/moodle2','restore_qtype_match_plugin.class.php',193],['question/type/calculatedmulti/backup/moodle2','restore_qtype_calculatedmulti_plugin.class.php',45],['question/type/multichoice/backup/moodle2','restore_qtype_multichoice_plugin.class.php',106]], 1],
'explode': ['explode', '', [], 1572],
'implode': ['implode', '', [], 1281],
'array_key_exists': ['array_key_exists', '', [], 1445],
'preg_replace': ['preg_replace', '', [], 917],
'defined': ['defined', '', [], 4731]};
CLASS_DATA={
'restore_qtype_match_plugin': ['restore_qtype_match_plugin', 'Restore plugin class that provides the necessary information needed to restore one match qtype plugin. ', [['question/type/match/backup/moodle2','restore_qtype_match_plugin.class.php',28]], 0],
'restore_decode_content': ['restore_decode_content', 'Helper class in charge of providing the contents to be processed by restore_decode_rules ', [['backup/util/helper','restore_decode_content.class.php',27]], 52],
'restore_path_element': ['restore_path_element', 'Class representing one path to be restored from XML file ', [['backup/util/structure','restore_path_element.class.php',27]], 232],
'restore_step_exception': ['restore_step_exception', '', [['backup/util/plan','restore_step.class.php',102]], 43]};
CONST_DATA={
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
