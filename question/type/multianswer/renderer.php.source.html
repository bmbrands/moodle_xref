<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /question/type/multianswer/renderer.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='question/type/multianswer';
filename='renderer.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/question/type/multianswer/</a> -> <a href="renderer.php.html">renderer.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="renderer.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="renderer.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Multianswer question renderer classes.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Handle shortanswer, numerical and various multichoice subquestions</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @package    qtype</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @subpackage multianswer</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @copyright  2010 Pierre Pichet</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../../question/type/shortanswer/renderer.php.html">/question/type/shortanswer/renderer.php</a>');
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/**</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * Base class for generating the bits of output common to multianswer</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * (Cloze) questions.</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * This render the main question text and transfer to the subquestions</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * the task of display their input elements and status</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * feedback, grade, correct answer(s)</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> *</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> * @copyright 2010 Pierre Pichet</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l40"><span class="linenum">  40</span></a>  <span class="comment"> */</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('qtype_multianswer_renderer')" href="../../../_classes/qtype_multianswer_renderer.html" onMouseOver="classPopup(event,'qtype_multianswer_renderer')">qtype_multianswer_renderer</a> extends qtype_renderer {
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>      public function <a class="function" onClick="logFunction('formulation_and_controls')" href="../../../_functions/formulation_and_controls.html" onMouseOver="funcPopup(event,'formulation_and_controls')">formulation_and_controls</a>(question_attempt <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>,
<a name="l44"><span class="linenum">  44</span></a>              question_display_options <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>) {
<a name="l45"><span class="linenum">  45</span></a>          <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a> = <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>-&gt;<a class="function" onClick="logFunction('get_question')" href="../../../_functions/get_question.html" onMouseOver="funcPopup(event,'get_question')">get_question</a>();
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = '';
<a name="l48"><span class="linenum">  48</span></a>          <a class="var it672" onMouseOver="hilite(672)" onMouseOut="lolite()" onClick="logVariable('subquestions')" href="../../../_variables/subquestions.html">$subquestions</a> = array();
<a name="l49"><span class="linenum">  49</span></a>          foreach (<a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('textfragments')" class="var it39488" onMouseOver="hilite(39488)" onMouseOut="lolite()" href="../../../_variables/textfragments.html">textfragments</a> as <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> =&gt; <a class="var it2264" onMouseOver="hilite(2264)" onMouseOut="lolite()" onClick="logVariable('fragment')" href="../../../_variables/fragment.html">$fragment</a>) {
<a name="l50"><span class="linenum">  50</span></a>              if (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> &gt; 0) {
<a name="l51"><span class="linenum">  51</span></a>                  <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a> = <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('places')" class="var it39488" onMouseOver="hilite(39488)" onMouseOut="lolite()" href="../../../_variables/places.html">places</a>[<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a>];
<a name="l52"><span class="linenum">  52</span></a>                  <a class="var it464" onMouseOver="hilite(464)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../_variables/token.html">$token</a> = 'qtypemultianswer' . <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../../_variables/i.html">$i</a> . 'marker';
<a name="l53"><span class="linenum">  53</span></a>                  <a class="var it464" onMouseOver="hilite(464)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../_variables/token.html">$token</a> = '&lt;span class=&quot;nolink&quot;&gt;' . <a class="var it464" onMouseOver="hilite(464)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../_variables/token.html">$token</a> . '&lt;/span&gt;';
<a name="l54"><span class="linenum">  54</span></a>                  <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="var it464" onMouseOver="hilite(464)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../_variables/token.html">$token</a>;
<a name="l55"><span class="linenum">  55</span></a>                  <a class="var it672" onMouseOver="hilite(672)" onMouseOut="lolite()" onClick="logVariable('subquestions')" href="../../../_variables/subquestions.html">$subquestions</a>[<a class="var it464" onMouseOver="hilite(464)" onMouseOut="lolite()" onClick="logVariable('token')" href="../../../_variables/token.html">$token</a>] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('subquestion')" href="../../../_functions/subquestion.html" onMouseOver="funcPopup(event,'subquestion')">subquestion</a>(<a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>, <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>,
<a name="l56"><span class="linenum">  56</span></a>                          <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('subquestions')" class="var it39488" onMouseOver="hilite(39488)" onMouseOut="lolite()" href="../../../_variables/subquestions.html">subquestions</a>[<a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>]);
<a name="l57"><span class="linenum">  57</span></a>              }
<a name="l58"><span class="linenum">  58</span></a>              <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="var it2264" onMouseOver="hilite(2264)" onMouseOut="lolite()" onClick="logVariable('fragment')" href="../../../_variables/fragment.html">$fragment</a>;
<a name="l59"><span class="linenum">  59</span></a>          }
<a name="l60"><span class="linenum">  60</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>-&gt;<a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>, <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('questiontextformat')" class="var it39488" onMouseOver="hilite(39488)" onMouseOut="lolite()" href="../../../_variables/questiontextformat.html">questiontextformat</a>,
<a name="l61"><span class="linenum">  61</span></a>                  <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, 'question', 'questiontext', <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('id')" class="var it39488" onMouseOver="hilite(39488)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l62"><span class="linenum">  62</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="phpfunction" onClick="logFunction('str_replace')" href="../../../_functions/str_replace.html" onMouseOver="phpfuncPopup(event,'str_replace')">str_replace</a>(<a class="phpfunction" onClick="logFunction('array_keys')" href="../../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it672" onMouseOver="hilite(672)" onMouseOut="lolite()" onClick="logVariable('subquestions')" href="../../../_variables/subquestions.html">$subquestions</a>), <a class="phpfunction" onClick="logFunction('array_values')" href="../../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it672" onMouseOver="hilite(672)" onMouseOut="lolite()" onClick="logVariable('subquestions')" href="../../../_variables/subquestions.html">$subquestions</a>), <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>);
<a name="l63"><span class="linenum">  63</span></a>  
<a name="l64"><span class="linenum">  64</span></a>          if (<a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>-&gt;<a class="function" onClick="logFunction('get_state')" href="../../../_functions/get_state.html" onMouseOver="funcPopup(event,'get_state')">get_state</a>() == question_state::<a class="var it734" onMouseOver="hilite(734)" onMouseOut="lolite()" onClick="logVariable('invalid')" href="../../../_variables/invalid.html">$invalid</a>) {
<a name="l65"><span class="linenum">  65</span></a>              <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('nonempty_tag')" href="../../../_functions/nonempty_tag.html" onMouseOver="funcPopup(event,'nonempty_tag')">nonempty_tag</a>('div',
<a name="l66"><span class="linenum">  66</span></a>                      <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../../../_variables/question.html">$question</a>-&gt;<a class="function" onClick="logFunction('get_validation_error')" href="../../../_functions/get_validation_error.html" onMouseOver="funcPopup(event,'get_validation_error')">get_validation_error</a>(<a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>-&gt;<a class="function" onClick="logFunction('get_last_qt_data')" href="../../../_functions/get_last_qt_data.html" onMouseOver="funcPopup(event,'get_last_qt_data')">get_last_qt_data</a>()),
<a name="l67"><span class="linenum">  67</span></a>                      array('class' =&gt; 'validationerror'));
<a name="l68"><span class="linenum">  68</span></a>          }
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>          <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/page.html">page</a>-&gt;requires-&gt;<a class="function" onClick="logFunction('js_init_call')" href="../../../_functions/js_init_call.html" onMouseOver="funcPopup(event,'js_init_call')">js_init_call</a>('M.qtype_multianswer.init',
<a name="l71"><span class="linenum">  71</span></a>                  array('#q' . <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>-&gt;<a class="function" onClick="logFunction('get_slot')" href="../../../_functions/get_slot.html" onMouseOver="funcPopup(event,'get_slot')">get_slot</a>()), false, array(
<a name="l72"><span class="linenum">  72</span></a>                      'name'     =&gt; 'qtype_multianswer',
<a name="l73"><span class="linenum">  73</span></a>                      'fullpath' =&gt; '<a class="filename" href="../../../question/type/multianswer/module.js.html">/question/type/multianswer/module.js</a>',
<a name="l74"><span class="linenum">  74</span></a>                      'requires' =&gt; array('base', 'node', 'event', 'overlay'),
<a name="l75"><span class="linenum">  75</span></a>                  ));
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>          return <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>;
<a name="l78"><span class="linenum">  78</span></a>      }
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>      public function <a class="function" onClick="logFunction('subquestion')" href="../../../_functions/subquestion.html" onMouseOver="funcPopup(event,'subquestion')">subquestion</a>(question_attempt <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>,
<a name="l81"><span class="linenum">  81</span></a>              question_display_options <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>, <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>, question_graded_automatically <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>) {
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>          <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../../_variables/subtype.html">$subtype</a> = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('qtype')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/qtype.html">qtype</a>-&gt;<a class="phpfunction" onClick="logFunction('name')" href="../../../_functions/name.html" onMouseOver="phpfuncPopup(event,'name')">name</a>();
<a name="l84"><span class="linenum">  84</span></a>          if (<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../../_variables/subtype.html">$subtype</a> == 'numerical' || <a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../../_variables/subtype.html">$subtype</a> == 'shortanswer') {
<a name="l85"><span class="linenum">  85</span></a>              <a class="var it2265" onMouseOver="hilite(2265)" onMouseOut="lolite()" onClick="logVariable('subrenderer')" href="../../../_variables/subrenderer.html">$subrenderer</a> = 'textfield';
<a name="l86"><span class="linenum">  86</span></a>          } else if (<a class="var it778" onMouseOver="hilite(778)" onMouseOut="lolite()" onClick="logVariable('subtype')" href="../../../_variables/subtype.html">$subtype</a> == 'multichoice') {
<a name="l87"><span class="linenum">  87</span></a>              if (<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('layout')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/layout.html">layout</a> == qtype_multichoice_base::LAYOUT_DROPDOWN) {
<a name="l88"><span class="linenum">  88</span></a>                  <a class="var it2265" onMouseOver="hilite(2265)" onMouseOut="lolite()" onClick="logVariable('subrenderer')" href="../../../_variables/subrenderer.html">$subrenderer</a> = 'multichoice_inline';
<a name="l89"><span class="linenum">  89</span></a>              } else if (<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('layout')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/layout.html">layout</a> == qtype_multichoice_base::LAYOUT_HORIZONTAL) {
<a name="l90"><span class="linenum">  90</span></a>                  <a class="var it2265" onMouseOver="hilite(2265)" onMouseOut="lolite()" onClick="logVariable('subrenderer')" href="../../../_variables/subrenderer.html">$subrenderer</a> = 'multichoice_horizontal';
<a name="l91"><span class="linenum">  91</span></a>              } else {
<a name="l92"><span class="linenum">  92</span></a>                  <a class="var it2265" onMouseOver="hilite(2265)" onMouseOut="lolite()" onClick="logVariable('subrenderer')" href="../../../_variables/subrenderer.html">$subrenderer</a> = 'multichoice_vertical';
<a name="l93"><span class="linenum">  93</span></a>              }
<a name="l94"><span class="linenum">  94</span></a>          } else {
<a name="l95"><span class="linenum">  95</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('coding_exception')" href="../../../_classes/coding_exception.html" onMouseOver="classPopup(event,'coding_exception')">coding_exception</a>('Unexpected subquestion type.', <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>);
<a name="l96"><span class="linenum">  96</span></a>          }
<a name="l97"><span class="linenum">  97</span></a>          <a class="var it1689" onMouseOver="hilite(1689)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../../../_variables/renderer.html">$renderer</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a onClick="logVariable('page')" class="var it39456" onMouseOver="hilite(39456)" onMouseOut="lolite()" href="../../../_variables/page.html">page</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../../../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('qtype_multianswer', <a class="var it2265" onMouseOver="hilite(2265)" onMouseOut="lolite()" onClick="logVariable('subrenderer')" href="../../../_variables/subrenderer.html">$subrenderer</a>);
<a name="l98"><span class="linenum">  98</span></a>          return <a class="var it1689" onMouseOver="hilite(1689)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../../../_variables/renderer.html">$renderer</a>-&gt;<a class="function" onClick="logFunction('subquestion')" href="../../../_functions/subquestion.html" onMouseOver="funcPopup(event,'subquestion')">subquestion</a>(<a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>, <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>, <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>);
<a name="l99"><span class="linenum">  99</span></a>      }
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>      public function <a class="function" onClick="logFunction('correct_response')" href="../../../_functions/correct_response.html" onMouseOver="funcPopup(event,'correct_response')">correct_response</a>(question_attempt <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>) {
<a name="l102"><span class="linenum"> 102</span></a>          return '';
<a name="l103"><span class="linenum"> 103</span></a>      }
<a name="l104"><span class="linenum"> 104</span></a>  }
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>  <span class="comment">/**</span>
<a name="l108"><span class="linenum"> 108</span></a>  <span class="comment"> * Subclass for generating the bits of output specific to shortanswer</span>
<a name="l109"><span class="linenum"> 109</span></a>  <span class="comment"> * subquestions.</span>
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment"> *</span>
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment"> * @copyright 2011 The Open University</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment"> */</span>
<a name="l114"><span class="linenum"> 114</span></a>  abstract class qtype_multianswer_subq_renderer_base extends qtype_renderer {
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>      abstract public function <a class="function" onClick="logFunction('subquestion')" href="../../../_functions/subquestion.html" onMouseOver="funcPopup(event,'subquestion')">subquestion</a>(question_attempt <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>,
<a name="l117"><span class="linenum"> 117</span></a>              question_display_options <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>, <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>,
<a name="l118"><span class="linenum"> 118</span></a>              question_graded_automatically <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>);
<a name="l119"><span class="linenum"> 119</span></a>  
<a name="l120"><span class="linenum"> 120</span></a>      <span class="comment">/**</span>
<a name="l121"><span class="linenum"> 121</span></a>  <span class="comment">     * Render the feedback pop-up contents.</span>
<a name="l122"><span class="linenum"> 122</span></a>  <span class="comment">     *</span>
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">     * @param question_graded_automatically $subq the subquestion.</span>
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">     * @param float $fraction the mark the student got. null if this subq was not answered.</span>
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">     * @param string $feedbacktext the feedback text, already processed with format_text etc.</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment">     * @param string $rightanswer the right answer, already processed with format_text etc.</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">     * @param question_display_options $options the display options.</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment">     * @return string the HTML for the feedback popup.</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">     */</span>
<a name="l130"><span class="linenum"> 130</span></a>      protected function <a class="function" onClick="logFunction('feedback_popup')" href="../../../_functions/feedback_popup.html" onMouseOver="funcPopup(event,'feedback_popup')">feedback_popup</a>(question_graded_automatically <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>,
<a name="l131"><span class="linenum"> 131</span></a>              <a class="var it2266" onMouseOver="hilite(2266)" onMouseOut="lolite()" onClick="logVariable('fraction')" href="../../../_variables/fraction.html">$fraction</a>, <a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feedbacktext')" href="../../../_variables/feedbacktext.html">$feedbacktext</a>, <a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('rightanswer')" href="../../../_variables/rightanswer.html">$rightanswer</a>, question_display_options <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>) {
<a name="l132"><span class="linenum"> 132</span></a>  
<a name="l133"><span class="linenum"> 133</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a> = array();
<a name="l134"><span class="linenum"> 134</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('correctness')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/correctness.html">correctness</a>) {
<a name="l135"><span class="linenum"> 135</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2266" onMouseOver="hilite(2266)" onMouseOut="lolite()" onClick="logVariable('fraction')" href="../../../_variables/fraction.html">$fraction</a>)) {
<a name="l136"><span class="linenum"> 136</span></a>                  <a class="var it1082" onMouseOver="hilite(1082)" onMouseOut="lolite()" onClick="logVariable('state')" href="../../../_variables/state.html">$state</a> = question_state::<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('gaveup')" href="../../../_variables/gaveup.html">$gaveup</a>;
<a name="l137"><span class="linenum"> 137</span></a>              } else {
<a name="l138"><span class="linenum"> 138</span></a>                  <a class="var it1082" onMouseOver="hilite(1082)" onMouseOut="lolite()" onClick="logVariable('state')" href="../../../_variables/state.html">$state</a> = question_state::<a class="function" onClick="logFunction('graded_state_for_fraction')" href="../../../_functions/graded_state_for_fraction.html" onMouseOver="funcPopup(event,'graded_state_for_fraction')">graded_state_for_fraction</a>(<a class="var it2266" onMouseOver="hilite(2266)" onMouseOut="lolite()" onClick="logVariable('fraction')" href="../../../_variables/fraction.html">$fraction</a>);
<a name="l139"><span class="linenum"> 139</span></a>              }
<a name="l140"><span class="linenum"> 140</span></a>              <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a>[] = <a class="var it1082" onMouseOver="hilite(1082)" onMouseOut="lolite()" onClick="logVariable('state')" href="../../../_variables/state.html">$state</a>-&gt;<a class="function" onClick="logFunction('default_string')" href="../../../_functions/default_string.html" onMouseOver="funcPopup(event,'default_string')">default_string</a>(true);
<a name="l141"><span class="linenum"> 141</span></a>          }
<a name="l142"><span class="linenum"> 142</span></a>  
<a name="l143"><span class="linenum"> 143</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('feedback')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a> &amp;&amp; <a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feedbacktext')" href="../../../_variables/feedbacktext.html">$feedbacktext</a>) {
<a name="l144"><span class="linenum"> 144</span></a>              <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a>[] = <a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feedbacktext')" href="../../../_variables/feedbacktext.html">$feedbacktext</a>;
<a name="l145"><span class="linenum"> 145</span></a>          }
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('rightanswer')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/rightanswer.html">rightanswer</a>) {
<a name="l148"><span class="linenum"> 148</span></a>              <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('correctansweris', 'qtype_shortanswer', <a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('rightanswer')" href="../../../_variables/rightanswer.html">$rightanswer</a>);
<a name="l149"><span class="linenum"> 149</span></a>          }
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>          <a class="var it702" onMouseOver="hilite(702)" onMouseOut="lolite()" onClick="logVariable('subfraction')" href="../../../_variables/subfraction.html">$subfraction</a> = '';
<a name="l152"><span class="linenum"> 152</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('marks')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/marks.html">marks</a> &gt;= <a class="class" onClick="logClass('question_display_options')" href="../../../_classes/question_display_options.html" onMouseOver="classPopup(event,'question_display_options')">question_display_options</a>::MARK_AND_MAX &amp;&amp; <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('maxmark')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/maxmark.html">maxmark</a> &gt; 0
<a name="l153"><span class="linenum"> 153</span></a>                  &amp;&amp; (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it2266" onMouseOver="hilite(2266)" onMouseOut="lolite()" onClick="logVariable('fraction')" href="../../../_variables/fraction.html">$fraction</a>) || <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a>)) {
<a name="l154"><span class="linenum"> 154</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> = new stdClass();
<a name="l155"><span class="linenum"> 155</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('mark')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../../_variables/mark.html">mark</a> = <a class="function" onClick="logFunction('format_float')" href="../../../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it2266" onMouseOver="hilite(2266)" onMouseOut="lolite()" onClick="logVariable('fraction')" href="../../../_variables/fraction.html">$fraction</a> * <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('maxmark')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/maxmark.html">maxmark</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('markdp')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/markdp.html">markdp</a>);
<a name="l156"><span class="linenum"> 156</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('max')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../../_variables/max.html">max</a> =  <a class="function" onClick="logFunction('format_float')" href="../../../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('maxmark')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/maxmark.html">maxmark</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('markdp')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/markdp.html">markdp</a>);
<a name="l157"><span class="linenum"> 157</span></a>              <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markoutofmax', 'question', <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>);
<a name="l158"><span class="linenum"> 158</span></a>          }
<a name="l159"><span class="linenum"> 159</span></a>  
<a name="l160"><span class="linenum"> 160</span></a>          if (!<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a>) {
<a name="l161"><span class="linenum"> 161</span></a>              return '';
<a name="l162"><span class="linenum"> 162</span></a>          }
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>          return <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('span', <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('&lt;br /&gt;', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a>),
<a name="l165"><span class="linenum"> 165</span></a>                  array('class' =&gt; 'feedbackspan accesshide'));
<a name="l166"><span class="linenum"> 166</span></a>      }
<a name="l167"><span class="linenum"> 167</span></a>  }
<a name="l168"><span class="linenum"> 168</span></a>  
<a name="l169"><span class="linenum"> 169</span></a>  
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">/**</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment"> * Subclass for generating the bits of output specific to shortanswer</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment"> * subquestions.</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment"> *</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment"> * @copyright 2011 The Open University</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment"> */</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('qtype_multianswer_textfield_renderer')" href="../../../_classes/qtype_multianswer_textfield_renderer.html" onMouseOver="classPopup(event,'qtype_multianswer_textfield_renderer')">qtype_multianswer_textfield_renderer</a> extends qtype_multianswer_subq_renderer_base {
<a name="l178"><span class="linenum"> 178</span></a>  
<a name="l179"><span class="linenum"> 179</span></a>      public function <a class="function" onClick="logFunction('subquestion')" href="../../../_functions/subquestion.html" onMouseOver="funcPopup(event,'subquestion')">subquestion</a>(question_attempt <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, question_display_options <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>,
<a name="l180"><span class="linenum"> 180</span></a>              <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>, question_graded_automatically <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>) {
<a name="l181"><span class="linenum"> 181</span></a>  
<a name="l182"><span class="linenum"> 182</span></a>          <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('fieldprefix')" href="../../../_variables/fieldprefix.html">$fieldprefix</a> = 'sub' . <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a> . '_';
<a name="l183"><span class="linenum"> 183</span></a>          <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../../_variables/fieldname.html">$fieldname</a> = <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('fieldprefix')" href="../../../_variables/fieldprefix.html">$fieldprefix</a> . 'answer';
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>          <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a> = <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>-&gt;<a class="function" onClick="logFunction('get_last_qt_var')" href="../../../_functions/get_last_qt_var.html" onMouseOver="funcPopup(event,'get_last_qt_var')">get_last_qt_var</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../../_variables/fieldname.html">$fieldname</a>);
<a name="l186"><span class="linenum"> 186</span></a>          if (<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('qtype')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/qtype.html">qtype</a>-&gt;<a class="phpfunction" onClick="logFunction('name')" href="../../../_functions/name.html" onMouseOver="phpfuncPopup(event,'name')">name</a>() == 'shortanswer') {
<a name="l187"><span class="linenum"> 187</span></a>              <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a> = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('get_matching_answer')" href="../../../_functions/get_matching_answer.html" onMouseOver="funcPopup(event,'get_matching_answer')">get_matching_answer</a>(array('answer' =&gt; <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>));
<a name="l188"><span class="linenum"> 188</span></a>          } else if (<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('qtype')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/qtype.html">qtype</a>-&gt;<a class="phpfunction" onClick="logFunction('name')" href="../../../_functions/name.html" onMouseOver="phpfuncPopup(event,'name')">name</a>() == 'numerical') {
<a name="l189"><span class="linenum"> 189</span></a>              <a class="function" onClick="logFunction('list')" href="../../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('unit')" href="../../../_variables/unit.html">$unit</a>, <a class="var it2205" onMouseOver="hilite(2205)" onMouseOut="lolite()" onClick="logVariable('multiplier')" href="../../../_variables/multiplier.html">$multiplier</a>) = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('ap')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/ap.html">ap</a>-&gt;<a class="function" onClick="logFunction('apply_units')" href="../../../_functions/apply_units.html" onMouseOver="funcPopup(event,'apply_units')">apply_units</a>(<a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>, '');
<a name="l190"><span class="linenum"> 190</span></a>              <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a> = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('get_matching_answer')" href="../../../_functions/get_matching_answer.html" onMouseOver="funcPopup(event,'get_matching_answer')">get_matching_answer</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>, 1);
<a name="l191"><span class="linenum"> 191</span></a>          } else {
<a name="l192"><span class="linenum"> 192</span></a>              <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a> = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('get_matching_answer')" href="../../../_functions/get_matching_answer.html" onMouseOver="funcPopup(event,'get_matching_answer')">get_matching_answer</a>(<a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>);
<a name="l193"><span class="linenum"> 193</span></a>          }
<a name="l194"><span class="linenum"> 194</span></a>  
<a name="l195"><span class="linenum"> 195</span></a>          if (!<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>) {
<a name="l196"><span class="linenum"> 196</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>) || <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a> === '') {
<a name="l197"><span class="linenum"> 197</span></a>                  <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a> = <span class="keyword">new </span><a class="class" onClick="logClass('question_answer')" href="../../../_classes/question_answer.html" onMouseOver="classPopup(event,'question_answer')">question_answer</a>(0, '', null, '', <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>);
<a name="l198"><span class="linenum"> 198</span></a>              } else {
<a name="l199"><span class="linenum"> 199</span></a>                  <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a> = <span class="keyword">new </span><a class="class" onClick="logClass('question_answer')" href="../../../_classes/question_answer.html" onMouseOver="classPopup(event,'question_answer')">question_answer</a>(0, '', 0.0, '', <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>);
<a name="l200"><span class="linenum"> 200</span></a>              }
<a name="l201"><span class="linenum"> 201</span></a>          }
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">        // Work out a good input field size.</span>
<a name="l204"><span class="linenum"> 204</span></a>          <a class="var it1225" onMouseOver="hilite(1225)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../_variables/size.html">$size</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(1, <a class="class" onClick="logClass('core_text')" href="../../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>)) + 1);
<a name="l205"><span class="linenum"> 205</span></a>          foreach (<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('answers')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/answers.html">answers</a> as <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>) {
<a name="l206"><span class="linenum"> 206</span></a>              <a class="var it1225" onMouseOver="hilite(1225)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../_variables/size.html">$size</a> = <a class="phpfunction" onClick="logFunction('max')" href="../../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">max</a>(<a class="var it1225" onMouseOver="hilite(1225)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../_variables/size.html">$size</a>, <a class="class" onClick="logClass('core_text')" href="../../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('answer')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/answer.html">answer</a>)));
<a name="l207"><span class="linenum"> 207</span></a>          }
<a name="l208"><span class="linenum"> 208</span></a>          <a class="var it1225" onMouseOver="hilite(1225)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../_variables/size.html">$size</a> = <a class="phpfunction" onClick="logFunction('min')" href="../../../_functions/min.html" onMouseOver="phpfuncPopup(event,'min')">min</a>(60, <a class="phpfunction" onClick="logFunction('round')" href="../../../_functions/round.html" onMouseOver="phpfuncPopup(event,'round')">round</a>(<a class="var it1225" onMouseOver="hilite(1225)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../_variables/size.html">$size</a> + <a class="phpfunction" onClick="logFunction('rand')" href="../../../_functions/rand.html" onMouseOver="phpfuncPopup(event,'rand')">rand</a>(0, <a class="var it1225" onMouseOver="hilite(1225)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../_variables/size.html">$size</a>*0.15)));
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment">        // The rand bit is to make guessing harder.</span>
<a name="l210"><span class="linenum"> 210</span></a>  
<a name="l211"><span class="linenum"> 211</span></a>          <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a> = array(
<a name="l212"><span class="linenum"> 212</span></a>              'type' =&gt; 'text',
<a name="l213"><span class="linenum"> 213</span></a>              'name' =&gt; <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>-&gt;<a class="function" onClick="logFunction('get_qt_field_name')" href="../../../_functions/get_qt_field_name.html" onMouseOver="funcPopup(event,'get_qt_field_name')">get_qt_field_name</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../../_variables/fieldname.html">$fieldname</a>),
<a name="l214"><span class="linenum"> 214</span></a>              'value' =&gt; <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>,
<a name="l215"><span class="linenum"> 215</span></a>              'id' =&gt; <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>-&gt;<a class="function" onClick="logFunction('get_qt_field_name')" href="../../../_functions/get_qt_field_name.html" onMouseOver="funcPopup(event,'get_qt_field_name')">get_qt_field_name</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../../_variables/fieldname.html">$fieldname</a>),
<a name="l216"><span class="linenum"> 216</span></a>              'size' =&gt; <a class="var it1225" onMouseOver="hilite(1225)" onMouseOut="lolite()" onClick="logVariable('size')" href="../../../_variables/size.html">$size</a>,
<a name="l217"><span class="linenum"> 217</span></a>          );
<a name="l218"><span class="linenum"> 218</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('readonly')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/readonly.html">readonly</a>) {
<a name="l219"><span class="linenum"> 219</span></a>              <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['readonly'] = 'readonly';
<a name="l220"><span class="linenum"> 220</span></a>          }
<a name="l221"><span class="linenum"> 221</span></a>  
<a name="l222"><span class="linenum"> 222</span></a>          <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('feedbackimg')" href="../../../_variables/feedbackimg.html">$feedbackimg</a> = '';
<a name="l223"><span class="linenum"> 223</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('correctness')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/correctness.html">correctness</a>) {
<a name="l224"><span class="linenum"> 224</span></a>              <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['class'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('feedback_class')" href="../../../_functions/feedback_class.html" onMouseOver="funcPopup(event,'feedback_class')">feedback_class</a>(<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>-&gt;<a onClick="logVariable('fraction')" class="var it41752" onMouseOver="hilite(41752)" onMouseOut="lolite()" href="../../../_variables/fraction.html">fraction</a>);
<a name="l225"><span class="linenum"> 225</span></a>              <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('feedbackimg')" href="../../../_variables/feedbackimg.html">$feedbackimg</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('feedback_image')" href="../../../_functions/feedback_image.html" onMouseOver="funcPopup(event,'feedback_image')">feedback_image</a>(<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>-&gt;<a onClick="logVariable('fraction')" class="var it41752" onMouseOver="hilite(41752)" onMouseOut="lolite()" href="../../../_variables/fraction.html">fraction</a>);
<a name="l226"><span class="linenum"> 226</span></a>          }
<a name="l227"><span class="linenum"> 227</span></a>  
<a name="l228"><span class="linenum"> 228</span></a>          if (<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('qtype')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/qtype.html">qtype</a>-&gt;<a class="phpfunction" onClick="logFunction('name')" href="../../../_functions/name.html" onMouseOver="phpfuncPopup(event,'name')">name</a>() == 'shortanswer') {
<a name="l229"><span class="linenum"> 229</span></a>              <a class="var it1786" onMouseOver="hilite(1786)" onMouseOut="lolite()" onClick="logVariable('correctanswer')" href="../../../_variables/correctanswer.html">$correctanswer</a> = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('get_matching_answer')" href="../../../_functions/get_matching_answer.html" onMouseOver="funcPopup(event,'get_matching_answer')">get_matching_answer</a>(<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('get_correct_response')" href="../../../_functions/get_correct_response.html" onMouseOver="funcPopup(event,'get_correct_response')">get_correct_response</a>());
<a name="l230"><span class="linenum"> 230</span></a>          } else {
<a name="l231"><span class="linenum"> 231</span></a>              <a class="var it1786" onMouseOver="hilite(1786)" onMouseOut="lolite()" onClick="logVariable('correctanswer')" href="../../../_variables/correctanswer.html">$correctanswer</a> = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('get_correct_answer')" href="../../../_functions/get_correct_answer.html" onMouseOver="funcPopup(event,'get_correct_answer')">get_correct_answer</a>();
<a name="l232"><span class="linenum"> 232</span></a>          }
<a name="l233"><span class="linenum"> 233</span></a>  
<a name="l234"><span class="linenum"> 234</span></a>          <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('feedbackpopup')" href="../../../_variables/feedbackpopup.html">$feedbackpopup</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('feedback_popup')" href="../../../_functions/feedback_popup.html" onMouseOver="funcPopup(event,'feedback_popup')">feedback_popup</a>(<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>, <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>-&gt;<a onClick="logVariable('fraction')" class="var it41752" onMouseOver="hilite(41752)" onMouseOut="lolite()" href="../../../_variables/fraction.html">fraction</a>,
<a name="l235"><span class="linenum"> 235</span></a>                  <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>-&gt;<a onClick="logVariable('feedback')" class="var it41752" onMouseOver="hilite(41752)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>, <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it41752" onMouseOver="hilite(41752)" onMouseOut="lolite()" href="../../../_variables/feedbackformat.html">feedbackformat</a>,
<a name="l236"><span class="linenum"> 236</span></a>                          <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, 'question', 'answerfeedback', <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>-&gt;<a onClick="logVariable('id')" class="var it41752" onMouseOver="hilite(41752)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>),
<a name="l237"><span class="linenum"> 237</span></a>                  <a class="function" onClick="logFunction('s')" href="../../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it1786" onMouseOver="hilite(1786)" onMouseOut="lolite()" onClick="logVariable('correctanswer')" href="../../../_variables/correctanswer.html">$correctanswer</a>-&gt;<a onClick="logVariable('answer')" class="var it41623" onMouseOver="hilite(41623)" onMouseOut="lolite()" href="../../../_variables/answer.html">answer</a>), <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>);
<a name="l238"><span class="linenum"> 238</span></a>  
<a name="l239"><span class="linenum"> 239</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('span', array('class' =&gt; 'subquestion'));
<a name="l240"><span class="linenum"> 240</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('label', <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('answer'),
<a name="l241"><span class="linenum"> 241</span></a>                  array('class' =&gt; 'subq accesshide', 'for' =&gt; <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['id']));
<a name="l242"><span class="linenum"> 242</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('empty_tag')" href="../../../_functions/empty_tag.html" onMouseOver="funcPopup(event,'empty_tag')">empty_tag</a>('input', <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>);
<a name="l243"><span class="linenum"> 243</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('feedbackimg')" href="../../../_variables/feedbackimg.html">$feedbackimg</a>;
<a name="l244"><span class="linenum"> 244</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('feedbackpopup')" href="../../../_variables/feedbackpopup.html">$feedbackpopup</a>;
<a name="l245"><span class="linenum"> 245</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('span');
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>          return <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>;
<a name="l248"><span class="linenum"> 248</span></a>      }
<a name="l249"><span class="linenum"> 249</span></a>  }
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>  
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">/**</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment"> * Render an embedded multiple-choice question that is displayed as a select menu.</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment"> *</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment"> * @copyright  2011 The Open University</span>
<a name="l256"><span class="linenum"> 256</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment"> */</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('qtype_multianswer_multichoice_inline_renderer')" href="../../../_classes/qtype_multianswer_multichoice_inline_renderer.html" onMouseOver="classPopup(event,'qtype_multianswer_multichoice_inline_renderer')">qtype_multianswer_multichoice_inline_renderer</a>
<a name="l259"><span class="linenum"> 259</span></a>          extends qtype_multianswer_subq_renderer_base {
<a name="l260"><span class="linenum"> 260</span></a>  
<a name="l261"><span class="linenum"> 261</span></a>      public function <a class="function" onClick="logFunction('subquestion')" href="../../../_functions/subquestion.html" onMouseOver="funcPopup(event,'subquestion')">subquestion</a>(question_attempt <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, question_display_options <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>,
<a name="l262"><span class="linenum"> 262</span></a>              <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>, question_graded_automatically <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>) {
<a name="l263"><span class="linenum"> 263</span></a>  
<a name="l264"><span class="linenum"> 264</span></a>          <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('fieldprefix')" href="../../../_variables/fieldprefix.html">$fieldprefix</a> = 'sub' . <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a> . '_';
<a name="l265"><span class="linenum"> 265</span></a>          <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../../_variables/fieldname.html">$fieldname</a> = <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('fieldprefix')" href="../../../_variables/fieldprefix.html">$fieldprefix</a> . 'answer';
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>          <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a> = <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>-&gt;<a class="function" onClick="logFunction('get_last_qt_var')" href="../../../_functions/get_last_qt_var.html" onMouseOver="funcPopup(event,'get_last_qt_var')">get_last_qt_var</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../../_variables/fieldname.html">$fieldname</a>);
<a name="l268"><span class="linenum"> 268</span></a>          <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('choices')" href="../../../_variables/choices.html">$choices</a> = array();
<a name="l269"><span class="linenum"> 269</span></a>          <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a> = <span class="keyword">new </span><a class="class" onClick="logClass('question_answer')" href="../../../_classes/question_answer.html" onMouseOver="classPopup(event,'question_answer')">question_answer</a>(0, '', null, '', <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>);
<a name="l270"><span class="linenum"> 270</span></a>          <a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('rightanswer')" href="../../../_variables/rightanswer.html">$rightanswer</a> = null;
<a name="l271"><span class="linenum"> 271</span></a>          foreach (<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('get_order')" href="../../../_functions/get_order.html" onMouseOver="funcPopup(event,'get_order')">get_order</a>(<a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>) as <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> =&gt; <a class="var it682" onMouseOver="hilite(682)" onMouseOut="lolite()" onClick="logVariable('ansid')" href="../../../_variables/ansid.html">$ansid</a>) {
<a name="l272"><span class="linenum"> 272</span></a>              <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a> = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('answers')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/answers.html">answers</a>[<a class="var it682" onMouseOver="hilite(682)" onMouseOut="lolite()" onClick="logVariable('ansid')" href="../../../_variables/ansid.html">$ansid</a>];
<a name="l273"><span class="linenum"> 273</span></a>              <a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('choices')" href="../../../_variables/choices.html">$choices</a>[<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>] = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('answer')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/answer.html">answer</a>, <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('answerformat')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/answerformat.html">answerformat</a>,
<a name="l274"><span class="linenum"> 274</span></a>                      <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, 'question', 'answer', <a class="var it682" onMouseOver="hilite(682)" onMouseOut="lolite()" onClick="logVariable('ansid')" href="../../../_variables/ansid.html">$ansid</a>);
<a name="l275"><span class="linenum"> 275</span></a>              if (<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('is_choice_selected')" href="../../../_functions/is_choice_selected.html" onMouseOver="funcPopup(event,'is_choice_selected')">is_choice_selected</a>(<a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>)) {
<a name="l276"><span class="linenum"> 276</span></a>                  <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a> = <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>;
<a name="l277"><span class="linenum"> 277</span></a>              }
<a name="l278"><span class="linenum"> 278</span></a>          }
<a name="l279"><span class="linenum"> 279</span></a>  
<a name="l280"><span class="linenum"> 280</span></a>          <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a> = array(
<a name="l281"><span class="linenum"> 281</span></a>              'id' =&gt; <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>-&gt;<a class="function" onClick="logFunction('get_qt_field_name')" href="../../../_functions/get_qt_field_name.html" onMouseOver="funcPopup(event,'get_qt_field_name')">get_qt_field_name</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../../_variables/fieldname.html">$fieldname</a>),
<a name="l282"><span class="linenum"> 282</span></a>          );
<a name="l283"><span class="linenum"> 283</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('readonly')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/readonly.html">readonly</a>) {
<a name="l284"><span class="linenum"> 284</span></a>              <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['disabled'] = 'disabled';
<a name="l285"><span class="linenum"> 285</span></a>          }
<a name="l286"><span class="linenum"> 286</span></a>  
<a name="l287"><span class="linenum"> 287</span></a>          <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('feedbackimg')" href="../../../_variables/feedbackimg.html">$feedbackimg</a> = '';
<a name="l288"><span class="linenum"> 288</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('correctness')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/correctness.html">correctness</a>) {
<a name="l289"><span class="linenum"> 289</span></a>              <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['class'] = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('feedback_class')" href="../../../_functions/feedback_class.html" onMouseOver="funcPopup(event,'feedback_class')">feedback_class</a>(<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>-&gt;<a onClick="logVariable('fraction')" class="var it41752" onMouseOver="hilite(41752)" onMouseOut="lolite()" href="../../../_variables/fraction.html">fraction</a>);
<a name="l290"><span class="linenum"> 290</span></a>              <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('feedbackimg')" href="../../../_variables/feedbackimg.html">$feedbackimg</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('feedback_image')" href="../../../_functions/feedback_image.html" onMouseOver="funcPopup(event,'feedback_image')">feedback_image</a>(<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>-&gt;<a onClick="logVariable('fraction')" class="var it41752" onMouseOver="hilite(41752)" onMouseOut="lolite()" href="../../../_variables/fraction.html">fraction</a>);
<a name="l291"><span class="linenum"> 291</span></a>          }
<a name="l292"><span class="linenum"> 292</span></a>          <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../../_variables/select.html">$select</a> = <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('select')" href="../../../_functions/select.html" onMouseOver="funcPopup(event,'select')">select</a>(<a class="var it680" onMouseOver="hilite(680)" onMouseOut="lolite()" onClick="logVariable('choices')" href="../../../_variables/choices.html">$choices</a>, <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>-&gt;<a class="function" onClick="logFunction('get_qt_field_name')" href="../../../_functions/get_qt_field_name.html" onMouseOver="funcPopup(event,'get_qt_field_name')">get_qt_field_name</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../../_variables/fieldname.html">$fieldname</a>),
<a name="l293"><span class="linenum"> 293</span></a>                  <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>, array('' =&gt; ''), <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>);
<a name="l294"><span class="linenum"> 294</span></a>  
<a name="l295"><span class="linenum"> 295</span></a>          <a class="var it2283" onMouseOver="hilite(2283)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../../_variables/order.html">$order</a> = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('get_order')" href="../../../_functions/get_order.html" onMouseOver="funcPopup(event,'get_order')">get_order</a>(<a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>);
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it2284" onMouseOver="hilite(2284)" onMouseOut="lolite()" onClick="logVariable('correctresponses')" href="../../../_variables/correctresponses.html">$correctresponses</a> = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('get_correct_response')" href="../../../_functions/get_correct_response.html" onMouseOver="funcPopup(event,'get_correct_response')">get_correct_response</a>();
<a name="l297"><span class="linenum"> 297</span></a>          <a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('rightanswer')" href="../../../_variables/rightanswer.html">$rightanswer</a> = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('answers')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/answers.html">answers</a>[<a class="var it2283" onMouseOver="hilite(2283)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../../_variables/order.html">$order</a>[<a class="phpfunction" onClick="logFunction('reset')" href="../../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it2284" onMouseOver="hilite(2284)" onMouseOut="lolite()" onClick="logVariable('correctresponses')" href="../../../_variables/correctresponses.html">$correctresponses</a>)]];
<a name="l298"><span class="linenum"> 298</span></a>          if (!<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>) {
<a name="l299"><span class="linenum"> 299</span></a>              <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a> = <span class="keyword">new </span><a class="class" onClick="logClass('question_answer')" href="../../../_classes/question_answer.html" onMouseOver="classPopup(event,'question_answer')">question_answer</a>(0, '', null, '', <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>);
<a name="l300"><span class="linenum"> 300</span></a>          }
<a name="l301"><span class="linenum"> 301</span></a>          <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('feedbackpopup')" href="../../../_variables/feedbackpopup.html">$feedbackpopup</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('feedback_popup')" href="../../../_functions/feedback_popup.html" onMouseOver="funcPopup(event,'feedback_popup')">feedback_popup</a>(<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>, <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>-&gt;<a onClick="logVariable('fraction')" class="var it41752" onMouseOver="hilite(41752)" onMouseOut="lolite()" href="../../../_variables/fraction.html">fraction</a>,
<a name="l302"><span class="linenum"> 302</span></a>                  <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>-&gt;<a onClick="logVariable('feedback')" class="var it41752" onMouseOver="hilite(41752)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>, <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it41752" onMouseOver="hilite(41752)" onMouseOut="lolite()" href="../../../_variables/feedbackformat.html">feedbackformat</a>,
<a name="l303"><span class="linenum"> 303</span></a>                          <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, 'question', 'answerfeedback', <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('matchinganswer')" href="../../../_variables/matchinganswer.html">$matchinganswer</a>-&gt;<a onClick="logVariable('id')" class="var it41752" onMouseOver="hilite(41752)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>),
<a name="l304"><span class="linenum"> 304</span></a>                  <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('rightanswer')" href="../../../_variables/rightanswer.html">$rightanswer</a>-&gt;<a onClick="logVariable('answer')" class="var it41753" onMouseOver="hilite(41753)" onMouseOut="lolite()" href="../../../_variables/answer.html">answer</a>, <a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('rightanswer')" href="../../../_variables/rightanswer.html">$rightanswer</a>-&gt;<a onClick="logVariable('answerformat')" class="var it41753" onMouseOver="hilite(41753)" onMouseOut="lolite()" href="../../../_variables/answerformat.html">answerformat</a>,
<a name="l305"><span class="linenum"> 305</span></a>                          <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, 'question', 'answer', <a class="var it2268" onMouseOver="hilite(2268)" onMouseOut="lolite()" onClick="logVariable('rightanswer')" href="../../../_variables/rightanswer.html">$rightanswer</a>-&gt;<a onClick="logVariable('id')" class="var it41753" onMouseOver="hilite(41753)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>), <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>);
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> = <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('span', array('class' =&gt; 'subquestion'));
<a name="l308"><span class="linenum"> 308</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('label', <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('answer'),
<a name="l309"><span class="linenum"> 309</span></a>                  array('class' =&gt; 'subq accesshide', 'for' =&gt; <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['id']));
<a name="l310"><span class="linenum"> 310</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../../_variables/select.html">$select</a>;
<a name="l311"><span class="linenum"> 311</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('feedbackimg')" href="../../../_variables/feedbackimg.html">$feedbackimg</a>;
<a name="l312"><span class="linenum"> 312</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('feedbackpopup')" href="../../../_variables/feedbackpopup.html">$feedbackpopup</a>;
<a name="l313"><span class="linenum"> 313</span></a>          <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a> .= <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('span');
<a name="l314"><span class="linenum"> 314</span></a>  
<a name="l315"><span class="linenum"> 315</span></a>          return <a class="var it71" onMouseOver="hilite(71)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../../_variables/output.html">$output</a>;
<a name="l316"><span class="linenum"> 316</span></a>      }
<a name="l317"><span class="linenum"> 317</span></a>  }
<a name="l318"><span class="linenum"> 318</span></a>  
<a name="l319"><span class="linenum"> 319</span></a>  
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment">/**</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment"> * Render an embedded multiple-choice question vertically, like for a normal</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment"> * multiple-choice question.</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment"> *</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment"> * @copyright  2010 Pierre Pichet</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l326"><span class="linenum"> 326</span></a>  <span class="comment"> */</span>
<a name="l327"><span class="linenum"> 327</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('qtype_multianswer_multichoice_vertical_renderer')" href="../../../_classes/qtype_multianswer_multichoice_vertical_renderer.html" onMouseOver="classPopup(event,'qtype_multianswer_multichoice_vertical_renderer')">qtype_multianswer_multichoice_vertical_renderer</a> extends qtype_multianswer_subq_renderer_base {
<a name="l328"><span class="linenum"> 328</span></a>  
<a name="l329"><span class="linenum"> 329</span></a>      public function <a class="function" onClick="logFunction('subquestion')" href="../../../_functions/subquestion.html" onMouseOver="funcPopup(event,'subquestion')">subquestion</a>(question_attempt <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, question_display_options <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>,
<a name="l330"><span class="linenum"> 330</span></a>              <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a>, question_graded_automatically <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>) {
<a name="l331"><span class="linenum"> 331</span></a>  
<a name="l332"><span class="linenum"> 332</span></a>          <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('fieldprefix')" href="../../../_variables/fieldprefix.html">$fieldprefix</a> = 'sub' . <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../../_variables/index.html">$index</a> . '_';
<a name="l333"><span class="linenum"> 333</span></a>          <a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../../_variables/fieldname.html">$fieldname</a> = <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('fieldprefix')" href="../../../_variables/fieldprefix.html">$fieldprefix</a> . 'answer';
<a name="l334"><span class="linenum"> 334</span></a>          <a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a> = <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>-&gt;<a class="function" onClick="logFunction('get_last_qt_var')" href="../../../_functions/get_last_qt_var.html" onMouseOver="funcPopup(event,'get_last_qt_var')">get_last_qt_var</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../../_variables/fieldname.html">$fieldname</a>);
<a name="l335"><span class="linenum"> 335</span></a>  
<a name="l336"><span class="linenum"> 336</span></a>          <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a> = array(
<a name="l337"><span class="linenum"> 337</span></a>              'type' =&gt; 'radio',
<a name="l338"><span class="linenum"> 338</span></a>              'name' =&gt; <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>-&gt;<a class="function" onClick="logFunction('get_qt_field_name')" href="../../../_functions/get_qt_field_name.html" onMouseOver="funcPopup(event,'get_qt_field_name')">get_qt_field_name</a>(<a class="var it1208" onMouseOver="hilite(1208)" onMouseOut="lolite()" onClick="logVariable('fieldname')" href="../../../_variables/fieldname.html">$fieldname</a>),
<a name="l339"><span class="linenum"> 339</span></a>          );
<a name="l340"><span class="linenum"> 340</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('readonly')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/readonly.html">readonly</a>) {
<a name="l341"><span class="linenum"> 341</span></a>              <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['disabled'] = 'disabled';
<a name="l342"><span class="linenum"> 342</span></a>          }
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('all_choices_wrapper_start')" href="../../../_functions/all_choices_wrapper_start.html" onMouseOver="funcPopup(event,'all_choices_wrapper_start')">all_choices_wrapper_start</a>();
<a name="l345"><span class="linenum"> 345</span></a>          <a class="var it2266" onMouseOver="hilite(2266)" onMouseOut="lolite()" onClick="logVariable('fraction')" href="../../../_variables/fraction.html">$fraction</a> = null;
<a name="l346"><span class="linenum"> 346</span></a>          foreach (<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('get_order')" href="../../../_functions/get_order.html" onMouseOver="funcPopup(event,'get_order')">get_order</a>(<a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>) as <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> =&gt; <a class="var it682" onMouseOver="hilite(682)" onMouseOut="lolite()" onClick="logVariable('ansid')" href="../../../_variables/ansid.html">$ansid</a>) {
<a name="l347"><span class="linenum"> 347</span></a>              <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a> = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('answers')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/answers.html">answers</a>[<a class="var it682" onMouseOver="hilite(682)" onMouseOut="lolite()" onClick="logVariable('ansid')" href="../../../_variables/ansid.html">$ansid</a>];
<a name="l348"><span class="linenum"> 348</span></a>  
<a name="l349"><span class="linenum"> 349</span></a>              <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['value'] = <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l350"><span class="linenum"> 350</span></a>              <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['id'] = <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['name'] . <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>;
<a name="l351"><span class="linenum"> 351</span></a>  
<a name="l352"><span class="linenum"> 352</span></a>              <a class="var it2285" onMouseOver="hilite(2285)" onMouseOut="lolite()" onClick="logVariable('isselected')" href="../../../_variables/isselected.html">$isselected</a> = <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('is_choice_selected')" href="../../../_functions/is_choice_selected.html" onMouseOver="funcPopup(event,'is_choice_selected')">is_choice_selected</a>(<a class="var it47" onMouseOver="hilite(47)" onMouseOut="lolite()" onClick="logVariable('response')" href="../../../_variables/response.html">$response</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a>);
<a name="l353"><span class="linenum"> 353</span></a>              if (<a class="var it2285" onMouseOver="hilite(2285)" onMouseOut="lolite()" onClick="logVariable('isselected')" href="../../../_variables/isselected.html">$isselected</a>) {
<a name="l354"><span class="linenum"> 354</span></a>                  <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['checked'] = 'checked';
<a name="l355"><span class="linenum"> 355</span></a>                  <a class="var it2266" onMouseOver="hilite(2266)" onMouseOut="lolite()" onClick="logVariable('fraction')" href="../../../_variables/fraction.html">$fraction</a> = <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('fraction')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/fraction.html">fraction</a>;
<a name="l356"><span class="linenum"> 356</span></a>              } else {
<a name="l357"><span class="linenum"> 357</span></a>                  unset(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['checked']);
<a name="l358"><span class="linenum"> 358</span></a>              }
<a name="l359"><span class="linenum"> 359</span></a>  
<a name="l360"><span class="linenum"> 360</span></a>              <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> = 'r' . (<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../../_variables/value.html">$value</a> % 2);
<a name="l361"><span class="linenum"> 361</span></a>              if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('correctness')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/correctness.html">correctness</a> &amp;&amp; <a class="var it2285" onMouseOver="hilite(2285)" onMouseOut="lolite()" onClick="logVariable('isselected')" href="../../../_variables/isselected.html">$isselected</a>) {
<a name="l362"><span class="linenum"> 362</span></a>                  <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('feedbackimg')" href="../../../_variables/feedbackimg.html">$feedbackimg</a> = <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('feedback_image')" href="../../../_functions/feedback_image.html" onMouseOver="funcPopup(event,'feedback_image')">feedback_image</a>(<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('fraction')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/fraction.html">fraction</a>);
<a name="l363"><span class="linenum"> 363</span></a>                  <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a> .= ' ' . <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('feedback_class')" href="../../../_functions/feedback_class.html" onMouseOver="funcPopup(event,'feedback_class')">feedback_class</a>(<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('fraction')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/fraction.html">fraction</a>);
<a name="l364"><span class="linenum"> 364</span></a>              } else {
<a name="l365"><span class="linenum"> 365</span></a>                  <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('feedbackimg')" href="../../../_variables/feedbackimg.html">$feedbackimg</a> = '';
<a name="l366"><span class="linenum"> 366</span></a>              }
<a name="l367"><span class="linenum"> 367</span></a>  
<a name="l368"><span class="linenum"> 368</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('choice_wrapper_start')" href="../../../_functions/choice_wrapper_start.html" onMouseOver="funcPopup(event,'choice_wrapper_start')">choice_wrapper_start</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>);
<a name="l369"><span class="linenum"> 369</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('empty_tag')" href="../../../_functions/empty_tag.html" onMouseOver="funcPopup(event,'empty_tag')">empty_tag</a>('input', <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>);
<a name="l370"><span class="linenum"> 370</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('label', <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('answer')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/answer.html">answer</a>,
<a name="l371"><span class="linenum"> 371</span></a>                      <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('answerformat')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/answerformat.html">answerformat</a>, <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, 'question', 'answer', <a class="var it682" onMouseOver="hilite(682)" onMouseOut="lolite()" onClick="logVariable('ansid')" href="../../../_variables/ansid.html">$ansid</a>),
<a name="l372"><span class="linenum"> 372</span></a>                      array('for' =&gt; <a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('inputattributes')" href="../../../_variables/inputattributes.html">$inputattributes</a>['id']));
<a name="l373"><span class="linenum"> 373</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('feedbackimg')" href="../../../_variables/feedbackimg.html">$feedbackimg</a>;
<a name="l374"><span class="linenum"> 374</span></a>  
<a name="l375"><span class="linenum"> 375</span></a>              if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('feedback')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a> &amp;&amp; <a class="var it2285" onMouseOver="hilite(2285)" onMouseOut="lolite()" onClick="logVariable('isselected')" href="../../../_variables/isselected.html">$isselected</a> &amp;&amp; <a class="phpfunction" onClick="logFunction('trim')" href="../../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('feedback')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>)) {
<a name="l376"><span class="linenum"> 376</span></a>                  <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('div',
<a name="l377"><span class="linenum"> 377</span></a>                          <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('feedback')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a>, <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('feedbackformat')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/feedbackformat.html">feedbackformat</a>,
<a name="l378"><span class="linenum"> 378</span></a>                                  <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, 'question', 'answerfeedback', <a class="var it682" onMouseOver="hilite(682)" onMouseOut="lolite()" onClick="logVariable('ansid')" href="../../../_variables/ansid.html">$ansid</a>),
<a name="l379"><span class="linenum"> 379</span></a>                          array('class' =&gt; 'specificfeedback'));
<a name="l380"><span class="linenum"> 380</span></a>              }
<a name="l381"><span class="linenum"> 381</span></a>  
<a name="l382"><span class="linenum"> 382</span></a>              <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('choice_wrapper_end')" href="../../../_functions/choice_wrapper_end.html" onMouseOver="funcPopup(event,'choice_wrapper_end')">choice_wrapper_end</a>();
<a name="l383"><span class="linenum"> 383</span></a>          }
<a name="l384"><span class="linenum"> 384</span></a>  
<a name="l385"><span class="linenum"> 385</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('all_choices_wrapper_end')" href="../../../_functions/all_choices_wrapper_end.html" onMouseOver="funcPopup(event,'all_choices_wrapper_end')">all_choices_wrapper_end</a>();
<a name="l386"><span class="linenum"> 386</span></a>  
<a name="l387"><span class="linenum"> 387</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a> = array();
<a name="l388"><span class="linenum"> 388</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('feedback')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/feedback.html">feedback</a> &amp;&amp; <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('marks')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/marks.html">marks</a> &gt;= <a class="class" onClick="logClass('question_display_options')" href="../../../_classes/question_display_options.html" onMouseOver="classPopup(event,'question_display_options')">question_display_options</a>::MARK_AND_MAX &amp;&amp;
<a name="l389"><span class="linenum"> 389</span></a>                  <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('maxmark')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/maxmark.html">maxmark</a> &gt; 0) {
<a name="l390"><span class="linenum"> 390</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a> = new stdClass();
<a name="l391"><span class="linenum"> 391</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('mark')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../../_variables/mark.html">mark</a> = <a class="function" onClick="logFunction('format_float')" href="../../../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it2266" onMouseOver="hilite(2266)" onMouseOut="lolite()" onClick="logVariable('fraction')" href="../../../_variables/fraction.html">$fraction</a> * <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('maxmark')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/maxmark.html">maxmark</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('markdp')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/markdp.html">markdp</a>);
<a name="l392"><span class="linenum"> 392</span></a>              <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('max')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../../_variables/max.html">max</a> =  <a class="function" onClick="logFunction('format_float')" href="../../../_functions/format_float.html" onMouseOver="funcPopup(event,'format_float')">format_float</a>(<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('maxmark')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/maxmark.html">maxmark</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('markdp')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/markdp.html">markdp</a>);
<a name="l393"><span class="linenum"> 393</span></a>  
<a name="l394"><span class="linenum"> 394</span></a>              <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a>[] = <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('div', <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('markoutofmax', 'question', <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../../_variables/a.html">$a</a>));
<a name="l395"><span class="linenum"> 395</span></a>          }
<a name="l396"><span class="linenum"> 396</span></a>  
<a name="l397"><span class="linenum"> 397</span></a>          if (<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('rightanswer')" class="var it39524" onMouseOver="hilite(39524)" onMouseOut="lolite()" href="../../../_variables/rightanswer.html">rightanswer</a>) {
<a name="l398"><span class="linenum"> 398</span></a>              foreach (<a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a onClick="logVariable('answers')" class="var it40134" onMouseOver="hilite(40134)" onMouseOut="lolite()" href="../../../_variables/answers.html">answers</a> as <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>) {
<a name="l399"><span class="linenum"> 399</span></a>                  if (question_state::<a class="function" onClick="logFunction('graded_state_for_fraction')" href="../../../_functions/graded_state_for_fraction.html" onMouseOver="funcPopup(event,'graded_state_for_fraction')">graded_state_for_fraction</a>(<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('fraction')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/fraction.html">fraction</a>) ==
<a name="l400"><span class="linenum"> 400</span></a>                          question_state::<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('gradedright')" href="../../../_variables/gradedright.html">$gradedright</a>) {
<a name="l401"><span class="linenum"> 401</span></a>                      <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a>[] = <a class="function" onClick="logFunction('get_string')" href="../../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('correctansweris', 'qtype_multichoice',
<a name="l402"><span class="linenum"> 402</span></a>                              <a class="var it677" onMouseOver="hilite(677)" onMouseOut="lolite()" onClick="logVariable('subq')" href="../../../_variables/subq.html">$subq</a>-&gt;<a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('answer')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/answer.html">answer</a>, <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('ans')" href="../../../_variables/ans.html">$ans</a>-&gt;<a onClick="logVariable('answerformat')" class="var it39695" onMouseOver="hilite(39695)" onMouseOut="lolite()" href="../../../_variables/answerformat.html">answerformat</a>,
<a name="l403"><span class="linenum"> 403</span></a>                                      <a class="var it712" onMouseOver="hilite(712)" onMouseOut="lolite()" onClick="logVariable('qa')" href="../../../_variables/qa.html">$qa</a>, 'question', 'answer', <a class="var it682" onMouseOver="hilite(682)" onMouseOut="lolite()" onClick="logVariable('ansid')" href="../../../_variables/ansid.html">$ansid</a>));
<a name="l404"><span class="linenum"> 404</span></a>                      break;
<a name="l405"><span class="linenum"> 405</span></a>                  }
<a name="l406"><span class="linenum"> 406</span></a>              }
<a name="l407"><span class="linenum"> 407</span></a>          }
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a> .= <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('nonempty_tag')" href="../../../_functions/nonempty_tag.html" onMouseOver="funcPopup(event,'nonempty_tag')">nonempty_tag</a>('div', <a class="phpfunction" onClick="logFunction('implode')" href="../../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('&lt;br /&gt;', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../../_variables/feedback.html">$feedback</a>), array('class' =&gt; 'outcome'));
<a name="l410"><span class="linenum"> 410</span></a>  
<a name="l411"><span class="linenum"> 411</span></a>          return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../../_variables/result.html">$result</a>;
<a name="l412"><span class="linenum"> 412</span></a>      }
<a name="l413"><span class="linenum"> 413</span></a>  
<a name="l414"><span class="linenum"> 414</span></a>      <span class="comment">/**</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">     * @param string $class class attribute value.</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">     * @return string HTML to go before each choice.</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment">     */</span>
<a name="l418"><span class="linenum"> 418</span></a>      protected function <a class="function" onClick="logFunction('choice_wrapper_start')" href="../../../_functions/choice_wrapper_start.html" onMouseOver="funcPopup(event,'choice_wrapper_start')">choice_wrapper_start</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>) {
<a name="l419"><span class="linenum"> 419</span></a>          return <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class' =&gt; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>));
<a name="l420"><span class="linenum"> 420</span></a>      }
<a name="l421"><span class="linenum"> 421</span></a>  
<a name="l422"><span class="linenum"> 422</span></a>      <span class="comment">/**</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">     * @return string HTML to go after each choice.</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">     */</span>
<a name="l425"><span class="linenum"> 425</span></a>      protected function <a class="function" onClick="logFunction('choice_wrapper_end')" href="../../../_functions/choice_wrapper_end.html" onMouseOver="funcPopup(event,'choice_wrapper_end')">choice_wrapper_end</a>() {
<a name="l426"><span class="linenum"> 426</span></a>          return <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l427"><span class="linenum"> 427</span></a>      }
<a name="l428"><span class="linenum"> 428</span></a>  
<a name="l429"><span class="linenum"> 429</span></a>      <span class="comment">/**</span>
<a name="l430"><span class="linenum"> 430</span></a>  <span class="comment">     * @return string HTML to go before all the choices.</span>
<a name="l431"><span class="linenum"> 431</span></a>  <span class="comment">     */</span>
<a name="l432"><span class="linenum"> 432</span></a>      protected function <a class="function" onClick="logFunction('all_choices_wrapper_start')" href="../../../_functions/all_choices_wrapper_start.html" onMouseOver="funcPopup(event,'all_choices_wrapper_start')">all_choices_wrapper_start</a>() {
<a name="l433"><span class="linenum"> 433</span></a>          return <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class' =&gt; 'answer'));
<a name="l434"><span class="linenum"> 434</span></a>      }
<a name="l435"><span class="linenum"> 435</span></a>  
<a name="l436"><span class="linenum"> 436</span></a>      <span class="comment">/**</span>
<a name="l437"><span class="linenum"> 437</span></a>  <span class="comment">     * @return string HTML to go after all the choices.</span>
<a name="l438"><span class="linenum"> 438</span></a>  <span class="comment">     */</span>
<a name="l439"><span class="linenum"> 439</span></a>      protected function <a class="function" onClick="logFunction('all_choices_wrapper_end')" href="../../../_functions/all_choices_wrapper_end.html" onMouseOver="funcPopup(event,'all_choices_wrapper_end')">all_choices_wrapper_end</a>() {
<a name="l440"><span class="linenum"> 440</span></a>          return <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l441"><span class="linenum"> 441</span></a>      }
<a name="l442"><span class="linenum"> 442</span></a>  }
<a name="l443"><span class="linenum"> 443</span></a>  
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">/**</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment"> * Render an embedded multiple-choice question vertically, like for a normal</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment"> * multiple-choice question.</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment"> *</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment"> * @copyright  2010 Pierre Pichet</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment"> */</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('qtype_multianswer_multichoice_horizontal_renderer')" href="../../../_classes/qtype_multianswer_multichoice_horizontal_renderer.html" onMouseOver="classPopup(event,'qtype_multianswer_multichoice_horizontal_renderer')">qtype_multianswer_multichoice_horizontal_renderer</a>
<a name="l453"><span class="linenum"> 453</span></a>          <span class="keyword">extends</span> <a class="class" onClick="logClass('qtype_multianswer_multichoice_vertical_renderer')" href="../../../_classes/qtype_multianswer_multichoice_vertical_renderer.html" onMouseOver="classPopup(event,'qtype_multianswer_multichoice_vertical_renderer')">qtype_multianswer_multichoice_vertical_renderer</a> {
<a name="l454"><span class="linenum"> 454</span></a>  
<a name="l455"><span class="linenum"> 455</span></a>      protected function <a class="function" onClick="logFunction('choice_wrapper_start')" href="../../../_functions/choice_wrapper_start.html" onMouseOver="funcPopup(event,'choice_wrapper_start')">choice_wrapper_start</a>(<a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>) {
<a name="l456"><span class="linenum"> 456</span></a>          return <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('td', array('class' =&gt; <a class="var it318" onMouseOver="hilite(318)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../../_variables/class.html">$class</a>));
<a name="l457"><span class="linenum"> 457</span></a>      }
<a name="l458"><span class="linenum"> 458</span></a>  
<a name="l459"><span class="linenum"> 459</span></a>      protected function <a class="function" onClick="logFunction('choice_wrapper_end')" href="../../../_functions/choice_wrapper_end.html" onMouseOver="funcPopup(event,'choice_wrapper_end')">choice_wrapper_end</a>() {
<a name="l460"><span class="linenum"> 460</span></a>          return <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('td');
<a name="l461"><span class="linenum"> 461</span></a>      }
<a name="l462"><span class="linenum"> 462</span></a>  
<a name="l463"><span class="linenum"> 463</span></a>      protected function <a class="function" onClick="logFunction('all_choices_wrapper_start')" href="../../../_functions/all_choices_wrapper_start.html" onMouseOver="funcPopup(event,'all_choices_wrapper_start')">all_choices_wrapper_start</a>() {
<a name="l464"><span class="linenum"> 464</span></a>          return <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('table', array('class' =&gt; 'answer')) .
<a name="l465"><span class="linenum"> 465</span></a>                  <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('tbody') . <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('tr');
<a name="l466"><span class="linenum"> 466</span></a>      }
<a name="l467"><span class="linenum"> 467</span></a>  
<a name="l468"><span class="linenum"> 468</span></a>      protected function <a class="function" onClick="logFunction('all_choices_wrapper_end')" href="../../../_functions/all_choices_wrapper_end.html" onMouseOver="funcPopup(event,'all_choices_wrapper_end')">all_choices_wrapper_end</a>() {
<a name="l469"><span class="linenum"> 469</span></a>          return <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('tr') . <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('tbody') .
<a name="l470"><span class="linenum"> 470</span></a>                  <a class="class" onClick="logClass('html_writer')" href="../../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('table');
<a name="l471"><span class="linenum"> 471</span></a>      }
<a name="l472"><span class="linenum"> 472</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'get_slot': ['get_slot', '', [['question/engine','questionattempt.php',226]], 30],
'get_renderer': ['get_renderer', 'Get the renderer for a part of Moodle for this theme. ', [['lib','outputlib.php',1790],['mod/assign','locallib.php',2734],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['course/format','lib.php',889],['question/type/multichoice','question.php',137],['question/type/multichoice','question.php',259],['question/type','questionbase.php',275],['grade/grading/form/guide','lib.php',482],['question/behaviour','behaviourbase.php',135],['lib','pagelib.php',797],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49]], 339],
'formulation_and_controls': ['formulation_and_controls', '', [['question/type/multianswer','renderer.php',43],['question/type','rendererbase.php',37],['question/type/truefalse','renderer.php',37],['question/type/description','renderer.php',37],['question/type/essay','renderer.php',37],['question/type/shortanswer','renderer.php',37],['question/type/match','renderer.php',37],['question/type/numerical','renderer.php',34],['question/type/multichoice','renderer.php',55]], 1],
'strlen': ['strlen', 'Multibyte safe strlen() function, uses mbstring or iconv for UTF-8, falls back to typo3. ', [['lib/classes','text.php',281],['lib/typo3','class.t3lib_cs.php',1520]], 1698],
'empty_tag': ['empty_tag', 'Outputs an empty tag with attributes ', [['lib','outputcomponents.php',1096]], 511],
'get_validation_error': ['get_validation_error', '', [['question/type/multianswer','question.php',209],['question/type/shortanswer','question.php',64],['question/type/truefalse','question.php',79],['question/type/missingtype','question.php',59],['question/type/match','question.php',252],['question/type/numerical','question.php',116],['question/type/multichoice','question.php',235],['question/type/multichoice','question.php',443],['question/type','questionbase.php',568]], 6],
'get_qt_field_name': ['get_qt_field_name', 'Get the name (in the sense a HTML name="" attribute, or a $_POST variable name) to use for a question_type variable belonging to this question_attempt. ', [['question/engine','questionattempt.php',307]], 26],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'all_choices_wrapper_end': ['all_choices_wrapper_end', '', [['question/type/multianswer','renderer.php',439],['question/type/multianswer','renderer.php',468]], 1],
'graded_state_for_fraction': ['graded_state_for_fraction', '', [['question/engine/upgrade','behaviourconverters.php',293],['question/engine','states.php',203]], 30],
'start_tag': ['start_tag', '', [['backup/util/xml/parser','progressive_parser.class.php',215],['lib','outputcomponents.php',1075]], 694],
'get_state': ['get_state', '', [['question/engine','questionattemptstep.php',141],['question/engine','questionattemptstep.php',580],['question/engine','questionattemptstep.php',666],['mod/quiz','attemptlib.php',758],['cache/classes','factory.php',495],['question/engine','questionattempt.php',589]], 106],
'js_init_call': ['js_init_call', 'Ensure that the specified JavaScript function is called from an inline script from page footer. ', [['lib','outputrequirementslib.php',1050]], 95],
'nonempty_tag': ['nonempty_tag', 'Outputs a tag, but only if the contents are not empty ', [['lib','outputcomponents.php',1107]], 38],
'choice_wrapper_start': ['choice_wrapper_start', '', [['question/type/multianswer','renderer.php',418],['question/type/multianswer','renderer.php',455]], 1],
'get_order': ['get_order', '', [['question/type/multichoice','question.php',79]], 6],
'feedback_class': ['feedback_class', '', [['question/type','rendererbase.php',218]], 9],
'tag': ['tag', 'Outputs a tag with attributes and contents ', [['lib','outputcomponents.php',1063],['lib/zend/Zend/Service','Technorati.php',228]], 1254],
'get_last_qt_data': ['get_last_qt_data', 'Get the qt data from the latest step that has any qt data. Return $default array if it is no step has qt data. ', [['question/engine','questionattempt.php',447]], 13],
'choice_wrapper_end': ['choice_wrapper_end', '', [['question/type/multianswer','renderer.php',425],['question/type/multianswer','renderer.php',459]], 1],
'end_tag': ['end_tag', '', [['backup/util/xml/parser','progressive_parser.class.php',261],['lib','outputcomponents.php',1086],['backup/util/xml','xml_writer.class.php',177]], 858],
'is_choice_selected': ['is_choice_selected', '', [['question/type/multichoice','question.php',246],['question/type/multichoice','question.php',478]], 5],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'get_matching_answer': ['get_matching_answer', 'Get an answer that contains the feedback and fraction that should be awarded for this response. ', [['question/type/numerical','question.php',173],['question/type','questionbase.php',764]], 15],
'feedback_image': ['feedback_image', 'Return an appropriate icon (green tick, red cross, etc.) for a grade. ', [['question/type','rendererbase.php',222]], 9],
'get_last_qt_var': ['get_last_qt_var', 'Get the latest value of a particular question type variable. That is, get the value from the latest step that has it set. Return null if it is not set in any step. ', [['question/engine','questionattempt.php',496]], 21],
'get_question': ['get_question', 'Get the question_definition for a question in this attempt. ', [['question/engine','questionusage.php',218],['mod/quiz','attemptlib.php',249],['question/engine','questionattempt.php',204],['question/engine/upgrade','upgradelib.php',323]], 74],
'get_correct_response': ['get_correct_response', '', [['question/type/multianswer','question.php',142],['question/engine','questionusage.php',803],['question/behaviour/informationitem','behaviour.php',53],['question/type/calculated','question.php',90],['question/type/shortanswer','question.php',140],['question/type/truefalse','question.php',47],['question/behaviour/immediatecbm','behaviour.php',69],['question/type/missingtype','question.php',47],['question/type/essay','question.php',88],['question/type/match','question.php',183],['question/type/numerical','question.php',156],['question/type/multichoice','question.php',180],['question/type/multichoice','question.php',343],['question/type','questionbase.php',453],['question/type','questionbase.php',755],['question/behaviour','behaviourbase.php',235],['question/behaviour/deferredcbm','behaviour.php',68],['question/engine','questionattempt.php',1144]], 41],
'default_string': ['default_string', 'The result of doing get_string on the result of {@link get_state_class()}. ', [['question/engine','states.php',273]], 4],
's': ['s', 'Count of attempts selected by $this->whichattempts ', [['mod/quiz/report/statistics/classes','calculated.php',91],['lib','weblib.php',84]], 988],
'select': ['select', 'Create a new Zend_Service_WindowsAzure_Storage_TableEntityQuery ', [['lib/zend/Zend/Service/WindowsAzure/Storage','Table.php',455],['lib/zend/Zend/Service/WindowsAzure/Storage','TableEntityQuery.php',74],['lib','outputcomponents.php',1255],['lib/jquery/ui-1.11.4/external/jquery','jquery.js',2845]], 593],
'get_correct_answer': ['get_correct_answer', '', [['question/type/numerical','question.php',204],['question/type','questionbase.php',778],['question/type','questionbase.php',968],['question/type','questionbase.php',1027]], 6],
'all_choices_wrapper_start': ['all_choices_wrapper_start', '', [['question/type/multianswer','renderer.php',432],['question/type/multianswer','renderer.php',463]], 1],
'correct_response': ['correct_response', '', [['question/type/multianswer','renderer.php',101],['question/type','rendererbase.php',180],['question/type/calculated','renderer.php',39],['question/type/truefalse','renderer.php',137],['question/type/shortanswer','renderer.php',115],['question/type/match','renderer.php',133],['question/type/numerical','renderer.php',167],['question/type/multichoice','renderer.php',223],['question/type/multichoice','renderer.php',275]], 1],
'apply_units': ['apply_units', 'Takes a number in almost any localised form, and possibly with a unit after it. It separates off the unit, if present, and converts to the default unit, by using the given unit multiplier. ', [['question/type/numerical','questiontype.php',622]], 23],
'feedback_popup': ['feedback_popup', 'Render the feedback pop-up contents. ', [['question/type/multianswer','renderer.php',120]], 2],
'subquestion': ['subquestion', '', [['question/type/multianswer','renderer.php',80],['question/type/multianswer','renderer.php',179],['question/type/multianswer','renderer.php',261],['question/type/multianswer','renderer.php',329]], 3],
'format_float': ['format_float', 'This function should be identical to {@link qtype_calculated_variable_substituter::format_float()}. Except that we do not try to do locale-aware replacement of the decimal point. ', [['question/type/calculated/db','upgradelib.php',205],['lib','moodlelib.php',7707],['question/type/calculatedmulti/db','upgradelib.php',229],['question/type/calculated','question.php',328]], 154],
'format_text': ['format_text', 'Given text in a variety of format codings, this function returns the text as safe HTML. ', [['lib','weblib.php',1115],['lib','tablelib.php',846],['lib','tablelib.php',1583],['lib','tablelib.php',1900],['question/type','questionbase.php',345],['lib/classes','grading_external.php',182]], 325],
'trim': ['trim', '', [], 1889],
'name': ['name', '', [], 100],
'round': ['round', '', [], 903],
'implode': ['implode', '', [], 1259],
'str_replace': ['str_replace', '', [], 1667],
'is_null': ['is_null', '', [], 1992],
'array_keys': ['array_keys', '', [], 1152],
'array_values': ['array_values', '', [], 283],
'max': ['max', '', [], 1096],
'reset': ['reset', '', [], 1070],
'rand': ['rand', '', [], 107],
'min': ['min', '', [], 754]};
CLASS_DATA={
'coding_exception': ['coding_exception', 'Exception indicating programming error, must be fixed by a programer. For example a core API might throw this type of exception if a plugin calls it incorrectly. ', [['lib','setuplib.php',214]], 867],
'qtype_multianswer_multichoice_horizontal_renderer': ['qtype_multianswer_multichoice_horizontal_renderer', 'Render an embedded multiple-choice question vertically, like for a normal multiple-choice question. ', [['question/type/multianswer','renderer.php',445]], 0],
'qtype_multianswer_multichoice_vertical_renderer': ['qtype_multianswer_multichoice_vertical_renderer', 'Render an embedded multiple-choice question vertically, like for a normal multiple-choice question. ', [['question/type/multianswer','renderer.php',320]], 0],
'qtype_multianswer_renderer': ['qtype_multianswer_renderer', 'Base class for generating the bits of output common to multianswer (Cloze) questions. This render the main question text and transfer to the subquestions the task of display their input elements and status feedback, grade, correct answer(s) ', [['question/type/multianswer','renderer.php',31]], 0],
'question_display_options': ['question_display_options', 'This class contains all the options that controls how a question is displayed. ', [['question/engine','lib.php',461]], 78],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 512],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1052]], 4832],
'question_answer': ['question_answer', 'Class to represent a question answer, loaded from the question_answers table in the database. ', [['question/type','questionbase.php',809]], 69],
'qtype_multianswer_multichoice_inline_renderer': ['qtype_multianswer_multichoice_inline_renderer', 'Render an embedded multiple-choice question that is displayed as a select menu. ', [['question/type/multianswer','renderer.php',252]], 0],
'qtype_multianswer_textfield_renderer': ['qtype_multianswer_textfield_renderer', 'Subclass for generating the bits of output specific to shortanswer subquestions. ', [['question/type/multianswer','renderer.php',170]], 0]};
CONST_DATA={
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 999]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
