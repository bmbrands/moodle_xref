<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /question/editlib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='question';
filename='editlib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/question/</a> -> <a href="editlib.php.html">editlib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="editlib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="editlib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Functions used to show question editing interface</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package    moodlecore</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @subpackage questionbank</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright  1999 onwards Martin Dougiamas and others {@link http://moodle.com}</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  use core_question\bank\search\category_condition;
<a name="l28"><span class="linenum">  28</span></a>  
<a name="l29"><span class="linenum">  29</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a> . '/questionlib.php');
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('DEFAULT_QUESTIONS_PER_PAGE')" href="../_constants/DEFAULT_QUESTIONS_PER_PAGE.html" onMouseOver="constPopup(event,'DEFAULT_QUESTIONS_PER_PAGE')">DEFAULT_QUESTIONS_PER_PAGE</a>', 20);
<a name="l34"><span class="linenum">  34</span></a>  
<a name="l35"><span class="linenum">  35</span></a>  function <a class="function" onClick="logFunction('get_module_from_cmid')" href="../_functions/get_module_from_cmid.html" onMouseOver="funcPopup(event,'get_module_from_cmid')">get_module_from_cmid</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>) {
<a name="l36"><span class="linenum">  36</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l37"><span class="linenum">  37</span></a>      if (!<a class="var it25178" onMouseOver="hilite(25178)" onMouseOut="lolite()" onClick="logVariable('cmrec')" href="../_variables/cmrec.html">$cmrec</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(&quot;SELECT cm.*, md.name as modname
<a name="l38"><span class="linenum">  38</span></a>                                 FROM {course_modules} cm,
<a name="l39"><span class="linenum">  39</span></a>                                      {modules} md
<a name="l40"><span class="linenum">  40</span></a>                                 WHERE cm.id = ? AND
<a name="l41"><span class="linenum">  41</span></a>                                       md.id = cm.module&quot;, array(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>))){
<a name="l42"><span class="linenum">  42</span></a>          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcoursemodule');
<a name="l43"><span class="linenum">  43</span></a>      } elseif (!<a class="var it25179" onMouseOver="hilite(25179)" onMouseOut="lolite()" onClick="logVariable('modrec')" href="../_variables/modrec.html">$modrec</a> =<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(<a class="var it25178" onMouseOver="hilite(25178)" onMouseOut="lolite()" onClick="logVariable('cmrec')" href="../_variables/cmrec.html">$cmrec</a>-&gt;<a onClick="logVariable('modname')" class="var it40156" onMouseOver="hilite(40156)" onMouseOut="lolite()" href="../_variables/modname.html">modname</a>, array('id' =&gt; <a class="var it25178" onMouseOver="hilite(25178)" onMouseOut="lolite()" onClick="logVariable('cmrec')" href="../_variables/cmrec.html">$cmrec</a>-&gt;<a onClick="logVariable('instance')" class="var it40156" onMouseOver="hilite(40156)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a>))) {
<a name="l44"><span class="linenum">  44</span></a>          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcoursemodule');
<a name="l45"><span class="linenum">  45</span></a>      }
<a name="l46"><span class="linenum">  46</span></a>      <a class="var it25179" onMouseOver="hilite(25179)" onMouseOut="lolite()" onClick="logVariable('modrec')" href="../_variables/modrec.html">$modrec</a>-&gt;<a onClick="logVariable('instance')" class="var it40157" onMouseOver="hilite(40157)" onMouseOut="lolite()" href="../_variables/instance.html">instance</a> = <a class="var it25179" onMouseOver="hilite(25179)" onMouseOut="lolite()" onClick="logVariable('modrec')" href="../_variables/modrec.html">$modrec</a>-&gt;<a onClick="logVariable('id')" class="var it40157" onMouseOver="hilite(40157)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l47"><span class="linenum">  47</span></a>      <a class="var it25179" onMouseOver="hilite(25179)" onMouseOut="lolite()" onClick="logVariable('modrec')" href="../_variables/modrec.html">$modrec</a>-&gt;<a onClick="logVariable('cmid')" class="var it40157" onMouseOver="hilite(40157)" onMouseOut="lolite()" href="../_variables/cmid.html">cmid</a> = <a class="var it25178" onMouseOver="hilite(25178)" onMouseOut="lolite()" onClick="logVariable('cmrec')" href="../_variables/cmrec.html">$cmrec</a>-&gt;<a onClick="logVariable('id')" class="var it40156" onMouseOver="hilite(40156)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l48"><span class="linenum">  48</span></a>      <a class="var it25178" onMouseOver="hilite(25178)" onMouseOut="lolite()" onClick="logVariable('cmrec')" href="../_variables/cmrec.html">$cmrec</a>-&gt;<a onClick="logVariable('name')" class="var it40156" onMouseOver="hilite(40156)" onMouseOut="lolite()" href="../_variables/name.html">name</a> = <a class="var it25179" onMouseOver="hilite(25179)" onMouseOut="lolite()" onClick="logVariable('modrec')" href="../_variables/modrec.html">$modrec</a>-&gt;<a onClick="logVariable('name')" class="var it40157" onMouseOver="hilite(40157)" onMouseOut="lolite()" href="../_variables/name.html">name</a>;
<a name="l49"><span class="linenum">  49</span></a>  
<a name="l50"><span class="linenum">  50</span></a>      return array(<a class="var it25179" onMouseOver="hilite(25179)" onMouseOut="lolite()" onClick="logVariable('modrec')" href="../_variables/modrec.html">$modrec</a>, <a class="var it25178" onMouseOver="hilite(25178)" onMouseOut="lolite()" onClick="logVariable('cmrec')" href="../_variables/cmrec.html">$cmrec</a>);
<a name="l51"><span class="linenum">  51</span></a>  }
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">/**</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">* Function to read all questions for category into big array</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment">*</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment">* @param int $category category number</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment">* @param bool $noparent if true only questions with NO parent will be selected</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment">* @param bool $recurse include subdirectories</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment">* @param bool $export set true if this is called by questionbank export</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment">*/</span>
<a name="l60"><span class="linenum">  60</span></a>  function <a class="function" onClick="logFunction('get_questions_category')" href="../_functions/get_questions_category.html" onMouseOver="funcPopup(event,'get_questions_category')">get_questions_category</a>( <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>, <a class="var it25180" onMouseOver="hilite(25180)" onMouseOut="lolite()" onClick="logVariable('noparent')" href="../_variables/noparent.html">$noparent</a>=false, <a class="var it6680" onMouseOver="hilite(6680)" onMouseOut="lolite()" onClick="logVariable('recurse')" href="../_variables/recurse.html">$recurse</a>=true, <a class="var it8818" onMouseOver="hilite(8818)" onMouseOut="lolite()" onClick="logVariable('export')" href="../_variables/export.html">$export</a>=true ) {
<a name="l61"><span class="linenum">  61</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l62"><span class="linenum">  62</span></a>  
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">    // Build sql bit for $noparent</span>
<a name="l64"><span class="linenum">  64</span></a>      <a class="var it25181" onMouseOver="hilite(25181)" onMouseOut="lolite()" onClick="logVariable('npsql')" href="../_variables/npsql.html">$npsql</a> = '';
<a name="l65"><span class="linenum">  65</span></a>      if (<a class="var it25180" onMouseOver="hilite(25180)" onMouseOut="lolite()" onClick="logVariable('noparent')" href="../_variables/noparent.html">$noparent</a>) {
<a name="l66"><span class="linenum">  66</span></a>        <a class="var it25181" onMouseOver="hilite(25181)" onMouseOut="lolite()" onClick="logVariable('npsql')" href="../_variables/npsql.html">$npsql</a> = &quot; and parent='0' &quot;;
<a name="l67"><span class="linenum">  67</span></a>      }
<a name="l68"><span class="linenum">  68</span></a>  
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">    // Get list of categories</span>
<a name="l70"><span class="linenum">  70</span></a>      if (<a class="var it6680" onMouseOver="hilite(6680)" onMouseOut="lolite()" onClick="logVariable('recurse')" href="../_variables/recurse.html">$recurse</a>) {
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it12652" onMouseOver="hilite(12652)" onMouseOut="lolite()" onClick="logVariable('categorylist')" href="../_variables/categorylist.html">$categorylist</a> = <a class="function" onClick="logFunction('question_categorylist')" href="../_functions/question_categorylist.html" onMouseOver="funcPopup(event,'question_categorylist')">question_categorylist</a>(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l72"><span class="linenum">  72</span></a>      } else {
<a name="l73"><span class="linenum">  73</span></a>          <a class="var it12652" onMouseOver="hilite(12652)" onMouseOut="lolite()" onClick="logVariable('categorylist')" href="../_variables/categorylist.html">$categorylist</a> = array(<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l74"><span class="linenum">  74</span></a>      }
<a name="l75"><span class="linenum">  75</span></a>  
<a name="l76"><span class="linenum">  76</span></a>  <span class="comment">    // Get the list of questions for the category</span>
<a name="l77"><span class="linenum">  77</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it2909" onMouseOver="hilite(2909)" onMouseOut="lolite()" onClick="logVariable('usql')" href="../_variables/usql.html">$usql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>) = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it12652" onMouseOver="hilite(12652)" onMouseOut="lolite()" onClick="logVariable('categorylist')" href="../_variables/categorylist.html">$categorylist</a>);
<a name="l78"><span class="linenum">  78</span></a>      <a class="var it2900" onMouseOver="hilite(2900)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('question', &quot;category {<a class="var it2909" onMouseOver="hilite(2909)" onMouseOut="lolite()" onClick="logVariable('usql')" href="../_variables/usql.html">$usql</a>} {<a class="var it25181" onMouseOver="hilite(25181)" onMouseOut="lolite()" onClick="logVariable('npsql')" href="../_variables/npsql.html">$npsql</a>}&quot;, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, 'qtype, name');
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">    // Iterate through questions, getting stuff we need</span>
<a name="l81"><span class="linenum">  81</span></a>      <a class="var it25182" onMouseOver="hilite(25182)" onMouseOut="lolite()" onClick="logVariable('qresults')" href="../_variables/qresults.html">$qresults</a> = array();
<a name="l82"><span class="linenum">  82</span></a>      foreach(<a class="var it2900" onMouseOver="hilite(2900)" onMouseOut="lolite()" onClick="logVariable('questions')" href="../_variables/questions.html">$questions</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>) {
<a name="l83"><span class="linenum">  83</span></a>          <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('export_process')" class="var it39488" onMouseOver="hilite(39488)" onMouseOut="lolite()" href="../_variables/export_process.html">export_process</a> = <a class="var it8818" onMouseOver="hilite(8818)" onMouseOut="lolite()" onClick="logVariable('export')" href="../_variables/export.html">$export</a>;
<a name="l84"><span class="linenum">  84</span></a>          <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../_variables/qtype.html">$qtype</a> = question_bank::<a class="function" onClick="logFunction('get_qtype')" href="../_functions/get_qtype.html" onMouseOver="funcPopup(event,'get_qtype')">get_qtype</a>(<a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>-&gt;<a onClick="logVariable('qtype')" class="var it39488" onMouseOver="hilite(39488)" onMouseOut="lolite()" href="../_variables/qtype.html">qtype</a>, false);
<a name="l85"><span class="linenum">  85</span></a>          if (<a class="var it8818" onMouseOver="hilite(8818)" onMouseOut="lolite()" onClick="logVariable('export')" href="../_variables/export.html">$export</a> &amp;&amp; <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../_variables/qtype.html">$qtype</a>-&gt;<a class="phpfunction" onClick="logFunction('name')" href="../_functions/name.html" onMouseOver="phpfuncPopup(event,'name')">name</a>() == 'missingtype') {
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">            // Unrecognised question type. Skip this question when exporting.</span>
<a name="l87"><span class="linenum">  87</span></a>              continue;
<a name="l88"><span class="linenum">  88</span></a>          }
<a name="l89"><span class="linenum">  89</span></a>          <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../_variables/qtype.html">$qtype</a>-&gt;<a class="function" onClick="logFunction('get_question_options')" href="../_functions/get_question_options.html" onMouseOver="funcPopup(event,'get_question_options')">get_question_options</a>(<a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>);
<a name="l90"><span class="linenum">  90</span></a>          <a class="var it25182" onMouseOver="hilite(25182)" onMouseOut="lolite()" onClick="logVariable('qresults')" href="../_variables/qresults.html">$qresults</a>[] = <a class="var it480" onMouseOver="hilite(480)" onMouseOut="lolite()" onClick="logVariable('question')" href="../_variables/question.html">$question</a>;
<a name="l91"><span class="linenum">  91</span></a>      }
<a name="l92"><span class="linenum">  92</span></a>  
<a name="l93"><span class="linenum">  93</span></a>      return <a class="var it25182" onMouseOver="hilite(25182)" onMouseOut="lolite()" onClick="logVariable('qresults')" href="../_variables/qresults.html">$qresults</a>;
<a name="l94"><span class="linenum">  94</span></a>  }
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">/**</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment"> * @param int $categoryid a category id.</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment"> * @return bool whether this is the only top-level category in a context.</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment"> */</span>
<a name="l100"><span class="linenum"> 100</span></a>  function <a class="function" onClick="logFunction('question_is_only_toplevel_category_in_context')" href="../_functions/question_is_only_toplevel_category_in_context.html" onMouseOver="funcPopup(event,'question_is_only_toplevel_category_in_context')">question_is_only_toplevel_category_in_context</a>(<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>) {
<a name="l101"><span class="linenum"> 101</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l102"><span class="linenum"> 102</span></a>      return 1 == <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(&quot;
<a name="l103"><span class="linenum"> 103</span></a>              SELECT <a class="phpfunction" onClick="logFunction('count')" href="../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(*)
<a name="l104"><span class="linenum"> 104</span></a>                FROM {question_categories} c1,
<a name="l105"><span class="linenum"> 105</span></a>                     {question_categories} c2
<a name="l106"><span class="linenum"> 106</span></a>               WHERE c2.id = ?
<a name="l107"><span class="linenum"> 107</span></a>                 AND c1.contextid = c2.contextid
<a name="l108"><span class="linenum"> 108</span></a>                 AND c1.parent = 0 AND c2.parent = 0&quot;, array(<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>));
<a name="l109"><span class="linenum"> 109</span></a>  }
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">/**</span>
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment"> * Check whether this user is allowed to delete this category.</span>
<a name="l113"><span class="linenum"> 113</span></a>  <span class="comment"> *</span>
<a name="l114"><span class="linenum"> 114</span></a>  <span class="comment"> * @param int $todelete a category id.</span>
<a name="l115"><span class="linenum"> 115</span></a>  <span class="comment"> */</span>
<a name="l116"><span class="linenum"> 116</span></a>  function <a class="function" onClick="logFunction('question_can_delete_cat')" href="../_functions/question_can_delete_cat.html" onMouseOver="funcPopup(event,'question_can_delete_cat')">question_can_delete_cat</a>(<a class="var it12811" onMouseOver="hilite(12811)" onMouseOut="lolite()" onClick="logVariable('todelete')" href="../_variables/todelete.html">$todelete</a>) {
<a name="l117"><span class="linenum"> 117</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l118"><span class="linenum"> 118</span></a>      if (<a class="function" onClick="logFunction('question_is_only_toplevel_category_in_context')" href="../_functions/question_is_only_toplevel_category_in_context.html" onMouseOver="funcPopup(event,'question_is_only_toplevel_category_in_context')">question_is_only_toplevel_category_in_context</a>(<a class="var it12811" onMouseOver="hilite(12811)" onMouseOut="lolite()" onClick="logVariable('todelete')" href="../_variables/todelete.html">$todelete</a>)) {
<a name="l119"><span class="linenum"> 119</span></a>          <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('cannotdeletecate', 'question');
<a name="l120"><span class="linenum"> 120</span></a>      } else {
<a name="l121"><span class="linenum"> 121</span></a>          <a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('question_categories', 'contextid', array('id' =&gt; <a class="var it12811" onMouseOver="hilite(12811)" onMouseOut="lolite()" onClick="logVariable('todelete')" href="../_variables/todelete.html">$todelete</a>));
<a name="l122"><span class="linenum"> 122</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/question:managecategory', context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it546" onMouseOver="hilite(546)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../_variables/contextid.html">$contextid</a>));
<a name="l123"><span class="linenum"> 123</span></a>      }
<a name="l124"><span class="linenum"> 124</span></a>  }
<a name="l125"><span class="linenum"> 125</span></a>  
<a name="l126"><span class="linenum"> 126</span></a>  
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment">/**</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment"> * Base class for representing a column in a {@link question_bank_view}.</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment"> *</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l132"><span class="linenum"> 132</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment"> */</span>
<a name="l134"><span class="linenum"> 134</span></a>  class_alias('core_question\bank\column_base', 'question_bank_column_base', true);
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>  <span class="comment">/**</span>
<a name="l137"><span class="linenum"> 137</span></a>  <span class="comment"> * A column with a checkbox for each question with name q{questionid}.</span>
<a name="l138"><span class="linenum"> 138</span></a>  <span class="comment"> *</span>
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment"> */</span>
<a name="l143"><span class="linenum"> 143</span></a>  class_alias('core_question\bank\checkbox_column', 'question_bank_checkbox_column', true);
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">/**</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment"> * A column type for the name of the question type.</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment"> *</span>
<a name="l148"><span class="linenum"> 148</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l149"><span class="linenum"> 149</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l150"><span class="linenum"> 150</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l151"><span class="linenum"> 151</span></a>  <span class="comment"> */</span>
<a name="l152"><span class="linenum"> 152</span></a>  class_alias('core_question\bank\question_type_column', 'question_bank_question_type_column', true);
<a name="l153"><span class="linenum"> 153</span></a>  
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>  <span class="comment">/**</span>
<a name="l156"><span class="linenum"> 156</span></a>  <span class="comment"> * A column type for the name of the question name.</span>
<a name="l157"><span class="linenum"> 157</span></a>  <span class="comment"> *</span>
<a name="l158"><span class="linenum"> 158</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l159"><span class="linenum"> 159</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l160"><span class="linenum"> 160</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l161"><span class="linenum"> 161</span></a>  <span class="comment"> */</span>
<a name="l162"><span class="linenum"> 162</span></a>  class_alias('core_question\bank\question_name_column', 'question_bank_question_name_column', true);
<a name="l163"><span class="linenum"> 163</span></a>  
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>  <span class="comment">/**</span>
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment"> * A column type for the name of the question creator.</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment"> *</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment"> */</span>
<a name="l172"><span class="linenum"> 172</span></a>  class_alias('core_question\bank\creator_name_column', 'question_bank_creator_name_column', true);
<a name="l173"><span class="linenum"> 173</span></a>  
<a name="l174"><span class="linenum"> 174</span></a>  
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment">/**</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment"> * A column type for the name of the question last modifier.</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment"> *</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment"> */</span>
<a name="l182"><span class="linenum"> 182</span></a>  class_alias('core_question\bank\modifier_name_column', 'question_bank_modifier_name_column', true);
<a name="l183"><span class="linenum"> 183</span></a>  
<a name="l184"><span class="linenum"> 184</span></a>  
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">/**</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment"> * A base class for actions that are an icon that lets you manipulate the question in some way.</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment"> *</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l189"><span class="linenum"> 189</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l190"><span class="linenum"> 190</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l191"><span class="linenum"> 191</span></a>  <span class="comment"> */</span>
<a name="l192"><span class="linenum"> 192</span></a>  class_alias('core_question\bank\action_column_base', 'question_bank_action_column_base', true);
<a name="l193"><span class="linenum"> 193</span></a>  
<a name="l194"><span class="linenum"> 194</span></a>  
<a name="l195"><span class="linenum"> 195</span></a>  <span class="comment">/**</span>
<a name="l196"><span class="linenum"> 196</span></a>  <span class="comment"> * Base class for question bank columns that just contain an action icon.</span>
<a name="l197"><span class="linenum"> 197</span></a>  <span class="comment"> *</span>
<a name="l198"><span class="linenum"> 198</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l199"><span class="linenum"> 199</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l201"><span class="linenum"> 201</span></a>  <span class="comment"> */</span>
<a name="l202"><span class="linenum"> 202</span></a>  class_alias('core_question\bank\edit_action_column', 'question_bank_edit_action_column', true);
<a name="l203"><span class="linenum"> 203</span></a>  
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">/**</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment"> * Question bank column for the duplicate action icon.</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment"> *</span>
<a name="l207"><span class="linenum"> 207</span></a>  <span class="comment"> * @copyright  2013 The Open University</span>
<a name="l208"><span class="linenum"> 208</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l209"><span class="linenum"> 209</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment"> */</span>
<a name="l211"><span class="linenum"> 211</span></a>  class_alias('core_question\bank\copy_action_column', 'question_bank_copy_action_column', true);
<a name="l212"><span class="linenum"> 212</span></a>  
<a name="l213"><span class="linenum"> 213</span></a>  <span class="comment">/**</span>
<a name="l214"><span class="linenum"> 214</span></a>  <span class="comment"> * Question bank columns for the preview action icon.</span>
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment"> *</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment"> */</span>
<a name="l220"><span class="linenum"> 220</span></a>  class_alias('core_question\bank\preview_action_column', 'question_bank_preview_action_column', true);
<a name="l221"><span class="linenum"> 221</span></a>  
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">/**</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment"> * action to delete (or hide) a question, or restore a previously hidden question.</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment"> *</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment"> */</span>
<a name="l230"><span class="linenum"> 230</span></a>  class_alias('core_question\bank\delete_action_column', 'question_bank_delete_action_column', true);
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment">/**</span>
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment"> * Base class for 'columns' that are actually displayed as a row following the main question row.</span>
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment"> *</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l236"><span class="linenum"> 236</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l237"><span class="linenum"> 237</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment"> */</span>
<a name="l239"><span class="linenum"> 239</span></a>  class_alias('core_question\bank\row_base', 'question_bank_row_base', true);
<a name="l240"><span class="linenum"> 240</span></a>  
<a name="l241"><span class="linenum"> 241</span></a>  <span class="comment">/**</span>
<a name="l242"><span class="linenum"> 242</span></a>  <span class="comment"> * A column type for the name of the question name.</span>
<a name="l243"><span class="linenum"> 243</span></a>  <span class="comment"> *</span>
<a name="l244"><span class="linenum"> 244</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l245"><span class="linenum"> 245</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l246"><span class="linenum"> 246</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l247"><span class="linenum"> 247</span></a>  <span class="comment"> */</span>
<a name="l248"><span class="linenum"> 248</span></a>  class_alias('core_question\bank\question_text_row', 'question_bank_question_text_row', true);
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>  <span class="comment">/**</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment"> * @copyright  2009 Tim Hunt</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment"> * @deprecated since Moodle 2.7 MDL-40457</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment"> */</span>
<a name="l255"><span class="linenum"> 255</span></a>  class_alias('core_question\bank\view', 'question_bank_view', true);
<a name="l256"><span class="linenum"> 256</span></a>  
<a name="l257"><span class="linenum"> 257</span></a>  <span class="comment">/**</span>
<a name="l258"><span class="linenum"> 258</span></a>  <span class="comment"> * Common setup for all pages for editing questions.</span>
<a name="l259"><span class="linenum"> 259</span></a>  <span class="comment"> * @param string $baseurl the name of the script calling this funciton. For examle 'qusetion/edit.php'.</span>
<a name="l260"><span class="linenum"> 260</span></a>  <span class="comment"> * @param string $edittab code for this edit tab</span>
<a name="l261"><span class="linenum"> 261</span></a>  <span class="comment"> * @param bool $requirecmid require cmid? default false</span>
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment"> * @param bool $requirecourseid require courseid, if cmid is not given? default true</span>
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment"> * @return array $thispageurl, $contexts, $cmid, $cm, $module, $pagevars</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment"> */</span>
<a name="l265"><span class="linenum"> 265</span></a>  function <a class="function" onClick="logFunction('question_edit_setup')" href="../_functions/question_edit_setup.html" onMouseOver="funcPopup(event,'question_edit_setup')">question_edit_setup</a>(<a class="var it15064" onMouseOver="hilite(15064)" onMouseOut="lolite()" onClick="logVariable('edittab')" href="../_variables/edittab.html">$edittab</a>, <a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, <a class="var it25183" onMouseOver="hilite(25183)" onMouseOut="lolite()" onClick="logVariable('requirecmid')" href="../_variables/requirecmid.html">$requirecmid</a> = false, <a class="var it25184" onMouseOver="hilite(25184)" onMouseOut="lolite()" onClick="logVariable('requirecourseid')" href="../_variables/requirecourseid.html">$requirecourseid</a> = true) {
<a name="l266"><span class="linenum"> 266</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>;
<a name="l267"><span class="linenum"> 267</span></a>  
<a name="l268"><span class="linenum"> 268</span></a>      <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>);
<a name="l269"><span class="linenum"> 269</span></a>      <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>-&gt;<a class="function" onClick="logFunction('remove_all_params')" href="../_functions/remove_all_params.html" onMouseOver="funcPopup(event,'remove_all_params')">remove_all_params</a>(); <span class="comment">// We are going to explicity add back everything important - this avoids unwanted params from being retained.</span>
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>      if (<a class="var it25183" onMouseOver="hilite(25183)" onMouseOut="lolite()" onClick="logVariable('requirecmid')" href="../_variables/requirecmid.html">$requirecmid</a>){
<a name="l272"><span class="linenum"> 272</span></a>          <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a> =<a class="function" onClick="logFunction('required_param')" href="../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('cmid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l273"><span class="linenum"> 273</span></a>      } else {
<a name="l274"><span class="linenum"> 274</span></a>          <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('cmid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l275"><span class="linenum"> 275</span></a>      }
<a name="l276"><span class="linenum"> 276</span></a>      if (<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>){
<a name="l277"><span class="linenum"> 277</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>) = <a class="function" onClick="logFunction('get_module_from_cmid')" href="../_functions/get_module_from_cmid.html" onMouseOver="funcPopup(event,'get_module_from_cmid')">get_module_from_cmid</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>);
<a name="l278"><span class="linenum"> 278</span></a>          <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/course.html">course</a>;
<a name="l279"><span class="linenum"> 279</span></a>          <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>-&gt;<a class="function" onClick="logFunction('params')" href="../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>(<a class="phpfunction" onClick="logFunction('compact')" href="../_functions/compact.html" onMouseOver="phpfuncPopup(event,'compact')">compact</a>('cmid'));
<a name="l280"><span class="linenum"> 280</span></a>          <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, false, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l281"><span class="linenum"> 281</span></a>          <a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('thiscontext')" href="../_variables/thiscontext.html">$thiscontext</a> = <a class="class" onClick="logClass('context_module')" href="../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>);
<a name="l282"><span class="linenum"> 282</span></a>      } else {
<a name="l283"><span class="linenum"> 283</span></a>          <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a> = null;
<a name="l284"><span class="linenum"> 284</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = null;
<a name="l285"><span class="linenum"> 285</span></a>          if (<a class="var it25184" onMouseOver="hilite(25184)" onMouseOut="lolite()" onClick="logVariable('requirecourseid')" href="../_variables/requirecourseid.html">$requirecourseid</a>){
<a name="l286"><span class="linenum"> 286</span></a>              <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>  = <a class="function" onClick="logFunction('required_param')" href="../_functions/required_param.html" onMouseOver="funcPopup(event,'required_param')">required_param</a>('courseid', <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l287"><span class="linenum"> 287</span></a>          } else {
<a name="l288"><span class="linenum"> 288</span></a>              <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>  = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('courseid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l289"><span class="linenum"> 289</span></a>          }
<a name="l290"><span class="linenum"> 290</span></a>          if (<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>){
<a name="l291"><span class="linenum"> 291</span></a>              <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>-&gt;<a class="function" onClick="logFunction('params')" href="../_functions/params.html" onMouseOver="funcPopup(event,'params')">params</a>(<a class="phpfunction" onClick="logFunction('compact')" href="../_functions/compact.html" onMouseOver="phpfuncPopup(event,'compact')">compact</a>('courseid'));
<a name="l292"><span class="linenum"> 292</span></a>              <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, false);
<a name="l293"><span class="linenum"> 293</span></a>              <a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('thiscontext')" href="../_variables/thiscontext.html">$thiscontext</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>);
<a name="l294"><span class="linenum"> 294</span></a>          } else {
<a name="l295"><span class="linenum"> 295</span></a>              <a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('thiscontext')" href="../_variables/thiscontext.html">$thiscontext</a> = null;
<a name="l296"><span class="linenum"> 296</span></a>          }
<a name="l297"><span class="linenum"> 297</span></a>      }
<a name="l298"><span class="linenum"> 298</span></a>  
<a name="l299"><span class="linenum"> 299</span></a>      if (<a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('thiscontext')" href="../_variables/thiscontext.html">$thiscontext</a>){
<a name="l300"><span class="linenum"> 300</span></a>          <a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> = <span class="keyword">new </span><a class="class" onClick="logClass('question_edit_contexts')" href="../_classes/question_edit_contexts.html" onMouseOver="classPopup(event,'question_edit_contexts')">question_edit_contexts</a>(<a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('thiscontext')" href="../_variables/thiscontext.html">$thiscontext</a>);
<a name="l301"><span class="linenum"> 301</span></a>          <a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>-&gt;<a class="function" onClick="logFunction('require_one_edit_tab_cap')" href="../_functions/require_one_edit_tab_cap.html" onMouseOver="funcPopup(event,'require_one_edit_tab_cap')">require_one_edit_tab_cap</a>(<a class="var it15064" onMouseOver="hilite(15064)" onMouseOut="lolite()" onClick="logVariable('edittab')" href="../_variables/edittab.html">$edittab</a>);
<a name="l302"><span class="linenum"> 302</span></a>  
<a name="l303"><span class="linenum"> 303</span></a>      } else {
<a name="l304"><span class="linenum"> 304</span></a>          <a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a> = null;
<a name="l305"><span class="linenum"> 305</span></a>      }
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>      <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('set_pagelayout')" href="../_functions/set_pagelayout.html" onMouseOver="funcPopup(event,'set_pagelayout')">set_pagelayout</a>('admin');
<a name="l308"><span class="linenum"> 308</span></a>  
<a name="l309"><span class="linenum"> 309</span></a>      <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['qpage'] = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('qpage', -1, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l310"><span class="linenum"> 310</span></a>  
<a name="l311"><span class="linenum"> 311</span></a>  <span class="comment">    //pass 'cat' from page to page and when 'category' comes from a drop down menu</span>
<a name="l312"><span class="linenum"> 312</span></a>  <span class="comment">    //then we also reset the qpage so we go to page 1 of</span>
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment">    //a new cat.</span>
<a name="l314"><span class="linenum"> 314</span></a>      <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['cat'] = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('cat', 0, <a class="constant" onClick="logConstant('PARAM_SEQUENCE')" href="../_constants/PARAM_SEQUENCE.html" onMouseOver="constPopup(event,'PARAM_SEQUENCE')">PARAM_SEQUENCE</a>); <span class="comment">// if empty will be set up later</span>
<a name="l315"><span class="linenum"> 315</span></a>      if (<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('category', 0, <a class="constant" onClick="logConstant('PARAM_SEQUENCE')" href="../_constants/PARAM_SEQUENCE.html" onMouseOver="constPopup(event,'PARAM_SEQUENCE')">PARAM_SEQUENCE</a>)) {
<a name="l316"><span class="linenum"> 316</span></a>          if (<a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['cat'] != <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>) { // is this a move to a <span class="keyword">new </span><a class="class" onClick="logClass('category')" href="../_classes/category.html" onMouseOver="classPopup(event,'category')">category</a>?
<a name="l317"><span class="linenum"> 317</span></a>              <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['cat'] = <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>;
<a name="l318"><span class="linenum"> 318</span></a>              <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['qpage'] = 0;
<a name="l319"><span class="linenum"> 319</span></a>          }
<a name="l320"><span class="linenum"> 320</span></a>      }
<a name="l321"><span class="linenum"> 321</span></a>      if (<a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['cat']){
<a name="l322"><span class="linenum"> 322</span></a>          <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('cat', <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['cat']);
<a name="l323"><span class="linenum"> 323</span></a>      }
<a name="l324"><span class="linenum"> 324</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it1134" onMouseOver="hilite(1134)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../_variables/baseurl.html">$baseurl</a>, '/question/') === 0) {
<a name="l325"><span class="linenum"> 325</span></a>          <a class="class" onClick="logClass('navigation_node')" href="../_classes/navigation_node.html" onMouseOver="classPopup(event,'navigation_node')">navigation_node</a>::<a class="function" onClick="logFunction('override_active_url')" href="../_functions/override_active_url.html" onMouseOver="funcPopup(event,'override_active_url')">override_active_url</a>(<a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>);
<a name="l326"><span class="linenum"> 326</span></a>      }
<a name="l327"><span class="linenum"> 327</span></a>  
<a name="l328"><span class="linenum"> 328</span></a>      if (<a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['qpage'] &gt; -1) {
<a name="l329"><span class="linenum"> 329</span></a>          <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('qpage', <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['qpage']);
<a name="l330"><span class="linenum"> 330</span></a>      } else {
<a name="l331"><span class="linenum"> 331</span></a>          <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['qpage'] = 0;
<a name="l332"><span class="linenum"> 332</span></a>      }
<a name="l333"><span class="linenum"> 333</span></a>  
<a name="l334"><span class="linenum"> 334</span></a>      <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['qperpage'] = <a class="function" onClick="logFunction('question_get_display_preference')" href="../_functions/question_get_display_preference.html" onMouseOver="funcPopup(event,'question_get_display_preference')">question_get_display_preference</a>(
<a name="l335"><span class="linenum"> 335</span></a>              'qperpage', <a class="constant" onClick="logConstant('DEFAULT_QUESTIONS_PER_PAGE')" href="../_constants/DEFAULT_QUESTIONS_PER_PAGE.html" onMouseOver="constPopup(event,'DEFAULT_QUESTIONS_PER_PAGE')">DEFAULT_QUESTIONS_PER_PAGE</a>, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>);
<a name="l336"><span class="linenum"> 336</span></a>  
<a name="l337"><span class="linenum"> 337</span></a>      for (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> = 1; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a> &lt;= question_bank_view::MAX_SORTS; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>++) {
<a name="l338"><span class="linenum"> 338</span></a>          <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a> = 'qbs' . <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../_variables/i.html">$i</a>;
<a name="l339"><span class="linenum"> 339</span></a>          if (!<a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>, '', <a class="constant" onClick="logConstant('PARAM_TEXT')" href="../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>)) {
<a name="l340"><span class="linenum"> 340</span></a>              break;
<a name="l341"><span class="linenum"> 341</span></a>          }
<a name="l342"><span class="linenum"> 342</span></a>          <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>, <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../_variables/sort.html">$sort</a>);
<a name="l343"><span class="linenum"> 343</span></a>      }
<a name="l344"><span class="linenum"> 344</span></a>  
<a name="l345"><span class="linenum"> 345</span></a>      <a class="var it3173" onMouseOver="hilite(3173)" onMouseOut="lolite()" onClick="logVariable('defaultcategory')" href="../_variables/defaultcategory.html">$defaultcategory</a> = <a class="function" onClick="logFunction('question_make_default_categories')" href="../_functions/question_make_default_categories.html" onMouseOver="funcPopup(event,'question_make_default_categories')">question_make_default_categories</a>(<a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>-&gt;<a class="function" onClick="logFunction('all')" href="../_functions/all.html" onMouseOver="funcPopup(event,'all')">all</a>());
<a name="l346"><span class="linenum"> 346</span></a>  
<a name="l347"><span class="linenum"> 347</span></a>      <a class="var it25185" onMouseOver="hilite(25185)" onMouseOut="lolite()" onClick="logVariable('contextlistarr')" href="../_variables/contextlistarr.html">$contextlistarr</a> = array();
<a name="l348"><span class="linenum"> 348</span></a>      foreach (<a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>-&gt;<a class="function" onClick="logFunction('having_one_edit_tab_cap')" href="../_functions/having_one_edit_tab_cap.html" onMouseOver="funcPopup(event,'having_one_edit_tab_cap')">having_one_edit_tab_cap</a>(<a class="var it15064" onMouseOver="hilite(15064)" onMouseOut="lolite()" onClick="logVariable('edittab')" href="../_variables/edittab.html">$edittab</a>) as <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>){
<a name="l349"><span class="linenum"> 349</span></a>          <a class="var it25185" onMouseOver="hilite(25185)" onMouseOut="lolite()" onClick="logVariable('contextlistarr')" href="../_variables/contextlistarr.html">$contextlistarr</a>[] = &quot;'{<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/id.html">id</a>}'&quot;;
<a name="l350"><span class="linenum"> 350</span></a>      }
<a name="l351"><span class="linenum"> 351</span></a>      <a class="var it25186" onMouseOver="hilite(25186)" onMouseOut="lolite()" onClick="logVariable('contextlist')" href="../_variables/contextlist.html">$contextlist</a> = <a class="function" onClick="logFunction('join')" href="../_functions/join.html" onMouseOver="funcPopup(event,'join')">join</a>(<a class="var it25185" onMouseOver="hilite(25185)" onMouseOut="lolite()" onClick="logVariable('contextlistarr')" href="../_variables/contextlistarr.html">$contextlistarr</a>, ' ,');
<a name="l352"><span class="linenum"> 352</span></a>      if (!empty(<a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['cat'])){
<a name="l353"><span class="linenum"> 353</span></a>          <a class="var it25187" onMouseOver="hilite(25187)" onMouseOut="lolite()" onClick="logVariable('catparts')" href="../_variables/catparts.html">$catparts</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['cat']);
<a name="l354"><span class="linenum"> 354</span></a>          if (!<a class="var it25187" onMouseOver="hilite(25187)" onMouseOut="lolite()" onClick="logVariable('catparts')" href="../_variables/catparts.html">$catparts</a>[0] || (false !== <a class="phpfunction" onClick="logFunction('array_search')" href="../_functions/array_search.html" onMouseOver="phpfuncPopup(event,'array_search')">array_search</a>(<a class="var it25187" onMouseOver="hilite(25187)" onMouseOut="lolite()" onClick="logVariable('catparts')" href="../_variables/catparts.html">$catparts</a>[1], <a class="var it25185" onMouseOver="hilite(25185)" onMouseOut="lolite()" onClick="logVariable('contextlistarr')" href="../_variables/contextlistarr.html">$contextlistarr</a>)) ||
<a name="l355"><span class="linenum"> 355</span></a>                  !<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_select')" href="../_functions/count_records_select.html" onMouseOver="funcPopup(event,'count_records_select')">count_records_select</a>(&quot;question_categories&quot;, &quot;id = ? AND contextid = ?&quot;, array(<a class="var it25187" onMouseOver="hilite(25187)" onMouseOut="lolite()" onClick="logVariable('catparts')" href="../_variables/catparts.html">$catparts</a>[0], <a class="var it25187" onMouseOver="hilite(25187)" onMouseOut="lolite()" onClick="logVariable('catparts')" href="../_variables/catparts.html">$catparts</a>[1]))) {
<a name="l356"><span class="linenum"> 356</span></a>              <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcategory', 'question');
<a name="l357"><span class="linenum"> 357</span></a>          }
<a name="l358"><span class="linenum"> 358</span></a>      } else {
<a name="l359"><span class="linenum"> 359</span></a>          <a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a> = <a class="var it3173" onMouseOver="hilite(3173)" onMouseOut="lolite()" onClick="logVariable('defaultcategory')" href="../_variables/defaultcategory.html">$defaultcategory</a>;
<a name="l360"><span class="linenum"> 360</span></a>          <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['cat'] = &quot;{<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/id.html">id</a>},{<a class="var it2246" onMouseOver="hilite(2246)" onMouseOut="lolite()" onClick="logVariable('category')" href="../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('contextid')" class="var it39558" onMouseOver="hilite(39558)" onMouseOut="lolite()" href="../_variables/contextid.html">contextid</a>}&quot;;
<a name="l361"><span class="linenum"> 361</span></a>      }
<a name="l362"><span class="linenum"> 362</span></a>  
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">    // Display options.</span>
<a name="l364"><span class="linenum"> 364</span></a>      <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['recurse']    = <a class="function" onClick="logFunction('question_get_display_preference')" href="../_functions/question_get_display_preference.html" onMouseOver="funcPopup(event,'question_get_display_preference')">question_get_display_preference</a>('recurse',    1, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>);
<a name="l365"><span class="linenum"> 365</span></a>      <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['showhidden'] = <a class="function" onClick="logFunction('question_get_display_preference')" href="../_functions/question_get_display_preference.html" onMouseOver="funcPopup(event,'question_get_display_preference')">question_get_display_preference</a>('showhidden', 0, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>);
<a name="l366"><span class="linenum"> 366</span></a>      <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['qbshowtext'] = <a class="function" onClick="logFunction('question_get_display_preference')" href="../_functions/question_get_display_preference.html" onMouseOver="funcPopup(event,'question_get_display_preference')">question_get_display_preference</a>('qbshowtext', 0, <a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>);
<a name="l367"><span class="linenum"> 367</span></a>  
<a name="l368"><span class="linenum"> 368</span></a>  <span class="comment">    // Category list page.</span>
<a name="l369"><span class="linenum"> 369</span></a>      <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['cpage'] = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('cpage', 1, <a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l370"><span class="linenum"> 370</span></a>      if (<a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['cpage'] != 1){
<a name="l371"><span class="linenum"> 371</span></a>          <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>('cpage', <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['cpage']);
<a name="l372"><span class="linenum"> 372</span></a>      }
<a name="l373"><span class="linenum"> 373</span></a>  
<a name="l374"><span class="linenum"> 374</span></a>      return array(<a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>, <a class="var it2698" onMouseOver="hilite(2698)" onMouseOut="lolite()" onClick="logVariable('contexts')" href="../_variables/contexts.html">$contexts</a>, <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../_variables/cmid.html">$cmid</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>, <a class="var it611" onMouseOver="hilite(611)" onMouseOut="lolite()" onClick="logVariable('module')" href="../_variables/module.html">$module</a>, <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>);
<a name="l375"><span class="linenum"> 375</span></a>  }
<a name="l376"><span class="linenum"> 376</span></a>  
<a name="l377"><span class="linenum"> 377</span></a>  <span class="comment">/**</span>
<a name="l378"><span class="linenum"> 378</span></a>  <span class="comment"> * Get the category id from $pagevars.</span>
<a name="l379"><span class="linenum"> 379</span></a>  <span class="comment"> * @param array $pagevars from {@link question_edit_setup()}.</span>
<a name="l380"><span class="linenum"> 380</span></a>  <span class="comment"> * @return int the category id.</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment"> */</span>
<a name="l382"><span class="linenum"> 382</span></a>  function <a class="function" onClick="logFunction('question_get_category_id_from_pagevars')" href="../_functions/question_get_category_id_from_pagevars.html" onMouseOver="funcPopup(event,'question_get_category_id_from_pagevars')">question_get_category_id_from_pagevars</a>(array <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>) {
<a name="l383"><span class="linenum"> 383</span></a>      <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it22461" onMouseOver="hilite(22461)" onMouseOut="lolite()" onClick="logVariable('questioncategoryid')" href="../_variables/questioncategoryid.html">$questioncategoryid</a>) = <a class="phpfunction" onClick="logFunction('explode')" href="../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it5192" onMouseOver="hilite(5192)" onMouseOut="lolite()" onClick="logVariable('pagevars')" href="../_variables/pagevars.html">$pagevars</a>['cat']);
<a name="l384"><span class="linenum"> 384</span></a>      return <a class="var it22461" onMouseOver="hilite(22461)" onMouseOut="lolite()" onClick="logVariable('questioncategoryid')" href="../_variables/questioncategoryid.html">$questioncategoryid</a>;
<a name="l385"><span class="linenum"> 385</span></a>  }
<a name="l386"><span class="linenum"> 386</span></a>  
<a name="l387"><span class="linenum"> 387</span></a>  <span class="comment">/**</span>
<a name="l388"><span class="linenum"> 388</span></a>  <span class="comment"> * Get a particular question preference that is also stored as a user preference.</span>
<a name="l389"><span class="linenum"> 389</span></a>  <span class="comment"> * If the the value is given in the GET/POST request, then that value is used,</span>
<a name="l390"><span class="linenum"> 390</span></a>  <span class="comment"> * and the user preference is updated to that value. Otherwise, the last set</span>
<a name="l391"><span class="linenum"> 391</span></a>  <span class="comment"> * value of the user preference is used, or if it has never been set the default</span>
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment"> * passed to this function.</span>
<a name="l393"><span class="linenum"> 393</span></a>  <span class="comment"> *</span>
<a name="l394"><span class="linenum"> 394</span></a>  <span class="comment"> * @param string $param the param name. The URL parameter set, and the GET/POST</span>
<a name="l395"><span class="linenum"> 395</span></a>  <span class="comment"> *      parameter read. The user_preference name is 'question_bank_' . $param.</span>
<a name="l396"><span class="linenum"> 396</span></a>  <span class="comment"> * @param mixed $default The default value to use, if not otherwise set.</span>
<a name="l397"><span class="linenum"> 397</span></a>  <span class="comment"> * @param int $type one of the PARAM_... constants.</span>
<a name="l398"><span class="linenum"> 398</span></a>  <span class="comment"> * @param moodle_url $thispageurl if the value has been explicitly set, we add</span>
<a name="l399"><span class="linenum"> 399</span></a>  <span class="comment"> *      it to this URL.</span>
<a name="l400"><span class="linenum"> 400</span></a>  <span class="comment"> * @return mixed the parameter value to use.</span>
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment"> */</span>
<a name="l402"><span class="linenum"> 402</span></a>  function <a class="function" onClick="logFunction('question_get_display_preference')" href="../_functions/question_get_display_preference.html" onMouseOver="funcPopup(event,'question_get_display_preference')">question_get_display_preference</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>, <a class="var it1163" onMouseOver="hilite(1163)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>, <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>) {
<a name="l403"><span class="linenum"> 403</span></a>      <a class="var it25188" onMouseOver="hilite(25188)" onMouseOut="lolite()" onClick="logVariable('submittedvalue')" href="../_variables/submittedvalue.html">$submittedvalue</a> = <a class="function" onClick="logFunction('optional_param')" href="../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>, null, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../_variables/type.html">$type</a>);
<a name="l404"><span class="linenum"> 404</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it25188" onMouseOver="hilite(25188)" onMouseOut="lolite()" onClick="logVariable('submittedvalue')" href="../_variables/submittedvalue.html">$submittedvalue</a>)) {
<a name="l405"><span class="linenum"> 405</span></a>          return <a class="function" onClick="logFunction('get_user_preferences')" href="../_functions/get_user_preferences.html" onMouseOver="funcPopup(event,'get_user_preferences')">get_user_preferences</a>('question_bank_' . <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>, <a class="var it1163" onMouseOver="hilite(1163)" onMouseOut="lolite()" onClick="logVariable('default')" href="../_variables/default.html">$default</a>);
<a name="l406"><span class="linenum"> 406</span></a>      }
<a name="l407"><span class="linenum"> 407</span></a>  
<a name="l408"><span class="linenum"> 408</span></a>      <a class="function" onClick="logFunction('set_user_preference')" href="../_functions/set_user_preference.html" onMouseOver="funcPopup(event,'set_user_preference')">set_user_preference</a>('question_bank_' . <a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>, <a class="var it25188" onMouseOver="hilite(25188)" onMouseOut="lolite()" onClick="logVariable('submittedvalue')" href="../_variables/submittedvalue.html">$submittedvalue</a>);
<a name="l409"><span class="linenum"> 409</span></a>      <a class="var it2590" onMouseOver="hilite(2590)" onMouseOut="lolite()" onClick="logVariable('thispageurl')" href="../_variables/thispageurl.html">$thispageurl</a>-&gt;<a class="function" onClick="logFunction('param')" href="../_functions/param.html" onMouseOver="funcPopup(event,'param')">param</a>(<a class="var it396" onMouseOver="hilite(396)" onMouseOut="lolite()" onClick="logVariable('param')" href="../_variables/param.html">$param</a>, <a class="var it25188" onMouseOver="hilite(25188)" onMouseOut="lolite()" onClick="logVariable('submittedvalue')" href="../_variables/submittedvalue.html">$submittedvalue</a>);
<a name="l410"><span class="linenum"> 410</span></a>      return <a class="var it25188" onMouseOver="hilite(25188)" onMouseOut="lolite()" onClick="logVariable('submittedvalue')" href="../_variables/submittedvalue.html">$submittedvalue</a>;
<a name="l411"><span class="linenum"> 411</span></a>  }
<a name="l412"><span class="linenum"> 412</span></a>  
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">/**</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment"> * Make sure user is logged in as required in this context.</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment"> */</span>
<a name="l416"><span class="linenum"> 416</span></a>  function <a class="function" onClick="logFunction('require_login_in_context')" href="../_functions/require_login_in_context.html" onMouseOver="funcPopup(event,'require_login_in_context')">require_login_in_context</a>(<a class="var it25189" onMouseOver="hilite(25189)" onMouseOut="lolite()" onClick="logVariable('contextorid')" href="../_variables/contextorid.html">$contextorid</a> = null){
<a name="l417"><span class="linenum"> 417</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l418"><span class="linenum"> 418</span></a>      if (!<a class="phpfunction" onClick="logFunction('is_object')" href="../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it25189" onMouseOver="hilite(25189)" onMouseOut="lolite()" onClick="logVariable('contextorid')" href="../_variables/contextorid.html">$contextorid</a>)){
<a name="l419"><span class="linenum"> 419</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it25189" onMouseOver="hilite(25189)" onMouseOut="lolite()" onClick="logVariable('contextorid')" href="../_variables/contextorid.html">$contextorid</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>);
<a name="l420"><span class="linenum"> 420</span></a>      } else {
<a name="l421"><span class="linenum"> 421</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="var it25189" onMouseOver="hilite(25189)" onMouseOut="lolite()" onClick="logVariable('contextorid')" href="../_variables/contextorid.html">$contextorid</a>;
<a name="l422"><span class="linenum"> 422</span></a>      }
<a name="l423"><span class="linenum"> 423</span></a>      if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> &amp;&amp; (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a>)) {
<a name="l424"><span class="linenum"> 424</span></a>          <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>);
<a name="l425"><span class="linenum"> 425</span></a>      } else if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> &amp;&amp; (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>)) {
<a name="l426"><span class="linenum"> 426</span></a>          if (<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_modules',array('id' =&gt;<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('instanceid')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/instanceid.html">instanceid</a>))) {
<a name="l427"><span class="linenum"> 427</span></a>              if (!<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('course')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../_variables/course.html">course</a>))) {
<a name="l428"><span class="linenum"> 428</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcourseid');
<a name="l429"><span class="linenum"> 429</span></a>              }
<a name="l430"><span class="linenum"> 430</span></a>              <a class="function" onClick="logFunction('require_course_login')" href="../_functions/require_course_login.html" onMouseOver="funcPopup(event,'require_course_login')">require_course_login</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, true, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../_variables/cm.html">$cm</a>);
<a name="l431"><span class="linenum"> 431</span></a>  
<a name="l432"><span class="linenum"> 432</span></a>          } else {
<a name="l433"><span class="linenum"> 433</span></a>              <a class="function" onClick="logFunction('print_error')" href="../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidcoursemodule');
<a name="l434"><span class="linenum"> 434</span></a>          }
<a name="l435"><span class="linenum"> 435</span></a>      } else if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> &amp;&amp; (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a>)) {
<a name="l436"><span class="linenum"> 436</span></a>          if (!empty(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('forcelogin')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../_variables/forcelogin.html">forcelogin</a>)) {
<a name="l437"><span class="linenum"> 437</span></a>              <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>();
<a name="l438"><span class="linenum"> 438</span></a>          }
<a name="l439"><span class="linenum"> 439</span></a>  
<a name="l440"><span class="linenum"> 440</span></a>      } else {
<a name="l441"><span class="linenum"> 441</span></a>          <a class="function" onClick="logFunction('require_login')" href="../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>();
<a name="l442"><span class="linenum"> 442</span></a>      }
<a name="l443"><span class="linenum"> 443</span></a>  }
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>  <span class="comment">/**</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment"> * Print a form to let the user choose which question type to add.</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment"> * When the form is submitted, it goes to the question.php script.</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment"> * @param $hiddenparams hidden parameters to add to the form, in addition to</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment"> *      the qtype radio buttons.</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment"> * @param $allowedqtypes optional list of qtypes that are allowed. If given, only</span>
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment"> *      those qtypes will be shown. Example value array('description', 'multichoice').</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment"> */</span>
<a name="l453"><span class="linenum"> 453</span></a>  function <a class="function" onClick="logFunction('print_choose_qtype_to_add_form')" href="../_functions/print_choose_qtype_to_add_form.html" onMouseOver="funcPopup(event,'print_choose_qtype_to_add_form')">print_choose_qtype_to_add_form</a>(<a class="var it25190" onMouseOver="hilite(25190)" onMouseOut="lolite()" onClick="logVariable('hiddenparams')" href="../_variables/hiddenparams.html">$hiddenparams</a>, array <a class="var it25191" onMouseOver="hilite(25191)" onMouseOut="lolite()" onClick="logVariable('allowedqtypes')" href="../_variables/allowedqtypes.html">$allowedqtypes</a> = null, <a class="var it25192" onMouseOver="hilite(25192)" onMouseOut="lolite()" onClick="logVariable('enablejs')" href="../_variables/enablejs.html">$enablejs</a> = true) {
<a name="l454"><span class="linenum"> 454</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l455"><span class="linenum"> 455</span></a>  
<a name="l456"><span class="linenum"> 456</span></a>      if (<a class="var it25192" onMouseOver="hilite(25192)" onMouseOut="lolite()" onClick="logVariable('enablejs')" href="../_variables/enablejs.html">$enablejs</a>) {
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment">        // Add the chooser.</span>
<a name="l458"><span class="linenum"> 458</span></a>          <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('requires')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/requires.html">requires</a>-&gt;<a class="function" onClick="logFunction('yui_module')" href="../_functions/yui_module.html" onMouseOver="funcPopup(event,'yui_module')">yui_module</a>('moodle-question-chooser', 'M.question.init_chooser', array(array()));
<a name="l459"><span class="linenum"> 459</span></a>      }
<a name="l460"><span class="linenum"> 460</span></a>  
<a name="l461"><span class="linenum"> 461</span></a>      <a class="var it25193" onMouseOver="hilite(25193)" onMouseOut="lolite()" onClick="logVariable('realqtypes')" href="../_variables/realqtypes.html">$realqtypes</a> = array();
<a name="l462"><span class="linenum"> 462</span></a>      <a class="var it25194" onMouseOver="hilite(25194)" onMouseOut="lolite()" onClick="logVariable('fakeqtypes')" href="../_variables/fakeqtypes.html">$fakeqtypes</a> = array();
<a name="l463"><span class="linenum"> 463</span></a>      foreach (question_bank::<a class="function" onClick="logFunction('get_creatable_qtypes')" href="../_functions/get_creatable_qtypes.html" onMouseOver="funcPopup(event,'get_creatable_qtypes')">get_creatable_qtypes</a>() as <a class="var it12016" onMouseOver="hilite(12016)" onMouseOut="lolite()" onClick="logVariable('qtypename')" href="../_variables/qtypename.html">$qtypename</a> =&gt; <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../_variables/qtype.html">$qtype</a>) {
<a name="l464"><span class="linenum"> 464</span></a>          if (<a class="var it25191" onMouseOver="hilite(25191)" onMouseOut="lolite()" onClick="logVariable('allowedqtypes')" href="../_variables/allowedqtypes.html">$allowedqtypes</a> &amp;&amp; !<a class="phpfunction" onClick="logFunction('in_array')" href="../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it12016" onMouseOver="hilite(12016)" onMouseOut="lolite()" onClick="logVariable('qtypename')" href="../_variables/qtypename.html">$qtypename</a>, <a class="var it25191" onMouseOver="hilite(25191)" onMouseOut="lolite()" onClick="logVariable('allowedqtypes')" href="../_variables/allowedqtypes.html">$allowedqtypes</a>)) {
<a name="l465"><span class="linenum"> 465</span></a>              continue;
<a name="l466"><span class="linenum"> 466</span></a>          }
<a name="l467"><span class="linenum"> 467</span></a>          if (<a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../_variables/qtype.html">$qtype</a>-&gt;<a class="function" onClick="logFunction('is_real_question_type')" href="../_functions/is_real_question_type.html" onMouseOver="funcPopup(event,'is_real_question_type')">is_real_question_type</a>()) {
<a name="l468"><span class="linenum"> 468</span></a>              <a class="var it25193" onMouseOver="hilite(25193)" onMouseOut="lolite()" onClick="logVariable('realqtypes')" href="../_variables/realqtypes.html">$realqtypes</a>[] = <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../_variables/qtype.html">$qtype</a>;
<a name="l469"><span class="linenum"> 469</span></a>          } else {
<a name="l470"><span class="linenum"> 470</span></a>              <a class="var it25194" onMouseOver="hilite(25194)" onMouseOut="lolite()" onClick="logVariable('fakeqtypes')" href="../_variables/fakeqtypes.html">$fakeqtypes</a>[] = <a class="var it14" onMouseOver="hilite(14)" onMouseOut="lolite()" onClick="logVariable('qtype')" href="../_variables/qtype.html">$qtype</a>;
<a name="l471"><span class="linenum"> 471</span></a>          }
<a name="l472"><span class="linenum"> 472</span></a>      }
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>      <a class="var it1689" onMouseOver="hilite(1689)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../_variables/renderer.html">$renderer</a> = <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a class="function" onClick="logFunction('get_renderer')" href="../_functions/get_renderer.html" onMouseOver="funcPopup(event,'get_renderer')">get_renderer</a>('question', 'bank');
<a name="l475"><span class="linenum"> 475</span></a>      return <a class="var it1689" onMouseOver="hilite(1689)" onMouseOut="lolite()" onClick="logVariable('renderer')" href="../_variables/renderer.html">$renderer</a>-&gt;<a class="function" onClick="logFunction('qbank_chooser')" href="../_functions/qbank_chooser.html" onMouseOver="funcPopup(event,'qbank_chooser')">qbank_chooser</a>(<a class="var it25193" onMouseOver="hilite(25193)" onMouseOut="lolite()" onClick="logVariable('realqtypes')" href="../_variables/realqtypes.html">$realqtypes</a>, <a class="var it25194" onMouseOver="hilite(25194)" onMouseOut="lolite()" onClick="logVariable('fakeqtypes')" href="../_variables/fakeqtypes.html">$fakeqtypes</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('course')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../_variables/course.html">course</a>, <a class="var it25190" onMouseOver="hilite(25190)" onMouseOut="lolite()" onClick="logVariable('hiddenparams')" href="../_variables/hiddenparams.html">$hiddenparams</a>);
<a name="l476"><span class="linenum"> 476</span></a>  }
<a name="l477"><span class="linenum"> 477</span></a>  
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">/**</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment"> * Print a button for creating a new question. This will open question/addquestion.php,</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment"> * which in turn goes to question/question.php before getting back to $params['returnurl']</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment"> * (by default the question bank screen).</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment"> *</span>
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment"> * @param int $categoryid The id of the category that the new question should be added to.</span>
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment"> * @param array $params Other paramters to add to the URL. You need either $params['cmid'] or</span>
<a name="l485"><span class="linenum"> 485</span></a>  <span class="comment"> *      $params['courseid'], and you should probably set $params['returnurl']</span>
<a name="l486"><span class="linenum"> 486</span></a>  <span class="comment"> * @param string $caption the text to display on the button.</span>
<a name="l487"><span class="linenum"> 487</span></a>  <span class="comment"> * @param string $tooltip a tooltip to add to the button (optional).</span>
<a name="l488"><span class="linenum"> 488</span></a>  <span class="comment"> * @param bool $disabled if true, the button will be disabled.</span>
<a name="l489"><span class="linenum"> 489</span></a>  <span class="comment"> */</span>
<a name="l490"><span class="linenum"> 490</span></a>  function <a class="function" onClick="logFunction('create_new_question_button')" href="../_functions/create_new_question_button.html" onMouseOver="funcPopup(event,'create_new_question_button')">create_new_question_button</a>(<a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>, <a class="var it5936" onMouseOver="hilite(5936)" onMouseOut="lolite()" onClick="logVariable('caption')" href="../_variables/caption.html">$caption</a>, <a class="var it12382" onMouseOver="hilite(12382)" onMouseOut="lolite()" onClick="logVariable('tooltip')" href="../_variables/tooltip.html">$tooltip</a> = '', <a class="var it1797" onMouseOver="hilite(1797)" onMouseOut="lolite()" onClick="logVariable('disabled')" href="../_variables/disabled.html">$disabled</a> = false) {
<a name="l491"><span class="linenum"> 491</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../_variables/PAGE.html">$PAGE</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l492"><span class="linenum"> 492</span></a>      static <a class="var it25195" onMouseOver="hilite(25195)" onMouseOut="lolite()" onClick="logVariable('choiceformprinted')" href="../_variables/choiceformprinted.html">$choiceformprinted</a> = false;
<a name="l493"><span class="linenum"> 493</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['category'] = <a class="var it1252" onMouseOver="hilite(1252)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../_variables/categoryid.html">$categoryid</a>;
<a name="l494"><span class="linenum"> 494</span></a>      <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../question/addquestion.php.html">/question/addquestion.php</a>', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>);
<a name="l495"><span class="linenum"> 495</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../_variables/url.html">$url</a>, <a class="var it5936" onMouseOver="hilite(5936)" onMouseOut="lolite()" onClick="logVariable('caption')" href="../_variables/caption.html">$caption</a>, 'get', array('disabled'=&gt;<a class="var it1797" onMouseOver="hilite(1797)" onMouseOut="lolite()" onClick="logVariable('disabled')" href="../_variables/disabled.html">$disabled</a>, 'title'=&gt;<a class="var it12382" onMouseOver="hilite(12382)" onMouseOut="lolite()" onClick="logVariable('tooltip')" href="../_variables/tooltip.html">$tooltip</a>));
<a name="l496"><span class="linenum"> 496</span></a>  
<a name="l497"><span class="linenum"> 497</span></a>      if (!<a class="var it25195" onMouseOver="hilite(25195)" onMouseOut="lolite()" onClick="logVariable('choiceformprinted')" href="../_variables/choiceformprinted.html">$choiceformprinted</a>) {
<a name="l498"><span class="linenum"> 498</span></a>          echo '&lt;div id=&quot;qtypechoicecontainer&quot;&gt;';
<a name="l499"><span class="linenum"> 499</span></a>          echo <a class="function" onClick="logFunction('print_choose_qtype_to_add_form')" href="../_functions/print_choose_qtype_to_add_form.html" onMouseOver="funcPopup(event,'print_choose_qtype_to_add_form')">print_choose_qtype_to_add_form</a>(array());
<a name="l500"><span class="linenum"> 500</span></a>          echo &quot;&lt;/div&gt;\n&quot;;
<a name="l501"><span class="linenum"> 501</span></a>          <a class="var it25195" onMouseOver="hilite(25195)" onMouseOut="lolite()" onClick="logVariable('choiceformprinted')" href="../_variables/choiceformprinted.html">$choiceformprinted</a> = true;
<a name="l502"><span class="linenum"> 502</span></a>      }
<a name="l503"><span class="linenum"> 503</span></a>  }
<a name="l504"><span class="linenum"> 504</span></a>  
<a name="l505"><span class="linenum"> 505</span></a>  
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'instance_by_id': ['instance_by_id', 'Get a context instance as an object, from a given context id. ', [['lib','accesslib.php',5383]], 174],
'get_renderer': ['get_renderer', 'Get the renderer for a part of Moodle for this theme. ', [['lib','outputlib.php',1790],['mod/assign','locallib.php',2734],['lib','outputfactories.php',70],['lib','outputfactories.php',292],['lib','outputfactories.php',377],['course/format','lib.php',889],['question/type/multichoice','question.php',137],['question/type/multichoice','question.php',259],['question/type','questionbase.php',275],['grade/grading/form/guide','lib.php',482],['question/behaviour','behaviourbase.php',135],['lib','pagelib.php',797],['grade/grading/form/rubric','lib.php',486],['lib/tests/fixtures','test_renderer_factory.php',49]], 339],
'require_course_login': ['require_course_login', 'Weaker version of require_login() ', [['lib','moodlelib.php',2887]], 68],
'is_real_question_type': ['is_real_question_type', '', [['question/type','questiontypebase.php',97],['question/type/description','questiontype.php',39]], 1],
'question_get_display_preference': ['question_get_display_preference', 'Get a particular question preference that is also stored as a user preference. If the the value is given in the GET/POST request, then that value is used, and the user preference is updated to that value. Otherwise, the last set value of the user preference is used, or if it has never been set the default passed to this function. ', [['question','editlib.php',387]], 5],
'question_can_delete_cat': ['question_can_delete_cat', 'Check whether this user is allowed to delete this category. ', [['question','editlib.php',111]], 2],
'set_pagelayout': ['set_pagelayout', 'Sets the layout to use for this page. ', [['lib','pagelib.php',1063]], 277],
'get_questions_category': ['get_questions_category', 'Function to read all questions for category into big array ', [['question','editlib.php',52]], 1],
'param': ['param', 'Returns a placeholder for query parameters e.g. $DB->Param(\'a\') will return - \'?\' for most databases - \':a\' for Oracle - \'$1\', \'$2\', etc. for PostgreSQL ', [['lib/adodb','adodb.inc.php',815],['lib/adodb/drivers','adodb-postgres64.inc.php',591],['lib','weblib.php',455],['lib/adodb/drivers','adodb-oci8po.inc.php',37],['lib/adodb/drivers','adodb-db2oci.inc.php',166],['lib/adodb/drivers','adodb-oci8.inc.php',1014]], 641],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2444]], 635],
'question_get_category_id_from_pagevars': ['question_get_category_id_from_pagevars', 'Get the category id from $pagevars. ', [['question','editlib.php',377]], 2],
'get_records_select': ['get_records_select', 'Get a number of records as an array of objects which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1283]], 163],
'get_creatable_qtypes': ['get_creatable_qtypes', '', [['question/engine','bank.php',202]], 2],
'require_one_edit_tab_cap': ['require_one_edit_tab_cap', 'Throw error if at least one parent context hasn\'t got one of the caps $caps ', [['lib','questionlib.php',1649]], 3],
'yui_module': ['yui_module', 'Creates a JavaScript function call that requires one or more modules to be loaded. ', [['lib','outputrequirementslib.php',1016]], 76],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1715],['lib/google/src/Google/Service','Games.php',2099]], 949],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'require_capability': ['require_capability', 'Adds a required capability which all results will be checked against ', [['backup/util/ui','restore_ui_components.php',157],['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',891],['lib','accesslib.php',764]], 628],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1035],['lib/dml','moodle_database.php',1457]], 140],
'require_login_in_context': ['require_login_in_context', 'Make sure user is logged in as required in this context. ', [['question','editlib.php',413]], 0],
'override_active_url': ['override_active_url', 'This sets the URL that the URL of new nodes get compared to when locating the active node. ', [['lib','navigationlib.php',237]], 89],
'qbank_chooser': ['qbank_chooser', 'Build the HTML for the question chooser javascript popup. ', [['question','renderer.php',51]], 1],
'get_module_from_cmid': ['get_module_from_cmid', '', [['question','editlib.php',35]], 4],
'question_make_default_categories': ['question_make_default_categories', 'Gets the default category in the most specific context. If no categories exist yet then default ones are created in all contexts. ', [['lib','questionlib.php',1013]], 5],
'all': ['all', '', [['lib','questionlib.php',1524]], 1209],
'remove_all_params': ['remove_all_params', 'Remove all url parameters. ', [['lib','weblib.php',443]], 1],
'count_records_sql': ['count_records_sql', 'Get the result of a SQL SELECT COUNT(...) query. ', [['lib/dml','moodle_database.php',1747]], 132],
'create_new_question_button': ['create_new_question_button', 'Print a button for creating a new question. This will open question/addquestion.php, which in turn goes to question/question.php before getting back to $params[\'returnurl\'] (by default the question bank screen). ', [['question','editlib.php',478]], 1],
'set_user_preference': ['set_user_preference', 'Sets a preference for the specified user. ', [['lib','moodlelib.php',1822]], 163],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'count_records_select': ['count_records_select', 'Count the records in a table which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1730]], 52],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',605]], 2167],
'question_is_only_toplevel_category_in_context': ['question_is_only_toplevel_category_in_context', '', [['question','editlib.php',100]], 4],
'question_edit_setup': ['question_edit_setup', 'Common setup for all pages for editing questions. ', [['question','editlib.php',257]], 7],
'get_question_options': ['get_question_options', '', [['question/type/multianswer','questiontype.php',44],['question/type/multichoice','questiontype.php',40],['question/type/match','questiontype.php',40],['lib','questionlib.php',806],['question/type/essay','questiontype.php',47],['question/type/numerical','questiontype.php',55],['question/type/randomsamatch','questiontype.php',53],['question/type/calculated','questiontype.php',47],['question/type','questiontypebase.php',743],['question/type/random','questiontype.php',118],['question/type/truefalse','questiontype.php',111]], 16],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'having_one_edit_tab_cap': ['having_one_edit_tab_cap', '', [['lib','questionlib.php',1570]], 11],
'get_user_preferences': ['get_user_preferences', 'Used to fetch user preference(s) ', [['lib','moodlelib.php',1969]], 177],
'required_param': ['required_param', 'Returns a particular value for the named variable, taken from POST or GET.  If the parameter doesn\'t exist then an error is thrown because we require this variable. ', [['lib','moodlelib.php',521]], 816],
'print_choose_qtype_to_add_form': ['print_choose_qtype_to_add_form', 'Print a form to let the user choose which question type to add. When the form is submitted, it goes to the question.php script. ', [['question','editlib.php',445]], 3],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1583],['lib/dml','moodle_database.php',678]], 375],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',449]], 1560],
'single_button': ['single_button', 'Returns a form with a single button. ', [['lib','outputrenderers.php',1735]], 298],
'params': ['params', 'Return parameters to be bound to the above WHERE clause fragment. ', [['question/classes/bank/search','condition.php',43],['lib','weblib.php',394],['question/classes/bank/search','category_condition.php',100]], 89],
'get_field': ['get_field', 'Get the right field name to fetch a stat for these attempts that is calculated for more than one $whichattempts (count or avg). ', [['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1497],['user/filters','lib.php',124],['lib/behat','behat_field_manager.php',243]], 485],
'get_qtype': ['get_qtype', 'Get the question type class for a particular question type. ', [['question/engine','bank.php',80],['question/format/xml','format.php',995]], 100],
'question_categorylist': ['question_categorylist', '', [['lib','questionlib.php',1165]], 6],
'array_search': ['array_search', '', [], 188],
'explode': ['explode', '', [], 1599],
'strpos': ['strpos', '', [], 1623],
'compact': ['compact', '', [], 31],
'count': ['count', '', [], 3984],
'defined': ['defined', '', [], 4098],
'name': ['name', '', [], 100],
'in_array': ['in_array', '', [], 1173],
'is_null': ['is_null', '', [], 1992],
'is_object': ['is_object', '', [], 508],
'define': ['define', '', [], 2170]};
CLASS_DATA={
'category': ['category', 'Defines a category in my profile page navigation. ', [['user/classes/output/myprofile','category.php',28]], 28],
'navigation_node': ['navigation_node', 'This class is used to represent a node in a navigation tree ', [['lib','navigationlib.php',34]], 338],
'question_edit_contexts': ['question_edit_contexts', 'Tracks all the contexts related to the one where we are currently editing questions, and provides helper methods to check permissions. ', [['lib','questionlib.php',1481]], 8],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6766]], 1197],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',6988]], 942]};
CONST_DATA={
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 2948],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 462],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 204],
'DEFAULT_QUESTIONS_PER_PAGE': ['DEFAULT_QUESTIONS_PER_PAGE', '', [['question','editlib.php',33]], 6],
'CONTEXT_SYSTEM': ['CONTEXT_SYSTEM', '', [['lib','accesslib.php',142]], 165],
'PARAM_TEXT': ['PARAM_TEXT', '', [['lib','moodlelib.php',228]], 476],
'CONTEXT_COURSE': ['CONTEXT_COURSE', '', [['lib','accesslib.php',148]], 422],
'PARAM_SEQUENCE': ['PARAM_SEQUENCE', '', [['lib','moodlelib.php',213]], 31],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',138],['','install.php',93],['lib','setup.php',386]], 3532],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 502]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
