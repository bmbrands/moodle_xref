<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of persistent.php</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='competency/classes';
filename='persistent.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/competency/classes/</a> -> <a href="persistent.php.source.html">persistent.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="persistent.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../../_stats.html">Project Stats</a>]</p>
<p><b>Abstract class for core_competency objects saved to the DB.</b></p>
<table>
<tr><td align="right">Copyright: </td><td>2015 Damyon Wiese</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or later</td></tr>
<tr><td align="right">File Size: </td><td>865 lines (29 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>0 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 36 functions</h3>
<div class="inset">
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#__call">__call</a>()<br>
&nbsp;&nbsp;<a href="#get">get</a>()<br>
&nbsp;&nbsp;<a href="#set">set</a>()<br>
&nbsp;&nbsp;<a href="#define_properties">define_properties</a>()<br>
&nbsp;&nbsp;<a href="#properties_definition">properties_definition</a>()<br>
&nbsp;&nbsp;<a href="#get_formatted_properties">get_formatted_properties</a>()<br>
&nbsp;&nbsp;<a href="#get_property_default_value">get_property_default_value</a>()<br>
&nbsp;&nbsp;<a href="#get_property_error_message">get_property_error_message</a>()<br>
&nbsp;&nbsp;<a href="#has_property">has_property</a>()<br>
&nbsp;&nbsp;<a href="#is_property_required">is_property_required</a>()<br>
&nbsp;&nbsp;<a href="#from_record">from_record</a>()<br>
&nbsp;&nbsp;<a href="#to_record">to_record</a>()<br>
&nbsp;&nbsp;<a href="#read">read</a>()<br>
&nbsp;&nbsp;<a href="#before_create">before_create</a>()<br>
&nbsp;&nbsp;<a href="#create">create</a>()<br>
&nbsp;&nbsp;<a href="#after_create">after_create</a>()<br>
&nbsp;&nbsp;<a href="#before_update">before_update</a>()<br>
&nbsp;&nbsp;<a href="#update">update</a>()<br>
&nbsp;&nbsp;<a href="#after_update">after_update</a>()<br>
&nbsp;&nbsp;<a href="#before_delete">before_delete</a>()<br>
&nbsp;&nbsp;<a href="#delete">delete</a>()<br>
&nbsp;&nbsp;<a href="#after_delete">after_delete</a>()<br>
&nbsp;&nbsp;<a href="#before_validate">before_validate</a>()<br>
&nbsp;&nbsp;<a href="#validate">validate</a>()<br>
&nbsp;&nbsp;<a href="#is_valid">is_valid</a>()<br>
&nbsp;&nbsp;<a href="#get_errors">get_errors</a>()<br>
&nbsp;&nbsp;<a href="#extract_record">extract_record</a>()<br>
&nbsp;&nbsp;<a href="#get_records">get_records</a>()<br>
&nbsp;&nbsp;<a href="#get_record">get_record</a>()<br>
&nbsp;&nbsp;<a href="#get_records_select">get_records_select</a>()<br>
&nbsp;&nbsp;<a href="#get_sql_fields">get_sql_fields</a>()<br>
&nbsp;&nbsp;<a href="#count_records">count_records</a>()<br>
&nbsp;&nbsp;<a href="#count_records_select">count_records_select</a>()<br>
&nbsp;&nbsp;<a href="#record_exists">record_exists</a>()<br>
&nbsp;&nbsp;<a href="#record_exists_select">record_exists_select</a>()<br>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classtitle"><a name="functions"><b>Functions</b></a></div>
<div class="details-classinfo">
Functions that are not part of a class:<br><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'persistent.php.source.html#l54')" href="persistent.php.source.html#l54">__construct</a>(<a href="../../_variables/id.html">$id</a> = 0, stdClass <a href="../../_variables/record.html">$record</a> = null)&nbsp;&nbsp;
<a href="../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create an instance of this class.<BR>
</b><BR><b>param:</b> int $id If set, this is the id of an existing record, used to load the data.<br>
<b>param:</b> stdClass $record If set will be passed to {@link self::from_record()}.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__call" onClick="logFunction('__call', 'persistent.php.source.html#l70')" href="persistent.php.source.html#l70">__call</a>(<a href="../../_variables/method.html">$method</a>, <a href="../../_variables/arguments.html">$arguments</a>)&nbsp;&nbsp;
<a href="../../_functions/__call.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Magic method to capture getters and setters.<BR>
</b><BR><b>param:</b> string $method Callee.<br>
<b>param:</b> array $arguments List of arguments.<br>
<b>return:</b> mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get" onClick="logFunction('get', 'persistent.php.source.html#l86')" href="persistent.php.source.html#l86">get</a>(<a href="../../_variables/property.html">$property</a>)&nbsp;&nbsp;
<a href="../../_functions/get.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Data getter.<BR>
</b><BR>This is the main getter for all the properties. Developers can implement their own getters<BR>
but they should be calling {@link self::get()} in order to retrieve the value. Essentially<BR>
the getters defined by the developers would only ever be used as helper methods and will not<BR>
be called internally at this stage. In other words, do not expect {@link self::to_record()} or<BR>
{@link self::from_record()} to use them.<BR>
<BR>
This is protected because we wouldn't want the developers to get into the habit of<BR>
using $persistent-&gt;get('property_name'), the lengthy getters must be used.<BR>
<BR>
<b>param:</b> string $property The property name.<br>
<b>return:</b> mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="set" onClick="logFunction('set', 'persistent.php.source.html#l111')" href="persistent.php.source.html#l111">set</a>(<a href="../../_variables/property.html">$property</a>, <a href="../../_variables/value.html">$value</a>)&nbsp;&nbsp;
<a href="../../_functions/set.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Data setter.<BR>
</b><BR>This is the main setter for all the properties. Developers can implement their own setters<BR>
but they should always be calling {@link self::set()} in order to set the value. Essentially<BR>
the setters defined by the developers are helper methods and will not be called internally<BR>
at this stage. In other words do not expect {@link self::to_record()} or<BR>
{@link self::from_record()} to use them.<BR>
<BR>
This is protected because we wouldn't want the developers to get into the habit of<BR>
using $persistent-&gt;set('property_name', ''), the lengthy setters must be used.<BR>
<BR>
<b>param:</b> string $property The property name.<br>
<b>param:</b> mixed $value The value.<br>
<b>return:</b> mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="define_properties" onClick="logFunction('define_properties', 'persistent.php.source.html#l138')" href="persistent.php.source.html#l138">define_properties</a>()&nbsp;&nbsp;
<a href="../../_functions/define_properties.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return the custom definition of the properties of this model.<BR>
</b><BR>Each property MUST be listed here.<BR>
<BR>
The result of this method is cached internally for the whole request.<BR>
<BR>
The 'default' value can be a Closure when its value may change during a single request.<BR>
For example if the default value is based on a $CFG property, then it should be wrapped in a closure<BR>
to avoid running into scenarios where the true value of $CFG is not reflected in the definition.<BR>
Do not abuse closures as they obviously add some overhead.<BR>
<BR>
Examples:<BR>
<BR>
array(<BR>
'property_name' =&gt; array(<BR>
'default' =&gt; 'Default value',&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// When not set, the property is considered as required.<BR>
'message' =&gt; new lang_string(...),&nbsp;&nbsp;&nbsp;// Defaults to invalid data error message.<BR>
'null' =&gt; NULL_ALLOWED,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Defaults to NULL_NOT_ALLOWED. Takes NULL_NOW_ALLOWED or NULL_ALLOWED.<BR>
'type' =&gt; PARAM_TYPE,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Mandatory.<BR>
'choices' =&gt; array(1, 2, 3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// An array of accepted values.<BR>
)<BR>
)<BR>
<BR>
array(<BR>
'dynamic_property_name' =&gt; array(<BR>
'default' =&gt; function() {<BR>
return $CFG-&gt;something;<BR>
},<BR>
'type' =&gt; PARAM_INT,<BR>
)<BR>
)<BR>
<BR>
<b>return:</b> array Where keys are the property names.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="properties_definition" onClick="logFunction('properties_definition', 'persistent.php.source.html#l177')" href="persistent.php.source.html#l177">properties_definition</a>()&nbsp;&nbsp;
<a href="../../_functions/properties_definition.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the properties definition of this model..<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_formatted_properties" onClick="logFunction('get_formatted_properties', 'persistent.php.source.html#l238')" href="persistent.php.source.html#l238">get_formatted_properties</a>()&nbsp;&nbsp;
<a href="../../_functions/get_formatted_properties.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets all the formatted properties.<BR>
</b><BR>Formatted properties are properties which have a format associated with them.<BR>
<BR>
<b>return:</b> array Keys are property names, values are property format names.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_property_default_value" onClick="logFunction('get_property_default_value', 'persistent.php.source.html#l260')" href="persistent.php.source.html#l260">get_property_default_value</a>(<a href="../../_variables/property.html">$property</a>)&nbsp;&nbsp;
<a href="../../_functions/get_property_default_value.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets the default value for a property.<BR>
</b><BR>This assumes that the property exists.<BR>
<BR>
<b>param:</b> string $property The property name.<br>
<b>return:</b> mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_property_error_message" onClick="logFunction('get_property_error_message', 'persistent.php.source.html#l280')" href="persistent.php.source.html#l280">get_property_error_message</a>(<a href="../../_variables/property.html">$property</a>)&nbsp;&nbsp;
<a href="../../_functions/get_property_error_message.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets the error message for a property.<BR>
</b><BR>This assumes that the property exists.<BR>
<BR>
<b>param:</b> string $property The property name.<br>
<b>return:</b> lang_string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_property" onClick="logFunction('has_property', 'persistent.php.source.html#l296')" href="persistent.php.source.html#l296">has_property</a>(<a href="../../_variables/property.html">$property</a>)&nbsp;&nbsp;
<a href="../../_functions/has_property.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns whether or not a property was defined.<BR>
</b><BR><b>param:</b> string $property The property name.<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_property_required" onClick="logFunction('is_property_required', 'persistent.php.source.html#l307')" href="persistent.php.source.html#l307">is_property_required</a>(<a href="../../_variables/property.html">$property</a>)&nbsp;&nbsp;
<a href="../../_functions/is_property_required.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns whether or not a property is required.<BR>
</b><BR>By definition a property with a default value is not required.<BR>
<BR>
<b>param:</b> string $property The property name.<br>
<b>return:</b> boolean<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="from_record" onClick="logFunction('from_record', 'persistent.php.source.html#l320')" href="persistent.php.source.html#l320">from_record</a>(stdClass <a href="../../_variables/record.html">$record</a>)&nbsp;&nbsp;
<a href="../../_functions/from_record.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Populate this class with data from a DB record.<BR>
</b><BR>Note that this does not use any custom setter because the data here is intended to<BR>
represent what is stored in the database.<BR>
<BR>
<b>param:</b> \stdClass $record A DB record.<br>
<b>return:</b> persistent<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="to_record" onClick="logFunction('to_record', 'persistent.php.source.html#l337')" href="persistent.php.source.html#l337">to_record</a>()&nbsp;&nbsp;
<a href="../../_functions/to_record.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Create a DB record from this class.<BR>
</b><BR>Note that this does not use any custom getter because the data here is intended to<BR>
represent what is stored in the database.<BR>
<BR>
<b>return:</b> \stdClass<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="read" onClick="logFunction('read', 'persistent.php.source.html#l354')" href="persistent.php.source.html#l354">read</a>()&nbsp;&nbsp;
<a href="../../_functions/read.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Load the data from the DB.<BR>
</b><BR><b>return:</b> persistent<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="before_create" onClick="logFunction('before_create', 'persistent.php.source.html#l374')" href="persistent.php.source.html#l374">before_create</a>()&nbsp;&nbsp;
<a href="../../_functions/before_create.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Hook to execute before a create.<BR>
</b><BR>Please note that at this stage the data has already been validated and therefore<BR>
any new data being set will not be validated before it is sent to the database.<BR>
<BR>
This is only intended to be used by child classes, do not put any logic here!<BR>
<BR>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create" onClick="logFunction('create', 'persistent.php.source.html#l387')" href="persistent.php.source.html#l387">create</a>()&nbsp;&nbsp;
<a href="../../_functions/create.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Insert a record in the DB.<BR>
</b><BR><b>return:</b> persistent<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="after_create" onClick="logFunction('after_create', 'persistent.php.source.html#l429')" href="persistent.php.source.html#l429">after_create</a>()&nbsp;&nbsp;
<a href="../../_functions/after_create.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Hook to execute after a create.<BR>
</b><BR>This is only intended to be used by child classes, do not put any logic here!<BR>
<BR>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="before_update" onClick="logFunction('before_update', 'persistent.php.source.html#l439')" href="persistent.php.source.html#l439">before_update</a>()&nbsp;&nbsp;
<a href="../../_functions/before_update.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Hook to execute before an update.<BR>
</b><BR>Please note that at this stage the data has already been validated and therefore<BR>
any new data being set will not be validated before it is sent to the database.<BR>
<BR>
This is only intended to be used by child classes, do not put any logic here!<BR>
<BR>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update" onClick="logFunction('update', 'persistent.php.source.html#l452')" href="persistent.php.source.html#l452">update</a>()&nbsp;&nbsp;
<a href="../../_functions/update.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Update the existing record in the DB.<BR>
</b><BR><b>return:</b> bool True on success.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="after_update" onClick="logFunction('after_update', 'persistent.php.source.html#l489')" href="persistent.php.source.html#l489">after_update</a>(<a href="../../_variables/result.html">$result</a>)&nbsp;&nbsp;
<a href="../../_functions/after_update.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Hook to execute after an update.<BR>
</b><BR>This is only intended to be used by child classes, do not put any logic here!<BR>
<BR>
<b>param:</b> bool $result Whether or not the update was successful.<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="before_delete" onClick="logFunction('before_delete', 'persistent.php.source.html#l500')" href="persistent.php.source.html#l500">before_delete</a>()&nbsp;&nbsp;
<a href="../../_functions/before_delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Hook to execute before a delete.<BR>
</b><BR>This is only intended to be used by child classes, do not put any logic here!<BR>
<BR>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete" onClick="logFunction('delete', 'persistent.php.source.html#l510')" href="persistent.php.source.html#l510">delete</a>()&nbsp;&nbsp;
<a href="../../_functions/delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Delete an entry from the database.<BR>
</b><BR><b>return:</b> bool True on success.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="after_delete" onClick="logFunction('after_delete', 'persistent.php.source.html#l538')" href="persistent.php.source.html#l538">after_delete</a>(<a href="../../_variables/result.html">$result</a>)&nbsp;&nbsp;
<a href="../../_functions/after_delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Hook to execute after a delete.<BR>
</b><BR>This is only intended to be used by child classes, do not put any logic here!<BR>
<BR>
<b>param:</b> bool $result Whether or not the delete was successful.<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="before_validate" onClick="logFunction('before_validate', 'persistent.php.source.html#l549')" href="persistent.php.source.html#l549">before_validate</a>()&nbsp;&nbsp;
<a href="../../_functions/before_validate.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Hook to execute before the validation.<BR>
</b><BR>This hook will not affect the validation results in any way but is useful to<BR>
internally set properties which will need to be validated.<BR>
<BR>
This is only intended to be used by child classes, do not put any logic here!<BR>
<BR>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="validate" onClick="logFunction('validate', 'persistent.php.source.html#l562')" href="persistent.php.source.html#l562">validate</a>()&nbsp;&nbsp;
<a href="../../_functions/validate.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Validates the data.<BR>
</b><BR>Developers can implement addition validation by defining a method as follows. Note that<BR>
the method MUST return a lang_string() when there is an error, and true when the data is valid.<BR>
<BR>
protected function validate_propertyname($value) {<BR>
if ($value !== 'My expected value') {<BR>
return new lang_string('invaliddata', 'error');<BR>
}<BR>
return true<BR>
}<BR>
<BR>
It is OK to use other properties in your custom validation methods when you need to, however note<BR>
they might not have been validated yet, so try not to rely on them too much.<BR>
<BR>
Note that the validation methods should be protected. Validating just one field is not<BR>
recommended because of the possible dependencies between one field and another,also the<BR>
field ID can be used to check whether the object is being updated or created.<BR>
<BR>
When validating foreign keys the persistent should only check that the associated model<BR>
exists. The validation methods should not be used to check for a change in that relationship.<BR>
The API method setting the attributes on the model should be responsible for that.<BR>
E.g. On a course model, the method validate_categoryid will check that the category exists.<BR>
However, if a course can never be moved outside of its category it would be up to the calling<BR>
code to ensure that the category ID will not be altered.<BR>
<BR>
<b>return:</b> array|true Returns true when the validation passed, or an array of properties with errors.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_valid" onClick="logFunction('is_valid', 'persistent.php.source.html#l661')" href="persistent.php.source.html#l661">is_valid</a>()&nbsp;&nbsp;
<a href="../../_functions/is_valid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns whether or not the model is valid.<BR>
</b><BR><b>return:</b> boolean True when it is.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_errors" onClick="logFunction('get_errors', 'persistent.php.source.html#l670')" href="persistent.php.source.html#l670">get_errors</a>()&nbsp;&nbsp;
<a href="../../_functions/get_errors.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the validation errors.<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="extract_record" onClick="logFunction('extract_record', 'persistent.php.source.html#l680')" href="persistent.php.source.html#l680">extract_record</a>(<a href="../../_variables/row.html">$row</a>, <a href="../../_variables/prefix.html">$prefix</a> = null)&nbsp;&nbsp;
<a href="../../_functions/extract_record.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Extract a record from a row of data.<BR>
</b><BR>Most likely used in combination with {@link self::get_sql_fields()}. This method is<BR>
simple enough to be used by non-persistent classes, keep that in mind when modifying it.<BR>
<BR>
e.g. persistent::extract_record($row, 'user'); should work.<BR>
<BR>
<b>param:</b> stdClass $row The row of data.<br>
<b>param:</b> string $prefix The prefix the data fields are prefixed with, defaults to the table name followed by underscore.<br>
<b>return:</b> stdClass The extracted data.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_records" onClick="logFunction('get_records', 'persistent.php.source.html#l709')" href="persistent.php.source.html#l709">get_records</a>(<a href="../../_variables/filters.html">$filters</a> = array()&nbsp;&nbsp;
<a href="../../_functions/get_records.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Load a list of records.<BR>
</b><BR><b>param:</b> array $filters Filters to apply.<br>
<b>param:</b> string $sort Field to sort by.<br>
<b>param:</b> string $order Sort order.<br>
<b>param:</b> int $skip Limitstart.<br>
<b>param:</b> int $limit Number of rows to return.<br>
<b>return:</b> \core_competency\persistent[]<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_record" onClick="logFunction('get_record', 'persistent.php.source.html#l738')" href="persistent.php.source.html#l738">get_record</a>(<a href="../../_variables/filters.html">$filters</a> = array()&nbsp;&nbsp;
<a href="../../_functions/get_record.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Load a single record.<BR>
</b><BR><b>param:</b> array $filters Filters to apply.<br>
<b>return:</b> false|\core_competency\persistent<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_records_select" onClick="logFunction('get_records_select', 'persistent.php.source.html#l751')" href="persistent.php.source.html#l751">get_records_select</a>(<a href="../../_variables/select.html">$select</a>, <a href="../../_variables/params.html">$params</a> = null, <a href="../../_variables/sort.html">$sort</a> = '', <a href="../../_variables/fields.html">$fields</a> = '*', <a href="../../_variables/limitfrom.html">$limitfrom</a> = 0, <a href="../../_variables/limitnum.html">$limitnum</a> = 0)&nbsp;&nbsp;
<a href="../../_functions/get_records_select.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Load a list of records based on a select query.<BR>
</b><BR><b>param:</b> string $select<br>
<b>param:</b> array $params<br>
<b>param:</b> string $sort<br>
<b>param:</b> string $fields<br>
<b>param:</b> int $limitfrom<br>
<b>param:</b> int $limitnum<br>
<b>return:</b> \core_competency\persistent[]<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_sql_fields" onClick="logFunction('get_sql_fields', 'persistent.php.source.html#l777')" href="persistent.php.source.html#l777">get_sql_fields</a>(<a href="../../_variables/alias.html">$alias</a>, <a href="../../_variables/prefix.html">$prefix</a> = null)&nbsp;&nbsp;
<a href="../../_functions/get_sql_fields.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Return the list of fields for use in a SELECT clause.<BR>
</b><BR>Having the complete list of fields prefixed allows for multiple persistents to be fetched<BR>
in a single query. Use {@link self::extract_record()} to extract the records from the query result.<BR>
<BR>
<b>param:</b> string $alias The alias used for the table.<br>
<b>param:</b> string $prefix The prefix to use for each field, defaults to the table name followed by underscore.<br>
<b>return:</b> string The SQL fragment.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="count_records" onClick="logFunction('count_records', 'persistent.php.source.html#l815')" href="persistent.php.source.html#l815">count_records</a>(array <a href="../../_variables/conditions.html">$conditions</a> = array()&nbsp;&nbsp;
<a href="../../_functions/count_records.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Count a list of records.<BR>
</b><BR><b>param:</b> array $conditions An array of conditions.<br>
<b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="count_records_select" onClick="logFunction('count_records_select', 'persistent.php.source.html#l828')" href="persistent.php.source.html#l828">count_records_select</a>(<a href="../../_variables/select.html">$select</a>, <a href="../../_variables/params.html">$params</a> = null)&nbsp;&nbsp;
<a href="../../_functions/count_records_select.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Count a list of records.<BR>
</b><BR><b>param:</b> string $select<br>
<b>param:</b> array $params<br>
<b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="record_exists" onClick="logFunction('record_exists', 'persistent.php.source.html#l842')" href="persistent.php.source.html#l842">record_exists</a>(<a href="../../_variables/id.html">$id</a>)&nbsp;&nbsp;
<a href="../../_functions/record_exists.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check if a record exists by ID.<BR>
</b><BR><b>param:</b> int $id Record ID.<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="record_exists_select" onClick="logFunction('record_exists_select', 'persistent.php.source.html#l853')" href="persistent.php.source.html#l853">record_exists_select</a>(<a href="../../_variables/select.html">$select</a>, array <a href="../../_variables/params.html">$params</a> = null)&nbsp;&nbsp;
<a href="../../_functions/record_exists_select.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check if a records exists.<BR>
</b><BR><b>param:</b> string $select<br>
<b>param:</b> array $params<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
</div></div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
