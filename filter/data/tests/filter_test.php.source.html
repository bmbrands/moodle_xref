<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /filter/data/tests/filter_test.php source</title>
    <link rel="stylesheet" href="../../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../../';
subdir='filter/data/tests';
filename='filter_test.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/filter/data/tests/</a> -> <a href="filter_test.php.html">filter_test.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="filter_test.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="filter_test.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Unit tests.</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> *</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * @package filter_data</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @category test</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright 2015 David Monllao</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <a class="phpfunction" onClick="logFunction('defined')" href="../../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('MOODLE_INTERNAL')" href="../../../_constants/MOODLE_INTERNAL.html" onMouseOver="constPopup(event,'MOODLE_INTERNAL')">MOODLE_INTERNAL</a>') || die();
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>;
<a name="l29"><span class="linenum">  29</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../../filter/data/filter.php.html">/filter/data/filter.php</a>');
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment">/**</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> * Tests for filter_data.</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> *</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @package filter_data</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @copyright 2015 David Monllao</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> */</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('filter_data_filter_testcase')" href="../../../_classes/filter_data_filter_testcase.html" onMouseOver="classPopup(event,'filter_data_filter_testcase')">filter_data_filter_testcase</a> extends advanced_testcase {
<a name="l39"><span class="linenum">  39</span></a>  
<a name="l40"><span class="linenum">  40</span></a>      <span class="comment">/**</span>
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">     * Tests that the filter applies the required changes.</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     *</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     * @return void</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     */</span>
<a name="l45"><span class="linenum">  45</span></a>      public function <a class="function" onClick="logFunction('test_filter')" href="../../../_functions/test_filter.html" onMouseOver="funcPopup(event,'test_filter')">test_filter</a>() {
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('resetAfterTest')" href="../../../_functions/resetaftertest.html" onMouseOver="funcPopup(event,'resetaftertest')">resetAfterTest</a>(true);
<a name="l48"><span class="linenum">  48</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('setAdminUser')" href="../../../_functions/setadminuser.html" onMouseOver="funcPopup(event,'setadminuser')">setAdminUser</a>();
<a name="l49"><span class="linenum">  49</span></a>          <a class="class" onClick="logClass('filter_manager')" href="../../../_classes/filter_manager.html" onMouseOver="classPopup(event,'filter_manager')">filter_manager</a>::<a class="function" onClick="logFunction('reset_caches')" href="../../../_functions/reset_caches.html" onMouseOver="funcPopup(event,'reset_caches')">reset_caches</a>();
<a name="l50"><span class="linenum">  50</span></a>  
<a name="l51"><span class="linenum">  51</span></a>          <a class="function" onClick="logFunction('filter_set_global_state')" href="../../../_functions/filter_set_global_state.html" onMouseOver="funcPopup(event,'filter_set_global_state')">filter_set_global_state</a>('data', <a class="constant" onClick="logConstant('TEXTFILTER_ON')" href="../../../_constants/TEXTFILTER_ON.html" onMouseOver="constPopup(event,'TEXTFILTER_ON')">TEXTFILTER_ON</a>);
<a name="l52"><span class="linenum">  52</span></a>  
<a name="l53"><span class="linenum">  53</span></a>          <a class="var it690" onMouseOver="hilite(690)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../../_variables/course1.html">$course1</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l54"><span class="linenum">  54</span></a>          <a class="var it11297" onMouseOver="hilite(11297)" onMouseOut="lolite()" onClick="logVariable('coursecontext1')" href="../../../_variables/coursecontext1.html">$coursecontext1</a> = <a class="class" onClick="logClass('context_course')" href="../../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it690" onMouseOver="hilite(690)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../../_variables/course1.html">$course1</a>-&gt;<a onClick="logVariable('id')" class="var it43179" onMouseOver="hilite(43179)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l55"><span class="linenum">  55</span></a>  
<a name="l56"><span class="linenum">  56</span></a>          <a class="var it703" onMouseOver="hilite(703)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../../_variables/course2.html">$course2</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_course')" href="../../../_functions/create_course.html" onMouseOver="funcPopup(event,'create_course')">create_course</a>();
<a name="l57"><span class="linenum">  57</span></a>          <a class="var it11298" onMouseOver="hilite(11298)" onMouseOut="lolite()" onClick="logVariable('coursecontext2')" href="../../../_variables/coursecontext2.html">$coursecontext2</a> = <a class="class" onClick="logClass('context_course')" href="../../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it703" onMouseOver="hilite(703)" onMouseOut="lolite()" onClick="logVariable('course2')" href="../../../_variables/course2.html">$course2</a>-&gt;<a onClick="logVariable('id')" class="var it42953" onMouseOver="hilite(42953)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>);
<a name="l58"><span class="linenum">  58</span></a>  
<a name="l59"><span class="linenum">  59</span></a>          <a class="var it2136" onMouseOver="hilite(2136)" onMouseOut="lolite()" onClick="logVariable('sitecontext')" href="../../../_variables/sitecontext.html">$sitecontext</a> = <a class="class" onClick="logClass('context_course')" href="../../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="constant" onClick="logConstant('SITEID')" href="../../../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>);
<a name="l60"><span class="linenum">  60</span></a>  
<a name="l61"><span class="linenum">  61</span></a>          <a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('site')" href="../../../_variables/site.html">$site</a> = <a class="function" onClick="logFunction('get_site')" href="../../../_functions/get_site.html" onMouseOver="funcPopup(event,'get_site')">get_site</a>();
<a name="l62"><span class="linenum">  62</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_simple_database_instance')" href="../../../_functions/add_simple_database_instance.html" onMouseOver="funcPopup(event,'add_simple_database_instance')">add_simple_database_instance</a>(<a class="var it366" onMouseOver="hilite(366)" onMouseOut="lolite()" onClick="logVariable('site')" href="../../../_variables/site.html">$site</a>, array('SiteEntry'));
<a name="l63"><span class="linenum">  63</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('add_simple_database_instance')" href="../../../_functions/add_simple_database_instance.html" onMouseOver="funcPopup(event,'add_simple_database_instance')">add_simple_database_instance</a>(<a class="var it690" onMouseOver="hilite(690)" onMouseOut="lolite()" onClick="logVariable('course1')" href="../../../_variables/course1.html">$course1</a>, array('CourseEntry'));
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>          <a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../../_variables/html.html">$html</a> = '&lt;p&gt;I like CourseEntry and SiteEntry&lt;/p&gt;';
<a name="l66"><span class="linenum">  66</span></a>  
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">        // Testing at course level (both site and course).</span>
<a name="l68"><span class="linenum">  68</span></a>          <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('filtered')" href="../../../_variables/filtered.html">$filtered</a> = <a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../../_variables/html.html">$html</a>, <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>, array('context' =&gt; <a class="var it11297" onMouseOver="hilite(11297)" onMouseOut="lolite()" onClick="logVariable('coursecontext1')" href="../../../_variables/coursecontext1.html">$coursecontext1</a>));
<a name="l69"><span class="linenum">  69</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;assertRegExp('/title=(\'|&quot;)CourseEntry(\'|&quot;)/', <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('filtered')" href="../../../_variables/filtered.html">$filtered</a>);
<a name="l70"><span class="linenum">  70</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;assertRegExp('/title=(\'|&quot;)SiteEntry(\'|&quot;)/', <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('filtered')" href="../../../_variables/filtered.html">$filtered</a>);
<a name="l71"><span class="linenum">  71</span></a>  
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">        // Testing at site level (only site).</span>
<a name="l73"><span class="linenum">  73</span></a>          <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('filtered')" href="../../../_variables/filtered.html">$filtered</a> = <a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../../_variables/html.html">$html</a>, <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>, array('context' =&gt; <a class="var it2136" onMouseOver="hilite(2136)" onMouseOut="lolite()" onClick="logVariable('sitecontext')" href="../../../_variables/sitecontext.html">$sitecontext</a>));
<a name="l74"><span class="linenum">  74</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;assertNotRegExp('/title=(\'|&quot;)CourseEntry(\'|&quot;)/', <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('filtered')" href="../../../_variables/filtered.html">$filtered</a>);
<a name="l75"><span class="linenum">  75</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;assertRegExp('/title=(\'|&quot;)SiteEntry(\'|&quot;)/', <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('filtered')" href="../../../_variables/filtered.html">$filtered</a>);
<a name="l76"><span class="linenum">  76</span></a>  
<a name="l77"><span class="linenum">  77</span></a>  <span class="comment">        // Changing to another course to test the caches invalidation (only site).</span>
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('filtered')" href="../../../_variables/filtered.html">$filtered</a> = <a class="function" onClick="logFunction('format_text')" href="../../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it475" onMouseOver="hilite(475)" onMouseOut="lolite()" onClick="logVariable('html')" href="../../../_variables/html.html">$html</a>, <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>, array('context' =&gt; <a class="var it11298" onMouseOver="hilite(11298)" onMouseOut="lolite()" onClick="logVariable('coursecontext2')" href="../../../_variables/coursecontext2.html">$coursecontext2</a>));
<a name="l79"><span class="linenum">  79</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;assertNotRegExp('/title=(\'|&quot;)CourseEntry(\'|&quot;)/', <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('filtered')" href="../../../_variables/filtered.html">$filtered</a>);
<a name="l80"><span class="linenum">  80</span></a>          <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;assertRegExp('/title=(\'|&quot;)SiteEntry(\'|&quot;)/', <a class="var it1753" onMouseOver="hilite(1753)" onMouseOut="lolite()" onClick="logVariable('filtered')" href="../../../_variables/filtered.html">$filtered</a>);
<a name="l81"><span class="linenum">  81</span></a>      }
<a name="l82"><span class="linenum">  82</span></a>  
<a name="l83"><span class="linenum">  83</span></a>      <span class="comment">/**</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment">     * Adds a database instance to the provided course + a text field + adds all attached entries.</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">     *</span>
<a name="l86"><span class="linenum">  86</span></a>  <span class="comment">     * @param stdClass $course</span>
<a name="l87"><span class="linenum">  87</span></a>  <span class="comment">     * @param array $entries A list of entry names.</span>
<a name="l88"><span class="linenum">  88</span></a>  <span class="comment">     * @return void</span>
<a name="l89"><span class="linenum">  89</span></a>  <span class="comment">     */</span>
<a name="l90"><span class="linenum">  90</span></a>      protected function <a class="function" onClick="logFunction('add_simple_database_instance')" href="../../../_functions/add_simple_database_instance.html" onMouseOver="funcPopup(event,'add_simple_database_instance')">add_simple_database_instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>, <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../../_variables/entries.html">$entries</a> = false) {
<a name="l91"><span class="linenum">  91</span></a>          global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>;
<a name="l92"><span class="linenum">  92</span></a>  
<a name="l93"><span class="linenum">  93</span></a>          <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('database')" href="../../../_variables/database.html">$database</a> = <a class="var it3" onMouseOver="hilite(3)" onMouseOut="lolite()" onClick="logVariable('this')" href="../../../_variables/this.html">$this</a>-&gt;<a class="function" onClick="logFunction('getDataGenerator')" href="../../../_functions/getdatagenerator.html" onMouseOver="funcPopup(event,'getdatagenerator')">getDataGenerator</a>()-&gt;<a class="function" onClick="logFunction('create_module')" href="../../../_functions/create_module.html" onMouseOver="funcPopup(event,'create_module')">create_module</a>('data',
<a name="l94"><span class="linenum">  94</span></a>                  array('course' =&gt; <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>));
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">        // A database field.</span>
<a name="l97"><span class="linenum">  97</span></a>          <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a> = <a class="function" onClick="logFunction('data_get_field_new')" href="../../../_functions/data_get_field_new.html" onMouseOver="funcPopup(event,'data_get_field_new')">data_get_field_new</a>('text', <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('database')" href="../../../_variables/database.html">$database</a>);
<a name="l98"><span class="linenum">  98</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fielddetail')" href="../../../_variables/fielddetail.html">$fielddetail</a> = new stdClass();
<a name="l99"><span class="linenum">  99</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fielddetail')" href="../../../_variables/fielddetail.html">$fielddetail</a>-&gt;<a onClick="logVariable('d')" class="var it43301" onMouseOver="hilite(43301)" onMouseOut="lolite()" href="../../../_variables/d.html">d</a> = <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('database')" href="../../../_variables/database.html">$database</a>-&gt;<a onClick="logVariable('id')" class="var it45356" onMouseOver="hilite(45356)" onMouseOut="lolite()" href="../../../_variables/id.html">id</a>;
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fielddetail')" href="../../../_variables/fielddetail.html">$fielddetail</a>-&gt;<a onClick="logVariable('mode')" class="var it43301" onMouseOver="hilite(43301)" onMouseOut="lolite()" href="../../../_variables/mode.html">mode</a> = 'add';
<a name="l101"><span class="linenum"> 101</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fielddetail')" href="../../../_variables/fielddetail.html">$fielddetail</a>-&gt;<a onClick="logVariable('type')" class="var it43301" onMouseOver="hilite(43301)" onMouseOut="lolite()" href="../../../_variables/type.html">type</a> = 'text';
<a name="l102"><span class="linenum"> 102</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fielddetail')" href="../../../_variables/fielddetail.html">$fielddetail</a>-&gt;<a onClick="logVariable('sesskey')" class="var it43301" onMouseOver="hilite(43301)" onMouseOut="lolite()" href="../../../_variables/sesskey.html">sesskey</a> = <a class="function" onClick="logFunction('sesskey')" href="../../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>();
<a name="l103"><span class="linenum"> 103</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fielddetail')" href="../../../_variables/fielddetail.html">$fielddetail</a>-&gt;<a onClick="logVariable('name')" class="var it43301" onMouseOver="hilite(43301)" onMouseOut="lolite()" href="../../../_variables/name.html">name</a> = 'Name';
<a name="l104"><span class="linenum"> 104</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fielddetail')" href="../../../_variables/fielddetail.html">$fielddetail</a>-&gt;<a onClick="logVariable('description')" class="var it43301" onMouseOver="hilite(43301)" onMouseOut="lolite()" href="../../../_variables/description.html">description</a> = 'Some name';
<a name="l105"><span class="linenum"> 105</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fielddetail')" href="../../../_variables/fielddetail.html">$fielddetail</a>-&gt;<a onClick="logVariable('param1')" class="var it43301" onMouseOver="hilite(43301)" onMouseOut="lolite()" href="../../../_variables/param1.html">param1</a> = '1';
<a name="l106"><span class="linenum"> 106</span></a>          <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>-&gt;<a class="function" onClick="logFunction('define_field')" href="../../../_functions/define_field.html" onMouseOver="funcPopup(event,'define_field')">define_field</a>(<a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fielddetail')" href="../../../_variables/fielddetail.html">$fielddetail</a>);
<a name="l107"><span class="linenum"> 107</span></a>          <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>-&gt;<a class="function" onClick="logFunction('insert_field')" href="../../../_functions/insert_field.html" onMouseOver="funcPopup(event,'insert_field')">insert_field</a>();
<a name="l108"><span class="linenum"> 108</span></a>          <a class="var it1177" onMouseOver="hilite(1177)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../../_variables/recordid.html">$recordid</a> = <a class="function" onClick="logFunction('data_add_record')" href="../../../_functions/data_add_record.html" onMouseOver="funcPopup(event,'data_add_record')">data_add_record</a>(<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('database')" href="../../../_variables/database.html">$database</a>);
<a name="l109"><span class="linenum"> 109</span></a>  
<a name="l110"><span class="linenum"> 110</span></a>  <span class="comment">        // Database entries.</span>
<a name="l111"><span class="linenum"> 111</span></a>          foreach (<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../../_variables/entries.html">$entries</a> as <a class="var it11299" onMouseOver="hilite(11299)" onMouseOut="lolite()" onClick="logVariable('entrytext')" href="../../../_variables/entrytext.html">$entrytext</a>) {
<a name="l112"><span class="linenum"> 112</span></a>              <a class="var it1178" onMouseOver="hilite(1178)" onMouseOut="lolite()" onClick="logVariable('datacontent')" href="../../../_variables/datacontent.html">$datacontent</a> = array();
<a name="l113"><span class="linenum"> 113</span></a>              <a class="var it1178" onMouseOver="hilite(1178)" onMouseOut="lolite()" onClick="logVariable('datacontent')" href="../../../_variables/datacontent.html">$datacontent</a>['fieldid'] = <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../../_variables/field.html">$field</a>-&gt;<a onClick="logVariable('field')" class="var it43302" onMouseOver="hilite(43302)" onMouseOut="lolite()" href="../../../_variables/field.html">field</a>-&gt;id;
<a name="l114"><span class="linenum"> 114</span></a>              <a class="var it1178" onMouseOver="hilite(1178)" onMouseOut="lolite()" onClick="logVariable('datacontent')" href="../../../_variables/datacontent.html">$datacontent</a>['recordid'] = <a class="var it1177" onMouseOver="hilite(1177)" onMouseOut="lolite()" onClick="logVariable('recordid')" href="../../../_variables/recordid.html">$recordid</a>;
<a name="l115"><span class="linenum"> 115</span></a>              <a class="var it1178" onMouseOver="hilite(1178)" onMouseOut="lolite()" onClick="logVariable('datacontent')" href="../../../_variables/datacontent.html">$datacontent</a>['content'] = <a class="var it11299" onMouseOver="hilite(11299)" onMouseOut="lolite()" onClick="logVariable('entrytext')" href="../../../_variables/entrytext.html">$entrytext</a>;
<a name="l116"><span class="linenum"> 116</span></a>              <a class="var it1179" onMouseOver="hilite(1179)" onMouseOut="lolite()" onClick="logVariable('contentid')" href="../../../_variables/contentid.html">$contentid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('data_content', <a class="var it1178" onMouseOver="hilite(1178)" onMouseOut="lolite()" onClick="logVariable('datacontent')" href="../../../_variables/datacontent.html">$datacontent</a>);
<a name="l117"><span class="linenum"> 117</span></a>          }
<a name="l118"><span class="linenum"> 118</span></a>      }
<a name="l119"><span class="linenum"> 119</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'format_text': ['format_text', 'Formats a text string coming from the search engine. ', [['search/classes','document.php',606],['lib/classes','grading_external.php',182],['search/engine/solr/classes','document.php',129],['lib','weblib.php',1158],['lib','tablelib.php',860],['lib','tablelib.php',1667],['question/type','questionbase.php',345]], 322],
'setadminuser': ['setadminuser', 'Set current $USER to admin account, reset access cache. ', [['lib/phpunit/classes','advanced_testcase.php',539]], 597],
'data_add_record': ['data_add_record', 'function that takes in a dataid and adds a record this is used everytime an add template is submitted ', [['mod/data','lib.php',832]], 11],
'reset_caches': ['reset_caches', 'This implementation does not use any caches. ', [['lib/classes','string_manager_install.php',245],['lib/classes','plugin_manager.php',115],['lib/classes/update','checker.php',74],['backup/moodle2','restore_stepslib.php',1538],['tag/classes','index_builder.php',367],['repository','lib.php',2636],['lib/dml','moodle_database.php',1052],['lib/classes','filetypes.php',419],['lib','accesslib.php',5149],['lib','accesslib.php',6045],['mod/glossary/classes/local','concept_cache.php',49],['lib/classes','string_manager_standard.php',599],['lib/classes','string_manager.php',127],['lib','filterlib.php',97],['lib/classes','text.php',108],['lib/classes','user.php',486]], 111],
'test_filter': ['test_filter', 'Tests that the filter applies the required changes. ', [['filter/data/tests','filter_test.php',40]], 0],
'create_course': ['create_course', 'Creates the actual course. ', [['admin/tool/generator/classes','course_backend.php',246],['lib/testing/generator','data_generator.php',366],['enrol/ldap','lib.php',949],['course','lib.php',2654]], 1178],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 641],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'define_field': ['define_field', 'Set up the field object according to data in an object.  Now is the time to clean it! ', [['mod/data','lib.php',147]], 13],
'getdatagenerator': ['getdatagenerator', 'Get data generator ', [['lib/phpunit/classes','advanced_testcase.php',570]], 4450],
'insert_field': ['insert_field', 'Insert a new field in the database We assume the field object is already defined as $this->field ', [['mod/data','lib.php',179]], 13],
'data_get_field_new': ['data_get_field_new', 'given a field id this function creates an instance of the particular subfield class ', [['mod/data','lib.php',738]], 13],
'create_module': ['create_module', 'Create a test activity module. ', [['lib/testing/generator','data_generator.php',481],['course','lib.php',3522]], 762],
'filter_set_global_state': ['filter_set_global_state', 'Set the global activated state for a text filter. ', [['lib','filterlib.php',524]], 76],
'add_simple_database_instance': ['add_simple_database_instance', 'Adds a database instance to the provided course + a text field + adds all attached entries. ', [['filter/data/tests','filter_test.php',83]], 2],
'get_site': ['get_site', 'Returns $course object of the top-level site. ', [['lib','datalib.php',547]], 77],
'resetaftertest': ['resetaftertest', 'Reset everything after current test. ', [['lib/phpunit/classes','advanced_testcase.php',246]], 1528],
'defined': ['defined', '', [], 4731]};
CLASS_DATA={
'filter_manager': ['filter_manager', 'Class to manage the filtering of strings. It is intended that this class is only used by weblib.php. Client code should probably be using the format_text and format_string functions. ', [['lib','filterlib.php',44]], 19],
'filter_data_filter_testcase': ['filter_data_filter_testcase', 'Tests for filter_data. ', [['filter/data/tests','filter_test.php',31]], 0],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323]};
CONST_DATA={
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'MOODLE_INTERNAL': ['MOODLE_INTERNAL', '', [['admin/cli','install.php',140],['','install.php',93],['lib','setup.php',391]], 4153],
'SITEID': ['SITEID', '', [['admin/cli','install.php',219],['lib/db','install.php',87],['','install.php',242],['lib','setup.php',755]], 608],
'TEXTFILTER_ON': ['TEXTFILTER_ON', '', [['lib','filterlib.php',28]], 73]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
