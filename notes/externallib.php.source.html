<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /notes/externallib.php source</title>
    <link rel="stylesheet" href="../sample.css" type="text/css">
    <link rel="stylesheet" href="../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../';
subdir='notes';
filename='externallib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/notes/</a> -> <a href="externallib.php.html">externallib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="externallib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="externallib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * External notes API</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @package    core_notes</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @category   external</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @copyright  2011 Jerome Mouneyrac</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  
<a name="l27"><span class="linenum">  27</span></a>  require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/libdir.html">libdir</a>/externallib.php&quot;);
<a name="l28"><span class="linenum">  28</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../notes/lib.php.html">/notes/lib.php</a>");
<a name="l29"><span class="linenum">  29</span></a>  
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">/**</span>
<a name="l31"><span class="linenum">  31</span></a>  <span class="comment"> * Notes external functions</span>
<a name="l32"><span class="linenum">  32</span></a>  <span class="comment"> *</span>
<a name="l33"><span class="linenum">  33</span></a>  <span class="comment"> * @package    core_notes</span>
<a name="l34"><span class="linenum">  34</span></a>  <span class="comment"> * @category   external</span>
<a name="l35"><span class="linenum">  35</span></a>  <span class="comment"> * @copyright  2011 Jerome Mouneyrac</span>
<a name="l36"><span class="linenum">  36</span></a>  <span class="comment"> * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l37"><span class="linenum">  37</span></a>  <span class="comment"> * @since Moodle 2.2</span>
<a name="l38"><span class="linenum">  38</span></a>  <span class="comment"> */</span>
<a name="l39"><span class="linenum">  39</span></a>  <span class="keyword">class </span><a class="class" onClick="logClass('core_notes_external')" href="../_classes/core_notes_external.html" onMouseOver="classPopup(event,'core_notes_external')">core_notes_external</a> <span class="keyword">extends</span> <a class="class" onClick="logClass('external_api')" href="../_classes/external_api.html" onMouseOver="classPopup(event,'external_api')">external_api</a> {
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>      <span class="comment">/**</span>
<a name="l42"><span class="linenum">  42</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">     *</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment">     * @since Moodle 2.2</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment">     */</span>
<a name="l47"><span class="linenum">  47</span></a>      public static function <a class="function" onClick="logFunction('create_notes_parameters')" href="../_functions/create_notes_parameters.html" onMouseOver="funcPopup(event,'create_notes_parameters')">create_notes_parameters</a>() {
<a name="l48"><span class="linenum">  48</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l49"><span class="linenum">  49</span></a>              array(
<a name="l50"><span class="linenum">  50</span></a>                  'notes' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l51"><span class="linenum">  51</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l52"><span class="linenum">  52</span></a>                          array(
<a name="l53"><span class="linenum">  53</span></a>                              'userid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'id of the user the note is about'),
<a name="l54"><span class="linenum">  54</span></a>                              'publishstate' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>, '\'personal\', \'course\' or \'site\''),
<a name="l55"><span class="linenum">  55</span></a>                              'courseid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'course id of the note (in Moodle a note can only be created into a course, even for site and personal notes)'),
<a name="l56"><span class="linenum">  56</span></a>                              'text' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'the text of the message - text or HTML'),
<a name="l57"><span class="linenum">  57</span></a>                              'format' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_format_value')" href="../_classes/external_format_value.html" onMouseOver="classPopup(event,'external_format_value')">external_format_value</a>('text', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>),
<a name="l58"><span class="linenum">  58</span></a>                              'clientnoteid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHANUMEXT')" href="../_constants/PARAM_ALPHANUMEXT.html" onMouseOver="constPopup(event,'PARAM_ALPHANUMEXT')">PARAM_ALPHANUMEXT</a>, 'your own client id for the note. If this id is provided, the fail message id will be returned to you', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l59"><span class="linenum">  59</span></a>                          )
<a name="l60"><span class="linenum">  60</span></a>                      )
<a name="l61"><span class="linenum">  61</span></a>                  )
<a name="l62"><span class="linenum">  62</span></a>              )
<a name="l63"><span class="linenum">  63</span></a>          );
<a name="l64"><span class="linenum">  64</span></a>      }
<a name="l65"><span class="linenum">  65</span></a>  
<a name="l66"><span class="linenum">  66</span></a>      <span class="comment">/**</span>
<a name="l67"><span class="linenum">  67</span></a>  <span class="comment">     * Create notes about some users</span>
<a name="l68"><span class="linenum">  68</span></a>  <span class="comment">     * Note: code should be matching the /notes/edit.php checks</span>
<a name="l69"><span class="linenum">  69</span></a>  <span class="comment">     * and the /user/addnote.php checks. (they are similar cheks)</span>
<a name="l70"><span class="linenum">  70</span></a>  <span class="comment">     *</span>
<a name="l71"><span class="linenum">  71</span></a>  <span class="comment">     * @param array $notes  An array of notes to create.</span>
<a name="l72"><span class="linenum">  72</span></a>  <span class="comment">     * @return array (success infos and fail infos)</span>
<a name="l73"><span class="linenum">  73</span></a>  <span class="comment">     * @since Moodle 2.2</span>
<a name="l74"><span class="linenum">  74</span></a>  <span class="comment">     */</span>
<a name="l75"><span class="linenum">  75</span></a>      public static function <a class="function" onClick="logFunction('create_notes')" href="../_functions/create_notes.html" onMouseOver="funcPopup(event,'create_notes')">create_notes</a>(<a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../_variables/notes.html">$notes</a> = array()) {
<a name="l76"><span class="linenum">  76</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('create_notes_parameters')" href="../_functions/create_notes_parameters.html" onMouseOver="funcPopup(event,'create_notes_parameters')">create_notes_parameters</a>(), array('notes' =&gt; <a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../_variables/notes.html">$notes</a>));
<a name="l79"><span class="linenum">  79</span></a>  
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment">        // Check if note system is enabled.</span>
<a name="l81"><span class="linenum">  81</span></a>          if (!<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablenotes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enablenotes.html">enablenotes</a>) {
<a name="l82"><span class="linenum">  82</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notesdisabled', 'notes');
<a name="l83"><span class="linenum">  83</span></a>          }
<a name="l84"><span class="linenum">  84</span></a>  
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment">        // Retrieve all courses.</span>
<a name="l86"><span class="linenum">  86</span></a>          <a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a> = array();
<a name="l87"><span class="linenum">  87</span></a>          foreach (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['notes'] as <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>) {
<a name="l88"><span class="linenum">  88</span></a>              <a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a>[] = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['courseid'];
<a name="l89"><span class="linenum">  89</span></a>          }
<a name="l90"><span class="linenum">  90</span></a>          <a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_list')" href="../_functions/get_records_list.html" onMouseOver="funcPopup(event,'get_records_list')">get_records_list</a>(&quot;course&quot;, &quot;id&quot;, <a class="var it2413" onMouseOver="hilite(2413)" onMouseOut="lolite()" onClick="logVariable('courseids')" href="../_variables/courseids.html">$courseids</a>);
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>  <span class="comment">        // Retrieve all users of the notes.</span>
<a name="l93"><span class="linenum">  93</span></a>          <a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a> = array();
<a name="l94"><span class="linenum">  94</span></a>          foreach (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['notes'] as <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>) {
<a name="l95"><span class="linenum">  95</span></a>              <a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a>[] = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['userid'];
<a name="l96"><span class="linenum">  96</span></a>          }
<a name="l97"><span class="linenum">  97</span></a>          <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it15792" onMouseOver="hilite(15792)" onMouseOut="lolite()" onClick="logVariable('sqluserids')" href="../_variables/sqluserids.html">$sqluserids</a>, <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('sqlparams')" href="../_variables/sqlparams.html">$sqlparams</a>) = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_in_or_equal')" href="../_functions/get_in_or_equal.html" onMouseOver="funcPopup(event,'get_in_or_equal')">get_in_or_equal</a>(<a class="var it4024" onMouseOver="hilite(4024)" onMouseOut="lolite()" onClick="logVariable('userids')" href="../_variables/userids.html">$userids</a>, <a class="constant" onClick="logConstant('SQL_PARAMS_NAMED')" href="../_constants/SQL_PARAMS_NAMED.html" onMouseOver="constPopup(event,'SQL_PARAMS_NAMED')">SQL_PARAMS_NAMED</a>, 'userid_');
<a name="l98"><span class="linenum">  98</span></a>          <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>(&quot;user&quot;, &quot;id &quot; . <a class="var it15792" onMouseOver="hilite(15792)" onMouseOut="lolite()" onClick="logVariable('sqluserids')" href="../_variables/sqluserids.html">$sqluserids</a> . &quot; AND deleted = 0&quot;, <a class="var it6048" onMouseOver="hilite(6048)" onMouseOut="lolite()" onClick="logVariable('sqlparams')" href="../_variables/sqlparams.html">$sqlparams</a>);
<a name="l99"><span class="linenum">  99</span></a>  
<a name="l100"><span class="linenum"> 100</span></a>          <a class="var it23140" onMouseOver="hilite(23140)" onMouseOut="lolite()" onClick="logVariable('resultnotes')" href="../_variables/resultnotes.html">$resultnotes</a> = array();
<a name="l101"><span class="linenum"> 101</span></a>          foreach (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['notes'] as <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>) {
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>              <a class="var it432" onMouseOver="hilite(432)" onMouseOut="lolite()" onClick="logVariable('success')" href="../_variables/success.html">$success</a> = true;
<a name="l104"><span class="linenum"> 104</span></a>              <a class="var it23141" onMouseOver="hilite(23141)" onMouseOut="lolite()" onClick="logVariable('resultnote')" href="../_variables/resultnote.html">$resultnote</a> = array(); <span class="comment">// The infos about the success of the operation.</span>
<a name="l105"><span class="linenum"> 105</span></a>  
<a name="l106"><span class="linenum"> 106</span></a>  <span class="comment">            // Check the course exists.</span>
<a name="l107"><span class="linenum"> 107</span></a>              if (empty(<a class="var it566" onMouseOver="hilite(566)" onMouseOut="lolite()" onClick="logVariable('courses')" href="../_variables/courses.html">$courses</a>[<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['courseid']])) {
<a name="l108"><span class="linenum"> 108</span></a>                  <a class="var it432" onMouseOver="hilite(432)" onMouseOut="lolite()" onClick="logVariable('success')" href="../_variables/success.html">$success</a> = false;
<a name="l109"><span class="linenum"> 109</span></a>                  <a class="var it2692" onMouseOver="hilite(2692)" onMouseOut="lolite()" onClick="logVariable('errormessage')" href="../_variables/errormessage.html">$errormessage</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invalidcourseid', 'error');
<a name="l110"><span class="linenum"> 110</span></a>              } else {
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">                // Ensure the current user is allowed to run this function.</span>
<a name="l112"><span class="linenum"> 112</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['courseid']);
<a name="l113"><span class="linenum"> 113</span></a>                  self::<a class="function" onClick="logFunction('validate_context')" href="../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l114"><span class="linenum"> 114</span></a>                  <a class="function" onClick="logFunction('require_capability')" href="../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/notes:manage', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l115"><span class="linenum"> 115</span></a>              }
<a name="l116"><span class="linenum"> 116</span></a>  
<a name="l117"><span class="linenum"> 117</span></a>  <span class="comment">            // Check the user exists.</span>
<a name="l118"><span class="linenum"> 118</span></a>              if (empty(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../_variables/users.html">$users</a>[<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['userid']])) {
<a name="l119"><span class="linenum"> 119</span></a>                  <a class="var it432" onMouseOver="hilite(432)" onMouseOut="lolite()" onClick="logVariable('success')" href="../_variables/success.html">$success</a> = false;
<a name="l120"><span class="linenum"> 120</span></a>                  <a class="var it2692" onMouseOver="hilite(2692)" onMouseOut="lolite()" onClick="logVariable('errormessage')" href="../_variables/errormessage.html">$errormessage</a> = <a class="function" onClick="logFunction('get_string')" href="../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('invaliduserid', 'notes', <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['userid']);
<a name="l121"><span class="linenum"> 121</span></a>              }
<a name="l122"><span class="linenum"> 122</span></a>  
<a name="l123"><span class="linenum"> 123</span></a>  <span class="comment">            // Build the resultnote.</span>
<a name="l124"><span class="linenum"> 124</span></a>              if (isset(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['clientnoteid'])) {
<a name="l125"><span class="linenum"> 125</span></a>                  <a class="var it23141" onMouseOver="hilite(23141)" onMouseOut="lolite()" onClick="logVariable('resultnote')" href="../_variables/resultnote.html">$resultnote</a>['clientnoteid'] = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['clientnoteid'];
<a name="l126"><span class="linenum"> 126</span></a>              }
<a name="l127"><span class="linenum"> 127</span></a>  
<a name="l128"><span class="linenum"> 128</span></a>              if (<a class="var it432" onMouseOver="hilite(432)" onMouseOut="lolite()" onClick="logVariable('success')" href="../_variables/success.html">$success</a>) {
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment">                // Now we can create the note.</span>
<a name="l130"><span class="linenum"> 130</span></a>                  <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a> = new stdClass;
<a name="l131"><span class="linenum"> 131</span></a>                  <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('courseid')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['courseid'];
<a name="l132"><span class="linenum"> 132</span></a>                  <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('userid')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a> = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['userid'];
<a name="l133"><span class="linenum"> 133</span></a>  <span class="comment">                // Need to support 'html' and 'text' format values for backward compatibility.</span>
<a name="l134"><span class="linenum"> 134</span></a>                  switch (<a class="phpfunction" onClick="logFunction('strtolower')" href="../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['format'])) {
<a name="l135"><span class="linenum"> 135</span></a>                      case 'html':
<a name="l136"><span class="linenum"> 136</span></a>                          <a class="var it18301" onMouseOver="hilite(18301)" onMouseOut="lolite()" onClick="logVariable('textformat')" href="../_variables/textformat.html">$textformat</a> = <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>;
<a name="l137"><span class="linenum"> 137</span></a>                          break;
<a name="l138"><span class="linenum"> 138</span></a>                      case 'text':
<a name="l139"><span class="linenum"> 139</span></a>                          <a class="var it18301" onMouseOver="hilite(18301)" onMouseOut="lolite()" onClick="logVariable('textformat')" href="../_variables/textformat.html">$textformat</a> = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l140"><span class="linenum"> 140</span></a>                      default:
<a name="l141"><span class="linenum"> 141</span></a>                          <a class="var it18301" onMouseOver="hilite(18301)" onMouseOut="lolite()" onClick="logVariable('textformat')" href="../_variables/textformat.html">$textformat</a> = <a class="function" onClick="logFunction('external_validate_format')" href="../_functions/external_validate_format.html" onMouseOver="funcPopup(event,'external_validate_format')">external_validate_format</a>(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['format']);
<a name="l142"><span class="linenum"> 142</span></a>                          break;
<a name="l143"><span class="linenum"> 143</span></a>                  }
<a name="l144"><span class="linenum"> 144</span></a>                  <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('content')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/content.html">content</a> = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['text'];
<a name="l145"><span class="linenum"> 145</span></a>                  <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('format')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/format.html">format</a> = <a class="var it18301" onMouseOver="hilite(18301)" onMouseOut="lolite()" onClick="logVariable('textformat')" href="../_variables/textformat.html">$textformat</a>;
<a name="l146"><span class="linenum"> 146</span></a>  
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment">                // Get the state ('personal', 'course', 'site').</span>
<a name="l148"><span class="linenum"> 148</span></a>                  switch (<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['publishstate']) {
<a name="l149"><span class="linenum"> 149</span></a>                      case 'personal':
<a name="l150"><span class="linenum"> 150</span></a>                          <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('publishstate')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/publishstate.html">publishstate</a> = <a class="constant" onClick="logConstant('NOTES_STATE_DRAFT')" href="../_constants/NOTES_STATE_DRAFT.html" onMouseOver="constPopup(event,'NOTES_STATE_DRAFT')">NOTES_STATE_DRAFT</a>;
<a name="l151"><span class="linenum"> 151</span></a>                          break;
<a name="l152"><span class="linenum"> 152</span></a>                      case 'course':
<a name="l153"><span class="linenum"> 153</span></a>                          <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('publishstate')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/publishstate.html">publishstate</a> = <a class="constant" onClick="logConstant('NOTES_STATE_PUBLIC')" href="../_constants/NOTES_STATE_PUBLIC.html" onMouseOver="constPopup(event,'NOTES_STATE_PUBLIC')">NOTES_STATE_PUBLIC</a>;
<a name="l154"><span class="linenum"> 154</span></a>                          break;
<a name="l155"><span class="linenum"> 155</span></a>                      case 'site':
<a name="l156"><span class="linenum"> 156</span></a>                          <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('publishstate')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/publishstate.html">publishstate</a> = <a class="constant" onClick="logConstant('NOTES_STATE_SITE')" href="../_constants/NOTES_STATE_SITE.html" onMouseOver="constPopup(event,'NOTES_STATE_SITE')">NOTES_STATE_SITE</a>;
<a name="l157"><span class="linenum"> 157</span></a>                          <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('courseid')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> = <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>;
<a name="l158"><span class="linenum"> 158</span></a>                          break;
<a name="l159"><span class="linenum"> 159</span></a>                      default:
<a name="l160"><span class="linenum"> 160</span></a>                          break;
<a name="l161"><span class="linenum"> 161</span></a>                  }
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>  <span class="comment">                // TODO MDL-31119 performance improvement - if possible create a bulk functions for saving multiple notes at once</span>
<a name="l164"><span class="linenum"> 164</span></a>                  if (<a class="function" onClick="logFunction('note_save')" href="../_functions/note_save.html" onMouseOver="funcPopup(event,'note_save')">note_save</a>(<a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>)) { // Note_save attribut an id in case of success.
<a name="l165"><span class="linenum"> 165</span></a>                      <a class="var it432" onMouseOver="hilite(432)" onMouseOut="lolite()" onClick="logVariable('success')" href="../_variables/success.html">$success</a> = <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('id')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l166"><span class="linenum"> 166</span></a>                  }
<a name="l167"><span class="linenum"> 167</span></a>  
<a name="l168"><span class="linenum"> 168</span></a>                  <a class="var it23141" onMouseOver="hilite(23141)" onMouseOut="lolite()" onClick="logVariable('resultnote')" href="../_variables/resultnote.html">$resultnote</a>['noteid'] = <a class="var it432" onMouseOver="hilite(432)" onMouseOut="lolite()" onClick="logVariable('success')" href="../_variables/success.html">$success</a>;
<a name="l169"><span class="linenum"> 169</span></a>              } else {
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment">                // WARNINGS: for backward compatibility we return this errormessage.</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment">                //          We should have thrown exceptions as these errors prevent results to be returned.</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment">                // See http://docs.moodle.org/dev/Errors_handling_in_web_services#When_to_send_a_warning_on_the_server_side .</span>
<a name="l173"><span class="linenum"> 173</span></a>                  <a class="var it23141" onMouseOver="hilite(23141)" onMouseOut="lolite()" onClick="logVariable('resultnote')" href="../_variables/resultnote.html">$resultnote</a>['noteid'] = -1;
<a name="l174"><span class="linenum"> 174</span></a>                  <a class="var it23141" onMouseOver="hilite(23141)" onMouseOut="lolite()" onClick="logVariable('resultnote')" href="../_variables/resultnote.html">$resultnote</a>['errormessage'] = <a class="var it2692" onMouseOver="hilite(2692)" onMouseOut="lolite()" onClick="logVariable('errormessage')" href="../_variables/errormessage.html">$errormessage</a>;
<a name="l175"><span class="linenum"> 175</span></a>              }
<a name="l176"><span class="linenum"> 176</span></a>  
<a name="l177"><span class="linenum"> 177</span></a>              <a class="var it23140" onMouseOver="hilite(23140)" onMouseOut="lolite()" onClick="logVariable('resultnotes')" href="../_variables/resultnotes.html">$resultnotes</a>[] = <a class="var it23141" onMouseOver="hilite(23141)" onMouseOut="lolite()" onClick="logVariable('resultnote')" href="../_variables/resultnote.html">$resultnote</a>;
<a name="l178"><span class="linenum"> 178</span></a>          }
<a name="l179"><span class="linenum"> 179</span></a>  
<a name="l180"><span class="linenum"> 180</span></a>          return <a class="var it23140" onMouseOver="hilite(23140)" onMouseOut="lolite()" onClick="logVariable('resultnotes')" href="../_variables/resultnotes.html">$resultnotes</a>;
<a name="l181"><span class="linenum"> 181</span></a>      }
<a name="l182"><span class="linenum"> 182</span></a>  
<a name="l183"><span class="linenum"> 183</span></a>      <span class="comment">/**</span>
<a name="l184"><span class="linenum"> 184</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l185"><span class="linenum"> 185</span></a>  <span class="comment">     *</span>
<a name="l186"><span class="linenum"> 186</span></a>  <span class="comment">     * @return external_description</span>
<a name="l187"><span class="linenum"> 187</span></a>  <span class="comment">     * @since Moodle 2.2</span>
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">     */</span>
<a name="l189"><span class="linenum"> 189</span></a>      public static function <a class="function" onClick="logFunction('create_notes_returns')" href="../_functions/create_notes_returns.html" onMouseOver="funcPopup(event,'create_notes_returns')">create_notes_returns</a>() {
<a name="l190"><span class="linenum"> 190</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l191"><span class="linenum"> 191</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l192"><span class="linenum"> 192</span></a>                  array(
<a name="l193"><span class="linenum"> 193</span></a>                      'clientnoteid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHANUMEXT')" href="../_constants/PARAM_ALPHANUMEXT.html" onMouseOver="constPopup(event,'PARAM_ALPHANUMEXT')">PARAM_ALPHANUMEXT</a>, 'your own id for the note', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l194"><span class="linenum"> 194</span></a>                      'noteid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'ID of the created note when successful, -1 when failed'),
<a name="l195"><span class="linenum"> 195</span></a>                      'errormessage' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_TEXT')" href="../_constants/PARAM_TEXT.html" onMouseOver="constPopup(event,'PARAM_TEXT')">PARAM_TEXT</a>, 'error message - if failed', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>)
<a name="l196"><span class="linenum"> 196</span></a>                  )
<a name="l197"><span class="linenum"> 197</span></a>              )
<a name="l198"><span class="linenum"> 198</span></a>          );
<a name="l199"><span class="linenum"> 199</span></a>      }
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>      <span class="comment">/**</span>
<a name="l202"><span class="linenum"> 202</span></a>  <span class="comment">     * Returns description of delete_notes parameters</span>
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">     *</span>
<a name="l204"><span class="linenum"> 204</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l206"><span class="linenum"> 206</span></a>  <span class="comment">     */</span>
<a name="l207"><span class="linenum"> 207</span></a>      public static function <a class="function" onClick="logFunction('delete_notes_parameters')" href="../_functions/delete_notes_parameters.html" onMouseOver="funcPopup(event,'delete_notes_parameters')">delete_notes_parameters</a>() {
<a name="l208"><span class="linenum"> 208</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l209"><span class="linenum"> 209</span></a>              array(
<a name="l210"><span class="linenum"> 210</span></a>                  &quot;notes&quot;=&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l211"><span class="linenum"> 211</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'ID of the note to be deleted'), 'Array of Note Ids to be deleted.'
<a name="l212"><span class="linenum"> 212</span></a>                  )
<a name="l213"><span class="linenum"> 213</span></a>              )
<a name="l214"><span class="linenum"> 214</span></a>          );
<a name="l215"><span class="linenum"> 215</span></a>      }
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>      <span class="comment">/**</span>
<a name="l218"><span class="linenum"> 218</span></a>  <span class="comment">     * Delete notes about users.</span>
<a name="l219"><span class="linenum"> 219</span></a>  <span class="comment">     * Note: code should be matching the /notes/delete.php checks.</span>
<a name="l220"><span class="linenum"> 220</span></a>  <span class="comment">     *</span>
<a name="l221"><span class="linenum"> 221</span></a>  <span class="comment">     * @param array $notes An array of ids for the notes to delete.</span>
<a name="l222"><span class="linenum"> 222</span></a>  <span class="comment">     * @return null</span>
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment">     */</span>
<a name="l225"><span class="linenum"> 225</span></a>      public static function <a class="function" onClick="logFunction('delete_notes')" href="../_functions/delete_notes.html" onMouseOver="funcPopup(event,'delete_notes')">delete_notes</a>(<a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../_variables/notes.html">$notes</a> = array()) {
<a name="l226"><span class="linenum"> 226</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l227"><span class="linenum"> 227</span></a>  
<a name="l228"><span class="linenum"> 228</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('delete_notes_parameters')" href="../_functions/delete_notes_parameters.html" onMouseOver="funcPopup(event,'delete_notes_parameters')">delete_notes_parameters</a>(), array('notes' =&gt; <a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../_variables/notes.html">$notes</a>));
<a name="l229"><span class="linenum"> 229</span></a>  
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment">        // Check if note system is enabled.</span>
<a name="l231"><span class="linenum"> 231</span></a>          if (!<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablenotes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enablenotes.html">enablenotes</a>) {
<a name="l232"><span class="linenum"> 232</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notesdisabled', 'notes');
<a name="l233"><span class="linenum"> 233</span></a>          }
<a name="l234"><span class="linenum"> 234</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../_variables/warnings.html">$warnings</a> = array();
<a name="l235"><span class="linenum"> 235</span></a>          foreach (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['notes'] as <a class="var it7655" onMouseOver="hilite(7655)" onMouseOut="lolite()" onClick="logVariable('noteid')" href="../_variables/noteid.html">$noteid</a>) {
<a name="l236"><span class="linenum"> 236</span></a>              <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a> = <a class="function" onClick="logFunction('note_load')" href="../_functions/note_load.html" onMouseOver="funcPopup(event,'note_load')">note_load</a>(<a class="var it7655" onMouseOver="hilite(7655)" onMouseOut="lolite()" onClick="logVariable('noteid')" href="../_variables/noteid.html">$noteid</a>);
<a name="l237"><span class="linenum"> 237</span></a>              if (isset(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>-&gt;<a onClick="logVariable('id')" class="var it43511" onMouseOver="hilite(43511)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l238"><span class="linenum"> 238</span></a>  <span class="comment">                // Ensure the current user is allowed to run this function.</span>
<a name="l239"><span class="linenum"> 239</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>-&gt;<a onClick="logVariable('courseid')" class="var it43511" onMouseOver="hilite(43511)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>);
<a name="l240"><span class="linenum"> 240</span></a>                  self::<a class="function" onClick="logFunction('validate_context')" href="../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l241"><span class="linenum"> 241</span></a>                  <a class="function" onClick="logFunction('require_capability')" href="../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/notes:manage', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l242"><span class="linenum"> 242</span></a>                  <a class="function" onClick="logFunction('note_delete')" href="../_functions/note_delete.html" onMouseOver="funcPopup(event,'note_delete')">note_delete</a>(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>);
<a name="l243"><span class="linenum"> 243</span></a>              } else {
<a name="l244"><span class="linenum"> 244</span></a>                  <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../_variables/warnings.html">$warnings</a>[] = array('item'=&gt;'note', 'itemid'=&gt;<a class="var it7655" onMouseOver="hilite(7655)" onMouseOut="lolite()" onClick="logVariable('noteid')" href="../_variables/noteid.html">$noteid</a>, 'warningcode'=&gt;'badid', 'message'=&gt;'Note does not exist');
<a name="l245"><span class="linenum"> 245</span></a>              }
<a name="l246"><span class="linenum"> 246</span></a>          }
<a name="l247"><span class="linenum"> 247</span></a>          return <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../_variables/warnings.html">$warnings</a>;
<a name="l248"><span class="linenum"> 248</span></a>      }
<a name="l249"><span class="linenum"> 249</span></a>  
<a name="l250"><span class="linenum"> 250</span></a>      <span class="comment">/**</span>
<a name="l251"><span class="linenum"> 251</span></a>  <span class="comment">     * Returns description of delete_notes result value.</span>
<a name="l252"><span class="linenum"> 252</span></a>  <span class="comment">     *</span>
<a name="l253"><span class="linenum"> 253</span></a>  <span class="comment">     * @return external_description</span>
<a name="l254"><span class="linenum"> 254</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l255"><span class="linenum"> 255</span></a>  <span class="comment">     */</span>
<a name="l256"><span class="linenum"> 256</span></a>      public static function <a class="function" onClick="logFunction('delete_notes_returns')" href="../_functions/delete_notes_returns.html" onMouseOver="funcPopup(event,'delete_notes_returns')">delete_notes_returns</a>() {
<a name="l257"><span class="linenum"> 257</span></a>          return  <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>('item is always \'note\'',
<a name="l258"><span class="linenum"> 258</span></a>                              'When errorcode is savedfailed the note could not be modified.' .
<a name="l259"><span class="linenum"> 259</span></a>                              'When errorcode is badparam, an incorrect parameter was provided.' .
<a name="l260"><span class="linenum"> 260</span></a>                              'When errorcode is badid, the note does not exist',
<a name="l261"><span class="linenum"> 261</span></a>                              'errorcode can be badparam (incorrect parameter), savedfailed (could not be modified), or badid (note does not exist)');
<a name="l262"><span class="linenum"> 262</span></a>  
<a name="l263"><span class="linenum"> 263</span></a>      }
<a name="l264"><span class="linenum"> 264</span></a>  
<a name="l265"><span class="linenum"> 265</span></a>      <span class="comment">/**</span>
<a name="l266"><span class="linenum"> 266</span></a>  <span class="comment">     * Returns description of get_notes parameters.</span>
<a name="l267"><span class="linenum"> 267</span></a>  <span class="comment">     *</span>
<a name="l268"><span class="linenum"> 268</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l269"><span class="linenum"> 269</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l270"><span class="linenum"> 270</span></a>  <span class="comment">     */</span>
<a name="l271"><span class="linenum"> 271</span></a>      public static function <a class="function" onClick="logFunction('get_notes_parameters')" href="../_functions/get_notes_parameters.html" onMouseOver="funcPopup(event,'get_notes_parameters')">get_notes_parameters</a>() {
<a name="l272"><span class="linenum"> 272</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l273"><span class="linenum"> 273</span></a>              array(
<a name="l274"><span class="linenum"> 274</span></a>                  &quot;notes&quot;=&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l275"><span class="linenum"> 275</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'ID of the note to be retrieved'), 'Array of Note Ids to be retrieved.'
<a name="l276"><span class="linenum"> 276</span></a>                  )
<a name="l277"><span class="linenum"> 277</span></a>              )
<a name="l278"><span class="linenum"> 278</span></a>          );
<a name="l279"><span class="linenum"> 279</span></a>      }
<a name="l280"><span class="linenum"> 280</span></a>  
<a name="l281"><span class="linenum"> 281</span></a>      <span class="comment">/**</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment">     * Get notes about users.</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">     *</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment">     * @param array $notes An array of ids for the notes to retrieve.</span>
<a name="l285"><span class="linenum"> 285</span></a>  <span class="comment">     * @return null</span>
<a name="l286"><span class="linenum"> 286</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l287"><span class="linenum"> 287</span></a>  <span class="comment">     */</span>
<a name="l288"><span class="linenum"> 288</span></a>      public static function <a class="function" onClick="logFunction('get_notes')" href="../_functions/get_notes.html" onMouseOver="funcPopup(event,'get_notes')">get_notes</a>(<a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../_variables/notes.html">$notes</a>) {
<a name="l289"><span class="linenum"> 289</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_notes_parameters')" href="../_functions/get_notes_parameters.html" onMouseOver="funcPopup(event,'get_notes_parameters')">get_notes_parameters</a>(), array('notes' =&gt; <a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../_variables/notes.html">$notes</a>));
<a name="l292"><span class="linenum"> 292</span></a>  <span class="comment">        // Check if note system is enabled.</span>
<a name="l293"><span class="linenum"> 293</span></a>          if (!<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablenotes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enablenotes.html">enablenotes</a>) {
<a name="l294"><span class="linenum"> 294</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notesdisabled', 'notes');
<a name="l295"><span class="linenum"> 295</span></a>          }
<a name="l296"><span class="linenum"> 296</span></a>          <a class="var it23140" onMouseOver="hilite(23140)" onMouseOut="lolite()" onClick="logVariable('resultnotes')" href="../_variables/resultnotes.html">$resultnotes</a> = array();
<a name="l297"><span class="linenum"> 297</span></a>          foreach (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['notes'] as <a class="var it7655" onMouseOver="hilite(7655)" onMouseOut="lolite()" onClick="logVariable('noteid')" href="../_variables/noteid.html">$noteid</a>) {
<a name="l298"><span class="linenum"> 298</span></a>              <a class="var it23141" onMouseOver="hilite(23141)" onMouseOut="lolite()" onClick="logVariable('resultnote')" href="../_variables/resultnote.html">$resultnote</a> = array();
<a name="l299"><span class="linenum"> 299</span></a>  
<a name="l300"><span class="linenum"> 300</span></a>              <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a> = <a class="function" onClick="logFunction('note_load')" href="../_functions/note_load.html" onMouseOver="funcPopup(event,'note_load')">note_load</a>(<a class="var it7655" onMouseOver="hilite(7655)" onMouseOut="lolite()" onClick="logVariable('noteid')" href="../_variables/noteid.html">$noteid</a>);
<a name="l301"><span class="linenum"> 301</span></a>              if (isset(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>-&gt;<a onClick="logVariable('id')" class="var it43511" onMouseOver="hilite(43511)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment">                // Ensure the current user is allowed to run this function.</span>
<a name="l303"><span class="linenum"> 303</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>-&gt;<a onClick="logVariable('courseid')" class="var it43511" onMouseOver="hilite(43511)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>);
<a name="l304"><span class="linenum"> 304</span></a>                  self::<a class="function" onClick="logFunction('validate_context')" href="../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l305"><span class="linenum"> 305</span></a>                  <a class="function" onClick="logFunction('require_capability')" href="../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/notes:view', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l306"><span class="linenum"> 306</span></a>                  <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it23143" onMouseOver="hilite(23143)" onMouseOut="lolite()" onClick="logVariable('gotnote')" href="../_variables/gotnote.html">$gotnote</a>['text'], <a class="var it23143" onMouseOver="hilite(23143)" onMouseOut="lolite()" onClick="logVariable('gotnote')" href="../_variables/gotnote.html">$gotnote</a>['format']) = <a class="function" onClick="logFunction('external_format_text')" href="../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>-&gt;<a onClick="logVariable('content')" class="var it43511" onMouseOver="hilite(43511)" onMouseOut="lolite()" href="../_variables/content.html">content</a>,
<a name="l307"><span class="linenum"> 307</span></a>                                                                                    <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>-&gt;<a onClick="logVariable('format')" class="var it43511" onMouseOver="hilite(43511)" onMouseOut="lolite()" href="../_variables/format.html">format</a>,
<a name="l308"><span class="linenum"> 308</span></a>                                                                                    <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l309"><span class="linenum"> 309</span></a>                                                                                    'notes',
<a name="l310"><span class="linenum"> 310</span></a>                                                                                    '',
<a name="l311"><span class="linenum"> 311</span></a>                                                                                    '');
<a name="l312"><span class="linenum"> 312</span></a>                  <a class="var it23143" onMouseOver="hilite(23143)" onMouseOut="lolite()" onClick="logVariable('gotnote')" href="../_variables/gotnote.html">$gotnote</a>['noteid'] = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>-&gt;<a onClick="logVariable('id')" class="var it43511" onMouseOver="hilite(43511)" onMouseOut="lolite()" href="../_variables/id.html">id</a>;
<a name="l313"><span class="linenum"> 313</span></a>                  <a class="var it23143" onMouseOver="hilite(23143)" onMouseOut="lolite()" onClick="logVariable('gotnote')" href="../_variables/gotnote.html">$gotnote</a>['userid'] = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>-&gt;<a onClick="logVariable('userid')" class="var it43511" onMouseOver="hilite(43511)" onMouseOut="lolite()" href="../_variables/userid.html">userid</a>;
<a name="l314"><span class="linenum"> 314</span></a>                  <a class="var it23143" onMouseOver="hilite(23143)" onMouseOut="lolite()" onClick="logVariable('gotnote')" href="../_variables/gotnote.html">$gotnote</a>['publishstate'] = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>-&gt;<a onClick="logVariable('publishstate')" class="var it43511" onMouseOver="hilite(43511)" onMouseOut="lolite()" href="../_variables/publishstate.html">publishstate</a>;
<a name="l315"><span class="linenum"> 315</span></a>                  <a class="var it23143" onMouseOver="hilite(23143)" onMouseOut="lolite()" onClick="logVariable('gotnote')" href="../_variables/gotnote.html">$gotnote</a>['courseid'] = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>-&gt;<a onClick="logVariable('courseid')" class="var it43511" onMouseOver="hilite(43511)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>;
<a name="l316"><span class="linenum"> 316</span></a>                  <a class="var it23140" onMouseOver="hilite(23140)" onMouseOut="lolite()" onClick="logVariable('resultnotes')" href="../_variables/resultnotes.html">$resultnotes</a>[&quot;notes&quot;][] = <a class="var it23143" onMouseOver="hilite(23143)" onMouseOut="lolite()" onClick="logVariable('gotnote')" href="../_variables/gotnote.html">$gotnote</a>;
<a name="l317"><span class="linenum"> 317</span></a>              } else {
<a name="l318"><span class="linenum"> 318</span></a>                  <a class="var it23140" onMouseOver="hilite(23140)" onMouseOut="lolite()" onClick="logVariable('resultnotes')" href="../_variables/resultnotes.html">$resultnotes</a>[&quot;warnings&quot;][] = array('item' =&gt; 'note',
<a name="l319"><span class="linenum"> 319</span></a>                                                     'itemid' =&gt; <a class="var it7655" onMouseOver="hilite(7655)" onMouseOut="lolite()" onClick="logVariable('noteid')" href="../_variables/noteid.html">$noteid</a>,
<a name="l320"><span class="linenum"> 320</span></a>                                                     'warningcode' =&gt; 'badid',
<a name="l321"><span class="linenum"> 321</span></a>                                                     'message' =&gt; 'Note does not exist');
<a name="l322"><span class="linenum"> 322</span></a>              }
<a name="l323"><span class="linenum"> 323</span></a>          }
<a name="l324"><span class="linenum"> 324</span></a>          return <a class="var it23140" onMouseOver="hilite(23140)" onMouseOut="lolite()" onClick="logVariable('resultnotes')" href="../_variables/resultnotes.html">$resultnotes</a>;
<a name="l325"><span class="linenum"> 325</span></a>      }
<a name="l326"><span class="linenum"> 326</span></a>  
<a name="l327"><span class="linenum"> 327</span></a>      <span class="comment">/**</span>
<a name="l328"><span class="linenum"> 328</span></a>  <span class="comment">     * Returns description of get_notes result value.</span>
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">     *</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment">     * @return external_description</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment">     */</span>
<a name="l333"><span class="linenum"> 333</span></a>      public static function <a class="function" onClick="logFunction('get_notes_returns')" href="../_functions/get_notes_returns.html" onMouseOver="funcPopup(event,'get_notes_returns')">get_notes_returns</a>() {
<a name="l334"><span class="linenum"> 334</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l335"><span class="linenum"> 335</span></a>              array(
<a name="l336"><span class="linenum"> 336</span></a>                  'notes' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l337"><span class="linenum"> 337</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l338"><span class="linenum"> 338</span></a>                          array(
<a name="l339"><span class="linenum"> 339</span></a>                              'noteid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'id of the note', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l340"><span class="linenum"> 340</span></a>                              'userid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'id of the user the note is about', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l341"><span class="linenum"> 341</span></a>                              'publishstate' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>, '\'personal\', \'course\' or \'site\'', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l342"><span class="linenum"> 342</span></a>                              'courseid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'course id of the note', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l343"><span class="linenum"> 343</span></a>                              'text' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'the text of the message - text or HTML', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l344"><span class="linenum"> 344</span></a>                              'format' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_format_value')" href="../_classes/external_format_value.html" onMouseOver="classPopup(event,'external_format_value')">external_format_value</a>('text', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>),
<a name="l345"><span class="linenum"> 345</span></a>                          ), 'note'
<a name="l346"><span class="linenum"> 346</span></a>                      )
<a name="l347"><span class="linenum"> 347</span></a>                   ),
<a name="l348"><span class="linenum"> 348</span></a>                   'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>('item is always \'note\'',
<a name="l349"><span class="linenum"> 349</span></a>                          'When errorcode is savedfailed the note could not be modified.' .
<a name="l350"><span class="linenum"> 350</span></a>                          'When errorcode is badparam, an incorrect parameter was provided.' .
<a name="l351"><span class="linenum"> 351</span></a>                          'When errorcode is badid, the note does not exist',
<a name="l352"><span class="linenum"> 352</span></a>                          'errorcode can be badparam (incorrect parameter), savedfailed (could not be modified), or badid (note does not exist)')
<a name="l353"><span class="linenum"> 353</span></a>              )
<a name="l354"><span class="linenum"> 354</span></a>          );
<a name="l355"><span class="linenum"> 355</span></a>      }
<a name="l356"><span class="linenum"> 356</span></a>  
<a name="l357"><span class="linenum"> 357</span></a>      <span class="comment">/**</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment">     * Returns description of update_notes parameters.</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">     *</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">     */</span>
<a name="l363"><span class="linenum"> 363</span></a>      public static function <a class="function" onClick="logFunction('update_notes_parameters')" href="../_functions/update_notes_parameters.html" onMouseOver="funcPopup(event,'update_notes_parameters')">update_notes_parameters</a>() {
<a name="l364"><span class="linenum"> 364</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l365"><span class="linenum"> 365</span></a>              array(
<a name="l366"><span class="linenum"> 366</span></a>                  'notes' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l367"><span class="linenum"> 367</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l368"><span class="linenum"> 368</span></a>                          array(
<a name="l369"><span class="linenum"> 369</span></a>                              'id' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'id of the note'),
<a name="l370"><span class="linenum"> 370</span></a>                              'publishstate' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>, '\'personal\', \'course\' or \'site\''),
<a name="l371"><span class="linenum"> 371</span></a>                              'text' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'the text of the message - text or HTML'),
<a name="l372"><span class="linenum"> 372</span></a>                              'format' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_format_value')" href="../_classes/external_format_value.html" onMouseOver="classPopup(event,'external_format_value')">external_format_value</a>('text', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>),
<a name="l373"><span class="linenum"> 373</span></a>                          )
<a name="l374"><span class="linenum"> 374</span></a>                      ), &quot;Array of Notes&quot;, <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, array()
<a name="l375"><span class="linenum"> 375</span></a>                  )
<a name="l376"><span class="linenum"> 376</span></a>              )
<a name="l377"><span class="linenum"> 377</span></a>          );
<a name="l378"><span class="linenum"> 378</span></a>      }
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>      <span class="comment">/**</span>
<a name="l381"><span class="linenum"> 381</span></a>  <span class="comment">     * Update notes about users.</span>
<a name="l382"><span class="linenum"> 382</span></a>  <span class="comment">     *</span>
<a name="l383"><span class="linenum"> 383</span></a>  <span class="comment">     * @param array $notes An array of ids for the notes to update.</span>
<a name="l384"><span class="linenum"> 384</span></a>  <span class="comment">     * @return array fail infos.</span>
<a name="l385"><span class="linenum"> 385</span></a>  <span class="comment">     * @since Moodle 2.2</span>
<a name="l386"><span class="linenum"> 386</span></a>  <span class="comment">     */</span>
<a name="l387"><span class="linenum"> 387</span></a>      public static function <a class="function" onClick="logFunction('update_notes')" href="../_functions/update_notes.html" onMouseOver="funcPopup(event,'update_notes')">update_notes</a>(<a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../_variables/notes.html">$notes</a> = array()) {
<a name="l388"><span class="linenum"> 388</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../_variables/DB.html">$DB</a>;
<a name="l389"><span class="linenum"> 389</span></a>  
<a name="l390"><span class="linenum"> 390</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('update_notes_parameters')" href="../_functions/update_notes_parameters.html" onMouseOver="funcPopup(event,'update_notes_parameters')">update_notes_parameters</a>(), array('notes' =&gt; <a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../_variables/notes.html">$notes</a>));
<a name="l391"><span class="linenum"> 391</span></a>  
<a name="l392"><span class="linenum"> 392</span></a>  <span class="comment">        // Check if note system is enabled.</span>
<a name="l393"><span class="linenum"> 393</span></a>          if (!<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablenotes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enablenotes.html">enablenotes</a>) {
<a name="l394"><span class="linenum"> 394</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notesdisabled', 'notes');
<a name="l395"><span class="linenum"> 395</span></a>          }
<a name="l396"><span class="linenum"> 396</span></a>  
<a name="l397"><span class="linenum"> 397</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../_variables/warnings.html">$warnings</a> = array();
<a name="l398"><span class="linenum"> 398</span></a>          foreach (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['notes'] as <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>) {
<a name="l399"><span class="linenum"> 399</span></a>              <a class="var it23144" onMouseOver="hilite(23144)" onMouseOut="lolite()" onClick="logVariable('notedetails')" href="../_variables/notedetails.html">$notedetails</a> = <a class="function" onClick="logFunction('note_load')" href="../_functions/note_load.html" onMouseOver="funcPopup(event,'note_load')">note_load</a>(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['id']);
<a name="l400"><span class="linenum"> 400</span></a>              if (isset(<a class="var it23144" onMouseOver="hilite(23144)" onMouseOut="lolite()" onClick="logVariable('notedetails')" href="../_variables/notedetails.html">$notedetails</a>-&gt;<a onClick="logVariable('id')" class="var it44946" onMouseOver="hilite(44946)" onMouseOut="lolite()" href="../_variables/id.html">id</a>)) {
<a name="l401"><span class="linenum"> 401</span></a>  <span class="comment">                // Ensure the current user is allowed to run this function.</span>
<a name="l402"><span class="linenum"> 402</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it23144" onMouseOver="hilite(23144)" onMouseOut="lolite()" onClick="logVariable('notedetails')" href="../_variables/notedetails.html">$notedetails</a>-&gt;<a onClick="logVariable('courseid')" class="var it44946" onMouseOver="hilite(44946)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a>);
<a name="l403"><span class="linenum"> 403</span></a>                  self::<a class="function" onClick="logFunction('validate_context')" href="../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l404"><span class="linenum"> 404</span></a>                  <a class="function" onClick="logFunction('require_capability')" href="../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/notes:manage', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l405"><span class="linenum"> 405</span></a>  
<a name="l406"><span class="linenum"> 406</span></a>                  <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a> = new stdClass;
<a name="l407"><span class="linenum"> 407</span></a>                  <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('id')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/id.html">id</a> = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['id'];
<a name="l408"><span class="linenum"> 408</span></a>                  <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('content')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/content.html">content</a> = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['text'];
<a name="l409"><span class="linenum"> 409</span></a>                  <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('format')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/format.html">format</a> = <a class="function" onClick="logFunction('external_validate_format')" href="../_functions/external_validate_format.html" onMouseOver="funcPopup(event,'external_validate_format')">external_validate_format</a>(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['format']);
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">                // Get the state ('personal', 'course', 'site').</span>
<a name="l411"><span class="linenum"> 411</span></a>                  switch (<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['publishstate']) {
<a name="l412"><span class="linenum"> 412</span></a>                      case 'personal':
<a name="l413"><span class="linenum"> 413</span></a>                          <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('publishstate')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/publishstate.html">publishstate</a> = <a class="constant" onClick="logConstant('NOTES_STATE_DRAFT')" href="../_constants/NOTES_STATE_DRAFT.html" onMouseOver="constPopup(event,'NOTES_STATE_DRAFT')">NOTES_STATE_DRAFT</a>;
<a name="l414"><span class="linenum"> 414</span></a>                          break;
<a name="l415"><span class="linenum"> 415</span></a>                      case 'course':
<a name="l416"><span class="linenum"> 416</span></a>                          <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('publishstate')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/publishstate.html">publishstate</a> = <a class="constant" onClick="logConstant('NOTES_STATE_PUBLIC')" href="../_constants/NOTES_STATE_PUBLIC.html" onMouseOver="constPopup(event,'NOTES_STATE_PUBLIC')">NOTES_STATE_PUBLIC</a>;
<a name="l417"><span class="linenum"> 417</span></a>                          break;
<a name="l418"><span class="linenum"> 418</span></a>                      case 'site':
<a name="l419"><span class="linenum"> 419</span></a>                          <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('publishstate')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/publishstate.html">publishstate</a> = <a class="constant" onClick="logConstant('NOTES_STATE_SITE')" href="../_constants/NOTES_STATE_SITE.html" onMouseOver="constPopup(event,'NOTES_STATE_SITE')">NOTES_STATE_SITE</a>;
<a name="l420"><span class="linenum"> 420</span></a>                          <a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>-&gt;<a onClick="logVariable('courseid')" class="var it44945" onMouseOver="hilite(44945)" onMouseOut="lolite()" href="../_variables/courseid.html">courseid</a> = <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>;
<a name="l421"><span class="linenum"> 421</span></a>                          break;
<a name="l422"><span class="linenum"> 422</span></a>                      default:
<a name="l423"><span class="linenum"> 423</span></a>                          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../_variables/warnings.html">$warnings</a>[] = array('item' =&gt; 'note',
<a name="l424"><span class="linenum"> 424</span></a>                                              'itemid' =&gt; <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>[&quot;id&quot;],
<a name="l425"><span class="linenum"> 425</span></a>                                              'warningcode' =&gt; 'badparam',
<a name="l426"><span class="linenum"> 426</span></a>                                              'message' =&gt; 'Provided publishstate incorrect');
<a name="l427"><span class="linenum"> 427</span></a>                          break;
<a name="l428"><span class="linenum"> 428</span></a>                  }
<a name="l429"><span class="linenum"> 429</span></a>                  if (!<a class="function" onClick="logFunction('note_save')" href="../_functions/note_save.html" onMouseOver="funcPopup(event,'note_save')">note_save</a>(<a class="var it23142" onMouseOver="hilite(23142)" onMouseOut="lolite()" onClick="logVariable('dbnote')" href="../_variables/dbnote.html">$dbnote</a>)) {
<a name="l430"><span class="linenum"> 430</span></a>                      <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../_variables/warnings.html">$warnings</a>[] = array('item' =&gt; 'note',
<a name="l431"><span class="linenum"> 431</span></a>                                          'itemid' =&gt; <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>[&quot;id&quot;],
<a name="l432"><span class="linenum"> 432</span></a>                                          'warningcode' =&gt; 'savedfailed',
<a name="l433"><span class="linenum"> 433</span></a>                                          'message' =&gt; 'Note could not be modified');
<a name="l434"><span class="linenum"> 434</span></a>                  }
<a name="l435"><span class="linenum"> 435</span></a>              } else {
<a name="l436"><span class="linenum"> 436</span></a>                  <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../_variables/warnings.html">$warnings</a>[] = array('item' =&gt; 'note',
<a name="l437"><span class="linenum"> 437</span></a>                                      'itemid' =&gt; <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>[&quot;id&quot;],
<a name="l438"><span class="linenum"> 438</span></a>                                      'warningcode' =&gt; 'badid',
<a name="l439"><span class="linenum"> 439</span></a>                                      'message' =&gt; 'Note does not exist');
<a name="l440"><span class="linenum"> 440</span></a>              }
<a name="l441"><span class="linenum"> 441</span></a>          }
<a name="l442"><span class="linenum"> 442</span></a>          return <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../_variables/warnings.html">$warnings</a>;
<a name="l443"><span class="linenum"> 443</span></a>      }
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>      <span class="comment">/**</span>
<a name="l446"><span class="linenum"> 446</span></a>  <span class="comment">     * Returns description of update_notes result value.</span>
<a name="l447"><span class="linenum"> 447</span></a>  <span class="comment">     *</span>
<a name="l448"><span class="linenum"> 448</span></a>  <span class="comment">     * @return external_description</span>
<a name="l449"><span class="linenum"> 449</span></a>  <span class="comment">     * @since Moodle 2.5</span>
<a name="l450"><span class="linenum"> 450</span></a>  <span class="comment">     */</span>
<a name="l451"><span class="linenum"> 451</span></a>      public static function <a class="function" onClick="logFunction('update_notes_returns')" href="../_functions/update_notes_returns.html" onMouseOver="funcPopup(event,'update_notes_returns')">update_notes_returns</a>() {
<a name="l452"><span class="linenum"> 452</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>('item is always \'note\'',
<a name="l453"><span class="linenum"> 453</span></a>                              'When errorcode is savedfailed the note could not be modified.' .
<a name="l454"><span class="linenum"> 454</span></a>                              'When errorcode is badparam, an incorrect parameter was provided.' .
<a name="l455"><span class="linenum"> 455</span></a>                              'When errorcode is badid, the note does not exist',
<a name="l456"><span class="linenum"> 456</span></a>                              'errorcode can be badparam (incorrect parameter), savedfailed (could not be modified), or badid (note does not exist)');
<a name="l457"><span class="linenum"> 457</span></a>      }
<a name="l458"><span class="linenum"> 458</span></a>  
<a name="l459"><span class="linenum"> 459</span></a>      <span class="comment">/**</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l461"><span class="linenum"> 461</span></a>  <span class="comment">     *</span>
<a name="l462"><span class="linenum"> 462</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l463"><span class="linenum"> 463</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l464"><span class="linenum"> 464</span></a>  <span class="comment">     */</span>
<a name="l465"><span class="linenum"> 465</span></a>      public static function <a class="function" onClick="logFunction('get_course_notes_parameters')" href="../_functions/get_course_notes_parameters.html" onMouseOver="funcPopup(event,'get_course_notes_parameters')">get_course_notes_parameters</a>() {
<a name="l466"><span class="linenum"> 466</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l467"><span class="linenum"> 467</span></a>              array(
<a name="l468"><span class="linenum"> 468</span></a>                  'courseid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'course id, 0 for SITE'),
<a name="l469"><span class="linenum"> 469</span></a>                  'userid'   =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'user id', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 0),
<a name="l470"><span class="linenum"> 470</span></a>              )
<a name="l471"><span class="linenum"> 471</span></a>          );
<a name="l472"><span class="linenum"> 472</span></a>      }
<a name="l473"><span class="linenum"> 473</span></a>  
<a name="l474"><span class="linenum"> 474</span></a>      <span class="comment">/**</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment">     * Create a notes list</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment">     *</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment">     * @param int $courseid ID of the Course</span>
<a name="l478"><span class="linenum"> 478</span></a>  <span class="comment">     * @param stdClass $context context object</span>
<a name="l479"><span class="linenum"> 479</span></a>  <span class="comment">     * @param int $userid ID of the User</span>
<a name="l480"><span class="linenum"> 480</span></a>  <span class="comment">     * @param int $state</span>
<a name="l481"><span class="linenum"> 481</span></a>  <span class="comment">     * @param int $author</span>
<a name="l482"><span class="linenum"> 482</span></a>  <span class="comment">     * @return array of notes</span>
<a name="l483"><span class="linenum"> 483</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l484"><span class="linenum"> 484</span></a>  <span class="comment">     */</span>
<a name="l485"><span class="linenum"> 485</span></a>      protected static function <a class="function" onClick="logFunction('create_note_list')" href="../_functions/create_note_list.html" onMouseOver="funcPopup(event,'create_note_list')">create_note_list</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>, <a class="var it1320" onMouseOver="hilite(1320)" onMouseOut="lolite()" onClick="logVariable('author')" href="../_variables/author.html">$author</a> = 0) {
<a name="l486"><span class="linenum"> 486</span></a>          <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a> = array();
<a name="l487"><span class="linenum"> 487</span></a>          <a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../_variables/notes.html">$notes</a> = <a class="function" onClick="logFunction('note_list')" href="../_functions/note_list.html" onMouseOver="funcPopup(event,'note_list')">note_list</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>, <a class="var it650" onMouseOver="hilite(650)" onMouseOut="lolite()" onClick="logVariable('state')" href="../_variables/state.html">$state</a>, <a class="var it1320" onMouseOver="hilite(1320)" onMouseOut="lolite()" onClick="logVariable('author')" href="../_variables/author.html">$author</a>);
<a name="l488"><span class="linenum"> 488</span></a>          foreach (<a class="var it5657" onMouseOver="hilite(5657)" onMouseOut="lolite()" onClick="logVariable('notes')" href="../_variables/notes.html">$notes</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a> =&gt; <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>) {
<a name="l489"><span class="linenum"> 489</span></a>              <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a> = (array)<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>;
<a name="l490"><span class="linenum"> 490</span></a>              <a class="function" onClick="logFunction('list')" href="../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['content'], <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['format']) = <a class="function" onClick="logFunction('external_format_text')" href="../_functions/external_format_text.html" onMouseOver="funcPopup(event,'external_format_text')">external_format_text</a>(<a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['content'],
<a name="l491"><span class="linenum"> 491</span></a>                                                                             <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>['format'],
<a name="l492"><span class="linenum"> 492</span></a>                                                                             <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../_variables/id.html">id</a>,
<a name="l493"><span class="linenum"> 493</span></a>                                                                             '',
<a name="l494"><span class="linenum"> 494</span></a>                                                                             '',
<a name="l495"><span class="linenum"> 495</span></a>                                                                             0);
<a name="l496"><span class="linenum"> 496</span></a>              <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../_variables/key.html">$key</a>] = <a class="var it6990" onMouseOver="hilite(6990)" onMouseOut="lolite()" onClick="logVariable('note')" href="../_variables/note.html">$note</a>;
<a name="l497"><span class="linenum"> 497</span></a>          }
<a name="l498"><span class="linenum"> 498</span></a>          return <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>;
<a name="l499"><span class="linenum"> 499</span></a>      }
<a name="l500"><span class="linenum"> 500</span></a>  
<a name="l501"><span class="linenum"> 501</span></a>      <span class="comment">/**</span>
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment">     * Get a list of course notes</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment">     *</span>
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment">     * @param int $courseid ID of the Course</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment">     * @param int $userid ID of the User</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment">     * @return array of site, course and personal notes and warnings</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">     */</span>
<a name="l510"><span class="linenum"> 510</span></a>      public static function <a class="function" onClick="logFunction('get_course_notes')" href="../_functions/get_course_notes.html" onMouseOver="funcPopup(event,'get_course_notes')">get_course_notes</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = 0) {
<a name="l511"><span class="linenum"> 511</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>;
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablenotes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enablenotes.html">enablenotes</a>)) {
<a name="l514"><span class="linenum"> 514</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notesdisabled', 'notes');
<a name="l515"><span class="linenum"> 515</span></a>          }
<a name="l516"><span class="linenum"> 516</span></a>  
<a name="l517"><span class="linenum"> 517</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../_variables/warnings.html">$warnings</a> = array();
<a name="l518"><span class="linenum"> 518</span></a>          <a class="var it10508" onMouseOver="hilite(10508)" onMouseOut="lolite()" onClick="logVariable('arrayparams')" href="../_variables/arrayparams.html">$arrayparams</a> = array(
<a name="l519"><span class="linenum"> 519</span></a>              'courseid' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>,
<a name="l520"><span class="linenum"> 520</span></a>              'userid'   =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>,
<a name="l521"><span class="linenum"> 521</span></a>          );
<a name="l522"><span class="linenum"> 522</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('get_course_notes_parameters')" href="../_functions/get_course_notes_parameters.html" onMouseOver="funcPopup(event,'get_course_notes_parameters')">get_course_notes_parameters</a>(), <a class="var it10508" onMouseOver="hilite(10508)" onMouseOut="lolite()" onClick="logVariable('arrayparams')" href="../_variables/arrayparams.html">$arrayparams</a>);
<a name="l523"><span class="linenum"> 523</span></a>  
<a name="l524"><span class="linenum"> 524</span></a>          if (empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['courseid'])) {
<a name="l525"><span class="linenum"> 525</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['courseid'] = <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>;
<a name="l526"><span class="linenum"> 526</span></a>          }
<a name="l527"><span class="linenum"> 527</span></a>          <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = null;
<a name="l528"><span class="linenum"> 528</span></a>          if (!empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid'])) {
<a name="l529"><span class="linenum"> 529</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = <a class="class" onClick="logClass('core_user')" href="../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a>::<a class="function" onClick="logFunction('get_user')" href="../_functions/get_user.html" onMouseOver="funcPopup(event,'get_user')">get_user</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid'], '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l530"><span class="linenum"> 530</span></a>              <a class="class" onClick="logClass('core_user')" href="../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a>::<a class="function" onClick="logFunction('require_active_user')" href="../_functions/require_active_user.html" onMouseOver="funcPopup(event,'require_active_user')">require_active_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>);
<a name="l531"><span class="linenum"> 531</span></a>          }
<a name="l532"><span class="linenum"> 532</span></a>  
<a name="l533"><span class="linenum"> 533</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="function" onClick="logFunction('get_course')" href="../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['courseid']);
<a name="l534"><span class="linenum"> 534</span></a>  
<a name="l535"><span class="linenum"> 535</span></a>          if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l536"><span class="linenum"> 536</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l537"><span class="linenum"> 537</span></a>          } else {
<a name="l538"><span class="linenum"> 538</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l539"><span class="linenum"> 539</span></a>          }
<a name="l540"><span class="linenum"> 540</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l541"><span class="linenum"> 541</span></a>  
<a name="l542"><span class="linenum"> 542</span></a>          <a class="var it23145" onMouseOver="hilite(23145)" onMouseOut="lolite()" onClick="logVariable('sitenotes')" href="../_variables/sitenotes.html">$sitenotes</a> = array();
<a name="l543"><span class="linenum"> 543</span></a>          <a class="var it23146" onMouseOver="hilite(23146)" onMouseOut="lolite()" onClick="logVariable('coursenotes')" href="../_variables/coursenotes.html">$coursenotes</a> = array();
<a name="l544"><span class="linenum"> 544</span></a>          <a class="var it23147" onMouseOver="hilite(23147)" onMouseOut="lolite()" onClick="logVariable('personalnotes')" href="../_variables/personalnotes.html">$personalnotes</a> = array();
<a name="l545"><span class="linenum"> 545</span></a>  
<a name="l546"><span class="linenum"> 546</span></a>          if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l547"><span class="linenum"> 547</span></a>  
<a name="l548"><span class="linenum"> 548</span></a>              <a class="function" onClick="logFunction('require_capability')" href="../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/notes:view', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l549"><span class="linenum"> 549</span></a>              <a class="var it23145" onMouseOver="hilite(23145)" onMouseOut="lolite()" onClick="logVariable('sitenotes')" href="../_variables/sitenotes.html">$sitenotes</a> = self::<a class="function" onClick="logFunction('create_note_list')" href="../_functions/create_note_list.html" onMouseOver="funcPopup(event,'create_note_list')">create_note_list</a>(0, <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(), <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid'], <a class="constant" onClick="logConstant('NOTES_STATE_SITE')" href="../_constants/NOTES_STATE_SITE.html" onMouseOver="constPopup(event,'NOTES_STATE_SITE')">NOTES_STATE_SITE</a>);
<a name="l550"><span class="linenum"> 550</span></a>              <a class="var it23146" onMouseOver="hilite(23146)" onMouseOut="lolite()" onClick="logVariable('coursenotes')" href="../_variables/coursenotes.html">$coursenotes</a> = self::<a class="function" onClick="logFunction('create_note_list')" href="../_functions/create_note_list.html" onMouseOver="funcPopup(event,'create_note_list')">create_note_list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid'], <a class="constant" onClick="logConstant('NOTES_STATE_PUBLIC')" href="../_constants/NOTES_STATE_PUBLIC.html" onMouseOver="constPopup(event,'NOTES_STATE_PUBLIC')">NOTES_STATE_PUBLIC</a>);
<a name="l551"><span class="linenum"> 551</span></a>              <a class="var it23147" onMouseOver="hilite(23147)" onMouseOut="lolite()" onClick="logVariable('personalnotes')" href="../_variables/personalnotes.html">$personalnotes</a> = self::<a class="function" onClick="logFunction('create_note_list')" href="../_functions/create_note_list.html" onMouseOver="funcPopup(event,'create_note_list')">create_note_list</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid'], <a class="constant" onClick="logConstant('NOTES_STATE_DRAFT')" href="../_constants/NOTES_STATE_DRAFT.html" onMouseOver="constPopup(event,'NOTES_STATE_DRAFT')">NOTES_STATE_DRAFT</a>,
<a name="l552"><span class="linenum"> 552</span></a>                                                          <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l553"><span class="linenum"> 553</span></a>          } else {
<a name="l554"><span class="linenum"> 554</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/notes:view', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>)) {
<a name="l555"><span class="linenum"> 555</span></a>                  <a class="var it23145" onMouseOver="hilite(23145)" onMouseOut="lolite()" onClick="logVariable('sitenotes')" href="../_variables/sitenotes.html">$sitenotes</a> = self::<a class="function" onClick="logFunction('create_note_list')" href="../_functions/create_note_list.html" onMouseOver="funcPopup(event,'create_note_list')">create_note_list</a>(0, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid'], <a class="constant" onClick="logConstant('NOTES_STATE_SITE')" href="../_constants/NOTES_STATE_SITE.html" onMouseOver="constPopup(event,'NOTES_STATE_SITE')">NOTES_STATE_SITE</a>);
<a name="l556"><span class="linenum"> 556</span></a>              }
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">            // It returns notes only for a specific user!</span>
<a name="l558"><span class="linenum"> 558</span></a>              if (!empty(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>)) {
<a name="l559"><span class="linenum"> 559</span></a>                  <a class="var it23148" onMouseOver="hilite(23148)" onMouseOut="lolite()" onClick="logVariable('usercourses')" href="../_variables/usercourses.html">$usercourses</a> = <a class="function" onClick="logFunction('enrol_get_users_courses')" href="../_functions/enrol_get_users_courses.html" onMouseOver="funcPopup(event,'enrol_get_users_courses')">enrol_get_users_courses</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, true);
<a name="l560"><span class="linenum"> 560</span></a>                  foreach (<a class="var it23148" onMouseOver="hilite(23148)" onMouseOut="lolite()" onClick="logVariable('usercourses')" href="../_variables/usercourses.html">$usercourses</a> as <a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../_variables/c.html">$c</a>) {
<a name="l561"><span class="linenum"> 561</span></a>  <span class="comment">                    // All notes at course level, only if we have capability on every course.</span>
<a name="l562"><span class="linenum"> 562</span></a>                      if (<a class="function" onClick="logFunction('has_capability')" href="../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/notes:view', <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../_variables/c.html">$c</a>-&gt;<a onClick="logVariable('id')" class="var it42990" onMouseOver="hilite(42990)" onMouseOut="lolite()" href="../_variables/id.html">id</a>))) {
<a name="l563"><span class="linenum"> 563</span></a>                          <a class="var it23146" onMouseOver="hilite(23146)" onMouseOut="lolite()" onClick="logVariable('coursenotes')" href="../_variables/coursenotes.html">$coursenotes</a> += self::<a class="function" onClick="logFunction('create_note_list')" href="../_functions/create_note_list.html" onMouseOver="funcPopup(event,'create_note_list')">create_note_list</a>(<a class="var it132" onMouseOver="hilite(132)" onMouseOut="lolite()" onClick="logVariable('c')" href="../_variables/c.html">$c</a>-&gt;<a onClick="logVariable('id')" class="var it42990" onMouseOver="hilite(42990)" onMouseOut="lolite()" href="../_variables/id.html">id</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid'], <a class="constant" onClick="logConstant('NOTES_STATE_PUBLIC')" href="../_constants/NOTES_STATE_PUBLIC.html" onMouseOver="constPopup(event,'NOTES_STATE_PUBLIC')">NOTES_STATE_PUBLIC</a>);
<a name="l564"><span class="linenum"> 564</span></a>                      }
<a name="l565"><span class="linenum"> 565</span></a>                  }
<a name="l566"><span class="linenum"> 566</span></a>              }
<a name="l567"><span class="linenum"> 567</span></a>          }
<a name="l568"><span class="linenum"> 568</span></a>  
<a name="l569"><span class="linenum"> 569</span></a>          <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a> = array(
<a name="l570"><span class="linenum"> 570</span></a>              'sitenotes'     =&gt; <a class="var it23145" onMouseOver="hilite(23145)" onMouseOut="lolite()" onClick="logVariable('sitenotes')" href="../_variables/sitenotes.html">$sitenotes</a>,
<a name="l571"><span class="linenum"> 571</span></a>              'coursenotes'   =&gt; <a class="var it23146" onMouseOver="hilite(23146)" onMouseOut="lolite()" onClick="logVariable('coursenotes')" href="../_variables/coursenotes.html">$coursenotes</a>,
<a name="l572"><span class="linenum"> 572</span></a>              'personalnotes' =&gt; <a class="var it23147" onMouseOver="hilite(23147)" onMouseOut="lolite()" onClick="logVariable('personalnotes')" href="../_variables/personalnotes.html">$personalnotes</a>,
<a name="l573"><span class="linenum"> 573</span></a>              'warnings'      =&gt; <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../_variables/warnings.html">$warnings</a>
<a name="l574"><span class="linenum"> 574</span></a>          );
<a name="l575"><span class="linenum"> 575</span></a>          return <a class="var it4821" onMouseOver="hilite(4821)" onMouseOut="lolite()" onClick="logVariable('results')" href="../_variables/results.html">$results</a>;
<a name="l576"><span class="linenum"> 576</span></a>  
<a name="l577"><span class="linenum"> 577</span></a>      }
<a name="l578"><span class="linenum"> 578</span></a>  
<a name="l579"><span class="linenum"> 579</span></a>      <span class="comment">/**</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment">     * Returns array of note structure</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment">     *</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment">     * @return external_description</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment">     */</span>
<a name="l585"><span class="linenum"> 585</span></a>      protected static function <a class="function" onClick="logFunction('get_note_structure')" href="../_functions/get_note_structure.html" onMouseOver="funcPopup(event,'get_note_structure')">get_note_structure</a>() {
<a name="l586"><span class="linenum"> 586</span></a>          return array(
<a name="l587"><span class="linenum"> 587</span></a>                       'id'           =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'id of this note'),
<a name="l588"><span class="linenum"> 588</span></a>                       'courseid'     =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'id of the course'),
<a name="l589"><span class="linenum"> 589</span></a>                       'userid'       =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'user id'),
<a name="l590"><span class="linenum"> 590</span></a>                       'content'      =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_RAW')" href="../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>, 'the content text formated'),
<a name="l591"><span class="linenum"> 591</span></a>                       'format'       =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_format_value')" href="../_classes/external_format_value.html" onMouseOver="classPopup(event,'external_format_value')">external_format_value</a>('content'),
<a name="l592"><span class="linenum"> 592</span></a>                       'created'      =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'time created (timestamp)'),
<a name="l593"><span class="linenum"> 593</span></a>                       'lastmodified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'time of last modification (timestamp)'),
<a name="l594"><span class="linenum"> 594</span></a>                       'usermodified' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'user id of the creator of this note'),
<a name="l595"><span class="linenum"> 595</span></a>                       'publishstate' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>, &quot;state of the note (i.e. draft, public, site) &quot;)
<a name="l596"><span class="linenum"> 596</span></a>          );
<a name="l597"><span class="linenum"> 597</span></a>      }
<a name="l598"><span class="linenum"> 598</span></a>  
<a name="l599"><span class="linenum"> 599</span></a>      <span class="comment">/**</span>
<a name="l600"><span class="linenum"> 600</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l601"><span class="linenum"> 601</span></a>  <span class="comment">     *</span>
<a name="l602"><span class="linenum"> 602</span></a>  <span class="comment">     * @return external_description</span>
<a name="l603"><span class="linenum"> 603</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">     */</span>
<a name="l605"><span class="linenum"> 605</span></a>      public static function <a class="function" onClick="logFunction('get_course_notes_returns')" href="../_functions/get_course_notes_returns.html" onMouseOver="funcPopup(event,'get_course_notes_returns')">get_course_notes_returns</a>() {
<a name="l606"><span class="linenum"> 606</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l607"><span class="linenum"> 607</span></a>              array(
<a name="l608"><span class="linenum"> 608</span></a>                    'sitenotes' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l609"><span class="linenum"> 609</span></a>                        <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l610"><span class="linenum"> 610</span></a>                            self::<a class="function" onClick="logFunction('get_note_structure')" href="../_functions/get_note_structure.html" onMouseOver="funcPopup(event,'get_note_structure')">get_note_structure</a>() , ''
<a name="l611"><span class="linenum"> 611</span></a>                        ), 'site notes', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>
<a name="l612"><span class="linenum"> 612</span></a>                     ),
<a name="l613"><span class="linenum"> 613</span></a>                     'coursenotes' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l614"><span class="linenum"> 614</span></a>                        <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l615"><span class="linenum"> 615</span></a>                            self::<a class="function" onClick="logFunction('get_note_structure')" href="../_functions/get_note_structure.html" onMouseOver="funcPopup(event,'get_note_structure')">get_note_structure</a>() , ''
<a name="l616"><span class="linenum"> 616</span></a>                        ), 'couse notes', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>
<a name="l617"><span class="linenum"> 617</span></a>                     ),
<a name="l618"><span class="linenum"> 618</span></a>                     'personalnotes' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_multiple_structure')" href="../_classes/external_multiple_structure.html" onMouseOver="classPopup(event,'external_multiple_structure')">external_multiple_structure</a>(
<a name="l619"><span class="linenum"> 619</span></a>                        <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l620"><span class="linenum"> 620</span></a>                            self::<a class="function" onClick="logFunction('get_note_structure')" href="../_functions/get_note_structure.html" onMouseOver="funcPopup(event,'get_note_structure')">get_note_structure</a>() , ''
<a name="l621"><span class="linenum"> 621</span></a>                        ), 'personal notes', <a class="constant" onClick="logConstant('VALUE_OPTIONAL')" href="../_constants/VALUE_OPTIONAL.html" onMouseOver="constPopup(event,'VALUE_OPTIONAL')">VALUE_OPTIONAL</a>
<a name="l622"><span class="linenum"> 622</span></a>                     ),
<a name="l623"><span class="linenum"> 623</span></a>                   'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l624"><span class="linenum"> 624</span></a>              ), 'notes'
<a name="l625"><span class="linenum"> 625</span></a>          );
<a name="l626"><span class="linenum"> 626</span></a>      }
<a name="l627"><span class="linenum"> 627</span></a>  
<a name="l628"><span class="linenum"> 628</span></a>      <span class="comment">/**</span>
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment">     * Returns description of method parameters</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment">     *</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment">     * @return external_function_parameters</span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l633"><span class="linenum"> 633</span></a>  <span class="comment">     */</span>
<a name="l634"><span class="linenum"> 634</span></a>      public static function <a class="function" onClick="logFunction('view_notes_parameters')" href="../_functions/view_notes_parameters.html" onMouseOver="funcPopup(event,'view_notes_parameters')">view_notes_parameters</a>() {
<a name="l635"><span class="linenum"> 635</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_function_parameters')" href="../_classes/external_function_parameters.html" onMouseOver="classPopup(event,'external_function_parameters')">external_function_parameters</a>(
<a name="l636"><span class="linenum"> 636</span></a>              array(
<a name="l637"><span class="linenum"> 637</span></a>                  'courseid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'course id, 0 for notes at system level'),
<a name="l638"><span class="linenum"> 638</span></a>                  'userid' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_INT')" href="../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>, 'user id, 0 means view all the user notes', <a class="constant" onClick="logConstant('VALUE_DEFAULT')" href="../_constants/VALUE_DEFAULT.html" onMouseOver="constPopup(event,'VALUE_DEFAULT')">VALUE_DEFAULT</a>, 0)
<a name="l639"><span class="linenum"> 639</span></a>              )
<a name="l640"><span class="linenum"> 640</span></a>          );
<a name="l641"><span class="linenum"> 641</span></a>      }
<a name="l642"><span class="linenum"> 642</span></a>  
<a name="l643"><span class="linenum"> 643</span></a>      <span class="comment">/**</span>
<a name="l644"><span class="linenum"> 644</span></a>  <span class="comment">     * Simulates the web interface view of notes/index.php: trigger events</span>
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">     *</span>
<a name="l646"><span class="linenum"> 646</span></a>  <span class="comment">     * @param int $courseid id of the course</span>
<a name="l647"><span class="linenum"> 647</span></a>  <span class="comment">     * @param int $userid id of the user</span>
<a name="l648"><span class="linenum"> 648</span></a>  <span class="comment">     * @return array of warnings and status result</span>
<a name="l649"><span class="linenum"> 649</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l650"><span class="linenum"> 650</span></a>  <span class="comment">     * @throws moodle_exception</span>
<a name="l651"><span class="linenum"> 651</span></a>  <span class="comment">     */</span>
<a name="l652"><span class="linenum"> 652</span></a>      public static function <a class="function" onClick="logFunction('view_notes')" href="../_functions/view_notes.html" onMouseOver="funcPopup(event,'view_notes')">view_notes</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a> = 0) {
<a name="l653"><span class="linenum"> 653</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>;
<a name="l654"><span class="linenum"> 654</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/dirroot.html">dirroot</a> . "<a class="filename" href="../notes/lib.php.html">/notes/lib.php</a>");
<a name="l655"><span class="linenum"> 655</span></a>  
<a name="l656"><span class="linenum"> 656</span></a>          if (empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablenotes')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../_variables/enablenotes.html">enablenotes</a>)) {
<a name="l657"><span class="linenum"> 657</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notesdisabled', 'notes');
<a name="l658"><span class="linenum"> 658</span></a>          }
<a name="l659"><span class="linenum"> 659</span></a>  
<a name="l660"><span class="linenum"> 660</span></a>          <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../_variables/warnings.html">$warnings</a> = array();
<a name="l661"><span class="linenum"> 661</span></a>          <a class="var it10508" onMouseOver="hilite(10508)" onMouseOut="lolite()" onClick="logVariable('arrayparams')" href="../_variables/arrayparams.html">$arrayparams</a> = array(
<a name="l662"><span class="linenum"> 662</span></a>              'courseid' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../_variables/courseid.html">$courseid</a>,
<a name="l663"><span class="linenum"> 663</span></a>              'userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../_variables/userid.html">$userid</a>
<a name="l664"><span class="linenum"> 664</span></a>          );
<a name="l665"><span class="linenum"> 665</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a> = self::<a class="function" onClick="logFunction('validate_parameters')" href="../_functions/validate_parameters.html" onMouseOver="funcPopup(event,'validate_parameters')">validate_parameters</a>(self::<a class="function" onClick="logFunction('view_notes_parameters')" href="../_functions/view_notes_parameters.html" onMouseOver="funcPopup(event,'view_notes_parameters')">view_notes_parameters</a>(), <a class="var it10508" onMouseOver="hilite(10508)" onMouseOut="lolite()" onClick="logVariable('arrayparams')" href="../_variables/arrayparams.html">$arrayparams</a>);
<a name="l666"><span class="linenum"> 666</span></a>  
<a name="l667"><span class="linenum"> 667</span></a>          if (empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['courseid'])) {
<a name="l668"><span class="linenum"> 668</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['courseid'] = <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>;
<a name="l669"><span class="linenum"> 669</span></a>          }
<a name="l670"><span class="linenum"> 670</span></a>  
<a name="l671"><span class="linenum"> 671</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a> = <a class="function" onClick="logFunction('get_course')" href="../_functions/get_course.html" onMouseOver="funcPopup(event,'get_course')">get_course</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['courseid']);
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>          if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l674"><span class="linenum"> 674</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l675"><span class="linenum"> 675</span></a>          } else {
<a name="l676"><span class="linenum"> 676</span></a>              <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a>);
<a name="l677"><span class="linenum"> 677</span></a>          }
<a name="l678"><span class="linenum"> 678</span></a>  
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment">        // First of all, validate the context before do further permission checks.</span>
<a name="l680"><span class="linenum"> 680</span></a>          self::<a class="function" onClick="logFunction('validate_context')" href="../_functions/validate_context.html" onMouseOver="funcPopup(event,'validate_context')">validate_context</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l681"><span class="linenum"> 681</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('moodle/notes:view', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>);
<a name="l682"><span class="linenum"> 682</span></a>  
<a name="l683"><span class="linenum"> 683</span></a>          if (!empty(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid'])) {
<a name="l684"><span class="linenum"> 684</span></a>              <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a> = <a class="class" onClick="logClass('core_user')" href="../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a>::<a class="function" onClick="logFunction('get_user')" href="../_functions/get_user.html" onMouseOver="funcPopup(event,'get_user')">get_user</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid'], '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l685"><span class="linenum"> 685</span></a>              <a class="class" onClick="logClass('core_user')" href="../_classes/core_user.html" onMouseOver="classPopup(event,'core_user')">core_user</a>::<a class="function" onClick="logFunction('require_active_user')" href="../_functions/require_active_user.html" onMouseOver="funcPopup(event,'require_active_user')">require_active_user</a>(<a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>);
<a name="l686"><span class="linenum"> 686</span></a>  
<a name="l687"><span class="linenum"> 687</span></a>              if (<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../_variables/id.html">id</a> != <a class="constant" onClick="logConstant('SITEID')" href="../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a> and !<a class="function" onClick="logFunction('can_access_course')" href="../_functions/can_access_course.html" onMouseOver="funcPopup(event,'can_access_course')">can_access_course</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../_variables/user.html">$user</a>, '', true)) {
<a name="l688"><span class="linenum"> 688</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('moodle_exception')" href="../_classes/moodle_exception.html" onMouseOver="classPopup(event,'moodle_exception')">moodle_exception</a>('notenrolledprofile');
<a name="l689"><span class="linenum"> 689</span></a>              }
<a name="l690"><span class="linenum"> 690</span></a>          }
<a name="l691"><span class="linenum"> 691</span></a>  
<a name="l692"><span class="linenum"> 692</span></a>          <a class="function" onClick="logFunction('note_view')" href="../_functions/note_view.html" onMouseOver="funcPopup(event,'note_view')">note_view</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../_variables/context.html">$context</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../_variables/params.html">$params</a>['userid']);
<a name="l693"><span class="linenum"> 693</span></a>  
<a name="l694"><span class="linenum"> 694</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a> = array();
<a name="l695"><span class="linenum"> 695</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>['status'] = true;
<a name="l696"><span class="linenum"> 696</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>['warnings'] = <a class="var it3500" onMouseOver="hilite(3500)" onMouseOut="lolite()" onClick="logVariable('warnings')" href="../_variables/warnings.html">$warnings</a>;
<a name="l697"><span class="linenum"> 697</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../_variables/result.html">$result</a>;
<a name="l698"><span class="linenum"> 698</span></a>  
<a name="l699"><span class="linenum"> 699</span></a>      }
<a name="l700"><span class="linenum"> 700</span></a>  
<a name="l701"><span class="linenum"> 701</span></a>      <span class="comment">/**</span>
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment">     * Returns description of method result value</span>
<a name="l703"><span class="linenum"> 703</span></a>  <span class="comment">     *</span>
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment">     * @return external_description</span>
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment">     * @since Moodle 2.9</span>
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment">     */</span>
<a name="l707"><span class="linenum"> 707</span></a>      public static function <a class="function" onClick="logFunction('view_notes_returns')" href="../_functions/view_notes_returns.html" onMouseOver="funcPopup(event,'view_notes_returns')">view_notes_returns</a>() {
<a name="l708"><span class="linenum"> 708</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('external_single_structure')" href="../_classes/external_single_structure.html" onMouseOver="classPopup(event,'external_single_structure')">external_single_structure</a>(
<a name="l709"><span class="linenum"> 709</span></a>              array(
<a name="l710"><span class="linenum"> 710</span></a>                  'status' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_value')" href="../_classes/external_value.html" onMouseOver="classPopup(event,'external_value')">external_value</a>(<a class="constant" onClick="logConstant('PARAM_BOOL')" href="../_constants/PARAM_BOOL.html" onMouseOver="constPopup(event,'PARAM_BOOL')">PARAM_BOOL</a>, 'status: true if success'),
<a name="l711"><span class="linenum"> 711</span></a>                  'warnings' =&gt; <span class="keyword">new </span><a class="class" onClick="logClass('external_warnings')" href="../_classes/external_warnings.html" onMouseOver="classPopup(event,'external_warnings')">external_warnings</a>()
<a name="l712"><span class="linenum"> 712</span></a>              )
<a name="l713"><span class="linenum"> 713</span></a>          );
<a name="l714"><span class="linenum"> 714</span></a>      }
<a name="l715"><span class="linenum"> 715</span></a>  
<a name="l716"><span class="linenum"> 716</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'external_format_text': ['external_format_text', 'Format the text to be returned properly as requested by the either the web service server, either by an internally call. The caller can change the format (raw, filter, file, fileurl) with the external_settings singleton All web service servers must set this singleton when parsing the $_GET and $_POST. ', [['lib','externallib.php',887]], 61],
'delete_notes_parameters': ['delete_notes_parameters', 'Returns description of delete_notes parameters ', [['notes','externallib.php',201]], 1],
'can_access_course': ['can_access_course', 'Checks if current user has access to the course ', [['tag/classes','index_builder.php',335],['lib','accesslib.php',2130]], 19],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'require_capability': ['require_capability', 'Wrapper round the require_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',929],['lib','accesslib.php',762],['backup/util/ui','restore_ui_components.php',157]], 690],
'create_notes': ['create_notes', 'Create notes about some users Note: code should be matching the /notes/edit.php checks and the /user/addnote.php checks. (they are similar cheks) ', [['notes','externallib.php',66]], 9],
'get_note_structure': ['get_note_structure', 'Returns array of note structure ', [['notes','externallib.php',579]], 3],
'get_notes_returns': ['get_notes_returns', 'Returns description of get_notes result value. ', [['notes','externallib.php',327]], 1],
'create_notes_returns': ['create_notes_returns', 'Returns description of method result value ', [['notes','externallib.php',183]], 8],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'update_notes': ['update_notes', 'Update notes about users. ', [['notes','externallib.php',380]], 2],
'require_active_user': ['require_active_user', 'Check if the given user is an active user in the site. ', [['lib/classes','user.php',247]], 29],
'create_note_list': ['create_note_list', 'Create a notes list ', [['notes','externallib.php',474]], 5],
'note_list': ['note_list', 'Retrieves a list of note objects with specific atributes. ', [['notes','lib.php',40]], 2],
'note_view': ['note_view', 'Trigger notes viewed event ', [['notes','lib.php',355]], 2],
'get_notes': ['get_notes', 'Get notes about users. ', [['notes','externallib.php',281]], 2],
'view_notes_returns': ['view_notes_returns', 'Returns description of method result value ', [['notes','externallib.php',701]], 2],
'get_in_or_equal': ['get_in_or_equal', 'Constructs \'IN()\' or \'=\' sql fragment ', [['lib/dml','oci_native_moodle_database.php',1635],['lib/dml','moodle_database.php',711]], 438],
'note_delete': ['note_delete', 'Deletes a note object based on its id. ', [['notes','lib.php',153]], 3],
'note_save': ['note_save', 'Saves a note object. The note object is passed by reference and its fields (i.e. id) might change during the save. ', [['notes','lib.php',96]], 8],
'get_course_notes': ['get_course_notes', 'Get a list of course notes ', [['notes','externallib.php',501]], 8],
'get_records_select': ['get_records_select', 'Load a list of records based on a select query. ', [['competency/classes','persistent.php',751],['lib/dml','moodle_database.php',1332]], 166],
'external_validate_format': ['external_validate_format', 'Validate text field format against known FORMAT_XXX ', [['lib','externallib.php',833]], 13],
'view_notes_parameters': ['view_notes_parameters', 'Returns description of method parameters ', [['notes','externallib.php',628]], 1],
'validate_context': ['validate_context', 'Makes sure user may execute functions in this context. ', [['lib','externallib.php',448]], 256],
'validate_parameters': ['validate_parameters', 'Validates submitted function parameters, if anything is incorrect invalid_parameter_exception is thrown. This is a simple recursive method which is intended to be called from each implementation method of external API. ', [['lib','externallib.php',279]], 340],
'enrol_get_users_courses': ['enrol_get_users_courses', 'Returns list of courses user is enrolled into. (Note: use enrol_get_all_users_courses if you want to use the list wihtout any cap checks ) ', [['lib','enrollib.php',679]], 17],
'get_course_notes_parameters': ['get_course_notes_parameters', 'Returns description of method parameters ', [['notes','externallib.php',459]], 1],
'note_load': ['note_load', 'Retrieves a note object based on its id. ', [['notes','lib.php',83]], 9],
'update_notes_returns': ['update_notes_returns', 'Returns description of update_notes result value. ', [['notes','externallib.php',445]], 2],
'delete_notes_returns': ['delete_notes_returns', 'Returns description of delete_notes result value. ', [['notes','externallib.php',250]], 3],
'get_course_notes_returns': ['get_course_notes_returns', 'Returns description of method result value ', [['notes','externallib.php',599]], 7],
'get_notes_parameters': ['get_notes_parameters', 'Returns description of get_notes parameters. ', [['notes','externallib.php',265]], 1],
'create_notes_parameters': ['create_notes_parameters', 'Returns description of method parameters ', [['notes','externallib.php',41]], 1],
'view_notes': ['view_notes', 'Simulates the web interface view of notes/index.php: trigger events ', [['notes','externallib.php',643]], 4],
'update_notes_parameters': ['update_notes_parameters', 'Returns description of update_notes parameters. ', [['notes','externallib.php',357]], 1],
'delete_notes': ['delete_notes', 'Delete notes about users. Note: code should be matching the /notes/delete.php checks. ', [['notes','externallib.php',217]], 3],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'get_course': ['get_course', 'Get the course id. ', [['course','moodleform_mod.php',132],['search/classes','engine.php',102],['course/format','lib.php',231],['mod/quiz','attemptlib.php',180],['mod/quiz','attemptlib.php',722],['tag/classes','index_builder.php',296],['lib','modinfolib.php',180],['lib','modinfolib.php',1424],['lib','modinfolib.php',2706],['lib','datalib.php',568],['availability/classes','info.php',70],['mod/assign','locallib.php',1316],['admin/tool/uploadcourse/classes','processor.php',232],['enrol','locallib.php',912],['search/tests/fixtures','mock_search_engine.php',56]], 302],
'get_records_list': ['get_records_list', 'Get a number of records as an array of objects where one field match one list of values. ', [['lib/dml','moodle_database.php',1310]], 34],
'get_user': ['get_user', 'Returns user data checking the internal static cache. ', [['search/classes','engine.php',119],['lib/classes','user.php',55]], 53],
'strtolower': ['strtolower', '', [], 817]};
CLASS_DATA={
'moodle_exception': ['moodle_exception', 'Base Moodle Exception class ', [['lib','setuplib.php',75]], 606],
'external_api': ['external_api', 'Base class for external api methods. ', [['lib','externallib.php',47]], 808],
'external_format_value': ['external_format_value', 'A pre-filled external_value class for text format. ', [['lib','externallib.php',799]], 70],
'external_single_structure': ['external_single_structure', 'Associative array description class ', [['lib','externallib.php',580]], 460],
'external_multiple_structure': ['external_multiple_structure', 'Bulk array description class. ', [['lib','externallib.php',609]], 350],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'core_user': ['core_user', 'User class to access user details. ', [['lib/classes','user.php',27]], 457],
'core_notes_external': ['core_notes_external', 'Notes external functions ', [['notes','externallib.php',30]], 51],
'external_value': ['external_value', 'Scalar value description class ', [['lib','externallib.php',546]], 2505],
'external_function_parameters': ['external_function_parameters', 'Description of top level - PHP function parameters. ', [['lib','externallib.php',638]], 344],
'external_warnings': ['external_warnings', 'Standard Moodle web service warnings ', [['lib','externallib.php',768]], 150]};
CONST_DATA={
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 921],
'NOTES_STATE_SITE': ['NOTES_STATE_SITE', '', [['notes','lib.php',30]], 13],
'SITEID': ['SITEID', '', [['admin/cli','install.php',219],['lib/db','install.php',87],['','install.php',242],['lib','setup.php',755]], 608],
'NOTES_STATE_DRAFT': ['NOTES_STATE_DRAFT', '', [['notes','lib.php',28]], 13],
'PARAM_BOOL': ['PARAM_BOOL', '', [['lib','moodlelib.php',108]], 802],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 3812],
'PARAM_ALPHA': ['PARAM_ALPHA', '', [['lib','moodlelib.php',77]], 398],
'SQL_PARAMS_NAMED': ['SQL_PARAMS_NAMED', '', [['lib/dml','moodle_database.php',32]], 315],
'VALUE_DEFAULT': ['VALUE_DEFAULT', '', [['lib','moodlelib.php',342]], 304],
'FORMAT_PLAIN': ['FORMAT_PLAIN', '', [['lib','weblib.php',52]], 152],
'PARAM_TEXT': ['PARAM_TEXT', '', [['lib','moodlelib.php',228]], 542],
'VALUE_OPTIONAL': ['VALUE_OPTIONAL', '', [['lib','moodlelib.php',337]], 761],
'PARAM_ALPHANUMEXT': ['PARAM_ALPHANUMEXT', '', [['lib','moodlelib.php',93]], 200],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'NOTES_STATE_PUBLIC': ['NOTES_STATE_PUBLIC', '', [['notes','lib.php',29]], 19]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
