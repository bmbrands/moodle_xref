<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/feedback/lib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/feedback';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/feedback/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">//</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">//</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">//</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l16"><span class="linenum">  16</span></a>  
<a name="l17"><span class="linenum">  17</span></a>  <span class="comment">/**</span>
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment"> * Library of functions and constants for module feedback</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * includes the main-part of feedback-functions</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> *</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> * @package mod_feedback</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @copyright Andreas Grabs</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> */</span>
<a name="l25"><span class="linenum">  25</span></a>  
<a name="l26"><span class="linenum">  26</span></a>  <span class="comment">/** Include eventslib.php */</span>
<a name="l27"><span class="linenum">  27</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/eventslib.php');
<a name="l28"><span class="linenum">  28</span></a>  <span class="comment">/** Include calendar/lib.php */</span>
<a name="l29"><span class="linenum">  29</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../calendar/lib.php.html">/calendar/lib.php</a>');
<a name="l30"><span class="linenum">  30</span></a>  <span class="comment">// Include forms lib.</span>
<a name="l31"><span class="linenum">  31</span></a>  require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/formslib.php');
<a name="l32"><span class="linenum">  32</span></a>  
<a name="l33"><span class="linenum">  33</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FEEDBACK_ANONYMOUS_YES')" href="../../_constants/FEEDBACK_ANONYMOUS_YES.html" onMouseOver="constPopup(event,'FEEDBACK_ANONYMOUS_YES')">FEEDBACK_ANONYMOUS_YES</a>', 1);
<a name="l34"><span class="linenum">  34</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FEEDBACK_ANONYMOUS_NO')" href="../../_constants/FEEDBACK_ANONYMOUS_NO.html" onMouseOver="constPopup(event,'FEEDBACK_ANONYMOUS_NO')">FEEDBACK_ANONYMOUS_NO</a>', 2);
<a name="l35"><span class="linenum">  35</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FEEDBACK_MIN_ANONYMOUS_COUNT_IN_GROUP')" href="../../_constants/FEEDBACK_MIN_ANONYMOUS_COUNT_IN_GROUP.html" onMouseOver="constPopup(event,'FEEDBACK_MIN_ANONYMOUS_COUNT_IN_GROUP')">FEEDBACK_MIN_ANONYMOUS_COUNT_IN_GROUP</a>', 2);
<a name="l36"><span class="linenum">  36</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FEEDBACK_DECIMAL')" href="../../_constants/FEEDBACK_DECIMAL.html" onMouseOver="constPopup(event,'FEEDBACK_DECIMAL')">FEEDBACK_DECIMAL</a>', '.');
<a name="l37"><span class="linenum">  37</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FEEDBACK_THOUSAND')" href="../../_constants/FEEDBACK_THOUSAND.html" onMouseOver="constPopup(event,'FEEDBACK_THOUSAND')">FEEDBACK_THOUSAND</a>', ',');
<a name="l38"><span class="linenum">  38</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FEEDBACK_RESETFORM_RESET')" href="../../_constants/FEEDBACK_RESETFORM_RESET.html" onMouseOver="constPopup(event,'FEEDBACK_RESETFORM_RESET')">FEEDBACK_RESETFORM_RESET</a>', 'feedback_reset_data_');
<a name="l39"><span class="linenum">  39</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FEEDBACK_RESETFORM_DROP')" href="../../_constants/FEEDBACK_RESETFORM_DROP.html" onMouseOver="constPopup(event,'FEEDBACK_RESETFORM_DROP')">FEEDBACK_RESETFORM_DROP</a>', 'feedback_drop_feedback_');
<a name="l40"><span class="linenum">  40</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FEEDBACK_MAX_PIX_LENGTH')" href="../../_constants/FEEDBACK_MAX_PIX_LENGTH.html" onMouseOver="constPopup(event,'FEEDBACK_MAX_PIX_LENGTH')">FEEDBACK_MAX_PIX_LENGTH</a>', '400'); <span class="comment">//max. Breite des grafischen Balkens in der Auswertung</span>
<a name="l41"><span class="linenum">  41</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('FEEDBACK_DEFAULT_PAGE_COUNT')" href="../../_constants/FEEDBACK_DEFAULT_PAGE_COUNT.html" onMouseOver="constPopup(event,'FEEDBACK_DEFAULT_PAGE_COUNT')">FEEDBACK_DEFAULT_PAGE_COUNT</a>', 20);
<a name="l42"><span class="linenum">  42</span></a>  
<a name="l43"><span class="linenum">  43</span></a>  <span class="comment">/**</span>
<a name="l44"><span class="linenum">  44</span></a>  <span class="comment"> * Returns all other caps used in module.</span>
<a name="l45"><span class="linenum">  45</span></a>  <span class="comment"> *</span>
<a name="l46"><span class="linenum">  46</span></a>  <span class="comment"> * @return array</span>
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment"> */</span>
<a name="l48"><span class="linenum">  48</span></a>  function <a class="function" onClick="logFunction('feedback_get_extra_capabilities')" href="../../_functions/feedback_get_extra_capabilities.html" onMouseOver="funcPopup(event,'feedback_get_extra_capabilities')">feedback_get_extra_capabilities</a>() {
<a name="l49"><span class="linenum">  49</span></a>      return array('moodle/site:accessallgroups');
<a name="l50"><span class="linenum">  50</span></a>  }
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">/**</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment"> * @uses FEATURE_GROUPS</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> * @uses FEATURE_GROUPINGS</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> * @uses FEATURE_MOD_INTRO</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> * @uses FEATURE_COMPLETION_TRACKS_VIEWS</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> * @uses FEATURE_GRADE_HAS_GRADE</span>
<a name="l58"><span class="linenum">  58</span></a>  <span class="comment"> * @uses FEATURE_GRADE_OUTCOMES</span>
<a name="l59"><span class="linenum">  59</span></a>  <span class="comment"> * @param string $feature FEATURE_xx constant for requested feature</span>
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment"> * @return mixed True if module supports feature, null if doesn't know</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment"> */</span>
<a name="l62"><span class="linenum">  62</span></a>  function <a class="function" onClick="logFunction('feedback_supports')" href="../../_functions/feedback_supports.html" onMouseOver="funcPopup(event,'feedback_supports')">feedback_supports</a>(<a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l63"><span class="linenum">  63</span></a>      switch(<a class="var it2238" onMouseOver="hilite(2238)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l64"><span class="linenum">  64</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPS')" href="../../_constants/FEATURE_GROUPS.html" onMouseOver="constPopup(event,'FEATURE_GROUPS')">FEATURE_GROUPS</a>:                  return true;
<a name="l65"><span class="linenum">  65</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPINGS')" href="../../_constants/FEATURE_GROUPINGS.html" onMouseOver="constPopup(event,'FEATURE_GROUPINGS')">FEATURE_GROUPINGS</a>:               return true;
<a name="l66"><span class="linenum">  66</span></a>          case <a class="constant" onClick="logConstant('FEATURE_MOD_INTRO')" href="../../_constants/FEATURE_MOD_INTRO.html" onMouseOver="constPopup(event,'FEATURE_MOD_INTRO')">FEATURE_MOD_INTRO</a>:               return true;
<a name="l67"><span class="linenum">  67</span></a>          case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_TRACKS_VIEWS')" href="../../_constants/FEATURE_COMPLETION_TRACKS_VIEWS.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_TRACKS_VIEWS')">FEATURE_COMPLETION_TRACKS_VIEWS</a>: return true;
<a name="l68"><span class="linenum">  68</span></a>          case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_HAS_RULES')" href="../../_constants/FEATURE_COMPLETION_HAS_RULES.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_HAS_RULES')">FEATURE_COMPLETION_HAS_RULES</a>:    return true;
<a name="l69"><span class="linenum">  69</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_HAS_GRADE')" href="../../_constants/FEATURE_GRADE_HAS_GRADE.html" onMouseOver="constPopup(event,'FEATURE_GRADE_HAS_GRADE')">FEATURE_GRADE_HAS_GRADE</a>:         return false;
<a name="l70"><span class="linenum">  70</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_OUTCOMES')" href="../../_constants/FEATURE_GRADE_OUTCOMES.html" onMouseOver="constPopup(event,'FEATURE_GRADE_OUTCOMES')">FEATURE_GRADE_OUTCOMES</a>:          return false;
<a name="l71"><span class="linenum">  71</span></a>          case <a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>:          return true;
<a name="l72"><span class="linenum">  72</span></a>          case <a class="constant" onClick="logConstant('FEATURE_SHOW_DESCRIPTION')" href="../../_constants/FEATURE_SHOW_DESCRIPTION.html" onMouseOver="constPopup(event,'FEATURE_SHOW_DESCRIPTION')">FEATURE_SHOW_DESCRIPTION</a>:        return true;
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>          default: return null;
<a name="l75"><span class="linenum">  75</span></a>      }
<a name="l76"><span class="linenum">  76</span></a>  }
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>  <span class="comment">/**</span>
<a name="l79"><span class="linenum">  79</span></a>  <span class="comment"> * this will create a new instance and return the id number</span>
<a name="l80"><span class="linenum">  80</span></a>  <span class="comment"> * of the new instance.</span>
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment"> *</span>
<a name="l82"><span class="linenum">  82</span></a>  <span class="comment"> * @global object</span>
<a name="l83"><span class="linenum">  83</span></a>  <span class="comment"> * @param object $feedback the object given by mod_feedback_mod_form</span>
<a name="l84"><span class="linenum">  84</span></a>  <span class="comment"> * @return int</span>
<a name="l85"><span class="linenum">  85</span></a>  <span class="comment"> */</span>
<a name="l86"><span class="linenum">  86</span></a>  function <a class="function" onClick="logFunction('feedback_add_instance')" href="../../_functions/feedback_add_instance.html" onMouseOver="funcPopup(event,'feedback_add_instance')">feedback_add_instance</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>) {
<a name="l87"><span class="linenum">  87</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l88"><span class="linenum">  88</span></a>  
<a name="l89"><span class="linenum">  89</span></a>      <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l90"><span class="linenum">  90</span></a>      <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = '';
<a name="l91"><span class="linenum">  91</span></a>  
<a name="l92"><span class="linenum">  92</span></a>      if (empty(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('site_after_submit')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/site_after_submit.html">site_after_submit</a>)) {
<a name="l93"><span class="linenum">  93</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('site_after_submit')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/site_after_submit.html">site_after_submit</a> = '';
<a name="l94"><span class="linenum">  94</span></a>      }
<a name="l95"><span class="linenum">  95</span></a>  
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment">    //saving the feedback in db</span>
<a name="l97"><span class="linenum">  97</span></a>      <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;feedback&quot;, <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>);
<a name="l98"><span class="linenum">  98</span></a>  
<a name="l99"><span class="linenum">  99</span></a>      <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>;
<a name="l100"><span class="linenum"> 100</span></a>  
<a name="l101"><span class="linenum"> 101</span></a>      <a class="function" onClick="logFunction('feedback_set_events')" href="../../_functions/feedback_set_events.html" onMouseOver="funcPopup(event,'feedback_set_events')">feedback_set_events</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>);
<a name="l102"><span class="linenum"> 102</span></a>  
<a name="l103"><span class="linenum"> 103</span></a>      if (!isset(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>)) {
<a name="l104"><span class="linenum"> 104</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_id')" href="../../_functions/get_coursemodule_from_id.html" onMouseOver="funcPopup(event,'get_coursemodule_from_id')">get_coursemodule_from_id</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l105"><span class="linenum"> 105</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l106"><span class="linenum"> 106</span></a>      }
<a name="l107"><span class="linenum"> 107</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>);
<a name="l108"><span class="linenum"> 108</span></a>  
<a name="l109"><span class="linenum"> 109</span></a>      <a class="var it2672" onMouseOver="hilite(2672)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../_variables/editoroptions.html">$editoroptions</a> = <a class="function" onClick="logFunction('feedback_get_editor_options')" href="../../_functions/feedback_get_editor_options.html" onMouseOver="funcPopup(event,'feedback_get_editor_options')">feedback_get_editor_options</a>();
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>  <span class="comment">    // process the custom wysiwyg editor in page_after_submit</span>
<a name="l112"><span class="linenum"> 112</span></a>      if (<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a> = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('page_after_submit_editor')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/page_after_submit_editor.html">page_after_submit_editor</a>['itemid']) {
<a name="l113"><span class="linenum"> 113</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('page_after_submit')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/page_after_submit.html">page_after_submit</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l114"><span class="linenum"> 114</span></a>                                                      'mod_feedback', 'page_after_submit',
<a name="l115"><span class="linenum"> 115</span></a>                                                      0, <a class="var it2672" onMouseOver="hilite(2672)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../_variables/editoroptions.html">$editoroptions</a>,
<a name="l116"><span class="linenum"> 116</span></a>                                                      <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('page_after_submit_editor')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/page_after_submit_editor.html">page_after_submit_editor</a>['text']);
<a name="l117"><span class="linenum"> 117</span></a>  
<a name="l118"><span class="linenum"> 118</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('page_after_submitformat')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/page_after_submitformat.html">page_after_submitformat</a> = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('page_after_submit_editor')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/page_after_submit_editor.html">page_after_submit_editor</a>['format'];
<a name="l119"><span class="linenum"> 119</span></a>      }
<a name="l120"><span class="linenum"> 120</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>);
<a name="l121"><span class="linenum"> 121</span></a>  
<a name="l122"><span class="linenum"> 122</span></a>      return <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>;
<a name="l123"><span class="linenum"> 123</span></a>  }
<a name="l124"><span class="linenum"> 124</span></a>  
<a name="l125"><span class="linenum"> 125</span></a>  <span class="comment">/**</span>
<a name="l126"><span class="linenum"> 126</span></a>  <span class="comment"> * this will update a given instance</span>
<a name="l127"><span class="linenum"> 127</span></a>  <span class="comment"> *</span>
<a name="l128"><span class="linenum"> 128</span></a>  <span class="comment"> * @global object</span>
<a name="l129"><span class="linenum"> 129</span></a>  <span class="comment"> * @param object $feedback the object given by mod_feedback_mod_form</span>
<a name="l130"><span class="linenum"> 130</span></a>  <span class="comment"> * @return boolean</span>
<a name="l131"><span class="linenum"> 131</span></a>  <span class="comment"> */</span>
<a name="l132"><span class="linenum"> 132</span></a>  function <a class="function" onClick="logFunction('feedback_update_instance')" href="../../_functions/feedback_update_instance.html" onMouseOver="funcPopup(event,'feedback_update_instance')">feedback_update_instance</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>) {
<a name="l133"><span class="linenum"> 133</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l134"><span class="linenum"> 134</span></a>  
<a name="l135"><span class="linenum"> 135</span></a>      <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('timemodified')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l136"><span class="linenum"> 136</span></a>      <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('instance')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l137"><span class="linenum"> 137</span></a>  
<a name="l138"><span class="linenum"> 138</span></a>      if (empty(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('site_after_submit')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/site_after_submit.html">site_after_submit</a>)) {
<a name="l139"><span class="linenum"> 139</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('site_after_submit')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/site_after_submit.html">site_after_submit</a> = '';
<a name="l140"><span class="linenum"> 140</span></a>      }
<a name="l141"><span class="linenum"> 141</span></a>  
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment">    //save the feedback into the db</span>
<a name="l143"><span class="linenum"> 143</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(&quot;feedback&quot;, <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>);
<a name="l144"><span class="linenum"> 144</span></a>  
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment">    //create or update the new events</span>
<a name="l146"><span class="linenum"> 146</span></a>      <a class="function" onClick="logFunction('feedback_set_events')" href="../../_functions/feedback_set_events.html" onMouseOver="funcPopup(event,'feedback_set_events')">feedback_set_events</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>);
<a name="l147"><span class="linenum"> 147</span></a>  
<a name="l148"><span class="linenum"> 148</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>);
<a name="l149"><span class="linenum"> 149</span></a>  
<a name="l150"><span class="linenum"> 150</span></a>      <a class="var it2672" onMouseOver="hilite(2672)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../_variables/editoroptions.html">$editoroptions</a> = <a class="function" onClick="logFunction('feedback_get_editor_options')" href="../../_functions/feedback_get_editor_options.html" onMouseOver="funcPopup(event,'feedback_get_editor_options')">feedback_get_editor_options</a>();
<a name="l151"><span class="linenum"> 151</span></a>  
<a name="l152"><span class="linenum"> 152</span></a>  <span class="comment">    // process the custom wysiwyg editor in page_after_submit</span>
<a name="l153"><span class="linenum"> 153</span></a>      if (<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a> = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('page_after_submit_editor')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/page_after_submit_editor.html">page_after_submit_editor</a>['itemid']) {
<a name="l154"><span class="linenum"> 154</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('page_after_submit')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/page_after_submit.html">page_after_submit</a> = <a class="function" onClick="logFunction('file_save_draft_area_files')" href="../../_functions/file_save_draft_area_files.html" onMouseOver="funcPopup(event,'file_save_draft_area_files')">file_save_draft_area_files</a>(<a class="var it2832" onMouseOver="hilite(2832)" onMouseOut="lolite()" onClick="logVariable('draftitemid')" href="../../_variables/draftitemid.html">$draftitemid</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l155"><span class="linenum"> 155</span></a>                                                      'mod_feedback', 'page_after_submit',
<a name="l156"><span class="linenum"> 156</span></a>                                                      0, <a class="var it2672" onMouseOver="hilite(2672)" onMouseOut="lolite()" onClick="logVariable('editoroptions')" href="../../_variables/editoroptions.html">$editoroptions</a>,
<a name="l157"><span class="linenum"> 157</span></a>                                                      <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('page_after_submit_editor')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/page_after_submit_editor.html">page_after_submit_editor</a>['text']);
<a name="l158"><span class="linenum"> 158</span></a>  
<a name="l159"><span class="linenum"> 159</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('page_after_submitformat')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/page_after_submitformat.html">page_after_submitformat</a> = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('page_after_submit_editor')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/page_after_submit_editor.html">page_after_submit_editor</a>['format'];
<a name="l160"><span class="linenum"> 160</span></a>      }
<a name="l161"><span class="linenum"> 161</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>);
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>      return true;
<a name="l164"><span class="linenum"> 164</span></a>  }
<a name="l165"><span class="linenum"> 165</span></a>  
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">/**</span>
<a name="l167"><span class="linenum"> 167</span></a>  <span class="comment"> * Serves the files included in feedback items like label. Implements needed access control ;-)</span>
<a name="l168"><span class="linenum"> 168</span></a>  <span class="comment"> *</span>
<a name="l169"><span class="linenum"> 169</span></a>  <span class="comment"> * There are two situations in general where the files will be sent.</span>
<a name="l170"><span class="linenum"> 170</span></a>  <span class="comment"> * 1) filearea = item, 2) filearea = template</span>
<a name="l171"><span class="linenum"> 171</span></a>  <span class="comment"> *</span>
<a name="l172"><span class="linenum"> 172</span></a>  <span class="comment"> * @package  mod_feedback</span>
<a name="l173"><span class="linenum"> 173</span></a>  <span class="comment"> * @category files</span>
<a name="l174"><span class="linenum"> 174</span></a>  <span class="comment"> * @param stdClass $course course object</span>
<a name="l175"><span class="linenum"> 175</span></a>  <span class="comment"> * @param stdClass $cm course module object</span>
<a name="l176"><span class="linenum"> 176</span></a>  <span class="comment"> * @param stdClass $context context object</span>
<a name="l177"><span class="linenum"> 177</span></a>  <span class="comment"> * @param string $filearea file area</span>
<a name="l178"><span class="linenum"> 178</span></a>  <span class="comment"> * @param array $args extra arguments</span>
<a name="l179"><span class="linenum"> 179</span></a>  <span class="comment"> * @param bool $forcedownload whether or not force download</span>
<a name="l180"><span class="linenum"> 180</span></a>  <span class="comment"> * @param array $options additional options affecting the file serving</span>
<a name="l181"><span class="linenum"> 181</span></a>  <span class="comment"> * @return bool false if file not found, does not return if found - justsend the file</span>
<a name="l182"><span class="linenum"> 182</span></a>  <span class="comment"> */</span>
<a name="l183"><span class="linenum"> 183</span></a>  function <a class="function" onClick="logFunction('feedback_pluginfile')" href="../../_functions/feedback_pluginfile.html" onMouseOver="funcPopup(event,'feedback_pluginfile')">feedback_pluginfile</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>, <a class="var it713" onMouseOver="hilite(713)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, array <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>=array()) {
<a name="l184"><span class="linenum"> 184</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l185"><span class="linenum"> 185</span></a>  
<a name="l186"><span class="linenum"> 186</span></a>      if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'item' or <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'template') {
<a name="l187"><span class="linenum"> 187</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a> = (int)<a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l188"><span class="linenum"> 188</span></a>  <span class="comment">        //get the item what includes the file</span>
<a name="l189"><span class="linenum"> 189</span></a>          if (!<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_item', array('id'=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>))) {
<a name="l190"><span class="linenum"> 190</span></a>              return false;
<a name="l191"><span class="linenum"> 191</span></a>          }
<a name="l192"><span class="linenum"> 192</span></a>          <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>;
<a name="l193"><span class="linenum"> 193</span></a>          <a class="var it7006" onMouseOver="hilite(7006)" onMouseOut="lolite()" onClick="logVariable('templateid')" href="../../_variables/templateid.html">$templateid</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('template')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/template.html">template</a>;
<a name="l194"><span class="linenum"> 194</span></a>      }
<a name="l195"><span class="linenum"> 195</span></a>  
<a name="l196"><span class="linenum"> 196</span></a>      if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'page_after_submit' or <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'item') {
<a name="l197"><span class="linenum"> 197</span></a>          if (! <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;feedback&quot;, array(&quot;id&quot;=&gt;<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>))) {
<a name="l198"><span class="linenum"> 198</span></a>              return false;
<a name="l199"><span class="linenum"> 199</span></a>          }
<a name="l200"><span class="linenum"> 200</span></a>  
<a name="l201"><span class="linenum"> 201</span></a>          <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a> = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l202"><span class="linenum"> 202</span></a>  
<a name="l203"><span class="linenum"> 203</span></a>  <span class="comment">        //if the filearea is &quot;item&quot; so we check the permissions like view/complete the feedback</span>
<a name="l204"><span class="linenum"> 204</span></a>          <a class="var it38574" onMouseOver="hilite(38574)" onMouseOut="lolite()" onClick="logVariable('canload')" href="../../_variables/canload.html">$canload</a> = false;
<a name="l205"><span class="linenum"> 205</span></a>  <span class="comment">        //first check whether the user has the complete capability</span>
<a name="l206"><span class="linenum"> 206</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/feedback:complete', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l207"><span class="linenum"> 207</span></a>              <a class="var it38574" onMouseOver="hilite(38574)" onMouseOut="lolite()" onClick="logVariable('canload')" href="../../_variables/canload.html">$canload</a> = true;
<a name="l208"><span class="linenum"> 208</span></a>          }
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">        //now we check whether the user has the view capability</span>
<a name="l211"><span class="linenum"> 211</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/feedback:view', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l212"><span class="linenum"> 212</span></a>              <a class="var it38574" onMouseOver="hilite(38574)" onMouseOut="lolite()" onClick="logVariable('canload')" href="../../_variables/canload.html">$canload</a> = true;
<a name="l213"><span class="linenum"> 213</span></a>          }
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>  <span class="comment">        //if the feedback is on frontpage and anonymous and the fullanonymous is allowed</span>
<a name="l216"><span class="linenum"> 216</span></a>  <span class="comment">        //so the file can be loaded too.</span>
<a name="l217"><span class="linenum"> 217</span></a>          if (isset(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('feedback_allowfullanonymous')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/feedback_allowfullanonymous.html">feedback_allowfullanonymous</a>)
<a name="l218"><span class="linenum"> 218</span></a>                      AND <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;feedback_allowfullanonymous
<a name="l219"><span class="linenum"> 219</span></a>                      AND <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="constant" onClick="logConstant('SITEID')" href="../../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>
<a name="l220"><span class="linenum"> 220</span></a>                      AND <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('anonymous')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/anonymous.html">anonymous</a> == <a class="constant" onClick="logConstant('FEEDBACK_ANONYMOUS_YES')" href="../../_constants/FEEDBACK_ANONYMOUS_YES.html" onMouseOver="constPopup(event,'FEEDBACK_ANONYMOUS_YES')">FEEDBACK_ANONYMOUS_YES</a> ) {
<a name="l221"><span class="linenum"> 221</span></a>              <a class="var it38574" onMouseOver="hilite(38574)" onMouseOut="lolite()" onClick="logVariable('canload')" href="../../_variables/canload.html">$canload</a> = true;
<a name="l222"><span class="linenum"> 222</span></a>          }
<a name="l223"><span class="linenum"> 223</span></a>  
<a name="l224"><span class="linenum"> 224</span></a>          if (!<a class="var it38574" onMouseOver="hilite(38574)" onMouseOut="lolite()" onClick="logVariable('canload')" href="../../_variables/canload.html">$canload</a>) {
<a name="l225"><span class="linenum"> 225</span></a>              return false;
<a name="l226"><span class="linenum"> 226</span></a>          }
<a name="l227"><span class="linenum"> 227</span></a>      } else if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'template') { //now we check files in templates
<a name="l228"><span class="linenum"> 228</span></a>          if (!<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_template', array('id'=&gt;<a class="var it7006" onMouseOver="hilite(7006)" onMouseOut="lolite()" onClick="logVariable('templateid')" href="../../_variables/templateid.html">$templateid</a>))) {
<a name="l229"><span class="linenum"> 229</span></a>              return false;
<a name="l230"><span class="linenum"> 230</span></a>          }
<a name="l231"><span class="linenum"> 231</span></a>  
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment">        //if the file is not public so the capability edititems has to be there</span>
<a name="l233"><span class="linenum"> 233</span></a>          if (!<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>-&gt;<a onClick="logVariable('ispublic')" class="var it39918" onMouseOver="hilite(39918)" onMouseOut="lolite()" href="../../_variables/ispublic.html">ispublic</a>) {
<a name="l234"><span class="linenum"> 234</span></a>              if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/feedback:edititems', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l235"><span class="linenum"> 235</span></a>                  return false;
<a name="l236"><span class="linenum"> 236</span></a>              }
<a name="l237"><span class="linenum"> 237</span></a>          } else { //on public templates, at least the user has to be logged in
<a name="l238"><span class="linenum"> 238</span></a>              if (!<a class="function" onClick="logFunction('isloggedin')" href="../../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>()) {
<a name="l239"><span class="linenum"> 239</span></a>                  return false;
<a name="l240"><span class="linenum"> 240</span></a>              }
<a name="l241"><span class="linenum"> 241</span></a>          }
<a name="l242"><span class="linenum"> 242</span></a>      } else {
<a name="l243"><span class="linenum"> 243</span></a>          return false;
<a name="l244"><span class="linenum"> 244</span></a>      }
<a name="l245"><span class="linenum"> 245</span></a>  
<a name="l246"><span class="linenum"> 246</span></a>      if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l247"><span class="linenum"> 247</span></a>          if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> !== 'item' and <a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> !== 'page_after_submit') {
<a name="l248"><span class="linenum"> 248</span></a>              return false;
<a name="l249"><span class="linenum"> 249</span></a>          }
<a name="l250"><span class="linenum"> 250</span></a>      }
<a name="l251"><span class="linenum"> 251</span></a>  
<a name="l252"><span class="linenum"> 252</span></a>      if (<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_COURSE')" href="../../_constants/CONTEXT_COURSE.html" onMouseOver="constPopup(event,'CONTEXT_COURSE')">CONTEXT_COURSE</a> || <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/contextlevel.html">contextlevel</a> == <a class="constant" onClick="logConstant('CONTEXT_SYSTEM')" href="../../_constants/CONTEXT_SYSTEM.html" onMouseOver="constPopup(event,'CONTEXT_SYSTEM')">CONTEXT_SYSTEM</a>) {
<a name="l253"><span class="linenum"> 253</span></a>          if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> !== 'template') {
<a name="l254"><span class="linenum"> 254</span></a>              return false;
<a name="l255"><span class="linenum"> 255</span></a>          }
<a name="l256"><span class="linenum"> 256</span></a>      }
<a name="l257"><span class="linenum"> 257</span></a>  
<a name="l258"><span class="linenum"> 258</span></a>      <a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it626" onMouseOver="hilite(626)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l259"><span class="linenum"> 259</span></a>      if (<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'page_after_submit') {
<a name="l260"><span class="linenum"> 260</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/{<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>}/mod_feedback/<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>/<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l261"><span class="linenum"> 261</span></a>      } else {
<a name="l262"><span class="linenum"> 262</span></a>          <a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/{<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>}/mod_feedback/<a class="var it548" onMouseOver="hilite(548)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>/{<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>}/<a class="var it1175" onMouseOver="hilite(1175)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l263"><span class="linenum"> 263</span></a>      }
<a name="l264"><span class="linenum"> 264</span></a>  
<a name="l265"><span class="linenum"> 265</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l266"><span class="linenum"> 266</span></a>  
<a name="l267"><span class="linenum"> 267</span></a>      if (!<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it1176" onMouseOver="hilite(1176)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a>)) or <a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l268"><span class="linenum"> 268</span></a>          return false;
<a name="l269"><span class="linenum"> 269</span></a>      }
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>  <span class="comment">    // finally send the file</span>
<a name="l272"><span class="linenum"> 272</span></a>      <a class="function" onClick="logFunction('send_stored_file')" href="../../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it155" onMouseOver="hilite(155)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, 0, 0, true, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>); <span class="comment">// download MUST be forced - security!</span>
<a name="l273"><span class="linenum"> 273</span></a>  
<a name="l274"><span class="linenum"> 274</span></a>      return false;
<a name="l275"><span class="linenum"> 275</span></a>  }
<a name="l276"><span class="linenum"> 276</span></a>  
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment">/**</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment"> * this will delete a given instance.</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment"> * all referenced data also will be deleted</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment"> *</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment"> * @global object</span>
<a name="l282"><span class="linenum"> 282</span></a>  <span class="comment"> * @param int $id the instanceid of feedback</span>
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment"> * @return boolean</span>
<a name="l284"><span class="linenum"> 284</span></a>  <span class="comment"> */</span>
<a name="l285"><span class="linenum"> 285</span></a>  function <a class="function" onClick="logFunction('feedback_delete_instance')" href="../../_functions/feedback_delete_instance.html" onMouseOver="funcPopup(event,'feedback_delete_instance')">feedback_delete_instance</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l286"><span class="linenum"> 286</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l287"><span class="linenum"> 287</span></a>  
<a name="l288"><span class="linenum"> 288</span></a>  <span class="comment">    //get all referenced items</span>
<a name="l289"><span class="linenum"> 289</span></a>      <a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_item', array('feedback'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l290"><span class="linenum"> 290</span></a>  
<a name="l291"><span class="linenum"> 291</span></a>  <span class="comment">    //deleting all referenced items and values</span>
<a name="l292"><span class="linenum"> 292</span></a>      if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a>)) {
<a name="l293"><span class="linenum"> 293</span></a>          foreach (<a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a> as <a class="var it5288" onMouseOver="hilite(5288)" onMouseOut="lolite()" onClick="logVariable('feedbackitem')" href="../../_variables/feedbackitem.html">$feedbackitem</a>) {
<a name="l294"><span class="linenum"> 294</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;feedback_value&quot;, array(&quot;item&quot;=&gt;<a class="var it5288" onMouseOver="hilite(5288)" onMouseOut="lolite()" onClick="logVariable('feedbackitem')" href="../../_variables/feedbackitem.html">$feedbackitem</a>-&gt;<a onClick="logVariable('id')" class="var it40554" onMouseOver="hilite(40554)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l295"><span class="linenum"> 295</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;feedback_valuetmp&quot;, array(&quot;item&quot;=&gt;<a class="var it5288" onMouseOver="hilite(5288)" onMouseOut="lolite()" onClick="logVariable('feedbackitem')" href="../../_variables/feedbackitem.html">$feedbackitem</a>-&gt;<a onClick="logVariable('id')" class="var it40554" onMouseOver="hilite(40554)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l296"><span class="linenum"> 296</span></a>          }
<a name="l297"><span class="linenum"> 297</span></a>          if (<a class="var it38575" onMouseOver="hilite(38575)" onMouseOut="lolite()" onClick="logVariable('delitems')" href="../../_variables/delitems.html">$delitems</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;feedback_item&quot;, array(&quot;feedback&quot;=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>))) {
<a name="l298"><span class="linenum"> 298</span></a>              foreach (<a class="var it38575" onMouseOver="hilite(38575)" onMouseOut="lolite()" onClick="logVariable('delitems')" href="../../_variables/delitems.html">$delitems</a> as <a class="var it38576" onMouseOver="hilite(38576)" onMouseOut="lolite()" onClick="logVariable('delitem')" href="../../_variables/delitem.html">$delitem</a>) {
<a name="l299"><span class="linenum"> 299</span></a>                  <a class="function" onClick="logFunction('feedback_delete_item')" href="../../_functions/feedback_delete_item.html" onMouseOver="funcPopup(event,'feedback_delete_item')">feedback_delete_item</a>(<a class="var it38576" onMouseOver="hilite(38576)" onMouseOut="lolite()" onClick="logVariable('delitem')" href="../../_variables/delitem.html">$delitem</a>-&gt;<a onClick="logVariable('id')" class="var it40561" onMouseOver="hilite(40561)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l300"><span class="linenum"> 300</span></a>              }
<a name="l301"><span class="linenum"> 301</span></a>          }
<a name="l302"><span class="linenum"> 302</span></a>      }
<a name="l303"><span class="linenum"> 303</span></a>  
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment">    //deleting the referenced tracking data</span>
<a name="l305"><span class="linenum"> 305</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_tracking', array('feedback'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l306"><span class="linenum"> 306</span></a>  
<a name="l307"><span class="linenum"> 307</span></a>  <span class="comment">    //deleting the completeds</span>
<a name="l308"><span class="linenum"> 308</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;feedback_completed&quot;, array(&quot;feedback&quot;=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l309"><span class="linenum"> 309</span></a>  
<a name="l310"><span class="linenum"> 310</span></a>  <span class="comment">    //deleting the unfinished completeds</span>
<a name="l311"><span class="linenum"> 311</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;feedback_completedtmp&quot;, array(&quot;feedback&quot;=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l312"><span class="linenum"> 312</span></a>  
<a name="l313"><span class="linenum"> 313</span></a>  <span class="comment">    //deleting old events</span>
<a name="l314"><span class="linenum"> 314</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('event', array('modulename'=&gt;'feedback', 'instance'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l315"><span class="linenum"> 315</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;feedback&quot;, array(&quot;id&quot;=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l316"><span class="linenum"> 316</span></a>  }
<a name="l317"><span class="linenum"> 317</span></a>  
<a name="l318"><span class="linenum"> 318</span></a>  <span class="comment">/**</span>
<a name="l319"><span class="linenum"> 319</span></a>  <span class="comment"> * this is called after deleting all instances if the course will be deleted.</span>
<a name="l320"><span class="linenum"> 320</span></a>  <span class="comment"> * only templates have to be deleted</span>
<a name="l321"><span class="linenum"> 321</span></a>  <span class="comment"> *</span>
<a name="l322"><span class="linenum"> 322</span></a>  <span class="comment"> * @global object</span>
<a name="l323"><span class="linenum"> 323</span></a>  <span class="comment"> * @param object $course</span>
<a name="l324"><span class="linenum"> 324</span></a>  <span class="comment"> * @return boolean</span>
<a name="l325"><span class="linenum"> 325</span></a>  <span class="comment"> */</span>
<a name="l326"><span class="linenum"> 326</span></a>  function <a class="function" onClick="logFunction('feedback_delete_course')" href="../../_functions/feedback_delete_course.html" onMouseOver="funcPopup(event,'feedback_delete_course')">feedback_delete_course</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l327"><span class="linenum"> 327</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l328"><span class="linenum"> 328</span></a>  
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">    //delete all templates of given course</span>
<a name="l330"><span class="linenum"> 330</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_template', array('course'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l331"><span class="linenum"> 331</span></a>  }
<a name="l332"><span class="linenum"> 332</span></a>  
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment">/**</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment"> * Return a small object with summary information about what a</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment"> * user has done with a given particular instance of this module</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment"> * Used for user activity reports.</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment"> * $return-&gt;time = the time they did it</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment"> * $return-&gt;info = a short text description</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment"> *</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment"> * @param object $course</span>
<a name="l341"><span class="linenum"> 341</span></a>  <span class="comment"> * @param object $user</span>
<a name="l342"><span class="linenum"> 342</span></a>  <span class="comment"> * @param object $mod</span>
<a name="l343"><span class="linenum"> 343</span></a>  <span class="comment"> * @param object $feedback</span>
<a name="l344"><span class="linenum"> 344</span></a>  <span class="comment"> * @return object</span>
<a name="l345"><span class="linenum"> 345</span></a>  <span class="comment"> */</span>
<a name="l346"><span class="linenum"> 346</span></a>  function <a class="function" onClick="logFunction('feedback_user_outline')" href="../../_functions/feedback_user_outline.html" onMouseOver="funcPopup(event,'feedback_user_outline')">feedback_user_outline</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>) {
<a name="l347"><span class="linenum"> 347</span></a>      return null;
<a name="l348"><span class="linenum"> 348</span></a>  }
<a name="l349"><span class="linenum"> 349</span></a>  
<a name="l350"><span class="linenum"> 350</span></a>  <span class="comment">/**</span>
<a name="l351"><span class="linenum"> 351</span></a>  <span class="comment"> * Returns all users who has completed a specified feedback since a given time</span>
<a name="l352"><span class="linenum"> 352</span></a>  <span class="comment"> * many thanks to Manolescu Dorel, who contributed these two functions</span>
<a name="l353"><span class="linenum"> 353</span></a>  <span class="comment"> *</span>
<a name="l354"><span class="linenum"> 354</span></a>  <span class="comment"> * @global object</span>
<a name="l355"><span class="linenum"> 355</span></a>  <span class="comment"> * @global object</span>
<a name="l356"><span class="linenum"> 356</span></a>  <span class="comment"> * @global object</span>
<a name="l357"><span class="linenum"> 357</span></a>  <span class="comment"> * @global object</span>
<a name="l358"><span class="linenum"> 358</span></a>  <span class="comment"> * @uses CONTEXT_MODULE</span>
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment"> * @param array $activities Passed by reference</span>
<a name="l360"><span class="linenum"> 360</span></a>  <span class="comment"> * @param int $index Passed by reference</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment"> * @param int $timemodified Timestamp</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment"> * @param int $cmid</span>
<a name="l364"><span class="linenum"> 364</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l365"><span class="linenum"> 365</span></a>  <span class="comment"> * @param int $groupid</span>
<a name="l366"><span class="linenum"> 366</span></a>  <span class="comment"> * @return void</span>
<a name="l367"><span class="linenum"> 367</span></a>  <span class="comment"> */</span>
<a name="l368"><span class="linenum"> 368</span></a>  function <a class="function" onClick="logFunction('feedback_get_recent_mod_activity')" href="../../_functions/feedback_get_recent_mod_activity.html" onMouseOver="funcPopup(event,'feedback_get_recent_mod_activity')">feedback_get_recent_mod_activity</a>(&amp;<a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../../_variables/activities.html">$activities</a>, &amp;<a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>,
<a name="l369"><span class="linenum"> 369</span></a>                                            <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../_variables/timemodified.html">$timemodified</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>,
<a name="l370"><span class="linenum"> 370</span></a>                                            <a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=&quot;&quot;, <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>=&quot;&quot;) {
<a name="l371"><span class="linenum"> 371</span></a>  
<a name="l372"><span class="linenum"> 372</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l373"><span class="linenum"> 373</span></a>  
<a name="l374"><span class="linenum"> 374</span></a>      if (<a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>-&gt;<a onClick="logVariable('id')" class="var it39504" onMouseOver="hilite(39504)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l375"><span class="linenum"> 375</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>;
<a name="l376"><span class="linenum"> 376</span></a>      } else {
<a name="l377"><span class="linenum"> 377</span></a>          <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>));
<a name="l378"><span class="linenum"> 378</span></a>      }
<a name="l379"><span class="linenum"> 379</span></a>  
<a name="l380"><span class="linenum"> 380</span></a>      <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l381"><span class="linenum"> 381</span></a>  
<a name="l382"><span class="linenum"> 382</span></a>      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('cms')" class="var it39598" onMouseOver="hilite(39598)" onMouseOut="lolite()" href="../../_variables/cms.html">cms</a>[<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>];
<a name="l383"><span class="linenum"> 383</span></a>  
<a name="l384"><span class="linenum"> 384</span></a>      <a class="var it38577" onMouseOver="hilite(38577)" onMouseOut="lolite()" onClick="logVariable('sqlargs')" href="../../_variables/sqlargs.html">$sqlargs</a> = array();
<a name="l385"><span class="linenum"> 385</span></a>  
<a name="l386"><span class="linenum"> 386</span></a>      <a class="var it2982" onMouseOver="hilite(2982)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>('u', null, 'useridagain');
<a name="l387"><span class="linenum"> 387</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot; SELECT fk . * , fc . * , <a class="var it2982" onMouseOver="hilite(2982)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a>
<a name="l388"><span class="linenum"> 388</span></a>                  FROM {feedback_completed} fc
<a name="l389"><span class="linenum"> 389</span></a>                      JOIN {feedback} fk ON fk.id = fc.feedback
<a name="l390"><span class="linenum"> 390</span></a>                      JOIN {user} u ON u.id = fc.userid &quot;;
<a name="l391"><span class="linenum"> 391</span></a>  
<a name="l392"><span class="linenum"> 392</span></a>      if (<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) {
<a name="l393"><span class="linenum"> 393</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> .= &quot; JOIN {groups_members} gm ON  gm.userid=u.id &quot;;
<a name="l394"><span class="linenum"> 394</span></a>      }
<a name="l395"><span class="linenum"> 395</span></a>  
<a name="l396"><span class="linenum"> 396</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> .= &quot; WHERE fc.timemodified &gt; ?
<a name="l397"><span class="linenum"> 397</span></a>                  AND fk.id = ?
<a name="l398"><span class="linenum"> 398</span></a>                  AND fc.anonymous_response = ?&quot;;
<a name="l399"><span class="linenum"> 399</span></a>      <a class="var it38577" onMouseOver="hilite(38577)" onMouseOut="lolite()" onClick="logVariable('sqlargs')" href="../../_variables/sqlargs.html">$sqlargs</a>[] = <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../_variables/timemodified.html">$timemodified</a>;
<a name="l400"><span class="linenum"> 400</span></a>      <a class="var it38577" onMouseOver="hilite(38577)" onMouseOut="lolite()" onClick="logVariable('sqlargs')" href="../../_variables/sqlargs.html">$sqlargs</a>[] = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l401"><span class="linenum"> 401</span></a>      <a class="var it38577" onMouseOver="hilite(38577)" onMouseOut="lolite()" onClick="logVariable('sqlargs')" href="../../_variables/sqlargs.html">$sqlargs</a>[] = <a class="constant" onClick="logConstant('FEEDBACK_ANONYMOUS_NO')" href="../../_constants/FEEDBACK_ANONYMOUS_NO.html" onMouseOver="constPopup(event,'FEEDBACK_ANONYMOUS_NO')">FEEDBACK_ANONYMOUS_NO</a>;
<a name="l402"><span class="linenum"> 402</span></a>  
<a name="l403"><span class="linenum"> 403</span></a>      if (<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l404"><span class="linenum"> 404</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> .= &quot; AND u.id = ? &quot;;
<a name="l405"><span class="linenum"> 405</span></a>          <a class="var it38577" onMouseOver="hilite(38577)" onMouseOut="lolite()" onClick="logVariable('sqlargs')" href="../../_variables/sqlargs.html">$sqlargs</a>[] = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l406"><span class="linenum"> 406</span></a>      }
<a name="l407"><span class="linenum"> 407</span></a>  
<a name="l408"><span class="linenum"> 408</span></a>      if (<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) {
<a name="l409"><span class="linenum"> 409</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> .= &quot; AND gm.groupid = ? &quot;;
<a name="l410"><span class="linenum"> 410</span></a>          <a class="var it38577" onMouseOver="hilite(38577)" onMouseOut="lolite()" onClick="logVariable('sqlargs')" href="../../_variables/sqlargs.html">$sqlargs</a>[] = <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>;
<a name="l411"><span class="linenum"> 411</span></a>      }
<a name="l412"><span class="linenum"> 412</span></a>  
<a name="l413"><span class="linenum"> 413</span></a>      if (!<a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it38577" onMouseOver="hilite(38577)" onMouseOut="lolite()" onClick="logVariable('sqlargs')" href="../../_variables/sqlargs.html">$sqlargs</a>)) {
<a name="l414"><span class="linenum"> 414</span></a>          return;
<a name="l415"><span class="linenum"> 415</span></a>      }
<a name="l416"><span class="linenum"> 416</span></a>  
<a name="l417"><span class="linenum"> 417</span></a>      <a class="var it23204" onMouseOver="hilite(23204)" onMouseOut="lolite()" onClick="logVariable('cm_context')" href="../../_variables/cm_context.html">$cm_context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l418"><span class="linenum"> 418</span></a>  
<a name="l419"><span class="linenum"> 419</span></a>      if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/feedback:view', <a class="var it23204" onMouseOver="hilite(23204)" onMouseOut="lolite()" onClick="logVariable('cm_context')" href="../../_variables/cm_context.html">$cm_context</a>)) {
<a name="l420"><span class="linenum"> 420</span></a>          return;
<a name="l421"><span class="linenum"> 421</span></a>      }
<a name="l422"><span class="linenum"> 422</span></a>  
<a name="l423"><span class="linenum"> 423</span></a>      <a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('accessallgroups')" href="../../_variables/accessallgroups.html">$accessallgroups</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:accessallgroups', <a class="var it23204" onMouseOver="hilite(23204)" onMouseOut="lolite()" onClick="logVariable('cm_context')" href="../../_variables/cm_context.html">$cm_context</a>);
<a name="l424"><span class="linenum"> 424</span></a>      <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>   = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it23204" onMouseOver="hilite(23204)" onMouseOut="lolite()" onClick="logVariable('cm_context')" href="../../_variables/cm_context.html">$cm_context</a>);
<a name="l425"><span class="linenum"> 425</span></a>      <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a>       = <a class="function" onClick="logFunction('groups_get_activity_groupmode')" href="../../_functions/groups_get_activity_groupmode.html" onMouseOver="funcPopup(event,'groups_get_activity_groupmode')">groups_get_activity_groupmode</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l426"><span class="linenum"> 426</span></a>  
<a name="l427"><span class="linenum"> 427</span></a>      <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('aname')" href="../../_variables/aname.html">$aname</a> = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, true);
<a name="l428"><span class="linenum"> 428</span></a>      foreach (<a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a> as <a class="var it5288" onMouseOver="hilite(5288)" onMouseOut="lolite()" onClick="logVariable('feedbackitem')" href="../../_variables/feedbackitem.html">$feedbackitem</a>) {
<a name="l429"><span class="linenum"> 429</span></a>          if (<a class="var it5288" onMouseOver="hilite(5288)" onMouseOut="lolite()" onClick="logVariable('feedbackitem')" href="../../_variables/feedbackitem.html">$feedbackitem</a>-&gt;<a onClick="logVariable('userid')" class="var it40554" onMouseOver="hilite(40554)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> != <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l430"><span class="linenum"> 430</span></a>  
<a name="l431"><span class="linenum"> 431</span></a>              if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a> and !<a class="var it7070" onMouseOver="hilite(7070)" onMouseOut="lolite()" onClick="logVariable('accessallgroups')" href="../../_variables/accessallgroups.html">$accessallgroups</a>) {
<a name="l432"><span class="linenum"> 432</span></a>                  <a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('usersgroups')" href="../../_variables/usersgroups.html">$usersgroups</a> = <a class="function" onClick="logFunction('groups_get_all_groups')" href="../../_functions/groups_get_all_groups.html" onMouseOver="funcPopup(event,'groups_get_all_groups')">groups_get_all_groups</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l433"><span class="linenum"> 433</span></a>                                                       <a class="var it5288" onMouseOver="hilite(5288)" onMouseOut="lolite()" onClick="logVariable('feedbackitem')" href="../../_variables/feedbackitem.html">$feedbackitem</a>-&gt;<a onClick="logVariable('userid')" class="var it40554" onMouseOver="hilite(40554)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>,
<a name="l434"><span class="linenum"> 434</span></a>                                                       <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>);
<a name="l435"><span class="linenum"> 435</span></a>                  if (!<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('usersgroups')" href="../../_variables/usersgroups.html">$usersgroups</a>)) {
<a name="l436"><span class="linenum"> 436</span></a>                      continue;
<a name="l437"><span class="linenum"> 437</span></a>                  }
<a name="l438"><span class="linenum"> 438</span></a>                  <a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('usersgroups')" href="../../_variables/usersgroups.html">$usersgroups</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('usersgroups')" href="../../_variables/usersgroups.html">$usersgroups</a>);
<a name="l439"><span class="linenum"> 439</span></a>                  <a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('intersect')" href="../../_variables/intersect.html">$intersect</a> = <a class="phpfunction" onClick="logFunction('array_intersect')" href="../../_functions/array_intersect.html" onMouseOver="phpfuncPopup(event,'array_intersect')">array_intersect</a>(<a class="var it7065" onMouseOver="hilite(7065)" onMouseOut="lolite()" onClick="logVariable('usersgroups')" href="../../_variables/usersgroups.html">$usersgroups</a>, <a class="var it1702" onMouseOver="hilite(1702)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a class="function" onClick="logFunction('get_groups')" href="../../_functions/get_groups.html" onMouseOver="funcPopup(event,'get_groups')">get_groups</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupingid')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupingid.html">groupingid</a>));
<a name="l440"><span class="linenum"> 440</span></a>                  if (empty(<a class="var it7066" onMouseOver="hilite(7066)" onMouseOut="lolite()" onClick="logVariable('intersect')" href="../../_variables/intersect.html">$intersect</a>)) {
<a name="l441"><span class="linenum"> 441</span></a>                      continue;
<a name="l442"><span class="linenum"> 442</span></a>                  }
<a name="l443"><span class="linenum"> 443</span></a>              }
<a name="l444"><span class="linenum"> 444</span></a>          }
<a name="l445"><span class="linenum"> 445</span></a>  
<a name="l446"><span class="linenum"> 446</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a> = new stdClass();
<a name="l447"><span class="linenum"> 447</span></a>  
<a name="l448"><span class="linenum"> 448</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('type')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>      = 'feedback';
<a name="l449"><span class="linenum"> 449</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>      = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l450"><span class="linenum"> 450</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('name')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>      = <a class="var it7071" onMouseOver="hilite(7071)" onMouseOut="lolite()" onClick="logVariable('aname')" href="../../_variables/aname.html">$aname</a>;
<a name="l451"><span class="linenum"> 451</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/sectionnum.html">sectionnum</a>= <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/sectionnum.html">sectionnum</a>;
<a name="l452"><span class="linenum"> 452</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('timestamp')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/timestamp.html">timestamp</a> = <a class="var it5288" onMouseOver="hilite(5288)" onMouseOut="lolite()" onClick="logVariable('feedbackitem')" href="../../_variables/feedbackitem.html">$feedbackitem</a>-&gt;<a onClick="logVariable('timemodified')" class="var it40554" onMouseOver="hilite(40554)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l453"><span class="linenum"> 453</span></a>  
<a name="l454"><span class="linenum"> 454</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/content.html">content</a> = new stdClass();
<a name="l455"><span class="linenum"> 455</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;feedbackid = <a class="var it5288" onMouseOver="hilite(5288)" onMouseOut="lolite()" onClick="logVariable('feedbackitem')" href="../../_variables/feedbackitem.html">$feedbackitem</a>-&gt;<a onClick="logVariable('id')" class="var it40554" onMouseOver="hilite(40554)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l456"><span class="linenum"> 456</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;feedbackuserid = <a class="var it5288" onMouseOver="hilite(5288)" onMouseOut="lolite()" onClick="logVariable('feedbackitem')" href="../../_variables/feedbackitem.html">$feedbackitem</a>-&gt;<a onClick="logVariable('userid')" class="var it40554" onMouseOver="hilite(40554)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>;
<a name="l457"><span class="linenum"> 457</span></a>  
<a name="l458"><span class="linenum"> 458</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('user')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/user.html">user</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('unalias')" href="../../_functions/unalias.html" onMouseOver="funcPopup(event,'unalias')">unalias</a>(<a class="var it5288" onMouseOver="hilite(5288)" onMouseOut="lolite()" onClick="logVariable('feedbackitem')" href="../../_variables/feedbackitem.html">$feedbackitem</a>, null, 'useridagain');
<a name="l459"><span class="linenum"> 459</span></a>          <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('user')" class="var it40213" onMouseOver="hilite(40213)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>-&gt;fullname = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it5288" onMouseOver="hilite(5288)" onMouseOut="lolite()" onClick="logVariable('feedbackitem')" href="../../_variables/feedbackitem.html">$feedbackitem</a>, <a class="var it7061" onMouseOver="hilite(7061)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>);
<a name="l460"><span class="linenum"> 460</span></a>  
<a name="l461"><span class="linenum"> 461</span></a>          <a class="var it568" onMouseOver="hilite(568)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../../_variables/activities.html">$activities</a>[<a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>++] = <a class="var it11493" onMouseOver="hilite(11493)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>;
<a name="l462"><span class="linenum"> 462</span></a>      }
<a name="l463"><span class="linenum"> 463</span></a>  
<a name="l464"><span class="linenum"> 464</span></a>      return;
<a name="l465"><span class="linenum"> 465</span></a>  }
<a name="l466"><span class="linenum"> 466</span></a>  
<a name="l467"><span class="linenum"> 467</span></a>  <span class="comment">/**</span>
<a name="l468"><span class="linenum"> 468</span></a>  <span class="comment"> * Prints all users who has completed a specified feedback since a given time</span>
<a name="l469"><span class="linenum"> 469</span></a>  <span class="comment"> * many thanks to Manolescu Dorel, who contributed these two functions</span>
<a name="l470"><span class="linenum"> 470</span></a>  <span class="comment"> *</span>
<a name="l471"><span class="linenum"> 471</span></a>  <span class="comment"> * @global object</span>
<a name="l472"><span class="linenum"> 472</span></a>  <span class="comment"> * @param object $activity</span>
<a name="l473"><span class="linenum"> 473</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l474"><span class="linenum"> 474</span></a>  <span class="comment"> * @param string $detail</span>
<a name="l475"><span class="linenum"> 475</span></a>  <span class="comment"> * @param array $modnames</span>
<a name="l476"><span class="linenum"> 476</span></a>  <span class="comment"> * @return void Output is echo'd</span>
<a name="l477"><span class="linenum"> 477</span></a>  <span class="comment"> */</span>
<a name="l478"><span class="linenum"> 478</span></a>  function <a class="function" onClick="logFunction('feedback_print_recent_mod_activity')" href="../../_functions/feedback_print_recent_mod_activity.html" onMouseOver="funcPopup(event,'feedback_print_recent_mod_activity')">feedback_print_recent_mod_activity</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it6083" onMouseOver="hilite(6083)" onMouseOut="lolite()" onClick="logVariable('detail')" href="../../_variables/detail.html">$detail</a>, <a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../../_variables/modnames.html">$modnames</a>) {
<a name="l479"><span class="linenum"> 479</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l480"><span class="linenum"> 480</span></a>  
<a name="l481"><span class="linenum"> 481</span></a>      echo '&lt;table border=&quot;0&quot; cellpadding=&quot;3&quot; cellspacing=&quot;0&quot; class=&quot;forum-recent&quot;&gt;';
<a name="l482"><span class="linenum"> 482</span></a>  
<a name="l483"><span class="linenum"> 483</span></a>      echo &quot;&lt;tr&gt;&lt;td class=\&quot;userpicture\&quot; valign=\&quot;top\&quot;&gt;&quot;;
<a name="l484"><span class="linenum"> 484</span></a>      echo <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('user_picture')" href="../../_functions/user_picture.html" onMouseOver="funcPopup(event,'user_picture')">user_picture</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>, array('courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>));
<a name="l485"><span class="linenum"> 485</span></a>      echo &quot;&lt;/td&gt;&lt;td&gt;&quot;;
<a name="l486"><span class="linenum"> 486</span></a>  
<a name="l487"><span class="linenum"> 487</span></a>      if (<a class="var it6083" onMouseOver="hilite(6083)" onMouseOut="lolite()" onClick="logVariable('detail')" href="../../_variables/detail.html">$detail</a>) {
<a name="l488"><span class="linenum"> 488</span></a>          <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../../_variables/modname.html">$modname</a> = <a class="var it7072" onMouseOver="hilite(7072)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../../_variables/modnames.html">$modnames</a>[<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('type')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>];
<a name="l489"><span class="linenum"> 489</span></a>          echo '&lt;div class=&quot;title&quot;&gt;';
<a name="l490"><span class="linenum"> 490</span></a>          echo &quot;&lt;img src=\&quot;&quot; . <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('icon', <a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('type')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>) . &quot;\&quot; &quot;.
<a name="l491"><span class="linenum"> 491</span></a>               &quot;class=\&quot;icon\&quot; alt=\&quot;<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('modname')" href="../../_variables/modname.html">$modname</a>\&quot; /&gt;&quot;;
<a name="l492"><span class="linenum"> 492</span></a>          echo &quot;&lt;a href=\&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/feedback/view.php?id={<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('cmid')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>}\&quot;&gt;{<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('name')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>}&lt;/a&gt;&quot;;
<a name="l493"><span class="linenum"> 493</span></a>          echo '&lt;/div&gt;';
<a name="l494"><span class="linenum"> 494</span></a>      }
<a name="l495"><span class="linenum"> 495</span></a>  
<a name="l496"><span class="linenum"> 496</span></a>      echo '&lt;div class=&quot;title&quot;&gt;';
<a name="l497"><span class="linenum"> 497</span></a>      echo '&lt;/div&gt;';
<a name="l498"><span class="linenum"> 498</span></a>  
<a name="l499"><span class="linenum"> 499</span></a>      echo '&lt;div class=&quot;user&quot;&gt;';
<a name="l500"><span class="linenum"> 500</span></a>      echo &quot;&lt;a href=\&quot;<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/user/view.php?id={<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>-&gt;id}&amp;amp;course=<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>\&quot;&gt;&quot;
<a name="l501"><span class="linenum"> 501</span></a>           .&quot;{<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>-&gt;fullname}&lt;/a&gt; - &quot;.<a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it4373" onMouseOver="hilite(4373)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('timestamp')" class="var it40070" onMouseOver="hilite(40070)" onMouseOut="lolite()" href="../../_variables/timestamp.html">timestamp</a>);
<a name="l502"><span class="linenum"> 502</span></a>      echo '&lt;/div&gt;';
<a name="l503"><span class="linenum"> 503</span></a>  
<a name="l504"><span class="linenum"> 504</span></a>      echo &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;
<a name="l505"><span class="linenum"> 505</span></a>  
<a name="l506"><span class="linenum"> 506</span></a>      return;
<a name="l507"><span class="linenum"> 507</span></a>  }
<a name="l508"><span class="linenum"> 508</span></a>  
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment">/**</span>
<a name="l510"><span class="linenum"> 510</span></a>  <span class="comment"> * Obtains the automatic completion state for this feedback based on the condition</span>
<a name="l511"><span class="linenum"> 511</span></a>  <span class="comment"> * in feedback settings.</span>
<a name="l512"><span class="linenum"> 512</span></a>  <span class="comment"> *</span>
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment"> * @param object $course Course</span>
<a name="l514"><span class="linenum"> 514</span></a>  <span class="comment"> * @param object $cm Course-module</span>
<a name="l515"><span class="linenum"> 515</span></a>  <span class="comment"> * @param int $userid User ID</span>
<a name="l516"><span class="linenum"> 516</span></a>  <span class="comment"> * @param bool $type Type of comparison (or/and; can be used as return value if no conditions)</span>
<a name="l517"><span class="linenum"> 517</span></a>  <span class="comment"> * @return bool True if completed, false if not, $type if conditions not set.</span>
<a name="l518"><span class="linenum"> 518</span></a>  <span class="comment"> */</span>
<a name="l519"><span class="linenum"> 519</span></a>  function <a class="function" onClick="logFunction('feedback_get_completion_state')" href="../../_functions/feedback_get_completion_state.html" onMouseOver="funcPopup(event,'feedback_get_completion_state')">feedback_get_completion_state</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l520"><span class="linenum"> 520</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l521"><span class="linenum"> 521</span></a>  
<a name="l522"><span class="linenum"> 522</span></a>  <span class="comment">    // Get feedback details</span>
<a name="l523"><span class="linenum"> 523</span></a>      <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback', array('id'=&gt;<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>), '*', <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l524"><span class="linenum"> 524</span></a>  
<a name="l525"><span class="linenum"> 525</span></a>  <span class="comment">    // If completion option is enabled, evaluate it and return true/false</span>
<a name="l526"><span class="linenum"> 526</span></a>      if (<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a>) {
<a name="l527"><span class="linenum"> 527</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('userid'=&gt;<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 'feedback'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l528"><span class="linenum"> 528</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('feedback_tracking', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l529"><span class="linenum"> 529</span></a>      } else {
<a name="l530"><span class="linenum"> 530</span></a>  <span class="comment">        // Completion option is not enabled so just return $type</span>
<a name="l531"><span class="linenum"> 531</span></a>          return <a class="var it494" onMouseOver="hilite(494)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>;
<a name="l532"><span class="linenum"> 532</span></a>      }
<a name="l533"><span class="linenum"> 533</span></a>  }
<a name="l534"><span class="linenum"> 534</span></a>  
<a name="l535"><span class="linenum"> 535</span></a>  
<a name="l536"><span class="linenum"> 536</span></a>  <span class="comment">/**</span>
<a name="l537"><span class="linenum"> 537</span></a>  <span class="comment"> * Print a detailed representation of what a  user has done with</span>
<a name="l538"><span class="linenum"> 538</span></a>  <span class="comment"> * a given particular instance of this module, for user activity reports.</span>
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment"> *</span>
<a name="l540"><span class="linenum"> 540</span></a>  <span class="comment"> * @param object $course</span>
<a name="l541"><span class="linenum"> 541</span></a>  <span class="comment"> * @param object $user</span>
<a name="l542"><span class="linenum"> 542</span></a>  <span class="comment"> * @param object $mod</span>
<a name="l543"><span class="linenum"> 543</span></a>  <span class="comment"> * @param object $feedback</span>
<a name="l544"><span class="linenum"> 544</span></a>  <span class="comment"> * @return bool</span>
<a name="l545"><span class="linenum"> 545</span></a>  <span class="comment"> */</span>
<a name="l546"><span class="linenum"> 546</span></a>  function <a class="function" onClick="logFunction('feedback_user_complete')" href="../../_functions/feedback_user_complete.html" onMouseOver="funcPopup(event,'feedback_user_complete')">feedback_user_complete</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it414" onMouseOver="hilite(414)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>) {
<a name="l547"><span class="linenum"> 547</span></a>      return true;
<a name="l548"><span class="linenum"> 548</span></a>  }
<a name="l549"><span class="linenum"> 549</span></a>  
<a name="l550"><span class="linenum"> 550</span></a>  <span class="comment">/**</span>
<a name="l551"><span class="linenum"> 551</span></a>  <span class="comment"> * @return bool true</span>
<a name="l552"><span class="linenum"> 552</span></a>  <span class="comment"> */</span>
<a name="l553"><span class="linenum"> 553</span></a>  function <a class="function" onClick="logFunction('feedback_cron')" href="../../_functions/feedback_cron.html" onMouseOver="funcPopup(event,'feedback_cron')">feedback_cron</a> () {
<a name="l554"><span class="linenum"> 554</span></a>      return true;
<a name="l555"><span class="linenum"> 555</span></a>  }
<a name="l556"><span class="linenum"> 556</span></a>  
<a name="l557"><span class="linenum"> 557</span></a>  <span class="comment">/**</span>
<a name="l558"><span class="linenum"> 558</span></a>  <span class="comment"> * @return bool false</span>
<a name="l559"><span class="linenum"> 559</span></a>  <span class="comment"> */</span>
<a name="l560"><span class="linenum"> 560</span></a>  function <a class="function" onClick="logFunction('feedback_scale_used')" href="../../_functions/feedback_scale_used.html" onMouseOver="funcPopup(event,'feedback_scale_used')">feedback_scale_used</a> (<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>, <a class="var it3927" onMouseOver="hilite(3927)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>) {
<a name="l561"><span class="linenum"> 561</span></a>      return false;
<a name="l562"><span class="linenum"> 562</span></a>  }
<a name="l563"><span class="linenum"> 563</span></a>  
<a name="l564"><span class="linenum"> 564</span></a>  <span class="comment">/**</span>
<a name="l565"><span class="linenum"> 565</span></a>  <span class="comment"> * Checks if scale is being used by any instance of feedback</span>
<a name="l566"><span class="linenum"> 566</span></a>  <span class="comment"> *</span>
<a name="l567"><span class="linenum"> 567</span></a>  <span class="comment"> * This is used to find out if scale used anywhere</span>
<a name="l568"><span class="linenum"> 568</span></a>  <span class="comment"> * @param $scaleid int</span>
<a name="l569"><span class="linenum"> 569</span></a>  <span class="comment"> * @return boolean True if the scale is used by any assignment</span>
<a name="l570"><span class="linenum"> 570</span></a>  <span class="comment"> */</span>
<a name="l571"><span class="linenum"> 571</span></a>  function <a class="function" onClick="logFunction('feedback_scale_used_anywhere')" href="../../_functions/feedback_scale_used_anywhere.html" onMouseOver="funcPopup(event,'feedback_scale_used_anywhere')">feedback_scale_used_anywhere</a>(<a class="var it3927" onMouseOver="hilite(3927)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>) {
<a name="l572"><span class="linenum"> 572</span></a>      return false;
<a name="l573"><span class="linenum"> 573</span></a>  }
<a name="l574"><span class="linenum"> 574</span></a>  
<a name="l575"><span class="linenum"> 575</span></a>  <span class="comment">/**</span>
<a name="l576"><span class="linenum"> 576</span></a>  <span class="comment"> * List the actions that correspond to a view of this module.</span>
<a name="l577"><span class="linenum"> 577</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l578"><span class="linenum"> 578</span></a>  <span class="comment"> *</span>
<a name="l579"><span class="linenum"> 579</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l580"><span class="linenum"> 580</span></a>  <span class="comment"> *       crud = 'r' and edulevel = LEVEL_PARTICIPATING will</span>
<a name="l581"><span class="linenum"> 581</span></a>  <span class="comment"> *       be considered as view action.</span>
<a name="l582"><span class="linenum"> 582</span></a>  <span class="comment"> *</span>
<a name="l583"><span class="linenum"> 583</span></a>  <span class="comment"> * @return array</span>
<a name="l584"><span class="linenum"> 584</span></a>  <span class="comment"> */</span>
<a name="l585"><span class="linenum"> 585</span></a>  function <a class="function" onClick="logFunction('feedback_get_view_actions')" href="../../_functions/feedback_get_view_actions.html" onMouseOver="funcPopup(event,'feedback_get_view_actions')">feedback_get_view_actions</a>() {
<a name="l586"><span class="linenum"> 586</span></a>      return array('view', 'view all');
<a name="l587"><span class="linenum"> 587</span></a>  }
<a name="l588"><span class="linenum"> 588</span></a>  
<a name="l589"><span class="linenum"> 589</span></a>  <span class="comment">/**</span>
<a name="l590"><span class="linenum"> 590</span></a>  <span class="comment"> * List the actions that correspond to a post of this module.</span>
<a name="l591"><span class="linenum"> 591</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l592"><span class="linenum"> 592</span></a>  <span class="comment"> *</span>
<a name="l593"><span class="linenum"> 593</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l594"><span class="linenum"> 594</span></a>  <span class="comment"> *       crud = ('c' || 'u' || 'd') and edulevel = LEVEL_PARTICIPATING</span>
<a name="l595"><span class="linenum"> 595</span></a>  <span class="comment"> *       will be considered as post action.</span>
<a name="l596"><span class="linenum"> 596</span></a>  <span class="comment"> *</span>
<a name="l597"><span class="linenum"> 597</span></a>  <span class="comment"> * @return array</span>
<a name="l598"><span class="linenum"> 598</span></a>  <span class="comment"> */</span>
<a name="l599"><span class="linenum"> 599</span></a>  function <a class="function" onClick="logFunction('feedback_get_post_actions')" href="../../_functions/feedback_get_post_actions.html" onMouseOver="funcPopup(event,'feedback_get_post_actions')">feedback_get_post_actions</a>() {
<a name="l600"><span class="linenum"> 600</span></a>      return array('submit');
<a name="l601"><span class="linenum"> 601</span></a>  }
<a name="l602"><span class="linenum"> 602</span></a>  
<a name="l603"><span class="linenum"> 603</span></a>  <span class="comment">/**</span>
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment"> * This function is used by the reset_course_userdata function in moodlelib.</span>
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment"> * This function will remove all responses from the specified feedback</span>
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment"> * and clean up any related data.</span>
<a name="l607"><span class="linenum"> 607</span></a>  <span class="comment"> *</span>
<a name="l608"><span class="linenum"> 608</span></a>  <span class="comment"> * @global object</span>
<a name="l609"><span class="linenum"> 609</span></a>  <span class="comment"> * @global object</span>
<a name="l610"><span class="linenum"> 610</span></a>  <span class="comment"> * @uses FEEDBACK_RESETFORM_RESET</span>
<a name="l611"><span class="linenum"> 611</span></a>  <span class="comment"> * @uses FEEDBACK_RESETFORM_DROP</span>
<a name="l612"><span class="linenum"> 612</span></a>  <span class="comment"> * @param object $data the data submitted from the reset course.</span>
<a name="l613"><span class="linenum"> 613</span></a>  <span class="comment"> * @return array status array</span>
<a name="l614"><span class="linenum"> 614</span></a>  <span class="comment"> */</span>
<a name="l615"><span class="linenum"> 615</span></a>  function <a class="function" onClick="logFunction('feedback_reset_userdata')" href="../../_functions/feedback_reset_userdata.html" onMouseOver="funcPopup(event,'feedback_reset_userdata')">feedback_reset_userdata</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l616"><span class="linenum"> 616</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l617"><span class="linenum"> 617</span></a>  
<a name="l618"><span class="linenum"> 618</span></a>      <a class="var it38578" onMouseOver="hilite(38578)" onMouseOut="lolite()" onClick="logVariable('resetfeedbacks')" href="../../_variables/resetfeedbacks.html">$resetfeedbacks</a> = array();
<a name="l619"><span class="linenum"> 619</span></a>      <a class="var it38579" onMouseOver="hilite(38579)" onMouseOut="lolite()" onClick="logVariable('dropfeedbacks')" href="../../_variables/dropfeedbacks.html">$dropfeedbacks</a> = array();
<a name="l620"><span class="linenum"> 620</span></a>      <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = array();
<a name="l621"><span class="linenum"> 621</span></a>      <a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'feedback');
<a name="l622"><span class="linenum"> 622</span></a>  
<a name="l623"><span class="linenum"> 623</span></a>  <span class="comment">    //get the relevant entries from $data</span>
<a name="l624"><span class="linenum"> 624</span></a>      foreach (<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l625"><span class="linenum"> 625</span></a>          switch(true) {
<a name="l626"><span class="linenum"> 626</span></a>              case <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, 0, <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="constant" onClick="logConstant('FEEDBACK_RESETFORM_RESET')" href="../../_constants/FEEDBACK_RESETFORM_RESET.html" onMouseOver="constPopup(event,'FEEDBACK_RESETFORM_RESET')">FEEDBACK_RESETFORM_RESET</a>)) == <a class="constant" onClick="logConstant('FEEDBACK_RESETFORM_RESET')" href="../../_constants/FEEDBACK_RESETFORM_RESET.html" onMouseOver="constPopup(event,'FEEDBACK_RESETFORM_RESET')">FEEDBACK_RESETFORM_RESET</a>:
<a name="l627"><span class="linenum"> 627</span></a>                  if (<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> == 1) {
<a name="l628"><span class="linenum"> 628</span></a>                      <a class="var it38580" onMouseOver="hilite(38580)" onMouseOut="lolite()" onClick="logVariable('templist')" href="../../_variables/templist.html">$templist</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('_', <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>);
<a name="l629"><span class="linenum"> 629</span></a>                      if (isset(<a class="var it38580" onMouseOver="hilite(38580)" onMouseOut="lolite()" onClick="logVariable('templist')" href="../../_variables/templist.html">$templist</a>[3])) {
<a name="l630"><span class="linenum"> 630</span></a>                          <a class="var it38578" onMouseOver="hilite(38578)" onMouseOut="lolite()" onClick="logVariable('resetfeedbacks')" href="../../_variables/resetfeedbacks.html">$resetfeedbacks</a>[] = <a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it38580" onMouseOver="hilite(38580)" onMouseOut="lolite()" onClick="logVariable('templist')" href="../../_variables/templist.html">$templist</a>[3]);
<a name="l631"><span class="linenum"> 631</span></a>                      }
<a name="l632"><span class="linenum"> 632</span></a>                  }
<a name="l633"><span class="linenum"> 633</span></a>              break;
<a name="l634"><span class="linenum"> 634</span></a>              case <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>, 0, <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="constant" onClick="logConstant('FEEDBACK_RESETFORM_DROP')" href="../../_constants/FEEDBACK_RESETFORM_DROP.html" onMouseOver="constPopup(event,'FEEDBACK_RESETFORM_DROP')">FEEDBACK_RESETFORM_DROP</a>)) == <a class="constant" onClick="logConstant('FEEDBACK_RESETFORM_DROP')" href="../../_constants/FEEDBACK_RESETFORM_DROP.html" onMouseOver="constPopup(event,'FEEDBACK_RESETFORM_DROP')">FEEDBACK_RESETFORM_DROP</a>:
<a name="l635"><span class="linenum"> 635</span></a>                  if (<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> == 1) {
<a name="l636"><span class="linenum"> 636</span></a>                      <a class="var it38580" onMouseOver="hilite(38580)" onMouseOut="lolite()" onClick="logVariable('templist')" href="../../_variables/templist.html">$templist</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('_', <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>);
<a name="l637"><span class="linenum"> 637</span></a>                      if (isset(<a class="var it38580" onMouseOver="hilite(38580)" onMouseOut="lolite()" onClick="logVariable('templist')" href="../../_variables/templist.html">$templist</a>[3])) {
<a name="l638"><span class="linenum"> 638</span></a>                          <a class="var it38579" onMouseOver="hilite(38579)" onMouseOut="lolite()" onClick="logVariable('dropfeedbacks')" href="../../_variables/dropfeedbacks.html">$dropfeedbacks</a>[] = <a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it38580" onMouseOver="hilite(38580)" onMouseOut="lolite()" onClick="logVariable('templist')" href="../../_variables/templist.html">$templist</a>[3]);
<a name="l639"><span class="linenum"> 639</span></a>                      }
<a name="l640"><span class="linenum"> 640</span></a>                  }
<a name="l641"><span class="linenum"> 641</span></a>              break;
<a name="l642"><span class="linenum"> 642</span></a>          }
<a name="l643"><span class="linenum"> 643</span></a>      }
<a name="l644"><span class="linenum"> 644</span></a>  
<a name="l645"><span class="linenum"> 645</span></a>  <span class="comment">    //reset the selected feedbacks</span>
<a name="l646"><span class="linenum"> 646</span></a>      foreach (<a class="var it38578" onMouseOver="hilite(38578)" onMouseOut="lolite()" onClick="logVariable('resetfeedbacks')" href="../../_variables/resetfeedbacks.html">$resetfeedbacks</a> as <a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l647"><span class="linenum"> 647</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback', array('id'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l648"><span class="linenum"> 648</span></a>          <a class="function" onClick="logFunction('feedback_delete_all_completeds')" href="../../_functions/feedback_delete_all_completeds.html" onMouseOver="funcPopup(event,'feedback_delete_all_completeds')">feedback_delete_all_completeds</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>);
<a name="l649"><span class="linenum"> 649</span></a>          <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it13021" onMouseOver="hilite(13021)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>.':'.<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('name')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>,
<a name="l650"><span class="linenum"> 650</span></a>                          'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetting_data', 'feedback'),
<a name="l651"><span class="linenum"> 651</span></a>                          'error'=&gt;false);
<a name="l652"><span class="linenum"> 652</span></a>      }
<a name="l653"><span class="linenum"> 653</span></a>  
<a name="l654"><span class="linenum"> 654</span></a>      return <a class="var it741" onMouseOver="hilite(741)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>;
<a name="l655"><span class="linenum"> 655</span></a>  }
<a name="l656"><span class="linenum"> 656</span></a>  
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment">/**</span>
<a name="l658"><span class="linenum"> 658</span></a>  <span class="comment"> * Called by course/reset.php</span>
<a name="l659"><span class="linenum"> 659</span></a>  <span class="comment"> *</span>
<a name="l660"><span class="linenum"> 660</span></a>  <span class="comment"> * @global object</span>
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment"> * @uses FEEDBACK_RESETFORM_RESET</span>
<a name="l662"><span class="linenum"> 662</span></a>  <span class="comment"> * @param object $mform form passed by reference</span>
<a name="l663"><span class="linenum"> 663</span></a>  <span class="comment"> */</span>
<a name="l664"><span class="linenum"> 664</span></a>  function <a class="function" onClick="logFunction('feedback_reset_course_form_definition')" href="../../_functions/feedback_reset_course_form_definition.html" onMouseOver="funcPopup(event,'feedback_reset_course_form_definition')">feedback_reset_course_form_definition</a>(&amp;<a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l665"><span class="linenum"> 665</span></a>      global <a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l666"><span class="linenum"> 666</span></a>  
<a name="l667"><span class="linenum"> 667</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'feedbackheader', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'feedback'));
<a name="l668"><span class="linenum"> 668</span></a>  
<a name="l669"><span class="linenum"> 669</span></a>      if (!<a class="var it4219" onMouseOver="hilite(4219)" onMouseOut="lolite()" onClick="logVariable('feedbacks')" href="../../_variables/feedbacks.html">$feedbacks</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback', array('course'=&gt;<a class="var it2554" onMouseOver="hilite(2554)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>-&gt;<a onClick="logVariable('id')" class="var it39504" onMouseOver="hilite(39504)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'name')) {
<a name="l670"><span class="linenum"> 670</span></a>          return;
<a name="l671"><span class="linenum"> 671</span></a>      }
<a name="l672"><span class="linenum"> 672</span></a>  
<a name="l673"><span class="linenum"> 673</span></a>      <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('static', 'hint', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetting_data', 'feedback'));
<a name="l674"><span class="linenum"> 674</span></a>      foreach (<a class="var it4219" onMouseOver="hilite(4219)" onMouseOut="lolite()" onClick="logVariable('feedbacks')" href="../../_variables/feedbacks.html">$feedbacks</a> as <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>) {
<a name="l675"><span class="linenum"> 675</span></a>          <a class="var it1037" onMouseOver="hilite(1037)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', <a class="constant" onClick="logConstant('FEEDBACK_RESETFORM_RESET')" href="../../_constants/FEEDBACK_RESETFORM_RESET.html" onMouseOver="constPopup(event,'FEEDBACK_RESETFORM_RESET')">FEEDBACK_RESETFORM_RESET</a>.<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('name')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l676"><span class="linenum"> 676</span></a>      }
<a name="l677"><span class="linenum"> 677</span></a>  }
<a name="l678"><span class="linenum"> 678</span></a>  
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment">/**</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment"> * Course reset form defaults.</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment"> *</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment"> * @global object</span>
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment"> * @uses FEEDBACK_RESETFORM_RESET</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment"> * @param object $course</span>
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment"> */</span>
<a name="l686"><span class="linenum"> 686</span></a>  function <a class="function" onClick="logFunction('feedback_reset_course_form_defaults')" href="../../_functions/feedback_reset_course_form_defaults.html" onMouseOver="funcPopup(event,'feedback_reset_course_form_defaults')">feedback_reset_course_form_defaults</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l687"><span class="linenum"> 687</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l688"><span class="linenum"> 688</span></a>  
<a name="l689"><span class="linenum"> 689</span></a>      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = array();
<a name="l690"><span class="linenum"> 690</span></a>      if (!<a class="var it4219" onMouseOver="hilite(4219)" onMouseOut="lolite()" onClick="logVariable('feedbacks')" href="../../_variables/feedbacks.html">$feedbacks</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback', array('course'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'name')) {
<a name="l691"><span class="linenum"> 691</span></a>          return;
<a name="l692"><span class="linenum"> 692</span></a>      }
<a name="l693"><span class="linenum"> 693</span></a>      foreach (<a class="var it4219" onMouseOver="hilite(4219)" onMouseOut="lolite()" onClick="logVariable('feedbacks')" href="../../_variables/feedbacks.html">$feedbacks</a> as <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>) {
<a name="l694"><span class="linenum"> 694</span></a>          <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>[<a class="constant" onClick="logConstant('FEEDBACK_RESETFORM_RESET')" href="../../_constants/FEEDBACK_RESETFORM_RESET.html" onMouseOver="constPopup(event,'FEEDBACK_RESETFORM_RESET')">FEEDBACK_RESETFORM_RESET</a>.<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = true;
<a name="l695"><span class="linenum"> 695</span></a>      }
<a name="l696"><span class="linenum"> 696</span></a>      return <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l697"><span class="linenum"> 697</span></a>  }
<a name="l698"><span class="linenum"> 698</span></a>  
<a name="l699"><span class="linenum"> 699</span></a>  <span class="comment">/**</span>
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment"> * Called by course/reset.php and shows the formdata by coursereset.</span>
<a name="l701"><span class="linenum"> 701</span></a>  <span class="comment"> * it prints checkboxes for each feedback available at the given course</span>
<a name="l702"><span class="linenum"> 702</span></a>  <span class="comment"> * there are two checkboxes:</span>
<a name="l703"><span class="linenum"> 703</span></a>  <span class="comment"> * 1) delete userdata and keep the feedback</span>
<a name="l704"><span class="linenum"> 704</span></a>  <span class="comment"> * 2) delete userdata and drop the feedback</span>
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment"> *</span>
<a name="l706"><span class="linenum"> 706</span></a>  <span class="comment"> * @global object</span>
<a name="l707"><span class="linenum"> 707</span></a>  <span class="comment"> * @uses FEEDBACK_RESETFORM_RESET</span>
<a name="l708"><span class="linenum"> 708</span></a>  <span class="comment"> * @uses FEEDBACK_RESETFORM_DROP</span>
<a name="l709"><span class="linenum"> 709</span></a>  <span class="comment"> * @param object $course</span>
<a name="l710"><span class="linenum"> 710</span></a>  <span class="comment"> * @return void</span>
<a name="l711"><span class="linenum"> 711</span></a>  <span class="comment"> */</span>
<a name="l712"><span class="linenum"> 712</span></a>  function <a class="function" onClick="logFunction('feedback_reset_course_form')" href="../../_functions/feedback_reset_course_form.html" onMouseOver="funcPopup(event,'feedback_reset_course_form')">feedback_reset_course_form</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l713"><span class="linenum"> 713</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it10" onMouseOver="hilite(10)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l714"><span class="linenum"> 714</span></a>  
<a name="l715"><span class="linenum"> 715</span></a>      echo <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetting_feedbacks', 'feedback'); echo ':&lt;br /&gt;';
<a name="l716"><span class="linenum"> 716</span></a>      if (!<a class="var it4219" onMouseOver="hilite(4219)" onMouseOut="lolite()" onClick="logVariable('feedbacks')" href="../../_variables/feedbacks.html">$feedbacks</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback', array('course'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'name')) {
<a name="l717"><span class="linenum"> 717</span></a>          return;
<a name="l718"><span class="linenum"> 718</span></a>      }
<a name="l719"><span class="linenum"> 719</span></a>  
<a name="l720"><span class="linenum"> 720</span></a>      foreach (<a class="var it4219" onMouseOver="hilite(4219)" onMouseOut="lolite()" onClick="logVariable('feedbacks')" href="../../_variables/feedbacks.html">$feedbacks</a> as <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>) {
<a name="l721"><span class="linenum"> 721</span></a>          echo '&lt;p&gt;';
<a name="l722"><span class="linenum"> 722</span></a>          echo <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('name', 'feedback').': '.<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('name')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>.'&lt;br /&gt;';
<a name="l723"><span class="linenum"> 723</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('checkbox')" href="../../_functions/checkbox.html" onMouseOver="funcPopup(event,'checkbox')">checkbox</a>(<a class="constant" onClick="logConstant('FEEDBACK_RESETFORM_RESET')" href="../../_constants/FEEDBACK_RESETFORM_RESET.html" onMouseOver="constPopup(event,'FEEDBACK_RESETFORM_RESET')">FEEDBACK_RESETFORM_RESET</a>.<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l724"><span class="linenum"> 724</span></a>                                  1, true,
<a name="l725"><span class="linenum"> 725</span></a>                                  <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetting_data', 'feedback'));
<a name="l726"><span class="linenum"> 726</span></a>          echo '&lt;br /&gt;';
<a name="l727"><span class="linenum"> 727</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('checkbox')" href="../../_functions/checkbox.html" onMouseOver="funcPopup(event,'checkbox')">checkbox</a>(<a class="constant" onClick="logConstant('FEEDBACK_RESETFORM_DROP')" href="../../_constants/FEEDBACK_RESETFORM_DROP.html" onMouseOver="constPopup(event,'FEEDBACK_RESETFORM_DROP')">FEEDBACK_RESETFORM_DROP</a>.<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l728"><span class="linenum"> 728</span></a>                                  1, false,
<a name="l729"><span class="linenum"> 729</span></a>                                  <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('drop_feedback', 'feedback'));
<a name="l730"><span class="linenum"> 730</span></a>          echo '&lt;/p&gt;';
<a name="l731"><span class="linenum"> 731</span></a>      }
<a name="l732"><span class="linenum"> 732</span></a>  }
<a name="l733"><span class="linenum"> 733</span></a>  
<a name="l734"><span class="linenum"> 734</span></a>  <span class="comment">/**</span>
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment"> * This gets an array with default options for the editor</span>
<a name="l736"><span class="linenum"> 736</span></a>  <span class="comment"> *</span>
<a name="l737"><span class="linenum"> 737</span></a>  <span class="comment"> * @return array the options</span>
<a name="l738"><span class="linenum"> 738</span></a>  <span class="comment"> */</span>
<a name="l739"><span class="linenum"> 739</span></a>  function <a class="function" onClick="logFunction('feedback_get_editor_options')" href="../../_functions/feedback_get_editor_options.html" onMouseOver="funcPopup(event,'feedback_get_editor_options')">feedback_get_editor_options</a>() {
<a name="l740"><span class="linenum"> 740</span></a>      return array('maxfiles' =&gt; <a class="constant" onClick="logConstant('EDITOR_UNLIMITED_FILES')" href="../../_constants/EDITOR_UNLIMITED_FILES.html" onMouseOver="constPopup(event,'EDITOR_UNLIMITED_FILES')">EDITOR_UNLIMITED_FILES</a>,
<a name="l741"><span class="linenum"> 741</span></a>                  'trusttext'=&gt;true);
<a name="l742"><span class="linenum"> 742</span></a>  }
<a name="l743"><span class="linenum"> 743</span></a>  
<a name="l744"><span class="linenum"> 744</span></a>  <span class="comment">/**</span>
<a name="l745"><span class="linenum"> 745</span></a>  <span class="comment"> * This creates new events given as timeopen and closeopen by $feedback.</span>
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment"> *</span>
<a name="l747"><span class="linenum"> 747</span></a>  <span class="comment"> * @global object</span>
<a name="l748"><span class="linenum"> 748</span></a>  <span class="comment"> * @param object $feedback</span>
<a name="l749"><span class="linenum"> 749</span></a>  <span class="comment"> * @return void</span>
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment"> */</span>
<a name="l751"><span class="linenum"> 751</span></a>  function <a class="function" onClick="logFunction('feedback_set_events')" href="../../_functions/feedback_set_events.html" onMouseOver="funcPopup(event,'feedback_set_events')">feedback_set_events</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>) {
<a name="l752"><span class="linenum"> 752</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l753"><span class="linenum"> 753</span></a>  
<a name="l754"><span class="linenum"> 754</span></a>  <span class="comment">    // adding the feedback to the eventtable (I have seen this at quiz-module)</span>
<a name="l755"><span class="linenum"> 755</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('event', array('modulename'=&gt;'feedback', 'instance'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l756"><span class="linenum"> 756</span></a>  
<a name="l757"><span class="linenum"> 757</span></a>      if (!isset(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>)) {
<a name="l758"><span class="linenum"> 758</span></a>          <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_id')" href="../../_functions/get_coursemodule_from_id.html" onMouseOver="funcPopup(event,'get_coursemodule_from_id')">get_coursemodule_from_id</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l759"><span class="linenum"> 759</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a> = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l760"><span class="linenum"> 760</span></a>      }
<a name="l761"><span class="linenum"> 761</span></a>  
<a name="l762"><span class="linenum"> 762</span></a>  <span class="comment">    // the open-event</span>
<a name="l763"><span class="linenum"> 763</span></a>      if (<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('timeopen')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a> &gt; 0) {
<a name="l764"><span class="linenum"> 764</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = new stdClass();
<a name="l765"><span class="linenum"> 765</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>         = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('start', 'feedback').' '.<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('name')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l766"><span class="linenum"> 766</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('description')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/description.html">description</a>  = <a class="function" onClick="logFunction('format_module_intro')" href="../../_functions/format_module_intro.html" onMouseOver="funcPopup(event,'format_module_intro')">format_module_intro</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>, <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>);
<a name="l767"><span class="linenum"> 767</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>     = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('course')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>;
<a name="l768"><span class="linenum"> 768</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>      = 0;
<a name="l769"><span class="linenum"> 769</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('userid')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>       = 0;
<a name="l770"><span class="linenum"> 770</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/modulename.html">modulename</a>   = 'feedback';
<a name="l771"><span class="linenum"> 771</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('instance')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>     = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l772"><span class="linenum"> 772</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('eventtype')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/eventtype.html">eventtype</a>    = 'open';
<a name="l773"><span class="linenum"> 773</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timestart.html">timestart</a>    = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('timeopen')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a>;
<a name="l774"><span class="linenum"> 774</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('visible')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/visible.html">visible</a>      = <a class="function" onClick="logFunction('instance_is_visible')" href="../../_functions/instance_is_visible.html" onMouseOver="funcPopup(event,'instance_is_visible')">instance_is_visible</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>);
<a name="l775"><span class="linenum"> 775</span></a>          if (<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('timeclose')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a> &gt; 0) {
<a name="l776"><span class="linenum"> 776</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timeduration.html">timeduration</a> = (<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('timeclose')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a> - <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('timeopen')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/timeopen.html">timeopen</a>);
<a name="l777"><span class="linenum"> 777</span></a>          } else {
<a name="l778"><span class="linenum"> 778</span></a>              <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timeduration.html">timeduration</a> = 0;
<a name="l779"><span class="linenum"> 779</span></a>          }
<a name="l780"><span class="linenum"> 780</span></a>  
<a name="l781"><span class="linenum"> 781</span></a>          <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l782"><span class="linenum"> 782</span></a>      }
<a name="l783"><span class="linenum"> 783</span></a>  
<a name="l784"><span class="linenum"> 784</span></a>  <span class="comment">    // the close-event</span>
<a name="l785"><span class="linenum"> 785</span></a>      if (<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('timeclose')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a> &gt; 0) {
<a name="l786"><span class="linenum"> 786</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = new stdClass();
<a name="l787"><span class="linenum"> 787</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('name')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>         = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('stop', 'feedback').' '.<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('name')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l788"><span class="linenum"> 788</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('description')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/description.html">description</a>  = <a class="function" onClick="logFunction('format_module_intro')" href="../../_functions/format_module_intro.html" onMouseOver="funcPopup(event,'format_module_intro')">format_module_intro</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>, <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('coursemodule')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/coursemodule.html">coursemodule</a>);
<a name="l789"><span class="linenum"> 789</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('courseid')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>     = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('course')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>;
<a name="l790"><span class="linenum"> 790</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('groupid')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/groupid.html">groupid</a>      = 0;
<a name="l791"><span class="linenum"> 791</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('userid')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>       = 0;
<a name="l792"><span class="linenum"> 792</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('modulename')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/modulename.html">modulename</a>   = 'feedback';
<a name="l793"><span class="linenum"> 793</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('instance')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>     = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l794"><span class="linenum"> 794</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('eventtype')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/eventtype.html">eventtype</a>    = 'close';
<a name="l795"><span class="linenum"> 795</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timestart')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timestart.html">timestart</a>    = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('timeclose')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/timeclose.html">timeclose</a>;
<a name="l796"><span class="linenum"> 796</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('visible')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/visible.html">visible</a>      = <a class="function" onClick="logFunction('instance_is_visible')" href="../../_functions/instance_is_visible.html" onMouseOver="funcPopup(event,'instance_is_visible')">instance_is_visible</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>);
<a name="l797"><span class="linenum"> 797</span></a>          <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a onClick="logVariable('timeduration')" class="var it39510" onMouseOver="hilite(39510)" onMouseOut="lolite()" href="../../_variables/timeduration.html">timeduration</a> = 0;
<a name="l798"><span class="linenum"> 798</span></a>  
<a name="l799"><span class="linenum"> 799</span></a>          <a class="class" onClick="logClass('calendar_event')" href="../../_classes/calendar_event.html" onMouseOver="classPopup(event,'calendar_event')">calendar_event</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(<a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>);
<a name="l800"><span class="linenum"> 800</span></a>      }
<a name="l801"><span class="linenum"> 801</span></a>  }
<a name="l802"><span class="linenum"> 802</span></a>  
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment">/**</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment"> * this function is called by {@link feedback_delete_userdata()}</span>
<a name="l805"><span class="linenum"> 805</span></a>  <span class="comment"> * it drops the feedback-instance from the course_module table</span>
<a name="l806"><span class="linenum"> 806</span></a>  <span class="comment"> *</span>
<a name="l807"><span class="linenum"> 807</span></a>  <span class="comment"> * @global object</span>
<a name="l808"><span class="linenum"> 808</span></a>  <span class="comment"> * @param int $id the id from the coursemodule</span>
<a name="l809"><span class="linenum"> 809</span></a>  <span class="comment"> * @return boolean</span>
<a name="l810"><span class="linenum"> 810</span></a>  <span class="comment"> */</span>
<a name="l811"><span class="linenum"> 811</span></a>  function <a class="function" onClick="logFunction('feedback_delete_course_module')" href="../../_functions/feedback_delete_course_module.html" onMouseOver="funcPopup(event,'feedback_delete_course_module')">feedback_delete_course_module</a>(<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l812"><span class="linenum"> 812</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l813"><span class="linenum"> 813</span></a>  
<a name="l814"><span class="linenum"> 814</span></a>      if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course_modules', array('id'=&gt;<a class="var it102" onMouseOver="hilite(102)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>))) {
<a name="l815"><span class="linenum"> 815</span></a>          return true;
<a name="l816"><span class="linenum"> 816</span></a>      }
<a name="l817"><span class="linenum"> 817</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('course_modules', array('id'=&gt;<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l818"><span class="linenum"> 818</span></a>  }
<a name="l819"><span class="linenum"> 819</span></a>  
<a name="l820"><span class="linenum"> 820</span></a>  
<a name="l821"><span class="linenum"> 821</span></a>  
<a name="l822"><span class="linenum"> 822</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l823"><span class="linenum"> 823</span></a>  <span class="comment">//functions to handle capabilities</span>
<a name="l824"><span class="linenum"> 824</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l825"><span class="linenum"> 825</span></a>  
<a name="l826"><span class="linenum"> 826</span></a>  <span class="comment">/**</span>
<a name="l827"><span class="linenum"> 827</span></a>  <span class="comment"> * returns the context-id related to the given coursemodule-id</span>
<a name="l828"><span class="linenum"> 828</span></a>  <span class="comment"> *</span>
<a name="l829"><span class="linenum"> 829</span></a>  <span class="comment"> * @staticvar object $context</span>
<a name="l830"><span class="linenum"> 830</span></a>  <span class="comment"> * @param int $cmid the coursemodule-id</span>
<a name="l831"><span class="linenum"> 831</span></a>  <span class="comment"> * @return object $context</span>
<a name="l832"><span class="linenum"> 832</span></a>  <span class="comment"> */</span>
<a name="l833"><span class="linenum"> 833</span></a>  function <a class="function" onClick="logFunction('feedback_get_context')" href="../../_functions/feedback_get_context.html" onMouseOver="funcPopup(event,'feedback_get_context')">feedback_get_context</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>) {
<a name="l834"><span class="linenum"> 834</span></a>      static <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l835"><span class="linenum"> 835</span></a>  
<a name="l836"><span class="linenum"> 836</span></a>      if (isset(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l837"><span class="linenum"> 837</span></a>          return <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l838"><span class="linenum"> 838</span></a>      }
<a name="l839"><span class="linenum"> 839</span></a>  
<a name="l840"><span class="linenum"> 840</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l841"><span class="linenum"> 841</span></a>      return <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l842"><span class="linenum"> 842</span></a>  }
<a name="l843"><span class="linenum"> 843</span></a>  
<a name="l844"><span class="linenum"> 844</span></a>  <span class="comment">/**</span>
<a name="l845"><span class="linenum"> 845</span></a>  <span class="comment"> *  returns true if the current role is faked by switching role feature</span>
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment"> *</span>
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment"> * @global object</span>
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment"> * @return boolean</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment"> */</span>
<a name="l850"><span class="linenum"> 850</span></a>  function <a class="function" onClick="logFunction('feedback_check_is_switchrole')" href="../../_functions/feedback_check_is_switchrole.html" onMouseOver="funcPopup(event,'feedback_check_is_switchrole')">feedback_check_is_switchrole</a>() {
<a name="l851"><span class="linenum"> 851</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l852"><span class="linenum"> 852</span></a>      if (isset(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('switchrole')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/switchrole.html">switchrole</a>) AND
<a name="l853"><span class="linenum"> 853</span></a>              <a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('switchrole')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/switchrole.html">switchrole</a>) AND
<a name="l854"><span class="linenum"> 854</span></a>              <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('switchrole')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/switchrole.html">switchrole</a>) &gt; 0) {
<a name="l855"><span class="linenum"> 855</span></a>  
<a name="l856"><span class="linenum"> 856</span></a>          return true;
<a name="l857"><span class="linenum"> 857</span></a>      }
<a name="l858"><span class="linenum"> 858</span></a>      return false;
<a name="l859"><span class="linenum"> 859</span></a>  }
<a name="l860"><span class="linenum"> 860</span></a>  
<a name="l861"><span class="linenum"> 861</span></a>  <span class="comment">/**</span>
<a name="l862"><span class="linenum"> 862</span></a>  <span class="comment"> * count users which have not completed the feedback</span>
<a name="l863"><span class="linenum"> 863</span></a>  <span class="comment"> *</span>
<a name="l864"><span class="linenum"> 864</span></a>  <span class="comment"> * @global object</span>
<a name="l865"><span class="linenum"> 865</span></a>  <span class="comment"> * @uses CONTEXT_MODULE</span>
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment"> * @param cm_info $cm Course-module object</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment"> * @param int $group single groupid</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment"> * @param string $sort</span>
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment"> * @param int $startpage</span>
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment"> * @param int $pagecount</span>
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment"> * @return object the userrecords</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment"> */</span>
<a name="l873"><span class="linenum"> 873</span></a>  function <a class="function" onClick="logFunction('feedback_get_incomplete_users')" href="../../_functions/feedback_get_incomplete_users.html" onMouseOver="funcPopup(event,'feedback_get_incomplete_users')">feedback_get_incomplete_users</a>(cm_info <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>,
<a name="l874"><span class="linenum"> 874</span></a>                                         <a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = false,
<a name="l875"><span class="linenum"> 875</span></a>                                         <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> = '',
<a name="l876"><span class="linenum"> 876</span></a>                                         <a class="var it13868" onMouseOver="hilite(13868)" onMouseOut="lolite()" onClick="logVariable('startpage')" href="../../_variables/startpage.html">$startpage</a> = false,
<a name="l877"><span class="linenum"> 877</span></a>                                         <a class="var it11976" onMouseOver="hilite(11976)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../_variables/pagecount.html">$pagecount</a> = false) {
<a name="l878"><span class="linenum"> 878</span></a>  
<a name="l879"><span class="linenum"> 879</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l880"><span class="linenum"> 880</span></a>  
<a name="l881"><span class="linenum"> 881</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l882"><span class="linenum"> 882</span></a>  
<a name="l883"><span class="linenum"> 883</span></a>  <span class="comment">    //first get all user who can complete this feedback</span>
<a name="l884"><span class="linenum"> 884</span></a>      <a class="var it3026" onMouseOver="hilite(3026)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../../_variables/cap.html">$cap</a> = 'mod/feedback:complete';
<a name="l885"><span class="linenum"> 885</span></a>      <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a> = 'u.id, u.username';
<a name="l886"><span class="linenum"> 886</span></a>      if (!<a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a> = <a class="function" onClick="logFunction('get_users_by_capability')" href="../../_functions/get_users_by_capability.html" onMouseOver="funcPopup(event,'get_users_by_capability')">get_users_by_capability</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l887"><span class="linenum"> 887</span></a>                                              <a class="var it3026" onMouseOver="hilite(3026)" onMouseOut="lolite()" onClick="logVariable('cap')" href="../../_variables/cap.html">$cap</a>,
<a name="l888"><span class="linenum"> 888</span></a>                                              <a class="var it399" onMouseOver="hilite(399)" onMouseOut="lolite()" onClick="logVariable('fields')" href="../../_variables/fields.html">$fields</a>,
<a name="l889"><span class="linenum"> 889</span></a>                                              <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>,
<a name="l890"><span class="linenum"> 890</span></a>                                              '',
<a name="l891"><span class="linenum"> 891</span></a>                                              '',
<a name="l892"><span class="linenum"> 892</span></a>                                              <a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>,
<a name="l893"><span class="linenum"> 893</span></a>                                              '',
<a name="l894"><span class="linenum"> 894</span></a>                                              true)) {
<a name="l895"><span class="linenum"> 895</span></a>          return false;
<a name="l896"><span class="linenum"> 896</span></a>      }
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment">    // Filter users that are not in the correct group/grouping.</span>
<a name="l898"><span class="linenum"> 898</span></a>      <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = new \core_availability\info_module(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l899"><span class="linenum"> 899</span></a>      <a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a> = <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a class="function" onClick="logFunction('filter_user_list')" href="../../_functions/filter_user_list.html" onMouseOver="funcPopup(event,'filter_user_list')">filter_user_list</a>(<a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a>);
<a name="l900"><span class="linenum"> 900</span></a>  
<a name="l901"><span class="linenum"> 901</span></a>      <a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a>);
<a name="l902"><span class="linenum"> 902</span></a>  
<a name="l903"><span class="linenum"> 903</span></a>  <span class="comment">    //now get all completeds</span>
<a name="l904"><span class="linenum"> 904</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('feedback'=&gt;<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>);
<a name="l905"><span class="linenum"> 905</span></a>      if (!<a class="var it38581" onMouseOver="hilite(38581)" onMouseOut="lolite()" onClick="logVariable('completedusers')" href="../../_variables/completedusers.html">$completedusers</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_menu')" href="../../_functions/get_records_menu.html" onMouseOver="funcPopup(event,'get_records_menu')">get_records_menu</a>('feedback_completed', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, '', 'userid,id')) {
<a name="l906"><span class="linenum"> 906</span></a>          return <a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a>;
<a name="l907"><span class="linenum"> 907</span></a>      }
<a name="l908"><span class="linenum"> 908</span></a>      <a class="var it38581" onMouseOver="hilite(38581)" onMouseOut="lolite()" onClick="logVariable('completedusers')" href="../../_variables/completedusers.html">$completedusers</a> = <a class="phpfunction" onClick="logFunction('array_keys')" href="../../_functions/array_keys.html" onMouseOver="phpfuncPopup(event,'array_keys')">array_keys</a>(<a class="var it38581" onMouseOver="hilite(38581)" onMouseOut="lolite()" onClick="logVariable('completedusers')" href="../../_variables/completedusers.html">$completedusers</a>);
<a name="l909"><span class="linenum"> 909</span></a>  
<a name="l910"><span class="linenum"> 910</span></a>  <span class="comment">    //now strike all completedusers from allusers</span>
<a name="l911"><span class="linenum"> 911</span></a>      <a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a> = <a class="phpfunction" onClick="logFunction('array_diff')" href="../../_functions/array_diff.html" onMouseOver="phpfuncPopup(event,'array_diff')">array_diff</a>(<a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a>, <a class="var it38581" onMouseOver="hilite(38581)" onMouseOut="lolite()" onClick="logVariable('completedusers')" href="../../_variables/completedusers.html">$completedusers</a>);
<a name="l912"><span class="linenum"> 912</span></a>  
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">    //for paging I use array_slice()</span>
<a name="l914"><span class="linenum"> 914</span></a>      if (<a class="var it13868" onMouseOver="hilite(13868)" onMouseOut="lolite()" onClick="logVariable('startpage')" href="../../_variables/startpage.html">$startpage</a> !== false AND <a class="var it11976" onMouseOver="hilite(11976)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../_variables/pagecount.html">$pagecount</a> !== false) {
<a name="l915"><span class="linenum"> 915</span></a>          <a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a> = <a class="phpfunction" onClick="logFunction('array_slice')" href="../../_functions/array_slice.html" onMouseOver="phpfuncPopup(event,'array_slice')">array_slice</a>(<a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a>, <a class="var it13868" onMouseOver="hilite(13868)" onMouseOut="lolite()" onClick="logVariable('startpage')" href="../../_variables/startpage.html">$startpage</a>, <a class="var it11976" onMouseOver="hilite(11976)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../_variables/pagecount.html">$pagecount</a>);
<a name="l916"><span class="linenum"> 916</span></a>      }
<a name="l917"><span class="linenum"> 917</span></a>  
<a name="l918"><span class="linenum"> 918</span></a>      return <a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a>;
<a name="l919"><span class="linenum"> 919</span></a>  }
<a name="l920"><span class="linenum"> 920</span></a>  
<a name="l921"><span class="linenum"> 921</span></a>  <span class="comment">/**</span>
<a name="l922"><span class="linenum"> 922</span></a>  <span class="comment"> * count users which have not completed the feedback</span>
<a name="l923"><span class="linenum"> 923</span></a>  <span class="comment"> *</span>
<a name="l924"><span class="linenum"> 924</span></a>  <span class="comment"> * @global object</span>
<a name="l925"><span class="linenum"> 925</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l926"><span class="linenum"> 926</span></a>  <span class="comment"> * @param int $group single groupid</span>
<a name="l927"><span class="linenum"> 927</span></a>  <span class="comment"> * @return int count of userrecords</span>
<a name="l928"><span class="linenum"> 928</span></a>  <span class="comment"> */</span>
<a name="l929"><span class="linenum"> 929</span></a>  function <a class="function" onClick="logFunction('feedback_count_incomplete_users')" href="../../_functions/feedback_count_incomplete_users.html" onMouseOver="funcPopup(event,'feedback_count_incomplete_users')">feedback_count_incomplete_users</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = false) {
<a name="l930"><span class="linenum"> 930</span></a>      if (<a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a> = <a class="function" onClick="logFunction('feedback_get_incomplete_users')" href="../../_functions/feedback_get_incomplete_users.html" onMouseOver="funcPopup(event,'feedback_get_incomplete_users')">feedback_get_incomplete_users</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>)) {
<a name="l931"><span class="linenum"> 931</span></a>          return <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it10376" onMouseOver="hilite(10376)" onMouseOut="lolite()" onClick="logVariable('allusers')" href="../../_variables/allusers.html">$allusers</a>);
<a name="l932"><span class="linenum"> 932</span></a>      }
<a name="l933"><span class="linenum"> 933</span></a>      return 0;
<a name="l934"><span class="linenum"> 934</span></a>  }
<a name="l935"><span class="linenum"> 935</span></a>  
<a name="l936"><span class="linenum"> 936</span></a>  <span class="comment">/**</span>
<a name="l937"><span class="linenum"> 937</span></a>  <span class="comment"> * count users which have completed a feedback</span>
<a name="l938"><span class="linenum"> 938</span></a>  <span class="comment"> *</span>
<a name="l939"><span class="linenum"> 939</span></a>  <span class="comment"> * @global object</span>
<a name="l940"><span class="linenum"> 940</span></a>  <span class="comment"> * @uses FEEDBACK_ANONYMOUS_NO</span>
<a name="l941"><span class="linenum"> 941</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l942"><span class="linenum"> 942</span></a>  <span class="comment"> * @param int $group single groupid</span>
<a name="l943"><span class="linenum"> 943</span></a>  <span class="comment"> * @return int count of userrecords</span>
<a name="l944"><span class="linenum"> 944</span></a>  <span class="comment"> */</span>
<a name="l945"><span class="linenum"> 945</span></a>  function <a class="function" onClick="logFunction('feedback_count_complete_users')" href="../../_functions/feedback_count_complete_users.html" onMouseOver="funcPopup(event,'feedback_count_complete_users')">feedback_count_complete_users</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = false) {
<a name="l946"><span class="linenum"> 946</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l947"><span class="linenum"> 947</span></a>  
<a name="l948"><span class="linenum"> 948</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(<a class="constant" onClick="logConstant('FEEDBACK_ANONYMOUS_NO')" href="../../_constants/FEEDBACK_ANONYMOUS_NO.html" onMouseOver="constPopup(event,'FEEDBACK_ANONYMOUS_NO')">FEEDBACK_ANONYMOUS_NO</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>);
<a name="l949"><span class="linenum"> 949</span></a>  
<a name="l950"><span class="linenum"> 950</span></a>      <a class="var it38582" onMouseOver="hilite(38582)" onMouseOut="lolite()" onClick="logVariable('fromgroup')" href="../../_variables/fromgroup.html">$fromgroup</a> = '';
<a name="l951"><span class="linenum"> 951</span></a>      <a class="var it38583" onMouseOver="hilite(38583)" onMouseOut="lolite()" onClick="logVariable('wheregroup')" href="../../_variables/wheregroup.html">$wheregroup</a> = '';
<a name="l952"><span class="linenum"> 952</span></a>      if (<a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>) {
<a name="l953"><span class="linenum"> 953</span></a>          <a class="var it38582" onMouseOver="hilite(38582)" onMouseOut="lolite()" onClick="logVariable('fromgroup')" href="../../_variables/fromgroup.html">$fromgroup</a> = ', {groups_members} g';
<a name="l954"><span class="linenum"> 954</span></a>          <a class="var it38583" onMouseOver="hilite(38583)" onMouseOut="lolite()" onClick="logVariable('wheregroup')" href="../../_variables/wheregroup.html">$wheregroup</a> = ' AND g.groupid = ? AND g.userid = c.userid';
<a name="l955"><span class="linenum"> 955</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = <a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>;
<a name="l956"><span class="linenum"> 956</span></a>      }
<a name="l957"><span class="linenum"> 957</span></a>  
<a name="l958"><span class="linenum"> 958</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(u.id) FROM {user} u, {feedback_completed} c'.<a class="var it38582" onMouseOver="hilite(38582)" onMouseOut="lolite()" onClick="logVariable('fromgroup')" href="../../_variables/fromgroup.html">$fromgroup</a>.'
<a name="l959"><span class="linenum"> 959</span></a>                WHERE anonymous_response = ? AND u.id = c.userid AND c.feedback = ?
<a name="l960"><span class="linenum"> 960</span></a>                '.<a class="var it38583" onMouseOver="hilite(38583)" onMouseOut="lolite()" onClick="logVariable('wheregroup')" href="../../_variables/wheregroup.html">$wheregroup</a>;
<a name="l961"><span class="linenum"> 961</span></a>  
<a name="l962"><span class="linenum"> 962</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l963"><span class="linenum"> 963</span></a>  
<a name="l964"><span class="linenum"> 964</span></a>  }
<a name="l965"><span class="linenum"> 965</span></a>  
<a name="l966"><span class="linenum"> 966</span></a>  <span class="comment">/**</span>
<a name="l967"><span class="linenum"> 967</span></a>  <span class="comment"> * get users which have completed a feedback</span>
<a name="l968"><span class="linenum"> 968</span></a>  <span class="comment"> *</span>
<a name="l969"><span class="linenum"> 969</span></a>  <span class="comment"> * @global object</span>
<a name="l970"><span class="linenum"> 970</span></a>  <span class="comment"> * @uses CONTEXT_MODULE</span>
<a name="l971"><span class="linenum"> 971</span></a>  <span class="comment"> * @uses FEEDBACK_ANONYMOUS_NO</span>
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment"> * @param int $group single groupid</span>
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment"> * @param string $where a sql where condition (must end with &quot; AND &quot;)</span>
<a name="l975"><span class="linenum"> 975</span></a>  <span class="comment"> * @param array parameters used in $where</span>
<a name="l976"><span class="linenum"> 976</span></a>  <span class="comment"> * @param string $sort a table field</span>
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment"> * @param int $startpage</span>
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment"> * @param int $pagecount</span>
<a name="l979"><span class="linenum"> 979</span></a>  <span class="comment"> * @return object the userrecords</span>
<a name="l980"><span class="linenum"> 980</span></a>  <span class="comment"> */</span>
<a name="l981"><span class="linenum"> 981</span></a>  function <a class="function" onClick="logFunction('feedback_get_complete_users')" href="../../_functions/feedback_get_complete_users.html" onMouseOver="funcPopup(event,'feedback_get_complete_users')">feedback_get_complete_users</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>,
<a name="l982"><span class="linenum"> 982</span></a>                                       <a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a> = false,
<a name="l983"><span class="linenum"> 983</span></a>                                       <a class="var it1076" onMouseOver="hilite(1076)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a> = '',
<a name="l984"><span class="linenum"> 984</span></a>                                       array <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = null,
<a name="l985"><span class="linenum"> 985</span></a>                                       <a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a> = '',
<a name="l986"><span class="linenum"> 986</span></a>                                       <a class="var it13868" onMouseOver="hilite(13868)" onMouseOut="lolite()" onClick="logVariable('startpage')" href="../../_variables/startpage.html">$startpage</a> = false,
<a name="l987"><span class="linenum"> 987</span></a>                                       <a class="var it11976" onMouseOver="hilite(11976)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../_variables/pagecount.html">$pagecount</a> = false) {
<a name="l988"><span class="linenum"> 988</span></a>  
<a name="l989"><span class="linenum"> 989</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l990"><span class="linenum"> 990</span></a>  
<a name="l991"><span class="linenum"> 991</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l992"><span class="linenum"> 992</span></a>  
<a name="l993"><span class="linenum"> 993</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = (array)<a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>;
<a name="l994"><span class="linenum"> 994</span></a>  
<a name="l995"><span class="linenum"> 995</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['anon'] = <a class="constant" onClick="logConstant('FEEDBACK_ANONYMOUS_NO')" href="../../_constants/FEEDBACK_ANONYMOUS_NO.html" onMouseOver="constPopup(event,'FEEDBACK_ANONYMOUS_NO')">FEEDBACK_ANONYMOUS_NO</a>;
<a name="l996"><span class="linenum"> 996</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['instance'] = <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l997"><span class="linenum"> 997</span></a>  
<a name="l998"><span class="linenum"> 998</span></a>      <a class="var it38582" onMouseOver="hilite(38582)" onMouseOut="lolite()" onClick="logVariable('fromgroup')" href="../../_variables/fromgroup.html">$fromgroup</a> = '';
<a name="l999"><span class="linenum"> 999</span></a>      <a class="var it38583" onMouseOver="hilite(38583)" onMouseOut="lolite()" onClick="logVariable('wheregroup')" href="../../_variables/wheregroup.html">$wheregroup</a> = '';
<a name="l1000"><span class="linenum">1000</span></a>      if (<a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>) {
<a name="l1001"><span class="linenum">1001</span></a>          <a class="var it38582" onMouseOver="hilite(38582)" onMouseOut="lolite()" onClick="logVariable('fromgroup')" href="../../_variables/fromgroup.html">$fromgroup</a> = ', {groups_members} g';
<a name="l1002"><span class="linenum">1002</span></a>          <a class="var it38583" onMouseOver="hilite(38583)" onMouseOut="lolite()" onClick="logVariable('wheregroup')" href="../../_variables/wheregroup.html">$wheregroup</a> = ' AND g.groupid = :group AND g.userid = c.userid';
<a name="l1003"><span class="linenum">1003</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['group'] = <a class="var it4136" onMouseOver="hilite(4136)" onMouseOut="lolite()" onClick="logVariable('group')" href="../../_variables/group.html">$group</a>;
<a name="l1004"><span class="linenum">1004</span></a>      }
<a name="l1005"><span class="linenum">1005</span></a>  
<a name="l1006"><span class="linenum">1006</span></a>      if (<a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>) {
<a name="l1007"><span class="linenum">1007</span></a>          <a class="var it38584" onMouseOver="hilite(38584)" onMouseOut="lolite()" onClick="logVariable('sortsql')" href="../../_variables/sortsql.html">$sortsql</a> = ' ORDER BY '.<a class="var it124" onMouseOver="hilite(124)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>;
<a name="l1008"><span class="linenum">1008</span></a>      } else {
<a name="l1009"><span class="linenum">1009</span></a>          <a class="var it38584" onMouseOver="hilite(38584)" onMouseOut="lolite()" onClick="logVariable('sortsql')" href="../../_variables/sortsql.html">$sortsql</a> = '';
<a name="l1010"><span class="linenum">1010</span></a>      }
<a name="l1011"><span class="linenum">1011</span></a>  
<a name="l1012"><span class="linenum">1012</span></a>      <a class="var it21259" onMouseOver="hilite(21259)" onMouseOut="lolite()" onClick="logVariable('ufields')" href="../../_variables/ufields.html">$ufields</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>('u');
<a name="l1013"><span class="linenum">1013</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = 'SELECT DISTINCT '.<a class="var it21259" onMouseOver="hilite(21259)" onMouseOut="lolite()" onClick="logVariable('ufields')" href="../../_variables/ufields.html">$ufields</a>.', c.timemodified as completed_timemodified
<a name="l1014"><span class="linenum">1014</span></a>              FROM {user} u, {feedback_completed} c '.<a class="var it38582" onMouseOver="hilite(38582)" onMouseOut="lolite()" onClick="logVariable('fromgroup')" href="../../_variables/fromgroup.html">$fromgroup</a>.'
<a name="l1015"><span class="linenum">1015</span></a>              WHERE '.<a class="var it1076" onMouseOver="hilite(1076)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a>.' anonymous_response = :anon
<a name="l1016"><span class="linenum">1016</span></a>                  AND u.id = c.userid
<a name="l1017"><span class="linenum">1017</span></a>                  AND c.feedback = :instance
<a name="l1018"><span class="linenum">1018</span></a>                '.<a class="var it38583" onMouseOver="hilite(38583)" onMouseOut="lolite()" onClick="logVariable('wheregroup')" href="../../_variables/wheregroup.html">$wheregroup</a>.<a class="var it38584" onMouseOver="hilite(38584)" onMouseOut="lolite()" onClick="logVariable('sortsql')" href="../../_variables/sortsql.html">$sortsql</a>;
<a name="l1019"><span class="linenum">1019</span></a>  
<a name="l1020"><span class="linenum">1020</span></a>      if (<a class="var it13868" onMouseOver="hilite(13868)" onMouseOut="lolite()" onClick="logVariable('startpage')" href="../../_variables/startpage.html">$startpage</a> === false OR <a class="var it11976" onMouseOver="hilite(11976)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../_variables/pagecount.html">$pagecount</a> === false) {
<a name="l1021"><span class="linenum">1021</span></a>          <a class="var it13868" onMouseOver="hilite(13868)" onMouseOut="lolite()" onClick="logVariable('startpage')" href="../../_variables/startpage.html">$startpage</a> = false;
<a name="l1022"><span class="linenum">1022</span></a>          <a class="var it11976" onMouseOver="hilite(11976)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../_variables/pagecount.html">$pagecount</a> = false;
<a name="l1023"><span class="linenum">1023</span></a>      }
<a name="l1024"><span class="linenum">1024</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it13868" onMouseOver="hilite(13868)" onMouseOut="lolite()" onClick="logVariable('startpage')" href="../../_variables/startpage.html">$startpage</a>, <a class="var it11976" onMouseOver="hilite(11976)" onMouseOut="lolite()" onClick="logVariable('pagecount')" href="../../_variables/pagecount.html">$pagecount</a>);
<a name="l1025"><span class="linenum">1025</span></a>  }
<a name="l1026"><span class="linenum">1026</span></a>  
<a name="l1027"><span class="linenum">1027</span></a>  <span class="comment">/**</span>
<a name="l1028"><span class="linenum">1028</span></a>  <span class="comment"> * get users which have the viewreports-capability</span>
<a name="l1029"><span class="linenum">1029</span></a>  <span class="comment"> *</span>
<a name="l1030"><span class="linenum">1030</span></a>  <span class="comment"> * @uses CONTEXT_MODULE</span>
<a name="l1031"><span class="linenum">1031</span></a>  <span class="comment"> * @param int $cmid</span>
<a name="l1032"><span class="linenum">1032</span></a>  <span class="comment"> * @param mixed $groups single groupid or array of groupids - group(s) user is in</span>
<a name="l1033"><span class="linenum">1033</span></a>  <span class="comment"> * @return object the userrecords</span>
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment"> */</span>
<a name="l1035"><span class="linenum">1035</span></a>  function <a class="function" onClick="logFunction('feedback_get_viewreports_users')" href="../../_functions/feedback_get_viewreports_users.html" onMouseOver="funcPopup(event,'feedback_get_viewreports_users')">feedback_get_viewreports_users</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = false) {
<a name="l1036"><span class="linenum">1036</span></a>  
<a name="l1037"><span class="linenum">1037</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l1038"><span class="linenum">1038</span></a>  
<a name="l1039"><span class="linenum">1039</span></a>  <span class="comment">    //description of the call below:</span>
<a name="l1040"><span class="linenum">1040</span></a>  <span class="comment">    //get_users_by_capability($context, $capability, $fields='', $sort='', $limitfrom='',</span>
<a name="l1041"><span class="linenum">1041</span></a>  <span class="comment">    //                          $limitnum='', $groups='', $exceptions='', $doanything=true)</span>
<a name="l1042"><span class="linenum">1042</span></a>      return <a class="function" onClick="logFunction('get_users_by_capability')" href="../../_functions/get_users_by_capability.html" onMouseOver="funcPopup(event,'get_users_by_capability')">get_users_by_capability</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l1043"><span class="linenum">1043</span></a>                              'mod/feedback:viewreports',
<a name="l1044"><span class="linenum">1044</span></a>                              '',
<a name="l1045"><span class="linenum">1045</span></a>                              'lastname',
<a name="l1046"><span class="linenum">1046</span></a>                              '',
<a name="l1047"><span class="linenum">1047</span></a>                              '',
<a name="l1048"><span class="linenum">1048</span></a>                              <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>,
<a name="l1049"><span class="linenum">1049</span></a>                              '',
<a name="l1050"><span class="linenum">1050</span></a>                              false);
<a name="l1051"><span class="linenum">1051</span></a>  }
<a name="l1052"><span class="linenum">1052</span></a>  
<a name="l1053"><span class="linenum">1053</span></a>  <span class="comment">/**</span>
<a name="l1054"><span class="linenum">1054</span></a>  <span class="comment"> * get users which have the receivemail-capability</span>
<a name="l1055"><span class="linenum">1055</span></a>  <span class="comment"> *</span>
<a name="l1056"><span class="linenum">1056</span></a>  <span class="comment"> * @uses CONTEXT_MODULE</span>
<a name="l1057"><span class="linenum">1057</span></a>  <span class="comment"> * @param int $cmid</span>
<a name="l1058"><span class="linenum">1058</span></a>  <span class="comment"> * @param mixed $groups single groupid or array of groupids - group(s) user is in</span>
<a name="l1059"><span class="linenum">1059</span></a>  <span class="comment"> * @return object the userrecords</span>
<a name="l1060"><span class="linenum">1060</span></a>  <span class="comment"> */</span>
<a name="l1061"><span class="linenum">1061</span></a>  function <a class="function" onClick="logFunction('feedback_get_receivemail_users')" href="../../_functions/feedback_get_receivemail_users.html" onMouseOver="funcPopup(event,'feedback_get_receivemail_users')">feedback_get_receivemail_users</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = false) {
<a name="l1062"><span class="linenum">1062</span></a>  
<a name="l1063"><span class="linenum">1063</span></a>      <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it171" onMouseOver="hilite(171)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>);
<a name="l1064"><span class="linenum">1064</span></a>  
<a name="l1065"><span class="linenum">1065</span></a>  <span class="comment">    //description of the call below:</span>
<a name="l1066"><span class="linenum">1066</span></a>  <span class="comment">    //get_users_by_capability($context, $capability, $fields='', $sort='', $limitfrom='',</span>
<a name="l1067"><span class="linenum">1067</span></a>  <span class="comment">    //                          $limitnum='', $groups='', $exceptions='', $doanything=true)</span>
<a name="l1068"><span class="linenum">1068</span></a>      return <a class="function" onClick="logFunction('get_users_by_capability')" href="../../_functions/get_users_by_capability.html" onMouseOver="funcPopup(event,'get_users_by_capability')">get_users_by_capability</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l1069"><span class="linenum">1069</span></a>                              'mod/feedback:receivemail',
<a name="l1070"><span class="linenum">1070</span></a>                              '',
<a name="l1071"><span class="linenum">1071</span></a>                              'lastname',
<a name="l1072"><span class="linenum">1072</span></a>                              '',
<a name="l1073"><span class="linenum">1073</span></a>                              '',
<a name="l1074"><span class="linenum">1074</span></a>                              <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>,
<a name="l1075"><span class="linenum">1075</span></a>                              '',
<a name="l1076"><span class="linenum">1076</span></a>                              false);
<a name="l1077"><span class="linenum">1077</span></a>  }
<a name="l1078"><span class="linenum">1078</span></a>  
<a name="l1079"><span class="linenum">1079</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l1080"><span class="linenum">1080</span></a>  <span class="comment">//functions to handle the templates</span>
<a name="l1081"><span class="linenum">1081</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l1082"><span class="linenum">1082</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l1083"><span class="linenum">1083</span></a>  
<a name="l1084"><span class="linenum">1084</span></a>  <span class="comment">/**</span>
<a name="l1085"><span class="linenum">1085</span></a>  <span class="comment"> * creates a new template-record.</span>
<a name="l1086"><span class="linenum">1086</span></a>  <span class="comment"> *</span>
<a name="l1087"><span class="linenum">1087</span></a>  <span class="comment"> * @global object</span>
<a name="l1088"><span class="linenum">1088</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l1089"><span class="linenum">1089</span></a>  <span class="comment"> * @param string $name the name of template shown in the templatelist</span>
<a name="l1090"><span class="linenum">1090</span></a>  <span class="comment"> * @param int $ispublic 0:privat 1:public</span>
<a name="l1091"><span class="linenum">1091</span></a>  <span class="comment"> * @return int the new templateid</span>
<a name="l1092"><span class="linenum">1092</span></a>  <span class="comment"> */</span>
<a name="l1093"><span class="linenum">1093</span></a>  function <a class="function" onClick="logFunction('feedback_create_template')" href="../../_functions/feedback_create_template.html" onMouseOver="funcPopup(event,'feedback_create_template')">feedback_create_template</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it5503" onMouseOver="hilite(5503)" onMouseOut="lolite()" onClick="logVariable('ispublic')" href="../../_variables/ispublic.html">$ispublic</a> = 0) {
<a name="l1094"><span class="linenum">1094</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1095"><span class="linenum">1095</span></a>  
<a name="l1096"><span class="linenum">1096</span></a>      <a class="var it38585" onMouseOver="hilite(38585)" onMouseOut="lolite()" onClick="logVariable('templ')" href="../../_variables/templ.html">$templ</a> = new stdClass();
<a name="l1097"><span class="linenum">1097</span></a>      <a class="var it38585" onMouseOver="hilite(38585)" onMouseOut="lolite()" onClick="logVariable('templ')" href="../../_variables/templ.html">$templ</a>-&gt;<a onClick="logVariable('course')" class="var it40562" onMouseOver="hilite(40562)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>   = (<a class="var it5503" onMouseOver="hilite(5503)" onMouseOut="lolite()" onClick="logVariable('ispublic')" href="../../_variables/ispublic.html">$ispublic</a> ? 0 : <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>);
<a name="l1098"><span class="linenum">1098</span></a>      <a class="var it38585" onMouseOver="hilite(38585)" onMouseOut="lolite()" onClick="logVariable('templ')" href="../../_variables/templ.html">$templ</a>-&gt;<a onClick="logVariable('name')" class="var it40562" onMouseOver="hilite(40562)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>     = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>;
<a name="l1099"><span class="linenum">1099</span></a>      <a class="var it38585" onMouseOver="hilite(38585)" onMouseOut="lolite()" onClick="logVariable('templ')" href="../../_variables/templ.html">$templ</a>-&gt;<a onClick="logVariable('ispublic')" class="var it40562" onMouseOver="hilite(40562)" onMouseOut="lolite()" href="../../_variables/ispublic.html">ispublic</a> = <a class="var it5503" onMouseOver="hilite(5503)" onMouseOut="lolite()" onClick="logVariable('ispublic')" href="../../_variables/ispublic.html">$ispublic</a>;
<a name="l1100"><span class="linenum">1100</span></a>  
<a name="l1101"><span class="linenum">1101</span></a>      <a class="var it38586" onMouseOver="hilite(38586)" onMouseOut="lolite()" onClick="logVariable('templid')" href="../../_variables/templid.html">$templid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('feedback_template', <a class="var it38585" onMouseOver="hilite(38585)" onMouseOut="lolite()" onClick="logVariable('templ')" href="../../_variables/templ.html">$templ</a>);
<a name="l1102"><span class="linenum">1102</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_template', array('id'=&gt;<a class="var it38586" onMouseOver="hilite(38586)" onMouseOut="lolite()" onClick="logVariable('templid')" href="../../_variables/templid.html">$templid</a>));
<a name="l1103"><span class="linenum">1103</span></a>  }
<a name="l1104"><span class="linenum">1104</span></a>  
<a name="l1105"><span class="linenum">1105</span></a>  <span class="comment">/**</span>
<a name="l1106"><span class="linenum">1106</span></a>  <span class="comment"> * creates new template items.</span>
<a name="l1107"><span class="linenum">1107</span></a>  <span class="comment"> * all items will be copied and the attribute feedback will be set to 0</span>
<a name="l1108"><span class="linenum">1108</span></a>  <span class="comment"> * and the attribute template will be set to the new templateid</span>
<a name="l1109"><span class="linenum">1109</span></a>  <span class="comment"> *</span>
<a name="l1110"><span class="linenum">1110</span></a>  <span class="comment"> * @global object</span>
<a name="l1111"><span class="linenum">1111</span></a>  <span class="comment"> * @uses CONTEXT_MODULE</span>
<a name="l1112"><span class="linenum">1112</span></a>  <span class="comment"> * @uses CONTEXT_COURSE</span>
<a name="l1113"><span class="linenum">1113</span></a>  <span class="comment"> * @param object $feedback</span>
<a name="l1114"><span class="linenum">1114</span></a>  <span class="comment"> * @param string $name the name of template shown in the templatelist</span>
<a name="l1115"><span class="linenum">1115</span></a>  <span class="comment"> * @param int $ispublic 0:privat 1:public</span>
<a name="l1116"><span class="linenum">1116</span></a>  <span class="comment"> * @return boolean</span>
<a name="l1117"><span class="linenum">1117</span></a>  <span class="comment"> */</span>
<a name="l1118"><span class="linenum">1118</span></a>  function <a class="function" onClick="logFunction('feedback_save_as_template')" href="../../_functions/feedback_save_as_template.html" onMouseOver="funcPopup(event,'feedback_save_as_template')">feedback_save_as_template</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it5503" onMouseOver="hilite(5503)" onMouseOut="lolite()" onClick="logVariable('ispublic')" href="../../_variables/ispublic.html">$ispublic</a> = 0) {
<a name="l1119"><span class="linenum">1119</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1120"><span class="linenum">1120</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1121"><span class="linenum">1121</span></a>  
<a name="l1122"><span class="linenum">1122</span></a>      if (!<a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_item', array('feedback'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1123"><span class="linenum">1123</span></a>          return false;
<a name="l1124"><span class="linenum">1124</span></a>      }
<a name="l1125"><span class="linenum">1125</span></a>  
<a name="l1126"><span class="linenum">1126</span></a>      if (!<a class="var it38587" onMouseOver="hilite(38587)" onMouseOut="lolite()" onClick="logVariable('newtempl')" href="../../_variables/newtempl.html">$newtempl</a> = <a class="function" onClick="logFunction('feedback_create_template')" href="../../_functions/feedback_create_template.html" onMouseOver="funcPopup(event,'feedback_create_template')">feedback_create_template</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('course')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it5503" onMouseOver="hilite(5503)" onMouseOut="lolite()" onClick="logVariable('ispublic')" href="../../_variables/ispublic.html">$ispublic</a>)) {
<a name="l1127"><span class="linenum">1127</span></a>          return false;
<a name="l1128"><span class="linenum">1128</span></a>      }
<a name="l1129"><span class="linenum">1129</span></a>  
<a name="l1130"><span class="linenum">1130</span></a>  <span class="comment">    //files in the template_item are in the context of the current course or</span>
<a name="l1131"><span class="linenum">1131</span></a>  <span class="comment">    //if the template is public the files are in the system context</span>
<a name="l1132"><span class="linenum">1132</span></a>  <span class="comment">    //files in the feedback_item are in the feedback_context of the feedback</span>
<a name="l1133"><span class="linenum">1133</span></a>      if (<a class="var it5503" onMouseOver="hilite(5503)" onMouseOut="lolite()" onClick="logVariable('ispublic')" href="../../_variables/ispublic.html">$ispublic</a>) {
<a name="l1134"><span class="linenum">1134</span></a>          <a class="var it38588" onMouseOver="hilite(38588)" onMouseOut="lolite()" onClick="logVariable('s_context')" href="../../_variables/s_context.html">$s_context</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1135"><span class="linenum">1135</span></a>      } else {
<a name="l1136"><span class="linenum">1136</span></a>          <a class="var it38588" onMouseOver="hilite(38588)" onMouseOut="lolite()" onClick="logVariable('s_context')" href="../../_variables/s_context.html">$s_context</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it38587" onMouseOver="hilite(38587)" onMouseOut="lolite()" onClick="logVariable('newtempl')" href="../../_variables/newtempl.html">$newtempl</a>-&gt;<a onClick="logVariable('course')" class="var it40563" onMouseOver="hilite(40563)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>);
<a name="l1137"><span class="linenum">1137</span></a>      }
<a name="l1138"><span class="linenum">1138</span></a>      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1139"><span class="linenum">1139</span></a>      <a class="var it38589" onMouseOver="hilite(38589)" onMouseOut="lolite()" onClick="logVariable('f_context')" href="../../_variables/f_context.html">$f_context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1140"><span class="linenum">1140</span></a>  
<a name="l1141"><span class="linenum">1141</span></a>  <span class="comment">    //create items of this new template</span>
<a name="l1142"><span class="linenum">1142</span></a>  <span class="comment">    //depend items we are storing temporary in an mapping list array(new id =&gt; dependitem)</span>
<a name="l1143"><span class="linenum">1143</span></a>  <span class="comment">    //we also store a mapping of all items array(oldid =&gt; newid)</span>
<a name="l1144"><span class="linenum">1144</span></a>      <a class="var it1048" onMouseOver="hilite(1048)" onMouseOut="lolite()" onClick="logVariable('dependitemsmap')" href="../../_variables/dependitemsmap.html">$dependitemsmap</a> = array();
<a name="l1145"><span class="linenum">1145</span></a>      <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('itembackup')" href="../../_variables/itembackup.html">$itembackup</a> = array();
<a name="l1146"><span class="linenum">1146</span></a>      foreach (<a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l1147"><span class="linenum">1147</span></a>  
<a name="l1148"><span class="linenum">1148</span></a>          <a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l1149"><span class="linenum">1149</span></a>  
<a name="l1150"><span class="linenum">1150</span></a>          unset(<a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>-&gt;<a onClick="logVariable('id')" class="var it40564" onMouseOver="hilite(40564)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1151"><span class="linenum">1151</span></a>          <a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>-&gt;<a onClick="logVariable('feedback')" class="var it40564" onMouseOver="hilite(40564)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = 0;
<a name="l1152"><span class="linenum">1152</span></a>          <a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>-&gt;<a onClick="logVariable('template')" class="var it40564" onMouseOver="hilite(40564)" onMouseOut="lolite()" href="../../_variables/template.html">template</a>     = <a class="var it38587" onMouseOver="hilite(38587)" onMouseOut="lolite()" onClick="logVariable('newtempl')" href="../../_variables/newtempl.html">$newtempl</a>-&gt;<a onClick="logVariable('id')" class="var it40563" onMouseOver="hilite(40563)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1153"><span class="linenum">1153</span></a>          <a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>-&gt;<a onClick="logVariable('id')" class="var it40564" onMouseOver="hilite(40564)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('feedback_item', <a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>);
<a name="l1154"><span class="linenum">1154</span></a>  <span class="comment">        //copy all included files to the feedback_template filearea</span>
<a name="l1155"><span class="linenum">1155</span></a>          <a class="var it38591" onMouseOver="hilite(38591)" onMouseOut="lolite()" onClick="logVariable('itemfiles')" href="../../_variables/itemfiles.html">$itemfiles</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it38589" onMouseOver="hilite(38589)" onMouseOut="lolite()" onClick="logVariable('f_context')" href="../../_variables/f_context.html">$f_context</a>-&gt;<a onClick="logVariable('id')" class="var it40565" onMouseOver="hilite(40565)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1156"><span class="linenum">1156</span></a>                                      'mod_feedback',
<a name="l1157"><span class="linenum">1157</span></a>                                      'item',
<a name="l1158"><span class="linenum">1158</span></a>                                      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1159"><span class="linenum">1159</span></a>                                      &quot;id&quot;,
<a name="l1160"><span class="linenum">1160</span></a>                                      false);
<a name="l1161"><span class="linenum">1161</span></a>          if (<a class="var it38591" onMouseOver="hilite(38591)" onMouseOut="lolite()" onClick="logVariable('itemfiles')" href="../../_variables/itemfiles.html">$itemfiles</a>) {
<a name="l1162"><span class="linenum">1162</span></a>              foreach (<a class="var it38591" onMouseOver="hilite(38591)" onMouseOut="lolite()" onClick="logVariable('itemfiles')" href="../../_variables/itemfiles.html">$itemfiles</a> as <a class="var it38592" onMouseOver="hilite(38592)" onMouseOut="lolite()" onClick="logVariable('ifile')" href="../../_variables/ifile.html">$ifile</a>) {
<a name="l1163"><span class="linenum">1163</span></a>                  <a class="var it8821" onMouseOver="hilite(8821)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a> = new stdClass();
<a name="l1164"><span class="linenum">1164</span></a>                  <a class="var it8821" onMouseOver="hilite(8821)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a>-&gt;<a onClick="logVariable('contextid')" class="var it40414" onMouseOver="hilite(40414)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it38588" onMouseOver="hilite(38588)" onMouseOut="lolite()" onClick="logVariable('s_context')" href="../../_variables/s_context.html">$s_context</a>-&gt;<a onClick="logVariable('id')" class="var it40566" onMouseOver="hilite(40566)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1165"><span class="linenum">1165</span></a>                  <a class="var it8821" onMouseOver="hilite(8821)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a>-&gt;<a onClick="logVariable('component')" class="var it40414" onMouseOver="hilite(40414)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = 'mod_feedback';
<a name="l1166"><span class="linenum">1166</span></a>                  <a class="var it8821" onMouseOver="hilite(8821)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a>-&gt;<a onClick="logVariable('filearea')" class="var it40414" onMouseOver="hilite(40414)" onMouseOut="lolite()" href="../../_variables/filearea.html">filearea</a> = 'template';
<a name="l1167"><span class="linenum">1167</span></a>                  <a class="var it8821" onMouseOver="hilite(8821)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a>-&gt;<a onClick="logVariable('itemid')" class="var it40414" onMouseOver="hilite(40414)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a> = <a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>-&gt;<a onClick="logVariable('id')" class="var it40564" onMouseOver="hilite(40564)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1168"><span class="linenum">1168</span></a>                  <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_storedfile')" href="../../_functions/create_file_from_storedfile.html" onMouseOver="funcPopup(event,'create_file_from_storedfile')">create_file_from_storedfile</a>(<a class="var it8821" onMouseOver="hilite(8821)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a>, <a class="var it38592" onMouseOver="hilite(38592)" onMouseOut="lolite()" onClick="logVariable('ifile')" href="../../_variables/ifile.html">$ifile</a>);
<a name="l1169"><span class="linenum">1169</span></a>              }
<a name="l1170"><span class="linenum">1170</span></a>          }
<a name="l1171"><span class="linenum">1171</span></a>  
<a name="l1172"><span class="linenum">1172</span></a>          <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('itembackup')" href="../../_variables/itembackup.html">$itembackup</a>[<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>-&gt;<a onClick="logVariable('id')" class="var it40564" onMouseOver="hilite(40564)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1173"><span class="linenum">1173</span></a>          if (<a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>-&gt;<a onClick="logVariable('dependitem')" class="var it40564" onMouseOver="hilite(40564)" onMouseOut="lolite()" href="../../_variables/dependitem.html">dependitem</a>) {
<a name="l1174"><span class="linenum">1174</span></a>              <a class="var it1048" onMouseOver="hilite(1048)" onMouseOut="lolite()" onClick="logVariable('dependitemsmap')" href="../../_variables/dependitemsmap.html">$dependitemsmap</a>[<a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>-&gt;<a onClick="logVariable('id')" class="var it40564" onMouseOver="hilite(40564)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>-&gt;<a onClick="logVariable('dependitem')" class="var it40564" onMouseOver="hilite(40564)" onMouseOut="lolite()" href="../../_variables/dependitem.html">dependitem</a>;
<a name="l1175"><span class="linenum">1175</span></a>          }
<a name="l1176"><span class="linenum">1176</span></a>  
<a name="l1177"><span class="linenum">1177</span></a>      }
<a name="l1178"><span class="linenum">1178</span></a>  
<a name="l1179"><span class="linenum">1179</span></a>  <span class="comment">    //remapping the dependency</span>
<a name="l1180"><span class="linenum">1180</span></a>      foreach (<a class="var it1048" onMouseOver="hilite(1048)" onMouseOut="lolite()" onClick="logVariable('dependitemsmap')" href="../../_variables/dependitemsmap.html">$dependitemsmap</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it1057" onMouseOver="hilite(1057)" onMouseOut="lolite()" onClick="logVariable('dependitem')" href="../../_variables/dependitem.html">$dependitem</a>) {
<a name="l1181"><span class="linenum">1181</span></a>          <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('newitem')" href="../../_variables/newitem.html">$newitem</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_item', array('id'=&gt;<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>));
<a name="l1182"><span class="linenum">1182</span></a>          <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('newitem')" href="../../_variables/newitem.html">$newitem</a>-&gt;<a onClick="logVariable('dependitem')" class="var it40193" onMouseOver="hilite(40193)" onMouseOut="lolite()" href="../../_variables/dependitem.html">dependitem</a> = <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('itembackup')" href="../../_variables/itembackup.html">$itembackup</a>[<a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('newitem')" href="../../_variables/newitem.html">$newitem</a>-&gt;<a onClick="logVariable('dependitem')" class="var it40193" onMouseOver="hilite(40193)" onMouseOut="lolite()" href="../../_variables/dependitem.html">dependitem</a>];
<a name="l1183"><span class="linenum">1183</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('feedback_item', <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('newitem')" href="../../_variables/newitem.html">$newitem</a>);
<a name="l1184"><span class="linenum">1184</span></a>      }
<a name="l1185"><span class="linenum">1185</span></a>  
<a name="l1186"><span class="linenum">1186</span></a>      return true;
<a name="l1187"><span class="linenum">1187</span></a>  }
<a name="l1188"><span class="linenum">1188</span></a>  
<a name="l1189"><span class="linenum">1189</span></a>  <span class="comment">/**</span>
<a name="l1190"><span class="linenum">1190</span></a>  <span class="comment"> * deletes all feedback_items related to the given template id</span>
<a name="l1191"><span class="linenum">1191</span></a>  <span class="comment"> *</span>
<a name="l1192"><span class="linenum">1192</span></a>  <span class="comment"> * @global object</span>
<a name="l1193"><span class="linenum">1193</span></a>  <span class="comment"> * @uses CONTEXT_COURSE</span>
<a name="l1194"><span class="linenum">1194</span></a>  <span class="comment"> * @param object $template the template</span>
<a name="l1195"><span class="linenum">1195</span></a>  <span class="comment"> * @return void</span>
<a name="l1196"><span class="linenum">1196</span></a>  <span class="comment"> */</span>
<a name="l1197"><span class="linenum">1197</span></a>  function <a class="function" onClick="logFunction('feedback_delete_template')" href="../../_functions/feedback_delete_template.html" onMouseOver="funcPopup(event,'feedback_delete_template')">feedback_delete_template</a>(<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>) {
<a name="l1198"><span class="linenum">1198</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1199"><span class="linenum">1199</span></a>  
<a name="l1200"><span class="linenum">1200</span></a>  <span class="comment">    //deleting the files from the item is done by feedback_delete_item</span>
<a name="l1201"><span class="linenum">1201</span></a>      if (<a class="var it38593" onMouseOver="hilite(38593)" onMouseOut="lolite()" onClick="logVariable('t_items')" href="../../_variables/t_items.html">$t_items</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;feedback_item&quot;, array(&quot;template&quot;=&gt;<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>-&gt;<a onClick="logVariable('id')" class="var it39918" onMouseOver="hilite(39918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1202"><span class="linenum">1202</span></a>          foreach (<a class="var it38593" onMouseOver="hilite(38593)" onMouseOut="lolite()" onClick="logVariable('t_items')" href="../../_variables/t_items.html">$t_items</a> as <a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>) {
<a name="l1203"><span class="linenum">1203</span></a>              <a class="function" onClick="logFunction('feedback_delete_item')" href="../../_functions/feedback_delete_item.html" onMouseOver="funcPopup(event,'feedback_delete_item')">feedback_delete_item</a>(<a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>-&gt;<a onClick="logVariable('id')" class="var it40564" onMouseOver="hilite(40564)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>);
<a name="l1204"><span class="linenum">1204</span></a>          }
<a name="l1205"><span class="linenum">1205</span></a>      }
<a name="l1206"><span class="linenum">1206</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;feedback_template&quot;, array(&quot;id&quot;=&gt;<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>-&gt;<a onClick="logVariable('id')" class="var it39918" onMouseOver="hilite(39918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1207"><span class="linenum">1207</span></a>  }
<a name="l1208"><span class="linenum">1208</span></a>  
<a name="l1209"><span class="linenum">1209</span></a>  <span class="comment">/**</span>
<a name="l1210"><span class="linenum">1210</span></a>  <span class="comment"> * creates new feedback_item-records from template.</span>
<a name="l1211"><span class="linenum">1211</span></a>  <span class="comment"> * if $deleteold is set true so the existing items of the given feedback will be deleted</span>
<a name="l1212"><span class="linenum">1212</span></a>  <span class="comment"> * if $deleteold is set false so the new items will be appanded to the old items</span>
<a name="l1213"><span class="linenum">1213</span></a>  <span class="comment"> *</span>
<a name="l1214"><span class="linenum">1214</span></a>  <span class="comment"> * @global object</span>
<a name="l1215"><span class="linenum">1215</span></a>  <span class="comment"> * @uses CONTEXT_COURSE</span>
<a name="l1216"><span class="linenum">1216</span></a>  <span class="comment"> * @uses CONTEXT_MODULE</span>
<a name="l1217"><span class="linenum">1217</span></a>  <span class="comment"> * @param object $feedback</span>
<a name="l1218"><span class="linenum">1218</span></a>  <span class="comment"> * @param int $templateid</span>
<a name="l1219"><span class="linenum">1219</span></a>  <span class="comment"> * @param boolean $deleteold</span>
<a name="l1220"><span class="linenum">1220</span></a>  <span class="comment"> */</span>
<a name="l1221"><span class="linenum">1221</span></a>  function <a class="function" onClick="logFunction('feedback_items_from_template')" href="../../_functions/feedback_items_from_template.html" onMouseOver="funcPopup(event,'feedback_items_from_template')">feedback_items_from_template</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>, <a class="var it7006" onMouseOver="hilite(7006)" onMouseOut="lolite()" onClick="logVariable('templateid')" href="../../_variables/templateid.html">$templateid</a>, <a class="var it38594" onMouseOver="hilite(38594)" onMouseOut="lolite()" onClick="logVariable('deleteold')" href="../../_variables/deleteold.html">$deleteold</a> = false) {
<a name="l1222"><span class="linenum">1222</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1223"><span class="linenum">1223</span></a>  
<a name="l1224"><span class="linenum">1224</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/completionlib.php');
<a name="l1225"><span class="linenum">1225</span></a>  
<a name="l1226"><span class="linenum">1226</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1227"><span class="linenum">1227</span></a>  
<a name="l1228"><span class="linenum">1228</span></a>      if (!<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_template', array('id'=&gt;<a class="var it7006" onMouseOver="hilite(7006)" onMouseOut="lolite()" onClick="logVariable('templateid')" href="../../_variables/templateid.html">$templateid</a>))) {
<a name="l1229"><span class="linenum">1229</span></a>          return false;
<a name="l1230"><span class="linenum">1230</span></a>      }
<a name="l1231"><span class="linenum">1231</span></a>  <span class="comment">    //get all templateitems</span>
<a name="l1232"><span class="linenum">1232</span></a>      if (!<a class="var it38595" onMouseOver="hilite(38595)" onMouseOut="lolite()" onClick="logVariable('templitems')" href="../../_variables/templitems.html">$templitems</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_item', array('template'=&gt;<a class="var it7006" onMouseOver="hilite(7006)" onMouseOut="lolite()" onClick="logVariable('templateid')" href="../../_variables/templateid.html">$templateid</a>))) {
<a name="l1233"><span class="linenum">1233</span></a>          return false;
<a name="l1234"><span class="linenum">1234</span></a>      }
<a name="l1235"><span class="linenum">1235</span></a>  
<a name="l1236"><span class="linenum">1236</span></a>  <span class="comment">    //files in the template_item are in the context of the current course</span>
<a name="l1237"><span class="linenum">1237</span></a>  <span class="comment">    //files in the feedback_item are in the feedback_context of the feedback</span>
<a name="l1238"><span class="linenum">1238</span></a>      if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>-&gt;<a onClick="logVariable('ispublic')" class="var it39918" onMouseOver="hilite(39918)" onMouseOut="lolite()" href="../../_variables/ispublic.html">ispublic</a>) {
<a name="l1239"><span class="linenum">1239</span></a>          <a class="var it38588" onMouseOver="hilite(38588)" onMouseOut="lolite()" onClick="logVariable('s_context')" href="../../_variables/s_context.html">$s_context</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1240"><span class="linenum">1240</span></a>      } else {
<a name="l1241"><span class="linenum">1241</span></a>          <a class="var it38588" onMouseOver="hilite(38588)" onMouseOut="lolite()" onClick="logVariable('s_context')" href="../../_variables/s_context.html">$s_context</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('course')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>);
<a name="l1242"><span class="linenum">1242</span></a>      }
<a name="l1243"><span class="linenum">1243</span></a>      <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('course')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>));
<a name="l1244"><span class="linenum">1244</span></a>      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1245"><span class="linenum">1245</span></a>      <a class="var it38589" onMouseOver="hilite(38589)" onMouseOut="lolite()" onClick="logVariable('f_context')" href="../../_variables/f_context.html">$f_context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1246"><span class="linenum">1246</span></a>  
<a name="l1247"><span class="linenum">1247</span></a>  <span class="comment">    //if deleteold then delete all old items before</span>
<a name="l1248"><span class="linenum">1248</span></a>  <span class="comment">    //get all items</span>
<a name="l1249"><span class="linenum">1249</span></a>      if (<a class="var it38594" onMouseOver="hilite(38594)" onMouseOut="lolite()" onClick="logVariable('deleteold')" href="../../_variables/deleteold.html">$deleteold</a>) {
<a name="l1250"><span class="linenum">1250</span></a>          if (<a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_item', array('feedback'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1251"><span class="linenum">1251</span></a>  <span class="comment">            //delete all items of this feedback</span>
<a name="l1252"><span class="linenum">1252</span></a>              foreach (<a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l1253"><span class="linenum">1253</span></a>                  <a class="function" onClick="logFunction('feedback_delete_item')" href="../../_functions/feedback_delete_item.html" onMouseOver="funcPopup(event,'feedback_delete_item')">feedback_delete_item</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l1254"><span class="linenum">1254</span></a>              }
<a name="l1255"><span class="linenum">1255</span></a>  <span class="comment">            //delete tracking-data</span>
<a name="l1256"><span class="linenum">1256</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_tracking', array('feedback'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1257"><span class="linenum">1257</span></a>  
<a name="l1258"><span class="linenum">1258</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('feedback'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1259"><span class="linenum">1259</span></a>              if (<a class="var it6745" onMouseOver="hilite(6745)" onMouseOut="lolite()" onClick="logVariable('completeds')" href="../../_variables/completeds.html">$completeds</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_completed', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l1260"><span class="linenum">1260</span></a>                  <a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1261"><span class="linenum">1261</span></a>                  foreach (<a class="var it6745" onMouseOver="hilite(6745)" onMouseOut="lolite()" onClick="logVariable('completeds')" href="../../_variables/completeds.html">$completeds</a> as <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>) {
<a name="l1262"><span class="linenum">1262</span></a>  <span class="comment">                    // Update completion state</span>
<a name="l1263"><span class="linenum">1263</span></a>                      if (<a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) &amp;&amp; <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a>) {
<a name="l1264"><span class="linenum">1264</span></a>                          <a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('update_state')" href="../../_functions/update_state.html" onMouseOver="funcPopup(event,'update_state')">update_state</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="constant" onClick="logConstant('COMPLETION_INCOMPLETE')" href="../../_constants/COMPLETION_INCOMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_INCOMPLETE')">COMPLETION_INCOMPLETE</a>, <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('userid')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>);
<a name="l1265"><span class="linenum">1265</span></a>                      }
<a name="l1266"><span class="linenum">1266</span></a>                      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_completed', array('id'=&gt;<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('id')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1267"><span class="linenum">1267</span></a>                  }
<a name="l1268"><span class="linenum">1268</span></a>              }
<a name="l1269"><span class="linenum">1269</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_completedtmp', array('feedback'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1270"><span class="linenum">1270</span></a>          }
<a name="l1271"><span class="linenum">1271</span></a>          <a class="var it38596" onMouseOver="hilite(38596)" onMouseOut="lolite()" onClick="logVariable('positionoffset')" href="../../_variables/positionoffset.html">$positionoffset</a> = 0;
<a name="l1272"><span class="linenum">1272</span></a>      } else {
<a name="l1273"><span class="linenum">1273</span></a>  <span class="comment">        //if the old items are kept the new items will be appended</span>
<a name="l1274"><span class="linenum">1274</span></a>  <span class="comment">        //therefor the new position has an offset</span>
<a name="l1275"><span class="linenum">1275</span></a>          <a class="var it38596" onMouseOver="hilite(38596)" onMouseOut="lolite()" onClick="logVariable('positionoffset')" href="../../_variables/positionoffset.html">$positionoffset</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('feedback_item', array('feedback'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1276"><span class="linenum">1276</span></a>      }
<a name="l1277"><span class="linenum">1277</span></a>  
<a name="l1278"><span class="linenum">1278</span></a>  <span class="comment">    //create items of this new template</span>
<a name="l1279"><span class="linenum">1279</span></a>  <span class="comment">    //depend items we are storing temporary in an mapping list array(new id =&gt; dependitem)</span>
<a name="l1280"><span class="linenum">1280</span></a>  <span class="comment">    //we also store a mapping of all items array(oldid =&gt; newid)</span>
<a name="l1281"><span class="linenum">1281</span></a>      <a class="var it1048" onMouseOver="hilite(1048)" onMouseOut="lolite()" onClick="logVariable('dependitemsmap')" href="../../_variables/dependitemsmap.html">$dependitemsmap</a> = array();
<a name="l1282"><span class="linenum">1282</span></a>      <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('itembackup')" href="../../_variables/itembackup.html">$itembackup</a> = array();
<a name="l1283"><span class="linenum">1283</span></a>      foreach (<a class="var it38595" onMouseOver="hilite(38595)" onMouseOut="lolite()" onClick="logVariable('templitems')" href="../../_variables/templitems.html">$templitems</a> as <a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>) {
<a name="l1284"><span class="linenum">1284</span></a>          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>);
<a name="l1285"><span class="linenum">1285</span></a>          unset(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1286"><span class="linenum">1286</span></a>          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1287"><span class="linenum">1287</span></a>          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('template')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/template.html">template</a> = 0;
<a name="l1288"><span class="linenum">1288</span></a>          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('position')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/position.html">position</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('position')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/position.html">position</a> + <a class="var it38596" onMouseOver="hilite(38596)" onMouseOut="lolite()" onClick="logVariable('positionoffset')" href="../../_variables/positionoffset.html">$positionoffset</a>;
<a name="l1289"><span class="linenum">1289</span></a>  
<a name="l1290"><span class="linenum">1290</span></a>          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('feedback_item', <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l1291"><span class="linenum">1291</span></a>  
<a name="l1292"><span class="linenum">1292</span></a>  <span class="comment">        //moving the files to the new item</span>
<a name="l1293"><span class="linenum">1293</span></a>          <a class="var it38597" onMouseOver="hilite(38597)" onMouseOut="lolite()" onClick="logVariable('templatefiles')" href="../../_variables/templatefiles.html">$templatefiles</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it38588" onMouseOver="hilite(38588)" onMouseOut="lolite()" onClick="logVariable('s_context')" href="../../_variables/s_context.html">$s_context</a>-&gt;<a onClick="logVariable('id')" class="var it40566" onMouseOver="hilite(40566)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1294"><span class="linenum">1294</span></a>                                          'mod_feedback',
<a name="l1295"><span class="linenum">1295</span></a>                                          'template',
<a name="l1296"><span class="linenum">1296</span></a>                                          <a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>-&gt;<a onClick="logVariable('id')" class="var it40564" onMouseOver="hilite(40564)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1297"><span class="linenum">1297</span></a>                                          &quot;id&quot;,
<a name="l1298"><span class="linenum">1298</span></a>                                          false);
<a name="l1299"><span class="linenum">1299</span></a>          if (<a class="var it38597" onMouseOver="hilite(38597)" onMouseOut="lolite()" onClick="logVariable('templatefiles')" href="../../_variables/templatefiles.html">$templatefiles</a>) {
<a name="l1300"><span class="linenum">1300</span></a>              foreach (<a class="var it38597" onMouseOver="hilite(38597)" onMouseOut="lolite()" onClick="logVariable('templatefiles')" href="../../_variables/templatefiles.html">$templatefiles</a> as <a class="var it13943" onMouseOver="hilite(13943)" onMouseOut="lolite()" onClick="logVariable('tfile')" href="../../_variables/tfile.html">$tfile</a>) {
<a name="l1301"><span class="linenum">1301</span></a>                  <a class="var it8821" onMouseOver="hilite(8821)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a> = new stdClass();
<a name="l1302"><span class="linenum">1302</span></a>                  <a class="var it8821" onMouseOver="hilite(8821)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a>-&gt;<a onClick="logVariable('contextid')" class="var it40414" onMouseOver="hilite(40414)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it38589" onMouseOver="hilite(38589)" onMouseOut="lolite()" onClick="logVariable('f_context')" href="../../_variables/f_context.html">$f_context</a>-&gt;<a onClick="logVariable('id')" class="var it40565" onMouseOver="hilite(40565)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1303"><span class="linenum">1303</span></a>                  <a class="var it8821" onMouseOver="hilite(8821)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a>-&gt;<a onClick="logVariable('component')" class="var it40414" onMouseOver="hilite(40414)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = 'mod_feedback';
<a name="l1304"><span class="linenum">1304</span></a>                  <a class="var it8821" onMouseOver="hilite(8821)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a>-&gt;<a onClick="logVariable('filearea')" class="var it40414" onMouseOver="hilite(40414)" onMouseOut="lolite()" href="../../_variables/filearea.html">filearea</a> = 'item';
<a name="l1305"><span class="linenum">1305</span></a>                  <a class="var it8821" onMouseOver="hilite(8821)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a>-&gt;<a onClick="logVariable('itemid')" class="var it40414" onMouseOver="hilite(40414)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1306"><span class="linenum">1306</span></a>                  <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_storedfile')" href="../../_functions/create_file_from_storedfile.html" onMouseOver="funcPopup(event,'create_file_from_storedfile')">create_file_from_storedfile</a>(<a class="var it8821" onMouseOver="hilite(8821)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a>, <a class="var it13943" onMouseOver="hilite(13943)" onMouseOut="lolite()" onClick="logVariable('tfile')" href="../../_variables/tfile.html">$tfile</a>);
<a name="l1307"><span class="linenum">1307</span></a>              }
<a name="l1308"><span class="linenum">1308</span></a>          }
<a name="l1309"><span class="linenum">1309</span></a>  
<a name="l1310"><span class="linenum">1310</span></a>          <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('itembackup')" href="../../_variables/itembackup.html">$itembackup</a>[<a class="var it38590" onMouseOver="hilite(38590)" onMouseOut="lolite()" onClick="logVariable('t_item')" href="../../_variables/t_item.html">$t_item</a>-&gt;<a onClick="logVariable('id')" class="var it40564" onMouseOver="hilite(40564)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1311"><span class="linenum">1311</span></a>          if (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('dependitem')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/dependitem.html">dependitem</a>) {
<a name="l1312"><span class="linenum">1312</span></a>              <a class="var it1048" onMouseOver="hilite(1048)" onMouseOut="lolite()" onClick="logVariable('dependitemsmap')" href="../../_variables/dependitemsmap.html">$dependitemsmap</a>[<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('dependitem')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/dependitem.html">dependitem</a>;
<a name="l1313"><span class="linenum">1313</span></a>          }
<a name="l1314"><span class="linenum">1314</span></a>      }
<a name="l1315"><span class="linenum">1315</span></a>  
<a name="l1316"><span class="linenum">1316</span></a>  <span class="comment">    //remapping the dependency</span>
<a name="l1317"><span class="linenum">1317</span></a>      foreach (<a class="var it1048" onMouseOver="hilite(1048)" onMouseOut="lolite()" onClick="logVariable('dependitemsmap')" href="../../_variables/dependitemsmap.html">$dependitemsmap</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it1057" onMouseOver="hilite(1057)" onMouseOut="lolite()" onClick="logVariable('dependitem')" href="../../_variables/dependitem.html">$dependitem</a>) {
<a name="l1318"><span class="linenum">1318</span></a>          <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('newitem')" href="../../_variables/newitem.html">$newitem</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_item', array('id'=&gt;<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>));
<a name="l1319"><span class="linenum">1319</span></a>          <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('newitem')" href="../../_variables/newitem.html">$newitem</a>-&gt;<a onClick="logVariable('dependitem')" class="var it40193" onMouseOver="hilite(40193)" onMouseOut="lolite()" href="../../_variables/dependitem.html">dependitem</a> = <a class="var it1049" onMouseOver="hilite(1049)" onMouseOut="lolite()" onClick="logVariable('itembackup')" href="../../_variables/itembackup.html">$itembackup</a>[<a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('newitem')" href="../../_variables/newitem.html">$newitem</a>-&gt;<a onClick="logVariable('dependitem')" class="var it40193" onMouseOver="hilite(40193)" onMouseOut="lolite()" href="../../_variables/dependitem.html">dependitem</a>];
<a name="l1320"><span class="linenum">1320</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('feedback_item', <a class="var it1054" onMouseOver="hilite(1054)" onMouseOut="lolite()" onClick="logVariable('newitem')" href="../../_variables/newitem.html">$newitem</a>);
<a name="l1321"><span class="linenum">1321</span></a>      }
<a name="l1322"><span class="linenum">1322</span></a>  }
<a name="l1323"><span class="linenum">1323</span></a>  
<a name="l1324"><span class="linenum">1324</span></a>  <span class="comment">/**</span>
<a name="l1325"><span class="linenum">1325</span></a>  <span class="comment"> * get the list of available templates.</span>
<a name="l1326"><span class="linenum">1326</span></a>  <span class="comment"> * if the $onlyown param is set true so only templates from own course will be served</span>
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment"> * this is important for droping templates</span>
<a name="l1328"><span class="linenum">1328</span></a>  <span class="comment"> *</span>
<a name="l1329"><span class="linenum">1329</span></a>  <span class="comment"> * @global object</span>
<a name="l1330"><span class="linenum">1330</span></a>  <span class="comment"> * @param object $course</span>
<a name="l1331"><span class="linenum">1331</span></a>  <span class="comment"> * @param string $onlyownorpublic</span>
<a name="l1332"><span class="linenum">1332</span></a>  <span class="comment"> * @return array the template recordsets</span>
<a name="l1333"><span class="linenum">1333</span></a>  <span class="comment"> */</span>
<a name="l1334"><span class="linenum">1334</span></a>  function <a class="function" onClick="logFunction('feedback_get_template_list')" href="../../_functions/feedback_get_template_list.html" onMouseOver="funcPopup(event,'feedback_get_template_list')">feedback_get_template_list</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it38598" onMouseOver="hilite(38598)" onMouseOut="lolite()" onClick="logVariable('onlyownorpublic')" href="../../_variables/onlyownorpublic.html">$onlyownorpublic</a> = '') {
<a name="l1335"><span class="linenum">1335</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1336"><span class="linenum">1336</span></a>  
<a name="l1337"><span class="linenum">1337</span></a>      switch(<a class="var it38598" onMouseOver="hilite(38598)" onMouseOut="lolite()" onClick="logVariable('onlyownorpublic')" href="../../_variables/onlyownorpublic.html">$onlyownorpublic</a>) {
<a name="l1338"><span class="linenum">1338</span></a>          case '':
<a name="l1339"><span class="linenum">1339</span></a>              <a class="var it8957" onMouseOver="hilite(8957)" onMouseOut="lolite()" onClick="logVariable('templates')" href="../../_variables/templates.html">$templates</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('feedback_template',
<a name="l1340"><span class="linenum">1340</span></a>                                                   'course = ? OR ispublic = 1',
<a name="l1341"><span class="linenum">1341</span></a>                                                   array(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1342"><span class="linenum">1342</span></a>                                                   'name');
<a name="l1343"><span class="linenum">1343</span></a>              break;
<a name="l1344"><span class="linenum">1344</span></a>          case 'own':
<a name="l1345"><span class="linenum">1345</span></a>              <a class="var it8957" onMouseOver="hilite(8957)" onMouseOut="lolite()" onClick="logVariable('templates')" href="../../_variables/templates.html">$templates</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_template',
<a name="l1346"><span class="linenum">1346</span></a>                                            array('course'=&gt;<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1347"><span class="linenum">1347</span></a>                                            'name');
<a name="l1348"><span class="linenum">1348</span></a>              break;
<a name="l1349"><span class="linenum">1349</span></a>          case 'public':
<a name="l1350"><span class="linenum">1350</span></a>              <a class="var it8957" onMouseOver="hilite(8957)" onMouseOut="lolite()" onClick="logVariable('templates')" href="../../_variables/templates.html">$templates</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_template', array('ispublic'=&gt;1), 'name');
<a name="l1351"><span class="linenum">1351</span></a>              break;
<a name="l1352"><span class="linenum">1352</span></a>      }
<a name="l1353"><span class="linenum">1353</span></a>      return <a class="var it8957" onMouseOver="hilite(8957)" onMouseOut="lolite()" onClick="logVariable('templates')" href="../../_variables/templates.html">$templates</a>;
<a name="l1354"><span class="linenum">1354</span></a>  }
<a name="l1355"><span class="linenum">1355</span></a>  
<a name="l1356"><span class="linenum">1356</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l1357"><span class="linenum">1357</span></a>  <span class="comment">//Handling der Items</span>
<a name="l1358"><span class="linenum">1358</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l1359"><span class="linenum">1359</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l1360"><span class="linenum">1360</span></a>  
<a name="l1361"><span class="linenum">1361</span></a>  <span class="comment">/**</span>
<a name="l1362"><span class="linenum">1362</span></a>  <span class="comment"> * load the lib.php from item-plugin-dir and returns the instance of the itemclass</span>
<a name="l1363"><span class="linenum">1363</span></a>  <span class="comment"> *</span>
<a name="l1364"><span class="linenum">1364</span></a>  <span class="comment"> * @global object</span>
<a name="l1365"><span class="linenum">1365</span></a>  <span class="comment"> * @param object $item</span>
<a name="l1366"><span class="linenum">1366</span></a>  <span class="comment"> * @return object the instanz of itemclass</span>
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment"> */</span>
<a name="l1368"><span class="linenum">1368</span></a>  function <a class="function" onClick="logFunction('feedback_get_item_class')" href="../../_functions/feedback_get_item_class.html" onMouseOver="funcPopup(event,'feedback_get_item_class')">feedback_get_item_class</a>(<a class="var it1050" onMouseOver="hilite(1050)" onMouseOut="lolite()" onClick="logVariable('typ')" href="../../_variables/typ.html">$typ</a>) {
<a name="l1369"><span class="linenum">1369</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1370"><span class="linenum">1370</span></a>  
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment">    //get the class of item-typ</span>
<a name="l1372"><span class="linenum">1372</span></a>      <a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('itemclass')" href="../../_variables/itemclass.html">$itemclass</a> = 'feedback_item_'.<a class="var it1050" onMouseOver="hilite(1050)" onMouseOut="lolite()" onClick="logVariable('typ')" href="../../_variables/typ.html">$typ</a>;
<a name="l1373"><span class="linenum">1373</span></a>  <span class="comment">    //get the instance of item-class</span>
<a name="l1374"><span class="linenum">1374</span></a>      if (!<a class="phpfunction" onClick="logFunction('class_exists')" href="../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>(<a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('itemclass')" href="../../_variables/itemclass.html">$itemclass</a>)) {
<a name="l1375"><span class="linenum">1375</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/mod/feedback/item/'.<a class="var it1050" onMouseOver="hilite(1050)" onMouseOut="lolite()" onClick="logVariable('typ')" href="../../_variables/typ.html">$typ</a>.'/lib.php');
<a name="l1376"><span class="linenum">1376</span></a>      }
<a name="l1377"><span class="linenum">1377</span></a>      return new <a class="var it1052" onMouseOver="hilite(1052)" onMouseOut="lolite()" onClick="logVariable('itemclass')" href="../../_variables/itemclass.html">$itemclass</a>();
<a name="l1378"><span class="linenum">1378</span></a>  }
<a name="l1379"><span class="linenum">1379</span></a>  
<a name="l1380"><span class="linenum">1380</span></a>  <span class="comment">/**</span>
<a name="l1381"><span class="linenum">1381</span></a>  <span class="comment"> * load the available item plugins from given subdirectory of $CFG-&gt;dirroot</span>
<a name="l1382"><span class="linenum">1382</span></a>  <span class="comment"> * the default is &quot;mod/feedback/item&quot;</span>
<a name="l1383"><span class="linenum">1383</span></a>  <span class="comment"> *</span>
<a name="l1384"><span class="linenum">1384</span></a>  <span class="comment"> * @global object</span>
<a name="l1385"><span class="linenum">1385</span></a>  <span class="comment"> * @param string $dir the subdir</span>
<a name="l1386"><span class="linenum">1386</span></a>  <span class="comment"> * @return array pluginnames as string</span>
<a name="l1387"><span class="linenum">1387</span></a>  <span class="comment"> */</span>
<a name="l1388"><span class="linenum">1388</span></a>  function <a class="function" onClick="logFunction('feedback_load_feedback_items')" href="../../_functions/feedback_load_feedback_items.html" onMouseOver="funcPopup(event,'feedback_load_feedback_items')">feedback_load_feedback_items</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a> = 'mod/feedback/item') {
<a name="l1389"><span class="linenum">1389</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1390"><span class="linenum">1390</span></a>      <a class="var it21" onMouseOver="hilite(21)" onMouseOut="lolite()" onClick="logVariable('names')" href="../../_variables/names.html">$names</a> = <a class="function" onClick="logFunction('get_list_of_plugins')" href="../../_functions/get_list_of_plugins.html" onMouseOver="funcPopup(event,'get_list_of_plugins')">get_list_of_plugins</a>(<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>);
<a name="l1391"><span class="linenum">1391</span></a>      <a class="var it38599" onMouseOver="hilite(38599)" onMouseOut="lolite()" onClick="logVariable('ret_names')" href="../../_variables/ret_names.html">$ret_names</a> = array();
<a name="l1392"><span class="linenum">1392</span></a>  
<a name="l1393"><span class="linenum">1393</span></a>      foreach (<a class="var it21" onMouseOver="hilite(21)" onMouseOut="lolite()" onClick="logVariable('names')" href="../../_variables/names.html">$names</a> as <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>) {
<a name="l1394"><span class="linenum">1394</span></a>          require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/'.<a class="var it1099" onMouseOver="hilite(1099)" onMouseOut="lolite()" onClick="logVariable('dir')" href="../../_variables/dir.html">$dir</a>.'/'.<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>.'/lib.php');
<a name="l1395"><span class="linenum">1395</span></a>          if (<a class="phpfunction" onClick="logFunction('class_exists')" href="../../_functions/class_exists.html" onMouseOver="phpfuncPopup(event,'class_exists')">class_exists</a>('feedback_item_'.<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>)) {
<a name="l1396"><span class="linenum">1396</span></a>              <a class="var it38599" onMouseOver="hilite(38599)" onMouseOut="lolite()" onClick="logVariable('ret_names')" href="../../_variables/ret_names.html">$ret_names</a>[] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>;
<a name="l1397"><span class="linenum">1397</span></a>          }
<a name="l1398"><span class="linenum">1398</span></a>      }
<a name="l1399"><span class="linenum">1399</span></a>      return <a class="var it38599" onMouseOver="hilite(38599)" onMouseOut="lolite()" onClick="logVariable('ret_names')" href="../../_variables/ret_names.html">$ret_names</a>;
<a name="l1400"><span class="linenum">1400</span></a>  }
<a name="l1401"><span class="linenum">1401</span></a>  
<a name="l1402"><span class="linenum">1402</span></a>  <span class="comment">/**</span>
<a name="l1403"><span class="linenum">1403</span></a>  <span class="comment"> * load the available item plugins to use as dropdown-options</span>
<a name="l1404"><span class="linenum">1404</span></a>  <span class="comment"> *</span>
<a name="l1405"><span class="linenum">1405</span></a>  <span class="comment"> * @global object</span>
<a name="l1406"><span class="linenum">1406</span></a>  <span class="comment"> * @return array pluginnames as string</span>
<a name="l1407"><span class="linenum">1407</span></a>  <span class="comment"> */</span>
<a name="l1408"><span class="linenum">1408</span></a>  function <a class="function" onClick="logFunction('feedback_load_feedback_items_options')" href="../../_functions/feedback_load_feedback_items_options.html" onMouseOver="funcPopup(event,'feedback_load_feedback_items_options')">feedback_load_feedback_items_options</a>() {
<a name="l1409"><span class="linenum">1409</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1410"><span class="linenum">1410</span></a>  
<a name="l1411"><span class="linenum">1411</span></a>      <a class="var it38600" onMouseOver="hilite(38600)" onMouseOut="lolite()" onClick="logVariable('feedback_options')" href="../../_variables/feedback_options.html">$feedback_options</a> = array(&quot;pagebreak&quot; =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('add_pagebreak', 'feedback'));
<a name="l1412"><span class="linenum">1412</span></a>  
<a name="l1413"><span class="linenum">1413</span></a>      if (!<a class="var it38601" onMouseOver="hilite(38601)" onMouseOut="lolite()" onClick="logVariable('feedback_names')" href="../../_variables/feedback_names.html">$feedback_names</a> = <a class="function" onClick="logFunction('feedback_load_feedback_items')" href="../../_functions/feedback_load_feedback_items.html" onMouseOver="funcPopup(event,'feedback_load_feedback_items')">feedback_load_feedback_items</a>('mod/feedback/item')) {
<a name="l1414"><span class="linenum">1414</span></a>          return array();
<a name="l1415"><span class="linenum">1415</span></a>      }
<a name="l1416"><span class="linenum">1416</span></a>  
<a name="l1417"><span class="linenum">1417</span></a>      foreach (<a class="var it38601" onMouseOver="hilite(38601)" onMouseOut="lolite()" onClick="logVariable('feedback_names')" href="../../_variables/feedback_names.html">$feedback_names</a> as <a class="var it2000" onMouseOver="hilite(2000)" onMouseOut="lolite()" onClick="logVariable('fn')" href="../../_variables/fn.html">$fn</a>) {
<a name="l1418"><span class="linenum">1418</span></a>          <a class="var it38600" onMouseOver="hilite(38600)" onMouseOut="lolite()" onClick="logVariable('feedback_options')" href="../../_variables/feedback_options.html">$feedback_options</a>[<a class="var it2000" onMouseOver="hilite(2000)" onMouseOut="lolite()" onClick="logVariable('fn')" href="../../_variables/fn.html">$fn</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(<a class="var it2000" onMouseOver="hilite(2000)" onMouseOut="lolite()" onClick="logVariable('fn')" href="../../_variables/fn.html">$fn</a>, 'feedback');
<a name="l1419"><span class="linenum">1419</span></a>      }
<a name="l1420"><span class="linenum">1420</span></a>      <a class="phpfunction" onClick="logFunction('asort')" href="../../_functions/asort.html" onMouseOver="phpfuncPopup(event,'asort')">asort</a>(<a class="var it38600" onMouseOver="hilite(38600)" onMouseOut="lolite()" onClick="logVariable('feedback_options')" href="../../_variables/feedback_options.html">$feedback_options</a>);
<a name="l1421"><span class="linenum">1421</span></a>      <a class="var it38600" onMouseOver="hilite(38600)" onMouseOut="lolite()" onClick="logVariable('feedback_options')" href="../../_variables/feedback_options.html">$feedback_options</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>( array(' ' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('select')), <a class="var it38600" onMouseOver="hilite(38600)" onMouseOut="lolite()" onClick="logVariable('feedback_options')" href="../../_variables/feedback_options.html">$feedback_options</a> );
<a name="l1422"><span class="linenum">1422</span></a>      return <a class="var it38600" onMouseOver="hilite(38600)" onMouseOut="lolite()" onClick="logVariable('feedback_options')" href="../../_variables/feedback_options.html">$feedback_options</a>;
<a name="l1423"><span class="linenum">1423</span></a>  }
<a name="l1424"><span class="linenum">1424</span></a>  
<a name="l1425"><span class="linenum">1425</span></a>  <span class="comment">/**</span>
<a name="l1426"><span class="linenum">1426</span></a>  <span class="comment"> * load the available items for the depend item dropdown list shown in the edit_item form</span>
<a name="l1427"><span class="linenum">1427</span></a>  <span class="comment"> *</span>
<a name="l1428"><span class="linenum">1428</span></a>  <span class="comment"> * @global object</span>
<a name="l1429"><span class="linenum">1429</span></a>  <span class="comment"> * @param object $feedback</span>
<a name="l1430"><span class="linenum">1430</span></a>  <span class="comment"> * @param object $item the item of the edit_item form</span>
<a name="l1431"><span class="linenum">1431</span></a>  <span class="comment"> * @return array all items except the item $item, labels and pagebreaks</span>
<a name="l1432"><span class="linenum">1432</span></a>  <span class="comment"> */</span>
<a name="l1433"><span class="linenum">1433</span></a>  function <a class="function" onClick="logFunction('feedback_get_depend_candidates_for_item')" href="../../_functions/feedback_get_depend_candidates_for_item.html" onMouseOver="funcPopup(event,'feedback_get_depend_candidates_for_item')">feedback_get_depend_candidates_for_item</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>, <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l1434"><span class="linenum">1434</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1435"><span class="linenum">1435</span></a>  <span class="comment">    //all items for dependitem</span>
<a name="l1436"><span class="linenum">1436</span></a>      <a class="var it1076" onMouseOver="hilite(1076)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a> = &quot;feedback = ? AND typ != 'pagebreak' AND hasvalue = 1&quot;;
<a name="l1437"><span class="linenum">1437</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1438"><span class="linenum">1438</span></a>      if (isset(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) AND <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l1439"><span class="linenum">1439</span></a>          <a class="var it1076" onMouseOver="hilite(1076)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a> .= ' AND id != ?';
<a name="l1440"><span class="linenum">1440</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1441"><span class="linenum">1441</span></a>      }
<a name="l1442"><span class="linenum">1442</span></a>      <a class="var it38602" onMouseOver="hilite(38602)" onMouseOut="lolite()" onClick="logVariable('dependitems')" href="../../_variables/dependitems.html">$dependitems</a> = array(0 =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('choose'));
<a name="l1443"><span class="linenum">1443</span></a>      <a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select_menu')" href="../../_functions/get_records_select_menu.html" onMouseOver="funcPopup(event,'get_records_select_menu')">get_records_select_menu</a>('feedback_item',
<a name="l1444"><span class="linenum">1444</span></a>                                                    <a class="var it1076" onMouseOver="hilite(1076)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a>,
<a name="l1445"><span class="linenum">1445</span></a>                                                    <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>,
<a name="l1446"><span class="linenum">1446</span></a>                                                    'position',
<a name="l1447"><span class="linenum">1447</span></a>                                                    'id, label');
<a name="l1448"><span class="linenum">1448</span></a>  
<a name="l1449"><span class="linenum">1449</span></a>      if (!<a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a>) {
<a name="l1450"><span class="linenum">1450</span></a>          return <a class="var it38602" onMouseOver="hilite(38602)" onMouseOut="lolite()" onClick="logVariable('dependitems')" href="../../_variables/dependitems.html">$dependitems</a>;
<a name="l1451"><span class="linenum">1451</span></a>      }
<a name="l1452"><span class="linenum">1452</span></a>  <span class="comment">    //adding the choose-option</span>
<a name="l1453"><span class="linenum">1453</span></a>      foreach (<a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>) {
<a name="l1454"><span class="linenum">1454</span></a>          <a class="var it38602" onMouseOver="hilite(38602)" onMouseOut="lolite()" onClick="logVariable('dependitems')" href="../../_variables/dependitems.html">$dependitems</a>[<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>] = <a class="var it1140" onMouseOver="hilite(1140)" onMouseOut="lolite()" onClick="logVariable('val')" href="../../_variables/val.html">$val</a>;
<a name="l1455"><span class="linenum">1455</span></a>      }
<a name="l1456"><span class="linenum">1456</span></a>      return <a class="var it38602" onMouseOver="hilite(38602)" onMouseOut="lolite()" onClick="logVariable('dependitems')" href="../../_variables/dependitems.html">$dependitems</a>;
<a name="l1457"><span class="linenum">1457</span></a>  }
<a name="l1458"><span class="linenum">1458</span></a>  
<a name="l1459"><span class="linenum">1459</span></a>  <span class="comment">/**</span>
<a name="l1460"><span class="linenum">1460</span></a>  <span class="comment"> * creates a new item-record</span>
<a name="l1461"><span class="linenum">1461</span></a>  <span class="comment"> *</span>
<a name="l1462"><span class="linenum">1462</span></a>  <span class="comment"> * @global object</span>
<a name="l1463"><span class="linenum">1463</span></a>  <span class="comment"> * @param object $data the data from edit_item_form</span>
<a name="l1464"><span class="linenum">1464</span></a>  <span class="comment"> * @return int the new itemid</span>
<a name="l1465"><span class="linenum">1465</span></a>  <span class="comment"> */</span>
<a name="l1466"><span class="linenum">1466</span></a>  function <a class="function" onClick="logFunction('feedback_create_item')" href="../../_functions/feedback_create_item.html" onMouseOver="funcPopup(event,'feedback_create_item')">feedback_create_item</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l1467"><span class="linenum">1467</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1468"><span class="linenum">1468</span></a>  
<a name="l1469"><span class="linenum">1469</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = new stdClass();
<a name="l1470"><span class="linenum">1470</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedbackid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/feedbackid.html">feedbackid</a>;
<a name="l1471"><span class="linenum">1471</span></a>  
<a name="l1472"><span class="linenum">1472</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('template')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/template.html">template</a>=0;
<a name="l1473"><span class="linenum">1473</span></a>      if (isset(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('templateid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/templateid.html">templateid</a>)) {
<a name="l1474"><span class="linenum">1474</span></a>              <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('template')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/template.html">template</a> = <a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('templateid')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/templateid.html">templateid</a>);
<a name="l1475"><span class="linenum">1475</span></a>      }
<a name="l1476"><span class="linenum">1476</span></a>  
<a name="l1477"><span class="linenum">1477</span></a>      <a class="var it188" onMouseOver="hilite(188)" onMouseOut="lolite()" onClick="logVariable('itemname')" href="../../_variables/itemname.html">$itemname</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('itemname')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/itemname.html">itemname</a>);
<a name="l1478"><span class="linenum">1478</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('name')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = (<a class="var it188" onMouseOver="hilite(188)" onMouseOut="lolite()" onClick="logVariable('itemname')" href="../../_variables/itemname.html">$itemname</a> ? <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('itemname')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/itemname.html">itemname</a> : <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('no_itemname', 'feedback'));
<a name="l1479"><span class="linenum">1479</span></a>  
<a name="l1480"><span class="linenum">1480</span></a>      if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('itemlabel')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/itemlabel.html">itemlabel</a>)) {
<a name="l1481"><span class="linenum">1481</span></a>          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('label')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/label.html">label</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('itemlabel')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/itemlabel.html">itemlabel</a>);
<a name="l1482"><span class="linenum">1482</span></a>      } else {
<a name="l1483"><span class="linenum">1483</span></a>          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('label')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/label.html">label</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('no_itemlabel', 'feedback');
<a name="l1484"><span class="linenum">1484</span></a>      }
<a name="l1485"><span class="linenum">1485</span></a>  
<a name="l1486"><span class="linenum">1486</span></a>      <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a> = <a class="function" onClick="logFunction('feedback_get_item_class')" href="../../_functions/feedback_get_item_class.html" onMouseOver="funcPopup(event,'feedback_get_item_class')">feedback_get_item_class</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('typ')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>);
<a name="l1487"><span class="linenum">1487</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('presentation')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/presentation.html">presentation</a> = ''; <span class="comment">//the date comes from postupdate() of the itemobj</span>
<a name="l1488"><span class="linenum">1488</span></a>  
<a name="l1489"><span class="linenum">1489</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('hasvalue')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/hasvalue.html">hasvalue</a> = <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('get_hasvalue')" href="../../_functions/get_hasvalue.html" onMouseOver="funcPopup(event,'get_hasvalue')">get_hasvalue</a>();
<a name="l1490"><span class="linenum">1490</span></a>  
<a name="l1491"><span class="linenum">1491</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('typ')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>;
<a name="l1492"><span class="linenum">1492</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('position')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/position.html">position</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('position')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/position.html">position</a>;
<a name="l1493"><span class="linenum">1493</span></a>  
<a name="l1494"><span class="linenum">1494</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('required')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/required.html">required</a>=0;
<a name="l1495"><span class="linenum">1495</span></a>      if (!empty(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('required')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/required.html">required</a>)) {
<a name="l1496"><span class="linenum">1496</span></a>          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('required')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/required.html">required</a> = <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('required')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/required.html">required</a>;
<a name="l1497"><span class="linenum">1497</span></a>      }
<a name="l1498"><span class="linenum">1498</span></a>  
<a name="l1499"><span class="linenum">1499</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('feedback_item', <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l1500"><span class="linenum">1500</span></a>  
<a name="l1501"><span class="linenum">1501</span></a>  <span class="comment">    //move all itemdata to the data</span>
<a name="l1502"><span class="linenum">1502</span></a>      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('id')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1503"><span class="linenum">1503</span></a>      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('feedback')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>;
<a name="l1504"><span class="linenum">1504</span></a>      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('name')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('name')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l1505"><span class="linenum">1505</span></a>      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('label')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/label.html">label</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('label')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/label.html">label</a>;
<a name="l1506"><span class="linenum">1506</span></a>      <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('required')" class="var it39495" onMouseOver="hilite(39495)" onMouseOut="lolite()" href="../../_variables/required.html">required</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('required')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/required.html">required</a>;
<a name="l1507"><span class="linenum">1507</span></a>      return <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('postupdate')" href="../../_functions/postupdate.html" onMouseOver="funcPopup(event,'postupdate')">postupdate</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>);
<a name="l1508"><span class="linenum">1508</span></a>  }
<a name="l1509"><span class="linenum">1509</span></a>  
<a name="l1510"><span class="linenum">1510</span></a>  <span class="comment">/**</span>
<a name="l1511"><span class="linenum">1511</span></a>  <span class="comment"> * save the changes of a given item.</span>
<a name="l1512"><span class="linenum">1512</span></a>  <span class="comment"> *</span>
<a name="l1513"><span class="linenum">1513</span></a>  <span class="comment"> * @global object</span>
<a name="l1514"><span class="linenum">1514</span></a>  <span class="comment"> * @param object $item</span>
<a name="l1515"><span class="linenum">1515</span></a>  <span class="comment"> * @return boolean</span>
<a name="l1516"><span class="linenum">1516</span></a>  <span class="comment"> */</span>
<a name="l1517"><span class="linenum">1517</span></a>  function <a class="function" onClick="logFunction('feedback_update_item')" href="../../_functions/feedback_update_item.html" onMouseOver="funcPopup(event,'feedback_update_item')">feedback_update_item</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l1518"><span class="linenum">1518</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1519"><span class="linenum">1519</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(&quot;feedback_item&quot;, <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l1520"><span class="linenum">1520</span></a>  }
<a name="l1521"><span class="linenum">1521</span></a>  
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment">/**</span>
<a name="l1523"><span class="linenum">1523</span></a>  <span class="comment"> * deletes an item and also deletes all related values</span>
<a name="l1524"><span class="linenum">1524</span></a>  <span class="comment"> *</span>
<a name="l1525"><span class="linenum">1525</span></a>  <span class="comment"> * @global object</span>
<a name="l1526"><span class="linenum">1526</span></a>  <span class="comment"> * @uses CONTEXT_MODULE</span>
<a name="l1527"><span class="linenum">1527</span></a>  <span class="comment"> * @param int $itemid</span>
<a name="l1528"><span class="linenum">1528</span></a>  <span class="comment"> * @param boolean $renumber should the kept items renumbered Yes/No</span>
<a name="l1529"><span class="linenum">1529</span></a>  <span class="comment"> * @param object $template if the template is given so the items are bound to it</span>
<a name="l1530"><span class="linenum">1530</span></a>  <span class="comment"> * @return void</span>
<a name="l1531"><span class="linenum">1531</span></a>  <span class="comment"> */</span>
<a name="l1532"><span class="linenum">1532</span></a>  function <a class="function" onClick="logFunction('feedback_delete_item')" href="../../_functions/feedback_delete_item.html" onMouseOver="funcPopup(event,'feedback_delete_item')">feedback_delete_item</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it12971" onMouseOver="hilite(12971)" onMouseOut="lolite()" onClick="logVariable('renumber')" href="../../_variables/renumber.html">$renumber</a> = true, <a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a> = false) {
<a name="l1533"><span class="linenum">1533</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1534"><span class="linenum">1534</span></a>  
<a name="l1535"><span class="linenum">1535</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_item', array('id'=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>));
<a name="l1536"><span class="linenum">1536</span></a>  
<a name="l1537"><span class="linenum">1537</span></a>  <span class="comment">    //deleting the files from the item</span>
<a name="l1538"><span class="linenum">1538</span></a>      <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1539"><span class="linenum">1539</span></a>  
<a name="l1540"><span class="linenum">1540</span></a>      if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>) {
<a name="l1541"><span class="linenum">1541</span></a>          if (<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>-&gt;<a onClick="logVariable('ispublic')" class="var it39918" onMouseOver="hilite(39918)" onMouseOut="lolite()" href="../../_variables/ispublic.html">ispublic</a>) {
<a name="l1542"><span class="linenum">1542</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>();
<a name="l1543"><span class="linenum">1543</span></a>          } else {
<a name="l1544"><span class="linenum">1544</span></a>              <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it1055" onMouseOver="hilite(1055)" onMouseOut="lolite()" onClick="logVariable('template')" href="../../_variables/template.html">$template</a>-&gt;<a onClick="logVariable('course')" class="var it39918" onMouseOver="hilite(39918)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>);
<a name="l1545"><span class="linenum">1545</span></a>          }
<a name="l1546"><span class="linenum">1546</span></a>          <a class="var it38597" onMouseOver="hilite(38597)" onMouseOut="lolite()" onClick="logVariable('templatefiles')" href="../../_variables/templatefiles.html">$templatefiles</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1547"><span class="linenum">1547</span></a>                                      'mod_feedback',
<a name="l1548"><span class="linenum">1548</span></a>                                      'template',
<a name="l1549"><span class="linenum">1549</span></a>                                      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1550"><span class="linenum">1550</span></a>                                      &quot;id&quot;,
<a name="l1551"><span class="linenum">1551</span></a>                                      false);
<a name="l1552"><span class="linenum">1552</span></a>  
<a name="l1553"><span class="linenum">1553</span></a>          if (<a class="var it38597" onMouseOver="hilite(38597)" onMouseOut="lolite()" onClick="logVariable('templatefiles')" href="../../_variables/templatefiles.html">$templatefiles</a>) {
<a name="l1554"><span class="linenum">1554</span></a>              <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_feedback', 'template', <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1555"><span class="linenum">1555</span></a>          }
<a name="l1556"><span class="linenum">1556</span></a>      } else {
<a name="l1557"><span class="linenum">1557</span></a>          if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('feedback', <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>)) {
<a name="l1558"><span class="linenum">1558</span></a>              return false;
<a name="l1559"><span class="linenum">1559</span></a>          }
<a name="l1560"><span class="linenum">1560</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1561"><span class="linenum">1561</span></a>  
<a name="l1562"><span class="linenum">1562</span></a>          <a class="var it38591" onMouseOver="hilite(38591)" onMouseOut="lolite()" onClick="logVariable('itemfiles')" href="../../_variables/itemfiles.html">$itemfiles</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1563"><span class="linenum">1563</span></a>                                      'mod_feedback',
<a name="l1564"><span class="linenum">1564</span></a>                                      'item',
<a name="l1565"><span class="linenum">1565</span></a>                                      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1566"><span class="linenum">1566</span></a>                                      &quot;id&quot;, false);
<a name="l1567"><span class="linenum">1567</span></a>  
<a name="l1568"><span class="linenum">1568</span></a>          if (<a class="var it38591" onMouseOver="hilite(38591)" onMouseOut="lolite()" onClick="logVariable('itemfiles')" href="../../_variables/itemfiles.html">$itemfiles</a>) {
<a name="l1569"><span class="linenum">1569</span></a>              <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it39491" onMouseOver="hilite(39491)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_feedback', 'item', <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1570"><span class="linenum">1570</span></a>          }
<a name="l1571"><span class="linenum">1571</span></a>      }
<a name="l1572"><span class="linenum">1572</span></a>  
<a name="l1573"><span class="linenum">1573</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;feedback_value&quot;, array(&quot;item&quot;=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>));
<a name="l1574"><span class="linenum">1574</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;feedback_valuetmp&quot;, array(&quot;item&quot;=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>));
<a name="l1575"><span class="linenum">1575</span></a>  
<a name="l1576"><span class="linenum">1576</span></a>  <span class="comment">    //remove all depends</span>
<a name="l1577"><span class="linenum">1577</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('feedback_item', 'dependvalue', '', array('dependitem'=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>));
<a name="l1578"><span class="linenum">1578</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('feedback_item', 'dependitem', 0, array('dependitem'=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>));
<a name="l1579"><span class="linenum">1579</span></a>  
<a name="l1580"><span class="linenum">1580</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>(&quot;feedback_item&quot;, array(&quot;id&quot;=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>));
<a name="l1581"><span class="linenum">1581</span></a>      if (<a class="var it12971" onMouseOver="hilite(12971)" onMouseOut="lolite()" onClick="logVariable('renumber')" href="../../_variables/renumber.html">$renumber</a>) {
<a name="l1582"><span class="linenum">1582</span></a>          <a class="function" onClick="logFunction('feedback_renumber_items')" href="../../_functions/feedback_renumber_items.html" onMouseOver="funcPopup(event,'feedback_renumber_items')">feedback_renumber_items</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>);
<a name="l1583"><span class="linenum">1583</span></a>      }
<a name="l1584"><span class="linenum">1584</span></a>  }
<a name="l1585"><span class="linenum">1585</span></a>  
<a name="l1586"><span class="linenum">1586</span></a>  <span class="comment">/**</span>
<a name="l1587"><span class="linenum">1587</span></a>  <span class="comment"> * deletes all items of the given feedbackid</span>
<a name="l1588"><span class="linenum">1588</span></a>  <span class="comment"> *</span>
<a name="l1589"><span class="linenum">1589</span></a>  <span class="comment"> * @global object</span>
<a name="l1590"><span class="linenum">1590</span></a>  <span class="comment"> * @param int $feedbackid</span>
<a name="l1591"><span class="linenum">1591</span></a>  <span class="comment"> * @return void</span>
<a name="l1592"><span class="linenum">1592</span></a>  <span class="comment"> */</span>
<a name="l1593"><span class="linenum">1593</span></a>  function <a class="function" onClick="logFunction('feedback_delete_all_items')" href="../../_functions/feedback_delete_all_items.html" onMouseOver="funcPopup(event,'feedback_delete_all_items')">feedback_delete_all_items</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>) {
<a name="l1594"><span class="linenum">1594</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1595"><span class="linenum">1595</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/completionlib.php');
<a name="l1596"><span class="linenum">1596</span></a>  
<a name="l1597"><span class="linenum">1597</span></a>      if (!<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback', array('id'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>))) {
<a name="l1598"><span class="linenum">1598</span></a>          return false;
<a name="l1599"><span class="linenum">1599</span></a>      }
<a name="l1600"><span class="linenum">1600</span></a>  
<a name="l1601"><span class="linenum">1601</span></a>      if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l1602"><span class="linenum">1602</span></a>          return false;
<a name="l1603"><span class="linenum">1603</span></a>      }
<a name="l1604"><span class="linenum">1604</span></a>  
<a name="l1605"><span class="linenum">1605</span></a>      if (!<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('course')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>))) {
<a name="l1606"><span class="linenum">1606</span></a>          return false;
<a name="l1607"><span class="linenum">1607</span></a>      }
<a name="l1608"><span class="linenum">1608</span></a>  
<a name="l1609"><span class="linenum">1609</span></a>      if (!<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../../_variables/items.html">$items</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_item', array('feedback'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>))) {
<a name="l1610"><span class="linenum">1610</span></a>          return;
<a name="l1611"><span class="linenum">1611</span></a>      }
<a name="l1612"><span class="linenum">1612</span></a>      foreach (<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../../_variables/items.html">$items</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l1613"><span class="linenum">1613</span></a>          <a class="function" onClick="logFunction('feedback_delete_item')" href="../../_functions/feedback_delete_item.html" onMouseOver="funcPopup(event,'feedback_delete_item')">feedback_delete_item</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, false);
<a name="l1614"><span class="linenum">1614</span></a>      }
<a name="l1615"><span class="linenum">1615</span></a>      if (<a class="var it6745" onMouseOver="hilite(6745)" onMouseOut="lolite()" onClick="logVariable('completeds')" href="../../_variables/completeds.html">$completeds</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_completed', array('feedback'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1616"><span class="linenum">1616</span></a>          <a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l1617"><span class="linenum">1617</span></a>          foreach (<a class="var it6745" onMouseOver="hilite(6745)" onMouseOut="lolite()" onClick="logVariable('completeds')" href="../../_variables/completeds.html">$completeds</a> as <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>) {
<a name="l1618"><span class="linenum">1618</span></a>  <span class="comment">            // Update completion state</span>
<a name="l1619"><span class="linenum">1619</span></a>              if (<a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) &amp;&amp; <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a>) {
<a name="l1620"><span class="linenum">1620</span></a>                  <a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('update_state')" href="../../_functions/update_state.html" onMouseOver="funcPopup(event,'update_state')">update_state</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="constant" onClick="logConstant('COMPLETION_INCOMPLETE')" href="../../_constants/COMPLETION_INCOMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_INCOMPLETE')">COMPLETION_INCOMPLETE</a>, <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('userid')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>);
<a name="l1621"><span class="linenum">1621</span></a>              }
<a name="l1622"><span class="linenum">1622</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_completed', array('id'=&gt;<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('id')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1623"><span class="linenum">1623</span></a>          }
<a name="l1624"><span class="linenum">1624</span></a>      }
<a name="l1625"><span class="linenum">1625</span></a>  
<a name="l1626"><span class="linenum">1626</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_completedtmp', array('feedback'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>));
<a name="l1627"><span class="linenum">1627</span></a>  
<a name="l1628"><span class="linenum">1628</span></a>  }
<a name="l1629"><span class="linenum">1629</span></a>  
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment">/**</span>
<a name="l1631"><span class="linenum">1631</span></a>  <span class="comment"> * this function toggled the item-attribute required (yes/no)</span>
<a name="l1632"><span class="linenum">1632</span></a>  <span class="comment"> *</span>
<a name="l1633"><span class="linenum">1633</span></a>  <span class="comment"> * @global object</span>
<a name="l1634"><span class="linenum">1634</span></a>  <span class="comment"> * @param object $item</span>
<a name="l1635"><span class="linenum">1635</span></a>  <span class="comment"> * @return boolean</span>
<a name="l1636"><span class="linenum">1636</span></a>  <span class="comment"> */</span>
<a name="l1637"><span class="linenum">1637</span></a>  function <a class="function" onClick="logFunction('feedback_switch_item_required')" href="../../_functions/feedback_switch_item_required.html" onMouseOver="funcPopup(event,'feedback_switch_item_required')">feedback_switch_item_required</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l1638"><span class="linenum">1638</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1639"><span class="linenum">1639</span></a>  
<a name="l1640"><span class="linenum">1640</span></a>      <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a> = <a class="function" onClick="logFunction('feedback_get_item_class')" href="../../_functions/feedback_get_item_class.html" onMouseOver="funcPopup(event,'feedback_get_item_class')">feedback_get_item_class</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>);
<a name="l1641"><span class="linenum">1641</span></a>  
<a name="l1642"><span class="linenum">1642</span></a>      if (<a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('can_switch_require')" href="../../_functions/can_switch_require.html" onMouseOver="funcPopup(event,'can_switch_require')">can_switch_require</a>()) {
<a name="l1643"><span class="linenum">1643</span></a>          <a class="var it38603" onMouseOver="hilite(38603)" onMouseOut="lolite()" onClick="logVariable('new_require_val')" href="../../_variables/new_require_val.html">$new_require_val</a> = (int)!(bool)<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('required')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/required.html">required</a>;
<a name="l1644"><span class="linenum">1644</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('id'=&gt;<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1645"><span class="linenum">1645</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('feedback_item', 'required', <a class="var it38603" onMouseOver="hilite(38603)" onMouseOut="lolite()" onClick="logVariable('new_require_val')" href="../../_variables/new_require_val.html">$new_require_val</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1646"><span class="linenum">1646</span></a>      }
<a name="l1647"><span class="linenum">1647</span></a>      return true;
<a name="l1648"><span class="linenum">1648</span></a>  }
<a name="l1649"><span class="linenum">1649</span></a>  
<a name="l1650"><span class="linenum">1650</span></a>  <span class="comment">/**</span>
<a name="l1651"><span class="linenum">1651</span></a>  <span class="comment"> * renumbers all items of the given feedbackid</span>
<a name="l1652"><span class="linenum">1652</span></a>  <span class="comment"> *</span>
<a name="l1653"><span class="linenum">1653</span></a>  <span class="comment"> * @global object</span>
<a name="l1654"><span class="linenum">1654</span></a>  <span class="comment"> * @param int $feedbackid</span>
<a name="l1655"><span class="linenum">1655</span></a>  <span class="comment"> * @return void</span>
<a name="l1656"><span class="linenum">1656</span></a>  <span class="comment"> */</span>
<a name="l1657"><span class="linenum">1657</span></a>  function <a class="function" onClick="logFunction('feedback_renumber_items')" href="../../_functions/feedback_renumber_items.html" onMouseOver="funcPopup(event,'feedback_renumber_items')">feedback_renumber_items</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>) {
<a name="l1658"><span class="linenum">1658</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1659"><span class="linenum">1659</span></a>  
<a name="l1660"><span class="linenum">1660</span></a>      <a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../../_variables/items.html">$items</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_item', array('feedback'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>), 'position');
<a name="l1661"><span class="linenum">1661</span></a>      <a class="var it3230" onMouseOver="hilite(3230)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../_variables/pos.html">$pos</a> = 1;
<a name="l1662"><span class="linenum">1662</span></a>      if (<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../../_variables/items.html">$items</a>) {
<a name="l1663"><span class="linenum">1663</span></a>          foreach (<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../../_variables/items.html">$items</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l1664"><span class="linenum">1664</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('feedback_item', 'position', <a class="var it3230" onMouseOver="hilite(3230)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../_variables/pos.html">$pos</a>, array('id'=&gt;<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1665"><span class="linenum">1665</span></a>              <a class="var it3230" onMouseOver="hilite(3230)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../_variables/pos.html">$pos</a>++;
<a name="l1666"><span class="linenum">1666</span></a>          }
<a name="l1667"><span class="linenum">1667</span></a>      }
<a name="l1668"><span class="linenum">1668</span></a>  }
<a name="l1669"><span class="linenum">1669</span></a>  
<a name="l1670"><span class="linenum">1670</span></a>  <span class="comment">/**</span>
<a name="l1671"><span class="linenum">1671</span></a>  <span class="comment"> * this decreases the position of the given item</span>
<a name="l1672"><span class="linenum">1672</span></a>  <span class="comment"> *</span>
<a name="l1673"><span class="linenum">1673</span></a>  <span class="comment"> * @global object</span>
<a name="l1674"><span class="linenum">1674</span></a>  <span class="comment"> * @param object $item</span>
<a name="l1675"><span class="linenum">1675</span></a>  <span class="comment"> * @return bool</span>
<a name="l1676"><span class="linenum">1676</span></a>  <span class="comment"> */</span>
<a name="l1677"><span class="linenum">1677</span></a>  function <a class="function" onClick="logFunction('feedback_moveup_item')" href="../../_functions/feedback_moveup_item.html" onMouseOver="funcPopup(event,'feedback_moveup_item')">feedback_moveup_item</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l1678"><span class="linenum">1678</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1679"><span class="linenum">1679</span></a>  
<a name="l1680"><span class="linenum">1680</span></a>      if (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('position')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/position.html">position</a> == 1) {
<a name="l1681"><span class="linenum">1681</span></a>          return true;
<a name="l1682"><span class="linenum">1682</span></a>      }
<a name="l1683"><span class="linenum">1683</span></a>  
<a name="l1684"><span class="linenum">1684</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('feedback'=&gt;<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>);
<a name="l1685"><span class="linenum">1685</span></a>      if (!<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../../_variables/items.html">$items</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_item', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'position')) {
<a name="l1686"><span class="linenum">1686</span></a>          return false;
<a name="l1687"><span class="linenum">1687</span></a>      }
<a name="l1688"><span class="linenum">1688</span></a>  
<a name="l1689"><span class="linenum">1689</span></a>      <a class="var it38604" onMouseOver="hilite(38604)" onMouseOut="lolite()" onClick="logVariable('itembefore')" href="../../_variables/itembefore.html">$itembefore</a> = null;
<a name="l1690"><span class="linenum">1690</span></a>      foreach (<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../../_variables/items.html">$items</a> as <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>) {
<a name="l1691"><span class="linenum">1691</span></a>          if (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('id')" class="var it39687" onMouseOver="hilite(39687)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l1692"><span class="linenum">1692</span></a>              if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it38604" onMouseOver="hilite(38604)" onMouseOut="lolite()" onClick="logVariable('itembefore')" href="../../_variables/itembefore.html">$itembefore</a>)) {
<a name="l1693"><span class="linenum">1693</span></a>                  return true;
<a name="l1694"><span class="linenum">1694</span></a>              }
<a name="l1695"><span class="linenum">1695</span></a>              <a class="var it38604" onMouseOver="hilite(38604)" onMouseOut="lolite()" onClick="logVariable('itembefore')" href="../../_variables/itembefore.html">$itembefore</a>-&gt;<a onClick="logVariable('position')" class="var it40567" onMouseOver="hilite(40567)" onMouseOut="lolite()" href="../../_variables/position.html">position</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('position')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/position.html">position</a>;
<a name="l1696"><span class="linenum">1696</span></a>              <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('position')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/position.html">position</a>--;
<a name="l1697"><span class="linenum">1697</span></a>              <a class="function" onClick="logFunction('feedback_update_item')" href="../../_functions/feedback_update_item.html" onMouseOver="funcPopup(event,'feedback_update_item')">feedback_update_item</a>(<a class="var it38604" onMouseOver="hilite(38604)" onMouseOut="lolite()" onClick="logVariable('itembefore')" href="../../_variables/itembefore.html">$itembefore</a>);
<a name="l1698"><span class="linenum">1698</span></a>              <a class="function" onClick="logFunction('feedback_update_item')" href="../../_functions/feedback_update_item.html" onMouseOver="funcPopup(event,'feedback_update_item')">feedback_update_item</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l1699"><span class="linenum">1699</span></a>              <a class="function" onClick="logFunction('feedback_renumber_items')" href="../../_functions/feedback_renumber_items.html" onMouseOver="funcPopup(event,'feedback_renumber_items')">feedback_renumber_items</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>);
<a name="l1700"><span class="linenum">1700</span></a>              return true;
<a name="l1701"><span class="linenum">1701</span></a>          }
<a name="l1702"><span class="linenum">1702</span></a>          <a class="var it38604" onMouseOver="hilite(38604)" onMouseOut="lolite()" onClick="logVariable('itembefore')" href="../../_variables/itembefore.html">$itembefore</a> = <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>;
<a name="l1703"><span class="linenum">1703</span></a>      }
<a name="l1704"><span class="linenum">1704</span></a>      return false;
<a name="l1705"><span class="linenum">1705</span></a>  }
<a name="l1706"><span class="linenum">1706</span></a>  
<a name="l1707"><span class="linenum">1707</span></a>  <span class="comment">/**</span>
<a name="l1708"><span class="linenum">1708</span></a>  <span class="comment"> * this increased the position of the given item</span>
<a name="l1709"><span class="linenum">1709</span></a>  <span class="comment"> *</span>
<a name="l1710"><span class="linenum">1710</span></a>  <span class="comment"> * @global object</span>
<a name="l1711"><span class="linenum">1711</span></a>  <span class="comment"> * @param object $item</span>
<a name="l1712"><span class="linenum">1712</span></a>  <span class="comment"> * @return bool</span>
<a name="l1713"><span class="linenum">1713</span></a>  <span class="comment"> */</span>
<a name="l1714"><span class="linenum">1714</span></a>  function <a class="function" onClick="logFunction('feedback_movedown_item')" href="../../_functions/feedback_movedown_item.html" onMouseOver="funcPopup(event,'feedback_movedown_item')">feedback_movedown_item</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l1715"><span class="linenum">1715</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1716"><span class="linenum">1716</span></a>  
<a name="l1717"><span class="linenum">1717</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('feedback'=&gt;<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>);
<a name="l1718"><span class="linenum">1718</span></a>      if (!<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../../_variables/items.html">$items</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_item', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'position')) {
<a name="l1719"><span class="linenum">1719</span></a>          return false;
<a name="l1720"><span class="linenum">1720</span></a>      }
<a name="l1721"><span class="linenum">1721</span></a>  
<a name="l1722"><span class="linenum">1722</span></a>      <a class="var it34443" onMouseOver="hilite(34443)" onMouseOut="lolite()" onClick="logVariable('movedownitem')" href="../../_variables/movedownitem.html">$movedownitem</a> = null;
<a name="l1723"><span class="linenum">1723</span></a>      foreach (<a class="var it135" onMouseOver="hilite(135)" onMouseOut="lolite()" onClick="logVariable('items')" href="../../_variables/items.html">$items</a> as <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>) {
<a name="l1724"><span class="linenum">1724</span></a>          if (!<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it34443" onMouseOver="hilite(34443)" onMouseOut="lolite()" onClick="logVariable('movedownitem')" href="../../_variables/movedownitem.html">$movedownitem</a>) AND <a class="var it34443" onMouseOver="hilite(34443)" onMouseOut="lolite()" onClick="logVariable('movedownitem')" href="../../_variables/movedownitem.html">$movedownitem</a>-&gt;<a onClick="logVariable('id')" class="var it40568" onMouseOver="hilite(40568)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l1725"><span class="linenum">1725</span></a>              <a class="var it34443" onMouseOver="hilite(34443)" onMouseOut="lolite()" onClick="logVariable('movedownitem')" href="../../_variables/movedownitem.html">$movedownitem</a>-&gt;<a onClick="logVariable('position')" class="var it40568" onMouseOver="hilite(40568)" onMouseOut="lolite()" href="../../_variables/position.html">position</a> = <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('position')" class="var it39687" onMouseOver="hilite(39687)" onMouseOut="lolite()" href="../../_variables/position.html">position</a>;
<a name="l1726"><span class="linenum">1726</span></a>              <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>-&gt;<a onClick="logVariable('position')" class="var it39687" onMouseOver="hilite(39687)" onMouseOut="lolite()" href="../../_variables/position.html">position</a>--;
<a name="l1727"><span class="linenum">1727</span></a>              <a class="function" onClick="logFunction('feedback_update_item')" href="../../_functions/feedback_update_item.html" onMouseOver="funcPopup(event,'feedback_update_item')">feedback_update_item</a>(<a class="var it34443" onMouseOver="hilite(34443)" onMouseOut="lolite()" onClick="logVariable('movedownitem')" href="../../_variables/movedownitem.html">$movedownitem</a>);
<a name="l1728"><span class="linenum">1728</span></a>              <a class="function" onClick="logFunction('feedback_update_item')" href="../../_functions/feedback_update_item.html" onMouseOver="funcPopup(event,'feedback_update_item')">feedback_update_item</a>(<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>);
<a name="l1729"><span class="linenum">1729</span></a>              <a class="function" onClick="logFunction('feedback_renumber_items')" href="../../_functions/feedback_renumber_items.html" onMouseOver="funcPopup(event,'feedback_renumber_items')">feedback_renumber_items</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>);
<a name="l1730"><span class="linenum">1730</span></a>              return true;
<a name="l1731"><span class="linenum">1731</span></a>          }
<a name="l1732"><span class="linenum">1732</span></a>          <a class="var it34443" onMouseOver="hilite(34443)" onMouseOut="lolite()" onClick="logVariable('movedownitem')" href="../../_variables/movedownitem.html">$movedownitem</a> = <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>;
<a name="l1733"><span class="linenum">1733</span></a>      }
<a name="l1734"><span class="linenum">1734</span></a>      return false;
<a name="l1735"><span class="linenum">1735</span></a>  }
<a name="l1736"><span class="linenum">1736</span></a>  
<a name="l1737"><span class="linenum">1737</span></a>  <span class="comment">/**</span>
<a name="l1738"><span class="linenum">1738</span></a>  <span class="comment"> * here the position of the given item will be set to the value in $pos</span>
<a name="l1739"><span class="linenum">1739</span></a>  <span class="comment"> *</span>
<a name="l1740"><span class="linenum">1740</span></a>  <span class="comment"> * @global object</span>
<a name="l1741"><span class="linenum">1741</span></a>  <span class="comment"> * @param object $moveitem</span>
<a name="l1742"><span class="linenum">1742</span></a>  <span class="comment"> * @param int $pos</span>
<a name="l1743"><span class="linenum">1743</span></a>  <span class="comment"> * @return boolean</span>
<a name="l1744"><span class="linenum">1744</span></a>  <span class="comment"> */</span>
<a name="l1745"><span class="linenum">1745</span></a>  function <a class="function" onClick="logFunction('feedback_move_item')" href="../../_functions/feedback_move_item.html" onMouseOver="funcPopup(event,'feedback_move_item')">feedback_move_item</a>(<a class="var it34444" onMouseOver="hilite(34444)" onMouseOut="lolite()" onClick="logVariable('moveitem')" href="../../_variables/moveitem.html">$moveitem</a>, <a class="var it3230" onMouseOver="hilite(3230)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../_variables/pos.html">$pos</a>) {
<a name="l1746"><span class="linenum">1746</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1747"><span class="linenum">1747</span></a>  
<a name="l1748"><span class="linenum">1748</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('feedback'=&gt;<a class="var it34444" onMouseOver="hilite(34444)" onMouseOut="lolite()" onClick="logVariable('moveitem')" href="../../_variables/moveitem.html">$moveitem</a>-&gt;<a onClick="logVariable('feedback')" class="var it40569" onMouseOver="hilite(40569)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>);
<a name="l1749"><span class="linenum">1749</span></a>      if (!<a class="var it38605" onMouseOver="hilite(38605)" onMouseOut="lolite()" onClick="logVariable('allitems')" href="../../_variables/allitems.html">$allitems</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_item', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'position')) {
<a name="l1750"><span class="linenum">1750</span></a>          return false;
<a name="l1751"><span class="linenum">1751</span></a>      }
<a name="l1752"><span class="linenum">1752</span></a>      if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it38605" onMouseOver="hilite(38605)" onMouseOut="lolite()" onClick="logVariable('allitems')" href="../../_variables/allitems.html">$allitems</a>)) {
<a name="l1753"><span class="linenum">1753</span></a>          <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a> = 1;
<a name="l1754"><span class="linenum">1754</span></a>          foreach (<a class="var it38605" onMouseOver="hilite(38605)" onMouseOut="lolite()" onClick="logVariable('allitems')" href="../../_variables/allitems.html">$allitems</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l1755"><span class="linenum">1755</span></a>              if (<a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a> == <a class="var it3230" onMouseOver="hilite(3230)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../_variables/pos.html">$pos</a>) {
<a name="l1756"><span class="linenum">1756</span></a>                  <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>++;
<a name="l1757"><span class="linenum">1757</span></a>              }
<a name="l1758"><span class="linenum">1758</span></a>              if (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it34444" onMouseOver="hilite(34444)" onMouseOut="lolite()" onClick="logVariable('moveitem')" href="../../_variables/moveitem.html">$moveitem</a>-&gt;<a onClick="logVariable('id')" class="var it40569" onMouseOver="hilite(40569)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l1759"><span class="linenum">1759</span></a>                  <a class="var it34444" onMouseOver="hilite(34444)" onMouseOut="lolite()" onClick="logVariable('moveitem')" href="../../_variables/moveitem.html">$moveitem</a>-&gt;<a onClick="logVariable('position')" class="var it40569" onMouseOver="hilite(40569)" onMouseOut="lolite()" href="../../_variables/position.html">position</a> = <a class="var it3230" onMouseOver="hilite(3230)" onMouseOut="lolite()" onClick="logVariable('pos')" href="../../_variables/pos.html">$pos</a>;
<a name="l1760"><span class="linenum">1760</span></a>                  <a class="function" onClick="logFunction('feedback_update_item')" href="../../_functions/feedback_update_item.html" onMouseOver="funcPopup(event,'feedback_update_item')">feedback_update_item</a>(<a class="var it34444" onMouseOver="hilite(34444)" onMouseOut="lolite()" onClick="logVariable('moveitem')" href="../../_variables/moveitem.html">$moveitem</a>);
<a name="l1761"><span class="linenum">1761</span></a>                  continue;
<a name="l1762"><span class="linenum">1762</span></a>              }
<a name="l1763"><span class="linenum">1763</span></a>              <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('position')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/position.html">position</a> = <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>;
<a name="l1764"><span class="linenum">1764</span></a>              <a class="function" onClick="logFunction('feedback_update_item')" href="../../_functions/feedback_update_item.html" onMouseOver="funcPopup(event,'feedback_update_item')">feedback_update_item</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l1765"><span class="linenum">1765</span></a>              <a class="var it1494" onMouseOver="hilite(1494)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>++;
<a name="l1766"><span class="linenum">1766</span></a>          }
<a name="l1767"><span class="linenum">1767</span></a>          return true;
<a name="l1768"><span class="linenum">1768</span></a>      }
<a name="l1769"><span class="linenum">1769</span></a>      return false;
<a name="l1770"><span class="linenum">1770</span></a>  }
<a name="l1771"><span class="linenum">1771</span></a>  
<a name="l1772"><span class="linenum">1772</span></a>  <span class="comment">/**</span>
<a name="l1773"><span class="linenum">1773</span></a>  <span class="comment"> * prints the given item as a preview.</span>
<a name="l1774"><span class="linenum">1774</span></a>  <span class="comment"> * each item-class has an own print_item_preview function implemented.</span>
<a name="l1775"><span class="linenum">1775</span></a>  <span class="comment"> *</span>
<a name="l1776"><span class="linenum">1776</span></a>  <span class="comment"> * @global object</span>
<a name="l1777"><span class="linenum">1777</span></a>  <span class="comment"> * @param object $item the item what we want to print out</span>
<a name="l1778"><span class="linenum">1778</span></a>  <span class="comment"> * @return void</span>
<a name="l1779"><span class="linenum">1779</span></a>  <span class="comment"> */</span>
<a name="l1780"><span class="linenum">1780</span></a>  function <a class="function" onClick="logFunction('feedback_print_item_preview')" href="../../_functions/feedback_print_item_preview.html" onMouseOver="funcPopup(event,'feedback_print_item_preview')">feedback_print_item_preview</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l1781"><span class="linenum">1781</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1782"><span class="linenum">1782</span></a>      if (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a> == 'pagebreak') {
<a name="l1783"><span class="linenum">1783</span></a>          return;
<a name="l1784"><span class="linenum">1784</span></a>      }
<a name="l1785"><span class="linenum">1785</span></a>  <span class="comment">    //get the instance of the item-class</span>
<a name="l1786"><span class="linenum">1786</span></a>      <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a> = <a class="function" onClick="logFunction('feedback_get_item_class')" href="../../_functions/feedback_get_item_class.html" onMouseOver="funcPopup(event,'feedback_get_item_class')">feedback_get_item_class</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>);
<a name="l1787"><span class="linenum">1787</span></a>      <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('print_item_preview')" href="../../_functions/print_item_preview.html" onMouseOver="funcPopup(event,'print_item_preview')">print_item_preview</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l1788"><span class="linenum">1788</span></a>  }
<a name="l1789"><span class="linenum">1789</span></a>  
<a name="l1790"><span class="linenum">1790</span></a>  <span class="comment">/**</span>
<a name="l1791"><span class="linenum">1791</span></a>  <span class="comment"> * prints the given item in the completion form.</span>
<a name="l1792"><span class="linenum">1792</span></a>  <span class="comment"> * each item-class has an own print_item_complete function implemented.</span>
<a name="l1793"><span class="linenum">1793</span></a>  <span class="comment"> *</span>
<a name="l1794"><span class="linenum">1794</span></a>  <span class="comment"> * @param object $item the item what we want to print out</span>
<a name="l1795"><span class="linenum">1795</span></a>  <span class="comment"> * @param mixed $value the value</span>
<a name="l1796"><span class="linenum">1796</span></a>  <span class="comment"> * @param boolean $highlightrequire if this set true and the value are false on completing so the item will be highlighted</span>
<a name="l1797"><span class="linenum">1797</span></a>  <span class="comment"> * @return void</span>
<a name="l1798"><span class="linenum">1798</span></a>  <span class="comment"> */</span>
<a name="l1799"><span class="linenum">1799</span></a>  function <a class="function" onClick="logFunction('feedback_print_item_complete')" href="../../_functions/feedback_print_item_complete.html" onMouseOver="funcPopup(event,'feedback_print_item_complete')">feedback_print_item_complete</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = false, <a class="var it2857" onMouseOver="hilite(2857)" onMouseOut="lolite()" onClick="logVariable('highlightrequire')" href="../../_variables/highlightrequire.html">$highlightrequire</a> = false) {
<a name="l1800"><span class="linenum">1800</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1801"><span class="linenum">1801</span></a>      if (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a> == 'pagebreak') {
<a name="l1802"><span class="linenum">1802</span></a>          return;
<a name="l1803"><span class="linenum">1803</span></a>      }
<a name="l1804"><span class="linenum">1804</span></a>  
<a name="l1805"><span class="linenum">1805</span></a>  <span class="comment">    //get the instance of the item-class</span>
<a name="l1806"><span class="linenum">1806</span></a>      <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a> = <a class="function" onClick="logFunction('feedback_get_item_class')" href="../../_functions/feedback_get_item_class.html" onMouseOver="funcPopup(event,'feedback_get_item_class')">feedback_get_item_class</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>);
<a name="l1807"><span class="linenum">1807</span></a>      <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('print_item_complete')" href="../../_functions/print_item_complete.html" onMouseOver="funcPopup(event,'print_item_complete')">print_item_complete</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>, <a class="var it2857" onMouseOver="hilite(2857)" onMouseOut="lolite()" onClick="logVariable('highlightrequire')" href="../../_variables/highlightrequire.html">$highlightrequire</a>);
<a name="l1808"><span class="linenum">1808</span></a>  }
<a name="l1809"><span class="linenum">1809</span></a>  
<a name="l1810"><span class="linenum">1810</span></a>  <span class="comment">/**</span>
<a name="l1811"><span class="linenum">1811</span></a>  <span class="comment"> * prints the given item in the show entries page.</span>
<a name="l1812"><span class="linenum">1812</span></a>  <span class="comment"> * each item-class has an own print_item_show_value function implemented.</span>
<a name="l1813"><span class="linenum">1813</span></a>  <span class="comment"> *</span>
<a name="l1814"><span class="linenum">1814</span></a>  <span class="comment"> * @param object $item the item what we want to print out</span>
<a name="l1815"><span class="linenum">1815</span></a>  <span class="comment"> * @param mixed $value</span>
<a name="l1816"><span class="linenum">1816</span></a>  <span class="comment"> * @return void</span>
<a name="l1817"><span class="linenum">1817</span></a>  <span class="comment"> */</span>
<a name="l1818"><span class="linenum">1818</span></a>  function <a class="function" onClick="logFunction('feedback_print_item_show_value')" href="../../_functions/feedback_print_item_show_value.html" onMouseOver="funcPopup(event,'feedback_print_item_show_value')">feedback_print_item_show_value</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = false) {
<a name="l1819"><span class="linenum">1819</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1820"><span class="linenum">1820</span></a>      if (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a> == 'pagebreak') {
<a name="l1821"><span class="linenum">1821</span></a>          return;
<a name="l1822"><span class="linenum">1822</span></a>      }
<a name="l1823"><span class="linenum">1823</span></a>  
<a name="l1824"><span class="linenum">1824</span></a>  <span class="comment">    //get the instance of the item-class</span>
<a name="l1825"><span class="linenum">1825</span></a>      <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a> = <a class="function" onClick="logFunction('feedback_get_item_class')" href="../../_functions/feedback_get_item_class.html" onMouseOver="funcPopup(event,'feedback_get_item_class')">feedback_get_item_class</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>);
<a name="l1826"><span class="linenum">1826</span></a>      <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('print_item_show_value')" href="../../_functions/print_item_show_value.html" onMouseOver="funcPopup(event,'print_item_show_value')">print_item_show_value</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l1827"><span class="linenum">1827</span></a>  }
<a name="l1828"><span class="linenum">1828</span></a>  
<a name="l1829"><span class="linenum">1829</span></a>  <span class="comment">/**</span>
<a name="l1830"><span class="linenum">1830</span></a>  <span class="comment"> * if the user completes a feedback and there is a pagebreak so the values are saved temporary.</span>
<a name="l1831"><span class="linenum">1831</span></a>  <span class="comment"> * the values are not saved permanently until the user click on save button</span>
<a name="l1832"><span class="linenum">1832</span></a>  <span class="comment"> *</span>
<a name="l1833"><span class="linenum">1833</span></a>  <span class="comment"> * @global object</span>
<a name="l1834"><span class="linenum">1834</span></a>  <span class="comment"> * @param object $feedbackcompleted</span>
<a name="l1835"><span class="linenum">1835</span></a>  <span class="comment"> * @return object temporary saved completed-record</span>
<a name="l1836"><span class="linenum">1836</span></a>  <span class="comment"> */</span>
<a name="l1837"><span class="linenum">1837</span></a>  function <a class="function" onClick="logFunction('feedback_set_tmp_values')" href="../../_functions/feedback_set_tmp_values.html" onMouseOver="funcPopup(event,'feedback_set_tmp_values')">feedback_set_tmp_values</a>(<a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>) {
<a name="l1838"><span class="linenum">1838</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1839"><span class="linenum">1839</span></a>  
<a name="l1840"><span class="linenum">1840</span></a>  <span class="comment">    //first we create a completedtmp</span>
<a name="l1841"><span class="linenum">1841</span></a>      <a class="var it38606" onMouseOver="hilite(38606)" onMouseOut="lolite()" onClick="logVariable('tmpcpl')" href="../../_variables/tmpcpl.html">$tmpcpl</a> = new stdClass();
<a name="l1842"><span class="linenum">1842</span></a>      foreach (<a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a> as <a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l1843"><span class="linenum">1843</span></a>          <a class="var it38606" onMouseOver="hilite(38606)" onMouseOut="lolite()" onClick="logVariable('tmpcpl')" href="../../_variables/tmpcpl.html">$tmpcpl</a>-&gt;{<a class="var it36" onMouseOver="hilite(36)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>} = <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>;
<a name="l1844"><span class="linenum">1844</span></a>      }
<a name="l1845"><span class="linenum">1845</span></a>      unset(<a class="var it38606" onMouseOver="hilite(38606)" onMouseOut="lolite()" onClick="logVariable('tmpcpl')" href="../../_variables/tmpcpl.html">$tmpcpl</a>-&gt;<a onClick="logVariable('id')" class="var it40570" onMouseOver="hilite(40570)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1846"><span class="linenum">1846</span></a>      <a class="var it38606" onMouseOver="hilite(38606)" onMouseOut="lolite()" onClick="logVariable('tmpcpl')" href="../../_variables/tmpcpl.html">$tmpcpl</a>-&gt;<a onClick="logVariable('timemodified')" class="var it40570" onMouseOver="hilite(40570)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1847"><span class="linenum">1847</span></a>      <a class="var it38606" onMouseOver="hilite(38606)" onMouseOut="lolite()" onClick="logVariable('tmpcpl')" href="../../_variables/tmpcpl.html">$tmpcpl</a>-&gt;<a onClick="logVariable('id')" class="var it40570" onMouseOver="hilite(40570)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('feedback_completedtmp', <a class="var it38606" onMouseOver="hilite(38606)" onMouseOut="lolite()" onClick="logVariable('tmpcpl')" href="../../_variables/tmpcpl.html">$tmpcpl</a>);
<a name="l1848"><span class="linenum">1848</span></a>  <span class="comment">    //get all values of original-completed</span>
<a name="l1849"><span class="linenum">1849</span></a>      if (!<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_value', array('completed'=&gt;<a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('id')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1850"><span class="linenum">1850</span></a>          return;
<a name="l1851"><span class="linenum">1851</span></a>      }
<a name="l1852"><span class="linenum">1852</span></a>      foreach (<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> as <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l1853"><span class="linenum">1853</span></a>          unset(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('id')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1854"><span class="linenum">1854</span></a>          <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('completed')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/completed.html">completed</a> = <a class="var it38606" onMouseOver="hilite(38606)" onMouseOut="lolite()" onClick="logVariable('tmpcpl')" href="../../_variables/tmpcpl.html">$tmpcpl</a>-&gt;<a onClick="logVariable('id')" class="var it40570" onMouseOver="hilite(40570)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1855"><span class="linenum">1855</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('feedback_valuetmp', <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l1856"><span class="linenum">1856</span></a>      }
<a name="l1857"><span class="linenum">1857</span></a>      return <a class="var it38606" onMouseOver="hilite(38606)" onMouseOut="lolite()" onClick="logVariable('tmpcpl')" href="../../_variables/tmpcpl.html">$tmpcpl</a>;
<a name="l1858"><span class="linenum">1858</span></a>  }
<a name="l1859"><span class="linenum">1859</span></a>  
<a name="l1860"><span class="linenum">1860</span></a>  <span class="comment">/**</span>
<a name="l1861"><span class="linenum">1861</span></a>  <span class="comment"> * this saves the temporary saved values permanently</span>
<a name="l1862"><span class="linenum">1862</span></a>  <span class="comment"> *</span>
<a name="l1863"><span class="linenum">1863</span></a>  <span class="comment"> * @global object</span>
<a name="l1864"><span class="linenum">1864</span></a>  <span class="comment"> * @param object $feedbackcompletedtmp the temporary completed</span>
<a name="l1865"><span class="linenum">1865</span></a>  <span class="comment"> * @param object $feedbackcompleted the target completed</span>
<a name="l1866"><span class="linenum">1866</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l1867"><span class="linenum">1867</span></a>  <span class="comment"> * @return int the id of the completed</span>
<a name="l1868"><span class="linenum">1868</span></a>  <span class="comment"> */</span>
<a name="l1869"><span class="linenum">1869</span></a>  function <a class="function" onClick="logFunction('feedback_save_tmp_values')" href="../../_functions/feedback_save_tmp_values.html" onMouseOver="funcPopup(event,'feedback_save_tmp_values')">feedback_save_tmp_values</a>(<a class="var it5265" onMouseOver="hilite(5265)" onMouseOut="lolite()" onClick="logVariable('feedbackcompletedtmp')" href="../../_variables/feedbackcompletedtmp.html">$feedbackcompletedtmp</a>, <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l1870"><span class="linenum">1870</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1871"><span class="linenum">1871</span></a>  
<a name="l1872"><span class="linenum">1872</span></a>      <a class="var it38607" onMouseOver="hilite(38607)" onMouseOut="lolite()" onClick="logVariable('tmpcplid')" href="../../_variables/tmpcplid.html">$tmpcplid</a> = <a class="var it5265" onMouseOver="hilite(5265)" onMouseOut="lolite()" onClick="logVariable('feedbackcompletedtmp')" href="../../_variables/feedbackcompletedtmp.html">$feedbackcompletedtmp</a>-&gt;<a onClick="logVariable('id')" class="var it40555" onMouseOver="hilite(40555)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1873"><span class="linenum">1873</span></a>      if (<a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>) {
<a name="l1874"><span class="linenum">1874</span></a>  <span class="comment">        //first drop all existing values</span>
<a name="l1875"><span class="linenum">1875</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_value', array('completed'=&gt;<a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('id')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1876"><span class="linenum">1876</span></a>  <span class="comment">        //update the current completed</span>
<a name="l1877"><span class="linenum">1877</span></a>          <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('timemodified')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1878"><span class="linenum">1878</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('feedback_completed', <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>);
<a name="l1879"><span class="linenum">1879</span></a>      } else {
<a name="l1880"><span class="linenum">1880</span></a>          <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a> = <a class="function" onClick="logFunction('clone')" href="../../_functions/clone.html" onMouseOver="funcPopup(event,'clone')">clone</a>(<a class="var it5265" onMouseOver="hilite(5265)" onMouseOut="lolite()" onClick="logVariable('feedbackcompletedtmp')" href="../../_variables/feedbackcompletedtmp.html">$feedbackcompletedtmp</a>);
<a name="l1881"><span class="linenum">1881</span></a>          <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('id')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = '';
<a name="l1882"><span class="linenum">1882</span></a>          <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('userid')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l1883"><span class="linenum">1883</span></a>          <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('timemodified')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l1884"><span class="linenum">1884</span></a>          <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('id')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('feedback_completed', <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>);
<a name="l1885"><span class="linenum">1885</span></a>      }
<a name="l1886"><span class="linenum">1886</span></a>  
<a name="l1887"><span class="linenum">1887</span></a>  <span class="comment">    //save all the new values from feedback_valuetmp</span>
<a name="l1888"><span class="linenum">1888</span></a>  <span class="comment">    //get all values of tmp-completed</span>
<a name="l1889"><span class="linenum">1889</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('completed'=&gt;<a class="var it5265" onMouseOver="hilite(5265)" onMouseOut="lolite()" onClick="logVariable('feedbackcompletedtmp')" href="../../_variables/feedbackcompletedtmp.html">$feedbackcompletedtmp</a>-&gt;<a onClick="logVariable('id')" class="var it40555" onMouseOver="hilite(40555)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1890"><span class="linenum">1890</span></a>      if (!<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_valuetmp', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l1891"><span class="linenum">1891</span></a>          return false;
<a name="l1892"><span class="linenum">1892</span></a>      }
<a name="l1893"><span class="linenum">1893</span></a>      foreach (<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> as <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l1894"><span class="linenum">1894</span></a>  <span class="comment">        //check if there are depend items</span>
<a name="l1895"><span class="linenum">1895</span></a>          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_item', array('id'=&gt;<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('item')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/item.html">item</a>));
<a name="l1896"><span class="linenum">1896</span></a>          if (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('dependitem')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/dependitem.html">dependitem</a> &gt; 0) {
<a name="l1897"><span class="linenum">1897</span></a>              <a class="var it5355" onMouseOver="hilite(5355)" onMouseOut="lolite()" onClick="logVariable('check')" href="../../_variables/check.html">$check</a> = <a class="function" onClick="logFunction('feedback_compare_item_value')" href="../../_functions/feedback_compare_item_value.html" onMouseOver="funcPopup(event,'feedback_compare_item_value')">feedback_compare_item_value</a>(<a class="var it38607" onMouseOver="hilite(38607)" onMouseOut="lolite()" onClick="logVariable('tmpcplid')" href="../../_variables/tmpcplid.html">$tmpcplid</a>,
<a name="l1898"><span class="linenum">1898</span></a>                                          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('dependitem')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/dependitem.html">dependitem</a>,
<a name="l1899"><span class="linenum">1899</span></a>                                          <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('dependvalue')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/dependvalue.html">dependvalue</a>,
<a name="l1900"><span class="linenum">1900</span></a>                                          true);
<a name="l1901"><span class="linenum">1901</span></a>          } else {
<a name="l1902"><span class="linenum">1902</span></a>              <a class="var it5355" onMouseOver="hilite(5355)" onMouseOut="lolite()" onClick="logVariable('check')" href="../../_variables/check.html">$check</a> = true;
<a name="l1903"><span class="linenum">1903</span></a>          }
<a name="l1904"><span class="linenum">1904</span></a>          if (<a class="var it5355" onMouseOver="hilite(5355)" onMouseOut="lolite()" onClick="logVariable('check')" href="../../_variables/check.html">$check</a>) {
<a name="l1905"><span class="linenum">1905</span></a>              unset(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('id')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1906"><span class="linenum">1906</span></a>              <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('completed')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/completed.html">completed</a> = <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('id')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1907"><span class="linenum">1907</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('feedback_value', <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l1908"><span class="linenum">1908</span></a>          }
<a name="l1909"><span class="linenum">1909</span></a>      }
<a name="l1910"><span class="linenum">1910</span></a>  <span class="comment">    //drop all the tmpvalues</span>
<a name="l1911"><span class="linenum">1911</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_valuetmp', array('completed'=&gt;<a class="var it38607" onMouseOver="hilite(38607)" onMouseOut="lolite()" onClick="logVariable('tmpcplid')" href="../../_variables/tmpcplid.html">$tmpcplid</a>));
<a name="l1912"><span class="linenum">1912</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_completedtmp', array('id'=&gt;<a class="var it38607" onMouseOver="hilite(38607)" onMouseOut="lolite()" onClick="logVariable('tmpcplid')" href="../../_variables/tmpcplid.html">$tmpcplid</a>));
<a name="l1913"><span class="linenum">1913</span></a>  
<a name="l1914"><span class="linenum">1914</span></a>  <span class="comment">    // Trigger event for the delete action we performed.</span>
<a name="l1915"><span class="linenum">1915</span></a>      <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('feedback', <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('feedback')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>);
<a name="l1916"><span class="linenum">1916</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_feedback\event\<a class="class" onClick="logClass('response_submitted')" href="../../_classes/response_submitted.html" onMouseOver="classPopup(event,'response_submitted')">response_submitted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l1917"><span class="linenum">1917</span></a>          'relateduserid' =&gt; <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>,
<a name="l1918"><span class="linenum">1918</span></a>          'objectid' =&gt; <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('id')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1919"><span class="linenum">1919</span></a>          'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l1920"><span class="linenum">1920</span></a>          'anonymous' =&gt; (<a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('anonymous_response')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/anonymous_response.html">anonymous_response</a> == <a class="constant" onClick="logConstant('FEEDBACK_ANONYMOUS_YES')" href="../../_constants/FEEDBACK_ANONYMOUS_YES.html" onMouseOver="constPopup(event,'FEEDBACK_ANONYMOUS_YES')">FEEDBACK_ANONYMOUS_YES</a>),
<a name="l1921"><span class="linenum">1921</span></a>          'other' =&gt; array(
<a name="l1922"><span class="linenum">1922</span></a>              'cmid' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l1923"><span class="linenum">1923</span></a>              'instanceid' =&gt; <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('feedback')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>,
<a name="l1924"><span class="linenum">1924</span></a>              'anonymous' =&gt; <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('anonymous_response')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/anonymous_response.html">anonymous_response</a> // Deprecated.
<a name="l1925"><span class="linenum">1925</span></a>          )
<a name="l1926"><span class="linenum">1926</span></a>      ));
<a name="l1927"><span class="linenum">1927</span></a>  
<a name="l1928"><span class="linenum">1928</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('feedback_completed', <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>);
<a name="l1929"><span class="linenum">1929</span></a>  
<a name="l1930"><span class="linenum">1930</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l1931"><span class="linenum">1931</span></a>      return <a class="var it5264" onMouseOver="hilite(5264)" onMouseOut="lolite()" onClick="logVariable('feedbackcompleted')" href="../../_variables/feedbackcompleted.html">$feedbackcompleted</a>-&gt;<a onClick="logVariable('id')" class="var it40571" onMouseOver="hilite(40571)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1932"><span class="linenum">1932</span></a>  
<a name="l1933"><span class="linenum">1933</span></a>  }
<a name="l1934"><span class="linenum">1934</span></a>  
<a name="l1935"><span class="linenum">1935</span></a>  <span class="comment">/**</span>
<a name="l1936"><span class="linenum">1936</span></a>  <span class="comment"> * deletes the given temporary completed and all related temporary values</span>
<a name="l1937"><span class="linenum">1937</span></a>  <span class="comment"> *</span>
<a name="l1938"><span class="linenum">1938</span></a>  <span class="comment"> * @global object</span>
<a name="l1939"><span class="linenum">1939</span></a>  <span class="comment"> * @param int $tmpcplid</span>
<a name="l1940"><span class="linenum">1940</span></a>  <span class="comment"> * @return void</span>
<a name="l1941"><span class="linenum">1941</span></a>  <span class="comment"> */</span>
<a name="l1942"><span class="linenum">1942</span></a>  function <a class="function" onClick="logFunction('feedback_delete_completedtmp')" href="../../_functions/feedback_delete_completedtmp.html" onMouseOver="funcPopup(event,'feedback_delete_completedtmp')">feedback_delete_completedtmp</a>(<a class="var it38607" onMouseOver="hilite(38607)" onMouseOut="lolite()" onClick="logVariable('tmpcplid')" href="../../_variables/tmpcplid.html">$tmpcplid</a>) {
<a name="l1943"><span class="linenum">1943</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1944"><span class="linenum">1944</span></a>  
<a name="l1945"><span class="linenum">1945</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_valuetmp', array('completed'=&gt;<a class="var it38607" onMouseOver="hilite(38607)" onMouseOut="lolite()" onClick="logVariable('tmpcplid')" href="../../_variables/tmpcplid.html">$tmpcplid</a>));
<a name="l1946"><span class="linenum">1946</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_completedtmp', array('id'=&gt;<a class="var it38607" onMouseOver="hilite(38607)" onMouseOut="lolite()" onClick="logVariable('tmpcplid')" href="../../_variables/tmpcplid.html">$tmpcplid</a>));
<a name="l1947"><span class="linenum">1947</span></a>  }
<a name="l1948"><span class="linenum">1948</span></a>  
<a name="l1949"><span class="linenum">1949</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l1950"><span class="linenum">1950</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l1951"><span class="linenum">1951</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l1952"><span class="linenum">1952</span></a>  <span class="comment">//functions to handle the pagebreaks</span>
<a name="l1953"><span class="linenum">1953</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l1954"><span class="linenum">1954</span></a>  
<a name="l1955"><span class="linenum">1955</span></a>  <span class="comment">/**</span>
<a name="l1956"><span class="linenum">1956</span></a>  <span class="comment"> * this creates a pagebreak.</span>
<a name="l1957"><span class="linenum">1957</span></a>  <span class="comment"> * a pagebreak is a special kind of item</span>
<a name="l1958"><span class="linenum">1958</span></a>  <span class="comment"> *</span>
<a name="l1959"><span class="linenum">1959</span></a>  <span class="comment"> * @global object</span>
<a name="l1960"><span class="linenum">1960</span></a>  <span class="comment"> * @param int $feedbackid</span>
<a name="l1961"><span class="linenum">1961</span></a>  <span class="comment"> * @return mixed false if there already is a pagebreak on last position or the id of the pagebreak-item</span>
<a name="l1962"><span class="linenum">1962</span></a>  <span class="comment"> */</span>
<a name="l1963"><span class="linenum">1963</span></a>  function <a class="function" onClick="logFunction('feedback_create_pagebreak')" href="../../_functions/feedback_create_pagebreak.html" onMouseOver="funcPopup(event,'feedback_create_pagebreak')">feedback_create_pagebreak</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>) {
<a name="l1964"><span class="linenum">1964</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1965"><span class="linenum">1965</span></a>  
<a name="l1966"><span class="linenum">1966</span></a>  <span class="comment">    //check if there already is a pagebreak on the last position</span>
<a name="l1967"><span class="linenum">1967</span></a>      <a class="var it2851" onMouseOver="hilite(2851)" onMouseOut="lolite()" onClick="logVariable('lastposition')" href="../../_variables/lastposition.html">$lastposition</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('feedback_item', array('feedback'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>));
<a name="l1968"><span class="linenum">1968</span></a>      if (<a class="var it2851" onMouseOver="hilite(2851)" onMouseOut="lolite()" onClick="logVariable('lastposition')" href="../../_variables/lastposition.html">$lastposition</a> == <a class="function" onClick="logFunction('feedback_get_last_break_position')" href="../../_functions/feedback_get_last_break_position.html" onMouseOver="funcPopup(event,'feedback_get_last_break_position')">feedback_get_last_break_position</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>)) {
<a name="l1969"><span class="linenum">1969</span></a>          return false;
<a name="l1970"><span class="linenum">1970</span></a>      }
<a name="l1971"><span class="linenum">1971</span></a>  
<a name="l1972"><span class="linenum">1972</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = new stdClass();
<a name="l1973"><span class="linenum">1973</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>;
<a name="l1974"><span class="linenum">1974</span></a>  
<a name="l1975"><span class="linenum">1975</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('template')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/template.html">template</a>=0;
<a name="l1976"><span class="linenum">1976</span></a>  
<a name="l1977"><span class="linenum">1977</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('name')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = '';
<a name="l1978"><span class="linenum">1978</span></a>  
<a name="l1979"><span class="linenum">1979</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('presentation')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/presentation.html">presentation</a> = '';
<a name="l1980"><span class="linenum">1980</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('hasvalue')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/hasvalue.html">hasvalue</a> = 0;
<a name="l1981"><span class="linenum">1981</span></a>  
<a name="l1982"><span class="linenum">1982</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a> = 'pagebreak';
<a name="l1983"><span class="linenum">1983</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('position')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/position.html">position</a> = <a class="var it2851" onMouseOver="hilite(2851)" onMouseOut="lolite()" onClick="logVariable('lastposition')" href="../../_variables/lastposition.html">$lastposition</a> + 1;
<a name="l1984"><span class="linenum">1984</span></a>  
<a name="l1985"><span class="linenum">1985</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('required')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/required.html">required</a>=0;
<a name="l1986"><span class="linenum">1986</span></a>  
<a name="l1987"><span class="linenum">1987</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('feedback_item', <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>);
<a name="l1988"><span class="linenum">1988</span></a>  }
<a name="l1989"><span class="linenum">1989</span></a>  
<a name="l1990"><span class="linenum">1990</span></a>  <span class="comment">/**</span>
<a name="l1991"><span class="linenum">1991</span></a>  <span class="comment"> * get all positions of pagebreaks in the given feedback</span>
<a name="l1992"><span class="linenum">1992</span></a>  <span class="comment"> *</span>
<a name="l1993"><span class="linenum">1993</span></a>  <span class="comment"> * @global object</span>
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment"> * @param int $feedbackid</span>
<a name="l1995"><span class="linenum">1995</span></a>  <span class="comment"> * @return array all ordered pagebreak positions</span>
<a name="l1996"><span class="linenum">1996</span></a>  <span class="comment"> */</span>
<a name="l1997"><span class="linenum">1997</span></a>  function <a class="function" onClick="logFunction('feedback_get_all_break_positions')" href="../../_functions/feedback_get_all_break_positions.html" onMouseOver="funcPopup(event,'feedback_get_all_break_positions')">feedback_get_all_break_positions</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>) {
<a name="l1998"><span class="linenum">1998</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1999"><span class="linenum">1999</span></a>  
<a name="l2000"><span class="linenum">2000</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('typ'=&gt;'pagebreak', 'feedback'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>);
<a name="l2001"><span class="linenum">2001</span></a>      <a class="var it5270" onMouseOver="hilite(5270)" onMouseOut="lolite()" onClick="logVariable('allbreaks')" href="../../_variables/allbreaks.html">$allbreaks</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_menu')" href="../../_functions/get_records_menu.html" onMouseOver="funcPopup(event,'get_records_menu')">get_records_menu</a>('feedback_item', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 'position', 'id, position');
<a name="l2002"><span class="linenum">2002</span></a>      if (!<a class="var it5270" onMouseOver="hilite(5270)" onMouseOut="lolite()" onClick="logVariable('allbreaks')" href="../../_variables/allbreaks.html">$allbreaks</a>) {
<a name="l2003"><span class="linenum">2003</span></a>          return false;
<a name="l2004"><span class="linenum">2004</span></a>      }
<a name="l2005"><span class="linenum">2005</span></a>      return <a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it5270" onMouseOver="hilite(5270)" onMouseOut="lolite()" onClick="logVariable('allbreaks')" href="../../_variables/allbreaks.html">$allbreaks</a>);
<a name="l2006"><span class="linenum">2006</span></a>  }
<a name="l2007"><span class="linenum">2007</span></a>  
<a name="l2008"><span class="linenum">2008</span></a>  <span class="comment">/**</span>
<a name="l2009"><span class="linenum">2009</span></a>  <span class="comment"> * get the position of the last pagebreak</span>
<a name="l2010"><span class="linenum">2010</span></a>  <span class="comment"> *</span>
<a name="l2011"><span class="linenum">2011</span></a>  <span class="comment"> * @param int $feedbackid</span>
<a name="l2012"><span class="linenum">2012</span></a>  <span class="comment"> * @return int the position of the last pagebreak</span>
<a name="l2013"><span class="linenum">2013</span></a>  <span class="comment"> */</span>
<a name="l2014"><span class="linenum">2014</span></a>  function <a class="function" onClick="logFunction('feedback_get_last_break_position')" href="../../_functions/feedback_get_last_break_position.html" onMouseOver="funcPopup(event,'feedback_get_last_break_position')">feedback_get_last_break_position</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>) {
<a name="l2015"><span class="linenum">2015</span></a>      if (!<a class="var it5270" onMouseOver="hilite(5270)" onMouseOut="lolite()" onClick="logVariable('allbreaks')" href="../../_variables/allbreaks.html">$allbreaks</a> = <a class="function" onClick="logFunction('feedback_get_all_break_positions')" href="../../_functions/feedback_get_all_break_positions.html" onMouseOver="funcPopup(event,'feedback_get_all_break_positions')">feedback_get_all_break_positions</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>)) {
<a name="l2016"><span class="linenum">2016</span></a>          return false;
<a name="l2017"><span class="linenum">2017</span></a>      }
<a name="l2018"><span class="linenum">2018</span></a>      return <a class="var it5270" onMouseOver="hilite(5270)" onMouseOut="lolite()" onClick="logVariable('allbreaks')" href="../../_variables/allbreaks.html">$allbreaks</a>[<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5270" onMouseOver="hilite(5270)" onMouseOut="lolite()" onClick="logVariable('allbreaks')" href="../../_variables/allbreaks.html">$allbreaks</a>) - 1];
<a name="l2019"><span class="linenum">2019</span></a>  }
<a name="l2020"><span class="linenum">2020</span></a>  
<a name="l2021"><span class="linenum">2021</span></a>  <span class="comment">/**</span>
<a name="l2022"><span class="linenum">2022</span></a>  <span class="comment"> * this returns the position where the user can continue the completing.</span>
<a name="l2023"><span class="linenum">2023</span></a>  <span class="comment"> *</span>
<a name="l2024"><span class="linenum">2024</span></a>  <span class="comment"> * @global object</span>
<a name="l2025"><span class="linenum">2025</span></a>  <span class="comment"> * @global object</span>
<a name="l2026"><span class="linenum">2026</span></a>  <span class="comment"> * @global object</span>
<a name="l2027"><span class="linenum">2027</span></a>  <span class="comment"> * @param int $feedbackid</span>
<a name="l2028"><span class="linenum">2028</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l2029"><span class="linenum">2029</span></a>  <span class="comment"> * @param string $guestid this id will be saved temporary and is unique</span>
<a name="l2030"><span class="linenum">2030</span></a>  <span class="comment"> * @return int the position to continue</span>
<a name="l2031"><span class="linenum">2031</span></a>  <span class="comment"> */</span>
<a name="l2032"><span class="linenum">2032</span></a>  function <a class="function" onClick="logFunction('feedback_get_page_to_continue')" href="../../_functions/feedback_get_page_to_continue.html" onMouseOver="funcPopup(event,'feedback_get_page_to_continue')">feedback_get_page_to_continue</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a> = false, <a class="var it3829" onMouseOver="hilite(3829)" onMouseOut="lolite()" onClick="logVariable('guestid')" href="../../_variables/guestid.html">$guestid</a> = false) {
<a name="l2033"><span class="linenum">2033</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2034"><span class="linenum">2034</span></a>  
<a name="l2035"><span class="linenum">2035</span></a>  <span class="comment">    //is there any break?</span>
<a name="l2036"><span class="linenum">2036</span></a>  
<a name="l2037"><span class="linenum">2037</span></a>      if (!<a class="var it5270" onMouseOver="hilite(5270)" onMouseOut="lolite()" onClick="logVariable('allbreaks')" href="../../_variables/allbreaks.html">$allbreaks</a> = <a class="function" onClick="logFunction('feedback_get_all_break_positions')" href="../../_functions/feedback_get_all_break_positions.html" onMouseOver="funcPopup(event,'feedback_get_all_break_positions')">feedback_get_all_break_positions</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>)) {
<a name="l2038"><span class="linenum">2038</span></a>          return false;
<a name="l2039"><span class="linenum">2039</span></a>      }
<a name="l2040"><span class="linenum">2040</span></a>  
<a name="l2041"><span class="linenum">2041</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l2042"><span class="linenum">2042</span></a>      if (<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l2043"><span class="linenum">2043</span></a>          <a class="var it7851" onMouseOver="hilite(7851)" onMouseOut="lolite()" onClick="logVariable('courseselect')" href="../../_variables/courseselect.html">$courseselect</a> = &quot;AND fv.course_id = :courseid&quot;;
<a name="l2044"><span class="linenum">2044</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['courseid'] = <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>;
<a name="l2045"><span class="linenum">2045</span></a>      } else {
<a name="l2046"><span class="linenum">2046</span></a>          <a class="var it7851" onMouseOver="hilite(7851)" onMouseOut="lolite()" onClick="logVariable('courseselect')" href="../../_variables/courseselect.html">$courseselect</a> = '';
<a name="l2047"><span class="linenum">2047</span></a>      }
<a name="l2048"><span class="linenum">2048</span></a>  
<a name="l2049"><span class="linenum">2049</span></a>      if (<a class="var it3829" onMouseOver="hilite(3829)" onMouseOut="lolite()" onClick="logVariable('guestid')" href="../../_variables/guestid.html">$guestid</a>) {
<a name="l2050"><span class="linenum">2050</span></a>          <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a> = &quot;AND fc.guestid = :guestid&quot;;
<a name="l2051"><span class="linenum">2051</span></a>          <a class="var it1499" onMouseOver="hilite(1499)" onMouseOut="lolite()" onClick="logVariable('usergroup')" href="../../_variables/usergroup.html">$usergroup</a> = &quot;GROUP BY fc.guestid&quot;;
<a name="l2052"><span class="linenum">2052</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['guestid'] = <a class="var it3829" onMouseOver="hilite(3829)" onMouseOut="lolite()" onClick="logVariable('guestid')" href="../../_variables/guestid.html">$guestid</a>;
<a name="l2053"><span class="linenum">2053</span></a>      } else {
<a name="l2054"><span class="linenum">2054</span></a>          <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a> = &quot;AND fc.userid = :userid&quot;;
<a name="l2055"><span class="linenum">2055</span></a>          <a class="var it1499" onMouseOver="hilite(1499)" onMouseOut="lolite()" onClick="logVariable('usergroup')" href="../../_variables/usergroup.html">$usergroup</a> = &quot;GROUP BY fc.userid&quot;;
<a name="l2056"><span class="linenum">2056</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['userid'] = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2057"><span class="linenum">2057</span></a>      }
<a name="l2058"><span class="linenum">2058</span></a>  
<a name="l2059"><span class="linenum">2059</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> =  &quot;SELECT <a class="phpfunction" onClick="logFunction('MAX')" href="../../_functions/max.html" onMouseOver="phpfuncPopup(event,'max')">MAX</a>(fi.position)
<a name="l2060"><span class="linenum">2060</span></a>                 FROM {feedback_completedtmp} fc, {feedback_valuetmp} fv, {feedback_item} fi
<a name="l2061"><span class="linenum">2061</span></a>                WHERE fc.id = fv.completed
<a name="l2062"><span class="linenum">2062</span></a>                      <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a>
<a name="l2063"><span class="linenum">2063</span></a>                      AND fc.feedback = :feedbackid
<a name="l2064"><span class="linenum">2064</span></a>                      <a class="var it7851" onMouseOver="hilite(7851)" onMouseOut="lolite()" onClick="logVariable('courseselect')" href="../../_variables/courseselect.html">$courseselect</a>
<a name="l2065"><span class="linenum">2065</span></a>                      AND fi.id = fv.item
<a name="l2066"><span class="linenum">2066</span></a>           <a class="var it1499" onMouseOver="hilite(1499)" onMouseOut="lolite()" onClick="logVariable('usergroup')" href="../../_variables/usergroup.html">$usergroup</a>&quot;;
<a name="l2067"><span class="linenum">2067</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['feedbackid'] = <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>;
<a name="l2068"><span class="linenum">2068</span></a>  
<a name="l2069"><span class="linenum">2069</span></a>      <a class="var it4550" onMouseOver="hilite(4550)" onMouseOut="lolite()" onClick="logVariable('lastpos')" href="../../_variables/lastpos.html">$lastpos</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2070"><span class="linenum">2070</span></a>  
<a name="l2071"><span class="linenum">2071</span></a>  <span class="comment">    //the index of found pagebreak is the searched pagenumber</span>
<a name="l2072"><span class="linenum">2072</span></a>      foreach (<a class="var it5270" onMouseOver="hilite(5270)" onMouseOut="lolite()" onClick="logVariable('allbreaks')" href="../../_variables/allbreaks.html">$allbreaks</a> as <a class="var it38608" onMouseOver="hilite(38608)" onMouseOut="lolite()" onClick="logVariable('pagenr')" href="../../_variables/pagenr.html">$pagenr</a> =&gt; <a class="var it9490" onMouseOver="hilite(9490)" onMouseOut="lolite()" onClick="logVariable('br')" href="../../_variables/br.html">$br</a>) {
<a name="l2073"><span class="linenum">2073</span></a>          if (<a class="var it4550" onMouseOver="hilite(4550)" onMouseOut="lolite()" onClick="logVariable('lastpos')" href="../../_variables/lastpos.html">$lastpos</a> &lt; <a class="var it9490" onMouseOver="hilite(9490)" onMouseOut="lolite()" onClick="logVariable('br')" href="../../_variables/br.html">$br</a>) {
<a name="l2074"><span class="linenum">2074</span></a>              return <a class="var it38608" onMouseOver="hilite(38608)" onMouseOut="lolite()" onClick="logVariable('pagenr')" href="../../_variables/pagenr.html">$pagenr</a>;
<a name="l2075"><span class="linenum">2075</span></a>          }
<a name="l2076"><span class="linenum">2076</span></a>      }
<a name="l2077"><span class="linenum">2077</span></a>      return <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5270" onMouseOver="hilite(5270)" onMouseOut="lolite()" onClick="logVariable('allbreaks')" href="../../_variables/allbreaks.html">$allbreaks</a>);
<a name="l2078"><span class="linenum">2078</span></a>  }
<a name="l2079"><span class="linenum">2079</span></a>  
<a name="l2080"><span class="linenum">2080</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l2081"><span class="linenum">2081</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l2082"><span class="linenum">2082</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l2083"><span class="linenum">2083</span></a>  <span class="comment">//functions to handle the values</span>
<a name="l2084"><span class="linenum">2084</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l2085"><span class="linenum">2085</span></a>  
<a name="l2086"><span class="linenum">2086</span></a>  <span class="comment">/**</span>
<a name="l2087"><span class="linenum">2087</span></a>  <span class="comment"> * cleans the userinput while submitting the form.</span>
<a name="l2088"><span class="linenum">2088</span></a>  <span class="comment"> *</span>
<a name="l2089"><span class="linenum">2089</span></a>  <span class="comment"> * @param mixed $value</span>
<a name="l2090"><span class="linenum">2090</span></a>  <span class="comment"> * @return mixed</span>
<a name="l2091"><span class="linenum">2091</span></a>  <span class="comment"> */</span>
<a name="l2092"><span class="linenum">2092</span></a>  function <a class="function" onClick="logFunction('feedback_clean_input_value')" href="../../_functions/feedback_clean_input_value.html" onMouseOver="funcPopup(event,'feedback_clean_input_value')">feedback_clean_input_value</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l2093"><span class="linenum">2093</span></a>      <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a> = <a class="function" onClick="logFunction('feedback_get_item_class')" href="../../_functions/feedback_get_item_class.html" onMouseOver="funcPopup(event,'feedback_get_item_class')">feedback_get_item_class</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>);
<a name="l2094"><span class="linenum">2094</span></a>      return <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('clean_input_value')" href="../../_functions/clean_input_value.html" onMouseOver="funcPopup(event,'clean_input_value')">clean_input_value</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l2095"><span class="linenum">2095</span></a>  }
<a name="l2096"><span class="linenum">2096</span></a>  
<a name="l2097"><span class="linenum">2097</span></a>  <span class="comment">/**</span>
<a name="l2098"><span class="linenum">2098</span></a>  <span class="comment"> * this saves the values of an completed.</span>
<a name="l2099"><span class="linenum">2099</span></a>  <span class="comment"> * if the param $tmp is set true so the values are saved temporary in table feedback_valuetmp.</span>
<a name="l2100"><span class="linenum">2100</span></a>  <span class="comment"> * if there is already a completed and the userid is set so the values are updated.</span>
<a name="l2101"><span class="linenum">2101</span></a>  <span class="comment"> * on all other things new value records will be created.</span>
<a name="l2102"><span class="linenum">2102</span></a>  <span class="comment"> *</span>
<a name="l2103"><span class="linenum">2103</span></a>  <span class="comment"> * @global object</span>
<a name="l2104"><span class="linenum">2104</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l2105"><span class="linenum">2105</span></a>  <span class="comment"> * @param boolean $tmp</span>
<a name="l2106"><span class="linenum">2106</span></a>  <span class="comment"> * @return mixed false on error or the completeid</span>
<a name="l2107"><span class="linenum">2107</span></a>  <span class="comment"> */</span>
<a name="l2108"><span class="linenum">2108</span></a>  function <a class="function" onClick="logFunction('feedback_save_values')" href="../../_functions/feedback_save_values.html" onMouseOver="funcPopup(event,'feedback_save_values')">feedback_save_values</a>(<a class="var it38609" onMouseOver="hilite(38609)" onMouseOut="lolite()" onClick="logVariable('usrid')" href="../../_variables/usrid.html">$usrid</a>, <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a> = false) {
<a name="l2109"><span class="linenum">2109</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2110"><span class="linenum">2110</span></a>  
<a name="l2111"><span class="linenum">2111</span></a>      <a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('completedid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2112"><span class="linenum">2112</span></a>  
<a name="l2113"><span class="linenum">2113</span></a>      <a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a> = <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a> ? 'tmp' : '';
<a name="l2114"><span class="linenum">2114</span></a>      <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2115"><span class="linenum">2115</span></a>      <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../_variables/timemodified.html">$timemodified</a> = <a class="phpfunction" onClick="logFunction('mktime')" href="../../_functions/mktime.html" onMouseOver="phpfuncPopup(event,'mktime')">mktime</a>(0, 0, 0, <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('m', <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>), <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('d', <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>), <a class="phpfunction" onClick="logFunction('date')" href="../../_functions/date.html" onMouseOver="phpfuncPopup(event,'date')">date</a>('Y', <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('time')" href="../../_variables/time.html">$time</a>));
<a name="l2116"><span class="linenum">2116</span></a>  
<a name="l2117"><span class="linenum">2117</span></a>      if (<a class="var it38609" onMouseOver="hilite(38609)" onMouseOut="lolite()" onClick="logVariable('usrid')" href="../../_variables/usrid.html">$usrid</a> == 0) {
<a name="l2118"><span class="linenum">2118</span></a>          return <a class="function" onClick="logFunction('feedback_create_values')" href="../../_functions/feedback_create_values.html" onMouseOver="funcPopup(event,'feedback_create_values')">feedback_create_values</a>(<a class="var it38609" onMouseOver="hilite(38609)" onMouseOut="lolite()" onClick="logVariable('usrid')" href="../../_variables/usrid.html">$usrid</a>, <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../_variables/timemodified.html">$timemodified</a>, <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a>);
<a name="l2119"><span class="linenum">2119</span></a>      }
<a name="l2120"><span class="linenum">2120</span></a>      <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_completed'.<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>, array('id'=&gt;<a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a>));
<a name="l2121"><span class="linenum">2121</span></a>      if (!<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>) {
<a name="l2122"><span class="linenum">2122</span></a>          return <a class="function" onClick="logFunction('feedback_create_values')" href="../../_functions/feedback_create_values.html" onMouseOver="funcPopup(event,'feedback_create_values')">feedback_create_values</a>(<a class="var it38609" onMouseOver="hilite(38609)" onMouseOut="lolite()" onClick="logVariable('usrid')" href="../../_variables/usrid.html">$usrid</a>, <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../_variables/timemodified.html">$timemodified</a>, <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a>);
<a name="l2123"><span class="linenum">2123</span></a>      } else {
<a name="l2124"><span class="linenum">2124</span></a>          <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('timemodified')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../_variables/timemodified.html">$timemodified</a>;
<a name="l2125"><span class="linenum">2125</span></a>          return <a class="function" onClick="logFunction('feedback_update_values')" href="../../_functions/feedback_update_values.html" onMouseOver="funcPopup(event,'feedback_update_values')">feedback_update_values</a>(<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>, <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a>);
<a name="l2126"><span class="linenum">2126</span></a>      }
<a name="l2127"><span class="linenum">2127</span></a>  }
<a name="l2128"><span class="linenum">2128</span></a>  
<a name="l2129"><span class="linenum">2129</span></a>  <span class="comment">/**</span>
<a name="l2130"><span class="linenum">2130</span></a>  <span class="comment"> * this saves the values from anonymous user such as guest on the main-site</span>
<a name="l2131"><span class="linenum">2131</span></a>  <span class="comment"> *</span>
<a name="l2132"><span class="linenum">2132</span></a>  <span class="comment"> * @global object</span>
<a name="l2133"><span class="linenum">2133</span></a>  <span class="comment"> * @param string $guestid the unique guestidentifier</span>
<a name="l2134"><span class="linenum">2134</span></a>  <span class="comment"> * @return mixed false on error or the completeid</span>
<a name="l2135"><span class="linenum">2135</span></a>  <span class="comment"> */</span>
<a name="l2136"><span class="linenum">2136</span></a>  function <a class="function" onClick="logFunction('feedback_save_guest_values')" href="../../_functions/feedback_save_guest_values.html" onMouseOver="funcPopup(event,'feedback_save_guest_values')">feedback_save_guest_values</a>(<a class="var it3829" onMouseOver="hilite(3829)" onMouseOut="lolite()" onClick="logVariable('guestid')" href="../../_variables/guestid.html">$guestid</a>) {
<a name="l2137"><span class="linenum">2137</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2138"><span class="linenum">2138</span></a>  
<a name="l2139"><span class="linenum">2139</span></a>      <a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('completedid', false, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2140"><span class="linenum">2140</span></a>  
<a name="l2141"><span class="linenum">2141</span></a>      <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../_variables/timemodified.html">$timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l2142"><span class="linenum">2142</span></a>      if (!<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_completedtmp', array('id'=&gt;<a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a>))) {
<a name="l2143"><span class="linenum">2143</span></a>          return <a class="function" onClick="logFunction('feedback_create_values')" href="../../_functions/feedback_create_values.html" onMouseOver="funcPopup(event,'feedback_create_values')">feedback_create_values</a>(0, <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../_variables/timemodified.html">$timemodified</a>, true, <a class="var it3829" onMouseOver="hilite(3829)" onMouseOut="lolite()" onClick="logVariable('guestid')" href="../../_variables/guestid.html">$guestid</a>);
<a name="l2144"><span class="linenum">2144</span></a>      } else {
<a name="l2145"><span class="linenum">2145</span></a>          <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('timemodified')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../_variables/timemodified.html">$timemodified</a>;
<a name="l2146"><span class="linenum">2146</span></a>          return <a class="function" onClick="logFunction('feedback_update_values')" href="../../_functions/feedback_update_values.html" onMouseOver="funcPopup(event,'feedback_update_values')">feedback_update_values</a>(<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>, true);
<a name="l2147"><span class="linenum">2147</span></a>      }
<a name="l2148"><span class="linenum">2148</span></a>  }
<a name="l2149"><span class="linenum">2149</span></a>  
<a name="l2150"><span class="linenum">2150</span></a>  <span class="comment">/**</span>
<a name="l2151"><span class="linenum">2151</span></a>  <span class="comment"> * get the value from the given item related to the given completed.</span>
<a name="l2152"><span class="linenum">2152</span></a>  <span class="comment"> * the value can come as temporary or as permanently value. the deciding is done by $tmp</span>
<a name="l2153"><span class="linenum">2153</span></a>  <span class="comment"> *</span>
<a name="l2154"><span class="linenum">2154</span></a>  <span class="comment"> * @global object</span>
<a name="l2155"><span class="linenum">2155</span></a>  <span class="comment"> * @param int $completeid</span>
<a name="l2156"><span class="linenum">2156</span></a>  <span class="comment"> * @param int $itemid</span>
<a name="l2157"><span class="linenum">2157</span></a>  <span class="comment"> * @param boolean $tmp</span>
<a name="l2158"><span class="linenum">2158</span></a>  <span class="comment"> * @return mixed the value, the type depends on plugin-definition</span>
<a name="l2159"><span class="linenum">2159</span></a>  <span class="comment"> */</span>
<a name="l2160"><span class="linenum">2160</span></a>  function <a class="function" onClick="logFunction('feedback_get_item_value')" href="../../_functions/feedback_get_item_value.html" onMouseOver="funcPopup(event,'feedback_get_item_value')">feedback_get_item_value</a>(<a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a> = false) {
<a name="l2161"><span class="linenum">2161</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2162"><span class="linenum">2162</span></a>  
<a name="l2163"><span class="linenum">2163</span></a>      <a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a> = <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a> ? 'tmp' : '';
<a name="l2164"><span class="linenum">2164</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('completed'=&gt;<a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a>, 'item'=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>);
<a name="l2165"><span class="linenum">2165</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('feedback_value'.<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>, 'value', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2166"><span class="linenum">2166</span></a>  }
<a name="l2167"><span class="linenum">2167</span></a>  
<a name="l2168"><span class="linenum">2168</span></a>  <span class="comment">/**</span>
<a name="l2169"><span class="linenum">2169</span></a>  <span class="comment"> * compares the value of the itemid related to the completedid with the dependvalue.</span>
<a name="l2170"><span class="linenum">2170</span></a>  <span class="comment"> * this is used if a depend item is set.</span>
<a name="l2171"><span class="linenum">2171</span></a>  <span class="comment"> * the value can come as temporary or as permanently value. the deciding is done by $tmp.</span>
<a name="l2172"><span class="linenum">2172</span></a>  <span class="comment"> *</span>
<a name="l2173"><span class="linenum">2173</span></a>  <span class="comment"> * @global object</span>
<a name="l2174"><span class="linenum">2174</span></a>  <span class="comment"> * @global object</span>
<a name="l2175"><span class="linenum">2175</span></a>  <span class="comment"> * @param int $completeid</span>
<a name="l2176"><span class="linenum">2176</span></a>  <span class="comment"> * @param int $itemid</span>
<a name="l2177"><span class="linenum">2177</span></a>  <span class="comment"> * @param mixed $dependvalue</span>
<a name="l2178"><span class="linenum">2178</span></a>  <span class="comment"> * @param boolean $tmp</span>
<a name="l2179"><span class="linenum">2179</span></a>  <span class="comment"> * @return bool</span>
<a name="l2180"><span class="linenum">2180</span></a>  <span class="comment"> */</span>
<a name="l2181"><span class="linenum">2181</span></a>  function <a class="function" onClick="logFunction('feedback_compare_item_value')" href="../../_functions/feedback_compare_item_value.html" onMouseOver="funcPopup(event,'feedback_compare_item_value')">feedback_compare_item_value</a>(<a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it1058" onMouseOver="hilite(1058)" onMouseOut="lolite()" onClick="logVariable('dependvalue')" href="../../_variables/dependvalue.html">$dependvalue</a>, <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a> = false) {
<a name="l2182"><span class="linenum">2182</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2183"><span class="linenum">2183</span></a>  
<a name="l2184"><span class="linenum">2184</span></a>      <a class="var it2875" onMouseOver="hilite(2875)" onMouseOut="lolite()" onClick="logVariable('dbvalue')" href="../../_variables/dbvalue.html">$dbvalue</a> = <a class="function" onClick="logFunction('feedback_get_item_value')" href="../../_functions/feedback_get_item_value.html" onMouseOver="funcPopup(event,'feedback_get_item_value')">feedback_get_item_value</a>(<a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a>);
<a name="l2185"><span class="linenum">2185</span></a>  
<a name="l2186"><span class="linenum">2186</span></a>  <span class="comment">    //get the class of the given item-typ</span>
<a name="l2187"><span class="linenum">2187</span></a>      <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_item', array('id'=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>));
<a name="l2188"><span class="linenum">2188</span></a>  
<a name="l2189"><span class="linenum">2189</span></a>  <span class="comment">    //get the instance of the item-class</span>
<a name="l2190"><span class="linenum">2190</span></a>      <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a> = <a class="function" onClick="logFunction('feedback_get_item_class')" href="../../_functions/feedback_get_item_class.html" onMouseOver="funcPopup(event,'feedback_get_item_class')">feedback_get_item_class</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>);
<a name="l2191"><span class="linenum">2191</span></a>      return <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('compare_value')" href="../../_functions/compare_value.html" onMouseOver="funcPopup(event,'compare_value')">compare_value</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>, <a class="var it2875" onMouseOver="hilite(2875)" onMouseOut="lolite()" onClick="logVariable('dbvalue')" href="../../_variables/dbvalue.html">$dbvalue</a>, <a class="var it1058" onMouseOver="hilite(1058)" onMouseOut="lolite()" onClick="logVariable('dependvalue')" href="../../_variables/dependvalue.html">$dependvalue</a>); <span class="comment">//true or false</span>
<a name="l2192"><span class="linenum">2192</span></a>  }
<a name="l2193"><span class="linenum">2193</span></a>  
<a name="l2194"><span class="linenum">2194</span></a>  <span class="comment">/**</span>
<a name="l2195"><span class="linenum">2195</span></a>  <span class="comment"> * this function checks the correctness of values.</span>
<a name="l2196"><span class="linenum">2196</span></a>  <span class="comment"> * the rules for this are implemented in the class of each item.</span>
<a name="l2197"><span class="linenum">2197</span></a>  <span class="comment"> * it can be the required attribute or the value self e.g. numeric.</span>
<a name="l2198"><span class="linenum">2198</span></a>  <span class="comment"> * the params first/lastitem are given to determine the visible range between pagebreaks.</span>
<a name="l2199"><span class="linenum">2199</span></a>  <span class="comment"> *</span>
<a name="l2200"><span class="linenum">2200</span></a>  <span class="comment"> * @global object</span>
<a name="l2201"><span class="linenum">2201</span></a>  <span class="comment"> * @param int $firstitem the position of firstitem for checking</span>
<a name="l2202"><span class="linenum">2202</span></a>  <span class="comment"> * @param int $lastitem the position of lastitem for checking</span>
<a name="l2203"><span class="linenum">2203</span></a>  <span class="comment"> * @return boolean</span>
<a name="l2204"><span class="linenum">2204</span></a>  <span class="comment"> */</span>
<a name="l2205"><span class="linenum">2205</span></a>  function <a class="function" onClick="logFunction('feedback_check_values')" href="../../_functions/feedback_check_values.html" onMouseOver="funcPopup(event,'feedback_check_values')">feedback_check_values</a>(<a class="var it11975" onMouseOver="hilite(11975)" onMouseOut="lolite()" onClick="logVariable('firstitem')" href="../../_variables/firstitem.html">$firstitem</a>, <a class="var it5290" onMouseOver="hilite(5290)" onMouseOut="lolite()" onClick="logVariable('lastitem')" href="../../_variables/lastitem.html">$lastitem</a>) {
<a name="l2206"><span class="linenum">2206</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2207"><span class="linenum">2207</span></a>  
<a name="l2208"><span class="linenum">2208</span></a>      <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('feedbackid', 0, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2209"><span class="linenum">2209</span></a>  
<a name="l2210"><span class="linenum">2210</span></a>  <span class="comment">    //get all items between the first- and lastitem</span>
<a name="l2211"><span class="linenum">2211</span></a>      <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a> = &quot;feedback = ?
<a name="l2212"><span class="linenum">2212</span></a>                      AND position &gt;= ?
<a name="l2213"><span class="linenum">2213</span></a>                      AND position &lt;= ?
<a name="l2214"><span class="linenum">2214</span></a>                      AND hasvalue = 1&quot;;
<a name="l2215"><span class="linenum">2215</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>, <a class="var it11975" onMouseOver="hilite(11975)" onMouseOut="lolite()" onClick="logVariable('firstitem')" href="../../_variables/firstitem.html">$firstitem</a>, <a class="var it5290" onMouseOver="hilite(5290)" onMouseOut="lolite()" onClick="logVariable('lastitem')" href="../../_variables/lastitem.html">$lastitem</a>);
<a name="l2216"><span class="linenum">2216</span></a>      if (!<a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('feedback_item', <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l2217"><span class="linenum">2217</span></a>  <span class="comment">        //if no values are given so no values can be wrong ;-)</span>
<a name="l2218"><span class="linenum">2218</span></a>          return true;
<a name="l2219"><span class="linenum">2219</span></a>      }
<a name="l2220"><span class="linenum">2220</span></a>  
<a name="l2221"><span class="linenum">2221</span></a>      foreach (<a class="var it5273" onMouseOver="hilite(5273)" onMouseOut="lolite()" onClick="logVariable('feedbackitems')" href="../../_variables/feedbackitems.html">$feedbackitems</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l2222"><span class="linenum">2222</span></a>  <span class="comment">        //get the instance of the item-class</span>
<a name="l2223"><span class="linenum">2223</span></a>          <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a> = <a class="function" onClick="logFunction('feedback_get_item_class')" href="../../_functions/feedback_get_item_class.html" onMouseOver="funcPopup(event,'feedback_get_item_class')">feedback_get_item_class</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>);
<a name="l2224"><span class="linenum">2224</span></a>  
<a name="l2225"><span class="linenum">2225</span></a>  <span class="comment">        //the name of the input field of the completeform is given in a special form:</span>
<a name="l2226"><span class="linenum">2226</span></a>  <span class="comment">        //&lt;item-typ&gt;_&lt;item-id&gt; eg. numeric_234</span>
<a name="l2227"><span class="linenum">2227</span></a>  <span class="comment">        //this is the key to get the value for the correct item</span>
<a name="l2228"><span class="linenum">2228</span></a>          <a class="var it38610" onMouseOver="hilite(38610)" onMouseOut="lolite()" onClick="logVariable('formvalname')" href="../../_variables/formvalname.html">$formvalname</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a> . '_' . <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2229"><span class="linenum">2229</span></a>  
<a name="l2230"><span class="linenum">2230</span></a>          if (<a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('value_is_array')" href="../../_functions/value_is_array.html" onMouseOver="funcPopup(event,'value_is_array')">value_is_array</a>()) {
<a name="l2231"><span class="linenum">2231</span></a>  <span class="comment">            //get the raw value here. It is cleaned after that by the object itself</span>
<a name="l2232"><span class="linenum">2232</span></a>              <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('optional_param_array')" href="../../_functions/optional_param_array.html" onMouseOver="funcPopup(event,'optional_param_array')">optional_param_array</a>(<a class="var it38610" onMouseOver="hilite(38610)" onMouseOut="lolite()" onClick="logVariable('formvalname')" href="../../_variables/formvalname.html">$formvalname</a>, null, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l2233"><span class="linenum">2233</span></a>          } else {
<a name="l2234"><span class="linenum">2234</span></a>  <span class="comment">            //get the raw value here. It is cleaned after that by the object itself</span>
<a name="l2235"><span class="linenum">2235</span></a>              <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>(<a class="var it38610" onMouseOver="hilite(38610)" onMouseOut="lolite()" onClick="logVariable('formvalname')" href="../../_variables/formvalname.html">$formvalname</a>, null, <a class="constant" onClick="logConstant('PARAM_RAW')" href="../../_constants/PARAM_RAW.html" onMouseOver="constPopup(event,'PARAM_RAW')">PARAM_RAW</a>);
<a name="l2236"><span class="linenum">2236</span></a>          }
<a name="l2237"><span class="linenum">2237</span></a>          <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('clean_input_value')" href="../../_functions/clean_input_value.html" onMouseOver="funcPopup(event,'clean_input_value')">clean_input_value</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l2238"><span class="linenum">2238</span></a>  
<a name="l2239"><span class="linenum">2239</span></a>  <span class="comment">        // If the item is not visible due to its dependency so it shouldn't be required.</span>
<a name="l2240"><span class="linenum">2240</span></a>  <span class="comment">        // Many thanks to Pau Ferrer Ocaa.</span>
<a name="l2241"><span class="linenum">2241</span></a>          if (<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('dependitem')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/dependitem.html">dependitem</a> &gt; 0 AND <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('required')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/required.html">required</a> == 1) {
<a name="l2242"><span class="linenum">2242</span></a>              <a class="var it38611" onMouseOver="hilite(38611)" onMouseOut="lolite()" onClick="logVariable('comparevalue')" href="../../_variables/comparevalue.html">$comparevalue</a> = false;
<a name="l2243"><span class="linenum">2243</span></a>              if (<a class="var it5265" onMouseOver="hilite(5265)" onMouseOut="lolite()" onClick="logVariable('feedbackcompletedtmp')" href="../../_variables/feedbackcompletedtmp.html">$feedbackcompletedtmp</a> = <a class="function" onClick="logFunction('feedback_get_current_completed')" href="../../_functions/feedback_get_current_completed.html" onMouseOver="funcPopup(event,'feedback_get_current_completed')">feedback_get_current_completed</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>, true)) {
<a name="l2244"><span class="linenum">2244</span></a>                  <a class="var it38611" onMouseOver="hilite(38611)" onMouseOut="lolite()" onClick="logVariable('comparevalue')" href="../../_variables/comparevalue.html">$comparevalue</a> = <a class="function" onClick="logFunction('feedback_compare_item_value')" href="../../_functions/feedback_compare_item_value.html" onMouseOver="funcPopup(event,'feedback_compare_item_value')">feedback_compare_item_value</a>(<a class="var it5265" onMouseOver="hilite(5265)" onMouseOut="lolite()" onClick="logVariable('feedbackcompletedtmp')" href="../../_variables/feedbackcompletedtmp.html">$feedbackcompletedtmp</a>-&gt;<a onClick="logVariable('id')" class="var it40555" onMouseOver="hilite(40555)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2245"><span class="linenum">2245</span></a>                                                              <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('dependitem')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/dependitem.html">dependitem</a>,
<a name="l2246"><span class="linenum">2246</span></a>                                                              <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('dependvalue')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/dependvalue.html">dependvalue</a>,
<a name="l2247"><span class="linenum">2247</span></a>                                                              true);
<a name="l2248"><span class="linenum">2248</span></a>              }
<a name="l2249"><span class="linenum">2249</span></a>  
<a name="l2250"><span class="linenum">2250</span></a>              if (!<a class="var it38611" onMouseOver="hilite(38611)" onMouseOut="lolite()" onClick="logVariable('comparevalue')" href="../../_variables/comparevalue.html">$comparevalue</a>) {
<a name="l2251"><span class="linenum">2251</span></a>                  <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('required')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/required.html">required</a> = 0; <span class="comment">// Override the required property.</span>
<a name="l2252"><span class="linenum">2252</span></a>              }
<a name="l2253"><span class="linenum">2253</span></a>          }
<a name="l2254"><span class="linenum">2254</span></a>  
<a name="l2255"><span class="linenum">2255</span></a>  <span class="comment">        //check if the value is set</span>
<a name="l2256"><span class="linenum">2256</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) AND <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('required')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/required.html">required</a> == 1) {
<a name="l2257"><span class="linenum">2257</span></a>              return false;
<a name="l2258"><span class="linenum">2258</span></a>          }
<a name="l2259"><span class="linenum">2259</span></a>  
<a name="l2260"><span class="linenum">2260</span></a>  <span class="comment">        //now we let check the value by the item-class</span>
<a name="l2261"><span class="linenum">2261</span></a>          if (!<a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('check_value')" href="../../_functions/check_value.html" onMouseOver="funcPopup(event,'check_value')">check_value</a>(<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>, <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>)) {
<a name="l2262"><span class="linenum">2262</span></a>              return false;
<a name="l2263"><span class="linenum">2263</span></a>          }
<a name="l2264"><span class="linenum">2264</span></a>      }
<a name="l2265"><span class="linenum">2265</span></a>  <span class="comment">    //if no wrong values so we can return true</span>
<a name="l2266"><span class="linenum">2266</span></a>      return true;
<a name="l2267"><span class="linenum">2267</span></a>  }
<a name="l2268"><span class="linenum">2268</span></a>  
<a name="l2269"><span class="linenum">2269</span></a>  <span class="comment">/**</span>
<a name="l2270"><span class="linenum">2270</span></a>  <span class="comment"> * this function create a complete-record and the related value-records.</span>
<a name="l2271"><span class="linenum">2271</span></a>  <span class="comment"> * depending on the $tmp (true/false) the values are saved temporary or permanently</span>
<a name="l2272"><span class="linenum">2272</span></a>  <span class="comment"> *</span>
<a name="l2273"><span class="linenum">2273</span></a>  <span class="comment"> * @global object</span>
<a name="l2274"><span class="linenum">2274</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l2275"><span class="linenum">2275</span></a>  <span class="comment"> * @param int $timemodified</span>
<a name="l2276"><span class="linenum">2276</span></a>  <span class="comment"> * @param boolean $tmp</span>
<a name="l2277"><span class="linenum">2277</span></a>  <span class="comment"> * @param string $guestid a unique identifier to save temporary data</span>
<a name="l2278"><span class="linenum">2278</span></a>  <span class="comment"> * @return mixed false on error or the completedid</span>
<a name="l2279"><span class="linenum">2279</span></a>  <span class="comment"> */</span>
<a name="l2280"><span class="linenum">2280</span></a>  function <a class="function" onClick="logFunction('feedback_create_values')" href="../../_functions/feedback_create_values.html" onMouseOver="funcPopup(event,'feedback_create_values')">feedback_create_values</a>(<a class="var it38609" onMouseOver="hilite(38609)" onMouseOut="lolite()" onClick="logVariable('usrid')" href="../../_variables/usrid.html">$usrid</a>, <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../_variables/timemodified.html">$timemodified</a>, <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a> = false, <a class="var it3829" onMouseOver="hilite(3829)" onMouseOut="lolite()" onClick="logVariable('guestid')" href="../../_variables/guestid.html">$guestid</a> = false) {
<a name="l2281"><span class="linenum">2281</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2282"><span class="linenum">2282</span></a>  
<a name="l2283"><span class="linenum">2283</span></a>      <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('feedbackid', false, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2284"><span class="linenum">2284</span></a>      <a class="var it5250" onMouseOver="hilite(5250)" onMouseOut="lolite()" onClick="logVariable('anonymous_response')" href="../../_variables/anonymous_response.html">$anonymous_response</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('anonymous_response', false, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2285"><span class="linenum">2285</span></a>      <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('courseid', false, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2286"><span class="linenum">2286</span></a>  
<a name="l2287"><span class="linenum">2287</span></a>      <a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a> = <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a> ? 'tmp' : '';
<a name="l2288"><span class="linenum">2288</span></a>  <span class="comment">    //first we create a new completed record</span>
<a name="l2289"><span class="linenum">2289</span></a>      <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a> = new stdClass();
<a name="l2290"><span class="linenum">2290</span></a>      <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('feedback')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>           = <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>;
<a name="l2291"><span class="linenum">2291</span></a>      <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('userid')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>             = <a class="var it38609" onMouseOver="hilite(38609)" onMouseOut="lolite()" onClick="logVariable('usrid')" href="../../_variables/usrid.html">$usrid</a>;
<a name="l2292"><span class="linenum">2292</span></a>      <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('guestid')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/guestid.html">guestid</a>            = <a class="var it3829" onMouseOver="hilite(3829)" onMouseOut="lolite()" onClick="logVariable('guestid')" href="../../_variables/guestid.html">$guestid</a>;
<a name="l2293"><span class="linenum">2293</span></a>      <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('timemodified')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>       = <a class="var it91" onMouseOver="hilite(91)" onMouseOut="lolite()" onClick="logVariable('timemodified')" href="../../_variables/timemodified.html">$timemodified</a>;
<a name="l2294"><span class="linenum">2294</span></a>      <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('anonymous_response')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/anonymous_response.html">anonymous_response</a> = <a class="var it5250" onMouseOver="hilite(5250)" onMouseOut="lolite()" onClick="logVariable('anonymous_response')" href="../../_variables/anonymous_response.html">$anonymous_response</a>;
<a name="l2295"><span class="linenum">2295</span></a>  
<a name="l2296"><span class="linenum">2296</span></a>      <a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('feedback_completed'.<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>, <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>);
<a name="l2297"><span class="linenum">2297</span></a>  
<a name="l2298"><span class="linenum">2298</span></a>      <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_completed'.<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>, array('id'=&gt;<a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a>));
<a name="l2299"><span class="linenum">2299</span></a>  
<a name="l2300"><span class="linenum">2300</span></a>  <span class="comment">    //the keys are in the form like abc_xxx</span>
<a name="l2301"><span class="linenum">2301</span></a>  <span class="comment">    //with explode we make an array with(abc, xxx) and (abc=typ und xxx=itemnr)</span>
<a name="l2302"><span class="linenum">2302</span></a>  
<a name="l2303"><span class="linenum">2303</span></a>  <span class="comment">    //get the items of the feedback</span>
<a name="l2304"><span class="linenum">2304</span></a>      if (!<a class="var it38605" onMouseOver="hilite(38605)" onMouseOut="lolite()" onClick="logVariable('allitems')" href="../../_variables/allitems.html">$allitems</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_item', array('feedback'=&gt;<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('feedback')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>))) {
<a name="l2305"><span class="linenum">2305</span></a>          return false;
<a name="l2306"><span class="linenum">2306</span></a>      }
<a name="l2307"><span class="linenum">2307</span></a>      foreach (<a class="var it38605" onMouseOver="hilite(38605)" onMouseOut="lolite()" onClick="logVariable('allitems')" href="../../_variables/allitems.html">$allitems</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l2308"><span class="linenum">2308</span></a>          if (!<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('hasvalue')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/hasvalue.html">hasvalue</a>) {
<a name="l2309"><span class="linenum">2309</span></a>              continue;
<a name="l2310"><span class="linenum">2310</span></a>          }
<a name="l2311"><span class="linenum">2311</span></a>  <span class="comment">        //get the class of item-typ</span>
<a name="l2312"><span class="linenum">2312</span></a>          <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a> = <a class="function" onClick="logFunction('feedback_get_item_class')" href="../../_functions/feedback_get_item_class.html" onMouseOver="funcPopup(event,'feedback_get_item_class')">feedback_get_item_class</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>);
<a name="l2313"><span class="linenum">2313</span></a>  
<a name="l2314"><span class="linenum">2314</span></a>          <a class="var it5566" onMouseOver="hilite(5566)" onMouseOut="lolite()" onClick="logVariable('keyname')" href="../../_variables/keyname.html">$keyname</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>.'_'.<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2315"><span class="linenum">2315</span></a>  
<a name="l2316"><span class="linenum">2316</span></a>          if (<a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('value_is_array')" href="../../_functions/value_is_array.html" onMouseOver="funcPopup(event,'value_is_array')">value_is_array</a>()) {
<a name="l2317"><span class="linenum">2317</span></a>              <a class="var it34616" onMouseOver="hilite(34616)" onMouseOut="lolite()" onClick="logVariable('itemvalue')" href="../../_variables/itemvalue.html">$itemvalue</a> = <a class="function" onClick="logFunction('optional_param_array')" href="../../_functions/optional_param_array.html" onMouseOver="funcPopup(event,'optional_param_array')">optional_param_array</a>(<a class="var it5566" onMouseOver="hilite(5566)" onMouseOut="lolite()" onClick="logVariable('keyname')" href="../../_variables/keyname.html">$keyname</a>, null, <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('value_type')" href="../../_functions/value_type.html" onMouseOver="funcPopup(event,'value_type')">value_type</a>());
<a name="l2318"><span class="linenum">2318</span></a>          } else {
<a name="l2319"><span class="linenum">2319</span></a>              <a class="var it34616" onMouseOver="hilite(34616)" onMouseOut="lolite()" onClick="logVariable('itemvalue')" href="../../_variables/itemvalue.html">$itemvalue</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>(<a class="var it5566" onMouseOver="hilite(5566)" onMouseOut="lolite()" onClick="logVariable('keyname')" href="../../_variables/keyname.html">$keyname</a>, null, <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('value_type')" href="../../_functions/value_type.html" onMouseOver="funcPopup(event,'value_type')">value_type</a>());
<a name="l2320"><span class="linenum">2320</span></a>          }
<a name="l2321"><span class="linenum">2321</span></a>  
<a name="l2322"><span class="linenum">2322</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it34616" onMouseOver="hilite(34616)" onMouseOut="lolite()" onClick="logVariable('itemvalue')" href="../../_variables/itemvalue.html">$itemvalue</a>)) {
<a name="l2323"><span class="linenum">2323</span></a>              continue;
<a name="l2324"><span class="linenum">2324</span></a>          }
<a name="l2325"><span class="linenum">2325</span></a>  
<a name="l2326"><span class="linenum">2326</span></a>          <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = new stdClass();
<a name="l2327"><span class="linenum">2327</span></a>          <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('item')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/item.html">item</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2328"><span class="linenum">2328</span></a>          <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('completed')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/completed.html">completed</a> = <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('id')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2329"><span class="linenum">2329</span></a>          <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('course_id')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/course_id.html">course_id</a> = <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>;
<a name="l2330"><span class="linenum">2330</span></a>  
<a name="l2331"><span class="linenum">2331</span></a>  <span class="comment">        //the kind of values can be absolutely different</span>
<a name="l2332"><span class="linenum">2332</span></a>  <span class="comment">        //so we run create_value directly by the item-class</span>
<a name="l2333"><span class="linenum">2333</span></a>          <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('value')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/value.html">value</a> = <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('create_value')" href="../../_functions/create_value.html" onMouseOver="funcPopup(event,'create_value')">create_value</a>(<a class="var it34616" onMouseOver="hilite(34616)" onMouseOut="lolite()" onClick="logVariable('itemvalue')" href="../../_variables/itemvalue.html">$itemvalue</a>);
<a name="l2334"><span class="linenum">2334</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('feedback_value'.<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>, <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>);
<a name="l2335"><span class="linenum">2335</span></a>      }
<a name="l2336"><span class="linenum">2336</span></a>      return <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('id')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2337"><span class="linenum">2337</span></a>  }
<a name="l2338"><span class="linenum">2338</span></a>  
<a name="l2339"><span class="linenum">2339</span></a>  <span class="comment">/**</span>
<a name="l2340"><span class="linenum">2340</span></a>  <span class="comment"> * this function updates a complete-record and the related value-records.</span>
<a name="l2341"><span class="linenum">2341</span></a>  <span class="comment"> * depending on the $tmp (true/false) the values are saved temporary or permanently</span>
<a name="l2342"><span class="linenum">2342</span></a>  <span class="comment"> *</span>
<a name="l2343"><span class="linenum">2343</span></a>  <span class="comment"> * @global object</span>
<a name="l2344"><span class="linenum">2344</span></a>  <span class="comment"> * @param object $completed</span>
<a name="l2345"><span class="linenum">2345</span></a>  <span class="comment"> * @param boolean $tmp</span>
<a name="l2346"><span class="linenum">2346</span></a>  <span class="comment"> * @return int the completedid</span>
<a name="l2347"><span class="linenum">2347</span></a>  <span class="comment"> */</span>
<a name="l2348"><span class="linenum">2348</span></a>  function <a class="function" onClick="logFunction('feedback_update_values')" href="../../_functions/feedback_update_values.html" onMouseOver="funcPopup(event,'feedback_update_values')">feedback_update_values</a>(<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>, <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a> = false) {
<a name="l2349"><span class="linenum">2349</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2350"><span class="linenum">2350</span></a>  
<a name="l2351"><span class="linenum">2351</span></a>      <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('courseid', false, <a class="constant" onClick="logConstant('PARAM_INT')" href="../../_constants/PARAM_INT.html" onMouseOver="constPopup(event,'PARAM_INT')">PARAM_INT</a>);
<a name="l2352"><span class="linenum">2352</span></a>      <a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a> = <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a> ? 'tmp' : '';
<a name="l2353"><span class="linenum">2353</span></a>  
<a name="l2354"><span class="linenum">2354</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('feedback_completed'.<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>, <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>);
<a name="l2355"><span class="linenum">2355</span></a>  <span class="comment">    //get the values of this completed</span>
<a name="l2356"><span class="linenum">2356</span></a>      <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_value'.<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>, array('completed'=&gt;<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('id')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2357"><span class="linenum">2357</span></a>  
<a name="l2358"><span class="linenum">2358</span></a>  <span class="comment">    //get the items of the feedback</span>
<a name="l2359"><span class="linenum">2359</span></a>      if (!<a class="var it38605" onMouseOver="hilite(38605)" onMouseOut="lolite()" onClick="logVariable('allitems')" href="../../_variables/allitems.html">$allitems</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_item', array('feedback'=&gt;<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('feedback')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>))) {
<a name="l2360"><span class="linenum">2360</span></a>          return false;
<a name="l2361"><span class="linenum">2361</span></a>      }
<a name="l2362"><span class="linenum">2362</span></a>      foreach (<a class="var it38605" onMouseOver="hilite(38605)" onMouseOut="lolite()" onClick="logVariable('allitems')" href="../../_variables/allitems.html">$allitems</a> as <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>) {
<a name="l2363"><span class="linenum">2363</span></a>          if (!<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('hasvalue')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/hasvalue.html">hasvalue</a>) {
<a name="l2364"><span class="linenum">2364</span></a>              continue;
<a name="l2365"><span class="linenum">2365</span></a>          }
<a name="l2366"><span class="linenum">2366</span></a>  <span class="comment">        //get the class of item-typ</span>
<a name="l2367"><span class="linenum">2367</span></a>          <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a> = <a class="function" onClick="logFunction('feedback_get_item_class')" href="../../_functions/feedback_get_item_class.html" onMouseOver="funcPopup(event,'feedback_get_item_class')">feedback_get_item_class</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>);
<a name="l2368"><span class="linenum">2368</span></a>  
<a name="l2369"><span class="linenum">2369</span></a>          <a class="var it5566" onMouseOver="hilite(5566)" onMouseOut="lolite()" onClick="logVariable('keyname')" href="../../_variables/keyname.html">$keyname</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('typ')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/typ.html">typ</a>.'_'.<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2370"><span class="linenum">2370</span></a>  
<a name="l2371"><span class="linenum">2371</span></a>          if (<a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('value_is_array')" href="../../_functions/value_is_array.html" onMouseOver="funcPopup(event,'value_is_array')">value_is_array</a>()) {
<a name="l2372"><span class="linenum">2372</span></a>              <a class="var it34616" onMouseOver="hilite(34616)" onMouseOut="lolite()" onClick="logVariable('itemvalue')" href="../../_variables/itemvalue.html">$itemvalue</a> = <a class="function" onClick="logFunction('optional_param_array')" href="../../_functions/optional_param_array.html" onMouseOver="funcPopup(event,'optional_param_array')">optional_param_array</a>(<a class="var it5566" onMouseOver="hilite(5566)" onMouseOut="lolite()" onClick="logVariable('keyname')" href="../../_variables/keyname.html">$keyname</a>, null, <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('value_type')" href="../../_functions/value_type.html" onMouseOver="funcPopup(event,'value_type')">value_type</a>());
<a name="l2373"><span class="linenum">2373</span></a>          } else {
<a name="l2374"><span class="linenum">2374</span></a>              <a class="var it34616" onMouseOver="hilite(34616)" onMouseOut="lolite()" onClick="logVariable('itemvalue')" href="../../_variables/itemvalue.html">$itemvalue</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>(<a class="var it5566" onMouseOver="hilite(5566)" onMouseOut="lolite()" onClick="logVariable('keyname')" href="../../_variables/keyname.html">$keyname</a>, null, <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('value_type')" href="../../_functions/value_type.html" onMouseOver="funcPopup(event,'value_type')">value_type</a>());
<a name="l2375"><span class="linenum">2375</span></a>          }
<a name="l2376"><span class="linenum">2376</span></a>  
<a name="l2377"><span class="linenum">2377</span></a>  <span class="comment">        //is the itemvalue set (could be a subset of items because pagebreak)?</span>
<a name="l2378"><span class="linenum">2378</span></a>          if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it34616" onMouseOver="hilite(34616)" onMouseOut="lolite()" onClick="logVariable('itemvalue')" href="../../_variables/itemvalue.html">$itemvalue</a>)) {
<a name="l2379"><span class="linenum">2379</span></a>              continue;
<a name="l2380"><span class="linenum">2380</span></a>          }
<a name="l2381"><span class="linenum">2381</span></a>  
<a name="l2382"><span class="linenum">2382</span></a>          <a class="var it7621" onMouseOver="hilite(7621)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../../_variables/newvalue.html">$newvalue</a> = new stdClass();
<a name="l2383"><span class="linenum">2383</span></a>          <a class="var it7621" onMouseOver="hilite(7621)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../../_variables/newvalue.html">$newvalue</a>-&gt;<a onClick="logVariable('item')" class="var it40572" onMouseOver="hilite(40572)" onMouseOut="lolite()" href="../../_variables/item.html">item</a> = <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2384"><span class="linenum">2384</span></a>          <a class="var it7621" onMouseOver="hilite(7621)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../../_variables/newvalue.html">$newvalue</a>-&gt;<a onClick="logVariable('completed')" class="var it40572" onMouseOver="hilite(40572)" onMouseOut="lolite()" href="../../_variables/completed.html">completed</a> = <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('id')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2385"><span class="linenum">2385</span></a>          <a class="var it7621" onMouseOver="hilite(7621)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../../_variables/newvalue.html">$newvalue</a>-&gt;<a onClick="logVariable('course_id')" class="var it40572" onMouseOver="hilite(40572)" onMouseOut="lolite()" href="../../_variables/course_id.html">course_id</a> = <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>;
<a name="l2386"><span class="linenum">2386</span></a>  
<a name="l2387"><span class="linenum">2387</span></a>  <span class="comment">        //the kind of values can be absolutely different</span>
<a name="l2388"><span class="linenum">2388</span></a>  <span class="comment">        //so we run create_value directly by the item-class</span>
<a name="l2389"><span class="linenum">2389</span></a>          <a class="var it7621" onMouseOver="hilite(7621)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../../_variables/newvalue.html">$newvalue</a>-&gt;<a onClick="logVariable('value')" class="var it40572" onMouseOver="hilite(40572)" onMouseOut="lolite()" href="../../_variables/value.html">value</a> = <a class="var it1053" onMouseOver="hilite(1053)" onMouseOut="lolite()" onClick="logVariable('itemobj')" href="../../_variables/itemobj.html">$itemobj</a>-&gt;<a class="function" onClick="logFunction('create_value')" href="../../_functions/create_value.html" onMouseOver="funcPopup(event,'create_value')">create_value</a>(<a class="var it34616" onMouseOver="hilite(34616)" onMouseOut="lolite()" onClick="logVariable('itemvalue')" href="../../_variables/itemvalue.html">$itemvalue</a>);
<a name="l2390"><span class="linenum">2390</span></a>  
<a name="l2391"><span class="linenum">2391</span></a>  <span class="comment">        //check, if we have to create or update the value</span>
<a name="l2392"><span class="linenum">2392</span></a>          <a class="var it18789" onMouseOver="hilite(18789)" onMouseOut="lolite()" onClick="logVariable('exist')" href="../../_variables/exist.html">$exist</a> = false;
<a name="l2393"><span class="linenum">2393</span></a>          foreach (<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> as <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>) {
<a name="l2394"><span class="linenum">2394</span></a>              if (<a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('item')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/item.html">item</a> == <a class="var it7621" onMouseOver="hilite(7621)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../../_variables/newvalue.html">$newvalue</a>-&gt;<a onClick="logVariable('item')" class="var it40572" onMouseOver="hilite(40572)" onMouseOut="lolite()" href="../../_variables/item.html">item</a>) {
<a name="l2395"><span class="linenum">2395</span></a>                  <a class="var it7621" onMouseOver="hilite(7621)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../../_variables/newvalue.html">$newvalue</a>-&gt;<a onClick="logVariable('id')" class="var it40572" onMouseOver="hilite(40572)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>-&gt;<a onClick="logVariable('id')" class="var it39477" onMouseOver="hilite(39477)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2396"><span class="linenum">2396</span></a>                  <a class="var it18789" onMouseOver="hilite(18789)" onMouseOut="lolite()" onClick="logVariable('exist')" href="../../_variables/exist.html">$exist</a> = true;
<a name="l2397"><span class="linenum">2397</span></a>                  break;
<a name="l2398"><span class="linenum">2398</span></a>              }
<a name="l2399"><span class="linenum">2399</span></a>          }
<a name="l2400"><span class="linenum">2400</span></a>          if (<a class="var it18789" onMouseOver="hilite(18789)" onMouseOut="lolite()" onClick="logVariable('exist')" href="../../_variables/exist.html">$exist</a>) {
<a name="l2401"><span class="linenum">2401</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('feedback_value'.<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>, <a class="var it7621" onMouseOver="hilite(7621)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../../_variables/newvalue.html">$newvalue</a>);
<a name="l2402"><span class="linenum">2402</span></a>          } else {
<a name="l2403"><span class="linenum">2403</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('feedback_value'.<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>, <a class="var it7621" onMouseOver="hilite(7621)" onMouseOut="lolite()" onClick="logVariable('newvalue')" href="../../_variables/newvalue.html">$newvalue</a>);
<a name="l2404"><span class="linenum">2404</span></a>          }
<a name="l2405"><span class="linenum">2405</span></a>      }
<a name="l2406"><span class="linenum">2406</span></a>  
<a name="l2407"><span class="linenum">2407</span></a>      return <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('id')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2408"><span class="linenum">2408</span></a>  }
<a name="l2409"><span class="linenum">2409</span></a>  
<a name="l2410"><span class="linenum">2410</span></a>  <span class="comment">/**</span>
<a name="l2411"><span class="linenum">2411</span></a>  <span class="comment"> * get the values of an item depending on the given groupid.</span>
<a name="l2412"><span class="linenum">2412</span></a>  <span class="comment"> * if the feedback is anonymous so the values are shuffled</span>
<a name="l2413"><span class="linenum">2413</span></a>  <span class="comment"> *</span>
<a name="l2414"><span class="linenum">2414</span></a>  <span class="comment"> * @global object</span>
<a name="l2415"><span class="linenum">2415</span></a>  <span class="comment"> * @global object</span>
<a name="l2416"><span class="linenum">2416</span></a>  <span class="comment"> * @param object $item</span>
<a name="l2417"><span class="linenum">2417</span></a>  <span class="comment"> * @param int $groupid</span>
<a name="l2418"><span class="linenum">2418</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l2419"><span class="linenum">2419</span></a>  <span class="comment"> * @param bool $ignore_empty if this is set true so empty values are not delivered</span>
<a name="l2420"><span class="linenum">2420</span></a>  <span class="comment"> * @return array the value-records</span>
<a name="l2421"><span class="linenum">2421</span></a>  <span class="comment"> */</span>
<a name="l2422"><span class="linenum">2422</span></a>  function <a class="function" onClick="logFunction('feedback_get_group_values')" href="../../_functions/feedback_get_group_values.html" onMouseOver="funcPopup(event,'feedback_get_group_values')">feedback_get_group_values</a>(<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>,
<a name="l2423"><span class="linenum">2423</span></a>                                     <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = false,
<a name="l2424"><span class="linenum">2424</span></a>                                     <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a> = false,
<a name="l2425"><span class="linenum">2425</span></a>                                     <a class="var it38612" onMouseOver="hilite(38612)" onMouseOut="lolite()" onClick="logVariable('ignore_empty')" href="../../_variables/ignore_empty.html">$ignore_empty</a> = false) {
<a name="l2426"><span class="linenum">2426</span></a>  
<a name="l2427"><span class="linenum">2427</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2428"><span class="linenum">2428</span></a>  
<a name="l2429"><span class="linenum">2429</span></a>  <span class="comment">    //if the groupid is given?</span>
<a name="l2430"><span class="linenum">2430</span></a>      if (<a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) &gt; 0) {
<a name="l2431"><span class="linenum">2431</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l2432"><span class="linenum">2432</span></a>          if (<a class="var it38612" onMouseOver="hilite(38612)" onMouseOut="lolite()" onClick="logVariable('ignore_empty')" href="../../_variables/ignore_empty.html">$ignore_empty</a>) {
<a name="l2433"><span class="linenum">2433</span></a>              <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_compare_text')" href="../../_functions/sql_compare_text.html" onMouseOver="funcPopup(event,'sql_compare_text')">sql_compare_text</a>('fbv.value');
<a name="l2434"><span class="linenum">2434</span></a>              <a class="var it38613" onMouseOver="hilite(38613)" onMouseOut="lolite()" onClick="logVariable('ignore_empty_select')" href="../../_variables/ignore_empty_select.html">$ignore_empty_select</a> = &quot;AND <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> != :emptyvalue AND <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> != :zerovalue&quot;;
<a name="l2435"><span class="linenum">2435</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> += array('emptyvalue' =&gt; '', 'zerovalue' =&gt; '0');
<a name="l2436"><span class="linenum">2436</span></a>          } else {
<a name="l2437"><span class="linenum">2437</span></a>              <a class="var it38613" onMouseOver="hilite(38613)" onMouseOut="lolite()" onClick="logVariable('ignore_empty_select')" href="../../_variables/ignore_empty_select.html">$ignore_empty_select</a> = &quot;&quot;;
<a name="l2438"><span class="linenum">2438</span></a>          }
<a name="l2439"><span class="linenum">2439</span></a>  
<a name="l2440"><span class="linenum">2440</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = 'SELECT fbv .  *
<a name="l2441"><span class="linenum">2441</span></a>                      FROM {feedback_value} fbv, {feedback_completed} fbc, {groups_members} gm
<a name="l2442"><span class="linenum">2442</span></a>                     WHERE fbv.item = :itemid
<a name="l2443"><span class="linenum">2443</span></a>                           AND fbv.completed = fbc.id
<a name="l2444"><span class="linenum">2444</span></a>                           AND fbc.userid = gm.userid
<a name="l2445"><span class="linenum">2445</span></a>                           '.<a class="var it38613" onMouseOver="hilite(38613)" onMouseOut="lolite()" onClick="logVariable('ignore_empty_select')" href="../../_variables/ignore_empty_select.html">$ignore_empty_select</a>.'
<a name="l2446"><span class="linenum">2446</span></a>                           AND gm.groupid = :groupid
<a name="l2447"><span class="linenum">2447</span></a>                  ORDER BY fbc.timemodified';
<a name="l2448"><span class="linenum">2448</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> += array('itemid' =&gt; <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'groupid' =&gt; <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>);
<a name="l2449"><span class="linenum">2449</span></a>          <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2450"><span class="linenum">2450</span></a>  
<a name="l2451"><span class="linenum">2451</span></a>      } else {
<a name="l2452"><span class="linenum">2452</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l2453"><span class="linenum">2453</span></a>          if (<a class="var it38612" onMouseOver="hilite(38612)" onMouseOut="lolite()" onClick="logVariable('ignore_empty')" href="../../_variables/ignore_empty.html">$ignore_empty</a>) {
<a name="l2454"><span class="linenum">2454</span></a>              <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_compare_text')" href="../../_functions/sql_compare_text.html" onMouseOver="funcPopup(event,'sql_compare_text')">sql_compare_text</a>('value');
<a name="l2455"><span class="linenum">2455</span></a>              <a class="var it38613" onMouseOver="hilite(38613)" onMouseOut="lolite()" onClick="logVariable('ignore_empty_select')" href="../../_variables/ignore_empty_select.html">$ignore_empty_select</a> = &quot;AND <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> != :emptyvalue AND <a class="var it35" onMouseOver="hilite(35)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> != :zerovalue&quot;;
<a name="l2456"><span class="linenum">2456</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> += array('emptyvalue' =&gt; '', 'zerovalue' =&gt; '0');
<a name="l2457"><span class="linenum">2457</span></a>          } else {
<a name="l2458"><span class="linenum">2458</span></a>              <a class="var it38613" onMouseOver="hilite(38613)" onMouseOut="lolite()" onClick="logVariable('ignore_empty_select')" href="../../_variables/ignore_empty_select.html">$ignore_empty_select</a> = &quot;&quot;;
<a name="l2459"><span class="linenum">2459</span></a>          }
<a name="l2460"><span class="linenum">2460</span></a>  
<a name="l2461"><span class="linenum">2461</span></a>          if (<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l2462"><span class="linenum">2462</span></a>              <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a> = &quot;item = :itemid AND course_id = :courseid &quot;.<a class="var it38613" onMouseOver="hilite(38613)" onMouseOut="lolite()" onClick="logVariable('ignore_empty_select')" href="../../_variables/ignore_empty_select.html">$ignore_empty_select</a>;
<a name="l2463"><span class="linenum">2463</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> += array('itemid' =&gt; <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'courseid' =&gt; <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>);
<a name="l2464"><span class="linenum">2464</span></a>              <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('feedback_value', <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2465"><span class="linenum">2465</span></a>          } else {
<a name="l2466"><span class="linenum">2466</span></a>              <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a> = &quot;item = :itemid &quot;.<a class="var it38613" onMouseOver="hilite(38613)" onMouseOut="lolite()" onClick="logVariable('ignore_empty_select')" href="../../_variables/ignore_empty_select.html">$ignore_empty_select</a>;
<a name="l2467"><span class="linenum">2467</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> += array('itemid' =&gt; <a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('id')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2468"><span class="linenum">2468</span></a>              <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('feedback_value', <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2469"><span class="linenum">2469</span></a>          }
<a name="l2470"><span class="linenum">2470</span></a>      }
<a name="l2471"><span class="linenum">2471</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('id'=&gt;<a class="var it53" onMouseOver="hilite(53)" onMouseOut="lolite()" onClick="logVariable('item')" href="../../_variables/item.html">$item</a>-&gt;<a onClick="logVariable('feedback')" class="var it39599" onMouseOver="hilite(39599)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>);
<a name="l2472"><span class="linenum">2472</span></a>      if (<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field')" href="../../_functions/get_field.html" onMouseOver="funcPopup(event,'get_field')">get_field</a>('feedback', 'anonymous', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) == <a class="constant" onClick="logConstant('FEEDBACK_ANONYMOUS_YES')" href="../../_constants/FEEDBACK_ANONYMOUS_YES.html" onMouseOver="constPopup(event,'FEEDBACK_ANONYMOUS_YES')">FEEDBACK_ANONYMOUS_YES</a>) {
<a name="l2473"><span class="linenum">2473</span></a>          if (<a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a>)) {
<a name="l2474"><span class="linenum">2474</span></a>              <a class="phpfunction" onClick="logFunction('shuffle')" href="../../_functions/shuffle.html" onMouseOver="phpfuncPopup(event,'shuffle')">shuffle</a>(<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a>);
<a name="l2475"><span class="linenum">2475</span></a>          }
<a name="l2476"><span class="linenum">2476</span></a>      }
<a name="l2477"><span class="linenum">2477</span></a>      return <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a>;
<a name="l2478"><span class="linenum">2478</span></a>  }
<a name="l2479"><span class="linenum">2479</span></a>  
<a name="l2480"><span class="linenum">2480</span></a>  <span class="comment">/**</span>
<a name="l2481"><span class="linenum">2481</span></a>  <span class="comment"> * check for multiple_submit = false.</span>
<a name="l2482"><span class="linenum">2482</span></a>  <span class="comment"> * if the feedback is global so the courseid must be given</span>
<a name="l2483"><span class="linenum">2483</span></a>  <span class="comment"> *</span>
<a name="l2484"><span class="linenum">2484</span></a>  <span class="comment"> * @global object</span>
<a name="l2485"><span class="linenum">2485</span></a>  <span class="comment"> * @global object</span>
<a name="l2486"><span class="linenum">2486</span></a>  <span class="comment"> * @param int $feedbackid</span>
<a name="l2487"><span class="linenum">2487</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l2488"><span class="linenum">2488</span></a>  <span class="comment"> * @return boolean true if the feedback already is submitted otherwise false</span>
<a name="l2489"><span class="linenum">2489</span></a>  <span class="comment"> */</span>
<a name="l2490"><span class="linenum">2490</span></a>  function <a class="function" onClick="logFunction('feedback_is_already_submitted')" href="../../_functions/feedback_is_already_submitted.html" onMouseOver="funcPopup(event,'feedback_is_already_submitted')">feedback_is_already_submitted</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a> = false) {
<a name="l2491"><span class="linenum">2491</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2492"><span class="linenum">2492</span></a>  
<a name="l2493"><span class="linenum">2493</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('userid'=&gt;<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'feedback'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>);
<a name="l2494"><span class="linenum">2494</span></a>      if (!<a class="var it6746" onMouseOver="hilite(6746)" onMouseOut="lolite()" onClick="logVariable('trackings')" href="../../_variables/trackings.html">$trackings</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_menu')" href="../../_functions/get_records_menu.html" onMouseOver="funcPopup(event,'get_records_menu')">get_records_menu</a>('feedback_tracking', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, '', 'id, completed')) {
<a name="l2495"><span class="linenum">2495</span></a>          return false;
<a name="l2496"><span class="linenum">2496</span></a>      }
<a name="l2497"><span class="linenum">2497</span></a>  
<a name="l2498"><span class="linenum">2498</span></a>      if (<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l2499"><span class="linenum">2499</span></a>          <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a> = 'completed IN ('.<a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(',', <a class="var it6746" onMouseOver="hilite(6746)" onMouseOut="lolite()" onClick="logVariable('trackings')" href="../../_variables/trackings.html">$trackings</a>).') AND course_id = ?';
<a name="l2500"><span class="linenum">2500</span></a>          if (!<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_select')" href="../../_functions/get_records_select.html" onMouseOver="funcPopup(event,'get_records_select')">get_records_select</a>('feedback_value', <a class="var it2282" onMouseOver="hilite(2282)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>, array(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>))) {
<a name="l2501"><span class="linenum">2501</span></a>              return false;
<a name="l2502"><span class="linenum">2502</span></a>          }
<a name="l2503"><span class="linenum">2503</span></a>      }
<a name="l2504"><span class="linenum">2504</span></a>  
<a name="l2505"><span class="linenum">2505</span></a>      return true;
<a name="l2506"><span class="linenum">2506</span></a>  }
<a name="l2507"><span class="linenum">2507</span></a>  
<a name="l2508"><span class="linenum">2508</span></a>  <span class="comment">/**</span>
<a name="l2509"><span class="linenum">2509</span></a>  <span class="comment"> * if the completion of a feedback will be continued eg.</span>
<a name="l2510"><span class="linenum">2510</span></a>  <span class="comment"> * by pagebreak or by multiple submit so the complete must be found.</span>
<a name="l2511"><span class="linenum">2511</span></a>  <span class="comment"> * if the param $tmp is set true so all things are related to temporary completeds</span>
<a name="l2512"><span class="linenum">2512</span></a>  <span class="comment"> *</span>
<a name="l2513"><span class="linenum">2513</span></a>  <span class="comment"> * @global object</span>
<a name="l2514"><span class="linenum">2514</span></a>  <span class="comment"> * @global object</span>
<a name="l2515"><span class="linenum">2515</span></a>  <span class="comment"> * @global object</span>
<a name="l2516"><span class="linenum">2516</span></a>  <span class="comment"> * @param int $feedbackid</span>
<a name="l2517"><span class="linenum">2517</span></a>  <span class="comment"> * @param boolean $tmp</span>
<a name="l2518"><span class="linenum">2518</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l2519"><span class="linenum">2519</span></a>  <span class="comment"> * @param string $guestid</span>
<a name="l2520"><span class="linenum">2520</span></a>  <span class="comment"> * @return int the id of the found completed</span>
<a name="l2521"><span class="linenum">2521</span></a>  <span class="comment"> */</span>
<a name="l2522"><span class="linenum">2522</span></a>  function <a class="function" onClick="logFunction('feedback_get_current_completed')" href="../../_functions/feedback_get_current_completed.html" onMouseOver="funcPopup(event,'feedback_get_current_completed')">feedback_get_current_completed</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>,
<a name="l2523"><span class="linenum">2523</span></a>                                          <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a> = false,
<a name="l2524"><span class="linenum">2524</span></a>                                          <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a> = false,
<a name="l2525"><span class="linenum">2525</span></a>                                          <a class="var it3829" onMouseOver="hilite(3829)" onMouseOut="lolite()" onClick="logVariable('guestid')" href="../../_variables/guestid.html">$guestid</a> = false) {
<a name="l2526"><span class="linenum">2526</span></a>  
<a name="l2527"><span class="linenum">2527</span></a>      global <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2528"><span class="linenum">2528</span></a>  
<a name="l2529"><span class="linenum">2529</span></a>      <a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a> = <a class="var it3524" onMouseOver="hilite(3524)" onMouseOut="lolite()" onClick="logVariable('tmp')" href="../../_variables/tmp.html">$tmp</a> ? 'tmp' : '';
<a name="l2530"><span class="linenum">2530</span></a>  
<a name="l2531"><span class="linenum">2531</span></a>      if (!<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l2532"><span class="linenum">2532</span></a>          if (<a class="var it3829" onMouseOver="hilite(3829)" onMouseOut="lolite()" onClick="logVariable('guestid')" href="../../_variables/guestid.html">$guestid</a>) {
<a name="l2533"><span class="linenum">2533</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('feedback'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>, 'guestid'=&gt;<a class="var it3829" onMouseOver="hilite(3829)" onMouseOut="lolite()" onClick="logVariable('guestid')" href="../../_variables/guestid.html">$guestid</a>);
<a name="l2534"><span class="linenum">2534</span></a>              return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_completed'.<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2535"><span class="linenum">2535</span></a>          } else {
<a name="l2536"><span class="linenum">2536</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('feedback'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>, 'userid'=&gt;<a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2537"><span class="linenum">2537</span></a>              return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_completed'.<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2538"><span class="linenum">2538</span></a>          }
<a name="l2539"><span class="linenum">2539</span></a>      }
<a name="l2540"><span class="linenum">2540</span></a>  
<a name="l2541"><span class="linenum">2541</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l2542"><span class="linenum">2542</span></a>  
<a name="l2543"><span class="linenum">2543</span></a>      if (<a class="var it3829" onMouseOver="hilite(3829)" onMouseOut="lolite()" onClick="logVariable('guestid')" href="../../_variables/guestid.html">$guestid</a>) {
<a name="l2544"><span class="linenum">2544</span></a>          <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a> = &quot;AND fc.guestid = :guestid&quot;;
<a name="l2545"><span class="linenum">2545</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['guestid'] = <a class="var it3829" onMouseOver="hilite(3829)" onMouseOut="lolite()" onClick="logVariable('guestid')" href="../../_variables/guestid.html">$guestid</a>;
<a name="l2546"><span class="linenum">2546</span></a>      } else {
<a name="l2547"><span class="linenum">2547</span></a>          <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a> = &quot;AND fc.userid = :userid&quot;;
<a name="l2548"><span class="linenum">2548</span></a>          <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['userid'] = <a class="var it9" onMouseOver="hilite(9)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it39490" onMouseOver="hilite(39490)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2549"><span class="linenum">2549</span></a>      }
<a name="l2550"><span class="linenum">2550</span></a>  <span class="comment">    //if courseid is set the feedback is global.</span>
<a name="l2551"><span class="linenum">2551</span></a>  <span class="comment">    //there can be more than one completed on one feedback</span>
<a name="l2552"><span class="linenum">2552</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> =  &quot;SELECT DISTINCT fc.*
<a name="l2553"><span class="linenum">2553</span></a>                 FROM {feedback_value{<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>}} fv, {feedback_completed{<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>}} fc
<a name="l2554"><span class="linenum">2554</span></a>                WHERE fv.course_id = :courseid
<a name="l2555"><span class="linenum">2555</span></a>                      AND fv.completed = fc.id
<a name="l2556"><span class="linenum">2556</span></a>                      <a class="var it7067" onMouseOver="hilite(7067)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a>
<a name="l2557"><span class="linenum">2557</span></a>                      AND fc.feedback = :feedbackid&quot;;
<a name="l2558"><span class="linenum">2558</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['courseid']   = <a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>);
<a name="l2559"><span class="linenum">2559</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['feedbackid'] = <a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>;
<a name="l2560"><span class="linenum">2560</span></a>  
<a name="l2561"><span class="linenum">2561</span></a>      if (!<a class="var it38614" onMouseOver="hilite(38614)" onMouseOut="lolite()" onClick="logVariable('sqlresult')" href="../../_variables/sqlresult.html">$sqlresult</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l2562"><span class="linenum">2562</span></a>          return false;
<a name="l2563"><span class="linenum">2563</span></a>      }
<a name="l2564"><span class="linenum">2564</span></a>      foreach (<a class="var it38614" onMouseOver="hilite(38614)" onMouseOut="lolite()" onClick="logVariable('sqlresult')" href="../../_variables/sqlresult.html">$sqlresult</a> as <a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>) {
<a name="l2565"><span class="linenum">2565</span></a>          return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_completed'.<a class="var it13918" onMouseOver="hilite(13918)" onMouseOut="lolite()" onClick="logVariable('tmpstr')" href="../../_variables/tmpstr.html">$tmpstr</a>, array('id'=&gt;<a class="var it746" onMouseOver="hilite(746)" onMouseOut="lolite()" onClick="logVariable('r')" href="../../_variables/r.html">$r</a>-&gt;<a onClick="logVariable('id')" class="var it39453" onMouseOver="hilite(39453)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2566"><span class="linenum">2566</span></a>      }
<a name="l2567"><span class="linenum">2567</span></a>  }
<a name="l2568"><span class="linenum">2568</span></a>  
<a name="l2569"><span class="linenum">2569</span></a>  <span class="comment">/**</span>
<a name="l2570"><span class="linenum">2570</span></a>  <span class="comment"> * get the completeds depending on the given groupid.</span>
<a name="l2571"><span class="linenum">2571</span></a>  <span class="comment"> *</span>
<a name="l2572"><span class="linenum">2572</span></a>  <span class="comment"> * @global object</span>
<a name="l2573"><span class="linenum">2573</span></a>  <span class="comment"> * @global object</span>
<a name="l2574"><span class="linenum">2574</span></a>  <span class="comment"> * @param object $feedback</span>
<a name="l2575"><span class="linenum">2575</span></a>  <span class="comment"> * @param int $groupid</span>
<a name="l2576"><span class="linenum">2576</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l2577"><span class="linenum">2577</span></a>  <span class="comment"> * @return mixed array of found completeds otherwise false</span>
<a name="l2578"><span class="linenum">2578</span></a>  <span class="comment"> */</span>
<a name="l2579"><span class="linenum">2579</span></a>  function <a class="function" onClick="logFunction('feedback_get_completeds_group')" href="../../_functions/feedback_get_completeds_group.html" onMouseOver="funcPopup(event,'feedback_get_completeds_group')">feedback_get_completeds_group</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>, <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = false, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a> = false) {
<a name="l2580"><span class="linenum">2580</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2581"><span class="linenum">2581</span></a>  
<a name="l2582"><span class="linenum">2582</span></a>      if (<a class="phpfunction" onClick="logFunction('intval')" href="../../_functions/intval.html" onMouseOver="phpfuncPopup(event,'intval')">intval</a>(<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) &gt; 0) {
<a name="l2583"><span class="linenum">2583</span></a>          <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = &quot;SELECT fbc.*
<a name="l2584"><span class="linenum">2584</span></a>                      FROM {feedback_completed} fbc, {groups_members} gm
<a name="l2585"><span class="linenum">2585</span></a>                     WHERE fbc.feedback = ?
<a name="l2586"><span class="linenum">2586</span></a>                           AND gm.groupid = ?
<a name="l2587"><span class="linenum">2587</span></a>                           AND fbc.userid = gm.userid&quot;;
<a name="l2588"><span class="linenum">2588</span></a>          if (<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, array(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>))) {
<a name="l2589"><span class="linenum">2589</span></a>              return <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a>;
<a name="l2590"><span class="linenum">2590</span></a>          } else {
<a name="l2591"><span class="linenum">2591</span></a>              return false;
<a name="l2592"><span class="linenum">2592</span></a>          }
<a name="l2593"><span class="linenum">2593</span></a>      } else {
<a name="l2594"><span class="linenum">2594</span></a>          if (<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l2595"><span class="linenum">2595</span></a>              <a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = &quot;SELECT DISTINCT fbc.*
<a name="l2596"><span class="linenum">2596</span></a>                          FROM {feedback_completed} fbc, {feedback_value} fbv
<a name="l2597"><span class="linenum">2597</span></a>                          WHERE fbc.id = fbv.completed
<a name="l2598"><span class="linenum">2598</span></a>                              AND fbc.feedback = ?
<a name="l2599"><span class="linenum">2599</span></a>                              AND fbv.course_id = ?
<a name="l2600"><span class="linenum">2600</span></a>                          ORDER BY random_response&quot;;
<a name="l2601"><span class="linenum">2601</span></a>              if (<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it450" onMouseOver="hilite(450)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, array(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>))) {
<a name="l2602"><span class="linenum">2602</span></a>                  return <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a>;
<a name="l2603"><span class="linenum">2603</span></a>              } else {
<a name="l2604"><span class="linenum">2604</span></a>                  return false;
<a name="l2605"><span class="linenum">2605</span></a>              }
<a name="l2606"><span class="linenum">2606</span></a>          } else {
<a name="l2607"><span class="linenum">2607</span></a>              if (<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_completed', array('feedback'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l2608"><span class="linenum">2608</span></a>                  return <a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a>;
<a name="l2609"><span class="linenum">2609</span></a>              } else {
<a name="l2610"><span class="linenum">2610</span></a>                  return false;
<a name="l2611"><span class="linenum">2611</span></a>              }
<a name="l2612"><span class="linenum">2612</span></a>          }
<a name="l2613"><span class="linenum">2613</span></a>      }
<a name="l2614"><span class="linenum">2614</span></a>  }
<a name="l2615"><span class="linenum">2615</span></a>  
<a name="l2616"><span class="linenum">2616</span></a>  <span class="comment">/**</span>
<a name="l2617"><span class="linenum">2617</span></a>  <span class="comment"> * get the count of completeds depending on the given groupid.</span>
<a name="l2618"><span class="linenum">2618</span></a>  <span class="comment"> *</span>
<a name="l2619"><span class="linenum">2619</span></a>  <span class="comment"> * @global object</span>
<a name="l2620"><span class="linenum">2620</span></a>  <span class="comment"> * @global object</span>
<a name="l2621"><span class="linenum">2621</span></a>  <span class="comment"> * @param object $feedback</span>
<a name="l2622"><span class="linenum">2622</span></a>  <span class="comment"> * @param int $groupid</span>
<a name="l2623"><span class="linenum">2623</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l2624"><span class="linenum">2624</span></a>  <span class="comment"> * @return mixed count of completeds or false</span>
<a name="l2625"><span class="linenum">2625</span></a>  <span class="comment"> */</span>
<a name="l2626"><span class="linenum">2626</span></a>  function <a class="function" onClick="logFunction('feedback_get_completeds_group_count')" href="../../_functions/feedback_get_completeds_group_count.html" onMouseOver="funcPopup(event,'feedback_get_completeds_group_count')">feedback_get_completeds_group_count</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>, <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = false, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a> = false) {
<a name="l2627"><span class="linenum">2627</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2628"><span class="linenum">2628</span></a>  
<a name="l2629"><span class="linenum">2629</span></a>      if (<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a> &gt; 0 AND !<a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> &lt;= 0) {
<a name="l2630"><span class="linenum">2630</span></a>          <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT id, <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(item) AS ci
<a name="l2631"><span class="linenum">2631</span></a>                    FROM {feedback_value}
<a name="l2632"><span class="linenum">2632</span></a>                   WHERE course_id  = ?
<a name="l2633"><span class="linenum">2633</span></a>                GROUP BY item ORDER BY ci DESC&quot;;
<a name="l2634"><span class="linenum">2634</span></a>          if (<a class="var it38615" onMouseOver="hilite(38615)" onMouseOut="lolite()" onClick="logVariable('foundrecs')" href="../../_variables/foundrecs.html">$foundrecs</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>))) {
<a name="l2635"><span class="linenum">2635</span></a>              <a class="var it38615" onMouseOver="hilite(38615)" onMouseOut="lolite()" onClick="logVariable('foundrecs')" href="../../_variables/foundrecs.html">$foundrecs</a> = <a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it38615" onMouseOver="hilite(38615)" onMouseOut="lolite()" onClick="logVariable('foundrecs')" href="../../_variables/foundrecs.html">$foundrecs</a>);
<a name="l2636"><span class="linenum">2636</span></a>              return <a class="var it38615" onMouseOver="hilite(38615)" onMouseOut="lolite()" onClick="logVariable('foundrecs')" href="../../_variables/foundrecs.html">$foundrecs</a>[0]-&gt;ci;
<a name="l2637"><span class="linenum">2637</span></a>          }
<a name="l2638"><span class="linenum">2638</span></a>          return false;
<a name="l2639"><span class="linenum">2639</span></a>      }
<a name="l2640"><span class="linenum">2640</span></a>      if (<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a> = <a class="function" onClick="logFunction('feedback_get_completeds_group')" href="../../_functions/feedback_get_completeds_group.html" onMouseOver="funcPopup(event,'feedback_get_completeds_group')">feedback_get_completeds_group</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>, <a class="var it1423" onMouseOver="hilite(1423)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>)) {
<a name="l2641"><span class="linenum">2641</span></a>          return <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it517" onMouseOver="hilite(517)" onMouseOut="lolite()" onClick="logVariable('values')" href="../../_variables/values.html">$values</a>);
<a name="l2642"><span class="linenum">2642</span></a>      } else {
<a name="l2643"><span class="linenum">2643</span></a>          return false;
<a name="l2644"><span class="linenum">2644</span></a>      }
<a name="l2645"><span class="linenum">2645</span></a>  }
<a name="l2646"><span class="linenum">2646</span></a>  
<a name="l2647"><span class="linenum">2647</span></a>  <span class="comment">/**</span>
<a name="l2648"><span class="linenum">2648</span></a>  <span class="comment"> * deletes all completed-recordsets from a feedback.</span>
<a name="l2649"><span class="linenum">2649</span></a>  <span class="comment"> * all related data such as values also will be deleted</span>
<a name="l2650"><span class="linenum">2650</span></a>  <span class="comment"> *</span>
<a name="l2651"><span class="linenum">2651</span></a>  <span class="comment"> * @global object</span>
<a name="l2652"><span class="linenum">2652</span></a>  <span class="comment"> * @param int $feedbackid</span>
<a name="l2653"><span class="linenum">2653</span></a>  <span class="comment"> * @return void</span>
<a name="l2654"><span class="linenum">2654</span></a>  <span class="comment"> */</span>
<a name="l2655"><span class="linenum">2655</span></a>  function <a class="function" onClick="logFunction('feedback_delete_all_completeds')" href="../../_functions/feedback_delete_all_completeds.html" onMouseOver="funcPopup(event,'feedback_delete_all_completeds')">feedback_delete_all_completeds</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>) {
<a name="l2656"><span class="linenum">2656</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2657"><span class="linenum">2657</span></a>  
<a name="l2658"><span class="linenum">2658</span></a>      if (!<a class="var it6745" onMouseOver="hilite(6745)" onMouseOut="lolite()" onClick="logVariable('completeds')" href="../../_variables/completeds.html">$completeds</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_completed', array('feedback'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>))) {
<a name="l2659"><span class="linenum">2659</span></a>          return;
<a name="l2660"><span class="linenum">2660</span></a>      }
<a name="l2661"><span class="linenum">2661</span></a>      foreach (<a class="var it6745" onMouseOver="hilite(6745)" onMouseOut="lolite()" onClick="logVariable('completeds')" href="../../_variables/completeds.html">$completeds</a> as <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>) {
<a name="l2662"><span class="linenum">2662</span></a>          <a class="function" onClick="logFunction('feedback_delete_completed')" href="../../_functions/feedback_delete_completed.html" onMouseOver="funcPopup(event,'feedback_delete_completed')">feedback_delete_completed</a>(<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('id')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2663"><span class="linenum">2663</span></a>      }
<a name="l2664"><span class="linenum">2664</span></a>  }
<a name="l2665"><span class="linenum">2665</span></a>  
<a name="l2666"><span class="linenum">2666</span></a>  <span class="comment">/**</span>
<a name="l2667"><span class="linenum">2667</span></a>  <span class="comment"> * deletes a completed given by completedid.</span>
<a name="l2668"><span class="linenum">2668</span></a>  <span class="comment"> * all related data such values or tracking data also will be deleted</span>
<a name="l2669"><span class="linenum">2669</span></a>  <span class="comment"> *</span>
<a name="l2670"><span class="linenum">2670</span></a>  <span class="comment"> * @global object</span>
<a name="l2671"><span class="linenum">2671</span></a>  <span class="comment"> * @param int $completedid</span>
<a name="l2672"><span class="linenum">2672</span></a>  <span class="comment"> * @return boolean</span>
<a name="l2673"><span class="linenum">2673</span></a>  <span class="comment"> */</span>
<a name="l2674"><span class="linenum">2674</span></a>  function <a class="function" onClick="logFunction('feedback_delete_completed')" href="../../_functions/feedback_delete_completed.html" onMouseOver="funcPopup(event,'feedback_delete_completed')">feedback_delete_completed</a>(<a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a>) {
<a name="l2675"><span class="linenum">2675</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2676"><span class="linenum">2676</span></a>      require_once(<a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/completionlib.php');
<a name="l2677"><span class="linenum">2677</span></a>  
<a name="l2678"><span class="linenum">2678</span></a>      if (!<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_completed', array('id'=&gt;<a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a>))) {
<a name="l2679"><span class="linenum">2679</span></a>          return false;
<a name="l2680"><span class="linenum">2680</span></a>      }
<a name="l2681"><span class="linenum">2681</span></a>  
<a name="l2682"><span class="linenum">2682</span></a>      if (!<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback', array('id'=&gt;<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('feedback')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>))) {
<a name="l2683"><span class="linenum">2683</span></a>          return false;
<a name="l2684"><span class="linenum">2684</span></a>      }
<a name="l2685"><span class="linenum">2685</span></a>  
<a name="l2686"><span class="linenum">2686</span></a>      if (!<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('course')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>))) {
<a name="l2687"><span class="linenum">2687</span></a>          return false;
<a name="l2688"><span class="linenum">2688</span></a>      }
<a name="l2689"><span class="linenum">2689</span></a>  
<a name="l2690"><span class="linenum">2690</span></a>      if (!<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l2691"><span class="linenum">2691</span></a>          return false;
<a name="l2692"><span class="linenum">2692</span></a>      }
<a name="l2693"><span class="linenum">2693</span></a>  
<a name="l2694"><span class="linenum">2694</span></a>  <span class="comment">    //first we delete all related values</span>
<a name="l2695"><span class="linenum">2695</span></a>      <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_value', array('completed'=&gt;<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('id')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2696"><span class="linenum">2696</span></a>  
<a name="l2697"><span class="linenum">2697</span></a>  <span class="comment">    //now we delete all tracking data</span>
<a name="l2698"><span class="linenum">2698</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('completed'=&gt;<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('id')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'feedback'=&gt;<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('feedback')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>);
<a name="l2699"><span class="linenum">2699</span></a>      if (<a class="var it5268" onMouseOver="hilite(5268)" onMouseOut="lolite()" onClick="logVariable('tracking')" href="../../_variables/tracking.html">$tracking</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback_tracking', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l2700"><span class="linenum">2700</span></a>          <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_tracking', array('completed'=&gt;<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('id')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2701"><span class="linenum">2701</span></a>      }
<a name="l2702"><span class="linenum">2702</span></a>  
<a name="l2703"><span class="linenum">2703</span></a>  <span class="comment">    // Update completion state</span>
<a name="l2704"><span class="linenum">2704</span></a>      <a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l2705"><span class="linenum">2705</span></a>      if (<a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('is_enabled')" href="../../_functions/is_enabled.html" onMouseOver="funcPopup(event,'is_enabled')">is_enabled</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) &amp;&amp; <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('completionsubmit')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/completionsubmit.html">completionsubmit</a>) {
<a name="l2706"><span class="linenum">2706</span></a>          <a class="var it3863" onMouseOver="hilite(3863)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('update_state')" href="../../_functions/update_state.html" onMouseOver="funcPopup(event,'update_state')">update_state</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="constant" onClick="logConstant('COMPLETION_INCOMPLETE')" href="../../_constants/COMPLETION_INCOMPLETE.html" onMouseOver="constPopup(event,'COMPLETION_INCOMPLETE')">COMPLETION_INCOMPLETE</a>, <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('userid')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>);
<a name="l2707"><span class="linenum">2707</span></a>      }
<a name="l2708"><span class="linenum">2708</span></a>  <span class="comment">    // Last we delete the completed-record.</span>
<a name="l2709"><span class="linenum">2709</span></a>      <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_completed', array('id'=&gt;<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('id')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2710"><span class="linenum">2710</span></a>  
<a name="l2711"><span class="linenum">2711</span></a>  <span class="comment">    // Trigger event for the delete action we performed.</span>
<a name="l2712"><span class="linenum">2712</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_feedback\event\<a class="class" onClick="logClass('response_deleted')" href="../../_classes/response_deleted.html" onMouseOver="classPopup(event,'response_deleted')">response_deleted</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l2713"><span class="linenum">2713</span></a>          'relateduserid' =&gt; <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('userid')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>,
<a name="l2714"><span class="linenum">2714</span></a>          'objectid' =&gt; <a class="var it5244" onMouseOver="hilite(5244)" onMouseOut="lolite()" onClick="logVariable('completedid')" href="../../_variables/completedid.html">$completedid</a>,
<a name="l2715"><span class="linenum">2715</span></a>          'courseid' =&gt; <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2716"><span class="linenum">2716</span></a>          'context' =&gt; <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>),
<a name="l2717"><span class="linenum">2717</span></a>          'anonymous' =&gt; (<a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('anonymous_response')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/anonymous_response.html">anonymous_response</a> == <a class="constant" onClick="logConstant('FEEDBACK_ANONYMOUS_YES')" href="../../_constants/FEEDBACK_ANONYMOUS_YES.html" onMouseOver="constPopup(event,'FEEDBACK_ANONYMOUS_YES')">FEEDBACK_ANONYMOUS_YES</a>),
<a name="l2718"><span class="linenum">2718</span></a>          'other' =&gt; array(
<a name="l2719"><span class="linenum">2719</span></a>              'cmid' =&gt; <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2720"><span class="linenum">2720</span></a>              'instanceid' =&gt; <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l2721"><span class="linenum">2721</span></a>              'anonymous' =&gt; <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>-&gt;<a onClick="logVariable('anonymous_response')" class="var it40552" onMouseOver="hilite(40552)" onMouseOut="lolite()" href="../../_variables/anonymous_response.html">anonymous_response</a>) // Deprecated.
<a name="l2722"><span class="linenum">2722</span></a>      ));
<a name="l2723"><span class="linenum">2723</span></a>  
<a name="l2724"><span class="linenum">2724</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('feedback_completed', <a class="var it3877" onMouseOver="hilite(3877)" onMouseOut="lolite()" onClick="logVariable('completed')" href="../../_variables/completed.html">$completed</a>);
<a name="l2725"><span class="linenum">2725</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('course', <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l2726"><span class="linenum">2726</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('feedback', <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>);
<a name="l2727"><span class="linenum">2727</span></a>  
<a name="l2728"><span class="linenum">2728</span></a>      <a class="var it179" onMouseOver="hilite(179)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l2729"><span class="linenum">2729</span></a>  
<a name="l2730"><span class="linenum">2730</span></a>      return <a class="var it49" onMouseOver="hilite(49)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l2731"><span class="linenum">2731</span></a>  }
<a name="l2732"><span class="linenum">2732</span></a>  
<a name="l2733"><span class="linenum">2733</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l2734"><span class="linenum">2734</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l2735"><span class="linenum">2735</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l2736"><span class="linenum">2736</span></a>  <span class="comment">//functions to handle sitecourse mapping</span>
<a name="l2737"><span class="linenum">2737</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l2738"><span class="linenum">2738</span></a>  
<a name="l2739"><span class="linenum">2739</span></a>  <span class="comment">/**</span>
<a name="l2740"><span class="linenum">2740</span></a>  <span class="comment"> * checks if the course and the feedback is in the table feedback_sitecourse_map.</span>
<a name="l2741"><span class="linenum">2741</span></a>  <span class="comment"> *</span>
<a name="l2742"><span class="linenum">2742</span></a>  <span class="comment"> * @global object</span>
<a name="l2743"><span class="linenum">2743</span></a>  <span class="comment"> * @param int $feedbackid</span>
<a name="l2744"><span class="linenum">2744</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l2745"><span class="linenum">2745</span></a>  <span class="comment"> * @return int the count of records</span>
<a name="l2746"><span class="linenum">2746</span></a>  <span class="comment"> */</span>
<a name="l2747"><span class="linenum">2747</span></a>  function <a class="function" onClick="logFunction('feedback_is_course_in_sitecourse_map')" href="../../_functions/feedback_is_course_in_sitecourse_map.html" onMouseOver="funcPopup(event,'feedback_is_course_in_sitecourse_map')">feedback_is_course_in_sitecourse_map</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>, <a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l2748"><span class="linenum">2748</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2749"><span class="linenum">2749</span></a>      <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('feedbackid'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>, 'courseid'=&gt;<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>);
<a name="l2750"><span class="linenum">2750</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('feedback_sitecourse_map', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2751"><span class="linenum">2751</span></a>  }
<a name="l2752"><span class="linenum">2752</span></a>  
<a name="l2753"><span class="linenum">2753</span></a>  <span class="comment">/**</span>
<a name="l2754"><span class="linenum">2754</span></a>  <span class="comment"> * checks if the feedback is in the table feedback_sitecourse_map.</span>
<a name="l2755"><span class="linenum">2755</span></a>  <span class="comment"> *</span>
<a name="l2756"><span class="linenum">2756</span></a>  <span class="comment"> * @global object</span>
<a name="l2757"><span class="linenum">2757</span></a>  <span class="comment"> * @param int $feedbackid</span>
<a name="l2758"><span class="linenum">2758</span></a>  <span class="comment"> * @return boolean</span>
<a name="l2759"><span class="linenum">2759</span></a>  <span class="comment"> */</span>
<a name="l2760"><span class="linenum">2760</span></a>  function <a class="function" onClick="logFunction('feedback_is_feedback_in_sitecourse_map')" href="../../_functions/feedback_is_feedback_in_sitecourse_map.html" onMouseOver="funcPopup(event,'feedback_is_feedback_in_sitecourse_map')">feedback_is_feedback_in_sitecourse_map</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>) {
<a name="l2761"><span class="linenum">2761</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2762"><span class="linenum">2762</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('feedback_sitecourse_map', array('feedbackid'=&gt;<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>));
<a name="l2763"><span class="linenum">2763</span></a>  }
<a name="l2764"><span class="linenum">2764</span></a>  
<a name="l2765"><span class="linenum">2765</span></a>  <span class="comment">/**</span>
<a name="l2766"><span class="linenum">2766</span></a>  <span class="comment"> * gets the feedbacks from table feedback_sitecourse_map.</span>
<a name="l2767"><span class="linenum">2767</span></a>  <span class="comment"> * this is used to show the global feedbacks on the feedback block</span>
<a name="l2768"><span class="linenum">2768</span></a>  <span class="comment"> * all feedbacks with the following criteria will be selected:&lt;br /&gt;</span>
<a name="l2769"><span class="linenum">2769</span></a>  <span class="comment"> *</span>
<a name="l2770"><span class="linenum">2770</span></a>  <span class="comment"> * 1) all feedbacks which id are listed together with the courseid in sitecoursemap and&lt;br /&gt;</span>
<a name="l2771"><span class="linenum">2771</span></a>  <span class="comment"> * 2) all feedbacks which not are listed in sitecoursemap</span>
<a name="l2772"><span class="linenum">2772</span></a>  <span class="comment"> *</span>
<a name="l2773"><span class="linenum">2773</span></a>  <span class="comment"> * @global object</span>
<a name="l2774"><span class="linenum">2774</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l2775"><span class="linenum">2775</span></a>  <span class="comment"> * @return array the feedback-records</span>
<a name="l2776"><span class="linenum">2776</span></a>  <span class="comment"> */</span>
<a name="l2777"><span class="linenum">2777</span></a>  function <a class="function" onClick="logFunction('feedback_get_feedbacks_from_sitecourse_map')" href="../../_functions/feedback_get_feedbacks_from_sitecourse_map.html" onMouseOver="funcPopup(event,'feedback_get_feedbacks_from_sitecourse_map')">feedback_get_feedbacks_from_sitecourse_map</a>(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l2778"><span class="linenum">2778</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2779"><span class="linenum">2779</span></a>  
<a name="l2780"><span class="linenum">2780</span></a>  <span class="comment">    //first get all feedbacks listed in sitecourse_map with named courseid</span>
<a name="l2781"><span class="linenum">2781</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT f.id AS id,
<a name="l2782"><span class="linenum">2782</span></a>                     cm.id AS cmid,
<a name="l2783"><span class="linenum">2783</span></a>                     f.name AS name,
<a name="l2784"><span class="linenum">2784</span></a>                     f.timeopen AS timeopen,
<a name="l2785"><span class="linenum">2785</span></a>                     f.timeclose AS timeclose
<a name="l2786"><span class="linenum">2786</span></a>              FROM {feedback} f, {course_modules} cm, {feedback_sitecourse_map} sm, {modules} m
<a name="l2787"><span class="linenum">2787</span></a>              WHERE f.id = cm.instance
<a name="l2788"><span class="linenum">2788</span></a>                     AND f.course = '&quot;.<a class="constant" onClick="logConstant('SITEID')" href="../../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>.&quot;'
<a name="l2789"><span class="linenum">2789</span></a>                     AND m.id = cm.module
<a name="l2790"><span class="linenum">2790</span></a>                     AND m.name = 'feedback'
<a name="l2791"><span class="linenum">2791</span></a>                     AND sm.courseid = ?
<a name="l2792"><span class="linenum">2792</span></a>                     AND sm.feedbackid = f.id&quot;;
<a name="l2793"><span class="linenum">2793</span></a>  
<a name="l2794"><span class="linenum">2794</span></a>      if (!<a class="var it38616" onMouseOver="hilite(38616)" onMouseOut="lolite()" onClick="logVariable('feedbacks1')" href="../../_variables/feedbacks1.html">$feedbacks1</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(<a class="var it96" onMouseOver="hilite(96)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>))) {
<a name="l2795"><span class="linenum">2795</span></a>          <a class="var it38616" onMouseOver="hilite(38616)" onMouseOut="lolite()" onClick="logVariable('feedbacks1')" href="../../_variables/feedbacks1.html">$feedbacks1</a> = array();
<a name="l2796"><span class="linenum">2796</span></a>      }
<a name="l2797"><span class="linenum">2797</span></a>  
<a name="l2798"><span class="linenum">2798</span></a>  <span class="comment">    //second get all feedbacks not listed in sitecourse_map</span>
<a name="l2799"><span class="linenum">2799</span></a>      <a class="var it38617" onMouseOver="hilite(38617)" onMouseOut="lolite()" onClick="logVariable('feedbacks2')" href="../../_variables/feedbacks2.html">$feedbacks2</a> = array();
<a name="l2800"><span class="linenum">2800</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT f.id AS id,
<a name="l2801"><span class="linenum">2801</span></a>                     cm.id AS cmid,
<a name="l2802"><span class="linenum">2802</span></a>                     f.name AS name,
<a name="l2803"><span class="linenum">2803</span></a>                     f.timeopen AS timeopen,
<a name="l2804"><span class="linenum">2804</span></a>                     f.timeclose AS timeclose
<a name="l2805"><span class="linenum">2805</span></a>              FROM {feedback} f, {course_modules} cm, {modules} m
<a name="l2806"><span class="linenum">2806</span></a>              WHERE f.id = cm.instance
<a name="l2807"><span class="linenum">2807</span></a>                     AND f.course = '&quot;.<a class="constant" onClick="logConstant('SITEID')" href="../../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>.&quot;'
<a name="l2808"><span class="linenum">2808</span></a>                     AND m.id = cm.module
<a name="l2809"><span class="linenum">2809</span></a>                     AND m.name = 'feedback'&quot;;
<a name="l2810"><span class="linenum">2810</span></a>      if (!<a class="var it38618" onMouseOver="hilite(38618)" onMouseOut="lolite()" onClick="logVariable('allfeedbacks')" href="../../_variables/allfeedbacks.html">$allfeedbacks</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>)) {
<a name="l2811"><span class="linenum">2811</span></a>          <a class="var it38618" onMouseOver="hilite(38618)" onMouseOut="lolite()" onClick="logVariable('allfeedbacks')" href="../../_variables/allfeedbacks.html">$allfeedbacks</a> = array();
<a name="l2812"><span class="linenum">2812</span></a>      }
<a name="l2813"><span class="linenum">2813</span></a>      foreach (<a class="var it38618" onMouseOver="hilite(38618)" onMouseOut="lolite()" onClick="logVariable('allfeedbacks')" href="../../_variables/allfeedbacks.html">$allfeedbacks</a> as <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>) {
<a name="l2814"><span class="linenum">2814</span></a>          if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('feedback_sitecourse_map', array('feedbackid'=&gt;<a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>-&gt;<a onClick="logVariable('id')" class="var it39489" onMouseOver="hilite(39489)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l2815"><span class="linenum">2815</span></a>              <a class="var it38617" onMouseOver="hilite(38617)" onMouseOut="lolite()" onClick="logVariable('feedbacks2')" href="../../_variables/feedbacks2.html">$feedbacks2</a>[] = <a class="var it161" onMouseOver="hilite(161)" onMouseOut="lolite()" onClick="logVariable('a')" href="../../_variables/a.html">$a</a>;
<a name="l2816"><span class="linenum">2816</span></a>          }
<a name="l2817"><span class="linenum">2817</span></a>      }
<a name="l2818"><span class="linenum">2818</span></a>  
<a name="l2819"><span class="linenum">2819</span></a>      return <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it38616" onMouseOver="hilite(38616)" onMouseOut="lolite()" onClick="logVariable('feedbacks1')" href="../../_variables/feedbacks1.html">$feedbacks1</a>, <a class="var it38617" onMouseOver="hilite(38617)" onMouseOut="lolite()" onClick="logVariable('feedbacks2')" href="../../_variables/feedbacks2.html">$feedbacks2</a>);
<a name="l2820"><span class="linenum">2820</span></a>  
<a name="l2821"><span class="linenum">2821</span></a>  }
<a name="l2822"><span class="linenum">2822</span></a>  
<a name="l2823"><span class="linenum">2823</span></a>  <span class="comment">/**</span>
<a name="l2824"><span class="linenum">2824</span></a>  <span class="comment"> * gets the courses from table feedback_sitecourse_map.</span>
<a name="l2825"><span class="linenum">2825</span></a>  <span class="comment"> *</span>
<a name="l2826"><span class="linenum">2826</span></a>  <span class="comment"> * @global object</span>
<a name="l2827"><span class="linenum">2827</span></a>  <span class="comment"> * @param int $feedbackid</span>
<a name="l2828"><span class="linenum">2828</span></a>  <span class="comment"> * @return array the course-records</span>
<a name="l2829"><span class="linenum">2829</span></a>  <span class="comment"> */</span>
<a name="l2830"><span class="linenum">2830</span></a>  function <a class="function" onClick="logFunction('feedback_get_courses_from_sitecourse_map')" href="../../_functions/feedback_get_courses_from_sitecourse_map.html" onMouseOver="funcPopup(event,'feedback_get_courses_from_sitecourse_map')">feedback_get_courses_from_sitecourse_map</a>(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>) {
<a name="l2831"><span class="linenum">2831</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2832"><span class="linenum">2832</span></a>  
<a name="l2833"><span class="linenum">2833</span></a>      <a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT f.id, f.courseid, c.fullname, c.shortname
<a name="l2834"><span class="linenum">2834</span></a>                FROM {feedback_sitecourse_map} f, {course} c
<a name="l2835"><span class="linenum">2835</span></a>               WHERE c.id = f.courseid
<a name="l2836"><span class="linenum">2836</span></a>                     AND f.feedbackid = ?
<a name="l2837"><span class="linenum">2837</span></a>            ORDER BY c.fullname&quot;;
<a name="l2838"><span class="linenum">2838</span></a>  
<a name="l2839"><span class="linenum">2839</span></a>      return <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it125" onMouseOver="hilite(125)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(<a class="var it1045" onMouseOver="hilite(1045)" onMouseOut="lolite()" onClick="logVariable('feedbackid')" href="../../_variables/feedbackid.html">$feedbackid</a>));
<a name="l2840"><span class="linenum">2840</span></a>  
<a name="l2841"><span class="linenum">2841</span></a>  }
<a name="l2842"><span class="linenum">2842</span></a>  
<a name="l2843"><span class="linenum">2843</span></a>  <span class="comment">/**</span>
<a name="l2844"><span class="linenum">2844</span></a>  <span class="comment"> * removes non existing courses or feedbacks from sitecourse_map.</span>
<a name="l2845"><span class="linenum">2845</span></a>  <span class="comment"> * it shouldn't be called all too often</span>
<a name="l2846"><span class="linenum">2846</span></a>  <span class="comment"> * a good place for it could be the mapcourse.php or unmapcourse.php</span>
<a name="l2847"><span class="linenum">2847</span></a>  <span class="comment"> *</span>
<a name="l2848"><span class="linenum">2848</span></a>  <span class="comment"> * @global object</span>
<a name="l2849"><span class="linenum">2849</span></a>  <span class="comment"> * @return void</span>
<a name="l2850"><span class="linenum">2850</span></a>  <span class="comment"> */</span>
<a name="l2851"><span class="linenum">2851</span></a>  function <a class="function" onClick="logFunction('feedback_clean_up_sitecourse_map')" href="../../_functions/feedback_clean_up_sitecourse_map.html" onMouseOver="funcPopup(event,'feedback_clean_up_sitecourse_map')">feedback_clean_up_sitecourse_map</a>() {
<a name="l2852"><span class="linenum">2852</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2853"><span class="linenum">2853</span></a>  
<a name="l2854"><span class="linenum">2854</span></a>      <a class="var it18978" onMouseOver="hilite(18978)" onMouseOut="lolite()" onClick="logVariable('maps')" href="../../_variables/maps.html">$maps</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('feedback_sitecourse_map');
<a name="l2855"><span class="linenum">2855</span></a>      foreach (<a class="var it18978" onMouseOver="hilite(18978)" onMouseOut="lolite()" onClick="logVariable('maps')" href="../../_variables/maps.html">$maps</a> as <a class="var it2432" onMouseOver="hilite(2432)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../_variables/map.html">$map</a>) {
<a name="l2856"><span class="linenum">2856</span></a>          if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it2432" onMouseOver="hilite(2432)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../_variables/map.html">$map</a>-&gt;<a onClick="logVariable('courseid')" class="var it40573" onMouseOver="hilite(40573)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>))) {
<a name="l2857"><span class="linenum">2857</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('courseid'=&gt;<a class="var it2432" onMouseOver="hilite(2432)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../_variables/map.html">$map</a>-&gt;<a onClick="logVariable('courseid')" class="var it40573" onMouseOver="hilite(40573)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>, 'feedbackid'=&gt;<a class="var it2432" onMouseOver="hilite(2432)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../_variables/map.html">$map</a>-&gt;<a onClick="logVariable('feedbackid')" class="var it40573" onMouseOver="hilite(40573)" onMouseOut="lolite()" href="../../_variables/feedbackid.html">feedbackid</a>);
<a name="l2858"><span class="linenum">2858</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_sitecourse_map', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2859"><span class="linenum">2859</span></a>              continue;
<a name="l2860"><span class="linenum">2860</span></a>          }
<a name="l2861"><span class="linenum">2861</span></a>          if (!<a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback', array('id'=&gt;<a class="var it2432" onMouseOver="hilite(2432)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../_variables/map.html">$map</a>-&gt;<a onClick="logVariable('feedbackid')" class="var it40573" onMouseOver="hilite(40573)" onMouseOut="lolite()" href="../../_variables/feedbackid.html">feedbackid</a>))) {
<a name="l2862"><span class="linenum">2862</span></a>              <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('courseid'=&gt;<a class="var it2432" onMouseOver="hilite(2432)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../_variables/map.html">$map</a>-&gt;<a onClick="logVariable('courseid')" class="var it40573" onMouseOver="hilite(40573)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>, 'feedbackid'=&gt;<a class="var it2432" onMouseOver="hilite(2432)" onMouseOut="lolite()" onClick="logVariable('map')" href="../../_variables/map.html">$map</a>-&gt;<a onClick="logVariable('feedbackid')" class="var it40573" onMouseOver="hilite(40573)" onMouseOut="lolite()" href="../../_variables/feedbackid.html">feedbackid</a>);
<a name="l2863"><span class="linenum">2863</span></a>              <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('feedback_sitecourse_map', <a class="var it46" onMouseOver="hilite(46)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2864"><span class="linenum">2864</span></a>              continue;
<a name="l2865"><span class="linenum">2865</span></a>          }
<a name="l2866"><span class="linenum">2866</span></a>  
<a name="l2867"><span class="linenum">2867</span></a>      }
<a name="l2868"><span class="linenum">2868</span></a>  }
<a name="l2869"><span class="linenum">2869</span></a>  
<a name="l2870"><span class="linenum">2870</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l2871"><span class="linenum">2871</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l2872"><span class="linenum">2872</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l2873"><span class="linenum">2873</span></a>  <span class="comment">//not relatable functions</span>
<a name="l2874"><span class="linenum">2874</span></a>  <span class="comment">////////////////////////////////////////////////</span>
<a name="l2875"><span class="linenum">2875</span></a>  
<a name="l2876"><span class="linenum">2876</span></a>  <span class="comment">/**</span>
<a name="l2877"><span class="linenum">2877</span></a>  <span class="comment"> * prints the option items of a selection-input item (dropdownlist).</span>
<a name="l2878"><span class="linenum">2878</span></a>  <span class="comment"> * @param int $startval the first value of the list</span>
<a name="l2879"><span class="linenum">2879</span></a>  <span class="comment"> * @param int $endval the last value of the list</span>
<a name="l2880"><span class="linenum">2880</span></a>  <span class="comment"> * @param int $selectval which item should be selected</span>
<a name="l2881"><span class="linenum">2881</span></a>  <span class="comment"> * @param int $interval the stepsize from the first to the last value</span>
<a name="l2882"><span class="linenum">2882</span></a>  <span class="comment"> * @return void</span>
<a name="l2883"><span class="linenum">2883</span></a>  <span class="comment"> */</span>
<a name="l2884"><span class="linenum">2884</span></a>  function <a class="function" onClick="logFunction('feedback_print_numeric_option_list')" href="../../_functions/feedback_print_numeric_option_list.html" onMouseOver="funcPopup(event,'feedback_print_numeric_option_list')">feedback_print_numeric_option_list</a>(<a class="var it38619" onMouseOver="hilite(38619)" onMouseOut="lolite()" onClick="logVariable('startval')" href="../../_variables/startval.html">$startval</a>, <a class="var it38620" onMouseOver="hilite(38620)" onMouseOut="lolite()" onClick="logVariable('endval')" href="../../_variables/endval.html">$endval</a>, <a class="var it38621" onMouseOver="hilite(38621)" onMouseOut="lolite()" onClick="logVariable('selectval')" href="../../_variables/selectval.html">$selectval</a> = '', <a class="var it2415" onMouseOver="hilite(2415)" onMouseOut="lolite()" onClick="logVariable('interval')" href="../../_variables/interval.html">$interval</a> = 1) {
<a name="l2885"><span class="linenum">2885</span></a>      for (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = <a class="var it38619" onMouseOver="hilite(38619)" onMouseOut="lolite()" onClick="logVariable('startval')" href="../../_variables/startval.html">$startval</a>; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt;= <a class="var it38620" onMouseOver="hilite(38620)" onMouseOut="lolite()" onClick="logVariable('endval')" href="../../_variables/endval.html">$endval</a>; <a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> += <a class="var it2415" onMouseOver="hilite(2415)" onMouseOut="lolite()" onClick="logVariable('interval')" href="../../_variables/interval.html">$interval</a>) {
<a name="l2886"><span class="linenum">2886</span></a>          if (<a class="var it38621" onMouseOver="hilite(38621)" onMouseOut="lolite()" onClick="logVariable('selectval')" href="../../_variables/selectval.html">$selectval</a> == (<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>)) {
<a name="l2887"><span class="linenum">2887</span></a>              <a class="var it4428" onMouseOver="hilite(4428)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> = 'selected=&quot;selected&quot;';
<a name="l2888"><span class="linenum">2888</span></a>          } else {
<a name="l2889"><span class="linenum">2889</span></a>              <a class="var it4428" onMouseOver="hilite(4428)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> = '';
<a name="l2890"><span class="linenum">2890</span></a>          }
<a name="l2891"><span class="linenum">2891</span></a>          echo '&lt;option '.<a class="var it4428" onMouseOver="hilite(4428)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a>.'&gt;'.<a class="var it80" onMouseOver="hilite(80)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>.'&lt;/option&gt;';
<a name="l2892"><span class="linenum">2892</span></a>      }
<a name="l2893"><span class="linenum">2893</span></a>  }
<a name="l2894"><span class="linenum">2894</span></a>  
<a name="l2895"><span class="linenum">2895</span></a>  <span class="comment">/**</span>
<a name="l2896"><span class="linenum">2896</span></a>  <span class="comment"> * sends an email to the teachers of the course where the given feedback is placed.</span>
<a name="l2897"><span class="linenum">2897</span></a>  <span class="comment"> *</span>
<a name="l2898"><span class="linenum">2898</span></a>  <span class="comment"> * @global object</span>
<a name="l2899"><span class="linenum">2899</span></a>  <span class="comment"> * @global object</span>
<a name="l2900"><span class="linenum">2900</span></a>  <span class="comment"> * @uses FEEDBACK_ANONYMOUS_NO</span>
<a name="l2901"><span class="linenum">2901</span></a>  <span class="comment"> * @uses FORMAT_PLAIN</span>
<a name="l2902"><span class="linenum">2902</span></a>  <span class="comment"> * @param object $cm the coursemodule-record</span>
<a name="l2903"><span class="linenum">2903</span></a>  <span class="comment"> * @param object $feedback</span>
<a name="l2904"><span class="linenum">2904</span></a>  <span class="comment"> * @param object $course</span>
<a name="l2905"><span class="linenum">2905</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l2906"><span class="linenum">2906</span></a>  <span class="comment"> * @return void</span>
<a name="l2907"><span class="linenum">2907</span></a>  <span class="comment"> */</span>
<a name="l2908"><span class="linenum">2908</span></a>  function <a class="function" onClick="logFunction('feedback_send_email')" href="../../_functions/feedback_send_email.html" onMouseOver="funcPopup(event,'feedback_send_email')">feedback_send_email</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l2909"><span class="linenum">2909</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2910"><span class="linenum">2910</span></a>  
<a name="l2911"><span class="linenum">2911</span></a>      if (<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('email_notification')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/email_notification.html">email_notification</a> == 0) {  // No need to do anything
<a name="l2912"><span class="linenum">2912</span></a>          return;
<a name="l2913"><span class="linenum">2913</span></a>      }
<a name="l2914"><span class="linenum">2914</span></a>  
<a name="l2915"><span class="linenum">2915</span></a>      <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('user', array('id'=&gt;<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l2916"><span class="linenum">2916</span></a>  
<a name="l2917"><span class="linenum">2917</span></a>      if (isset(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupmode')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupmode.html">groupmode</a>) &amp;&amp; empty(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('groupmodeforce')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/groupmodeforce.html">groupmodeforce</a>)) {
<a name="l2918"><span class="linenum">2918</span></a>          <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> =  <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('groupmode')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/groupmode.html">groupmode</a>;
<a name="l2919"><span class="linenum">2919</span></a>      } else {
<a name="l2920"><span class="linenum">2920</span></a>          <a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> = <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('groupmode')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/groupmode.html">groupmode</a>;
<a name="l2921"><span class="linenum">2921</span></a>      }
<a name="l2922"><span class="linenum">2922</span></a>  
<a name="l2923"><span class="linenum">2923</span></a>      if (<a class="var it1421" onMouseOver="hilite(1421)" onMouseOut="lolite()" onClick="logVariable('groupmode')" href="../../_variables/groupmode.html">$groupmode</a> == <a class="constant" onClick="logConstant('SEPARATEGROUPS')" href="../../_constants/SEPARATEGROUPS.html" onMouseOver="constPopup(event,'SEPARATEGROUPS')">SEPARATEGROUPS</a>) {
<a name="l2924"><span class="linenum">2924</span></a>          <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql_menu')" href="../../_functions/get_records_sql_menu.html" onMouseOver="funcPopup(event,'get_records_sql_menu')">get_records_sql_menu</a>(&quot;SELECT g.name, g.id
<a name="l2925"><span class="linenum">2925</span></a>                                                 FROM {groups} g, {groups_members} m
<a name="l2926"><span class="linenum">2926</span></a>                                                WHERE g.courseid = ?
<a name="l2927"><span class="linenum">2927</span></a>                                                      AND g.id = m.groupid
<a name="l2928"><span class="linenum">2928</span></a>                                                      AND m.userid = ?
<a name="l2929"><span class="linenum">2929</span></a>                                             ORDER BY name ASC&quot;, array(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l2930"><span class="linenum">2930</span></a>          <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a> = <a class="phpfunction" onClick="logFunction('array_values')" href="../../_functions/array_values.html" onMouseOver="phpfuncPopup(event,'array_values')">array_values</a>(<a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>);
<a name="l2931"><span class="linenum">2931</span></a>  
<a name="l2932"><span class="linenum">2932</span></a>          <a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('teachers')" href="../../_variables/teachers.html">$teachers</a> = <a class="function" onClick="logFunction('feedback_get_receivemail_users')" href="../../_functions/feedback_get_receivemail_users.html" onMouseOver="funcPopup(event,'feedback_get_receivemail_users')">feedback_get_receivemail_users</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it5191" onMouseOver="hilite(5191)" onMouseOut="lolite()" onClick="logVariable('groups')" href="../../_variables/groups.html">$groups</a>);
<a name="l2933"><span class="linenum">2933</span></a>      } else {
<a name="l2934"><span class="linenum">2934</span></a>          <a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('teachers')" href="../../_variables/teachers.html">$teachers</a> = <a class="function" onClick="logFunction('feedback_get_receivemail_users')" href="../../_functions/feedback_get_receivemail_users.html" onMouseOver="funcPopup(event,'feedback_get_receivemail_users')">feedback_get_receivemail_users</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2935"><span class="linenum">2935</span></a>      }
<a name="l2936"><span class="linenum">2936</span></a>  
<a name="l2937"><span class="linenum">2937</span></a>      if (<a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('teachers')" href="../../_variables/teachers.html">$teachers</a>) {
<a name="l2938"><span class="linenum">2938</span></a>  
<a name="l2939"><span class="linenum">2939</span></a>          <a class="var it1043" onMouseOver="hilite(1043)" onMouseOut="lolite()" onClick="logVariable('strfeedbacks')" href="../../_variables/strfeedbacks.html">$strfeedbacks</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'feedback');
<a name="l2940"><span class="linenum">2940</span></a>          <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('strfeedback')" href="../../_variables/strfeedback.html">$strfeedback</a>  = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', 'feedback');
<a name="l2941"><span class="linenum">2941</span></a>          <a class="var it38622" onMouseOver="hilite(38622)" onMouseOut="lolite()" onClick="logVariable('strcompleted')" href="../../_variables/strcompleted.html">$strcompleted</a>  = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('completed', 'feedback');
<a name="l2942"><span class="linenum">2942</span></a>  
<a name="l2943"><span class="linenum">2943</span></a>          if (<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('anonymous')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/anonymous.html">anonymous</a> == <a class="constant" onClick="logConstant('FEEDBACK_ANONYMOUS_NO')" href="../../_constants/FEEDBACK_ANONYMOUS_NO.html" onMouseOver="constPopup(event,'FEEDBACK_ANONYMOUS_NO')">FEEDBACK_ANONYMOUS_NO</a>) {
<a name="l2944"><span class="linenum">2944</span></a>              <a class="var it38623" onMouseOver="hilite(38623)" onMouseOut="lolite()" onClick="logVariable('printusername')" href="../../_variables/printusername.html">$printusername</a> = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>);
<a name="l2945"><span class="linenum">2945</span></a>          } else {
<a name="l2946"><span class="linenum">2946</span></a>              <a class="var it38623" onMouseOver="hilite(38623)" onMouseOut="lolite()" onClick="logVariable('printusername')" href="../../_variables/printusername.html">$printusername</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('anonymous_user', 'feedback');
<a name="l2947"><span class="linenum">2947</span></a>          }
<a name="l2948"><span class="linenum">2948</span></a>  
<a name="l2949"><span class="linenum">2949</span></a>          foreach (<a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('teachers')" href="../../_variables/teachers.html">$teachers</a> as <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('teacher')" href="../../_variables/teacher.html">$teacher</a>) {
<a name="l2950"><span class="linenum">2950</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = new stdClass();
<a name="l2951"><span class="linenum">2951</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('username')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/username.html">username</a> = <a class="var it38623" onMouseOver="hilite(38623)" onMouseOut="lolite()" onClick="logVariable('printusername')" href="../../_variables/printusername.html">$printusername</a>;
<a name="l2952"><span class="linenum">2952</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('feedback')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('name')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, true);
<a name="l2953"><span class="linenum">2953</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('url')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/url.html">url</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/mod/feedback/show_entries.php?'.
<a name="l2954"><span class="linenum">2954</span></a>                              'id='.<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&amp;'.
<a name="l2955"><span class="linenum">2955</span></a>                              'userid='.<a class="var it182" onMouseOver="hilite(182)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>.'&amp;'.
<a name="l2956"><span class="linenum">2956</span></a>                              'do_show=showentries';
<a name="l2957"><span class="linenum">2957</span></a>  
<a name="l2958"><span class="linenum">2958</span></a>              <a class="var it14887" onMouseOver="hilite(14887)" onMouseOut="lolite()" onClick="logVariable('postsubject')" href="../../_variables/postsubject.html">$postsubject</a> = <a class="var it38622" onMouseOver="hilite(38622)" onMouseOut="lolite()" onClick="logVariable('strcompleted')" href="../../_variables/strcompleted.html">$strcompleted</a>.': '.<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('username')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/username.html">username</a>.' -&gt; '.<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('name')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l2959"><span class="linenum">2959</span></a>              <a class="var it20493" onMouseOver="hilite(20493)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a> = <a class="function" onClick="logFunction('feedback_send_email_text')" href="../../_functions/feedback_send_email_text.html" onMouseOver="funcPopup(event,'feedback_send_email_text')">feedback_send_email_text</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l2960"><span class="linenum">2960</span></a>  
<a name="l2961"><span class="linenum">2961</span></a>              if (<a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('teacher')" href="../../_variables/teacher.html">$teacher</a>-&gt;<a onClick="logVariable('mailformat')" class="var it39552" onMouseOver="hilite(39552)" onMouseOut="lolite()" href="../../_variables/mailformat.html">mailformat</a> == 1) {
<a name="l2962"><span class="linenum">2962</span></a>                  <a class="var it20494" onMouseOver="hilite(20494)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> = <a class="function" onClick="logFunction('feedback_send_email_html')" href="../../_functions/feedback_send_email_html.html" onMouseOver="funcPopup(event,'feedback_send_email_html')">feedback_send_email_html</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l2963"><span class="linenum">2963</span></a>              } else {
<a name="l2964"><span class="linenum">2964</span></a>                  <a class="var it20494" onMouseOver="hilite(20494)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> = '';
<a name="l2965"><span class="linenum">2965</span></a>              }
<a name="l2966"><span class="linenum">2966</span></a>  
<a name="l2967"><span class="linenum">2967</span></a>              if (<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('anonymous')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/anonymous.html">anonymous</a> == <a class="constant" onClick="logConstant('FEEDBACK_ANONYMOUS_NO')" href="../../_constants/FEEDBACK_ANONYMOUS_NO.html" onMouseOver="constPopup(event,'FEEDBACK_ANONYMOUS_NO')">FEEDBACK_ANONYMOUS_NO</a>) {
<a name="l2968"><span class="linenum">2968</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a> = new stdClass();
<a name="l2969"><span class="linenum">2969</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('name')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>             = 'submission';
<a name="l2970"><span class="linenum">2970</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('component')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>        = 'mod_feedback';
<a name="l2971"><span class="linenum">2971</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userfrom')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/userfrom.html">userfrom</a>         = <a class="var it119" onMouseOver="hilite(119)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>;
<a name="l2972"><span class="linenum">2972</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userto')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/userto.html">userto</a>           = <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('teacher')" href="../../_variables/teacher.html">$teacher</a>;
<a name="l2973"><span class="linenum">2973</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('subject')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/subject.html">subject</a>          = <a class="var it14887" onMouseOver="hilite(14887)" onMouseOut="lolite()" onClick="logVariable('postsubject')" href="../../_variables/postsubject.html">$postsubject</a>;
<a name="l2974"><span class="linenum">2974</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/fullmessage.html">fullmessage</a>      = <a class="var it20493" onMouseOver="hilite(20493)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a>;
<a name="l2975"><span class="linenum">2975</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessageformat')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/fullmessageformat.html">fullmessageformat</a> = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l2976"><span class="linenum">2976</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessagehtml')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/fullmessagehtml.html">fullmessagehtml</a>  = <a class="var it20494" onMouseOver="hilite(20494)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a>;
<a name="l2977"><span class="linenum">2977</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('smallmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/smallmessage.html">smallmessage</a>     = '';
<a name="l2978"><span class="linenum">2978</span></a>                  <a class="function" onClick="logFunction('message_send')" href="../../_functions/message_send.html" onMouseOver="funcPopup(event,'message_send')">message_send</a>(<a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>);
<a name="l2979"><span class="linenum">2979</span></a>              } else {
<a name="l2980"><span class="linenum">2980</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a> = new stdClass();
<a name="l2981"><span class="linenum">2981</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('name')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>             = 'submission';
<a name="l2982"><span class="linenum">2982</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('component')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>        = 'mod_feedback';
<a name="l2983"><span class="linenum">2983</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userfrom')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/userfrom.html">userfrom</a>         = <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('teacher')" href="../../_variables/teacher.html">$teacher</a>;
<a name="l2984"><span class="linenum">2984</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userto')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/userto.html">userto</a>           = <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('teacher')" href="../../_variables/teacher.html">$teacher</a>;
<a name="l2985"><span class="linenum">2985</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('subject')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/subject.html">subject</a>          = <a class="var it14887" onMouseOver="hilite(14887)" onMouseOut="lolite()" onClick="logVariable('postsubject')" href="../../_variables/postsubject.html">$postsubject</a>;
<a name="l2986"><span class="linenum">2986</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/fullmessage.html">fullmessage</a>      = <a class="var it20493" onMouseOver="hilite(20493)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a>;
<a name="l2987"><span class="linenum">2987</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessageformat')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/fullmessageformat.html">fullmessageformat</a> = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l2988"><span class="linenum">2988</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessagehtml')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/fullmessagehtml.html">fullmessagehtml</a>  = <a class="var it20494" onMouseOver="hilite(20494)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a>;
<a name="l2989"><span class="linenum">2989</span></a>                  <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('smallmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/smallmessage.html">smallmessage</a>     = '';
<a name="l2990"><span class="linenum">2990</span></a>                  <a class="function" onClick="logFunction('message_send')" href="../../_functions/message_send.html" onMouseOver="funcPopup(event,'message_send')">message_send</a>(<a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>);
<a name="l2991"><span class="linenum">2991</span></a>              }
<a name="l2992"><span class="linenum">2992</span></a>          }
<a name="l2993"><span class="linenum">2993</span></a>      }
<a name="l2994"><span class="linenum">2994</span></a>  }
<a name="l2995"><span class="linenum">2995</span></a>  
<a name="l2996"><span class="linenum">2996</span></a>  <span class="comment">/**</span>
<a name="l2997"><span class="linenum">2997</span></a>  <span class="comment"> * sends an email to the teachers of the course where the given feedback is placed.</span>
<a name="l2998"><span class="linenum">2998</span></a>  <span class="comment"> *</span>
<a name="l2999"><span class="linenum">2999</span></a>  <span class="comment"> * @global object</span>
<a name="l3000"><span class="linenum">3000</span></a>  <span class="comment"> * @uses FORMAT_PLAIN</span>
<a name="l3001"><span class="linenum">3001</span></a>  <span class="comment"> * @param object $cm the coursemodule-record</span>
<a name="l3002"><span class="linenum">3002</span></a>  <span class="comment"> * @param object $feedback</span>
<a name="l3003"><span class="linenum">3003</span></a>  <span class="comment"> * @param object $course</span>
<a name="l3004"><span class="linenum">3004</span></a>  <span class="comment"> * @return void</span>
<a name="l3005"><span class="linenum">3005</span></a>  <span class="comment"> */</span>
<a name="l3006"><span class="linenum">3006</span></a>  function <a class="function" onClick="logFunction('feedback_send_email_anonym')" href="../../_functions/feedback_send_email_anonym.html" onMouseOver="funcPopup(event,'feedback_send_email_anonym')">feedback_send_email_anonym</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l3007"><span class="linenum">3007</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l3008"><span class="linenum">3008</span></a>  
<a name="l3009"><span class="linenum">3009</span></a>      if (<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('email_notification')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/email_notification.html">email_notification</a> == 0) { // No need to do anything
<a name="l3010"><span class="linenum">3010</span></a>          return;
<a name="l3011"><span class="linenum">3011</span></a>      }
<a name="l3012"><span class="linenum">3012</span></a>  
<a name="l3013"><span class="linenum">3013</span></a>      <a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('teachers')" href="../../_variables/teachers.html">$teachers</a> = <a class="function" onClick="logFunction('feedback_get_receivemail_users')" href="../../_functions/feedback_get_receivemail_users.html" onMouseOver="funcPopup(event,'feedback_get_receivemail_users')">feedback_get_receivemail_users</a>(<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l3014"><span class="linenum">3014</span></a>  
<a name="l3015"><span class="linenum">3015</span></a>      if (<a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('teachers')" href="../../_variables/teachers.html">$teachers</a>) {
<a name="l3016"><span class="linenum">3016</span></a>  
<a name="l3017"><span class="linenum">3017</span></a>          <a class="var it1043" onMouseOver="hilite(1043)" onMouseOut="lolite()" onClick="logVariable('strfeedbacks')" href="../../_variables/strfeedbacks.html">$strfeedbacks</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'feedback');
<a name="l3018"><span class="linenum">3018</span></a>          <a class="var it1044" onMouseOver="hilite(1044)" onMouseOut="lolite()" onClick="logVariable('strfeedback')" href="../../_variables/strfeedback.html">$strfeedback</a>  = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulename', 'feedback');
<a name="l3019"><span class="linenum">3019</span></a>          <a class="var it38622" onMouseOver="hilite(38622)" onMouseOut="lolite()" onClick="logVariable('strcompleted')" href="../../_variables/strcompleted.html">$strcompleted</a>  = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('completed', 'feedback');
<a name="l3020"><span class="linenum">3020</span></a>          <a class="var it38623" onMouseOver="hilite(38623)" onMouseOut="lolite()" onClick="logVariable('printusername')" href="../../_variables/printusername.html">$printusername</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('anonymous_user', 'feedback');
<a name="l3021"><span class="linenum">3021</span></a>  
<a name="l3022"><span class="linenum">3022</span></a>          foreach (<a class="var it4366" onMouseOver="hilite(4366)" onMouseOut="lolite()" onClick="logVariable('teachers')" href="../../_variables/teachers.html">$teachers</a> as <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('teacher')" href="../../_variables/teacher.html">$teacher</a>) {
<a name="l3023"><span class="linenum">3023</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = new stdClass();
<a name="l3024"><span class="linenum">3024</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('username')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/username.html">username</a> = <a class="var it38623" onMouseOver="hilite(38623)" onMouseOut="lolite()" onClick="logVariable('printusername')" href="../../_variables/printusername.html">$printusername</a>;
<a name="l3025"><span class="linenum">3025</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('feedback')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('name')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, true);
<a name="l3026"><span class="linenum">3026</span></a>              <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('url')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/url.html">url</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/mod/feedback/show_entries_anonym.php?id='.<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3027"><span class="linenum">3027</span></a>  
<a name="l3028"><span class="linenum">3028</span></a>              <a class="var it14887" onMouseOver="hilite(14887)" onMouseOut="lolite()" onClick="logVariable('postsubject')" href="../../_variables/postsubject.html">$postsubject</a> = <a class="var it38622" onMouseOver="hilite(38622)" onMouseOut="lolite()" onClick="logVariable('strcompleted')" href="../../_variables/strcompleted.html">$strcompleted</a>.': '.<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('username')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/username.html">username</a>.' -&gt; '.<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('name')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>;
<a name="l3029"><span class="linenum">3029</span></a>              <a class="var it20493" onMouseOver="hilite(20493)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a> = <a class="function" onClick="logFunction('feedback_send_email_text')" href="../../_functions/feedback_send_email_text.html" onMouseOver="funcPopup(event,'feedback_send_email_text')">feedback_send_email_text</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l3030"><span class="linenum">3030</span></a>  
<a name="l3031"><span class="linenum">3031</span></a>              if (<a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('teacher')" href="../../_variables/teacher.html">$teacher</a>-&gt;<a onClick="logVariable('mailformat')" class="var it39552" onMouseOver="hilite(39552)" onMouseOut="lolite()" href="../../_variables/mailformat.html">mailformat</a> == 1) {
<a name="l3032"><span class="linenum">3032</span></a>                  <a class="var it20494" onMouseOver="hilite(20494)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> = <a class="function" onClick="logFunction('feedback_send_email_html')" href="../../_functions/feedback_send_email_html.html" onMouseOver="funcPopup(event,'feedback_send_email_html')">feedback_send_email_html</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l3033"><span class="linenum">3033</span></a>              } else {
<a name="l3034"><span class="linenum">3034</span></a>                  <a class="var it20494" onMouseOver="hilite(20494)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> = '';
<a name="l3035"><span class="linenum">3035</span></a>              }
<a name="l3036"><span class="linenum">3036</span></a>  
<a name="l3037"><span class="linenum">3037</span></a>              <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a> = new stdClass();
<a name="l3038"><span class="linenum">3038</span></a>              <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('name')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>             = 'submission';
<a name="l3039"><span class="linenum">3039</span></a>              <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('component')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>        = 'mod_feedback';
<a name="l3040"><span class="linenum">3040</span></a>              <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userfrom')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/userfrom.html">userfrom</a>         = <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('teacher')" href="../../_variables/teacher.html">$teacher</a>;
<a name="l3041"><span class="linenum">3041</span></a>              <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('userto')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/userto.html">userto</a>           = <a class="var it1625" onMouseOver="hilite(1625)" onMouseOut="lolite()" onClick="logVariable('teacher')" href="../../_variables/teacher.html">$teacher</a>;
<a name="l3042"><span class="linenum">3042</span></a>              <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('subject')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/subject.html">subject</a>          = <a class="var it14887" onMouseOver="hilite(14887)" onMouseOut="lolite()" onClick="logVariable('postsubject')" href="../../_variables/postsubject.html">$postsubject</a>;
<a name="l3043"><span class="linenum">3043</span></a>              <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/fullmessage.html">fullmessage</a>      = <a class="var it20493" onMouseOver="hilite(20493)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a>;
<a name="l3044"><span class="linenum">3044</span></a>              <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessageformat')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/fullmessageformat.html">fullmessageformat</a> = <a class="constant" onClick="logConstant('FORMAT_PLAIN')" href="../../_constants/FORMAT_PLAIN.html" onMouseOver="constPopup(event,'FORMAT_PLAIN')">FORMAT_PLAIN</a>;
<a name="l3045"><span class="linenum">3045</span></a>              <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('fullmessagehtml')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/fullmessagehtml.html">fullmessagehtml</a>  = <a class="var it20494" onMouseOver="hilite(20494)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a>;
<a name="l3046"><span class="linenum">3046</span></a>              <a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>-&gt;<a onClick="logVariable('smallmessage')" class="var it39511" onMouseOver="hilite(39511)" onMouseOut="lolite()" href="../../_variables/smallmessage.html">smallmessage</a>     = '';
<a name="l3047"><span class="linenum">3047</span></a>              <a class="function" onClick="logFunction('message_send')" href="../../_functions/message_send.html" onMouseOver="funcPopup(event,'message_send')">message_send</a>(<a class="var it8012" onMouseOver="hilite(8012)" onMouseOut="lolite()" onClick="logVariable('eventdata')" href="../../_variables/eventdata.html">$eventdata</a>);
<a name="l3048"><span class="linenum">3048</span></a>          }
<a name="l3049"><span class="linenum">3049</span></a>      }
<a name="l3050"><span class="linenum">3050</span></a>  }
<a name="l3051"><span class="linenum">3051</span></a>  
<a name="l3052"><span class="linenum">3052</span></a>  <span class="comment">/**</span>
<a name="l3053"><span class="linenum">3053</span></a>  <span class="comment"> * send the text-part of the email</span>
<a name="l3054"><span class="linenum">3054</span></a>  <span class="comment"> *</span>
<a name="l3055"><span class="linenum">3055</span></a>  <span class="comment"> * @param object $info includes some infos about the feedback you want to send</span>
<a name="l3056"><span class="linenum">3056</span></a>  <span class="comment"> * @param object $course</span>
<a name="l3057"><span class="linenum">3057</span></a>  <span class="comment"> * @return string the text you want to post</span>
<a name="l3058"><span class="linenum">3058</span></a>  <span class="comment"> */</span>
<a name="l3059"><span class="linenum">3059</span></a>  function <a class="function" onClick="logFunction('feedback_send_email_text')" href="../../_functions/feedback_send_email_text.html" onMouseOver="funcPopup(event,'feedback_send_email_text')">feedback_send_email_text</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l3060"><span class="linenum">3060</span></a>      <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l3061"><span class="linenum">3061</span></a>      <a class="var it4713" onMouseOver="hilite(4713)" onMouseOut="lolite()" onClick="logVariable('courseshortname')" href="../../_variables/courseshortname.html">$courseshortname</a> = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/shortname.html">shortname</a>, true, array('context' =&gt; <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../../_variables/coursecontext.html">$coursecontext</a>));
<a name="l3062"><span class="linenum">3062</span></a>      <a class="var it20493" onMouseOver="hilite(20493)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a>  = <a class="var it4713" onMouseOver="hilite(4713)" onMouseOut="lolite()" onClick="logVariable('courseshortname')" href="../../_variables/courseshortname.html">$courseshortname</a>.' -&gt; '.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'feedback').' -&gt; '.
<a name="l3063"><span class="linenum">3063</span></a>                      <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('feedback')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>.&quot;\n&quot;;
<a name="l3064"><span class="linenum">3064</span></a>      <a class="var it20493" onMouseOver="hilite(20493)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a> .= '---------------------------------------------------------------------'.&quot;\n&quot;;
<a name="l3065"><span class="linenum">3065</span></a>      <a class="var it20493" onMouseOver="hilite(20493)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a> .= <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;emailteachermail&quot;, &quot;feedback&quot;, <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>).&quot;\n&quot;;
<a name="l3066"><span class="linenum">3066</span></a>      <a class="var it20493" onMouseOver="hilite(20493)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a> .= '---------------------------------------------------------------------'.&quot;\n&quot;;
<a name="l3067"><span class="linenum">3067</span></a>      return <a class="var it20493" onMouseOver="hilite(20493)" onMouseOut="lolite()" onClick="logVariable('posttext')" href="../../_variables/posttext.html">$posttext</a>;
<a name="l3068"><span class="linenum">3068</span></a>  }
<a name="l3069"><span class="linenum">3069</span></a>  
<a name="l3070"><span class="linenum">3070</span></a>  
<a name="l3071"><span class="linenum">3071</span></a>  <span class="comment">/**</span>
<a name="l3072"><span class="linenum">3072</span></a>  <span class="comment"> * send the html-part of the email</span>
<a name="l3073"><span class="linenum">3073</span></a>  <span class="comment"> *</span>
<a name="l3074"><span class="linenum">3074</span></a>  <span class="comment"> * @global object</span>
<a name="l3075"><span class="linenum">3075</span></a>  <span class="comment"> * @param object $info includes some infos about the feedback you want to send</span>
<a name="l3076"><span class="linenum">3076</span></a>  <span class="comment"> * @param object $course</span>
<a name="l3077"><span class="linenum">3077</span></a>  <span class="comment"> * @return string the text you want to post</span>
<a name="l3078"><span class="linenum">3078</span></a>  <span class="comment"> */</span>
<a name="l3079"><span class="linenum">3079</span></a>  function <a class="function" onClick="logFunction('feedback_send_email_html')" href="../../_functions/feedback_send_email_html.html" onMouseOver="funcPopup(event,'feedback_send_email_html')">feedback_send_email_html</a>(<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>, <a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) {
<a name="l3080"><span class="linenum">3080</span></a>      global <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l3081"><span class="linenum">3081</span></a>      <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../../_variables/coursecontext.html">$coursecontext</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l3082"><span class="linenum">3082</span></a>      <a class="var it4713" onMouseOver="hilite(4713)" onMouseOut="lolite()" onClick="logVariable('courseshortname')" href="../../_variables/courseshortname.html">$courseshortname</a> = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('shortname')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/shortname.html">shortname</a>, true, array('context' =&gt; <a class="var it1590" onMouseOver="hilite(1590)" onMouseOut="lolite()" onClick="logVariable('coursecontext')" href="../../_variables/coursecontext.html">$coursecontext</a>));
<a name="l3083"><span class="linenum">3083</span></a>      <a class="var it38624" onMouseOver="hilite(38624)" onMouseOut="lolite()" onClick="logVariable('course_url')" href="../../_variables/course_url.html">$course_url</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/course/view.php?id='.<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3084"><span class="linenum">3084</span></a>      <a class="var it38625" onMouseOver="hilite(38625)" onMouseOut="lolite()" onClick="logVariable('feedback_all_url')" href="../../_variables/feedback_all_url.html">$feedback_all_url</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/mod/feedback/index.php?id='.<a class="var it101" onMouseOver="hilite(101)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it39506" onMouseOver="hilite(39506)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3085"><span class="linenum">3085</span></a>      <a class="var it8922" onMouseOver="hilite(8922)" onMouseOut="lolite()" onClick="logVariable('feedback_url')" href="../../_variables/feedback_url.html">$feedback_url</a> = <a class="var it1" onMouseOver="hilite(1)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it39440" onMouseOver="hilite(39440)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'/mod/feedback/view.php?id='.<a class="var it170" onMouseOver="hilite(170)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it39492" onMouseOver="hilite(39492)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3086"><span class="linenum">3086</span></a>  
<a name="l3087"><span class="linenum">3087</span></a>      <a class="var it20494" onMouseOver="hilite(20494)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> = '&lt;p&gt;&lt;font face=&quot;sans-serif&quot;&gt;'.
<a name="l3088"><span class="linenum">3088</span></a>              '&lt;a href=&quot;'.<a class="var it38624" onMouseOver="hilite(38624)" onMouseOut="lolite()" onClick="logVariable('course_url')" href="../../_variables/course_url.html">$course_url</a>.'&quot;&gt;'.<a class="var it4713" onMouseOver="hilite(4713)" onMouseOut="lolite()" onClick="logVariable('courseshortname')" href="../../_variables/courseshortname.html">$courseshortname</a>.'&lt;/a&gt; -&gt;'.
<a name="l3089"><span class="linenum">3089</span></a>              '&lt;a href=&quot;'.<a class="var it38625" onMouseOver="hilite(38625)" onMouseOut="lolite()" onClick="logVariable('feedback_all_url')" href="../../_variables/feedback_all_url.html">$feedback_all_url</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'feedback').'&lt;/a&gt; -&gt;'.
<a name="l3090"><span class="linenum">3090</span></a>              '&lt;a href=&quot;'.<a class="var it8922" onMouseOver="hilite(8922)" onMouseOut="lolite()" onClick="logVariable('feedback_url')" href="../../_variables/feedback_url.html">$feedback_url</a>.'&quot;&gt;'.<a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('feedback')" class="var it39470" onMouseOver="hilite(39470)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>.'&lt;/a&gt;&lt;/font&gt;&lt;/p&gt;';
<a name="l3091"><span class="linenum">3091</span></a>      <a class="var it20494" onMouseOver="hilite(20494)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> .= '&lt;hr /&gt;&lt;font face=&quot;sans-serif&quot;&gt;';
<a name="l3092"><span class="linenum">3092</span></a>      <a class="var it20494" onMouseOver="hilite(20494)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> .= '&lt;p&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('emailteachermailhtml', 'feedback', <a class="var it192" onMouseOver="hilite(192)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>).'&lt;/p&gt;';
<a name="l3093"><span class="linenum">3093</span></a>      <a class="var it20494" onMouseOver="hilite(20494)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a> .= '&lt;/font&gt;&lt;hr /&gt;';
<a name="l3094"><span class="linenum">3094</span></a>      return <a class="var it20494" onMouseOver="hilite(20494)" onMouseOut="lolite()" onClick="logVariable('posthtml')" href="../../_variables/posthtml.html">$posthtml</a>;
<a name="l3095"><span class="linenum">3095</span></a>  }
<a name="l3096"><span class="linenum">3096</span></a>  
<a name="l3097"><span class="linenum">3097</span></a>  <span class="comment">/**</span>
<a name="l3098"><span class="linenum">3098</span></a>  <span class="comment"> * @param string $url</span>
<a name="l3099"><span class="linenum">3099</span></a>  <span class="comment"> * @return string</span>
<a name="l3100"><span class="linenum">3100</span></a>  <span class="comment"> */</span>
<a name="l3101"><span class="linenum">3101</span></a>  function <a class="function" onClick="logFunction('feedback_encode_target_url')" href="../../_functions/feedback_encode_target_url.html" onMouseOver="funcPopup(event,'feedback_encode_target_url')">feedback_encode_target_url</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>) {
<a name="l3102"><span class="linenum">3102</span></a>      if (<a class="phpfunction" onClick="logFunction('strpos')" href="../../_functions/strpos.html" onMouseOver="phpfuncPopup(event,'strpos')">strpos</a>(<a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, '?')) {
<a name="l3103"><span class="linenum">3103</span></a>          <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it38626" onMouseOver="hilite(38626)" onMouseOut="lolite()" onClick="logVariable('part1')" href="../../_variables/part1.html">$part1</a>, <a class="var it38627" onMouseOver="hilite(38627)" onMouseOut="lolite()" onClick="logVariable('part2')" href="../../_variables/part2.html">$part2</a>) = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>('?', <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, 2); <span class="comment">//maximal 2 parts</span>
<a name="l3104"><span class="linenum">3104</span></a>          return <a class="var it38626" onMouseOver="hilite(38626)" onMouseOut="lolite()" onClick="logVariable('part1')" href="../../_variables/part1.html">$part1</a> . '?' . <a class="phpfunction" onClick="logFunction('htmlentities')" href="../../_functions/htmlentities.html" onMouseOver="phpfuncPopup(event,'htmlentities')">htmlentities</a>(<a class="var it38627" onMouseOver="hilite(38627)" onMouseOut="lolite()" onClick="logVariable('part2')" href="../../_variables/part2.html">$part2</a>);
<a name="l3105"><span class="linenum">3105</span></a>      } else {
<a name="l3106"><span class="linenum">3106</span></a>          return <a class="var it122" onMouseOver="hilite(122)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>;
<a name="l3107"><span class="linenum">3107</span></a>      }
<a name="l3108"><span class="linenum">3108</span></a>  }
<a name="l3109"><span class="linenum">3109</span></a>  
<a name="l3110"><span class="linenum">3110</span></a>  <span class="comment">/**</span>
<a name="l3111"><span class="linenum">3111</span></a>  <span class="comment"> * Adds module specific settings to the settings block</span>
<a name="l3112"><span class="linenum">3112</span></a>  <span class="comment"> *</span>
<a name="l3113"><span class="linenum">3113</span></a>  <span class="comment"> * @param settings_navigation $settings The settings navigation object</span>
<a name="l3114"><span class="linenum">3114</span></a>  <span class="comment"> * @param navigation_node $feedbacknode The node to add module settings to</span>
<a name="l3115"><span class="linenum">3115</span></a>  <span class="comment"> */</span>
<a name="l3116"><span class="linenum">3116</span></a>  function <a class="function" onClick="logFunction('feedback_extend_settings_navigation')" href="../../_functions/feedback_extend_settings_navigation.html" onMouseOver="funcPopup(event,'feedback_extend_settings_navigation')">feedback_extend_settings_navigation</a>(settings_navigation <a class="var it16" onMouseOver="hilite(16)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>,
<a name="l3117"><span class="linenum">3117</span></a>                                               navigation_node <a class="var it38628" onMouseOver="hilite(38628)" onMouseOut="lolite()" onClick="logVariable('feedbacknode')" href="../../_variables/feedbacknode.html">$feedbacknode</a>) {
<a name="l3118"><span class="linenum">3118</span></a>  
<a name="l3119"><span class="linenum">3119</span></a>      global <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>, <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3120"><span class="linenum">3120</span></a>  
<a name="l3121"><span class="linenum">3121</span></a>      if (!<a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>)) {
<a name="l3122"><span class="linenum">3122</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('badcontext');
<a name="l3123"><span class="linenum">3123</span></a>      }
<a name="l3124"><span class="linenum">3124</span></a>  
<a name="l3125"><span class="linenum">3125</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/feedback:edititems', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3126"><span class="linenum">3126</span></a>          <a class="var it12665" onMouseOver="hilite(12665)" onMouseOut="lolite()" onClick="logVariable('questionnode')" href="../../_variables/questionnode.html">$questionnode</a> = <a class="var it38628" onMouseOver="hilite(38628)" onMouseOut="lolite()" onClick="logVariable('feedbacknode')" href="../../_variables/feedbacknode.html">$feedbacknode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('questions', 'feedback'));
<a name="l3127"><span class="linenum">3127</span></a>  
<a name="l3128"><span class="linenum">3128</span></a>          <a class="var it12665" onMouseOver="hilite(12665)" onMouseOut="lolite()" onClick="logVariable('questionnode')" href="../../_variables/questionnode.html">$questionnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('edit_items', 'feedback'),
<a name="l3129"><span class="linenum">3129</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/feedback/edit.php.html">/mod/feedback/edit.php</a>',
<a name="l3130"><span class="linenum">3130</span></a>                                      array('id' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id,
<a name="l3131"><span class="linenum">3131</span></a>                                            'do_show' =&gt; 'edit')));
<a name="l3132"><span class="linenum">3132</span></a>  
<a name="l3133"><span class="linenum">3133</span></a>          <a class="var it12665" onMouseOver="hilite(12665)" onMouseOut="lolite()" onClick="logVariable('questionnode')" href="../../_variables/questionnode.html">$questionnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('export_questions', 'feedback'),
<a name="l3134"><span class="linenum">3134</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/feedback/export.php.html">/mod/feedback/export.php</a>',
<a name="l3135"><span class="linenum">3135</span></a>                                      array('id' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id,
<a name="l3136"><span class="linenum">3136</span></a>                                            'action' =&gt; 'exportfile')));
<a name="l3137"><span class="linenum">3137</span></a>  
<a name="l3138"><span class="linenum">3138</span></a>          <a class="var it12665" onMouseOver="hilite(12665)" onMouseOut="lolite()" onClick="logVariable('questionnode')" href="../../_variables/questionnode.html">$questionnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('import_questions', 'feedback'),
<a name="l3139"><span class="linenum">3139</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/feedback/import.php.html">/mod/feedback/import.php</a>',
<a name="l3140"><span class="linenum">3140</span></a>                                      array('id' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id)));
<a name="l3141"><span class="linenum">3141</span></a>  
<a name="l3142"><span class="linenum">3142</span></a>          <a class="var it12665" onMouseOver="hilite(12665)" onMouseOut="lolite()" onClick="logVariable('questionnode')" href="../../_variables/questionnode.html">$questionnode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('templates', 'feedback'),
<a name="l3143"><span class="linenum">3143</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/feedback/edit.php.html">/mod/feedback/edit.php</a>',
<a name="l3144"><span class="linenum">3144</span></a>                                      array('id' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id,
<a name="l3145"><span class="linenum">3145</span></a>                                            'do_show' =&gt; 'templates')));
<a name="l3146"><span class="linenum">3146</span></a>      }
<a name="l3147"><span class="linenum">3147</span></a>  
<a name="l3148"><span class="linenum">3148</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/feedback:viewreports', <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3149"><span class="linenum">3149</span></a>          <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a> = <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('feedback', array('id'=&gt;<a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;instance));
<a name="l3150"><span class="linenum">3150</span></a>          if (<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('course')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/course.html">course</a> == <a class="constant" onClick="logConstant('SITEID')" href="../../_constants/SITEID.html" onMouseOver="constPopup(event,'SITEID')">SITEID</a>) {
<a name="l3151"><span class="linenum">3151</span></a>              <a class="var it38628" onMouseOver="hilite(38628)" onMouseOut="lolite()" onClick="logVariable('feedbacknode')" href="../../_variables/feedbacknode.html">$feedbacknode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('analysis', 'feedback'),
<a name="l3152"><span class="linenum">3152</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/feedback/analysis_course.php.html">/mod/feedback/analysis_course.php</a>',
<a name="l3153"><span class="linenum">3153</span></a>                                      array('id' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id,
<a name="l3154"><span class="linenum">3154</span></a>                                            'course' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('course')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;id,
<a name="l3155"><span class="linenum">3155</span></a>                                            'do_show' =&gt; 'analysis')));
<a name="l3156"><span class="linenum">3156</span></a>          } else {
<a name="l3157"><span class="linenum">3157</span></a>              <a class="var it38628" onMouseOver="hilite(38628)" onMouseOut="lolite()" onClick="logVariable('feedbacknode')" href="../../_variables/feedbacknode.html">$feedbacknode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('analysis', 'feedback'),
<a name="l3158"><span class="linenum">3158</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/feedback/analysis.php.html">/mod/feedback/analysis.php</a>',
<a name="l3159"><span class="linenum">3159</span></a>                                      array('id' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id,
<a name="l3160"><span class="linenum">3160</span></a>                                            'course' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('course')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>-&gt;id,
<a name="l3161"><span class="linenum">3161</span></a>                                            'do_show' =&gt; 'analysis')));
<a name="l3162"><span class="linenum">3162</span></a>          }
<a name="l3163"><span class="linenum">3163</span></a>  
<a name="l3164"><span class="linenum">3164</span></a>          <a class="var it38628" onMouseOver="hilite(38628)" onMouseOut="lolite()" onClick="logVariable('feedbacknode')" href="../../_variables/feedbacknode.html">$feedbacknode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('show_entries', 'feedback'),
<a name="l3165"><span class="linenum">3165</span></a>                      <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/feedback/show_entries.php.html">/mod/feedback/show_entries.php</a>',
<a name="l3166"><span class="linenum">3166</span></a>                                      array('id' =&gt; <a class="var it11" onMouseOver="hilite(11)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it39443" onMouseOver="hilite(39443)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id,
<a name="l3167"><span class="linenum">3167</span></a>                                            'do_show' =&gt; 'showentries')));
<a name="l3168"><span class="linenum">3168</span></a>      }
<a name="l3169"><span class="linenum">3169</span></a>  }
<a name="l3170"><span class="linenum">3170</span></a>  
<a name="l3171"><span class="linenum">3171</span></a>  function <a class="function" onClick="logFunction('feedback_init_feedback_session')" href="../../_functions/feedback_init_feedback_session.html" onMouseOver="funcPopup(event,'feedback_init_feedback_session')">feedback_init_feedback_session</a>() {
<a name="l3172"><span class="linenum">3172</span></a>  <span class="comment">    //initialize the feedback-Session - not nice at all!!</span>
<a name="l3173"><span class="linenum">3173</span></a>      global <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>;
<a name="l3174"><span class="linenum">3174</span></a>      if (!empty(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>)) {
<a name="l3175"><span class="linenum">3175</span></a>          if (!isset(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('feedback')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>) OR !<a class="phpfunction" onClick="logFunction('is_object')" href="../../_functions/is_object.html" onMouseOver="phpfuncPopup(event,'is_object')">is_object</a>(<a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('feedback')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a>)) {
<a name="l3176"><span class="linenum">3176</span></a>              <a class="var it584" onMouseOver="hilite(584)" onMouseOut="lolite()" onClick="logVariable('SESSION')" href="../../_variables/SESSION.html">$SESSION</a>-&gt;<a onClick="logVariable('feedback')" class="var it39589" onMouseOver="hilite(39589)" onMouseOut="lolite()" href="../../_variables/feedback.html">feedback</a> = new stdClass();
<a name="l3177"><span class="linenum">3177</span></a>          }
<a name="l3178"><span class="linenum">3178</span></a>      }
<a name="l3179"><span class="linenum">3179</span></a>  }
<a name="l3180"><span class="linenum">3180</span></a>  
<a name="l3181"><span class="linenum">3181</span></a>  <span class="comment">/**</span>
<a name="l3182"><span class="linenum">3182</span></a>  <span class="comment"> * Return a list of page types</span>
<a name="l3183"><span class="linenum">3183</span></a>  <span class="comment"> * @param string $pagetype current page type</span>
<a name="l3184"><span class="linenum">3184</span></a>  <span class="comment"> * @param stdClass $parentcontext Block's parent context</span>
<a name="l3185"><span class="linenum">3185</span></a>  <span class="comment"> * @param stdClass $currentcontext Current context of block</span>
<a name="l3186"><span class="linenum">3186</span></a>  <span class="comment"> */</span>
<a name="l3187"><span class="linenum">3187</span></a>  function <a class="function" onClick="logFunction('feedback_page_type_list')" href="../../_functions/feedback_page_type_list.html" onMouseOver="funcPopup(event,'feedback_page_type_list')">feedback_page_type_list</a>(<a class="var it3667" onMouseOver="hilite(3667)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>, <a class="var it4943" onMouseOver="hilite(4943)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../../_variables/parentcontext.html">$parentcontext</a>, <a class="var it5093" onMouseOver="hilite(5093)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../../_variables/currentcontext.html">$currentcontext</a>) {
<a name="l3188"><span class="linenum">3188</span></a>      <a class="var it8026" onMouseOver="hilite(8026)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a> = array('mod-feedback-*'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-feedback-x', 'feedback'));
<a name="l3189"><span class="linenum">3189</span></a>      return <a class="var it8026" onMouseOver="hilite(8026)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a>;
<a name="l3190"><span class="linenum">3190</span></a>  }
<a name="l3191"><span class="linenum">3191</span></a>  
<a name="l3192"><span class="linenum">3192</span></a>  <span class="comment">/**</span>
<a name="l3193"><span class="linenum">3193</span></a>  <span class="comment"> * Move save the items of the given $feedback in the order of $itemlist.</span>
<a name="l3194"><span class="linenum">3194</span></a>  <span class="comment"> * @param string $itemlist a comma separated list with item ids</span>
<a name="l3195"><span class="linenum">3195</span></a>  <span class="comment"> * @param stdClass $feedback</span>
<a name="l3196"><span class="linenum">3196</span></a>  <span class="comment"> * @return bool true if success</span>
<a name="l3197"><span class="linenum">3197</span></a>  <span class="comment"> */</span>
<a name="l3198"><span class="linenum">3198</span></a>  function <a class="function" onClick="logFunction('feedback_ajax_saveitemorder')" href="../../_functions/feedback_ajax_saveitemorder.html" onMouseOver="funcPopup(event,'feedback_ajax_saveitemorder')">feedback_ajax_saveitemorder</a>(<a class="var it23897" onMouseOver="hilite(23897)" onMouseOut="lolite()" onClick="logVariable('itemlist')" href="../../_variables/itemlist.html">$itemlist</a>, <a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>) {
<a name="l3199"><span class="linenum">3199</span></a>      global <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3200"><span class="linenum">3200</span></a>  
<a name="l3201"><span class="linenum">3201</span></a>      <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = true;
<a name="l3202"><span class="linenum">3202</span></a>      <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('position')" href="../../_variables/position.html">$position</a> = 0;
<a name="l3203"><span class="linenum">3203</span></a>      foreach (<a class="var it23897" onMouseOver="hilite(23897)" onMouseOut="lolite()" onClick="logVariable('itemlist')" href="../../_variables/itemlist.html">$itemlist</a> as <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>) {
<a name="l3204"><span class="linenum">3204</span></a>          <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('position')" href="../../_variables/position.html">$position</a>++;
<a name="l3205"><span class="linenum">3205</span></a>          <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> &amp;&amp; <a class="var it2" onMouseOver="hilite(2)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('feedback_item',
<a name="l3206"><span class="linenum">3206</span></a>                                              'position',
<a name="l3207"><span class="linenum">3207</span></a>                                              <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('position')" href="../../_variables/position.html">$position</a>,
<a name="l3208"><span class="linenum">3208</span></a>                                              array('id'=&gt;<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, 'feedback'=&gt;<a class="var it714" onMouseOver="hilite(714)" onMouseOut="lolite()" onClick="logVariable('feedback')" href="../../_variables/feedback.html">$feedback</a>-&gt;<a onClick="logVariable('id')" class="var it39694" onMouseOver="hilite(39694)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3209"><span class="linenum">3209</span></a>      }
<a name="l3210"><span class="linenum">3210</span></a>      return <a class="var it113" onMouseOver="hilite(113)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l3211"><span class="linenum">3211</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'feedback_init_feedback_session': ['feedback_init_feedback_session', '', [['mod/feedback','lib.php',3171]], 4],
'feedback_items_from_template': ['feedback_items_from_template', 'creates new feedback_item-records from template. if $deleteold is set true so the existing items of the given feedback will be deleted if $deleteold is set false so the new items will be appanded to the old items ', [['mod/feedback','lib.php',1209]], 1],
'feedback_renumber_items': ['feedback_renumber_items', 'renumbers all items of the given feedbackid ', [['mod/feedback','lib.php',1650]], 3],
'feedback_send_email_html': ['feedback_send_email_html', 'send the html-part of the email ', [['mod/feedback','lib.php',3071]], 2],
'feedback_clean_input_value': ['feedback_clean_input_value', 'cleans the userinput while submitting the form. ', [['mod/feedback','lib.php',2086]], 2],
'get_records_sql_menu': ['get_records_sql_menu', 'Get the first two columns from a number of records as an associative array using a SQL statement. ', [['lib/dml','moodle_database.php',1387]], 33],
'feedback_get_courses_from_sitecourse_map': ['feedback_get_courses_from_sitecourse_map', 'gets the courses from table feedback_sitecourse_map. ', [['mod/feedback','lib.php',2823]], 1],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1318]], 854],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/zend/Zend/Soap','Wsdl.php',641],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',582]], 3296],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',438],['lib/classes/event','base.php',682]], 778],
'feedback_get_depend_candidates_for_item': ['feedback_get_depend_candidates_for_item', 'load the available items for the depend item dropdown list shown in the edit_item form ', [['mod/feedback','lib.php',1425]], 7],
'compare_value': ['compare_value', '', [['mod/feedback/item/captcha','lib.php',318],['mod/feedback/item/multichoice','lib.php',599],['mod/feedback/item/textfield','lib.php',315],['mod/feedback/item/multichoicerated','lib.php',444],['mod/feedback/item/label','lib.php',223],['mod/feedback/item/textarea','lib.php',328],['mod/feedback/item/numeric','lib.php',507],['mod/feedback/item/info','lib.php',388],['mod/feedback/item','feedback_item_class.php',161]], 2],
'feedback_switch_item_required': ['feedback_switch_item_required', 'this function toggled the item-attribute required (yes/no) ', [['mod/feedback','lib.php',1630]], 1],
'send_stored_file': ['send_stored_file', 'Handles the sending of file data to the user\'s browser, including support for byteranges etc. ', [['lib','filelib.php',2170]], 73],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',530]], 174],
'optional_param_array': ['optional_param_array', 'Returns a particular array value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',648]], 71],
'strlen': ['strlen', 'Multibyte safe strlen() function, uses mbstring or iconv for UTF-8, falls back to typo3. ', [['lib/classes','text.php',281],['lib/typo3','class.t3lib_cs.php',1520]], 1698],
'feedback_count_incomplete_users': ['feedback_count_incomplete_users', 'count users which have not completed the feedback ', [['mod/feedback','lib.php',921]], 1],
'feedback_delete_completedtmp': ['feedback_delete_completedtmp', 'deletes the given temporary completed and all related temporary values ', [['mod/feedback','lib.php',1935]], 2],
'get_hasvalue': ['get_hasvalue', '', [['mod/feedback/item/captcha','lib.php',329],['mod/feedback/item/multichoice','lib.php',634],['mod/feedback/item/textfield','lib.php',326],['mod/feedback/item/multichoicerated','lib.php',483],['mod/feedback/item/label','lib.php',248],['mod/feedback/item/textarea','lib.php',339],['mod/feedback/item/numeric','lib.php',540],['mod/feedback/item/info','lib.php',399],['mod/feedback/item','feedback_item_class.php',165]], 11],
'feedback_user_outline': ['feedback_user_outline', 'Return a small object with summary information about what a user has done with a given particular instance of this module Used for user activity reports. $return->time = the time they did it $return->info = a short text description ', [['mod/feedback','lib.php',333]], 0],
'count_records': ['count_records', 'Count the records in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1717]], 1399],
'delete_area_files': ['delete_area_files', 'Delete all area files (optionally limited by itemid). ', [['lib/filestorage','file_storage.php',740]], 117],
'feedback_create_pagebreak': ['feedback_create_pagebreak', 'this creates a pagebreak. a pagebreak is a special kind of item ', [['mod/feedback','lib.php',1955]], 1],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3234],['mod/assign','locallib.php',3440]], 532],
'feedback_update_instance': ['feedback_update_instance', 'this will update a given instance ', [['mod/feedback','lib.php',125]], 0],
'feedback_save_values': ['feedback_save_values', 'this saves the values of an completed. if the param $tmp is set true so the values are saved temporary in table feedback_valuetmp. if there is already a completed and the userid is set so the values are updated. on all other things new value records will be created. ', [['mod/feedback','lib.php',2097]], 1],
'clean_input_value': ['clean_input_value', '', [['mod/feedback/item/captcha','lib.php',347],['mod/feedback/item/multichoice','lib.php',859],['mod/feedback/item/textfield','lib.php',338],['mod/feedback/item/multichoicerated','lib.php',707],['mod/feedback/item/label','lib.php',276],['mod/feedback/item/textarea','lib.php',351],['mod/feedback/item/numeric','lib.php',552],['mod/feedback/item/info','lib.php',411],['mod/feedback/item','feedback_item_class.php',188]], 3],
'feedback_get_feedbacks_from_sitecourse_map': ['feedback_get_feedbacks_from_sitecourse_map', 'gets the feedbacks from table feedback_sitecourse_map. this is used to show the global feedbacks on the feedback block all feedbacks with the following criteria will be selected:<br /> ', [['mod/feedback','lib.php',2765]], 1],
'feedback_user_complete': ['feedback_user_complete', 'Print a detailed representation of what a  user has done with a given particular instance of this module, for user activity reports. ', [['mod/feedback','lib.php',536]], 0],
'clone': ['clone', '', [['lib/editor/tinymce/tiny_mce/3.5.11/plugins/media/js','media.js',11]], 315],
'feedback_count_complete_users': ['feedback_count_complete_users', 'count users which have completed a feedback ', [['mod/feedback','lib.php',936]], 1],
'feedback_reset_userdata': ['feedback_reset_userdata', 'This function is used by the reset_course_userdata function in moodlelib. This function will remove all responses from the specified feedback and clean up any related data. ', [['mod/feedback','lib.php',603]], 0],
'update_state': ['update_state', 'Updates (if necessary) the completion state of activity $cm for the given user. ', [['lib','completionlib.php',520]], 37],
'value_type': ['value_type', '', [['mod/feedback/item/captcha','lib.php',343],['mod/feedback/item/multichoice','lib.php',851],['mod/feedback/item/textfield','lib.php',334],['mod/feedback/item/multichoicerated','lib.php',703],['mod/feedback/item/label','lib.php',273],['mod/feedback/item/textarea','lib.php',347],['mod/feedback/item/numeric','lib.php',548],['mod/feedback/item/info','lib.php',407],['mod/feedback/item','feedback_item_class.php',44],['mod/feedback/item','feedback_item_class.php',186]], 9],
'value_is_array': ['value_is_array', '', [['mod/feedback/item/multichoice','lib.php',855],['mod/feedback/item','feedback_item_class.php',48]], 3],
'feedback_create_item': ['feedback_create_item', 'creates a new item-record ', [['mod/feedback','lib.php',1459]], 0],
'feedback_scale_used_anywhere': ['feedback_scale_used_anywhere', 'Checks if scale is being used by any instance of feedback ', [['mod/feedback','lib.php',564]], 0],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required. ', [['lib/dml','pgsql_native_moodle_database.php',883],['lib/dml','oci_native_moodle_database.php',1249],['lib/dml','sqlsrv_native_moodle_database.php',978],['lib/dml','mssql_native_moodle_database.php',898],['lib/dml','mysqli_native_moodle_database.php',1177],['lib/dml/tests','dml_test.php',5427],['lib/dml','pdo_moodle_database.php',386],['question/engine/upgrade','upgradelib.php',121]], 1512],
'feedback_get_all_break_positions': ['feedback_get_all_break_positions', 'get all positions of pagebreaks in the given feedback ', [['mod/feedback','lib.php',1990]], 4],
'feedback_page_type_list': ['feedback_page_type_list', 'Return a list of page types ', [['mod/feedback','lib.php',3181]], 0],
'feedback_update_values': ['feedback_update_values', 'this function updates a complete-record and the related value-records. depending on the $tmp (true/false) the values are saved temporary or permanently ', [['mod/feedback','lib.php',2339]], 2],
'get_list_of_plugins': ['get_list_of_plugins', 'Lists plugin-like directories within specified directory ', [['lib','moodlelib.php',7043]], 11],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',884],['lib','accesslib.php',346]], 1929],
'feedback_get_completion_state': ['feedback_get_completion_state', 'Obtains the automatic completion state for this feedback based on the condition in feedback settings. ', [['mod/feedback','lib.php',509]], 0],
'feedback_get_last_break_position': ['feedback_get_last_break_position', 'get the position of the last pagebreak ', [['mod/feedback','lib.php',2008]], 1],
'print_item_complete': ['print_item_complete', 'print the item at the complete-page of feedback ', [['mod/feedback/item/captcha','lib.php',148],['mod/feedback/item/multichoice','lib.php',393],['mod/feedback/item/textfield','lib.php',226],['mod/feedback/item/multichoicerated','lib.php',335],['mod/feedback/item/label','lib.php',194],['mod/feedback/item/textarea','lib.php',237],['mod/feedback/item/numeric','lib.php',304],['mod/feedback/item/info','lib.php',261],['mod/feedback/item','feedback_item_class.php',180]], 2],
'filter_user_list': ['filter_user_list', 'Tests against a user list. Users who cannot access the activity due to availability restrictions will be removed from the list. ', [['availability/classes','info_module.php',76],['availability/classes','info.php',613],['availability/condition/profile/classes','condition.php',448],['availability/classes','tree_node.php',161],['availability/condition/grouping/classes','condition.php',225],['availability/tests/fixtures','mock_condition.php',111],['availability/condition/group/classes','condition.php',193],['availability/classes','tree.php',297]], 39],
'feedback_reset_course_form_definition': ['feedback_reset_course_form_definition', 'Called by course/reset.php ', [['mod/feedback','lib.php',657]], 0],
'get_string': ['get_string', 'Return a core get_string() call ', [['lib/external','externallib.php',112],['lib','moodlelib.php',6538],['lib','moodlelib.php',9417],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38],['lib/classes','string_manager_install.php',95],['question/behaviour','behaviourbase.php',756]], 19235],
'feedback_save_tmp_values': ['feedback_save_tmp_values', 'this saves the temporary saved values permanently ', [['mod/feedback','lib.php',1860]], 4],
'feedback_get_recent_mod_activity': ['feedback_get_recent_mod_activity', 'Returns all users who has completed a specified feedback since a given time many thanks to Manolescu Dorel, who contributed these two functions ', [['mod/feedback','lib.php',350]], 0],
'feedback_get_extra_capabilities': ['feedback_get_extra_capabilities', 'Returns all other caps used in module. ', [['mod/feedback','lib.php',43]], 0],
'unalias': ['unalias', 'Extract the aliased user fields from a given record ', [['lib','outputcomponents.php',282]], 11],
'feedback_delete_instance': ['feedback_delete_instance', 'this will delete a given instance. all referenced data also will be deleted ', [['mod/feedback','lib.php',277]], 0],
'file_save_draft_area_files': ['file_save_draft_area_files', 'Saves files from a draft file area to a real one (merging the list of files). Can rewrite URLs in some content at the same time if desired. ', [['lib','filelib.php',772]], 53],
'get_records_select': ['get_records_select', 'Get a number of records as an array of objects which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1283]], 163],
'get_users_by_capability': ['get_users_by_capability', 'Who has this capability in this context? ', [['lib','accesslib.php',3707],['availability/classes','capability_checker.php',58]], 53],
'feedback_delete_item': ['feedback_delete_item', 'deletes an item and also deletes all related values ', [['mod/feedback','lib.php',1522]], 5],
'userdate': ['userdate', 'Also in ADORecordSet. ', [['lib/adodb','adodb.inc.php',2607],['lib/adodb','adodb.inc.php',3271],['lib','moodlelib.php',2150]], 496],
'get_records': ['get_records', 'Get a number of records as an array of objects where all the given conditions met. ', [['lib/dml','moodle_database.php',1236],['lib','coursecatlib.php',654],['question','category_class.php',63]], 860],
'get_records_menu': ['get_records_menu', 'Get the first two columns from a number of records as an associative array where all the given conditions met. ', [['lib/dml','moodle_database.php',1326]], 69],
'feedback_set_tmp_values': ['feedback_set_tmp_values', 'if the user completes a feedback and there is a pagebreak so the values are saved temporary. the values are not saved permanently until the user click on save button ', [['mod/feedback','lib.php',1829]], 1],
'feedback_delete_template': ['feedback_delete_template', 'deletes all feedback_items related to the given template id ', [['mod/feedback','lib.php',1189]], 1],
'feedback_send_email': ['feedback_send_email', 'sends an email to the teachers of the course where the given feedback is placed. ', [['mod/feedback','lib.php',2895]], 1],
'feedback_save_guest_values': ['feedback_save_guest_values', 'this saves the values from anonymous user such as guest on the main-site ', [['mod/feedback','lib.php',2129]], 1],
'feedback_check_is_switchrole': ['feedback_check_is_switchrole', 'returns true if the current role is faked by switching role feature ', [['mod/feedback','lib.php',844]], 2],
'set_field': ['set_field', 'Sets the custom profile field used for testing. ', [['availability/condition/profile/tests','condition_test.php',349],['lib/dml','moodle_database.php',1688]], 462],
'feedback_send_email_anonym': ['feedback_send_email_anonym', 'sends an email to the teachers of the course where the given feedback is placed. ', [['mod/feedback','lib.php',2996]], 2],
'feedback_reset_course_form': ['feedback_reset_course_form', 'Called by course/reset.php and shows the formdata by coursereset. it prints checkboxes for each feedback available at the given course there are two checkboxes: 1) delete userdata and keep the feedback 2) delete userdata and drop the feedback ', [['mod/feedback','lib.php',699]], 0],
'feedback_delete_course_module': ['feedback_delete_course_module', 'this function is called by {@link feedback_delete_userdata()} it drops the feedback-instance from the course_module table ', [['mod/feedback','lib.php',803]], 0],
'feedback_supports': ['feedback_supports', '', [['mod/feedback','lib.php',62]], 0],
'feedback_save_as_template': ['feedback_save_as_template', 'creates new template items. all items will be copied and the attribute feedback will be set to 0 and the attribute template will be set to the new templateid ', [['mod/feedback','lib.php',1105]], 1],
'feedback_get_editor_options': ['feedback_get_editor_options', 'This gets an array with default options for the editor ', [['mod/feedback','lib.php',734]], 4],
'feedback_get_completeds_group_count': ['feedback_get_completeds_group_count', 'get the count of completeds depending on the given groupid. ', [['mod/feedback','lib.php',2616]], 7],
'user_picture': ['user_picture', '', [['mod/quiz','attemptlib.php',2188],['lib','outputrenderers.php',2367],['lib','outputrenderers.php',4702]], 114],
'get_record': ['get_record', 'Get a single database record as an object where all the given conditions met. ', [['lib/dml','moodle_database.php',1413]], 2960],
'feedback_get_item_value': ['feedback_get_item_value', 'get the value from the given item related to the given completed. the value can come as temporary or as permanently value. the deciding is done by $tmp ', [['mod/feedback','lib.php',2150]], 3],
'record_exists': ['record_exists', 'Test whether a record exists in a table where all the given conditions met. ', [['lib/dml','moodle_database.php',1768]], 735],
'get_field_sql': ['get_field_sql', 'Get a single field value (first field) using a SQL statement. ', [['lib/dml','moodle_database.php',1539]], 135],
'feedback_load_feedback_items': ['feedback_load_feedback_items', 'load the available item plugins from given subdirectory of $CFG->dirroot the default is "mod/feedback/item" ', [['mod/feedback','lib.php',1380]], 3],
'feedback_get_view_actions': ['feedback_get_view_actions', 'List the actions that correspond to a view of this module. This is used by the participation report. ', [['mod/feedback','lib.php',575]], 0],
'is_enabled': ['is_enabled', 'Allows hiding this plugin from the submission/feedback screen if it is not enabled. ', [['mod/assign','assignmentplugin.php',223],['lib/classes/plugininfo','orphaned.php',37],['lib','completionlib.php',269],['mod/assign/submission/comments','locallib.php',172],['mod/assign/feedback/editpdf','locallib.php',276],['lib/classes/plugininfo','base.php',371],['lib/classes/plugininfo','tool.php',39],['admin/tool/health','index.php',393],['admin/tool/log/classes/plugininfo','logstore.php',35],['lib/classes/message/inbound','manager.php',37],['lib/classes/plugininfo','mnetservice.php',33],['mod/assignment/classes/plugininfo','assignment.php',32],['lib','adminlib.php',1952],['mod/assign/feedback/offline','locallib.php',365],['lib','medialib.php',318],['lib','medialib.php',634],['lib','medialib.php',1265]], 200],
'feedback_clean_up_sitecourse_map': ['feedback_clean_up_sitecourse_map', 'removes non existing courses or feedbacks from sitecourse_map. it shouldn\'t be called all too often a good place for it could be the mapcourse.php or unmapcourse.php ', [['mod/feedback','lib.php',2843]], 1],
'feedback_pluginfile': ['feedback_pluginfile', 'Serves the files included in feedback items like label. Implements needed access control ;-) ', [['mod/feedback','lib.php',166]], 0],
'feedback_get_completeds_group': ['feedback_get_completeds_group', 'get the completeds depending on the given groupid. ', [['mod/feedback','lib.php',2569]], 2],
'isloggedin': ['isloggedin', 'Return true, if session is currently logged into the backend server ', [['lib/zend/Zend/Service','LiveDocx.php',293],['lib','accesslib.php',1909]], 177],
'feedback_print_numeric_option_list': ['feedback_print_numeric_option_list', 'prints the option items of a selection-input item (dropdownlist). ', [['mod/feedback','lib.php',2876]], 0],
'feedback_delete_all_completeds': ['feedback_delete_all_completeds', 'deletes all completed-recordsets from a feedback. all related data such as values also will be deleted ', [['mod/feedback','lib.php',2647]], 1],
'feedback_moveup_item': ['feedback_moveup_item', 'this decreases the position of the given item ', [['mod/feedback','lib.php',1670]], 1],
'feedback_set_events': ['feedback_set_events', 'This creates new events given as timeopen and closeopen by $feedback. ', [['mod/feedback','lib.php',744]], 2],
'check_value': ['check_value', '', [['mod/feedback/item/captcha','lib.php',286],['mod/feedback/item/multichoice','lib.php',574],['mod/feedback/item/textfield','lib.php',296],['mod/feedback/item/multichoicerated','lib.php',426],['mod/feedback/item/label','lib.php',256],['mod/feedback/item/textarea','lib.php',309],['mod/feedback/item/numeric','lib.php',447],['mod/feedback/item/info','lib.php',376],['mod/feedback/item','feedback_item_class.php',157]], 4],
'feedback_reset_course_form_defaults': ['feedback_reset_course_form_defaults', 'Course reset form defaults. ', [['mod/feedback','lib.php',679]], 0],
'count_records_sql': ['count_records_sql', 'Get the result of a SQL SELECT COUNT(...) query. ', [['lib/dml','moodle_database.php',1747]], 132],
'feedback_add_instance': ['feedback_add_instance', 'this will create a new instance and return the id number of the new instance. ', [['mod/feedback','lib.php',78]], 0],
'feedback_ajax_saveitemorder': ['feedback_ajax_saveitemorder', 'Move save the items of the given $feedback in the order of $itemlist. ', [['mod/feedback','lib.php',3192]], 1],
'add': ['add', '', [['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',454],['blog','locallib.php',242],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['backup/cc','validator.php',51],['lib/google/src/Google/Http','Batch.php',47],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['lib/zend/Zend/Service/Simpy','WatchlistFilterSet.php',47],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/lessphp/Output','Mapped.php',50],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/google/src/Google/Service','Webmasters.php',375],['lib/horde/framework/Horde','Variables.php',297],['lib','outputcomponents.php',2700],['lib','outputcomponents.php',3375],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/zend/Zend','Date.php',1081],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['comment','lib.php',675],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',86],['lib/horde/framework/Horde','Stream.php',116],['backup/cc/cc_lib/gral_lib','cssparser.php',111],['lib/lessphp','Output.php',18],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib','adminlib.php',736],['lib','adminlib.php',895],['lib','adminlib.php',1447],['lib','csslib.php',1508],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib','navigationlib.php',302],['lib','navigationlib.php',758],['lib','navigationlib.php',3288],['lib','navigationlib.php',3542],['lib/phpexcel/PHPExcel','HashTable.php',85],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454]], 5988],
'feedback_delete_completed': ['feedback_delete_completed', 'deletes a completed given by completedid. all related data such values or tracking data also will be deleted ', [['mod/feedback','lib.php',2666]], 4],
'feedback_is_already_submitted': ['feedback_is_already_submitted', 'check for multiple_submit = false. if the feedback is global so the courseid must be given ', [['mod/feedback','lib.php',2480]], 3],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',757]], 262],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',2001]], 277],
'pix_url': ['pix_url', 'Return the URL for an image ', [['lib','outputlib.php',1356],['lib','outputrenderers.php',234]], 406],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 1891],
'get_records_select_menu': ['get_records_select_menu', 'Get the first two columns from a number of records as an associative array which match a particular WHERE clause. ', [['lib/dml','moodle_database.php',1358]], 15],
'feedback_get_receivemail_users': ['feedback_get_receivemail_users', 'get users which have the receivemail-capability ', [['mod/feedback','lib.php',1053]], 3],
'feedback_load_feedback_items_options': ['feedback_load_feedback_items_options', 'load the available item plugins to use as dropdown-options ', [['mod/feedback','lib.php',1402]], 1],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1331]], 365],
'instance_is_visible': ['instance_is_visible', 'Determine whether a module instance is visible within a course ', [['lib','datalib.php',1510]], 6],
'create': ['create', 'Creates a new 2048 bit RSA key pair and returns a unique ID that can be used to reference this key pair when launching new instances. ', [['lib/zend/Zend/Service/Amazon/Ec2','Keypair.php',39],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',271],['repository/filesystem','lib.php',283],['lib/zend/Zend/Service/Amazon/Ec2','Securitygroups.php',39],['lib/google/src/Google/Service','Gmail.php',670],['lib/google/src/Google/Service','Gmail.php',827],['course','lib.php',2874],['lib/classes/event','base.php',139],['lib/google/src/Google/Service','Genomics.php',618],['lib/google/src/Google/Service','Genomics.php',717],['lib/google/src/Google/Service','Genomics.php',850],['lib/google/src/Google/Service','Genomics.php',1313],['lib','modinfolib.php',1747],['calendar','lib.php',2651],['lib/zend/Zend/Service/Amazon','Sqs.php',82],['lib','weblib.php',3048],['mod/lesson','locallib.php',1013],['mod/lesson','locallib.php',2166],['mod/lesson','locallib.php',3203],['lib/google/src/Google/Service','Fitness.php',340],['lib/google/src/Google/Service','TagManager.php',1034],['lib/google/src/Google/Service','TagManager.php',1124],['lib/google/src/Google/Service','TagManager.php',1217],['lib/google/src/Google/Service','TagManager.php',1310],['lib/google/src/Google/Service','TagManager.php',1403],['lib/google/src/Google/Service','TagManager.php',1497],['lib/google/src/Google/Service','TagManager.php',1591],['lib/google/src/Google/Service','TagManager.php',1742],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Container.php',314],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['repository','lib.php',206],['repository','lib.php',1960],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',555],['lib/google/src/Google/Service','Games.php',1648],['lib/google/src/Google/Service','Games.php',2012],['lib/google/src/Google/Service','MapsEngine.php',1676],['lib/google/src/Google/Service','MapsEngine.php',1976],['lib/google/src/Google/Service','MapsEngine.php',2252],['lib/google/src/Google/Service','MapsEngine.php',2329],['lib/google/src/Google/Service','MapsEngine.php',2897],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Pubsub.php',219],['lib/google/src/Google/Service','Pubsub.php',364],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/simplepie/library/SimplePie','Registry.php',153],['lib','navigationlib.php',266],['lib/google/src/Google/Service','Dns.php',282],['lib/google/src/Google/Service','Dns.php',355],['lib','coursecatlib.php',328],['mod/quiz/classes','structure.php',65]], 3074],
'feedback_extend_settings_navigation': ['feedback_extend_settings_navigation', 'Adds module specific settings to the settings block ', [['mod/feedback','lib.php',3110]], 0],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',605]], 2167],
'checkbox': ['checkbox', 'Creates a CheckBox field ', [['lib/tcpdf','tcpdf.php',13017],['lib','outputcomponents.php',1209]], 31],
'feedback_get_post_actions': ['feedback_get_post_actions', 'List the actions that correspond to a post of this module. This is used by the participation report. ', [['mod/feedback','lib.php',589]], 0],
'feedback_print_item_complete': ['feedback_print_item_complete', 'prints the given item in the completion form. each item-class has an own print_item_complete function implemented. ', [['mod/feedback','lib.php',1790]], 3],
'feedback_create_template': ['feedback_create_template', 'creates a new template-record. ', [['mod/feedback','lib.php',1084]], 1],
'feedback_delete_course': ['feedback_delete_course', 'this is called after deleting all instances if the course will be deleted. only templates have to be deleted ', [['mod/feedback','lib.php',318]], 0],
'feedback_encode_target_url': ['feedback_encode_target_url', '', [['mod/feedback','lib.php',3101]], 2],
'feedback_scale_used': ['feedback_scale_used', '', [['mod/feedback','lib.php',560]], 0],
'print_item_show_value': ['print_item_show_value', 'print the item at the complete-page of feedback ', [['mod/feedback/item/captcha','lib.php',253],['mod/feedback/item/multichoice','lib.php',503],['mod/feedback/item/textfield','lib.php',269],['mod/feedback/item/multichoicerated','lib.php',387],['mod/feedback/item/label','lib.php',207],['mod/feedback/item/textarea','lib.php',280],['mod/feedback/item/numeric','lib.php',382],['mod/feedback/item/info','lib.php',344],['mod/feedback/item','feedback_item_class.php',182]], 2],
'feedback_create_values': ['feedback_create_values', 'this function create a complete-record and the related value-records. depending on the $tmp (true/false) the values are saved temporary or permanently ', [['mod/feedback','lib.php',2269]], 3],
'feedback_print_item_preview': ['feedback_print_item_preview', 'prints the given item as a preview. each item-class has an own print_item_preview function implemented. ', [['mod/feedback','lib.php',1772]], 2],
'feedback_send_email_text': ['feedback_send_email_text', 'send the text-part of the email ', [['mod/feedback','lib.php',3052]], 2],
'feedback_get_incomplete_users': ['feedback_get_incomplete_users', 'count users which have not completed the feedback ', [['mod/feedback','lib.php',861]], 2],
'feedback_get_viewreports_users': ['feedback_get_viewreports_users', 'get users which have the viewreports-capability ', [['mod/feedback','lib.php',1027]], 0],
'instance': ['instance', 'Retrieve sole instance of the registry. ', [['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29],['lib/classes','useragent.php',101],['backup/cc','validator.php',35],['lib/portfolio','exporter.php',251],['lib/tests','update_deployer_test.php',69],['lib/tests','string_manager_standard_test.php',124],['lib','modinfolib.php',373],['','mdeploy.php',96],['cache','disabledlib.php',171],['cache','disabledlib.php',296],['admin/tool/installaddon/classes','validator.php',85],['cache/classes','config.php',87],['course/format','lib.php',156],['lib','accesslib.php',6184],['lib','accesslib.php',6436],['lib','accesslib.php',6614],['lib','accesslib.php',6868],['lib','accesslib.php',7129],['lib','accesslib.php',7341],['cache','locallib.php',52],['lib/htmlpurifier','HTMLPurifier.php',251],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['cache/classes','helper.php',76],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['lib/classes','plugin_manager.php',83],['lib','filterlib.php',81],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/classes/update','deployer.php',54],['admin/tool/installaddon/classes','pluginfo_client.php',37],['admin/tool/installaddon/classes','installer.php',40],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443]], 3942],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects using a SQL statement. ', [['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','oci_native_moodle_database.php',1102],['lib/dml','sqlsrv_native_moodle_database.php',823],['lib/dml','mssql_native_moodle_database.php',741],['lib/dml','mysqli_native_moodle_database.php',1049],['lib/dml/tests','dml_test.php',5424],['lib/dml','pdo_moodle_database.php',308]], 678],
'format_module_intro': ['format_module_intro', 'Formats activity intro text ', [['lib','weblib.php',1473]], 57],
'feedback_get_group_values': ['feedback_get_group_values', 'get the values of an item depending on the given groupid. if the feedback is anonymous so the values are shuffled ', [['mod/feedback','lib.php',2410]], 8],
'fields': ['fields', 'Get the value of a field in the current row by column name. Will not work if ADODB_FETCH_MODE is set to ADODB_FETCH_NUM. ', [['lib/adodb','adodb.inc.php',3469],['lib/adodb','adodb.inc.php',4073],['lib/adodb/drivers','adodb-odbtp.inc.php',718],['lib/adodb/drivers','adodb-sqlite.inc.php',369],['lib/adodb/drivers','adodb-pdo.inc.php',611],['lib/adodb/drivers','adodb-mysqli.inc.php',963],['lib/adodb/drivers','adodb-mssql.inc.php',904],['mod/quiz/classes','admin_review_setting.php',65],['lib/adodb/drivers','adodb-postgres64.inc.php',951],['lib/adodb/drivers','adodb-oracle.inc.php',265],['lib/adodb/drivers','adodb-ado.inc.php',373],['lib','outputcomponents.php',235],['lib/adodb/drivers','adodb-ado5.inc.php',410],['lib/adodb/drivers','adodb-db2.inc.php',754],['lib/adodb/drivers','adodb-sqlite3.inc.php',399],['lib/adodb/drivers','adodb-mssqlnative.inc.php',888],['lib/adodb/drivers','adodb-ibase.inc.php',833],['lib/adodb/drivers','adodb-oci8po.inc.php',91],['lib/adodb/drivers','adodb-ads.inc.php',690],['lib/adodb/drivers','adodb-odbc.inc.php',642],['lib/adodb/drivers','adodb-mysql.inc.php',764],['lib/adodb/drivers','adodb-oci8.inc.php',1549]], 145],
'feedback_is_course_in_sitecourse_map': ['feedback_is_course_in_sitecourse_map', 'checks if the course and the feedback is in the table feedback_sitecourse_map. ', [['mod/feedback','lib.php',2739]], 0],
'feedback_check_values': ['feedback_check_values', 'this function checks the correctness of values. the rules for this are implemented in the class of each item. it can be the required attribute or the value self e.g. numeric. the params first/lastitem are given to determine the visible range between pagebreaks. ', [['mod/feedback','lib.php',2194]], 2],
'feedback_print_recent_mod_activity': ['feedback_print_recent_mod_activity', 'Prints all users who has completed a specified feedback since a given time many thanks to Manolescu Dorel, who contributed these two functions ', [['mod/feedback','lib.php',467]], 0],
'feedback_get_complete_users': ['feedback_get_complete_users', 'get users which have completed a feedback ', [['mod/feedback','lib.php',966]], 1],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pgsql_native_moodle_database.php',1137],['lib/dml','oci_native_moodle_database.php',1355],['lib/dml','sqlsrv_native_moodle_database.php',1081],['lib/dml','mssql_native_moodle_database.php',1003],['lib/dml','mysqli_native_moodle_database.php',1397],['lib/dml/tests','dml_test.php',5430],['lib/dml','pdo_moodle_database.php',460]], 565],
'feedback_move_item': ['feedback_move_item', 'here the position of the given item will be set to the value in $pos ', [['mod/feedback','lib.php',1737]], 2],
'feedback_print_item_show_value': ['feedback_print_item_show_value', 'prints the given item in the show entries page. each item-class has an own print_item_show_value function implemented. ', [['mod/feedback','lib.php',1810]], 3],
'feedback_get_template_list': ['feedback_get_template_list', 'get the list of available templates. if the $onlyown param is set true so only templates from own course will be served this is important for droping templates ', [['mod/feedback','lib.php',1324]], 4],
'sql_compare_text': ['sql_compare_text', 'Returns the SQL text to be used to compare one TEXT (clob) column with one varchar column, because some RDBMS doesn\'t support such direct comparisons. ', [['lib/dml','moodle_database.php',1991]], 83],
'groups_get_all_groups': ['groups_get_all_groups', 'Gets array of all groups in a specified course. ', [['lib','grouplib.php',189]], 104],
'feedback_get_page_to_continue': ['feedback_get_page_to_continue', 'this returns the position where the user can continue the completing. ', [['mod/feedback','lib.php',2021]], 1],
'feedback_compare_item_value': ['feedback_compare_item_value', 'compares the value of the itemid related to the completedid with the dependvalue. this is used if a depend item is set. the value can come as temporary or as permanently value. the deciding is done by $tmp. ', [['mod/feedback','lib.php',2168]], 4],
'feedback_update_item': ['feedback_update_item', 'save the changes of a given item. ', [['mod/feedback','lib.php',1510]], 6],
'feedback_delete_all_items': ['feedback_delete_all_items', 'deletes all items of the given feedbackid ', [['mod/feedback','lib.php',1586]], 1],
'message_send': ['message_send', 'Called when a message provider wants to send a message. This functions checks the message recipient\'s message processor configuration then sends the message to the configured processors ', [['lib','messagelib.php',29]], 99],
'is_directory': ['is_directory', 'Whether or not this is a directory ', [['lib/filebrowser','file_info_context_course.php',372],['lib/filebrowser','file_info_context_course.php',657],['lib/filebrowser','file_info_context_course.php',803],['lib/filebrowser','file_info_context_system.php',83],['mod/book','locallib.php',454],['lib/filebrowser','file_info_context_coursecat.php',143],['mod/forum','locallib.php',463],['lib/filebrowser','file_info_context_module.php',249],['lib/filebrowser','file_info_context_user.php',265],['mod/data','locallib.php',475],['mod/workshop','fileinfolib.php',82],['mod/workshop','fileinfolib.php',241],['mod/imscp','locallib.php',328],['mod/lesson/classes','file_info.php',94],['mod/glossary','locallib.php',525],['lib/filestorage','stored_file.php',310],['lib/filebrowser','virtual_root_file.php',60],['lib/filebrowser','file_info_stored.php',267]], 131],
'feedback_movedown_item': ['feedback_movedown_item', 'this increased the position of the given item ', [['mod/feedback','lib.php',1707]], 1],
'groups_get_activity_groupmode': ['groups_get_activity_groupmode', 'Returns effective groupmode used in activity, course setting overrides activity setting if groupmodeforce enabled. ', [['lib','grouplib.php',468]], 133],
'get_coursemodule_from_id': ['get_coursemodule_from_id', 'Given an id of a course module, finds the coursemodule description ', [['lib','datalib.php',1269]], 212],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',449]], 1560],
'print_item_preview': ['print_item_preview', 'print the item at the edit-page of feedback ', [['mod/feedback/item/captcha','lib.php',115],['mod/feedback/item/multichoice','lib.php',298],['mod/feedback/item/textfield','lib.php',182],['mod/feedback/item/multichoicerated','lib.php',286],['mod/feedback/item/label','lib.php',174],['mod/feedback/item/textarea','lib.php',193],['mod/feedback/item/numeric','lib.php',223],['mod/feedback/item/info','lib.php',185],['mod/feedback/item','feedback_item_class.php',178]], 2],
'feedback_get_item_class': ['feedback_get_item_class', 'load the lib.php from item-plugin-dir and returns the instance of the itemclass ', [['mod/feedback','lib.php',1361]], 15],
'create_value': ['create_value', '', [['mod/feedback/item/captcha','lib.php',310],['mod/feedback/item/multichoice','lib.php',588],['mod/feedback/item/textfield','lib.php',307],['mod/feedback/item/multichoicerated','lib.php',436],['mod/feedback/item/label','lib.php',219],['mod/feedback/item/textarea','lib.php',320],['mod/feedback/item/numeric','lib.php',493],['mod/feedback/item/info','lib.php',380],['mod/feedback/item','feedback_item_class.php',159]], 3],
'postupdate': ['postupdate', '', [['mod/feedback/item/label','lib.php',232]], 1],
'get_file_by_hash': ['get_file_by_hash', 'Fetch file using local file full pathname hash ', [['lib/filestorage','file_storage.php',427]], 75],
'feedback_cron': ['feedback_cron', '', [['mod/feedback','lib.php',553]], 0],
'feedback_is_feedback_in_sitecourse_map': ['feedback_is_feedback_in_sitecourse_map', 'checks if the feedback is in the table feedback_sitecourse_map. ', [['mod/feedback','lib.php',2753]], 0],
'feedback_get_context': ['feedback_get_context', 'returns the context-id related to the given coursemodule-id ', [['mod/feedback','lib.php',826]], 0],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','moodle_database.php',1815],['lib/dml','sqlite3_pdo_moodle_database.php',337]], 778],
'get_groups': ['get_groups', 'Returns groups that the current user belongs to on the course. Note: If not already available, this may make a database query. ', [['lib','modinfolib.php',289],['group','externallib.php',155],['group','externallib.php',1338]], 30],
'get_field': ['get_field', 'Get the right field name to fetch a stat for these attempts that is calculated for more than one $whichattempts (count or avg). ', [['mod/quiz/report/statistics/classes','calculated.php',109],['lib/dml','moodle_database.php',1497],['user/filters','lib.php',124],['lib/behat','behat_field_manager.php',243]], 485],
'can_switch_require': ['can_switch_require', '', [['mod/feedback/item/captcha','lib.php',339],['mod/feedback/item/multichoice','lib.php',847],['mod/feedback/item/textfield','lib.php',330],['mod/feedback/item/multichoicerated','lib.php',699],['mod/feedback/item/label','lib.php',252],['mod/feedback/item/textarea','lib.php',343],['mod/feedback/item/numeric','lib.php',544],['mod/feedback/item/info','lib.php',403],['mod/feedback/item','feedback_item_class.php',184]], 2],
'feedback_get_current_completed': ['feedback_get_current_completed', 'if the completion of a feedback will be continued eg. by pagebreak or by multiple submit so the complete must be found. if the param $tmp is set true so all things are related to temporary completeds ', [['mod/feedback','lib.php',2508]], 7],
'create_file_from_storedfile': ['create_file_from_storedfile', 'Add new local file based on existing local file. ', [['lib/filestorage','file_storage.php',934],['lib/filebrowser','file_info.php',405],['lib/filebrowser','file_info_stored.php',584]], 46],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',5950]], 486],
'date': ['date', '', [], 790],
'explode': ['explode', '', [], 1599],
'is_array': ['is_array', '', [], 1820],
'count': ['count', '', [], 3984],
'trim': ['trim', '', [], 1889],
'class_exists': ['class_exists', '', [], 273],
'time': ['time', '', [], 1768],
'array_shift': ['array_shift', '', [], 607],
'shuffle': ['shuffle', '', [], 25],
'implode': ['implode', '', [], 1259],
'array_slice': ['array_slice', '', [], 169],
'substr': ['substr', '', [], 2883],
'htmlentities': ['htmlentities', '', [], 53],
'is_null': ['is_null', '', [], 1992],
'sha1': ['sha1', '', [], 188],
'array_keys': ['array_keys', '', [], 1152],
'array_diff': ['array_diff', '', [], 93],
'asort': ['asort', '', [], 109],
'array_merge': ['array_merge', '', [], 2320],
'mktime': ['mktime', '', [], 187],
'array_values': ['array_values', '', [], 283],
'intval': ['intval', '', [], 484],
'define': ['define', '', [], 2170],
'max': ['max', '', [], 1096],
'array_intersect': ['array_intersect', '', [], 51],
'strpos': ['strpos', '', [], 1623],
'is_object': ['is_object', '', [], 508]};
CLASS_DATA={
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6106]], 929],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',240]], 2887],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6766]], 1197],
'user_picture': ['user_picture', 'Data structure representing a user picture. ', [['lib','outputcomponents.php',142]], 135],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',6988]], 942],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1052]], 4832],
'response_deleted': ['response_deleted', 'The mod_feedback response deleted event class. ', [['mod/feedback/classes/event','response_deleted.php',28]], 1],
'completion_info': ['completion_info', 'Class represents completion information for a course. ', [['lib','completionlib.php',210]], 119],
'calendar_event': ['calendar_event', 'Manage calendar events ', [['calendar','lib.php',1916]], 59],
'response_submitted': ['response_submitted', 'The mod_feedback response submitted event class. ', [['mod/feedback/classes/event','response_submitted.php',28],['mod/survey/classes/event','response_submitted.php',29]], 7]};
CONST_DATA={
'FEEDBACK_MIN_ANONYMOUS_COUNT_IN_GROUP': ['FEEDBACK_MIN_ANONYMOUS_COUNT_IN_GROUP', '', [['mod/feedback','lib.php',35]], 2],
'PARAM_INT': ['PARAM_INT', '', [['lib','moodlelib.php',156]], 2948],
'EDITOR_UNLIMITED_FILES': ['EDITOR_UNLIMITED_FILES', '', [['lib','formslib.php',51]], 40],
'FEEDBACK_MAX_PIX_LENGTH': ['FEEDBACK_MAX_PIX_LENGTH', '', [['mod/feedback','lib.php',40]], 5],
'FEATURE_MOD_INTRO': ['FEATURE_MOD_INTRO', '', [['lib','moodlelib.php',426]], 31],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 462],
'FEEDBACK_DECIMAL': ['FEEDBACK_DECIMAL', '', [['mod/feedback','lib.php',36]], 25],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 204],
'FEATURE_COMPLETION_HAS_RULES': ['FEATURE_COMPLETION_HAS_RULES', '', [['lib','moodlelib.php',407]], 11],
'FEEDBACK_DEFAULT_PAGE_COUNT': ['FEEDBACK_DEFAULT_PAGE_COUNT', '', [['mod/feedback','lib.php',41]], 7],
'SITEID': ['SITEID', '', [['admin/cli','install.php',217],['','install.php',244],['lib/db','install.php',87],['lib','setup.php',748]], 612],
'FEATURE_GRADE_HAS_GRADE': ['FEATURE_GRADE_HAS_GRADE', '', [['lib','moodlelib.php',394]], 29],
'COMPLETION_INCOMPLETE': ['COMPLETION_INCOMPLETE', '', [['lib','completionlib.php',70]], 51],
'FEATURE_SHOW_DESCRIPTION': ['FEATURE_SHOW_DESCRIPTION', '', [['lib','moodlelib.php',437]], 22],
'FEATURE_GRADE_OUTCOMES': ['FEATURE_GRADE_OUTCOMES', '', [['lib','moodlelib.php',396]], 23],
'FEEDBACK_ANONYMOUS_NO': ['FEEDBACK_ANONYMOUS_NO', '', [['mod/feedback','lib.php',34]], 19],
'CONTEXT_SYSTEM': ['CONTEXT_SYSTEM', '', [['lib','accesslib.php',142]], 165],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1252],
'FEATURE_BACKUP_MOODLE2': ['FEATURE_BACKUP_MOODLE2', '', [['lib','moodlelib.php',434]], 34],
'FEATURE_COMPLETION_TRACKS_VIEWS': ['FEATURE_COMPLETION_TRACKS_VIEWS', '', [['lib','moodlelib.php',405]], 23],
'FEATURE_GROUPS': ['FEATURE_GROUPS', '', [['lib','moodlelib.php',414]], 25],
'FEEDBACK_THOUSAND': ['FEEDBACK_THOUSAND', '', [['mod/feedback','lib.php',37]], 4],
'FORMAT_PLAIN': ['FORMAT_PLAIN', '', [['lib','weblib.php',52]], 124],
'CONTEXT_COURSE': ['CONTEXT_COURSE', '', [['lib','accesslib.php',148]], 422],
'FEEDBACK_RESETFORM_DROP': ['FEEDBACK_RESETFORM_DROP', '', [['mod/feedback','lib.php',39]], 4],
'PARAM_RAW': ['PARAM_RAW', '', [['lib','moodlelib.php',193]], 692],
'SEPARATEGROUPS': ['SEPARATEGROUPS', '', [['lib','grouplib.php',34]], 158],
'FEEDBACK_ANONYMOUS_YES': ['FEEDBACK_ANONYMOUS_YES', '', [['mod/feedback','lib.php',33]], 27],
'FEEDBACK_RESETFORM_RESET': ['FEEDBACK_RESETFORM_RESET', '', [['mod/feedback','lib.php',38]], 6],
'FEATURE_GROUPINGS': ['FEATURE_GROUPINGS', '', [['lib','moodlelib.php',416]], 23]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
