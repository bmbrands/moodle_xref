<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : /mod/glossary/lib.php source</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu Aug 11 10:00:09 2016 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/glossary';
filename='lib.php.source.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="listing-heading"><a href="./index.html">/mod/glossary/</a> -> <a href="lib.php.html">lib.php</a> (source)</h2>
<div class="listing">
<p class="viewlinks">[<a href="lib.php.html">Summary view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="lib.php.source.txt" target="_new">Text view</a>]
</p>
<pre>
<a name="l1"><span class="linenum">   1</span></a>  &lt;?php
<a name="l2"><span class="linenum">   2</span></a>  
<a name="l3"><span class="linenum">   3</span></a>  <span class="comment">// This file is part of Moodle - http://moodle.org/</span>
<a name="l4"><span class="linenum">   4</span></a>  <span class="comment">//</span>
<a name="l5"><span class="linenum">   5</span></a>  <span class="comment">// Moodle is free software: you can redistribute it and/or modify</span>
<a name="l6"><span class="linenum">   6</span></a>  <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l7"><span class="linenum">   7</span></a>  <span class="comment">// the Free Software Foundation, either version 3 of the License, or</span>
<a name="l8"><span class="linenum">   8</span></a>  <span class="comment">// (at your option) any later version.</span>
<a name="l9"><span class="linenum">   9</span></a>  <span class="comment">//</span>
<a name="l10"><span class="linenum">  10</span></a>  <span class="comment">// Moodle is distributed in the hope that it will be useful,</span>
<a name="l11"><span class="linenum">  11</span></a>  <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l12"><span class="linenum">  12</span></a>  <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l13"><span class="linenum">  13</span></a>  <span class="comment">// GNU General Public License for more details.</span>
<a name="l14"><span class="linenum">  14</span></a>  <span class="comment">//</span>
<a name="l15"><span class="linenum">  15</span></a>  <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l16"><span class="linenum">  16</span></a>  <span class="comment">// along with Moodle.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l17"><span class="linenum">  17</span></a>  
<a name="l18"><span class="linenum">  18</span></a>  <span class="comment">/**</span>
<a name="l19"><span class="linenum">  19</span></a>  <span class="comment"> * Library of functions and constants for module glossary</span>
<a name="l20"><span class="linenum">  20</span></a>  <span class="comment"> * (replace glossary with the name of your module and delete this line)</span>
<a name="l21"><span class="linenum">  21</span></a>  <span class="comment"> *</span>
<a name="l22"><span class="linenum">  22</span></a>  <span class="comment"> * @package   mod_glossary</span>
<a name="l23"><span class="linenum">  23</span></a>  <span class="comment"> * @copyright 1999 onwards Martin Dougiamas  {@link http://moodle.com}</span>
<a name="l24"><span class="linenum">  24</span></a>  <span class="comment"> * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later</span>
<a name="l25"><span class="linenum">  25</span></a>  <span class="comment"> */</span>
<a name="l26"><span class="linenum">  26</span></a>  require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/completionlib.php');
<a name="l27"><span class="linenum">  27</span></a>  
<a name="l28"><span class="linenum">  28</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('GLOSSARY_SHOW_ALL_CATEGORIES')" href="../../_constants/GLOSSARY_SHOW_ALL_CATEGORIES.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_ALL_CATEGORIES')">GLOSSARY_SHOW_ALL_CATEGORIES</a>&quot;, 0);
<a name="l29"><span class="linenum">  29</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('GLOSSARY_SHOW_NOT_CATEGORISED')" href="../../_constants/GLOSSARY_SHOW_NOT_CATEGORISED.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_NOT_CATEGORISED')">GLOSSARY_SHOW_NOT_CATEGORISED</a>&quot;, -1);
<a name="l30"><span class="linenum">  30</span></a>  
<a name="l31"><span class="linenum">  31</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('GLOSSARY_NO_VIEW')" href="../../_constants/GLOSSARY_NO_VIEW.html" onMouseOver="constPopup(event,'GLOSSARY_NO_VIEW')">GLOSSARY_NO_VIEW</a>&quot;, -1);
<a name="l32"><span class="linenum">  32</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('GLOSSARY_STANDARD_VIEW')" href="../../_constants/GLOSSARY_STANDARD_VIEW.html" onMouseOver="constPopup(event,'GLOSSARY_STANDARD_VIEW')">GLOSSARY_STANDARD_VIEW</a>&quot;, 0);
<a name="l33"><span class="linenum">  33</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('GLOSSARY_CATEGORY_VIEW')" href="../../_constants/GLOSSARY_CATEGORY_VIEW.html" onMouseOver="constPopup(event,'GLOSSARY_CATEGORY_VIEW')">GLOSSARY_CATEGORY_VIEW</a>&quot;, 1);
<a name="l34"><span class="linenum">  34</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('GLOSSARY_DATE_VIEW')" href="../../_constants/GLOSSARY_DATE_VIEW.html" onMouseOver="constPopup(event,'GLOSSARY_DATE_VIEW')">GLOSSARY_DATE_VIEW</a>&quot;, 2);
<a name="l35"><span class="linenum">  35</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('GLOSSARY_AUTHOR_VIEW')" href="../../_constants/GLOSSARY_AUTHOR_VIEW.html" onMouseOver="constPopup(event,'GLOSSARY_AUTHOR_VIEW')">GLOSSARY_AUTHOR_VIEW</a>&quot;, 3);
<a name="l36"><span class="linenum">  36</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('GLOSSARY_ADDENTRY_VIEW')" href="../../_constants/GLOSSARY_ADDENTRY_VIEW.html" onMouseOver="constPopup(event,'GLOSSARY_ADDENTRY_VIEW')">GLOSSARY_ADDENTRY_VIEW</a>&quot;, 4);
<a name="l37"><span class="linenum">  37</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('GLOSSARY_IMPORT_VIEW')" href="../../_constants/GLOSSARY_IMPORT_VIEW.html" onMouseOver="constPopup(event,'GLOSSARY_IMPORT_VIEW')">GLOSSARY_IMPORT_VIEW</a>&quot;, 5);
<a name="l38"><span class="linenum">  38</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('GLOSSARY_EXPORT_VIEW')" href="../../_constants/GLOSSARY_EXPORT_VIEW.html" onMouseOver="constPopup(event,'GLOSSARY_EXPORT_VIEW')">GLOSSARY_EXPORT_VIEW</a>&quot;, 6);
<a name="l39"><span class="linenum">  39</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>(&quot;<a class="constant" onClick="logConstant('GLOSSARY_APPROVAL_VIEW')" href="../../_constants/GLOSSARY_APPROVAL_VIEW.html" onMouseOver="constPopup(event,'GLOSSARY_APPROVAL_VIEW')">GLOSSARY_APPROVAL_VIEW</a>&quot;, 7);
<a name="l40"><span class="linenum">  40</span></a>  
<a name="l41"><span class="linenum">  41</span></a>  <span class="comment">// Glossary tabs.</span>
<a name="l42"><span class="linenum">  42</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('GLOSSARY_STANDARD')" href="../../_constants/GLOSSARY_STANDARD.html" onMouseOver="constPopup(event,'GLOSSARY_STANDARD')">GLOSSARY_STANDARD</a>', 'standard');
<a name="l43"><span class="linenum">  43</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('GLOSSARY_AUTHOR')" href="../../_constants/GLOSSARY_AUTHOR.html" onMouseOver="constPopup(event,'GLOSSARY_AUTHOR')">GLOSSARY_AUTHOR</a>', 'author');
<a name="l44"><span class="linenum">  44</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('GLOSSARY_CATEGORY')" href="../../_constants/GLOSSARY_CATEGORY.html" onMouseOver="constPopup(event,'GLOSSARY_CATEGORY')">GLOSSARY_CATEGORY</a>', 'category');
<a name="l45"><span class="linenum">  45</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('GLOSSARY_DATE')" href="../../_constants/GLOSSARY_DATE.html" onMouseOver="constPopup(event,'GLOSSARY_DATE')">GLOSSARY_DATE</a>', 'date');
<a name="l46"><span class="linenum">  46</span></a>  
<a name="l47"><span class="linenum">  47</span></a>  <span class="comment">// Glossary displayformats.</span>
<a name="l48"><span class="linenum">  48</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('GLOSSARY_CONTINUOUS')" href="../../_constants/GLOSSARY_CONTINUOUS.html" onMouseOver="constPopup(event,'GLOSSARY_CONTINUOUS')">GLOSSARY_CONTINUOUS</a>', 'continuous');
<a name="l49"><span class="linenum">  49</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('GLOSSARY_DICTIONARY')" href="../../_constants/GLOSSARY_DICTIONARY.html" onMouseOver="constPopup(event,'GLOSSARY_DICTIONARY')">GLOSSARY_DICTIONARY</a>', 'dictionary');
<a name="l50"><span class="linenum">  50</span></a>  <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('GLOSSARY_FULLWITHOUTAUTHOR')" href="../../_constants/GLOSSARY_FULLWITHOUTAUTHOR.html" onMouseOver="constPopup(event,'GLOSSARY_FULLWITHOUTAUTHOR')">GLOSSARY_FULLWITHOUTAUTHOR</a>', 'fullwithoutauthor');
<a name="l51"><span class="linenum">  51</span></a>  
<a name="l52"><span class="linenum">  52</span></a>  <span class="comment">/// STANDARD FUNCTIONS ///////////////////////////////////////////////////////////</span>
<a name="l53"><span class="linenum">  53</span></a>  <span class="comment">/**</span>
<a name="l54"><span class="linenum">  54</span></a>  <span class="comment"> * @global object</span>
<a name="l55"><span class="linenum">  55</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l56"><span class="linenum">  56</span></a>  <span class="comment"> * @return int</span>
<a name="l57"><span class="linenum">  57</span></a>  <span class="comment"> */</span>
<a name="l58"><span class="linenum">  58</span></a>  function <a class="function" onClick="logFunction('glossary_add_instance')" href="../../_functions/glossary_add_instance.html" onMouseOver="funcPopup(event,'glossary_add_instance')">glossary_add_instance</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>) {
<a name="l59"><span class="linenum">  59</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l60"><span class="linenum">  60</span></a>  <span class="comment">/// Given an object containing all the necessary data,</span>
<a name="l61"><span class="linenum">  61</span></a>  <span class="comment">/// (defined by the form in mod_form.php) this function</span>
<a name="l62"><span class="linenum">  62</span></a>  <span class="comment">/// will create a new instance and return the id number</span>
<a name="l63"><span class="linenum">  63</span></a>  <span class="comment">/// of the new instance.</span>
<a name="l64"><span class="linenum">  64</span></a>  
<a name="l65"><span class="linenum">  65</span></a>      if (empty(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('ratingtime')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/ratingtime.html">ratingtime</a>) or empty(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('assessed')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a>)) {
<a name="l66"><span class="linenum">  66</span></a>          <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('assesstimestart')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/assesstimestart.html">assesstimestart</a>  = 0;
<a name="l67"><span class="linenum">  67</span></a>          <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('assesstimefinish')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/assesstimefinish.html">assesstimefinish</a> = 0;
<a name="l68"><span class="linenum">  68</span></a>      }
<a name="l69"><span class="linenum">  69</span></a>  
<a name="l70"><span class="linenum">  70</span></a>      if (empty(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('globalglossary')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/globalglossary.html">globalglossary</a>) ) {
<a name="l71"><span class="linenum">  71</span></a>          <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('globalglossary')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/globalglossary.html">globalglossary</a> = 0;
<a name="l72"><span class="linenum">  72</span></a>      }
<a name="l73"><span class="linenum">  73</span></a>  
<a name="l74"><span class="linenum">  74</span></a>      if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:manageentries', <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l75"><span class="linenum">  75</span></a>          <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('globalglossary')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/globalglossary.html">globalglossary</a> = 0;
<a name="l76"><span class="linenum">  76</span></a>      }
<a name="l77"><span class="linenum">  77</span></a>  
<a name="l78"><span class="linenum">  78</span></a>      <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>  = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l79"><span class="linenum">  79</span></a>      <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a>;
<a name="l80"><span class="linenum">  80</span></a>  
<a name="l81"><span class="linenum">  81</span></a>  <span class="comment">    //Check displayformat is a valid one</span>
<a name="l82"><span class="linenum">  82</span></a>      <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../../_variables/formats.html">$formats</a> = <a class="function" onClick="logFunction('get_list_of_plugins')" href="../../_functions/get_list_of_plugins.html" onMouseOver="funcPopup(event,'get_list_of_plugins')">get_list_of_plugins</a>('mod/glossary/formats','TEMPLATE');
<a name="l83"><span class="linenum">  83</span></a>      if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('displayformat')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/displayformat.html">displayformat</a>, <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../../_variables/formats.html">$formats</a>)) {
<a name="l84"><span class="linenum">  84</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('unknowformat', '', '', <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('displayformat')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/displayformat.html">displayformat</a>);
<a name="l85"><span class="linenum">  85</span></a>      }
<a name="l86"><span class="linenum">  86</span></a>  
<a name="l87"><span class="linenum">  87</span></a>      <a class="var it3467" onMouseOver="hilite(3467)" onMouseOut="lolite()" onClick="logVariable('returnid')" href="../../_variables/returnid.html">$returnid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>(&quot;glossary&quot;, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l88"><span class="linenum">  88</span></a>      <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> = <a class="var it3467" onMouseOver="hilite(3467)" onMouseOut="lolite()" onClick="logVariable('returnid')" href="../../_variables/returnid.html">$returnid</a>;
<a name="l89"><span class="linenum">  89</span></a>      <a class="function" onClick="logFunction('glossary_grade_item_update')" href="../../_functions/glossary_grade_item_update.html" onMouseOver="funcPopup(event,'glossary_grade_item_update')">glossary_grade_item_update</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l90"><span class="linenum">  90</span></a>  
<a name="l91"><span class="linenum">  91</span></a>      return <a class="var it3467" onMouseOver="hilite(3467)" onMouseOut="lolite()" onClick="logVariable('returnid')" href="../../_variables/returnid.html">$returnid</a>;
<a name="l92"><span class="linenum">  92</span></a>  }
<a name="l93"><span class="linenum">  93</span></a>  
<a name="l94"><span class="linenum">  94</span></a>  <span class="comment">/**</span>
<a name="l95"><span class="linenum">  95</span></a>  <span class="comment"> * Given an object containing all the necessary data,</span>
<a name="l96"><span class="linenum">  96</span></a>  <span class="comment"> * (defined by the form in mod_form.php) this function</span>
<a name="l97"><span class="linenum">  97</span></a>  <span class="comment"> * will update an existing instance with new data.</span>
<a name="l98"><span class="linenum">  98</span></a>  <span class="comment"> *</span>
<a name="l99"><span class="linenum">  99</span></a>  <span class="comment"> * @global object</span>
<a name="l100"><span class="linenum"> 100</span></a>  <span class="comment"> * @global object</span>
<a name="l101"><span class="linenum"> 101</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l102"><span class="linenum"> 102</span></a>  <span class="comment"> * @return bool</span>
<a name="l103"><span class="linenum"> 103</span></a>  <span class="comment"> */</span>
<a name="l104"><span class="linenum"> 104</span></a>  function <a class="function" onClick="logFunction('glossary_update_instance')" href="../../_functions/glossary_update_instance.html" onMouseOver="funcPopup(event,'glossary_update_instance')">glossary_update_instance</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>) {
<a name="l105"><span class="linenum"> 105</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l106"><span class="linenum"> 106</span></a>  
<a name="l107"><span class="linenum"> 107</span></a>      if (empty(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('globalglossary')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/globalglossary.html">globalglossary</a>)) {
<a name="l108"><span class="linenum"> 108</span></a>          <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('globalglossary')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/globalglossary.html">globalglossary</a> = 0;
<a name="l109"><span class="linenum"> 109</span></a>      }
<a name="l110"><span class="linenum"> 110</span></a>  
<a name="l111"><span class="linenum"> 111</span></a>      if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:manageentries', <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l112"><span class="linenum"> 112</span></a>  <span class="comment">        // keep previous</span>
<a name="l113"><span class="linenum"> 113</span></a>          unset(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('globalglossary')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/globalglossary.html">globalglossary</a>);
<a name="l114"><span class="linenum"> 114</span></a>      }
<a name="l115"><span class="linenum"> 115</span></a>  
<a name="l116"><span class="linenum"> 116</span></a>      <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('timemodified')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a> = <a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>();
<a name="l117"><span class="linenum"> 117</span></a>      <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>           = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('instance')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l118"><span class="linenum"> 118</span></a>  
<a name="l119"><span class="linenum"> 119</span></a>      if (empty(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('ratingtime')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/ratingtime.html">ratingtime</a>) or empty(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('assessed')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a>)) {
<a name="l120"><span class="linenum"> 120</span></a>          <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('assesstimestart')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/assesstimestart.html">assesstimestart</a>  = 0;
<a name="l121"><span class="linenum"> 121</span></a>          <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('assesstimefinish')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/assesstimefinish.html">assesstimefinish</a> = 0;
<a name="l122"><span class="linenum"> 122</span></a>      }
<a name="l123"><span class="linenum"> 123</span></a>  
<a name="l124"><span class="linenum"> 124</span></a>  <span class="comment">    //Check displayformat is a valid one</span>
<a name="l125"><span class="linenum"> 125</span></a>      <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../../_variables/formats.html">$formats</a> = <a class="function" onClick="logFunction('get_list_of_plugins')" href="../../_functions/get_list_of_plugins.html" onMouseOver="funcPopup(event,'get_list_of_plugins')">get_list_of_plugins</a>('mod/glossary/formats','TEMPLATE');
<a name="l126"><span class="linenum"> 126</span></a>      if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('displayformat')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/displayformat.html">displayformat</a>, <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../../_variables/formats.html">$formats</a>)) {
<a name="l127"><span class="linenum"> 127</span></a>          <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('unknowformat', '', '', <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('displayformat')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/displayformat.html">displayformat</a>);
<a name="l128"><span class="linenum"> 128</span></a>      }
<a name="l129"><span class="linenum"> 129</span></a>  
<a name="l130"><span class="linenum"> 130</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>(&quot;glossary&quot;, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l131"><span class="linenum"> 131</span></a>      if (<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('defaultapproval')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/defaultapproval.html">defaultapproval</a>) {
<a name="l132"><span class="linenum"> 132</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(&quot;UPDATE {glossary_entries} SET approved = 1 where approved &lt;&gt; 1 and glossaryid = ?&quot;, array(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l133"><span class="linenum"> 133</span></a>      }
<a name="l134"><span class="linenum"> 134</span></a>      <a class="function" onClick="logFunction('glossary_grade_item_update')" href="../../_functions/glossary_grade_item_update.html" onMouseOver="funcPopup(event,'glossary_grade_item_update')">glossary_grade_item_update</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l135"><span class="linenum"> 135</span></a>  
<a name="l136"><span class="linenum"> 136</span></a>      return true;
<a name="l137"><span class="linenum"> 137</span></a>  }
<a name="l138"><span class="linenum"> 138</span></a>  
<a name="l139"><span class="linenum"> 139</span></a>  <span class="comment">/**</span>
<a name="l140"><span class="linenum"> 140</span></a>  <span class="comment"> * Given an ID of an instance of this module,</span>
<a name="l141"><span class="linenum"> 141</span></a>  <span class="comment"> * this function will permanently delete the instance</span>
<a name="l142"><span class="linenum"> 142</span></a>  <span class="comment"> * and any data that depends on it.</span>
<a name="l143"><span class="linenum"> 143</span></a>  <span class="comment"> *</span>
<a name="l144"><span class="linenum"> 144</span></a>  <span class="comment"> * @global object</span>
<a name="l145"><span class="linenum"> 145</span></a>  <span class="comment"> * @param int $id glossary id</span>
<a name="l146"><span class="linenum"> 146</span></a>  <span class="comment"> * @return bool success</span>
<a name="l147"><span class="linenum"> 147</span></a>  <span class="comment"> */</span>
<a name="l148"><span class="linenum"> 148</span></a>  function <a class="function" onClick="logFunction('glossary_delete_instance')" href="../../_functions/glossary_delete_instance.html" onMouseOver="funcPopup(event,'glossary_delete_instance')">glossary_delete_instance</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l149"><span class="linenum"> 149</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l150"><span class="linenum"> 150</span></a>  
<a name="l151"><span class="linenum"> 151</span></a>      if (!<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary', array('id'=&gt;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>))) {
<a name="l152"><span class="linenum"> 152</span></a>          return false;
<a name="l153"><span class="linenum"> 153</span></a>      }
<a name="l154"><span class="linenum"> 154</span></a>  
<a name="l155"><span class="linenum"> 155</span></a>      if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>)) {
<a name="l156"><span class="linenum"> 156</span></a>          return false;
<a name="l157"><span class="linenum"> 157</span></a>      }
<a name="l158"><span class="linenum"> 158</span></a>  
<a name="l159"><span class="linenum"> 159</span></a>      if (!<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>)) {
<a name="l160"><span class="linenum"> 160</span></a>          return false;
<a name="l161"><span class="linenum"> 161</span></a>      }
<a name="l162"><span class="linenum"> 162</span></a>  
<a name="l163"><span class="linenum"> 163</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l164"><span class="linenum"> 164</span></a>  
<a name="l165"><span class="linenum"> 165</span></a>      if (<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('mainglossary')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/mainglossary.html">mainglossary</a>) {
<a name="l166"><span class="linenum"> 166</span></a>  <span class="comment">        // unexport entries</span>
<a name="l167"><span class="linenum"> 167</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT ge.id, ge.sourceglossaryid, cm.id AS sourcecmid
<a name="l168"><span class="linenum"> 168</span></a>                    FROM {glossary_entries} ge
<a name="l169"><span class="linenum"> 169</span></a>                    JOIN {modules} m ON m.name = 'glossary'
<a name="l170"><span class="linenum"> 170</span></a>                    JOIN {course_modules} cm <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (cm.module = m.id AND cm.instance = ge.sourceglossaryid)
<a name="l171"><span class="linenum"> 171</span></a>                   WHERE ge.glossaryid = ? AND ge.sourceglossaryid &gt; 0&quot;;
<a name="l172"><span class="linenum"> 172</span></a>  
<a name="l173"><span class="linenum"> 173</span></a>          if (<a class="var it12556" onMouseOver="hilite(12556)" onMouseOut="lolite()" onClick="logVariable('exported')" href="../../_variables/exported.html">$exported</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>))) {
<a name="l174"><span class="linenum"> 174</span></a>              foreach (<a class="var it12556" onMouseOver="hilite(12556)" onMouseOut="lolite()" onClick="logVariable('exported')" href="../../_variables/exported.html">$exported</a> as <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>) {
<a name="l175"><span class="linenum"> 175</span></a>                  <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a> = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('sourceglossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/sourceglossaryid.html">sourceglossaryid</a>;
<a name="l176"><span class="linenum"> 176</span></a>                  <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('sourceglossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/sourceglossaryid.html">sourceglossaryid</a> = 0;
<a name="l177"><span class="linenum"> 177</span></a>                  <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../../_variables/newcontext.html">$newcontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('sourcecmid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/sourcecmid.html">sourcecmid</a>);
<a name="l178"><span class="linenum"> 178</span></a>                  if (<a class="var it9431" onMouseOver="hilite(9431)" onMouseOut="lolite()" onClick="logVariable('oldfiles')" href="../../_variables/oldfiles.html">$oldfiles</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', 'attachment', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l179"><span class="linenum"> 179</span></a>                      foreach (<a class="var it9431" onMouseOver="hilite(9431)" onMouseOut="lolite()" onClick="logVariable('oldfiles')" href="../../_variables/oldfiles.html">$oldfiles</a> as <a class="var it9434" onMouseOver="hilite(9434)" onMouseOut="lolite()" onClick="logVariable('oldfile')" href="../../_variables/oldfile.html">$oldfile</a>) {
<a name="l180"><span class="linenum"> 180</span></a>                          <a class="var it9407" onMouseOver="hilite(9407)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a> = new stdClass();
<a name="l181"><span class="linenum"> 181</span></a>                          <a class="var it9407" onMouseOver="hilite(9407)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a>-&gt;<a onClick="logVariable('contextid')" class="var it44248" onMouseOver="hilite(44248)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it12558" onMouseOver="hilite(12558)" onMouseOut="lolite()" onClick="logVariable('newcontext')" href="../../_variables/newcontext.html">$newcontext</a>-&gt;<a onClick="logVariable('id')" class="var it44345" onMouseOver="hilite(44345)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l182"><span class="linenum"> 182</span></a>                          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_storedfile')" href="../../_functions/create_file_from_storedfile.html" onMouseOver="funcPopup(event,'create_file_from_storedfile')">create_file_from_storedfile</a>(<a class="var it9407" onMouseOver="hilite(9407)" onMouseOut="lolite()" onClick="logVariable('file_record')" href="../../_variables/file_record.html">$file_record</a>, <a class="var it9434" onMouseOver="hilite(9434)" onMouseOut="lolite()" onClick="logVariable('oldfile')" href="../../_variables/oldfile.html">$oldfile</a>);
<a name="l183"><span class="linenum"> 183</span></a>                      }
<a name="l184"><span class="linenum"> 184</span></a>                      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', 'attachment', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l185"><span class="linenum"> 185</span></a>                      <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('attachment')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/attachment.html">attachment</a> = '1';
<a name="l186"><span class="linenum"> 186</span></a>                  } else {
<a name="l187"><span class="linenum"> 187</span></a>                      <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('attachment')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/attachment.html">attachment</a> = '0';
<a name="l188"><span class="linenum"> 188</span></a>                  }
<a name="l189"><span class="linenum"> 189</span></a>                  <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('update_record')" href="../../_functions/update_record.html" onMouseOver="funcPopup(event,'update_record')">update_record</a>('glossary_entries', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>);
<a name="l190"><span class="linenum"> 190</span></a>              }
<a name="l191"><span class="linenum"> 191</span></a>          }
<a name="l192"><span class="linenum"> 192</span></a>      } else {
<a name="l193"><span class="linenum"> 193</span></a>  <span class="comment">        // move exported entries to main glossary</span>
<a name="l194"><span class="linenum"> 194</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;UPDATE {glossary_entries}
<a name="l195"><span class="linenum"> 195</span></a>                     SET sourceglossaryid = 0
<a name="l196"><span class="linenum"> 196</span></a>                   WHERE sourceglossaryid = ?&quot;;
<a name="l197"><span class="linenum"> 197</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l198"><span class="linenum"> 198</span></a>      }
<a name="l199"><span class="linenum"> 199</span></a>  
<a name="l200"><span class="linenum"> 200</span></a>  <span class="comment">    // Delete any dependent records</span>
<a name="l201"><span class="linenum"> 201</span></a>      <a class="var it12560" onMouseOver="hilite(12560)" onMouseOut="lolite()" onClick="logVariable('entry_select')" href="../../_variables/entry_select.html">$entry_select</a> = &quot;SELECT id FROM {glossary_entries} WHERE glossaryid = ?&quot;;
<a name="l202"><span class="linenum"> 202</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('comments', &quot;contextid=? AND commentarea=? AND itemid IN (<a class="var it12560" onMouseOver="hilite(12560)" onMouseOut="lolite()" onClick="logVariable('entry_select')" href="../../_variables/entry_select.html">$entry_select</a>)&quot;, array(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>, 'glossary_entry', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l203"><span class="linenum"> 203</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('glossary_alias',    &quot;entryid IN (<a class="var it12560" onMouseOver="hilite(12560)" onMouseOut="lolite()" onClick="logVariable('entry_select')" href="../../_variables/entry_select.html">$entry_select</a>)&quot;, array(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l204"><span class="linenum"> 204</span></a>  
<a name="l205"><span class="linenum"> 205</span></a>      <a class="var it12561" onMouseOver="hilite(12561)" onMouseOut="lolite()" onClick="logVariable('category_select')" href="../../_variables/category_select.html">$category_select</a> = &quot;SELECT id FROM {glossary_categories} WHERE glossaryid = ?&quot;;
<a name="l206"><span class="linenum"> 206</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('glossary_entries_categories', &quot;categoryid IN (<a class="var it12561" onMouseOver="hilite(12561)" onMouseOut="lolite()" onClick="logVariable('category_select')" href="../../_variables/category_select.html">$category_select</a>)&quot;, array(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l207"><span class="linenum"> 207</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('glossary_categories', array('glossaryid'=&gt;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l208"><span class="linenum"> 208</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('glossary_entries', array('glossaryid'=&gt;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l209"><span class="linenum"> 209</span></a>  
<a name="l210"><span class="linenum"> 210</span></a>  <span class="comment">    // delete all files</span>
<a name="l211"><span class="linenum"> 211</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l212"><span class="linenum"> 212</span></a>  
<a name="l213"><span class="linenum"> 213</span></a>      <a class="function" onClick="logFunction('glossary_grade_item_delete')" href="../../_functions/glossary_grade_item_delete.html" onMouseOver="funcPopup(event,'glossary_grade_item_delete')">glossary_grade_item_delete</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l214"><span class="linenum"> 214</span></a>  
<a name="l215"><span class="linenum"> 215</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('glossary', array('id'=&gt;<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l216"><span class="linenum"> 216</span></a>  
<a name="l217"><span class="linenum"> 217</span></a>  <span class="comment">    // Reset caches.</span>
<a name="l218"><span class="linenum"> 218</span></a>      \mod_glossary\local\<a class="class" onClick="logClass('concept_cache')" href="../../_classes/concept_cache.html" onMouseOver="classPopup(event,'concept_cache')">concept_cache</a>::<a class="function" onClick="logFunction('reset_glossary')" href="../../_functions/reset_glossary.html" onMouseOver="funcPopup(event,'reset_glossary')">reset_glossary</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l219"><span class="linenum"> 219</span></a>  
<a name="l220"><span class="linenum"> 220</span></a>      return true;
<a name="l221"><span class="linenum"> 221</span></a>  }
<a name="l222"><span class="linenum"> 222</span></a>  
<a name="l223"><span class="linenum"> 223</span></a>  <span class="comment">/**</span>
<a name="l224"><span class="linenum"> 224</span></a>  <span class="comment"> * Return a small object with summary information about what a</span>
<a name="l225"><span class="linenum"> 225</span></a>  <span class="comment"> * user has done with a given particular instance of this module</span>
<a name="l226"><span class="linenum"> 226</span></a>  <span class="comment"> * Used for user activity reports.</span>
<a name="l227"><span class="linenum"> 227</span></a>  <span class="comment"> * $return-&gt;time = the time they did it</span>
<a name="l228"><span class="linenum"> 228</span></a>  <span class="comment"> * $return-&gt;info = a short text description</span>
<a name="l229"><span class="linenum"> 229</span></a>  <span class="comment"> *</span>
<a name="l230"><span class="linenum"> 230</span></a>  <span class="comment"> * @param object $course</span>
<a name="l231"><span class="linenum"> 231</span></a>  <span class="comment"> * @param object $user</span>
<a name="l232"><span class="linenum"> 232</span></a>  <span class="comment"> * @param object $mod</span>
<a name="l233"><span class="linenum"> 233</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l234"><span class="linenum"> 234</span></a>  <span class="comment"> * @return object|null</span>
<a name="l235"><span class="linenum"> 235</span></a>  <span class="comment"> */</span>
<a name="l236"><span class="linenum"> 236</span></a>  function <a class="function" onClick="logFunction('glossary_user_outline')" href="../../_functions/glossary_user_outline.html" onMouseOver="funcPopup(event,'glossary_user_outline')">glossary_user_outline</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>) {
<a name="l237"><span class="linenum"> 237</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l238"><span class="linenum"> 238</span></a>  
<a name="l239"><span class="linenum"> 239</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/gradelib.php&quot;);
<a name="l240"><span class="linenum"> 240</span></a>      <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod', 'glossary', <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l241"><span class="linenum"> 241</span></a>      if (empty(<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it43825" onMouseOver="hilite(43825)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades)) {
<a name="l242"><span class="linenum"> 242</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = false;
<a name="l243"><span class="linenum"> 243</span></a>      } else {
<a name="l244"><span class="linenum"> 244</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it43825" onMouseOver="hilite(43825)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades);
<a name="l245"><span class="linenum"> 245</span></a>      }
<a name="l246"><span class="linenum"> 246</span></a>  
<a name="l247"><span class="linenum"> 247</span></a>      if (<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="function" onClick="logFunction('glossary_get_user_entries')" href="../../_functions/glossary_get_user_entries.html" onMouseOver="funcPopup(event,'glossary_get_user_entries')">glossary_get_user_entries</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l248"><span class="linenum"> 248</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = new stdClass();
<a name="l249"><span class="linenum"> 249</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('info')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/info.html">info</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>) . ' ' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;entries&quot;, &quot;glossary&quot;);
<a name="l250"><span class="linenum"> 250</span></a>  
<a name="l251"><span class="linenum"> 251</span></a>          <a class="var it12562" onMouseOver="hilite(12562)" onMouseOut="lolite()" onClick="logVariable('lastentry')" href="../../_variables/lastentry.html">$lastentry</a> = <a class="phpfunction" onClick="logFunction('array_pop')" href="../../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>);
<a name="l252"><span class="linenum"> 252</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('time')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/time.html">time</a> = <a class="var it12562" onMouseOver="hilite(12562)" onMouseOut="lolite()" onClick="logVariable('lastentry')" href="../../_variables/lastentry.html">$lastentry</a>-&gt;<a onClick="logVariable('timemodified')" class="var it44547" onMouseOver="hilite(44547)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l253"><span class="linenum"> 253</span></a>  
<a name="l254"><span class="linenum"> 254</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l255"><span class="linenum"> 255</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('info')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/info.html">info</a> .= ', ' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade') . ': ' . <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a>;
<a name="l256"><span class="linenum"> 256</span></a>          }
<a name="l257"><span class="linenum"> 257</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l258"><span class="linenum"> 258</span></a>      } else if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>) {
<a name="l259"><span class="linenum"> 259</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = new stdClass();
<a name="l260"><span class="linenum"> 260</span></a>          <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('info')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/info.html">info</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade') . ': ' . <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a>;
<a name="l261"><span class="linenum"> 261</span></a>  
<a name="l262"><span class="linenum"> 262</span></a>  <span class="comment">        //datesubmitted == time created. dategraded == time modified or time overridden</span>
<a name="l263"><span class="linenum"> 263</span></a>  <span class="comment">        //if grade was last modified by the user themselves use date graded. Otherwise use date submitted</span>
<a name="l264"><span class="linenum"> 264</span></a>  <span class="comment">        //TODO: move this copied &amp; pasted code somewhere in the grades API. See MDL-26704</span>
<a name="l265"><span class="linenum"> 265</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('usermodified')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/usermodified.html">usermodified</a> == <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> || empty(<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('datesubmitted')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/datesubmitted.html">datesubmitted</a>)) {
<a name="l266"><span class="linenum"> 266</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('time')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/time.html">time</a> = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('dategraded')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/dategraded.html">dategraded</a>;
<a name="l267"><span class="linenum"> 267</span></a>          } else {
<a name="l268"><span class="linenum"> 268</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>-&gt;<a onClick="logVariable('time')" class="var it43057" onMouseOver="hilite(43057)" onMouseOut="lolite()" href="../../_variables/time.html">time</a> = <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('datesubmitted')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/datesubmitted.html">datesubmitted</a>;
<a name="l269"><span class="linenum"> 269</span></a>          }
<a name="l270"><span class="linenum"> 270</span></a>  
<a name="l271"><span class="linenum"> 271</span></a>          return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l272"><span class="linenum"> 272</span></a>      }
<a name="l273"><span class="linenum"> 273</span></a>      return NULL;
<a name="l274"><span class="linenum"> 274</span></a>  }
<a name="l275"><span class="linenum"> 275</span></a>  
<a name="l276"><span class="linenum"> 276</span></a>  <span class="comment">/**</span>
<a name="l277"><span class="linenum"> 277</span></a>  <span class="comment"> * @global object</span>
<a name="l278"><span class="linenum"> 278</span></a>  <span class="comment"> * @param int $glossaryid</span>
<a name="l279"><span class="linenum"> 279</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l280"><span class="linenum"> 280</span></a>  <span class="comment"> * @return array</span>
<a name="l281"><span class="linenum"> 281</span></a>  <span class="comment"> */</span>
<a name="l282"><span class="linenum"> 282</span></a>  function <a class="function" onClick="logFunction('glossary_get_user_entries')" href="../../_functions/glossary_get_user_entries.html" onMouseOver="funcPopup(event,'glossary_get_user_entries')">glossary_get_user_entries</a>(<a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l283"><span class="linenum"> 283</span></a>  <span class="comment">/// Get all the entries for a user in a glossary</span>
<a name="l284"><span class="linenum"> 284</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l285"><span class="linenum"> 285</span></a>  
<a name="l286"><span class="linenum"> 286</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;SELECT e.*, u.firstname, u.lastname, u.email, u.picture
<a name="l287"><span class="linenum"> 287</span></a>                                     FROM {glossary} g, {glossary_entries} e, {user} u
<a name="l288"><span class="linenum"> 288</span></a>                               WHERE g.id = ?
<a name="l289"><span class="linenum"> 289</span></a>                                 AND e.glossaryid = g.id
<a name="l290"><span class="linenum"> 290</span></a>                                 AND e.userid = ?
<a name="l291"><span class="linenum"> 291</span></a>                                 AND e.userid = u.id
<a name="l292"><span class="linenum"> 292</span></a>                            ORDER BY e.timemodified ASC&quot;, array(<a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>));
<a name="l293"><span class="linenum"> 293</span></a>  }
<a name="l294"><span class="linenum"> 294</span></a>  
<a name="l295"><span class="linenum"> 295</span></a>  <span class="comment">/**</span>
<a name="l296"><span class="linenum"> 296</span></a>  <span class="comment"> * Print a detailed representation of what a  user has done with</span>
<a name="l297"><span class="linenum"> 297</span></a>  <span class="comment"> * a given particular instance of this module, for user activity reports.</span>
<a name="l298"><span class="linenum"> 298</span></a>  <span class="comment"> *</span>
<a name="l299"><span class="linenum"> 299</span></a>  <span class="comment"> * @global object</span>
<a name="l300"><span class="linenum"> 300</span></a>  <span class="comment"> * @param object $course</span>
<a name="l301"><span class="linenum"> 301</span></a>  <span class="comment"> * @param object $user</span>
<a name="l302"><span class="linenum"> 302</span></a>  <span class="comment"> * @param object $mod</span>
<a name="l303"><span class="linenum"> 303</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l304"><span class="linenum"> 304</span></a>  <span class="comment"> */</span>
<a name="l305"><span class="linenum"> 305</span></a>  function <a class="function" onClick="logFunction('glossary_user_complete')" href="../../_functions/glossary_user_complete.html" onMouseOver="funcPopup(event,'glossary_user_complete')">glossary_user_complete</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>, <a class="var it2586" onMouseOver="hilite(2586)" onMouseOut="lolite()" onClick="logVariable('mod')" href="../../_variables/mod.html">$mod</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>) {
<a name="l306"><span class="linenum"> 306</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l307"><span class="linenum"> 307</span></a>      require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/gradelib.php&quot;);
<a name="l308"><span class="linenum"> 308</span></a>  
<a name="l309"><span class="linenum"> 309</span></a>      <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="function" onClick="logFunction('grade_get_grades')" href="../../_functions/grade_get_grades.html" onMouseOver="funcPopup(event,'grade_get_grades')">grade_get_grades</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod', 'glossary', <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l310"><span class="linenum"> 310</span></a>      if (!empty(<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it43825" onMouseOver="hilite(43825)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades)) {
<a name="l311"><span class="linenum"> 311</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = <a class="phpfunction" onClick="logFunction('reset')" href="../../_functions/reset.html" onMouseOver="phpfuncPopup(event,'reset')">reset</a>(<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>-&gt;<a onClick="logVariable('items')" class="var it43825" onMouseOver="hilite(43825)" onMouseOut="lolite()" href="../../_variables/items.html">items</a>[0]-&gt;grades);
<a name="l312"><span class="linenum"> 312</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('container')" href="../../_functions/container.html" onMouseOver="funcPopup(event,'container')">container</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('grade').': '.<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_long_grade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/str_long_grade.html">str_long_grade</a>);
<a name="l313"><span class="linenum"> 313</span></a>          if (<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_feedback')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/str_feedback.html">str_feedback</a>) {
<a name="l314"><span class="linenum"> 314</span></a>              echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('container')" href="../../_functions/container.html" onMouseOver="funcPopup(event,'container')">container</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('feedback').': '.<a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('str_feedback')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/str_feedback.html">str_feedback</a>);
<a name="l315"><span class="linenum"> 315</span></a>          }
<a name="l316"><span class="linenum"> 316</span></a>      }
<a name="l317"><span class="linenum"> 317</span></a>  
<a name="l318"><span class="linenum"> 318</span></a>      if (<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="function" onClick="logFunction('glossary_get_user_entries')" href="../../_functions/glossary_get_user_entries.html" onMouseOver="funcPopup(event,'glossary_get_user_entries')">glossary_get_user_entries</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it362" onMouseOver="hilite(362)" onMouseOut="lolite()" onClick="logVariable('user')" href="../../_variables/user.html">$user</a>-&gt;<a onClick="logVariable('id')" class="var it42948" onMouseOver="hilite(42948)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l319"><span class="linenum"> 319</span></a>          echo '&lt;table width=&quot;95%&quot; border=&quot;0&quot;&gt;&lt;tr&gt;&lt;td&gt;';
<a name="l320"><span class="linenum"> 320</span></a>          foreach (<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> as <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>) {
<a name="l321"><span class="linenum"> 321</span></a>              <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>(&quot;glossary&quot;, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l322"><span class="linenum"> 322</span></a>              <a class="function" onClick="logFunction('glossary_print_entry')" href="../../_functions/glossary_print_entry.html" onMouseOver="funcPopup(event,'glossary_print_entry')">glossary_print_entry</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>,&quot;&quot;,&quot;&quot;,0);
<a name="l323"><span class="linenum"> 323</span></a>              echo '&lt;p&gt;';
<a name="l324"><span class="linenum"> 324</span></a>          }
<a name="l325"><span class="linenum"> 325</span></a>          echo '&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';
<a name="l326"><span class="linenum"> 326</span></a>      }
<a name="l327"><span class="linenum"> 327</span></a>  }
<a name="l328"><span class="linenum"> 328</span></a>  
<a name="l329"><span class="linenum"> 329</span></a>  <span class="comment">/**</span>
<a name="l330"><span class="linenum"> 330</span></a>  <span class="comment"> * Returns all glossary entries since a given time for specified glossary</span>
<a name="l331"><span class="linenum"> 331</span></a>  <span class="comment"> *</span>
<a name="l332"><span class="linenum"> 332</span></a>  <span class="comment"> * @param array $activities sequentially indexed array of objects</span>
<a name="l333"><span class="linenum"> 333</span></a>  <span class="comment"> * @param int   $index</span>
<a name="l334"><span class="linenum"> 334</span></a>  <span class="comment"> * @param int   $timestart</span>
<a name="l335"><span class="linenum"> 335</span></a>  <span class="comment"> * @param int   $courseid</span>
<a name="l336"><span class="linenum"> 336</span></a>  <span class="comment"> * @param int   $cmid</span>
<a name="l337"><span class="linenum"> 337</span></a>  <span class="comment"> * @param int   $userid defaults to 0</span>
<a name="l338"><span class="linenum"> 338</span></a>  <span class="comment"> * @param int   $groupid defaults to 0</span>
<a name="l339"><span class="linenum"> 339</span></a>  <span class="comment"> * @return void adds items into $activities and increases $index</span>
<a name="l340"><span class="linenum"> 340</span></a>  <span class="comment"> */</span>
<a name="l341"><span class="linenum"> 341</span></a>  function <a class="function" onClick="logFunction('glossary_get_recent_mod_activity')" href="../../_functions/glossary_get_recent_mod_activity.html" onMouseOver="funcPopup(event,'glossary_get_recent_mod_activity')">glossary_get_recent_mod_activity</a>(&amp;<a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../../_variables/activities.html">$activities</a>, &amp;<a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>, <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> = 0, <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a> = 0) {
<a name="l342"><span class="linenum"> 342</span></a>      global <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l343"><span class="linenum"> 343</span></a>  
<a name="l344"><span class="linenum"> 344</span></a>      if (<a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>-&gt;<a onClick="logVariable('id')" class="var it43316" onMouseOver="hilite(43316)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l345"><span class="linenum"> 345</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it586" onMouseOver="hilite(586)" onMouseOut="lolite()" onClick="logVariable('COURSE')" href="../../_variables/COURSE.html">$COURSE</a>;
<a name="l346"><span class="linenum"> 346</span></a>      } else {
<a name="l347"><span class="linenum"> 347</span></a>          <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id' =&gt; <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>));
<a name="l348"><span class="linenum"> 348</span></a>      }
<a name="l349"><span class="linenum"> 349</span></a>  
<a name="l350"><span class="linenum"> 350</span></a>      <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l351"><span class="linenum"> 351</span></a>      <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('cms')" class="var it43006" onMouseOver="hilite(43006)" onMouseOut="lolite()" href="../../_variables/cms.html">cms</a>[<a class="var it1077" onMouseOver="hilite(1077)" onMouseOut="lolite()" onClick="logVariable('cmid')" href="../../_variables/cmid.html">$cmid</a>];
<a name="l352"><span class="linenum"> 352</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l353"><span class="linenum"> 353</span></a>  
<a name="l354"><span class="linenum"> 354</span></a>      if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('uservisible')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/uservisible.html">uservisible</a>) {
<a name="l355"><span class="linenum"> 355</span></a>          return;
<a name="l356"><span class="linenum"> 356</span></a>      }
<a name="l357"><span class="linenum"> 357</span></a>  
<a name="l358"><span class="linenum"> 358</span></a>      <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a> = <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/site:viewfullnames', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l359"><span class="linenum"> 359</span></a>  <span class="comment">    // Groups are not yet supported for glossary. See MDL-10728 .</span>
<a name="l360"><span class="linenum"> 360</span></a>      <span class="comment">/*</span>
<a name="l361"><span class="linenum"> 361</span></a>  <span class="comment">    $accessallgroups = has_capability('moodle/site:accessallgroups', $context);</span>
<a name="l362"><span class="linenum"> 362</span></a>  <span class="comment">    $groupmode = groups_get_activity_groupmode($cm, $course);</span>
<a name="l363"><span class="linenum"> 363</span></a>  <span class="comment">     */</span>
<a name="l364"><span class="linenum"> 364</span></a>  
<a name="l365"><span class="linenum"> 365</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['timestart'] = <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>;
<a name="l366"><span class="linenum"> 366</span></a>  
<a name="l367"><span class="linenum"> 367</span></a>      if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l368"><span class="linenum"> 368</span></a>          <a class="var it3979" onMouseOver="hilite(3979)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a> = &quot;AND u.id = :userid&quot;;
<a name="l369"><span class="linenum"> 369</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['userid'] = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l370"><span class="linenum"> 370</span></a>      } else {
<a name="l371"><span class="linenum"> 371</span></a>          <a class="var it3979" onMouseOver="hilite(3979)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a> = '';
<a name="l372"><span class="linenum"> 372</span></a>      }
<a name="l373"><span class="linenum"> 373</span></a>  
<a name="l374"><span class="linenum"> 374</span></a>      if (<a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>) {
<a name="l375"><span class="linenum"> 375</span></a>          <a class="var it5686" onMouseOver="hilite(5686)" onMouseOut="lolite()" onClick="logVariable('groupselect')" href="../../_variables/groupselect.html">$groupselect</a> = 'AND gm.groupid = :groupid';
<a name="l376"><span class="linenum"> 376</span></a>          <a class="var it9803" onMouseOver="hilite(9803)" onMouseOut="lolite()" onClick="logVariable('groupjoin')" href="../../_variables/groupjoin.html">$groupjoin</a>   = 'JOIN {groups_members} gm ON  gm.userid=u.id';
<a name="l377"><span class="linenum"> 377</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['groupid'] = <a class="var it681" onMouseOver="hilite(681)" onMouseOut="lolite()" onClick="logVariable('groupid')" href="../../_variables/groupid.html">$groupid</a>;
<a name="l378"><span class="linenum"> 378</span></a>      } else {
<a name="l379"><span class="linenum"> 379</span></a>          <a class="var it5686" onMouseOver="hilite(5686)" onMouseOut="lolite()" onClick="logVariable('groupselect')" href="../../_variables/groupselect.html">$groupselect</a> = '';
<a name="l380"><span class="linenum"> 380</span></a>          <a class="var it9803" onMouseOver="hilite(9803)" onMouseOut="lolite()" onClick="logVariable('groupjoin')" href="../../_variables/groupjoin.html">$groupjoin</a>   = '';
<a name="l381"><span class="linenum"> 381</span></a>      }
<a name="l382"><span class="linenum"> 382</span></a>  
<a name="l383"><span class="linenum"> 383</span></a>      <a class="var it12563" onMouseOver="hilite(12563)" onMouseOut="lolite()" onClick="logVariable('approvedselect')" href="../../_variables/approvedselect.html">$approvedselect</a> = &quot;&quot;;
<a name="l384"><span class="linenum"> 384</span></a>      if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l385"><span class="linenum"> 385</span></a>          <a class="var it12563" onMouseOver="hilite(12563)" onMouseOut="lolite()" onClick="logVariable('approvedselect')" href="../../_variables/approvedselect.html">$approvedselect</a> = &quot; AND ge.approved = 1 &quot;;
<a name="l386"><span class="linenum"> 386</span></a>      }
<a name="l387"><span class="linenum"> 387</span></a>  
<a name="l388"><span class="linenum"> 388</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['timestart'] = <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>;
<a name="l389"><span class="linenum"> 389</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['glossaryid'] = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>;
<a name="l390"><span class="linenum"> 390</span></a>  
<a name="l391"><span class="linenum"> 391</span></a>      <a class="var it9804" onMouseOver="hilite(9804)" onMouseOut="lolite()" onClick="logVariable('ufields')" href="../../_variables/ufields.html">$ufields</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>('u', null, 'userid');
<a name="l392"><span class="linenum"> 392</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;
<a name="l393"><span class="linenum"> 393</span></a>                SELECT ge.id AS entryid, ge.glossaryid, ge.concept, ge.definition, ge.approved,
<a name="l394"><span class="linenum"> 394</span></a>                       ge.timemodified, <a class="var it9804" onMouseOver="hilite(9804)" onMouseOut="lolite()" onClick="logVariable('ufields')" href="../../_variables/ufields.html">$ufields</a>
<a name="l395"><span class="linenum"> 395</span></a>                  FROM {glossary_entries} ge
<a name="l396"><span class="linenum"> 396</span></a>                  JOIN {user} u ON u.id = ge.userid
<a name="l397"><span class="linenum"> 397</span></a>                       <a class="var it9803" onMouseOver="hilite(9803)" onMouseOut="lolite()" onClick="logVariable('groupjoin')" href="../../_variables/groupjoin.html">$groupjoin</a>
<a name="l398"><span class="linenum"> 398</span></a>                 WHERE ge.timemodified &gt; :timestart
<a name="l399"><span class="linenum"> 399</span></a>                   AND ge.glossaryid = :glossaryid
<a name="l400"><span class="linenum"> 400</span></a>                       <a class="var it12563" onMouseOver="hilite(12563)" onMouseOut="lolite()" onClick="logVariable('approvedselect')" href="../../_variables/approvedselect.html">$approvedselect</a>
<a name="l401"><span class="linenum"> 401</span></a>                       <a class="var it3979" onMouseOver="hilite(3979)" onMouseOut="lolite()" onClick="logVariable('userselect')" href="../../_variables/userselect.html">$userselect</a>
<a name="l402"><span class="linenum"> 402</span></a>                       <a class="var it5686" onMouseOver="hilite(5686)" onMouseOut="lolite()" onClick="logVariable('groupselect')" href="../../_variables/groupselect.html">$groupselect</a>
<a name="l403"><span class="linenum"> 403</span></a>              ORDER BY ge.timemodified ASC&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l404"><span class="linenum"> 404</span></a>  
<a name="l405"><span class="linenum"> 405</span></a>      if (!<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>) {
<a name="l406"><span class="linenum"> 406</span></a>          return;
<a name="l407"><span class="linenum"> 407</span></a>      }
<a name="l408"><span class="linenum"> 408</span></a>  
<a name="l409"><span class="linenum"> 409</span></a>      foreach (<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> as <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>) {
<a name="l410"><span class="linenum"> 410</span></a>  <span class="comment">        // Groups are not yet supported for glossary. See MDL-10728 .</span>
<a name="l411"><span class="linenum"> 411</span></a>          <span class="comment">/*</span>
<a name="l412"><span class="linenum"> 412</span></a>  <span class="comment">        $usersgroups = null;</span>
<a name="l413"><span class="linenum"> 413</span></a>  <span class="comment">        if ($entry-&gt;userid != $USER-&gt;id) {</span>
<a name="l414"><span class="linenum"> 414</span></a>  <span class="comment">            if ($groupmode == SEPARATEGROUPS and !$accessallgroups) {</span>
<a name="l415"><span class="linenum"> 415</span></a>  <span class="comment">                if (is_null($usersgroups)) {</span>
<a name="l416"><span class="linenum"> 416</span></a>  <span class="comment">                    $usersgroups = groups_get_all_groups($course-&gt;id, $entry-&gt;userid, $cm-&gt;groupingid);</span>
<a name="l417"><span class="linenum"> 417</span></a>  <span class="comment">                    if (is_array($usersgroups)) {</span>
<a name="l418"><span class="linenum"> 418</span></a>  <span class="comment">                        $usersgroups = array_keys($usersgroups);</span>
<a name="l419"><span class="linenum"> 419</span></a>  <span class="comment">                    } else {</span>
<a name="l420"><span class="linenum"> 420</span></a>  <span class="comment">                        $usersgroups = array();</span>
<a name="l421"><span class="linenum"> 421</span></a>  <span class="comment">                    }</span>
<a name="l422"><span class="linenum"> 422</span></a>  <span class="comment">                }</span>
<a name="l423"><span class="linenum"> 423</span></a>  <span class="comment">                if (!array_intersect($usersgroups, $modinfo-&gt;get_groups($cm-&gt;groupingid))) {</span>
<a name="l424"><span class="linenum"> 424</span></a>  <span class="comment">                    continue;</span>
<a name="l425"><span class="linenum"> 425</span></a>  <span class="comment">                }</span>
<a name="l426"><span class="linenum"> 426</span></a>  <span class="comment">            }</span>
<a name="l427"><span class="linenum"> 427</span></a>  <span class="comment">        }</span>
<a name="l428"><span class="linenum"> 428</span></a>  <span class="comment">         */</span>
<a name="l429"><span class="linenum"> 429</span></a>  
<a name="l430"><span class="linenum"> 430</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>                       = new stdClass();
<a name="l431"><span class="linenum"> 431</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('user')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>                 = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('unalias')" href="../../_functions/unalias.html" onMouseOver="funcPopup(event,'unalias')">unalias</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, null, 'userid');
<a name="l432"><span class="linenum"> 432</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('user')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>-&gt;fullname       = <a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('user')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>, <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>);
<a name="l433"><span class="linenum"> 433</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('type')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/type.html">type</a>                 = 'glossary';
<a name="l434"><span class="linenum"> 434</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('cmid')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/cmid.html">cmid</a>                 = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l435"><span class="linenum"> 435</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>           = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>;
<a name="l436"><span class="linenum"> 436</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('name')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>                 = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('name')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, true);
<a name="l437"><span class="linenum"> 437</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/sectionnum.html">sectionnum</a>           = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('sectionnum')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/sectionnum.html">sectionnum</a>;
<a name="l438"><span class="linenum"> 438</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('timestamp')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/timestamp.html">timestamp</a>            = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>;
<a name="l439"><span class="linenum"> 439</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>              = new stdClass();
<a name="l440"><span class="linenum"> 440</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;entryid     = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('entryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/entryid.html">entryid</a>;
<a name="l441"><span class="linenum"> 441</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;concept     = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('concept')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>;
<a name="l442"><span class="linenum"> 442</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;definition  = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('definition')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/definition.html">definition</a>;
<a name="l443"><span class="linenum"> 443</span></a>          <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>-&gt;<a onClick="logVariable('content')" class="var it44548" onMouseOver="hilite(44548)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;approved    = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('approved')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a>;
<a name="l444"><span class="linenum"> 444</span></a>  
<a name="l445"><span class="linenum"> 445</span></a>          <a class="var it561" onMouseOver="hilite(561)" onMouseOut="lolite()" onClick="logVariable('activities')" href="../../_variables/activities.html">$activities</a>[<a class="var it290" onMouseOver="hilite(290)" onMouseOut="lolite()" onClick="logVariable('index')" href="../../_variables/index.html">$index</a>++] = <a class="var it9807" onMouseOver="hilite(9807)" onMouseOut="lolite()" onClick="logVariable('tmpactivity')" href="../../_variables/tmpactivity.html">$tmpactivity</a>;
<a name="l446"><span class="linenum"> 446</span></a>      }
<a name="l447"><span class="linenum"> 447</span></a>  
<a name="l448"><span class="linenum"> 448</span></a>      return true;
<a name="l449"><span class="linenum"> 449</span></a>  }
<a name="l450"><span class="linenum"> 450</span></a>  
<a name="l451"><span class="linenum"> 451</span></a>  <span class="comment">/**</span>
<a name="l452"><span class="linenum"> 452</span></a>  <span class="comment"> * Outputs the glossary entry indicated by $activity</span>
<a name="l453"><span class="linenum"> 453</span></a>  <span class="comment"> *</span>
<a name="l454"><span class="linenum"> 454</span></a>  <span class="comment"> * @param object $activity      the activity object the glossary resides in</span>
<a name="l455"><span class="linenum"> 455</span></a>  <span class="comment"> * @param int    $courseid      the id of the course the glossary resides in</span>
<a name="l456"><span class="linenum"> 456</span></a>  <span class="comment"> * @param bool   $detail        not used, but required for compatibilty with other modules</span>
<a name="l457"><span class="linenum"> 457</span></a>  <span class="comment"> * @param int    $modnames      not used, but required for compatibilty with other modules</span>
<a name="l458"><span class="linenum"> 458</span></a>  <span class="comment"> * @param bool   $viewfullnames not used, but required for compatibilty with other modules</span>
<a name="l459"><span class="linenum"> 459</span></a>  <span class="comment"> * @return void</span>
<a name="l460"><span class="linenum"> 460</span></a>  <span class="comment"> */</span>
<a name="l461"><span class="linenum"> 461</span></a>  function <a class="function" onClick="logFunction('glossary_print_recent_mod_activity')" href="../../_functions/glossary_print_recent_mod_activity.html" onMouseOver="funcPopup(event,'glossary_print_recent_mod_activity')">glossary_print_recent_mod_activity</a>(<a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it5390" onMouseOver="hilite(5390)" onMouseOut="lolite()" onClick="logVariable('detail')" href="../../_variables/detail.html">$detail</a>, <a class="var it733" onMouseOver="hilite(733)" onMouseOut="lolite()" onClick="logVariable('modnames')" href="../../_variables/modnames.html">$modnames</a>, <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>) {
<a name="l462"><span class="linenum"> 462</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l463"><span class="linenum"> 463</span></a>  
<a name="l464"><span class="linenum"> 464</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'glossary-activity clearfix'));
<a name="l465"><span class="linenum"> 465</span></a>      if (!empty(<a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>)) {
<a name="l466"><span class="linenum"> 466</span></a>          echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('div', <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('user_picture')" href="../../_functions/user_picture.html" onMouseOver="funcPopup(event,'user_picture')">user_picture</a>(<a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>, array('courseid'=&gt;<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>)),
<a name="l467"><span class="linenum"> 467</span></a>              array('class' =&gt; 'glossary-activity-picture'));
<a name="l468"><span class="linenum"> 468</span></a>      }
<a name="l469"><span class="linenum"> 469</span></a>  
<a name="l470"><span class="linenum"> 470</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'glossary-activity-content'));
<a name="l471"><span class="linenum"> 471</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'glossary-activity-entry'));
<a name="l472"><span class="linenum"> 472</span></a>  
<a name="l473"><span class="linenum"> 473</span></a>      if (isset(<a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;approved) &amp;&amp; !<a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;approved) {
<a name="l474"><span class="linenum"> 474</span></a>          <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../../_variables/urlparams.html">$urlparams</a> = array('g' =&gt; <a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>, 'mode' =&gt; 'approval', 'hook' =&gt; <a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;concept);
<a name="l475"><span class="linenum"> 475</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = array('class' =&gt; 'dimmed_text');
<a name="l476"><span class="linenum"> 476</span></a>      } else {
<a name="l477"><span class="linenum"> 477</span></a>          <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../../_variables/urlparams.html">$urlparams</a> = array('g' =&gt; <a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>, 'mode' =&gt; 'entry', 'hook' =&gt; <a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;entryid);
<a name="l478"><span class="linenum"> 478</span></a>          <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a> = array();
<a name="l479"><span class="linenum"> 479</span></a>      }
<a name="l480"><span class="linenum"> 480</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/glossary/view.php.html">/mod/glossary/view.php</a>', <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../../_variables/urlparams.html">$urlparams</a>),
<a name="l481"><span class="linenum"> 481</span></a>              <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('content')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../../_variables/content.html">content</a>-&gt;concept), <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>);
<a name="l482"><span class="linenum"> 482</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l483"><span class="linenum"> 483</span></a>  
<a name="l484"><span class="linenum"> 484</span></a>      <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../user/view.php.html">/user/view.php</a>', array('course'=&gt;<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, 'id'=&gt;<a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>-&gt;id));
<a name="l485"><span class="linenum"> 485</span></a>      <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a> = <a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('user')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../../_variables/user.html">user</a>-&gt;fullname;
<a name="l486"><span class="linenum"> 486</span></a>      <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="phpfunction" onClick="logFunction('link')" href="../../_functions/link.html" onMouseOver="phpfuncPopup(event,'link')">link</a>(<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="var it88" onMouseOver="hilite(88)" onMouseOut="lolite()" onClick="logVariable('name')" href="../../_variables/name.html">$name</a>, <a class="var it185" onMouseOver="hilite(185)" onMouseOut="lolite()" onClick="logVariable('class')" href="../../_variables/class.html">$class</a>);
<a name="l487"><span class="linenum"> 487</span></a>  
<a name="l488"><span class="linenum"> 488</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('start_tag')" href="../../_functions/start_tag.html" onMouseOver="funcPopup(event,'start_tag')">start_tag</a>('div', array('class'=&gt;'user'));
<a name="l489"><span class="linenum"> 489</span></a>      echo <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> .' - '. <a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it562" onMouseOver="hilite(562)" onMouseOut="lolite()" onClick="logVariable('activity')" href="../../_variables/activity.html">$activity</a>-&gt;<a onClick="logVariable('timestamp')" class="var it42975" onMouseOver="hilite(42975)" onMouseOut="lolite()" href="../../_variables/timestamp.html">timestamp</a>);
<a name="l490"><span class="linenum"> 490</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l491"><span class="linenum"> 491</span></a>  
<a name="l492"><span class="linenum"> 492</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l493"><span class="linenum"> 493</span></a>  
<a name="l494"><span class="linenum"> 494</span></a>      echo <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('end_tag')" href="../../_functions/end_tag.html" onMouseOver="funcPopup(event,'end_tag')">end_tag</a>('div');
<a name="l495"><span class="linenum"> 495</span></a>      return;
<a name="l496"><span class="linenum"> 496</span></a>  }
<a name="l497"><span class="linenum"> 497</span></a>  <span class="comment">/**</span>
<a name="l498"><span class="linenum"> 498</span></a>  <span class="comment"> * Given a course and a time, this module should find recent activity</span>
<a name="l499"><span class="linenum"> 499</span></a>  <span class="comment"> * that has occurred in glossary activities and print it out.</span>
<a name="l500"><span class="linenum"> 500</span></a>  <span class="comment"> * Return true if there was output, or false is there was none.</span>
<a name="l501"><span class="linenum"> 501</span></a>  <span class="comment"> *</span>
<a name="l502"><span class="linenum"> 502</span></a>  <span class="comment"> * @global object</span>
<a name="l503"><span class="linenum"> 503</span></a>  <span class="comment"> * @global object</span>
<a name="l504"><span class="linenum"> 504</span></a>  <span class="comment"> * @global object</span>
<a name="l505"><span class="linenum"> 505</span></a>  <span class="comment"> * @param object $course</span>
<a name="l506"><span class="linenum"> 506</span></a>  <span class="comment"> * @param object $viewfullnames</span>
<a name="l507"><span class="linenum"> 507</span></a>  <span class="comment"> * @param int $timestart</span>
<a name="l508"><span class="linenum"> 508</span></a>  <span class="comment"> * @return bool</span>
<a name="l509"><span class="linenum"> 509</span></a>  <span class="comment"> */</span>
<a name="l510"><span class="linenum"> 510</span></a>  function <a class="function" onClick="logFunction('glossary_print_recent_activity')" href="../../_functions/glossary_print_recent_activity.html" onMouseOver="funcPopup(event,'glossary_print_recent_activity')">glossary_print_recent_activity</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>, <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>) {
<a name="l511"><span class="linenum"> 511</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>, <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>;
<a name="l512"><span class="linenum"> 512</span></a>  
<a name="l513"><span class="linenum"> 513</span></a>  <span class="comment">    //TODO: use timestamp in approved field instead of changing timemodified when approving in 2.0</span>
<a name="l514"><span class="linenum"> 514</span></a>      if (!<a class="phpfunction" onClick="logFunction('defined')" href="../../_functions/defined.html" onMouseOver="phpfuncPopup(event,'defined')">defined</a>('<a class="constant" onClick="logConstant('GLOSSARY_RECENT_ACTIVITY_LIMIT')" href="../../_constants/GLOSSARY_RECENT_ACTIVITY_LIMIT.html" onMouseOver="constPopup(event,'GLOSSARY_RECENT_ACTIVITY_LIMIT')">GLOSSARY_RECENT_ACTIVITY_LIMIT</a>')) {
<a name="l515"><span class="linenum"> 515</span></a>          <a class="phpfunction" onClick="logFunction('define')" href="../../_functions/define.html" onMouseOver="phpfuncPopup(event,'define')">define</a>('<a class="constant" onClick="logConstant('GLOSSARY_RECENT_ACTIVITY_LIMIT')" href="../../_constants/GLOSSARY_RECENT_ACTIVITY_LIMIT.html" onMouseOver="constPopup(event,'GLOSSARY_RECENT_ACTIVITY_LIMIT')">GLOSSARY_RECENT_ACTIVITY_LIMIT</a>', 50);
<a name="l516"><span class="linenum"> 516</span></a>      }
<a name="l517"><span class="linenum"> 517</span></a>      <a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a> = <a class="function" onClick="logFunction('get_fast_modinfo')" href="../../_functions/get_fast_modinfo.html" onMouseOver="funcPopup(event,'get_fast_modinfo')">get_fast_modinfo</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l518"><span class="linenum"> 518</span></a>      <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a> = array();
<a name="l519"><span class="linenum"> 519</span></a>  
<a name="l520"><span class="linenum"> 520</span></a>      foreach (<a class="var it697" onMouseOver="hilite(697)" onMouseOut="lolite()" onClick="logVariable('modinfo')" href="../../_variables/modinfo.html">$modinfo</a>-&gt;<a onClick="logVariable('cms')" class="var it43006" onMouseOver="hilite(43006)" onMouseOut="lolite()" href="../../_variables/cms.html">cms</a> as <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) {
<a name="l521"><span class="linenum"> 521</span></a>          if (<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('modname')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/modname.html">modname</a> != 'glossary') {
<a name="l522"><span class="linenum"> 522</span></a>              continue;
<a name="l523"><span class="linenum"> 523</span></a>          }
<a name="l524"><span class="linenum"> 524</span></a>          if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('uservisible')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/uservisible.html">uservisible</a>) {
<a name="l525"><span class="linenum"> 525</span></a>              continue;
<a name="l526"><span class="linenum"> 526</span></a>          }
<a name="l527"><span class="linenum"> 527</span></a>          <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>[<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>] = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l528"><span class="linenum"> 528</span></a>      }
<a name="l529"><span class="linenum"> 529</span></a>  
<a name="l530"><span class="linenum"> 530</span></a>      if (!<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>) {
<a name="l531"><span class="linenum"> 531</span></a>          return false;
<a name="l532"><span class="linenum"> 532</span></a>      }
<a name="l533"><span class="linenum"> 533</span></a>  
<a name="l534"><span class="linenum"> 534</span></a>  <span class="comment">    // generate list of approval capabilities for all glossaries in the course.</span>
<a name="l535"><span class="linenum"> 535</span></a>      <a class="var it12564" onMouseOver="hilite(12564)" onMouseOut="lolite()" onClick="logVariable('approvals')" href="../../_variables/approvals.html">$approvals</a> = array();
<a name="l536"><span class="linenum"> 536</span></a>      foreach (<a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a> as <a class="var it12565" onMouseOver="hilite(12565)" onMouseOut="lolite()" onClick="logVariable('glinstanceid')" href="../../_variables/glinstanceid.html">$glinstanceid</a> =&gt; <a class="var it12566" onMouseOver="hilite(12566)" onMouseOut="lolite()" onClick="logVariable('glcmid')" href="../../_variables/glcmid.html">$glcmid</a>) {
<a name="l537"><span class="linenum"> 537</span></a>          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it12566" onMouseOver="hilite(12566)" onMouseOut="lolite()" onClick="logVariable('glcmid')" href="../../_variables/glcmid.html">$glcmid</a>);
<a name="l538"><span class="linenum"> 538</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:view', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l539"><span class="linenum"> 539</span></a>  <span class="comment">            // get records glossary entries that are approved if user has no capability to approve entries.</span>
<a name="l540"><span class="linenum"> 540</span></a>              if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l541"><span class="linenum"> 541</span></a>                  <a class="var it12564" onMouseOver="hilite(12564)" onMouseOut="lolite()" onClick="logVariable('approvals')" href="../../_variables/approvals.html">$approvals</a>[] = ' ge.glossaryid = :glsid'.<a class="var it12565" onMouseOver="hilite(12565)" onMouseOut="lolite()" onClick="logVariable('glinstanceid')" href="../../_variables/glinstanceid.html">$glinstanceid</a>.' ';
<a name="l542"><span class="linenum"> 542</span></a>              } else {
<a name="l543"><span class="linenum"> 543</span></a>                  <a class="var it12564" onMouseOver="hilite(12564)" onMouseOut="lolite()" onClick="logVariable('approvals')" href="../../_variables/approvals.html">$approvals</a>[] = ' (ge.approved = 1 AND ge.glossaryid = :glsid'.<a class="var it12565" onMouseOver="hilite(12565)" onMouseOut="lolite()" onClick="logVariable('glinstanceid')" href="../../_variables/glinstanceid.html">$glinstanceid</a>.') ';
<a name="l544"><span class="linenum"> 544</span></a>              }
<a name="l545"><span class="linenum"> 545</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['glsid'.<a class="var it12565" onMouseOver="hilite(12565)" onMouseOut="lolite()" onClick="logVariable('glinstanceid')" href="../../_variables/glinstanceid.html">$glinstanceid</a>] = <a class="var it12565" onMouseOver="hilite(12565)" onMouseOut="lolite()" onClick="logVariable('glinstanceid')" href="../../_variables/glinstanceid.html">$glinstanceid</a>;
<a name="l546"><span class="linenum"> 546</span></a>          }
<a name="l547"><span class="linenum"> 547</span></a>      }
<a name="l548"><span class="linenum"> 548</span></a>  
<a name="l549"><span class="linenum"> 549</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it12564" onMouseOver="hilite(12564)" onMouseOut="lolite()" onClick="logVariable('approvals')" href="../../_variables/approvals.html">$approvals</a>) == 0) {
<a name="l550"><span class="linenum"> 550</span></a>          return false;
<a name="l551"><span class="linenum"> 551</span></a>      }
<a name="l552"><span class="linenum"> 552</span></a>      <a class="var it12567" onMouseOver="hilite(12567)" onMouseOut="lolite()" onClick="logVariable('selectsql')" href="../../_variables/selectsql.html">$selectsql</a> = 'SELECT ge.id, ge.concept, ge.approved, ge.timemodified, ge.glossaryid,
<a name="l553"><span class="linenum"> 553</span></a>                                          '.<a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>('u',null,'userid');
<a name="l554"><span class="linenum"> 554</span></a>      <a class="var it5529" onMouseOver="hilite(5529)" onMouseOut="lolite()" onClick="logVariable('countsql')" href="../../_variables/countsql.html">$countsql</a> = 'SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(*)';
<a name="l555"><span class="linenum"> 555</span></a>  
<a name="l556"><span class="linenum"> 556</span></a>      <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../../_variables/joins.html">$joins</a> = array(' FROM {glossary_entries} ge ');
<a name="l557"><span class="linenum"> 557</span></a>      <a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../../_variables/joins.html">$joins</a>[] = 'JOIN {user} u ON u.id = ge.userid ';
<a name="l558"><span class="linenum"> 558</span></a>      <a class="var it7767" onMouseOver="hilite(7767)" onMouseOut="lolite()" onClick="logVariable('fromsql')" href="../../_variables/fromsql.html">$fromsql</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(<a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../../_variables/joins.html">$joins</a>, &quot;\n&quot;);
<a name="l559"><span class="linenum"> 559</span></a>  
<a name="l560"><span class="linenum"> 560</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['timestart'] = <a class="var it1937" onMouseOver="hilite(1937)" onMouseOut="lolite()" onClick="logVariable('timestart')" href="../../_variables/timestart.html">$timestart</a>;
<a name="l561"><span class="linenum"> 561</span></a>      <a class="var it12568" onMouseOver="hilite(12568)" onMouseOut="lolite()" onClick="logVariable('clausesql')" href="../../_variables/clausesql.html">$clausesql</a> = ' WHERE ge.timemodified &gt; :timestart ';
<a name="l562"><span class="linenum"> 562</span></a>  
<a name="l563"><span class="linenum"> 563</span></a>      if (<a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it12564" onMouseOver="hilite(12564)" onMouseOut="lolite()" onClick="logVariable('approvals')" href="../../_variables/approvals.html">$approvals</a>) &gt; 0) {
<a name="l564"><span class="linenum"> 564</span></a>          <a class="var it12569" onMouseOver="hilite(12569)" onMouseOut="lolite()" onClick="logVariable('approvalsql')" href="../../_variables/approvalsql.html">$approvalsql</a> = 'AND ('. <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(<a class="var it12564" onMouseOver="hilite(12564)" onMouseOut="lolite()" onClick="logVariable('approvals')" href="../../_variables/approvals.html">$approvals</a>, ' OR ') .') ';
<a name="l565"><span class="linenum"> 565</span></a>      } else {
<a name="l566"><span class="linenum"> 566</span></a>          <a class="var it12569" onMouseOver="hilite(12569)" onMouseOut="lolite()" onClick="logVariable('approvalsql')" href="../../_variables/approvalsql.html">$approvalsql</a> = '';
<a name="l567"><span class="linenum"> 567</span></a>      }
<a name="l568"><span class="linenum"> 568</span></a>      <a class="var it12570" onMouseOver="hilite(12570)" onMouseOut="lolite()" onClick="logVariable('ordersql')" href="../../_variables/ordersql.html">$ordersql</a> = 'ORDER BY ge.timemodified ASC';
<a name="l569"><span class="linenum"> 569</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it12567" onMouseOver="hilite(12567)" onMouseOut="lolite()" onClick="logVariable('selectsql')" href="../../_variables/selectsql.html">$selectsql</a>.<a class="var it7767" onMouseOver="hilite(7767)" onMouseOut="lolite()" onClick="logVariable('fromsql')" href="../../_variables/fromsql.html">$fromsql</a>.<a class="var it12568" onMouseOver="hilite(12568)" onMouseOut="lolite()" onClick="logVariable('clausesql')" href="../../_variables/clausesql.html">$clausesql</a>.<a class="var it12569" onMouseOver="hilite(12569)" onMouseOut="lolite()" onClick="logVariable('approvalsql')" href="../../_variables/approvalsql.html">$approvalsql</a>.<a class="var it12570" onMouseOver="hilite(12570)" onMouseOut="lolite()" onClick="logVariable('ordersql')" href="../../_variables/ordersql.html">$ordersql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, 0, (<a class="constant" onClick="logConstant('GLOSSARY_RECENT_ACTIVITY_LIMIT')" href="../../_constants/GLOSSARY_RECENT_ACTIVITY_LIMIT.html" onMouseOver="constPopup(event,'GLOSSARY_RECENT_ACTIVITY_LIMIT')">GLOSSARY_RECENT_ACTIVITY_LIMIT</a>+1));
<a name="l570"><span class="linenum"> 570</span></a>  
<a name="l571"><span class="linenum"> 571</span></a>      if (empty(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>)) {
<a name="l572"><span class="linenum"> 572</span></a>          return false;
<a name="l573"><span class="linenum"> 573</span></a>      }
<a name="l574"><span class="linenum"> 574</span></a>  
<a name="l575"><span class="linenum"> 575</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('newentries', 'glossary').':', 3);
<a name="l576"><span class="linenum"> 576</span></a>      <a class="var it12571" onMouseOver="hilite(12571)" onMouseOut="lolite()" onClick="logVariable('strftimerecent')" href="../../_variables/strftimerecent.html">$strftimerecent</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('strftimerecent');
<a name="l577"><span class="linenum"> 577</span></a>      <a class="var it12572" onMouseOver="hilite(12572)" onMouseOut="lolite()" onClick="logVariable('entrycount')" href="../../_variables/entrycount.html">$entrycount</a> = 0;
<a name="l578"><span class="linenum"> 578</span></a>      foreach (<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> as <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>) {
<a name="l579"><span class="linenum"> 579</span></a>          if (<a class="var it12572" onMouseOver="hilite(12572)" onMouseOut="lolite()" onClick="logVariable('entrycount')" href="../../_variables/entrycount.html">$entrycount</a> &lt; <a class="constant" onClick="logConstant('GLOSSARY_RECENT_ACTIVITY_LIMIT')" href="../../_constants/GLOSSARY_RECENT_ACTIVITY_LIMIT.html" onMouseOver="constPopup(event,'GLOSSARY_RECENT_ACTIVITY_LIMIT')">GLOSSARY_RECENT_ACTIVITY_LIMIT</a>) {
<a name="l580"><span class="linenum"> 580</span></a>              if (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('approved')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a>) {
<a name="l581"><span class="linenum"> 581</span></a>                  <a class="var it6462" onMouseOver="hilite(6462)" onMouseOut="lolite()" onClick="logVariable('dimmed')" href="../../_variables/dimmed.html">$dimmed</a> = '';
<a name="l582"><span class="linenum"> 582</span></a>                  <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../../_variables/urlparams.html">$urlparams</a> = array('g' =&gt; <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>, 'mode' =&gt; 'entry', 'hook' =&gt; <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l583"><span class="linenum"> 583</span></a>              } else {
<a name="l584"><span class="linenum"> 584</span></a>                  <a class="var it6462" onMouseOver="hilite(6462)" onMouseOut="lolite()" onClick="logVariable('dimmed')" href="../../_variables/dimmed.html">$dimmed</a> = ' dimmed_text';
<a name="l585"><span class="linenum"> 585</span></a>                  <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../../_variables/urlparams.html">$urlparams</a> = array('id' =&gt; <a class="var it400" onMouseOver="hilite(400)" onMouseOut="lolite()" onClick="logVariable('ids')" href="../../_variables/ids.html">$ids</a>[<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>], 'mode' =&gt; 'approval', 'hook' =&gt; <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('concept')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>, true));
<a name="l586"><span class="linenum"> 586</span></a>              }
<a name="l587"><span class="linenum"> 587</span></a>              <a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'<a class="filename" href="../../mod/glossary/view.php.html">/mod/glossary/view.php</a>' , <a class="var it4704" onMouseOver="hilite(4704)" onMouseOut="lolite()" onClick="logVariable('urlparams')" href="../../_variables/urlparams.html">$urlparams</a>);
<a name="l588"><span class="linenum"> 588</span></a>              echo '&lt;div class=&quot;head'.<a class="var it6462" onMouseOver="hilite(6462)" onMouseOut="lolite()" onClick="logVariable('dimmed')" href="../../_variables/dimmed.html">$dimmed</a>.'&quot;&gt;';
<a name="l589"><span class="linenum"> 589</span></a>              echo '&lt;div class=&quot;date&quot;&gt;'.<a class="function" onClick="logFunction('userdate')" href="../../_functions/userdate.html" onMouseOver="funcPopup(event,'userdate')">userdate</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('timemodified')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/timemodified.html">timemodified</a>, <a class="var it12571" onMouseOver="hilite(12571)" onMouseOut="lolite()" onClick="logVariable('strftimerecent')" href="../../_variables/strftimerecent.html">$strftimerecent</a>).'&lt;/div&gt;';
<a name="l590"><span class="linenum"> 590</span></a>              echo '&lt;div class=&quot;name&quot;&gt;'.<a class="function" onClick="logFunction('fullname')" href="../../_functions/fullname.html" onMouseOver="funcPopup(event,'fullname')">fullname</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it5397" onMouseOver="hilite(5397)" onMouseOut="lolite()" onClick="logVariable('viewfullnames')" href="../../_variables/viewfullnames.html">$viewfullnames</a>).'&lt;/div&gt;';
<a name="l591"><span class="linenum"> 591</span></a>              echo '&lt;/div&gt;';
<a name="l592"><span class="linenum"> 592</span></a>              echo '&lt;div class=&quot;info&quot;&gt;&lt;a href=&quot;'.<a class="var it518" onMouseOver="hilite(518)" onMouseOut="lolite()" onClick="logVariable('link')" href="../../_variables/link.html">$link</a>.'&quot;&gt;'.<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('concept')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>, true).'&lt;/a&gt;&lt;/div&gt;';
<a name="l593"><span class="linenum"> 593</span></a>              <a class="var it12572" onMouseOver="hilite(12572)" onMouseOut="lolite()" onClick="logVariable('entrycount')" href="../../_variables/entrycount.html">$entrycount</a> += 1;
<a name="l594"><span class="linenum"> 594</span></a>          } else {
<a name="l595"><span class="linenum"> 595</span></a>              <a class="var it12573" onMouseOver="hilite(12573)" onMouseOut="lolite()" onClick="logVariable('numnewentries')" href="../../_variables/numnewentries.html">$numnewentries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it5529" onMouseOver="hilite(5529)" onMouseOut="lolite()" onClick="logVariable('countsql')" href="../../_variables/countsql.html">$countsql</a>.<a class="var it8679" onMouseOver="hilite(8679)" onMouseOut="lolite()" onClick="logVariable('joins')" href="../../_variables/joins.html">$joins</a>[0].<a class="var it12568" onMouseOver="hilite(12568)" onMouseOut="lolite()" onClick="logVariable('clausesql')" href="../../_variables/clausesql.html">$clausesql</a>.<a class="var it12569" onMouseOver="hilite(12569)" onMouseOut="lolite()" onClick="logVariable('approvalsql')" href="../../_variables/approvalsql.html">$approvalsql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l596"><span class="linenum"> 596</span></a>              echo '&lt;div class=&quot;head&quot;&gt;&lt;div class=&quot;activityhead&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('andmorenewentries', 'glossary', <a class="var it12573" onMouseOver="hilite(12573)" onMouseOut="lolite()" onClick="logVariable('numnewentries')" href="../../_variables/numnewentries.html">$numnewentries</a> - <a class="constant" onClick="logConstant('GLOSSARY_RECENT_ACTIVITY_LIMIT')" href="../../_constants/GLOSSARY_RECENT_ACTIVITY_LIMIT.html" onMouseOver="constPopup(event,'GLOSSARY_RECENT_ACTIVITY_LIMIT')">GLOSSARY_RECENT_ACTIVITY_LIMIT</a>).'&lt;/div&gt;&lt;/div&gt;';
<a name="l597"><span class="linenum"> 597</span></a>              break;
<a name="l598"><span class="linenum"> 598</span></a>          }
<a name="l599"><span class="linenum"> 599</span></a>      }
<a name="l600"><span class="linenum"> 600</span></a>  
<a name="l601"><span class="linenum"> 601</span></a>      return true;
<a name="l602"><span class="linenum"> 602</span></a>  }
<a name="l603"><span class="linenum"> 603</span></a>  
<a name="l604"><span class="linenum"> 604</span></a>  <span class="comment">/**</span>
<a name="l605"><span class="linenum"> 605</span></a>  <span class="comment"> * @global object</span>
<a name="l606"><span class="linenum"> 606</span></a>  <span class="comment"> * @param object $log</span>
<a name="l607"><span class="linenum"> 607</span></a>  <span class="comment"> */</span>
<a name="l608"><span class="linenum"> 608</span></a>  function <a class="function" onClick="logFunction('glossary_log_info')" href="../../_functions/glossary_log_info.html" onMouseOver="funcPopup(event,'glossary_log_info')">glossary_log_info</a>(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../_variables/log.html">$log</a>) {
<a name="l609"><span class="linenum"> 609</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l610"><span class="linenum"> 610</span></a>  
<a name="l611"><span class="linenum"> 611</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(&quot;SELECT e.*, u.firstname, u.lastname
<a name="l612"><span class="linenum"> 612</span></a>                                    FROM {glossary_entries} e, {user} u
<a name="l613"><span class="linenum"> 613</span></a>                                   WHERE e.id = ? AND u.id = ?&quot;, array(<a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('info')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../../_variables/info.html">info</a>, <a class="var it1135" onMouseOver="hilite(1135)" onMouseOut="lolite()" onClick="logVariable('log')" href="../../_variables/log.html">$log</a>-&gt;<a onClick="logVariable('userid')" class="var it43193" onMouseOver="hilite(43193)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>));
<a name="l614"><span class="linenum"> 614</span></a>  }
<a name="l615"><span class="linenum"> 615</span></a>  
<a name="l616"><span class="linenum"> 616</span></a>  <span class="comment">/**</span>
<a name="l617"><span class="linenum"> 617</span></a>  <span class="comment"> * Function to be run periodically according to the moodle cron</span>
<a name="l618"><span class="linenum"> 618</span></a>  <span class="comment"> * This function searches for things that need to be done, such</span>
<a name="l619"><span class="linenum"> 619</span></a>  <span class="comment"> * as sending out mail, toggling flags etc ...</span>
<a name="l620"><span class="linenum"> 620</span></a>  <span class="comment"> * @return bool</span>
<a name="l621"><span class="linenum"> 621</span></a>  <span class="comment"> */</span>
<a name="l622"><span class="linenum"> 622</span></a>  function <a class="function" onClick="logFunction('glossary_cron')" href="../../_functions/glossary_cron.html" onMouseOver="funcPopup(event,'glossary_cron')">glossary_cron</a> () {
<a name="l623"><span class="linenum"> 623</span></a>      return true;
<a name="l624"><span class="linenum"> 624</span></a>  }
<a name="l625"><span class="linenum"> 625</span></a>  
<a name="l626"><span class="linenum"> 626</span></a>  <span class="comment">/**</span>
<a name="l627"><span class="linenum"> 627</span></a>  <span class="comment"> * Return grade for given user or all users.</span>
<a name="l628"><span class="linenum"> 628</span></a>  <span class="comment"> *</span>
<a name="l629"><span class="linenum"> 629</span></a>  <span class="comment"> * @param stdClass $glossary A glossary instance</span>
<a name="l630"><span class="linenum"> 630</span></a>  <span class="comment"> * @param int $userid Optional user id, 0 means all users</span>
<a name="l631"><span class="linenum"> 631</span></a>  <span class="comment"> * @return array An array of grades, false if none</span>
<a name="l632"><span class="linenum"> 632</span></a>  <span class="comment"> */</span>
<a name="l633"><span class="linenum"> 633</span></a>  function <a class="function" onClick="logFunction('glossary_get_user_grades')" href="../../_functions/glossary_get_user_grades.html" onMouseOver="funcPopup(event,'glossary_get_user_grades')">glossary_get_user_grades</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=0) {
<a name="l634"><span class="linenum"> 634</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l635"><span class="linenum"> 635</span></a>  
<a name="l636"><span class="linenum"> 636</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../rating/lib.php.html">/rating/lib.php</a>');
<a name="l637"><span class="linenum"> 637</span></a>  
<a name="l638"><span class="linenum"> 638</span></a>      <a class="var it7885" onMouseOver="hilite(7885)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a> = new stdClass;
<a name="l639"><span class="linenum"> 639</span></a>  
<a name="l640"><span class="linenum"> 640</span></a>  <span class="comment">    //need these to work backwards to get a context id. Is there a better way to get contextid from a module instance?</span>
<a name="l641"><span class="linenum"> 641</span></a>      <a class="var it7885" onMouseOver="hilite(7885)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('modulename')" class="var it42994" onMouseOver="hilite(42994)" onMouseOut="lolite()" href="../../_variables/modulename.html">modulename</a> = 'glossary';
<a name="l642"><span class="linenum"> 642</span></a>      <a class="var it7885" onMouseOver="hilite(7885)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('moduleid')" class="var it42994" onMouseOver="hilite(42994)" onMouseOut="lolite()" href="../../_variables/moduleid.html">moduleid</a>   = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l643"><span class="linenum"> 643</span></a>      <a class="var it7885" onMouseOver="hilite(7885)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('component')" class="var it42994" onMouseOver="hilite(42994)" onMouseOut="lolite()" href="../../_variables/component.html">component</a>  = 'mod_glossary';
<a name="l644"><span class="linenum"> 644</span></a>      <a class="var it7885" onMouseOver="hilite(7885)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('ratingarea')" class="var it42994" onMouseOver="hilite(42994)" onMouseOut="lolite()" href="../../_variables/ratingarea.html">ratingarea</a> = 'entry';
<a name="l645"><span class="linenum"> 645</span></a>  
<a name="l646"><span class="linenum"> 646</span></a>      <a class="var it7885" onMouseOver="hilite(7885)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('userid')" class="var it42994" onMouseOver="hilite(42994)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l647"><span class="linenum"> 647</span></a>      <a class="var it7885" onMouseOver="hilite(7885)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('aggregationmethod')" class="var it42994" onMouseOver="hilite(42994)" onMouseOut="lolite()" href="../../_variables/aggregationmethod.html">aggregationmethod</a> = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('assessed')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a>;
<a name="l648"><span class="linenum"> 648</span></a>      <a class="var it7885" onMouseOver="hilite(7885)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('scaleid')" class="var it42994" onMouseOver="hilite(42994)" onMouseOut="lolite()" href="../../_variables/scaleid.html">scaleid</a> = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('scale')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>;
<a name="l649"><span class="linenum"> 649</span></a>      <a class="var it7885" onMouseOver="hilite(7885)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('itemtable')" class="var it42994" onMouseOver="hilite(42994)" onMouseOut="lolite()" href="../../_variables/itemtable.html">itemtable</a> = 'glossary_entries';
<a name="l650"><span class="linenum"> 650</span></a>      <a class="var it7885" onMouseOver="hilite(7885)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>-&gt;<a onClick="logVariable('itemtableusercolumn')" class="var it42994" onMouseOver="hilite(42994)" onMouseOut="lolite()" href="../../_variables/itemtableusercolumn.html">itemtableusercolumn</a> = 'userid';
<a name="l651"><span class="linenum"> 651</span></a>  
<a name="l652"><span class="linenum"> 652</span></a>      <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a> = <span class="keyword">new </span><a class="class" onClick="logClass('rating_manager')" href="../../_classes/rating_manager.html" onMouseOver="classPopup(event,'rating_manager')">rating_manager</a>();
<a name="l653"><span class="linenum"> 653</span></a>      return <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a>-&gt;<a class="function" onClick="logFunction('get_user_grades')" href="../../_functions/get_user_grades.html" onMouseOver="funcPopup(event,'get_user_grades')">get_user_grades</a>(<a class="var it7885" onMouseOver="hilite(7885)" onMouseOut="lolite()" onClick="logVariable('ratingoptions')" href="../../_variables/ratingoptions.html">$ratingoptions</a>);
<a name="l654"><span class="linenum"> 654</span></a>  }
<a name="l655"><span class="linenum"> 655</span></a>  
<a name="l656"><span class="linenum"> 656</span></a>  <span class="comment">/**</span>
<a name="l657"><span class="linenum"> 657</span></a>  <span class="comment"> * Return rating related permissions</span>
<a name="l658"><span class="linenum"> 658</span></a>  <span class="comment"> *</span>
<a name="l659"><span class="linenum"> 659</span></a>  <span class="comment"> * @param int $contextid the context id</span>
<a name="l660"><span class="linenum"> 660</span></a>  <span class="comment"> * @param string $component The component we want to get permissions for</span>
<a name="l661"><span class="linenum"> 661</span></a>  <span class="comment"> * @param string $ratingarea The ratingarea that we want to get permissions for</span>
<a name="l662"><span class="linenum"> 662</span></a>  <span class="comment"> * @return array an associative array of the user's rating permissions</span>
<a name="l663"><span class="linenum"> 663</span></a>  <span class="comment"> */</span>
<a name="l664"><span class="linenum"> 664</span></a>  function <a class="function" onClick="logFunction('glossary_rating_permissions')" href="../../_functions/glossary_rating_permissions.html" onMouseOver="funcPopup(event,'glossary_rating_permissions')">glossary_rating_permissions</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, <a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a>, <a class="var it5414" onMouseOver="hilite(5414)" onMouseOut="lolite()" onClick="logVariable('ratingarea')" href="../../_variables/ratingarea.html">$ratingarea</a>) {
<a name="l665"><span class="linenum"> 665</span></a>      if (<a class="var it227" onMouseOver="hilite(227)" onMouseOut="lolite()" onClick="logVariable('component')" href="../../_variables/component.html">$component</a> != 'mod_glossary' || <a class="var it5414" onMouseOver="hilite(5414)" onMouseOut="lolite()" onClick="logVariable('ratingarea')" href="../../_variables/ratingarea.html">$ratingarea</a> != 'entry') {
<a name="l666"><span class="linenum"> 666</span></a>  <span class="comment">        // We don't know about this component/ratingarea so just return null to get the</span>
<a name="l667"><span class="linenum"> 667</span></a>  <span class="comment">        // default restrictive permissions.</span>
<a name="l668"><span class="linenum"> 668</span></a>          return null;
<a name="l669"><span class="linenum"> 669</span></a>      }
<a name="l670"><span class="linenum"> 670</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = context::<a class="function" onClick="logFunction('instance_by_id')" href="../../_functions/instance_by_id.html" onMouseOver="funcPopup(event,'instance_by_id')">instance_by_id</a>(<a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>);
<a name="l671"><span class="linenum"> 671</span></a>      return array(
<a name="l672"><span class="linenum"> 672</span></a>          'view'    =&gt; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:viewrating', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>),
<a name="l673"><span class="linenum"> 673</span></a>          'viewany' =&gt; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:viewanyrating', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>),
<a name="l674"><span class="linenum"> 674</span></a>          'viewall' =&gt; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:viewallratings', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>),
<a name="l675"><span class="linenum"> 675</span></a>          'rate'    =&gt; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:rate', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)
<a name="l676"><span class="linenum"> 676</span></a>      );
<a name="l677"><span class="linenum"> 677</span></a>  }
<a name="l678"><span class="linenum"> 678</span></a>  
<a name="l679"><span class="linenum"> 679</span></a>  <span class="comment">/**</span>
<a name="l680"><span class="linenum"> 680</span></a>  <span class="comment"> * Validates a submitted rating</span>
<a name="l681"><span class="linenum"> 681</span></a>  <span class="comment"> * @param array $params submitted data</span>
<a name="l682"><span class="linenum"> 682</span></a>  <span class="comment"> *            context =&gt; object the context in which the rated items exists [required]</span>
<a name="l683"><span class="linenum"> 683</span></a>  <span class="comment"> *            component =&gt; The component for this module - should always be mod_forum [required]</span>
<a name="l684"><span class="linenum"> 684</span></a>  <span class="comment"> *            ratingarea =&gt; object the context in which the rated items exists [required]</span>
<a name="l685"><span class="linenum"> 685</span></a>  <span class="comment"> *            itemid =&gt; int the ID of the object being rated [required]</span>
<a name="l686"><span class="linenum"> 686</span></a>  <span class="comment"> *            scaleid =&gt; int the scale from which the user can select a rating. Used for bounds checking. [required]</span>
<a name="l687"><span class="linenum"> 687</span></a>  <span class="comment"> *            rating =&gt; int the submitted rating</span>
<a name="l688"><span class="linenum"> 688</span></a>  <span class="comment"> *            rateduserid =&gt; int the id of the user whose items have been rated. NOT the user who submitted the ratings. 0 to update all. [required]</span>
<a name="l689"><span class="linenum"> 689</span></a>  <span class="comment"> *            aggregation =&gt; int the aggregation method to apply when calculating grades ie RATING_AGGREGATE_AVERAGE [optional]</span>
<a name="l690"><span class="linenum"> 690</span></a>  <span class="comment"> * @return boolean true if the rating is valid. Will throw rating_exception if not</span>
<a name="l691"><span class="linenum"> 691</span></a>  <span class="comment"> */</span>
<a name="l692"><span class="linenum"> 692</span></a>  function <a class="function" onClick="logFunction('glossary_rating_validate')" href="../../_functions/glossary_rating_validate.html" onMouseOver="funcPopup(event,'glossary_rating_validate')">glossary_rating_validate</a>(<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) {
<a name="l693"><span class="linenum"> 693</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l694"><span class="linenum"> 694</span></a>  
<a name="l695"><span class="linenum"> 695</span></a>  <span class="comment">    // Check the component is mod_forum</span>
<a name="l696"><span class="linenum"> 696</span></a>      if (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['component'] != 'mod_glossary') {
<a name="l697"><span class="linenum"> 697</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidcomponent');
<a name="l698"><span class="linenum"> 698</span></a>      }
<a name="l699"><span class="linenum"> 699</span></a>  
<a name="l700"><span class="linenum"> 700</span></a>  <span class="comment">    // Check the ratingarea is post (the only rating area in forum)</span>
<a name="l701"><span class="linenum"> 701</span></a>      if (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['ratingarea'] != 'entry') {
<a name="l702"><span class="linenum"> 702</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidratingarea');
<a name="l703"><span class="linenum"> 703</span></a>      }
<a name="l704"><span class="linenum"> 704</span></a>  
<a name="l705"><span class="linenum"> 705</span></a>  <span class="comment">    // Check the rateduserid is not the current user .. you can't rate your own posts</span>
<a name="l706"><span class="linenum"> 706</span></a>      if (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rateduserid'] == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l707"><span class="linenum"> 707</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('nopermissiontorate');
<a name="l708"><span class="linenum"> 708</span></a>      }
<a name="l709"><span class="linenum"> 709</span></a>  
<a name="l710"><span class="linenum"> 710</span></a>      <a class="var it12576" onMouseOver="hilite(12576)" onMouseOut="lolite()" onClick="logVariable('glossarysql')" href="../../_variables/glossarysql.html">$glossarysql</a> = &quot;SELECT g.id as glossaryid, g.scale, g.course, e.userid as userid, e.approved, e.timecreated, g.assesstimestart, g.assesstimefinish
<a name="l711"><span class="linenum"> 711</span></a>                        FROM {glossary_entries} e
<a name="l712"><span class="linenum"> 712</span></a>                        JOIN {glossary} g ON e.glossaryid = g.id
<a name="l713"><span class="linenum"> 713</span></a>                       WHERE e.id = :itemid&quot;;
<a name="l714"><span class="linenum"> 714</span></a>      <a class="var it12577" onMouseOver="hilite(12577)" onMouseOut="lolite()" onClick="logVariable('glossaryparams')" href="../../_variables/glossaryparams.html">$glossaryparams</a> = array('itemid' =&gt; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['itemid']);
<a name="l715"><span class="linenum"> 715</span></a>      <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record_sql')" href="../../_functions/get_record_sql.html" onMouseOver="funcPopup(event,'get_record_sql')">get_record_sql</a>(<a class="var it12576" onMouseOver="hilite(12576)" onMouseOut="lolite()" onClick="logVariable('glossarysql')" href="../../_variables/glossarysql.html">$glossarysql</a>, <a class="var it12577" onMouseOver="hilite(12577)" onMouseOut="lolite()" onClick="logVariable('glossaryparams')" href="../../_variables/glossaryparams.html">$glossaryparams</a>);
<a name="l716"><span class="linenum"> 716</span></a>      if (!<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>) {
<a name="l717"><span class="linenum"> 717</span></a>  <span class="comment">        //item doesn't exist</span>
<a name="l718"><span class="linenum"> 718</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invaliditemid');
<a name="l719"><span class="linenum"> 719</span></a>      }
<a name="l720"><span class="linenum"> 720</span></a>  
<a name="l721"><span class="linenum"> 721</span></a>      if (<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('scale')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a> != <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['scaleid']) {
<a name="l722"><span class="linenum"> 722</span></a>  <span class="comment">        //the scale being submitted doesnt match the one in the database</span>
<a name="l723"><span class="linenum"> 723</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidscaleid');
<a name="l724"><span class="linenum"> 724</span></a>      }
<a name="l725"><span class="linenum"> 725</span></a>  
<a name="l726"><span class="linenum"> 726</span></a>  <span class="comment">    //check that the submitted rating is valid for the scale</span>
<a name="l727"><span class="linenum"> 727</span></a>  
<a name="l728"><span class="linenum"> 728</span></a>  <span class="comment">    // lower limit</span>
<a name="l729"><span class="linenum"> 729</span></a>      if (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rating'] &lt; 0  &amp;&amp; <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rating'] != <a class="constant" onClick="logConstant('RATING_UNSET_RATING')" href="../../_constants/RATING_UNSET_RATING.html" onMouseOver="constPopup(event,'RATING_UNSET_RATING')">RATING_UNSET_RATING</a>) {
<a name="l730"><span class="linenum"> 730</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidnum');
<a name="l731"><span class="linenum"> 731</span></a>      }
<a name="l732"><span class="linenum"> 732</span></a>  
<a name="l733"><span class="linenum"> 733</span></a>  <span class="comment">    // upper limit</span>
<a name="l734"><span class="linenum"> 734</span></a>      if (<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('scale')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a> &lt; 0) {
<a name="l735"><span class="linenum"> 735</span></a>  <span class="comment">        //its a custom scale</span>
<a name="l736"><span class="linenum"> 736</span></a>          <a class="var it12578" onMouseOver="hilite(12578)" onMouseOut="lolite()" onClick="logVariable('scalerecord')" href="../../_variables/scalerecord.html">$scalerecord</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('scale', array('id' =&gt; -<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('scale')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>));
<a name="l737"><span class="linenum"> 737</span></a>          if (<a class="var it12578" onMouseOver="hilite(12578)" onMouseOut="lolite()" onClick="logVariable('scalerecord')" href="../../_variables/scalerecord.html">$scalerecord</a>) {
<a name="l738"><span class="linenum"> 738</span></a>              <a class="var it12579" onMouseOver="hilite(12579)" onMouseOut="lolite()" onClick="logVariable('scalearray')" href="../../_variables/scalearray.html">$scalearray</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(',', <a class="var it12578" onMouseOver="hilite(12578)" onMouseOut="lolite()" onClick="logVariable('scalerecord')" href="../../_variables/scalerecord.html">$scalerecord</a>-&gt;<a onClick="logVariable('scale')" class="var it44549" onMouseOver="hilite(44549)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>);
<a name="l739"><span class="linenum"> 739</span></a>              if (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rating'] &gt; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it12579" onMouseOver="hilite(12579)" onMouseOut="lolite()" onClick="logVariable('scalearray')" href="../../_variables/scalearray.html">$scalearray</a>)) {
<a name="l740"><span class="linenum"> 740</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidnum');
<a name="l741"><span class="linenum"> 741</span></a>              }
<a name="l742"><span class="linenum"> 742</span></a>          } else {
<a name="l743"><span class="linenum"> 743</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidscaleid');
<a name="l744"><span class="linenum"> 744</span></a>          }
<a name="l745"><span class="linenum"> 745</span></a>      } else if (<a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['rating'] &gt; <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('scale')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>) {
<a name="l746"><span class="linenum"> 746</span></a>  <span class="comment">        //if its numeric and submitted rating is above maximum</span>
<a name="l747"><span class="linenum"> 747</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidnum');
<a name="l748"><span class="linenum"> 748</span></a>      }
<a name="l749"><span class="linenum"> 749</span></a>  
<a name="l750"><span class="linenum"> 750</span></a>  <span class="comment">    //check the item we're rating was created in the assessable time window</span>
<a name="l751"><span class="linenum"> 751</span></a>      if (!empty(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('assesstimestart')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/assesstimestart.html">assesstimestart</a>) &amp;&amp; !empty(<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('assesstimefinish')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/assesstimefinish.html">assesstimefinish</a>)) {
<a name="l752"><span class="linenum"> 752</span></a>          if (<a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> &lt; <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('assesstimestart')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/assesstimestart.html">assesstimestart</a> || <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('timecreated')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> &gt; <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('assesstimefinish')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/assesstimefinish.html">assesstimefinish</a>) {
<a name="l753"><span class="linenum"> 753</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('notavailable');
<a name="l754"><span class="linenum"> 754</span></a>          }
<a name="l755"><span class="linenum"> 755</span></a>      }
<a name="l756"><span class="linenum"> 756</span></a>  
<a name="l757"><span class="linenum"> 757</span></a>      <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>, <a class="var it506" onMouseOver="hilite(506)" onMouseOut="lolite()" onClick="logVariable('info')" href="../../_variables/info.html">$info</a>-&gt;<a onClick="logVariable('course')" class="var it42982" onMouseOver="hilite(42982)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, false, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l758"><span class="linenum"> 758</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('MUST_EXIST')" href="../../_constants/MUST_EXIST.html" onMouseOver="constPopup(event,'MUST_EXIST')">MUST_EXIST</a>);
<a name="l759"><span class="linenum"> 759</span></a>  
<a name="l760"><span class="linenum"> 760</span></a>  <span class="comment">    // if the supplied context doesnt match the item's context</span>
<a name="l761"><span class="linenum"> 761</span></a>      if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> != <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['context']-&gt;id) {
<a name="l762"><span class="linenum"> 762</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('rating_exception')" href="../../_classes/rating_exception.html" onMouseOver="classPopup(event,'rating_exception')">rating_exception</a>('invalidcontext');
<a name="l763"><span class="linenum"> 763</span></a>      }
<a name="l764"><span class="linenum"> 764</span></a>  
<a name="l765"><span class="linenum"> 765</span></a>      return true;
<a name="l766"><span class="linenum"> 766</span></a>  }
<a name="l767"><span class="linenum"> 767</span></a>  
<a name="l768"><span class="linenum"> 768</span></a>  <span class="comment">/**</span>
<a name="l769"><span class="linenum"> 769</span></a>  <span class="comment"> * Update activity grades</span>
<a name="l770"><span class="linenum"> 770</span></a>  <span class="comment"> *</span>
<a name="l771"><span class="linenum"> 771</span></a>  <span class="comment"> * @category grade</span>
<a name="l772"><span class="linenum"> 772</span></a>  <span class="comment"> * @param stdClass $glossary Null means all glossaries (with extra cmidnumber property)</span>
<a name="l773"><span class="linenum"> 773</span></a>  <span class="comment"> * @param int $userid specific user only, 0 means all</span>
<a name="l774"><span class="linenum"> 774</span></a>  <span class="comment"> * @param bool $nullifnone If true and the user has no grade then a grade item with rawgrade == null will be inserted</span>
<a name="l775"><span class="linenum"> 775</span></a>  <span class="comment"> */</span>
<a name="l776"><span class="linenum"> 776</span></a>  function <a class="function" onClick="logFunction('glossary_update_grades')" href="../../_functions/glossary_update_grades.html" onMouseOver="funcPopup(event,'glossary_update_grades')">glossary_update_grades</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>=null, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>=0, <a class="var it9796" onMouseOver="hilite(9796)" onMouseOut="lolite()" onClick="logVariable('nullifnone')" href="../../_variables/nullifnone.html">$nullifnone</a>=true) {
<a name="l777"><span class="linenum"> 777</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l778"><span class="linenum"> 778</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l779"><span class="linenum"> 779</span></a>  
<a name="l780"><span class="linenum"> 780</span></a>      if (!<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('assessed')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a>) {
<a name="l781"><span class="linenum"> 781</span></a>          <a class="function" onClick="logFunction('glossary_grade_item_update')" href="../../_functions/glossary_grade_item_update.html" onMouseOver="funcPopup(event,'glossary_grade_item_update')">glossary_grade_item_update</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l782"><span class="linenum"> 782</span></a>  
<a name="l783"><span class="linenum"> 783</span></a>      } else if (<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = <a class="function" onClick="logFunction('glossary_get_user_grades')" href="../../_functions/glossary_get_user_grades.html" onMouseOver="funcPopup(event,'glossary_get_user_grades')">glossary_get_user_grades</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>)) {
<a name="l784"><span class="linenum"> 784</span></a>          <a class="function" onClick="logFunction('glossary_grade_item_update')" href="../../_functions/glossary_grade_item_update.html" onMouseOver="funcPopup(event,'glossary_grade_item_update')">glossary_grade_item_update</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>);
<a name="l785"><span class="linenum"> 785</span></a>  
<a name="l786"><span class="linenum"> 786</span></a>      } else if (<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a> and <a class="var it9796" onMouseOver="hilite(9796)" onMouseOut="lolite()" onClick="logVariable('nullifnone')" href="../../_variables/nullifnone.html">$nullifnone</a>) {
<a name="l787"><span class="linenum"> 787</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a> = new stdClass();
<a name="l788"><span class="linenum"> 788</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('userid')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>   = <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>;
<a name="l789"><span class="linenum"> 789</span></a>          <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>-&gt;<a onClick="logVariable('rawgrade')" class="var it42963" onMouseOver="hilite(42963)" onMouseOut="lolite()" href="../../_variables/rawgrade.html">rawgrade</a> = NULL;
<a name="l790"><span class="linenum"> 790</span></a>          <a class="function" onClick="logFunction('glossary_grade_item_update')" href="../../_functions/glossary_grade_item_update.html" onMouseOver="funcPopup(event,'glossary_grade_item_update')">glossary_grade_item_update</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it288" onMouseOver="hilite(288)" onMouseOut="lolite()" onClick="logVariable('grade')" href="../../_variables/grade.html">$grade</a>);
<a name="l791"><span class="linenum"> 791</span></a>  
<a name="l792"><span class="linenum"> 792</span></a>      } else {
<a name="l793"><span class="linenum"> 793</span></a>          <a class="function" onClick="logFunction('glossary_grade_item_update')" href="../../_functions/glossary_grade_item_update.html" onMouseOver="funcPopup(event,'glossary_grade_item_update')">glossary_grade_item_update</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l794"><span class="linenum"> 794</span></a>      }
<a name="l795"><span class="linenum"> 795</span></a>  }
<a name="l796"><span class="linenum"> 796</span></a>  
<a name="l797"><span class="linenum"> 797</span></a>  <span class="comment">/**</span>
<a name="l798"><span class="linenum"> 798</span></a>  <span class="comment"> * Create/update grade item for given glossary</span>
<a name="l799"><span class="linenum"> 799</span></a>  <span class="comment"> *</span>
<a name="l800"><span class="linenum"> 800</span></a>  <span class="comment"> * @category grade</span>
<a name="l801"><span class="linenum"> 801</span></a>  <span class="comment"> * @param stdClass $glossary object with extra cmidnumber</span>
<a name="l802"><span class="linenum"> 802</span></a>  <span class="comment"> * @param mixed $grades Optional array/object of grade(s); 'reset' means reset grades in gradebook</span>
<a name="l803"><span class="linenum"> 803</span></a>  <span class="comment"> * @return int, 0 if ok, error code otherwise</span>
<a name="l804"><span class="linenum"> 804</span></a>  <span class="comment"> */</span>
<a name="l805"><span class="linenum"> 805</span></a>  function <a class="function" onClick="logFunction('glossary_grade_item_update')" href="../../_functions/glossary_grade_item_update.html" onMouseOver="funcPopup(event,'glossary_grade_item_update')">glossary_grade_item_update</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>=NULL) {
<a name="l806"><span class="linenum"> 806</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l807"><span class="linenum"> 807</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l808"><span class="linenum"> 808</span></a>  
<a name="l809"><span class="linenum"> 809</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('itemname'=&gt;<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('name')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, 'idnumber'=&gt;<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('cmidnumber')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/cmidnumber.html">cmidnumber</a>);
<a name="l810"><span class="linenum"> 810</span></a>  
<a name="l811"><span class="linenum"> 811</span></a>      if (!<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('assessed')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/assessed.html">assessed</a> or <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('scale')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a> == 0) {
<a name="l812"><span class="linenum"> 812</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['gradetype'] = <a class="constant" onClick="logConstant('GRADE_TYPE_NONE')" href="../../_constants/GRADE_TYPE_NONE.html" onMouseOver="constPopup(event,'GRADE_TYPE_NONE')">GRADE_TYPE_NONE</a>;
<a name="l813"><span class="linenum"> 813</span></a>  
<a name="l814"><span class="linenum"> 814</span></a>      } else if (<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('scale')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a> &gt; 0) {
<a name="l815"><span class="linenum"> 815</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['gradetype'] = <a class="constant" onClick="logConstant('GRADE_TYPE_VALUE')" href="../../_constants/GRADE_TYPE_VALUE.html" onMouseOver="constPopup(event,'GRADE_TYPE_VALUE')">GRADE_TYPE_VALUE</a>;
<a name="l816"><span class="linenum"> 816</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['grademax']  = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('scale')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>;
<a name="l817"><span class="linenum"> 817</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['grademin']  = 0;
<a name="l818"><span class="linenum"> 818</span></a>  
<a name="l819"><span class="linenum"> 819</span></a>      } else if (<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('scale')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a> &lt; 0) {
<a name="l820"><span class="linenum"> 820</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['gradetype'] = <a class="constant" onClick="logConstant('GRADE_TYPE_SCALE')" href="../../_constants/GRADE_TYPE_SCALE.html" onMouseOver="constPopup(event,'GRADE_TYPE_SCALE')">GRADE_TYPE_SCALE</a>;
<a name="l821"><span class="linenum"> 821</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['scaleid']   = -<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('scale')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/scale.html">scale</a>;
<a name="l822"><span class="linenum"> 822</span></a>      }
<a name="l823"><span class="linenum"> 823</span></a>  
<a name="l824"><span class="linenum"> 824</span></a>      if (<a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>  === 'reset') {
<a name="l825"><span class="linenum"> 825</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['reset'] = true;
<a name="l826"><span class="linenum"> 826</span></a>          <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a> = NULL;
<a name="l827"><span class="linenum"> 827</span></a>      }
<a name="l828"><span class="linenum"> 828</span></a>  
<a name="l829"><span class="linenum"> 829</span></a>      return <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/glossary', <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('course')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, 'mod', 'glossary', <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, <a class="var it624" onMouseOver="hilite(624)" onMouseOut="lolite()" onClick="logVariable('grades')" href="../../_variables/grades.html">$grades</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l830"><span class="linenum"> 830</span></a>  }
<a name="l831"><span class="linenum"> 831</span></a>  
<a name="l832"><span class="linenum"> 832</span></a>  <span class="comment">/**</span>
<a name="l833"><span class="linenum"> 833</span></a>  <span class="comment"> * Delete grade item for given glossary</span>
<a name="l834"><span class="linenum"> 834</span></a>  <span class="comment"> *</span>
<a name="l835"><span class="linenum"> 835</span></a>  <span class="comment"> * @category grade</span>
<a name="l836"><span class="linenum"> 836</span></a>  <span class="comment"> * @param object $glossary object</span>
<a name="l837"><span class="linenum"> 837</span></a>  <span class="comment"> */</span>
<a name="l838"><span class="linenum"> 838</span></a>  function <a class="function" onClick="logFunction('glossary_grade_item_delete')" href="../../_functions/glossary_grade_item_delete.html" onMouseOver="funcPopup(event,'glossary_grade_item_delete')">glossary_grade_item_delete</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>) {
<a name="l839"><span class="linenum"> 839</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l840"><span class="linenum"> 840</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>.'/gradelib.php');
<a name="l841"><span class="linenum"> 841</span></a>  
<a name="l842"><span class="linenum"> 842</span></a>      return <a class="function" onClick="logFunction('grade_update')" href="../../_functions/grade_update.html" onMouseOver="funcPopup(event,'grade_update')">grade_update</a>('mod/glossary', <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('course')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>, 'mod', 'glossary', <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 0, NULL, array('deleted'=&gt;1));
<a name="l843"><span class="linenum"> 843</span></a>  }
<a name="l844"><span class="linenum"> 844</span></a>  
<a name="l845"><span class="linenum"> 845</span></a>  <span class="comment">/**</span>
<a name="l846"><span class="linenum"> 846</span></a>  <span class="comment"> * @global object</span>
<a name="l847"><span class="linenum"> 847</span></a>  <span class="comment"> * @param int $gloassryid</span>
<a name="l848"><span class="linenum"> 848</span></a>  <span class="comment"> * @param int $scaleid</span>
<a name="l849"><span class="linenum"> 849</span></a>  <span class="comment"> * @return bool</span>
<a name="l850"><span class="linenum"> 850</span></a>  <span class="comment"> */</span>
<a name="l851"><span class="linenum"> 851</span></a>  function <a class="function" onClick="logFunction('glossary_scale_used')" href="../../_functions/glossary_scale_used.html" onMouseOver="funcPopup(event,'glossary_scale_used')">glossary_scale_used</a> (<a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>,<a class="var it973" onMouseOver="hilite(973)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>) {
<a name="l852"><span class="linenum"> 852</span></a>  <span class="comment">//This function returns if a scale is being used by one glossary</span>
<a name="l853"><span class="linenum"> 853</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l854"><span class="linenum"> 854</span></a>  
<a name="l855"><span class="linenum"> 855</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = false;
<a name="l856"><span class="linenum"> 856</span></a>  
<a name="l857"><span class="linenum"> 857</span></a>      <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;glossary&quot;, array(&quot;id&quot;=&gt;<a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>, &quot;scale&quot;=&gt;-<a class="var it973" onMouseOver="hilite(973)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>));
<a name="l858"><span class="linenum"> 858</span></a>  
<a name="l859"><span class="linenum"> 859</span></a>      if (!empty(<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>)  &amp;&amp; !empty(<a class="var it973" onMouseOver="hilite(973)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>)) {
<a name="l860"><span class="linenum"> 860</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = true;
<a name="l861"><span class="linenum"> 861</span></a>      }
<a name="l862"><span class="linenum"> 862</span></a>  
<a name="l863"><span class="linenum"> 863</span></a>      return <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l864"><span class="linenum"> 864</span></a>  }
<a name="l865"><span class="linenum"> 865</span></a>  
<a name="l866"><span class="linenum"> 866</span></a>  <span class="comment">/**</span>
<a name="l867"><span class="linenum"> 867</span></a>  <span class="comment"> * Checks if scale is being used by any instance of glossary</span>
<a name="l868"><span class="linenum"> 868</span></a>  <span class="comment"> *</span>
<a name="l869"><span class="linenum"> 869</span></a>  <span class="comment"> * This is used to find out if scale used anywhere</span>
<a name="l870"><span class="linenum"> 870</span></a>  <span class="comment"> *</span>
<a name="l871"><span class="linenum"> 871</span></a>  <span class="comment"> * @global object</span>
<a name="l872"><span class="linenum"> 872</span></a>  <span class="comment"> * @param int $scaleid</span>
<a name="l873"><span class="linenum"> 873</span></a>  <span class="comment"> * @return boolean True if the scale is used by any glossary</span>
<a name="l874"><span class="linenum"> 874</span></a>  <span class="comment"> */</span>
<a name="l875"><span class="linenum"> 875</span></a>  function <a class="function" onClick="logFunction('glossary_scale_used_anywhere')" href="../../_functions/glossary_scale_used_anywhere.html" onMouseOver="funcPopup(event,'glossary_scale_used_anywhere')">glossary_scale_used_anywhere</a>(<a class="var it973" onMouseOver="hilite(973)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>) {
<a name="l876"><span class="linenum"> 876</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l877"><span class="linenum"> 877</span></a>  
<a name="l878"><span class="linenum"> 878</span></a>      if (<a class="var it973" onMouseOver="hilite(973)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a> and <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>('glossary', array('scale'=&gt;-<a class="var it973" onMouseOver="hilite(973)" onMouseOut="lolite()" onClick="logVariable('scaleid')" href="../../_variables/scaleid.html">$scaleid</a>))) {
<a name="l879"><span class="linenum"> 879</span></a>          return true;
<a name="l880"><span class="linenum"> 880</span></a>      } else {
<a name="l881"><span class="linenum"> 881</span></a>          return false;
<a name="l882"><span class="linenum"> 882</span></a>      }
<a name="l883"><span class="linenum"> 883</span></a>  }
<a name="l884"><span class="linenum"> 884</span></a>  
<a name="l885"><span class="linenum"> 885</span></a>  <span class="comment">//////////////////////////////////////////////////////////////////////////////////////</span>
<a name="l886"><span class="linenum"> 886</span></a>  <span class="comment">/// Any other glossary functions go here.  Each of them must have a name that</span>
<a name="l887"><span class="linenum"> 887</span></a>  <span class="comment">/// starts with glossary_</span>
<a name="l888"><span class="linenum"> 888</span></a>  
<a name="l889"><span class="linenum"> 889</span></a>  <span class="comment">/**</span>
<a name="l890"><span class="linenum"> 890</span></a>  <span class="comment"> * This function return an array of valid glossary_formats records</span>
<a name="l891"><span class="linenum"> 891</span></a>  <span class="comment"> * Everytime it's called, every existing format is checked, new formats</span>
<a name="l892"><span class="linenum"> 892</span></a>  <span class="comment"> * are included if detected and old formats are deleted and any glossary</span>
<a name="l893"><span class="linenum"> 893</span></a>  <span class="comment"> * using an invalid format is updated to the default (dictionary).</span>
<a name="l894"><span class="linenum"> 894</span></a>  <span class="comment"> *</span>
<a name="l895"><span class="linenum"> 895</span></a>  <span class="comment"> * @global object</span>
<a name="l896"><span class="linenum"> 896</span></a>  <span class="comment"> * @global object</span>
<a name="l897"><span class="linenum"> 897</span></a>  <span class="comment"> * @return array</span>
<a name="l898"><span class="linenum"> 898</span></a>  <span class="comment"> */</span>
<a name="l899"><span class="linenum"> 899</span></a>  function <a class="function" onClick="logFunction('glossary_get_available_formats')" href="../../_functions/glossary_get_available_formats.html" onMouseOver="funcPopup(event,'glossary_get_available_formats')">glossary_get_available_formats</a>() {
<a name="l900"><span class="linenum"> 900</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l901"><span class="linenum"> 901</span></a>  
<a name="l902"><span class="linenum"> 902</span></a>  <span class="comment">    //Get available formats (plugin) and insert (if necessary) them into glossary_formats</span>
<a name="l903"><span class="linenum"> 903</span></a>      <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../../_variables/formats.html">$formats</a> = <a class="function" onClick="logFunction('get_list_of_plugins')" href="../../_functions/get_list_of_plugins.html" onMouseOver="funcPopup(event,'get_list_of_plugins')">get_list_of_plugins</a>('mod/glossary/formats', 'TEMPLATE');
<a name="l904"><span class="linenum"> 904</span></a>      <a class="var it12580" onMouseOver="hilite(12580)" onMouseOut="lolite()" onClick="logVariable('pluginformats')" href="../../_variables/pluginformats.html">$pluginformats</a> = array();
<a name="l905"><span class="linenum"> 905</span></a>      foreach (<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../../_variables/formats.html">$formats</a> as <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>) {
<a name="l906"><span class="linenum"> 906</span></a>  <span class="comment">        //If the format file exists</span>
<a name="l907"><span class="linenum"> 907</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/mod/glossary/formats/'.<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>.'/'.<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>.'_format.php')) {
<a name="l908"><span class="linenum"> 908</span></a>              include_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/mod/glossary/formats/'.<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>.'/'.<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>.'_format.php');
<a name="l909"><span class="linenum"> 909</span></a>  <span class="comment">            //If the function exists</span>
<a name="l910"><span class="linenum"> 910</span></a>              if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>('glossary_show_entry_'.<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>)) {
<a name="l911"><span class="linenum"> 911</span></a>  <span class="comment">                //Acummulate it as a valid format</span>
<a name="l912"><span class="linenum"> 912</span></a>                  <a class="var it12580" onMouseOver="hilite(12580)" onMouseOut="lolite()" onClick="logVariable('pluginformats')" href="../../_variables/pluginformats.html">$pluginformats</a>[] = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>;
<a name="l913"><span class="linenum"> 913</span></a>  <span class="comment">                //If the format doesn't exist in the table</span>
<a name="l914"><span class="linenum"> 914</span></a>                  if (!<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary_formats', array('name'=&gt;<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>))) {
<a name="l915"><span class="linenum"> 915</span></a>  <span class="comment">                    //Insert the record in glossary_formats</span>
<a name="l916"><span class="linenum"> 916</span></a>                      <a class="var it12581" onMouseOver="hilite(12581)" onMouseOut="lolite()" onClick="logVariable('gf')" href="../../_variables/gf.html">$gf</a> = new stdClass();
<a name="l917"><span class="linenum"> 917</span></a>                      <a class="var it12581" onMouseOver="hilite(12581)" onMouseOut="lolite()" onClick="logVariable('gf')" href="../../_variables/gf.html">$gf</a>-&gt;<a onClick="logVariable('name')" class="var it44550" onMouseOver="hilite(44550)" onMouseOut="lolite()" href="../../_variables/name.html">name</a> = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>;
<a name="l918"><span class="linenum"> 918</span></a>                      <a class="var it12581" onMouseOver="hilite(12581)" onMouseOut="lolite()" onClick="logVariable('gf')" href="../../_variables/gf.html">$gf</a>-&gt;<a onClick="logVariable('popupformatname')" class="var it44550" onMouseOver="hilite(44550)" onMouseOut="lolite()" href="../../_variables/popupformatname.html">popupformatname</a> = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>;
<a name="l919"><span class="linenum"> 919</span></a>                      <a class="var it12581" onMouseOver="hilite(12581)" onMouseOut="lolite()" onClick="logVariable('gf')" href="../../_variables/gf.html">$gf</a>-&gt;<a onClick="logVariable('visible')" class="var it44550" onMouseOver="hilite(44550)" onMouseOut="lolite()" href="../../_variables/visible.html">visible</a> = 1;
<a name="l920"><span class="linenum"> 920</span></a>                      <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('insert_record')" href="../../_functions/insert_record.html" onMouseOver="funcPopup(event,'insert_record')">insert_record</a>('glossary_formats', <a class="var it12581" onMouseOver="hilite(12581)" onMouseOut="lolite()" onClick="logVariable('gf')" href="../../_variables/gf.html">$gf</a>);
<a name="l921"><span class="linenum"> 921</span></a>                      <a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary_formats', array('id' =&gt; <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>));
<a name="l922"><span class="linenum"> 922</span></a>                  }
<a name="l923"><span class="linenum"> 923</span></a>  
<a name="l924"><span class="linenum"> 924</span></a>                  if (empty(<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>-&gt;<a onClick="logVariable('showtabs')" class="var it43253" onMouseOver="hilite(43253)" onMouseOut="lolite()" href="../../_variables/showtabs.html">showtabs</a>)) {
<a name="l925"><span class="linenum"> 925</span></a>                      <a class="function" onClick="logFunction('glossary_set_default_visible_tabs')" href="../../_functions/glossary_set_default_visible_tabs.html" onMouseOver="funcPopup(event,'glossary_set_default_visible_tabs')">glossary_set_default_visible_tabs</a>(<a class="var it1069" onMouseOver="hilite(1069)" onMouseOut="lolite()" onClick="logVariable('rec')" href="../../_variables/rec.html">$rec</a>);
<a name="l926"><span class="linenum"> 926</span></a>                  }
<a name="l927"><span class="linenum"> 927</span></a>              }
<a name="l928"><span class="linenum"> 928</span></a>          }
<a name="l929"><span class="linenum"> 929</span></a>      }
<a name="l930"><span class="linenum"> 930</span></a>  
<a name="l931"><span class="linenum"> 931</span></a>  <span class="comment">    //Delete non_existent formats from glossary_formats table</span>
<a name="l932"><span class="linenum"> 932</span></a>      <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../../_variables/formats.html">$formats</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;glossary_formats&quot;);
<a name="l933"><span class="linenum"> 933</span></a>      foreach (<a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../../_variables/formats.html">$formats</a> as <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>) {
<a name="l934"><span class="linenum"> 934</span></a>          <a class="var it9224" onMouseOver="hilite(9224)" onMouseOut="lolite()" onClick="logVariable('todelete')" href="../../_variables/todelete.html">$todelete</a> = false;
<a name="l935"><span class="linenum"> 935</span></a>  <span class="comment">        //If the format in DB isn't a valid previously detected format then delete the record</span>
<a name="l936"><span class="linenum"> 936</span></a>          if (!<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>-&gt;<a onClick="logVariable('name')" class="var it44201" onMouseOver="hilite(44201)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>,<a class="var it12580" onMouseOver="hilite(12580)" onMouseOut="lolite()" onClick="logVariable('pluginformats')" href="../../_variables/pluginformats.html">$pluginformats</a>)) {
<a name="l937"><span class="linenum"> 937</span></a>              <a class="var it9224" onMouseOver="hilite(9224)" onMouseOut="lolite()" onClick="logVariable('todelete')" href="../../_variables/todelete.html">$todelete</a> = true;
<a name="l938"><span class="linenum"> 938</span></a>          }
<a name="l939"><span class="linenum"> 939</span></a>  
<a name="l940"><span class="linenum"> 940</span></a>          if (<a class="var it9224" onMouseOver="hilite(9224)" onMouseOut="lolite()" onClick="logVariable('todelete')" href="../../_variables/todelete.html">$todelete</a>) {
<a name="l941"><span class="linenum"> 941</span></a>  <span class="comment">            //Delete the format</span>
<a name="l942"><span class="linenum"> 942</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('glossary_formats', array('name'=&gt;<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>-&gt;<a onClick="logVariable('name')" class="var it44201" onMouseOver="hilite(44201)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>));
<a name="l943"><span class="linenum"> 943</span></a>  <span class="comment">            //Reasign existing glossaries to default (dictionary) format</span>
<a name="l944"><span class="linenum"> 944</span></a>              if (<a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('glossaries')" href="../../_variables/glossaries.html">$glossaries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('glossary', array('displayformat'=&gt;<a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>-&gt;<a onClick="logVariable('name')" class="var it44201" onMouseOver="hilite(44201)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>))) {
<a name="l945"><span class="linenum"> 945</span></a>                  foreach(<a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('glossaries')" href="../../_variables/glossaries.html">$glossaries</a> as <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>) {
<a name="l946"><span class="linenum"> 946</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('glossary','displayformat','dictionary', array('id'=&gt;<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l947"><span class="linenum"> 947</span></a>                  }
<a name="l948"><span class="linenum"> 948</span></a>              }
<a name="l949"><span class="linenum"> 949</span></a>          }
<a name="l950"><span class="linenum"> 950</span></a>      }
<a name="l951"><span class="linenum"> 951</span></a>  
<a name="l952"><span class="linenum"> 952</span></a>  <span class="comment">    //Now everything is ready in glossary_formats table</span>
<a name="l953"><span class="linenum"> 953</span></a>      <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../../_variables/formats.html">$formats</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;glossary_formats&quot;);
<a name="l954"><span class="linenum"> 954</span></a>  
<a name="l955"><span class="linenum"> 955</span></a>      return <a class="var it3022" onMouseOver="hilite(3022)" onMouseOut="lolite()" onClick="logVariable('formats')" href="../../_variables/formats.html">$formats</a>;
<a name="l956"><span class="linenum"> 956</span></a>  }
<a name="l957"><span class="linenum"> 957</span></a>  
<a name="l958"><span class="linenum"> 958</span></a>  <span class="comment">/**</span>
<a name="l959"><span class="linenum"> 959</span></a>  <span class="comment"> * @param bool $debug</span>
<a name="l960"><span class="linenum"> 960</span></a>  <span class="comment"> * @param string $text</span>
<a name="l961"><span class="linenum"> 961</span></a>  <span class="comment"> * @param int $br</span>
<a name="l962"><span class="linenum"> 962</span></a>  <span class="comment"> */</span>
<a name="l963"><span class="linenum"> 963</span></a>  function <a class="function" onClick="logFunction('glossary_debug')" href="../../_functions/glossary_debug.html" onMouseOver="funcPopup(event,'glossary_debug')">glossary_debug</a>(<a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../_variables/debug.html">$debug</a>,<a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>,<a class="var it2374" onMouseOver="hilite(2374)" onMouseOut="lolite()" onClick="logVariable('br')" href="../../_variables/br.html">$br</a>=1) {
<a name="l964"><span class="linenum"> 964</span></a>      if ( <a class="var it75" onMouseOver="hilite(75)" onMouseOut="lolite()" onClick="logVariable('debug')" href="../../_variables/debug.html">$debug</a> ) {
<a name="l965"><span class="linenum"> 965</span></a>          echo '&lt;font color=&quot;red&quot;&gt;' . <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> . '&lt;/font&gt;';
<a name="l966"><span class="linenum"> 966</span></a>          if ( <a class="var it2374" onMouseOver="hilite(2374)" onMouseOut="lolite()" onClick="logVariable('br')" href="../../_variables/br.html">$br</a> ) {
<a name="l967"><span class="linenum"> 967</span></a>              echo '&lt;br /&gt;';
<a name="l968"><span class="linenum"> 968</span></a>          }
<a name="l969"><span class="linenum"> 969</span></a>      }
<a name="l970"><span class="linenum"> 970</span></a>  }
<a name="l971"><span class="linenum"> 971</span></a>  
<a name="l972"><span class="linenum"> 972</span></a>  <span class="comment">/**</span>
<a name="l973"><span class="linenum"> 973</span></a>  <span class="comment"> *</span>
<a name="l974"><span class="linenum"> 974</span></a>  <span class="comment"> * @global object</span>
<a name="l975"><span class="linenum"> 975</span></a>  <span class="comment"> * @param int $glossaryid</span>
<a name="l976"><span class="linenum"> 976</span></a>  <span class="comment"> * @param string $entrylist</span>
<a name="l977"><span class="linenum"> 977</span></a>  <span class="comment"> * @param string $pivot</span>
<a name="l978"><span class="linenum"> 978</span></a>  <span class="comment"> * @return array</span>
<a name="l979"><span class="linenum"> 979</span></a>  <span class="comment"> */</span>
<a name="l980"><span class="linenum"> 980</span></a>  function <a class="function" onClick="logFunction('glossary_get_entries')" href="../../_functions/glossary_get_entries.html" onMouseOver="funcPopup(event,'glossary_get_entries')">glossary_get_entries</a>(<a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>, <a class="var it12582" onMouseOver="hilite(12582)" onMouseOut="lolite()" onClick="logVariable('entrylist')" href="../../_variables/entrylist.html">$entrylist</a>, <a class="var it12583" onMouseOver="hilite(12583)" onMouseOut="lolite()" onClick="logVariable('pivot')" href="../../_variables/pivot.html">$pivot</a> = &quot;&quot;) {
<a name="l981"><span class="linenum"> 981</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l982"><span class="linenum"> 982</span></a>      if (<a class="var it12583" onMouseOver="hilite(12583)" onMouseOut="lolite()" onClick="logVariable('pivot')" href="../../_variables/pivot.html">$pivot</a>) {
<a name="l983"><span class="linenum"> 983</span></a>         <a class="var it12583" onMouseOver="hilite(12583)" onMouseOut="lolite()" onClick="logVariable('pivot')" href="../../_variables/pivot.html">$pivot</a> .= &quot;,&quot;;
<a name="l984"><span class="linenum"> 984</span></a>      }
<a name="l985"><span class="linenum"> 985</span></a>  
<a name="l986"><span class="linenum"> 986</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;SELECT <a class="var it12583" onMouseOver="hilite(12583)" onMouseOut="lolite()" onClick="logVariable('pivot')" href="../../_variables/pivot.html">$pivot</a> id,userid,concept,definition,format
<a name="l987"><span class="linenum"> 987</span></a>                                     FROM {glossary_entries}
<a name="l988"><span class="linenum"> 988</span></a>                                    WHERE glossaryid = ?
<a name="l989"><span class="linenum"> 989</span></a>                                          AND id IN (<a class="var it12582" onMouseOver="hilite(12582)" onMouseOut="lolite()" onClick="logVariable('entrylist')" href="../../_variables/entrylist.html">$entrylist</a>)&quot;, array(<a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>));
<a name="l990"><span class="linenum"> 990</span></a>  }
<a name="l991"><span class="linenum"> 991</span></a>  
<a name="l992"><span class="linenum"> 992</span></a>  <span class="comment">/**</span>
<a name="l993"><span class="linenum"> 993</span></a>  <span class="comment"> * @global object</span>
<a name="l994"><span class="linenum"> 994</span></a>  <span class="comment"> * @global object</span>
<a name="l995"><span class="linenum"> 995</span></a>  <span class="comment"> * @param object $concept</span>
<a name="l996"><span class="linenum"> 996</span></a>  <span class="comment"> * @param string $courseid</span>
<a name="l997"><span class="linenum"> 997</span></a>  <span class="comment"> * @return array</span>
<a name="l998"><span class="linenum"> 998</span></a>  <span class="comment"> */</span>
<a name="l999"><span class="linenum"> 999</span></a>  function <a class="function" onClick="logFunction('glossary_get_entries_search')" href="../../_functions/glossary_get_entries_search.html" onMouseOver="funcPopup(event,'glossary_get_entries_search')">glossary_get_entries_search</a>(<a class="var it4374" onMouseOver="hilite(4374)" onMouseOut="lolite()" onClick="logVariable('concept')" href="../../_variables/concept.html">$concept</a>, <a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>) {
<a name="l1000"><span class="linenum">1000</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1001"><span class="linenum">1001</span></a>  
<a name="l1002"><span class="linenum">1002</span></a>  <span class="comment">    //Check if the user is an admin</span>
<a name="l1003"><span class="linenum">1003</span></a>      <a class="var it12584" onMouseOver="hilite(12584)" onMouseOut="lolite()" onClick="logVariable('bypassadmin')" href="../../_variables/bypassadmin.html">$bypassadmin</a> = 1; <span class="comment">//This means NO (by default)</span>
<a name="l1004"><span class="linenum">1004</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:viewhiddenactivities', <a class="class" onClick="logClass('context_system')" href="../../_classes/context_system.html" onMouseOver="classPopup(event,'context_system')">context_system</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>())) {
<a name="l1005"><span class="linenum">1005</span></a>          <a class="var it12584" onMouseOver="hilite(12584)" onMouseOut="lolite()" onClick="logVariable('bypassadmin')" href="../../_variables/bypassadmin.html">$bypassadmin</a> = 0; <span class="comment">//This means YES</span>
<a name="l1006"><span class="linenum">1006</span></a>      }
<a name="l1007"><span class="linenum">1007</span></a>  
<a name="l1008"><span class="linenum">1008</span></a>  <span class="comment">    //Check if the user is a teacher</span>
<a name="l1009"><span class="linenum">1009</span></a>      <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('bypassteacher')" href="../../_variables/bypassteacher.html">$bypassteacher</a> = 1; <span class="comment">//This means NO (by default)</span>
<a name="l1010"><span class="linenum">1010</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:manageentries', <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>))) {
<a name="l1011"><span class="linenum">1011</span></a>          <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('bypassteacher')" href="../../_variables/bypassteacher.html">$bypassteacher</a> = 0; <span class="comment">//This means YES</span>
<a name="l1012"><span class="linenum">1012</span></a>      }
<a name="l1013"><span class="linenum">1013</span></a>  
<a name="l1014"><span class="linenum">1014</span></a>      <a class="var it12586" onMouseOver="hilite(12586)" onMouseOut="lolite()" onClick="logVariable('conceptlower')" href="../../_variables/conceptlower.html">$conceptlower</a> = <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it4374" onMouseOver="hilite(4374)" onMouseOut="lolite()" onClick="logVariable('concept')" href="../../_variables/concept.html">$concept</a>));
<a name="l1015"><span class="linenum">1015</span></a>  
<a name="l1016"><span class="linenum">1016</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('courseid1'=&gt;<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, 'courseid2'=&gt;<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, 'conceptlower'=&gt;<a class="var it12586" onMouseOver="hilite(12586)" onMouseOut="lolite()" onClick="logVariable('conceptlower')" href="../../_variables/conceptlower.html">$conceptlower</a>, 'concept'=&gt;<a class="var it4374" onMouseOver="hilite(4374)" onMouseOut="lolite()" onClick="logVariable('concept')" href="../../_variables/concept.html">$concept</a>);
<a name="l1017"><span class="linenum">1017</span></a>  
<a name="l1018"><span class="linenum">1018</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(&quot;SELECT e.*, g.name as glossaryname, cm.id as cmid, cm.course as courseid
<a name="l1019"><span class="linenum">1019</span></a>                                     FROM {glossary_entries} e, {glossary} g,
<a name="l1020"><span class="linenum">1020</span></a>                                          {course_modules} cm, {modules} m
<a name="l1021"><span class="linenum">1021</span></a>                                    WHERE m.name = 'glossary' AND
<a name="l1022"><span class="linenum">1022</span></a>                                          cm.module = m.id AND
<a name="l1023"><span class="linenum">1023</span></a>                                          (cm.visible = 1 OR  cm.visible = <a class="var it12584" onMouseOver="hilite(12584)" onMouseOut="lolite()" onClick="logVariable('bypassadmin')" href="../../_variables/bypassadmin.html">$bypassadmin</a> OR
<a name="l1024"><span class="linenum">1024</span></a>                                              (cm.course = :courseid1 AND cm.visible = <a class="var it12585" onMouseOver="hilite(12585)" onMouseOut="lolite()" onClick="logVariable('bypassteacher')" href="../../_variables/bypassteacher.html">$bypassteacher</a>)) AND
<a name="l1025"><span class="linenum">1025</span></a>                                          g.id = cm.instance AND
<a name="l1026"><span class="linenum">1026</span></a>                                          e.glossaryid = g.id  AND
<a name="l1027"><span class="linenum">1027</span></a>                                          ( (e.casesensitive != 0 AND <a class="function" onClick="logFunction('LOWER')" href="../../_functions/lower.html" onMouseOver="funcPopup(event,'lower')">LOWER</a>(concept) = :conceptlower) OR
<a name="l1028"><span class="linenum">1028</span></a>                                            (e.casesensitive = 0 and concept = :concept)) AND
<a name="l1029"><span class="linenum">1029</span></a>                                          (g.course = :courseid2 OR g.globalglossary = 1) AND
<a name="l1030"><span class="linenum">1030</span></a>                                           e.usedynalink != 0 AND
<a name="l1031"><span class="linenum">1031</span></a>                                           g.usedynalink != 0&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1032"><span class="linenum">1032</span></a>  }
<a name="l1033"><span class="linenum">1033</span></a>  
<a name="l1034"><span class="linenum">1034</span></a>  <span class="comment">/**</span>
<a name="l1035"><span class="linenum">1035</span></a>  <span class="comment"> * @global object</span>
<a name="l1036"><span class="linenum">1036</span></a>  <span class="comment"> * @global object</span>
<a name="l1037"><span class="linenum">1037</span></a>  <span class="comment"> * @param object $course</span>
<a name="l1038"><span class="linenum">1038</span></a>  <span class="comment"> * @param object $course</span>
<a name="l1039"><span class="linenum">1039</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1040"><span class="linenum">1040</span></a>  <span class="comment"> * @param object $entry</span>
<a name="l1041"><span class="linenum">1041</span></a>  <span class="comment"> * @param string $mode</span>
<a name="l1042"><span class="linenum">1042</span></a>  <span class="comment"> * @param string $hook</span>
<a name="l1043"><span class="linenum">1043</span></a>  <span class="comment"> * @param int $printicons</span>
<a name="l1044"><span class="linenum">1044</span></a>  <span class="comment"> * @param int $displayformat</span>
<a name="l1045"><span class="linenum">1045</span></a>  <span class="comment"> * @param bool $printview</span>
<a name="l1046"><span class="linenum">1046</span></a>  <span class="comment"> * @return mixed</span>
<a name="l1047"><span class="linenum">1047</span></a>  <span class="comment"> */</span>
<a name="l1048"><span class="linenum">1048</span></a>  function <a class="function" onClick="logFunction('glossary_print_entry')" href="../../_functions/glossary_print_entry.html" onMouseOver="funcPopup(event,'glossary_print_entry')">glossary_print_entry</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>='',<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>='',<a class="var it2512" onMouseOver="hilite(2512)" onMouseOut="lolite()" onClick="logVariable('printicons')" href="../../_variables/printicons.html">$printicons</a> = 1, <a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>  = -1, <a class="var it12587" onMouseOver="hilite(12587)" onMouseOut="lolite()" onClick="logVariable('printview')" href="../../_variables/printview.html">$printview</a> = false) {
<a name="l1049"><span class="linenum">1049</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1050"><span class="linenum">1050</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = false;
<a name="l1051"><span class="linenum">1051</span></a>      if ( <a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a> &lt; 0 ) {
<a name="l1052"><span class="linenum">1052</span></a>          <a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a> = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('displayformat')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/displayformat.html">displayformat</a>;
<a name="l1053"><span class="linenum">1053</span></a>      }
<a name="l1054"><span class="linenum">1054</span></a>      if (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('approved')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a> <a class="function" onClick="logFunction('or')" href="../../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (<a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('userid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>) <a class="function" onClick="logFunction('or')" href="../../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a> == 'approval' and !<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('approved')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a>) ) {
<a name="l1055"><span class="linenum">1055</span></a>          <a class="var it8530" onMouseOver="hilite(8530)" onMouseOut="lolite()" onClick="logVariable('formatfile')" href="../../_variables/formatfile.html">$formatfile</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/mod/glossary/formats/'.<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>.'/'.<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>.'_format.php';
<a name="l1056"><span class="linenum">1056</span></a>          if (<a class="var it12587" onMouseOver="hilite(12587)" onMouseOut="lolite()" onClick="logVariable('printview')" href="../../_variables/printview.html">$printview</a>) {
<a name="l1057"><span class="linenum">1057</span></a>              <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../../_variables/functionname.html">$functionname</a> = 'glossary_print_entry_'.<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>;
<a name="l1058"><span class="linenum">1058</span></a>          } else {
<a name="l1059"><span class="linenum">1059</span></a>              <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../../_variables/functionname.html">$functionname</a> = 'glossary_show_entry_'.<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>;
<a name="l1060"><span class="linenum">1060</span></a>          }
<a name="l1061"><span class="linenum">1061</span></a>  
<a name="l1062"><span class="linenum">1062</span></a>          if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it8530" onMouseOver="hilite(8530)" onMouseOut="lolite()" onClick="logVariable('formatfile')" href="../../_variables/formatfile.html">$formatfile</a>)) {
<a name="l1063"><span class="linenum">1063</span></a>              include_once(<a class="var it8530" onMouseOver="hilite(8530)" onMouseOut="lolite()" onClick="logVariable('formatfile')" href="../../_variables/formatfile.html">$formatfile</a>);
<a name="l1064"><span class="linenum">1064</span></a>              if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../../_variables/functionname.html">$functionname</a>)) {
<a name="l1065"><span class="linenum">1065</span></a>                  <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../../_variables/functionname.html">$functionname</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>,<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>,<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>,<a class="var it2512" onMouseOver="hilite(2512)" onMouseOut="lolite()" onClick="logVariable('printicons')" href="../../_variables/printicons.html">$printicons</a>);
<a name="l1066"><span class="linenum">1066</span></a>              } else if (<a class="var it12587" onMouseOver="hilite(12587)" onMouseOut="lolite()" onClick="logVariable('printview')" href="../../_variables/printview.html">$printview</a>) {
<a name="l1067"><span class="linenum">1067</span></a>  <span class="comment">                //If the glossary_print_entry_XXXX function doesn't exist, print default (old) print format</span>
<a name="l1068"><span class="linenum">1068</span></a>                  <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = <a class="function" onClick="logFunction('glossary_print_entry_default')" href="../../_functions/glossary_print_entry_default.html" onMouseOver="funcPopup(event,'glossary_print_entry_default')">glossary_print_entry_default</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l1069"><span class="linenum">1069</span></a>              }
<a name="l1070"><span class="linenum">1070</span></a>          }
<a name="l1071"><span class="linenum">1071</span></a>      }
<a name="l1072"><span class="linenum">1072</span></a>      return <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l1073"><span class="linenum">1073</span></a>  }
<a name="l1074"><span class="linenum">1074</span></a>  
<a name="l1075"><span class="linenum">1075</span></a>  <span class="comment">/**</span>
<a name="l1076"><span class="linenum">1076</span></a>  <span class="comment"> * Default (old) print format used if custom function doesn't exist in format</span>
<a name="l1077"><span class="linenum">1077</span></a>  <span class="comment"> *</span>
<a name="l1078"><span class="linenum">1078</span></a>  <span class="comment"> * @param object $entry</span>
<a name="l1079"><span class="linenum">1079</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1080"><span class="linenum">1080</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1081"><span class="linenum">1081</span></a>  <span class="comment"> * @return void Output is echo'd</span>
<a name="l1082"><span class="linenum">1082</span></a>  <span class="comment"> */</span>
<a name="l1083"><span class="linenum">1083</span></a>  function <a class="function" onClick="logFunction('glossary_print_entry_default')" href="../../_functions/glossary_print_entry_default.html" onMouseOver="funcPopup(event,'glossary_print_entry_default')">glossary_print_entry_default</a> (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) {
<a name="l1084"><span class="linenum">1084</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1085"><span class="linenum">1085</span></a>  
<a name="l1086"><span class="linenum">1086</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/filelib.php');
<a name="l1087"><span class="linenum">1087</span></a>  
<a name="l1088"><span class="linenum">1088</span></a>      echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="phpfunction" onClick="logFunction('strip_tags')" href="../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('concept')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>), 4);
<a name="l1089"><span class="linenum">1089</span></a>  
<a name="l1090"><span class="linenum">1090</span></a>      <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('definition')" href="../../_variables/definition.html">$definition</a> = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('definition')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/definition.html">definition</a>;
<a name="l1091"><span class="linenum">1091</span></a>  
<a name="l1092"><span class="linenum">1092</span></a>      <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('definition')" href="../../_variables/definition.html">$definition</a> = '&lt;span class=&quot;nolink&quot;&gt;' . <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('definition')" href="../../_variables/definition.html">$definition</a>) . '&lt;/span&gt;';
<a name="l1093"><span class="linenum">1093</span></a>  
<a name="l1094"><span class="linenum">1094</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1095"><span class="linenum">1095</span></a>      <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('definition')" href="../../_variables/definition.html">$definition</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('definition')" href="../../_variables/definition.html">$definition</a>, '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', 'entry', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1096"><span class="linenum">1096</span></a>  
<a name="l1097"><span class="linenum">1097</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = new stdClass();
<a name="l1098"><span class="linenum">1098</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('para')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/para.html">para</a> = false;
<a name="l1099"><span class="linenum">1099</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('trusted')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/trusted.html">trusted</a> = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('definitiontrust')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/definitiontrust.html">definitiontrust</a>;
<a name="l1100"><span class="linenum">1100</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('context')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l1101"><span class="linenum">1101</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('overflowdiv')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/overflowdiv.html">overflowdiv</a> = true;
<a name="l1102"><span class="linenum">1102</span></a>      <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('definition')" href="../../_variables/definition.html">$definition</a> = <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('definition')" href="../../_variables/definition.html">$definition</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('definitionformat')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/definitionformat.html">definitionformat</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l1103"><span class="linenum">1103</span></a>      echo (<a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('definition')" href="../../_variables/definition.html">$definition</a>);
<a name="l1104"><span class="linenum">1104</span></a>      echo '&lt;br /&gt;&lt;br /&gt;';
<a name="l1105"><span class="linenum">1105</span></a>  }
<a name="l1106"><span class="linenum">1106</span></a>  
<a name="l1107"><span class="linenum">1107</span></a>  <span class="comment">/**</span>
<a name="l1108"><span class="linenum">1108</span></a>  <span class="comment"> * Print glossary concept/term as a heading &amp;lt;h4&gt;</span>
<a name="l1109"><span class="linenum">1109</span></a>  <span class="comment"> * @param object $entry</span>
<a name="l1110"><span class="linenum">1110</span></a>  <span class="comment"> */</span>
<a name="l1111"><span class="linenum">1111</span></a>  function  <a class="function" onClick="logFunction('glossary_print_entry_concept')" href="../../_functions/glossary_print_entry_concept.html" onMouseOver="funcPopup(event,'glossary_print_entry_concept')">glossary_print_entry_concept</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>=false) {
<a name="l1112"><span class="linenum">1112</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1113"><span class="linenum">1113</span></a>  
<a name="l1114"><span class="linenum">1114</span></a>      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('heading')" href="../../_functions/heading.html" onMouseOver="funcPopup(event,'heading')">heading</a>(<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('concept')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>), 4);
<a name="l1115"><span class="linenum">1115</span></a>      if (!empty(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('highlight')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/highlight.html">highlight</a>)) {
<a name="l1116"><span class="linenum">1116</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('highlight')" href="../../_functions/highlight.html" onMouseOver="funcPopup(event,'highlight')">highlight</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('highlight')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/highlight.html">highlight</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>);
<a name="l1117"><span class="linenum">1117</span></a>      }
<a name="l1118"><span class="linenum">1118</span></a>  
<a name="l1119"><span class="linenum">1119</span></a>      if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>) {
<a name="l1120"><span class="linenum">1120</span></a>          return <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>;
<a name="l1121"><span class="linenum">1121</span></a>      } else {
<a name="l1122"><span class="linenum">1122</span></a>          echo <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>;
<a name="l1123"><span class="linenum">1123</span></a>      }
<a name="l1124"><span class="linenum">1124</span></a>  }
<a name="l1125"><span class="linenum">1125</span></a>  
<a name="l1126"><span class="linenum">1126</span></a>  <span class="comment">/**</span>
<a name="l1127"><span class="linenum">1127</span></a>  <span class="comment"> *</span>
<a name="l1128"><span class="linenum">1128</span></a>  <span class="comment"> * @global moodle_database DB</span>
<a name="l1129"><span class="linenum">1129</span></a>  <span class="comment"> * @param object $entry</span>
<a name="l1130"><span class="linenum">1130</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1131"><span class="linenum">1131</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1132"><span class="linenum">1132</span></a>  <span class="comment"> */</span>
<a name="l1133"><span class="linenum">1133</span></a>  function <a class="function" onClick="logFunction('glossary_print_entry_definition')" href="../../_functions/glossary_print_entry_definition.html" onMouseOver="funcPopup(event,'glossary_print_entry_definition')">glossary_print_entry_definition</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) {
<a name="l1134"><span class="linenum">1134</span></a>      global <a class="var it12589" onMouseOver="hilite(12589)" onMouseOut="lolite()" onClick="logVariable('GLOSSARY_EXCLUDEENTRY')" href="../../_variables/GLOSSARY_EXCLUDEENTRY.html">$GLOSSARY_EXCLUDEENTRY</a>;
<a name="l1135"><span class="linenum">1135</span></a>  
<a name="l1136"><span class="linenum">1136</span></a>      <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('definition')" href="../../_variables/definition.html">$definition</a> = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('definition')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/definition.html">definition</a>;
<a name="l1137"><span class="linenum">1137</span></a>  
<a name="l1138"><span class="linenum">1138</span></a>  <span class="comment">    // Do not link self.</span>
<a name="l1139"><span class="linenum">1139</span></a>      <a class="var it12589" onMouseOver="hilite(12589)" onMouseOut="lolite()" onClick="logVariable('GLOSSARY_EXCLUDEENTRY')" href="../../_variables/GLOSSARY_EXCLUDEENTRY.html">$GLOSSARY_EXCLUDEENTRY</a> = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1140"><span class="linenum">1140</span></a>  
<a name="l1141"><span class="linenum">1141</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1142"><span class="linenum">1142</span></a>      <a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('definition')" href="../../_variables/definition.html">$definition</a> = <a class="function" onClick="logFunction('file_rewrite_pluginfile_urls')" href="../../_functions/file_rewrite_pluginfile_urls.html" onMouseOver="funcPopup(event,'file_rewrite_pluginfile_urls')">file_rewrite_pluginfile_urls</a>(<a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('definition')" href="../../_variables/definition.html">$definition</a>, '<a class="filename" href="../../pluginfile.php.html">pluginfile.php</a>', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', 'entry', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1143"><span class="linenum">1143</span></a>  
<a name="l1144"><span class="linenum">1144</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = new stdClass();
<a name="l1145"><span class="linenum">1145</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('para')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/para.html">para</a> = false;
<a name="l1146"><span class="linenum">1146</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('trusted')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/trusted.html">trusted</a> = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('definitiontrust')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/definitiontrust.html">definitiontrust</a>;
<a name="l1147"><span class="linenum">1147</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('context')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/context.html">context</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l1148"><span class="linenum">1148</span></a>      <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>-&gt;<a onClick="logVariable('overflowdiv')" class="var it42909" onMouseOver="hilite(42909)" onMouseOut="lolite()" href="../../_variables/overflowdiv.html">overflowdiv</a> = true;
<a name="l1149"><span class="linenum">1149</span></a>  
<a name="l1150"><span class="linenum">1150</span></a>      <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it407" onMouseOver="hilite(407)" onMouseOut="lolite()" onClick="logVariable('definition')" href="../../_variables/definition.html">$definition</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('definitionformat')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/definitionformat.html">definitionformat</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>);
<a name="l1151"><span class="linenum">1151</span></a>  
<a name="l1152"><span class="linenum">1152</span></a>  <span class="comment">    // Stop excluding concepts from autolinking</span>
<a name="l1153"><span class="linenum">1153</span></a>      unset(<a class="var it12589" onMouseOver="hilite(12589)" onMouseOut="lolite()" onClick="logVariable('GLOSSARY_EXCLUDEENTRY')" href="../../_variables/GLOSSARY_EXCLUDEENTRY.html">$GLOSSARY_EXCLUDEENTRY</a>);
<a name="l1154"><span class="linenum">1154</span></a>  
<a name="l1155"><span class="linenum">1155</span></a>      if (!empty(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('highlight')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/highlight.html">highlight</a>)) {
<a name="l1156"><span class="linenum">1156</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> = <a class="function" onClick="logFunction('highlight')" href="../../_functions/highlight.html" onMouseOver="funcPopup(event,'highlight')">highlight</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('highlight')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/highlight.html">highlight</a>, <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>);
<a name="l1157"><span class="linenum">1157</span></a>      }
<a name="l1158"><span class="linenum">1158</span></a>      if (isset(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('footer')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/footer.html">footer</a>)) {   // Unparsed footer info
<a name="l1159"><span class="linenum">1159</span></a>          <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a> .= <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('footer')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/footer.html">footer</a>;
<a name="l1160"><span class="linenum">1160</span></a>      }
<a name="l1161"><span class="linenum">1161</span></a>      echo <a class="var it151" onMouseOver="hilite(151)" onMouseOut="lolite()" onClick="logVariable('text')" href="../../_variables/text.html">$text</a>;
<a name="l1162"><span class="linenum">1162</span></a>  }
<a name="l1163"><span class="linenum">1163</span></a>  
<a name="l1164"><span class="linenum">1164</span></a>  <span class="comment">/**</span>
<a name="l1165"><span class="linenum">1165</span></a>  <span class="comment"> *</span>
<a name="l1166"><span class="linenum">1166</span></a>  <span class="comment"> * @global object</span>
<a name="l1167"><span class="linenum">1167</span></a>  <span class="comment"> * @param object $course</span>
<a name="l1168"><span class="linenum">1168</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1169"><span class="linenum">1169</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1170"><span class="linenum">1170</span></a>  <span class="comment"> * @param object $entry</span>
<a name="l1171"><span class="linenum">1171</span></a>  <span class="comment"> * @param string $mode</span>
<a name="l1172"><span class="linenum">1172</span></a>  <span class="comment"> * @param string $hook</span>
<a name="l1173"><span class="linenum">1173</span></a>  <span class="comment"> * @param string $type</span>
<a name="l1174"><span class="linenum">1174</span></a>  <span class="comment"> * @return string|void</span>
<a name="l1175"><span class="linenum">1175</span></a>  <span class="comment"> */</span>
<a name="l1176"><span class="linenum">1176</span></a>  function  <a class="function" onClick="logFunction('glossary_print_entry_aliases')" href="../../_functions/glossary_print_entry_aliases.html" onMouseOver="funcPopup(event,'glossary_print_entry_aliases')">glossary_print_entry_aliases</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>,<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>='',<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>='', <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'print') {
<a name="l1177"><span class="linenum">1177</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1178"><span class="linenum">1178</span></a>  
<a name="l1179"><span class="linenum">1179</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = '';
<a name="l1180"><span class="linenum">1180</span></a>      if ( <a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>('glossary_alias', array('entryid'=&gt;<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l1181"><span class="linenum">1181</span></a>          foreach (<a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a> as <a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a>) {
<a name="l1182"><span class="linenum">1182</span></a>              if (<a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a>-&gt;<a onClick="logVariable('alias')" class="var it44086" onMouseOver="hilite(44086)" onMouseOut="lolite()" href="../../_variables/alias.html">alias</a>)) {
<a name="l1183"><span class="linenum">1183</span></a>                  if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> == '') {
<a name="l1184"><span class="linenum">1184</span></a>                      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = '&lt;select id=&quot;keyword&quot; style=&quot;font-size:8pt&quot;&gt;';
<a name="l1185"><span class="linenum">1185</span></a>                  }
<a name="l1186"><span class="linenum">1186</span></a>                  <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= &quot;&lt;option&gt;<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a>-&gt;<a onClick="logVariable('alias')" class="var it44086" onMouseOver="hilite(44086)" onMouseOut="lolite()" href="../../_variables/alias.html">alias</a>&lt;/option&gt;&quot;;
<a name="l1187"><span class="linenum">1187</span></a>              }
<a name="l1188"><span class="linenum">1188</span></a>          }
<a name="l1189"><span class="linenum">1189</span></a>          if (<a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> != '') {
<a name="l1190"><span class="linenum">1190</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= '&lt;/select&gt;';
<a name="l1191"><span class="linenum">1191</span></a>          }
<a name="l1192"><span class="linenum">1192</span></a>      }
<a name="l1193"><span class="linenum">1193</span></a>      if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> == 'print') {
<a name="l1194"><span class="linenum">1194</span></a>          echo <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l1195"><span class="linenum">1195</span></a>      } else {
<a name="l1196"><span class="linenum">1196</span></a>          return <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l1197"><span class="linenum">1197</span></a>      }
<a name="l1198"><span class="linenum">1198</span></a>  }
<a name="l1199"><span class="linenum">1199</span></a>  
<a name="l1200"><span class="linenum">1200</span></a>  <span class="comment">/**</span>
<a name="l1201"><span class="linenum">1201</span></a>  <span class="comment"> *</span>
<a name="l1202"><span class="linenum">1202</span></a>  <span class="comment"> * @global object</span>
<a name="l1203"><span class="linenum">1203</span></a>  <span class="comment"> * @global object</span>
<a name="l1204"><span class="linenum">1204</span></a>  <span class="comment"> * @global object</span>
<a name="l1205"><span class="linenum">1205</span></a>  <span class="comment"> * @param object $course</span>
<a name="l1206"><span class="linenum">1206</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1207"><span class="linenum">1207</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1208"><span class="linenum">1208</span></a>  <span class="comment"> * @param object $entry</span>
<a name="l1209"><span class="linenum">1209</span></a>  <span class="comment"> * @param string $mode</span>
<a name="l1210"><span class="linenum">1210</span></a>  <span class="comment"> * @param string $hook</span>
<a name="l1211"><span class="linenum">1211</span></a>  <span class="comment"> * @param string $type</span>
<a name="l1212"><span class="linenum">1212</span></a>  <span class="comment"> * @return string|void</span>
<a name="l1213"><span class="linenum">1213</span></a>  <span class="comment"> */</span>
<a name="l1214"><span class="linenum">1214</span></a>  function <a class="function" onClick="logFunction('glossary_print_entry_icons')" href="../../_functions/glossary_print_entry_icons.html" onMouseOver="funcPopup(event,'glossary_print_entry_icons')">glossary_print_entry_icons</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>='',<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>='', <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = 'print') {
<a name="l1215"><span class="linenum">1215</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1216"><span class="linenum">1216</span></a>  
<a name="l1217"><span class="linenum">1217</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1218"><span class="linenum">1218</span></a>  
<a name="l1219"><span class="linenum">1219</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = false;   <span class="comment">//To decide if we must really return text in &quot;return&quot;. Activate when needed only!</span>
<a name="l1220"><span class="linenum">1220</span></a>      <a class="var it12590" onMouseOver="hilite(12590)" onMouseOut="lolite()" onClick="logVariable('importedentry')" href="../../_variables/importedentry.html">$importedentry</a> = (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('sourceglossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/sourceglossaryid.html">sourceglossaryid</a> == <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1221"><span class="linenum">1221</span></a>      <a class="var it12591" onMouseOver="hilite(12591)" onMouseOut="lolite()" onClick="logVariable('ismainglossary')" href="../../_variables/ismainglossary.html">$ismainglossary</a> = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('mainglossary')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/mainglossary.html">mainglossary</a>;
<a name="l1222"><span class="linenum">1222</span></a>  
<a name="l1223"><span class="linenum">1223</span></a>  
<a name="l1224"><span class="linenum">1224</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = '&lt;span class=&quot;commands&quot;&gt;';
<a name="l1225"><span class="linenum">1225</span></a>  <span class="comment">    // Differentiate links for each entry.</span>
<a name="l1226"><span class="linenum">1226</span></a>      <a class="var it12592" onMouseOver="hilite(12592)" onMouseOut="lolite()" onClick="logVariable('altsuffix')" href="../../_variables/altsuffix.html">$altsuffix</a> = ': '.<a class="phpfunction" onClick="logFunction('strip_tags')" href="../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('concept')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>));
<a name="l1227"><span class="linenum">1227</span></a>  
<a name="l1228"><span class="linenum">1228</span></a>      if (!<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('approved')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a>) {
<a name="l1229"><span class="linenum">1229</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = true;
<a name="l1230"><span class="linenum">1230</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= <a class="class" onClick="logClass('html_writer')" href="../../_classes/html_writer.html" onMouseOver="classPopup(event,'html_writer')">html_writer</a>::<a class="function" onClick="logFunction('tag')" href="../../_functions/tag.html" onMouseOver="funcPopup(event,'tag')">tag</a>('span', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('entryishidden','glossary'),
<a name="l1231"><span class="linenum">1231</span></a>              array('class' =&gt; 'glossary-hidden-note'));
<a name="l1232"><span class="linenum">1232</span></a>      }
<a name="l1233"><span class="linenum">1233</span></a>  
<a name="l1234"><span class="linenum">1234</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) &amp;&amp; !<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('defaultapproval')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/defaultapproval.html">defaultapproval</a> &amp;&amp; <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('approved')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a>) {
<a name="l1235"><span class="linenum">1235</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = true;
<a name="l1236"><span class="linenum">1236</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= '&lt;a class=&quot;action-icon&quot; title=&quot;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('disapprove', 'glossary').
<a name="l1237"><span class="linenum">1237</span></a>                     '&quot; href=&quot;approve.php?newstate=0&amp;amp;eid='.<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&amp;amp;mode='.<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>.
<a name="l1238"><span class="linenum">1238</span></a>                     '&amp;amp;hook='.<a class="phpfunction" onClick="logFunction('urlencode')" href="../../_functions/urlencode.html" onMouseOver="phpfuncPopup(event,'urlencode')">urlencode</a>(<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>).'&amp;amp;sesskey='.<a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>().
<a name="l1239"><span class="linenum">1239</span></a>                     '&quot;&gt;&lt;img src=&quot;'.<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('t/block').'&quot; class=&quot;smallicon&quot; alt=&quot;'.
<a name="l1240"><span class="linenum">1240</span></a>                     <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('disapprove','glossary').<a class="var it12592" onMouseOver="hilite(12592)" onMouseOut="lolite()" onClick="logVariable('altsuffix')" href="../../_variables/altsuffix.html">$altsuffix</a>.'&quot; /&gt;&lt;/a&gt;';
<a name="l1241"><span class="linenum">1241</span></a>      }
<a name="l1242"><span class="linenum">1242</span></a>  
<a name="l1243"><span class="linenum">1243</span></a>      <a class="var it6531" onMouseOver="hilite(6531)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../../_variables/iscurrentuser.html">$iscurrentuser</a> = (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('userid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1244"><span class="linenum">1244</span></a>  
<a name="l1245"><span class="linenum">1245</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:manageentries', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) <a class="function" onClick="logFunction('or')" href="../../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (<a class="function" onClick="logFunction('isloggedin')" href="../../_functions/isloggedin.html" onMouseOver="funcPopup(event,'isloggedin')">isloggedin</a>() and <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:write', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) and <a class="var it6531" onMouseOver="hilite(6531)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../../_variables/iscurrentuser.html">$iscurrentuser</a>)) {
<a name="l1246"><span class="linenum">1246</span></a>  <span class="comment">        // only teachers can export entries so check it out</span>
<a name="l1247"><span class="linenum">1247</span></a>          if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:export', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) and !<a class="var it12591" onMouseOver="hilite(12591)" onMouseOut="lolite()" onClick="logVariable('ismainglossary')" href="../../_variables/ismainglossary.html">$ismainglossary</a> and !<a class="var it12590" onMouseOver="hilite(12590)" onMouseOut="lolite()" onClick="logVariable('importedentry')" href="../../_variables/importedentry.html">$importedentry</a>) {
<a name="l1248"><span class="linenum">1248</span></a>              <a class="var it12555" onMouseOver="hilite(12555)" onMouseOut="lolite()" onClick="logVariable('mainglossary')" href="../../_variables/mainglossary.html">$mainglossary</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary', array('mainglossary'=&gt;1,'course'=&gt;<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l1249"><span class="linenum">1249</span></a>              if ( <a class="var it12555" onMouseOver="hilite(12555)" onMouseOut="lolite()" onClick="logVariable('mainglossary')" href="../../_variables/mainglossary.html">$mainglossary</a> ) {  // if there is a main glossary defined, allow to export the current entry
<a name="l1250"><span class="linenum">1250</span></a>                  <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = true;
<a name="l1251"><span class="linenum">1251</span></a>                  <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= '&lt;a class=&quot;action-icon&quot; title=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('exporttomainglossary','glossary') . '&quot; href=&quot;exportentry.php?id='.<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'&amp;amp;prevmode='.<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>.'&amp;amp;hook='.<a class="phpfunction" onClick="logFunction('urlencode')" href="../../_functions/urlencode.html" onMouseOver="phpfuncPopup(event,'urlencode')">urlencode</a>(<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>).'&quot;&gt;&lt;img src=&quot;'.<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('export', 'glossary').'&quot; class=&quot;smallicon&quot; alt=&quot;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('exporttomainglossary','glossary').<a class="var it12592" onMouseOver="hilite(12592)" onMouseOut="lolite()" onClick="logVariable('altsuffix')" href="../../_variables/altsuffix.html">$altsuffix</a>.'&quot; /&gt;&lt;/a&gt;';
<a name="l1252"><span class="linenum">1252</span></a>              }
<a name="l1253"><span class="linenum">1253</span></a>          }
<a name="l1254"><span class="linenum">1254</span></a>  
<a name="l1255"><span class="linenum">1255</span></a>          if ( <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('sourceglossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/sourceglossaryid.html">sourceglossaryid</a> ) {
<a name="l1256"><span class="linenum">1256</span></a>              <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../_variables/icon.html">$icon</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('minus', 'glossary');   <span class="comment">// graphical metaphor (minus) for deleting an imported entry</span>
<a name="l1257"><span class="linenum">1257</span></a>          } else {
<a name="l1258"><span class="linenum">1258</span></a>              <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../_variables/icon.html">$icon</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('t/delete');
<a name="l1259"><span class="linenum">1259</span></a>          }
<a name="l1260"><span class="linenum">1260</span></a>  
<a name="l1261"><span class="linenum">1261</span></a>  <span class="comment">        //Decide if an entry is editable:</span>
<a name="l1262"><span class="linenum">1262</span></a>  <span class="comment">        // -It isn't a imported entry (so nobody can edit a imported (from secondary to main) entry)) and</span>
<a name="l1263"><span class="linenum">1263</span></a>  <span class="comment">        // -The user is teacher or he is a student with time permissions (edit period or editalways defined).</span>
<a name="l1264"><span class="linenum">1264</span></a>          <a class="var it8312" onMouseOver="hilite(8312)" onMouseOut="lolite()" onClick="logVariable('ineditperiod')" href="../../_variables/ineditperiod.html">$ineditperiod</a> = ((<a class="phpfunction" onClick="logFunction('time')" href="../../_functions/time.html" onMouseOver="phpfuncPopup(event,'time')">time</a>() - <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('timecreated')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/timecreated.html">timecreated</a> &lt;  <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('maxeditingtime')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/maxeditingtime.html">maxeditingtime</a>) || <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('editalways')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/editalways.html">editalways</a>);
<a name="l1265"><span class="linenum">1265</span></a>          if ( !<a class="var it12590" onMouseOver="hilite(12590)" onMouseOut="lolite()" onClick="logVariable('importedentry')" href="../../_variables/importedentry.html">$importedentry</a> and (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:manageentries', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) <a class="function" onClick="logFunction('or')" href="../../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('userid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> == <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> and (<a class="var it8312" onMouseOver="hilite(8312)" onMouseOut="lolite()" onClick="logVariable('ineditperiod')" href="../../_variables/ineditperiod.html">$ineditperiod</a> and <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:write', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>))))) {
<a name="l1266"><span class="linenum">1266</span></a>              <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = true;
<a name="l1267"><span class="linenum">1267</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= &quot;&lt;a class='action-icon' title=\&quot;&quot; . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;delete&quot;) . &quot;\&quot; href=\&quot;deleteentry.php?id=<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;mode=delete&amp;amp;entry=<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;prevmode=<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>&amp;amp;hook=&quot;.<a class="phpfunction" onClick="logFunction('urlencode')" href="../../_functions/urlencode.html" onMouseOver="phpfuncPopup(event,'urlencode')">urlencode</a>(<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>).&quot;\&quot;&gt;&lt;img src=\&quot;&quot;;
<a name="l1268"><span class="linenum">1268</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../_variables/icon.html">$icon</a>;
<a name="l1269"><span class="linenum">1269</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= &quot;\&quot; class=\&quot;smallicon\&quot; alt=\&quot;&quot; . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;delete&quot;) .<a class="var it12592" onMouseOver="hilite(12592)" onMouseOut="lolite()" onClick="logVariable('altsuffix')" href="../../_variables/altsuffix.html">$altsuffix</a>.&quot;\&quot; /&gt;&lt;/a&gt;&quot;;
<a name="l1270"><span class="linenum">1270</span></a>  
<a name="l1271"><span class="linenum">1271</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= &quot;&lt;a class='action-icon' title=\&quot;&quot; . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;edit&quot;) . &quot;\&quot; href=\&quot;edit.php?cmid=<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;id=<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;mode=<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>&amp;amp;hook=&quot;.<a class="phpfunction" onClick="logFunction('urlencode')" href="../../_functions/urlencode.html" onMouseOver="phpfuncPopup(event,'urlencode')">urlencode</a>(<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>).&quot;\&quot;&gt;&lt;img src=\&quot;&quot; . <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('t/edit') . &quot;\&quot; class=\&quot;smallicon\&quot; alt=\&quot;&quot; . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;edit&quot;) .<a class="var it12592" onMouseOver="hilite(12592)" onMouseOut="lolite()" onClick="logVariable('altsuffix')" href="../../_variables/altsuffix.html">$altsuffix</a>. &quot;\&quot; /&gt;&lt;/a&gt;&quot;;
<a name="l1272"><span class="linenum">1272</span></a>          } elseif ( <a class="var it12590" onMouseOver="hilite(12590)" onMouseOut="lolite()" onClick="logVariable('importedentry')" href="../../_variables/importedentry.html">$importedentry</a> ) {
<a name="l1273"><span class="linenum">1273</span></a>              <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= &quot;&lt;font size=\&quot;-1\&quot;&gt;&quot; . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;exportedentry&quot;,&quot;glossary&quot;) . &quot;&lt;/font&gt;&quot;;
<a name="l1274"><span class="linenum">1274</span></a>          }
<a name="l1275"><span class="linenum">1275</span></a>      }
<a name="l1276"><span class="linenum">1276</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enableportfolios')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/enableportfolios.html">enableportfolios</a>) &amp;&amp; (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:exportentry', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) || (<a class="var it6531" onMouseOver="hilite(6531)" onMouseOut="lolite()" onClick="logVariable('iscurrentuser')" href="../../_variables/iscurrentuser.html">$iscurrentuser</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:exportownentry', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)))) {
<a name="l1277"><span class="linenum">1277</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/portfoliolib.php');
<a name="l1278"><span class="linenum">1278</span></a>          <a class="var it2196" onMouseOver="hilite(2196)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a> = <span class="keyword">new </span><a class="class" onClick="logClass('portfolio_add_button')" href="../../_classes/portfolio_add_button.html" onMouseOver="classPopup(event,'portfolio_add_button')">portfolio_add_button</a>();
<a name="l1279"><span class="linenum">1279</span></a>          <a class="var it2196" onMouseOver="hilite(2196)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a>-&gt;<a class="function" onClick="logFunction('set_callback_options')" href="../../_functions/set_callback_options.html" onMouseOver="funcPopup(event,'set_callback_options')">set_callback_options</a>('glossary_entry_portfolio_caller',  array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'entryid' =&gt; <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'mod_glossary');
<a name="l1280"><span class="linenum">1280</span></a>  
<a name="l1281"><span class="linenum">1281</span></a>          <a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l1282"><span class="linenum">1282</span></a>          if (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('sourceglossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/sourceglossaryid.html">sourceglossaryid</a> == <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>) {
<a name="l1283"><span class="linenum">1283</span></a>              if (<a class="var it12593" onMouseOver="hilite(12593)" onMouseOut="lolite()" onClick="logVariable('maincm')" href="../../_variables/maincm.html">$maincm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>)) {
<a name="l1284"><span class="linenum">1284</span></a>                  <a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it12593" onMouseOver="hilite(12593)" onMouseOut="lolite()" onClick="logVariable('maincm')" href="../../_variables/maincm.html">$maincm</a>-&gt;<a onClick="logVariable('id')" class="var it44542" onMouseOver="hilite(44542)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1285"><span class="linenum">1285</span></a>              }
<a name="l1286"><span class="linenum">1286</span></a>          }
<a name="l1287"><span class="linenum">1287</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1288"><span class="linenum">1288</span></a>          if (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a>-&gt;<a onClick="logVariable('id')" class="var it43672" onMouseOver="hilite(43672)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', 'attachment', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;timemodified&quot;, false)
<a name="l1289"><span class="linenum">1289</span></a>           || <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a>-&gt;<a onClick="logVariable('id')" class="var it43672" onMouseOver="hilite(43672)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', 'entry', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;timemodified&quot;, false)) {
<a name="l1290"><span class="linenum">1290</span></a>  
<a name="l1291"><span class="linenum">1291</span></a>              <a class="var it2196" onMouseOver="hilite(2196)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a>-&gt;<a class="function" onClick="logFunction('set_formats')" href="../../_functions/set_formats.html" onMouseOver="funcPopup(event,'set_formats')">set_formats</a>(<a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_RICHHTML')" href="../../_constants/PORTFOLIO_FORMAT_RICHHTML.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_RICHHTML')">PORTFOLIO_FORMAT_RICHHTML</a>);
<a name="l1292"><span class="linenum">1292</span></a>          } else {
<a name="l1293"><span class="linenum">1293</span></a>              <a class="var it2196" onMouseOver="hilite(2196)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a>-&gt;<a class="function" onClick="logFunction('set_formats')" href="../../_functions/set_formats.html" onMouseOver="funcPopup(event,'set_formats')">set_formats</a>(<a class="constant" onClick="logConstant('PORTFOLIO_FORMAT_PLAINHTML')" href="../../_constants/PORTFOLIO_FORMAT_PLAINHTML.html" onMouseOver="constPopup(event,'PORTFOLIO_FORMAT_PLAINHTML')">PORTFOLIO_FORMAT_PLAINHTML</a>);
<a name="l1294"><span class="linenum">1294</span></a>          }
<a name="l1295"><span class="linenum">1295</span></a>  
<a name="l1296"><span class="linenum">1296</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= <a class="var it2196" onMouseOver="hilite(2196)" onMouseOut="lolite()" onClick="logVariable('button')" href="../../_variables/button.html">$button</a>-&gt;<a class="function" onClick="logFunction('to_html')" href="../../_functions/to_html.html" onMouseOver="funcPopup(event,'to_html')">to_html</a>(<a class="constant" onClick="logConstant('PORTFOLIO_ADD_ICON_LINK')" href="../../_constants/PORTFOLIO_ADD_ICON_LINK.html" onMouseOver="constPopup(event,'PORTFOLIO_ADD_ICON_LINK')">PORTFOLIO_ADD_ICON_LINK</a>);
<a name="l1297"><span class="linenum">1297</span></a>      }
<a name="l1298"><span class="linenum">1298</span></a>      <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= '&lt;/span&gt;';
<a name="l1299"><span class="linenum">1299</span></a>  
<a name="l1300"><span class="linenum">1300</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('usecomments')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/usecomments.html">usecomments</a>) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:comment', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) and <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('allowcomments')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/allowcomments.html">allowcomments</a>) {
<a name="l1301"><span class="linenum">1301</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a> . '<a class="filename" href="../../comment/lib.php.html">/comment/lib.php</a>');
<a name="l1302"><span class="linenum">1302</span></a>          <a class="var it1043" onMouseOver="hilite(1043)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a> = new stdClass();
<a name="l1303"><span class="linenum">1303</span></a>          <a class="var it1043" onMouseOver="hilite(1043)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('component')" class="var it43136" onMouseOver="hilite(43136)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = 'mod_glossary';
<a name="l1304"><span class="linenum">1304</span></a>          <a class="var it1043" onMouseOver="hilite(1043)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('context')" class="var it43136" onMouseOver="hilite(43136)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>  = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l1305"><span class="linenum">1305</span></a>          <a class="var it1043" onMouseOver="hilite(1043)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('course')" class="var it43136" onMouseOver="hilite(43136)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>   = <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>;
<a name="l1306"><span class="linenum">1306</span></a>          <a class="var it1043" onMouseOver="hilite(1043)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('cm')" class="var it43136" onMouseOver="hilite(43136)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>       = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>;
<a name="l1307"><span class="linenum">1307</span></a>          <a class="var it1043" onMouseOver="hilite(1043)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('area')" class="var it43136" onMouseOver="hilite(43136)" onMouseOut="lolite()" href="../../_variables/area.html">area</a>     = 'glossary_entry';
<a name="l1308"><span class="linenum">1308</span></a>          <a class="var it1043" onMouseOver="hilite(1043)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('itemid')" class="var it43136" onMouseOver="hilite(43136)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a>   = <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1309"><span class="linenum">1309</span></a>          <a class="var it1043" onMouseOver="hilite(1043)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>-&gt;<a onClick="logVariable('showcount')" class="var it43136" onMouseOver="hilite(43136)" onMouseOut="lolite()" href="../../_variables/showcount.html">showcount</a> = true;
<a name="l1310"><span class="linenum">1310</span></a>          <a class="var it298" onMouseOver="hilite(298)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a> = <span class="keyword">new </span><a class="class" onClick="logClass('comment')" href="../../_classes/comment.html" onMouseOver="classPopup(event,'comment')">comment</a>(<a class="var it1043" onMouseOver="hilite(1043)" onMouseOut="lolite()" onClick="logVariable('cmt')" href="../../_variables/cmt.html">$cmt</a>);
<a name="l1311"><span class="linenum">1311</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> .= '&lt;div&gt;'.<a class="var it298" onMouseOver="hilite(298)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>-&gt;<a class="function" onClick="logFunction('output')" href="../../_functions/output.html" onMouseOver="funcPopup(event,'output')">output</a>(true).'&lt;/div&gt;';
<a name="l1312"><span class="linenum">1312</span></a>          <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = true;
<a name="l1313"><span class="linenum">1313</span></a>      }
<a name="l1314"><span class="linenum">1314</span></a>  
<a name="l1315"><span class="linenum">1315</span></a>  <span class="comment">    //If we haven't calculated any REAL thing, delete result ($return)</span>
<a name="l1316"><span class="linenum">1316</span></a>      if (!<a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>) {
<a name="l1317"><span class="linenum">1317</span></a>          <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a> = '';
<a name="l1318"><span class="linenum">1318</span></a>      }
<a name="l1319"><span class="linenum">1319</span></a>  <span class="comment">    //Print or get</span>
<a name="l1320"><span class="linenum">1320</span></a>      if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> == 'print') {
<a name="l1321"><span class="linenum">1321</span></a>          echo <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l1322"><span class="linenum">1322</span></a>      } else {
<a name="l1323"><span class="linenum">1323</span></a>          return <a class="var it32" onMouseOver="hilite(32)" onMouseOut="lolite()" onClick="logVariable('return')" href="../../_variables/return.html">$return</a>;
<a name="l1324"><span class="linenum">1324</span></a>      }
<a name="l1325"><span class="linenum">1325</span></a>  }
<a name="l1326"><span class="linenum">1326</span></a>  
<a name="l1327"><span class="linenum">1327</span></a>  <span class="comment">/**</span>
<a name="l1328"><span class="linenum">1328</span></a>  <span class="comment"> * @param object $course</span>
<a name="l1329"><span class="linenum">1329</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1330"><span class="linenum">1330</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1331"><span class="linenum">1331</span></a>  <span class="comment"> * @param object $entry</span>
<a name="l1332"><span class="linenum">1332</span></a>  <span class="comment"> * @param string $mode</span>
<a name="l1333"><span class="linenum">1333</span></a>  <span class="comment"> * @param object $hook</span>
<a name="l1334"><span class="linenum">1334</span></a>  <span class="comment"> * @param bool $printicons</span>
<a name="l1335"><span class="linenum">1335</span></a>  <span class="comment"> * @param bool $aliases</span>
<a name="l1336"><span class="linenum">1336</span></a>  <span class="comment"> * @return void</span>
<a name="l1337"><span class="linenum">1337</span></a>  <span class="comment"> */</span>
<a name="l1338"><span class="linenum">1338</span></a>  function  <a class="function" onClick="logFunction('glossary_print_entry_lower_section')" href="../../_functions/glossary_print_entry_lower_section.html" onMouseOver="funcPopup(event,'glossary_print_entry_lower_section')">glossary_print_entry_lower_section</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>, <a class="var it2512" onMouseOver="hilite(2512)" onMouseOut="lolite()" onClick="logVariable('printicons')" href="../../_variables/printicons.html">$printicons</a>, <a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a>=true) {
<a name="l1339"><span class="linenum">1339</span></a>      if (<a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a>) {
<a name="l1340"><span class="linenum">1340</span></a>          <a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a> = <a class="function" onClick="logFunction('glossary_print_entry_aliases')" href="../../_functions/glossary_print_entry_aliases.html" onMouseOver="funcPopup(event,'glossary_print_entry_aliases')">glossary_print_entry_aliases</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>,'html');
<a name="l1341"><span class="linenum">1341</span></a>      }
<a name="l1342"><span class="linenum">1342</span></a>      <a class="var it2569" onMouseOver="hilite(2569)" onMouseOut="lolite()" onClick="logVariable('icons')" href="../../_variables/icons.html">$icons</a>   = '';
<a name="l1343"><span class="linenum">1343</span></a>      if (<a class="var it2512" onMouseOver="hilite(2512)" onMouseOut="lolite()" onClick="logVariable('printicons')" href="../../_variables/printicons.html">$printicons</a>) {
<a name="l1344"><span class="linenum">1344</span></a>          <a class="var it2569" onMouseOver="hilite(2569)" onMouseOut="lolite()" onClick="logVariable('icons')" href="../../_variables/icons.html">$icons</a>   = <a class="function" onClick="logFunction('glossary_print_entry_icons')" href="../../_functions/glossary_print_entry_icons.html" onMouseOver="funcPopup(event,'glossary_print_entry_icons')">glossary_print_entry_icons</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>,'html');
<a name="l1345"><span class="linenum">1345</span></a>      }
<a name="l1346"><span class="linenum">1346</span></a>      if (<a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a> || <a class="var it2569" onMouseOver="hilite(2569)" onMouseOut="lolite()" onClick="logVariable('icons')" href="../../_variables/icons.html">$icons</a> || !empty(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('rating')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/rating.html">rating</a>)) {
<a name="l1347"><span class="linenum">1347</span></a>          echo '&lt;table&gt;';
<a name="l1348"><span class="linenum">1348</span></a>          if ( <a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a> ) {
<a name="l1349"><span class="linenum">1349</span></a>              echo '&lt;tr valign=&quot;top&quot;&gt;&lt;td class=&quot;aliases&quot;&gt;' .
<a name="l1350"><span class="linenum">1350</span></a>                   '&lt;label for=&quot;keyword&quot;&gt;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('aliases','glossary').': &lt;/label&gt;' .
<a name="l1351"><span class="linenum">1351</span></a>                   <a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a> . '&lt;/td&gt;&lt;/tr&gt;';
<a name="l1352"><span class="linenum">1352</span></a>          }
<a name="l1353"><span class="linenum">1353</span></a>          if (<a class="var it2569" onMouseOver="hilite(2569)" onMouseOut="lolite()" onClick="logVariable('icons')" href="../../_variables/icons.html">$icons</a>) {
<a name="l1354"><span class="linenum">1354</span></a>              echo '&lt;tr valign=&quot;top&quot;&gt;&lt;td class=&quot;icons&quot;&gt;'.<a class="var it2569" onMouseOver="hilite(2569)" onMouseOut="lolite()" onClick="logVariable('icons')" href="../../_variables/icons.html">$icons</a>.'&lt;/td&gt;&lt;/tr&gt;';
<a name="l1355"><span class="linenum">1355</span></a>          }
<a name="l1356"><span class="linenum">1356</span></a>          if (!empty(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('rating')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/rating.html">rating</a>)) {
<a name="l1357"><span class="linenum">1357</span></a>              echo '&lt;tr valign=&quot;top&quot;&gt;&lt;td class=&quot;ratings&quot;&gt;';
<a name="l1358"><span class="linenum">1358</span></a>              <a class="function" onClick="logFunction('glossary_print_entry_ratings')" href="../../_functions/glossary_print_entry_ratings.html" onMouseOver="funcPopup(event,'glossary_print_entry_ratings')">glossary_print_entry_ratings</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>);
<a name="l1359"><span class="linenum">1359</span></a>              echo '&lt;/td&gt;&lt;/tr&gt;';
<a name="l1360"><span class="linenum">1360</span></a>          }
<a name="l1361"><span class="linenum">1361</span></a>          echo '&lt;/table&gt;';
<a name="l1362"><span class="linenum">1362</span></a>      }
<a name="l1363"><span class="linenum">1363</span></a>  }
<a name="l1364"><span class="linenum">1364</span></a>  
<a name="l1365"><span class="linenum">1365</span></a>  <span class="comment">/**</span>
<a name="l1366"><span class="linenum">1366</span></a>  <span class="comment"> * Print the list of attachments for this glossary entry</span>
<a name="l1367"><span class="linenum">1367</span></a>  <span class="comment"> *</span>
<a name="l1368"><span class="linenum">1368</span></a>  <span class="comment"> * @param object $entry</span>
<a name="l1369"><span class="linenum">1369</span></a>  <span class="comment"> * @param object $cm The coursemodule</span>
<a name="l1370"><span class="linenum">1370</span></a>  <span class="comment"> * @param string $format The format for this view (html, or text)</span>
<a name="l1371"><span class="linenum">1371</span></a>  <span class="comment"> * @param string $unused1 This parameter is no longer used</span>
<a name="l1372"><span class="linenum">1372</span></a>  <span class="comment"> * @param string $unused2 This parameter is no longer used</span>
<a name="l1373"><span class="linenum">1373</span></a>  <span class="comment"> */</span>
<a name="l1374"><span class="linenum">1374</span></a>  function <a class="function" onClick="logFunction('glossary_print_entry_attachment')" href="../../_functions/glossary_print_entry_attachment.html" onMouseOver="funcPopup(event,'glossary_print_entry_attachment')">glossary_print_entry_attachment</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a> = null, <a class="var it12595" onMouseOver="hilite(12595)" onMouseOut="lolite()" onClick="logVariable('unused1')" href="../../_variables/unused1.html">$unused1</a> = null, <a class="var it12596" onMouseOver="hilite(12596)" onMouseOut="lolite()" onClick="logVariable('unused2')" href="../../_variables/unused2.html">$unused2</a> = null) {
<a name="l1375"><span class="linenum">1375</span></a>  <span class="comment">    // Valid format values: html: The HTML link for the attachment is an icon; and</span>
<a name="l1376"><span class="linenum">1376</span></a>  <span class="comment">    //                      text: The HTML link for the attachment is text.</span>
<a name="l1377"><span class="linenum">1377</span></a>      if (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('attachment')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/attachment.html">attachment</a>) {
<a name="l1378"><span class="linenum">1378</span></a>          echo '&lt;div class=&quot;attachments&quot;&gt;';
<a name="l1379"><span class="linenum">1379</span></a>          echo <a class="function" onClick="logFunction('glossary_print_attachments')" href="../../_functions/glossary_print_attachments.html" onMouseOver="funcPopup(event,'glossary_print_attachments')">glossary_print_attachments</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>);
<a name="l1380"><span class="linenum">1380</span></a>          echo '&lt;/div&gt;';
<a name="l1381"><span class="linenum">1381</span></a>      }
<a name="l1382"><span class="linenum">1382</span></a>      if (<a class="var it12595" onMouseOver="hilite(12595)" onMouseOut="lolite()" onClick="logVariable('unused1')" href="../../_variables/unused1.html">$unused1</a>) {
<a name="l1383"><span class="linenum">1383</span></a>          <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('The align parameter is deprecated, please use appropriate CSS instead', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1384"><span class="linenum">1384</span></a>      }
<a name="l1385"><span class="linenum">1385</span></a>      if (<a class="var it12596" onMouseOver="hilite(12596)" onMouseOut="lolite()" onClick="logVariable('unused2')" href="../../_variables/unused2.html">$unused2</a> !== null) {
<a name="l1386"><span class="linenum">1386</span></a>          <a class="function" onClick="logFunction('debugging')" href="../../_functions/debugging.html" onMouseOver="funcPopup(event,'debugging')">debugging</a>('The insidetable parameter is deprecated, please use appropriate CSS instead', <a class="constant" onClick="logConstant('DEBUG_DEVELOPER')" href="../../_constants/DEBUG_DEVELOPER.html" onMouseOver="constPopup(event,'DEBUG_DEVELOPER')">DEBUG_DEVELOPER</a>);
<a name="l1387"><span class="linenum">1387</span></a>      }
<a name="l1388"><span class="linenum">1388</span></a>  }
<a name="l1389"><span class="linenum">1389</span></a>  
<a name="l1390"><span class="linenum">1390</span></a>  <span class="comment">/**</span>
<a name="l1391"><span class="linenum">1391</span></a>  <span class="comment"> * @global object</span>
<a name="l1392"><span class="linenum">1392</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1393"><span class="linenum">1393</span></a>  <span class="comment"> * @param object $entry</span>
<a name="l1394"><span class="linenum">1394</span></a>  <span class="comment"> * @param string $mode</span>
<a name="l1395"><span class="linenum">1395</span></a>  <span class="comment"> * @param string $align</span>
<a name="l1396"><span class="linenum">1396</span></a>  <span class="comment"> * @param bool $insidetable</span>
<a name="l1397"><span class="linenum">1397</span></a>  <span class="comment"> */</span>
<a name="l1398"><span class="linenum">1398</span></a>  function  <a class="function" onClick="logFunction('glossary_print_entry_approval')" href="../../_functions/glossary_print_entry_approval.html" onMouseOver="funcPopup(event,'glossary_print_entry_approval')">glossary_print_entry_approval</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it1850" onMouseOver="hilite(1850)" onMouseOut="lolite()" onClick="logVariable('align')" href="../../_variables/align.html">$align</a>=&quot;right&quot;, <a class="var it12597" onMouseOver="hilite(12597)" onMouseOut="lolite()" onClick="logVariable('insidetable')" href="../../_variables/insidetable.html">$insidetable</a>=true) {
<a name="l1399"><span class="linenum">1399</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1400"><span class="linenum">1400</span></a>  
<a name="l1401"><span class="linenum">1401</span></a>      if (<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a> == 'approval' and !<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('approved')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a>) {
<a name="l1402"><span class="linenum">1402</span></a>          if (<a class="var it12597" onMouseOver="hilite(12597)" onMouseOut="lolite()" onClick="logVariable('insidetable')" href="../../_variables/insidetable.html">$insidetable</a>) {
<a name="l1403"><span class="linenum">1403</span></a>              echo '&lt;table class=&quot;glossaryapproval&quot; align=&quot;'.<a class="var it1850" onMouseOver="hilite(1850)" onMouseOut="lolite()" onClick="logVariable('align')" href="../../_variables/align.html">$align</a>.'&quot;&gt;&lt;tr&gt;&lt;td align=&quot;'.<a class="var it1850" onMouseOver="hilite(1850)" onMouseOut="lolite()" onClick="logVariable('align')" href="../../_variables/align.html">$align</a>.'&quot;&gt;';
<a name="l1404"><span class="linenum">1404</span></a>          }
<a name="l1405"><span class="linenum">1405</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('action_icon')" href="../../_functions/action_icon.html" onMouseOver="funcPopup(event,'action_icon')">action_icon</a>(
<a name="l1406"><span class="linenum">1406</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('approve.php', array('eid' =&gt; <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mode' =&gt; <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, 'sesskey' =&gt; <a class="function" onClick="logFunction('sesskey')" href="../../_functions/sesskey.html" onMouseOver="funcPopup(event,'sesskey')">sesskey</a>())),
<a name="l1407"><span class="linenum">1407</span></a>              <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('t/approve', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('approve','glossary'), '',
<a name="l1408"><span class="linenum">1408</span></a>                  array('class' =&gt; 'iconsmall', 'align' =&gt; <a class="var it1850" onMouseOver="hilite(1850)" onMouseOut="lolite()" onClick="logVariable('align')" href="../../_variables/align.html">$align</a>))
<a name="l1409"><span class="linenum">1409</span></a>          );
<a name="l1410"><span class="linenum">1410</span></a>          if (<a class="var it12597" onMouseOver="hilite(12597)" onMouseOut="lolite()" onClick="logVariable('insidetable')" href="../../_variables/insidetable.html">$insidetable</a>) {
<a name="l1411"><span class="linenum">1411</span></a>              echo '&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';
<a name="l1412"><span class="linenum">1412</span></a>          }
<a name="l1413"><span class="linenum">1413</span></a>      }
<a name="l1414"><span class="linenum">1414</span></a>  }
<a name="l1415"><span class="linenum">1415</span></a>  
<a name="l1416"><span class="linenum">1416</span></a>  <span class="comment">/**</span>
<a name="l1417"><span class="linenum">1417</span></a>  <span class="comment"> * It returns all entries from all glossaries that matches the specified criteria</span>
<a name="l1418"><span class="linenum">1418</span></a>  <span class="comment"> *  within a given $course. It performs an $extended search if necessary.</span>
<a name="l1419"><span class="linenum">1419</span></a>  <span class="comment"> * It restrict the search to only one $glossary if the $glossary parameter is set.</span>
<a name="l1420"><span class="linenum">1420</span></a>  <span class="comment"> *</span>
<a name="l1421"><span class="linenum">1421</span></a>  <span class="comment"> * @global object</span>
<a name="l1422"><span class="linenum">1422</span></a>  <span class="comment"> * @global object</span>
<a name="l1423"><span class="linenum">1423</span></a>  <span class="comment"> * @param object $course</span>
<a name="l1424"><span class="linenum">1424</span></a>  <span class="comment"> * @param array $searchterms</span>
<a name="l1425"><span class="linenum">1425</span></a>  <span class="comment"> * @param int $extended</span>
<a name="l1426"><span class="linenum">1426</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1427"><span class="linenum">1427</span></a>  <span class="comment"> * @return array</span>
<a name="l1428"><span class="linenum">1428</span></a>  <span class="comment"> */</span>
<a name="l1429"><span class="linenum">1429</span></a>  function <a class="function" onClick="logFunction('glossary_search')" href="../../_functions/glossary_search.html" onMouseOver="funcPopup(event,'glossary_search')">glossary_search</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it7884" onMouseOver="hilite(7884)" onMouseOut="lolite()" onClick="logVariable('searchterms')" href="../../_variables/searchterms.html">$searchterms</a>, <a class="var it12598" onMouseOver="hilite(12598)" onMouseOut="lolite()" onClick="logVariable('extended')" href="../../_variables/extended.html">$extended</a> = 0, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a> = NULL) {
<a name="l1430"><span class="linenum">1430</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1431"><span class="linenum">1431</span></a>  
<a name="l1432"><span class="linenum">1432</span></a>      if ( !<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a> ) {
<a name="l1433"><span class="linenum">1433</span></a>          if ( <a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('glossaries')" href="../../_variables/glossaries.html">$glossaries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;glossary&quot;, array(&quot;course&quot;=&gt;<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) ) {
<a name="l1434"><span class="linenum">1434</span></a>              <a class="var it12599" onMouseOver="hilite(12599)" onMouseOut="lolite()" onClick="logVariable('glos')" href="../../_variables/glos.html">$glos</a> = &quot;&quot;;
<a name="l1435"><span class="linenum">1435</span></a>              foreach ( <a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('glossaries')" href="../../_variables/glossaries.html">$glossaries</a> as <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a> ) {
<a name="l1436"><span class="linenum">1436</span></a>                  <a class="var it12599" onMouseOver="hilite(12599)" onMouseOut="lolite()" onClick="logVariable('glos')" href="../../_variables/glos.html">$glos</a> .= &quot;<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,&quot;;
<a name="l1437"><span class="linenum">1437</span></a>              }
<a name="l1438"><span class="linenum">1438</span></a>              <a class="var it12599" onMouseOver="hilite(12599)" onMouseOut="lolite()" onClick="logVariable('glos')" href="../../_variables/glos.html">$glos</a> = <a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it12599" onMouseOver="hilite(12599)" onMouseOut="lolite()" onClick="logVariable('glos')" href="../../_variables/glos.html">$glos</a>,0,-1);
<a name="l1439"><span class="linenum">1439</span></a>          }
<a name="l1440"><span class="linenum">1440</span></a>      } else {
<a name="l1441"><span class="linenum">1441</span></a>          <a class="var it12599" onMouseOver="hilite(12599)" onMouseOut="lolite()" onClick="logVariable('glos')" href="../../_variables/glos.html">$glos</a> = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1442"><span class="linenum">1442</span></a>      }
<a name="l1443"><span class="linenum">1443</span></a>  
<a name="l1444"><span class="linenum">1444</span></a>      if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:manageentries', <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('course')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>))) {
<a name="l1445"><span class="linenum">1445</span></a>          <a class="var it12600" onMouseOver="hilite(12600)" onMouseOut="lolite()" onClick="logVariable('glossarymodule')" href="../../_variables/glossarymodule.html">$glossarymodule</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;modules&quot;, array(&quot;name&quot;=&gt;&quot;glossary&quot;));
<a name="l1446"><span class="linenum">1446</span></a>          <a class="var it4855" onMouseOver="hilite(4855)" onMouseOut="lolite()" onClick="logVariable('onlyvisible')" href="../../_variables/onlyvisible.html">$onlyvisible</a> = &quot; AND g.id = cm.instance AND cm.visible = 1 AND cm.module = <a class="var it12600" onMouseOver="hilite(12600)" onMouseOut="lolite()" onClick="logVariable('glossarymodule')" href="../../_variables/glossarymodule.html">$glossarymodule</a>-&gt;<a onClick="logVariable('id')" class="var it44551" onMouseOver="hilite(44551)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&quot;;
<a name="l1447"><span class="linenum">1447</span></a>          <a class="var it12601" onMouseOver="hilite(12601)" onMouseOut="lolite()" onClick="logVariable('onlyvisibletable')" href="../../_variables/onlyvisibletable.html">$onlyvisibletable</a> = &quot;, {course_modules} cm&quot;;
<a name="l1448"><span class="linenum">1448</span></a>      } else {
<a name="l1449"><span class="linenum">1449</span></a>  
<a name="l1450"><span class="linenum">1450</span></a>          <a class="var it4855" onMouseOver="hilite(4855)" onMouseOut="lolite()" onClick="logVariable('onlyvisible')" href="../../_variables/onlyvisible.html">$onlyvisible</a> = &quot;&quot;;
<a name="l1451"><span class="linenum">1451</span></a>          <a class="var it12601" onMouseOver="hilite(12601)" onMouseOut="lolite()" onClick="logVariable('onlyvisibletable')" href="../../_variables/onlyvisibletable.html">$onlyvisibletable</a> = &quot;&quot;;
<a name="l1452"><span class="linenum">1452</span></a>      }
<a name="l1453"><span class="linenum">1453</span></a>  
<a name="l1454"><span class="linenum">1454</span></a>      if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_regex_supported')" href="../../_functions/sql_regex_supported.html" onMouseOver="funcPopup(event,'sql_regex_supported')">sql_regex_supported</a>()) {
<a name="l1455"><span class="linenum">1455</span></a>          <a class="var it12602" onMouseOver="hilite(12602)" onMouseOut="lolite()" onClick="logVariable('REGEXP')" href="../../_variables/REGEXP.html">$REGEXP</a>    = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_regex')" href="../../_functions/sql_regex.html" onMouseOver="funcPopup(event,'sql_regex')">sql_regex</a>(true);
<a name="l1456"><span class="linenum">1456</span></a>          <a class="var it12603" onMouseOver="hilite(12603)" onMouseOut="lolite()" onClick="logVariable('NOTREGEXP')" href="../../_variables/NOTREGEXP.html">$NOTREGEXP</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_regex')" href="../../_functions/sql_regex.html" onMouseOver="funcPopup(event,'sql_regex')">sql_regex</a>(false);
<a name="l1457"><span class="linenum">1457</span></a>      }
<a name="l1458"><span class="linenum">1458</span></a>  
<a name="l1459"><span class="linenum">1459</span></a>      <a class="var it12604" onMouseOver="hilite(12604)" onMouseOut="lolite()" onClick="logVariable('searchcond')" href="../../_variables/searchcond.html">$searchcond</a> = array();
<a name="l1460"><span class="linenum">1460</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>     = array();
<a name="l1461"><span class="linenum">1461</span></a>      <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0;
<a name="l1462"><span class="linenum">1462</span></a>  
<a name="l1463"><span class="linenum">1463</span></a>      <a class="var it12605" onMouseOver="hilite(12605)" onMouseOut="lolite()" onClick="logVariable('concat')" href="../../_variables/concat.html">$concat</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_concat')" href="../../_functions/sql_concat.html" onMouseOver="funcPopup(event,'sql_concat')">sql_concat</a>('e.concept', &quot;' '&quot;, 'e.definition');
<a name="l1464"><span class="linenum">1464</span></a>  
<a name="l1465"><span class="linenum">1465</span></a>  
<a name="l1466"><span class="linenum">1466</span></a>      foreach (<a class="var it7884" onMouseOver="hilite(7884)" onMouseOut="lolite()" onClick="logVariable('searchterms')" href="../../_variables/searchterms.html">$searchterms</a> as <a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>) {
<a name="l1467"><span class="linenum">1467</span></a>          <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++;
<a name="l1468"><span class="linenum">1468</span></a>  
<a name="l1469"><span class="linenum">1469</span></a>          <a class="var it12606" onMouseOver="hilite(12606)" onMouseOut="lolite()" onClick="logVariable('NOT')" href="../../_variables/NOT.html">$NOT</a> = false; <span class="comment">/// Initially we aren't going to perform NOT LIKE searches, only MSSQL and Oracle</span>
<a name="l1470"><span class="linenum">1470</span></a>  <span class="comment">                   /// will use it to simulate the &quot;-&quot; operator with LIKE clause</span>
<a name="l1471"><span class="linenum">1471</span></a>  
<a name="l1472"><span class="linenum">1472</span></a>  <span class="comment">    /// Under Oracle and MSSQL, trim the + and - operators and perform</span>
<a name="l1473"><span class="linenum">1473</span></a>  <span class="comment">    /// simpler LIKE (or NOT LIKE) queries</span>
<a name="l1474"><span class="linenum">1474</span></a>          if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_regex_supported')" href="../../_functions/sql_regex_supported.html" onMouseOver="funcPopup(event,'sql_regex_supported')">sql_regex_supported</a>()) {
<a name="l1475"><span class="linenum">1475</span></a>              if (<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, 0, 1) == '-') {
<a name="l1476"><span class="linenum">1476</span></a>                  <a class="var it12606" onMouseOver="hilite(12606)" onMouseOut="lolite()" onClick="logVariable('NOT')" href="../../_variables/NOT.html">$NOT</a> = true;
<a name="l1477"><span class="linenum">1477</span></a>              }
<a name="l1478"><span class="linenum">1478</span></a>              <a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, '+-');
<a name="l1479"><span class="linenum">1479</span></a>          }
<a name="l1480"><span class="linenum">1480</span></a>  
<a name="l1481"><span class="linenum">1481</span></a>  <span class="comment">        // TODO: +- may not work for non latin languages</span>
<a name="l1482"><span class="linenum">1482</span></a>  
<a name="l1483"><span class="linenum">1483</span></a>          if (<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>,0,1) == '+') {
<a name="l1484"><span class="linenum">1484</span></a>              <a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, '+-');
<a name="l1485"><span class="linenum">1485</span></a>              <a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a> = <a class="phpfunction" onClick="logFunction('preg_quote')" href="../../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, '|');
<a name="l1486"><span class="linenum">1486</span></a>              <a class="var it12604" onMouseOver="hilite(12604)" onMouseOut="lolite()" onClick="logVariable('searchcond')" href="../../_variables/searchcond.html">$searchcond</a>[] = &quot;<a class="var it12605" onMouseOver="hilite(12605)" onMouseOut="lolite()" onClick="logVariable('concat')" href="../../_variables/concat.html">$concat</a> <a class="var it12602" onMouseOver="hilite(12602)" onMouseOut="lolite()" onClick="logVariable('REGEXP')" href="../../_variables/REGEXP.html">$REGEXP</a> :ss<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&quot;;
<a name="l1487"><span class="linenum">1487</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['ss'.<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = &quot;(^|[^a-zA-Z0-9])<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>([^a-zA-Z0-9]|$)&quot;;
<a name="l1488"><span class="linenum">1488</span></a>  
<a name="l1489"><span class="linenum">1489</span></a>          } else if (<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>,0,1) == &quot;-&quot;) {
<a name="l1490"><span class="linenum">1490</span></a>              <a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, '+-');
<a name="l1491"><span class="linenum">1491</span></a>              <a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a> = <a class="phpfunction" onClick="logFunction('preg_quote')" href="../../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, '|');
<a name="l1492"><span class="linenum">1492</span></a>              <a class="var it12604" onMouseOver="hilite(12604)" onMouseOut="lolite()" onClick="logVariable('searchcond')" href="../../_variables/searchcond.html">$searchcond</a>[] = &quot;<a class="var it12605" onMouseOver="hilite(12605)" onMouseOut="lolite()" onClick="logVariable('concat')" href="../../_variables/concat.html">$concat</a> <a class="var it12603" onMouseOver="hilite(12603)" onMouseOut="lolite()" onClick="logVariable('NOTREGEXP')" href="../../_variables/NOTREGEXP.html">$NOTREGEXP</a> :ss<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&quot;;
<a name="l1493"><span class="linenum">1493</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['ss'.<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = &quot;(^|[^a-zA-Z0-9])<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>([^a-zA-Z0-9]|$)&quot;;
<a name="l1494"><span class="linenum">1494</span></a>  
<a name="l1495"><span class="linenum">1495</span></a>          } else {
<a name="l1496"><span class="linenum">1496</span></a>              <a class="var it12604" onMouseOver="hilite(12604)" onMouseOut="lolite()" onClick="logVariable('searchcond')" href="../../_variables/searchcond.html">$searchcond</a>[] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_like')" href="../../_functions/sql_like.html" onMouseOver="funcPopup(event,'sql_like')">sql_like</a>(<a class="var it12605" onMouseOver="hilite(12605)" onMouseOut="lolite()" onClick="logVariable('concat')" href="../../_variables/concat.html">$concat</a>, &quot;:ss<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>&quot;, false, true, <a class="var it12606" onMouseOver="hilite(12606)" onMouseOut="lolite()" onClick="logVariable('NOT')" href="../../_variables/NOT.html">$NOT</a>);
<a name="l1497"><span class="linenum">1497</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['ss'.<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = &quot;%<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>%&quot;;
<a name="l1498"><span class="linenum">1498</span></a>          }
<a name="l1499"><span class="linenum">1499</span></a>      }
<a name="l1500"><span class="linenum">1500</span></a>  
<a name="l1501"><span class="linenum">1501</span></a>      if (empty(<a class="var it12604" onMouseOver="hilite(12604)" onMouseOut="lolite()" onClick="logVariable('searchcond')" href="../../_variables/searchcond.html">$searchcond</a>)) {
<a name="l1502"><span class="linenum">1502</span></a>          <a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../../_variables/totalcount.html">$totalcount</a> = 0;
<a name="l1503"><span class="linenum">1503</span></a>          return array();
<a name="l1504"><span class="linenum">1504</span></a>      }
<a name="l1505"><span class="linenum">1505</span></a>  
<a name="l1506"><span class="linenum">1506</span></a>      <a class="var it12604" onMouseOver="hilite(12604)" onMouseOut="lolite()" onClick="logVariable('searchcond')" href="../../_variables/searchcond.html">$searchcond</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(&quot; AND &quot;, <a class="var it12604" onMouseOver="hilite(12604)" onMouseOut="lolite()" onClick="logVariable('searchcond')" href="../../_variables/searchcond.html">$searchcond</a>);
<a name="l1507"><span class="linenum">1507</span></a>  
<a name="l1508"><span class="linenum">1508</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT e.*
<a name="l1509"><span class="linenum">1509</span></a>                FROM {glossary_entries} e, {glossary} g <a class="var it12601" onMouseOver="hilite(12601)" onMouseOut="lolite()" onClick="logVariable('onlyvisibletable')" href="../../_variables/onlyvisibletable.html">$onlyvisibletable</a>
<a name="l1510"><span class="linenum">1510</span></a>               WHERE <a class="var it12604" onMouseOver="hilite(12604)" onMouseOut="lolite()" onClick="logVariable('searchcond')" href="../../_variables/searchcond.html">$searchcond</a>
<a name="l1511"><span class="linenum">1511</span></a>                 AND (e.glossaryid = g.id or e.sourceglossaryid = g.id) <a class="var it4855" onMouseOver="hilite(4855)" onMouseOut="lolite()" onClick="logVariable('onlyvisible')" href="../../_variables/onlyvisible.html">$onlyvisible</a>
<a name="l1512"><span class="linenum">1512</span></a>                 AND g.id IN (<a class="var it12599" onMouseOver="hilite(12599)" onMouseOut="lolite()" onClick="logVariable('glos')" href="../../_variables/glos.html">$glos</a>) AND e.approved &lt;&gt; 0&quot;;
<a name="l1513"><span class="linenum">1513</span></a>  
<a name="l1514"><span class="linenum">1514</span></a>      return <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l1515"><span class="linenum">1515</span></a>  }
<a name="l1516"><span class="linenum">1516</span></a>  
<a name="l1517"><span class="linenum">1517</span></a>  <span class="comment">/**</span>
<a name="l1518"><span class="linenum">1518</span></a>  <span class="comment"> * @global object</span>
<a name="l1519"><span class="linenum">1519</span></a>  <span class="comment"> * @param array $searchterms</span>
<a name="l1520"><span class="linenum">1520</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1521"><span class="linenum">1521</span></a>  <span class="comment"> * @param bool $extended</span>
<a name="l1522"><span class="linenum">1522</span></a>  <span class="comment"> * @return array</span>
<a name="l1523"><span class="linenum">1523</span></a>  <span class="comment"> */</span>
<a name="l1524"><span class="linenum">1524</span></a>  function <a class="function" onClick="logFunction('glossary_search_entries')" href="../../_functions/glossary_search_entries.html" onMouseOver="funcPopup(event,'glossary_search_entries')">glossary_search_entries</a>(<a class="var it7884" onMouseOver="hilite(7884)" onMouseOut="lolite()" onClick="logVariable('searchterms')" href="../../_variables/searchterms.html">$searchterms</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it12598" onMouseOver="hilite(12598)" onMouseOut="lolite()" onClick="logVariable('extended')" href="../../_variables/extended.html">$extended</a>) {
<a name="l1525"><span class="linenum">1525</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1526"><span class="linenum">1526</span></a>  
<a name="l1527"><span class="linenum">1527</span></a>      <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;course&quot;, array(&quot;id&quot;=&gt;<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('course')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>));
<a name="l1528"><span class="linenum">1528</span></a>      return <a class="function" onClick="logFunction('glossary_search')" href="../../_functions/glossary_search.html" onMouseOver="funcPopup(event,'glossary_search')">glossary_search</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>,<a class="var it7884" onMouseOver="hilite(7884)" onMouseOut="lolite()" onClick="logVariable('searchterms')" href="../../_variables/searchterms.html">$searchterms</a>,<a class="var it12598" onMouseOver="hilite(12598)" onMouseOut="lolite()" onClick="logVariable('extended')" href="../../_variables/extended.html">$extended</a>,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l1529"><span class="linenum">1529</span></a>  }
<a name="l1530"><span class="linenum">1530</span></a>  
<a name="l1531"><span class="linenum">1531</span></a>  <span class="comment">/**</span>
<a name="l1532"><span class="linenum">1532</span></a>  <span class="comment"> * if return=html, then return a html string.</span>
<a name="l1533"><span class="linenum">1533</span></a>  <span class="comment"> * if return=text, then return a text-only string.</span>
<a name="l1534"><span class="linenum">1534</span></a>  <span class="comment"> * otherwise, print HTML for non-images, and return image HTML</span>
<a name="l1535"><span class="linenum">1535</span></a>  <span class="comment"> *     if attachment is an image, $align set its aligment.</span>
<a name="l1536"><span class="linenum">1536</span></a>  <span class="comment"> *</span>
<a name="l1537"><span class="linenum">1537</span></a>  <span class="comment"> * @global object</span>
<a name="l1538"><span class="linenum">1538</span></a>  <span class="comment"> * @global object</span>
<a name="l1539"><span class="linenum">1539</span></a>  <span class="comment"> * @param object $entry</span>
<a name="l1540"><span class="linenum">1540</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1541"><span class="linenum">1541</span></a>  <span class="comment"> * @param string $type html, txt, empty</span>
<a name="l1542"><span class="linenum">1542</span></a>  <span class="comment"> * @param string $unused This parameter is no longer used</span>
<a name="l1543"><span class="linenum">1543</span></a>  <span class="comment"> * @return string image string or nothing depending on $type param</span>
<a name="l1544"><span class="linenum">1544</span></a>  <span class="comment"> */</span>
<a name="l1545"><span class="linenum">1545</span></a>  function <a class="function" onClick="logFunction('glossary_print_attachments')" href="../../_functions/glossary_print_attachments.html" onMouseOver="funcPopup(event,'glossary_print_attachments')">glossary_print_attachments</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>=NULL, <a class="var it1292" onMouseOver="hilite(1292)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../../_variables/unused.html">$unused</a> = null) {
<a name="l1546"><span class="linenum">1546</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1547"><span class="linenum">1547</span></a>  
<a name="l1548"><span class="linenum">1548</span></a>      if (!<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="constant" onClick="logConstant('IGNORE_MISSING')" href="../../_constants/IGNORE_MISSING.html" onMouseOver="constPopup(event,'IGNORE_MISSING')">IGNORE_MISSING</a>)) {
<a name="l1549"><span class="linenum">1549</span></a>          return '';
<a name="l1550"><span class="linenum">1550</span></a>      }
<a name="l1551"><span class="linenum">1551</span></a>  
<a name="l1552"><span class="linenum">1552</span></a>      if (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('sourceglossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/sourceglossaryid.html">sourceglossaryid</a> == <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>) {
<a name="l1553"><span class="linenum">1553</span></a>          if (!<a class="var it12593" onMouseOver="hilite(12593)" onMouseOut="lolite()" onClick="logVariable('maincm')" href="../../_variables/maincm.html">$maincm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>)) {
<a name="l1554"><span class="linenum">1554</span></a>              return '';
<a name="l1555"><span class="linenum">1555</span></a>          }
<a name="l1556"><span class="linenum">1556</span></a>          <a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it12593" onMouseOver="hilite(12593)" onMouseOut="lolite()" onClick="logVariable('maincm')" href="../../_variables/maincm.html">$maincm</a>-&gt;<a onClick="logVariable('id')" class="var it44542" onMouseOver="hilite(44542)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1557"><span class="linenum">1557</span></a>  
<a name="l1558"><span class="linenum">1558</span></a>      } else {
<a name="l1559"><span class="linenum">1559</span></a>          <a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l1560"><span class="linenum">1560</span></a>      }
<a name="l1561"><span class="linenum">1561</span></a>  
<a name="l1562"><span class="linenum">1562</span></a>      <a class="var it12607" onMouseOver="hilite(12607)" onMouseOut="lolite()" onClick="logVariable('strattachment')" href="../../_variables/strattachment.html">$strattachment</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('attachment', 'glossary');
<a name="l1563"><span class="linenum">1563</span></a>  
<a name="l1564"><span class="linenum">1564</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1565"><span class="linenum">1565</span></a>  
<a name="l1566"><span class="linenum">1566</span></a>      <a class="var it12608" onMouseOver="hilite(12608)" onMouseOut="lolite()" onClick="logVariable('imagereturn')" href="../../_variables/imagereturn.html">$imagereturn</a> = '';
<a name="l1567"><span class="linenum">1567</span></a>      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> = '';
<a name="l1568"><span class="linenum">1568</span></a>  
<a name="l1569"><span class="linenum">1569</span></a>      if (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(<a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a>-&gt;<a onClick="logVariable('id')" class="var it43672" onMouseOver="hilite(43672)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', 'attachment', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;timemodified&quot;, false)) {
<a name="l1570"><span class="linenum">1570</span></a>          foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l1571"><span class="linenum">1571</span></a>              <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>();
<a name="l1572"><span class="linenum">1572</span></a>              <a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a> = <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_mimetype')" href="../../_functions/get_mimetype.html" onMouseOver="funcPopup(event,'get_mimetype')">get_mimetype</a>();
<a name="l1573"><span class="linenum">1573</span></a>              <a class="var it12609" onMouseOver="hilite(12609)" onMouseOut="lolite()" onClick="logVariable('iconimage')" href="../../_variables/iconimage.html">$iconimage</a> = <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_icon')" href="../../_functions/pix_icon.html" onMouseOver="funcPopup(event,'pix_icon')">pix_icon</a>(<a class="function" onClick="logFunction('file_file_icon')" href="../../_functions/file_file_icon.html" onMouseOver="funcPopup(event,'file_file_icon')">file_file_icon</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>), <a class="function" onClick="logFunction('get_mimetype_description')" href="../../_functions/get_mimetype_description.html" onMouseOver="funcPopup(event,'get_mimetype_description')">get_mimetype_description</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>), 'moodle', array('class' =&gt; 'icon'));
<a name="l1574"><span class="linenum">1574</span></a>              <a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a> = <a class="function" onClick="logFunction('file_encode_url')" href="../../_functions/file_encode_url.html" onMouseOver="funcPopup(event,'file_encode_url')">file_encode_url</a>(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'<a class="filename" href="../../pluginfile.php.html">/pluginfile.php</a>', '/'.<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'/mod_glossary/attachment/'.<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>.'/'.<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>);
<a name="l1575"><span class="linenum">1575</span></a>  
<a name="l1576"><span class="linenum">1576</span></a>              if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> == 'html') {
<a name="l1577"><span class="linenum">1577</span></a>                  <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= &quot;&lt;a href=\&quot;<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>\&quot;&gt;<a class="var it12609" onMouseOver="hilite(12609)" onMouseOut="lolite()" onClick="logVariable('iconimage')" href="../../_variables/iconimage.html">$iconimage</a>&lt;/a&gt; &quot;;
<a name="l1578"><span class="linenum">1578</span></a>                  <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= &quot;&lt;a href=\&quot;<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>\&quot;&gt;&quot;.<a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>).&quot;&lt;/a&gt;&quot;;
<a name="l1579"><span class="linenum">1579</span></a>                  <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= &quot;&lt;br /&gt;&quot;;
<a name="l1580"><span class="linenum">1580</span></a>  
<a name="l1581"><span class="linenum">1581</span></a>              } else if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> == 'text') {
<a name="l1582"><span class="linenum">1582</span></a>                  <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= &quot;<a class="var it12607" onMouseOver="hilite(12607)" onMouseOut="lolite()" onClick="logVariable('strattachment')" href="../../_variables/strattachment.html">$strattachment</a> &quot;.<a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>).&quot;:\n<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>\n&quot;;
<a name="l1583"><span class="linenum">1583</span></a>  
<a name="l1584"><span class="linenum">1584</span></a>              } else {
<a name="l1585"><span class="linenum">1585</span></a>                  if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>(<a class="var it3340" onMouseOver="hilite(3340)" onMouseOut="lolite()" onClick="logVariable('mimetype')" href="../../_variables/mimetype.html">$mimetype</a>, array('image/gif', 'image/jpeg', 'image/png'))) {
<a name="l1586"><span class="linenum">1586</span></a>  <span class="comment">                    // Image attachments don't get printed as links</span>
<a name="l1587"><span class="linenum">1587</span></a>                      <a class="var it12608" onMouseOver="hilite(12608)" onMouseOut="lolite()" onClick="logVariable('imagereturn')" href="../../_variables/imagereturn.html">$imagereturn</a> .= &quot;&lt;br /&gt;&lt;img src=\&quot;<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>\&quot; alt=\&quot;\&quot; /&gt;&quot;;
<a name="l1588"><span class="linenum">1588</span></a>                  } else {
<a name="l1589"><span class="linenum">1589</span></a>                      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= &quot;&lt;a href=\&quot;<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>\&quot;&gt;<a class="var it12609" onMouseOver="hilite(12609)" onMouseOut="lolite()" onClick="logVariable('iconimage')" href="../../_variables/iconimage.html">$iconimage</a>&lt;/a&gt; &quot;;
<a name="l1590"><span class="linenum">1590</span></a>                      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= <a class="function" onClick="logFunction('format_text')" href="../../_functions/format_text.html" onMouseOver="funcPopup(event,'format_text')">format_text</a>(&quot;&lt;a href=\&quot;<a class="var it240" onMouseOver="hilite(240)" onMouseOut="lolite()" onClick="logVariable('path')" href="../../_variables/path.html">$path</a>\&quot;&gt;&quot;.<a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>).&quot;&lt;/a&gt;&quot;, <a class="constant" onClick="logConstant('FORMAT_HTML')" href="../../_constants/FORMAT_HTML.html" onMouseOver="constPopup(event,'FORMAT_HTML')">FORMAT_HTML</a>, array('context'=&gt;<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>));
<a name="l1591"><span class="linenum">1591</span></a>                      <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a> .= '&lt;br /&gt;';
<a name="l1592"><span class="linenum">1592</span></a>                  }
<a name="l1593"><span class="linenum">1593</span></a>              }
<a name="l1594"><span class="linenum">1594</span></a>          }
<a name="l1595"><span class="linenum">1595</span></a>      }
<a name="l1596"><span class="linenum">1596</span></a>  
<a name="l1597"><span class="linenum">1597</span></a>      if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l1598"><span class="linenum">1598</span></a>          return <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>;
<a name="l1599"><span class="linenum">1599</span></a>      } else {
<a name="l1600"><span class="linenum">1600</span></a>          echo <a class="var it29" onMouseOver="hilite(29)" onMouseOut="lolite()" onClick="logVariable('output')" href="../../_variables/output.html">$output</a>;
<a name="l1601"><span class="linenum">1601</span></a>          return <a class="var it12608" onMouseOver="hilite(12608)" onMouseOut="lolite()" onClick="logVariable('imagereturn')" href="../../_variables/imagereturn.html">$imagereturn</a>;
<a name="l1602"><span class="linenum">1602</span></a>      }
<a name="l1603"><span class="linenum">1603</span></a>  }
<a name="l1604"><span class="linenum">1604</span></a>  
<a name="l1605"><span class="linenum">1605</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l1606"><span class="linenum">1606</span></a>  <span class="comment">// File API                                                                   //</span>
<a name="l1607"><span class="linenum">1607</span></a>  <span class="comment">////////////////////////////////////////////////////////////////////////////////</span>
<a name="l1608"><span class="linenum">1608</span></a>  
<a name="l1609"><span class="linenum">1609</span></a>  <span class="comment">/**</span>
<a name="l1610"><span class="linenum">1610</span></a>  <span class="comment"> * Lists all browsable file areas</span>
<a name="l1611"><span class="linenum">1611</span></a>  <span class="comment"> *</span>
<a name="l1612"><span class="linenum">1612</span></a>  <span class="comment"> * @package  mod_glossary</span>
<a name="l1613"><span class="linenum">1613</span></a>  <span class="comment"> * @category files</span>
<a name="l1614"><span class="linenum">1614</span></a>  <span class="comment"> * @param stdClass $course course object</span>
<a name="l1615"><span class="linenum">1615</span></a>  <span class="comment"> * @param stdClass $cm course module object</span>
<a name="l1616"><span class="linenum">1616</span></a>  <span class="comment"> * @param stdClass $context context object</span>
<a name="l1617"><span class="linenum">1617</span></a>  <span class="comment"> * @return array</span>
<a name="l1618"><span class="linenum">1618</span></a>  <span class="comment"> */</span>
<a name="l1619"><span class="linenum">1619</span></a>  function <a class="function" onClick="logFunction('glossary_get_file_areas')" href="../../_functions/glossary_get_file_areas.html" onMouseOver="funcPopup(event,'glossary_get_file_areas')">glossary_get_file_areas</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l1620"><span class="linenum">1620</span></a>      return array(
<a name="l1621"><span class="linenum">1621</span></a>          'attachment' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('areaattachment', 'mod_glossary'),
<a name="l1622"><span class="linenum">1622</span></a>          'entry' =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('areaentry', 'mod_glossary'),
<a name="l1623"><span class="linenum">1623</span></a>      );
<a name="l1624"><span class="linenum">1624</span></a>  }
<a name="l1625"><span class="linenum">1625</span></a>  
<a name="l1626"><span class="linenum">1626</span></a>  <span class="comment">/**</span>
<a name="l1627"><span class="linenum">1627</span></a>  <span class="comment"> * File browsing support for glossary module.</span>
<a name="l1628"><span class="linenum">1628</span></a>  <span class="comment"> *</span>
<a name="l1629"><span class="linenum">1629</span></a>  <span class="comment"> * @param file_browser $browser</span>
<a name="l1630"><span class="linenum">1630</span></a>  <span class="comment"> * @param array $areas</span>
<a name="l1631"><span class="linenum">1631</span></a>  <span class="comment"> * @param stdClass $course</span>
<a name="l1632"><span class="linenum">1632</span></a>  <span class="comment"> * @param cm_info $cm</span>
<a name="l1633"><span class="linenum">1633</span></a>  <span class="comment"> * @param context $context</span>
<a name="l1634"><span class="linenum">1634</span></a>  <span class="comment"> * @param string $filearea</span>
<a name="l1635"><span class="linenum">1635</span></a>  <span class="comment"> * @param int $itemid</span>
<a name="l1636"><span class="linenum">1636</span></a>  <span class="comment"> * @param string $filepath</span>
<a name="l1637"><span class="linenum">1637</span></a>  <span class="comment"> * @param string $filename</span>
<a name="l1638"><span class="linenum">1638</span></a>  <span class="comment"> * @return file_info_stored file_info_stored instance or null if not found</span>
<a name="l1639"><span class="linenum">1639</span></a>  <span class="comment"> */</span>
<a name="l1640"><span class="linenum">1640</span></a>  function <a class="function" onClick="logFunction('glossary_get_file_info')" href="../../_functions/glossary_get_file_info.html" onMouseOver="funcPopup(event,'glossary_get_file_info')">glossary_get_file_info</a>(<a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) {
<a name="l1641"><span class="linenum">1641</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l1642"><span class="linenum">1642</span></a>  
<a name="l1643"><span class="linenum">1643</span></a>      if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/contextlevel.html">contextlevel</a> != <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l1644"><span class="linenum">1644</span></a>          return null;
<a name="l1645"><span class="linenum">1645</span></a>      }
<a name="l1646"><span class="linenum">1646</span></a>  
<a name="l1647"><span class="linenum">1647</span></a>      if (!isset(<a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>[<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>])) {
<a name="l1648"><span class="linenum">1648</span></a>          return null;
<a name="l1649"><span class="linenum">1649</span></a>      }
<a name="l1650"><span class="linenum">1650</span></a>  
<a name="l1651"><span class="linenum">1651</span></a>      if (<a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>)) {
<a name="l1652"><span class="linenum">1652</span></a>          require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../mod/glossary/locallib.php.html">/mod/glossary/locallib.php</a>');
<a name="l1653"><span class="linenum">1653</span></a>          return <span class="keyword">new </span><a class="class" onClick="logClass('glossary_file_info_container')" href="../../_classes/glossary_file_info_container.html" onMouseOver="classPopup(event,'glossary_file_info_container')">glossary_file_info_container</a>(<a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it2274" onMouseOver="hilite(2274)" onMouseOut="lolite()" onClick="logVariable('areas')" href="../../_variables/areas.html">$areas</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>);
<a name="l1654"><span class="linenum">1654</span></a>      }
<a name="l1655"><span class="linenum">1655</span></a>  
<a name="l1656"><span class="linenum">1656</span></a>      if (!<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary_entries', array('id' =&gt; <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>))) {
<a name="l1657"><span class="linenum">1657</span></a>          return null;
<a name="l1658"><span class="linenum">1658</span></a>      }
<a name="l1659"><span class="linenum">1659</span></a>  
<a name="l1660"><span class="linenum">1660</span></a>      if (!<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary', array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>))) {
<a name="l1661"><span class="linenum">1661</span></a>          return null;
<a name="l1662"><span class="linenum">1662</span></a>      }
<a name="l1663"><span class="linenum">1663</span></a>  
<a name="l1664"><span class="linenum">1664</span></a>      if (<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('defaultapproval')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/defaultapproval.html">defaultapproval</a> and !<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('approved')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1665"><span class="linenum">1665</span></a>          return null;
<a name="l1666"><span class="linenum">1666</span></a>      }
<a name="l1667"><span class="linenum">1667</span></a>  
<a name="l1668"><span class="linenum">1668</span></a>  <span class="comment">    // this trickery here is because we need to support source glossary access</span>
<a name="l1669"><span class="linenum">1669</span></a>      if (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a> == <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>) {
<a name="l1670"><span class="linenum">1670</span></a>          <a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l1671"><span class="linenum">1671</span></a>      } else if (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('sourceglossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/sourceglossaryid.html">sourceglossaryid</a> == <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>) {
<a name="l1672"><span class="linenum">1672</span></a>          if (!<a class="var it12593" onMouseOver="hilite(12593)" onMouseOut="lolite()" onClick="logVariable('maincm')" href="../../_variables/maincm.html">$maincm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>)) {
<a name="l1673"><span class="linenum">1673</span></a>              return null;
<a name="l1674"><span class="linenum">1674</span></a>          }
<a name="l1675"><span class="linenum">1675</span></a>          <a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it12593" onMouseOver="hilite(12593)" onMouseOut="lolite()" onClick="logVariable('maincm')" href="../../_variables/maincm.html">$maincm</a>-&gt;<a onClick="logVariable('id')" class="var it44542" onMouseOver="hilite(44542)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1676"><span class="linenum">1676</span></a>      } else {
<a name="l1677"><span class="linenum">1677</span></a>          return null;
<a name="l1678"><span class="linenum">1678</span></a>      }
<a name="l1679"><span class="linenum">1679</span></a>  
<a name="l1680"><span class="linenum">1680</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1681"><span class="linenum">1681</span></a>      <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>) ? '/' : <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>;
<a name="l1682"><span class="linenum">1682</span></a>      <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="phpfunction" onClick="logFunction('is_null')" href="../../_functions/is_null.html" onMouseOver="phpfuncPopup(event,'is_null')">is_null</a>(<a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>) ? '.' : <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>;
<a name="l1683"><span class="linenum">1683</span></a>      if (!(<a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file')" href="../../_functions/get_file.html" onMouseOver="funcPopup(event,'get_file')">get_file</a>(<a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a>-&gt;<a onClick="logVariable('id')" class="var it43672" onMouseOver="hilite(43672)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, <a class="var it886" onMouseOver="hilite(886)" onMouseOut="lolite()" onClick="logVariable('filepath')" href="../../_variables/filepath.html">$filepath</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>))) {
<a name="l1684"><span class="linenum">1684</span></a>          return null;
<a name="l1685"><span class="linenum">1685</span></a>      }
<a name="l1686"><span class="linenum">1686</span></a>  
<a name="l1687"><span class="linenum">1687</span></a>  <span class="comment">    // Checks to see if the user can manage files or is the owner.</span>
<a name="l1688"><span class="linenum">1688</span></a>  <span class="comment">    // TODO MDL-33805 - Do not use userid here and move the capability check above.</span>
<a name="l1689"><span class="linenum">1689</span></a>      if (!<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('moodle/course:managefiles', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) &amp;&amp; <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a>-&gt;<a class="function" onClick="logFunction('get_userid')" href="../../_functions/get_userid.html" onMouseOver="funcPopup(event,'get_userid')">get_userid</a>() != <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l1690"><span class="linenum">1690</span></a>          return null;
<a name="l1691"><span class="linenum">1691</span></a>      }
<a name="l1692"><span class="linenum">1692</span></a>  
<a name="l1693"><span class="linenum">1693</span></a>      <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../_variables/urlbase.html">$urlbase</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>.'<a class="filename" href="../../pluginfile.php.html">/pluginfile.php</a>';
<a name="l1694"><span class="linenum">1694</span></a>  
<a name="l1695"><span class="linenum">1695</span></a>      return <span class="keyword">new </span><a class="class" onClick="logClass('file_info_stored')" href="../../_classes/file_info_stored.html" onMouseOver="classPopup(event,'file_info_stored')">file_info_stored</a>(<a class="var it1462" onMouseOver="hilite(1462)" onMouseOut="lolite()" onClick="logVariable('browser')" href="../../_variables/browser.html">$browser</a>, <a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a>, <a class="var it2275" onMouseOver="hilite(2275)" onMouseOut="lolite()" onClick="logVariable('storedfile')" href="../../_variables/storedfile.html">$storedfile</a>, <a class="var it2276" onMouseOver="hilite(2276)" onMouseOut="lolite()" onClick="logVariable('urlbase')" href="../../_variables/urlbase.html">$urlbase</a>, <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('concept')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>), true, true, false, false);
<a name="l1696"><span class="linenum">1696</span></a>  }
<a name="l1697"><span class="linenum">1697</span></a>  
<a name="l1698"><span class="linenum">1698</span></a>  <span class="comment">/**</span>
<a name="l1699"><span class="linenum">1699</span></a>  <span class="comment"> * Serves the glossary attachments. Implements needed access control ;-)</span>
<a name="l1700"><span class="linenum">1700</span></a>  <span class="comment"> *</span>
<a name="l1701"><span class="linenum">1701</span></a>  <span class="comment"> * @package  mod_glossary</span>
<a name="l1702"><span class="linenum">1702</span></a>  <span class="comment"> * @category files</span>
<a name="l1703"><span class="linenum">1703</span></a>  <span class="comment"> * @param stdClass $course course object</span>
<a name="l1704"><span class="linenum">1704</span></a>  <span class="comment"> * @param stdClass $cm course module object</span>
<a name="l1705"><span class="linenum">1705</span></a>  <span class="comment"> * @param stdClsss $context context object</span>
<a name="l1706"><span class="linenum">1706</span></a>  <span class="comment"> * @param string $filearea file area</span>
<a name="l1707"><span class="linenum">1707</span></a>  <span class="comment"> * @param array $args extra arguments</span>
<a name="l1708"><span class="linenum">1708</span></a>  <span class="comment"> * @param bool $forcedownload whether or not force download</span>
<a name="l1709"><span class="linenum">1709</span></a>  <span class="comment"> * @param array $options additional options affecting the file serving</span>
<a name="l1710"><span class="linenum">1710</span></a>  <span class="comment"> * @return bool false if file not found, does not return if found - justsend the file</span>
<a name="l1711"><span class="linenum">1711</span></a>  <span class="comment"> */</span>
<a name="l1712"><span class="linenum">1712</span></a>  function <a class="function" onClick="logFunction('glossary_pluginfile')" href="../../_functions/glossary_pluginfile.html" onMouseOver="funcPopup(event,'glossary_pluginfile')">glossary_pluginfile</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>, <a class="var it26" onMouseOver="hilite(26)" onMouseOut="lolite()" onClick="logVariable('forcedownload')" href="../../_variables/forcedownload.html">$forcedownload</a>, array <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>=array()) {
<a name="l1713"><span class="linenum">1713</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l1714"><span class="linenum">1714</span></a>  
<a name="l1715"><span class="linenum">1715</span></a>      if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('contextlevel')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/contextlevel.html">contextlevel</a> != <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>) {
<a name="l1716"><span class="linenum">1716</span></a>          return false;
<a name="l1717"><span class="linenum">1717</span></a>      }
<a name="l1718"><span class="linenum">1718</span></a>  
<a name="l1719"><span class="linenum">1719</span></a>      <a class="function" onClick="logFunction('require_course_login')" href="../../_functions/require_course_login.html" onMouseOver="funcPopup(event,'require_course_login')">require_course_login</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, true, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l1720"><span class="linenum">1720</span></a>  
<a name="l1721"><span class="linenum">1721</span></a>      if (<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'attachment' or <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'entry') {
<a name="l1722"><span class="linenum">1722</span></a>          <a class="var it8423" onMouseOver="hilite(8423)" onMouseOut="lolite()" onClick="logVariable('entryid')" href="../../_variables/entryid.html">$entryid</a> = (int)<a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1723"><span class="linenum">1723</span></a>  
<a name="l1724"><span class="linenum">1724</span></a>          <a class="function" onClick="logFunction('require_course_login')" href="../../_functions/require_course_login.html" onMouseOver="funcPopup(event,'require_course_login')">require_course_login</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, true, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l1725"><span class="linenum">1725</span></a>  
<a name="l1726"><span class="linenum">1726</span></a>          if (!<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary_entries', array('id'=&gt;<a class="var it8423" onMouseOver="hilite(8423)" onMouseOut="lolite()" onClick="logVariable('entryid')" href="../../_variables/entryid.html">$entryid</a>))) {
<a name="l1727"><span class="linenum">1727</span></a>              return false;
<a name="l1728"><span class="linenum">1728</span></a>          }
<a name="l1729"><span class="linenum">1729</span></a>  
<a name="l1730"><span class="linenum">1730</span></a>          if (!<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary', array('id'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>))) {
<a name="l1731"><span class="linenum">1731</span></a>              return false;
<a name="l1732"><span class="linenum">1732</span></a>          }
<a name="l1733"><span class="linenum">1733</span></a>  
<a name="l1734"><span class="linenum">1734</span></a>          if (<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('defaultapproval')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/defaultapproval.html">defaultapproval</a> and !<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('approved')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1735"><span class="linenum">1735</span></a>              return false;
<a name="l1736"><span class="linenum">1736</span></a>          }
<a name="l1737"><span class="linenum">1737</span></a>  
<a name="l1738"><span class="linenum">1738</span></a>  <span class="comment">        // this trickery here is because we need to support source glossary access</span>
<a name="l1739"><span class="linenum">1739</span></a>  
<a name="l1740"><span class="linenum">1740</span></a>          if (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a> == <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>) {
<a name="l1741"><span class="linenum">1741</span></a>              <a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>;
<a name="l1742"><span class="linenum">1742</span></a>  
<a name="l1743"><span class="linenum">1743</span></a>          } else if (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('sourceglossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/sourceglossaryid.html">sourceglossaryid</a> == <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>) {
<a name="l1744"><span class="linenum">1744</span></a>              if (!<a class="var it12593" onMouseOver="hilite(12593)" onMouseOut="lolite()" onClick="logVariable('maincm')" href="../../_variables/maincm.html">$maincm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>)) {
<a name="l1745"><span class="linenum">1745</span></a>                  return false;
<a name="l1746"><span class="linenum">1746</span></a>              }
<a name="l1747"><span class="linenum">1747</span></a>              <a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it12593" onMouseOver="hilite(12593)" onMouseOut="lolite()" onClick="logVariable('maincm')" href="../../_variables/maincm.html">$maincm</a>-&gt;<a onClick="logVariable('id')" class="var it44542" onMouseOver="hilite(44542)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1748"><span class="linenum">1748</span></a>  
<a name="l1749"><span class="linenum">1749</span></a>          } else {
<a name="l1750"><span class="linenum">1750</span></a>              return false;
<a name="l1751"><span class="linenum">1751</span></a>          }
<a name="l1752"><span class="linenum">1752</span></a>  
<a name="l1753"><span class="linenum">1753</span></a>          <a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('/', <a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1754"><span class="linenum">1754</span></a>          <a class="var it241" onMouseOver="hilite(241)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a> = &quot;/<a class="var it6038" onMouseOver="hilite(6038)" onMouseOut="lolite()" onClick="logVariable('filecontext')" href="../../_variables/filecontext.html">$filecontext</a>-&gt;<a onClick="logVariable('id')" class="var it43672" onMouseOver="hilite(43672)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>/mod_glossary/<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>/<a class="var it8423" onMouseOver="hilite(8423)" onMouseOut="lolite()" onClick="logVariable('entryid')" href="../../_variables/entryid.html">$entryid</a>/<a class="var it2277" onMouseOver="hilite(2277)" onMouseOut="lolite()" onClick="logVariable('relativepath')" href="../../_variables/relativepath.html">$relativepath</a>&quot;;
<a name="l1755"><span class="linenum">1755</span></a>  
<a name="l1756"><span class="linenum">1756</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l1757"><span class="linenum">1757</span></a>          if (!<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_file_by_hash')" href="../../_functions/get_file_by_hash.html" onMouseOver="funcPopup(event,'get_file_by_hash')">get_file_by_hash</a>(<a class="phpfunction" onClick="logFunction('sha1')" href="../../_functions/sha1.html" onMouseOver="phpfuncPopup(event,'sha1')">sha1</a>(<a class="var it241" onMouseOver="hilite(241)" onMouseOut="lolite()" onClick="logVariable('fullpath')" href="../../_variables/fullpath.html">$fullpath</a>)) or <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('is_directory')" href="../../_functions/is_directory.html" onMouseOver="funcPopup(event,'is_directory')">is_directory</a>()) {
<a name="l1758"><span class="linenum">1758</span></a>              return false;
<a name="l1759"><span class="linenum">1759</span></a>          }
<a name="l1760"><span class="linenum">1760</span></a>  
<a name="l1761"><span class="linenum">1761</span></a>  <span class="comment">        // finally send the file</span>
<a name="l1762"><span class="linenum">1762</span></a>          <a class="function" onClick="logFunction('send_stored_file')" href="../../_functions/send_stored_file.html" onMouseOver="funcPopup(event,'send_stored_file')">send_stored_file</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>, 0, 0, true, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>); <span class="comment">// download MUST be forced - security!</span>
<a name="l1763"><span class="linenum">1763</span></a>  
<a name="l1764"><span class="linenum">1764</span></a>      } else if (<a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a> === 'export') {
<a name="l1765"><span class="linenum">1765</span></a>          <a class="function" onClick="logFunction('require_login')" href="../../_functions/require_login.html" onMouseOver="funcPopup(event,'require_login')">require_login</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, false, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l1766"><span class="linenum">1766</span></a>          <a class="function" onClick="logFunction('require_capability')" href="../../_functions/require_capability.html" onMouseOver="funcPopup(event,'require_capability')">require_capability</a>('mod/glossary:export', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l1767"><span class="linenum">1767</span></a>  
<a name="l1768"><span class="linenum">1768</span></a>          if (!<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary', array('id'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>))) {
<a name="l1769"><span class="linenum">1769</span></a>              return false;
<a name="l1770"><span class="linenum">1770</span></a>          }
<a name="l1771"><span class="linenum">1771</span></a>  
<a name="l1772"><span class="linenum">1772</span></a>          <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../_variables/cat.html">$cat</a> = <a class="phpfunction" onClick="logFunction('array_shift')" href="../../_functions/array_shift.html" onMouseOver="phpfuncPopup(event,'array_shift')">array_shift</a>(<a class="var it25" onMouseOver="hilite(25)" onMouseOut="lolite()" onClick="logVariable('args')" href="../../_variables/args.html">$args</a>);
<a name="l1773"><span class="linenum">1773</span></a>          <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../_variables/cat.html">$cat</a> = <a class="function" onClick="logFunction('clean_param')" href="../../_functions/clean_param.html" onMouseOver="funcPopup(event,'clean_param')">clean_param</a>(<a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../_variables/cat.html">$cat</a>, <a class="constant" onClick="logConstant('PARAM_ALPHANUM')" href="../../_constants/PARAM_ALPHANUM.html" onMouseOver="constPopup(event,'PARAM_ALPHANUM')">PARAM_ALPHANUM</a>);
<a name="l1774"><span class="linenum">1774</span></a>  
<a name="l1775"><span class="linenum">1775</span></a>          <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a> = <a class="function" onClick="logFunction('clean_filename')" href="../../_functions/clean_filename.html" onMouseOver="funcPopup(event,'clean_filename')">clean_filename</a>(<a class="phpfunction" onClick="logFunction('strip_tags')" href="../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('name')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>)).'.xml');
<a name="l1776"><span class="linenum">1776</span></a>          <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> = <a class="function" onClick="logFunction('glossary_generate_export_file')" href="../../_functions/glossary_generate_export_file.html" onMouseOver="funcPopup(event,'glossary_generate_export_file')">glossary_generate_export_file</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, NULL, <a class="var it658" onMouseOver="hilite(658)" onMouseOut="lolite()" onClick="logVariable('cat')" href="../../_variables/cat.html">$cat</a>);
<a name="l1777"><span class="linenum">1777</span></a>  
<a name="l1778"><span class="linenum">1778</span></a>          <a class="function" onClick="logFunction('send_file')" href="../../_functions/send_file.html" onMouseOver="funcPopup(event,'send_file')">send_file</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>, <a class="var it243" onMouseOver="hilite(243)" onMouseOut="lolite()" onClick="logVariable('filename')" href="../../_variables/filename.html">$filename</a>, 0, 0, true, true);
<a name="l1779"><span class="linenum">1779</span></a>      }
<a name="l1780"><span class="linenum">1780</span></a>  
<a name="l1781"><span class="linenum">1781</span></a>      return false;
<a name="l1782"><span class="linenum">1782</span></a>  }
<a name="l1783"><span class="linenum">1783</span></a>  
<a name="l1784"><span class="linenum">1784</span></a>  <span class="comment">/**</span>
<a name="l1785"><span class="linenum">1785</span></a>  <span class="comment"> *</span>
<a name="l1786"><span class="linenum">1786</span></a>  <span class="comment"> */</span>
<a name="l1787"><span class="linenum">1787</span></a>  function <a class="function" onClick="logFunction('glossary_print_tabbed_table_end')" href="../../_functions/glossary_print_tabbed_table_end.html" onMouseOver="funcPopup(event,'glossary_print_tabbed_table_end')">glossary_print_tabbed_table_end</a>() {
<a name="l1788"><span class="linenum">1788</span></a>       echo &quot;&lt;/div&gt;&lt;/div&gt;&quot;;
<a name="l1789"><span class="linenum">1789</span></a>  }
<a name="l1790"><span class="linenum">1790</span></a>  
<a name="l1791"><span class="linenum">1791</span></a>  <span class="comment">/**</span>
<a name="l1792"><span class="linenum">1792</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1793"><span class="linenum">1793</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1794"><span class="linenum">1794</span></a>  <span class="comment"> * @param string $mode</span>
<a name="l1795"><span class="linenum">1795</span></a>  <span class="comment"> * @param string $hook</span>
<a name="l1796"><span class="linenum">1796</span></a>  <span class="comment"> * @param string $sortkey</span>
<a name="l1797"><span class="linenum">1797</span></a>  <span class="comment"> * @param string $sortorder</span>
<a name="l1798"><span class="linenum">1798</span></a>  <span class="comment"> */</span>
<a name="l1799"><span class="linenum">1799</span></a>  function <a class="function" onClick="logFunction('glossary_print_approval_menu')" href="../../_functions/glossary_print_approval_menu.html" onMouseOver="funcPopup(event,'glossary_print_approval_menu')">glossary_print_approval_menu</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>,<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>, <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> = '', <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a> = '') {
<a name="l1800"><span class="linenum">1800</span></a>      if (<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('showalphabet')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/showalphabet.html">showalphabet</a>) {
<a name="l1801"><span class="linenum">1801</span></a>          echo '&lt;div class=&quot;glossaryexplain&quot;&gt;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;explainalphabet&quot;,&quot;glossary&quot;) . '&lt;/div&gt;&lt;br /&gt;';
<a name="l1802"><span class="linenum">1802</span></a>      }
<a name="l1803"><span class="linenum">1803</span></a>      <a class="function" onClick="logFunction('glossary_print_special_links')" href="../../_functions/glossary_print_special_links.html" onMouseOver="funcPopup(event,'glossary_print_special_links')">glossary_print_special_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>);
<a name="l1804"><span class="linenum">1804</span></a>  
<a name="l1805"><span class="linenum">1805</span></a>      <a class="function" onClick="logFunction('glossary_print_alphabet_links')" href="../../_functions/glossary_print_alphabet_links.html" onMouseOver="funcPopup(event,'glossary_print_alphabet_links')">glossary_print_alphabet_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>,<a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a>, <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a>);
<a name="l1806"><span class="linenum">1806</span></a>  
<a name="l1807"><span class="linenum">1807</span></a>      <a class="function" onClick="logFunction('glossary_print_all_links')" href="../../_functions/glossary_print_all_links.html" onMouseOver="funcPopup(event,'glossary_print_all_links')">glossary_print_all_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>);
<a name="l1808"><span class="linenum">1808</span></a>  
<a name="l1809"><span class="linenum">1809</span></a>      <a class="function" onClick="logFunction('glossary_print_sorting_links')" href="../../_functions/glossary_print_sorting_links.html" onMouseOver="funcPopup(event,'glossary_print_sorting_links')">glossary_print_sorting_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, 'CREATION', 'asc');
<a name="l1810"><span class="linenum">1810</span></a>  }
<a name="l1811"><span class="linenum">1811</span></a>  <span class="comment">/**</span>
<a name="l1812"><span class="linenum">1812</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1813"><span class="linenum">1813</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1814"><span class="linenum">1814</span></a>  <span class="comment"> * @param string $hook</span>
<a name="l1815"><span class="linenum">1815</span></a>  <span class="comment"> * @param string $sortkey</span>
<a name="l1816"><span class="linenum">1816</span></a>  <span class="comment"> * @param string $sortorder</span>
<a name="l1817"><span class="linenum">1817</span></a>  <span class="comment"> */</span>
<a name="l1818"><span class="linenum">1818</span></a>  function <a class="function" onClick="logFunction('glossary_print_import_menu')" href="../../_functions/glossary_print_import_menu.html" onMouseOver="funcPopup(event,'glossary_print_import_menu')">glossary_print_import_menu</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>, <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a>='', <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a> = '') {
<a name="l1819"><span class="linenum">1819</span></a>      echo '&lt;div class=&quot;glossaryexplain&quot;&gt;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;explainimport&quot;,&quot;glossary&quot;) . '&lt;/div&gt;';
<a name="l1820"><span class="linenum">1820</span></a>  }
<a name="l1821"><span class="linenum">1821</span></a>  
<a name="l1822"><span class="linenum">1822</span></a>  <span class="comment">/**</span>
<a name="l1823"><span class="linenum">1823</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1824"><span class="linenum">1824</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1825"><span class="linenum">1825</span></a>  <span class="comment"> * @param string $hook</span>
<a name="l1826"><span class="linenum">1826</span></a>  <span class="comment"> * @param string $sortkey</span>
<a name="l1827"><span class="linenum">1827</span></a>  <span class="comment"> * @param string $sortorder</span>
<a name="l1828"><span class="linenum">1828</span></a>  <span class="comment"> */</span>
<a name="l1829"><span class="linenum">1829</span></a>  function <a class="function" onClick="logFunction('glossary_print_export_menu')" href="../../_functions/glossary_print_export_menu.html" onMouseOver="funcPopup(event,'glossary_print_export_menu')">glossary_print_export_menu</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>, <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a>='', <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a> = '') {
<a name="l1830"><span class="linenum">1830</span></a>      echo '&lt;div class=&quot;glossaryexplain&quot;&gt;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;explainexport&quot;,&quot;glossary&quot;) . '&lt;/div&gt;';
<a name="l1831"><span class="linenum">1831</span></a>  }
<a name="l1832"><span class="linenum">1832</span></a>  <span class="comment">/**</span>
<a name="l1833"><span class="linenum">1833</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1834"><span class="linenum">1834</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1835"><span class="linenum">1835</span></a>  <span class="comment"> * @param string $hook</span>
<a name="l1836"><span class="linenum">1836</span></a>  <span class="comment"> * @param string $sortkey</span>
<a name="l1837"><span class="linenum">1837</span></a>  <span class="comment"> * @param string $sortorder</span>
<a name="l1838"><span class="linenum">1838</span></a>  <span class="comment"> */</span>
<a name="l1839"><span class="linenum">1839</span></a>  function <a class="function" onClick="logFunction('glossary_print_alphabet_menu')" href="../../_functions/glossary_print_alphabet_menu.html" onMouseOver="funcPopup(event,'glossary_print_alphabet_menu')">glossary_print_alphabet_menu</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>, <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a>='', <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a> = '') {
<a name="l1840"><span class="linenum">1840</span></a>      if ( <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a> != 'date' ) {
<a name="l1841"><span class="linenum">1841</span></a>          if (<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('showalphabet')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/showalphabet.html">showalphabet</a>) {
<a name="l1842"><span class="linenum">1842</span></a>              echo '&lt;div class=&quot;glossaryexplain&quot;&gt;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;explainalphabet&quot;,&quot;glossary&quot;) . '&lt;/div&gt;&lt;br /&gt;';
<a name="l1843"><span class="linenum">1843</span></a>          }
<a name="l1844"><span class="linenum">1844</span></a>  
<a name="l1845"><span class="linenum">1845</span></a>          <a class="function" onClick="logFunction('glossary_print_special_links')" href="../../_functions/glossary_print_special_links.html" onMouseOver="funcPopup(event,'glossary_print_special_links')">glossary_print_special_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>);
<a name="l1846"><span class="linenum">1846</span></a>  
<a name="l1847"><span class="linenum">1847</span></a>          <a class="function" onClick="logFunction('glossary_print_alphabet_links')" href="../../_functions/glossary_print_alphabet_links.html" onMouseOver="funcPopup(event,'glossary_print_alphabet_links')">glossary_print_alphabet_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>, <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a>, <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a>);
<a name="l1848"><span class="linenum">1848</span></a>  
<a name="l1849"><span class="linenum">1849</span></a>          <a class="function" onClick="logFunction('glossary_print_all_links')" href="../../_functions/glossary_print_all_links.html" onMouseOver="funcPopup(event,'glossary_print_all_links')">glossary_print_all_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>);
<a name="l1850"><span class="linenum">1850</span></a>      } else {
<a name="l1851"><span class="linenum">1851</span></a>          <a class="function" onClick="logFunction('glossary_print_sorting_links')" href="../../_functions/glossary_print_sorting_links.html" onMouseOver="funcPopup(event,'glossary_print_sorting_links')">glossary_print_sorting_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a>,<a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a>);
<a name="l1852"><span class="linenum">1852</span></a>      }
<a name="l1853"><span class="linenum">1853</span></a>  }
<a name="l1854"><span class="linenum">1854</span></a>  
<a name="l1855"><span class="linenum">1855</span></a>  <span class="comment">/**</span>
<a name="l1856"><span class="linenum">1856</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1857"><span class="linenum">1857</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1858"><span class="linenum">1858</span></a>  <span class="comment"> * @param string $hook</span>
<a name="l1859"><span class="linenum">1859</span></a>  <span class="comment"> * @param string $sortkey</span>
<a name="l1860"><span class="linenum">1860</span></a>  <span class="comment"> * @param string $sortorder</span>
<a name="l1861"><span class="linenum">1861</span></a>  <span class="comment"> */</span>
<a name="l1862"><span class="linenum">1862</span></a>  function <a class="function" onClick="logFunction('glossary_print_author_menu')" href="../../_functions/glossary_print_author_menu.html" onMouseOver="funcPopup(event,'glossary_print_author_menu')">glossary_print_author_menu</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>,<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>, <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> = '', <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a> = '') {
<a name="l1863"><span class="linenum">1863</span></a>      if (<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('showalphabet')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/showalphabet.html">showalphabet</a>) {
<a name="l1864"><span class="linenum">1864</span></a>          echo '&lt;div class=&quot;glossaryexplain&quot;&gt;' . <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;explainalphabet&quot;,&quot;glossary&quot;) . '&lt;/div&gt;&lt;br /&gt;';
<a name="l1865"><span class="linenum">1865</span></a>      }
<a name="l1866"><span class="linenum">1866</span></a>  
<a name="l1867"><span class="linenum">1867</span></a>      <a class="function" onClick="logFunction('glossary_print_alphabet_links')" href="../../_functions/glossary_print_alphabet_links.html" onMouseOver="funcPopup(event,'glossary_print_alphabet_links')">glossary_print_alphabet_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>, <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a>, <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a>);
<a name="l1868"><span class="linenum">1868</span></a>      <a class="function" onClick="logFunction('glossary_print_all_links')" href="../../_functions/glossary_print_all_links.html" onMouseOver="funcPopup(event,'glossary_print_all_links')">glossary_print_all_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>);
<a name="l1869"><span class="linenum">1869</span></a>      <a class="function" onClick="logFunction('glossary_print_sorting_links')" href="../../_functions/glossary_print_sorting_links.html" onMouseOver="funcPopup(event,'glossary_print_sorting_links')">glossary_print_sorting_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a>,<a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a>);
<a name="l1870"><span class="linenum">1870</span></a>  }
<a name="l1871"><span class="linenum">1871</span></a>  
<a name="l1872"><span class="linenum">1872</span></a>  <span class="comment">/**</span>
<a name="l1873"><span class="linenum">1873</span></a>  <span class="comment"> * @global object</span>
<a name="l1874"><span class="linenum">1874</span></a>  <span class="comment"> * @global object</span>
<a name="l1875"><span class="linenum">1875</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1876"><span class="linenum">1876</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1877"><span class="linenum">1877</span></a>  <span class="comment"> * @param string $hook</span>
<a name="l1878"><span class="linenum">1878</span></a>  <span class="comment"> * @param object $category</span>
<a name="l1879"><span class="linenum">1879</span></a>  <span class="comment"> */</span>
<a name="l1880"><span class="linenum">1880</span></a>  function <a class="function" onClick="logFunction('glossary_print_categories_menu')" href="../../_functions/glossary_print_categories_menu.html" onMouseOver="funcPopup(event,'glossary_print_categories_menu')">glossary_print_categories_menu</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>, <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a>) {
<a name="l1881"><span class="linenum">1881</span></a>       global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l1882"><span class="linenum">1882</span></a>  
<a name="l1883"><span class="linenum">1883</span></a>       <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l1884"><span class="linenum">1884</span></a>  
<a name="l1885"><span class="linenum">1885</span></a>  <span class="comment">    // Prepare format_string/text options</span>
<a name="l1886"><span class="linenum">1886</span></a>      <a class="var it8307" onMouseOver="hilite(8307)" onMouseOut="lolite()" onClick="logVariable('fmtoptions')" href="../../_variables/fmtoptions.html">$fmtoptions</a> = array(
<a name="l1887"><span class="linenum">1887</span></a>          'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>);
<a name="l1888"><span class="linenum">1888</span></a>  
<a name="l1889"><span class="linenum">1889</span></a>       echo '&lt;table border=&quot;0&quot; width=&quot;100%&quot;&gt;';
<a name="l1890"><span class="linenum">1890</span></a>       echo '&lt;tr&gt;';
<a name="l1891"><span class="linenum">1891</span></a>  
<a name="l1892"><span class="linenum">1892</span></a>       echo '&lt;td align=&quot;center&quot; style=&quot;width:20%&quot;&gt;';
<a name="l1893"><span class="linenum">1893</span></a>       if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:managecategories', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l1894"><span class="linenum">1894</span></a>               <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['id'] = <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1895"><span class="linenum">1895</span></a>               <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['mode'] = 'cat';
<a name="l1896"><span class="linenum">1896</span></a>               <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['hook'] = <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>;
<a name="l1897"><span class="linenum">1897</span></a>               echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('single_button')" href="../../_functions/single_button.html" onMouseOver="funcPopup(event,'single_button')">single_button</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(&quot;editcategories.php&quot;, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>), <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;editcategories&quot;,&quot;glossary&quot;), &quot;get&quot;);
<a name="l1898"><span class="linenum">1898</span></a>       }
<a name="l1899"><span class="linenum">1899</span></a>       echo '&lt;/td&gt;';
<a name="l1900"><span class="linenum">1900</span></a>  
<a name="l1901"><span class="linenum">1901</span></a>       echo '&lt;td align=&quot;center&quot; style=&quot;width:60%&quot;&gt;';
<a name="l1902"><span class="linenum">1902</span></a>       echo '&lt;b&gt;';
<a name="l1903"><span class="linenum">1903</span></a>  
<a name="l1904"><span class="linenum">1904</span></a>       <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../../_variables/menu.html">$menu</a> = array();
<a name="l1905"><span class="linenum">1905</span></a>       <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../../_variables/menu.html">$menu</a>[<a class="constant" onClick="logConstant('GLOSSARY_SHOW_ALL_CATEGORIES')" href="../../_constants/GLOSSARY_SHOW_ALL_CATEGORIES.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_ALL_CATEGORIES')">GLOSSARY_SHOW_ALL_CATEGORIES</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;allcategories&quot;,&quot;glossary&quot;);
<a name="l1906"><span class="linenum">1906</span></a>       <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../../_variables/menu.html">$menu</a>[<a class="constant" onClick="logConstant('GLOSSARY_SHOW_NOT_CATEGORISED')" href="../../_constants/GLOSSARY_SHOW_NOT_CATEGORISED.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_NOT_CATEGORISED')">GLOSSARY_SHOW_NOT_CATEGORISED</a>] = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;notcategorised&quot;,&quot;glossary&quot;);
<a name="l1907"><span class="linenum">1907</span></a>  
<a name="l1908"><span class="linenum">1908</span></a>       <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;glossary_categories&quot;, array(&quot;glossaryid&quot;=&gt;<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), &quot;name ASC&quot;);
<a name="l1909"><span class="linenum">1909</span></a>       <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> = '';
<a name="l1910"><span class="linenum">1910</span></a>       if ( <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a> ) {
<a name="l1911"><span class="linenum">1911</span></a>            foreach (<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a> as <a class="var it12611" onMouseOver="hilite(12611)" onMouseOut="lolite()" onClick="logVariable('currentcategory')" href="../../_variables/currentcategory.html">$currentcategory</a>) {
<a name="l1912"><span class="linenum">1912</span></a>                   <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <a class="var it12611" onMouseOver="hilite(12611)" onMouseOut="lolite()" onClick="logVariable('currentcategory')" href="../../_variables/currentcategory.html">$currentcategory</a>-&gt;<a onClick="logVariable('id')" class="var it44552" onMouseOver="hilite(44552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l1913"><span class="linenum">1913</span></a>                   if ( <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a> ) {
<a name="l1914"><span class="linenum">1914</span></a>                       if (<a class="var it12611" onMouseOver="hilite(12611)" onMouseOut="lolite()" onClick="logVariable('currentcategory')" href="../../_variables/currentcategory.html">$currentcategory</a>-&gt;<a onClick="logVariable('id')" class="var it44552" onMouseOver="hilite(44552)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> == <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('id')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>) {
<a name="l1915"><span class="linenum">1915</span></a>                           <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> = <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>;
<a name="l1916"><span class="linenum">1916</span></a>                       }
<a name="l1917"><span class="linenum">1917</span></a>                   }
<a name="l1918"><span class="linenum">1918</span></a>                   <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../../_variables/menu.html">$menu</a>[<a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>] = <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it12611" onMouseOver="hilite(12611)" onMouseOut="lolite()" onClick="logVariable('currentcategory')" href="../../_variables/currentcategory.html">$currentcategory</a>-&gt;<a onClick="logVariable('name')" class="var it44552" onMouseOver="hilite(44552)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, true, <a class="var it8307" onMouseOver="hilite(8307)" onMouseOut="lolite()" onClick="logVariable('fmtoptions')" href="../../_variables/fmtoptions.html">$fmtoptions</a>);
<a name="l1919"><span class="linenum">1919</span></a>            }
<a name="l1920"><span class="linenum">1920</span></a>       }
<a name="l1921"><span class="linenum">1921</span></a>       if ( !<a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> ) {
<a name="l1922"><span class="linenum">1922</span></a>           <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> = <a class="constant" onClick="logConstant('GLOSSARY_SHOW_NOT_CATEGORISED')" href="../../_constants/GLOSSARY_SHOW_NOT_CATEGORISED.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_NOT_CATEGORISED')">GLOSSARY_SHOW_NOT_CATEGORISED</a>;
<a name="l1923"><span class="linenum">1923</span></a>       }
<a name="l1924"><span class="linenum">1924</span></a>  
<a name="l1925"><span class="linenum">1925</span></a>       if ( <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a> ) {
<a name="l1926"><span class="linenum">1926</span></a>          echo <a class="function" onClick="logFunction('format_string')" href="../../_functions/format_string.html" onMouseOver="funcPopup(event,'format_string')">format_string</a>(<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('name')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>, true, <a class="var it8307" onMouseOver="hilite(8307)" onMouseOut="lolite()" onClick="logVariable('fmtoptions')" href="../../_variables/fmtoptions.html">$fmtoptions</a>);
<a name="l1927"><span class="linenum">1927</span></a>       } else {
<a name="l1928"><span class="linenum">1928</span></a>          if ( <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a> == <a class="constant" onClick="logConstant('GLOSSARY_SHOW_NOT_CATEGORISED')" href="../../_constants/GLOSSARY_SHOW_NOT_CATEGORISED.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_NOT_CATEGORISED')">GLOSSARY_SHOW_NOT_CATEGORISED</a> ) {
<a name="l1929"><span class="linenum">1929</span></a>  
<a name="l1930"><span class="linenum">1930</span></a>              echo <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;entrieswithoutcategory&quot;,&quot;glossary&quot;);
<a name="l1931"><span class="linenum">1931</span></a>              <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> = <a class="constant" onClick="logConstant('GLOSSARY_SHOW_NOT_CATEGORISED')" href="../../_constants/GLOSSARY_SHOW_NOT_CATEGORISED.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_NOT_CATEGORISED')">GLOSSARY_SHOW_NOT_CATEGORISED</a>;
<a name="l1932"><span class="linenum">1932</span></a>  
<a name="l1933"><span class="linenum">1933</span></a>          } elseif ( <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a> == <a class="constant" onClick="logConstant('GLOSSARY_SHOW_ALL_CATEGORIES')" href="../../_constants/GLOSSARY_SHOW_ALL_CATEGORIES.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_ALL_CATEGORIES')">GLOSSARY_SHOW_ALL_CATEGORIES</a> ) {
<a name="l1934"><span class="linenum">1934</span></a>  
<a name="l1935"><span class="linenum">1935</span></a>              echo <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;allcategories&quot;,&quot;glossary&quot;);
<a name="l1936"><span class="linenum">1936</span></a>              <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a> = <a class="constant" onClick="logConstant('GLOSSARY_SHOW_ALL_CATEGORIES')" href="../../_constants/GLOSSARY_SHOW_ALL_CATEGORIES.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_ALL_CATEGORIES')">GLOSSARY_SHOW_ALL_CATEGORIES</a>;
<a name="l1937"><span class="linenum">1937</span></a>  
<a name="l1938"><span class="linenum">1938</span></a>          }
<a name="l1939"><span class="linenum">1939</span></a>       }
<a name="l1940"><span class="linenum">1940</span></a>       echo '&lt;/b&gt;&lt;/td&gt;';
<a name="l1941"><span class="linenum">1941</span></a>       echo '&lt;td align=&quot;center&quot; style=&quot;width:20%&quot;&gt;';
<a name="l1942"><span class="linenum">1942</span></a>  
<a name="l1943"><span class="linenum">1943</span></a>       <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a> = <span class="keyword">new </span><a class="class" onClick="logClass('single_select')" href="../../_classes/single_select.html" onMouseOver="classPopup(event,'single_select')">single_select</a>(<span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>("<a class="filename" href="../../mod/glossary/view.php.html">/mod/glossary/view.php</a>", array('id'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mode'=&gt;'cat')), 'hook', <a class="var it2208" onMouseOver="hilite(2208)" onMouseOut="lolite()" onClick="logVariable('menu')" href="../../_variables/menu.html">$menu</a>, <a class="var it569" onMouseOver="hilite(569)" onMouseOut="lolite()" onClick="logVariable('selected')" href="../../_variables/selected.html">$selected</a>, null, &quot;catmenu&quot;);
<a name="l1944"><span class="linenum">1944</span></a>       <a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>-&gt;<a class="function" onClick="logFunction('set_label')" href="../../_functions/set_label.html" onMouseOver="funcPopup(event,'set_label')">set_label</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('categories', 'glossary'), array('class' =&gt; 'accesshide'));
<a name="l1945"><span class="linenum">1945</span></a>       echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it1047" onMouseOver="hilite(1047)" onMouseOut="lolite()" onClick="logVariable('select')" href="../../_variables/select.html">$select</a>);
<a name="l1946"><span class="linenum">1946</span></a>  
<a name="l1947"><span class="linenum">1947</span></a>       echo '&lt;/td&gt;';
<a name="l1948"><span class="linenum">1948</span></a>       echo '&lt;/tr&gt;';
<a name="l1949"><span class="linenum">1949</span></a>  
<a name="l1950"><span class="linenum">1950</span></a>       echo '&lt;/table&gt;';
<a name="l1951"><span class="linenum">1951</span></a>  }
<a name="l1952"><span class="linenum">1952</span></a>  
<a name="l1953"><span class="linenum">1953</span></a>  <span class="comment">/**</span>
<a name="l1954"><span class="linenum">1954</span></a>  <span class="comment"> * @global object</span>
<a name="l1955"><span class="linenum">1955</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1956"><span class="linenum">1956</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1957"><span class="linenum">1957</span></a>  <span class="comment"> * @param string $mode</span>
<a name="l1958"><span class="linenum">1958</span></a>  <span class="comment"> * @param string $hook</span>
<a name="l1959"><span class="linenum">1959</span></a>  <span class="comment"> */</span>
<a name="l1960"><span class="linenum">1960</span></a>  function <a class="function" onClick="logFunction('glossary_print_all_links')" href="../../_functions/glossary_print_all_links.html" onMouseOver="funcPopup(event,'glossary_print_all_links')">glossary_print_all_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>) {
<a name="l1961"><span class="linenum">1961</span></a>  global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1962"><span class="linenum">1962</span></a>       if ( <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('showall')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/showall.html">showall</a>) {
<a name="l1963"><span class="linenum">1963</span></a>           <a class="var it12613" onMouseOver="hilite(12613)" onMouseOut="lolite()" onClick="logVariable('strallentries')" href="../../_variables/strallentries.html">$strallentries</a>       = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;allentries&quot;, &quot;glossary&quot;);
<a name="l1964"><span class="linenum">1964</span></a>           if ( <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a> == 'ALL' ) {
<a name="l1965"><span class="linenum">1965</span></a>                echo &quot;&lt;b&gt;<a class="var it12613" onMouseOver="hilite(12613)" onMouseOut="lolite()" onClick="logVariable('strallentries')" href="../../_variables/strallentries.html">$strallentries</a>&lt;/b&gt;&quot;;
<a name="l1966"><span class="linenum">1966</span></a>           } else {
<a name="l1967"><span class="linenum">1967</span></a>                <a class="var it12614" onMouseOver="hilite(12614)" onMouseOut="lolite()" onClick="logVariable('strexplainall')" href="../../_variables/strexplainall.html">$strexplainall</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;explainall&quot;,&quot;glossary&quot;));
<a name="l1968"><span class="linenum">1968</span></a>                echo &quot;&lt;a title=\&quot;<a class="var it12614" onMouseOver="hilite(12614)" onMouseOut="lolite()" onClick="logVariable('strexplainall')" href="../../_variables/strexplainall.html">$strexplainall</a>\&quot; href=\&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/glossary/view.php?id=<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;mode=<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>&amp;amp;hook=ALL\&quot;&gt;<a class="var it12613" onMouseOver="hilite(12613)" onMouseOut="lolite()" onClick="logVariable('strallentries')" href="../../_variables/strallentries.html">$strallentries</a>&lt;/a&gt;&quot;;
<a name="l1969"><span class="linenum">1969</span></a>           }
<a name="l1970"><span class="linenum">1970</span></a>       }
<a name="l1971"><span class="linenum">1971</span></a>  }
<a name="l1972"><span class="linenum">1972</span></a>  
<a name="l1973"><span class="linenum">1973</span></a>  <span class="comment">/**</span>
<a name="l1974"><span class="linenum">1974</span></a>  <span class="comment"> * @global object</span>
<a name="l1975"><span class="linenum">1975</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l1976"><span class="linenum">1976</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1977"><span class="linenum">1977</span></a>  <span class="comment"> * @param string $mode</span>
<a name="l1978"><span class="linenum">1978</span></a>  <span class="comment"> * @param string $hook</span>
<a name="l1979"><span class="linenum">1979</span></a>  <span class="comment"> */</span>
<a name="l1980"><span class="linenum">1980</span></a>  function <a class="function" onClick="logFunction('glossary_print_special_links')" href="../../_functions/glossary_print_special_links.html" onMouseOver="funcPopup(event,'glossary_print_special_links')">glossary_print_special_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>) {
<a name="l1981"><span class="linenum">1981</span></a>  global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l1982"><span class="linenum">1982</span></a>       if ( <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('showspecial')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/showspecial.html">showspecial</a>) {
<a name="l1983"><span class="linenum">1983</span></a>           <a class="var it12616" onMouseOver="hilite(12616)" onMouseOut="lolite()" onClick="logVariable('strspecial')" href="../../_variables/strspecial.html">$strspecial</a>          = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;special&quot;, &quot;glossary&quot;);
<a name="l1984"><span class="linenum">1984</span></a>           if ( <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a> == 'SPECIAL' ) {
<a name="l1985"><span class="linenum">1985</span></a>                echo &quot;&lt;b&gt;<a class="var it12616" onMouseOver="hilite(12616)" onMouseOut="lolite()" onClick="logVariable('strspecial')" href="../../_variables/strspecial.html">$strspecial</a>&lt;/b&gt; | &quot;;
<a name="l1986"><span class="linenum">1986</span></a>           } else {
<a name="l1987"><span class="linenum">1987</span></a>                <a class="var it12617" onMouseOver="hilite(12617)" onMouseOut="lolite()" onClick="logVariable('strexplainspecial')" href="../../_variables/strexplainspecial.html">$strexplainspecial</a> = <a class="phpfunction" onClick="logFunction('strip_tags')" href="../../_functions/strip_tags.html" onMouseOver="phpfuncPopup(event,'strip_tags')">strip_tags</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;explainspecial&quot;,&quot;glossary&quot;));
<a name="l1988"><span class="linenum">1988</span></a>                echo &quot;&lt;a title=\&quot;<a class="var it12617" onMouseOver="hilite(12617)" onMouseOut="lolite()" onClick="logVariable('strexplainspecial')" href="../../_variables/strexplainspecial.html">$strexplainspecial</a>\&quot; href=\&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/glossary/view.php?id=<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;mode=<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>&amp;amp;hook=SPECIAL\&quot;&gt;<a class="var it12616" onMouseOver="hilite(12616)" onMouseOut="lolite()" onClick="logVariable('strspecial')" href="../../_variables/strspecial.html">$strspecial</a>&lt;/a&gt; | &quot;;
<a name="l1989"><span class="linenum">1989</span></a>           }
<a name="l1990"><span class="linenum">1990</span></a>       }
<a name="l1991"><span class="linenum">1991</span></a>  }
<a name="l1992"><span class="linenum">1992</span></a>  
<a name="l1993"><span class="linenum">1993</span></a>  <span class="comment">/**</span>
<a name="l1994"><span class="linenum">1994</span></a>  <span class="comment"> * @global object</span>
<a name="l1995"><span class="linenum">1995</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l1996"><span class="linenum">1996</span></a>  <span class="comment"> * @param string $mode</span>
<a name="l1997"><span class="linenum">1997</span></a>  <span class="comment"> * @param string $hook</span>
<a name="l1998"><span class="linenum">1998</span></a>  <span class="comment"> * @param string $sortkey</span>
<a name="l1999"><span class="linenum">1999</span></a>  <span class="comment"> * @param string $sortorder</span>
<a name="l2000"><span class="linenum">2000</span></a>  <span class="comment"> */</span>
<a name="l2001"><span class="linenum">2001</span></a>  function <a class="function" onClick="logFunction('glossary_print_alphabet_links')" href="../../_functions/glossary_print_alphabet_links.html" onMouseOver="funcPopup(event,'glossary_print_alphabet_links')">glossary_print_alphabet_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>, <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a>, <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a>) {
<a name="l2002"><span class="linenum">2002</span></a>  global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2003"><span class="linenum">2003</span></a>       if ( <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('showalphabet')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/showalphabet.html">showalphabet</a>) {
<a name="l2004"><span class="linenum">2004</span></a>            <a class="var it8849" onMouseOver="hilite(8849)" onMouseOut="lolite()" onClick="logVariable('alphabet')" href="../../_variables/alphabet.html">$alphabet</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(&quot;,&quot;, <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('alphabet', 'langconfig'));
<a name="l2005"><span class="linenum">2005</span></a>            for (<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0; <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> &lt; <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it8849" onMouseOver="hilite(8849)" onMouseOut="lolite()" onClick="logVariable('alphabet')" href="../../_variables/alphabet.html">$alphabet</a>); <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++) {
<a name="l2006"><span class="linenum">2006</span></a>                if ( <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a> == <a class="var it8849" onMouseOver="hilite(8849)" onMouseOut="lolite()" onClick="logVariable('alphabet')" href="../../_variables/alphabet.html">$alphabet</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] and <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>) {
<a name="l2007"><span class="linenum">2007</span></a>                     echo &quot;&lt;b&gt;<a class="var it8849" onMouseOver="hilite(8849)" onMouseOut="lolite()" onClick="logVariable('alphabet')" href="../../_variables/alphabet.html">$alphabet</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]&lt;/b&gt;&quot;;
<a name="l2008"><span class="linenum">2008</span></a>                } else {
<a name="l2009"><span class="linenum">2009</span></a>                     echo &quot;&lt;a href=\&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/glossary/view.php?id=<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;mode=<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>&amp;amp;hook=&quot;.<a class="phpfunction" onClick="logFunction('urlencode')" href="../../_functions/urlencode.html" onMouseOver="phpfuncPopup(event,'urlencode')">urlencode</a>(<a class="var it8849" onMouseOver="hilite(8849)" onMouseOut="lolite()" onClick="logVariable('alphabet')" href="../../_variables/alphabet.html">$alphabet</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]).&quot;&amp;amp;sortkey=<a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a>&amp;amp;sortorder=<a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a>\&quot;&gt;<a class="var it8849" onMouseOver="hilite(8849)" onMouseOut="lolite()" onClick="logVariable('alphabet')" href="../../_variables/alphabet.html">$alphabet</a>[<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>]&lt;/a&gt;&quot;;
<a name="l2010"><span class="linenum">2010</span></a>                }
<a name="l2011"><span class="linenum">2011</span></a>                echo ' | ';
<a name="l2012"><span class="linenum">2012</span></a>            }
<a name="l2013"><span class="linenum">2013</span></a>       }
<a name="l2014"><span class="linenum">2014</span></a>  }
<a name="l2015"><span class="linenum">2015</span></a>  
<a name="l2016"><span class="linenum">2016</span></a>  <span class="comment">/**</span>
<a name="l2017"><span class="linenum">2017</span></a>  <span class="comment"> * @global object</span>
<a name="l2018"><span class="linenum">2018</span></a>  <span class="comment"> * @param object $cm</span>
<a name="l2019"><span class="linenum">2019</span></a>  <span class="comment"> * @param string $mode</span>
<a name="l2020"><span class="linenum">2020</span></a>  <span class="comment"> * @param string $sortkey</span>
<a name="l2021"><span class="linenum">2021</span></a>  <span class="comment"> * @param string $sortorder</span>
<a name="l2022"><span class="linenum">2022</span></a>  <span class="comment"> */</span>
<a name="l2023"><span class="linenum">2023</span></a>  function <a class="function" onClick="logFunction('glossary_print_sorting_links')" href="../../_functions/glossary_print_sorting_links.html" onMouseOver="funcPopup(event,'glossary_print_sorting_links')">glossary_print_sorting_links</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> = '',<a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a> = '') {
<a name="l2024"><span class="linenum">2024</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l2025"><span class="linenum">2025</span></a>  
<a name="l2026"><span class="linenum">2026</span></a>      <a class="var it12618" onMouseOver="hilite(12618)" onMouseOut="lolite()" onClick="logVariable('asc')" href="../../_variables/asc.html">$asc</a>    = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;ascending&quot;,&quot;glossary&quot;);
<a name="l2027"><span class="linenum">2027</span></a>      <a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('desc')" href="../../_variables/desc.html">$desc</a>   = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;descending&quot;,&quot;glossary&quot;);
<a name="l2028"><span class="linenum">2028</span></a>      <a class="var it12619" onMouseOver="hilite(12619)" onMouseOut="lolite()" onClick="logVariable('bopen')" href="../../_variables/bopen.html">$bopen</a>  = '&lt;b&gt;';
<a name="l2029"><span class="linenum">2029</span></a>      <a class="var it12620" onMouseOver="hilite(12620)" onMouseOut="lolite()" onClick="logVariable('bclose')" href="../../_variables/bclose.html">$bclose</a> = '&lt;/b&gt;';
<a name="l2030"><span class="linenum">2030</span></a>  
<a name="l2031"><span class="linenum">2031</span></a>       <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../../_variables/neworder.html">$neworder</a> = '';
<a name="l2032"><span class="linenum">2032</span></a>       <a class="var it12621" onMouseOver="hilite(12621)" onMouseOut="lolite()" onClick="logVariable('currentorder')" href="../../_variables/currentorder.html">$currentorder</a> = '';
<a name="l2033"><span class="linenum">2033</span></a>       <a class="var it12622" onMouseOver="hilite(12622)" onMouseOut="lolite()" onClick="logVariable('currentsort')" href="../../_variables/currentsort.html">$currentsort</a> = '';
<a name="l2034"><span class="linenum">2034</span></a>       if ( <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a> ) {
<a name="l2035"><span class="linenum">2035</span></a>           if ( <a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a> == 'asc' ) {
<a name="l2036"><span class="linenum">2036</span></a>               <a class="var it12621" onMouseOver="hilite(12621)" onMouseOut="lolite()" onClick="logVariable('currentorder')" href="../../_variables/currentorder.html">$currentorder</a> = <a class="var it12618" onMouseOver="hilite(12618)" onMouseOut="lolite()" onClick="logVariable('asc')" href="../../_variables/asc.html">$asc</a>;
<a name="l2037"><span class="linenum">2037</span></a>               <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../../_variables/neworder.html">$neworder</a> = '&amp;amp;sortorder=desc';
<a name="l2038"><span class="linenum">2038</span></a>               <a class="var it12623" onMouseOver="hilite(12623)" onMouseOut="lolite()" onClick="logVariable('newordertitle')" href="../../_variables/newordertitle.html">$newordertitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('changeto', 'glossary', <a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('desc')" href="../../_variables/desc.html">$desc</a>);
<a name="l2039"><span class="linenum">2039</span></a>           } else {
<a name="l2040"><span class="linenum">2040</span></a>               <a class="var it12621" onMouseOver="hilite(12621)" onMouseOut="lolite()" onClick="logVariable('currentorder')" href="../../_variables/currentorder.html">$currentorder</a> = <a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('desc')" href="../../_variables/desc.html">$desc</a>;
<a name="l2041"><span class="linenum">2041</span></a>               <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../../_variables/neworder.html">$neworder</a> = '&amp;amp;sortorder=asc';
<a name="l2042"><span class="linenum">2042</span></a>               <a class="var it12623" onMouseOver="hilite(12623)" onMouseOut="lolite()" onClick="logVariable('newordertitle')" href="../../_variables/newordertitle.html">$newordertitle</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('changeto', 'glossary', <a class="var it12618" onMouseOver="hilite(12618)" onMouseOut="lolite()" onClick="logVariable('asc')" href="../../_variables/asc.html">$asc</a>);
<a name="l2043"><span class="linenum">2043</span></a>           }
<a name="l2044"><span class="linenum">2044</span></a>           <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../_variables/icon.html">$icon</a> = &quot; &lt;img src=\&quot;&quot;.<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>(<a class="var it3515" onMouseOver="hilite(3515)" onMouseOut="lolite()" onClick="logVariable('sortorder')" href="../../_variables/sortorder.html">$sortorder</a>, 'glossary').&quot;\&quot; class=\&quot;icon\&quot; alt=\&quot;<a class="var it12623" onMouseOver="hilite(12623)" onMouseOut="lolite()" onClick="logVariable('newordertitle')" href="../../_variables/newordertitle.html">$newordertitle</a>\&quot; /&gt;&quot;;
<a name="l2045"><span class="linenum">2045</span></a>       } else {
<a name="l2046"><span class="linenum">2046</span></a>           if ( <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> != 'CREATION' and <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> != 'UPDATE' and
<a name="l2047"><span class="linenum">2047</span></a>                 <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> != 'FIRSTNAME' and <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> != 'LASTNAME' ) {
<a name="l2048"><span class="linenum">2048</span></a>               <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../_variables/icon.html">$icon</a> = &quot;&quot;;
<a name="l2049"><span class="linenum">2049</span></a>               <a class="var it12623" onMouseOver="hilite(12623)" onMouseOut="lolite()" onClick="logVariable('newordertitle')" href="../../_variables/newordertitle.html">$newordertitle</a> = <a class="var it12618" onMouseOver="hilite(12618)" onMouseOut="lolite()" onClick="logVariable('asc')" href="../../_variables/asc.html">$asc</a>;
<a name="l2050"><span class="linenum">2050</span></a>           } else {
<a name="l2051"><span class="linenum">2051</span></a>               <a class="var it12623" onMouseOver="hilite(12623)" onMouseOut="lolite()" onClick="logVariable('newordertitle')" href="../../_variables/newordertitle.html">$newordertitle</a> = <a class="var it740" onMouseOver="hilite(740)" onMouseOut="lolite()" onClick="logVariable('desc')" href="../../_variables/desc.html">$desc</a>;
<a name="l2052"><span class="linenum">2052</span></a>               <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../../_variables/neworder.html">$neworder</a> = '&amp;amp;sortorder=desc';
<a name="l2053"><span class="linenum">2053</span></a>               <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../_variables/icon.html">$icon</a> = ' &lt;img src=&quot;'.<a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('pix_url')" href="../../_functions/pix_url.html" onMouseOver="funcPopup(event,'pix_url')">pix_url</a>('asc', 'glossary').'&quot; class=&quot;icon&quot; alt=&quot;'.<a class="var it12623" onMouseOver="hilite(12623)" onMouseOut="lolite()" onClick="logVariable('newordertitle')" href="../../_variables/newordertitle.html">$newordertitle</a>.'&quot; /&gt;';
<a name="l2054"><span class="linenum">2054</span></a>           }
<a name="l2055"><span class="linenum">2055</span></a>       }
<a name="l2056"><span class="linenum">2056</span></a>       <a class="var it12624" onMouseOver="hilite(12624)" onMouseOut="lolite()" onClick="logVariable('ficon')" href="../../_variables/ficon.html">$ficon</a>     = '';
<a name="l2057"><span class="linenum">2057</span></a>       <a class="var it12625" onMouseOver="hilite(12625)" onMouseOut="lolite()" onClick="logVariable('fneworder')" href="../../_variables/fneworder.html">$fneworder</a> = '';
<a name="l2058"><span class="linenum">2058</span></a>       <a class="var it12626" onMouseOver="hilite(12626)" onMouseOut="lolite()" onClick="logVariable('fbtag')" href="../../_variables/fbtag.html">$fbtag</a>     = '';
<a name="l2059"><span class="linenum">2059</span></a>       <a class="var it12627" onMouseOver="hilite(12627)" onMouseOut="lolite()" onClick="logVariable('fendbtag')" href="../../_variables/fendbtag.html">$fendbtag</a>  = '';
<a name="l2060"><span class="linenum">2060</span></a>  
<a name="l2061"><span class="linenum">2061</span></a>       <a class="var it12628" onMouseOver="hilite(12628)" onMouseOut="lolite()" onClick="logVariable('sicon')" href="../../_variables/sicon.html">$sicon</a>     = '';
<a name="l2062"><span class="linenum">2062</span></a>       <a class="var it12629" onMouseOver="hilite(12629)" onMouseOut="lolite()" onClick="logVariable('sneworder')" href="../../_variables/sneworder.html">$sneworder</a> = '';
<a name="l2063"><span class="linenum">2063</span></a>  
<a name="l2064"><span class="linenum">2064</span></a>       <a class="var it12630" onMouseOver="hilite(12630)" onMouseOut="lolite()" onClick="logVariable('sbtag')" href="../../_variables/sbtag.html">$sbtag</a>      = '';
<a name="l2065"><span class="linenum">2065</span></a>       <a class="var it12626" onMouseOver="hilite(12626)" onMouseOut="lolite()" onClick="logVariable('fbtag')" href="../../_variables/fbtag.html">$fbtag</a>      = '';
<a name="l2066"><span class="linenum">2066</span></a>       <a class="var it12627" onMouseOver="hilite(12627)" onMouseOut="lolite()" onClick="logVariable('fendbtag')" href="../../_variables/fendbtag.html">$fendbtag</a>      = '';
<a name="l2067"><span class="linenum">2067</span></a>       <a class="var it12631" onMouseOver="hilite(12631)" onMouseOut="lolite()" onClick="logVariable('sendbtag')" href="../../_variables/sendbtag.html">$sendbtag</a>      = '';
<a name="l2068"><span class="linenum">2068</span></a>  
<a name="l2069"><span class="linenum">2069</span></a>       <a class="var it12631" onMouseOver="hilite(12631)" onMouseOut="lolite()" onClick="logVariable('sendbtag')" href="../../_variables/sendbtag.html">$sendbtag</a>  = '';
<a name="l2070"><span class="linenum">2070</span></a>  
<a name="l2071"><span class="linenum">2071</span></a>       if ( <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> == 'CREATION' or <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> == 'FIRSTNAME' ) {
<a name="l2072"><span class="linenum">2072</span></a>           <a class="var it12624" onMouseOver="hilite(12624)" onMouseOut="lolite()" onClick="logVariable('ficon')" href="../../_variables/ficon.html">$ficon</a>       = <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../_variables/icon.html">$icon</a>;
<a name="l2073"><span class="linenum">2073</span></a>           <a class="var it12625" onMouseOver="hilite(12625)" onMouseOut="lolite()" onClick="logVariable('fneworder')" href="../../_variables/fneworder.html">$fneworder</a>   = <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../../_variables/neworder.html">$neworder</a>;
<a name="l2074"><span class="linenum">2074</span></a>           <a class="var it12632" onMouseOver="hilite(12632)" onMouseOut="lolite()" onClick="logVariable('fordertitle')" href="../../_variables/fordertitle.html">$fordertitle</a> = <a class="var it12623" onMouseOver="hilite(12623)" onMouseOut="lolite()" onClick="logVariable('newordertitle')" href="../../_variables/newordertitle.html">$newordertitle</a>;
<a name="l2075"><span class="linenum">2075</span></a>           <a class="var it12633" onMouseOver="hilite(12633)" onMouseOut="lolite()" onClick="logVariable('sordertitle')" href="../../_variables/sordertitle.html">$sordertitle</a> = <a class="var it12618" onMouseOver="hilite(12618)" onMouseOut="lolite()" onClick="logVariable('asc')" href="../../_variables/asc.html">$asc</a>;
<a name="l2076"><span class="linenum">2076</span></a>           <a class="var it12626" onMouseOver="hilite(12626)" onMouseOut="lolite()" onClick="logVariable('fbtag')" href="../../_variables/fbtag.html">$fbtag</a>       = <a class="var it12619" onMouseOver="hilite(12619)" onMouseOut="lolite()" onClick="logVariable('bopen')" href="../../_variables/bopen.html">$bopen</a>;
<a name="l2077"><span class="linenum">2077</span></a>           <a class="var it12627" onMouseOver="hilite(12627)" onMouseOut="lolite()" onClick="logVariable('fendbtag')" href="../../_variables/fendbtag.html">$fendbtag</a>    = <a class="var it12620" onMouseOver="hilite(12620)" onMouseOut="lolite()" onClick="logVariable('bclose')" href="../../_variables/bclose.html">$bclose</a>;
<a name="l2078"><span class="linenum">2078</span></a>       } elseif (<a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> == 'UPDATE' or <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> == 'LASTNAME') {
<a name="l2079"><span class="linenum">2079</span></a>           <a class="var it12628" onMouseOver="hilite(12628)" onMouseOut="lolite()" onClick="logVariable('sicon')" href="../../_variables/sicon.html">$sicon</a> = <a class="var it727" onMouseOver="hilite(727)" onMouseOut="lolite()" onClick="logVariable('icon')" href="../../_variables/icon.html">$icon</a>;
<a name="l2080"><span class="linenum">2080</span></a>           <a class="var it12629" onMouseOver="hilite(12629)" onMouseOut="lolite()" onClick="logVariable('sneworder')" href="../../_variables/sneworder.html">$sneworder</a>   = <a class="var it11123" onMouseOver="hilite(11123)" onMouseOut="lolite()" onClick="logVariable('neworder')" href="../../_variables/neworder.html">$neworder</a>;
<a name="l2081"><span class="linenum">2081</span></a>           <a class="var it12632" onMouseOver="hilite(12632)" onMouseOut="lolite()" onClick="logVariable('fordertitle')" href="../../_variables/fordertitle.html">$fordertitle</a> = <a class="var it12618" onMouseOver="hilite(12618)" onMouseOut="lolite()" onClick="logVariable('asc')" href="../../_variables/asc.html">$asc</a>;
<a name="l2082"><span class="linenum">2082</span></a>           <a class="var it12633" onMouseOver="hilite(12633)" onMouseOut="lolite()" onClick="logVariable('sordertitle')" href="../../_variables/sordertitle.html">$sordertitle</a> = <a class="var it12623" onMouseOver="hilite(12623)" onMouseOut="lolite()" onClick="logVariable('newordertitle')" href="../../_variables/newordertitle.html">$newordertitle</a>;
<a name="l2083"><span class="linenum">2083</span></a>           <a class="var it12630" onMouseOver="hilite(12630)" onMouseOut="lolite()" onClick="logVariable('sbtag')" href="../../_variables/sbtag.html">$sbtag</a>       = <a class="var it12619" onMouseOver="hilite(12619)" onMouseOut="lolite()" onClick="logVariable('bopen')" href="../../_variables/bopen.html">$bopen</a>;
<a name="l2084"><span class="linenum">2084</span></a>           <a class="var it12631" onMouseOver="hilite(12631)" onMouseOut="lolite()" onClick="logVariable('sendbtag')" href="../../_variables/sendbtag.html">$sendbtag</a>    = <a class="var it12620" onMouseOver="hilite(12620)" onMouseOut="lolite()" onClick="logVariable('bclose')" href="../../_variables/bclose.html">$bclose</a>;
<a name="l2085"><span class="linenum">2085</span></a>       } else {
<a name="l2086"><span class="linenum">2086</span></a>           <a class="var it12632" onMouseOver="hilite(12632)" onMouseOut="lolite()" onClick="logVariable('fordertitle')" href="../../_variables/fordertitle.html">$fordertitle</a> = <a class="var it12618" onMouseOver="hilite(12618)" onMouseOut="lolite()" onClick="logVariable('asc')" href="../../_variables/asc.html">$asc</a>;
<a name="l2087"><span class="linenum">2087</span></a>           <a class="var it12633" onMouseOver="hilite(12633)" onMouseOut="lolite()" onClick="logVariable('sordertitle')" href="../../_variables/sordertitle.html">$sordertitle</a> = <a class="var it12618" onMouseOver="hilite(12618)" onMouseOut="lolite()" onClick="logVariable('asc')" href="../../_variables/asc.html">$asc</a>;
<a name="l2088"><span class="linenum">2088</span></a>       }
<a name="l2089"><span class="linenum">2089</span></a>  
<a name="l2090"><span class="linenum">2090</span></a>       if ( <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> == 'CREATION' or <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> == 'UPDATE' ) {
<a name="l2091"><span class="linenum">2091</span></a>           <a class="var it12634" onMouseOver="hilite(12634)" onMouseOut="lolite()" onClick="logVariable('forder')" href="../../_variables/forder.html">$forder</a> = 'CREATION';
<a name="l2092"><span class="linenum">2092</span></a>           <a class="var it12635" onMouseOver="hilite(12635)" onMouseOut="lolite()" onClick="logVariable('sorder')" href="../../_variables/sorder.html">$sorder</a> =  'UPDATE';
<a name="l2093"><span class="linenum">2093</span></a>           <a class="var it12636" onMouseOver="hilite(12636)" onMouseOut="lolite()" onClick="logVariable('fsort')" href="../../_variables/fsort.html">$fsort</a>  = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;sortbycreation&quot;, &quot;glossary&quot;);
<a name="l2094"><span class="linenum">2094</span></a>           <a class="var it12637" onMouseOver="hilite(12637)" onMouseOut="lolite()" onClick="logVariable('ssort')" href="../../_variables/ssort.html">$ssort</a>  = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;sortbylastupdate&quot;, &quot;glossary&quot;);
<a name="l2095"><span class="linenum">2095</span></a>  
<a name="l2096"><span class="linenum">2096</span></a>           <a class="var it12622" onMouseOver="hilite(12622)" onMouseOut="lolite()" onClick="logVariable('currentsort')" href="../../_variables/currentsort.html">$currentsort</a> = <a class="var it12636" onMouseOver="hilite(12636)" onMouseOut="lolite()" onClick="logVariable('fsort')" href="../../_variables/fsort.html">$fsort</a>;
<a name="l2097"><span class="linenum">2097</span></a>           if (<a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> == 'UPDATE') {
<a name="l2098"><span class="linenum">2098</span></a>               <a class="var it12622" onMouseOver="hilite(12622)" onMouseOut="lolite()" onClick="logVariable('currentsort')" href="../../_variables/currentsort.html">$currentsort</a> = <a class="var it12637" onMouseOver="hilite(12637)" onMouseOut="lolite()" onClick="logVariable('ssort')" href="../../_variables/ssort.html">$ssort</a>;
<a name="l2099"><span class="linenum">2099</span></a>           }
<a name="l2100"><span class="linenum">2100</span></a>           <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>        = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;sortchronogically&quot;, &quot;glossary&quot;);
<a name="l2101"><span class="linenum">2101</span></a>       } elseif ( <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> == 'FIRSTNAME' or <a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> == 'LASTNAME') {
<a name="l2102"><span class="linenum">2102</span></a>           <a class="var it12634" onMouseOver="hilite(12634)" onMouseOut="lolite()" onClick="logVariable('forder')" href="../../_variables/forder.html">$forder</a> = 'FIRSTNAME';
<a name="l2103"><span class="linenum">2103</span></a>           <a class="var it12635" onMouseOver="hilite(12635)" onMouseOut="lolite()" onClick="logVariable('sorder')" href="../../_variables/sorder.html">$sorder</a> =  'LASTNAME';
<a name="l2104"><span class="linenum">2104</span></a>           <a class="var it12636" onMouseOver="hilite(12636)" onMouseOut="lolite()" onClick="logVariable('fsort')" href="../../_variables/fsort.html">$fsort</a>  = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;firstname&quot;);
<a name="l2105"><span class="linenum">2105</span></a>           <a class="var it12637" onMouseOver="hilite(12637)" onMouseOut="lolite()" onClick="logVariable('ssort')" href="../../_variables/ssort.html">$ssort</a>  = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;lastname&quot;);
<a name="l2106"><span class="linenum">2106</span></a>  
<a name="l2107"><span class="linenum">2107</span></a>           <a class="var it12622" onMouseOver="hilite(12622)" onMouseOut="lolite()" onClick="logVariable('currentsort')" href="../../_variables/currentsort.html">$currentsort</a> = <a class="var it12636" onMouseOver="hilite(12636)" onMouseOut="lolite()" onClick="logVariable('fsort')" href="../../_variables/fsort.html">$fsort</a>;
<a name="l2108"><span class="linenum">2108</span></a>           if (<a class="var it7408" onMouseOver="hilite(7408)" onMouseOut="lolite()" onClick="logVariable('sortkey')" href="../../_variables/sortkey.html">$sortkey</a> == 'LASTNAME') {
<a name="l2109"><span class="linenum">2109</span></a>               <a class="var it12622" onMouseOver="hilite(12622)" onMouseOut="lolite()" onClick="logVariable('currentsort')" href="../../_variables/currentsort.html">$currentsort</a> = <a class="var it12637" onMouseOver="hilite(12637)" onMouseOut="lolite()" onClick="logVariable('ssort')" href="../../_variables/ssort.html">$ssort</a>;
<a name="l2110"><span class="linenum">2110</span></a>           }
<a name="l2111"><span class="linenum">2111</span></a>           <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>        = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;sortby&quot;, &quot;glossary&quot;);
<a name="l2112"><span class="linenum">2112</span></a>       }
<a name="l2113"><span class="linenum">2113</span></a>       <a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a> = '&lt;span class=&quot;accesshide&quot;&gt;'.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('current', 'glossary', &quot;<a class="var it12622" onMouseOver="hilite(12622)" onMouseOut="lolite()" onClick="logVariable('currentsort')" href="../../_variables/currentsort.html">$currentsort</a> <a class="var it12621" onMouseOver="hilite(12621)" onMouseOut="lolite()" onClick="logVariable('currentorder')" href="../../_variables/currentorder.html">$currentorder</a>&quot;).'&lt;/span&gt;';
<a name="l2114"><span class="linenum">2114</span></a>       echo &quot;&lt;br /&gt;<a class="var it397" onMouseOver="hilite(397)" onMouseOut="lolite()" onClick="logVariable('current')" href="../../_variables/current.html">$current</a> <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>: <a class="var it12630" onMouseOver="hilite(12630)" onMouseOut="lolite()" onClick="logVariable('sbtag')" href="../../_variables/sbtag.html">$sbtag</a>&lt;a title=\&quot;<a class="var it12637" onMouseOver="hilite(12637)" onMouseOut="lolite()" onClick="logVariable('ssort')" href="../../_variables/ssort.html">$ssort</a> <a class="var it12633" onMouseOver="hilite(12633)" onMouseOut="lolite()" onClick="logVariable('sordertitle')" href="../../_variables/sordertitle.html">$sordertitle</a>\&quot; href=\&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/glossary/view.php?id=<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;sortkey=<a class="var it12635" onMouseOver="hilite(12635)" onMouseOut="lolite()" onClick="logVariable('sorder')" href="../../_variables/sorder.html">$sorder</a><a class="var it12629" onMouseOver="hilite(12629)" onMouseOut="lolite()" onClick="logVariable('sneworder')" href="../../_variables/sneworder.html">$sneworder</a>&amp;amp;mode=<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>\&quot;&gt;<a class="var it12637" onMouseOver="hilite(12637)" onMouseOut="lolite()" onClick="logVariable('ssort')" href="../../_variables/ssort.html">$ssort</a><a class="var it12628" onMouseOver="hilite(12628)" onMouseOut="lolite()" onClick="logVariable('sicon')" href="../../_variables/sicon.html">$sicon</a>&lt;/a&gt;<a class="var it12631" onMouseOver="hilite(12631)" onMouseOut="lolite()" onClick="logVariable('sendbtag')" href="../../_variables/sendbtag.html">$sendbtag</a> | &quot;.
<a name="l2115"><span class="linenum">2115</span></a>                            &quot;<a class="var it12626" onMouseOver="hilite(12626)" onMouseOut="lolite()" onClick="logVariable('fbtag')" href="../../_variables/fbtag.html">$fbtag</a>&lt;a title=\&quot;<a class="var it12636" onMouseOver="hilite(12636)" onMouseOut="lolite()" onClick="logVariable('fsort')" href="../../_variables/fsort.html">$fsort</a> <a class="var it12632" onMouseOver="hilite(12632)" onMouseOut="lolite()" onClick="logVariable('fordertitle')" href="../../_variables/fordertitle.html">$fordertitle</a>\&quot; href=\&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('wwwroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/wwwroot.html">wwwroot</a>/mod/glossary/view.php?id=<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>&amp;amp;sortkey=<a class="var it12634" onMouseOver="hilite(12634)" onMouseOut="lolite()" onClick="logVariable('forder')" href="../../_variables/forder.html">$forder</a><a class="var it12625" onMouseOver="hilite(12625)" onMouseOut="lolite()" onClick="logVariable('fneworder')" href="../../_variables/fneworder.html">$fneworder</a>&amp;amp;mode=<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>\&quot;&gt;<a class="var it12636" onMouseOver="hilite(12636)" onMouseOut="lolite()" onClick="logVariable('fsort')" href="../../_variables/fsort.html">$fsort</a><a class="var it12624" onMouseOver="hilite(12624)" onMouseOut="lolite()" onClick="logVariable('ficon')" href="../../_variables/ficon.html">$ficon</a>&lt;/a&gt;<a class="var it12627" onMouseOver="hilite(12627)" onMouseOut="lolite()" onClick="logVariable('fendbtag')" href="../../_variables/fendbtag.html">$fendbtag</a>&lt;br /&gt;&quot;;
<a name="l2116"><span class="linenum">2116</span></a>  }
<a name="l2117"><span class="linenum">2117</span></a>  
<a name="l2118"><span class="linenum">2118</span></a>  <span class="comment">/**</span>
<a name="l2119"><span class="linenum">2119</span></a>  <span class="comment"> *</span>
<a name="l2120"><span class="linenum">2120</span></a>  <span class="comment"> * @param object $entry0</span>
<a name="l2121"><span class="linenum">2121</span></a>  <span class="comment"> * @param object $entry1</span>
<a name="l2122"><span class="linenum">2122</span></a>  <span class="comment"> * @return int [-1 | 0 | 1]</span>
<a name="l2123"><span class="linenum">2123</span></a>  <span class="comment"> */</span>
<a name="l2124"><span class="linenum">2124</span></a>  function <a class="function" onClick="logFunction('glossary_sort_entries')" href="../../_functions/glossary_sort_entries.html" onMouseOver="funcPopup(event,'glossary_sort_entries')">glossary_sort_entries</a> ( <a class="var it12638" onMouseOver="hilite(12638)" onMouseOut="lolite()" onClick="logVariable('entry0')" href="../../_variables/entry0.html">$entry0</a>, <a class="var it4372" onMouseOver="hilite(4372)" onMouseOut="lolite()" onClick="logVariable('entry1')" href="../../_variables/entry1.html">$entry1</a> ) {
<a name="l2125"><span class="linenum">2125</span></a>  
<a name="l2126"><span class="linenum">2126</span></a>      if ( <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="phpfunction" onClick="logFunction('ltrim')" href="../../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="var it12638" onMouseOver="hilite(12638)" onMouseOut="lolite()" onClick="logVariable('entry0')" href="../../_variables/entry0.html">$entry0</a>-&gt;<a onClick="logVariable('concept')" class="var it44553" onMouseOver="hilite(44553)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>)) &lt; <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="phpfunction" onClick="logFunction('ltrim')" href="../../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="var it4372" onMouseOver="hilite(4372)" onMouseOut="lolite()" onClick="logVariable('entry1')" href="../../_variables/entry1.html">$entry1</a>-&gt;<a onClick="logVariable('concept')" class="var it44145" onMouseOver="hilite(44145)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>)) ) {
<a name="l2127"><span class="linenum">2127</span></a>          return -1;
<a name="l2128"><span class="linenum">2128</span></a>      } elseif ( <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="phpfunction" onClick="logFunction('ltrim')" href="../../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="var it12638" onMouseOver="hilite(12638)" onMouseOut="lolite()" onClick="logVariable('entry0')" href="../../_variables/entry0.html">$entry0</a>-&gt;<a onClick="logVariable('concept')" class="var it44553" onMouseOver="hilite(44553)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>)) &gt; <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="phpfunction" onClick="logFunction('strtolower')" href="../../_functions/strtolower.html" onMouseOver="phpfuncPopup(event,'strtolower')">strtolower</a>(<a class="phpfunction" onClick="logFunction('ltrim')" href="../../_functions/ltrim.html" onMouseOver="phpfuncPopup(event,'ltrim')">ltrim</a>(<a class="var it4372" onMouseOver="hilite(4372)" onMouseOut="lolite()" onClick="logVariable('entry1')" href="../../_variables/entry1.html">$entry1</a>-&gt;<a onClick="logVariable('concept')" class="var it44145" onMouseOver="hilite(44145)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>)) ) {
<a name="l2129"><span class="linenum">2129</span></a>          return 1;
<a name="l2130"><span class="linenum">2130</span></a>      } else {
<a name="l2131"><span class="linenum">2131</span></a>          return 0;
<a name="l2132"><span class="linenum">2132</span></a>      }
<a name="l2133"><span class="linenum">2133</span></a>  }
<a name="l2134"><span class="linenum">2134</span></a>  
<a name="l2135"><span class="linenum">2135</span></a>  
<a name="l2136"><span class="linenum">2136</span></a>  <span class="comment">/**</span>
<a name="l2137"><span class="linenum">2137</span></a>  <span class="comment"> * @global object</span>
<a name="l2138"><span class="linenum">2138</span></a>  <span class="comment"> * @global object</span>
<a name="l2139"><span class="linenum">2139</span></a>  <span class="comment"> * @global object</span>
<a name="l2140"><span class="linenum">2140</span></a>  <span class="comment"> * @param object $course</span>
<a name="l2141"><span class="linenum">2141</span></a>  <span class="comment"> * @param object $entry</span>
<a name="l2142"><span class="linenum">2142</span></a>  <span class="comment"> * @return bool</span>
<a name="l2143"><span class="linenum">2143</span></a>  <span class="comment"> */</span>
<a name="l2144"><span class="linenum">2144</span></a>  function  <a class="function" onClick="logFunction('glossary_print_entry_ratings')" href="../../_functions/glossary_print_entry_ratings.html" onMouseOver="funcPopup(event,'glossary_print_entry_ratings')">glossary_print_entry_ratings</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>) {
<a name="l2145"><span class="linenum">2145</span></a>      global <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>;
<a name="l2146"><span class="linenum">2146</span></a>      if( !empty(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('rating')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/rating.html">rating</a>) ){
<a name="l2147"><span class="linenum">2147</span></a>          echo <a class="var it212" onMouseOver="hilite(212)" onMouseOut="lolite()" onClick="logVariable('OUTPUT')" href="../../_variables/OUTPUT.html">$OUTPUT</a>-&gt;<a class="function" onClick="logFunction('render')" href="../../_functions/render.html" onMouseOver="funcPopup(event,'render')">render</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('rating')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/rating.html">rating</a>);
<a name="l2148"><span class="linenum">2148</span></a>      }
<a name="l2149"><span class="linenum">2149</span></a>  }
<a name="l2150"><span class="linenum">2150</span></a>  
<a name="l2151"><span class="linenum">2151</span></a>  <span class="comment">/**</span>
<a name="l2152"><span class="linenum">2152</span></a>  <span class="comment"> *</span>
<a name="l2153"><span class="linenum">2153</span></a>  <span class="comment"> * @global object</span>
<a name="l2154"><span class="linenum">2154</span></a>  <span class="comment"> * @global object</span>
<a name="l2155"><span class="linenum">2155</span></a>  <span class="comment"> * @global object</span>
<a name="l2156"><span class="linenum">2156</span></a>  <span class="comment"> * @param int $courseid</span>
<a name="l2157"><span class="linenum">2157</span></a>  <span class="comment"> * @param array $entries</span>
<a name="l2158"><span class="linenum">2158</span></a>  <span class="comment"> * @param int $displayformat</span>
<a name="l2159"><span class="linenum">2159</span></a>  <span class="comment"> */</span>
<a name="l2160"><span class="linenum">2160</span></a>  function <a class="function" onClick="logFunction('glossary_print_dynaentry')" href="../../_functions/glossary_print_dynaentry.html" onMouseOver="funcPopup(event,'glossary_print_dynaentry')">glossary_print_dynaentry</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>, <a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a> = -1) {
<a name="l2161"><span class="linenum">2161</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>,<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2162"><span class="linenum">2162</span></a>  
<a name="l2163"><span class="linenum">2163</span></a>      echo '&lt;div class=&quot;boxaligncenter&quot;&gt;';
<a name="l2164"><span class="linenum">2164</span></a>      echo '&lt;table class=&quot;glossarypopup&quot; cellspacing=&quot;0&quot;&gt;&lt;tr&gt;';
<a name="l2165"><span class="linenum">2165</span></a>      echo '&lt;td&gt;';
<a name="l2166"><span class="linenum">2166</span></a>      if ( <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> ) {
<a name="l2167"><span class="linenum">2167</span></a>          foreach ( <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> as <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a> ) {
<a name="l2168"><span class="linenum">2168</span></a>              if (! <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary', array('id'=&gt;<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>))) {
<a name="l2169"><span class="linenum">2169</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidid', 'glossary');
<a name="l2170"><span class="linenum">2170</span></a>              }
<a name="l2171"><span class="linenum">2171</span></a>              if (! <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('course')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>))) {
<a name="l2172"><span class="linenum">2172</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('coursemisconf');
<a name="l2173"><span class="linenum">2173</span></a>              }
<a name="l2174"><span class="linenum">2174</span></a>              if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('course')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>) ) {
<a name="l2175"><span class="linenum">2175</span></a>                  <a class="function" onClick="logFunction('print_error')" href="../../_functions/print_error.html" onMouseOver="funcPopup(event,'print_error')">print_error</a>('invalidid', 'glossary');
<a name="l2176"><span class="linenum">2176</span></a>              }
<a name="l2177"><span class="linenum">2177</span></a>  
<a name="l2178"><span class="linenum">2178</span></a>  <span class="comment">            //If displayformat is present, override glossary-&gt;displayformat</span>
<a name="l2179"><span class="linenum">2179</span></a>              if (<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a> &lt; 0) {
<a name="l2180"><span class="linenum">2180</span></a>                  <a class="var it7920" onMouseOver="hilite(7920)" onMouseOut="lolite()" onClick="logVariable('dp')" href="../../_variables/dp.html">$dp</a> = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('displayformat')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/displayformat.html">displayformat</a>;
<a name="l2181"><span class="linenum">2181</span></a>              } else {
<a name="l2182"><span class="linenum">2182</span></a>                  <a class="var it7920" onMouseOver="hilite(7920)" onMouseOut="lolite()" onClick="logVariable('dp')" href="../../_variables/dp.html">$dp</a> = <a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>;
<a name="l2183"><span class="linenum">2183</span></a>              }
<a name="l2184"><span class="linenum">2184</span></a>  
<a name="l2185"><span class="linenum">2185</span></a>  <span class="comment">            //Get popupformatname</span>
<a name="l2186"><span class="linenum">2186</span></a>              <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary_formats', array('name'=&gt;<a class="var it7920" onMouseOver="hilite(7920)" onMouseOut="lolite()" onClick="logVariable('dp')" href="../../_variables/dp.html">$dp</a>));
<a name="l2187"><span class="linenum">2187</span></a>              <a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a> = <a class="var it606" onMouseOver="hilite(606)" onMouseOut="lolite()" onClick="logVariable('format')" href="../../_variables/format.html">$format</a>-&gt;<a onClick="logVariable('popupformatname')" class="var it44201" onMouseOver="hilite(44201)" onMouseOut="lolite()" href="../../_variables/popupformatname.html">popupformatname</a>;
<a name="l2188"><span class="linenum">2188</span></a>  
<a name="l2189"><span class="linenum">2189</span></a>  <span class="comment">            //Check displayformat variable and set to default if necessary</span>
<a name="l2190"><span class="linenum">2190</span></a>              if (!<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>) {
<a name="l2191"><span class="linenum">2191</span></a>                  <a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a> = 'dictionary';
<a name="l2192"><span class="linenum">2192</span></a>              }
<a name="l2193"><span class="linenum">2193</span></a>  
<a name="l2194"><span class="linenum">2194</span></a>              <a class="var it8530" onMouseOver="hilite(8530)" onMouseOut="lolite()" onClick="logVariable('formatfile')" href="../../_variables/formatfile.html">$formatfile</a> = <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'/mod/glossary/formats/'.<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>.'/'.<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>.'_format.php';
<a name="l2195"><span class="linenum">2195</span></a>              <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../../_variables/functionname.html">$functionname</a> = 'glossary_show_entry_'.<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>;
<a name="l2196"><span class="linenum">2196</span></a>  
<a name="l2197"><span class="linenum">2197</span></a>              if (<a class="phpfunction" onClick="logFunction('file_exists')" href="../../_functions/file_exists.html" onMouseOver="phpfuncPopup(event,'file_exists')">file_exists</a>(<a class="var it8530" onMouseOver="hilite(8530)" onMouseOut="lolite()" onClick="logVariable('formatfile')" href="../../_variables/formatfile.html">$formatfile</a>)) {
<a name="l2198"><span class="linenum">2198</span></a>                  include_once(<a class="var it8530" onMouseOver="hilite(8530)" onMouseOut="lolite()" onClick="logVariable('formatfile')" href="../../_variables/formatfile.html">$formatfile</a>);
<a name="l2199"><span class="linenum">2199</span></a>                  if (<a class="phpfunction" onClick="logFunction('function_exists')" href="../../_functions/function_exists.html" onMouseOver="phpfuncPopup(event,'function_exists')">function_exists</a>(<a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../../_variables/functionname.html">$functionname</a>)) {
<a name="l2200"><span class="linenum">2200</span></a>                      <a class="var it2244" onMouseOver="hilite(2244)" onMouseOut="lolite()" onClick="logVariable('functionname')" href="../../_variables/functionname.html">$functionname</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>,'','','','');
<a name="l2201"><span class="linenum">2201</span></a>                  }
<a name="l2202"><span class="linenum">2202</span></a>              }
<a name="l2203"><span class="linenum">2203</span></a>          }
<a name="l2204"><span class="linenum">2204</span></a>      }
<a name="l2205"><span class="linenum">2205</span></a>      echo '&lt;/td&gt;';
<a name="l2206"><span class="linenum">2206</span></a>      echo '&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;';
<a name="l2207"><span class="linenum">2207</span></a>  }
<a name="l2208"><span class="linenum">2208</span></a>  
<a name="l2209"><span class="linenum">2209</span></a>  <span class="comment">/**</span>
<a name="l2210"><span class="linenum">2210</span></a>  <span class="comment"> *</span>
<a name="l2211"><span class="linenum">2211</span></a>  <span class="comment"> * @global object</span>
<a name="l2212"><span class="linenum">2212</span></a>  <span class="comment"> * @param array $entries</span>
<a name="l2213"><span class="linenum">2213</span></a>  <span class="comment"> * @param array $aliases</span>
<a name="l2214"><span class="linenum">2214</span></a>  <span class="comment"> * @param array $categories</span>
<a name="l2215"><span class="linenum">2215</span></a>  <span class="comment"> * @return string</span>
<a name="l2216"><span class="linenum">2216</span></a>  <span class="comment"> */</span>
<a name="l2217"><span class="linenum">2217</span></a>  function <a class="function" onClick="logFunction('glossary_generate_export_csv')" href="../../_functions/glossary_generate_export_csv.html" onMouseOver="funcPopup(event,'glossary_generate_export_csv')">glossary_generate_export_csv</a>(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>, <a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a>, <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a>) {
<a name="l2218"><span class="linenum">2218</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2219"><span class="linenum">2219</span></a>      <a class="var it8840" onMouseOver="hilite(8840)" onMouseOut="lolite()" onClick="logVariable('csv')" href="../../_variables/csv.html">$csv</a> = '';
<a name="l2220"><span class="linenum">2220</span></a>      <a class="var it5614" onMouseOver="hilite(5614)" onMouseOut="lolite()" onClick="logVariable('delimiter')" href="../../_variables/delimiter.html">$delimiter</a> = '';
<a name="l2221"><span class="linenum">2221</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a> . '/csvlib.class.php');
<a name="l2222"><span class="linenum">2222</span></a>      <a class="var it5614" onMouseOver="hilite(5614)" onMouseOut="lolite()" onClick="logVariable('delimiter')" href="../../_variables/delimiter.html">$delimiter</a> = <a class="class" onClick="logClass('csv_import_reader')" href="../../_classes/csv_import_reader.html" onMouseOver="classPopup(event,'csv_import_reader')">csv_import_reader</a>::<a class="function" onClick="logFunction('get_delimiter')" href="../../_functions/get_delimiter.html" onMouseOver="funcPopup(event,'get_delimiter')">get_delimiter</a>('comma');
<a name="l2223"><span class="linenum">2223</span></a>      <a class="var it12639" onMouseOver="hilite(12639)" onMouseOut="lolite()" onClick="logVariable('csventries')" href="../../_variables/csventries.html">$csventries</a> = array(0 =&gt; array(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('concept', 'glossary'), <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('definition', 'glossary')));
<a name="l2224"><span class="linenum">2224</span></a>      <a class="var it12640" onMouseOver="hilite(12640)" onMouseOut="lolite()" onClick="logVariable('csvaliases')" href="../../_variables/csvaliases.html">$csvaliases</a> = array(0 =&gt; array());
<a name="l2225"><span class="linenum">2225</span></a>      <a class="var it12641" onMouseOver="hilite(12641)" onMouseOut="lolite()" onClick="logVariable('csvcategories')" href="../../_variables/csvcategories.html">$csvcategories</a> = array(0 =&gt; array());
<a name="l2226"><span class="linenum">2226</span></a>      <a class="var it12642" onMouseOver="hilite(12642)" onMouseOut="lolite()" onClick="logVariable('aliascount')" href="../../_variables/aliascount.html">$aliascount</a> = 0;
<a name="l2227"><span class="linenum">2227</span></a>      <a class="var it12643" onMouseOver="hilite(12643)" onMouseOut="lolite()" onClick="logVariable('categorycount')" href="../../_variables/categorycount.html">$categorycount</a> = 0;
<a name="l2228"><span class="linenum">2228</span></a>  
<a name="l2229"><span class="linenum">2229</span></a>      foreach (<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> as <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>) {
<a name="l2230"><span class="linenum">2230</span></a>          <a class="var it12644" onMouseOver="hilite(12644)" onMouseOut="lolite()" onClick="logVariable('thisaliasesentry')" href="../../_variables/thisaliasesentry.html">$thisaliasesentry</a> = array();
<a name="l2231"><span class="linenum">2231</span></a>          <a class="var it12645" onMouseOver="hilite(12645)" onMouseOut="lolite()" onClick="logVariable('thiscategoriesentry')" href="../../_variables/thiscategoriesentry.html">$thiscategoriesentry</a> = array();
<a name="l2232"><span class="linenum">2232</span></a>          <a class="var it12646" onMouseOver="hilite(12646)" onMouseOut="lolite()" onClick="logVariable('thiscsventry')" href="../../_variables/thiscsventry.html">$thiscsventry</a> = array(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('concept')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>, <a class="phpfunction" onClick="logFunction('nl2br')" href="../../_functions/nl2br.html" onMouseOver="phpfuncPopup(event,'nl2br')">nl2br</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('definition')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/definition.html">definition</a>));
<a name="l2233"><span class="linenum">2233</span></a>  
<a name="l2234"><span class="linenum">2234</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a>[<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>])) {
<a name="l2235"><span class="linenum">2235</span></a>              <a class="var it12647" onMouseOver="hilite(12647)" onMouseOut="lolite()" onClick="logVariable('thiscount')" href="../../_variables/thiscount.html">$thiscount</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a>[<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]);
<a name="l2236"><span class="linenum">2236</span></a>              if (<a class="var it12647" onMouseOver="hilite(12647)" onMouseOut="lolite()" onClick="logVariable('thiscount')" href="../../_variables/thiscount.html">$thiscount</a> &gt; <a class="var it12642" onMouseOver="hilite(12642)" onMouseOut="lolite()" onClick="logVariable('aliascount')" href="../../_variables/aliascount.html">$aliascount</a>) {
<a name="l2237"><span class="linenum">2237</span></a>                  <a class="var it12642" onMouseOver="hilite(12642)" onMouseOut="lolite()" onClick="logVariable('aliascount')" href="../../_variables/aliascount.html">$aliascount</a> = <a class="var it12647" onMouseOver="hilite(12647)" onMouseOut="lolite()" onClick="logVariable('thiscount')" href="../../_variables/thiscount.html">$thiscount</a>;
<a name="l2238"><span class="linenum">2238</span></a>              }
<a name="l2239"><span class="linenum">2239</span></a>              foreach (<a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a>[<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] as <a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a>) {
<a name="l2240"><span class="linenum">2240</span></a>                  <a class="var it12644" onMouseOver="hilite(12644)" onMouseOut="lolite()" onClick="logVariable('thisaliasesentry')" href="../../_variables/thisaliasesentry.html">$thisaliasesentry</a>[] = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a>);
<a name="l2241"><span class="linenum">2241</span></a>              }
<a name="l2242"><span class="linenum">2242</span></a>          }
<a name="l2243"><span class="linenum">2243</span></a>          if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a>) &amp;&amp; <a class="phpfunction" onClick="logFunction('is_array')" href="../../_functions/is_array.html" onMouseOver="phpfuncPopup(event,'is_array')">is_array</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a>[<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>])) {
<a name="l2244"><span class="linenum">2244</span></a>              <a class="var it12647" onMouseOver="hilite(12647)" onMouseOut="lolite()" onClick="logVariable('thiscount')" href="../../_variables/thiscount.html">$thiscount</a> = <a class="phpfunction" onClick="logFunction('count')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">count</a>(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a>[<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>]);
<a name="l2245"><span class="linenum">2245</span></a>              if (<a class="var it12647" onMouseOver="hilite(12647)" onMouseOut="lolite()" onClick="logVariable('thiscount')" href="../../_variables/thiscount.html">$thiscount</a> &gt; <a class="var it12643" onMouseOver="hilite(12643)" onMouseOut="lolite()" onClick="logVariable('categorycount')" href="../../_variables/categorycount.html">$categorycount</a>) {
<a name="l2246"><span class="linenum">2246</span></a>                  <a class="var it12643" onMouseOver="hilite(12643)" onMouseOut="lolite()" onClick="logVariable('categorycount')" href="../../_variables/categorycount.html">$categorycount</a> = <a class="var it12647" onMouseOver="hilite(12647)" onMouseOut="lolite()" onClick="logVariable('thiscount')" href="../../_variables/thiscount.html">$thiscount</a>;
<a name="l2247"><span class="linenum">2247</span></a>              }
<a name="l2248"><span class="linenum">2248</span></a>              foreach (<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a>[<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] as <a class="var it12648" onMouseOver="hilite(12648)" onMouseOut="lolite()" onClick="logVariable('catentry')" href="../../_variables/catentry.html">$catentry</a>) {
<a name="l2249"><span class="linenum">2249</span></a>                  <a class="var it12645" onMouseOver="hilite(12645)" onMouseOut="lolite()" onClick="logVariable('thiscategoriesentry')" href="../../_variables/thiscategoriesentry.html">$thiscategoriesentry</a>[] = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it12648" onMouseOver="hilite(12648)" onMouseOut="lolite()" onClick="logVariable('catentry')" href="../../_variables/catentry.html">$catentry</a>);
<a name="l2250"><span class="linenum">2250</span></a>              }
<a name="l2251"><span class="linenum">2251</span></a>          }
<a name="l2252"><span class="linenum">2252</span></a>          <a class="var it12639" onMouseOver="hilite(12639)" onMouseOut="lolite()" onClick="logVariable('csventries')" href="../../_variables/csventries.html">$csventries</a>[<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it12646" onMouseOver="hilite(12646)" onMouseOut="lolite()" onClick="logVariable('thiscsventry')" href="../../_variables/thiscsventry.html">$thiscsventry</a>;
<a name="l2253"><span class="linenum">2253</span></a>          <a class="var it12640" onMouseOver="hilite(12640)" onMouseOut="lolite()" onClick="logVariable('csvaliases')" href="../../_variables/csvaliases.html">$csvaliases</a>[<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it12644" onMouseOver="hilite(12644)" onMouseOut="lolite()" onClick="logVariable('thisaliasesentry')" href="../../_variables/thisaliasesentry.html">$thisaliasesentry</a>;
<a name="l2254"><span class="linenum">2254</span></a>          <a class="var it12641" onMouseOver="hilite(12641)" onMouseOut="lolite()" onClick="logVariable('csvcategories')" href="../../_variables/csvcategories.html">$csvcategories</a>[<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>] = <a class="var it12645" onMouseOver="hilite(12645)" onMouseOut="lolite()" onClick="logVariable('thiscategoriesentry')" href="../../_variables/thiscategoriesentry.html">$thiscategoriesentry</a>;
<a name="l2255"><span class="linenum">2255</span></a>  
<a name="l2256"><span class="linenum">2256</span></a>      }
<a name="l2257"><span class="linenum">2257</span></a>      <a class="var it12649" onMouseOver="hilite(12649)" onMouseOut="lolite()" onClick="logVariable('returnstr')" href="../../_variables/returnstr.html">$returnstr</a> = '';
<a name="l2258"><span class="linenum">2258</span></a>      foreach (<a class="var it12639" onMouseOver="hilite(12639)" onMouseOut="lolite()" onClick="logVariable('csventries')" href="../../_variables/csventries.html">$csventries</a> as <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> =&gt; <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>) {
<a name="l2259"><span class="linenum">2259</span></a>          <a class="var it12650" onMouseOver="hilite(12650)" onMouseOut="lolite()" onClick="logVariable('aliasstr')" href="../../_variables/aliasstr.html">$aliasstr</a> = '';
<a name="l2260"><span class="linenum">2260</span></a>          <a class="var it12651" onMouseOver="hilite(12651)" onMouseOut="lolite()" onClick="logVariable('categorystr')" href="../../_variables/categorystr.html">$categorystr</a> = '';
<a name="l2261"><span class="linenum">2261</span></a>          if (<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a> == 0) {
<a name="l2262"><span class="linenum">2262</span></a>              <a class="var it12650" onMouseOver="hilite(12650)" onMouseOut="lolite()" onClick="logVariable('aliasstr')" href="../../_variables/aliasstr.html">$aliasstr</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('alias', 'glossary');
<a name="l2263"><span class="linenum">2263</span></a>              <a class="var it12651" onMouseOver="hilite(12651)" onMouseOut="lolite()" onClick="logVariable('categorystr')" href="../../_variables/categorystr.html">$categorystr</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('category', 'glossary');
<a name="l2264"><span class="linenum">2264</span></a>          }
<a name="l2265"><span class="linenum">2265</span></a>          <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a> = <a class="phpfunction" onClick="logFunction('array_merge')" href="../../_functions/array_merge.html" onMouseOver="phpfuncPopup(event,'array_merge')">array_merge</a>(<a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>, <a class="phpfunction" onClick="logFunction('array_pad')" href="../../_functions/array_pad.html" onMouseOver="phpfuncPopup(event,'array_pad')">array_pad</a>(<a class="var it12640" onMouseOver="hilite(12640)" onMouseOut="lolite()" onClick="logVariable('csvaliases')" href="../../_variables/csvaliases.html">$csvaliases</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>], <a class="var it12642" onMouseOver="hilite(12642)" onMouseOut="lolite()" onClick="logVariable('aliascount')" href="../../_variables/aliascount.html">$aliascount</a>, <a class="var it12650" onMouseOver="hilite(12650)" onMouseOut="lolite()" onClick="logVariable('aliasstr')" href="../../_variables/aliasstr.html">$aliasstr</a>), <a class="phpfunction" onClick="logFunction('array_pad')" href="../../_functions/array_pad.html" onMouseOver="phpfuncPopup(event,'array_pad')">array_pad</a>(<a class="var it12641" onMouseOver="hilite(12641)" onMouseOut="lolite()" onClick="logVariable('csvcategories')" href="../../_variables/csvcategories.html">$csvcategories</a>[<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>], <a class="var it12643" onMouseOver="hilite(12643)" onMouseOut="lolite()" onClick="logVariable('categorycount')" href="../../_variables/categorycount.html">$categorycount</a>, <a class="var it12651" onMouseOver="hilite(12651)" onMouseOut="lolite()" onClick="logVariable('categorystr')" href="../../_variables/categorystr.html">$categorystr</a>));
<a name="l2266"><span class="linenum">2266</span></a>          <a class="var it12649" onMouseOver="hilite(12649)" onMouseOut="lolite()" onClick="logVariable('returnstr')" href="../../_variables/returnstr.html">$returnstr</a> .= '&quot;' . <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>('&quot;' . <a class="var it5614" onMouseOver="hilite(5614)" onMouseOut="lolite()" onClick="logVariable('delimiter')" href="../../_variables/delimiter.html">$delimiter</a> . '&quot;', <a class="var it57" onMouseOver="hilite(57)" onMouseOut="lolite()" onClick="logVariable('row')" href="../../_variables/row.html">$row</a>) . '&quot;' . &quot;\n&quot;;
<a name="l2267"><span class="linenum">2267</span></a>      }
<a name="l2268"><span class="linenum">2268</span></a>      return <a class="var it12649" onMouseOver="hilite(12649)" onMouseOut="lolite()" onClick="logVariable('returnstr')" href="../../_variables/returnstr.html">$returnstr</a>;
<a name="l2269"><span class="linenum">2269</span></a>  }
<a name="l2270"><span class="linenum">2270</span></a>  
<a name="l2271"><span class="linenum">2271</span></a>  <span class="comment">/**</span>
<a name="l2272"><span class="linenum">2272</span></a>  <span class="comment"> *</span>
<a name="l2273"><span class="linenum">2273</span></a>  <span class="comment"> * @param object $glossary</span>
<a name="l2274"><span class="linenum">2274</span></a>  <span class="comment"> * @param string $ignored invalid parameter</span>
<a name="l2275"><span class="linenum">2275</span></a>  <span class="comment"> * @param int|string $hook</span>
<a name="l2276"><span class="linenum">2276</span></a>  <span class="comment"> * @return string</span>
<a name="l2277"><span class="linenum">2277</span></a>  <span class="comment"> */</span>
<a name="l2278"><span class="linenum">2278</span></a>  function <a class="function" onClick="logFunction('glossary_generate_export_file')" href="../../_functions/glossary_generate_export_file.html" onMouseOver="funcPopup(event,'glossary_generate_export_file')">glossary_generate_export_file</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it2583" onMouseOver="hilite(2583)" onMouseOut="lolite()" onClick="logVariable('ignored')" href="../../_variables/ignored.html">$ignored</a> = &quot;&quot;, <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a> = 0) {
<a name="l2279"><span class="linenum">2279</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2280"><span class="linenum">2280</span></a>  
<a name="l2281"><span class="linenum">2281</span></a>  <span class="comment">    // Large exports are likely to take their time and memory.</span>
<a name="l2282"><span class="linenum">2282</span></a>      <a class="class" onClick="logClass('core_php_time_limit')" href="../../_classes/core_php_time_limit.html" onMouseOver="classPopup(event,'core_php_time_limit')">core_php_time_limit</a>::<a class="function" onClick="logFunction('raise')" href="../../_functions/raise.html" onMouseOver="funcPopup(event,'raise')">raise</a>();
<a name="l2283"><span class="linenum">2283</span></a>      <a class="function" onClick="logFunction('raise_memory_limit')" href="../../_functions/raise_memory_limit.html" onMouseOver="funcPopup(event,'raise_memory_limit')">raise_memory_limit</a>(<a class="constant" onClick="logConstant('MEMORY_EXTRA')" href="../../_constants/MEMORY_EXTRA.html" onMouseOver="constPopup(event,'MEMORY_EXTRA')">MEMORY_EXTRA</a>);
<a name="l2284"><span class="linenum">2284</span></a>  
<a name="l2285"><span class="linenum">2285</span></a>      <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('course')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>);
<a name="l2286"><span class="linenum">2286</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2287"><span class="linenum">2287</span></a>  
<a name="l2288"><span class="linenum">2288</span></a>      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a>  = &quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;;
<a name="l2289"><span class="linenum">2289</span></a>  
<a name="l2290"><span class="linenum">2290</span></a>      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_start_tag')" href="../../_functions/glossary_start_tag.html" onMouseOver="funcPopup(event,'glossary_start_tag')">glossary_start_tag</a>(&quot;GLOSSARY&quot;,0,true);
<a name="l2291"><span class="linenum">2291</span></a>      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_start_tag')" href="../../_functions/glossary_start_tag.html" onMouseOver="funcPopup(event,'glossary_start_tag')">glossary_start_tag</a>(&quot;INFO&quot;,1,true);
<a name="l2292"><span class="linenum">2292</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;NAME&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('name')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l2293"><span class="linenum">2293</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;INTRO&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('intro')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/intro.html">intro</a>);
<a name="l2294"><span class="linenum">2294</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;INTROFORMAT&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('introformat')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/introformat.html">introformat</a>);
<a name="l2295"><span class="linenum">2295</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;ALLOWDUPLICATEDENTRIES&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('allowduplicatedentries')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/allowduplicatedentries.html">allowduplicatedentries</a>);
<a name="l2296"><span class="linenum">2296</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;DISPLAYFORMAT&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('displayformat')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/displayformat.html">displayformat</a>);
<a name="l2297"><span class="linenum">2297</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;SHOWSPECIAL&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('showspecial')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/showspecial.html">showspecial</a>);
<a name="l2298"><span class="linenum">2298</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;SHOWALPHABET&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('showalphabet')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/showalphabet.html">showalphabet</a>);
<a name="l2299"><span class="linenum">2299</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;SHOWALL&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('showall')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/showall.html">showall</a>);
<a name="l2300"><span class="linenum">2300</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;ALLOWCOMMENTS&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('allowcomments')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/allowcomments.html">allowcomments</a>);
<a name="l2301"><span class="linenum">2301</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;USEDYNALINK&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('usedynalink')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/usedynalink.html">usedynalink</a>);
<a name="l2302"><span class="linenum">2302</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;DEFAULTAPPROVAL&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('defaultapproval')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/defaultapproval.html">defaultapproval</a>);
<a name="l2303"><span class="linenum">2303</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;GLOBALGLOSSARY&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('globalglossary')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/globalglossary.html">globalglossary</a>);
<a name="l2304"><span class="linenum">2304</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;ENTBYPAGE&quot;,2,false,<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('entbypage')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/entbypage.html">entbypage</a>);
<a name="l2305"><span class="linenum">2305</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_xml_export_files')" href="../../_functions/glossary_xml_export_files.html" onMouseOver="funcPopup(event,'glossary_xml_export_files')">glossary_xml_export_files</a>('INTROFILES', 2, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'intro', 0);
<a name="l2306"><span class="linenum">2306</span></a>  
<a name="l2307"><span class="linenum">2307</span></a>          if ( <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;glossary_entries&quot;, array(&quot;glossaryid&quot;=&gt;<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l2308"><span class="linenum">2308</span></a>              <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_start_tag')" href="../../_functions/glossary_start_tag.html" onMouseOver="funcPopup(event,'glossary_start_tag')">glossary_start_tag</a>(&quot;ENTRIES&quot;,2,true);
<a name="l2309"><span class="linenum">2309</span></a>              foreach (<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> as <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>) {
<a name="l2310"><span class="linenum">2310</span></a>                  <a class="var it12652" onMouseOver="hilite(12652)" onMouseOut="lolite()" onClick="logVariable('permissiongranted')" href="../../_variables/permissiongranted.html">$permissiongranted</a> = 1;
<a name="l2311"><span class="linenum">2311</span></a>                  if ( <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a> ) {
<a name="l2312"><span class="linenum">2312</span></a>                      switch ( <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a> ) {
<a name="l2313"><span class="linenum">2313</span></a>                      case &quot;ALL&quot;:
<a name="l2314"><span class="linenum">2314</span></a>                      case &quot;SPECIAL&quot;:
<a name="l2315"><span class="linenum">2315</span></a>                      break;
<a name="l2316"><span class="linenum">2316</span></a>                      default:
<a name="l2317"><span class="linenum">2317</span></a>                          <a class="var it12652" onMouseOver="hilite(12652)" onMouseOut="lolite()" onClick="logVariable('permissiongranted')" href="../../_variables/permissiongranted.html">$permissiongranted</a> = (<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('concept')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>[ <a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>)-1 ] == <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>);
<a name="l2318"><span class="linenum">2318</span></a>                      break;
<a name="l2319"><span class="linenum">2319</span></a>                      }
<a name="l2320"><span class="linenum">2320</span></a>                  }
<a name="l2321"><span class="linenum">2321</span></a>                  if ( <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a> ) {
<a name="l2322"><span class="linenum">2322</span></a>                      switch ( <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a> ) {
<a name="l2323"><span class="linenum">2323</span></a>                      case <a class="constant" onClick="logConstant('GLOSSARY_SHOW_ALL_CATEGORIES')" href="../../_constants/GLOSSARY_SHOW_ALL_CATEGORIES.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_ALL_CATEGORIES')">GLOSSARY_SHOW_ALL_CATEGORIES</a>:
<a name="l2324"><span class="linenum">2324</span></a>                      break;
<a name="l2325"><span class="linenum">2325</span></a>                      case <a class="constant" onClick="logConstant('GLOSSARY_SHOW_NOT_CATEGORISED')" href="../../_constants/GLOSSARY_SHOW_NOT_CATEGORISED.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_NOT_CATEGORISED')">GLOSSARY_SHOW_NOT_CATEGORISED</a>:
<a name="l2326"><span class="linenum">2326</span></a>                          <a class="var it12652" onMouseOver="hilite(12652)" onMouseOut="lolite()" onClick="logVariable('permissiongranted')" href="../../_variables/permissiongranted.html">$permissiongranted</a> = !<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>(&quot;glossary_entries_categories&quot;, array(&quot;entryid&quot;=&gt;<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2327"><span class="linenum">2327</span></a>                      break;
<a name="l2328"><span class="linenum">2328</span></a>                      default:
<a name="l2329"><span class="linenum">2329</span></a>                          <a class="var it12652" onMouseOver="hilite(12652)" onMouseOut="lolite()" onClick="logVariable('permissiongranted')" href="../../_variables/permissiongranted.html">$permissiongranted</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists')" href="../../_functions/record_exists.html" onMouseOver="funcPopup(event,'record_exists')">record_exists</a>(&quot;glossary_entries_categories&quot;, array(&quot;entryid&quot;=&gt;<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, &quot;categoryid&quot;=&gt;<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>));
<a name="l2330"><span class="linenum">2330</span></a>                      break;
<a name="l2331"><span class="linenum">2331</span></a>                      }
<a name="l2332"><span class="linenum">2332</span></a>                  }
<a name="l2333"><span class="linenum">2333</span></a>                  if ( <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('approved')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a> and <a class="var it12652" onMouseOver="hilite(12652)" onMouseOut="lolite()" onClick="logVariable('permissiongranted')" href="../../_variables/permissiongranted.html">$permissiongranted</a> ) {
<a name="l2334"><span class="linenum">2334</span></a>                      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_start_tag')" href="../../_functions/glossary_start_tag.html" onMouseOver="funcPopup(event,'glossary_start_tag')">glossary_start_tag</a>(&quot;ENTRY&quot;,3,true);
<a name="l2335"><span class="linenum">2335</span></a>                      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;CONCEPT&quot;,4,false,<a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('concept')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/concept.html">concept</a>));
<a name="l2336"><span class="linenum">2336</span></a>                      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;DEFINITION&quot;,4,false,<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('definition')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/definition.html">definition</a>);
<a name="l2337"><span class="linenum">2337</span></a>                      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;FORMAT&quot;,4,false,<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('definitionformat')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/definitionformat.html">definitionformat</a>); <span class="comment">// note: use old name for BC reasons</span>
<a name="l2338"><span class="linenum">2338</span></a>                      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;USEDYNALINK&quot;,4,false,<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('usedynalink')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/usedynalink.html">usedynalink</a>);
<a name="l2339"><span class="linenum">2339</span></a>                      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;CASESENSITIVE&quot;,4,false,<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('casesensitive')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/casesensitive.html">casesensitive</a>);
<a name="l2340"><span class="linenum">2340</span></a>                      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;FULLMATCH&quot;,4,false,<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('fullmatch')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/fullmatch.html">fullmatch</a>);
<a name="l2341"><span class="linenum">2341</span></a>                      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;TEACHERENTRY&quot;,4,false,<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('teacherentry')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/teacherentry.html">teacherentry</a>);
<a name="l2342"><span class="linenum">2342</span></a>  
<a name="l2343"><span class="linenum">2343</span></a>                      if ( <a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;glossary_alias&quot;, array(&quot;entryid&quot;=&gt;<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l2344"><span class="linenum">2344</span></a>                          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_start_tag')" href="../../_functions/glossary_start_tag.html" onMouseOver="funcPopup(event,'glossary_start_tag')">glossary_start_tag</a>(&quot;ALIASES&quot;,4,true);
<a name="l2345"><span class="linenum">2345</span></a>                          foreach (<a class="var it780" onMouseOver="hilite(780)" onMouseOut="lolite()" onClick="logVariable('aliases')" href="../../_variables/aliases.html">$aliases</a> as <a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a>) {
<a name="l2346"><span class="linenum">2346</span></a>                              <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_start_tag')" href="../../_functions/glossary_start_tag.html" onMouseOver="funcPopup(event,'glossary_start_tag')">glossary_start_tag</a>(&quot;ALIAS&quot;,5,true);
<a name="l2347"><span class="linenum">2347</span></a>                                  <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;NAME&quot;,6,false,<a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it779" onMouseOver="hilite(779)" onMouseOut="lolite()" onClick="logVariable('alias')" href="../../_variables/alias.html">$alias</a>-&gt;<a onClick="logVariable('alias')" class="var it44086" onMouseOver="hilite(44086)" onMouseOut="lolite()" href="../../_variables/alias.html">alias</a>));
<a name="l2348"><span class="linenum">2348</span></a>                              <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_end_tag')" href="../../_functions/glossary_end_tag.html" onMouseOver="funcPopup(event,'glossary_end_tag')">glossary_end_tag</a>(&quot;ALIAS&quot;,5,true);
<a name="l2349"><span class="linenum">2349</span></a>                          }
<a name="l2350"><span class="linenum">2350</span></a>                          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_end_tag')" href="../../_functions/glossary_end_tag.html" onMouseOver="funcPopup(event,'glossary_end_tag')">glossary_end_tag</a>(&quot;ALIASES&quot;,4,true);
<a name="l2351"><span class="linenum">2351</span></a>                      }
<a name="l2352"><span class="linenum">2352</span></a>                      if ( <a class="var it12655" onMouseOver="hilite(12655)" onMouseOut="lolite()" onClick="logVariable('catentries')" href="../../_variables/catentries.html">$catentries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>(&quot;glossary_entries_categories&quot;, array(&quot;entryid&quot;=&gt;<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>))) {
<a name="l2353"><span class="linenum">2353</span></a>                          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_start_tag')" href="../../_functions/glossary_start_tag.html" onMouseOver="funcPopup(event,'glossary_start_tag')">glossary_start_tag</a>(&quot;CATEGORIES&quot;,4,true);
<a name="l2354"><span class="linenum">2354</span></a>                          foreach (<a class="var it12655" onMouseOver="hilite(12655)" onMouseOut="lolite()" onClick="logVariable('catentries')" href="../../_variables/catentries.html">$catentries</a> as <a class="var it12648" onMouseOver="hilite(12648)" onMouseOut="lolite()" onClick="logVariable('catentry')" href="../../_variables/catentry.html">$catentry</a>) {
<a name="l2355"><span class="linenum">2355</span></a>                              <a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>(&quot;glossary_categories&quot;, array(&quot;id&quot;=&gt;<a class="var it12648" onMouseOver="hilite(12648)" onMouseOut="lolite()" onClick="logVariable('catentry')" href="../../_variables/catentry.html">$catentry</a>-&gt;<a onClick="logVariable('categoryid')" class="var it44554" onMouseOver="hilite(44554)" onMouseOut="lolite()" href="../../_variables/categoryid.html">categoryid</a>));
<a name="l2356"><span class="linenum">2356</span></a>  
<a name="l2357"><span class="linenum">2357</span></a>                              <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_start_tag')" href="../../_functions/glossary_start_tag.html" onMouseOver="funcPopup(event,'glossary_start_tag')">glossary_start_tag</a>(&quot;CATEGORY&quot;,5,true);
<a name="l2358"><span class="linenum">2358</span></a>                                  <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;NAME&quot;,6,false,<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('name')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>);
<a name="l2359"><span class="linenum">2359</span></a>                                  <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(&quot;USEDYNALINK&quot;,6,false,<a class="var it261" onMouseOver="hilite(261)" onMouseOut="lolite()" onClick="logVariable('category')" href="../../_variables/category.html">$category</a>-&gt;<a onClick="logVariable('usedynalink')" class="var it42970" onMouseOver="hilite(42970)" onMouseOut="lolite()" href="../../_variables/usedynalink.html">usedynalink</a>);
<a name="l2360"><span class="linenum">2360</span></a>                              <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_end_tag')" href="../../_functions/glossary_end_tag.html" onMouseOver="funcPopup(event,'glossary_end_tag')">glossary_end_tag</a>(&quot;CATEGORY&quot;,5,true);
<a name="l2361"><span class="linenum">2361</span></a>                          }
<a name="l2362"><span class="linenum">2362</span></a>                          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_end_tag')" href="../../_functions/glossary_end_tag.html" onMouseOver="funcPopup(event,'glossary_end_tag')">glossary_end_tag</a>(&quot;CATEGORIES&quot;,4,true);
<a name="l2363"><span class="linenum">2363</span></a>                      }
<a name="l2364"><span class="linenum">2364</span></a>  
<a name="l2365"><span class="linenum">2365</span></a>  <span class="comment">                    // Export files embedded in entries.</span>
<a name="l2366"><span class="linenum">2366</span></a>                      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_xml_export_files')" href="../../_functions/glossary_xml_export_files.html" onMouseOver="funcPopup(event,'glossary_xml_export_files')">glossary_xml_export_files</a>('ENTRYFILES', 4, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'entry', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2367"><span class="linenum">2367</span></a>  
<a name="l2368"><span class="linenum">2368</span></a>  <span class="comment">                    // Export attachments.</span>
<a name="l2369"><span class="linenum">2369</span></a>                      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_xml_export_files')" href="../../_functions/glossary_xml_export_files.html" onMouseOver="funcPopup(event,'glossary_xml_export_files')">glossary_xml_export_files</a>('ATTACHMENTFILES', 4, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'attachment', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2370"><span class="linenum">2370</span></a>  
<a name="l2371"><span class="linenum">2371</span></a>                      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_end_tag')" href="../../_functions/glossary_end_tag.html" onMouseOver="funcPopup(event,'glossary_end_tag')">glossary_end_tag</a>(&quot;ENTRY&quot;,3,true);
<a name="l2372"><span class="linenum">2372</span></a>                  }
<a name="l2373"><span class="linenum">2373</span></a>              }
<a name="l2374"><span class="linenum">2374</span></a>              <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_end_tag')" href="../../_functions/glossary_end_tag.html" onMouseOver="funcPopup(event,'glossary_end_tag')">glossary_end_tag</a>(&quot;ENTRIES&quot;,2,true);
<a name="l2375"><span class="linenum">2375</span></a>  
<a name="l2376"><span class="linenum">2376</span></a>          }
<a name="l2377"><span class="linenum">2377</span></a>  
<a name="l2378"><span class="linenum">2378</span></a>  
<a name="l2379"><span class="linenum">2379</span></a>      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_end_tag')" href="../../_functions/glossary_end_tag.html" onMouseOver="funcPopup(event,'glossary_end_tag')">glossary_end_tag</a>(&quot;INFO&quot;,1,true);
<a name="l2380"><span class="linenum">2380</span></a>      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_end_tag')" href="../../_functions/glossary_end_tag.html" onMouseOver="funcPopup(event,'glossary_end_tag')">glossary_end_tag</a>(&quot;GLOSSARY&quot;,0,true);
<a name="l2381"><span class="linenum">2381</span></a>  
<a name="l2382"><span class="linenum">2382</span></a>      return <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a>;
<a name="l2383"><span class="linenum">2383</span></a>  }
<a name="l2384"><span class="linenum">2384</span></a>  <span class="comment">/// Functions designed by Eloy Lafuente</span>
<a name="l2385"><span class="linenum">2385</span></a>  <span class="comment">/// Functions to create, open and write header of the xml file</span>
<a name="l2386"><span class="linenum">2386</span></a>  
<a name="l2387"><span class="linenum">2387</span></a>  <span class="comment">/**</span>
<a name="l2388"><span class="linenum">2388</span></a>  <span class="comment"> * Read import file and convert to current charset</span>
<a name="l2389"><span class="linenum">2389</span></a>  <span class="comment"> *</span>
<a name="l2390"><span class="linenum">2390</span></a>  <span class="comment"> * @global object</span>
<a name="l2391"><span class="linenum">2391</span></a>  <span class="comment"> * @param string $file</span>
<a name="l2392"><span class="linenum">2392</span></a>  <span class="comment"> * @return string</span>
<a name="l2393"><span class="linenum">2393</span></a>  <span class="comment"> */</span>
<a name="l2394"><span class="linenum">2394</span></a>  function <a class="function" onClick="logFunction('glossary_read_imported_file')" href="../../_functions/glossary_read_imported_file.html" onMouseOver="funcPopup(event,'glossary_read_imported_file')">glossary_read_imported_file</a>(<a class="var it12656" onMouseOver="hilite(12656)" onMouseOut="lolite()" onClick="logVariable('file_content')" href="../../_variables/file_content.html">$file_content</a>) {
<a name="l2395"><span class="linenum">2395</span></a>      <span class="keyword">require_once</span> <a class="filename" href="../../lib/xmlize.php.html" onMouseOver="reqPopup(event, 'xmlize.php', '../../lib/xmlize.php')"> &quot;../../lib/xmlize.php&quot;</a>;
<a name="l2396"><span class="linenum">2396</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2397"><span class="linenum">2397</span></a>  
<a name="l2398"><span class="linenum">2398</span></a>      return <a class="function" onClick="logFunction('xmlize')" href="../../_functions/xmlize.html" onMouseOver="funcPopup(event,'xmlize')">xmlize</a>(<a class="var it12656" onMouseOver="hilite(12656)" onMouseOut="lolite()" onClick="logVariable('file_content')" href="../../_variables/file_content.html">$file_content</a>, 0);
<a name="l2399"><span class="linenum">2399</span></a>  }
<a name="l2400"><span class="linenum">2400</span></a>  
<a name="l2401"><span class="linenum">2401</span></a>  <span class="comment">/**</span>
<a name="l2402"><span class="linenum">2402</span></a>  <span class="comment"> * Return the xml start tag</span>
<a name="l2403"><span class="linenum">2403</span></a>  <span class="comment"> *</span>
<a name="l2404"><span class="linenum">2404</span></a>  <span class="comment"> * @param string $tag</span>
<a name="l2405"><span class="linenum">2405</span></a>  <span class="comment"> * @param int $level</span>
<a name="l2406"><span class="linenum">2406</span></a>  <span class="comment"> * @param bool $endline</span>
<a name="l2407"><span class="linenum">2407</span></a>  <span class="comment"> * @return string</span>
<a name="l2408"><span class="linenum">2408</span></a>  <span class="comment"> */</span>
<a name="l2409"><span class="linenum">2409</span></a>  function <a class="function" onClick="logFunction('glossary_start_tag')" href="../../_functions/glossary_start_tag.html" onMouseOver="funcPopup(event,'glossary_start_tag')">glossary_start_tag</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>,<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../_variables/level.html">$level</a>=0,<a class="var it3898" onMouseOver="hilite(3898)" onMouseOut="lolite()" onClick="logVariable('endline')" href="../../_variables/endline.html">$endline</a>=false) {
<a name="l2410"><span class="linenum">2410</span></a>          if (<a class="var it3898" onMouseOver="hilite(3898)" onMouseOut="lolite()" onClick="logVariable('endline')" href="../../_variables/endline.html">$endline</a>) {
<a name="l2411"><span class="linenum">2411</span></a>             <a class="var it3899" onMouseOver="hilite(3899)" onMouseOut="lolite()" onClick="logVariable('endchar')" href="../../_variables/endchar.html">$endchar</a> = &quot;\n&quot;;
<a name="l2412"><span class="linenum">2412</span></a>          } else {
<a name="l2413"><span class="linenum">2413</span></a>             <a class="var it3899" onMouseOver="hilite(3899)" onMouseOut="lolite()" onClick="logVariable('endchar')" href="../../_variables/endchar.html">$endchar</a> = &quot;&quot;;
<a name="l2414"><span class="linenum">2414</span></a>          }
<a name="l2415"><span class="linenum">2415</span></a>          return <a class="phpfunction" onClick="logFunction('str_repeat')" href="../../_functions/str_repeat.html" onMouseOver="phpfuncPopup(event,'str_repeat')">str_repeat</a>(&quot; &quot;,<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../_variables/level.html">$level</a>*2).&quot;&lt;&quot;.<a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>).&quot;&gt;&quot;.<a class="var it3899" onMouseOver="hilite(3899)" onMouseOut="lolite()" onClick="logVariable('endchar')" href="../../_variables/endchar.html">$endchar</a>;
<a name="l2416"><span class="linenum">2416</span></a>  }
<a name="l2417"><span class="linenum">2417</span></a>  
<a name="l2418"><span class="linenum">2418</span></a>  <span class="comment">/**</span>
<a name="l2419"><span class="linenum">2419</span></a>  <span class="comment"> * Return the xml end tag</span>
<a name="l2420"><span class="linenum">2420</span></a>  <span class="comment"> * @param string $tag</span>
<a name="l2421"><span class="linenum">2421</span></a>  <span class="comment"> * @param int $level</span>
<a name="l2422"><span class="linenum">2422</span></a>  <span class="comment"> * @param bool $endline</span>
<a name="l2423"><span class="linenum">2423</span></a>  <span class="comment"> * @return string</span>
<a name="l2424"><span class="linenum">2424</span></a>  <span class="comment"> */</span>
<a name="l2425"><span class="linenum">2425</span></a>  function <a class="function" onClick="logFunction('glossary_end_tag')" href="../../_functions/glossary_end_tag.html" onMouseOver="funcPopup(event,'glossary_end_tag')">glossary_end_tag</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>,<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../_variables/level.html">$level</a>=0,<a class="var it3898" onMouseOver="hilite(3898)" onMouseOut="lolite()" onClick="logVariable('endline')" href="../../_variables/endline.html">$endline</a>=true) {
<a name="l2426"><span class="linenum">2426</span></a>          if (<a class="var it3898" onMouseOver="hilite(3898)" onMouseOut="lolite()" onClick="logVariable('endline')" href="../../_variables/endline.html">$endline</a>) {
<a name="l2427"><span class="linenum">2427</span></a>             <a class="var it3899" onMouseOver="hilite(3899)" onMouseOut="lolite()" onClick="logVariable('endchar')" href="../../_variables/endchar.html">$endchar</a> = &quot;\n&quot;;
<a name="l2428"><span class="linenum">2428</span></a>          } else {
<a name="l2429"><span class="linenum">2429</span></a>             <a class="var it3899" onMouseOver="hilite(3899)" onMouseOut="lolite()" onClick="logVariable('endchar')" href="../../_variables/endchar.html">$endchar</a> = &quot;&quot;;
<a name="l2430"><span class="linenum">2430</span></a>          }
<a name="l2431"><span class="linenum">2431</span></a>          return <a class="phpfunction" onClick="logFunction('str_repeat')" href="../../_functions/str_repeat.html" onMouseOver="phpfuncPopup(event,'str_repeat')">str_repeat</a>(&quot; &quot;,<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../_variables/level.html">$level</a>*2).&quot;&lt;/&quot;.<a class="phpfunction" onClick="logFunction('strtoupper')" href="../../_functions/strtoupper.html" onMouseOver="phpfuncPopup(event,'strtoupper')">strtoupper</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>).&quot;&gt;&quot;.<a class="var it3899" onMouseOver="hilite(3899)" onMouseOut="lolite()" onClick="logVariable('endchar')" href="../../_variables/endchar.html">$endchar</a>;
<a name="l2432"><span class="linenum">2432</span></a>  }
<a name="l2433"><span class="linenum">2433</span></a>  
<a name="l2434"><span class="linenum">2434</span></a>  <span class="comment">/**</span>
<a name="l2435"><span class="linenum">2435</span></a>  <span class="comment"> * Return the start tag, the contents and the end tag</span>
<a name="l2436"><span class="linenum">2436</span></a>  <span class="comment"> *</span>
<a name="l2437"><span class="linenum">2437</span></a>  <span class="comment"> * @global object</span>
<a name="l2438"><span class="linenum">2438</span></a>  <span class="comment"> * @param string $tag</span>
<a name="l2439"><span class="linenum">2439</span></a>  <span class="comment"> * @param int $level</span>
<a name="l2440"><span class="linenum">2440</span></a>  <span class="comment"> * @param bool $endline</span>
<a name="l2441"><span class="linenum">2441</span></a>  <span class="comment"> * @param string $content</span>
<a name="l2442"><span class="linenum">2442</span></a>  <span class="comment"> * @return string</span>
<a name="l2443"><span class="linenum">2443</span></a>  <span class="comment"> */</span>
<a name="l2444"><span class="linenum">2444</span></a>  function <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>,<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../_variables/level.html">$level</a>=0,<a class="var it3898" onMouseOver="hilite(3898)" onMouseOut="lolite()" onClick="logVariable('endline')" href="../../_variables/endline.html">$endline</a>=true,<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>) {
<a name="l2445"><span class="linenum">2445</span></a>          global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>;
<a name="l2446"><span class="linenum">2446</span></a>  
<a name="l2447"><span class="linenum">2447</span></a>          <a class="var it723" onMouseOver="hilite(723)" onMouseOut="lolite()" onClick="logVariable('st')" href="../../_variables/st.html">$st</a> = <a class="function" onClick="logFunction('glossary_start_tag')" href="../../_functions/glossary_start_tag.html" onMouseOver="funcPopup(event,'glossary_start_tag')">glossary_start_tag</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>,<a class="var it482" onMouseOver="hilite(482)" onMouseOut="lolite()" onClick="logVariable('level')" href="../../_variables/level.html">$level</a>,<a class="var it3898" onMouseOver="hilite(3898)" onMouseOut="lolite()" onClick="logVariable('endline')" href="../../_variables/endline.html">$endline</a>);
<a name="l2448"><span class="linenum">2448</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> = <a class="phpfunction" onClick="logFunction('preg_replace')" href="../../_functions/preg_replace.html" onMouseOver="phpfuncPopup(event,'preg_replace')">preg_replace</a>(&quot;/\r\n|\r/&quot;, &quot;\n&quot;, <a class="function" onClick="logFunction('s')" href="../../_functions/s.html" onMouseOver="funcPopup(event,'s')">s</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>));
<a name="l2449"><span class="linenum">2449</span></a>          <a class="var it3902" onMouseOver="hilite(3902)" onMouseOut="lolite()" onClick="logVariable('et')" href="../../_variables/et.html">$et</a> = <a class="function" onClick="logFunction('glossary_end_tag')" href="../../_functions/glossary_end_tag.html" onMouseOver="funcPopup(event,'glossary_end_tag')">glossary_end_tag</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>,0,true);
<a name="l2450"><span class="linenum">2450</span></a>          return <a class="var it723" onMouseOver="hilite(723)" onMouseOut="lolite()" onClick="logVariable('st')" href="../../_variables/st.html">$st</a>.<a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a>.<a class="var it3902" onMouseOver="hilite(3902)" onMouseOut="lolite()" onClick="logVariable('et')" href="../../_variables/et.html">$et</a>;
<a name="l2451"><span class="linenum">2451</span></a>  }
<a name="l2452"><span class="linenum">2452</span></a>  
<a name="l2453"><span class="linenum">2453</span></a>  <span class="comment">/**</span>
<a name="l2454"><span class="linenum">2454</span></a>  <span class="comment"> * Prepares file area to export as part of XML export</span>
<a name="l2455"><span class="linenum">2455</span></a>  <span class="comment"> *</span>
<a name="l2456"><span class="linenum">2456</span></a>  <span class="comment"> * @param string $tag XML tag to use for the group</span>
<a name="l2457"><span class="linenum">2457</span></a>  <span class="comment"> * @param int $taglevel</span>
<a name="l2458"><span class="linenum">2458</span></a>  <span class="comment"> * @param int $contextid</span>
<a name="l2459"><span class="linenum">2459</span></a>  <span class="comment"> * @param string $filearea</span>
<a name="l2460"><span class="linenum">2460</span></a>  <span class="comment"> * @param int $itemid</span>
<a name="l2461"><span class="linenum">2461</span></a>  <span class="comment"> * @return string</span>
<a name="l2462"><span class="linenum">2462</span></a>  <span class="comment"> */</span>
<a name="l2463"><span class="linenum">2463</span></a>  function <a class="function" onClick="logFunction('glossary_xml_export_files')" href="../../_functions/glossary_xml_export_files.html" onMouseOver="funcPopup(event,'glossary_xml_export_files')">glossary_xml_export_files</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>, <a class="var it12657" onMouseOver="hilite(12657)" onMouseOut="lolite()" onClick="logVariable('taglevel')" href="../../_variables/taglevel.html">$taglevel</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>) {
<a name="l2464"><span class="linenum">2464</span></a>      <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> = '';
<a name="l2465"><span class="linenum">2465</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2466"><span class="linenum">2466</span></a>      if (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('get_area_files')" href="../../_functions/get_area_files.html" onMouseOver="funcPopup(event,'get_area_files')">get_area_files</a>(
<a name="l2467"><span class="linenum">2467</span></a>          <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, 'mod_glossary', <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>, 'itemid,filepath,filename', false)) {
<a name="l2468"><span class="linenum">2468</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_start_tag')" href="../../_functions/glossary_start_tag.html" onMouseOver="funcPopup(event,'glossary_start_tag')">glossary_start_tag</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>, <a class="var it12657" onMouseOver="hilite(12657)" onMouseOut="lolite()" onClick="logVariable('taglevel')" href="../../_variables/taglevel.html">$taglevel</a>, true);
<a name="l2469"><span class="linenum">2469</span></a>          foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l2470"><span class="linenum">2470</span></a>              <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_start_tag')" href="../../_functions/glossary_start_tag.html" onMouseOver="funcPopup(event,'glossary_start_tag')">glossary_start_tag</a>('FILE', <a class="var it12657" onMouseOver="hilite(12657)" onMouseOut="lolite()" onClick="logVariable('taglevel')" href="../../_variables/taglevel.html">$taglevel</a> + 1, true);
<a name="l2471"><span class="linenum">2471</span></a>              <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>('FILENAME', <a class="var it12657" onMouseOver="hilite(12657)" onMouseOut="lolite()" onClick="logVariable('taglevel')" href="../../_variables/taglevel.html">$taglevel</a> + 2, false, <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filename')" href="../../_functions/get_filename.html" onMouseOver="funcPopup(event,'get_filename')">get_filename</a>());
<a name="l2472"><span class="linenum">2472</span></a>              <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>('FILEPATH', <a class="var it12657" onMouseOver="hilite(12657)" onMouseOut="lolite()" onClick="logVariable('taglevel')" href="../../_variables/taglevel.html">$taglevel</a> + 2, false, <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_filepath')" href="../../_functions/get_filepath.html" onMouseOver="funcPopup(event,'get_filepath')">get_filepath</a>());
<a name="l2473"><span class="linenum">2473</span></a>              <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_full_tag')" href="../../_functions/glossary_full_tag.html" onMouseOver="funcPopup(event,'glossary_full_tag')">glossary_full_tag</a>('CONTENTS', <a class="var it12657" onMouseOver="hilite(12657)" onMouseOut="lolite()" onClick="logVariable('taglevel')" href="../../_variables/taglevel.html">$taglevel</a> + 2, false, <a class="phpfunction" onClick="logFunction('base64_encode')" href="../../_functions/base64_encode.html" onMouseOver="phpfuncPopup(event,'base64_encode')">base64_encode</a>(<a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>-&gt;<a class="function" onClick="logFunction('get_content')" href="../../_functions/get_content.html" onMouseOver="funcPopup(event,'get_content')">get_content</a>()));
<a name="l2474"><span class="linenum">2474</span></a>              <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_end_tag')" href="../../_functions/glossary_end_tag.html" onMouseOver="funcPopup(event,'glossary_end_tag')">glossary_end_tag</a>('FILE', <a class="var it12657" onMouseOver="hilite(12657)" onMouseOut="lolite()" onClick="logVariable('taglevel')" href="../../_variables/taglevel.html">$taglevel</a> + 1);
<a name="l2475"><span class="linenum">2475</span></a>          }
<a name="l2476"><span class="linenum">2476</span></a>          <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a> .= <a class="function" onClick="logFunction('glossary_end_tag')" href="../../_functions/glossary_end_tag.html" onMouseOver="funcPopup(event,'glossary_end_tag')">glossary_end_tag</a>(<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>, <a class="var it12657" onMouseOver="hilite(12657)" onMouseOut="lolite()" onClick="logVariable('taglevel')" href="../../_variables/taglevel.html">$taglevel</a>);
<a name="l2477"><span class="linenum">2477</span></a>      }
<a name="l2478"><span class="linenum">2478</span></a>      return <a class="var it3901" onMouseOver="hilite(3901)" onMouseOut="lolite()" onClick="logVariable('co')" href="../../_variables/co.html">$co</a>;
<a name="l2479"><span class="linenum">2479</span></a>  }
<a name="l2480"><span class="linenum">2480</span></a>  
<a name="l2481"><span class="linenum">2481</span></a>  <span class="comment">/**</span>
<a name="l2482"><span class="linenum">2482</span></a>  <span class="comment"> * Parses files from XML import and inserts them into file system</span>
<a name="l2483"><span class="linenum">2483</span></a>  <span class="comment"> *</span>
<a name="l2484"><span class="linenum">2484</span></a>  <span class="comment"> * @param array $xmlparent parent element in parsed XML tree</span>
<a name="l2485"><span class="linenum">2485</span></a>  <span class="comment"> * @param string $tag</span>
<a name="l2486"><span class="linenum">2486</span></a>  <span class="comment"> * @param int $contextid</span>
<a name="l2487"><span class="linenum">2487</span></a>  <span class="comment"> * @param string $filearea</span>
<a name="l2488"><span class="linenum">2488</span></a>  <span class="comment"> * @param int $itemid</span>
<a name="l2489"><span class="linenum">2489</span></a>  <span class="comment"> * @return int</span>
<a name="l2490"><span class="linenum">2490</span></a>  <span class="comment"> */</span>
<a name="l2491"><span class="linenum">2491</span></a>  function <a class="function" onClick="logFunction('glossary_xml_import_files')" href="../../_functions/glossary_xml_import_files.html" onMouseOver="funcPopup(event,'glossary_xml_import_files')">glossary_xml_import_files</a>(<a class="var it12658" onMouseOver="hilite(12658)" onMouseOut="lolite()" onClick="logVariable('xmlparent')" href="../../_variables/xmlparent.html">$xmlparent</a>, <a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>, <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>, <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>, <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>) {
<a name="l2492"><span class="linenum">2492</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = 0;
<a name="l2493"><span class="linenum">2493</span></a>      if (isset(<a class="var it12658" onMouseOver="hilite(12658)" onMouseOut="lolite()" onClick="logVariable('xmlparent')" href="../../_variables/xmlparent.html">$xmlparent</a>[<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>][0]['#']['FILE'])) {
<a name="l2494"><span class="linenum">2494</span></a>          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2495"><span class="linenum">2495</span></a>          <a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> = <a class="var it12658" onMouseOver="hilite(12658)" onMouseOut="lolite()" onClick="logVariable('xmlparent')" href="../../_variables/xmlparent.html">$xmlparent</a>[<a class="var it20" onMouseOver="hilite(20)" onMouseOut="lolite()" onClick="logVariable('tag')" href="../../_variables/tag.html">$tag</a>][0]['#']['FILE'];
<a name="l2496"><span class="linenum">2496</span></a>          foreach (<a class="var it223" onMouseOver="hilite(223)" onMouseOut="lolite()" onClick="logVariable('files')" href="../../_variables/files.html">$files</a> as <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>) {
<a name="l2497"><span class="linenum">2497</span></a>              <a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a> = array(
<a name="l2498"><span class="linenum">2498</span></a>                  'contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>,
<a name="l2499"><span class="linenum">2499</span></a>                  'component' =&gt; 'mod_glossary',
<a name="l2500"><span class="linenum">2500</span></a>                  'filearea'  =&gt; <a class="var it24" onMouseOver="hilite(24)" onMouseOut="lolite()" onClick="logVariable('filearea')" href="../../_variables/filearea.html">$filearea</a>,
<a name="l2501"><span class="linenum">2501</span></a>                  'itemid'    =&gt; <a class="var it868" onMouseOver="hilite(868)" onMouseOut="lolite()" onClick="logVariable('itemid')" href="../../_variables/itemid.html">$itemid</a>,
<a name="l2502"><span class="linenum">2502</span></a>                  'filepath'  =&gt; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['#']['FILEPATH'][0]['#'],
<a name="l2503"><span class="linenum">2503</span></a>                  'filename'  =&gt; <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['#']['FILENAME'][0]['#'],
<a name="l2504"><span class="linenum">2504</span></a>              );
<a name="l2505"><span class="linenum">2505</span></a>              <a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a> =  <a class="var it297" onMouseOver="hilite(297)" onMouseOut="lolite()" onClick="logVariable('file')" href="../../_variables/file.html">$file</a>['#']['CONTENTS'][0]['#'];
<a name="l2506"><span class="linenum">2506</span></a>              <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('create_file_from_string')" href="../../_functions/create_file_from_string.html" onMouseOver="funcPopup(event,'create_file_from_string')">create_file_from_string</a>(<a class="var it833" onMouseOver="hilite(833)" onMouseOut="lolite()" onClick="logVariable('filerecord')" href="../../_variables/filerecord.html">$filerecord</a>, <a class="phpfunction" onClick="logFunction('base64_decode')" href="../../_functions/base64_decode.html" onMouseOver="phpfuncPopup(event,'base64_decode')">base64_decode</a>(<a class="var it253" onMouseOver="hilite(253)" onMouseOut="lolite()" onClick="logVariable('content')" href="../../_variables/content.html">$content</a>));
<a name="l2507"><span class="linenum">2507</span></a>              <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>++;
<a name="l2508"><span class="linenum">2508</span></a>          }
<a name="l2509"><span class="linenum">2509</span></a>      }
<a name="l2510"><span class="linenum">2510</span></a>      return <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>;
<a name="l2511"><span class="linenum">2511</span></a>  }
<a name="l2512"><span class="linenum">2512</span></a>  
<a name="l2513"><span class="linenum">2513</span></a>  <span class="comment">/**</span>
<a name="l2514"><span class="linenum">2514</span></a>  <span class="comment"> * How many unrated entries are in the given glossary for a given user?</span>
<a name="l2515"><span class="linenum">2515</span></a>  <span class="comment"> *</span>
<a name="l2516"><span class="linenum">2516</span></a>  <span class="comment"> * @global moodle_database $DB</span>
<a name="l2517"><span class="linenum">2517</span></a>  <span class="comment"> * @param int $glossaryid</span>
<a name="l2518"><span class="linenum">2518</span></a>  <span class="comment"> * @param int $userid</span>
<a name="l2519"><span class="linenum">2519</span></a>  <span class="comment"> * @return int</span>
<a name="l2520"><span class="linenum">2520</span></a>  <span class="comment"> */</span>
<a name="l2521"><span class="linenum">2521</span></a>  function <a class="function" onClick="logFunction('glossary_count_unrated_entries')" href="../../_functions/glossary_count_unrated_entries.html" onMouseOver="funcPopup(event,'glossary_count_unrated_entries')">glossary_count_unrated_entries</a>(<a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>, <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>) {
<a name="l2522"><span class="linenum">2522</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2523"><span class="linenum">2523</span></a>  
<a name="l2524"><span class="linenum">2524</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>('x') as num
<a name="l2525"><span class="linenum">2525</span></a>                FROM {glossary_entries}
<a name="l2526"><span class="linenum">2526</span></a>               WHERE glossaryid = :glossaryid AND
<a name="l2527"><span class="linenum">2527</span></a>                     userid &lt;&gt; :userid&quot;;
<a name="l2528"><span class="linenum">2528</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('glossaryid' =&gt; <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>, 'userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>);
<a name="l2529"><span class="linenum">2529</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2530"><span class="linenum">2530</span></a>  
<a name="l2531"><span class="linenum">2531</span></a>      if (<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>) {
<a name="l2532"><span class="linenum">2532</span></a>  <span class="comment">        // We need to get the contextid for the glossaryid we have been given.</span>
<a name="l2533"><span class="linenum">2533</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT ctx.id
<a name="l2534"><span class="linenum">2534</span></a>                    FROM {context} ctx
<a name="l2535"><span class="linenum">2535</span></a>                    JOIN {course_modules} cm ON cm.id = ctx.instanceid
<a name="l2536"><span class="linenum">2536</span></a>                    JOIN {modules} m ON m.id = cm.module
<a name="l2537"><span class="linenum">2537</span></a>                    JOIN {glossary} g ON g.id = cm.instance
<a name="l2538"><span class="linenum">2538</span></a>                   WHERE ctx.contextlevel = :contextlevel AND
<a name="l2539"><span class="linenum">2539</span></a>                         m.name = 'glossary' AND
<a name="l2540"><span class="linenum">2540</span></a>                         g.id = :glossaryid&quot;;
<a name="l2541"><span class="linenum">2541</span></a>          <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_field_sql')" href="../../_functions/get_field_sql.html" onMouseOver="funcPopup(event,'get_field_sql')">get_field_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array('glossaryid' =&gt; <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>, 'contextlevel' =&gt; <a class="constant" onClick="logConstant('CONTEXT_MODULE')" href="../../_constants/CONTEXT_MODULE.html" onMouseOver="constPopup(event,'CONTEXT_MODULE')">CONTEXT_MODULE</a>));
<a name="l2542"><span class="linenum">2542</span></a>  
<a name="l2543"><span class="linenum">2543</span></a>  <span class="comment">        // Now we need to count the ratings that this user has made</span>
<a name="l2544"><span class="linenum">2544</span></a>          <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>('x') AS num
<a name="l2545"><span class="linenum">2545</span></a>                    FROM {glossary_entries} e
<a name="l2546"><span class="linenum">2546</span></a>                    JOIN {rating} r ON r.itemid = e.id
<a name="l2547"><span class="linenum">2547</span></a>                   WHERE e.glossaryid = :glossaryid AND
<a name="l2548"><span class="linenum">2548</span></a>                         r.userid = :userid AND
<a name="l2549"><span class="linenum">2549</span></a>                         r.component = 'mod_glossary' AND
<a name="l2550"><span class="linenum">2550</span></a>                         r.ratingarea = 'entry' AND
<a name="l2551"><span class="linenum">2551</span></a>                         r.contextid = :contextid&quot;;
<a name="l2552"><span class="linenum">2552</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array('glossaryid' =&gt; <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>, 'userid' =&gt; <a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 'contextid' =&gt; <a class="var it782" onMouseOver="hilite(782)" onMouseOut="lolite()" onClick="logVariable('contextid')" href="../../_variables/contextid.html">$contextid</a>);
<a name="l2553"><span class="linenum">2553</span></a>          <a class="var it12659" onMouseOver="hilite(12659)" onMouseOut="lolite()" onClick="logVariable('rated')" href="../../_variables/rated.html">$rated</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2554"><span class="linenum">2554</span></a>          if (<a class="var it12659" onMouseOver="hilite(12659)" onMouseOut="lolite()" onClick="logVariable('rated')" href="../../_variables/rated.html">$rated</a>) {
<a name="l2555"><span class="linenum">2555</span></a>  <span class="comment">            // The number or enties minus the number or rated entries equals the number of unrated</span>
<a name="l2556"><span class="linenum">2556</span></a>  <span class="comment">            // entries</span>
<a name="l2557"><span class="linenum">2557</span></a>              if (<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> &gt; <a class="var it12659" onMouseOver="hilite(12659)" onMouseOut="lolite()" onClick="logVariable('rated')" href="../../_variables/rated.html">$rated</a>) {
<a name="l2558"><span class="linenum">2558</span></a>                  return <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> - <a class="var it12659" onMouseOver="hilite(12659)" onMouseOut="lolite()" onClick="logVariable('rated')" href="../../_variables/rated.html">$rated</a>;
<a name="l2559"><span class="linenum">2559</span></a>              } else {
<a name="l2560"><span class="linenum">2560</span></a>                  return 0;    <span class="comment">// Just in case there was a counting error</span>
<a name="l2561"><span class="linenum">2561</span></a>              }
<a name="l2562"><span class="linenum">2562</span></a>          } else {
<a name="l2563"><span class="linenum">2563</span></a>              return (int)<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>;
<a name="l2564"><span class="linenum">2564</span></a>          }
<a name="l2565"><span class="linenum">2565</span></a>      } else {
<a name="l2566"><span class="linenum">2566</span></a>          return 0;
<a name="l2567"><span class="linenum">2567</span></a>      }
<a name="l2568"><span class="linenum">2568</span></a>  }
<a name="l2569"><span class="linenum">2569</span></a>  
<a name="l2570"><span class="linenum">2570</span></a>  <span class="comment">/**</span>
<a name="l2571"><span class="linenum">2571</span></a>  <span class="comment"> *</span>
<a name="l2572"><span class="linenum">2572</span></a>  <span class="comment"> * Returns the html code to represent any pagging bar. Paramenters are:</span>
<a name="l2573"><span class="linenum">2573</span></a>  <span class="comment"> *</span>
<a name="l2574"><span class="linenum">2574</span></a>  <span class="comment"> * The function dinamically show the first and last pages, and &quot;scroll&quot; over pages.</span>
<a name="l2575"><span class="linenum">2575</span></a>  <span class="comment"> * Fully compatible with Moodle's print_paging_bar() function. Perhaps some day this</span>
<a name="l2576"><span class="linenum">2576</span></a>  <span class="comment"> * could replace the general one. ;-)</span>
<a name="l2577"><span class="linenum">2577</span></a>  <span class="comment"> *</span>
<a name="l2578"><span class="linenum">2578</span></a>  <span class="comment"> * @param int $totalcount total number of records to be displayed</span>
<a name="l2579"><span class="linenum">2579</span></a>  <span class="comment"> * @param int $page page currently selected (0 based)</span>
<a name="l2580"><span class="linenum">2580</span></a>  <span class="comment"> * @param int $perpage number of records per page</span>
<a name="l2581"><span class="linenum">2581</span></a>  <span class="comment"> * @param string $baseurl url to link in each page, the string 'page=XX' will be added automatically.</span>
<a name="l2582"><span class="linenum">2582</span></a>  <span class="comment"> *</span>
<a name="l2583"><span class="linenum">2583</span></a>  <span class="comment"> * @param int $maxpageallowed Optional maximum number of page allowed.</span>
<a name="l2584"><span class="linenum">2584</span></a>  <span class="comment"> * @param int $maxdisplay Optional maximum number of page links to show in the bar</span>
<a name="l2585"><span class="linenum">2585</span></a>  <span class="comment"> * @param string $separator Optional string to be used between pages in the bar</span>
<a name="l2586"><span class="linenum">2586</span></a>  <span class="comment"> * @param string $specialtext Optional string to be showed as an special link</span>
<a name="l2587"><span class="linenum">2587</span></a>  <span class="comment"> * @param string $specialvalue Optional value (page) to be used in the special link</span>
<a name="l2588"><span class="linenum">2588</span></a>  <span class="comment"> * @param bool $previousandnext Optional to decide if we want the previous and next links</span>
<a name="l2589"><span class="linenum">2589</span></a>  <span class="comment"> * @return string</span>
<a name="l2590"><span class="linenum">2590</span></a>  <span class="comment"> */</span>
<a name="l2591"><span class="linenum">2591</span></a>  function <a class="function" onClick="logFunction('glossary_get_paging_bar')" href="../../_functions/glossary_get_paging_bar.html" onMouseOver="funcPopup(event,'glossary_get_paging_bar')">glossary_get_paging_bar</a>(<a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../../_variables/totalcount.html">$totalcount</a>, <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a>, <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>, <a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>, <a class="var it12660" onMouseOver="hilite(12660)" onMouseOut="lolite()" onClick="logVariable('maxpageallowed')" href="../../_variables/maxpageallowed.html">$maxpageallowed</a>=99999, <a class="var it12661" onMouseOver="hilite(12661)" onMouseOut="lolite()" onClick="logVariable('maxdisplay')" href="../../_variables/maxdisplay.html">$maxdisplay</a>=20, <a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a>=&quot;&amp;nbsp;&quot;, <a class="var it12662" onMouseOver="hilite(12662)" onMouseOut="lolite()" onClick="logVariable('specialtext')" href="../../_variables/specialtext.html">$specialtext</a>=&quot;&quot;, <a class="var it12663" onMouseOver="hilite(12663)" onMouseOut="lolite()" onClick="logVariable('specialvalue')" href="../../_variables/specialvalue.html">$specialvalue</a>=-1, <a class="var it12664" onMouseOver="hilite(12664)" onMouseOut="lolite()" onClick="logVariable('previousandnext')" href="../../_variables/previousandnext.html">$previousandnext</a> = true) {
<a name="l2592"><span class="linenum">2592</span></a>  
<a name="l2593"><span class="linenum">2593</span></a>      <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> = '';
<a name="l2594"><span class="linenum">2594</span></a>  
<a name="l2595"><span class="linenum">2595</span></a>      <a class="var it12615" onMouseOver="hilite(12615)" onMouseOut="lolite()" onClick="logVariable('showspecial')" href="../../_variables/showspecial.html">$showspecial</a> = false;
<a name="l2596"><span class="linenum">2596</span></a>      <a class="var it12665" onMouseOver="hilite(12665)" onMouseOut="lolite()" onClick="logVariable('specialselected')" href="../../_variables/specialselected.html">$specialselected</a> = false;
<a name="l2597"><span class="linenum">2597</span></a>  
<a name="l2598"><span class="linenum">2598</span></a>  <span class="comment">    //Check if we have to show the special link</span>
<a name="l2599"><span class="linenum">2599</span></a>      if (!empty(<a class="var it12662" onMouseOver="hilite(12662)" onMouseOut="lolite()" onClick="logVariable('specialtext')" href="../../_variables/specialtext.html">$specialtext</a>)) {
<a name="l2600"><span class="linenum">2600</span></a>          <a class="var it12615" onMouseOver="hilite(12615)" onMouseOut="lolite()" onClick="logVariable('showspecial')" href="../../_variables/showspecial.html">$showspecial</a> = true;
<a name="l2601"><span class="linenum">2601</span></a>      }
<a name="l2602"><span class="linenum">2602</span></a>  <span class="comment">    //Check if we are with the special link selected</span>
<a name="l2603"><span class="linenum">2603</span></a>      if (<a class="var it12615" onMouseOver="hilite(12615)" onMouseOut="lolite()" onClick="logVariable('showspecial')" href="../../_variables/showspecial.html">$showspecial</a> &amp;&amp; <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> == <a class="var it12663" onMouseOver="hilite(12663)" onMouseOut="lolite()" onClick="logVariable('specialvalue')" href="../../_variables/specialvalue.html">$specialvalue</a>) {
<a name="l2604"><span class="linenum">2604</span></a>          <a class="var it12665" onMouseOver="hilite(12665)" onMouseOut="lolite()" onClick="logVariable('specialselected')" href="../../_variables/specialselected.html">$specialselected</a> = true;
<a name="l2605"><span class="linenum">2605</span></a>      }
<a name="l2606"><span class="linenum">2606</span></a>  
<a name="l2607"><span class="linenum">2607</span></a>  <span class="comment">    //If there are results (more than 1 page)</span>
<a name="l2608"><span class="linenum">2608</span></a>      if (<a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../../_variables/totalcount.html">$totalcount</a> &gt; <a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>) {
<a name="l2609"><span class="linenum">2609</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= &quot;&lt;div style=\&quot;text-align:center\&quot;&gt;&quot;;
<a name="l2610"><span class="linenum">2610</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= &quot;&lt;p&gt;&quot;.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;page&quot;).&quot;:&quot;;
<a name="l2611"><span class="linenum">2611</span></a>  
<a name="l2612"><span class="linenum">2612</span></a>          <a class="var it12666" onMouseOver="hilite(12666)" onMouseOut="lolite()" onClick="logVariable('maxpage')" href="../../_variables/maxpage.html">$maxpage</a> = (int)((<a class="var it3822" onMouseOver="hilite(3822)" onMouseOut="lolite()" onClick="logVariable('totalcount')" href="../../_variables/totalcount.html">$totalcount</a>-1)/<a class="var it1070" onMouseOver="hilite(1070)" onMouseOut="lolite()" onClick="logVariable('perpage')" href="../../_variables/perpage.html">$perpage</a>);
<a name="l2613"><span class="linenum">2613</span></a>  
<a name="l2614"><span class="linenum">2614</span></a>  <span class="comment">        //Lower and upper limit of page</span>
<a name="l2615"><span class="linenum">2615</span></a>          if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> &lt; 0) {
<a name="l2616"><span class="linenum">2616</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = 0;
<a name="l2617"><span class="linenum">2617</span></a>          }
<a name="l2618"><span class="linenum">2618</span></a>          if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> &gt; <a class="var it12660" onMouseOver="hilite(12660)" onMouseOut="lolite()" onClick="logVariable('maxpageallowed')" href="../../_variables/maxpageallowed.html">$maxpageallowed</a>) {
<a name="l2619"><span class="linenum">2619</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it12660" onMouseOver="hilite(12660)" onMouseOut="lolite()" onClick="logVariable('maxpageallowed')" href="../../_variables/maxpageallowed.html">$maxpageallowed</a>;
<a name="l2620"><span class="linenum">2620</span></a>          }
<a name="l2621"><span class="linenum">2621</span></a>          if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> &gt; <a class="var it12666" onMouseOver="hilite(12666)" onMouseOut="lolite()" onClick="logVariable('maxpage')" href="../../_variables/maxpage.html">$maxpage</a>) {
<a name="l2622"><span class="linenum">2622</span></a>              <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> = <a class="var it12666" onMouseOver="hilite(12666)" onMouseOut="lolite()" onClick="logVariable('maxpage')" href="../../_variables/maxpage.html">$maxpage</a>;
<a name="l2623"><span class="linenum">2623</span></a>          }
<a name="l2624"><span class="linenum">2624</span></a>  
<a name="l2625"><span class="linenum">2625</span></a>  <span class="comment">        //Calculate the window of pages</span>
<a name="l2626"><span class="linenum">2626</span></a>          <a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('pagefrom')" href="../../_variables/pagefrom.html">$pagefrom</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> - ((int)(<a class="var it12661" onMouseOver="hilite(12661)" onMouseOut="lolite()" onClick="logVariable('maxdisplay')" href="../../_variables/maxdisplay.html">$maxdisplay</a> / 2));
<a name="l2627"><span class="linenum">2627</span></a>          if (<a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('pagefrom')" href="../../_variables/pagefrom.html">$pagefrom</a> &lt; 0) {
<a name="l2628"><span class="linenum">2628</span></a>              <a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('pagefrom')" href="../../_variables/pagefrom.html">$pagefrom</a> = 0;
<a name="l2629"><span class="linenum">2629</span></a>          }
<a name="l2630"><span class="linenum">2630</span></a>          <a class="var it12668" onMouseOver="hilite(12668)" onMouseOut="lolite()" onClick="logVariable('pageto')" href="../../_variables/pageto.html">$pageto</a> = <a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('pagefrom')" href="../../_variables/pagefrom.html">$pagefrom</a> + <a class="var it12661" onMouseOver="hilite(12661)" onMouseOut="lolite()" onClick="logVariable('maxdisplay')" href="../../_variables/maxdisplay.html">$maxdisplay</a> - 1;
<a name="l2631"><span class="linenum">2631</span></a>          if (<a class="var it12668" onMouseOver="hilite(12668)" onMouseOut="lolite()" onClick="logVariable('pageto')" href="../../_variables/pageto.html">$pageto</a> &gt; <a class="var it12660" onMouseOver="hilite(12660)" onMouseOut="lolite()" onClick="logVariable('maxpageallowed')" href="../../_variables/maxpageallowed.html">$maxpageallowed</a>) {
<a name="l2632"><span class="linenum">2632</span></a>              <a class="var it12668" onMouseOver="hilite(12668)" onMouseOut="lolite()" onClick="logVariable('pageto')" href="../../_variables/pageto.html">$pageto</a> = <a class="var it12660" onMouseOver="hilite(12660)" onMouseOut="lolite()" onClick="logVariable('maxpageallowed')" href="../../_variables/maxpageallowed.html">$maxpageallowed</a>;
<a name="l2633"><span class="linenum">2633</span></a>          }
<a name="l2634"><span class="linenum">2634</span></a>          if (<a class="var it12668" onMouseOver="hilite(12668)" onMouseOut="lolite()" onClick="logVariable('pageto')" href="../../_variables/pageto.html">$pageto</a> &gt; <a class="var it12666" onMouseOver="hilite(12666)" onMouseOut="lolite()" onClick="logVariable('maxpage')" href="../../_variables/maxpage.html">$maxpage</a>) {
<a name="l2635"><span class="linenum">2635</span></a>              <a class="var it12668" onMouseOver="hilite(12668)" onMouseOut="lolite()" onClick="logVariable('pageto')" href="../../_variables/pageto.html">$pageto</a> = <a class="var it12666" onMouseOver="hilite(12666)" onMouseOut="lolite()" onClick="logVariable('maxpage')" href="../../_variables/maxpage.html">$maxpage</a>;
<a name="l2636"><span class="linenum">2636</span></a>          }
<a name="l2637"><span class="linenum">2637</span></a>  
<a name="l2638"><span class="linenum">2638</span></a>  <span class="comment">        //Some movements can be necessary if don't see enought pages</span>
<a name="l2639"><span class="linenum">2639</span></a>          if (<a class="var it12668" onMouseOver="hilite(12668)" onMouseOut="lolite()" onClick="logVariable('pageto')" href="../../_variables/pageto.html">$pageto</a> - <a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('pagefrom')" href="../../_variables/pagefrom.html">$pagefrom</a> &lt; <a class="var it12661" onMouseOver="hilite(12661)" onMouseOut="lolite()" onClick="logVariable('maxdisplay')" href="../../_variables/maxdisplay.html">$maxdisplay</a> - 1) {
<a name="l2640"><span class="linenum">2640</span></a>              if (<a class="var it12668" onMouseOver="hilite(12668)" onMouseOut="lolite()" onClick="logVariable('pageto')" href="../../_variables/pageto.html">$pageto</a> - <a class="var it12661" onMouseOver="hilite(12661)" onMouseOut="lolite()" onClick="logVariable('maxdisplay')" href="../../_variables/maxdisplay.html">$maxdisplay</a> + 1 &gt; 0) {
<a name="l2641"><span class="linenum">2641</span></a>                  <a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('pagefrom')" href="../../_variables/pagefrom.html">$pagefrom</a> = <a class="var it12668" onMouseOver="hilite(12668)" onMouseOut="lolite()" onClick="logVariable('pageto')" href="../../_variables/pageto.html">$pageto</a> - <a class="var it12661" onMouseOver="hilite(12661)" onMouseOut="lolite()" onClick="logVariable('maxdisplay')" href="../../_variables/maxdisplay.html">$maxdisplay</a> + 1;
<a name="l2642"><span class="linenum">2642</span></a>              }
<a name="l2643"><span class="linenum">2643</span></a>          }
<a name="l2644"><span class="linenum">2644</span></a>  
<a name="l2645"><span class="linenum">2645</span></a>  <span class="comment">        //Calculate first and last if necessary</span>
<a name="l2646"><span class="linenum">2646</span></a>          <a class="var it12669" onMouseOver="hilite(12669)" onMouseOut="lolite()" onClick="logVariable('firstpagecode')" href="../../_variables/firstpagecode.html">$firstpagecode</a> = '';
<a name="l2647"><span class="linenum">2647</span></a>          <a class="var it12670" onMouseOver="hilite(12670)" onMouseOut="lolite()" onClick="logVariable('lastpagecode')" href="../../_variables/lastpagecode.html">$lastpagecode</a> = '';
<a name="l2648"><span class="linenum">2648</span></a>          if (<a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('pagefrom')" href="../../_variables/pagefrom.html">$pagefrom</a> &gt; 0) {
<a name="l2649"><span class="linenum">2649</span></a>              <a class="var it12669" onMouseOver="hilite(12669)" onMouseOut="lolite()" onClick="logVariable('firstpagecode')" href="../../_variables/firstpagecode.html">$firstpagecode</a> = &quot;<a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a>&lt;a href=\&quot;{<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>}page=0\&quot;&gt;1&lt;/a&gt;&quot;;
<a name="l2650"><span class="linenum">2650</span></a>              if (<a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('pagefrom')" href="../../_variables/pagefrom.html">$pagefrom</a> &gt; 1) {
<a name="l2651"><span class="linenum">2651</span></a>                  <a class="var it12669" onMouseOver="hilite(12669)" onMouseOut="lolite()" onClick="logVariable('firstpagecode')" href="../../_variables/firstpagecode.html">$firstpagecode</a> .= &quot;<a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a>...&quot;;
<a name="l2652"><span class="linenum">2652</span></a>              }
<a name="l2653"><span class="linenum">2653</span></a>          }
<a name="l2654"><span class="linenum">2654</span></a>          if (<a class="var it12668" onMouseOver="hilite(12668)" onMouseOut="lolite()" onClick="logVariable('pageto')" href="../../_variables/pageto.html">$pageto</a> &lt; <a class="var it12666" onMouseOver="hilite(12666)" onMouseOut="lolite()" onClick="logVariable('maxpage')" href="../../_variables/maxpage.html">$maxpage</a>) {
<a name="l2655"><span class="linenum">2655</span></a>              if (<a class="var it12668" onMouseOver="hilite(12668)" onMouseOut="lolite()" onClick="logVariable('pageto')" href="../../_variables/pageto.html">$pageto</a> &lt; <a class="var it12666" onMouseOver="hilite(12666)" onMouseOut="lolite()" onClick="logVariable('maxpage')" href="../../_variables/maxpage.html">$maxpage</a> -1) {
<a name="l2656"><span class="linenum">2656</span></a>                  <a class="var it12670" onMouseOver="hilite(12670)" onMouseOut="lolite()" onClick="logVariable('lastpagecode')" href="../../_variables/lastpagecode.html">$lastpagecode</a> = &quot;<a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a>...&quot;;
<a name="l2657"><span class="linenum">2657</span></a>              }
<a name="l2658"><span class="linenum">2658</span></a>              <a class="var it12670" onMouseOver="hilite(12670)" onMouseOut="lolite()" onClick="logVariable('lastpagecode')" href="../../_variables/lastpagecode.html">$lastpagecode</a> .= &quot;<a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a>&lt;a href=\&quot;{<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>}page=<a class="var it12666" onMouseOver="hilite(12666)" onMouseOut="lolite()" onClick="logVariable('maxpage')" href="../../_variables/maxpage.html">$maxpage</a>\&quot;&gt;&quot;.(<a class="var it12666" onMouseOver="hilite(12666)" onMouseOut="lolite()" onClick="logVariable('maxpage')" href="../../_variables/maxpage.html">$maxpage</a>+1).&quot;&lt;/a&gt;&quot;;
<a name="l2659"><span class="linenum">2659</span></a>          }
<a name="l2660"><span class="linenum">2660</span></a>  
<a name="l2661"><span class="linenum">2661</span></a>  <span class="comment">        //Previous</span>
<a name="l2662"><span class="linenum">2662</span></a>          if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> &gt; 0 &amp;&amp; <a class="var it12664" onMouseOver="hilite(12664)" onMouseOut="lolite()" onClick="logVariable('previousandnext')" href="../../_variables/previousandnext.html">$previousandnext</a>) {
<a name="l2663"><span class="linenum">2663</span></a>              <a class="var it4815" onMouseOver="hilite(4815)" onMouseOut="lolite()" onClick="logVariable('pagenum')" href="../../_variables/pagenum.html">$pagenum</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> - 1;
<a name="l2664"><span class="linenum">2664</span></a>              <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= &quot;&amp;nbsp;(&lt;a  href=\&quot;{<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>}page=<a class="var it4815" onMouseOver="hilite(4815)" onMouseOut="lolite()" onClick="logVariable('pagenum')" href="../../_variables/pagenum.html">$pagenum</a>\&quot;&gt;&quot;.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;previous&quot;).&quot;&lt;/a&gt;)&amp;nbsp;&quot;;
<a name="l2665"><span class="linenum">2665</span></a>          }
<a name="l2666"><span class="linenum">2666</span></a>  
<a name="l2667"><span class="linenum">2667</span></a>  <span class="comment">        //Add first</span>
<a name="l2668"><span class="linenum">2668</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= <a class="var it12669" onMouseOver="hilite(12669)" onMouseOut="lolite()" onClick="logVariable('firstpagecode')" href="../../_variables/firstpagecode.html">$firstpagecode</a>;
<a name="l2669"><span class="linenum">2669</span></a>  
<a name="l2670"><span class="linenum">2670</span></a>          <a class="var it4815" onMouseOver="hilite(4815)" onMouseOut="lolite()" onClick="logVariable('pagenum')" href="../../_variables/pagenum.html">$pagenum</a> = <a class="var it12667" onMouseOver="hilite(12667)" onMouseOut="lolite()" onClick="logVariable('pagefrom')" href="../../_variables/pagefrom.html">$pagefrom</a>;
<a name="l2671"><span class="linenum">2671</span></a>  
<a name="l2672"><span class="linenum">2672</span></a>  <span class="comment">        //List of maxdisplay pages</span>
<a name="l2673"><span class="linenum">2673</span></a>          while (<a class="var it4815" onMouseOver="hilite(4815)" onMouseOut="lolite()" onClick="logVariable('pagenum')" href="../../_variables/pagenum.html">$pagenum</a> &lt;= <a class="var it12668" onMouseOver="hilite(12668)" onMouseOut="lolite()" onClick="logVariable('pageto')" href="../../_variables/pageto.html">$pageto</a>) {
<a name="l2674"><span class="linenum">2674</span></a>              <a class="var it12671" onMouseOver="hilite(12671)" onMouseOut="lolite()" onClick="logVariable('pagetoshow')" href="../../_variables/pagetoshow.html">$pagetoshow</a> = <a class="var it4815" onMouseOver="hilite(4815)" onMouseOut="lolite()" onClick="logVariable('pagenum')" href="../../_variables/pagenum.html">$pagenum</a> +1;
<a name="l2675"><span class="linenum">2675</span></a>              if (<a class="var it4815" onMouseOver="hilite(4815)" onMouseOut="lolite()" onClick="logVariable('pagenum')" href="../../_variables/pagenum.html">$pagenum</a> == <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> &amp;&amp; !<a class="var it12665" onMouseOver="hilite(12665)" onMouseOut="lolite()" onClick="logVariable('specialselected')" href="../../_variables/specialselected.html">$specialselected</a>) {
<a name="l2676"><span class="linenum">2676</span></a>                  <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= &quot;<a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a>&lt;b&gt;<a class="var it12671" onMouseOver="hilite(12671)" onMouseOut="lolite()" onClick="logVariable('pagetoshow')" href="../../_variables/pagetoshow.html">$pagetoshow</a>&lt;/b&gt;&quot;;
<a name="l2677"><span class="linenum">2677</span></a>              } else {
<a name="l2678"><span class="linenum">2678</span></a>                  <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= &quot;<a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a>&lt;a href=\&quot;{<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>}page=<a class="var it4815" onMouseOver="hilite(4815)" onMouseOut="lolite()" onClick="logVariable('pagenum')" href="../../_variables/pagenum.html">$pagenum</a>\&quot;&gt;<a class="var it12671" onMouseOver="hilite(12671)" onMouseOut="lolite()" onClick="logVariable('pagetoshow')" href="../../_variables/pagetoshow.html">$pagetoshow</a>&lt;/a&gt;&quot;;
<a name="l2679"><span class="linenum">2679</span></a>              }
<a name="l2680"><span class="linenum">2680</span></a>              <a class="var it4815" onMouseOver="hilite(4815)" onMouseOut="lolite()" onClick="logVariable('pagenum')" href="../../_variables/pagenum.html">$pagenum</a>++;
<a name="l2681"><span class="linenum">2681</span></a>          }
<a name="l2682"><span class="linenum">2682</span></a>  
<a name="l2683"><span class="linenum">2683</span></a>  <span class="comment">        //Add last</span>
<a name="l2684"><span class="linenum">2684</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= <a class="var it12670" onMouseOver="hilite(12670)" onMouseOut="lolite()" onClick="logVariable('lastpagecode')" href="../../_variables/lastpagecode.html">$lastpagecode</a>;
<a name="l2685"><span class="linenum">2685</span></a>  
<a name="l2686"><span class="linenum">2686</span></a>  <span class="comment">        //Next</span>
<a name="l2687"><span class="linenum">2687</span></a>          if (<a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> &lt; <a class="var it12666" onMouseOver="hilite(12666)" onMouseOut="lolite()" onClick="logVariable('maxpage')" href="../../_variables/maxpage.html">$maxpage</a> &amp;&amp; <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> &lt; <a class="var it12660" onMouseOver="hilite(12660)" onMouseOut="lolite()" onClick="logVariable('maxpageallowed')" href="../../_variables/maxpageallowed.html">$maxpageallowed</a> &amp;&amp; <a class="var it12664" onMouseOver="hilite(12664)" onMouseOut="lolite()" onClick="logVariable('previousandnext')" href="../../_variables/previousandnext.html">$previousandnext</a>) {
<a name="l2688"><span class="linenum">2688</span></a>              <a class="var it4815" onMouseOver="hilite(4815)" onMouseOut="lolite()" onClick="logVariable('pagenum')" href="../../_variables/pagenum.html">$pagenum</a> = <a class="var it30" onMouseOver="hilite(30)" onMouseOut="lolite()" onClick="logVariable('page')" href="../../_variables/page.html">$page</a> + 1;
<a name="l2689"><span class="linenum">2689</span></a>              <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= &quot;<a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a>(&lt;a href=\&quot;{<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>}page=<a class="var it4815" onMouseOver="hilite(4815)" onMouseOut="lolite()" onClick="logVariable('pagenum')" href="../../_variables/pagenum.html">$pagenum</a>\&quot;&gt;&quot;.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>(&quot;next&quot;).&quot;&lt;/a&gt;)&quot;;
<a name="l2690"><span class="linenum">2690</span></a>          }
<a name="l2691"><span class="linenum">2691</span></a>  
<a name="l2692"><span class="linenum">2692</span></a>  <span class="comment">        //Add special</span>
<a name="l2693"><span class="linenum">2693</span></a>          if (<a class="var it12615" onMouseOver="hilite(12615)" onMouseOut="lolite()" onClick="logVariable('showspecial')" href="../../_variables/showspecial.html">$showspecial</a>) {
<a name="l2694"><span class="linenum">2694</span></a>              <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= '&lt;br /&gt;';
<a name="l2695"><span class="linenum">2695</span></a>              if (<a class="var it12665" onMouseOver="hilite(12665)" onMouseOut="lolite()" onClick="logVariable('specialselected')" href="../../_variables/specialselected.html">$specialselected</a>) {
<a name="l2696"><span class="linenum">2696</span></a>                  <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= &quot;&lt;b&gt;<a class="var it12662" onMouseOver="hilite(12662)" onMouseOut="lolite()" onClick="logVariable('specialtext')" href="../../_variables/specialtext.html">$specialtext</a>&lt;/b&gt;&quot;;
<a name="l2697"><span class="linenum">2697</span></a>              } else {
<a name="l2698"><span class="linenum">2698</span></a>                  <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= &quot;<a class="var it2203" onMouseOver="hilite(2203)" onMouseOut="lolite()" onClick="logVariable('separator')" href="../../_variables/separator.html">$separator</a>&lt;a href=\&quot;{<a class="var it424" onMouseOver="hilite(424)" onMouseOut="lolite()" onClick="logVariable('baseurl')" href="../../_variables/baseurl.html">$baseurl</a>}page=<a class="var it12663" onMouseOver="hilite(12663)" onMouseOut="lolite()" onClick="logVariable('specialvalue')" href="../../_variables/specialvalue.html">$specialvalue</a>\&quot;&gt;<a class="var it12662" onMouseOver="hilite(12662)" onMouseOut="lolite()" onClick="logVariable('specialtext')" href="../../_variables/specialtext.html">$specialtext</a>&lt;/a&gt;&quot;;
<a name="l2699"><span class="linenum">2699</span></a>              }
<a name="l2700"><span class="linenum">2700</span></a>          }
<a name="l2701"><span class="linenum">2701</span></a>  
<a name="l2702"><span class="linenum">2702</span></a>  <span class="comment">        //End html</span>
<a name="l2703"><span class="linenum">2703</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= &quot;&lt;/p&gt;&quot;;
<a name="l2704"><span class="linenum">2704</span></a>          <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a> .= &quot;&lt;/div&gt;&quot;;
<a name="l2705"><span class="linenum">2705</span></a>      }
<a name="l2706"><span class="linenum">2706</span></a>  
<a name="l2707"><span class="linenum">2707</span></a>      return <a class="var it1960" onMouseOver="hilite(1960)" onMouseOut="lolite()" onClick="logVariable('code')" href="../../_variables/code.html">$code</a>;
<a name="l2708"><span class="linenum">2708</span></a>  }
<a name="l2709"><span class="linenum">2709</span></a>  
<a name="l2710"><span class="linenum">2710</span></a>  <span class="comment">/**</span>
<a name="l2711"><span class="linenum">2711</span></a>  <span class="comment"> * List the actions that correspond to a view of this module.</span>
<a name="l2712"><span class="linenum">2712</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l2713"><span class="linenum">2713</span></a>  <span class="comment"> *</span>
<a name="l2714"><span class="linenum">2714</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l2715"><span class="linenum">2715</span></a>  <span class="comment"> *       crud = 'r' and edulevel = LEVEL_PARTICIPATING will</span>
<a name="l2716"><span class="linenum">2716</span></a>  <span class="comment"> *       be considered as view action.</span>
<a name="l2717"><span class="linenum">2717</span></a>  <span class="comment"> *</span>
<a name="l2718"><span class="linenum">2718</span></a>  <span class="comment"> * @return array</span>
<a name="l2719"><span class="linenum">2719</span></a>  <span class="comment"> */</span>
<a name="l2720"><span class="linenum">2720</span></a>  function <a class="function" onClick="logFunction('glossary_get_view_actions')" href="../../_functions/glossary_get_view_actions.html" onMouseOver="funcPopup(event,'glossary_get_view_actions')">glossary_get_view_actions</a>() {
<a name="l2721"><span class="linenum">2721</span></a>      return array('view','view all','view entry');
<a name="l2722"><span class="linenum">2722</span></a>  }
<a name="l2723"><span class="linenum">2723</span></a>  
<a name="l2724"><span class="linenum">2724</span></a>  <span class="comment">/**</span>
<a name="l2725"><span class="linenum">2725</span></a>  <span class="comment"> * List the actions that correspond to a post of this module.</span>
<a name="l2726"><span class="linenum">2726</span></a>  <span class="comment"> * This is used by the participation report.</span>
<a name="l2727"><span class="linenum">2727</span></a>  <span class="comment"> *</span>
<a name="l2728"><span class="linenum">2728</span></a>  <span class="comment"> * Note: This is not used by new logging system. Event with</span>
<a name="l2729"><span class="linenum">2729</span></a>  <span class="comment"> *       crud = ('c' || 'u' || 'd') and edulevel = LEVEL_PARTICIPATING</span>
<a name="l2730"><span class="linenum">2730</span></a>  <span class="comment"> *       will be considered as post action.</span>
<a name="l2731"><span class="linenum">2731</span></a>  <span class="comment"> *</span>
<a name="l2732"><span class="linenum">2732</span></a>  <span class="comment"> * @return array</span>
<a name="l2733"><span class="linenum">2733</span></a>  <span class="comment"> */</span>
<a name="l2734"><span class="linenum">2734</span></a>  function <a class="function" onClick="logFunction('glossary_get_post_actions')" href="../../_functions/glossary_get_post_actions.html" onMouseOver="funcPopup(event,'glossary_get_post_actions')">glossary_get_post_actions</a>() {
<a name="l2735"><span class="linenum">2735</span></a>      return array('add category','add entry','approve entry','delete category','delete entry','edit category','update entry');
<a name="l2736"><span class="linenum">2736</span></a>  }
<a name="l2737"><span class="linenum">2737</span></a>  
<a name="l2738"><span class="linenum">2738</span></a>  
<a name="l2739"><span class="linenum">2739</span></a>  <span class="comment">/**</span>
<a name="l2740"><span class="linenum">2740</span></a>  <span class="comment"> * Implementation of the function for printing the form elements that control</span>
<a name="l2741"><span class="linenum">2741</span></a>  <span class="comment"> * whether the course reset functionality affects the glossary.</span>
<a name="l2742"><span class="linenum">2742</span></a>  <span class="comment"> * @param object $mform form passed by reference</span>
<a name="l2743"><span class="linenum">2743</span></a>  <span class="comment"> */</span>
<a name="l2744"><span class="linenum">2744</span></a>  function <a class="function" onClick="logFunction('glossary_reset_course_form_definition')" href="../../_functions/glossary_reset_course_form_definition.html" onMouseOver="funcPopup(event,'glossary_reset_course_form_definition')">glossary_reset_course_form_definition</a>(&amp;<a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>) {
<a name="l2745"><span class="linenum">2745</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('header', 'glossaryheader', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'glossary'));
<a name="l2746"><span class="linenum">2746</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'reset_glossary_all', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetglossariesall','glossary'));
<a name="l2747"><span class="linenum">2747</span></a>  
<a name="l2748"><span class="linenum">2748</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('select', 'reset_glossary_types', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetglossaries', 'glossary'),
<a name="l2749"><span class="linenum">2749</span></a>                         array('main'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('mainglossary', 'glossary'), 'secondary'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('secondaryglossary', 'glossary')), array('multiple' =&gt; 'multiple'));
<a name="l2750"><span class="linenum">2750</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('setAdvanced')" href="../../_functions/setadvanced.html" onMouseOver="funcPopup(event,'setadvanced')">setAdvanced</a>('reset_glossary_types');
<a name="l2751"><span class="linenum">2751</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('reset_glossary_types', 'reset_glossary_all', 'checked');
<a name="l2752"><span class="linenum">2752</span></a>  
<a name="l2753"><span class="linenum">2753</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'reset_glossary_notenrolled', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deletenotenrolled', 'glossary'));
<a name="l2754"><span class="linenum">2754</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('reset_glossary_notenrolled', 'reset_glossary_all', 'checked');
<a name="l2755"><span class="linenum">2755</span></a>  
<a name="l2756"><span class="linenum">2756</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'reset_glossary_ratings', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallratings'));
<a name="l2757"><span class="linenum">2757</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('reset_glossary_ratings', 'reset_glossary_all', 'checked');
<a name="l2758"><span class="linenum">2758</span></a>  
<a name="l2759"><span class="linenum">2759</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('addElement')" href="../../_functions/addelement.html" onMouseOver="funcPopup(event,'addelement')">addElement</a>('checkbox', 'reset_glossary_comments', <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallcomments'));
<a name="l2760"><span class="linenum">2760</span></a>      <a class="var it219" onMouseOver="hilite(219)" onMouseOut="lolite()" onClick="logVariable('mform')" href="../../_variables/mform.html">$mform</a>-&gt;<a class="function" onClick="logFunction('disabledIf')" href="../../_functions/disabledif.html" onMouseOver="funcPopup(event,'disabledif')">disabledIf</a>('reset_glossary_comments', 'reset_glossary_all', 'checked');
<a name="l2761"><span class="linenum">2761</span></a>  }
<a name="l2762"><span class="linenum">2762</span></a>  
<a name="l2763"><span class="linenum">2763</span></a>  <span class="comment">/**</span>
<a name="l2764"><span class="linenum">2764</span></a>  <span class="comment"> * Course reset form defaults.</span>
<a name="l2765"><span class="linenum">2765</span></a>  <span class="comment"> * @return array</span>
<a name="l2766"><span class="linenum">2766</span></a>  <span class="comment"> */</span>
<a name="l2767"><span class="linenum">2767</span></a>  function <a class="function" onClick="logFunction('glossary_reset_course_form_defaults')" href="../../_functions/glossary_reset_course_form_defaults.html" onMouseOver="funcPopup(event,'glossary_reset_course_form_defaults')">glossary_reset_course_form_defaults</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>) {
<a name="l2768"><span class="linenum">2768</span></a>      return array('reset_glossary_all'=&gt;0, 'reset_glossary_ratings'=&gt;1, 'reset_glossary_comments'=&gt;1, 'reset_glossary_notenrolled'=&gt;0);
<a name="l2769"><span class="linenum">2769</span></a>  }
<a name="l2770"><span class="linenum">2770</span></a>  
<a name="l2771"><span class="linenum">2771</span></a>  <span class="comment">/**</span>
<a name="l2772"><span class="linenum">2772</span></a>  <span class="comment"> * Removes all grades from gradebook</span>
<a name="l2773"><span class="linenum">2773</span></a>  <span class="comment"> *</span>
<a name="l2774"><span class="linenum">2774</span></a>  <span class="comment"> * @param int $courseid The ID of the course to reset</span>
<a name="l2775"><span class="linenum">2775</span></a>  <span class="comment"> * @param string $type The optional type of glossary. 'main', 'secondary' or ''</span>
<a name="l2776"><span class="linenum">2776</span></a>  <span class="comment"> */</span>
<a name="l2777"><span class="linenum">2777</span></a>  function <a class="function" onClick="logFunction('glossary_reset_gradebook')" href="../../_functions/glossary_reset_gradebook.html" onMouseOver="funcPopup(event,'glossary_reset_gradebook')">glossary_reset_gradebook</a>(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>, <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>='') {
<a name="l2778"><span class="linenum">2778</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2779"><span class="linenum">2779</span></a>  
<a name="l2780"><span class="linenum">2780</span></a>      switch (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l2781"><span class="linenum">2781</span></a>          case 'main'      : <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = &quot;AND g.mainglossary=1&quot;; break;
<a name="l2782"><span class="linenum">2782</span></a>          case 'secondary' : <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = &quot;AND g.mainglossary=0&quot;; break;
<a name="l2783"><span class="linenum">2783</span></a>          default          : <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> = &quot;&quot;; <span class="comment">//all</span>
<a name="l2784"><span class="linenum">2784</span></a>      }
<a name="l2785"><span class="linenum">2785</span></a>  
<a name="l2786"><span class="linenum">2786</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;SELECT g.*, cm.idnumber as cmidnumber, g.course as courseid
<a name="l2787"><span class="linenum">2787</span></a>                FROM {glossary} g, {course_modules} cm, {modules} m
<a name="l2788"><span class="linenum">2788</span></a>               WHERE m.name='glossary' AND m.id=cm.module AND cm.instance=g.id AND g.course=? <a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>&quot;;
<a name="l2789"><span class="linenum">2789</span></a>  
<a name="l2790"><span class="linenum">2790</span></a>      if (<a class="var it9168" onMouseOver="hilite(9168)" onMouseOut="lolite()" onClick="logVariable('glossarys')" href="../../_variables/glossarys.html">$glossarys</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, array(<a class="var it700" onMouseOver="hilite(700)" onMouseOut="lolite()" onClick="logVariable('courseid')" href="../../_variables/courseid.html">$courseid</a>))) {
<a name="l2791"><span class="linenum">2791</span></a>          foreach (<a class="var it9168" onMouseOver="hilite(9168)" onMouseOut="lolite()" onClick="logVariable('glossarys')" href="../../_variables/glossarys.html">$glossarys</a> as <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>) {
<a name="l2792"><span class="linenum">2792</span></a>              <a class="function" onClick="logFunction('glossary_grade_item_update')" href="../../_functions/glossary_grade_item_update.html" onMouseOver="funcPopup(event,'glossary_grade_item_update')">glossary_grade_item_update</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, 'reset');
<a name="l2793"><span class="linenum">2793</span></a>          }
<a name="l2794"><span class="linenum">2794</span></a>      }
<a name="l2795"><span class="linenum">2795</span></a>  }
<a name="l2796"><span class="linenum">2796</span></a>  <span class="comment">/**</span>
<a name="l2797"><span class="linenum">2797</span></a>  <span class="comment"> * Actual implementation of the reset course functionality, delete all the</span>
<a name="l2798"><span class="linenum">2798</span></a>  <span class="comment"> * glossary responses for course $data-&gt;courseid.</span>
<a name="l2799"><span class="linenum">2799</span></a>  <span class="comment"> *</span>
<a name="l2800"><span class="linenum">2800</span></a>  <span class="comment"> * @global object</span>
<a name="l2801"><span class="linenum">2801</span></a>  <span class="comment"> * @param $data the data submitted from the reset course.</span>
<a name="l2802"><span class="linenum">2802</span></a>  <span class="comment"> * @return array status array</span>
<a name="l2803"><span class="linenum">2803</span></a>  <span class="comment"> */</span>
<a name="l2804"><span class="linenum">2804</span></a>  function <a class="function" onClick="logFunction('glossary_reset_userdata')" href="../../_functions/glossary_reset_userdata.html" onMouseOver="funcPopup(event,'glossary_reset_userdata')">glossary_reset_userdata</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>) {
<a name="l2805"><span class="linenum">2805</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l2806"><span class="linenum">2806</span></a>      require_once(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('dirroot')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/dirroot.html">dirroot</a>.'<a class="filename" href="../../rating/lib.php.html">/rating/lib.php</a>');
<a name="l2807"><span class="linenum">2807</span></a>  
<a name="l2808"><span class="linenum">2808</span></a>      <a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('modulenameplural', 'glossary');
<a name="l2809"><span class="linenum">2809</span></a>      <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a> = array();
<a name="l2810"><span class="linenum">2810</span></a>  
<a name="l2811"><span class="linenum">2811</span></a>      <a class="var it12672" onMouseOver="hilite(12672)" onMouseOut="lolite()" onClick="logVariable('allentriessql')" href="../../_variables/allentriessql.html">$allentriessql</a> = &quot;SELECT e.id
<a name="l2812"><span class="linenum">2812</span></a>                          FROM {glossary_entries} e
<a name="l2813"><span class="linenum">2813</span></a>                               JOIN {glossary} g ON e.glossaryid = g.id
<a name="l2814"><span class="linenum">2814</span></a>                         WHERE g.course = ?&quot;;
<a name="l2815"><span class="linenum">2815</span></a>  
<a name="l2816"><span class="linenum">2816</span></a>      <a class="var it12673" onMouseOver="hilite(12673)" onMouseOut="lolite()" onClick="logVariable('allglossariessql')" href="../../_variables/allglossariessql.html">$allglossariessql</a> = &quot;SELECT g.id
<a name="l2817"><span class="linenum">2817</span></a>                             FROM {glossary} g
<a name="l2818"><span class="linenum">2818</span></a>                            WHERE g.course = ?&quot;;
<a name="l2819"><span class="linenum">2819</span></a>  
<a name="l2820"><span class="linenum">2820</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l2821"><span class="linenum">2821</span></a>  
<a name="l2822"><span class="linenum">2822</span></a>      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a> = <a class="function" onClick="logFunction('get_file_storage')" href="../../_functions/get_file_storage.html" onMouseOver="funcPopup(event,'get_file_storage')">get_file_storage</a>();
<a name="l2823"><span class="linenum">2823</span></a>  
<a name="l2824"><span class="linenum">2824</span></a>      <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a> = <span class="keyword">new </span><a class="class" onClick="logClass('rating_manager')" href="../../_classes/rating_manager.html" onMouseOver="classPopup(event,'rating_manager')">rating_manager</a>();
<a name="l2825"><span class="linenum">2825</span></a>      <a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a> = new stdClass;
<a name="l2826"><span class="linenum">2826</span></a>      <a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('component')" class="var it44555" onMouseOver="hilite(44555)" onMouseOut="lolite()" href="../../_variables/component.html">component</a> = 'mod_glossary';
<a name="l2827"><span class="linenum">2827</span></a>      <a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('ratingarea')" class="var it44555" onMouseOver="hilite(44555)" onMouseOut="lolite()" href="../../_variables/ratingarea.html">ratingarea</a> = 'entry';
<a name="l2828"><span class="linenum">2828</span></a>  
<a name="l2829"><span class="linenum">2829</span></a>  <span class="comment">    // delete entries if requested</span>
<a name="l2830"><span class="linenum">2830</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_glossary_all')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_glossary_all.html">reset_glossary_all</a>)
<a name="l2831"><span class="linenum">2831</span></a>           <a class="function" onClick="logFunction('or')" href="../../_functions/or.html" onMouseOver="funcPopup(event,'or')">or</a> (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_glossary_types')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_glossary_types.html">reset_glossary_types</a>) and <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('main', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_glossary_types')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_glossary_types.html">reset_glossary_types</a>) and <a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('secondary', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_glossary_types')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_glossary_types.html">reset_glossary_types</a>))) {
<a name="l2832"><span class="linenum">2832</span></a>  
<a name="l2833"><span class="linenum">2833</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = 'glossary_entry';
<a name="l2834"><span class="linenum">2834</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('comments', &quot;itemid IN (<a class="var it12672" onMouseOver="hilite(12672)" onMouseOut="lolite()" onClick="logVariable('allentriessql')" href="../../_variables/allentriessql.html">$allentriessql</a>) AND commentarea=?&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2835"><span class="linenum">2835</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('glossary_alias',    &quot;entryid IN (<a class="var it12672" onMouseOver="hilite(12672)" onMouseOut="lolite()" onClick="logVariable('allentriessql')" href="../../_variables/allentriessql.html">$allentriessql</a>)&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2836"><span class="linenum">2836</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('glossary_entries', &quot;glossaryid IN (<a class="var it12673" onMouseOver="hilite(12673)" onMouseOut="lolite()" onClick="logVariable('allglossariessql')" href="../../_variables/allglossariessql.html">$allglossariessql</a>)&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2837"><span class="linenum">2837</span></a>  
<a name="l2838"><span class="linenum">2838</span></a>  <span class="comment">        // now get rid of all attachments</span>
<a name="l2839"><span class="linenum">2839</span></a>          if (<a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('glossaries')" href="../../_variables/glossaries.html">$glossaries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it12673" onMouseOver="hilite(12673)" onMouseOut="lolite()" onClick="logVariable('allglossariessql')" href="../../_variables/allglossariessql.html">$allglossariessql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l2840"><span class="linenum">2840</span></a>              foreach (<a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('glossaries')" href="../../_variables/glossaries.html">$glossaries</a> as <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>=&gt;<a class="var it1292" onMouseOver="hilite(1292)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../../_variables/unused.html">$unused</a>) {
<a name="l2841"><span class="linenum">2841</span></a>                  if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>)) {
<a name="l2842"><span class="linenum">2842</span></a>                      continue;
<a name="l2843"><span class="linenum">2843</span></a>                  }
<a name="l2844"><span class="linenum">2844</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2845"><span class="linenum">2845</span></a>                  <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', 'attachment');
<a name="l2846"><span class="linenum">2846</span></a>  
<a name="l2847"><span class="linenum">2847</span></a>  <span class="comment">                //delete ratings</span>
<a name="l2848"><span class="linenum">2848</span></a>                  <a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('contextid')" class="var it44555" onMouseOver="hilite(44555)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2849"><span class="linenum">2849</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a>-&gt;<a class="function" onClick="logFunction('delete_ratings')" href="../../_functions/delete_ratings.html" onMouseOver="funcPopup(event,'delete_ratings')">delete_ratings</a>(<a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>);
<a name="l2850"><span class="linenum">2850</span></a>              }
<a name="l2851"><span class="linenum">2851</span></a>          }
<a name="l2852"><span class="linenum">2852</span></a>  
<a name="l2853"><span class="linenum">2853</span></a>  <span class="comment">        // remove all grades from gradebook</span>
<a name="l2854"><span class="linenum">2854</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_gradebook_grades')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_gradebook_grades.html">reset_gradebook_grades</a>)) {
<a name="l2855"><span class="linenum">2855</span></a>              <a class="function" onClick="logFunction('glossary_reset_gradebook')" href="../../_functions/glossary_reset_gradebook.html" onMouseOver="funcPopup(event,'glossary_reset_gradebook')">glossary_reset_gradebook</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l2856"><span class="linenum">2856</span></a>          }
<a name="l2857"><span class="linenum">2857</span></a>  
<a name="l2858"><span class="linenum">2858</span></a>          <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetglossariesall', 'glossary'), 'error'=&gt;false);
<a name="l2859"><span class="linenum">2859</span></a>  
<a name="l2860"><span class="linenum">2860</span></a>      } else if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_glossary_types')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_glossary_types.html">reset_glossary_types</a>)) {
<a name="l2861"><span class="linenum">2861</span></a>          <a class="var it12677" onMouseOver="hilite(12677)" onMouseOut="lolite()" onClick="logVariable('mainentriessql')" href="../../_variables/mainentriessql.html">$mainentriessql</a>         = &quot;<a class="var it12672" onMouseOver="hilite(12672)" onMouseOut="lolite()" onClick="logVariable('allentriessql')" href="../../_variables/allentriessql.html">$allentriessql</a> AND g.mainglossary=1&quot;;
<a name="l2862"><span class="linenum">2862</span></a>          <a class="var it12678" onMouseOver="hilite(12678)" onMouseOut="lolite()" onClick="logVariable('secondaryentriessql')" href="../../_variables/secondaryentriessql.html">$secondaryentriessql</a>    = &quot;<a class="var it12672" onMouseOver="hilite(12672)" onMouseOut="lolite()" onClick="logVariable('allentriessql')" href="../../_variables/allentriessql.html">$allentriessql</a> AND g.mainglossary=0&quot;;
<a name="l2863"><span class="linenum">2863</span></a>  
<a name="l2864"><span class="linenum">2864</span></a>          <a class="var it12679" onMouseOver="hilite(12679)" onMouseOut="lolite()" onClick="logVariable('mainglossariessql')" href="../../_variables/mainglossariessql.html">$mainglossariessql</a>      = &quot;<a class="var it12673" onMouseOver="hilite(12673)" onMouseOut="lolite()" onClick="logVariable('allglossariessql')" href="../../_variables/allglossariessql.html">$allglossariessql</a> AND g.mainglossary=1&quot;;
<a name="l2865"><span class="linenum">2865</span></a>          <a class="var it12680" onMouseOver="hilite(12680)" onMouseOut="lolite()" onClick="logVariable('secondaryglossariessql')" href="../../_variables/secondaryglossariessql.html">$secondaryglossariessql</a> = &quot;<a class="var it12673" onMouseOver="hilite(12673)" onMouseOut="lolite()" onClick="logVariable('allglossariessql')" href="../../_variables/allglossariessql.html">$allglossariessql</a> AND g.mainglossary=0&quot;;
<a name="l2866"><span class="linenum">2866</span></a>  
<a name="l2867"><span class="linenum">2867</span></a>          if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('main', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_glossary_types')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_glossary_types.html">reset_glossary_types</a>)) {
<a name="l2868"><span class="linenum">2868</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = 'glossary_entry';
<a name="l2869"><span class="linenum">2869</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('comments', &quot;itemid IN (<a class="var it12677" onMouseOver="hilite(12677)" onMouseOut="lolite()" onClick="logVariable('mainentriessql')" href="../../_variables/mainentriessql.html">$mainentriessql</a>) AND commentarea=?&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2870"><span class="linenum">2870</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('glossary_entries', &quot;glossaryid IN (<a class="var it12679" onMouseOver="hilite(12679)" onMouseOut="lolite()" onClick="logVariable('mainglossariessql')" href="../../_variables/mainglossariessql.html">$mainglossariessql</a>)&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2871"><span class="linenum">2871</span></a>  
<a name="l2872"><span class="linenum">2872</span></a>              if (<a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('glossaries')" href="../../_variables/glossaries.html">$glossaries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it12679" onMouseOver="hilite(12679)" onMouseOut="lolite()" onClick="logVariable('mainglossariessql')" href="../../_variables/mainglossariessql.html">$mainglossariessql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l2873"><span class="linenum">2873</span></a>                  foreach (<a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('glossaries')" href="../../_variables/glossaries.html">$glossaries</a> as <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>=&gt;<a class="var it1292" onMouseOver="hilite(1292)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../../_variables/unused.html">$unused</a>) {
<a name="l2874"><span class="linenum">2874</span></a>                      if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>)) {
<a name="l2875"><span class="linenum">2875</span></a>                          continue;
<a name="l2876"><span class="linenum">2876</span></a>                      }
<a name="l2877"><span class="linenum">2877</span></a>                      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2878"><span class="linenum">2878</span></a>                      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', 'attachment');
<a name="l2879"><span class="linenum">2879</span></a>  
<a name="l2880"><span class="linenum">2880</span></a>  <span class="comment">                    //delete ratings</span>
<a name="l2881"><span class="linenum">2881</span></a>                      <a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('contextid')" class="var it44555" onMouseOver="hilite(44555)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2882"><span class="linenum">2882</span></a>                      <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a>-&gt;<a class="function" onClick="logFunction('delete_ratings')" href="../../_functions/delete_ratings.html" onMouseOver="funcPopup(event,'delete_ratings')">delete_ratings</a>(<a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>);
<a name="l2883"><span class="linenum">2883</span></a>                  }
<a name="l2884"><span class="linenum">2884</span></a>              }
<a name="l2885"><span class="linenum">2885</span></a>  
<a name="l2886"><span class="linenum">2886</span></a>  <span class="comment">            // remove all grades from gradebook</span>
<a name="l2887"><span class="linenum">2887</span></a>              if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_gradebook_grades')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_gradebook_grades.html">reset_gradebook_grades</a>)) {
<a name="l2888"><span class="linenum">2888</span></a>                  <a class="function" onClick="logFunction('glossary_reset_gradebook')" href="../../_functions/glossary_reset_gradebook.html" onMouseOver="funcPopup(event,'glossary_reset_gradebook')">glossary_reset_gradebook</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>, 'main');
<a name="l2889"><span class="linenum">2889</span></a>              }
<a name="l2890"><span class="linenum">2890</span></a>  
<a name="l2891"><span class="linenum">2891</span></a>              <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetglossaries', 'glossary').': '.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('mainglossary', 'glossary'), 'error'=&gt;false);
<a name="l2892"><span class="linenum">2892</span></a>  
<a name="l2893"><span class="linenum">2893</span></a>          } else if (<a class="phpfunction" onClick="logFunction('in_array')" href="../../_functions/in_array.html" onMouseOver="phpfuncPopup(event,'in_array')">in_array</a>('secondary', <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_glossary_types')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_glossary_types.html">reset_glossary_types</a>)) {
<a name="l2894"><span class="linenum">2894</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = 'glossary_entry';
<a name="l2895"><span class="linenum">2895</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('comments', &quot;itemid IN (<a class="var it12678" onMouseOver="hilite(12678)" onMouseOut="lolite()" onClick="logVariable('secondaryentriessql')" href="../../_variables/secondaryentriessql.html">$secondaryentriessql</a>) AND commentarea=?&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2896"><span class="linenum">2896</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('glossary_entries', &quot;glossaryid IN (<a class="var it12680" onMouseOver="hilite(12680)" onMouseOut="lolite()" onClick="logVariable('secondaryglossariessql')" href="../../_variables/secondaryglossariessql.html">$secondaryglossariessql</a>)&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2897"><span class="linenum">2897</span></a>  <span class="comment">            // remove exported source flag from entries in main glossary</span>
<a name="l2898"><span class="linenum">2898</span></a>              <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('execute')" href="../../_functions/execute.html" onMouseOver="funcPopup(event,'execute')">execute</a>(&quot;UPDATE {glossary_entries}
<a name="l2899"><span class="linenum">2899</span></a>                               SET sourceglossaryid=0
<a name="l2900"><span class="linenum">2900</span></a>                             WHERE glossaryid IN (<a class="var it12679" onMouseOver="hilite(12679)" onMouseOut="lolite()" onClick="logVariable('mainglossariessql')" href="../../_variables/mainglossariessql.html">$mainglossariessql</a>)&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2901"><span class="linenum">2901</span></a>  
<a name="l2902"><span class="linenum">2902</span></a>              if (<a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('glossaries')" href="../../_variables/glossaries.html">$glossaries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it12680" onMouseOver="hilite(12680)" onMouseOut="lolite()" onClick="logVariable('secondaryglossariessql')" href="../../_variables/secondaryglossariessql.html">$secondaryglossariessql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l2903"><span class="linenum">2903</span></a>                  foreach (<a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('glossaries')" href="../../_variables/glossaries.html">$glossaries</a> as <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>=&gt;<a class="var it1292" onMouseOver="hilite(1292)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../../_variables/unused.html">$unused</a>) {
<a name="l2904"><span class="linenum">2904</span></a>                      if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>)) {
<a name="l2905"><span class="linenum">2905</span></a>                          continue;
<a name="l2906"><span class="linenum">2906</span></a>                      }
<a name="l2907"><span class="linenum">2907</span></a>                      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2908"><span class="linenum">2908</span></a>                      <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', 'attachment');
<a name="l2909"><span class="linenum">2909</span></a>  
<a name="l2910"><span class="linenum">2910</span></a>  <span class="comment">                    //delete ratings</span>
<a name="l2911"><span class="linenum">2911</span></a>                      <a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('contextid')" class="var it44555" onMouseOver="hilite(44555)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2912"><span class="linenum">2912</span></a>                      <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a>-&gt;<a class="function" onClick="logFunction('delete_ratings')" href="../../_functions/delete_ratings.html" onMouseOver="funcPopup(event,'delete_ratings')">delete_ratings</a>(<a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>);
<a name="l2913"><span class="linenum">2913</span></a>                  }
<a name="l2914"><span class="linenum">2914</span></a>              }
<a name="l2915"><span class="linenum">2915</span></a>  
<a name="l2916"><span class="linenum">2916</span></a>  <span class="comment">            // remove all grades from gradebook</span>
<a name="l2917"><span class="linenum">2917</span></a>              if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_gradebook_grades')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_gradebook_grades.html">reset_gradebook_grades</a>)) {
<a name="l2918"><span class="linenum">2918</span></a>                  <a class="function" onClick="logFunction('glossary_reset_gradebook')" href="../../_functions/glossary_reset_gradebook.html" onMouseOver="funcPopup(event,'glossary_reset_gradebook')">glossary_reset_gradebook</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>, 'secondary');
<a name="l2919"><span class="linenum">2919</span></a>              }
<a name="l2920"><span class="linenum">2920</span></a>  
<a name="l2921"><span class="linenum">2921</span></a>              <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('resetglossaries', 'glossary').': '.<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('secondaryglossary', 'glossary'), 'error'=&gt;false);
<a name="l2922"><span class="linenum">2922</span></a>          }
<a name="l2923"><span class="linenum">2923</span></a>      }
<a name="l2924"><span class="linenum">2924</span></a>  
<a name="l2925"><span class="linenum">2925</span></a>  <span class="comment">    // remove entries by users not enrolled into course</span>
<a name="l2926"><span class="linenum">2926</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_glossary_notenrolled')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_glossary_notenrolled.html">reset_glossary_notenrolled</a>)) {
<a name="l2927"><span class="linenum">2927</span></a>          <a class="var it12682" onMouseOver="hilite(12682)" onMouseOut="lolite()" onClick="logVariable('entriessql')" href="../../_variables/entriessql.html">$entriessql</a> = &quot;SELECT e.id, e.userid, e.glossaryid, u.id AS userexists, u.deleted AS userdeleted
<a name="l2928"><span class="linenum">2928</span></a>                           FROM {glossary_entries} e
<a name="l2929"><span class="linenum">2929</span></a>                                JOIN {glossary} g ON e.glossaryid = g.id
<a name="l2930"><span class="linenum">2930</span></a>                                LEFT JOIN {user} u ON e.userid = u.id
<a name="l2931"><span class="linenum">2931</span></a>                          WHERE g.course = ? AND e.userid &gt; 0&quot;;
<a name="l2932"><span class="linenum">2932</span></a>  
<a name="l2933"><span class="linenum">2933</span></a>          <a class="var it12683" onMouseOver="hilite(12683)" onMouseOut="lolite()" onClick="logVariable('course_context')" href="../../_variables/course_context.html">$course_context</a> = <a class="class" onClick="logClass('context_course')" href="../../_classes/context_course.html" onMouseOver="classPopup(event,'context_course')">context_course</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l2934"><span class="linenum">2934</span></a>          <a class="var it12684" onMouseOver="hilite(12684)" onMouseOut="lolite()" onClick="logVariable('notenrolled')" href="../../_variables/notenrolled.html">$notenrolled</a> = array();
<a name="l2935"><span class="linenum">2935</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it12682" onMouseOver="hilite(12682)" onMouseOut="lolite()" onClick="logVariable('entriessql')" href="../../_variables/entriessql.html">$entriessql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2936"><span class="linenum">2936</span></a>          if (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('valid')" href="../../_functions/valid.html" onMouseOver="funcPopup(event,'valid')">valid</a>()) {
<a name="l2937"><span class="linenum">2937</span></a>              foreach (<a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a> as <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>) {
<a name="l2938"><span class="linenum">2938</span></a>                  if (<a class="phpfunction" onClick="logFunction('array_key_exists')" href="../../_functions/array_key_exists.html" onMouseOver="phpfuncPopup(event,'array_key_exists')">array_key_exists</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('userid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>, <a class="var it12684" onMouseOver="hilite(12684)" onMouseOut="lolite()" onClick="logVariable('notenrolled')" href="../../_variables/notenrolled.html">$notenrolled</a>) or !<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('userexists')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/userexists.html">userexists</a> or <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;userdeleted
<a name="l2939"><span class="linenum">2939</span></a>                    or !<a class="function" onClick="logFunction('is_enrolled')" href="../../_functions/is_enrolled.html" onMouseOver="funcPopup(event,'is_enrolled')">is_enrolled</a>(<a class="var it12683" onMouseOver="hilite(12683)" onMouseOut="lolite()" onClick="logVariable('course_context')" href="../../_variables/course_context.html">$course_context</a> , <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('userid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a>)) {
<a name="l2940"><span class="linenum">2940</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('comments', array('commentarea'=&gt;'glossary_entry', 'itemid'=&gt;<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2941"><span class="linenum">2941</span></a>                      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records')" href="../../_functions/delete_records.html" onMouseOver="funcPopup(event,'delete_records')">delete_records</a>('glossary_entries', array('id'=&gt;<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l2942"><span class="linenum">2942</span></a>  
<a name="l2943"><span class="linenum">2943</span></a>                      if (<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>)) {
<a name="l2944"><span class="linenum">2944</span></a>                          <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2945"><span class="linenum">2945</span></a>                          <a class="var it640" onMouseOver="hilite(640)" onMouseOut="lolite()" onClick="logVariable('fs')" href="../../_variables/fs.html">$fs</a>-&gt;<a class="function" onClick="logFunction('delete_area_files')" href="../../_functions/delete_area_files.html" onMouseOver="funcPopup(event,'delete_area_files')">delete_area_files</a>(<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', 'attachment', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2946"><span class="linenum">2946</span></a>  
<a name="l2947"><span class="linenum">2947</span></a>  <span class="comment">                        //delete ratings</span>
<a name="l2948"><span class="linenum">2948</span></a>                          <a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('contextid')" class="var it44555" onMouseOver="hilite(44555)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2949"><span class="linenum">2949</span></a>                          <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a>-&gt;<a class="function" onClick="logFunction('delete_ratings')" href="../../_functions/delete_ratings.html" onMouseOver="funcPopup(event,'delete_ratings')">delete_ratings</a>(<a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>);
<a name="l2950"><span class="linenum">2950</span></a>                      }
<a name="l2951"><span class="linenum">2951</span></a>                  }
<a name="l2952"><span class="linenum">2952</span></a>              }
<a name="l2953"><span class="linenum">2953</span></a>              <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deletenotenrolled', 'glossary'), 'error'=&gt;false);
<a name="l2954"><span class="linenum">2954</span></a>          }
<a name="l2955"><span class="linenum">2955</span></a>          <a class="var it83" onMouseOver="hilite(83)" onMouseOut="lolite()" onClick="logVariable('rs')" href="../../_variables/rs.html">$rs</a>-&gt;<a class="function" onClick="logFunction('close')" href="../../_functions/close.html" onMouseOver="funcPopup(event,'close')">close</a>();
<a name="l2956"><span class="linenum">2956</span></a>      }
<a name="l2957"><span class="linenum">2957</span></a>  
<a name="l2958"><span class="linenum">2958</span></a>  <span class="comment">    // remove all ratings</span>
<a name="l2959"><span class="linenum">2959</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_glossary_ratings')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_glossary_ratings.html">reset_glossary_ratings</a>)) {
<a name="l2960"><span class="linenum">2960</span></a>  <span class="comment">        //remove ratings</span>
<a name="l2961"><span class="linenum">2961</span></a>          if (<a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('glossaries')" href="../../_variables/glossaries.html">$glossaries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_records_sql')" href="../../_functions/get_records_sql.html" onMouseOver="funcPopup(event,'get_records_sql')">get_records_sql</a>(<a class="var it12673" onMouseOver="hilite(12673)" onMouseOut="lolite()" onClick="logVariable('allglossariessql')" href="../../_variables/allglossariessql.html">$allglossariessql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>)) {
<a name="l2962"><span class="linenum">2962</span></a>              foreach (<a class="var it7925" onMouseOver="hilite(7925)" onMouseOut="lolite()" onClick="logVariable('glossaries')" href="../../_variables/glossaries.html">$glossaries</a> as <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>=&gt;<a class="var it1292" onMouseOver="hilite(1292)" onMouseOut="lolite()" onClick="logVariable('unused')" href="../../_variables/unused.html">$unused</a>) {
<a name="l2963"><span class="linenum">2963</span></a>                  if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>)) {
<a name="l2964"><span class="linenum">2964</span></a>                      continue;
<a name="l2965"><span class="linenum">2965</span></a>                  }
<a name="l2966"><span class="linenum">2966</span></a>                  <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l2967"><span class="linenum">2967</span></a>  
<a name="l2968"><span class="linenum">2968</span></a>  <span class="comment">                //delete ratings</span>
<a name="l2969"><span class="linenum">2969</span></a>                  <a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>-&gt;<a onClick="logVariable('contextid')" class="var it44555" onMouseOver="hilite(44555)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> = <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l2970"><span class="linenum">2970</span></a>                  <a class="var it3926" onMouseOver="hilite(3926)" onMouseOut="lolite()" onClick="logVariable('rm')" href="../../_variables/rm.html">$rm</a>-&gt;<a class="function" onClick="logFunction('delete_ratings')" href="../../_functions/delete_ratings.html" onMouseOver="funcPopup(event,'delete_ratings')">delete_ratings</a>(<a class="var it12674" onMouseOver="hilite(12674)" onMouseOut="lolite()" onClick="logVariable('ratingdeloptions')" href="../../_variables/ratingdeloptions.html">$ratingdeloptions</a>);
<a name="l2971"><span class="linenum">2971</span></a>              }
<a name="l2972"><span class="linenum">2972</span></a>          }
<a name="l2973"><span class="linenum">2973</span></a>  
<a name="l2974"><span class="linenum">2974</span></a>  <span class="comment">        // remove all grades from gradebook</span>
<a name="l2975"><span class="linenum">2975</span></a>          if (empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_gradebook_grades')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_gradebook_grades.html">reset_gradebook_grades</a>)) {
<a name="l2976"><span class="linenum">2976</span></a>              <a class="function" onClick="logFunction('glossary_reset_gradebook')" href="../../_functions/glossary_reset_gradebook.html" onMouseOver="funcPopup(event,'glossary_reset_gradebook')">glossary_reset_gradebook</a>(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l2977"><span class="linenum">2977</span></a>          }
<a name="l2978"><span class="linenum">2978</span></a>          <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallratings'), 'error'=&gt;false);
<a name="l2979"><span class="linenum">2979</span></a>      }
<a name="l2980"><span class="linenum">2980</span></a>  
<a name="l2981"><span class="linenum">2981</span></a>  <span class="comment">    // remove comments</span>
<a name="l2982"><span class="linenum">2982</span></a>      if (!empty(<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('reset_glossary_comments')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/reset_glossary_comments.html">reset_glossary_comments</a>)) {
<a name="l2983"><span class="linenum">2983</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>[] = 'glossary_entry';
<a name="l2984"><span class="linenum">2984</span></a>          <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('delete_records_select')" href="../../_functions/delete_records_select.html" onMouseOver="funcPopup(event,'delete_records_select')">delete_records_select</a>('comments', &quot;itemid IN (<a class="var it12672" onMouseOver="hilite(12672)" onMouseOut="lolite()" onClick="logVariable('allentriessql')" href="../../_variables/allentriessql.html">$allentriessql</a>) AND commentarea= ? &quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l2985"><span class="linenum">2985</span></a>          <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('deleteallcomments'), 'error'=&gt;false);
<a name="l2986"><span class="linenum">2986</span></a>      }
<a name="l2987"><span class="linenum">2987</span></a>  
<a name="l2988"><span class="linenum">2988</span></a>  <span class="comment">    /// updating dates - shift may be negative too</span>
<a name="l2989"><span class="linenum">2989</span></a>      if (<a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeshift')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/timeshift.html">timeshift</a>) {
<a name="l2990"><span class="linenum">2990</span></a>          <a class="function" onClick="logFunction('shift_course_mod_dates')" href="../../_functions/shift_course_mod_dates.html" onMouseOver="funcPopup(event,'shift_course_mod_dates')">shift_course_mod_dates</a>('glossary', array('assesstimestart', 'assesstimefinish'), <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('timeshift')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/timeshift.html">timeshift</a>, <a class="var it4" onMouseOver="hilite(4)" onMouseOut="lolite()" onClick="logVariable('data')" href="../../_variables/data.html">$data</a>-&gt;<a onClick="logVariable('courseid')" class="var it42917" onMouseOver="hilite(42917)" onMouseOut="lolite()" href="../../_variables/courseid.html">courseid</a>);
<a name="l2991"><span class="linenum">2991</span></a>          <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>[] = array('component'=&gt;<a class="var it9827" onMouseOver="hilite(9827)" onMouseOut="lolite()" onClick="logVariable('componentstr')" href="../../_variables/componentstr.html">$componentstr</a>, 'item'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('datechanged'), 'error'=&gt;false);
<a name="l2992"><span class="linenum">2992</span></a>      }
<a name="l2993"><span class="linenum">2993</span></a>  
<a name="l2994"><span class="linenum">2994</span></a>      return <a class="var it646" onMouseOver="hilite(646)" onMouseOut="lolite()" onClick="logVariable('status')" href="../../_variables/status.html">$status</a>;
<a name="l2995"><span class="linenum">2995</span></a>  }
<a name="l2996"><span class="linenum">2996</span></a>  
<a name="l2997"><span class="linenum">2997</span></a>  <span class="comment">/**</span>
<a name="l2998"><span class="linenum">2998</span></a>  <span class="comment"> * Returns all other caps used in module</span>
<a name="l2999"><span class="linenum">2999</span></a>  <span class="comment"> * @return array</span>
<a name="l3000"><span class="linenum">3000</span></a>  <span class="comment"> */</span>
<a name="l3001"><span class="linenum">3001</span></a>  function <a class="function" onClick="logFunction('glossary_get_extra_capabilities')" href="../../_functions/glossary_get_extra_capabilities.html" onMouseOver="funcPopup(event,'glossary_get_extra_capabilities')">glossary_get_extra_capabilities</a>() {
<a name="l3002"><span class="linenum">3002</span></a>      return array('moodle/site:accessallgroups', 'moodle/site:viewfullnames', 'moodle/site:trustcontent', 'moodle/rating:view', 'moodle/rating:viewany', 'moodle/rating:viewall', 'moodle/rating:rate', 'moodle/comment:view', 'moodle/comment:post', 'moodle/comment:delete');
<a name="l3003"><span class="linenum">3003</span></a>  }
<a name="l3004"><span class="linenum">3004</span></a>  
<a name="l3005"><span class="linenum">3005</span></a>  <span class="comment">/**</span>
<a name="l3006"><span class="linenum">3006</span></a>  <span class="comment"> * @param string $feature FEATURE_xx constant for requested feature</span>
<a name="l3007"><span class="linenum">3007</span></a>  <span class="comment"> * @return mixed True if module supports feature, null if doesn't know</span>
<a name="l3008"><span class="linenum">3008</span></a>  <span class="comment"> */</span>
<a name="l3009"><span class="linenum">3009</span></a>  function <a class="function" onClick="logFunction('glossary_supports')" href="../../_functions/glossary_supports.html" onMouseOver="funcPopup(event,'glossary_supports')">glossary_supports</a>(<a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l3010"><span class="linenum">3010</span></a>      switch(<a class="var it2267" onMouseOver="hilite(2267)" onMouseOut="lolite()" onClick="logVariable('feature')" href="../../_variables/feature.html">$feature</a>) {
<a name="l3011"><span class="linenum">3011</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPS')" href="../../_constants/FEATURE_GROUPS.html" onMouseOver="constPopup(event,'FEATURE_GROUPS')">FEATURE_GROUPS</a>:                  return false;
<a name="l3012"><span class="linenum">3012</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GROUPINGS')" href="../../_constants/FEATURE_GROUPINGS.html" onMouseOver="constPopup(event,'FEATURE_GROUPINGS')">FEATURE_GROUPINGS</a>:               return false;
<a name="l3013"><span class="linenum">3013</span></a>          case <a class="constant" onClick="logConstant('FEATURE_MOD_INTRO')" href="../../_constants/FEATURE_MOD_INTRO.html" onMouseOver="constPopup(event,'FEATURE_MOD_INTRO')">FEATURE_MOD_INTRO</a>:               return true;
<a name="l3014"><span class="linenum">3014</span></a>          case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_TRACKS_VIEWS')" href="../../_constants/FEATURE_COMPLETION_TRACKS_VIEWS.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_TRACKS_VIEWS')">FEATURE_COMPLETION_TRACKS_VIEWS</a>: return true;
<a name="l3015"><span class="linenum">3015</span></a>          case <a class="constant" onClick="logConstant('FEATURE_COMPLETION_HAS_RULES')" href="../../_constants/FEATURE_COMPLETION_HAS_RULES.html" onMouseOver="constPopup(event,'FEATURE_COMPLETION_HAS_RULES')">FEATURE_COMPLETION_HAS_RULES</a>:    return true;
<a name="l3016"><span class="linenum">3016</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_HAS_GRADE')" href="../../_constants/FEATURE_GRADE_HAS_GRADE.html" onMouseOver="constPopup(event,'FEATURE_GRADE_HAS_GRADE')">FEATURE_GRADE_HAS_GRADE</a>:         return true;
<a name="l3017"><span class="linenum">3017</span></a>          case <a class="constant" onClick="logConstant('FEATURE_GRADE_OUTCOMES')" href="../../_constants/FEATURE_GRADE_OUTCOMES.html" onMouseOver="constPopup(event,'FEATURE_GRADE_OUTCOMES')">FEATURE_GRADE_OUTCOMES</a>:          return true;
<a name="l3018"><span class="linenum">3018</span></a>          case <a class="constant" onClick="logConstant('FEATURE_RATE')" href="../../_constants/FEATURE_RATE.html" onMouseOver="constPopup(event,'FEATURE_RATE')">FEATURE_RATE</a>:                    return true;
<a name="l3019"><span class="linenum">3019</span></a>          case <a class="constant" onClick="logConstant('FEATURE_BACKUP_MOODLE2')" href="../../_constants/FEATURE_BACKUP_MOODLE2.html" onMouseOver="constPopup(event,'FEATURE_BACKUP_MOODLE2')">FEATURE_BACKUP_MOODLE2</a>:          return true;
<a name="l3020"><span class="linenum">3020</span></a>          case <a class="constant" onClick="logConstant('FEATURE_SHOW_DESCRIPTION')" href="../../_constants/FEATURE_SHOW_DESCRIPTION.html" onMouseOver="constPopup(event,'FEATURE_SHOW_DESCRIPTION')">FEATURE_SHOW_DESCRIPTION</a>:        return true;
<a name="l3021"><span class="linenum">3021</span></a>  
<a name="l3022"><span class="linenum">3022</span></a>          default: return null;
<a name="l3023"><span class="linenum">3023</span></a>      }
<a name="l3024"><span class="linenum">3024</span></a>  }
<a name="l3025"><span class="linenum">3025</span></a>  
<a name="l3026"><span class="linenum">3026</span></a>  <span class="comment">/**</span>
<a name="l3027"><span class="linenum">3027</span></a>  <span class="comment"> * Obtains the automatic completion state for this glossary based on any conditions</span>
<a name="l3028"><span class="linenum">3028</span></a>  <span class="comment"> * in glossary settings.</span>
<a name="l3029"><span class="linenum">3029</span></a>  <span class="comment"> *</span>
<a name="l3030"><span class="linenum">3030</span></a>  <span class="comment"> * @global object</span>
<a name="l3031"><span class="linenum">3031</span></a>  <span class="comment"> * @global object</span>
<a name="l3032"><span class="linenum">3032</span></a>  <span class="comment"> * @param object $course Course</span>
<a name="l3033"><span class="linenum">3033</span></a>  <span class="comment"> * @param object $cm Course-module</span>
<a name="l3034"><span class="linenum">3034</span></a>  <span class="comment"> * @param int $userid User ID</span>
<a name="l3035"><span class="linenum">3035</span></a>  <span class="comment"> * @param bool $type Type of comparison (or/and; can be used as return value if no conditions)</span>
<a name="l3036"><span class="linenum">3036</span></a>  <span class="comment"> * @return bool True if completed, false if not. (If no conditions, then return</span>
<a name="l3037"><span class="linenum">3037</span></a>  <span class="comment"> *   value depends on comparison type)</span>
<a name="l3038"><span class="linenum">3038</span></a>  <span class="comment"> */</span>
<a name="l3039"><span class="linenum">3039</span></a>  function <a class="function" onClick="logFunction('glossary_get_completion_state')" href="../../_functions/glossary_get_completion_state.html" onMouseOver="funcPopup(event,'glossary_get_completion_state')">glossary_get_completion_state</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>,<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>,<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>,<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>) {
<a name="l3040"><span class="linenum">3040</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3041"><span class="linenum">3041</span></a>  
<a name="l3042"><span class="linenum">3042</span></a>  <span class="comment">    // Get glossary details</span>
<a name="l3043"><span class="linenum">3043</span></a>      if (!(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>=<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary',array('id'=&gt;<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>)))) {
<a name="l3044"><span class="linenum">3044</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('Exception')" href="../../_classes/exception.html" onMouseOver="classPopup(event,'exception')">Exception</a>(&quot;Can't find glossary {<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('instance')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/instance.html">instance</a>}&quot;);
<a name="l3045"><span class="linenum">3045</span></a>      }
<a name="l3046"><span class="linenum">3046</span></a>  
<a name="l3047"><span class="linenum">3047</span></a>      <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>=<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a>; <span class="comment">// Default return value</span>
<a name="l3048"><span class="linenum">3048</span></a>  
<a name="l3049"><span class="linenum">3049</span></a>      if (<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('completionentries')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/completionentries.html">completionentries</a>) {
<a name="l3050"><span class="linenum">3050</span></a>          <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a> = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('completionentries')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/completionentries.html">completionentries</a> &lt;=
<a name="l3051"><span class="linenum">3051</span></a>                   <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('glossary_entries',array('glossaryid'=&gt;<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'userid'=&gt;<a class="var it13" onMouseOver="hilite(13)" onMouseOut="lolite()" onClick="logVariable('userid')" href="../../_variables/userid.html">$userid</a>, 'approved'=&gt;1));
<a name="l3052"><span class="linenum">3052</span></a>          if (<a class="var it90" onMouseOver="hilite(90)" onMouseOut="lolite()" onClick="logVariable('type')" href="../../_variables/type.html">$type</a> == <a class="constant" onClick="logConstant('COMPLETION_AND')" href="../../_constants/COMPLETION_AND.html" onMouseOver="constPopup(event,'COMPLETION_AND')">COMPLETION_AND</a>) {
<a name="l3053"><span class="linenum">3053</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> &amp;&amp; <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>;
<a name="l3054"><span class="linenum">3054</span></a>          } else {
<a name="l3055"><span class="linenum">3055</span></a>              <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> = <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a> || <a class="var it394" onMouseOver="hilite(394)" onMouseOut="lolite()" onClick="logVariable('value')" href="../../_variables/value.html">$value</a>;
<a name="l3056"><span class="linenum">3056</span></a>          }
<a name="l3057"><span class="linenum">3057</span></a>      }
<a name="l3058"><span class="linenum">3058</span></a>  
<a name="l3059"><span class="linenum">3059</span></a>      return <a class="var it157" onMouseOver="hilite(157)" onMouseOut="lolite()" onClick="logVariable('result')" href="../../_variables/result.html">$result</a>;
<a name="l3060"><span class="linenum">3060</span></a>  }
<a name="l3061"><span class="linenum">3061</span></a>  
<a name="l3062"><span class="linenum">3062</span></a>  function <a class="function" onClick="logFunction('glossary_extend_navigation')" href="../../_functions/glossary_extend_navigation.html" onMouseOver="funcPopup(event,'glossary_extend_navigation')">glossary_extend_navigation</a>(<a class="var it2565" onMouseOver="hilite(2565)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>) {
<a name="l3063"><span class="linenum">3063</span></a>      global <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3064"><span class="linenum">3064</span></a>  
<a name="l3065"><span class="linenum">3065</span></a>      <a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary_formats', array('name' =&gt; <a class="var it994" onMouseOver="hilite(994)" onMouseOut="lolite()" onClick="logVariable('module')" href="../../_variables/module.html">$module</a>-&gt;<a onClick="logVariable('displayformat')" class="var it42973" onMouseOver="hilite(42973)" onMouseOut="lolite()" href="../../_variables/displayformat.html">displayformat</a>));
<a name="l3066"><span class="linenum">3066</span></a>  <span class="comment">    // Get visible tabs for the format and check if the menu needs to be displayed.</span>
<a name="l3067"><span class="linenum">3067</span></a>      <a class="var it7410" onMouseOver="hilite(7410)" onMouseOut="lolite()" onClick="logVariable('showtabs')" href="../../_variables/showtabs.html">$showtabs</a> = <a class="function" onClick="logFunction('glossary_get_visible_tabs')" href="../../_functions/glossary_get_visible_tabs.html" onMouseOver="funcPopup(event,'glossary_get_visible_tabs')">glossary_get_visible_tabs</a>(<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>);
<a name="l3068"><span class="linenum">3068</span></a>  
<a name="l3069"><span class="linenum">3069</span></a>      foreach (<a class="var it7410" onMouseOver="hilite(7410)" onMouseOut="lolite()" onClick="logVariable('showtabs')" href="../../_variables/showtabs.html">$showtabs</a> as <a class="var it12689" onMouseOver="hilite(12689)" onMouseOut="lolite()" onClick="logVariable('showtabkey')" href="../../_variables/showtabkey.html">$showtabkey</a> =&gt; <a class="var it12690" onMouseOver="hilite(12690)" onMouseOut="lolite()" onClick="logVariable('showtabvalue')" href="../../_variables/showtabvalue.html">$showtabvalue</a>) {
<a name="l3070"><span class="linenum">3070</span></a>  
<a name="l3071"><span class="linenum">3071</span></a>          switch(<a class="var it12690" onMouseOver="hilite(12690)" onMouseOut="lolite()" onClick="logVariable('showtabvalue')" href="../../_variables/showtabvalue.html">$showtabvalue</a>) {
<a name="l3072"><span class="linenum">3072</span></a>              case <a class="constant" onClick="logConstant('GLOSSARY_STANDARD')" href="../../_constants/GLOSSARY_STANDARD.html" onMouseOver="constPopup(event,'GLOSSARY_STANDARD')">GLOSSARY_STANDARD</a> :
<a name="l3073"><span class="linenum">3073</span></a>                  <a class="var it2565" onMouseOver="hilite(2565)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('standardview', 'glossary'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/glossary/view.php.html">/mod/glossary/view.php</a>',
<a name="l3074"><span class="linenum">3074</span></a>                          array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mode' =&gt; 'letter')));
<a name="l3075"><span class="linenum">3075</span></a>                  break;
<a name="l3076"><span class="linenum">3076</span></a>              case <a class="constant" onClick="logConstant('GLOSSARY_CATEGORY')" href="../../_constants/GLOSSARY_CATEGORY.html" onMouseOver="constPopup(event,'GLOSSARY_CATEGORY')">GLOSSARY_CATEGORY</a> :
<a name="l3077"><span class="linenum">3077</span></a>                  <a class="var it2565" onMouseOver="hilite(2565)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('categoryview', 'glossary'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/glossary/view.php.html">/mod/glossary/view.php</a>',
<a name="l3078"><span class="linenum">3078</span></a>                          array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mode' =&gt; 'cat')));
<a name="l3079"><span class="linenum">3079</span></a>                  break;
<a name="l3080"><span class="linenum">3080</span></a>              case <a class="constant" onClick="logConstant('GLOSSARY_DATE')" href="../../_constants/GLOSSARY_DATE.html" onMouseOver="constPopup(event,'GLOSSARY_DATE')">GLOSSARY_DATE</a> :
<a name="l3081"><span class="linenum">3081</span></a>                  <a class="var it2565" onMouseOver="hilite(2565)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('dateview', 'glossary'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/glossary/view.php.html">/mod/glossary/view.php</a>',
<a name="l3082"><span class="linenum">3082</span></a>                          array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mode' =&gt; 'date')));
<a name="l3083"><span class="linenum">3083</span></a>                  break;
<a name="l3084"><span class="linenum">3084</span></a>              case <a class="constant" onClick="logConstant('GLOSSARY_AUTHOR')" href="../../_constants/GLOSSARY_AUTHOR.html" onMouseOver="constPopup(event,'GLOSSARY_AUTHOR')">GLOSSARY_AUTHOR</a> :
<a name="l3085"><span class="linenum">3085</span></a>                  <a class="var it2565" onMouseOver="hilite(2565)" onMouseOut="lolite()" onClick="logVariable('navigation')" href="../../_variables/navigation.html">$navigation</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('authorview', 'glossary'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/glossary/view.php.html">/mod/glossary/view.php</a>',
<a name="l3086"><span class="linenum">3086</span></a>                          array('id' =&gt; <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mode' =&gt; 'author')));
<a name="l3087"><span class="linenum">3087</span></a>                  break;
<a name="l3088"><span class="linenum">3088</span></a>          }
<a name="l3089"><span class="linenum">3089</span></a>      }
<a name="l3090"><span class="linenum">3090</span></a>  }
<a name="l3091"><span class="linenum">3091</span></a>  
<a name="l3092"><span class="linenum">3092</span></a>  <span class="comment">/**</span>
<a name="l3093"><span class="linenum">3093</span></a>  <span class="comment"> * Adds module specific settings to the settings block</span>
<a name="l3094"><span class="linenum">3094</span></a>  <span class="comment"> *</span>
<a name="l3095"><span class="linenum">3095</span></a>  <span class="comment"> * @param settings_navigation $settings The settings navigation object</span>
<a name="l3096"><span class="linenum">3096</span></a>  <span class="comment"> * @param navigation_node $glossarynode The node to add module settings to</span>
<a name="l3097"><span class="linenum">3097</span></a>  <span class="comment"> */</span>
<a name="l3098"><span class="linenum">3098</span></a>  function <a class="function" onClick="logFunction('glossary_extend_settings_navigation')" href="../../_functions/glossary_extend_settings_navigation.html" onMouseOver="funcPopup(event,'glossary_extend_settings_navigation')">glossary_extend_settings_navigation</a>(settings_navigation <a class="var it18" onMouseOver="hilite(18)" onMouseOut="lolite()" onClick="logVariable('settings')" href="../../_variables/settings.html">$settings</a>, navigation_node <a class="var it12691" onMouseOver="hilite(12691)" onMouseOut="lolite()" onClick="logVariable('glossarynode')" href="../../_variables/glossarynode.html">$glossarynode</a>) {
<a name="l3099"><span class="linenum">3099</span></a>      global <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>, <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l3100"><span class="linenum">3100</span></a>  
<a name="l3101"><span class="linenum">3101</span></a>      <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('mode', '', <a class="constant" onClick="logConstant('PARAM_ALPHA')" href="../../_constants/PARAM_ALPHA.html" onMouseOver="constPopup(event,'PARAM_ALPHA')">PARAM_ALPHA</a>);
<a name="l3102"><span class="linenum">3102</span></a>      <a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a> = <a class="function" onClick="logFunction('optional_param')" href="../../_functions/optional_param.html" onMouseOver="funcPopup(event,'optional_param')">optional_param</a>('hook', 'ALL', <a class="constant" onClick="logConstant('PARAM_CLEAN')" href="../../_constants/PARAM_CLEAN.html" onMouseOver="constPopup(event,'PARAM_CLEAN')">PARAM_CLEAN</a>);
<a name="l3103"><span class="linenum">3103</span></a>  
<a name="l3104"><span class="linenum">3104</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:import', <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l3105"><span class="linenum">3105</span></a>          <a class="var it12691" onMouseOver="hilite(12691)" onMouseOut="lolite()" onClick="logVariable('glossarynode')" href="../../_variables/glossarynode.html">$glossarynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('importentries', 'glossary'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/glossary/import.php.html">/mod/glossary/import.php</a>', array('id'=&gt;<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id)));
<a name="l3106"><span class="linenum">3106</span></a>      }
<a name="l3107"><span class="linenum">3107</span></a>  
<a name="l3108"><span class="linenum">3108</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:export', <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l3109"><span class="linenum">3109</span></a>          <a class="var it12691" onMouseOver="hilite(12691)" onMouseOut="lolite()" onClick="logVariable('glossarynode')" href="../../_variables/glossarynode.html">$glossarynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('exportentries', 'glossary'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/glossary/export.php.html">/mod/glossary/export.php</a>', array('id'=&gt;<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id, 'mode'=&gt;<a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>, 'hook'=&gt;<a class="var it2511" onMouseOver="hilite(2511)" onMouseOut="lolite()" onClick="logVariable('hook')" href="../../_variables/hook.html">$hook</a>)));
<a name="l3110"><span class="linenum">3110</span></a>      }
<a name="l3111"><span class="linenum">3111</span></a>  
<a name="l3112"><span class="linenum">3112</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context) &amp;&amp; (<a class="var it12692" onMouseOver="hilite(12692)" onMouseOut="lolite()" onClick="logVariable('hiddenentries')" href="../../_variables/hiddenentries.html">$hiddenentries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('glossary_entries', array('glossaryid'=&gt;<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;instance, 'approved'=&gt;0)))) {
<a name="l3113"><span class="linenum">3113</span></a>          <a class="var it12691" onMouseOver="hilite(12691)" onMouseOut="lolite()" onClick="logVariable('glossarynode')" href="../../_variables/glossarynode.html">$glossarynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('waitingapproval', 'glossary'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/glossary/view.php.html">/mod/glossary/view.php</a>', array('id'=&gt;<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id, 'mode'=&gt;'approval')));
<a name="l3114"><span class="linenum">3114</span></a>      }
<a name="l3115"><span class="linenum">3115</span></a>  
<a name="l3116"><span class="linenum">3116</span></a>      if (<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:write', <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l3117"><span class="linenum">3117</span></a>          <a class="var it12691" onMouseOver="hilite(12691)" onMouseOut="lolite()" onClick="logVariable('glossarynode')" href="../../_variables/glossarynode.html">$glossarynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('addentry', 'glossary'), <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>('<a class="filename" href="../../mod/glossary/edit.php.html">/mod/glossary/edit.php</a>', array('cmid'=&gt;<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;id)));
<a name="l3118"><span class="linenum">3118</span></a>      }
<a name="l3119"><span class="linenum">3119</span></a>  
<a name="l3120"><span class="linenum">3120</span></a>      <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary', array(&quot;id&quot; =&gt; <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;instance));
<a name="l3121"><span class="linenum">3121</span></a>  
<a name="l3122"><span class="linenum">3122</span></a>      if (!empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('enablerssfeeds')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/enablerssfeeds.html">enablerssfeeds</a>) &amp;&amp; !empty(<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('glossary_enablerssfeeds')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/glossary_enablerssfeeds.html">glossary_enablerssfeeds</a>) &amp;&amp; <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('rsstype')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/rsstype.html">rsstype</a> &amp;&amp; <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('rssarticles')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/rssarticles.html">rssarticles</a> &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:view', <a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context)) {
<a name="l3123"><span class="linenum">3123</span></a>          require_once(&quot;<a class="var it31" onMouseOver="hilite(31)" onMouseOut="lolite()" onClick="logVariable('CFG')" href="../../_variables/CFG.html">$CFG</a>-&gt;<a onClick="logVariable('libdir')" class="var it42902" onMouseOver="hilite(42902)" onMouseOut="lolite()" href="../../_variables/libdir.html">libdir</a>/rsslib.php&quot;);
<a name="l3124"><span class="linenum">3124</span></a>  
<a name="l3125"><span class="linenum">3125</span></a>          <a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a> = <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('rsstype','forum');
<a name="l3126"><span class="linenum">3126</span></a>  
<a name="l3127"><span class="linenum">3127</span></a>          <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a> = <span class="keyword">new </span><a class="class" onClick="logClass('moodle_url')" href="../../_classes/moodle_url.html" onMouseOver="classPopup(event,'moodle_url')">moodle_url</a>(<a class="function" onClick="logFunction('rss_get_url')" href="../../_functions/rss_get_url.html" onMouseOver="funcPopup(event,'rss_get_url')">rss_get_url</a>(<a class="var it195" onMouseOver="hilite(195)" onMouseOut="lolite()" onClick="logVariable('PAGE')" href="../../_variables/PAGE.html">$PAGE</a>-&gt;<a onClick="logVariable('cm')" class="var it42916" onMouseOver="hilite(42916)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;context-&gt;id, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, 'mod_glossary', <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3128"><span class="linenum">3128</span></a>          <a class="var it12691" onMouseOver="hilite(12691)" onMouseOut="lolite()" onClick="logVariable('glossarynode')" href="../../_variables/glossarynode.html">$glossarynode</a>-&gt;<a class="function" onClick="logFunction('add')" href="../../_functions/add.html" onMouseOver="funcPopup(event,'add')">add</a>(<a class="var it126" onMouseOver="hilite(126)" onMouseOut="lolite()" onClick="logVariable('string')" href="../../_variables/string.html">$string</a>, <a class="var it231" onMouseOver="hilite(231)" onMouseOut="lolite()" onClick="logVariable('url')" href="../../_variables/url.html">$url</a>, <a class="class" onClick="logClass('settings_navigation')" href="../../_classes/settings_navigation.html" onMouseOver="classPopup(event,'settings_navigation')">settings_navigation</a>::TYPE_SETTING, null, null, <span class="keyword">new </span><a class="class" onClick="logClass('pix_icon')" href="../../_classes/pix_icon.html" onMouseOver="classPopup(event,'pix_icon')">pix_icon</a>('i/rss', ''));
<a name="l3129"><span class="linenum">3129</span></a>      }
<a name="l3130"><span class="linenum">3130</span></a>  }
<a name="l3131"><span class="linenum">3131</span></a>  
<a name="l3132"><span class="linenum">3132</span></a>  <span class="comment">/**</span>
<a name="l3133"><span class="linenum">3133</span></a>  <span class="comment"> * Running addtional permission check on plugin, for example, plugins</span>
<a name="l3134"><span class="linenum">3134</span></a>  <span class="comment"> * may have switch to turn on/off comments option, this callback will</span>
<a name="l3135"><span class="linenum">3135</span></a>  <span class="comment"> * affect UI display, not like pluginname_comment_validate only throw</span>
<a name="l3136"><span class="linenum">3136</span></a>  <span class="comment"> * exceptions.</span>
<a name="l3137"><span class="linenum">3137</span></a>  <span class="comment"> * Capability check has been done in comment-&gt;check_permissions(), we</span>
<a name="l3138"><span class="linenum">3138</span></a>  <span class="comment"> * don't need to do it again here.</span>
<a name="l3139"><span class="linenum">3139</span></a>  <span class="comment"> *</span>
<a name="l3140"><span class="linenum">3140</span></a>  <span class="comment"> * @package  mod_glossary</span>
<a name="l3141"><span class="linenum">3141</span></a>  <span class="comment"> * @category comment</span>
<a name="l3142"><span class="linenum">3142</span></a>  <span class="comment"> *</span>
<a name="l3143"><span class="linenum">3143</span></a>  <span class="comment"> * @param stdClass $comment_param {</span>
<a name="l3144"><span class="linenum">3144</span></a>  <span class="comment"> *              context  =&gt; context the context object</span>
<a name="l3145"><span class="linenum">3145</span></a>  <span class="comment"> *              courseid =&gt; int course id</span>
<a name="l3146"><span class="linenum">3146</span></a>  <span class="comment"> *              cm       =&gt; stdClass course module object</span>
<a name="l3147"><span class="linenum">3147</span></a>  <span class="comment"> *              commentarea =&gt; string comment area</span>
<a name="l3148"><span class="linenum">3148</span></a>  <span class="comment"> *              itemid      =&gt; int itemid</span>
<a name="l3149"><span class="linenum">3149</span></a>  <span class="comment"> * }</span>
<a name="l3150"><span class="linenum">3150</span></a>  <span class="comment"> * @return array</span>
<a name="l3151"><span class="linenum">3151</span></a>  <span class="comment"> */</span>
<a name="l3152"><span class="linenum">3152</span></a>  function <a class="function" onClick="logFunction('glossary_comment_permissions')" href="../../_functions/glossary_comment_permissions.html" onMouseOver="funcPopup(event,'glossary_comment_permissions')">glossary_comment_permissions</a>(<a class="var it11309" onMouseOver="hilite(11309)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>) {
<a name="l3153"><span class="linenum">3153</span></a>      return array('post'=&gt;true, 'view'=&gt;true);
<a name="l3154"><span class="linenum">3154</span></a>  }
<a name="l3155"><span class="linenum">3155</span></a>  
<a name="l3156"><span class="linenum">3156</span></a>  <span class="comment">/**</span>
<a name="l3157"><span class="linenum">3157</span></a>  <span class="comment"> * Validate comment parameter before perform other comments actions</span>
<a name="l3158"><span class="linenum">3158</span></a>  <span class="comment"> *</span>
<a name="l3159"><span class="linenum">3159</span></a>  <span class="comment"> * @package  mod_glossary</span>
<a name="l3160"><span class="linenum">3160</span></a>  <span class="comment"> * @category comment</span>
<a name="l3161"><span class="linenum">3161</span></a>  <span class="comment"> *</span>
<a name="l3162"><span class="linenum">3162</span></a>  <span class="comment"> * @param stdClass $comment_param {</span>
<a name="l3163"><span class="linenum">3163</span></a>  <span class="comment"> *              context  =&gt; context the context object</span>
<a name="l3164"><span class="linenum">3164</span></a>  <span class="comment"> *              courseid =&gt; int course id</span>
<a name="l3165"><span class="linenum">3165</span></a>  <span class="comment"> *              cm       =&gt; stdClass course module object</span>
<a name="l3166"><span class="linenum">3166</span></a>  <span class="comment"> *              commentarea =&gt; string comment area</span>
<a name="l3167"><span class="linenum">3167</span></a>  <span class="comment"> *              itemid      =&gt; int itemid</span>
<a name="l3168"><span class="linenum">3168</span></a>  <span class="comment"> * }</span>
<a name="l3169"><span class="linenum">3169</span></a>  <span class="comment"> * @return boolean</span>
<a name="l3170"><span class="linenum">3170</span></a>  <span class="comment"> */</span>
<a name="l3171"><span class="linenum">3171</span></a>  function <a class="function" onClick="logFunction('glossary_comment_validate')" href="../../_functions/glossary_comment_validate.html" onMouseOver="funcPopup(event,'glossary_comment_validate')">glossary_comment_validate</a>(<a class="var it11309" onMouseOver="hilite(11309)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>) {
<a name="l3172"><span class="linenum">3172</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3173"><span class="linenum">3173</span></a>  <span class="comment">    // validate comment area</span>
<a name="l3174"><span class="linenum">3174</span></a>      if (<a class="var it11309" onMouseOver="hilite(11309)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('commentarea')" class="var it44556" onMouseOver="hilite(44556)" onMouseOut="lolite()" href="../../_variables/commentarea.html">commentarea</a> != 'glossary_entry') {
<a name="l3175"><span class="linenum">3175</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentarea');
<a name="l3176"><span class="linenum">3176</span></a>      }
<a name="l3177"><span class="linenum">3177</span></a>      if (!<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary_entries', array('id'=&gt;<a class="var it11309" onMouseOver="hilite(11309)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('itemid')" class="var it44556" onMouseOver="hilite(44556)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a>))) {
<a name="l3178"><span class="linenum">3178</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentitemid');
<a name="l3179"><span class="linenum">3179</span></a>      }
<a name="l3180"><span class="linenum">3180</span></a>      if (<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('sourceglossaryid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/sourceglossaryid.html">sourceglossaryid</a> &amp;&amp; <a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('sourceglossaryid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/sourceglossaryid.html">sourceglossaryid</a> == <a class="var it11309" onMouseOver="hilite(11309)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('cm')" class="var it44556" onMouseOver="hilite(44556)" onMouseOut="lolite()" href="../../_variables/cm.html">cm</a>-&gt;instance) {
<a name="l3181"><span class="linenum">3181</span></a>          <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary', array('id'=&gt;<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('sourceglossaryid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/sourceglossaryid.html">sourceglossaryid</a>));
<a name="l3182"><span class="linenum">3182</span></a>      } else {
<a name="l3183"><span class="linenum">3183</span></a>          <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('glossary', array('id'=&gt;<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('glossaryid')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/glossaryid.html">glossaryid</a>));
<a name="l3184"><span class="linenum">3184</span></a>      }
<a name="l3185"><span class="linenum">3185</span></a>      if (!<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>) {
<a name="l3186"><span class="linenum">3186</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidid', 'data');
<a name="l3187"><span class="linenum">3187</span></a>      }
<a name="l3188"><span class="linenum">3188</span></a>      if (!<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('course', array('id'=&gt;<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('course')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/course.html">course</a>))) {
<a name="l3189"><span class="linenum">3189</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('coursemisconf');
<a name="l3190"><span class="linenum">3190</span></a>      }
<a name="l3191"><span class="linenum">3191</span></a>      if (!<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="function" onClick="logFunction('get_coursemodule_from_instance')" href="../../_functions/get_coursemodule_from_instance.html" onMouseOver="funcPopup(event,'get_coursemodule_from_instance')">get_coursemodule_from_instance</a>('glossary', <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>-&gt;<a onClick="logVariable('id')" class="var it42904" onMouseOver="hilite(42904)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>)) {
<a name="l3192"><span class="linenum">3192</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcoursemodule');
<a name="l3193"><span class="linenum">3193</span></a>      }
<a name="l3194"><span class="linenum">3194</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = <a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l3195"><span class="linenum">3195</span></a>  
<a name="l3196"><span class="linenum">3196</span></a>      if (<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('defaultapproval')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/defaultapproval.html">defaultapproval</a> and !<a class="var it699" onMouseOver="hilite(699)" onMouseOut="lolite()" onClick="logVariable('record')" href="../../_variables/record.html">$record</a>-&gt;<a onClick="logVariable('approved')" class="var it42976" onMouseOver="hilite(42976)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a> and !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3197"><span class="linenum">3197</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('notapproved', 'glossary');
<a name="l3198"><span class="linenum">3198</span></a>      }
<a name="l3199"><span class="linenum">3199</span></a>  <span class="comment">    // validate context id</span>
<a name="l3200"><span class="linenum">3200</span></a>      if (<a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>-&gt;<a onClick="logVariable('id')" class="var it42918" onMouseOver="hilite(42918)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> != <a class="var it11309" onMouseOver="hilite(11309)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('context')" class="var it44556" onMouseOver="hilite(44556)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id) {
<a name="l3201"><span class="linenum">3201</span></a>          throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcontext');
<a name="l3202"><span class="linenum">3202</span></a>      }
<a name="l3203"><span class="linenum">3203</span></a>  <span class="comment">    // validation for comment deletion</span>
<a name="l3204"><span class="linenum">3204</span></a>      if (!empty(<a class="var it11309" onMouseOver="hilite(11309)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('commentid')" class="var it44556" onMouseOver="hilite(44556)" onMouseOut="lolite()" href="../../_variables/commentid.html">commentid</a>)) {
<a name="l3205"><span class="linenum">3205</span></a>          if (<a class="var it298" onMouseOver="hilite(298)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_record')" href="../../_functions/get_record.html" onMouseOver="funcPopup(event,'get_record')">get_record</a>('comments', array('id'=&gt;<a class="var it11309" onMouseOver="hilite(11309)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('commentid')" class="var it44556" onMouseOver="hilite(44556)" onMouseOut="lolite()" href="../../_variables/commentid.html">commentid</a>))) {
<a name="l3206"><span class="linenum">3206</span></a>              if (<a class="var it298" onMouseOver="hilite(298)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>-&gt;<a onClick="logVariable('commentarea')" class="var it43200" onMouseOver="hilite(43200)" onMouseOut="lolite()" href="../../_variables/commentarea.html">commentarea</a> != 'glossary_entry') {
<a name="l3207"><span class="linenum">3207</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentarea');
<a name="l3208"><span class="linenum">3208</span></a>              }
<a name="l3209"><span class="linenum">3209</span></a>              if (<a class="var it298" onMouseOver="hilite(298)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>-&gt;<a onClick="logVariable('contextid')" class="var it43200" onMouseOver="hilite(43200)" onMouseOut="lolite()" href="../../_variables/contextid.html">contextid</a> != <a class="var it11309" onMouseOver="hilite(11309)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('context')" class="var it44556" onMouseOver="hilite(44556)" onMouseOut="lolite()" href="../../_variables/context.html">context</a>-&gt;id) {
<a name="l3210"><span class="linenum">3210</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcontext');
<a name="l3211"><span class="linenum">3211</span></a>              }
<a name="l3212"><span class="linenum">3212</span></a>              if (<a class="var it298" onMouseOver="hilite(298)" onMouseOut="lolite()" onClick="logVariable('comment')" href="../../_variables/comment.html">$comment</a>-&gt;<a onClick="logVariable('itemid')" class="var it43200" onMouseOver="hilite(43200)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a> != <a class="var it11309" onMouseOver="hilite(11309)" onMouseOut="lolite()" onClick="logVariable('comment_param')" href="../../_variables/comment_param.html">$comment_param</a>-&gt;<a onClick="logVariable('itemid')" class="var it44556" onMouseOver="hilite(44556)" onMouseOut="lolite()" href="../../_variables/itemid.html">itemid</a>) {
<a name="l3213"><span class="linenum">3213</span></a>                  throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentitemid');
<a name="l3214"><span class="linenum">3214</span></a>              }
<a name="l3215"><span class="linenum">3215</span></a>          } else {
<a name="l3216"><span class="linenum">3216</span></a>              throw <span class="keyword">new </span><a class="class" onClick="logClass('comment_exception')" href="../../_classes/comment_exception.html" onMouseOver="classPopup(event,'comment_exception')">comment_exception</a>('invalidcommentid');
<a name="l3217"><span class="linenum">3217</span></a>          }
<a name="l3218"><span class="linenum">3218</span></a>      }
<a name="l3219"><span class="linenum">3219</span></a>      return true;
<a name="l3220"><span class="linenum">3220</span></a>  }
<a name="l3221"><span class="linenum">3221</span></a>  
<a name="l3222"><span class="linenum">3222</span></a>  <span class="comment">/**</span>
<a name="l3223"><span class="linenum">3223</span></a>  <span class="comment"> * Return a list of page types</span>
<a name="l3224"><span class="linenum">3224</span></a>  <span class="comment"> * @param string $pagetype current page type</span>
<a name="l3225"><span class="linenum">3225</span></a>  <span class="comment"> * @param stdClass $parentcontext Block's parent context</span>
<a name="l3226"><span class="linenum">3226</span></a>  <span class="comment"> * @param stdClass $currentcontext Current context of block</span>
<a name="l3227"><span class="linenum">3227</span></a>  <span class="comment"> */</span>
<a name="l3228"><span class="linenum">3228</span></a>  function <a class="function" onClick="logFunction('glossary_page_type_list')" href="../../_functions/glossary_page_type_list.html" onMouseOver="funcPopup(event,'glossary_page_type_list')">glossary_page_type_list</a>(<a class="var it2278" onMouseOver="hilite(2278)" onMouseOut="lolite()" onClick="logVariable('pagetype')" href="../../_variables/pagetype.html">$pagetype</a>, <a class="var it2279" onMouseOver="hilite(2279)" onMouseOut="lolite()" onClick="logVariable('parentcontext')" href="../../_variables/parentcontext.html">$parentcontext</a>, <a class="var it2280" onMouseOver="hilite(2280)" onMouseOut="lolite()" onClick="logVariable('currentcontext')" href="../../_variables/currentcontext.html">$currentcontext</a>) {
<a name="l3229"><span class="linenum">3229</span></a>      <a class="var it9844" onMouseOver="hilite(9844)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a> = array(
<a name="l3230"><span class="linenum">3230</span></a>          'mod-glossary-*'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-glossary-x', 'glossary'),
<a name="l3231"><span class="linenum">3231</span></a>          'mod-glossary-view'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-glossary-view', 'glossary'),
<a name="l3232"><span class="linenum">3232</span></a>          'mod-glossary-edit'=&gt;<a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('page-mod-glossary-edit', 'glossary'));
<a name="l3233"><span class="linenum">3233</span></a>      return <a class="var it9844" onMouseOver="hilite(9844)" onMouseOut="lolite()" onClick="logVariable('module_pagetype')" href="../../_variables/module_pagetype.html">$module_pagetype</a>;
<a name="l3234"><span class="linenum">3234</span></a>  }
<a name="l3235"><span class="linenum">3235</span></a>  
<a name="l3236"><span class="linenum">3236</span></a>  <span class="comment">/**</span>
<a name="l3237"><span class="linenum">3237</span></a>  <span class="comment"> * Return list of all glossary tabs.</span>
<a name="l3238"><span class="linenum">3238</span></a>  <span class="comment"> * @throws coding_exception</span>
<a name="l3239"><span class="linenum">3239</span></a>  <span class="comment"> * @return array</span>
<a name="l3240"><span class="linenum">3240</span></a>  <span class="comment"> */</span>
<a name="l3241"><span class="linenum">3241</span></a>  function <a class="function" onClick="logFunction('glossary_get_all_tabs')" href="../../_functions/glossary_get_all_tabs.html" onMouseOver="funcPopup(event,'glossary_get_all_tabs')">glossary_get_all_tabs</a>() {
<a name="l3242"><span class="linenum">3242</span></a>  
<a name="l3243"><span class="linenum">3243</span></a>      return array (
<a name="l3244"><span class="linenum">3244</span></a>          <a class="constant" onClick="logConstant('GLOSSARY_AUTHOR')" href="../../_constants/GLOSSARY_AUTHOR.html" onMouseOver="constPopup(event,'GLOSSARY_AUTHOR')">GLOSSARY_AUTHOR</a> =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('authorview', 'glossary'),
<a name="l3245"><span class="linenum">3245</span></a>          <a class="constant" onClick="logConstant('GLOSSARY_CATEGORY')" href="../../_constants/GLOSSARY_CATEGORY.html" onMouseOver="constPopup(event,'GLOSSARY_CATEGORY')">GLOSSARY_CATEGORY</a> =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('categoryview', 'glossary'),
<a name="l3246"><span class="linenum">3246</span></a>          <a class="constant" onClick="logConstant('GLOSSARY_DATE')" href="../../_constants/GLOSSARY_DATE.html" onMouseOver="constPopup(event,'GLOSSARY_DATE')">GLOSSARY_DATE</a> =&gt; <a class="function" onClick="logFunction('get_string')" href="../../_functions/get_string.html" onMouseOver="funcPopup(event,'get_string')">get_string</a>('dateview', 'glossary')
<a name="l3247"><span class="linenum">3247</span></a>      );
<a name="l3248"><span class="linenum">3248</span></a>  }
<a name="l3249"><span class="linenum">3249</span></a>  
<a name="l3250"><span class="linenum">3250</span></a>  <span class="comment">/**</span>
<a name="l3251"><span class="linenum">3251</span></a>  <span class="comment"> * Set 'showtabs' value for glossary formats</span>
<a name="l3252"><span class="linenum">3252</span></a>  <span class="comment"> * @param stdClass $glossaryformat record from 'glossary_formats' table</span>
<a name="l3253"><span class="linenum">3253</span></a>  <span class="comment"> */</span>
<a name="l3254"><span class="linenum">3254</span></a>  function <a class="function" onClick="logFunction('glossary_set_default_visible_tabs')" href="../../_functions/glossary_set_default_visible_tabs.html" onMouseOver="funcPopup(event,'glossary_set_default_visible_tabs')">glossary_set_default_visible_tabs</a>(<a class="var it12693" onMouseOver="hilite(12693)" onMouseOut="lolite()" onClick="logVariable('glossaryformat')" href="../../_variables/glossaryformat.html">$glossaryformat</a>) {
<a name="l3255"><span class="linenum">3255</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3256"><span class="linenum">3256</span></a>  
<a name="l3257"><span class="linenum">3257</span></a>      switch(<a class="var it12693" onMouseOver="hilite(12693)" onMouseOut="lolite()" onClick="logVariable('glossaryformat')" href="../../_variables/glossaryformat.html">$glossaryformat</a>-&gt;<a onClick="logVariable('name')" class="var it44557" onMouseOver="hilite(44557)" onMouseOut="lolite()" href="../../_variables/name.html">name</a>) {
<a name="l3258"><span class="linenum">3258</span></a>          case <a class="constant" onClick="logConstant('GLOSSARY_CONTINUOUS')" href="../../_constants/GLOSSARY_CONTINUOUS.html" onMouseOver="constPopup(event,'GLOSSARY_CONTINUOUS')">GLOSSARY_CONTINUOUS</a>:
<a name="l3259"><span class="linenum">3259</span></a>              <a class="var it7410" onMouseOver="hilite(7410)" onMouseOut="lolite()" onClick="logVariable('showtabs')" href="../../_variables/showtabs.html">$showtabs</a> = 'standard,category,date';
<a name="l3260"><span class="linenum">3260</span></a>              break;
<a name="l3261"><span class="linenum">3261</span></a>          case <a class="constant" onClick="logConstant('GLOSSARY_DICTIONARY')" href="../../_constants/GLOSSARY_DICTIONARY.html" onMouseOver="constPopup(event,'GLOSSARY_DICTIONARY')">GLOSSARY_DICTIONARY</a>:
<a name="l3262"><span class="linenum">3262</span></a>              <a class="var it7410" onMouseOver="hilite(7410)" onMouseOut="lolite()" onClick="logVariable('showtabs')" href="../../_variables/showtabs.html">$showtabs</a> = 'standard';
<a name="l3263"><span class="linenum">3263</span></a>  <span class="comment">            // Special code for upgraded instances that already had categories set up</span>
<a name="l3264"><span class="linenum">3264</span></a>  <span class="comment">            // in this format - enable &quot;category&quot; tab.</span>
<a name="l3265"><span class="linenum">3265</span></a>  <span class="comment">            // In new instances only 'standard' tab will be visible.</span>
<a name="l3266"><span class="linenum">3266</span></a>              if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('record_exists_sql')" href="../../_functions/record_exists_sql.html" onMouseOver="funcPopup(event,'record_exists_sql')">record_exists_sql</a>(&quot;SELECT 1
<a name="l3267"><span class="linenum">3267</span></a>                      FROM {glossary} g, {glossary_categories} gc
<a name="l3268"><span class="linenum">3268</span></a>                      WHERE g.id = gc.glossaryid and g.displayformat = ?&quot;,
<a name="l3269"><span class="linenum">3269</span></a>                      array(<a class="constant" onClick="logConstant('GLOSSARY_DICTIONARY')" href="../../_constants/GLOSSARY_DICTIONARY.html" onMouseOver="constPopup(event,'GLOSSARY_DICTIONARY')">GLOSSARY_DICTIONARY</a>))) {
<a name="l3270"><span class="linenum">3270</span></a>                  <a class="var it7410" onMouseOver="hilite(7410)" onMouseOut="lolite()" onClick="logVariable('showtabs')" href="../../_variables/showtabs.html">$showtabs</a> .= ',category';
<a name="l3271"><span class="linenum">3271</span></a>              }
<a name="l3272"><span class="linenum">3272</span></a>              break;
<a name="l3273"><span class="linenum">3273</span></a>          case <a class="constant" onClick="logConstant('GLOSSARY_FULLWITHOUTAUTHOR')" href="../../_constants/GLOSSARY_FULLWITHOUTAUTHOR.html" onMouseOver="constPopup(event,'GLOSSARY_FULLWITHOUTAUTHOR')">GLOSSARY_FULLWITHOUTAUTHOR</a>:
<a name="l3274"><span class="linenum">3274</span></a>              <a class="var it7410" onMouseOver="hilite(7410)" onMouseOut="lolite()" onClick="logVariable('showtabs')" href="../../_variables/showtabs.html">$showtabs</a> = 'standard,category,date';
<a name="l3275"><span class="linenum">3275</span></a>              break;
<a name="l3276"><span class="linenum">3276</span></a>          default:
<a name="l3277"><span class="linenum">3277</span></a>              <a class="var it7410" onMouseOver="hilite(7410)" onMouseOut="lolite()" onClick="logVariable('showtabs')" href="../../_variables/showtabs.html">$showtabs</a> = 'standard,category,date,author';
<a name="l3278"><span class="linenum">3278</span></a>              break;
<a name="l3279"><span class="linenum">3279</span></a>      }
<a name="l3280"><span class="linenum">3280</span></a>  
<a name="l3281"><span class="linenum">3281</span></a>      <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('set_field')" href="../../_functions/set_field.html" onMouseOver="funcPopup(event,'set_field')">set_field</a>('glossary_formats', 'showtabs', <a class="var it7410" onMouseOver="hilite(7410)" onMouseOut="lolite()" onClick="logVariable('showtabs')" href="../../_variables/showtabs.html">$showtabs</a>, array('id' =&gt; <a class="var it12693" onMouseOver="hilite(12693)" onMouseOut="lolite()" onClick="logVariable('glossaryformat')" href="../../_variables/glossaryformat.html">$glossaryformat</a>-&gt;<a onClick="logVariable('id')" class="var it44557" onMouseOver="hilite(44557)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3282"><span class="linenum">3282</span></a>      <a class="var it12693" onMouseOver="hilite(12693)" onMouseOut="lolite()" onClick="logVariable('glossaryformat')" href="../../_variables/glossaryformat.html">$glossaryformat</a>-&gt;<a onClick="logVariable('showtabs')" class="var it44557" onMouseOver="hilite(44557)" onMouseOut="lolite()" href="../../_variables/showtabs.html">showtabs</a> = <a class="var it7410" onMouseOver="hilite(7410)" onMouseOut="lolite()" onClick="logVariable('showtabs')" href="../../_variables/showtabs.html">$showtabs</a>;
<a name="l3283"><span class="linenum">3283</span></a>  }
<a name="l3284"><span class="linenum">3284</span></a>  
<a name="l3285"><span class="linenum">3285</span></a>  <span class="comment">/**</span>
<a name="l3286"><span class="linenum">3286</span></a>  <span class="comment"> * Convert 'showtabs' string to array</span>
<a name="l3287"><span class="linenum">3287</span></a>  <span class="comment"> * @param stdClass $displayformat record from 'glossary_formats' table</span>
<a name="l3288"><span class="linenum">3288</span></a>  <span class="comment"> * @return array</span>
<a name="l3289"><span class="linenum">3289</span></a>  <span class="comment"> */</span>
<a name="l3290"><span class="linenum">3290</span></a>  function <a class="function" onClick="logFunction('glossary_get_visible_tabs')" href="../../_functions/glossary_get_visible_tabs.html" onMouseOver="funcPopup(event,'glossary_get_visible_tabs')">glossary_get_visible_tabs</a>(<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>) {
<a name="l3291"><span class="linenum">3291</span></a>      if (empty(<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>-&gt;<a onClick="logVariable('showtabs')" class="var it44544" onMouseOver="hilite(44544)" onMouseOut="lolite()" href="../../_variables/showtabs.html">showtabs</a>)) {
<a name="l3292"><span class="linenum">3292</span></a>          <a class="function" onClick="logFunction('glossary_set_default_visible_tabs')" href="../../_functions/glossary_set_default_visible_tabs.html" onMouseOver="funcPopup(event,'glossary_set_default_visible_tabs')">glossary_set_default_visible_tabs</a>(<a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>);
<a name="l3293"><span class="linenum">3293</span></a>      }
<a name="l3294"><span class="linenum">3294</span></a>      <a class="var it7410" onMouseOver="hilite(7410)" onMouseOut="lolite()" onClick="logVariable('showtabs')" href="../../_variables/showtabs.html">$showtabs</a> = <a class="phpfunction" onClick="logFunction('preg_split')" href="../../_functions/preg_split.html" onMouseOver="phpfuncPopup(event,'preg_split')">preg_split</a>('/,/', <a class="var it7403" onMouseOver="hilite(7403)" onMouseOut="lolite()" onClick="logVariable('displayformat')" href="../../_variables/displayformat.html">$displayformat</a>-&gt;<a onClick="logVariable('showtabs')" class="var it44544" onMouseOver="hilite(44544)" onMouseOut="lolite()" href="../../_variables/showtabs.html">showtabs</a>, -1, PREG_SPLIT_NO_EMPTY);
<a name="l3295"><span class="linenum">3295</span></a>  
<a name="l3296"><span class="linenum">3296</span></a>      return <a class="var it7410" onMouseOver="hilite(7410)" onMouseOut="lolite()" onClick="logVariable('showtabs')" href="../../_variables/showtabs.html">$showtabs</a>;
<a name="l3297"><span class="linenum">3297</span></a>  }
<a name="l3298"><span class="linenum">3298</span></a>  
<a name="l3299"><span class="linenum">3299</span></a>  <span class="comment">/**</span>
<a name="l3300"><span class="linenum">3300</span></a>  <span class="comment"> * Notify that the glossary was viewed.</span>
<a name="l3301"><span class="linenum">3301</span></a>  <span class="comment"> *</span>
<a name="l3302"><span class="linenum">3302</span></a>  <span class="comment"> * This will trigger relevant events and activity completion.</span>
<a name="l3303"><span class="linenum">3303</span></a>  <span class="comment"> *</span>
<a name="l3304"><span class="linenum">3304</span></a>  <span class="comment"> * @param stdClass $glossary The glossary object.</span>
<a name="l3305"><span class="linenum">3305</span></a>  <span class="comment"> * @param stdClass $course   The course object.</span>
<a name="l3306"><span class="linenum">3306</span></a>  <span class="comment"> * @param stdClass $cm       The course module object.</span>
<a name="l3307"><span class="linenum">3307</span></a>  <span class="comment"> * @param stdClass $context  The context object.</span>
<a name="l3308"><span class="linenum">3308</span></a>  <span class="comment"> * @param string   $mode     The mode in which the glossary was viewed.</span>
<a name="l3309"><span class="linenum">3309</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3310"><span class="linenum">3310</span></a>  <span class="comment"> */</span>
<a name="l3311"><span class="linenum">3311</span></a>  function <a class="function" onClick="logFunction('glossary_view')" href="../../_functions/glossary_view.html" onMouseOver="funcPopup(event,'glossary_view')">glossary_view</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>, <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>) {
<a name="l3312"><span class="linenum">3312</span></a>  
<a name="l3313"><span class="linenum">3313</span></a>  <span class="comment">    // Completion trigger.</span>
<a name="l3314"><span class="linenum">3314</span></a>      <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a> = <span class="keyword">new </span><a class="class" onClick="logClass('completion_info')" href="../../_classes/completion_info.html" onMouseOver="classPopup(event,'completion_info')">completion_info</a>(<a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l3315"><span class="linenum">3315</span></a>      <a class="var it555" onMouseOver="hilite(555)" onMouseOut="lolite()" onClick="logVariable('completion')" href="../../_variables/completion.html">$completion</a>-&gt;<a class="function" onClick="logFunction('set_module_viewed')" href="../../_functions/set_module_viewed.html" onMouseOver="funcPopup(event,'set_module_viewed')">set_module_viewed</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l3316"><span class="linenum">3316</span></a>  
<a name="l3317"><span class="linenum">3317</span></a>  <span class="comment">    // Trigger the course module viewed event.</span>
<a name="l3318"><span class="linenum">3318</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_glossary\event\<a class="class" onClick="logClass('course_module_viewed')" href="../../_classes/course_module_viewed.html" onMouseOver="classPopup(event,'course_module_viewed')">course_module_viewed</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l3319"><span class="linenum">3319</span></a>          'objectid' =&gt; <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l3320"><span class="linenum">3320</span></a>          'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>,
<a name="l3321"><span class="linenum">3321</span></a>          'other' =&gt; array('mode' =&gt; <a class="var it109" onMouseOver="hilite(109)" onMouseOut="lolite()" onClick="logVariable('mode')" href="../../_variables/mode.html">$mode</a>)
<a name="l3322"><span class="linenum">3322</span></a>      ));
<a name="l3323"><span class="linenum">3323</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('course', <a class="var it8" onMouseOver="hilite(8)" onMouseOut="lolite()" onClick="logVariable('course')" href="../../_variables/course.html">$course</a>);
<a name="l3324"><span class="linenum">3324</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('course_modules', <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>);
<a name="l3325"><span class="linenum">3325</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('glossary', <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l3326"><span class="linenum">3326</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l3327"><span class="linenum">3327</span></a>  }
<a name="l3328"><span class="linenum">3328</span></a>  
<a name="l3329"><span class="linenum">3329</span></a>  <span class="comment">/**</span>
<a name="l3330"><span class="linenum">3330</span></a>  <span class="comment"> * Notify that a glossary entry was viewed.</span>
<a name="l3331"><span class="linenum">3331</span></a>  <span class="comment"> *</span>
<a name="l3332"><span class="linenum">3332</span></a>  <span class="comment"> * This will trigger relevant events.</span>
<a name="l3333"><span class="linenum">3333</span></a>  <span class="comment"> *</span>
<a name="l3334"><span class="linenum">3334</span></a>  <span class="comment"> * @param stdClass $entry    The entry object.</span>
<a name="l3335"><span class="linenum">3335</span></a>  <span class="comment"> * @param stdClass $context  The context object.</span>
<a name="l3336"><span class="linenum">3336</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3337"><span class="linenum">3337</span></a>  <span class="comment"> */</span>
<a name="l3338"><span class="linenum">3338</span></a>  function <a class="function" onClick="logFunction('glossary_entry_view')" href="../../_functions/glossary_entry_view.html" onMouseOver="funcPopup(event,'glossary_entry_view')">glossary_entry_view</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>) {
<a name="l3339"><span class="linenum">3339</span></a>  
<a name="l3340"><span class="linenum">3340</span></a>  <span class="comment">    // Trigger the entry viewed event.</span>
<a name="l3341"><span class="linenum">3341</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a> = \mod_glossary\event\<a class="class" onClick="logClass('entry_viewed')" href="../../_classes/entry_viewed.html" onMouseOver="classPopup(event,'entry_viewed')">entry_viewed</a>::<a class="function" onClick="logFunction('create')" href="../../_functions/create.html" onMouseOver="funcPopup(event,'create')">create</a>(array(
<a name="l3342"><span class="linenum">3342</span></a>          'objectid' =&gt; <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('id')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>,
<a name="l3343"><span class="linenum">3343</span></a>          'context' =&gt; <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>
<a name="l3344"><span class="linenum">3344</span></a>      ));
<a name="l3345"><span class="linenum">3345</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('add_record_snapshot')" href="../../_functions/add_record_snapshot.html" onMouseOver="funcPopup(event,'add_record_snapshot')">add_record_snapshot</a>('glossary_entries', <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>);
<a name="l3346"><span class="linenum">3346</span></a>      <a class="var it165" onMouseOver="hilite(165)" onMouseOut="lolite()" onClick="logVariable('event')" href="../../_variables/event.html">$event</a>-&gt;<a class="function" onClick="logFunction('trigger')" href="../../_functions/trigger.html" onMouseOver="funcPopup(event,'trigger')">trigger</a>();
<a name="l3347"><span class="linenum">3347</span></a>  
<a name="l3348"><span class="linenum">3348</span></a>  }
<a name="l3349"><span class="linenum">3349</span></a>  
<a name="l3350"><span class="linenum">3350</span></a>  <span class="comment">/**</span>
<a name="l3351"><span class="linenum">3351</span></a>  <span class="comment"> * Returns the entries of a glossary by letter.</span>
<a name="l3352"><span class="linenum">3352</span></a>  <span class="comment"> *</span>
<a name="l3353"><span class="linenum">3353</span></a>  <span class="comment"> * @param  object $glossary The glossary.</span>
<a name="l3354"><span class="linenum">3354</span></a>  <span class="comment"> * @param  context $context The context of the glossary.</span>
<a name="l3355"><span class="linenum">3355</span></a>  <span class="comment"> * @param  string $letter The letter, or ALL, or SPECIAL.</span>
<a name="l3356"><span class="linenum">3356</span></a>  <span class="comment"> * @param  int $from Fetch records from.</span>
<a name="l3357"><span class="linenum">3357</span></a>  <span class="comment"> * @param  int $limit Number of records to fetch.</span>
<a name="l3358"><span class="linenum">3358</span></a>  <span class="comment"> * @param  array $options Accepts:</span>
<a name="l3359"><span class="linenum">3359</span></a>  <span class="comment"> *                        - (bool) includenotapproved. When false, includes the non-approved entries created by</span>
<a name="l3360"><span class="linenum">3360</span></a>  <span class="comment"> *                          the current user. When true, also includes the ones that the user has the permission to approve.</span>
<a name="l3361"><span class="linenum">3361</span></a>  <span class="comment"> * @return array The first element being the recordset, the second the number of entries.</span>
<a name="l3362"><span class="linenum">3362</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3363"><span class="linenum">3363</span></a>  <span class="comment"> */</span>
<a name="l3364"><span class="linenum">3364</span></a>  function <a class="function" onClick="logFunction('glossary_get_entries_by_letter')" href="../../_functions/glossary_get_entries_by_letter.html" onMouseOver="funcPopup(event,'glossary_get_entries_by_letter')">glossary_get_entries_by_letter</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array()) {
<a name="l3365"><span class="linenum">3365</span></a>  
<a name="l3366"><span class="linenum">3366</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l3367"><span class="linenum">3367</span></a>      if (<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a> != 'ALL' &amp;&amp; <a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a> != 'SPECIAL' &amp;&amp; <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a>)) {
<a name="l3368"><span class="linenum">3368</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_concept_letter')" href="../../_functions/filter_by_concept_letter.html" onMouseOver="funcPopup(event,'filter_by_concept_letter')">filter_by_concept_letter</a>(<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a>);
<a name="l3369"><span class="linenum">3369</span></a>      }
<a name="l3370"><span class="linenum">3370</span></a>      if (<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a> == 'SPECIAL') {
<a name="l3371"><span class="linenum">3371</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_concept_non_letter')" href="../../_functions/filter_by_concept_non_letter.html" onMouseOver="funcPopup(event,'filter_by_concept_non_letter')">filter_by_concept_non_letter</a>();
<a name="l3372"><span class="linenum">3372</span></a>      }
<a name="l3373"><span class="linenum">3373</span></a>  
<a name="l3374"><span class="linenum">3374</span></a>      if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['includenotapproved']) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3375"><span class="linenum">3375</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_ALL);
<a name="l3376"><span class="linenum">3376</span></a>      } else {
<a name="l3377"><span class="linenum">3377</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_SELF);
<a name="l3378"><span class="linenum">3378</span></a>      }
<a name="l3379"><span class="linenum">3379</span></a>  
<a name="l3380"><span class="linenum">3380</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('*', 'entries');
<a name="l3381"><span class="linenum">3381</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('join_user')" href="../../_functions/join_user.html" onMouseOver="funcPopup(event,'join_user')">join_user</a>();
<a name="l3382"><span class="linenum">3382</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_user_fields')" href="../../_functions/add_user_fields.html" onMouseOver="funcPopup(event,'add_user_fields')">add_user_fields</a>();
<a name="l3383"><span class="linenum">3383</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('concept', 'entries');
<a name="l3384"><span class="linenum">3384</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('id', 'entries', 'ASC'); <span class="comment">// Sort on ID to avoid random ordering when entries share an ordering value.</span>
<a name="l3385"><span class="linenum">3385</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('limit')" href="../../_functions/limit.html" onMouseOver="funcPopup(event,'limit')">limit</a>(<a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>);
<a name="l3386"><span class="linenum">3386</span></a>  
<a name="l3387"><span class="linenum">3387</span></a>  <span class="comment">    // Fetching the entries.</span>
<a name="l3388"><span class="linenum">3388</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>();
<a name="l3389"><span class="linenum">3389</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>();
<a name="l3390"><span class="linenum">3390</span></a>  
<a name="l3391"><span class="linenum">3391</span></a>      return array(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>, <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>);
<a name="l3392"><span class="linenum">3392</span></a>  }
<a name="l3393"><span class="linenum">3393</span></a>  
<a name="l3394"><span class="linenum">3394</span></a>  <span class="comment">/**</span>
<a name="l3395"><span class="linenum">3395</span></a>  <span class="comment"> * Returns the entries of a glossary by date.</span>
<a name="l3396"><span class="linenum">3396</span></a>  <span class="comment"> *</span>
<a name="l3397"><span class="linenum">3397</span></a>  <span class="comment"> * @param  object $glossary The glossary.</span>
<a name="l3398"><span class="linenum">3398</span></a>  <span class="comment"> * @param  context $context The context of the glossary.</span>
<a name="l3399"><span class="linenum">3399</span></a>  <span class="comment"> * @param  string $order The mode of ordering: CREATION or UPDATE.</span>
<a name="l3400"><span class="linenum">3400</span></a>  <span class="comment"> * @param  string $sort The direction of the ordering: ASC or DESC.</span>
<a name="l3401"><span class="linenum">3401</span></a>  <span class="comment"> * @param  int $from Fetch records from.</span>
<a name="l3402"><span class="linenum">3402</span></a>  <span class="comment"> * @param  int $limit Number of records to fetch.</span>
<a name="l3403"><span class="linenum">3403</span></a>  <span class="comment"> * @param  array $options Accepts:</span>
<a name="l3404"><span class="linenum">3404</span></a>  <span class="comment"> *                        - (bool) includenotapproved. When false, includes the non-approved entries created by</span>
<a name="l3405"><span class="linenum">3405</span></a>  <span class="comment"> *                          the current user. When true, also includes the ones that the user has the permission to approve.</span>
<a name="l3406"><span class="linenum">3406</span></a>  <span class="comment"> * @return array The first element being the recordset, the second the number of entries.</span>
<a name="l3407"><span class="linenum">3407</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3408"><span class="linenum">3408</span></a>  <span class="comment"> */</span>
<a name="l3409"><span class="linenum">3409</span></a>  function <a class="function" onClick="logFunction('glossary_get_entries_by_date')" href="../../_functions/glossary_get_entries_by_date.html" onMouseOver="funcPopup(event,'glossary_get_entries_by_date')">glossary_get_entries_by_date</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a>, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array()) {
<a name="l3410"><span class="linenum">3410</span></a>  
<a name="l3411"><span class="linenum">3411</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l3412"><span class="linenum">3412</span></a>      if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['includenotapproved']) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3413"><span class="linenum">3413</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_ALL);
<a name="l3414"><span class="linenum">3414</span></a>      } else {
<a name="l3415"><span class="linenum">3415</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_SELF);
<a name="l3416"><span class="linenum">3416</span></a>      }
<a name="l3417"><span class="linenum">3417</span></a>  
<a name="l3418"><span class="linenum">3418</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('*', 'entries');
<a name="l3419"><span class="linenum">3419</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('join_user')" href="../../_functions/join_user.html" onMouseOver="funcPopup(event,'join_user')">join_user</a>();
<a name="l3420"><span class="linenum">3420</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_user_fields')" href="../../_functions/add_user_fields.html" onMouseOver="funcPopup(event,'add_user_fields')">add_user_fields</a>();
<a name="l3421"><span class="linenum">3421</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('limit')" href="../../_functions/limit.html" onMouseOver="funcPopup(event,'limit')">limit</a>(<a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>);
<a name="l3422"><span class="linenum">3422</span></a>  
<a name="l3423"><span class="linenum">3423</span></a>      if (<a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a> == 'CREATION') {
<a name="l3424"><span class="linenum">3424</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('timecreated', 'entries', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l3425"><span class="linenum">3425</span></a>      } else {
<a name="l3426"><span class="linenum">3426</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('timemodified', 'entries', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l3427"><span class="linenum">3427</span></a>      }
<a name="l3428"><span class="linenum">3428</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('id', 'entries', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>); <span class="comment">// Sort on ID to avoid random ordering when entries share an ordering value.</span>
<a name="l3429"><span class="linenum">3429</span></a>  
<a name="l3430"><span class="linenum">3430</span></a>  <span class="comment">    // Fetching the entries.</span>
<a name="l3431"><span class="linenum">3431</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>();
<a name="l3432"><span class="linenum">3432</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>();
<a name="l3433"><span class="linenum">3433</span></a>  
<a name="l3434"><span class="linenum">3434</span></a>      return array(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>, <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>);
<a name="l3435"><span class="linenum">3435</span></a>  }
<a name="l3436"><span class="linenum">3436</span></a>  
<a name="l3437"><span class="linenum">3437</span></a>  <span class="comment">/**</span>
<a name="l3438"><span class="linenum">3438</span></a>  <span class="comment"> * Returns the entries of a glossary by category.</span>
<a name="l3439"><span class="linenum">3439</span></a>  <span class="comment"> *</span>
<a name="l3440"><span class="linenum">3440</span></a>  <span class="comment"> * @param  object $glossary The glossary.</span>
<a name="l3441"><span class="linenum">3441</span></a>  <span class="comment"> * @param  context $context The context of the glossary.</span>
<a name="l3442"><span class="linenum">3442</span></a>  <span class="comment"> * @param  int $categoryid The category ID, or GLOSSARY_SHOW_* constant.</span>
<a name="l3443"><span class="linenum">3443</span></a>  <span class="comment"> * @param  int $from Fetch records from.</span>
<a name="l3444"><span class="linenum">3444</span></a>  <span class="comment"> * @param  int $limit Number of records to fetch.</span>
<a name="l3445"><span class="linenum">3445</span></a>  <span class="comment"> * @param  array $options Accepts:</span>
<a name="l3446"><span class="linenum">3446</span></a>  <span class="comment"> *                        - (bool) includenotapproved. When false, includes the non-approved entries created by</span>
<a name="l3447"><span class="linenum">3447</span></a>  <span class="comment"> *                          the current user. When true, also includes the ones that the user has the permission to approve.</span>
<a name="l3448"><span class="linenum">3448</span></a>  <span class="comment"> * @return array The first element being the recordset, the second the number of entries.</span>
<a name="l3449"><span class="linenum">3449</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3450"><span class="linenum">3450</span></a>  <span class="comment"> */</span>
<a name="l3451"><span class="linenum">3451</span></a>  function <a class="function" onClick="logFunction('glossary_get_entries_by_category')" href="../../_functions/glossary_get_entries_by_category.html" onMouseOver="funcPopup(event,'glossary_get_entries_by_category')">glossary_get_entries_by_category</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../../_variables/categoryid.html">$categoryid</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array()) {
<a name="l3452"><span class="linenum">3452</span></a>  
<a name="l3453"><span class="linenum">3453</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l3454"><span class="linenum">3454</span></a>      if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['includenotapproved']) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3455"><span class="linenum">3455</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_ALL);
<a name="l3456"><span class="linenum">3456</span></a>      } else {
<a name="l3457"><span class="linenum">3457</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_SELF);
<a name="l3458"><span class="linenum">3458</span></a>      }
<a name="l3459"><span class="linenum">3459</span></a>  
<a name="l3460"><span class="linenum">3460</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('join_category')" href="../../_functions/join_category.html" onMouseOver="funcPopup(event,'join_category')">join_category</a>(<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../../_variables/categoryid.html">$categoryid</a>);
<a name="l3461"><span class="linenum">3461</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('join_user')" href="../../_functions/join_user.html" onMouseOver="funcPopup(event,'join_user')">join_user</a>();
<a name="l3462"><span class="linenum">3462</span></a>  
<a name="l3463"><span class="linenum">3463</span></a>  <span class="comment">    // The first field must be the relationship ID when viewing all categories.</span>
<a name="l3464"><span class="linenum">3464</span></a>      if (<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../../_variables/categoryid.html">$categoryid</a> === <a class="constant" onClick="logConstant('GLOSSARY_SHOW_ALL_CATEGORIES')" href="../../_constants/GLOSSARY_SHOW_ALL_CATEGORIES.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_ALL_CATEGORIES')">GLOSSARY_SHOW_ALL_CATEGORIES</a>) {
<a name="l3465"><span class="linenum">3465</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('id', 'entries_categories', 'cid');
<a name="l3466"><span class="linenum">3466</span></a>      }
<a name="l3467"><span class="linenum">3467</span></a>  
<a name="l3468"><span class="linenum">3468</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('*', 'entries');
<a name="l3469"><span class="linenum">3469</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('categoryid', 'entries_categories');
<a name="l3470"><span class="linenum">3470</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_user_fields')" href="../../_functions/add_user_fields.html" onMouseOver="funcPopup(event,'add_user_fields')">add_user_fields</a>();
<a name="l3471"><span class="linenum">3471</span></a>  
<a name="l3472"><span class="linenum">3472</span></a>      if (<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../../_variables/categoryid.html">$categoryid</a> === <a class="constant" onClick="logConstant('GLOSSARY_SHOW_ALL_CATEGORIES')" href="../../_constants/GLOSSARY_SHOW_ALL_CATEGORIES.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_ALL_CATEGORIES')">GLOSSARY_SHOW_ALL_CATEGORIES</a>) {
<a name="l3473"><span class="linenum">3473</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('name', 'categories', 'categoryname');
<a name="l3474"><span class="linenum">3474</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('name', 'categories');
<a name="l3475"><span class="linenum">3475</span></a>  
<a name="l3476"><span class="linenum">3476</span></a>      } else if (<a class="var it904" onMouseOver="hilite(904)" onMouseOut="lolite()" onClick="logVariable('categoryid')" href="../../_variables/categoryid.html">$categoryid</a> === <a class="constant" onClick="logConstant('GLOSSARY_SHOW_NOT_CATEGORISED')" href="../../_constants/GLOSSARY_SHOW_NOT_CATEGORISED.html" onMouseOver="constPopup(event,'GLOSSARY_SHOW_NOT_CATEGORISED')">GLOSSARY_SHOW_NOT_CATEGORISED</a>) {
<a name="l3477"><span class="linenum">3477</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('where')" href="../../_functions/where.html" onMouseOver="funcPopup(event,'where')">where</a>('categoryid', 'entries_categories', null);
<a name="l3478"><span class="linenum">3478</span></a>      }
<a name="l3479"><span class="linenum">3479</span></a>  
<a name="l3480"><span class="linenum">3480</span></a>  <span class="comment">    // Sort on additional fields to avoid random ordering when entries share an ordering value.</span>
<a name="l3481"><span class="linenum">3481</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('concept', 'entries');
<a name="l3482"><span class="linenum">3482</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('id', 'entries', 'ASC');
<a name="l3483"><span class="linenum">3483</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('limit')" href="../../_functions/limit.html" onMouseOver="funcPopup(event,'limit')">limit</a>(<a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>);
<a name="l3484"><span class="linenum">3484</span></a>  
<a name="l3485"><span class="linenum">3485</span></a>  <span class="comment">    // Fetching the entries.</span>
<a name="l3486"><span class="linenum">3486</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>();
<a name="l3487"><span class="linenum">3487</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>();
<a name="l3488"><span class="linenum">3488</span></a>  
<a name="l3489"><span class="linenum">3489</span></a>      return array(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>, <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>);
<a name="l3490"><span class="linenum">3490</span></a>  }
<a name="l3491"><span class="linenum">3491</span></a>  
<a name="l3492"><span class="linenum">3492</span></a>  <span class="comment">/**</span>
<a name="l3493"><span class="linenum">3493</span></a>  <span class="comment"> * Returns the entries of a glossary by author.</span>
<a name="l3494"><span class="linenum">3494</span></a>  <span class="comment"> *</span>
<a name="l3495"><span class="linenum">3495</span></a>  <span class="comment"> * @param  object $glossary The glossary.</span>
<a name="l3496"><span class="linenum">3496</span></a>  <span class="comment"> * @param  context $context The context of the glossary.</span>
<a name="l3497"><span class="linenum">3497</span></a>  <span class="comment"> * @param  string $letter The letter</span>
<a name="l3498"><span class="linenum">3498</span></a>  <span class="comment"> * @param  string $field The field to search: FIRSTNAME or LASTNAME.</span>
<a name="l3499"><span class="linenum">3499</span></a>  <span class="comment"> * @param  string $sort The sorting: ASC or DESC.</span>
<a name="l3500"><span class="linenum">3500</span></a>  <span class="comment"> * @param  int $from Fetch records from.</span>
<a name="l3501"><span class="linenum">3501</span></a>  <span class="comment"> * @param  int $limit Number of records to fetch.</span>
<a name="l3502"><span class="linenum">3502</span></a>  <span class="comment"> * @param  array $options Accepts:</span>
<a name="l3503"><span class="linenum">3503</span></a>  <span class="comment"> *                        - (bool) includenotapproved. When false, includes the non-approved entries created by</span>
<a name="l3504"><span class="linenum">3504</span></a>  <span class="comment"> *                          the current user. When true, also includes the ones that the user has the permission to approve.</span>
<a name="l3505"><span class="linenum">3505</span></a>  <span class="comment"> * @return array The first element being the recordset, the second the number of entries.</span>
<a name="l3506"><span class="linenum">3506</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3507"><span class="linenum">3507</span></a>  <span class="comment"> */</span>
<a name="l3508"><span class="linenum">3508</span></a>  function <a class="function" onClick="logFunction('glossary_get_entries_by_author')" href="../../_functions/glossary_get_entries_by_author.html" onMouseOver="funcPopup(event,'glossary_get_entries_by_author')">glossary_get_entries_by_author</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a>, <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a>, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array()) {
<a name="l3509"><span class="linenum">3509</span></a>  
<a name="l3510"><span class="linenum">3510</span></a>      <a class="var it12695" onMouseOver="hilite(12695)" onMouseOut="lolite()" onClick="logVariable('firstnamefirst')" href="../../_variables/firstnamefirst.html">$firstnamefirst</a> = <a class="var it59" onMouseOver="hilite(59)" onMouseOut="lolite()" onClick="logVariable('field')" href="../../_variables/field.html">$field</a> === 'FIRSTNAME';
<a name="l3511"><span class="linenum">3511</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l3512"><span class="linenum">3512</span></a>      if (<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a> != 'ALL' &amp;&amp; <a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a> != 'SPECIAL' &amp;&amp; <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a>)) {
<a name="l3513"><span class="linenum">3513</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_author_letter')" href="../../_functions/filter_by_author_letter.html" onMouseOver="funcPopup(event,'filter_by_author_letter')">filter_by_author_letter</a>(<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a>, <a class="var it12695" onMouseOver="hilite(12695)" onMouseOut="lolite()" onClick="logVariable('firstnamefirst')" href="../../_variables/firstnamefirst.html">$firstnamefirst</a>);
<a name="l3514"><span class="linenum">3514</span></a>      }
<a name="l3515"><span class="linenum">3515</span></a>      if (<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a> == 'SPECIAL') {
<a name="l3516"><span class="linenum">3516</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_author_non_letter')" href="../../_functions/filter_by_author_non_letter.html" onMouseOver="funcPopup(event,'filter_by_author_non_letter')">filter_by_author_non_letter</a>(<a class="var it12695" onMouseOver="hilite(12695)" onMouseOut="lolite()" onClick="logVariable('firstnamefirst')" href="../../_variables/firstnamefirst.html">$firstnamefirst</a>);
<a name="l3517"><span class="linenum">3517</span></a>      }
<a name="l3518"><span class="linenum">3518</span></a>  
<a name="l3519"><span class="linenum">3519</span></a>      if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['includenotapproved']) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3520"><span class="linenum">3520</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_ALL);
<a name="l3521"><span class="linenum">3521</span></a>      } else {
<a name="l3522"><span class="linenum">3522</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_SELF);
<a name="l3523"><span class="linenum">3523</span></a>      }
<a name="l3524"><span class="linenum">3524</span></a>  
<a name="l3525"><span class="linenum">3525</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('*', 'entries');
<a name="l3526"><span class="linenum">3526</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('join_user')" href="../../_functions/join_user.html" onMouseOver="funcPopup(event,'join_user')">join_user</a>(true);
<a name="l3527"><span class="linenum">3527</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_user_fields')" href="../../_functions/add_user_fields.html" onMouseOver="funcPopup(event,'add_user_fields')">add_user_fields</a>();
<a name="l3528"><span class="linenum">3528</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by_author')" href="../../_functions/order_by_author.html" onMouseOver="funcPopup(event,'order_by_author')">order_by_author</a>(<a class="var it12695" onMouseOver="hilite(12695)" onMouseOut="lolite()" onClick="logVariable('firstnamefirst')" href="../../_variables/firstnamefirst.html">$firstnamefirst</a>, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l3529"><span class="linenum">3529</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('concept', 'entries');
<a name="l3530"><span class="linenum">3530</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('id', 'entries', 'ASC'); <span class="comment">// Sort on ID to avoid random ordering when entries share an ordering value.</span>
<a name="l3531"><span class="linenum">3531</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('limit')" href="../../_functions/limit.html" onMouseOver="funcPopup(event,'limit')">limit</a>(<a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>);
<a name="l3532"><span class="linenum">3532</span></a>  
<a name="l3533"><span class="linenum">3533</span></a>  <span class="comment">    // Fetching the entries.</span>
<a name="l3534"><span class="linenum">3534</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>();
<a name="l3535"><span class="linenum">3535</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>();
<a name="l3536"><span class="linenum">3536</span></a>  
<a name="l3537"><span class="linenum">3537</span></a>      return array(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>, <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>);
<a name="l3538"><span class="linenum">3538</span></a>  }
<a name="l3539"><span class="linenum">3539</span></a>  
<a name="l3540"><span class="linenum">3540</span></a>  <span class="comment">/**</span>
<a name="l3541"><span class="linenum">3541</span></a>  <span class="comment"> * Returns the entries of a glossary by category.</span>
<a name="l3542"><span class="linenum">3542</span></a>  <span class="comment"> *</span>
<a name="l3543"><span class="linenum">3543</span></a>  <span class="comment"> * @param  object $glossary The glossary.</span>
<a name="l3544"><span class="linenum">3544</span></a>  <span class="comment"> * @param  context $context The context of the glossary.</span>
<a name="l3545"><span class="linenum">3545</span></a>  <span class="comment"> * @param  int $authorid The author ID.</span>
<a name="l3546"><span class="linenum">3546</span></a>  <span class="comment"> * @param  string $order The mode of ordering: CONCEPT, CREATION or UPDATE.</span>
<a name="l3547"><span class="linenum">3547</span></a>  <span class="comment"> * @param  string $sort The direction of the ordering: ASC or DESC.</span>
<a name="l3548"><span class="linenum">3548</span></a>  <span class="comment"> * @param  int $from Fetch records from.</span>
<a name="l3549"><span class="linenum">3549</span></a>  <span class="comment"> * @param  int $limit Number of records to fetch.</span>
<a name="l3550"><span class="linenum">3550</span></a>  <span class="comment"> * @param  array $options Accepts:</span>
<a name="l3551"><span class="linenum">3551</span></a>  <span class="comment"> *                        - (bool) includenotapproved. When false, includes the non-approved entries created by</span>
<a name="l3552"><span class="linenum">3552</span></a>  <span class="comment"> *                          the current user. When true, also includes the ones that the user has the permission to approve.</span>
<a name="l3553"><span class="linenum">3553</span></a>  <span class="comment"> * @return array The first element being the recordset, the second the number of entries.</span>
<a name="l3554"><span class="linenum">3554</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3555"><span class="linenum">3555</span></a>  <span class="comment"> */</span>
<a name="l3556"><span class="linenum">3556</span></a>  function <a class="function" onClick="logFunction('glossary_get_entries_by_author_id')" href="../../_functions/glossary_get_entries_by_author_id.html" onMouseOver="funcPopup(event,'glossary_get_entries_by_author_id')">glossary_get_entries_by_author_id</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it7668" onMouseOver="hilite(7668)" onMouseOut="lolite()" onClick="logVariable('authorid')" href="../../_variables/authorid.html">$authorid</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a>, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array()) {
<a name="l3557"><span class="linenum">3557</span></a>  
<a name="l3558"><span class="linenum">3558</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l3559"><span class="linenum">3559</span></a>      if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['includenotapproved']) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3560"><span class="linenum">3560</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_ALL);
<a name="l3561"><span class="linenum">3561</span></a>      } else {
<a name="l3562"><span class="linenum">3562</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_SELF);
<a name="l3563"><span class="linenum">3563</span></a>      }
<a name="l3564"><span class="linenum">3564</span></a>  
<a name="l3565"><span class="linenum">3565</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('*', 'entries');
<a name="l3566"><span class="linenum">3566</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('join_user')" href="../../_functions/join_user.html" onMouseOver="funcPopup(event,'join_user')">join_user</a>(true);
<a name="l3567"><span class="linenum">3567</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_user_fields')" href="../../_functions/add_user_fields.html" onMouseOver="funcPopup(event,'add_user_fields')">add_user_fields</a>();
<a name="l3568"><span class="linenum">3568</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('where')" href="../../_functions/where.html" onMouseOver="funcPopup(event,'where')">where</a>('id', 'user', <a class="var it7668" onMouseOver="hilite(7668)" onMouseOut="lolite()" onClick="logVariable('authorid')" href="../../_variables/authorid.html">$authorid</a>);
<a name="l3569"><span class="linenum">3569</span></a>  
<a name="l3570"><span class="linenum">3570</span></a>      if (<a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a> == 'CREATION') {
<a name="l3571"><span class="linenum">3571</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('timecreated', 'entries', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l3572"><span class="linenum">3572</span></a>      } else if (<a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a> == 'UPDATE') {
<a name="l3573"><span class="linenum">3573</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('timemodified', 'entries', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l3574"><span class="linenum">3574</span></a>      } else {
<a name="l3575"><span class="linenum">3575</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('concept', 'entries', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l3576"><span class="linenum">3576</span></a>      }
<a name="l3577"><span class="linenum">3577</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('id', 'entries', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>); <span class="comment">// Sort on ID to avoid random ordering when entries share an ordering value.</span>
<a name="l3578"><span class="linenum">3578</span></a>  
<a name="l3579"><span class="linenum">3579</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('limit')" href="../../_functions/limit.html" onMouseOver="funcPopup(event,'limit')">limit</a>(<a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>);
<a name="l3580"><span class="linenum">3580</span></a>  
<a name="l3581"><span class="linenum">3581</span></a>  <span class="comment">    // Fetching the entries.</span>
<a name="l3582"><span class="linenum">3582</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>();
<a name="l3583"><span class="linenum">3583</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>();
<a name="l3584"><span class="linenum">3584</span></a>  
<a name="l3585"><span class="linenum">3585</span></a>      return array(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>, <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>);
<a name="l3586"><span class="linenum">3586</span></a>  }
<a name="l3587"><span class="linenum">3587</span></a>  
<a name="l3588"><span class="linenum">3588</span></a>  <span class="comment">/**</span>
<a name="l3589"><span class="linenum">3589</span></a>  <span class="comment"> * Returns the authors in a glossary</span>
<a name="l3590"><span class="linenum">3590</span></a>  <span class="comment"> *</span>
<a name="l3591"><span class="linenum">3591</span></a>  <span class="comment"> * @param  object $glossary The glossary.</span>
<a name="l3592"><span class="linenum">3592</span></a>  <span class="comment"> * @param  context $context The context of the glossary.</span>
<a name="l3593"><span class="linenum">3593</span></a>  <span class="comment"> * @param  int $limit Number of records to fetch.</span>
<a name="l3594"><span class="linenum">3594</span></a>  <span class="comment"> * @param  int $from Fetch records from.</span>
<a name="l3595"><span class="linenum">3595</span></a>  <span class="comment"> * @param  array $options Accepts:</span>
<a name="l3596"><span class="linenum">3596</span></a>  <span class="comment"> *                        - (bool) includenotapproved. When false, includes self even if all of their entries require approval.</span>
<a name="l3597"><span class="linenum">3597</span></a>  <span class="comment"> *                          When true, also includes authors only having entries pending approval.</span>
<a name="l3598"><span class="linenum">3598</span></a>  <span class="comment"> * @return array The first element being the recordset, the second the number of entries.</span>
<a name="l3599"><span class="linenum">3599</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3600"><span class="linenum">3600</span></a>  <span class="comment"> */</span>
<a name="l3601"><span class="linenum">3601</span></a>  function <a class="function" onClick="logFunction('glossary_get_authors')" href="../../_functions/glossary_get_authors.html" onMouseOver="funcPopup(event,'glossary_get_authors')">glossary_get_authors</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array()) {
<a name="l3602"><span class="linenum">3602</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l3603"><span class="linenum">3603</span></a>  
<a name="l3604"><span class="linenum">3604</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l3605"><span class="linenum">3605</span></a>      <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>('u', null);
<a name="l3606"><span class="linenum">3606</span></a>  
<a name="l3607"><span class="linenum">3607</span></a>      <a class="var it12696" onMouseOver="hilite(12696)" onMouseOut="lolite()" onClick="logVariable('approvedsql')" href="../../_variables/approvedsql.html">$approvedsql</a> = '(ge.approved &lt;&gt; 0 OR ge.userid = :myid)';
<a name="l3608"><span class="linenum">3608</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['myid'] = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3609"><span class="linenum">3609</span></a>      if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['includenotapproved']) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3610"><span class="linenum">3610</span></a>          <a class="var it12696" onMouseOver="hilite(12696)" onMouseOut="lolite()" onClick="logVariable('approvedsql')" href="../../_variables/approvedsql.html">$approvedsql</a> = '1 = 1';
<a name="l3611"><span class="linenum">3611</span></a>      }
<a name="l3612"><span class="linenum">3612</span></a>  
<a name="l3613"><span class="linenum">3613</span></a>      <a class="var it12697" onMouseOver="hilite(12697)" onMouseOut="lolite()" onClick="logVariable('sqlselectcount')" href="../../_variables/sqlselectcount.html">$sqlselectcount</a> = &quot;SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT(u.id))&quot;;
<a name="l3614"><span class="linenum">3614</span></a>      <a class="var it12698" onMouseOver="hilite(12698)" onMouseOut="lolite()" onClick="logVariable('sqlselect')" href="../../_variables/sqlselect.html">$sqlselect</a> = &quot;SELECT DISTINCT(u.id) AS userId, <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a>&quot;;
<a name="l3615"><span class="linenum">3615</span></a>      <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> = &quot;  FROM {user} u
<a name="l3616"><span class="linenum">3616</span></a>                JOIN {glossary_entries} ge
<a name="l3617"><span class="linenum">3617</span></a>                  ON ge.userid = u.id
<a name="l3618"><span class="linenum">3618</span></a>                 AND (ge.glossaryid = :gid1 OR ge.sourceglossaryid = :gid2)
<a name="l3619"><span class="linenum">3619</span></a>                 AND <a class="var it12696" onMouseOver="hilite(12696)" onMouseOut="lolite()" onClick="logVariable('approvedsql')" href="../../_variables/approvedsql.html">$approvedsql</a>&quot;;
<a name="l3620"><span class="linenum">3620</span></a>      <a class="var it12570" onMouseOver="hilite(12570)" onMouseOut="lolite()" onClick="logVariable('ordersql')" href="../../_variables/ordersql.html">$ordersql</a> = &quot; ORDER BY u.lastname, u.firstname&quot;;
<a name="l3621"><span class="linenum">3621</span></a>  
<a name="l3622"><span class="linenum">3622</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['gid1'] = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3623"><span class="linenum">3623</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['gid2'] = <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3624"><span class="linenum">3624</span></a>  
<a name="l3625"><span class="linenum">3625</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(<a class="var it12697" onMouseOver="hilite(12697)" onMouseOut="lolite()" onClick="logVariable('sqlselectcount')" href="../../_variables/sqlselectcount.html">$sqlselectcount</a> . <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3626"><span class="linenum">3626</span></a>      <a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it12698" onMouseOver="hilite(12698)" onMouseOut="lolite()" onClick="logVariable('sqlselect')" href="../../_variables/sqlselect.html">$sqlselect</a> . <a class="var it64" onMouseOver="hilite(64)" onMouseOut="lolite()" onClick="logVariable('sql')" href="../../_variables/sql.html">$sql</a> . <a class="var it12570" onMouseOver="hilite(12570)" onMouseOut="lolite()" onClick="logVariable('ordersql')" href="../../_variables/ordersql.html">$ordersql</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>);
<a name="l3627"><span class="linenum">3627</span></a>  
<a name="l3628"><span class="linenum">3628</span></a>      return array(<a class="var it1062" onMouseOver="hilite(1062)" onMouseOut="lolite()" onClick="logVariable('users')" href="../../_variables/users.html">$users</a>, <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>);
<a name="l3629"><span class="linenum">3629</span></a>  }
<a name="l3630"><span class="linenum">3630</span></a>  
<a name="l3631"><span class="linenum">3631</span></a>  <span class="comment">/**</span>
<a name="l3632"><span class="linenum">3632</span></a>  <span class="comment"> * Returns the categories of a glossary.</span>
<a name="l3633"><span class="linenum">3633</span></a>  <span class="comment"> *</span>
<a name="l3634"><span class="linenum">3634</span></a>  <span class="comment"> * @param  object $glossary The glossary.</span>
<a name="l3635"><span class="linenum">3635</span></a>  <span class="comment"> * @param  int $from Fetch records from.</span>
<a name="l3636"><span class="linenum">3636</span></a>  <span class="comment"> * @param  int $limit Number of records to fetch.</span>
<a name="l3637"><span class="linenum">3637</span></a>  <span class="comment"> * @return array The first element being the recordset, the second the number of entries.</span>
<a name="l3638"><span class="linenum">3638</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3639"><span class="linenum">3639</span></a>  <span class="comment"> */</span>
<a name="l3640"><span class="linenum">3640</span></a>  function <a class="function" onClick="logFunction('glossary_get_categories')" href="../../_functions/glossary_get_categories.html" onMouseOver="funcPopup(event,'glossary_get_categories')">glossary_get_categories</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>) {
<a name="l3641"><span class="linenum">3641</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3642"><span class="linenum">3642</span></a>  
<a name="l3643"><span class="linenum">3643</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>('glossary_categories', array('glossaryid' =&gt; <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>));
<a name="l3644"><span class="linenum">3644</span></a>      <a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset')" href="../../_functions/get_recordset.html" onMouseOver="funcPopup(event,'get_recordset')">get_recordset</a>('glossary_categories', array('glossaryid' =&gt; <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>), 'name ASC', '*', <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>);
<a name="l3645"><span class="linenum">3645</span></a>  
<a name="l3646"><span class="linenum">3646</span></a>      return array(<a class="var it2425" onMouseOver="hilite(2425)" onMouseOut="lolite()" onClick="logVariable('categories')" href="../../_variables/categories.html">$categories</a>, <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>);
<a name="l3647"><span class="linenum">3647</span></a>  }
<a name="l3648"><span class="linenum">3648</span></a>  
<a name="l3649"><span class="linenum">3649</span></a>  <span class="comment">/**</span>
<a name="l3650"><span class="linenum">3650</span></a>  <span class="comment"> * Get the SQL where clause for searching terms.</span>
<a name="l3651"><span class="linenum">3651</span></a>  <span class="comment"> *</span>
<a name="l3652"><span class="linenum">3652</span></a>  <span class="comment"> * Note that this does not handle invalid or too short terms.</span>
<a name="l3653"><span class="linenum">3653</span></a>  <span class="comment"> *</span>
<a name="l3654"><span class="linenum">3654</span></a>  <span class="comment"> * @param array   $terms      Array of terms.</span>
<a name="l3655"><span class="linenum">3655</span></a>  <span class="comment"> * @param bool    $fullsearch Whether or not full search should be enabled.</span>
<a name="l3656"><span class="linenum">3656</span></a>  <span class="comment"> * @param int     $glossaryid The ID of a glossary to reduce the search results.</span>
<a name="l3657"><span class="linenum">3657</span></a>  <span class="comment"> * @return array The first element being the where clause, the second array of parameters.</span>
<a name="l3658"><span class="linenum">3658</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3659"><span class="linenum">3659</span></a>  <span class="comment"> */</span>
<a name="l3660"><span class="linenum">3660</span></a>  function <a class="function" onClick="logFunction('glossary_get_search_terms_sql')" href="../../_functions/glossary_get_search_terms_sql.html" onMouseOver="funcPopup(event,'glossary_get_search_terms_sql')">glossary_get_search_terms_sql</a>(array <a class="var it12699" onMouseOver="hilite(12699)" onMouseOut="lolite()" onClick="logVariable('terms')" href="../../_variables/terms.html">$terms</a>, <a class="var it7931" onMouseOver="hilite(7931)" onMouseOut="lolite()" onClick="logVariable('fullsearch')" href="../../_variables/fullsearch.html">$fullsearch</a> = true, <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a> = null) {
<a name="l3661"><span class="linenum">3661</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>;
<a name="l3662"><span class="linenum">3662</span></a>      static <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a> = 0;
<a name="l3663"><span class="linenum">3663</span></a>  
<a name="l3664"><span class="linenum">3664</span></a>      if (<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_regex_supported')" href="../../_functions/sql_regex_supported.html" onMouseOver="funcPopup(event,'sql_regex_supported')">sql_regex_supported</a>()) {
<a name="l3665"><span class="linenum">3665</span></a>          <a class="var it6629" onMouseOver="hilite(6629)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../../_variables/regexp.html">$regexp</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_regex')" href="../../_functions/sql_regex.html" onMouseOver="funcPopup(event,'sql_regex')">sql_regex</a>(true);
<a name="l3666"><span class="linenum">3666</span></a>          <a class="var it12700" onMouseOver="hilite(12700)" onMouseOut="lolite()" onClick="logVariable('notregexp')" href="../../_variables/notregexp.html">$notregexp</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_regex')" href="../../_functions/sql_regex.html" onMouseOver="funcPopup(event,'sql_regex')">sql_regex</a>(false);
<a name="l3667"><span class="linenum">3667</span></a>      }
<a name="l3668"><span class="linenum">3668</span></a>  
<a name="l3669"><span class="linenum">3669</span></a>      <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a> = array();
<a name="l3670"><span class="linenum">3670</span></a>      <a class="var it1217" onMouseOver="hilite(1217)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../../_variables/conditions.html">$conditions</a> = array();
<a name="l3671"><span class="linenum">3671</span></a>  
<a name="l3672"><span class="linenum">3672</span></a>      foreach (<a class="var it12699" onMouseOver="hilite(12699)" onMouseOut="lolite()" onClick="logVariable('terms')" href="../../_variables/terms.html">$terms</a> as <a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>) {
<a name="l3673"><span class="linenum">3673</span></a>          <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>++;
<a name="l3674"><span class="linenum">3674</span></a>  
<a name="l3675"><span class="linenum">3675</span></a>          <a class="var it3714" onMouseOver="hilite(3714)" onMouseOut="lolite()" onClick="logVariable('not')" href="../../_variables/not.html">$not</a> = false; <span class="comment">// Initially we aren't going to perform NOT LIKE searches, only MSSQL and Oracle</span>
<a name="l3676"><span class="linenum">3676</span></a>  <span class="comment">                      // will use it to simulate the &quot;-&quot; operator with LIKE clause.</span>
<a name="l3677"><span class="linenum">3677</span></a>  
<a name="l3678"><span class="linenum">3678</span></a>          if (empty(<a class="var it7931" onMouseOver="hilite(7931)" onMouseOut="lolite()" onClick="logVariable('fullsearch')" href="../../_variables/fullsearch.html">$fullsearch</a>)) {
<a name="l3679"><span class="linenum">3679</span></a>  <span class="comment">            // With fullsearch disabled, look only within concepts and aliases.</span>
<a name="l3680"><span class="linenum">3680</span></a>              <a class="var it12605" onMouseOver="hilite(12605)" onMouseOut="lolite()" onClick="logVariable('concat')" href="../../_variables/concat.html">$concat</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_concat')" href="../../_functions/sql_concat.html" onMouseOver="funcPopup(event,'sql_concat')">sql_concat</a>('ge.concept', &quot;' '&quot;, &quot;COALESCE(al.alias, :emptychar{<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>})&quot;);
<a name="l3681"><span class="linenum">3681</span></a>          } else {
<a name="l3682"><span class="linenum">3682</span></a>  <span class="comment">            // With fullsearch enabled, look also within definitions.</span>
<a name="l3683"><span class="linenum">3683</span></a>              <a class="var it12605" onMouseOver="hilite(12605)" onMouseOut="lolite()" onClick="logVariable('concat')" href="../../_variables/concat.html">$concat</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_concat')" href="../../_functions/sql_concat.html" onMouseOver="funcPopup(event,'sql_concat')">sql_concat</a>('ge.concept', &quot;' '&quot;, 'ge.definition', &quot;' '&quot;, &quot;COALESCE(al.alias, :emptychar{<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>})&quot;);
<a name="l3684"><span class="linenum">3684</span></a>          }
<a name="l3685"><span class="linenum">3685</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['emptychar' . <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = '';
<a name="l3686"><span class="linenum">3686</span></a>  
<a name="l3687"><span class="linenum">3687</span></a>  <span class="comment">        // Under Oracle and MSSQL, trim the + and - operators and perform simpler LIKE (or NOT LIKE) queries.</span>
<a name="l3688"><span class="linenum">3688</span></a>          if (!<a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_regex_supported')" href="../../_functions/sql_regex_supported.html" onMouseOver="funcPopup(event,'sql_regex_supported')">sql_regex_supported</a>()) {
<a name="l3689"><span class="linenum">3689</span></a>              if (<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, 0, 1) === '-') {
<a name="l3690"><span class="linenum">3690</span></a>                  <a class="var it3714" onMouseOver="hilite(3714)" onMouseOut="lolite()" onClick="logVariable('not')" href="../../_variables/not.html">$not</a> = true;
<a name="l3691"><span class="linenum">3691</span></a>              }
<a name="l3692"><span class="linenum">3692</span></a>              <a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, '+-');
<a name="l3693"><span class="linenum">3693</span></a>          }
<a name="l3694"><span class="linenum">3694</span></a>  
<a name="l3695"><span class="linenum">3695</span></a>          if (<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, 0, 1) === '+') {
<a name="l3696"><span class="linenum">3696</span></a>              <a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, '+-');
<a name="l3697"><span class="linenum">3697</span></a>              <a class="var it1217" onMouseOver="hilite(1217)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../../_variables/conditions.html">$conditions</a>[] = &quot;<a class="var it12605" onMouseOver="hilite(12605)" onMouseOut="lolite()" onClick="logVariable('concat')" href="../../_variables/concat.html">$concat</a> <a class="var it6629" onMouseOver="hilite(6629)" onMouseOut="lolite()" onClick="logVariable('regexp')" href="../../_variables/regexp.html">$regexp</a> :searchterm{<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>}&quot;;
<a name="l3698"><span class="linenum">3698</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['searchterm' . <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = '(^|[^a-zA-Z0-9])' . <a class="phpfunction" onClick="logFunction('preg_quote')" href="../../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, '|') . '([^a-zA-Z0-9]|$)';
<a name="l3699"><span class="linenum">3699</span></a>  
<a name="l3700"><span class="linenum">3700</span></a>          } else if (<a class="phpfunction" onClick="logFunction('substr')" href="../../_functions/substr.html" onMouseOver="phpfuncPopup(event,'substr')">substr</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, 0, 1) === &quot;-&quot;) {
<a name="l3701"><span class="linenum">3701</span></a>              <a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a> = <a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, '+-');
<a name="l3702"><span class="linenum">3702</span></a>              <a class="var it1217" onMouseOver="hilite(1217)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../../_variables/conditions.html">$conditions</a>[] = &quot;<a class="var it12605" onMouseOver="hilite(12605)" onMouseOut="lolite()" onClick="logVariable('concat')" href="../../_variables/concat.html">$concat</a> <a class="var it12700" onMouseOver="hilite(12700)" onMouseOut="lolite()" onClick="logVariable('notregexp')" href="../../_variables/notregexp.html">$notregexp</a> :searchterm{<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>}&quot;;
<a name="l3703"><span class="linenum">3703</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['searchterm' . <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = '(^|[^a-zA-Z0-9])' . <a class="phpfunction" onClick="logFunction('preg_quote')" href="../../_functions/preg_quote.html" onMouseOver="phpfuncPopup(event,'preg_quote')">preg_quote</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>, '|') . '([^a-zA-Z0-9]|$)';
<a name="l3704"><span class="linenum">3704</span></a>  
<a name="l3705"><span class="linenum">3705</span></a>          } else {
<a name="l3706"><span class="linenum">3706</span></a>              <a class="var it1217" onMouseOver="hilite(1217)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../../_variables/conditions.html">$conditions</a>[] = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_like')" href="../../_functions/sql_like.html" onMouseOver="funcPopup(event,'sql_like')">sql_like</a>(<a class="var it12605" onMouseOver="hilite(12605)" onMouseOut="lolite()" onClick="logVariable('concat')" href="../../_variables/concat.html">$concat</a>, &quot;:searchterm{<a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>}&quot;, false, true, <a class="var it3714" onMouseOver="hilite(3714)" onMouseOut="lolite()" onClick="logVariable('not')" href="../../_variables/not.html">$not</a>);
<a name="l3707"><span class="linenum">3707</span></a>              <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['searchterm' . <a class="var it107" onMouseOver="hilite(107)" onMouseOut="lolite()" onClick="logVariable('i')" href="../../_variables/i.html">$i</a>] = '%' . <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('sql_like_escape')" href="../../_functions/sql_like_escape.html" onMouseOver="funcPopup(event,'sql_like_escape')">sql_like_escape</a>(<a class="var it7887" onMouseOver="hilite(7887)" onMouseOut="lolite()" onClick="logVariable('searchterm')" href="../../_variables/searchterm.html">$searchterm</a>) . '%';
<a name="l3708"><span class="linenum">3708</span></a>          }
<a name="l3709"><span class="linenum">3709</span></a>      }
<a name="l3710"><span class="linenum">3710</span></a>  
<a name="l3711"><span class="linenum">3711</span></a>  <span class="comment">    // Reduce the search results by restricting it to one glossary.</span>
<a name="l3712"><span class="linenum">3712</span></a>      if (isset(<a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>)) {
<a name="l3713"><span class="linenum">3713</span></a>          <a class="var it1217" onMouseOver="hilite(1217)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../../_variables/conditions.html">$conditions</a>[] = 'ge.glossaryid = :glossaryid';
<a name="l3714"><span class="linenum">3714</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['glossaryid'] = <a class="var it4874" onMouseOver="hilite(4874)" onMouseOut="lolite()" onClick="logVariable('glossaryid')" href="../../_variables/glossaryid.html">$glossaryid</a>;
<a name="l3715"><span class="linenum">3715</span></a>      }
<a name="l3716"><span class="linenum">3716</span></a>  
<a name="l3717"><span class="linenum">3717</span></a>  <span class="comment">    // When there are no conditions we add a negative one to ensure that we don't return anything.</span>
<a name="l3718"><span class="linenum">3718</span></a>      if (empty(<a class="var it1217" onMouseOver="hilite(1217)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../../_variables/conditions.html">$conditions</a>)) {
<a name="l3719"><span class="linenum">3719</span></a>          <a class="var it1217" onMouseOver="hilite(1217)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../../_variables/conditions.html">$conditions</a>[] = '1 = 2';
<a name="l3720"><span class="linenum">3720</span></a>      }
<a name="l3721"><span class="linenum">3721</span></a>  
<a name="l3722"><span class="linenum">3722</span></a>      <a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a> = <a class="phpfunction" onClick="logFunction('implode')" href="../../_functions/implode.html" onMouseOver="phpfuncPopup(event,'implode')">implode</a>(' AND ', <a class="var it1217" onMouseOver="hilite(1217)" onMouseOut="lolite()" onClick="logVariable('conditions')" href="../../_variables/conditions.html">$conditions</a>);
<a name="l3723"><span class="linenum">3723</span></a>      return array(<a class="var it3091" onMouseOver="hilite(3091)" onMouseOut="lolite()" onClick="logVariable('where')" href="../../_variables/where.html">$where</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3724"><span class="linenum">3724</span></a>  }
<a name="l3725"><span class="linenum">3725</span></a>  
<a name="l3726"><span class="linenum">3726</span></a>  
<a name="l3727"><span class="linenum">3727</span></a>  <span class="comment">/**</span>
<a name="l3728"><span class="linenum">3728</span></a>  <span class="comment"> * Returns the entries of a glossary by search.</span>
<a name="l3729"><span class="linenum">3729</span></a>  <span class="comment"> *</span>
<a name="l3730"><span class="linenum">3730</span></a>  <span class="comment"> * @param  object $glossary The glossary.</span>
<a name="l3731"><span class="linenum">3731</span></a>  <span class="comment"> * @param  context $context The context of the glossary.</span>
<a name="l3732"><span class="linenum">3732</span></a>  <span class="comment"> * @param  string $query The search query.</span>
<a name="l3733"><span class="linenum">3733</span></a>  <span class="comment"> * @param  bool $fullsearch Whether or not full search is required.</span>
<a name="l3734"><span class="linenum">3734</span></a>  <span class="comment"> * @param  string $order The mode of ordering: CONCEPT, CREATION or UPDATE.</span>
<a name="l3735"><span class="linenum">3735</span></a>  <span class="comment"> * @param  string $sort The direction of the ordering: ASC or DESC.</span>
<a name="l3736"><span class="linenum">3736</span></a>  <span class="comment"> * @param  int $from Fetch records from.</span>
<a name="l3737"><span class="linenum">3737</span></a>  <span class="comment"> * @param  int $limit Number of records to fetch.</span>
<a name="l3738"><span class="linenum">3738</span></a>  <span class="comment"> * @param  array $options Accepts:</span>
<a name="l3739"><span class="linenum">3739</span></a>  <span class="comment"> *                        - (bool) includenotapproved. When false, includes the non-approved entries created by</span>
<a name="l3740"><span class="linenum">3740</span></a>  <span class="comment"> *                          the current user. When true, also includes the ones that the user has the permission to approve.</span>
<a name="l3741"><span class="linenum">3741</span></a>  <span class="comment"> * @return array The first element being the recordset, the second the number of entries.</span>
<a name="l3742"><span class="linenum">3742</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3743"><span class="linenum">3743</span></a>  <span class="comment"> */</span>
<a name="l3744"><span class="linenum">3744</span></a>  function <a class="function" onClick="logFunction('glossary_get_entries_by_search')" href="../../_functions/glossary_get_entries_by_search.html" onMouseOver="funcPopup(event,'glossary_get_entries_by_search')">glossary_get_entries_by_search</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, <a class="var it7931" onMouseOver="hilite(7931)" onMouseOut="lolite()" onClick="logVariable('fullsearch')" href="../../_variables/fullsearch.html">$fullsearch</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a>, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>,
<a name="l3745"><span class="linenum">3745</span></a>                                          <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array()) {
<a name="l3746"><span class="linenum">3746</span></a>      global <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>, <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l3747"><span class="linenum">3747</span></a>  
<a name="l3748"><span class="linenum">3748</span></a>  <span class="comment">    // Remove too little terms.</span>
<a name="l3749"><span class="linenum">3749</span></a>      <a class="var it12699" onMouseOver="hilite(12699)" onMouseOut="lolite()" onClick="logVariable('terms')" href="../../_variables/terms.html">$terms</a> = <a class="phpfunction" onClick="logFunction('explode')" href="../../_functions/explode.html" onMouseOver="phpfuncPopup(event,'explode')">explode</a>(' ', <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>);
<a name="l3750"><span class="linenum">3750</span></a>      foreach (<a class="var it12699" onMouseOver="hilite(12699)" onMouseOut="lolite()" onClick="logVariable('terms')" href="../../_variables/terms.html">$terms</a> as <a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a> =&gt; <a class="var it7932" onMouseOver="hilite(7932)" onMouseOut="lolite()" onClick="logVariable('term')" href="../../_variables/term.html">$term</a>) {
<a name="l3751"><span class="linenum">3751</span></a>          if (<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="phpfunction" onClick="logFunction('trim')" href="../../_functions/trim.html" onMouseOver="phpfuncPopup(event,'trim')">trim</a>(<a class="var it7932" onMouseOver="hilite(7932)" onMouseOut="lolite()" onClick="logVariable('term')" href="../../_variables/term.html">$term</a>, '+-')) &lt; 2) {
<a name="l3752"><span class="linenum">3752</span></a>              unset(<a class="var it12699" onMouseOver="hilite(12699)" onMouseOut="lolite()" onClick="logVariable('terms')" href="../../_variables/terms.html">$terms</a>[<a class="var it118" onMouseOver="hilite(118)" onMouseOut="lolite()" onClick="logVariable('key')" href="../../_variables/key.html">$key</a>]);
<a name="l3753"><span class="linenum">3753</span></a>          }
<a name="l3754"><span class="linenum">3754</span></a>      }
<a name="l3755"><span class="linenum">3755</span></a>  
<a name="l3756"><span class="linenum">3756</span></a>      <a class="function" onClick="logFunction('list')" href="../../_functions/list.html" onMouseOver="funcPopup(event,'list')">list</a>(<a class="var it12604" onMouseOver="hilite(12604)" onMouseOut="lolite()" onClick="logVariable('searchcond')" href="../../_variables/searchcond.html">$searchcond</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>) = <a class="function" onClick="logFunction('glossary_get_search_terms_sql')" href="../../_functions/glossary_get_search_terms_sql.html" onMouseOver="funcPopup(event,'glossary_get_search_terms_sql')">glossary_get_search_terms_sql</a>(<a class="var it12699" onMouseOver="hilite(12699)" onMouseOut="lolite()" onClick="logVariable('terms')" href="../../_variables/terms.html">$terms</a>, <a class="var it7931" onMouseOver="hilite(7931)" onMouseOut="lolite()" onClick="logVariable('fullsearch')" href="../../_variables/fullsearch.html">$fullsearch</a>, <a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>-&gt;<a onClick="logVariable('id')" class="var it42998" onMouseOver="hilite(42998)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l3757"><span class="linenum">3757</span></a>  
<a name="l3758"><span class="linenum">3758</span></a>      <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a> = <a class="class" onClick="logClass('user_picture')" href="../../_classes/user_picture.html" onMouseOver="classPopup(event,'user_picture')">user_picture</a>::<a class="function" onClick="logFunction('fields')" href="../../_functions/fields.html" onMouseOver="funcPopup(event,'fields')">fields</a>('u', null, 'userdataid', 'userdata');
<a name="l3759"><span class="linenum">3759</span></a>  
<a name="l3760"><span class="linenum">3760</span></a>  <span class="comment">    // Need one inner view here to avoid distinct + text.</span>
<a name="l3761"><span class="linenum">3761</span></a>      <a class="var it12701" onMouseOver="hilite(12701)" onMouseOut="lolite()" onClick="logVariable('sqlwrapheader')" href="../../_variables/sqlwrapheader.html">$sqlwrapheader</a> = 'SELECT ge.*, ge.concept AS glossarypivot, ' . <a class="var it4004" onMouseOver="hilite(4004)" onMouseOut="lolite()" onClick="logVariable('userfields')" href="../../_variables/userfields.html">$userfields</a> . '
<a name="l3762"><span class="linenum">3762</span></a>                          FROM {glossary_entries} ge
<a name="l3763"><span class="linenum">3763</span></a>                          LEFT JOIN {user} u ON u.id = ge.userid
<a name="l3764"><span class="linenum">3764</span></a>                          <a class="function" onClick="logFunction('JOIN')" href="../../_functions/join.html" onMouseOver="funcPopup(event,'join')">JOIN</a> ( ';
<a name="l3765"><span class="linenum">3765</span></a>      <a class="var it12702" onMouseOver="hilite(12702)" onMouseOut="lolite()" onClick="logVariable('sqlwrapfooter')" href="../../_variables/sqlwrapfooter.html">$sqlwrapfooter</a> = ' ) gei <a class="function" onClick="logFunction('ON')" href="../../_functions/on.html" onMouseOver="funcPopup(event,'on')">ON</a> (ge.id = gei.id)';
<a name="l3766"><span class="linenum">3766</span></a>      <a class="var it12698" onMouseOver="hilite(12698)" onMouseOut="lolite()" onClick="logVariable('sqlselect')" href="../../_variables/sqlselect.html">$sqlselect</a>  = &quot;SELECT DISTINCT ge.id&quot;;
<a name="l3767"><span class="linenum">3767</span></a>      <a class="var it12703" onMouseOver="hilite(12703)" onMouseOut="lolite()" onClick="logVariable('sqlfrom')" href="../../_variables/sqlfrom.html">$sqlfrom</a>    = &quot;FROM {glossary_entries} ge
<a name="l3768"><span class="linenum">3768</span></a>                     LEFT JOIN {glossary_alias} al ON al.entryid = ge.id&quot;;
<a name="l3769"><span class="linenum">3769</span></a>  
<a name="l3770"><span class="linenum">3770</span></a>      if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['includenotapproved']) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3771"><span class="linenum">3771</span></a>          <a class="var it12696" onMouseOver="hilite(12696)" onMouseOut="lolite()" onClick="logVariable('approvedsql')" href="../../_variables/approvedsql.html">$approvedsql</a> = '';
<a name="l3772"><span class="linenum">3772</span></a>      } else {
<a name="l3773"><span class="linenum">3773</span></a>          <a class="var it12696" onMouseOver="hilite(12696)" onMouseOut="lolite()" onClick="logVariable('approvedsql')" href="../../_variables/approvedsql.html">$approvedsql</a> = 'AND (ge.approved &lt;&gt; 0 OR ge.userid = :myid)';
<a name="l3774"><span class="linenum">3774</span></a>          <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>['myid'] = <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>;
<a name="l3775"><span class="linenum">3775</span></a>      }
<a name="l3776"><span class="linenum">3776</span></a>  
<a name="l3777"><span class="linenum">3777</span></a>      if (<a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a> == 'CREATION') {
<a name="l3778"><span class="linenum">3778</span></a>          <a class="var it9216" onMouseOver="hilite(9216)" onMouseOut="lolite()" onClick="logVariable('sqlorderby')" href="../../_variables/sqlorderby.html">$sqlorderby</a> = &quot;ORDER BY ge.timecreated <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>&quot;;
<a name="l3779"><span class="linenum">3779</span></a>      } else if (<a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a> == 'UPDATE') {
<a name="l3780"><span class="linenum">3780</span></a>          <a class="var it9216" onMouseOver="hilite(9216)" onMouseOut="lolite()" onClick="logVariable('sqlorderby')" href="../../_variables/sqlorderby.html">$sqlorderby</a> = &quot;ORDER BY ge.timemodified <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>&quot;;
<a name="l3781"><span class="linenum">3781</span></a>      } else {
<a name="l3782"><span class="linenum">3782</span></a>          <a class="var it9216" onMouseOver="hilite(9216)" onMouseOut="lolite()" onClick="logVariable('sqlorderby')" href="../../_variables/sqlorderby.html">$sqlorderby</a> = &quot;ORDER BY ge.concept <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>&quot;;
<a name="l3783"><span class="linenum">3783</span></a>      }
<a name="l3784"><span class="linenum">3784</span></a>      <a class="var it9216" onMouseOver="hilite(9216)" onMouseOut="lolite()" onClick="logVariable('sqlorderby')" href="../../_variables/sqlorderby.html">$sqlorderby</a> .= &quot; , ge.id ASC&quot;; <span class="comment">// Sort on ID to avoid random ordering when entries share an ordering value.</span>
<a name="l3785"><span class="linenum">3785</span></a>  
<a name="l3786"><span class="linenum">3786</span></a>      <a class="var it5096" onMouseOver="hilite(5096)" onMouseOut="lolite()" onClick="logVariable('sqlwhere')" href="../../_variables/sqlwhere.html">$sqlwhere</a> = &quot;<a class="function" onClick="logFunction('WHERE')" href="../../_functions/where.html" onMouseOver="funcPopup(event,'where')">WHERE</a> (<a class="var it12604" onMouseOver="hilite(12604)" onMouseOut="lolite()" onClick="logVariable('searchcond')" href="../../_variables/searchcond.html">$searchcond</a>) <a class="var it12696" onMouseOver="hilite(12696)" onMouseOut="lolite()" onClick="logVariable('approvedsql')" href="../../_variables/approvedsql.html">$approvedsql</a>&quot;;
<a name="l3787"><span class="linenum">3787</span></a>  
<a name="l3788"><span class="linenum">3788</span></a>  <span class="comment">    // Fetching the entries.</span>
<a name="l3789"><span class="linenum">3789</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('count_records_sql')" href="../../_functions/count_records_sql.html" onMouseOver="funcPopup(event,'count_records_sql')">count_records_sql</a>(&quot;SELECT <a class="phpfunction" onClick="logFunction('COUNT')" href="../../_functions/count.html" onMouseOver="phpfuncPopup(event,'count')">COUNT</a>(DISTINCT(ge.id)) <a class="var it12703" onMouseOver="hilite(12703)" onMouseOut="lolite()" onClick="logVariable('sqlfrom')" href="../../_variables/sqlfrom.html">$sqlfrom</a> <a class="var it5096" onMouseOver="hilite(5096)" onMouseOut="lolite()" onClick="logVariable('sqlwhere')" href="../../_variables/sqlwhere.html">$sqlwhere</a>&quot;, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>);
<a name="l3790"><span class="linenum">3790</span></a>  
<a name="l3791"><span class="linenum">3791</span></a>      <a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a> = &quot;<a class="var it12701" onMouseOver="hilite(12701)" onMouseOut="lolite()" onClick="logVariable('sqlwrapheader')" href="../../_variables/sqlwrapheader.html">$sqlwrapheader</a> <a class="var it12698" onMouseOver="hilite(12698)" onMouseOut="lolite()" onClick="logVariable('sqlselect')" href="../../_variables/sqlselect.html">$sqlselect</a> <a class="var it12703" onMouseOver="hilite(12703)" onMouseOut="lolite()" onClick="logVariable('sqlfrom')" href="../../_variables/sqlfrom.html">$sqlfrom</a> <a class="var it5096" onMouseOver="hilite(5096)" onMouseOut="lolite()" onClick="logVariable('sqlwhere')" href="../../_variables/sqlwhere.html">$sqlwhere</a> <a class="var it12702" onMouseOver="hilite(12702)" onMouseOut="lolite()" onClick="logVariable('sqlwrapfooter')" href="../../_variables/sqlwrapfooter.html">$sqlwrapfooter</a> <a class="var it9216" onMouseOver="hilite(9216)" onMouseOut="lolite()" onClick="logVariable('sqlorderby')" href="../../_variables/sqlorderby.html">$sqlorderby</a>&quot;;
<a name="l3792"><span class="linenum">3792</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it5" onMouseOver="hilite(5)" onMouseOut="lolite()" onClick="logVariable('DB')" href="../../_variables/DB.html">$DB</a>-&gt;<a class="function" onClick="logFunction('get_recordset_sql')" href="../../_functions/get_recordset_sql.html" onMouseOver="funcPopup(event,'get_recordset_sql')">get_recordset_sql</a>(<a class="var it249" onMouseOver="hilite(249)" onMouseOut="lolite()" onClick="logVariable('query')" href="../../_variables/query.html">$query</a>, <a class="var it189" onMouseOver="hilite(189)" onMouseOut="lolite()" onClick="logVariable('params')" href="../../_variables/params.html">$params</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>);
<a name="l3793"><span class="linenum">3793</span></a>  
<a name="l3794"><span class="linenum">3794</span></a>      return array(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>, <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>);
<a name="l3795"><span class="linenum">3795</span></a>  }
<a name="l3796"><span class="linenum">3796</span></a>  
<a name="l3797"><span class="linenum">3797</span></a>  <span class="comment">/**</span>
<a name="l3798"><span class="linenum">3798</span></a>  <span class="comment"> * Returns the entries of a glossary by term.</span>
<a name="l3799"><span class="linenum">3799</span></a>  <span class="comment"> *</span>
<a name="l3800"><span class="linenum">3800</span></a>  <span class="comment"> * @param  object $glossary The glossary.</span>
<a name="l3801"><span class="linenum">3801</span></a>  <span class="comment"> * @param  context $context The context of the glossary.</span>
<a name="l3802"><span class="linenum">3802</span></a>  <span class="comment"> * @param  string $term The term we are searching for, a concept or alias.</span>
<a name="l3803"><span class="linenum">3803</span></a>  <span class="comment"> * @param  int $from Fetch records from.</span>
<a name="l3804"><span class="linenum">3804</span></a>  <span class="comment"> * @param  int $limit Number of records to fetch.</span>
<a name="l3805"><span class="linenum">3805</span></a>  <span class="comment"> * @param  array $options Accepts:</span>
<a name="l3806"><span class="linenum">3806</span></a>  <span class="comment"> *                        - (bool) includenotapproved. When false, includes the non-approved entries created by</span>
<a name="l3807"><span class="linenum">3807</span></a>  <span class="comment"> *                          the current user. When true, also includes the ones that the user has the permission to approve.</span>
<a name="l3808"><span class="linenum">3808</span></a>  <span class="comment"> * @return array The first element being the recordset, the second the number of entries.</span>
<a name="l3809"><span class="linenum">3809</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3810"><span class="linenum">3810</span></a>  <span class="comment"> */</span>
<a name="l3811"><span class="linenum">3811</span></a>  function <a class="function" onClick="logFunction('glossary_get_entries_by_term')" href="../../_functions/glossary_get_entries_by_term.html" onMouseOver="funcPopup(event,'glossary_get_entries_by_term')">glossary_get_entries_by_term</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it7932" onMouseOver="hilite(7932)" onMouseOut="lolite()" onClick="logVariable('term')" href="../../_variables/term.html">$term</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>, <a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a> = array()) {
<a name="l3812"><span class="linenum">3812</span></a>  
<a name="l3813"><span class="linenum">3813</span></a>  <span class="comment">    // Build the query.</span>
<a name="l3814"><span class="linenum">3814</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l3815"><span class="linenum">3815</span></a>      if (!empty(<a class="var it27" onMouseOver="hilite(27)" onMouseOut="lolite()" onClick="logVariable('options')" href="../../_variables/options.html">$options</a>['includenotapproved']) &amp;&amp; <a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3816"><span class="linenum">3816</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_ALL);
<a name="l3817"><span class="linenum">3817</span></a>      } else {
<a name="l3818"><span class="linenum">3818</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_SELF);
<a name="l3819"><span class="linenum">3819</span></a>      }
<a name="l3820"><span class="linenum">3820</span></a>  
<a name="l3821"><span class="linenum">3821</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('*', 'entries');
<a name="l3822"><span class="linenum">3822</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('join_alias')" href="../../_functions/join_alias.html" onMouseOver="funcPopup(event,'join_alias')">join_alias</a>();
<a name="l3823"><span class="linenum">3823</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('join_user')" href="../../_functions/join_user.html" onMouseOver="funcPopup(event,'join_user')">join_user</a>();
<a name="l3824"><span class="linenum">3824</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_user_fields')" href="../../_functions/add_user_fields.html" onMouseOver="funcPopup(event,'add_user_fields')">add_user_fields</a>();
<a name="l3825"><span class="linenum">3825</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_term')" href="../../_functions/filter_by_term.html" onMouseOver="funcPopup(event,'filter_by_term')">filter_by_term</a>(<a class="var it7932" onMouseOver="hilite(7932)" onMouseOut="lolite()" onClick="logVariable('term')" href="../../_variables/term.html">$term</a>);
<a name="l3826"><span class="linenum">3826</span></a>  
<a name="l3827"><span class="linenum">3827</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('concept', 'entries');
<a name="l3828"><span class="linenum">3828</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('id', 'entries');     <span class="comment">// Sort on ID to avoid random ordering when entries share an ordering value.</span>
<a name="l3829"><span class="linenum">3829</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('limit')" href="../../_functions/limit.html" onMouseOver="funcPopup(event,'limit')">limit</a>(<a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>);
<a name="l3830"><span class="linenum">3830</span></a>  
<a name="l3831"><span class="linenum">3831</span></a>  <span class="comment">    // Fetching the entries.</span>
<a name="l3832"><span class="linenum">3832</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>();
<a name="l3833"><span class="linenum">3833</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>();
<a name="l3834"><span class="linenum">3834</span></a>  
<a name="l3835"><span class="linenum">3835</span></a>      return array(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>, <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>);
<a name="l3836"><span class="linenum">3836</span></a>  }
<a name="l3837"><span class="linenum">3837</span></a>  
<a name="l3838"><span class="linenum">3838</span></a>  <span class="comment">/**</span>
<a name="l3839"><span class="linenum">3839</span></a>  <span class="comment"> * Returns the entries to be approved.</span>
<a name="l3840"><span class="linenum">3840</span></a>  <span class="comment"> *</span>
<a name="l3841"><span class="linenum">3841</span></a>  <span class="comment"> * @param  object $glossary The glossary.</span>
<a name="l3842"><span class="linenum">3842</span></a>  <span class="comment"> * @param  context $context The context of the glossary.</span>
<a name="l3843"><span class="linenum">3843</span></a>  <span class="comment"> * @param  string $letter The letter, or ALL, or SPECIAL.</span>
<a name="l3844"><span class="linenum">3844</span></a>  <span class="comment"> * @param  string $order The mode of ordering: CONCEPT, CREATION or UPDATE.</span>
<a name="l3845"><span class="linenum">3845</span></a>  <span class="comment"> * @param  string $sort The direction of the ordering: ASC or DESC.</span>
<a name="l3846"><span class="linenum">3846</span></a>  <span class="comment"> * @param  int $from Fetch records from.</span>
<a name="l3847"><span class="linenum">3847</span></a>  <span class="comment"> * @param  int $limit Number of records to fetch.</span>
<a name="l3848"><span class="linenum">3848</span></a>  <span class="comment"> * @return array The first element being the recordset, the second the number of entries.</span>
<a name="l3849"><span class="linenum">3849</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3850"><span class="linenum">3850</span></a>  <span class="comment"> */</span>
<a name="l3851"><span class="linenum">3851</span></a>  function <a class="function" onClick="logFunction('glossary_get_entries_to_approve')" href="../../_functions/glossary_get_entries_to_approve.html" onMouseOver="funcPopup(event,'glossary_get_entries_to_approve')">glossary_get_entries_to_approve</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>, <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>, <a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a>, <a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a>, <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>, <a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>) {
<a name="l3852"><span class="linenum">3852</span></a>  
<a name="l3853"><span class="linenum">3853</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>(<a class="var it2509" onMouseOver="hilite(2509)" onMouseOut="lolite()" onClick="logVariable('glossary')" href="../../_variables/glossary.html">$glossary</a>);
<a name="l3854"><span class="linenum">3854</span></a>      if (<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a> != 'ALL' &amp;&amp; <a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a> != 'SPECIAL' &amp;&amp; <a class="class" onClick="logClass('core_text')" href="../../_classes/core_text.html" onMouseOver="classPopup(event,'core_text')">core_text</a>::<a class="function" onClick="logFunction('strlen')" href="../../_functions/strlen.html" onMouseOver="funcPopup(event,'strlen')">strlen</a>(<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a>)) {
<a name="l3855"><span class="linenum">3855</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_concept_letter')" href="../../_functions/filter_by_concept_letter.html" onMouseOver="funcPopup(event,'filter_by_concept_letter')">filter_by_concept_letter</a>(<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a>);
<a name="l3856"><span class="linenum">3856</span></a>      }
<a name="l3857"><span class="linenum">3857</span></a>      if (<a class="var it1847" onMouseOver="hilite(1847)" onMouseOut="lolite()" onClick="logVariable('letter')" href="../../_variables/letter.html">$letter</a> == 'SPECIAL') {
<a name="l3858"><span class="linenum">3858</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_concept_non_letter')" href="../../_functions/filter_by_concept_non_letter.html" onMouseOver="funcPopup(event,'filter_by_concept_non_letter')">filter_by_concept_non_letter</a>();
<a name="l3859"><span class="linenum">3859</span></a>      }
<a name="l3860"><span class="linenum">3860</span></a>  
<a name="l3861"><span class="linenum">3861</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('*', 'entries');
<a name="l3862"><span class="linenum">3862</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('join_user')" href="../../_functions/join_user.html" onMouseOver="funcPopup(event,'join_user')">join_user</a>();
<a name="l3863"><span class="linenum">3863</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_user_fields')" href="../../_functions/add_user_fields.html" onMouseOver="funcPopup(event,'add_user_fields')">add_user_fields</a>();
<a name="l3864"><span class="linenum">3864</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('filter_by_non_approved')" href="../../_functions/filter_by_non_approved.html" onMouseOver="funcPopup(event,'filter_by_non_approved')">filter_by_non_approved</a>(<a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>::NON_APPROVED_ONLY);
<a name="l3865"><span class="linenum">3865</span></a>      if (<a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a> == 'CREATION') {
<a name="l3866"><span class="linenum">3866</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('timecreated', 'entries', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l3867"><span class="linenum">3867</span></a>      } else if (<a class="var it6270" onMouseOver="hilite(6270)" onMouseOut="lolite()" onClick="logVariable('order')" href="../../_variables/order.html">$order</a> == 'UPDATE') {
<a name="l3868"><span class="linenum">3868</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('timemodified', 'entries', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l3869"><span class="linenum">3869</span></a>      } else {
<a name="l3870"><span class="linenum">3870</span></a>          <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('concept', 'entries', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>);
<a name="l3871"><span class="linenum">3871</span></a>      }
<a name="l3872"><span class="linenum">3872</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('order_by')" href="../../_functions/order_by.html" onMouseOver="funcPopup(event,'order_by')">order_by</a>('id', 'entries', <a class="var it1015" onMouseOver="hilite(1015)" onMouseOut="lolite()" onClick="logVariable('sort')" href="../../_variables/sort.html">$sort</a>); <span class="comment">// Sort on ID to avoid random ordering when entries share an ordering value.</span>
<a name="l3873"><span class="linenum">3873</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('limit')" href="../../_functions/limit.html" onMouseOver="funcPopup(event,'limit')">limit</a>(<a class="var it114" onMouseOver="hilite(114)" onMouseOut="lolite()" onClick="logVariable('from')" href="../../_variables/from.html">$from</a>, <a class="var it1051" onMouseOver="hilite(1051)" onMouseOut="lolite()" onClick="logVariable('limit')" href="../../_variables/limit.html">$limit</a>);
<a name="l3874"><span class="linenum">3874</span></a>  
<a name="l3875"><span class="linenum">3875</span></a>  <span class="comment">    // Fetching the entries.</span>
<a name="l3876"><span class="linenum">3876</span></a>      <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('count_records')" href="../../_functions/count_records.html" onMouseOver="funcPopup(event,'count_records')">count_records</a>();
<a name="l3877"><span class="linenum">3877</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>();
<a name="l3878"><span class="linenum">3878</span></a>  
<a name="l3879"><span class="linenum">3879</span></a>      return array(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>, <a class="var it191" onMouseOver="hilite(191)" onMouseOut="lolite()" onClick="logVariable('count')" href="../../_variables/count.html">$count</a>);
<a name="l3880"><span class="linenum">3880</span></a>  }
<a name="l3881"><span class="linenum">3881</span></a>  
<a name="l3882"><span class="linenum">3882</span></a>  <span class="comment">/**</span>
<a name="l3883"><span class="linenum">3883</span></a>  <span class="comment"> * Fetch an entry.</span>
<a name="l3884"><span class="linenum">3884</span></a>  <span class="comment"> *</span>
<a name="l3885"><span class="linenum">3885</span></a>  <span class="comment"> * @param  int $id The entry ID.</span>
<a name="l3886"><span class="linenum">3886</span></a>  <span class="comment"> * @return object|false The entry, or false when not found.</span>
<a name="l3887"><span class="linenum">3887</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3888"><span class="linenum">3888</span></a>  <span class="comment"> */</span>
<a name="l3889"><span class="linenum">3889</span></a>  function <a class="function" onClick="logFunction('glossary_get_entry_by_id')" href="../../_functions/glossary_get_entry_by_id.html" onMouseOver="funcPopup(event,'glossary_get_entry_by_id')">glossary_get_entry_by_id</a>(<a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>) {
<a name="l3890"><span class="linenum">3890</span></a>  
<a name="l3891"><span class="linenum">3891</span></a>  <span class="comment">    // Build the query.</span>
<a name="l3892"><span class="linenum">3892</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a> = <span class="keyword">new </span><a class="class" onClick="logClass('mod_glossary_entry_query_builder')" href="../../_classes/mod_glossary_entry_query_builder.html" onMouseOver="classPopup(event,'mod_glossary_entry_query_builder')">mod_glossary_entry_query_builder</a>();
<a name="l3893"><span class="linenum">3893</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_field')" href="../../_functions/add_field.html" onMouseOver="funcPopup(event,'add_field')">add_field</a>('*', 'entries');
<a name="l3894"><span class="linenum">3894</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('join_user')" href="../../_functions/join_user.html" onMouseOver="funcPopup(event,'join_user')">join_user</a>();
<a name="l3895"><span class="linenum">3895</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('add_user_fields')" href="../../_functions/add_user_fields.html" onMouseOver="funcPopup(event,'add_user_fields')">add_user_fields</a>();
<a name="l3896"><span class="linenum">3896</span></a>      <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('where')" href="../../_functions/where.html" onMouseOver="funcPopup(event,'where')">where</a>('id', 'entries', <a class="var it7" onMouseOver="hilite(7)" onMouseOut="lolite()" onClick="logVariable('id')" href="../../_variables/id.html">$id</a>);
<a name="l3897"><span class="linenum">3897</span></a>  
<a name="l3898"><span class="linenum">3898</span></a>  <span class="comment">    // Fetching the entries.</span>
<a name="l3899"><span class="linenum">3899</span></a>      <a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a> = <a class="var it12694" onMouseOver="hilite(12694)" onMouseOut="lolite()" onClick="logVariable('qb')" href="../../_variables/qb.html">$qb</a>-&gt;<a class="function" onClick="logFunction('get_records')" href="../../_functions/get_records.html" onMouseOver="funcPopup(event,'get_records')">get_records</a>();
<a name="l3900"><span class="linenum">3900</span></a>      if (empty(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>)) {
<a name="l3901"><span class="linenum">3901</span></a>          return false;
<a name="l3902"><span class="linenum">3902</span></a>      }
<a name="l3903"><span class="linenum">3903</span></a>      return <a class="phpfunction" onClick="logFunction('array_pop')" href="../../_functions/array_pop.html" onMouseOver="phpfuncPopup(event,'array_pop')">array_pop</a>(<a class="var it5371" onMouseOver="hilite(5371)" onMouseOut="lolite()" onClick="logVariable('entries')" href="../../_variables/entries.html">$entries</a>);
<a name="l3904"><span class="linenum">3904</span></a>  }
<a name="l3905"><span class="linenum">3905</span></a>  
<a name="l3906"><span class="linenum">3906</span></a>  <span class="comment">/**</span>
<a name="l3907"><span class="linenum">3907</span></a>  <span class="comment"> * Checks if the current user can see the glossary entry.</span>
<a name="l3908"><span class="linenum">3908</span></a>  <span class="comment"> *</span>
<a name="l3909"><span class="linenum">3909</span></a>  <span class="comment"> * @since Moodle 3.1</span>
<a name="l3910"><span class="linenum">3910</span></a>  <span class="comment"> * @param stdClass $entry</span>
<a name="l3911"><span class="linenum">3911</span></a>  <span class="comment"> * @param cm_info  $cminfo</span>
<a name="l3912"><span class="linenum">3912</span></a>  <span class="comment"> * @return bool</span>
<a name="l3913"><span class="linenum">3913</span></a>  <span class="comment"> */</span>
<a name="l3914"><span class="linenum">3914</span></a>  function <a class="function" onClick="logFunction('glossary_can_view_entry')" href="../../_functions/glossary_can_view_entry.html" onMouseOver="funcPopup(event,'glossary_can_view_entry')">glossary_can_view_entry</a>(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>, <a class="var it4557" onMouseOver="hilite(4557)" onMouseOut="lolite()" onClick="logVariable('cminfo')" href="../../_variables/cminfo.html">$cminfo</a>) {
<a name="l3915"><span class="linenum">3915</span></a>      global <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>;
<a name="l3916"><span class="linenum">3916</span></a>  
<a name="l3917"><span class="linenum">3917</span></a>      <a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a> = <a class="var it4557" onMouseOver="hilite(4557)" onMouseOut="lolite()" onClick="logVariable('cminfo')" href="../../_variables/cminfo.html">$cminfo</a>-&gt;<a class="function" onClick="logFunction('get_course_module_record')" href="../../_functions/get_course_module_record.html" onMouseOver="funcPopup(event,'get_course_module_record')">get_course_module_record</a>();
<a name="l3918"><span class="linenum">3918</span></a>      <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a> = \<a class="class" onClick="logClass('context_module')" href="../../_classes/context_module.html" onMouseOver="classPopup(event,'context_module')">context_module</a>::<a class="function" onClick="logFunction('instance')" href="../../_functions/instance.html" onMouseOver="funcPopup(event,'instance')">instance</a>(<a class="var it22" onMouseOver="hilite(22)" onMouseOut="lolite()" onClick="logVariable('cm')" href="../../_variables/cm.html">$cm</a>-&gt;<a onClick="logVariable('id')" class="var it42905" onMouseOver="hilite(42905)" onMouseOut="lolite()" href="../../_variables/id.html">id</a>);
<a name="l3919"><span class="linenum">3919</span></a>  
<a name="l3920"><span class="linenum">3920</span></a>  <span class="comment">    // Recheck uservisible although it should have already been checked in core_search.</span>
<a name="l3921"><span class="linenum">3921</span></a>      if (<a class="var it4557" onMouseOver="hilite(4557)" onMouseOut="lolite()" onClick="logVariable('cminfo')" href="../../_variables/cminfo.html">$cminfo</a>-&gt;<a onClick="logVariable('uservisible')" class="var it43668" onMouseOver="hilite(43668)" onMouseOut="lolite()" href="../../_variables/uservisible.html">uservisible</a> === false) {
<a name="l3922"><span class="linenum">3922</span></a>          return false;
<a name="l3923"><span class="linenum">3923</span></a>      }
<a name="l3924"><span class="linenum">3924</span></a>  
<a name="l3925"><span class="linenum">3925</span></a>  <span class="comment">    // Check approval.</span>
<a name="l3926"><span class="linenum">3926</span></a>      if (empty(<a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('approved')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/approved.html">approved</a>) &amp;&amp; <a class="var it2510" onMouseOver="hilite(2510)" onMouseOut="lolite()" onClick="logVariable('entry')" href="../../_variables/entry.html">$entry</a>-&gt;<a onClick="logVariable('userid')" class="var it43000" onMouseOver="hilite(43000)" onMouseOut="lolite()" href="../../_variables/userid.html">userid</a> != <a class="var it354" onMouseOver="hilite(354)" onMouseOut="lolite()" onClick="logVariable('USER')" href="../../_variables/USER.html">$USER</a>-&gt;<a onClick="logVariable('id')" class="var it42989" onMouseOver="hilite(42989)" onMouseOut="lolite()" href="../../_variables/id.html">id</a> &amp;&amp; !<a class="function" onClick="logFunction('has_capability')" href="../../_functions/has_capability.html" onMouseOver="funcPopup(event,'has_capability')">has_capability</a>('mod/glossary:approve', <a class="var it23" onMouseOver="hilite(23)" onMouseOut="lolite()" onClick="logVariable('context')" href="../../_variables/context.html">$context</a>)) {
<a name="l3927"><span class="linenum">3927</span></a>          return false;
<a name="l3928"><span class="linenum">3928</span></a>      }
<a name="l3929"><span class="linenum">3929</span></a>  
<a name="l3930"><span class="linenum">3930</span></a>      return true;
<a name="l3931"><span class="linenum">3931</span></a>  }
</pre>
</div>
<script language="JavaScript" type="text/javascript">
FUNC_DATA={
'join_category': ['join_category', 'Join on the category tables. ', [['mod/glossary/classes','entry_query_builder.php',340]], 1],
'glossary_get_file_info': ['glossary_get_file_info', 'File browsing support for glossary module. ', [['mod/glossary','lib.php',1626]], 0],
'add_field': ['add_field', 'Add a field to select. ', [['mod/glossary/classes','entry_query_builder.php',99],['lib/xmldb','xmldb_table.php',766],['lib/ddl','database_manager.php',522]], 775],
'set_callback_options': ['set_callback_options', 'Function to set the callback options ', [['lib','portfoliolib.php',134]], 18],
'glossary_can_view_entry': ['glossary_can_view_entry', 'Checks if the current user can see the glossary entry. ', [['mod/glossary','lib.php',3906]], 2],
'glossary_grade_item_delete': ['glossary_grade_item_delete', 'Delete grade item for given glossary ', [['mod/glossary','lib.php',832]], 1],
'delete_records': ['delete_records', 'Delete the records from a table where all the given conditions met. If conditions not specified, table is truncated. ', [['lib/dml','sqlite3_pdo_moodle_database.php',345],['lib/dml','moodle_database.php',1864]], 773],
'glossary_view': ['glossary_view', 'Notify that the glossary was viewed. ', [['mod/glossary','lib.php',3299]], 3],
'glossary_print_entry_definition': ['glossary_print_entry_definition', '', [['mod/glossary','lib.php',1133]], 8],
'list': ['list', '', [['mod/data/preset/imagegallery','jstemplate.js',9]], 2229],
'isloggedin': ['isloggedin', 'Determines if a user is currently logged in ', [['lib','accesslib.php',1910]], 184],
'glossary_get_visible_tabs': ['glossary_get_visible_tabs', 'Convert \'showtabs\' string to array ', [['mod/glossary','lib.php',3285]], 5],
'get_file_by_hash': ['get_file_by_hash', 'Fetch file using local file full pathname hash ', [['lib/filestorage','file_storage.php',679]], 73],
'order_by': ['order_by', 'Order by a field. ', [['mod/glossary/classes','entry_query_builder.php',412]], 20],
'delete_ratings': ['delete_ratings', 'Delete one or more ratings. Specify either a rating id, an item id or just the context id. ', [['rating','lib.php',381]], 16],
'join_user': ['join_user', 'Join the user table. ', [['mod/glossary/classes','entry_query_builder.php',375]], 8],
'clean_param': ['clean_param', 'Used by {@link optional_param()} and {@link required_param()} to clean the variables and/or cast to specific types, based on an options field. <code> $course->format = clean_param($course->format, PARAM_ALPHA); $selectedgradeitem = clean_param($selectedgradeitem, PARAM_INT); </code> ', [['lib','moodlelib.php',769]], 635],
'glossary_read_imported_file': ['glossary_read_imported_file', 'Read import file and convert to current charset ', [['mod/glossary','lib.php',2387]], 1],
'sesskey': ['sesskey', 'Makes sure that $USER->sesskey exists, if $USER itself exists. It sets a new sesskey if one does not already exist, but does not overwrite existing sesskeys. Returns the sesskey string if $USER exists, or boolean false if not. ', [['lib','sessionlib.php',28]], 641],
'glossary_print_export_menu': ['glossary_print_export_menu', '', [['mod/glossary','lib.php',1829]], 1],
'addelement': ['addelement', 'Adds a custom element to your HTML definition ', [['lib/htmlpurifier/HTMLPurifier','HTMLDefinition.php',124],['lib/htmlpurifier/HTMLPurifier','HTMLModule.php',130],['lib/pear/HTML','QuickForm.php',592]], 3302],
'glossary_search': ['glossary_search', 'It returns all entries from all glossaries that matches the specified criteria within a given $course. It performs an $extended search if necessary. It restrict the search to only one $glossary if the $glossary parameter is set. ', [['mod/glossary','lib.php',1416]], 1],
'glossary_get_user_grades': ['glossary_get_user_grades', 'Return grade for given user or all users. ', [['mod/glossary','lib.php',626]], 1],
'glossary_comment_validate': ['glossary_comment_validate', 'Validate comment parameter before perform other comments actions ', [['mod/glossary','lib.php',3156]], 0],
'fullname': ['fullname', 'Returns a persons full name ', [['lib','moodlelib.php',3249],['mod/assign','locallib.php',3915]], 546],
'glossary_print_import_menu': ['glossary_print_import_menu', '', [['mod/glossary','lib.php',1818]], 1],
'update_record': ['update_record', 'Update a record in a table ', [['lib/dml','pdo_moodle_database.php',461],['lib/dml','oci_native_moodle_database.php',1404],['lib/dml','pgsql_native_moodle_database.php',1089],['lib/dml','mssql_native_moodle_database.php',1067],['lib/dml','mysqli_native_moodle_database.php',1405],['lib/dml','sqlsrv_native_moodle_database.php',1148],['lib/dml/tests','dml_test.php',5551]], 650],
'glossary_print_categories_menu': ['glossary_print_categories_menu', '', [['mod/glossary','lib.php',1880]], 1],
'get_delimiter': ['get_delimiter', 'Get delimiter character ', [['lib','csvlib.class.php',308]], 4],
'glossary_print_entry_approval': ['glossary_print_entry_approval', '', [['mod/glossary','lib.php',1398]], 8],
'glossary_debug': ['glossary_debug', '', [['mod/glossary','lib.php',963]], 0],
'create_file_from_storedfile': ['create_file_from_storedfile', 'Create new file from stored file - make sure params are valid. ', [['lib/filebrowser','file_info.php',405],['lib/filebrowser','file_info_stored.php',584],['lib/filestorage','file_storage.php',1186]], 47],
'is_directory': ['is_directory', 'Whether or not this is a directory ', [['lib/filebrowser','file_info_context_system.php',133],['mod/lesson/classes','file_info.php',94],['mod/imscp','locallib.php',328],['lib/filebrowser','file_info_context_coursecat.php',146],['mod/book','locallib.php',463],['lib/filebrowser','file_info_context_user.php',265],['lib/filebrowser','virtual_root_file.php',60],['mod/data','locallib.php',477],['lib/filebrowser','file_info_stored.php',267],['lib/filestorage','stored_file.php',310],['mod/workshop','fileinfolib.php',82],['mod/workshop','fileinfolib.php',241],['lib/filebrowser','file_info_context_module.php',249],['mod/glossary','locallib.php',525],['lib/filebrowser','file_info_context_course.php',372],['lib/filebrowser','file_info_context_course.php',657],['lib/filebrowser','file_info_context_course.php',803],['mod/forum','locallib.php',463]], 140],
'filter_by_author_non_letter': ['filter_by_author_non_letter', 'Filter the author by special characters. ', [['mod/glossary/classes','entry_query_builder.php',207]], 1],
'glossary_print_entry': ['glossary_print_entry', '', [['mod/glossary','lib.php',1048]], 3],
'to_html': ['to_html', 'Returns html string. ', [['lib','listlib.php',110],['lib','listlib.php',523],['lib','portfoliolib.php',254]], 17],
'raise': ['raise', 'Sets the PHP time limit to a number of seconds from now. ', [['lib/classes','php_time_limit.php',41]], 90],
's': ['s', 'Count of attempts selected by $this->whichattempts ', [['mod/quiz/report/statistics/classes','calculated.php',91],['lib','weblib.php',84]], 1072],
'glossary_print_approval_menu': ['glossary_print_approval_menu', '', [['mod/glossary','lib.php',1799]], 1],
'glossary_print_all_links': ['glossary_print_all_links', '', [['mod/glossary','lib.php',1960]], 3],
'glossary_get_available_formats': ['glossary_get_available_formats', 'This function return an array of valid glossary_formats records Everytime it\'s called, every existing format is checked, new formats are included if detected and old formats are deleted and any glossary using an invalid format is updated to the default (dictionary). ', [['mod/glossary','lib.php',889]], 3],
'glossary_grade_item_update': ['glossary_grade_item_update', 'Create/update grade item for given glossary ', [['mod/glossary','lib.php',797]], 7],
'glossary_print_dynaentry': ['glossary_print_dynaentry', '', [['mod/glossary','lib.php',2160]], 1],
'glossary_reset_course_form_definition': ['glossary_reset_course_form_definition', 'Implementation of the function for printing the form elements that control whether the course reset functionality affects the glossary. ', [['mod/glossary','lib.php',2739]], 0],
'glossary_get_search_terms_sql': ['glossary_get_search_terms_sql', 'Get the SQL where clause for searching terms. ', [['mod/glossary','lib.php',3649]], 1],
'glossary_get_categories': ['glossary_get_categories', 'Returns the categories of a glossary. ', [['mod/glossary','lib.php',3631]], 1],
'glossary_print_alphabet_links': ['glossary_print_alphabet_links', '', [['mod/glossary','lib.php',2001]], 3],
'get_recordset': ['get_recordset', 'Get the recordset. ', [['mod/glossary/classes','entry_query_builder.php',305],['lib/dml','moodle_database.php',1162]], 92],
'get_records_sql': ['get_records_sql', 'Get a number of records as an array of objects. ', [['lib/dml','pdo_moodle_database.php',309],['lib/dml','oci_native_moodle_database.php',1145],['lib/dml','pgsql_native_moodle_database.php',732],['lib/dml','mssql_native_moodle_database.php',805],['lib/dml','mysqli_native_moodle_database.php',1057],['lib/dml','sqlsrv_native_moodle_database.php',890],['lib/dml/tests','dml_test.php',5545]], 700],
'get_file_storage': ['get_file_storage', 'Returns local file storage instance ', [['lib','moodlelib.php',6144]], 546],
'sql_regex': ['sql_regex', '', [['lib/dml','pgsql_native_moodle_database.php',1251],['lib/dml','mysqli_native_moodle_database.php',1606],['lib/dml','moodle_database.php',2270]], 12],
'glossary_get_authors': ['glossary_get_authors', 'Returns the authors in a glossary ', [['mod/glossary','lib.php',3588]], 1],
'count_records': ['count_records', 'Count a list of records. ', [['competency/classes','persistent.php',815],['mod/glossary/classes','entry_query_builder.php',152],['lib/dml','moodle_database.php',1766]], 1630],
'glossary_get_entries': ['glossary_get_entries', '', [['mod/glossary','lib.php',980]], 0],
'file_file_icon': ['file_file_icon', 'Return the relative icon path for a given file ', [['lib','filelib.php',1505]], 35],
'get_user_grades': ['get_user_grades', 'Returns an array of grades calculated by aggregating item ratings. ', [['rating','lib.php',765]], 4],
'set_label': ['set_label', 'Sets the label. ', [['backup/util/ui','backup_ui_setting.class.php',143],['lib','outputcomponents.php',839],['lib','outputcomponents.php',961],['lib/classes','chart_axis.php',143],['backup/cc/cc_lib','cc_asssesment.php',378],['backup/cc/cc_lib','cc_asssesment.php',492],['backup/cc/cc_lib','cc_asssesment.php',1725]], 54],
'grade_update': ['grade_update', 'Submit new or update grade; update/create grade_item definition. Grade must have userid specified, rawgrade and feedback with format are optional. rawgrade NULL means \'Not graded\'. Missing property or key means does not change the existing value. ', [['lib','gradelib.php',40]], 27],
'glossary_print_entry_default': ['glossary_print_entry_default', 'Default (old) print format used if custom function doesn\'t exist in format ', [['mod/glossary','lib.php',1075]], 1],
'glossary_user_complete': ['glossary_user_complete', 'Print a detailed representation of what a  user has done with a given particular instance of this module, for user activity reports. ', [['mod/glossary','lib.php',295]], 0],
'delete_area_files': ['delete_area_files', 'Delete all area files (optionally limited by itemid). ', [['lib/filestorage','file_storage.php',992]], 123],
'glossary_reset_userdata': ['glossary_reset_userdata', 'Actual implementation of the reset course functionality, delete all the glossary responses for course $data->courseid. ', [['mod/glossary','lib.php',2796]], 0],
'glossary_print_sorting_links': ['glossary_print_sorting_links', '', [['mod/glossary','lib.php',2023]], 3],
'filter_by_author_letter': ['filter_by_author_letter', 'Filter the author by letter. ', [['mod/glossary/classes','entry_query_builder.php',196]], 1],
'get_mimetype_description': ['get_mimetype_description', 'Obtains descriptions for file types (e.g. \'Microsoft Word document\') from the mimetypes.php language file. ', [['lib','filelib.php',1635]], 21],
'insert_record': ['insert_record', 'Insert a record into a table and return the "id" field if required, Some conversions and safety checks are carried out. Lobs are supported. If the return ID isn\'t required, then this just reports success as true/false. $data is an object containing needed data ', [['lib/dml','pdo_moodle_database.php',387],['lib/dml','oci_native_moodle_database.php',1297],['lib/dml','pgsql_native_moodle_database.php',889],['lib/dml','mssql_native_moodle_database.php',962],['lib/dml','mysqli_native_moodle_database.php',1185],['question/engine/upgrade','upgradelib.php',124],['lib/dml','sqlsrv_native_moodle_database.php',1045],['lib/dml/tests','dml_test.php',5548]], 1611],
'glossary_generate_export_file': ['glossary_generate_export_file', '', [['mod/glossary','lib.php',2278]], 1],
'glossary_get_recent_mod_activity': ['glossary_get_recent_mod_activity', 'Returns all glossary entries since a given time for specified glossary ', [['mod/glossary','lib.php',329]], 0],
'glossary_supports': ['glossary_supports', '', [['mod/glossary','lib.php',3009]], 0],
'glossary_scale_used': ['glossary_scale_used', '', [['mod/glossary','lib.php',851]], 0],
'start_tag': ['start_tag', 'Outputs an opening tag with attributes ', [['lib','outputcomponents.php',1085],['backup/util/xml/parser','progressive_parser.class.php',215]], 701],
'glossary_print_author_menu': ['glossary_print_author_menu', '', [['mod/glossary','lib.php',1862]], 1],
'optional_param': ['optional_param', 'Returns a particular value for the named variable, taken from POST or GET, otherwise returning a given default. ', [['lib','moodlelib.php',609]], 2210],
'glossary_extend_navigation': ['glossary_extend_navigation', '', [['mod/glossary','lib.php',3062]], 0],
'glossary_print_recent_activity': ['glossary_print_recent_activity', 'Given a course and a time, this module should find recent activity that has occurred in glossary activities and print it out. Return true if there was output, or false is there was none. ', [['mod/glossary','lib.php',497]], 0],
'join': ['join', 'Join a room. For internal use by the Games SDK only. Calling this method directly is unsupported. (rooms.join) ', [['lib/google/src/Google/Service','Games.php',1716],['lib/google/src/Google/Service','Games.php',2100]], 1030],
'trigger': ['trigger', '', [['lib/evalmath','evalmath.class.php',448],['lib/classes/event','base.php',765]], 964],
'filter_by_concept_non_letter': ['filter_by_concept_non_letter', 'Filter the concept by special characters. ', [['mod/glossary/classes','entry_query_builder.php',226]], 2],
'get_filepath': ['get_filepath', 'Returns file path ', [['lib/filebrowser','virtual_root_file.php',218],['lib/filestorage','stored_file.php',690],['backup/util/ui','restore_ui_stage.class.php',547]], 147],
'glossary_print_entry_ratings': ['glossary_print_entry_ratings', '', [['mod/glossary','lib.php',2144]], 2],
'set_field': ['set_field', 'Set a single field in every table record where all the given conditions met. ', [['lib/dml','moodle_database.php',1737],['availability/condition/profile/tests','condition_test.php',349]], 485],
'userdate': ['userdate', 'Returns a formatted string that represents a date in user time. ', [['lib','moodlelib.php',2155],['lib/adodb','adodb.inc.php',2842],['lib/adodb','adodb.inc.php',3569]], 525],
'raise_memory_limit': ['raise_memory_limit', 'Function to raise the memory limit to a new value. Will respect the memory limit if it is higher, thus allowing settings in php.ini, apache conf or command line switches to override it. ', [['lib','setuplib.php',1206]], 59],
'glossary_extend_settings_navigation': ['glossary_extend_settings_navigation', 'Adds module specific settings to the settings block ', [['mod/glossary','lib.php',3092]], 0],
'glossary_get_paging_bar': ['glossary_get_paging_bar', 'Returns the html code to represent any pagging bar. Paramenters are: ', [['mod/glossary','lib.php',2570]], 1],
'highlight': ['highlight', '', [['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy-debug.js',5692],['lib/yuilib/3.17.2/datatable-highlight','datatable-highlight-debug.js',25],['lib','weblib.php',2009],['lib/yuilib/3.17.2/datatable-highlight','datatable-highlight.js',25],['lib/editor/atto/yui/build/moodle-editor_atto-rangy','moodle-editor_atto-rangy.js',5692],['lib/editor/atto/yui/src/rangy/js','rangy-highlighter.js',206]], 84],
'get_mimetype': ['get_mimetype', 'Returns mimetype ', [['lib/filebrowser','file_info.php',277],['lib/filebrowser','virtual_root_file.php',254],['lib/filebrowser','file_info_stored.php',240],['lib/filestorage','stored_file.php',738],['lib','medialib.php',192],['lib/portfolio','caller.php',453]], 59],
'format_string': ['format_string', 'Given a simple string, this function returns the string processed by enabled string filters if $CFG->filterall is enabled ', [['lib','weblib.php',1379]], 880],
'glossary_delete_instance': ['glossary_delete_instance', 'Given an ID of an instance of this module, this function will permanently delete the instance and any data that depends on it. ', [['mod/glossary','lib.php',139]], 0],
'unalias': ['unalias', 'Extract the aliased user fields from a given record ', [['lib','outputcomponents.php',282]], 13],
'get_userid': ['get_userid', 'Returns user ID ', [['lib/filebrowser','virtual_root_file.php',236],['mod/quiz','attemptlib.php',804],['lib/filestorage','stored_file.php',708],['mod/data','lib.php',2585],['backup/util/plan','restore_task.class.php',54],['backup/util/plan','restore_plan.class.php',115],['backup/controller','backup_controller.class.php',283],['backup/controller','restore_controller.class.php',285]], 220],
'glossary_print_entry_aliases': ['glossary_print_entry_aliases', '', [['mod/glossary','lib.php',1176]], 1],
'glossary_get_extra_capabilities': ['glossary_get_extra_capabilities', 'Returns all other caps used in module ', [['mod/glossary','lib.php',2997]], 0],
'clean_filename': ['clean_filename', 'Cleans a given filename by removing suspicious or troublesome characters ', [['lib','moodlelib.php',6575]], 58],
'glossary_search_entries': ['glossary_search_entries', '', [['mod/glossary','lib.php',1524]], 0],
'glossary_comment_permissions': ['glossary_comment_permissions', 'Running addtional permission check on plugin, for example, plugins may have switch to turn on/off comments option, this callback will affect UI display, not like pluginname_comment_validate only throw exceptions. Capability check has been done in comment->check_permissions(), we don\'t need to do it again here. ', [['mod/glossary','lib.php',3132]], 0],
'set_formats': ['set_formats', 'Sets the available export formats for this content. This function will also poll the static function in the caller class and make sure we\'re not overriding a format that has nothing to do with mimetypes. Eg: if you pass IMAGE here but the caller can export LEAP2A it will keep LEAP2A as well. ', [['lib','portfoliolib.php',164]], 12],
'get_list_of_plugins': ['get_list_of_plugins', 'Lists plugin-like directories within specified directory ', [['lib','moodlelib.php',7336]], 11],
'on': ['on', '', [['lib/requirejs','require.js',508],['lib/jquery','jquery-3.1.0.js',4809]], 3823],
'print_error': ['print_error', 'Abort execution by throwing of a general exception, default exception handler displays the error message in most cases. ', [['lib','setuplib.php',481]], 1488],
'record_exists': ['record_exists', 'Check if a record exists by ID. ', [['competency/classes','persistent.php',842],['lib/dml','moodle_database.php',1817]], 901],
'glossary_add_instance': ['glossary_add_instance', '', [['mod/glossary','lib.php',58]], 0],
'record_exists_sql': ['record_exists_sql', 'Test whether a SQL SELECT statement returns any records. ', [['lib/dml','moodle_database.php',1846]], 52],
'file_rewrite_pluginfile_urls': ['file_rewrite_pluginfile_urls', 'Convert encoded URLs in $text from the @@PLUGINFILE@@/... form to an actual URL. Passing a new option reverse = true in the $options var will make the function to convert actual URLs in $text to encoded URLs in the @@PLUGINFILE@@ form. ', [['lib','filelib.php',446]], 96],
'glossary_cron': ['glossary_cron', 'Function to be run periodically according to the moodle cron This function searches for things that need to be done, such as sending out mail, toggling flags etc ... ', [['mod/glossary','lib.php',616]], 0],
'where': ['where', '', [['question/engine','datalib.php',1883],['question/engine','datalib.php',1965],['mod/glossary/classes','entry_query_builder.php',448],['question/classes/bank/search','hidden_condition.php',53],['question/classes/bank/search','category_condition.php',96]], 64],
'send_file': ['send_file', 'Repository method to serve the referenced file ', [['repository/boxnet','lib.php',482],['lib','filelib.php',2073],['repository/dropbox','lib.php',670],['repository','lib.php',1200],['repository/equella','lib.php',243],['lib/filestorage','stored_file.php',999],['lib','googleapi.php',142],['lib','googleapi.php',253],['repository/filesystem','lib.php',601],['lib/portfolio','plugin.php',811]], 26],
'get_area_files': ['get_area_files', 'Returns all area files (optionally limited by itemid) ', [['lib/filestorage','file_storage.php',782],['lib','externallib.php',1134]], 216],
'glossary_update_grades': ['glossary_update_grades', 'Update activity grades ', [['mod/glossary','lib.php',768]], 0],
'limit': ['limit', 'Limit the number of records to fetch. ', [['mod/glossary/classes','entry_query_builder.php',386]], 17],
'glossary_reset_gradebook': ['glossary_reset_gradebook', 'Removes all grades from gradebook ', [['mod/glossary','lib.php',2771]], 4],
'get_file': ['get_file', 'Downloads a repository file and saves to a path. ', [['repository/boxnet','lib.php',179],['repository/flickr_public','lib.php',453],['repository/dropbox','lib.php',410],['repository/skydrive','lib.php',130],['repository','lib.php',1647],['repository/s3','lib.php',227],['repository/equella','lib.php',166],['mod/data/field/picture','field.class.php',126],['mod/data/field/file','field.class.php',123],['repository/googledocs','lib.php',408],['lib/filestorage','file_storage.php',700],['repository/webdav','lib.php',73],['repository/filesystem','lib.php',398],['repository/flickr','lib.php',277],['lib','externallib.php',1076],['repository/dropbox','locallib.php',114],['lib','webdavlib.php',391]], 169],
'glossary_start_tag': ['glossary_start_tag', 'Return the xml start tag ', [['mod/glossary','lib.php',2401]], 11],
'require_course_login': ['require_course_login', 'Weaker version of require_login() ', [['lib','moodlelib.php',2902]], 68],
'glossary_full_tag': ['glossary_full_tag', 'Return the start tag, the contents and the end tag ', [['mod/glossary','lib.php',2434]], 26],
'glossary_get_entries_search': ['glossary_get_entries_search', '', [['mod/glossary','lib.php',999]], 2],
'glossary_set_default_visible_tabs': ['glossary_set_default_visible_tabs', 'Set \'showtabs\' value for glossary formats ', [['mod/glossary','lib.php',3250]], 2],
'filter_by_concept_letter': ['filter_by_concept_letter', 'Filter the concept by letter. ', [['mod/glossary/classes','entry_query_builder.php',217]], 2],
'or': ['or', '', [['lib/tcpdf','LICENSE.TXT',69]], 556],
'lower': ['lower', 'Makes a string lowercase. ', [['lib/horde/framework/Horde','String.php',167]], 83],
'glossary_get_entries_by_term': ['glossary_get_entries_by_term', 'Returns the entries of a glossary by term. ', [['mod/glossary','lib.php',3797]], 2],
'get_course_module_record': ['get_course_module_record', 'Returns itself in the form of stdClass. ', [['lib','modinfolib.php',1490]], 21],
'shift_course_mod_dates': ['shift_course_mod_dates', 'Change dates in module - used from course reset. ', [['lib','moodlelib.php',5026]], 10],
'execute': ['execute', 'Run langpack update ', [['admin/tool/langimport/classes/task','update_langpacks_task.php',44],['backup/converter/imscc1','lib.php',84],['lib/classes/task','blog_cron_task.php',40],['mod/workshop/allocation/scheduled','lib.php',128],['lib/classes/task','send_new_user_passwords_task.php',40],['admin/tool/log/store/standard/classes/task','cleanup_task.php',40],['lib/dml','pdo_moodle_database.php',227],['lib/classes/task','tag_cron_task.php',42],['enrol/imsenterprise/classes/task','cron_task.php',43],['lib/classes/task','completion_daily_task.php',42],['lib/google/src/Google/Http','Batch.php',61],['lib/dml','oci_native_moodle_database.php',1048],['lib/classes/task','context_cleanup_task.php',41],['backup/util/plan','backup_structure_step.class.php',50],['backup/util/ui','restore_ui.class.php',206],['webservice','lib.php',1319],['lib/classes/task','stats_cron_task.php',40],['lib/htmlpurifier/HTMLPurifier/Strategy','ValidateAttributes.php',16],['lib/htmlpurifier/HTMLPurifier/Strategy','RemoveForeignElements.php',20],['lib/classes/task','legacy_plugin_cron_task.php',42],['backup/moodle2','restore_activity_task.class.php',189],['lib/classes/task','portfolio_cron_task.php',40],['lib/google/src/Google/Http','REST.php',27],['lib/htmlpurifier/HTMLPurifier/Strategy','MakeWellFormed.php',66],['backup/converter/imscc11','backuplib.php',42],['lib/classes/task','question_cron_task.php',40],['lib/classes/task','cache_cron_task.php',40],['admin/tool/log/store/legacy/classes/task','cleanup_task.php',40],['mod/lti/service/memberships/classes/local/resource','linkmemberships.php',62],['admin/tool/messageinbound/classes/task','cleanup_task.php',47],['lib/adodb/drivers','adodb-pdo.inc.php',559],['lib/editor/atto/classes/task','autosave_cleanup_task.php',42],['admin/tool/recyclebin/classes/task','cleanup_category_bin.php',43],['lib/classes/task','completion_regular_task.php',42],['lib/adodb/drivers','adodb-oci8po.inc.php',54],['lib/classes/task','events_cron_task.php',40],['mod/workshop/allocation/random','lib.php',83],['mod/assign/feedback/editpdf/classes/task','convert_submissions.php',47],['auth/cas/classes/task','sync_task.php',43],['admin/tool/recyclebin/classes/task','cleanup_course_bin.php',43],['mod/lti/service/toolsettings/classes/local/resource','contextsettings.php',62],['backup/util/helper','restore_decode_processor.class.php',73],['lib/behat','behat_base.php',840],['enrol/flatfile/classes/task','flatfile_sync_task.php',46],['lib/classes/task','registration_cron_task.php',40],['backup/moodle2','backup_section_task.class.php',97],['lib/classes/task','check_for_updates_task.php',40],['backup/util/plan/tests/fixtures','plan_fixtures.php',48],['backup/util/plan/tests/fixtures','plan_fixtures.php',56],['mod/forum/classes/task','cron_task.php',39],['lib/classes/task','send_failed_login_notifications_task.php',43],['enrol/lti/classes/task','sync_grades.php',45],['lib/dml','pgsql_native_moodle_database.php',665],['lib/htmlpurifier/HTMLPurifier/Strategy','Composite.php',21],['lib/classes/update','validator.php',117],['lib/google/src/Google','Client.php',574],['lib/dml','mssql_native_moodle_database.php',711],['mod/lti/service/profile/classes/local/resource','profile.php',76],['backup/util/plan','backup_plan.class.php',112],['lib/dml','mysqli_native_moodle_database.php',963],['backup/util/ui','backup_ui.class.php',122],['admin/tool/monitor/classes/task','clean_events.php',41],['backup/converter/moodle1','backuplib.php',10],['backup/converter/imscc11','lib.php',85],['lib/classes/task','grade_cron_task.php',40],['lib/classes/task','file_temp_cleanup_task.php',40],['backup/moodle2','restore_section_task.class.php',87],['mod/lti/service/toolsettings/classes/local/resource','linksettings.php',63],['filter/tex','latex.php',70],['lib/adodb','adodb.inc.php',1088],['lib/classes/task','plagiarism_cron_task.php',40],['mod/lti/service/toolproxy/classes/local/resource','toolproxy.php',62],['backup/converter/moodle1','lib.php',142],['backup/util/plan','restore_structure_step.class.php',62],['lib/classes/task','search_index_task.php',44],['enrol/lti/classes/task','sync_members.php',55],['lib/classes/task','session_cleanup_task.php',40],['mod/lti/service/toolsettings/classes/local/resource','systemsettings.php',61],['lib/classes/task','backup_cleanup_task.php',40],['lib/classes/task','delete_unconfirmed_users_task.php',40],['backup/converter/imscc1','backuplib.php',10],['lib/classes/task','badges_cron_task.php',40],['admin/tool/uploadcourse/classes','processor.php',174],['lib/classes/task','calendar_cron_task.php',40],['backup/util/plan','base_plan.class.php',158],['auth/ldap/classes/task','sync_task.php',43],['lib/adodb/drivers','adodb-oci8.inc.php',920],['backup/util/plan','restore_plan.class.php',159],['lib/tests/fixtures','task_fixtures.php',30],['lib/tests/fixtures','task_fixtures.php',39],['lib/tests/fixtures','task_fixtures.php',48],['lib/tests/fixtures','task_fixtures.php',57],['lib/dml','sqlsrv_native_moodle_database.php',795],['lib/classes/task','create_contexts_task.php',40],['lib/classes/task','file_trash_cleanup_task.php',40],['admin/tool/cohortroles/classes/task','cohort_role_sync.php',46],['lib/classes/task','complete_plans_task.php',52],['lib/classes/task','messaging_cleanup_task.php',40],['backup/util/plan','backup_execution_step.class.php',25],['lib/classes/task','cache_cleanup_task.php',40],['backup/moodle2','backup_activity_task.class.php',211],['filter/tex','texdebug.php',287],['lib/classes/task','password_reset_cleanup_task.php',40],['lib/classes/task','search_optimize_task.php',47],['mod/assign','adminlib.php',342],['lib/classes/task','delete_incomplete_users_task.php',40],['lib/classes/task','automated_backup_task.php',40],['admin/tool/messageinbound/classes/task','pickup_task.php',47],['backup/util/plan','restore_execution_step.class.php',25],['lib/classes/task','sync_plans_from_template_cohorts_task.php',50],['admin/tool/monitor/classes','notification_task.php',39],['lib/dml/tests','dml_test.php',5543],['lib/htmlpurifier/HTMLPurifier/Strategy','FixNesting.php',41],['mod/lti/service/memberships/classes/local/resource','contextmemberships.php',60],['admin/tool/monitor/classes/task','check_subscriptions.php',60],['backup/util/interfaces','executable.class.php',32],['backup/util/plan','base_task.class.php',162]], 1058],
'is_enrolled': ['is_enrolled', 'Returns true if user is enrolled (is participating) in course this is intended for students and teachers. ', [['lib','accesslib.php',2038]], 145],
'strlen': ['strlen', 'Counts the number of characters. Unit-tested by Kasper (single byte charsets only) ', [['lib/typo3','class.t3lib_cs.php',1520],['lib/classes','text.php',305]], 1649],
'setadvanced': ['setadvanced', 'Use this method to indicate an element in a form is an advanced field. If items in a form are marked as advanced then \'Hide/Show Advanced\' buttons will automatically be displayed in the form so the user can decide whether to display advanced form controls. ', [['lib','formslib.php',1497]], 166],
'sql_concat': ['sql_concat', '', [['lib/dml','pdo_moodle_database.php',537],['lib/dml','oci_native_moodle_database.php',1602],['lib/dml','sqlite3_pdo_moodle_database.php',361],['lib/dml','pgsql_native_moodle_database.php',1225],['lib/dml','mssql_native_moodle_database.php',1258],['lib/dml','mysqli_native_moodle_database.php',1556],['lib/dml','sqlsrv_native_moodle_database.php',1324],['lib/dml/tests','dml_test.php',5554]], 74],
'glossary_rating_permissions': ['glossary_rating_permissions', 'Return rating related permissions ', [['mod/glossary','lib.php',656]], 0],
'filter_by_term': ['filter_by_term', 'Filter by concept or alias. ', [['mod/glossary/classes','entry_query_builder.php',266]], 1],
'valid': ['valid', 'Did we reach the end? ', [['lib/filestorage','zip_archive.php',514],['lib/spout/src/Spout/Reader/XLSX','SheetIterator.php',51],['lib/dml','mssql_native_moodle_recordset.php',83],['lib/phpexcel/PHPExcel/Worksheet','RowCellIterator.php',191],['lib/phpexcel/PHPExcel/Worksheet','ColumnIterator.php',184],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',329],['lib/dml','mysqli_native_moodle_recordset.php',82],['lib/phpexcel/PHPExcel/Worksheet','RowIterator.php',175],['lib/horde/framework/Horde/Mail/Rfc822','List.php',439],['lib/dml','pdo_moodle_recordset.php',75],['lib/spout/src/Spout/Reader/CSV','RowIterator.php',104],['lib/phpexcel/PHPExcel','WorksheetIterator.php',99],['backup/util/helper','backup_null_iterator.class.php',49],['lib/horde/framework/Horde','Domhtml.php',331],['lib/dml','sqlsrv_native_moodle_recordset.php',129],['lib/classes/dml','recordset_walk.php',127],['lib/horde/framework/Horde/Imap/Client','Ids.php',419],['backup/util/helper','backup_array_iterator.class.php',59],['lib/spout/src/Spout/Reader/CSV','SheetIterator.php',44],['lib/dml','oci_native_moodle_recordset.php',76],['lib/adodb','adodb.inc.php',3041],['lib/adodb','adodb.inc.php',3168],['lib/phpexcel/PHPExcel/Worksheet','ColumnCellIterator.php',182],['lib/spout/src/Spout/Reader/XLSX','RowIterator.php',110],['question/engine','questionusage.php',999],['question/engine/tests','helpers.php',1237],['backup/cc/cc_lib','cc_version11.php',47],['lib/spout/src/Spout/Reader/ODS','SheetIterator.php',75],['backup/cc/cc_lib','cc_version1.php',47],['backup/cc/cc_lib','cc_asssesment.php',58],['lib/spout/src/Spout/Reader/ODS','RowIterator.php',80],['lib/google/src/Google','Collection.php',45],['lib/horde/framework/Horde/Imap/Client/Data','AclRights.php',182],['lib/horde/framework/Horde/Imap/Client/Fetch','Query.php',378],['question/engine','questionattempt.php',1643],['question/engine','questionattempt.php',1762],['lib/tests','completionlib_test.php',903],['lib/dml','pgsql_native_moodle_recordset.php',103]], 81],
'order_by_author': ['order_by_author', 'Order by author name. ', [['mod/glossary/classes','entry_query_builder.php',424]], 1],
'glossary_entry_view': ['glossary_entry_view', 'Notify that a glossary entry was viewed. ', [['mod/glossary','lib.php',3329]], 4],
'set_module_viewed': ['set_module_viewed', 'Update the module completion status (set it viewed). ', [['mod/assign','locallib.php',8075],['lib','completionlib.php',657]], 29],
'end_tag': ['end_tag', 'Outputs a closing tag ', [['lib','outputcomponents.php',1096],['backup/util/xml/parser','progressive_parser.class.php',261],['backup/util/xml','xml_writer.class.php',177]], 867],
'rss_get_url': ['rss_get_url', 'This function returns the URL for the RSS XML file. ', [['lib','rsslib.php',72]], 7],
'glossary_generate_export_csv': ['glossary_generate_export_csv', '', [['mod/glossary','lib.php',2217]], 1],
'glossary_rating_validate': ['glossary_rating_validate', 'Validates a submitted rating ', [['mod/glossary','lib.php',679]], 0],
'glossary_print_entry_concept': ['glossary_print_entry_concept', 'Print glossary concept/term as a heading &lt;h4> ', [['mod/glossary','lib.php',1107]], 9],
'glossary_print_tabbed_table_end': ['glossary_print_tabbed_table_end', '', [['mod/glossary','lib.php',1787]], 2],
'create': ['create', 'Auto-scan an incoming line to determine the response type. ', [['lib/horde/framework/Horde/Imap/Client/Interaction','Server.php',65],['lib/google/src/Google/Service','Partners.php',492],['lib/simplepie/library/SimplePie','Cache.php',95],['lib/google/src/Google/Service','YouTubeReporting.php',237],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',81],['lib/google/src/Google/Service','MapsEngine.php',1677],['lib/google/src/Google/Service','MapsEngine.php',1977],['lib/google/src/Google/Service','MapsEngine.php',2253],['lib/google/src/Google/Service','MapsEngine.php',2330],['lib/google/src/Google/Service','MapsEngine.php',2898],['lib/spout/src/Spout/Writer','WriterFactory.php',18],['lib/google/src/Google/Service','Dns.php',290],['lib/google/src/Google/Service','Dns.php',363],['lib/google/src/Google/Service','Appengine.php',438],['tag/classes','collection.php',188],['lib/adodb','adodb-xmlschema.inc.php',152],['lib/adodb','adodb-xmlschema.inc.php',473],['lib/adodb','adodb-xmlschema.inc.php',738],['lib/adodb','adodb-xmlschema.inc.php',884],['lib/adodb','adodb-xmlschema.inc.php',1129],['mod/quiz','attemptlib.php',100],['mod/quiz','attemptlib.php',596],['lib','weblib.php',3206],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',58],['lib/google/src/Google/Service','Dataflow.php',273],['lib/simplepie/library/SimplePie','Registry.php',153],['competency/classes','persistent.php',387],['lib/google/src/Google/Service','Cloudresourcemanager.php',373],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',270],['lib/google/src/Google/Service','TagManager.php',1007],['lib/google/src/Google/Service','TagManager.php',1097],['lib/google/src/Google/Service','TagManager.php',1249],['lib/google/src/Google/Service','TagManager.php',1342],['lib/google/src/Google/Service','TagManager.php',1436],['lib/google/src/Google/Service','TagManager.php',1530],['lib/google/src/Google/Service','TagManager.php',1681],['mod/lesson','locallib.php',1011],['mod/lesson','locallib.php',2163],['mod/lesson','locallib.php',3212],['lib','modinfolib.php',1732],['repository','lib.php',206],['repository','lib.php',1910],['lib','navigationlib.php',268],['lib/htmlpurifier/HTMLPurifier','Config.php',114],['lib/google/src/Google/Service','Container.php',284],['lib/google/src/Google/Service','Genomics.php',632],['lib/google/src/Google/Service','Genomics.php',721],['lib/google/src/Google/Service','Genomics.php',1312],['lib/google/src/Google/Service','Genomics.php',1427],['lib/google/src/Google/Service','Games.php',1649],['lib/google/src/Google/Service','Games.php',2013],['lib/google/src/Google/Service','Fitness.php',377],['lib/google/src/Google/Service','Gmail.php',747],['lib/google/src/Google/Service','Gmail.php',905],['mod/quiz/classes','structure.php',65],['lib/htmlpurifier/HTMLPurifier','ElementDef.php',135],['lib/adodb','adodb-xmlschema03.inc.php',170],['lib/adodb','adodb-xmlschema03.inc.php',514],['lib/adodb','adodb-xmlschema03.inc.php',779],['lib/adodb','adodb-xmlschema03.inc.php',930],['lib/adodb','adodb-xmlschema03.inc.php',1228],['lib/google/src/Google/Service','Proximitybeacon.php',500],['tag/classes','area.php',205],['course','lib.php',3003],['question/type/ddmarker','shapes.php',170],['lib/classes/event','base.php',149],['lib','coursecatlib.php',325],['repository/filesystem','lib.php',498],['lib/google/src/Google/Service','Storagetransfer.php',281],['calendar','lib.php',2686],['lib/htmlpurifier/HTMLPurifier','Lexer.php',53],['lib/google/src/Google/Service','Classroom.php',445],['lib/google/src/Google/Service','Classroom.php',596],['lib/google/src/Google/Service','Classroom.php',673],['lib/google/src/Google/Service','Classroom.php',783],['lib/google/src/Google/Service','Classroom.php',912],['lib/spout/src/Spout/Reader','ReaderFactory.php',18],['lib/google/src/Google/Service','Pubsub.php',220],['lib/google/src/Google/Service','Pubsub.php',365],['lib/google/src/Google/Service','CloudMonitoring.php',258]], 3276],
'get_content': ['get_content', '', [['blocks/blog_menu','block_blog_menu.php',52],['blocks/course_overview','block_course_overview.php',45],['blocks/completionstatus','block_completionstatus.php',44],['blocks/globalsearch','block_globalsearch.php',45],['blocks/calendar_upcoming','block_calendar_upcoming.php',33],['blocks/private_files','block_private_files.php',43],['blocks/admin_bookmarks','block_admin_bookmarks.php',69],['blocks/myprofile','block_myprofile.php',47],['blocks/mentees','block_mentees.php',43],['blocks/html','block_html.php',47],['blocks/section_links','block_section_links.php',53],['lib/filebrowser','virtual_root_file.php',106],['blocks/lp','block_lp.php',54],['blocks/site_main_menu','block_site_main_menu.php',34],['blocks/social_activities','block_social_activities.php',34],['blocks/tag_flickr','block_tag_flickr.php',46],['blocks/mnet_hosts','block_mnet_hosts.php',42],['blocks/quiz_results','block_quiz_results.php',52],['lib','modinfolib.php',1235],['blocks/settings','block_settings.php',103],['blocks/activity_modules','block_activity_modules.php',33],['lib','navigationlib.php',568],['lib/simplepie/library/SimplePie','Item.php',372],['lib/filestorage','stored_file.php',451],['blocks/glossary_random','block_glossary_random.php',223],['blocks/news_items','block_news_items.php',37],['blocks/blog_tags','block_blog_tags.php',62],['blocks/feedback','block_feedback.php',39],['blocks','moodleblock.class.php',143],['blocks/search_forums','block_search_forums.php',30],['blocks/navigation','block_navigation.php',118],['blocks/comments','block_comments.php',48],['blocks/badges','block_badges.php',69],['blocks/blog_recent','block_blog_recent.php',46],['blocks/selfcompletion','block_selfcompletion.php',45],['blocks/community','block_community.php',50],['blocks/recent_activity','block_recent_activity.php',50],['blocks/tag_youtube','block_tag_youtube.php',63],['blocks/course_summary','block_course_summary.php',48],['blocks/tags','block_tags.php',52],['blocks/participants','block_participants.php',30],['blocks/online_users','block_online_users.php',41],['mod/workshop','locallib.php',4032],['blocks/login','block_login.php',34],['blocks/activity_results','block_activity_results.php',138],['blocks/calendar_month','block_calendar_month.php',33],['blocks/course_list','block_course_list.php',37],['blocks/messages','block_messages.php',30],['blocks/rss_client','block_rss_client.php',80]], 71],
'glossary_get_file_areas': ['glossary_get_file_areas', 'Lists all browsable file areas ', [['mod/glossary','lib.php',1609]], 0],
'get_record': ['get_record', 'Load a single record. ', [['competency/classes','persistent.php',738],['lib/dml','moodle_database.php',1462]], 3224],
'glossary_scale_used_anywhere': ['glossary_scale_used_anywhere', 'Checks if scale is being used by any instance of glossary ', [['mod/glossary','lib.php',866]], 0],
'glossary_xml_export_files': ['glossary_xml_export_files', 'Prepares file area to export as part of XML export ', [['mod/glossary','lib.php',2453]], 3],
'glossary_count_unrated_entries': ['glossary_count_unrated_entries', 'How many unrated entries are in the given glossary for a given user? ', [['mod/glossary','lib.php',2513]], 0],
'glossary_reset_course_form_defaults': ['glossary_reset_course_form_defaults', 'Course reset form defaults. ', [['mod/glossary','lib.php',2763]], 0],
'glossary_get_entries_by_letter': ['glossary_get_entries_by_letter', 'Returns the entries of a glossary by letter. ', [['mod/glossary','lib.php',3350]], 2],
'glossary_get_entry_by_id': ['glossary_get_entry_by_id', 'Fetch an entry. ', [['mod/glossary','lib.php',3882]], 2],
'glossary_print_special_links': ['glossary_print_special_links', '', [['mod/glossary','lib.php',1980]], 2],
'glossary_end_tag': ['glossary_end_tag', 'Return the xml end tag ', [['mod/glossary','lib.php',2418]], 11],
'grade_get_grades': ['grade_get_grades', 'Returns grading information for given activity, optionally with user grades Manual, course or category items can not be queried. ', [['lib','gradelib.php',408]], 53],
'glossary_pluginfile': ['glossary_pluginfile', 'Serves the glossary attachments. Implements needed access control ;-) ', [['mod/glossary','lib.php',1698]], 0],
'glossary_get_entries_by_author': ['glossary_get_entries_by_author', 'Returns the entries of a glossary by author. ', [['mod/glossary','lib.php',3492]], 2],
'glossary_xml_import_files': ['glossary_xml_import_files', 'Parses files from XML import and inserts them into file system ', [['mod/glossary','lib.php',2481]], 3],
'send_stored_file': ['send_stored_file', 'Handles the sending of file data to the user\'s browser, including support for byteranges etc. ', [['lib','filelib.php',2192]], 75],
'reset_glossary': ['reset_glossary', 'Utility method to purge caches related to given glossary. ', [['mod/glossary/classes/local','concept_cache.php',81]], 9],
'glossary_get_all_tabs': ['glossary_get_all_tabs', 'Return list of all glossary tabs. ', [['mod/glossary','lib.php',3236]], 1],
'get_recordset_sql': ['get_recordset_sql', 'Get a number of records as an moodle_recordset.  $sql must be a complete SQL query. Since this method is a little less readable, use of it should be restricted to code where it\'s possible there might be large datasets being returned.  For known small datasets use get_records_sql - it leads to simpler code. ', [['lib/dml','pdo_moodle_database.php',252],['lib/dml','oci_native_moodle_database.php',1106],['lib/dml','pgsql_native_moodle_database.php',688],['lib/dml','mssql_native_moodle_database.php',736],['lib/dml','mysqli_native_moodle_database.php',993],['lib/dml','sqlsrv_native_moodle_database.php',811],['lib/dml/tests','dml_test.php',5544]], 283],
'count_records_sql': ['count_records_sql', 'Get the result of a SQL SELECT COUNT(...) query. ', [['lib/dml','moodle_database.php',1796]], 155],
'glossary_user_outline': ['glossary_user_outline', 'Return a small object with summary information about what a user has done with a given particular instance of this module Used for user activity reports. $return->time = the time they did it $return->info = a short text description ', [['mod/glossary','lib.php',223]], 0],
'heading': ['heading', 'Outputs a heading ', [['lib','outputrenderers.php',3072],['lib','outputrenderers.php',4364],['lib','outputrenderers.php',4552],['grade/report/singleview/classes/local/screen','screen.php',197],['grade/report/singleview/classes/local/screen','user.php',264],['grade/report/singleview/classes/local/screen','grade.php',283]], 796],
'glossary_get_entries_by_search': ['glossary_get_entries_by_search', 'Returns the entries of a glossary by search. ', [['mod/glossary','lib.php',3727]], 2],
'glossary_get_completion_state': ['glossary_get_completion_state', 'Obtains the automatic completion state for this glossary based on any conditions in glossary settings. ', [['mod/glossary','lib.php',3026]], 0],
'glossary_get_entries_by_date': ['glossary_get_entries_by_date', 'Returns the entries of a glossary by date. ', [['mod/glossary','lib.php',3394]], 2],
'glossary_get_user_entries': ['glossary_get_user_entries', '', [['mod/glossary','lib.php',282]], 2],
'file_encode_url': ['file_encode_url', 'Encodes file serving url ', [['lib','filelib.php',42]], 28],
'glossary_print_attachments': ['glossary_print_attachments', 'if return=html, then return a html string. if return=text, then return a text-only string. otherwise, print HTML for non-images, and return image HTML if attachment is an image, $align set its aligment. ', [['mod/glossary','lib.php',1531]], 2],
'debugging': ['debugging', 'Standard Debugging Function ', [['lib','weblib.php',3012]], 1007],
'instance_by_id': ['instance_by_id', 'Get a context instance as an object, from a given context id. ', [['lib','accesslib.php',5434]], 235],
'glossary_print_entry_icons': ['glossary_print_entry_icons', '', [['mod/glossary','lib.php',1214]], 2],
'get_record_sql': ['get_record_sql', 'Get a single database record as an object using a SQL statement. ', [['lib/dml','oci_native_moodle_database.php',1076],['lib/dml','moodle_database.php',1506]], 157],
'single_button': ['single_button', 'Returns a form with a single button. ', [['lib','outputrenderers.php',1772]], 316],
'glossary_page_type_list': ['glossary_page_type_list', 'Return a list of page types ', [['mod/glossary','lib.php',3222]], 0],
'get_field_sql': ['get_field_sql', 'Get a single field value (first field) using a SQL statement. ', [['lib/dml','moodle_database.php',1588]], 138],
'action_icon': ['action_icon', 'Renders an action_icon. ', [['course/classes','management_renderer.php',987],['lib','outputrenderers.php',1694]], 113],
'glossary_get_entries_by_category': ['glossary_get_entries_by_category', 'Returns the entries of a glossary by category. ', [['mod/glossary','lib.php',3437]], 2],
'glossary_get_entries_by_author_id': ['glossary_get_entries_by_author_id', 'Returns the entries of a glossary by category. ', [['mod/glossary','lib.php',3540]], 1],
'get_records': ['get_records', 'Load a list of records. ', [['competency/classes','persistent.php',709],['mod/glossary/classes','entry_query_builder.php',295],['lib/dml','moodle_database.php',1285],['lib','coursecatlib.php',651],['question','category_class.php',63]], 965],
'instance': ['instance', 'Returns an instance of the cache_factor method. ', [['cache','disabledlib.php',171],['cache','disabledlib.php',296],['lib/classes','useragent.php',101],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',80],['lib/htmlpurifier/HTMLPurifier','URISchemeRegistry.php',9],['search/classes','manager.php',109],['cache','locallib.php',52],['lib/htmlpurifier/HTMLPurifier','LanguageFactory.php',53],['lib/classes','plugin_manager.php',103],['lib/htmlpurifier','HTMLPurifier.php',251],['course/format','lib.php',156],['lib/classes/update','checker.php',62],['lib/htmlpurifier/HTMLPurifier','DefinitionCacheFactory.php',31],['admin/tool/installaddon/classes','installer.php',40],['lib','modinfolib.php',373],['cache/classes','helper.php',76],['lib/tests','string_manager_standard_test.php',124],['lib/portfolio','exporter.php',251],['lib/classes/update','validator.php',88],['search/classes','document_factory.php',49],['lib','accesslib.php',6235],['lib','accesslib.php',6487],['lib','accesslib.php',6665],['lib','accesslib.php',6919],['lib','accesslib.php',7180],['lib','accesslib.php',7392],['backup/cc/cc_lib','cc_utils.php',387],['backup/cc/cc_lib','cc_utils.php',443],['lib','filterlib.php',80],['search/tests/fixtures','testable_core_search.php',43],['lib/tests/fixtures','testable_update_checker.php',45],['backup/cc','validator.php',35],['cache/classes','config.php',87],['cache/classes','factory.php',114],['lib/htmlpurifier/HTMLPurifier','EntityLookup.php',29]], 4647],
'tag': ['tag', 'Outputs a tag with attributes and contents ', [['lib','outputcomponents.php',1073]], 1292],
'glossary_print_entry_attachment': ['glossary_print_entry_attachment', 'Print the list of attachments for this glossary entry ', [['mod/glossary','lib.php',1365]], 7],
'glossary_print_recent_mod_activity': ['glossary_print_recent_mod_activity', 'Outputs the glossary entry indicated by $activity ', [['mod/glossary','lib.php',451]], 0],
'glossary_get_entries_to_approve': ['glossary_get_entries_to_approve', 'Returns the entries to be approved. ', [['mod/glossary','lib.php',3838]], 2],
'output': ['output', 'Specific output method for the memory XML sink. ', [['lib/dtl','string_xml_database_exporter.php',34],['lib/tcpdf','tcpdf.php',7537],['lib','weblib.php',3368],['lib','weblib.php',3387],['lib','weblib.php',3408],['lib','weblib.php',3432],['lib','weblib.php',3491],['lib','weblib.php',3530],['lib','weblib.php',3602],['backup/util/output','output_controller.class.php',67],['lib','pdflib.php',178],['lib/amd/src','chart_output_chartjs.js',46],['comment','lib.php',420],['lib/amd/src','chart_output_htmltable.js',29],['lib/minify/lib/HTTP','Encoder.php',285],['lib/dtl','file_xml_database_exporter.php',51],['lib','graphlib.php',1485],['grade/report/singleview','lib.php',104],['admin/tool/uploadcourse/classes','tracker.php',135]], 218],
'glossary_log_info': ['glossary_log_info', '', [['mod/glossary','lib.php',608]], 0],
'sql_regex_supported': ['sql_regex_supported', '', [['lib/dml','pgsql_native_moodle_database.php',1247],['lib/dml','mysqli_native_moodle_database.php',1599],['lib/dml','moodle_database.php',2262]], 12],
'get_coursemodule_from_instance': ['get_coursemodule_from_instance', 'Given an instance number of a module, finds the coursemodule description ', [['lib','datalib.php',1300]], 441],
'require_capability': ['require_capability', 'Wrapper round the require_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',306],['mod/quiz','attemptlib.php',929],['lib','accesslib.php',762],['backup/util/ui','restore_ui_components.php',157]], 690],
'sql_like_escape': ['sql_like_escape', 'Escape sql LIKE special characters like \'_\' or \'%\'. ', [['lib/dml','moodle_database.php',2073]], 26],
'add_record_snapshot': ['add_record_snapshot', 'Add cached data that will be most probably used in event observers. ', [['lib/classes/event','base.php',840]], 332],
'sql_like': ['sql_like', 'Returns \'LIKE\' part of a query. ', [['lib/dml','oci_native_moodle_database.php',1575],['lib/dml','pgsql_native_moodle_database.php',1188],['lib/dml','mssql_native_moodle_database.php',1224],['lib/dml','mysqli_native_moodle_database.php',1514],['lib/dml','moodle_database.php',2053],['lib/dml','sqlsrv_native_moodle_database.php',1291]], 159],
'pix_icon': ['pix_icon', 'Return HTML for a pix_icon. ', [['lib','outputrenderers.php',2161]], 504],
'container': ['container', 'Outputs a container. ', [['lib','outputrenderers.php',3126]], 195],
'xmlize': ['xmlize', 'Create an array structure from an XML string. ', [['lib','xmlize.php',44]], 33],
'fields': ['fields', '', [['lib/adodb/drivers','adodb-odbtp.inc.php',720],['lib/adodb/drivers','adodb-sqlite3.inc.php',403],['mod/quiz/classes','admin_review_setting.php',65],['lib/adodb/drivers','adodb-ibase.inc.php',865],['lib/adodb/drivers','adodb-postgres64.inc.php',968],['lib/adodb/drivers','adodb-odbc.inc.php',644],['lib/adodb/drivers','adodb-sqlite.inc.php',420],['lib/adodb/drivers','adodb-pdo.inc.php',742],['lib','outputcomponents.php',235],['lib/adodb/drivers','adodb-oci8po.inc.php',104],['lib/adodb/drivers','adodb-mssql.inc.php',906],['lib/adodb/drivers','adodb-mysql.inc.php',774],['lib/adodb/drivers','adodb-mssqlnative.inc.php',895],['lib/adodb/drivers','adodb-oracle.inc.php',267],['lib/adodb','adodb.inc.php',3781],['lib/adodb','adodb.inc.php',4459],['lib/adodb/drivers','adodb-ado5.inc.php',412],['lib/adodb/drivers','adodb-db2.inc.php',756],['lib/adodb/drivers','adodb-oci8.inc.php',1701],['lib/adodb/drivers','adodb-mysqli.inc.php',973],['lib/adodb/drivers','adodb-ado.inc.php',375],['lib/adodb/drivers','adodb-ads.inc.php',690]], 156],
'close': ['close', 'Close archive, write changes to disk. ', [['lib/filestorage','zip_archive.php',183],['lib/dml','mssql_native_moodle_recordset.php',87],['auth/fc','fcFPP.php',78],['lib/dml','mysqli_native_moodle_recordset.php',86],['lib/spout/src/Spout/Reader','ReaderInterface.php',30],['lib/spout/src/Spout/Writer/ODS/Internal','Workbook.php',81],['lib/dml','pdo_moodle_recordset.php',79],['lib','csvlib.class.php',256],['lib/horde/framework/Horde/Socket','Client.php',135],['backup/util/helper','backup_null_iterator.class.php',53],['admin/tool/uploaduser','locallib.php',149],['lib/tcpdf','tcpdf.php',2943],['lib/phpunit/classes','phpmailer_sink.php',41],['lib/phpmailer','class.smtp.php',582],['lib/dml','sqlsrv_native_moodle_recordset.php',133],['lib/classes/dml','recordset_walk.php',153],['lib/spout/src/Spout/Writer/XLSX/Helper','SharedStringsHelper.php',84],['grade/export','lib.php',689],['lib','excellib.class.php',93],['backup/util/loggers','file_logger.class.php',69],['grade','lib.php',324],['backup/util/helper','backup_array_iterator.class.php',63],['lib/horde/framework/Horde/Imap/Client','Base.php',1846],['mod/assign/feedback/offline','importgradeslib.php',204],['lib/dml','oci_native_moodle_recordset.php',80],['lib/adodb','adodb.inc.php',2361],['lib/adodb','adodb.inc.php',3090],['lib/adodb','adodb.inc.php',3870],['lib/google/src/Google/Logger','File.php',132],['lib/phpunit/classes','event_sink.php',39],['lib/horde/framework/Horde','Stream.php',585],['backup/util/loggers','base_logger.class.php',89],['lib/phpexcel/PHPExcel/Shared','ZipArchive.php',71],['question/engine/tests','helpers.php',1241],['lib/spout/src/Spout/Writer','AbstractWriter.php',312],['lib','odslib.class.php',71],['lib/spout/src/Spout/Writer/Common/Internal','WorksheetInterface.php',34],['lib/spout/src/Spout/Writer/ODS/Internal','Worksheet.php',214],['lib/spout/src/Spout/Writer','WriterInterface.php',84],['lib/spout/src/Spout/Writer/XLSX/Internal','Worksheet.php',174],['lib/spout/src/Spout/Reader','AbstractReader.php',183],['lib/phpunit/classes','message_sink.php',39],['lib/spout/src/Spout/Writer/Common/Internal','WorkbookInterface.php',65],['lib/spout/src/Spout/Writer/XLSX/Internal','Workbook.php',95],['lib/pear/Net','GeoIP.php',556],['lib/tests','completionlib_test.php',907],['lib/pear/Auth','RADIUS.php',550],['lib/pear/Auth','RADIUS.php',710],['lib/pear/Auth','RADIUS.php',829],['lib','webdavlib.php',176],['lib/dml','pgsql_native_moodle_recordset.php',107]], 1128],
'glossary_sort_entries': ['glossary_sort_entries', '', [['mod/glossary','lib.php',2124]], 0],
'create_file_from_string': ['create_file_from_string', 'Create new file from string - make sure params are valid. ', [['lib/filebrowser','file_info.php',379],['lib/filebrowser','file_info_stored.php',490],['lib/filestorage','file_storage.php',1482]], 132],
'glossary_update_instance': ['glossary_update_instance', 'Given an object containing all the necessary data, (defined by the form in mod_form.php) this function will update an existing instance with new data. ', [['mod/glossary','lib.php',94]], 0],
'pix_url': ['pix_url', 'Return the moodle_url for an image. ', [['lib','outputrenderers.php',237],['lib','outputlib.php',1394]], 367],
'glossary_print_entry_lower_section': ['glossary_print_entry_lower_section', '', [['mod/glossary','lib.php',1338]], 8],
'glossary_get_view_actions': ['glossary_get_view_actions', 'List the actions that correspond to a view of this module. This is used by the participation report. ', [['mod/glossary','lib.php',2710]], 0],
'get_fast_modinfo': ['get_fast_modinfo', 'Returns reference to full info about modules in course (including visibility). Cached and as fast as possible (0 or 1 db query). ', [['lib','modinfolib.php',1977]], 289],
'format_text': ['format_text', 'Formats a text string coming from the search engine. ', [['search/classes','document.php',606],['lib/classes','grading_external.php',182],['search/engine/solr/classes','document.php',129],['lib','weblib.php',1158],['lib','tablelib.php',860],['lib','tablelib.php',1667],['question/type','questionbase.php',345]], 322],
'disabledif': ['disabledif', 'Adds a dependency for $elementName which will be disabled if $condition is met. If $condition = \'notchecked\' (default) then the condition is that the $dependentOn element is not checked. If $condition = \'checked\' then the condition is that the $dependentOn element is checked. If $condition is something else (like "eq" for equals) then it is checked to see if the value of the $dependentOn element is $condition (such as equal) to $value. ', [['lib','formslib.php',2429]], 343],
'add_user_fields': ['add_user_fields', 'Adds the user fields. ', [['mod/glossary/classes','entry_query_builder.php',114]], 8],
'filter_by_non_approved': ['filter_by_non_approved', 'Filter non approved entries. ', [['mod/glossary/classes','entry_query_builder.php',235]], 13],
'user_picture': ['user_picture', '', [['mod/quiz','attemptlib.php',2467],['lib','outputrenderers.php',2454],['lib','outputrenderers.php',5000]], 138],
'glossary_print_alphabet_menu': ['glossary_print_alphabet_menu', '', [['mod/glossary','lib.php',1839]], 2],
'render': ['render', 'Renders this element ', [['lib/classes/output','inplace_editable.php',238],['lib/adodb','adodb-pager.inc.php',241],['lib/phpexcel/PHPExcel','Chart.php',656],['lib','formslib.php',948],['lib/editor/tinymce/tiny_mce/3.5.11/plugins/fullscreen','fullscreen.htm',82],['lib','outputrenderers.php',170],['lib','outputrenderers.php',302],['question/behaviour','behaviourbase.php',97],['lib/htmlpurifier/HTMLPurifier/Printer','HTMLDefinition.php',15],['lib/htmlpurifier/HTMLPurifier/Printer','CSSDefinition.php',14],['filter/tex','latex.php',88],['lib','portfoliolib.php',241],['mod/quiz/classes/question/bank','custom_view.php',133],['lib/mustache/src/Mustache','Engine.php',204],['question/engine/tests','helpers.php',797],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',85],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',235],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',298],['lib/htmlpurifier/HTMLPurifier/Printer','ConfigForm.php',391],['lib/mustache/src/Mustache','Template.php',57],['lib/phpexcel/PHPExcel/Chart/Renderer','jpgraph.php',790],['question/engine','questionattempt.php',814],['lib/mustache/src/Mustache','LambdaHelper.php',39]], 942],
'delete_records_select': ['delete_records_select', '', [['lib/dml','pdo_moodle_database.php',208],['lib/dml','oci_native_moodle_database.php',1495],['lib/dml','pgsql_native_moodle_database.php',1162],['lib/dml','mssql_native_moodle_database.php',1146],['lib/dml','mysqli_native_moodle_database.php',1477],['lib/dml','sqlsrv_native_moodle_database.php',1220],['lib/dml/tests','dml_test.php',5553]], 163],
'join_alias': ['join_alias', 'Join the alias table. ', [['mod/glossary/classes','entry_query_builder.php',327]], 1],
'has_capability': ['has_capability', 'Wrapper round the has_capability funciton that automatically passes in the quiz context. ', [['mod/quiz','attemptlib.php',299],['mod/quiz','attemptlib.php',922],['lib','accesslib.php',344]], 2064],
'require_login': ['require_login', 'This function checks that the current user is logged in and has the required privileges ', [['lib','moodlelib.php',2449]], 636],
'get_filename': ['get_filename', 'Returns file name ', [['lib/filebrowser','virtual_root_file.php',227],['lib/filestorage','stored_file.php',699],['lib','medialib.php',169]], 248],
'get_string': ['get_string', 'Get String returns a requested string ', [['lib/classes','string_manager_install.php',95],['lib','moodlelib.php',6735],['lib','moodlelib.php',9695],['lib/external','externallib.php',102],['question/behaviour','behaviourbase.php',770],['lib/classes','string_manager_standard.php',280],['lib/classes','string_manager.php',38]], 20134],
'glossary_get_post_actions': ['glossary_get_post_actions', 'List the actions that correspond to a post of this module. This is used by the participation report. ', [['mod/glossary','lib.php',2724]], 0],
'add': ['add', 'Add HashTable item ', [['lib/phpexcel/PHPExcel','HashTable.php',78],['lib/htmlpurifier/HTMLPurifier','ConfigSchema.php',95],['lib/horde/framework/Horde/Imap/Client','Tokenize.php',109],['lib/google/src/Google/Http','Batch.php',52],['lib/horde/framework/Horde/Imap/Client/Data/Format','List.php',37],['lib','csslib.php',1508],['lib/horde/framework/Horde/Mail/Rfc822','List.php',116],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Memory.php',33],['lib/horde/framework/Horde/Support','ConsistentHash.php',148],['lib/horde/framework/Horde','Variables.php',297],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Template.php.in',29],['lib','outputcomponents.php',2705],['lib','outputcomponents.php',3380],['lib/phpexcel/PHPExcel/Shared/PCLZip','pclzip.lib.php',436],['lib','adminlib.php',735],['lib','adminlib.php',894],['lib','adminlib.php',1446],['lib/htmlpurifier/HTMLPurifier/DefinitionCache/Decorator','Cleanup.php',27],['lib/xhprof/xhprof_html/jquery','jquery-1.2.6.js',3450],['lib/horde/framework/Horde/Imap/Client/Interaction','Pipeline.php',80],['lib/google/src/Google/Service','Webmasters.php',436],['lib','navigationlib.php',304],['lib','navigationlib.php',761],['lib','navigationlib.php',3305],['lib','navigationlib.php',3583],['lib/horde/framework/Horde/Imap/Client','Ids.php',155],['backup/cc/cc_lib/gral_lib','cssparser.php',121],['lib/xhprof/xhprof_html/jquery','jquery.autocomplete.js',428],['lib/horde/framework/Horde','Stream.php',116],['comment','lib.php',679],['lib/mustache/src/Mustache','HelperCollection.php',56],['lib/htmlpurifier/HTMLPurifier','UnitConverter.php',207],['backup/cc/cc_lib','cc_utils.php',395],['backup/cc/cc_lib','cc_utils.php',454],['lib/lessphp/Output','Mapped.php',50],['lib','licenselib.php',32],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Decorator.php',50],['lib/phpexcel/PHPExcel/Reader/Excel5','MD5.php',74],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Null.php',14],['lib/horde/framework/Horde/Mail/Rfc822','GroupList.php',25],['lib/htmlpurifier/HTMLPurifier','IDAccumulator.php',31],['tag/classes','tag.php',152],['blog','locallib.php',242],['lib/classes','notification.php',50],['lib/lessphp','Output.php',18],['tag/classes/output','tagfeed.php',61],['backup/cc','validator.php',51],['lib/horde/framework/Horde/Stream','TempString.php',118],['lib/htmlpurifier/HTMLPurifier/DefinitionCache','Serializer.php',11]], 6188],
'trim': ['trim', '', [], 1948],
'preg_quote': ['preg_quote', '', [], 205],
'time': ['time', '', [], 1959],
'define': ['define', '', [], 2373],
'file_exists': ['file_exists', '', [], 867],
'count': ['count', '', [], 4095],
'is_array': ['is_array', '', [], 1608],
'preg_split': ['preg_split', '', [], 146],
'array_pop': ['array_pop', '', [], 483],
'implode': ['implode', '', [], 1281],
'is_null': ['is_null', '', [], 2003],
'base64_encode': ['base64_encode', '', [], 134],
'in_array': ['in_array', '', [], 1234],
'array_shift': ['array_shift', '', [], 700],
'nl2br': ['nl2br', '', [], 17],
'substr': ['substr', '', [], 2823],
'link': ['link', '', [], 695],
'explode': ['explode', '', [], 1572],
'str_repeat': ['str_repeat', '', [], 156],
'array_pad': ['array_pad', '', [], 6],
'strtolower': ['strtolower', '', [], 817],
'array_merge': ['array_merge', '', [], 2944],
'strtoupper': ['strtoupper', '', [], 565],
'defined': ['defined', '', [], 4731],
'urlencode': ['urlencode', '', [], 200],
'ltrim': ['ltrim', '', [], 92],
'function_exists': ['function_exists', '', [], 419],
'strip_tags': ['strip_tags', '', [], 150],
'base64_decode': ['base64_decode', '', [], 92],
'sha1': ['sha1', '', [], 186],
'reset': ['reset', '', [], 1213],
'array_key_exists': ['array_key_exists', '', [], 1445],
'preg_replace': ['preg_replace', '', [], 917]};
CLASS_DATA={
'core_php_time_limit': ['core_php_time_limit', 'Utility class to manage PHP time limit. ', [['lib/classes','php_time_limit.php',27]], 92],
'moodle_url': ['moodle_url', 'Class for creating and manipulating urls. ', [['lib','weblib.php',238]], 3088],
'completion_info': ['completion_info', 'Class represents completion information for a course. ', [['lib','completionlib.php',210]], 141],
'context_course': ['context_course', 'Course context class ', [['lib','accesslib.php',6817]], 1323],
'core_text': ['core_text', 'defines string api\'s for manipulating strings ', [['lib/classes','text.php',27]], 566],
'rating_exception': ['rating_exception', 'The rating_exception class for exceptions specific to the ratings system ', [['rating','lib.php',1056]], 45],
'settings_navigation': ['settings_navigation', 'Class used to manage the settings option for the current page ', [['lib','navigationlib.php',3434]], 17],
'course_module_viewed': ['course_module_viewed', 'The mod_page course module viewed event class. ', [['mod/page/classes/event','course_module_viewed.php',28],['mod/chat/classes/event','course_module_viewed.php',29],['mod/quiz/classes/event','course_module_viewed.php',29],['mod/data/classes/event','course_module_viewed.php',30],['mod/choice/classes/event','course_module_viewed.php',28],['mod/forum/classes/event','course_module_viewed.php',29],['mod/resource/classes/event','course_module_viewed.php',29],['mod/book/classes/event','course_module_viewed.php',28],['mod/imscp/classes/event','course_module_viewed.php',30],['mod/lti/classes/event','course_module_viewed.php',29],['mod/feedback/classes/event','course_module_viewed.php',28],['mod/survey/classes/event','course_module_viewed.php',29],['mod/folder/classes/event','course_module_viewed.php',29],['mod/glossary/classes/event','course_module_viewed.php',28],['mod/scorm/classes/event','course_module_viewed.php',28],['mod/url/classes/event','course_module_viewed.php',29],['mod/wiki/classes/event','course_module_viewed.php',28],['lib/tests/fixtures','event_fixtures.php',232],['mod/lesson/classes/event','course_module_viewed.php',30],['mod/workshop/classes/event','course_module_viewed.php',32]], 37],
'comment': ['comment', 'Comment is helper class to add/delete comments anywhere in moodle ', [['comment','lib.php',26],['mod/assign/feedback/editpdf/classes','comment.php',27]], 66],
'mod_glossary_entry_query_builder': ['mod_glossary_entry_query_builder', 'Entry query builder class. ', [['mod/glossary/classes','entry_query_builder.php',27]], 24],
'portfolio_add_button': ['portfolio_add_button', 'Use this to add a portfolio button or icon or form to a page. ', [['lib','portfoliolib.php',54]], 13],
'context_system': ['context_system', 'System context class ', [['lib','accesslib.php',6157]], 1147],
'concept_cache': ['concept_cache', 'Concept caching for glossary filter. ', [['mod/glossary/classes/local','concept_cache.php',28]], 22],
'user_picture': ['user_picture', 'Data structure representing a user picture. ', [['lib','outputcomponents.php',142]], 165],
'comment_exception': ['comment_exception', 'Comment exception class ', [['comment','lib.php',1129]], 66],
'context_module': ['context_module', 'Course module context class ', [['lib','accesslib.php',7039]], 1106],
'entry_viewed': ['entry_viewed', 'The mod_glossary entry viewed event class. ', [['mod/glossary/classes/event','entry_viewed.php',28]], 2],
'single_select': ['single_select', 'Simple form with just one select field that gets submitted automatically. ', [['lib','outputcomponents.php',697]], 50],
'exception': ['exception', 'Session related exception class. ', [['lib/classes/session','exception.php',29],['lib/horde/framework/Horde/Socket/Client','Exception.php',17]], 219],
'csv_import_reader': ['csv_import_reader', 'Utitily class for importing of CSV files. ', [['lib','csvlib.class.php',31]], 55],
'pix_icon': ['pix_icon', 'Data structure representing an icon. ', [['lib','outputcomponents.php',497]], 275],
'file_info_stored': ['file_info_stored', 'Represents an actual file or folder - a row in the file table in the tree navigated by {@link file_browser}. ', [['lib/filebrowser','file_info_stored.php',28]], 33],
'rating_manager': ['rating_manager', 'The rating_manager class provides the ability to retrieve sets of ratings from the database ', [['rating','lib.php',365]], 24],
'html_writer': ['html_writer', 'Simple html output class ', [['lib','outputcomponents.php',1062]], 5120],
'glossary_file_info_container': ['glossary_file_info_container', 'Class representing the virtual node with all itemids in the file browser ', [['mod/glossary','locallib.php',458]], 1]};
CONST_DATA={
'FEATURE_RATE': ['FEATURE_RATE', '', [['lib','moodlelib.php',432]], 10],
'PARAM_ALPHA': ['PARAM_ALPHA', '', [['lib','moodlelib.php',77]], 398],
'COMPLETION_AND': ['COMPLETION_AND', '', [['lib','completionlib.php',131]], 9],
'GLOSSARY_NO_VIEW': ['GLOSSARY_NO_VIEW', '', [['mod/glossary','lib.php',31]], 2],
'FEATURE_SHOW_DESCRIPTION': ['FEATURE_SHOW_DESCRIPTION', '', [['lib','moodlelib.php',437]], 22],
'PORTFOLIO_FORMAT_PLAINHTML': ['PORTFOLIO_FORMAT_PLAINHTML', '', [['lib/portfolio','constants.php',97]], 17],
'GLOSSARY_FULLWITHOUTAUTHOR': ['GLOSSARY_FULLWITHOUTAUTHOR', '', [['mod/glossary','lib.php',50]], 2],
'GLOSSARY_ADDENTRY_VIEW': ['GLOSSARY_ADDENTRY_VIEW', '', [['mod/glossary','lib.php',36]], 2],
'GLOSSARY_CATEGORY': ['GLOSSARY_CATEGORY', '', [['mod/glossary','lib.php',44]], 6],
'FEATURE_MOD_INTRO': ['FEATURE_MOD_INTRO', '', [['lib','moodlelib.php',426]], 31],
'GLOSSARY_DICTIONARY': ['GLOSSARY_DICTIONARY', '', [['mod/glossary','lib.php',49]], 3],
'GRADE_TYPE_SCALE': ['GRADE_TYPE_SCALE', '', [['lib/grade','constants.php',90]], 70],
'GLOSSARY_STANDARD_VIEW': ['GLOSSARY_STANDARD_VIEW', '', [['mod/glossary','lib.php',32]], 20],
'GLOSSARY_EXPORT_VIEW': ['GLOSSARY_EXPORT_VIEW', '', [['mod/glossary','lib.php',38]], 3],
'FEATURE_GRADE_HAS_GRADE': ['FEATURE_GRADE_HAS_GRADE', '', [['lib','moodlelib.php',394]], 29],
'FEATURE_GRADE_OUTCOMES': ['FEATURE_GRADE_OUTCOMES', '', [['lib','moodlelib.php',396]], 23],
'FORMAT_HTML': ['FORMAT_HTML', '', [['lib','weblib.php',47]], 1121],
'FEATURE_COMPLETION_TRACKS_VIEWS': ['FEATURE_COMPLETION_TRACKS_VIEWS', '', [['lib','moodlelib.php',405]], 23],
'FEATURE_BACKUP_MOODLE2': ['FEATURE_BACKUP_MOODLE2', '', [['lib','moodlelib.php',434]], 35],
'CONTEXT_MODULE': ['CONTEXT_MODULE', '', [['lib','accesslib.php',150]], 466],
'PARAM_CLEAN': ['PARAM_CLEAN', '', [['lib','moodlelib.php',258]], 60],
'PORTFOLIO_ADD_ICON_LINK': ['PORTFOLIO_ADD_ICON_LINK', '', [['lib/portfolio','constants.php',190]], 8],
'GRADE_TYPE_NONE': ['GRADE_TYPE_NONE', '', [['lib/grade','constants.php',80]], 47],
'DEBUG_DEVELOPER': ['DEBUG_DEVELOPER', '', [['lib','setuplib.php',40]], 736],
'GLOSSARY_SHOW_NOT_CATEGORISED': ['GLOSSARY_SHOW_NOT_CATEGORISED', '', [['mod/glossary','lib.php',29]], 14],
'GLOSSARY_DATE': ['GLOSSARY_DATE', '', [['mod/glossary','lib.php',45]], 6],
'PARAM_ALPHANUM': ['PARAM_ALPHANUM', '', [['lib','moodlelib.php',88]], 112],
'GLOSSARY_CATEGORY_VIEW': ['GLOSSARY_CATEGORY_VIEW', '', [['mod/glossary','lib.php',33]], 7],
'GLOSSARY_RECENT_ACTIVITY_LIMIT': ['GLOSSARY_RECENT_ACTIVITY_LIMIT', '', [['mod/glossary','lib.php',515]], 5],
'GLOSSARY_IMPORT_VIEW': ['GLOSSARY_IMPORT_VIEW', '', [['mod/glossary','lib.php',37]], 3],
'GLOSSARY_AUTHOR_VIEW': ['GLOSSARY_AUTHOR_VIEW', '', [['mod/glossary','lib.php',35]], 8],
'MUST_EXIST': ['MUST_EXIST', '', [['lib','dmllib.php',52]], 1384],
'GLOSSARY_SHOW_ALL_CATEGORIES': ['GLOSSARY_SHOW_ALL_CATEGORIES', '', [['mod/glossary','lib.php',28]], 14],
'IGNORE_MISSING': ['IGNORE_MISSING', '', [['lib','dmllib.php',48]], 215],
'GLOSSARY_CONTINUOUS': ['GLOSSARY_CONTINUOUS', '', [['mod/glossary','lib.php',48]], 2],
'PORTFOLIO_FORMAT_RICHHTML': ['PORTFOLIO_FORMAT_RICHHTML', '', [['lib/portfolio','constants.php',92]], 19],
'FEATURE_GROUPS': ['FEATURE_GROUPS', '', [['lib','moodlelib.php',414]], 25],
'GLOSSARY_APPROVAL_VIEW': ['GLOSSARY_APPROVAL_VIEW', '', [['mod/glossary','lib.php',39]], 8],
'RATING_UNSET_RATING': ['RATING_UNSET_RATING', '', [['rating','lib.php',26]], 7],
'MEMORY_EXTRA': ['MEMORY_EXTRA', '', [['lib','setuplib.php',50]], 40],
'GRADE_TYPE_VALUE': ['GRADE_TYPE_VALUE', '', [['lib/grade','constants.php',85]], 80],
'GLOSSARY_AUTHOR': ['GLOSSARY_AUTHOR', '', [['mod/glossary','lib.php',43]], 6],
'FEATURE_COMPLETION_HAS_RULES': ['FEATURE_COMPLETION_HAS_RULES', '', [['lib','moodlelib.php',407]], 12],
'FEATURE_GROUPINGS': ['FEATURE_GROUPINGS', '', [['lib','moodlelib.php',416]], 23],
'GLOSSARY_DATE_VIEW': ['GLOSSARY_DATE_VIEW', '', [['mod/glossary','lib.php',34]], 7],
'GLOSSARY_STANDARD': ['GLOSSARY_STANDARD', '', [['mod/glossary','lib.php',42]], 4]};
</script>
<div id="func-popup" class="funcpopup"><p id="func-title" class="popup-title">title</p><p id="func-desc" class="popup-desc">Description</p><p id="func-body" class="popup-body">Body</p></div>
<div id="class-popup" class="funcpopup"><p id="class-title" class="popup-title">title</p><p id="class-desc" class="popup-desc">Description</p><p id="class-body" class="popup-body">Body</p></div>
<div id="const-popup" class="funcpopup"><p id="const-title" class="popup-title">title</p><p id="const-desc" class="popup-desc">Description</p><p id="const-body" class="popup-body">Body</p></div>
<div id="req-popup" class="funcpopup"><p id="req-title" class="popup-title">title</p><p id="req-body" class="popup-body">Body</p></div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu Aug 11 10:00:09 2016</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
