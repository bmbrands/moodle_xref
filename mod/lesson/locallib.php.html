<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
    <title>PHPXRef 0.7.1 : Unnamed Project : Detail view of locallib.php</title>
    <link rel="stylesheet" href="../../sample.css" type="text/css">
    <link rel="stylesheet" href="../../sample-print.css" type="text/css" media="print">
    <style id="hilight" type="text/css"></style>
    <meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
</head>
<body bgcolor="#ffffff" text="#000000" link="#801800" vlink="#300540" alink="#ffffff">
<table class="pagetitle" width="100%">
	<tr>
        <td valign="top" class="pagetitle">
            [ <a href="../../index.html">Index</a> ]
        </td>
        <td align="right" class="pagetitle">
		    <h2 style="margin-bottom: 0px">PHP Cross Reference of Unnamed Project</h2>
	    </td>
    </tr>
</table>


<!-- Generated by PHPXref 0.7.1 at Thu May 28 19:17:31 2015 -->
<!-- PHPXref (c) 2000-2010 Gareth Watts - gareth@omnipotent.net -->
<!-- http://phpxref.sourceforge.net/ -->

<script src="../../phpxref.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
<!--
ext='.html';
relbase='../../';
subdir='mod/lesson';
filename='locallib.php.html';
cookiekey='phpxref';
handleNavFrame(relbase, subdir, filename);

// -->
</script>
<script language="JavaScript" type="text/javascript">
if (gwGetCookie('xrefnav')=='off')
  document.write('<p class="navlinks">[ <a href="javascript:navOn()">Show Explorer<\/a> ]<\/p>');
else
  document.write('<p class="navlinks">[ <a href="javascript:navOff()">Hide Explorer<\/a> ]<\/p>');
</script>
<noscript>
<p class="navlinks">
[ <a href="../../nav.html" target="_top">Show Explorer</a> ]
[ <a href="index.html" target="_top">Hide Navbar</a> ]
</p>
</noscript>
<script language="JavaScript" type="text/javascript">
<!--

document.writeln('<table align="right" class="searchbox-link"><tr><td><a class="searchbox-link" href="javascript:void(0)" onMouseOver="showSearchBox()">Search</a><br>');
document.writeln('<table border="0" cellspacing="0" cellpadding="0" class="searchbox" id="searchbox">');
document.writeln('<tr><td class="searchbox-title">');
document.writeln('<a class="searchbox-title" href="javascript:showSearchPopup()">Search History +</a>');
document.writeln('<\/td><\/tr>');

document.writeln('<tr><td class="searchbox-body" id="searchbox-body">');
document.writeln('<form name="search" style="margin:0px; padding:0px" onSubmit=\'return jump()\'>');
document.writeln('<a class="searchbox-body" href="../../_classes/index.html">Class<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="classname"><br>');
document.writeln('<a id="funcsearchlink" class="searchbox-body" href="../../_functions/index.html">Function<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="funcname"><br>');
document.writeln('<a class="searchbox-body" href="../../_variables/index.html">Variable<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="varname"><br>');
document.writeln('<a class="searchbox-body" href="../../_constants/index.html">Constant<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="constname"><br>');
document.writeln('<a class="searchbox-body" href="../../_tables/index.html">Table<\/a>: ');
document.writeln('<input type="text" size=10 value="" name="tablename"><br>');
document.writeln('<input type="submit" class="searchbox-button" value="Search">');
document.writeln('<\/form>');
document.writeln('<\/td><\/tr><\/table>');
document.writeln('<\/td><\/tr><\/table>');
// -->
</script>
<div id="search-popup" class="searchpopup"><p id="searchpopup-title" class="searchpopup-title">title</p><div id="searchpopup-body" class="searchpopup-body">Body</div><p class="searchpopup-close"><a href="javascript:gwCloseActive()">[close]</a></p></div>
<h2 class="details-heading"><a href="./index.html">/mod/lesson/</a> -> <a href="locallib.php.source.html">locallib.php</a> (summary)</h2>
<div class="details-summary">
<p class="viewlinks">[<a href="locallib.php.source.html">Source view</a>]
[<a href="javascript:window.print();">Print</a>]
[<a href="../../_stats.html">Project Stats</a>]</p>
<p><b>Local library file for Lesson.&nbsp;&nbsp;These are non-standard functions that are used only by Lesson.</b></p>
<table>
<tr><td align="right">Copyright: </td><td>1999 onwards Martin Dougiamas  {@link http://moodle.com}</td></tr>
<tr><td align="right">License: </td><td><a href="http://www.gnu.org/copyleft/gpl.html" target="_blank">http://www.gnu.org/copyleft/gpl.html</a> GNU GPL v3 or late</td></tr>
<tr><td align="right">File Size: </td><td>3467 lines (133 kb)</td></tr>
<tr><td align="right">Included or required:</td><td>0 times</td></tr>
<tr><td align="right" valign="top">Referenced: </td><td>19 times</td></tr>
<tr><td align="right" valign="top">Includes or requires: </td><td>0 files</td></tr>
</table>
<h3>Defines 3 classes</h3>
<div class="inset">
<p><b>lesson::</b> (68 methods):<br>
&nbsp;&nbsp;<a href="#create">create</a>()<br>
&nbsp;&nbsp;<a href="#load">load</a>()<br>
&nbsp;&nbsp;<a href="#delete">delete</a>()<br>
&nbsp;&nbsp;<a href="#delete_override">delete_override</a>()<br>
&nbsp;&nbsp;<a href="#delete_all_overrides">delete_all_overrides</a>()<br>
&nbsp;&nbsp;<a href="#update_effective_access">update_effective_access</a>()<br>
&nbsp;&nbsp;<a href="#get_messages">get_messages</a>()<br>
&nbsp;&nbsp;<a href="#get_attempts">get_attempts</a>()<br>
&nbsp;&nbsp;<a href="#get_firstpage">get_firstpage</a>()<br>
&nbsp;&nbsp;<a href="#get_lastpage">get_lastpage</a>()<br>
&nbsp;&nbsp;<a href="#get_firstpageid">get_firstpageid</a>()<br>
&nbsp;&nbsp;<a href="#get_lastpageid">get_lastpageid</a>()<br>
&nbsp;&nbsp;<a href="#get_next_page">get_next_page</a>()<br>
&nbsp;&nbsp;<a href="#add_message">add_message</a>()<br>
&nbsp;&nbsp;<a href="#is_accessible">is_accessible</a>()<br>
&nbsp;&nbsp;<a href="#start_timer">start_timer</a>()<br>
&nbsp;&nbsp;<a href="#update_timer">update_timer</a>()<br>
&nbsp;&nbsp;<a href="#stop_timer">stop_timer</a>()<br>
&nbsp;&nbsp;<a href="#has_pages">has_pages</a>()<br>
&nbsp;&nbsp;<a href="#link_for_activitylink">link_for_activitylink</a>()<br>
&nbsp;&nbsp;<a href="#load_page">load_page</a>()<br>
&nbsp;&nbsp;<a href="#load_all_pages">load_all_pages</a>()<br>
&nbsp;&nbsp;<a href="#jumpto_is_correct">jumpto_is_correct</a>()<br>
&nbsp;&nbsp;<a href="#time_remaining">time_remaining</a>()<br>
&nbsp;&nbsp;<a href="#cluster_jump">cluster_jump</a>()<br>
&nbsp;&nbsp;<a href="#get_sub_pages_of">get_sub_pages_of</a>()<br>
&nbsp;&nbsp;<a href="#is_sub_page_of_type">is_sub_page_of_type</a>()<br>
&nbsp;&nbsp;<a href="#resort_pages">resort_pages</a>()<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#__set">__set</a>()<br>
&nbsp;&nbsp;<a href="#__get">__get</a>()<br>
&nbsp;&nbsp;<a href="#__isset">__isset</a>()<br>
&nbsp;&nbsp;<a href="#properties">properties</a>()<br>
&nbsp;&nbsp;<a href="#create">create</a>()<br>
&nbsp;&nbsp;<a href="#load">load</a>()<br>
&nbsp;&nbsp;<a href="#delete">delete</a>()<br>
&nbsp;&nbsp;<a href="#move">move</a>()<br>
&nbsp;&nbsp;<a href="#get_answers">get_answers</a>()<br>
&nbsp;&nbsp;<a href="#get_lesson">get_lesson</a>()<br>
&nbsp;&nbsp;<a href="#get_type">get_type</a>()<br>
&nbsp;&nbsp;<a href="#record_attempt">record_attempt</a>()<br>
&nbsp;&nbsp;<a href="#get_jump_name">get_jump_name</a>()<br>
&nbsp;&nbsp;<a href="#__construct">__construct</a>()<br>
&nbsp;&nbsp;<a href="#earned_score">earned_score</a>()<br>
&nbsp;&nbsp;<a href="#callback_on_view">callback_on_view</a>()<br>
&nbsp;&nbsp;<a href="#save_answers_files">save_answers_files</a>()<br>
&nbsp;&nbsp;<a href="#rewrite_answers_urls">rewrite_answers_urls</a>()<br>
&nbsp;&nbsp;<a href="#update">update</a>()<br>
&nbsp;&nbsp;<a href="#add_page_link">add_page_link</a>()<br>
&nbsp;&nbsp;<a href="#is_unseen">is_unseen</a>()<br>
&nbsp;&nbsp;<a href="#is_unanswered">is_unanswered</a>()<br>
&nbsp;&nbsp;<a href="#create_answers">create_answers</a>()<br>
&nbsp;&nbsp;<a href="#check_answer">check_answer</a>()<br>
&nbsp;&nbsp;<a href="#has_option">has_option</a>()<br>
&nbsp;&nbsp;<a href="#max_answers">max_answers</a>()<br>
&nbsp;&nbsp;<a href="#properties">properties</a>()<br>
&nbsp;&nbsp;<a href="#get_jumptooptions">get_jumptooptions</a>()<br>
&nbsp;&nbsp;<a href="#get_contents">get_contents</a>()<br>
&nbsp;&nbsp;<a href="#get_displayinmenublock">get_displayinmenublock</a>()<br>
&nbsp;&nbsp;<a href="#option_description_string">option_description_string</a>()<br>
&nbsp;&nbsp;<a href="#display_answers">display_answers</a>()<br>
&nbsp;&nbsp;<a href="#get_grayout">get_grayout</a>()<br>
&nbsp;&nbsp;<a href="#stats">stats</a>()<br>
&nbsp;&nbsp;<a href="#report_answers">report_answers</a>()<br>
&nbsp;&nbsp;<a href="#get_jumps">get_jumps</a>()<br>
&nbsp;&nbsp;<a href="#requires_manual_grading">requires_manual_grading</a>()<br>
&nbsp;&nbsp;<a href="#override_next_page">override_next_page</a>()<br>
&nbsp;&nbsp;<a href="#valid_page_and_view">valid_page_and_view</a>()<br>
</p>
<p><b>lesson_page_answer::</b> (2 methods):<br>
&nbsp;&nbsp;<a href="#load">load</a>()<br>
&nbsp;&nbsp;<a href="#create">create</a>()<br>
</p>
<p><b>lesson_page_type_manager::</b> (9 methods):<br>
&nbsp;&nbsp;<a href="#get">get</a>()<br>
&nbsp;&nbsp;<a href="#load_lesson_types">load_lesson_types</a>()<br>
&nbsp;&nbsp;<a href="#get_page_type_strings">get_page_type_strings</a>()<br>
&nbsp;&nbsp;<a href="#get_page_type_idstring">get_page_type_idstring</a>()<br>
&nbsp;&nbsp;<a href="#load_page">load_page</a>()<br>
&nbsp;&nbsp;<a href="#check_page_order">check_page_order</a>()<br>
&nbsp;&nbsp;<a href="#load_all_pages">load_all_pages</a>()<br>
&nbsp;&nbsp;<a href="#get_page_form">get_page_form</a>()<br>
&nbsp;&nbsp;<a href="#get_add_page_type_links">get_add_page_type_links</a>()<br>
</p>
</div>
<h3>Defines 9 functions</h3>
<div class="inset">
&nbsp;&nbsp;<a href="#lesson_display_teacher_warning">lesson_display_teacher_warning</a>()<br>
&nbsp;&nbsp;<a href="#lesson_unseen_question_jump">lesson_unseen_question_jump</a>()<br>
&nbsp;&nbsp;<a href="#lesson_unseen_branch_jump">lesson_unseen_branch_jump</a>()<br>
&nbsp;&nbsp;<a href="#lesson_random_question_jump">lesson_random_question_jump</a>()<br>
&nbsp;&nbsp;<a href="#lesson_grade">lesson_grade</a>()<br>
&nbsp;&nbsp;<a href="#lesson_displayleftif">lesson_displayleftif</a>()<br>
&nbsp;&nbsp;<a href="#lesson_add_fake_blocks">lesson_add_fake_blocks</a>()<br>
&nbsp;&nbsp;<a href="#lesson_mediafile_block_contents">lesson_mediafile_block_contents</a>()<br>
&nbsp;&nbsp;<a href="#lesson_clock_block_contents">lesson_clock_block_contents</a>()<br>
&nbsp;&nbsp;<a href="#lesson_menu_block_contents">lesson_menu_block_contents</a>()<br>
&nbsp;&nbsp;<a href="#lesson_add_header_buttons">lesson_add_header_buttons</a>()<br>
&nbsp;&nbsp;<a href="#lesson_get_media_html">lesson_get_media_html</a>()<br>
&nbsp;&nbsp;<a href="#lesson_process_group_deleted_in_course">lesson_process_group_deleted_in_course</a>()<br>
&nbsp;&nbsp;<a href="#custom_definition">custom_definition</a>()<br>
&nbsp;&nbsp;<a href="#get_answer_format">get_answer_format</a>()<br>
&nbsp;&nbsp;<a href="#get_response_format">get_response_format</a>()<br>
&nbsp;&nbsp;<a href="#is_standard">is_standard</a>()<br>
&nbsp;&nbsp;<a href="#definition">definition</a>()<br>
&nbsp;&nbsp;<a href="#add_jumpto">add_jumpto</a>()<br>
&nbsp;&nbsp;<a href="#add_score">add_score</a>()<br>
&nbsp;&nbsp;<a href="#add_answer">add_answer</a>()<br>
&nbsp;&nbsp;<a href="#add_response">add_response</a>()<br>
&nbsp;&nbsp;<a href="#construction_override">construction_override</a>()<br>
</div>
</div>
<br><div class="details-funclist">
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="lesson"><b>lesson</b></a>&nbsp;&nbsp;- <a href="../../_classes/lesson.html"><small>X-Ref</small></a>
</p>
<b>Class representation of a lesson<BR>
</b><br>
This class is used the interact with, and manage a lesson once instantiated.<BR>
If you need to fetch a lesson object you can do so by calling<BR>
<BR>
&lt;code&gt;<BR>
lesson::load($lessonid);<BR>
// or<BR>
$lessonrecord = $DB-&gt;get_record('lesson', $lessonid);<BR>
$lesson = new lesson($lessonrecord);<BR>
&lt;/code&gt;<BR>
<BR>
The class itself extends lesson_base as all classes within the lesson module should<BR>
<BR>
These properties are from the database<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create" onClick="logFunction('create', 'locallib.php.source.html#l1013')" href="locallib.php.source.html#l1013">create</a>(<a href="../../_variables/properties.html">$properties</a>)&nbsp;&nbsp;
<a href="../../_functions/create.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Simply generates a lesson object given an array/object of properties<BR>
Overrides {@see lesson_base-&gt;create()}<BR>
</b><BR><b>param:</b> object|array $properties<br>
<b>return:</b> lesson<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load" onClick="logFunction('load', 'locallib.php.source.html#l1024')" href="locallib.php.source.html#l1024">load</a>(<a href="../../_variables/lessonid.html">$lessonid</a>)&nbsp;&nbsp;
<a href="../../_functions/load.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Generates a lesson object from the database given its id<BR>
</b><BR><b>param:</b> int $lessonid<br>
<b>return:</b> lesson<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete" onClick="logFunction('delete', 'locallib.php.source.html#l1039')" href="locallib.php.source.html#l1039">delete</a>()&nbsp;&nbsp;
<a href="../../_functions/delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Deletes this lesson from the database<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_override" onClick="logFunction('delete_override', 'locallib.php.source.html#l1075')" href="locallib.php.source.html#l1075">delete_override</a>(<a href="../../_variables/overrideid.html">$overrideid</a>)&nbsp;&nbsp;
<a href="../../_functions/delete_override.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Deletes a lesson override from the database and clears any corresponding calendar events<BR>
</b><BR><b>param:</b> int $overrideid The id of the override being deleted<br>
<b>return:</b> bool true on success<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete_all_overrides" onClick="logFunction('delete_all_overrides', 'locallib.php.source.html#l1130')" href="locallib.php.source.html#l1130">delete_all_overrides</a>()&nbsp;&nbsp;
<a href="../../_functions/delete_all_overrides.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Deletes all lesson overrides from the database and clears any corresponding calendar events<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_effective_access" onClick="logFunction('update_effective_access', 'locallib.php.source.html#l1142')" href="locallib.php.source.html#l1142">update_effective_access</a>(<a href="../../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../../_functions/update_effective_access.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Updates the lesson properties with override information for a user.<BR>
</b><BR>Algorithm:&nbsp;&nbsp;For each lesson setting, if there is a matching user-specific override,<BR>
then use that otherwise, if there are group-specific overrides, return the most<BR>
lenient combination of them.&nbsp;&nbsp;If neither applies, leave the quiz setting unchanged.<BR>
<BR>
Special case: if there is more than one password that applies to the user, then<BR>
lesson-&gt;extrapasswords will contain an array of strings giving the remaining<BR>
passwords.<BR>
<BR>
<b>param:</b> int $userid The userid.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_messages" onClick="logFunction('get_messages', 'locallib.php.source.html#l1273')" href="locallib.php.source.html#l1273">get_messages</a>()&nbsp;&nbsp;
<a href="../../_functions/get_messages.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Fetches messages from the session that may have been set in previous page<BR>
actions.<BR>
</b><BR>&lt;code&gt;<BR>
// Do not call this method directly instead use<BR>
$lesson-&gt;messages;<BR>
&lt;/code&gt;<BR>
<BR>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_attempts" onClick="logFunction('get_attempts', 'locallib.php.source.html#l1296')" href="locallib.php.source.html#l1296">get_attempts</a>(<a href="../../_variables/retries.html">$retries</a>, <a href="../../_variables/correct.html">$correct</a>=false, <a href="../../_variables/pageid.html">$pageid</a>=null, <a href="../../_variables/userid.html">$userid</a>=null)&nbsp;&nbsp;
<a href="../../_functions/get_attempts.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get all of the attempts for the current user.<BR>
</b><BR><b>param:</b> int $retries<br>
<b>param:</b> bool $correct Optional: only fetch correct attempts<br>
<b>param:</b> int $pageid Optional: only fetch attempts at the given page<br>
<b>param:</b> int $userid Optional: defaults to the current user if not set<br>
<b>return:</b> array|false<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_firstpage" onClick="logFunction('get_firstpage', 'locallib.php.source.html#l1320')" href="locallib.php.source.html#l1320">get_firstpage</a>()&nbsp;&nbsp;
<a href="../../_functions/get_firstpage.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the first page for the lesson or false if there isn't one.<BR>
</b><BR>This method should be called via the magic method __get();<BR>
&lt;code&gt;<BR>
$firstpage = $lesson-&gt;firstpage;<BR>
&lt;/code&gt;<BR>
<BR>
<b>return:</b> lesson_page|bool Returns the lesson_page specialised object or false<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_lastpage" onClick="logFunction('get_lastpage', 'locallib.php.source.html#l1342')" href="locallib.php.source.html#l1342">get_lastpage</a>()&nbsp;&nbsp;
<a href="../../_functions/get_lastpage.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the last page for the lesson or false if there isn't one.<BR>
</b><BR>This method should be called via the magic method __get();<BR>
&lt;code&gt;<BR>
$lastpage = $lesson-&gt;lastpage;<BR>
&lt;/code&gt;<BR>
<BR>
<b>return:</b> lesson_page|bool Returns the lesson_page specialised object or false<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_firstpageid" onClick="logFunction('get_firstpageid', 'locallib.php.source.html#l1364')" href="locallib.php.source.html#l1364">get_firstpageid</a>()&nbsp;&nbsp;
<a href="../../_functions/get_firstpageid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the id of the first page of this lesson. (prevpageid = 0)<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_lastpageid" onClick="logFunction('get_lastpageid', 'locallib.php.source.html#l1385')" href="locallib.php.source.html#l1385">get_lastpageid</a>()&nbsp;&nbsp;
<a href="../../_functions/get_lastpageid.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the id of the last page of this lesson. (nextpageid = 0)<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_next_page" onClick="logFunction('get_next_page', 'locallib.php.source.html#l1407')" href="locallib.php.source.html#l1407">get_next_page</a>(<a href="../../_variables/nextpageid.html">$nextpageid</a>)&nbsp;&nbsp;
<a href="../../_functions/get_next_page.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets the next page id to display after the one that is provided.<BR>
</b><BR><b>param:</b> int $nextpageid<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_message" onClick="logFunction('add_message', 'locallib.php.source.html#l1454')" href="locallib.php.source.html#l1454">add_message</a>(<a href="../../_variables/message.html">$message</a>, <a href="../../_variables/class.html">$class</a>=&quot;notifyproblem&quot;, <a href="../../_variables/align.html">$align</a>='center')&nbsp;&nbsp;
<a href="../../_functions/add_message.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Sets a message against the session for this lesson that will displayed next<BR>
time the lesson processes messages<BR>
</b><BR><b>param:</b> string $message<br>
<b>param:</b> string $class<br>
<b>param:</b> string $align<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_accessible" onClick="logFunction('is_accessible', 'locallib.php.source.html#l1478')" href="locallib.php.source.html#l1478">is_accessible</a>()&nbsp;&nbsp;
<a href="../../_functions/is_accessible.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Check if the lesson is accessible at the present time<BR>
</b><BR><b>return:</b> bool True if the lesson is accessible, false otherwise<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="start_timer" onClick="logFunction('start_timer', 'locallib.php.source.html#l1488')" href="locallib.php.source.html#l1488">start_timer</a>()&nbsp;&nbsp;
<a href="../../_functions/start_timer.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Starts the lesson time for the current user<BR>
</b><BR><b>return:</b> bool Returns true<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update_timer" onClick="logFunction('update_timer', 'locallib.php.source.html#l1519')" href="locallib.php.source.html#l1519">update_timer</a>(<a href="../../_variables/restart.html">$restart</a>=false, <a href="../../_variables/continue.html">$continue</a>=false, <a href="../../_variables/endreached.html">$endreached</a> =false)&nbsp;&nbsp;
<a href="../../_functions/update_timer.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Updates the timer to the current time and returns the new timer object<BR>
</b><BR><b>param:</b> bool $restart If set to true the timer is restarted<br>
<b>param:</b> bool $continue If set to true AND $restart=true then the timer<br>
<b>return:</b> stdClass The new timer<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="stop_timer" onClick="logFunction('stop_timer', 'locallib.php.source.html#l1583')" href="locallib.php.source.html#l1583">stop_timer</a>()&nbsp;&nbsp;
<a href="../../_functions/stop_timer.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Updates the timer to the current time then stops it by unsetting the user var<BR>
</b><BR><b>return:</b> bool Returns true<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_pages" onClick="logFunction('has_pages', 'locallib.php.source.html#l1605')" href="locallib.php.source.html#l1605">has_pages</a>()&nbsp;&nbsp;
<a href="../../_functions/has_pages.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks to see if the lesson has pages<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="link_for_activitylink" onClick="logFunction('link_for_activitylink', 'locallib.php.source.html#l1614')" href="locallib.php.source.html#l1614">link_for_activitylink</a>()&nbsp;&nbsp;
<a href="../../_functions/link_for_activitylink.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the link for the related activity<BR>
</b><BR><b>return:</b> array|false<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_page" onClick="logFunction('load_page', 'locallib.php.source.html#l1635')" href="locallib.php.source.html#l1635">load_page</a>(<a href="../../_variables/pageid.html">$pageid</a>)&nbsp;&nbsp;
<a href="../../_functions/load_page.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Loads the requested page.<BR>
</b><BR>This function will return the requested page id as either a specialised<BR>
lesson_page object OR as a generic lesson_page.<BR>
If the page has been loaded previously it will be returned from the pages<BR>
array, otherwise it will be loaded from the database first<BR>
<BR>
<b>param:</b> int $pageid<br>
<b>return:</b> lesson_page A lesson_page object or an object that extends it<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_all_pages" onClick="logFunction('load_all_pages', 'locallib.php.source.html#l1654')" href="locallib.php.source.html#l1654">load_all_pages</a>()&nbsp;&nbsp;
<a href="../../_functions/load_all_pages.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Loads ALL of the pages for this lesson<BR>
</b><BR><b>return:</b> array An array containing all pages from this lesson<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="jumpto_is_correct" onClick="logFunction('jumpto_is_correct', 'locallib.php.source.html#l1668')" href="locallib.php.source.html#l1668">jumpto_is_correct</a>(<a href="../../_variables/pageid.html">$pageid</a>, <a href="../../_variables/jumpto.html">$jumpto</a>)&nbsp;&nbsp;
<a href="../../_functions/jumpto_is_correct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Determines if a jumpto value is correct or not.<BR>
</b><BR>returns true if jumpto page is (logically) after the pageid page or<BR>
if the jumpto value is a special value.&nbsp;&nbsp;Returns false in all other cases.<BR>
<BR>
<b>param:</b> int $pageid Id of the page from which you are jumping from.<br>
<b>param:</b> int $jumpto The jumpto number.<br>
<b>return:</b> boolean True or false after a series of tests.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="time_remaining" onClick="logFunction('time_remaining', 'locallib.php.source.html#l1708')" href="locallib.php.source.html#l1708">time_remaining</a>(<a href="../../_variables/starttime.html">$starttime</a>)&nbsp;&nbsp;
<a href="../../_functions/time_remaining.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the time a user has remaining on this lesson<BR>
</b><BR><b>param:</b> int $starttime Starttime timestamp<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="cluster_jump" onClick="logFunction('cluster_jump', 'locallib.php.source.html#l1734')" href="locallib.php.source.html#l1734">cluster_jump</a>(<a href="../../_variables/pageid.html">$pageid</a>, <a href="../../_variables/userid.html">$userid</a>=null)&nbsp;&nbsp;
<a href="../../_functions/cluster_jump.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Interprets LESSON_CLUSTERJUMP jumpto value.<BR>
</b><BR>This will select a page randomly<BR>
and the page selected will be inbetween a cluster page and end of clutter or end of lesson<BR>
and the page selected will be a page that has not been viewed already<BR>
and if any pages are within a branch table or end of branch then only 1 page within<BR>
the branch table or end of branch will be randomly selected (sub clustering).<BR>
<BR>
<b>param:</b> int $pageid Id of the current page from which we are jumping from.<br>
<b>param:</b> int $userid Id of the user.<br>
<b>return:</b> int The id of the next page.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_sub_pages_of" onClick="logFunction('get_sub_pages_of', 'locallib.php.source.html#l1857')" href="locallib.php.source.html#l1857">get_sub_pages_of</a>(<a href="../../_variables/pageid.html">$pageid</a>, array <a href="../../_variables/ends.html">$ends</a>)&nbsp;&nbsp;
<a href="../../_functions/get_sub_pages_of.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Finds all pages that appear to be a subtype of the provided pageid until<BR>
an end point specified within $ends is encountered or no more pages exist<BR>
</b><BR><b>param:</b> int $pageid<br>
<b>param:</b> array $ends An array of LESSON_PAGE_* types that signify an end of<br>
<b>return:</b> array An array of specialised lesson_page objects<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_sub_page_of_type" onClick="logFunction('is_sub_page_of_type', 'locallib.php.source.html#l1882')" href="locallib.php.source.html#l1882">is_sub_page_of_type</a>(<a href="../../_variables/pageid.html">$pageid</a>, array <a href="../../_variables/types.html">$types</a>, array <a href="../../_variables/ends.html">$ends</a>)&nbsp;&nbsp;
<a href="../../_functions/is_sub_page_of_type.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks to see if the specified page[id] is a subpage of a type specified in<BR>
the $types array, until either there are no more pages of we find a type<BR>
corresponding to that of a type specified in $ends<BR>
</b><BR><b>param:</b> int $pageid The id of the page to check<br>
<b>param:</b> array $types An array of types that would signify this page was a subpage<br>
<b>param:</b> array $ends An array of types that mean this is not a subpage<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="resort_pages" onClick="logFunction('resort_pages', 'locallib.php.source.html#l1908')" href="locallib.php.source.html#l1908">resort_pages</a>(<a href="../../_variables/pageid.html">$pageid</a>, <a href="../../_variables/after.html">$after</a>)&nbsp;&nbsp;
<a href="../../_functions/resort_pages.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Move a page resorting all other pages.<BR>
</b><BR><b>param:</b> int $pageid<br>
<b>param:</b> int $after<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'locallib.php.source.html#l2007')" href="locallib.php.source.html#l2007">__construct</a>(<a href="../../_variables/properties.html">$properties</a>)&nbsp;&nbsp;
<a href="../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>The constructor<BR>
</b><BR><b>param:</b> stdClass $properties<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__set" onClick="logFunction('__set', 'locallib.php.source.html#l2015')" href="locallib.php.source.html#l2015">__set</a>(<a href="../../_variables/key.html">$key</a>, <a href="../../_variables/value.html">$value</a>)&nbsp;&nbsp;
<a href="../../_functions/__set.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Magic property method<BR>
</b><BR>Attempts to call a set_$key method if one exists otherwise falls back<BR>
to simply set the property<BR>
<BR>
<b>param:</b> string $key<br>
<b>param:</b> mixed $value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__get" onClick="logFunction('__get', 'locallib.php.source.html#l2031')" href="locallib.php.source.html#l2031">__get</a>(<a href="../../_variables/key.html">$key</a>)&nbsp;&nbsp;
<a href="../../_functions/__get.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Magic get method<BR>
</b><BR>Attempts to call a get_$key method to return the property and ralls over<BR>
to return the raw property<BR>
<BR>
<b>param:</b> str $key<br>
<b>return:</b> mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__isset" onClick="logFunction('__isset', 'locallib.php.source.html#l2047')" href="locallib.php.source.html#l2047">__isset</a>(<a href="../../_variables/key.html">$key</a>)&nbsp;&nbsp;
<a href="../../_functions/__isset.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Stupid PHP needs an isset magic method if you use the get magic method and<BR>
still want empty calls to work.... blah ~!<BR>
</b><BR><b>param:</b> string $key<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="properties" onClick="logFunction('properties', 'locallib.php.source.html#l2072')" href="locallib.php.source.html#l2072">properties</a>()&nbsp;&nbsp;
<a href="../../_functions/properties.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Fetches all of the properties of the object<BR>
</b><BR><b>return:</b> stdClass<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create" onClick="logFunction('create', 'locallib.php.source.html#l2166')" href="locallib.php.source.html#l2166">create</a>(<a href="../../_variables/properties.html">$properties</a>, lesson <a href="../../_variables/lesson.html">$lesson</a>, <a href="../../_variables/context.html">$context</a>, <a href="../../_variables/maxbytes.html">$maxbytes</a>)&nbsp;&nbsp;
<a href="../../_functions/create.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates a new lesson_page within the database and returns the correct pagetype<BR>
object to use to interact with the new lesson<BR>
</b><BR><b>param:</b> object $properties<br>
<b>param:</b> lesson $lesson<br>
<b>return:</b> lesson_page Specialised object that extends lesson_page<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load" onClick="logFunction('load', 'locallib.php.source.html#l2243')" href="locallib.php.source.html#l2243">load</a>(<a href="../../_variables/id.html">$id</a>, lesson <a href="../../_variables/lesson.html">$lesson</a>)&nbsp;&nbsp;
<a href="../../_functions/load.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This method loads a page object from the database and returns it as a<BR>
specialised object that extends lesson_page<BR>
</b><BR><b>param:</b> int $id<br>
<b>param:</b> lesson $lesson<br>
<b>return:</b> lesson_page Specialised lesson_page object<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="delete" onClick="logFunction('delete', 'locallib.php.source.html#l2274')" href="locallib.php.source.html#l2274">delete</a>()&nbsp;&nbsp;
<a href="../../_functions/delete.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Deletes a lesson_page from the database as well as any associated records.<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="move" onClick="logFunction('move', 'locallib.php.source.html#l2341')" href="locallib.php.source.html#l2341">move</a>(<a href="../../_variables/nextpageid.html">$nextpageid</a>=null, <a href="../../_variables/prevpageid.html">$prevpageid</a>=null)&nbsp;&nbsp;
<a href="../../_functions/move.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Moves a page by updating its nextpageid and prevpageid values within<BR>
the database<BR>
</b><BR><b>param:</b> int $nextpageid<br>
<b>param:</b> int $prevpageid<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_answers" onClick="logFunction('get_answers', 'locallib.php.source.html#l2364')" href="locallib.php.source.html#l2364">get_answers</a>()&nbsp;&nbsp;
<a href="../../_functions/get_answers.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the answers that are associated with this page in the database<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_lesson" onClick="logFunction('get_lesson', 'locallib.php.source.html#l2388')" href="locallib.php.source.html#l2388">get_lesson</a>()&nbsp;&nbsp;
<a href="../../_functions/get_lesson.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the lesson this page is associated with<BR>
</b><BR><b>return:</b> lesson<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_type" onClick="logFunction('get_type', 'locallib.php.source.html#l2397')" href="locallib.php.source.html#l2397">get_type</a>()&nbsp;&nbsp;
<a href="../../_functions/get_type.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the type of page this is. Not to be confused with page type<BR>
</b><BR><b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="record_attempt" onClick="logFunction('record_attempt', 'locallib.php.source.html#l2406')" href="locallib.php.source.html#l2406">record_attempt</a>(<a href="../../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../../_functions/record_attempt.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Records an attempt at this page<BR>
</b><BR><b>param:</b> stdClass $context<br>
<b>return:</b> stdClass Returns the result of the attempt<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_jump_name" onClick="logFunction('get_jump_name', 'locallib.php.source.html#l2563')" href="locallib.php.source.html#l2563">get_jump_name</a>(<a href="../../_variables/jumpto.html">$jumpto</a>)&nbsp;&nbsp;
<a href="../../_functions/get_jump_name.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the string for a jump name<BR>
</b><BR><b>param:</b> int $jumpto Jump code or page ID<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="__construct" onClick="logFunction('__construct', 'locallib.php.source.html#l2602')" href="locallib.php.source.html#l2602">__construct</a>(<a href="../../_variables/properties.html">$properties</a>, lesson <a href="../../_variables/lesson.html">$lesson</a>)&nbsp;&nbsp;
<a href="../../_functions/__construct.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Constructor method<BR>
</b><BR><b>param:</b> object $properties<br>
<b>param:</b> lesson $lesson<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="earned_score" onClick="logFunction('earned_score', 'locallib.php.source.html#l2612')" href="locallib.php.source.html#l2612">earned_score</a>(<a href="../../_variables/answers.html">$answers</a>, <a href="../../_variables/attempt.html">$attempt</a>)&nbsp;&nbsp;
<a href="../../_functions/earned_score.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the score for the attempt<BR>
This may be overridden by page types that require manual grading<BR>
</b><BR><b>param:</b> array $answers<br>
<b>param:</b> object $attempt<br>
<b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="callback_on_view" onClick="logFunction('callback_on_view', 'locallib.php.source.html#l2623')" href="locallib.php.source.html#l2623">callback_on_view</a>(<a href="../../_variables/canmanage.html">$canmanage</a>)&nbsp;&nbsp;
<a href="../../_functions/callback_on_view.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This is a callback method that can be override and gets called when ever a page<BR>
is viewed<BR>
</b><BR><b>param:</b> bool $canmanage True if the user has the manage cap<br>
<b>return:</b> mixed<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="save_answers_files" onClick="logFunction('save_answers_files', 'locallib.php.source.html#l2634')" href="locallib.php.source.html#l2634">save_answers_files</a>(<a href="../../_variables/context.html">$context</a>, <a href="../../_variables/maxbytes.html">$maxbytes</a>, &amp;<a href="../../_variables/answer.html">$answer</a>, <a href="../../_variables/answereditor.html">$answereditor</a> = '', <a href="../../_variables/responseeditor.html">$responseeditor</a> = '')&nbsp;&nbsp;
<a href="../../_functions/save_answers_files.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>save editor answers files and update answer record<BR>
</b><BR><b>param:</b> object $context<br>
<b>param:</b> int $maxbytes<br>
<b>param:</b> object $answer<br>
<b>param:</b> object $answereditor<br>
<b>param:</b> object $responseeditor<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="rewrite_answers_urls" onClick="logFunction('rewrite_answers_urls', 'locallib.php.source.html#l2661')" href="locallib.php.source.html#l2661">rewrite_answers_urls</a>(<a href="../../_variables/answer.html">$answer</a>, <a href="../../_variables/rewriteanswer.html">$rewriteanswer</a> = true)&nbsp;&nbsp;
<a href="../../_functions/rewrite_answers_urls.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Rewrite urls in response and optionality answer of a question answer<BR>
</b><BR><b>param:</b> object $answer<br>
<b>param:</b> bool $rewriteanswer must rewrite answer<br>
<b>return:</b> object answer with rewritten urls<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="update" onClick="logFunction('update', 'locallib.php.source.html#l2682')" href="locallib.php.source.html#l2682">update</a>(<a href="../../_variables/properties.html">$properties</a>, <a href="../../_variables/context.html">$context</a> = null, <a href="../../_variables/maxbytes.html">$maxbytes</a> = null)&nbsp;&nbsp;
<a href="../../_functions/update.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Updates a lesson page and its answers within the database<BR>
</b><BR><b>param:</b> object $properties<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_page_link" onClick="logFunction('add_page_link', 'locallib.php.source.html#l2794')" href="locallib.php.source.html#l2794">add_page_link</a>(<a href="../../_variables/previd.html">$previd</a>)&nbsp;&nbsp;
<a href="../../_functions/add_page_link.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Can be set to true if the page requires a static link to create a new instance<BR>
instead of simply being included in the dropdown<BR>
</b><BR><b>param:</b> int $previd<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_unseen" onClick="logFunction('is_unseen', 'locallib.php.source.html#l2804')" href="locallib.php.source.html#l2804">is_unseen</a>(<a href="../../_variables/param.html">$param</a>)&nbsp;&nbsp;
<a href="../../_functions/is_unseen.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns true if a page has been viewed before<BR>
</b><BR><b>param:</b> array|int $param Either an array of pages that have been seen or the<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_unanswered" onClick="logFunction('is_unanswered', 'locallib.php.source.html#l2825')" href="locallib.php.source.html#l2825">is_unanswered</a>(<a href="../../_variables/nretakes.html">$nretakes</a>)&nbsp;&nbsp;
<a href="../../_functions/is_unanswered.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks to see if a page has been answered previously<BR>
</b><BR><b>param:</b> int $nretakes<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create_answers" onClick="logFunction('create_answers', 'locallib.php.source.html#l2838')" href="locallib.php.source.html#l2838">create_answers</a>(<a href="../../_variables/properties.html">$properties</a>)&nbsp;&nbsp;
<a href="../../_functions/create_answers.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Creates answers within the database for this lesson_page. Usually only ever<BR>
called when creating a new page instance<BR>
</b><BR><b>param:</b> object $properties<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="check_answer" onClick="logFunction('check_answer', 'locallib.php.source.html#l2901')" href="locallib.php.source.html#l2901">check_answer</a>()&nbsp;&nbsp;
<a href="../../_functions/check_answer.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This method MUST be overridden by all question page types, or page types that<BR>
wish to score a page.<BR>
</b><BR>The structure of result should always be the same so it is a good idea when<BR>
overriding this method on a page type to call<BR>
&lt;code&gt;<BR>
$result = parent::check_answer();<BR>
&lt;/code&gt;<BR>
before modifying it as required.<BR>
<BR>
<b>return:</b> stdClass<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="has_option" onClick="logFunction('has_option', 'locallib.php.source.html#l2929')" href="locallib.php.source.html#l2929">has_option</a>()&nbsp;&nbsp;
<a href="../../_functions/has_option.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>True if the page uses a custom option<BR>
</b><BR>Should be override and set to true if the page uses a custom option.<BR>
<BR>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="max_answers" onClick="logFunction('max_answers', 'locallib.php.source.html#l2940')" href="locallib.php.source.html#l2940">max_answers</a>(<a href="../../_variables/default.html">$default</a>)&nbsp;&nbsp;
<a href="../../_functions/max_answers.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the maximum number of answers for this page given the maximum number<BR>
of answers permitted by the lesson.<BR>
</b><BR><b>param:</b> int $default<br>
<b>return:</b> int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="properties" onClick="logFunction('properties', 'locallib.php.source.html#l2951')" href="locallib.php.source.html#l2951">properties</a>()&nbsp;&nbsp;
<a href="../../_functions/properties.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the properties of this lesson page as an object<BR>
</b><BR><b>return:</b> stdClass;<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_jumptooptions" onClick="logFunction('get_jumptooptions', 'locallib.php.source.html#l2978')" href="locallib.php.source.html#l2978">get_jumptooptions</a>(<a href="../../_variables/pageid.html">$pageid</a>, lesson <a href="../../_variables/lesson.html">$lesson</a>)&nbsp;&nbsp;
<a href="../../_functions/get_jumptooptions.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an array of options to display when choosing the jumpto for a page/answer<BR>
</b><BR><b>param:</b> int $pageid<br>
<b>param:</b> lesson $lesson<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_contents" onClick="logFunction('get_contents', 'locallib.php.source.html#l3020')" href="locallib.php.source.html#l3020">get_contents</a>()&nbsp;&nbsp;
<a href="../../_functions/get_contents.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the contents field for the page properly formatted and with plugin<BR>
file url's converted<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_displayinmenublock" onClick="logFunction('get_displayinmenublock', 'locallib.php.source.html#l3042')" href="locallib.php.source.html#l3042">get_displayinmenublock</a>()&nbsp;&nbsp;
<a href="../../_functions/get_displayinmenublock.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Set to true if this page should display in the menu block<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="option_description_string" onClick="logFunction('option_description_string', 'locallib.php.source.html#l3050')" href="locallib.php.source.html#l3050">option_description_string</a>()&nbsp;&nbsp;
<a href="../../_functions/option_description_string.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Get the string that describes the options of this page type<BR>
</b><BR><b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="display_answers" onClick="logFunction('display_answers', 'locallib.php.source.html#l3058')" href="locallib.php.source.html#l3058">display_answers</a>(html_table <a href="../../_variables/table.html">$table</a>)&nbsp;&nbsp;
<a href="../../_functions/display_answers.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Updates a table with the answers for this page<BR>
</b><BR><b>param:</b> html_table $table<br>
<b>return:</b> html_table<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_grayout" onClick="logFunction('get_grayout', 'locallib.php.source.html#l3079')" href="locallib.php.source.html#l3079">get_grayout</a>()&nbsp;&nbsp;
<a href="../../_functions/get_grayout.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Determines if this page should be grayed out on the management/report screens<BR>
</b><BR><b>return:</b> int 0 or 1<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="stats" onClick="logFunction('stats', 'locallib.php.source.html#l3087')" href="locallib.php.source.html#l3087">stats</a>(array &amp;<a href="../../_variables/pagestats.html">$pagestats</a>, <a href="../../_variables/tries.html">$tries</a>)&nbsp;&nbsp;
<a href="../../_functions/stats.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Adds stats for this page to the &amp;pagestats object. This should be defined<BR>
for all page types that grade<BR>
</b><BR><b>param:</b> array $pagestats<br>
<b>param:</b> int $tries<br>
<b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="report_answers" onClick="logFunction('report_answers', 'locallib.php.source.html#l3098')" href="locallib.php.source.html#l3098">report_answers</a>(<a href="../../_variables/answerpage.html">$answerpage</a>, <a href="../../_variables/answerdata.html">$answerdata</a>, <a href="../../_variables/useranswer.html">$useranswer</a>, <a href="../../_variables/pagestats.html">$pagestats</a>, &amp;<a href="../../_variables/i.html">$i</a>, &amp;<a href="../../_variables/n.html">$n</a>)&nbsp;&nbsp;
<a href="../../_functions/report_answers.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Formats the answers of this page for a report<BR>
</b><BR><b>param:</b> object $answerpage<br>
<b>param:</b> object $answerdata<br>
<b>param:</b> object $useranswer<br>
<b>param:</b> array $pagestats<br>
<b>param:</b> int $i Count of first level answers<br>
<b>param:</b> int $n Count of second level answers<br>
<b>return:</b> object The answer page for this<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_jumps" onClick="logFunction('get_jumps', 'locallib.php.source.html#l3121')" href="locallib.php.source.html#l3121">get_jumps</a>()&nbsp;&nbsp;
<a href="../../_functions/get_jumps.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Gets an array of the jumps used by the answers of this page<BR>
</b><BR><b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="requires_manual_grading" onClick="logFunction('requires_manual_grading', 'locallib.php.source.html#l3139')" href="locallib.php.source.html#l3139">requires_manual_grading</a>()&nbsp;&nbsp;
<a href="../../_functions/requires_manual_grading.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Informs whether this page type require manual grading or not<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="override_next_page" onClick="logFunction('override_next_page', 'locallib.php.source.html#l3147')" href="locallib.php.source.html#l3147">override_next_page</a>()&nbsp;&nbsp;
<a href="../../_functions/override_next_page.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>A callback method that allows a page to override the next page a user will<BR>
see during when this page is being completed.<BR>
</b><BR><b>return:</b> false|int<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="valid_page_and_view" onClick="logFunction('valid_page_and_view', 'locallib.php.source.html#l3156')" href="locallib.php.source.html#l3156">valid_page_and_view</a>(&amp;<a href="../../_variables/validpages.html">$validpages</a>, &amp;<a href="../../_variables/pageviews.html">$pageviews</a>)&nbsp;&nbsp;
<a href="../../_functions/valid_page_and_view.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This method is used to determine if this page is a valid page<BR>
</b><BR><b>param:</b> array $validpages<br>
<b>param:</b> array $pageviews<br>
<b>return:</b> int The next page id to check<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="lesson_page_answer"><b>lesson_page_answer</b></a>&nbsp;&nbsp;- <a href="../../_classes/lesson_page_answer.html"><small>X-Ref</small></a>
</p>
<b>Class used to represent an answer to a page<BR>
</b><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load" onClick="logFunction('load', 'locallib.php.source.html#l3191')" href="locallib.php.source.html#l3191">load</a>(<a href="../../_variables/id.html">$id</a>)&nbsp;&nbsp;
<a href="../../_functions/load.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Loads an page answer from the DB<BR>
</b><BR><b>param:</b> int $id<br>
<b>return:</b> lesson_page_answer<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="create" onClick="logFunction('create', 'locallib.php.source.html#l3203')" href="locallib.php.source.html#l3203">create</a>(<a href="../../_variables/properties.html">$properties</a>, lesson_page <a href="../../_variables/page.html">$page</a>)&nbsp;&nbsp;
<a href="../../_functions/create.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Given an object of properties and a page created answer(s) and saves them<BR>
in the database.<BR>
</b><BR><b>param:</b> stdClass $properties<br>
<b>param:</b> lesson_page $page<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classinfo">
<p class="details-classtitle">Class: <a name="lesson_page_type_manager"><b>lesson_page_type_manager</b></a>&nbsp;&nbsp;- <a href="../../_classes/lesson_page_type_manager.html"><small>X-Ref</small></a>
</p>
<b>A management class for page types<BR>
</b><br>
This class is responsible for managing the different pages. A manager object can<BR>
be retrieved by calling the following line of code:<BR>
&lt;code&gt;<BR>
$manager&nbsp;&nbsp;= lesson_page_type_manager::get($lesson);<BR>
&lt;/code&gt;<BR>
The first time the page type manager is retrieved the it includes all of the<BR>
different page types located in mod/lesson/pagetypes.<BR>
<BR>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get" onClick="logFunction('get', 'locallib.php.source.html#l3239')" href="locallib.php.source.html#l3239">get</a>(lesson <a href="../../_variables/lesson.html">$lesson</a>)&nbsp;&nbsp;
<a href="../../_functions/get.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Retrieves the lesson page type manager object<BR>
</b><BR>If the object hasn't yet been created it is created here.<BR>
<BR>
<b>param:</b> lesson $lesson<br>
<b>return:</b> lesson_page_type_manager<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_lesson_types" onClick="logFunction('load_lesson_types', 'locallib.php.source.html#l3257')" href="locallib.php.source.html#l3257">load_lesson_types</a>(lesson <a href="../../_variables/lesson.html">$lesson</a>)&nbsp;&nbsp;
<a href="../../_functions/load_lesson_types.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Finds and loads all lesson page types in mod/lesson/pagetypes<BR>
</b><BR><b>param:</b> lesson $lesson<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_page_type_strings" onClick="logFunction('get_page_type_strings', 'locallib.php.source.html#l3280')" href="locallib.php.source.html#l3280">get_page_type_strings</a>(<a href="../../_variables/type.html">$type</a>=null, <a href="../../_variables/special.html">$special</a>=true)&nbsp;&nbsp;
<a href="../../_functions/get_page_type_strings.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an array of strings to describe the loaded page types<BR>
</b><BR><b>param:</b> int $type Can be used to return JUST the string for the requested type<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_page_type_idstring" onClick="logFunction('get_page_type_idstring', 'locallib.php.source.html#l3296')" href="locallib.php.source.html#l3296">get_page_type_idstring</a>(<a href="../../_variables/id.html">$id</a>)&nbsp;&nbsp;
<a href="../../_functions/get_page_type_idstring.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns the basic string used to identify a page type provided with an id<BR>
</b><BR>This string can be used to instantiate or identify the page type class.<BR>
If the page type id is unknown then 'unknown' is returned<BR>
<BR>
<b>param:</b> int $id<br>
<b>return:</b> string<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_page" onClick="logFunction('load_page', 'locallib.php.source.html#l3314')" href="locallib.php.source.html#l3314">load_page</a>(<a href="../../_variables/pageid.html">$pageid</a>, lesson <a href="../../_variables/lesson.html">$lesson</a>)&nbsp;&nbsp;
<a href="../../_functions/load_page.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Loads a page for the provided lesson given it's id<BR>
</b><BR>This function loads a page from the lesson when given both the lesson it belongs<BR>
to as well as the page's id.<BR>
If the page doesn't exist an error is thrown<BR>
<BR>
<b>param:</b> int $pageid The id of the page to load<br>
<b>param:</b> lesson $lesson The lesson the page belongs to<br>
<b>return:</b> lesson_page A class that extends lesson_page<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="check_page_order" onClick="logFunction('check_page_order', 'locallib.php.source.html#l3335')" href="locallib.php.source.html#l3335">check_page_order</a>(<a href="../../_variables/page1.html">$page1</a>, <a href="../../_variables/page2.html">$page2</a>)&nbsp;&nbsp;
<a href="../../_functions/check_page_order.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function detects errors in the ordering between 2 pages and updates the page records.<BR>
</b><BR><b>param:</b> stdClass $page1 Either the first of 2 pages or null if the $page2 param is the first in the list.<br>
<b>param:</b> stdClass $page1 Either the second of 2 pages or null if the $page1 param is the last in the list.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="load_all_pages" onClick="logFunction('load_all_pages', 'locallib.php.source.html#l3369')" href="locallib.php.source.html#l3369">load_all_pages</a>(lesson <a href="../../_variables/lesson.html">$lesson</a>)&nbsp;&nbsp;
<a href="../../_functions/load_all_pages.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This function loads ALL pages that belong to the lesson.<BR>
</b><BR><b>param:</b> lesson $lesson<br>
<b>return:</b> array An array of lesson_page_type_*<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_page_form" onClick="logFunction('get_page_form', 'locallib.php.source.html#l3431')" href="locallib.php.source.html#l3431">get_page_form</a>(<a href="../../_variables/type.html">$type</a>, <a href="../../_variables/arguments.html">$arguments</a>)&nbsp;&nbsp;
<a href="../../_functions/get_page_form.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Fetches an mform that can be used to create/edit an page<BR>
</b><BR><b>param:</b> int $type The id for the page type<br>
<b>param:</b> array $arguments Any arguments to pass to the mform<br>
<b>return:</b> lesson_add_page_form_base<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_add_page_type_links" onClick="logFunction('get_add_page_type_links', 'locallib.php.source.html#l3449')" href="locallib.php.source.html#l3449">get_add_page_type_links</a>(<a href="../../_variables/previd.html">$previd</a>)&nbsp;&nbsp;
<a href="../../_functions/get_add_page_type_links.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns an array of links to use as add page links<BR>
</b><BR><b>param:</b> int $previd The id of the previous page<br>
<b>return:</b> array<br>
</td></tr></table>

<br>
</div>
</div>
<div class="details-classtitle"><a name="functions"><b>Functions</b></a></div>
<div class="details-classinfo">
Functions that are not part of a class:<br><br>
<div class="inset"><table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_display_teacher_warning" onClick="logFunction('lesson_display_teacher_warning', 'locallib.php.source.html#l68')" href="locallib.php.source.html#l68">lesson_display_teacher_warning</a>(<a href="../../_variables/lesson.html">$lesson</a>)&nbsp;&nbsp;
<a href="../../_functions/lesson_display_teacher_warning.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Checks to see if a LESSON_CLUSTERJUMP or<BR>
a LESSON_UNSEENBRANCHPAGE is used in a lesson.<BR>
</b><BR>This function is only executed when a teacher is<BR>
checking the navigation for a lesson.<BR>
<BR>
<b>param:</b> stdClass $lesson Id of the lesson that is to be checked.<br>
<b>return:</b> boolean True or false.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_unseen_question_jump" onClick="logFunction('lesson_unseen_question_jump', 'locallib.php.source.html#l98')" href="locallib.php.source.html#l98">lesson_unseen_question_jump</a>(<a href="../../_variables/lesson.html">$lesson</a>, <a href="../../_variables/user.html">$user</a>, <a href="../../_variables/pageid.html">$pageid</a>)&nbsp;&nbsp;
<a href="../../_functions/lesson_unseen_question_jump.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Interprets the LESSON_UNSEENBRANCHPAGE jump.<BR>
</b><BR>will return the pageid of a random unseen page that is within a branch<BR>
<BR>
<b>param:</b> lesson $lesson<br>
<b>param:</b> int $userid Id of the user.<br>
<b>param:</b> int $pageid Id of the page from which we are jumping.<br>
<b>return:</b> int Id of the next page.<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_unseen_branch_jump" onClick="logFunction('lesson_unseen_branch_jump', 'locallib.php.source.html#l168')" href="locallib.php.source.html#l168">lesson_unseen_branch_jump</a>(<a href="../../_variables/lesson.html">$lesson</a>, <a href="../../_variables/userid.html">$userid</a>)&nbsp;&nbsp;
<a href="../../_functions/lesson_unseen_branch_jump.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handles the unseen branch table jump.<BR>
</b><BR><b>param:</b> lesson $lesson<br>
<b>param:</b> int $userid User id.<br>
<b>return:</b> int Will return the page id of a branch table or end of lesson<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_random_question_jump" onClick="logFunction('lesson_random_question_jump', 'locallib.php.source.html#l226')" href="locallib.php.source.html#l226">lesson_random_question_jump</a>(<a href="../../_variables/lesson.html">$lesson</a>, <a href="../../_variables/pageid.html">$pageid</a>)&nbsp;&nbsp;
<a href="../../_functions/lesson_random_question_jump.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Handles the random jump between a branch table and end of branch or end of lesson (LESSON_RANDOMPAGE).<BR>
</b><BR><b>param:</b> lesson $lesson<br>
<b>param:</b> int $pageid The id of the page that we are jumping from (?)<br>
<b>return:</b> int The pageid of a random page that is within a branch table<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_grade" onClick="logFunction('lesson_grade', 'locallib.php.source.html#l262')" href="locallib.php.source.html#l262">lesson_grade</a>(<a href="../../_variables/lesson.html">$lesson</a>, <a href="../../_variables/ntries.html">$ntries</a>, <a href="../../_variables/userid.html">$userid</a> = 0)&nbsp;&nbsp;
<a href="../../_functions/lesson_grade.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Calculates a user's grade for a lesson.<BR>
</b><BR><b>param:</b> object $lesson The lesson that the user is taking.<br>
<b>param:</b> int $retries The attempt number.<br>
<b>param:</b> int $userid Id of the user (optional, default current user).<br>
<b>return:</b> object { nquestions =&gt; number of questions answered<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_displayleftif" onClick="logFunction('lesson_displayleftif', 'locallib.php.source.html#l386')" href="locallib.php.source.html#l386">lesson_displayleftif</a>(<a href="../../_variables/lesson.html">$lesson</a>)&nbsp;&nbsp;
<a href="../../_functions/lesson_displayleftif.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Determines if a user can view the left menu.&nbsp;&nbsp;The determining factor<BR>
is whether a user has a grade greater than or equal to the lesson setting<BR>
of displayleftif<BR>
</b><BR><b>param:</b> object $lesson Lesson object of the current lesson<br>
<b>return:</b> boolean 0 if the user cannot see, or $lesson-&gt;displayleft to keep displayleft unchanged<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_add_fake_blocks" onClick="logFunction('lesson_add_fake_blocks', 'locallib.php.source.html#l420')" href="locallib.php.source.html#l420">lesson_add_fake_blocks</a>(<a href="../../_variables/page.html">$page</a>, <a href="../../_variables/cm.html">$cm</a>, <a href="../../_variables/lesson.html">$lesson</a>, <a href="../../_variables/timer.html">$timer</a> = null)&nbsp;&nbsp;
<a href="../../_functions/lesson_add_fake_blocks.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b></b><BR><b>param:</b> $cm<br>
<b>param:</b> $lesson<br>
<b>param:</b> $page<br>
<b>return:</b> unknown_type<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_mediafile_block_contents" onClick="logFunction('lesson_mediafile_block_contents', 'locallib.php.source.html#l441')" href="locallib.php.source.html#l441">lesson_mediafile_block_contents</a>(<a href="../../_variables/cmid.html">$cmid</a>, <a href="../../_variables/lesson.html">$lesson</a>)&nbsp;&nbsp;
<a href="../../_functions/lesson_mediafile_block_contents.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>If there is a media file associated with this<BR>
lesson, return a block_contents that displays it.<BR>
</b><BR><b>param:</b> int $cmid Course Module ID for this lesson<br>
<b>param:</b> object $lesson Full lesson record object<br>
<b>return:</b> block_contents<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_clock_block_contents" onClick="logFunction('lesson_clock_block_contents', 'locallib.php.source.html#l477')" href="locallib.php.source.html#l477">lesson_clock_block_contents</a>(<a href="../../_variables/cmid.html">$cmid</a>, <a href="../../_variables/lesson.html">$lesson</a>, <a href="../../_variables/timer.html">$timer</a>, <a href="../../_variables/page.html">$page</a>)&nbsp;&nbsp;
<a href="../../_functions/lesson_clock_block_contents.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>If a timed lesson and not a teacher, then<BR>
return a block_contents containing the clock.<BR>
</b><BR><b>param:</b> int $cmid Course Module ID for this lesson<br>
<b>param:</b> object $lesson Full lesson record object<br>
<b>param:</b> object $timer Full timer record object<br>
<b>return:</b> block_contents<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_menu_block_contents" onClick="logFunction('lesson_menu_block_contents', 'locallib.php.source.html#l511')" href="locallib.php.source.html#l511">lesson_menu_block_contents</a>(<a href="../../_variables/cmid.html">$cmid</a>, <a href="../../_variables/lesson.html">$lesson</a>)&nbsp;&nbsp;
<a href="../../_functions/lesson_menu_block_contents.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>If left menu is turned on, then this will<BR>
print the menu in a block<BR>
</b><BR><b>param:</b> int $cmid Course Module ID for this lesson<br>
<b>param:</b> lesson $lesson Full lesson record object<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_add_header_buttons" onClick="logFunction('lesson_add_header_buttons', 'locallib.php.source.html#l565')" href="locallib.php.source.html#l565">lesson_add_header_buttons</a>(<a href="../../_variables/cm.html">$cm</a>, <a href="../../_variables/context.html">$context</a>, <a href="../../_variables/extraeditbuttons.html">$extraeditbuttons</a>=false, <a href="../../_variables/lessonpageid.html">$lessonpageid</a>=null)&nbsp;&nbsp;
<a href="../../_functions/lesson_add_header_buttons.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Adds header buttons to the page for the lesson<BR>
</b><BR><b>param:</b> object $cm<br>
<b>param:</b> object $context<br>
<b>param:</b> bool $extraeditbuttons<br>
<b>param:</b> int $lessonpageid<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_get_media_html" onClick="logFunction('lesson_get_media_html', 'locallib.php.source.html#l591')" href="locallib.php.source.html#l591">lesson_get_media_html</a>(<a href="../../_variables/lesson.html">$lesson</a>, <a href="../../_variables/context.html">$context</a>)&nbsp;&nbsp;
<a href="../../_functions/lesson_get_media_html.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>This is a function used to detect media types and generate html code.<BR>
</b><BR><b>param:</b> object $lesson<br>
<b>param:</b> object $context<br>
<b>return:</b> string $code the html code of media<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="lesson_process_group_deleted_in_course" onClick="logFunction('lesson_process_group_deleted_in_course', 'locallib.php.source.html#l641')" href="locallib.php.source.html#l641">lesson_process_group_deleted_in_course</a>(<a href="../../_variables/courseid.html">$courseid</a>, <a href="../../_variables/groupid.html">$groupid</a> = null)&nbsp;&nbsp;
<a href="../../_functions/lesson_process_group_deleted_in_course.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Logic to happen when a/some group(s) has/have been deleted in a course.<BR>
</b><BR><b>param:</b> int $courseid The course ID.<br>
<b>param:</b> int $groupid The group id if it is known<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="custom_definition" onClick="logFunction('custom_definition', 'locallib.php.source.html#l727')" href="locallib.php.source.html#l727">custom_definition</a>()&nbsp;&nbsp;
<a href="../../_functions/custom_definition.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Each page type can and should override this to add any custom elements to<BR>
the basic form that they want<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_answer_format" onClick="logFunction('get_answer_format', 'locallib.php.source.html#l733')" href="locallib.php.source.html#l733">get_answer_format</a>()&nbsp;&nbsp;
<a href="../../_functions/get_answer_format.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns answer format used by question type.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="get_response_format" onClick="logFunction('get_response_format', 'locallib.php.source.html#l740')" href="locallib.php.source.html#l740">get_response_format</a>()&nbsp;&nbsp;
<a href="../../_functions/get_response_format.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Returns response format used by question type.<BR>
</b><BR></td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="is_standard" onClick="logFunction('is_standard', 'locallib.php.source.html#l747')" href="locallib.php.source.html#l747">is_standard</a>()&nbsp;&nbsp;
<a href="../../_functions/is_standard.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Used to determine if this is a standard page or a special page<BR>
</b><BR><b>return:</b> bool<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="definition" onClick="logFunction('definition', 'locallib.php.source.html#l755')" href="locallib.php.source.html#l755">definition</a>()&nbsp;&nbsp;
<a href="../../_functions/definition.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Add the required basic elements to the form.<BR>
</b><BR>This method adds the basic elements to the form including title and contents<BR>
and then calls custom_definition();<BR>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_jumpto" onClick="logFunction('add_jumpto', 'locallib.php.source.html#l805')" href="locallib.php.source.html#l805">add_jumpto</a>(<a href="../../_variables/name.html">$name</a>, <a href="../../_variables/label.html">$label</a>=null, <a href="../../_variables/selected.html">$selected</a>=LESSON_NEXTPAGE)&nbsp;&nbsp;
<a href="../../_functions/add_jumpto.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Convenience function: Adds a jumpto select element<BR>
</b><BR><b>param:</b> string $name<br>
<b>param:</b> string|null $label<br>
<b>param:</b> int $selected The page to select by default<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_score" onClick="logFunction('add_score', 'locallib.php.source.html#l825')" href="locallib.php.source.html#l825">add_score</a>(<a href="../../_variables/name.html">$name</a>, <a href="../../_variables/label.html">$label</a>=null, <a href="../../_variables/value.html">$value</a>=null)&nbsp;&nbsp;
<a href="../../_functions/add_score.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Convenience function: Adds a score input element<BR>
</b><BR><b>param:</b> string $name<br>
<b>param:</b> string|null $label<br>
<b>param:</b> mixed $value The default value<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_answer" onClick="logFunction('add_answer', 'locallib.php.source.html#l853')" href="locallib.php.source.html#l853">add_answer</a>(<a href="../../_variables/count.html">$count</a>, <a href="../../_variables/label.html">$label</a> = null, <a href="../../_variables/required.html">$required</a> = false, <a href="../../_variables/format.html">$format</a>= '')&nbsp;&nbsp;
<a href="../../_functions/add_answer.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Convenience function: Adds an answer editor<BR>
</b><BR><b>param:</b> int $count The count of the element to add<br>
<b>param:</b> string $label, null means default<br>
<b>param:</b> bool $required<br>
<b>param:</b> string $format<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="add_response" onClick="logFunction('add_response', 'locallib.php.source.html#l883')" href="locallib.php.source.html#l883">add_response</a>(<a href="../../_variables/count.html">$count</a>, <a href="../../_variables/label.html">$label</a> = null, <a href="../../_variables/required.html">$required</a> = false)&nbsp;&nbsp;
<a href="../../_functions/add_response.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>Convenience function: Adds an response editor<BR>
</b><BR><b>param:</b> int $count The count of the element to add<br>
<b>param:</b> string $label, null means default<br>
<b>param:</b> bool $required<br>
<b>return:</b> void<br>
</td></tr></table>

<br>
<table border="0" width="80%" class="funcinfo"><tr class="funcinfo-title"><td>
<a name="construction_override" onClick="logFunction('construction_override', 'locallib.php.source.html#l906')" href="locallib.php.source.html#l906">construction_override</a>(<a href="../../_variables/pageid.html">$pageid</a>, lesson <a href="../../_variables/lesson.html">$lesson</a>)&nbsp;&nbsp;
<a href="../../_functions/construction_override.html"><small>X-Ref</small></a>
</td></tr><tr class="funcinfo-body"><td><b>A function that gets called upon init of this object by the calling script.<BR>
</b><BR>This can be used to process an immediate action if required. Currently it<BR>
is only used in special cases by non-standard page types.<BR>
<BR>
<b>return:</b> bool<br>
</td></tr></table>

<br>
</div></div>

</div>
<!-- A link to the phpxref site in your customized footer file is appreciated ;-) -->
<br><hr>
<table width="100%">
	<tr><td>Generated: Thu May 28 19:17:31 2015</td>
	<td align="right"><i>Cross-referenced by <a href="http://phpxref.sourceforge.net/">PHPXref 0.7.1</a></i></td>
	</tr>
</table>
</body></html>
